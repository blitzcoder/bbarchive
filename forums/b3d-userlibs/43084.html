<!DOCTYPE html><html lang="en" ><head ><title >Jedive ODE Wrapper</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Jedive ODE Wrapper</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >Jedive ODE Wrapper</a><br><br>
<a name="481664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I haven't test it as much as I would have wanted to, but here it is:<br><br><a href="http://www.galeon.com/jedive/odewrapper/" target="_blank">http://www.galeon.com/jedive/odewrapper/</a><br><br>I am selling the lib for the ridiculous price of 10€. I am selling it through PayPal, so you need a PayPal account in order to purchase it. If something is wrong with the library, PLEASE tell me, and I will fix the issues as fast as I can.<br><br>I wrote this due to a request from a user in this forum. He was going to pay me for my work, but I have decided to better sell it here so other people can use it. That's why it costs money ;)<br><br>I handle the sales myself, so after you make the payment, you'll have to wait until I receive an email from PayPal telling me you bought it, so I can send you the .zip.<br><br>Have fun! <br><br></td></tr></table><br>
<a name="481669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I gave my input to Jedive in creating this DLL, and I can honestly say, he did it all right.  The commands are just as they are in the ODE docs, and the annoying freezing and invisible object problems the other DLL had are nonexistent.  This is well-worth the meager price he is asking for. <br><br></td></tr></table><br>
<a name="481690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dazman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now i have a dilemma, I was just starting to experiment with Tokamak rather than ODE because of the problems i had heard of with the 'old' wrapper.<br>If this wrapper is as good as it sounds would you guys recommend going for ODE over Tokamak (a measly 10 euros aside)? <br><br></td></tr></table><br>
<a name="481694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A demo of some description would be nice.  Can't see many people 'blind-purchasing' tbh.... <br><br></td></tr></table><br>
<a name="481699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have released it now because people were getting impatient, and I haven't had time to make a decent demo of it. I promise to upload one as soon as I have time to make it. It's exams time for me currently :( <br><br></td></tr></table><br>
<a name="481709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck with exams, concentrate on those and not this - in the long term that's better. <br><br>When it's over I'd like to see some demos and an overview of features / commands etc. too :) <br><br></td></tr></table><br>
<a name="481742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just ordered it! <br><br></td></tr></table><br>
<a name="481745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jedive is a solid programmer.  I'm sure he has done a good job on it. <br><br></td></tr></table><br>
<a name="481780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could have made life much easier for yourself by setting up a Share*it account, which can deliver the download automatically for you :)<br><br>In fact it would have made life easier for me too as I don't have a PayPal account. Now I've got to fill in loads of forms and wait a week because it won't take a simple direct payment with a card... what a load of crap.<br><br>Good luck with the exams btw ;) <br><br></td></tr></table><br>
<a name="481787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Paypal processed my debit card just like a payment, all one one screen, only took a couple of minutes. I just got confirmation, and now waiting for Jedive to send the goods.<br><br>I agree share*it would be faster considering Jedive has to sleep. He's probobly sleeping right now damn it. hehe<br><br>8) <br><br></td></tr></table><br>
<a name="481793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange, it won't accept mine (Visa) for some weird reason, it keeps refusing the process and tells me I need to go to the PayPal homepage and setup an account.<br><br>Nothing wrong with the card that's for sure, PayPal sucks! <br><br></td></tr></table><br>
<a name="481794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tested it, it's solid.  Any demo you have seen using ODE is representative of this.<br><br>I would strongly recommend ODE over the alternatives like Tokamak and Newton.  I researched all three, and ODE is far superior.  Why do you think AAA games like S.T.A.L.K.E.R. use it?<br><br>Oh, and he was smart enough to include a non-capped cylinder in the lib.  It's a whole new primitive to use, and a very useful one. <br><br></td></tr></table><br>
<a name="481810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I printed and bound the ODE manual for reference. The manual can be found here: www.ode.org <br><br>I'm anxious to resume my project I'm working on. I'm really pleased Jedive took time to do this wrapper, and want to thank Halo for talking him into it. <br><br>What a bargain for Aprox $12.00 US.<br><br>Cylinders too.. woohoo!!  Somebody go wake Jedive up and have him check his damn email.<br><br>8) <br><br></td></tr></table><br>
<a name="481813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, thanks halo.<br><br>Arrggg, I tried PayPal again, still won't accept the payment.<br><br>I hope Jedive considers using Share*it too, I want to play with it now dammit *sniff* ;) <br><br></td></tr></table><br>
<a name="481815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes, great! At last I have solid choice for my physics needs... physics are "mandatory" these days not to mention how cool &amp; fun they are. Having 100% working "HL2 level" physics in your "indie" gamelet is good for sales... I'll order it next week... have to clear my VISA tab first because I've bought so many books and DVDs from abroad this month already. And my missus is having a big birthday party next weekend so I wouldn't be able to play with ODE anyways :) [or at least that would make my wife VERY unhappy]. <br><br></td></tr></table><br>
<a name="481864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dazman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Non-capped cylinders would be v.useful. If i could pay by share-it i would probably get this immediately (don't like paypal at all). <br><br></td></tr></table><br>
<a name="481986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I received the goods in email this morning. yes!<br>Looks clean and I can't wait to try it out today, at work so it will have to wait till noon.<br><br>The zip file contains:<br><br>ode.bb      2kb  Blitz ODE constants<br>ode.decls  17kb  Blitz Declares<br>ode.dll   664kb  ODE DLL<br>readme.txt  2kb <br>test.bb     3kb<br><br>Readme says:<br>Jedive's ODE Wrapper version 1.0.<br><br>This library contains most of the ODE functions wrapped inside a Dll,<br>and the files needed to use this library in Blitz3D and BlitzPlus.<br><br>Many functions in the C version of ODE return a vector to represent a position,<br>rotation, etc, in 3D space. In this wrapper, these functions do not return any value,<br>but fill the data of an internal vector which you can get by calling dVectorX#(),<br>dVectorY#() and dVectorZ#().<br><br>The original ODE uses a different coordinate system than Blitz. This wrapper<br>uses the same coordinate system as this language.<br><br>The original ODE uses quaternions or matrices for rotations. This wrapper uses euler<br>angles (the same as Blitz).<br><br>It lacks some of the commmands, for example some math functions (because<br>they deal with quaternions and matrices, while this wrapper uses euler angles).<br><br>LICENSE:<br><br>You ARE allowed to distribute the ode.dll file included in this package<br>with your games and applications. You are NOT allowed to distribute this<br>library as part of another physics system (for example, a high-level physics<br>system which uses this library), or as a single package. The rest of the files<br>included here cannot be redistributed.<br><br>Wrapper made by Javier "Jedive" San Juan<br><br>Copyright © 2005 Niven Interactive <br><br></td></tr></table><br>
<a name="482022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo program with the wrapper runs, but it's pretty soft and needs some love and care.<br><br>I'll have the demo retuned shortly.<br>8)<br><br>Thanks Jedive fantastic job! <br><br></td></tr></table><br>
<a name="482062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it already almost the final version?? Or are they some improvements to come??<br><br>I would like a demo before buying it, and be sure that it's not too buggy...<br><br>Anyway, good job, and I am looking forward to test it!! <br><br></td></tr></table><br>
<a name="482070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> a user has found some oddities in the rotation system. I am testing them right now, but it seems that Blitz is a bit odd handling pitch rotations...<br><br>Not improvements, as all the Cipher API functions that can be ported are now in. As Blitz does nor support callbacks, the functions that use them have not been included. Collision is done in ODE through a function callback, so this is not done by the user in this wrapper, but internally by the Dll. <br><br></td></tr></table><br>
<a name="482166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance you could add the Share*it option Jedive?<br><br>I can help you set it up if you like, so you'll only have to add the personal details, passwords and payment info.<br><br>Btw, that pop-up advert is pretty annoying - I take it the host is forcing you to use it? There are plenty of free hosts that don't do that now. <br><br></td></tr></table><br>
<a name="482170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> So is this the complete wrapper with everything in it? <br><br></td></tr></table><br>
<a name="482175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> The wrapper is very detailed, I'm not sure if it runs the ODE demos 100% correctly yet, but it's close.<br><br>I'm checking the original ODE cube stacking program parameters against the demo cube stacking program and parameters. <br><br></td></tr></table><br>
<a name="482208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> The author and I identified some imprecision in the rotation code, which he is fixing up right now.  It's just a matter of switching a couple of axes and flipping some signs. <br><br></td></tr></table><br>
<a name="482242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bugs like this can't be avoided - good thing is that they were found so quickly and are being fixed. This just convinces me more that Jedi-ve-ODE is the right choice for me. <br><br></td></tr></table><br>
<a name="482374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im definitely going to have to get myself involved in selling something Rather than givin it away free.<br><br>I'l be keeping my eye on this as i will be the one i get should it turn out to work properly ;) tis a little early yet though... <br><br></td></tr></table><br>
<a name="482380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dazman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> An interesting development from Arkon on the BlitzODE sticky thread!<br><br>Was Arkons wrapper only problem the freezing issue or where there others? <br><br></td></tr></table><br>
<a name="482392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like this... would get my vote instead. Jedive isn't a time waster. <br><br></td></tr></table><br>
<a name="482399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arkon had his chance.  Besides, his wrapper hides a lot, whereas Jedive's gives you direct access to the whole command set.<br><br>AND Jedive's has a non-capped cylinder primitive.<br><br>Here is a demo that better demonstrates the lib.  I just made a few changes to the Blitz code:<textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Include "ode.bb"

Type Entity
	Field body
	Field geom
	Field ent
End Type

;Create 3D stuff
Graphics3D 800,600,32,2

l = CreateLight()
RotateEntity l, 15, 30, 0
cam = CreateCamera()
PositionEntity cam, 0, 100, -100
RotateEntity cam, 45, 0, 0
;TurnEntity cam,0,45,0,1
CameraClsColor cam, 180, 180, 180

;Make floor texture
ftex = CreateTexture(32,32,9)
etex = CreateTexture(32,32,9)
SetBuffer TextureBuffer(ftex)
ClsColor 255, 255, 255 : Cls
Color 255, 0, 0
Rect 0, 0, 16, 16
Rect 16, 16, 16, 16
SetBuffer TextureBuffer(etex)
ClsColor 255, 255, 255 : Cls
Color 0, 0, 255
Rect 0, 0, 16, 16
Rect 16, 16, 16, 16
SetBuffer BackBuffer()
ScaleTexture ftex, 32, 32

;Setup ODE world
Global world=dWorldCreate()
Global space=dHashSpaceCreate(0)
Global contactgroup=dJointGroupCreate(0)
dWorldSetGravity world, 0, -150*ODE_SCALE, 0
dWorldSetAutoDisableFlag world, True
dContactSetMaxContacts 4
dContactSetMode dContactSoftERP+dContactSoftCFM
dContactSetMu 0.98
dWorldSetContactSurfaceLayer world,0.001

;Create collision plane
dCreatePlane(space, 0, 1, 0, 0)
p=CreatePlane()
PositionEntity p, 0, 0, 0
EntityTexture p, ftex
EntityAlpha p, 0.5
m=CreateMirror()
PositionEntity m,0,0,0

Const ODE_SCALE#=0.01

;Loop
While Not KeyHit(1)
	If KeyHit(57)=True Or MilliSecs()-lasttime&gt;1000
		lasttime=MilliSecs()
		ent.Entity=CreateEntity(world, space, Rand(-10, 10), 100, Rand(-10, 10), Rand(10, 30), Rand(10, 30), 15)
		EntityTexture ent\ent, etex
		EndIf
	dSpaceCollide space, world, contactgroup
	dWorldQuickStep world, 0.02
	dJointGroupEmpty contactgroup
	UpdateEntities
	RenderWorld
	Flip
Wend

;Free ODE stuff
dJointGroupDestroy(contactgroup)
dSpaceDestroy(space)
dWorldDestroy(world)
dCloseODE

End

Function CreateEntity.Entity(world_, space_, x#, y#, z#, w#, h#, d#)
	ent.Entity = New Entity
	ent\body = dBodyCreate(world_)
	ent\geom = dCreateBox(space_, w#*ODE_SCALE, h#*ODE_SCALE, d#*ODE_SCALE)
	ent\ent = CreateCube()
	ScaleMesh ent\ent, w#/2, h#/2, d#/2
	EntityShininess ent\ent, 0.7

	mass = dMassCreate()
	dMassSetBox mass, 1,w#*ODE_SCALE, h#*ODE_SCALE, d#*ODE_SCALE
	dBodySetMass ent\body, mass
	dMassDestroy mass

	dBodySetPosition ent\body, x#*ODE_SCALE, y#*ODE_SCALE, z#*ODE_SCALE
	dGeomSetPosition ent\geom,x,y,z
	dGeomSetBody ent\geom, ent\body

	Return ent
End Function

Function UpdateEntities()
	For ent.Entity = Each Entity
		dGeomGetPosition ent\geom
		PositionEntity ent\ent, dVectorX#()/ODE_SCALE, dVectorY#()/ODE_SCALE, dVectorZ#()/ODE_SCALE
		dBodyGetRotation ent\body
		
		RotateEntity ent\ent,0,0,0
		TurnEntity ent\ent,dVectorZ(),0,0
		TurnEntity ent\ent,0,0,180.0-dVectorX()
		TurnEntity ent\ent,0,dVectorY(),0

		If dBodyIsEnabled(ent\body) Then EntityColor ent\ent, 255, 255, 255 Else EntityColor ent\ent, 255, 255, 0
	Next
End Function</textarea> <br><br></td></tr></table><br>
<a name="482484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> At last, PayPal has finally accepted payment, what an unpleasant experience that was :/<br><br>All I've got to do now is wait for the goodies :D<br><br>Thanks again Jedive &amp; halo for the work you've both put into this userlib. <br><br></td></tr></table><br>
<a name="482489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm.  <br>whats happened to the ODE website?<br><br>I get a 404!<br><br>:(<br><br>...if only this wrapper had non-capped cylinder primitives!  (rotfl)<br><br>IPete2. <br><br></td></tr></table><br>
<a name="482496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just bought this. <br><br></td></tr></table><br>
<a name="482511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at the UpdateEntities() function in halo's example. We have been taking a look at soem issues with rotation. Half of the problem was my routine to convert from quaternions to euler angles. The other half of the problem was due to the way in which Blitz handles rotations. If you rotate an entity like Halo has done in his example, it'll work perfectly. I have to take a look at my quaternion to euler code to fix it anyway ;)<br><br>Are you guys still interested in ShareIt? I used PayPal because:<br><br>1) I get more % of the money.<br>2) I can transfer the earned money to my bank account whenever I want.<br>3) In five minutes I had the Buy Now! button. <br><br></td></tr></table><br>
<a name="482513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dazman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would buy it instantly if you did share-it aswell, although i understand perfectly why you prefer PayPal. <br><br></td></tr></table><br>
<a name="482514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope the changes are quick and easy for you. <br>Get it fixed and send out a new DLL soon as your schedule permits.<br><br>Thanks<br><br>ps I also noticed that ode.org is down (maybe getting too popular). I do have backups of the documentation. <br><br></td></tr></table><br>
<a name="482516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you load your own level mesh in?<br><br>Can you specify different parts of the level to have a different effect?<br><br>How do you know what your object has collided with? <br><br></td></tr></table><br>
<a name="482517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Are you guys still interested in ShareIt?<br> <br></div><br>The best option would be to set up both I guess, that way you'll please everyone. You could always add a few extra $$ to the price of the Share*it option to cover your losses.<br><br>Yippee, I've received the goodies, thanks for the speedy response Jedive :) <br><br></td></tr></table><br>
<a name="482614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those of you that found 'BlitzODE Car Demo' useful will be pleased (I hope) to hear that I've begun work on converting it over to a new 'JediveODE Car Demo' :)<br><br>At first things were looking a little grim, but after some adjustments were made it's beginning to work out ok.<br><br>As soon as it's ready I'll let you all know. <br><br></td></tr></table><br>
<a name="482643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> While www.ode.org is down if anyone needs the documentation please send email with the subject line: ODE Doc Request<br><br>Ill send you the file: ODE_v0.5_Docs  size:213kb<br><br>Great to see you onboard VIP3R! <br><br></td></tr></table><br>
<a name="482653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flying Willy,<br>Yes to your questions flying willy. probobly take a few days as demos are revised and any remaining bugs fixed. It's going to be fun. Having a nice physics engine can do magic for your Blitz projects as some of us already know.<br><br>8) <br><br></td></tr></table><br>
<a name="482655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Wayne :)<br><br>Ok, I've found some problems so I've made a little demo to show what's happening.<br><br>Halo and Jedive, that rotation fix doesn't seem to fix the problem properly. I noticed this when some spheres weren't rolling correctly. The 'dVectorY#()' is out by -90.<br><br>Here is a sphere and cylinder demo which demonstrates correct rotation:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #										Spheres &amp; Cylinders											#
; #									Code by Jim Williams (VIP3R)									#
; ###################################################################################################

Include "ODE.bb"

Graphics3D 800,600,0,2

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

Global Toggle

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetGravity(World,0,-1,0)
dContactSetMode(dContactMotion1)
dContactSetMu(48)

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000
PositionEntity Camera,0,20,-50
RotateEntity Camera,30,0,0

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

While Not KeyHit(1)

	PTime=MilliSecs()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	If MilliSecs()-Timer&gt;800
		AddObject()
		Timer=MilliSecs()
		End If

	UpdateGeoms()

	PhysicsTime#=MilliSecs()-PTime

	UpdateWorld

	RenderWorld

	Text 0,0,"Physics Time:"+PhysicsTime

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function AddObject()

Toggle=Not Toggle

If Toggle=0
	xp=Rand(-4,4)
	zp=Rand(-4,4)
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,xp,30,zp)
	g\geom=dCreateSphere(Space,3)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateSphere()
	ScaleMesh g\mesh,3,3,3
	EntityColor g\mesh,Rand(255),Rand(255),Rand(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
	End If

If Toggle=1
	xp=Rand(-4,4)
	zp=Rand(-4,4)
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,xp,30,zp)
	g\geom=dCreateCCylinder(Space,3,5)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCylinder(8)
	ScaleMesh g\mesh,3,5,3
	EntityColor g\mesh,Rand(255),Rand(255),Rand(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
	End If

End Function

; ###################################################################################################

Function UpdateGeoms()

For g.ODEGeom=Each ODEGeom
	dBodyGetRotation g\body
	RotateEntity g\mesh,dVectorX#(),dVectorY#()-90,dVectorZ#()	;&lt;&lt;&lt; dVectorY#() is out by -90
	dBodyGetPosition g\body
	PositionEntity g\mesh,dVectorX#(),dVectorY#(),dVectorZ#()
Next

End Function

; ###################################################################################################
</textarea><br>Try removing the '-90' in the UpdateGeoms() function and you will see what I'm talking about.<br><br>There appear to be some other minor problems:<br>Boxes bounce on the plane<br>Cylinders and spheres don't bounce on the plane<br>Try replacing the cylinder code in the AddObject() function with the following code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
If Toggle=1
	xp=Rand(-16,-12)
	zp=Rand(-4,4)
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,xp,30,zp)
	g\geom=dCreateBox(Space,4,4,4)		;&lt;&lt;&lt; Twice the size???
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCube()
	ScaleMesh g\mesh,2,2,2
	EntityColor g\mesh,Rand(255),Rand(255),Rand(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
	End If
</textarea><br>Notice the boxes bouncing, but not the spheres. Also, the createbox params need to be twice the size of the blitz entity, unlike the sphere and cylinders.<br><br>It's good practice to rotate <b>before</b> positioning when updating the objects with ODE.<br><br>I'll keep you posted if I find anything else, you've both done a great job so far :) <br><br></td></tr></table><br>
<a name="482696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I notice boxes having funny rotations sometimes too. <br><br></td></tr></table><br>
<a name="482712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jedive<br>Maybe a stupid suggestion but have you tried the Quaternion to Euler code that Mark posted a while ago?<br>Here--&gt; <a href="http://www.blitzbasic.com/Community/posts.php?topic=42657" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=42657</a> <br><br></td></tr></table><br>
<a name="482724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does someone have some exempel how to implant it on .b3d or .x objects... I´m to new to ode psy..<br>Need something to work on. <br><br>please ?<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="482727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll need to use trimesh functions for those, should have something ready soon:<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=43168" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=43168</a> <br><br></td></tr></table><br>
<a name="482734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, looking forward to see it.<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="482755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Success!<br><br>It took some working out but here it is, the new 'JediveODE Car Demo'.<br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1269" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1269</a><br><br>Have fun with it :)<br><br>Now on to the TriMesh function... <br><br></td></tr></table><br>
<a name="482762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really good!<br><br>Thanks VIP3R,<br><br>Waiting for your TriMesh :)<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="482778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> THe major problem with that car demo I see is the friction is too low, and the car slides rather than turning.  I increased the friction, which causes the car to flip...probably why the author turned the friction down so low.  The solution is to decrease the steering angle with speed.  If you did the same kind of turn on a freeway that you do in a parking lot, of course your car would flip. <br><br></td></tr></table><br>
<a name="482785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wanted to keep it as close as possible to the other car demo I did, so that users of the previous wrapper can compare the differences and make amendments to their own code.<br><br>The default settings used would probably suit a dirt track (rallying) or something like that. You need to play with the friction, mass, speed and torque settings to suit your requirements. The steering angle can also be adjusted with the speed as you said. I tried that before releasing the last demo and it can cause problems of it's own, mainly understeering at high speed. Btw the friction is quite high, not low - it's the mass that causes the sliding, try lowering it and see (CMass#=100 WMass#=4).<br><br>Oh, the other thing is it uses spheres for the wheel geometry, the old wrapper (unlike this one) didn't work well with cylinders, so this obviously affects the handling too. I'll experiment with that and make some changes if need be.<br><br>It serves its purpose, that is to act as a guide for new ODE users.<br><br>Anyway, should have the TriMesh routine ready for tomorrow ;) <br><br></td></tr></table><br>
<a name="482814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> The solution certainly isn't to decrease the steering angle with speed. With real cars you have variable masses around the car - for example suspension below, heavy engine at the rear or front. And so on. Tyres are different psi at the back and front too, and this can be emulated by having slightly different friction and mass.<br><br>Arodynamics plays a part - for example the airfoils of a rally car and low centre of gravity all help the car remain very stable.<br><br>To emulate this, we can joint it with a dummy weight lower below the car. This will help prevent high speed flips.<br><br>A lot of creative license goes into making what appears to be realistic physics. <br><br></td></tr></table><br>
<a name="482822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>To emulate this, we can joint it with a dummy weight lower below the car. This will help prevent high speed flips.<br> <br></div><br>That's exactly right, I forgot to mention this. There is a function in the demo that does this very thing. If you check this line: dMassTranslate(mass,0,-1,0) setting the -1 parameter to -10 or greater will increase stability with high friction by lowering the center of gravity.<br><br>It's all just a balancing act really, that's why it's so difficult to get it right. If you change any one individual setting it will affect all of the others. For example, by changing the mass of the car body it will affect the friction, torque and suspension balance. Quite tricky stuff really, it was tough to get it as stable as it is now tbh. Heck, even the big guns don't get it right sometimes. <br><br></td></tr></table><br>
<a name="482831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a typo in the decls file:<br><br>dJointCreatelider%(world, group):"odeJointCreateSlider@8"<br><br>should be...<br><br>dJointCreateSlider%(world, group):"odeJointCreateSlider@8" <br><br></td></tr></table><br>
<a name="482835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> And a possible bug?<br>		;PositionEntity o\ent,dBodyGetPositionX#(o\body),dBodyGetPositionY#(o\body),dBodyGetPositionZ#(o\body)<br>		;RotateEntity o\ent,dBodyGetPitch(o\body),dBodyGetYaw(o\body),dBodyGetRoll(o\body)<br><br>...does not work. <br><br></td></tr></table><br>
<a name="482844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use dVectorX(), y z for now. <br><br></td></tr></table><br>
<a name="482851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> dvector x,y,z gives incorrect rotations - in your own demo.<br><br>The boxes tumble down as expected, but they don't actually tumble in the right direction. It looks like it to the untrained eye, but on my computer, I'm seeing the wrong stuff. <br><br></td></tr></table><br>
<a name="482861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can we see some results please jedive as the following needs to be fixed:<br><br>- correct rotations<br>- dBodyGetPositionX#() etc<br><br>Since we have paid for this out of good faith, we would expect some fixes to come. I don't usually demand, but I have paid you so a fix would be very nice :) <br><br></td></tr></table><br>
<a name="482867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
;creates the mesh to collide with - see ODESPACE variable and pass your space to it.
Function ODECollisionMesh(mesh)
	tris_count% = 0
	vert_count% = 0
	For i = 1 To CountSurfaces(mesh)
		tris_count = tris_count + CountTriangles(GetSurface(mesh, i))
		vert_count = vert_count + CountVertices(GetSurface(mesh, i))
	Next

	vertices_bank% = CreateBank(vert_count * 4 * 4)
	indices_bank% = CreateBank(tris_count * 3 * 4)

	offset = 0
	offset_tris = 0
	baseverts = 0
	
	For i = 1 To CountSurfaces(mesh)
		sf = GetSurface(mesh, i)
		For v = 0 To CountVertices(sf) - 1
			PokeFloat vertices_bank, offset, VertexX(sf, v)
			offset = offset + 4
			PokeFloat vertices_bank, offset, VertexY(sf, v)
			offset = offset + 4
			PokeFloat vertices_bank, offset, VertexZ(sf, v)
			offset = offset + 8
		Next
		For t = 0 To CountTriangles(sf) - 1
			For j = 0 To 2
				v = TriangleVertex(sf, t, j)+baseverts
				PokeInt indices_bank, offset_tris, v
				offset_tris = offset_tris + 4
			Next
		Next
		baseverts=baseverts+CountVertices(sf)
	Next
	
	t_data = dGeomTriMeshDataCreate()
	dGeomTriMeshDataBuildSimple(t_data, vertices_bank, vert_count, indices_bank, tris_count * 3)
 
	Return dCreateTriMesh(ODESpace,t_data)
End Function
</pre><br><br>For your level mesh. I modified it from my arkon ODE work,  I haven't tested it - but it should work fine.<br><br>Can someone modify it further so we can build it up with different meshes having different friction and so forth, or is that kind of flexibility a dream? <br><br></td></tr></table><br>
<a name="482929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys.<br><br>VIP3R, your car demo rocks.<br><br>flying willy, thanks for your TriMesh snippets.<br><br>I am very busy these days with exams. I took a look at the rotation problems but couldn't go much further with all the things I have to do these days. Of course, they will be fixed, as well as all the problems which are fault of my wrapper and not ODE itself. IT's cool that people here is finding workarounds for it while the update arrives. I think that, as I don't have all the time I would like to get this addresses shortly, I will add a dBodyGetQuaternion() or something. There are many experienced people here which can make a QuatToEuler function which works properly. Anyway, I hope than in one week I can have some time to completely fix it myself.<br><br>I haven't tried Mark's code, thanks for the link. Will take a look at it tomorrow. Who nows, maybe it's easier than it looks ;) I have never been very good at maths.<br><br>I also have the intention of making new updates with all the additions that the author of ODE makes, although in its current state I think it is the best *accesible* phyics library. <br><br></td></tr></table><br>
<a name="482970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> I updated the decls, thanks VIP3R !<br><br>ODE wrapper patch,<br>I wish Mark would take 30min of his time and help Jedive correct the small remaining issue with angles. Consider it customer goodwill. <br><br>Heck I wish he would just buy the wrapper from Jedive, offer it as B3D and BMAX addon. I'm going to want it when it comes time to do BMAX.<br><br>Damn exams *bites tongue* <br><br></td></tr></table><br>
<a name="482982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes... Good luck with your exams Jedive.<br><br>I'm not sure with your idea of doing quat to euler in blitz as it will be slower than quat to euler in C++ won't it? Have you tried emailing Mark about this?<br><br>My main worry is that things are completely rotated wrong...<br><br>Jedive, perhaps you should provide the source of the wrapper to people who have actually bought it. Then they can help you further develop it and fix bugs.<br><br>We are not gonna pirate it or post up the source. <br><br></td></tr></table><br>
<a name="482988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> another bug: stack overflow in jedives and halo's box demos.  Keep hitting space rapidly to see it. Debug mode on... sounds like when too many things are made at once in close proximity. <br><br></td></tr></table><br>
<a name="483037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just sent the version 1.01 of the lib. It includes the following:<br><br>- dBodyGetLinearVelX/Y/Z() and dBodyGetAngularVelX/Y/Z() added.<br>- Fixed dJointCreateSlider() declaration in ode.decls file.<br>- Fixed dBodyGetPositionZ().<br>- Added dVectorW().<br>- Added dBodySetQuaternion()/dBodyGetQuaternion() and dGeomSetQuaternion()/dGeomGetQuaternion().<br>- Full source included!<br><br>Haven't had time to check Mark's library, but I'll do it soon. Anyway, it includes the source, so feel free to take a look at it yourself if you have C++ knowledges ;)<br><br>The wrapper includes a project file for Dev-C++, which is what I used for the lib. <br><br></td></tr></table><br>
<a name="483041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Jedive! I knew we could count on you!<br><br>people - if you fix the quaternion/euler thing, or make improvements - please end the results to jedive so he can impliment them! <br><br></td></tr></table><br>
<a name="483045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> bug report: if you make enough boxes in test.bb, eventually it will quit without warning. Hopefully some guys will take a look at it. <br><br></td></tr></table><br>
<a name="483047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> flying willy: How much are 'enough boxes'. I created a lot of boxes in my test to see the 'Stack Overflow' error but it didn't happen. That error only happened when I didn't remove the contact joints each frame. <br><br></td></tr></table><br>
<a name="483056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> replace<br><br>	If KeyHit(57) Then ent.Entity = CreateEntity.......<br><br>with:<br><br>For i=0 To 1<br>	ent.Entity = CreateEntity(world, space, 0,500,0, 10,10,10) : EntityTexture ent\ent, etex<br>Next<br><br>To see stack overflow... <br><br></td></tr></table><br>
<a name="483059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ok. That happens to me with 657 objects, both in Release and Debug modes. There's probably nothing I can do to fix it. The error occurs in the dWorldQuickStep command, to I guess that means that there are too many objects for ODE to handle them. <br><br></td></tr></table><br>
<a name="483065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> this isn't the only occurence of it - it will happen if many overlap too soon - the code above happens immediately in the first loop for me... <br><br></td></tr></table><br>
<a name="483085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is some code for testing the quaternions.  The quaternion to euler routine is in the UpdateEntities() function.  Not correct right now:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Include "ode.bb"

Type Entity
	Field body
	Field geom
	Field ent
End Type

;Create 3D stuff
Graphics3D 800,600,32,2

l = CreateLight()
RotateEntity l, 15, 30, 0
cam = CreateCamera()
PositionEntity cam, 0, 100, -100
RotateEntity cam, 45, 0, 0
;TurnEntity cam,0,45,0,1
CameraClsColor cam, 180, 180, 180

;Make floor texture
ftex = CreateTexture(32,32,9)
etex = CreateTexture(32,32,9)
SetBuffer TextureBuffer(ftex)
ClsColor 255, 255, 255 : Cls
Color 255, 0, 0
Rect 0, 0, 16, 16
Rect 16, 16, 16, 16
SetBuffer TextureBuffer(etex)
ClsColor 255, 255, 255 : Cls
Color 0, 0, 255
Rect 0, 0, 16, 16
Rect 16, 16, 16, 16
SetBuffer BackBuffer()
ScaleTexture ftex, 32, 32

;Setup ODE world
Global world=dWorldCreate()
Global space=dHashSpaceCreate(0)
Global contactgroup=dJointGroupCreate(0)
dWorldSetGravity world, 0, -150*ODE_SCALE, 0
dWorldSetAutoDisableFlag world, True
dContactSetMaxContacts 4
dContactSetMode dContactSoftERP+dContactSoftCFM
dContactSetMu 0.98
dWorldSetContactSurfaceLayer world,0.001

;Create collision plane
dCreatePlane(space, 0, 1, 0, 0)
p=CreatePlane()
PositionEntity p, 0, 0, 0
EntityTexture p, ftex
EntityAlpha p, 0.5
m=CreateMirror()
PositionEntity m,0,0,0

Const ODE_SCALE#=0.01

;Loop
While Not KeyHit(1)
	If MilliSecs()-lasttime&gt;1000
		lasttime=MilliSecs()
		ent.Entity=CreateEntity(world, space, Rand(-10, 10), 100, Rand(-10, 10), Rand(10, 30), Rand(10, 30), 15)
		EntityTexture ent\ent, etex
		EndIf
	dSpaceCollide space, world, contactgroup
	dWorldQuickStep world, 0.02
	dJointGroupEmpty contactgroup
	UpdateEntities
	RenderWorld
	Flip
Wend

;Free ODE stuff
dJointGroupDestroy(contactgroup)
dSpaceDestroy(space)
dWorldDestroy(world)
dCloseODE

End

Function CreateEntity.Entity(world_, space_, x#, y#, z#, w#, h#, d#)
	ent.Entity = New Entity
	ent\body = dBodyCreate(world_)
	ent\geom = dCreateBox(space_, w#*ODE_SCALE, h#*ODE_SCALE, d#*ODE_SCALE)
	ent\ent = CreateCube()
	ScaleMesh ent\ent, w#/2, h#/2, d#/2
	EntityShininess ent\ent, 0.7

	mass = dMassCreate()
	dMassSetBox mass, 1,w#*ODE_SCALE, h#*ODE_SCALE, d#*ODE_SCALE
	dBodySetMass ent\body, mass
	dMassDestroy mass

	dBodySetPosition ent\body, x#*ODE_SCALE, y#*ODE_SCALE, z#*ODE_SCALE
	dGeomSetPosition ent\geom,x,y,z
	dGeomSetBody ent\geom, ent\body

	Return ent
End Function

Function UpdateEntities()
	For ent.Entity = Each Entity
		dGeomGetPosition ent\geom
		PositionEntity ent\ent, dVectorX#()/ODE_SCALE, dVectorY#()/ODE_SCALE, dVectorZ#()/ODE_SCALE
		
		dBodyGetQuaternion ent\body
		
		x#=dVectorX()
		y#=dVectorY()
		z#=dVectorZ()
		w#=dVectorW()
		sp#=-2.0*(y*z+w*x)
		If Abs(sp)&gt;0.9999
			roll#=1.570796*sp
			pitch#=-ATan2(-x*z-w*y,0.5-y*y-z*z)
			yaw#=0.0
			Else
			roll#=ASin(sp)
			pitch#=-ATan2(x*z-w*y,0.5-x*x-y*y)
			yaw#=-ATan2(x*y-w*z,0.5-x*x-z*z)
			EndIf

		RotateEntity ent\ent,pitch,yaw,roll

		If dBodyIsEnabled(ent\body) Then EntityColor ent\ent, 255, 255, 255 Else EntityColor ent\ent, 255, 255, 0
	Next
End Function</textarea><br>Here is the code of interest:<pre class=code>		dBodyGetQuaternion ent\body		
		x#=dVectorX()
		y#=dVectorY()
		z#=dVectorZ()
		w#=dVectorW()
		sp#=-2.0*(y*z+w*x)
		If Abs(sp)&gt;0.9999
			pitch#=1.570796*sp
			roll#=-ATan2(-x*z-w*y,0.5-y*y-z*z)
			yaw#=0.0
			Else
			pitch#=ASin(sp)
			roll#=-ATan2(x*z-w*y,0.5-x*x-y*y)
			yaw#=-ATan2(x*y-w*z,0.5-x*x-z*z)
			EndIf
		RotateEntity ent\ent,pitch,yaw,roll</pre> <br><br></td></tr></table><br>
<a name="483090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is closer:<br><pre class=code>
		dBodyGetQuaternion ent\body		
		x#=dVectorX()
		y#=dVectorY()
		z#=dVectorZ()
		w#=dVectorW()
		sp#=-2.0*(y*z+w*x)
		If Abs(sp)&gt;0.9999
			;ERROR IS IN THESE THREE LINES:
			pitch#=1.570796*sp
			roll#=ATan2(-x*z-w*y,0.5-y*y-z*z)
			yaw#=0.0
			Else
			;This code is fine:
			pitch#=ASin(sp)
			roll#=ATan2(x*z-w*y,0.5-x*x-y*y)
			yaw#=-ATan2(x*y-w*z,0.5-x*x-z*z)
			EndIf
		RotateEntity ent\ent,pitch,yaw,roll
</pre> <br><br></td></tr></table><br>
<a name="483101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon_old</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, until the bugs are fixed and until jedives exams are over I wouldn't consider purchasing yet. I kindof need it to be stable.<br><br>Good work though jedive.<br><br>:) <br><br></td></tr></table><br>
<a name="483137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I had the stack overflow too when I was playing around with the demos. Seems to work ok until the pile of boxes reaches the height of the creation point. It appears to throw the error when there's no more room for the created objects to move or too many objects overlap? Speeding up the box creation in halo's test shows up the problem. I couldn't get the problem to appear in the spheres &amp; cylinders demo I posted earlier though.<br><br>No luck with the TriMesh function yet, it's very similar to the one posted above, so I doubt that one will work either unfortunately.<br><br>When the TriMesh is created it appears to be rotated incorrectly. It's hard to tell exactly which way because the visible mesh doesn't line up with the invisible collision geometry of the mesh properly, the visible mesh is horizontal and the collision geometry seems to be vertical.<br><br>If you get chance Jedive (or halo), could you try the TriMesh function posted above and see if you can figure out what's wrong. Thanks for the update :) <br><br></td></tr></table><br>
<a name="483153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> ODE FAQ<br><br>12.11. The Windows version of ODE crashes with large systems<br>ODE with dWorldStep requires stack space roughly on the order of O(n)+O(m2), where n is the number of bodies and m is the sum of all the joint constraint dimensions. If m is large, this can be a lot of space!<br><br>Unix-like operating systems typically allocate stack space as it is needed, with an upper limit that might be in the hundreds of Mb. Windows compilers normally allocate a much smaller stack. If you experience crashes when running large systems, try increasing the stack size. For example, the MS VC++ command line compiler accepts the /Stack:num flag to set the upper limit.<br><br>Another option is to switch to dWorldQuickStep.<br><br><br>THOUGHTS <br>I'm wondering if Blitz3d needs and option to set a larger stack size?  As for the MAV or stack overflow at 657 objects I could probobly live with that limitation.<br><br>I just got ver 1.01 of the wrapper. Great to see changes made. I was surprised to see the source code is included! Providing the source code is icing on the cake, great buy for $12.00 US. <br><br>I have no doubt any remaining issues will be resolved. I'm off to test the bad boy out. <br><br></td></tr></table><br>
<a name="483157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should be using quickstep anyways, not step. <br><br></td></tr></table><br>
<a name="483179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not necessarily. There are many situations where you have high friction contacts - these will just fail with quickstep no matter what you try.<br><br><div class="quote"> I'm wondering if Blitz3d needs and option to set a larger stack size? As for the MAV or stack overflow at 657 objects I could probobly live with that limitation.  <br></div> it fails with TWO objects here - just create them at the same time in the same place... <br><br></td></tr></table><br>
<a name="483182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Halo, this update function I posted in the spheres &amp; cylinders demo code above appears to have correct rotation, did you try it?<br><br>Here is the function converted to your type properties:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function UpdateEntities()

For ent.Entity=Each Entity
	dBodyGetRotation ent\body
	RotateEntity ent\ent,dVectorX#(),dVectorY#()-90,dVectorZ#()
	dBodyGetPosition ent\body
	PositionEntity ent\ent,dVectorX#()/ODE_SCALE,dVectorY#()/ODE_SCALE,dVectorZ#()/ODE_SCALE

	If dBodyIsEnabled(ent\body) Then EntityColor ent\ent,255,255,255 Else EntityColor ent\ent,255,255,0
Next

End Function
</textarea><br>If there is something wrong with it, what is it exactly? <br><br></td></tr></table><br>
<a name="483184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the only problem is -90 in dvectorY, then perhaps this can be fixed in the dll.<br><br>edit: viper you are correct, it seems -90 fixes the problem. Still getting stack overflows though. Perhaps the stack size can be sufficiently increased.<br><br>Also, whats up with the Get position commands - don't they work yet? we should not actually be using vector etc should we? <br><br></td></tr></table><br>
<a name="483186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> And those having problems with the trimesh function, try using tformpoint to transform the verts into world space properly and use the tformed results in place of vertexx etc...<br><br>See if that fixes your incorrect placement errors. <br><br></td></tr></table><br>
<a name="483191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a way to get the position by cheating btw ;)<br><br>When you create your object, do the following after creating the Blitz entity:<br><br>BlitzMesh=ent\ent (or BlitzMesh=g\mesh with my demos)<br><br>Then you can just call EntityX(BlitzMesh) as if it were a Blitz entity, I did this in the car demo. You can also use the other Blitz entity commands like EntityPitch/Roll/Yaw etc.<br><br>Thanks, I'll try out that TFormPoint idea. <br><br></td></tr></table><br>
<a name="483330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>BUG FIX NOTES: Please Read</b><br><br>I wasn't convinced by the -90 degree rotation solution I suggested so I looked closer at the problem, sure enough it hasn't fixed it properly. Halo's solution doesn't seem to help fix it either.<br><br>The dVectorY#()-90 fix appears to correct the rotation of moving objects but it DOESN'T fix the rotation problem, instead it throws everything else out by -90 degrees. This may give Jedive a clue as to what needs tweaking though.<br><br>I've recreated the JediveODE Car Demo below with identical settings to the BlitzODE Car Demo to see if this helps show up the incorrect physics. The reason it was so tricky to get working when I converted it was due to a number of problems which may explain the weird rotation issues. Other possible problems have also been highlighted and are as follows:<br><br>Accelerate/Reverse - backwards (Z Position reversed?)<br>Steering Left/Right - backwards<br>The car 'rolls' when it should 'pitch' and vice-versa. Swapping the pitch and roll in the UpdateGeoms() function partly fixes the issues, it corrects the wheel rotation and roll/pitch - but the roll is backwards so you have to add a minus to correct it (see the UpdateGeoms() function in the demo below).<br><br>Jedive, here is the JediveODE Car Demo with the BlitzODE Car Demo settings. It shows all of the errors described above and should work correctly if the problems are identified/fixed within the wrapper. Hopefully it may help you when you get chance to take a look at the wrapper code.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #										 JediveODE Car Demo											#
; #									Code by Jim Williams (VIP3R)									#		#
; #						Feel free to use this code, any credit appreciated							#
; ###################################################################################################

AppTitle "JediveODE Car Demo"

Include "ODE.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=8				; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=64	; ### World Friction
Global HingeTorque#=24		; ### Hinge Torque
Global SuspensionHS#=0.01	; ### Hinge Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global Speed#=0
Global Steer#=0

Global Car
Global CGeom
Global CMesh

Const dParamVel2=258
Const dParamFMax2=259

Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetGravity(World,0,-1,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### Create car body

g.ODEGeom=New ODEGeom
g\body=dBodyCreate(World)
Car=g\body
dBodySetRotation(g\body,0,0,0)
dBodySetPosition(g\body,0,0,0)
mass=dMassCreate()
dMassSetBox(mass,1,3,1,4)
dMassSetBoxTotal(mass,CMass,3,1,4)
dMassTranslate(mass,0,-1,0)
dBodySetMass(g\body,mass)
dMassDestroy(mass)
g\geom=dCreateBox(Space,3,1,4)
CGeom=g\geom
dGeomSetBody(g\geom,g\body)
g\mesh=CreateCube()
CMesh=g\mesh
ScaleMesh g\mesh,1.5,0.5,2
RotateMesh g\mesh,0,0,0
PositionMesh g\mesh,0,0,0
EntityColor g\mesh,40,80,255
EntityAlpha g\mesh,1

; ### Create wheels

For count=1 To 4
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	Wheel(count)=g\body
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,0,0,0)
	mass=dMassCreate()
	dMassSetSphere(mass,1,0.7)
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(g\body,mass)
	dMassDestroy(mass)
	g\geom=dCreateSphere(Space,0.7)
	WGeom(count)=g\geom
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCylinder(8)
	ScaleMesh g\mesh,0.7,0.25,0.7
	RotateMesh g\mesh,0,0,90
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,255,255,255
Next

dBodySetPosition(Wheel(1),-2,-0.5,+2)
dBodySetPosition(Wheel(2),+2,-0.5,+2)
dBodySetPosition(Wheel(3),-2,-0.5,-2)
dBodySetPosition(Wheel(4),+2,-0.5,-2)

; ### Create some objects

SeedRnd MilliSecs()

For balls=1 To 20
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,Rnd(-150,150),30,Rnd(-150,150))
	g\geom=dCreateSphere(Space,4)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateSphere()
	ScaleMesh g\mesh,4,4,4
	RotateMesh g\mesh,0,0,0
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
Next

For cylinders=1 To 20
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	dBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,Rnd(-50,50),30,Rnd(-50,50))
	g\geom=dCreateCCylinder(Space,2,3)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCylinder(8)
	ScaleMesh g\mesh,2,3,2
	RotateMesh g\mesh,0,0,0
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh)
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

SetupCar()

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	UpdateCar()

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	UpdateWorld

	RenderWorld

	Text 0,0,"Physics Time:"+PhysicsTime
	Text 0,15,"Car Speed:"+Speed
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"
	Text 0,40,"XPos: "+EntityX(CMesh)
	Text 0,60,"YPos: "+EntityY(CMesh)
	Text 0,80,"ZPos: "+EntityZ(CMesh)
	Text 0,120,"Pitch: "+EntityPitch(CMesh)
	Text 0,140,"Yaw: "+EntityYaw(CMesh)
	Text 0,160,"Roll: "+EntityRoll(CMesh)

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),-1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
		End If
Next

Speed=0

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(30)=1
	Speed=Speed+0.08
	If Speed&gt;30 Then Speed=30
	End If

If KeyDown(44)=1
	Speed=Speed-0.1
	If Speed&lt;-10 Then Speed=-10
	If Speed&gt;0 Then Speed=Speed*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Speed=Speed*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=0.5
		Else
		Steer=-0.5
		End If
	Else
	Steer=0
	End If

If KeyHit(57)=1
	Speed=0
	dBodySetRotation(Car,0,0,0)
	End If

End Function

; ###################################################################################################

Function UpdateCar()

For count=1 To 4
	dBodyEnable(Wheel(count))
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Speed)
	dJointSetHinge2Param(Joint(count),dParamFMax2,HingeTorque)
Next

For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next

End Function

; ###################################################################################################

Function UpdateCam()

PositionEntity CameraPivot,0,3,-12

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh

End Function

; ###################################################################################################

Function UpdateGeoms()

For g.ODEGeom=Each ODEGeom
	RotateEntity g\mesh,dGeomGetPitch#(g\geom),dGeomGetYaw#(g\geom),dGeomGetRoll#(g\geom)
;	RotateEntity g\mesh,dGeomGetRoll#(g\geom),dGeomGetYaw#(g\geom),-dGeomGetPitch#(g\geom)	; &lt;&lt;&lt; Corrects roll/pitch issue
	PositionEntity g\mesh,dGeomGetPositionX#(g\geom),dGeomGetPositionY#(g\geom),dGeomGetPositionZ#(g\geom)
Next

End Function

; ###################################################################################################
</textarea><br>Also, it would be better to use the Geom functions in the UpdateEntities()/UpdateGeoms() function instead of the Body functions, as this will allow you to build static objects (which don't require a 'body' to be assigned to them). <br><br></td></tr></table><br>
<a name="483334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work VIP3R, and for it's worth I noticed the Blitzode update geoms had comma one parm on the end.<br><br><pre class=code>
Function ODE_UpdateGeoms()
	For g.TODEGeom = Each TODEGeom
		PositionEntity g\mesh, ODE_dGeomGetPositionX(g\geom), ODE_dGeomGetPositionY(g\geom), ODE_dGeomGetPositionZ(g\geom)
		RotateEntity g\mesh, ODE_dGeomGetPitch(g\geom), ODE_dGeomGetYaw(g\geom), ODE_dGeomGetRoll(g\geom), 1
	Next
End Function
</pre> <br><br></td></tr></table><br>
<a name="483340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> That means rotate globally, not locally, I think it's only used for children isn't it? <br><br></td></tr></table><br>
<a name="483347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=490" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=490</a><br>shows how to take a typical quat and convert to blitz euler.<br><br>I would prefer this to be done in C++ for speed of course!<br><br>Another thing - ODE has a function to convert quat to euler - why isn't this used?<br><br><pre class=code>
; convert a Quat to a Rotation
Function QuatToEuler(out.Rotation, src.Quat)
	Local sint#, cost#, sinv#, cosv#, sinf#, cosf#
	Local cost_temp#

	sint = (2 * src\w * src\y) - (2 * src\x * src\z)
	cost_temp = 1.0 - (sint * sint)

	If Abs(cost_temp) &gt; QuatToEulerAccuracy
		cost = Sqr(cost_temp)
	Else
		cost = 0
	EndIf

	If Abs(cost) &gt; QuatToEulerAccuracy
		sinv = ((2 * src\y * src\z) + (2 * src\w * src\x)) / cost
		cosv = (1 - (2 * src\x * src\x) - (2 * src\y * src\y)) / cost
		sinf = ((2 * src\x * src\y) + (2 * src\w * src\z)) / cost
		cosf = (1 - (2 * src\y * src\y) - (2 * src\z * src\z)) / cost
	Else
		sinv = (2 * src\w * src\x) - (2 * src\y * src\z)
		cosv = 1 - (2 * src\x * src\x) - (2 * src\z * src\z)
		sinf = 0
		cosf = 1
	EndIf

	; Generate the output rotation
	out\roll = -ATan2(sinv, cosv) ;  inverted due to change in handedness of coordinate system
	out\pitch = ATan2(sint, cost)
	out\yaw = ATan2(sinf, cosf)
End Function
</pre><br><br>Perhaps this can be converted to C++ and included in the lib? <br><br></td></tr></table><br>
<a name="483349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, the '1' is a global/local parameter, it doesn't have any effect on the geometry update from what I can see.<br><br>I've been thinking more about this rotation problem, if there was some way to seperate the initial rotation (when the object is created) from the update rotation this problem would be quite easily fixed with -90 on the Y axis (during the updating only). This would need to be done within the wrapper code though.<br><br>The trouble is, without the -90, all rotation and positioning matches blitz's rotation and positioning exactly. So any objects created using ODE or Blitz would have identical orientation. But adding -90 means that although it fixes the movement rotation, every object created ends up 90 degrees out from blitz's rotation. Hope that made sense :)<br><br>Btw, the GetPositionX,Y,Z and GetPitch,Yaw,Roll work ok with the new update so we can do away with the vector stuff in the update function now.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function UpdateGeoms()

For g.ODEGeom=Each ODEGeom
	RotateEntity g\mesh,dGeomGetPitch#(g\geom),dGeomGetYaw#(g\geom),dGeomGetRoll#(g\geom)
	PositionEntity g\mesh,dGeomGetPositionX#(g\geom),dGeomGetPositionY#(g\geom),dGeomGetPositionZ#(g\geom)
Next

End Function
</textarea> <br><br></td></tr></table><br>
<a name="483351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> have you tried the above func to see if it works? I don't know much C++ <br><br></td></tr></table><br>
<a name="483353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's already in, I've checked the lib source against that QuatToEuler function and it matches exactly with the exception of the following:<br><pre class=code>
roll = -atan2(sinv, cosv) * RAD2DEG
pitch = atan2(sint, cost) * RAD2DEG
yaw = atan2(sinf, cosf) * RAD2DEG
</pre><br>RAD2DEG is a constant set at 57.2957795130823208767981548141052<br><br>These are the ODE functions to call within Blitz (halo uses one of them in his fix attempt above):<br>dBodyGetQuaternion(body)<br>dBodySetQuaternion(body,qw#,qx#,qy#,qz#)<br>dGeomGetQuaternion(geom)<br>dGeomSetQuaternion(geom,qw#,qx#,qy#,qz#) <br><br></td></tr></table><br>
<a name="483362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm wondering if we should call the ODE functions within C++ and see what the result is then.<br><br>Also, in my trimesh function above, I can't seem to get it working under jedive ODE for some reason! it was working fine with arkon's lib...<br><br>But the priority is correct rotations  of course :)<br><br>edit: yeah I see what you mean about the rotated stuff. This needs fixing in the actual dll for sanity's sake - if arkon and vorderman can do it, so can we. Lemmie see if I can get vorderman's email as he may be able to throw us a bone.... ok - I couldn't find his email, but he's here: <a href="http://www.blitzbasic.com/Account/showuser.php?id=954" target="_blank">http://www.blitzbasic.com/Account/showuser.php?id=954</a><br><br>sweenie might be able to help us as well if you can get hold of him. <br><br></td></tr></table><br>
<a name="483377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> :( <br><br></td></tr></table><br>
<a name="483460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't find my old ODE dll source code, but I have the blitz side of it - this is the function that returns the orientation of an ODE body for Blitz to use -<br><br>Remember this was made before Blitz could use DECLS files so you had to use banks and suchlike, so it's pretty clunky...<br><br><pre class=code>
Function ODE_Get_Object_Rotation(obnum , ob.ODE_Object)
	
;	Local mBankOut = CreateBank(12)
;	Local mBankIn = CreateBank(12)
	PokeInt(mBankIn,0,obnum)

	PokeInt(mBankIn,4,0)
	PokeInt(mBankIn,8,ob\geomonly)	;geom only flag
	returned = CallDLL(DLLNAME$,"get_object_rotation_component",mBankIn,mBankOut)
	ob\q1# = PeekFloat(mBankOut,0)

	PokeInt(mBankIn,4,1)
	PokeInt(mBankIn,8,ob\geomonly)	;geom only flag
	returned = CallDLL(DLLNAME$,"get_object_rotation_component",mBankIn,mBankOut)
	ob\q2# = PeekFloat(mBankOut,0)

	PokeInt(mBankIn,4,2)
	PokeInt(mBankIn,8,ob\geomonly)	;geom only flag
	returned = CallDLL(DLLNAME$,"get_object_rotation_component",mBankIn,mBankOut)
	ob\q3# = PeekFloat(mBankOut,0)

	PokeInt(mBankIn,4,3)
	PokeInt(mBankIn,8,ob\geomonly)	;geom only flag
	returned = CallDLL(DLLNAME$,"get_object_rotation_component",mBankIn,mBankOut)
	ob\q4# = PeekFloat(mBankOut,0)
	
	tempx# = EntityX#(ob\mesh,True)
	tempy# = EntityY#(ob\mesh,True)
	tempz# = EntityZ#(ob\mesh,True)
	PositionEntity ob\mesh,0,0,0
	PositionEntity ODE_tempPivot,0,0,0
    RotateEntity ob\mesh, 0, 0, 0
   	AlignToVector ODE_tempPivot, -ob\q2# , -ob\q4#, -ob\q3#, 3    ; aim z-axis...
    EntityParent ob\mesh, ODE_tempPivot
   	TurnEntity ODE_tempPivot, 0, 0, 2 * ACos( ob\q1# )
    EntityParent ob\mesh, 0        ; undo parent / child relationship
	PositionEntity ob\mesh,tempx#,tempy#,tempz#

	ob\xa# = EntityPitch(ob\mesh,1)	
	ob\ya# = EntityYaw(ob\mesh,1)	
	ob\za# = EntityRoll(ob\mesh,1)	

End Function
</pre> <br><br></td></tr></table><br>
<a name="483461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are using the quaternion to align the entity, but I am actually looking for code to convert the quaternion to euler angles.  Points for inventiveness. <br><br></td></tr></table><br>
<a name="483483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> check out the advice I got from a C++ programmer using a 3D engine which accepts Euler angles:<br><br><pre class=code>
void AnglesFromMatrix ( D3DXMATRIX* pmatMatrix, D3DXVECTOR3* pVecAngles )
{
	// Thanks to Andrew for finding this gem!
	// from <a href="http://www.martinb.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm" target="_blank">http://www.martinb.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm</a>
	
	float m00 = pmatMatrix-&gt;_11;
	float m01 = pmatMatrix-&gt;_12;
	float m02 = pmatMatrix-&gt;_13;
	float m12 = pmatMatrix-&gt;_23;
	float m22 = pmatMatrix-&gt;_33;
	float heading = (float)atan2(m01,m00);
	float attitude = (float)atan2(m12,m22);
	float bank = (float)asin(-m02);

	// check for gimbal lock
	if ( fabs ( m02 ) &gt; 1.0f )
	{
		// looking straight up or down
		float PI = D3DX_PI / 2.0f;
		pVecAngles-&gt;x = 0.0f;
		pVecAngles-&gt;y = D3DXToDegree ( PI * m02 );
		pVecAngles-&gt;z = 0.0f;
	}
	else
	{
		pVecAngles-&gt;x = D3DXToDegree ( attitude );
		pVecAngles-&gt;y = D3DXToDegree ( bank );
		pVecAngles-&gt;z = D3DXToDegree ( heading );
	}
}
</pre><br>What do you think? he says ODE returns a MATRIX which you can use the directx-native function calls to extract. Hope this helps... better we do this in the C++ DLL than in blitz for simplicity and speed.<br><br>I think this is the baby we need. <br><br></td></tr></table><br>
<a name="483549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> I examined the wrapper source and I'm a bit worried that for each call to getposition and getangle, jedive is calling the ENTIRE QuatToEuler function over and over again, instead of just once... a lot of optimisation can be done there I think :) <br><br></td></tr></table><br>
<a name="483731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> in blitz3d programming, mark has pasted his code for blitz3d transforms.<br><br>Of particular note:<br><br><pre class=code>
inline float quatPitch( const Quat &amp;q ){
	return q.k().pitch();
}

inline float quatYaw( const Quat &amp;q ){
	return q.k().yaw();
}

inline float quatRoll( const Quat &amp;q ){
	return matrixRoll( q );
}
</pre><br><br>I included Mark's entire maths code and tidied up a couple of things, however, I tried to modify the ode getpitch/yaw/roll to throw the quat given by ODE directly into marks functions and return the results but no joy (syntax errors as I am not familiar with C++).<br><br>However I believe the code I pasted a couple of paragraphs above IS what we need to do. Instead of COSTLY conversion from quat to euler, we have to access the ODE rotation matrix for the rigid body DIRECTLY.<br><br>ODE goes through this transformation anyway to give you a quat, so you may as well cut a long story short and do it directly. The above code does this, however I lack the means to put it into action. <br><br></td></tr></table><br>
<a name="483742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> This lib isn't going anywhere really is it? I'm just talking to myself I guess. <br><br></td></tr></table><br>
<a name="483746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Friends! I Am Register At End!. I have been working with Arkon Wrapper and Jedive Wrapper. Both Great. I have a very realistic car demo with suspension, gears, no roll's, brakes, hand brakes, etc. I am going to prepare a little .zip or .rar demo and i will advise you! It uses an own modified version of Arkon Wrapper.<br><br>P:D: Perhaps Jedive Could ask Arkon for the rotation code and trimesh code! <br><br></td></tr></table><br>
<a name="483770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> @KuRiX: Sounds good :)<br><br>@Flying: I've currently got my head stuck deep into C++, trying out a few ideas. Not quite there yet, but I'm getting closer to nailing the rotation errors. I'm not sure whether this is a conversion (Quat&gt;Euler) error, the geometry rotation is correct (or at least very close), it's the mesh that's misaligned. Once I've figured that bit out we should be fairly close to getting it working correctly.<br><br>From what I can tell, the TriMesh data functions aren't yet fully supported by the wrapper, that's why we can't get the TriMesh working at the moment.<br><br>I'll keep you up to date on my progress ;) <br><br></td></tr></table><br>
<a name="483829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here it is, my car demo. Should be in the Arkon thread, but this is the actual ode thread i think:<br><br>www.lcuriel.arrakis.es/CarDemoKuRi.rar<br><br>Take care when driving :)<br>Infinite plane to avoid falling in the holes :D <br><br></td></tr></table><br>
<a name="483871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice demo! how do you prevent "sinking" artifacts in the trimesh?<br><br>Look forwards to your progress viper :)<br><br>Anyone got arkon source code? I dropped a donation by but never recieved anything - I guess $1 isn't enough hahahahaha! :) <br><br></td></tr></table><br>
<a name="483899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the sinking problem, if using Arkon Wrapper, be aware that the mass you set is the mass for a simple objeto, it doesn't take care if it is a box, sphere (bug corrected in my modified wrapper version).<br><br>So set the mass to a high value (200) but not too much. It is better to have less mass and more gravity. And of course use a step of 0.05 or 0.08<br><br>Good Luck! <br><br></td></tr></table><br>
<a name="483910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tips!<br><br>Even rotating the trimesh in jedive ode, it's clearly apparent that it's broken to bits and doesn't work well at all. I leave this problem in the hands of greater minds. <br><br></td></tr></table><br>
<a name="483999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder if this would help: <a href="http://q12.org/pipermail/ode/2003-April/008123.html" target="_blank">http://q12.org/pipermail/ode/2003-April/008123.html</a> <br><br></td></tr></table><br>
<a name="484014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> ummm... I don't get it - wayne, in your link it shows that "You can use dBodyGetRotation() to get Euler angles" -- if this is the case why are we all trying to pointlessly convert?<br><br>All we need to do is swap the order right? <br><br></td></tr></table><br>
<a name="484041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> someone posted a question on the OdeMax thread on the<br>max forum asking about eular rotations<br><br>The full source code to odemax can be downloaded from www.traklink.com<br><br>Its a simple solution to eular rotations, but it works!<br><br>hope this helps<br><br>All the best... <br><br></td></tr></table><br>
<a name="484146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>' transfers the objects matrix into opengl ready for render
Function SetTransformMat(geom:Int)

	Local R:Float Ptr
	Local pos:Float Ptr 
	Local matrix:Float[16];

	pos =Float Ptr  dGeomGetPosition (geom);
	R = Float Ptr dGeomGetRotation (geom);

	matrix[0]=R[0];		matrix[1]=R[4];		matrix[2]=R[8];		matrix[3]=0;
	matrix[4]=R[1];		matrix[5]=R[5];		matrix[6]=R[9];		matrix[7]=0;
	matrix[8]=R[2];		matrix[9]=R[6];		matrix[10]=R[10];		matrix[11]=0;

	matrix[12]=pos[0];	matrix[13]=pos[1];	matrix[14]=pos[2];	matrix[15]=1;

	glMultMatrixf (matrix);

EndFunction

Function EulerRotateGeom(geom:Int,x:Float,y:Float,z:Float)
	glPushMatrix()
	glLoadIdentity()
	glRotatef x,1,0,0
	glRotatef y,0,1,0
	glRotatef z,0,0,1
	SetTransformMat(Geom)
	Local m:Float[16]
	Local m2:Float[16]
	glGetFloatv(GL_MODELVIEW_MATRIX,Varptr m[0])
	m2[0]=m[0];			m2[1]=m[4];		m2[2]=m[8];			m2[3]=m[12]
	m2[4]=m[1];			m2[5]=m[5];		m2[6]=m[9];			m2[7]=m[13]
	m2[8]=m[2];			m2[9]=m[6];		m2[10]=m[10];		m2[11]=m[14]
	m2[12]=0;			m2[13]=0;		m2[14]=0;			m2[15]=1
	dGeomSetRotation(geom,Varptr m2[0])
	glPopMatrix()
End Function</pre><br><br>Thanks Chris! This seems to be the blitzmax/opengl code you refer to that performs quat to euler. Is it a bit like the void AnglesFromMatrix C++ routine above?<br><br>Nice work btw, although I can't understand it :) <br><br></td></tr></table><br>
<a name="484155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> jdive feel free to contact me...<br><br><br><br>briefly<br><br>get the ODE matrix (from the quat, using ODE) convert to an openGL matrix and multiply with SetTransformMat<br><br>(this routine is primarly used for directly using the ode geom matrix to setup each ogl model matrix)<br><br>EulerRotateGeom does the ogl&gt;ode matrix conversion after rotating it<br><br>btw i've had 60+ d/loads on ODEMAX and 1 tentitive offer of help, please if you have max step up...<br><br><img src="http://traklink.com/images/stories/odemax.jpg"> v0.03 "world" here created with the ODEMAX demo<br><br>keep up the good work here, good to see some community spirit! <br><br></td></tr></table><br>
<a name="484225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Chris C, thanks for all of your help it's much appreciated, you've done a great job with your ODEMax project so far :)<br><br>Unfortunately, I don't think the ODEMax equations would be compatible with this lib as an OpenGL matrix (BlitzMax) is a bit different to a DirectX matrix (Blitz3D). <br><br></td></tr></table><br>
<a name="484233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Viper - did you check out the dx matrix stuff above? it's being used by a bloke using ODE with an euler DX engine. <br><br></td></tr></table><br>
<a name="484235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just bought it - hopefully Jedive (or somebody) can find time to fix those smallish bugs it has. It looks generally speaking great and I really need it for my game(s). Thumbs up Jedive! <br><br></td></tr></table><br>
<a name="484241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>FIXED ROTATION/POSITIONING &amp; ORIENTATION!!! :)</b><br><br>Well, my head hurts a lot but I've managed to pinpoint and correct the errors with the rotation/positioning and orientation issues. I've also managed to increase stability in the physics.<br><br>As I suspected the (Euler&lt;&gt;Quaternion) conversions were not at fault as far as I can tell.<br><br>The problems were in the following areas:<br>maxcontacts (changed internal integer for stability)<br>dBodySetRotation (corrected yaw)<br>dBodyGetYaw (corrected yaw)<br>dGeomSetRotation (corrected yaw)<br>dGeomGetYaw (corrected yaw)<br>dCreateBox (corrected orientation)<br><br>My main objective was to use the same orientation for ODE entity positioning/rotation as Blitz itself uses. So if you create a cube in Blitz, and then create another using the ODE wrapper they would have identical orientation properties. It's worth noting that Arkons wrapper does NOT have the same orientation as Blitz's entities, which leads to confusion when creating and positioning ODE/non-ODE objects.<br><br>The reason it was so confusing to figure out what was wrong with the wrapper, was due to the fact I was using a Blitz cube and an ODE box to figure out alignment issues. As soon as I realised the ODE box was being setup incorrectly, it was a simple process to correct everything.<br><br>With the fixed ODE.dll you can now create objects and expect them to be orientated as they would be using Blitz's own entities - and of course everything rotates/collides correctly now.<br><br>I've tested this on the (corrected) Car Demo and it works fine.<br><br>I'll send Jedive the new source with all of the corrections so that he can add it to the next update.<br><br>In the mean time, try this car demo code below, it contains all of the corrections (via blitz) so that you can test it with the current dll. The only thing it doesn't correct is the stability (which is internal to the dll).<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ###################################################################################################
; #										 JediveODE Car Demo											#
; #									Code by Jim Williams (VIP3R)									#		#
; #						Feel free to use this code, any credit appreciated							#
; ###################################################################################################

AppTitle "JediveODE Car Demo"

Include "ODE.bb"

Graphics3D 800,600,0,2

Global CMass#=200			; ### Car Mass
Global WMass#=8				; ### Wheel Mass

Global WorldERP#=1			; ### World Error Correction
Global WorldFriction#=64	; ### World Friction
Global HingeTorque#=24		; ### Hinge Torque
Global SuspensionHS#=0.01	; ### Hinge Suspension Hardness/Softness (Higher=Softer - Lower=Harder)

Global Speed#=0
Global Steer#=0

Global Car
Global CGeom
Global CMesh

Const dParamVel2=258
Const dParamFMax2=259

Dim Wheel(4)
Dim WGeom(4)
Dim Joint(4)

Type ODEGeom
	Field body
	Field geom
	Field mesh
End Type

; ###################################################################################################

; ### Setup ODE

Global World=dWorldCreate()
Global Space=dHashSpaceCreate(0)
Global ContactGroup=dJointGroupCreate(0)

dWorldSetGravity(World,0,-1,0)
dWorldSetERP(World,WorldERP)

dContactSetMode(dContactSlip1)
dContactSetMu(WorldFriction)

; ### Create car body

g.ODEGeom=New ODEGeom
g\body=dBodyCreate(World)
Car=g\body
FIXdBodySetRotation(g\body,0,0,0)
dBodySetPosition(g\body,0,0,0)
mass=dMassCreate()
dMassSetBox(mass,1,3,1,4)
dMassSetBoxTotal(mass,CMass,3,1,4)
dMassTranslate(mass,0,-1,0)
dBodySetMass(g\body,mass)
dMassDestroy(mass)
g\geom=FIXdCreateBox(Space,3,1,4)
CGeom=g\geom
dGeomSetBody(g\geom,g\body)
g\mesh=CreateCube()
CMesh=g\mesh
ScaleMesh g\mesh,1.5,0.5,2
RotateMesh g\mesh,0,0,0
PositionMesh g\mesh,0,0,0
EntityColor g\mesh,40,80,255
EntityAlpha g\mesh,1

; ### Create wheels

For count=1 To 4
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	Wheel(count)=g\body
	FIXdBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,0,0,0)
	mass=dMassCreate()
	dMassSetSphere(mass,1,0.7)
	dMassSetSphereTotal(mass,WMass,0.7)
	dBodySetMass(g\body,mass)
	dMassDestroy(mass)
	g\geom=dCreateSphere(Space,0.7)
	WGeom(count)=g\geom
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCylinder(8)
	ScaleMesh g\mesh,0.7,0.25,0.7
	RotateMesh g\mesh,0,0,90
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,255,255,255
Next

; ### Create some objects

SeedRnd MilliSecs()

For balls=1 To 20
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	FIXdBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,Rnd(-150,150),30,Rnd(-150,150))
	g\geom=dCreateSphere(Space,4)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateSphere()
	ScaleMesh g\mesh,4,4,4
	RotateMesh g\mesh,0,0,0
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
Next

For cylinders=1 To 20
	g.ODEGeom=New ODEGeom
	g\body=dBodyCreate(World)
	FIXdBodySetRotation(g\body,0,0,0)
	dBodySetPosition(g\body,Rnd(-50,50),30,Rnd(-50,50))
	g\geom=dCreateCCylinder(Space,2,3)
	dGeomSetBody(g\geom,g\body)
	g\mesh=CreateCylinder(8)
	ScaleMesh g\mesh,2,3,2
	RotateMesh g\mesh,0,0,0
	PositionMesh g\mesh,0,0,0
	EntityColor g\mesh,Rnd(255),Rnd(255),Rnd(255)
	EntityAlpha g\mesh,1
	EntityShininess g\mesh,0.7
Next

; ### Create light

Global Light=CreateLight()

RotateEntity Light,45,-90,0
LightColor Light,255,255,255
AmbientLight 130,130,130

; ### Create camera

Global CameraPivot=CreatePivot(CMesh)
PositionEntity CameraPivot,0,2,-7

Global Camera=CreateCamera()
CameraClsColor Camera,0,0,0
CameraRange Camera,1,1000

; ### Create plane

dCreatePlane(Space,0,1,0,0)

Plane=CreatePlane()

EntityAlpha Plane,0.8

PlaneTexture=CreateTexture(128,128,9)

ClsColor 0,200,80
Cls

Color 255,255,255

Rect 0,0,64,64,1
Rect 64,64,64,64,1

CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(PlaneTexture)
ScaleTexture PlaneTexture,20,20
EntityTexture Plane,PlaneTexture,0,0

Mirror=CreateMirror()

; ###################################################################################################

; ### BLITZ TEST OBJECT (White)

blitzobject=CreateCube()
ScaleMesh blitzobject,1,4,20
RotateMesh blitzobject,-10,8,4
PositionMesh blitzobject,10,5,10

EntityColor blitzobject,255,255,255
EntityAlpha blitzobject,1

; ### ODE STATIC TEST OBJECT (Blue)

g.ODEGeom=New ODEGeom
g\geom=FIXdCreateBox(Space,2,8,40)
FIXdGeomSetRotation(g\geom,-10,8,4)
dGeomSetPosition(g\geom,20,5,10)
g\mesh=CreateCube()
ScaleMesh g\mesh,1,4,20
RotateMesh g\mesh,0,0,0
PositionMesh g\mesh,0,0,0

EntityColor g\mesh,0,100,200
EntityAlpha g\mesh,1

; ###################################################################################################

SetupCar()

While Not KeyHit(1)

	UpdateKeys()

	PTime=MilliSecs()

	UpdateCar()

	UpdateGeoms()

	dSpaceCollide(Space,World,ContactGroup)
	dWorldQuickStep(World,0.1)
	dJointGroupEmpty(ContactGroup)

	PhysicsTime#=MilliSecs()-PTime

	UpdateCam()

	UpdateWorld

	RenderWorld

	Text 0,0,"Physics Time:"+PhysicsTime
	Text 0,15,"Car Speed:"+Speed
	Text 640,0,"A - Accelerate"
	Text 640,15,"Z - Brake/Reverse"
	Text 640,30,"Arrows - Steering"
	Text 640,45,"Space - Reset Car"

	Flip

Wend

dJointGroupDestroy(ContactGroup)
dSpaceDestroy(Space)
dWorldDestroy(World)
dCloseODE()

End

; ###################################################################################################

Function SetupCar()

dBodySetPosition(Wheel(1),-2,-0.5,+2)
dBodySetPosition(Wheel(2),+2,-0.5,+2)
dBodySetPosition(Wheel(3),-2,-0.5,-2)
dBodySetPosition(Wheel(4),+2,-0.5,-2)

For count=1 To 4
	Joint(count)=dJointCreateHinge2(World,0)
	dJointAttach(Joint(count),Car,Wheel(count))
	dJointSetHinge2Anchor(Joint(count),dBodyGetPositionX(Wheel(count)),dBodyGetPositionY(Wheel(count)),dBodyGetPositionZ(Wheel(count)))
	dJointSetHinge2Axis1(Joint(count),0,1,0)
	dJointSetHinge2Axis2(Joint(count),1,0,0)
	dJointSetHinge2Param(Joint(count),dParamSuspensionERP,0.8)
	dJointSetHinge2Param(Joint(count),dParamSuspensionCFM,SuspensionHS)
	If count&gt;2
		dJointSetHinge2Param(Joint(count),dParamLoStop,0)
		dJointSetHinge2Param(Joint(count),dParamHiStop,0)
		End If
Next

Speed=0

End Function

; ###################################################################################################

Function UpdateKeys()

If KeyDown(30)=1
	Speed=Speed+0.08
	If Speed&gt;30 Then Speed=30
	End If

If KeyDown(44)=1
	Speed=Speed-0.1
	If Speed&lt;-10 Then Speed=-10
	If Speed&gt;0 Then Speed=Speed*0.97
	End If

If KeyDown(30)=0 And KeyDown(44)=0 Then Speed=Speed*0.99

If KeyDown(203)=1 Or KeyDown(205)=1
	If KeyDown(203)=1
		Steer=-0.5
		Else
		Steer=0.5
		End If
	Else
	Steer=0
	End If

If KeyHit(57)=1
	Speed=0
	FIXdBodySetRotation(Car,0,0,0)
	End If

End Function

; ###################################################################################################

Function UpdateCar()

For count=1 To 4
	dBodyEnable(Wheel(count))
Next

dBodyEnable(Car)

For count=1 To 4
	dJointSetHinge2Param(Joint(count),dParamVel2,Speed)
	dJointSetHinge2Param(Joint(count),dParamFMax2,HingeTorque)
Next

For count=1 To 2
	angle#=Steer-dJointGetHinge2Angle1(Joint(count))
	dJointSetHinge2Param(Joint(count),dParamVel,angle)
	dJointSetHinge2Param(Joint(count),dParamFMax,400)
Next

End Function

; ###################################################################################################

Function UpdateCam()

PositionEntity CameraPivot,0,3,-12

camx#=EntityX(CameraPivot,1)-EntityX(Camera)
camy#=EntityY(CameraPivot,1)-EntityY(Camera)
camz#=EntityZ(CameraPivot,1)-EntityZ(Camera)

TranslateEntity Camera,camx*0.5,camy*0.5,camz*0.5

PointEntity Camera,CMesh

End Function

; ###################################################################################################

Function FIXdBodySetRotation(body,rx,ry,rz)

dBodySetRotation(body,rx,ry+90,rz)

End Function

; ###################################################################################################

Function FIXdGeomSetRotation(geom,rx,ry,rz)

dGeomSetRotation(geom,rx,ry+90,rz)

End Function

; ###################################################################################################

Function FIXdCreateBox(sp,w,h,d)

Return dCreateBox(sp,d,h,w)

End Function

; ###################################################################################################

Function UpdateGeoms()

For g.ODEGeom=Each ODEGeom
	RotateEntity g\mesh,dGeomGetPitch#(g\geom),dGeomGetYaw#(g\geom)-90,dGeomGetRoll#(g\geom)
	PositionEntity g\mesh,dGeomGetPositionX#(g\geom),dGeomGetPositionY#(g\geom),dGeomGetPositionZ#(g\geom)
Next

End Function

; ###################################################################################################
</textarea><br>The white rectangle is a standard Blitz entity and the blue one is an ODE entity, as you can see they are correctly orientated to each other.<br><br>Btw, the ODE box dimensions still need to be double that of the Blitz entity dimensions, this is easily fixed within the wrapper too. I'll check the dimensions of the ODE objects against Blitz entities next and see if I can correct those before I send Jedive the updated source.<br><br>Let me know if you find any problems. <br><br></td></tr></table><br>
<a name="484243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh you little genius! you've brought a massive grin to my face! :)<br><br>Does this fix trimesh orientation n sutff as well? also, do you want 10 euros? hehe <br><br></td></tr></table><br>
<a name="484245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dazman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your the man VIP3R, well done fella :) :) :) <br><br></td></tr></table><br>
<a name="484246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure about the TriMesh yet, as soon as I've checked the dimension stuff I'll take a closer look at it.<br><br>Hehe 10 euros, nah this ones on me :)<br><br>Feel free to make a purchase at Devious Codeworks though if you really want to help me out, that way you get a free product too :P <br><br></td></tr></table><br>
<a name="484291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow this is awesome. Couldn't read all the post in this thread (getting big!), but I'm glad you found the error with rotation. Will check it when I have some time, really really busy this week.<br><br>Anyway, if you e-mail me the code, I'll make another update.<br><br>Thanks man. <br><br></td></tr></table><br>
<a name="484315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> waiting for my update :)<br><br>please look at trimesh as well if you can as it's important to collide with levels! <br><br></td></tr></table><br>
<a name="484317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, I'll email the source as soon as I've finished tweaking :)<br><br>Currently fixing:<br>dCreateBox (all dimensions need to be doubled)<br>dCreateCylinder (orientation wrong, maybe dimensions too?)<br>dCreateCCylinder (length dimensions wrong - see below)<br><br>Anyway, I'll try and get those fixed and email the source to Jedive by tonight, he can then send you all the new update ;)<br><br>[edit] @Flying: I'll be taking a look at the TriMesh stuff too after these tweaks :) <br><br></td></tr></table><br>
<a name="484323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was getting worried I might have to learn c++<br><br>Nice team work, looking forward to the update.<br><br>Thanks <br><br></td></tr></table><br>
<a name="484329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> The length of capped cylinders is the length of the shaft.  Add the 2*radius for total length. <br><br></td></tr></table><br>
<a name="484339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoo-a... am I glad that I bought this. Good work Jedive, Halo and VIP3R and all other that have helped to find/fix bugs! JediveODE looks really nice now. <br><br></td></tr></table><br>
<a name="484356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> if trimesh can be sorted out, then finally we will be able to get started - even if other bugs remain...<br><br>very few levels have a plane and some cubes :) <br><br></td></tr></table><br>
<a name="484379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I've now fixed the following:<br>maxcontacts (changed internal integer for stability) <br>dBodySetRotation (corrected yaw) <br>dBodyGetYaw (corrected yaw) <br>dGeomSetRotation (corrected yaw) <br>dGeomGetYaw (corrected yaw) <br>dCreateBox (corrected orientation and dimensions) <br>dCreateCylinder (corrected dimensions) *Orientation still broken, use dCreateCCylinder for now*<br>dCreateCCylinder (corrected dimensions)<br><br>You're close halo, the length needed correcting like so:<br>length=(length-radius)*2<br><br>I've sent Jedive the new C++ source plus a few simple demos to have a play with, so you should receive an update shortly.<br><br>Thanks for all of the support :) <br><br></td></tr></table><br>
<a name="484390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> brilliant init... btw what do you mean by fixing maxcontacts? I set mine at about 10 - what changes have you made under the hood - the default amount?<br><br>Thank you for fixing this. <br><br></td></tr></table><br>
<a name="484417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, the default amount. The maxcontacts used in the lib was set at a default of 1. I read in the ODE docs while researching the bugs, a recommended default setting would be 128. Objects in mid-air can shake all over the place if this setting is too low, so I thought it would be wise to change it. You can still alter the maxcontacts using the dContactSetMaxContacts function if you need to.<br><br>I've updated the 'JediveODE Car Demo' to run with the new version of the lib (V1.02). Now you get a ramp too, whoopee! :)<br><br>You can find it here:<br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1269" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1269</a> <br><br></td></tr></table><br>
<a name="484427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am currently looking for the source. Your examples seem to work perfectly.<br><br>The only thing that it seems you've done wrong is correcting the dimensions of the boxes. Consider that when you create a box in Blitz, it has a size of 2x2x2, so if you use ScaleMesh box,10,10,10, it has a size of 20x20x20, not 10x10x10. That's why your objects are bigger than the box geoms.<br><br>The same applies to cylinders for the radius (not for the length).<br><br>Gonna change this to the default behaviour and send the new update. <br><br></td></tr></table><br>
<a name="484437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edit] You're right, oops :) <br><br></td></tr></table><br>
<a name="484438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use Meshwidth(), MeshHeight() and meshdepth to calculate the bounds of my meshes and fit an ODE box to it, so I need it to use blitz sizes.... so long as I can make a mesh that is ten units wide and the ode box of 10 units wide will fit it, I'm happy.<br><br>ie... importing a custom mesh and using meshwidth to find the unit width etc...<br><br><br>Looking forwards to the update - please send soon jedive :) <br><br></td></tr></table><br>
<a name="484443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh, yes you're quite right, this didn't occur to me before.<br><br>Jedive, you'll need to halve the sphere dimensions to give correct proportions, otherwise MeshWidth() etc will return double the size of spheres, won't it? <br><br></td></tr></table><br>
<a name="484458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> My current code looks like...<br><pre class=code>
;creates a rigid body Sphere from a source entity's dimensions and link them together
Function ODESphere(ent)
	;EntityParent ent,0

	;get transform
	x#=EntityX(ent,1)
	y#=EntityY(ent,1)
	z#=EntityZ(ent,1)
	sx#=MeshWidth(ent)/2
	sy#=MeshHeight(ent)/2
	sz#=MeshDepth(ent)/2

	;get radius (radius is biggest scale)
	radius#=0
	If radius&lt;=sx radius=sx
	If radius&lt;=sy radius=sy
	If radius&lt;=sz radius=sz	

	;create ode rigid body
	o.odebody = New odebody
	o\body = dBodyCreate(ODEWorld)

	;create the rigid body geometry for ode
	o\geom = dCreateSphere(ODESpace,radius)
	dGeomSetBody o\geom,o\body

	;set position and rotation
	dBodySetPosition o\body,x,y,z
	dBodySetRotation o\body,0,0,0

	;link
	o\ent=ent

	Return o\body
End Function
</pre><br><br>Basically I parse my LoadAnimMesh and easily link stuff up and turn it into rigid bodies. Eventually I'll sort the mass and other stuff too... <br><br></td></tr></table><br>
<a name="484463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Jedive, you'll need to halve the sphere dimensions to give correct proportions, otherwise MeshWidth() etc will return double the size of spheres, won't it? <br></div>MeshWdith() will give you the total width of the mesh. As dCreateSphere() expects a radius parameter, you have to halve the width to get it. So yes, you are correct.<br><br>[EDIT:]Update 1.02 sent. <br><br></td></tr></table><br>
<a name="484472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, I'll update the Car Demo with the adjusted dimensions as soon as I've tested it ;) <br><br></td></tr></table><br>
<a name="484474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe you could have a url and use htaccess for a password for regged users. Might be easier for you...<br><br>also, did you fix trimesh? I am anxious to be able to drive my car on roads and hills :) <br><br></td></tr></table><br>
<a name="484475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like that Flying Willy.<br><br>It's been longer than five min Jedive. <br>8)<br><br>pS. It's here !!  That was fast.<br><br>thank you <br><br></td></tr></table><br>
<a name="484487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooops, the demos are broken and the C++ source is still showing the dimension corrections I made.<br><br>Jedive, I'll tinker with the C++ source now, check/correct the demos and send them over in a moment, don't go to bed just yet! :) <br><br></td></tr></table><br>
<a name="484493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes....<br><br>hey viper how about swapping emails and we'll continue working/testing etc? <br><br></td></tr></table><br>
<a name="484494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh? The demos are ok here. <br><br></td></tr></table><br>
<a name="484508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, Flying no problem, I think I have your address here somewhere ;)<br><br>[edit]<br>Jedive, I got confused a little there, you've updated the demos, and commented out the dimension stuff, but you've missed the orientation fix in dCreateBox (swapping lx and lz).<br><br>Also, check the CCylinders-Demo, the cylinders don't touch the ground plane.<br><br>I'm changing dCreateBox (with the orientation fix), dCreateCylinder and dCreateCCylinder back to their original state and adjusting the demos now...<br><br>I'll send them over very shortly... <br><br></td></tr></table><br>
<a name="484510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been working on the Trimesh code posted above, and it seems just totally and utterely buggered. I think something in the wrapper is the cause - not just the orientation. <br><br></td></tr></table><br>
<a name="484521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are right, they are not touvhing the ground. This is because of this line:<br><br><pre class=code>ode\geom=dCreateCCylinder(Space,2,5)</pre>Cylinder geom radius is set to 2, while the cylinder entity radius is 1. Change the radius in that function to 1 and it'll work.<br><br>I have made sometinhg 'odd' anyway: I scaled the entity height using the same value as the cylinder geom's length, and I have not halved it like I shold have done. This is because the length of the geom does not include the caps, and the entity height does not have caps.<br><br>And about the dimension of the objects, this is how th esource looks:<br><br><pre class=code>DLLint odeCreateBox(int space, float lx, float ly, float lz) // FIX (VIP3R)
{
	//float vlx, vly, vlz;
	//vlx = lz * 2.0f;
	//vly = ly * 2.0f;
	//vlz = lx * 2.0f;
    return (int)dCreateBox((dSpaceID)space, (dReal)lx, (dReal)lz, (dReal)ly);
}</pre>The code you added doubling the size of the geom has been commented out, so geoms are nto doubled. <br><br></td></tr></table><br>
<a name="484522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you managed to see whats wrong with trimesh yet? perhaps it's a small bug stopping it working..? <br><br></td></tr></table><br>
<a name="484530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah Jedive, not only did I double the size but I also swapped lx with lz, to correct orientation (if you run the Rectangles-Demo you'll see they are 90 degrees out). <br><br></td></tr></table><br>
<a name="484555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> As you've probably discovered dCreateBox() is still broken in V1.02 (Jedive commented out the orientation fix by mistake), sorry about that :/<br><br>The good news is I've corrected both that and the demos. I've also added a new function to offer an alternative to dCreateCCylinder() called dCreateCCylinderIncCap(). This adds the length of the caps to the overall length of the cylinder (the original function doesn't do this). An example of both functions is in the new CCylinder-Demo.<br><br>I've sent the new C++ source, demos and decls files to Jedive, so if he's happy with it you should receive another update (V1.03) sometime very soon (he's probably in bed now).<br><br>I'll start playing around with the TriMesh stuff shortly :) <br><br></td></tr></table><br>
<a name="484582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Outstanding! I welcome our new wrapper overlords..<br><br>Crap my dll is out of date before I can get home from work!<br><br>Arkon is probobly breaking into a sweat wondering how he can make a buck out his dying wrapper.<br><br>8) <br><br></td></tr></table><br>
<a name="484604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just got 1.02 and now I'm waiting for the 1.03 I guess... this thing is getting more and faster updates than IE+XP! :) <br><br></td></tr></table><br>
<a name="484607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, jedive and all, nice work comming on well! <br><br></td></tr></table><br>
<a name="484622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trimesh Trimesh Trimesh Rah Rah Rah! <br><br></td></tr></table><br>
<a name="484634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The good news is I've corrected both that and the demos. I've also added a new function to offer an alternative to dCreateCCylinder() called dCreateCCylinderIncCap() <br></div><br><br>GREAT work so far... but how does the above function work? for cylinders! which version do I choose for matching with MeshHeight() to the length and MeshWidth for the radius? I don't mind having to /2 or *2 :) <br><br></td></tr></table><br>
<a name="484703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edit]<br>I'm going to alter the standard ODE CCylinder to match the size of a blitz entity. Therefore there would be no need for the extra function.<br><br>If you create a cylinder like this:<br>mesh=CreateCylinder(8) ; Blitz cylinder<br>ScaleMesh mesh,1,5<br><br>The returned sizes using MeshWidth() and MeshHeight() for the above mesh dimensions would be radius=2 and length=10. So you would do the same as for spheres and <b>divide</b> the MeshWidth() and MeshHeight() by 2 to give the correct ODE dimensions (1 &amp; 5).<br><br>This may change depending on what Jedive thinks... I'll let you know :) <br><br></td></tr></table><br>
<a name="484736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> You two know best!<br><br>*whispers something about trimesh being utterely broken* :) <br><br></td></tr></table><br>
<a name="484747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> My advice is to not make changes to the DLL that are specific to Blitz3D.  Most of his sales will come from non-Blitz users.  ODE functions should behave like the standard ODE functions.  Otherwise, you isolate "BlitzODE" from the rest of the world.<br><br>Arkon's wrapper was an extreme example of modifying ODE for Blitz.  When you can isolate a chunk of code like this, it is really important to leave it with the standard functioning.<br><br>For example, I have a PureBasic dll that wraps almost all the PB functions.  I thought about modifying it to make the functions more Blitz-like, but it really works better to just use the standard commands. <br><br></td></tr></table><br>
<a name="484758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm happy with the standard commands: it lets me modify C++ code and learn from it.<br><br>HALO - do you have trimesh working? IMHO it's essential. <br><br></td></tr></table><br>
<a name="484763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree that ODE functions should remain unchanged, and function as documented for ODE. It's of primary importance that the documentation from www.ode.org match. By not corrupting the original meanings we can all focus our efforts and communicate on common ground, and across platforms.<br><br>At the same time lets consider the value of adding Blitz equiv functions like :<br><br>' Creates ODE Cylinder<br>dCreateCylinder%(space,radius#,length#)<br><br>' Creates ODE Cylinder same as Blitz3d<br>bCreateCylinder%(space,radius#,length#)<br><br>The Blitz Equivalent function might be the same as: <br>dCreateCylinder%(space,radius#*2,length#*2)<br><br><br>All this does not mean I disagree with the current direction. There are pros and cons to everything and many possible favorable outcomes. <br><br></td></tr></table><br>
<a name="484769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thats a pretty happy situation! I definately like wayne's suggestion as it is the best of both worlds. I like trimesh even more though, and you must hate me going on about that now... <br><br></td></tr></table><br>
<a name="484772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> The changes made so far aren't really specific to Blitz3D, the orientation issues are relative to each other regardless of the 3D system they are applied to, only then are they aligned the same as blitz's own coordinates. Also, this readme.txt included with the wrapper states that this system is designed specificly with Blitz in mind:<br><div class="quote"> <br>The original ODE uses a different coordinate system than Blitz. This wrapper uses the same coordinate system as this language.<br> <br></div><br>So it would make sense to me for the wrapper to be as close to blitz's own system as possible.<br><br>With the standard ODE spheres function, the user needs to divide MeshWidth() and MeshHeight() by 2 to give the correct ODE sphere size.<br><br>The new changes to V1.03 are as follows:<br>* Corrected dCreateBox orientation.<br>* Changed ODE dCreateCCylinder function to behave the same way as with the 'STANDARD' ODE spheres (i.e. MeshWidth()/2 and MeshHeight()/2 to give correct ODE cylinder size). Only the length of the cylinder was affected. This adjustment is needed otherwise the visible mesh will be too long compared to the ODE geometry.<br><br>I'll leave it up to Jedive to decide whether the CCylinder function remains like this.<br><br>Working on the TriMesh issues now, I'll let you know as soon as I can.<br><br>This is still the same as it was before, I think you misunderstand what I'm changing here:<br><div class="quote"> <br>' Creates ODE Cylinder <br>dCreateCylinder%(space,radius#,length#) <br> <br></div> <br><br></td></tr></table><br>
<a name="484773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> ohhh.... music: <div class="quote"> Working on the TriMesh issues now, I'll let you know as soon as I can. <br></div> <br><br></td></tr></table><br>
<a name="484776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> You see, this is what I'm talking about:<br><div class="quote"> The Blitz Equivalent function might be the same as: <br>dCreateCylinder%(space,radius#*2,length#*2) <br></div><br><br>This is how you would expect it to work, but it doesn't work properly in V1.02 because the visible cylinder length is wrong, try it and see! (using CCylinder not Cylinder - which is broken)<br><br>The changes I've made to the CCylinder function will allow this to now work... give me strength :) <br><br></td></tr></table><br>
<a name="484785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK my example was a little confusing, but since your onto trimesh I'm on your side ! <br><br></td></tr></table><br>
<a name="484790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> we'd like realtime raytracing and a muffin with a cup of tea as well please. <br><br></td></tr></table><br>
<a name="484791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, I'll add a dCreateBlowJob() function too eh? Hehe :)<br><br>The standard ODE dimension system sucks when compared to entities IMO.<br><br>Here are the standard ODE functions compared to Blitz entity scales:<br>dCreateSphere(Space,MeshWidth()*0.5) &lt;&lt;&lt; Half<br>dCreateBox(Space,MeshWidth()*1,MeshHeight()*1,MeshDepth()*1) &lt;&lt;&lt; Same<br>dCreateCCylinder(Space,MeshWidth()*0.5,(MeshHeight()*1)-MeshWidth()*1) &lt;&lt;&lt; Wtf!<br><br>I've changed the CCylinder function to this:<br>dCreateCCylinder(Space,MeshWidth()*0.5,MeshHeight()*0.5)<br><br>If it were up to me I'd change them ALL to...<br>MeshWidth()*1,MeshHeight()*1,MeshDepth()*1<br>...the same scale as Blitz entities (and dCreateBox). <br><br></td></tr></table><br>
<a name="484793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the only difference between 2 different functions<br>is the first letter b or d, it will be hell for<br>dyslexic people and easily missed if typed wrong<br>even by a non-dyslexics...<br><br>I'd say :-<br>' Creates ODE Cylinder<br>dCreateCylinder%(space,radius#,length#)<br><br>' Creates ODE Cylinder same as Blitz3d<br>b3ddCreateCylinder%(space,radius#,length#) <br>or<br>b3d_dCreateCylinder%(space,radius#,length#)<br><br>basically include the origonal function name but make<br>the prefix easily decernable.<br><br><br>$0.02 from a dyslexic <br><br></td></tr></table><br>
<a name="484795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm in agreement with Halo there, in that there should be no prefix.<br><br>Like this: dCreateCylinder(space,radius#,length#)<br><br>It's easier to understand the ODE user guide without prefixes too, as the original ODE function names don't have prefixes. <br><br></td></tr></table><br>
<a name="484797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...And soon ppl start adding BB3D or whatever prefixes to every possible and impossible ODE function and cry when it doesn't work. KISS, keep it simple... no prefixes! <br><br></td></tr></table><br>
<a name="484805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would it make sense to create and include file for B3d ODE extensions to support stuff like B3d_dCreateSphere.<br><br>Doing that would keep DLL clean.<br>8)<br><br>'If it were up to me I'd change them ALL to...<br>MeshWidth()*1,MeshHeight()*1,MeshDepth()*1<br>...the same scale as Blitz entities (and dCreateBox). '<br><br>The Important Thing is Trimesh! <br><br></td></tr></table><br>
<a name="484856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> I now have the TriMesh *almost* working perfectly :)<br><br>It's more of the same, rotation and orientation errors.<br><br>I've got a TriMesh terrain (.b3d) which I can drive over and it matches the geometry exactly. The only snag is that it's upside down, so the texture/colour of the mesh is really dark. I haven't managed to turn it the right way up yet, sounds simple doesn't it, just rotate one of the axis by 180 degrees - but no it ends up vertical instead of horizontal.<br><br>Any suggestions welcome.<br><br>I'll keep trying... more soon... :) <br><br></td></tr></table><br>
<a name="484860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#164">[#164]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make sure the blitz3d part that generates the trimesh transforms the verts into world space. That's the first step....<br><br>As for it looking dark, thats just a crap mesh or something wrong with what you're doing in Blitz3D :)<br><br><div class="quote"> so the texture/colour of the mesh is really dark <br></div>Wots that got to do with ODE? is the ODE bit ok? if so bring it on!!! :D<br><br>So long as I can throw a mesh at it and ODE works perfectly thats all that matters.... :) <br><br></td></tr></table><br>
<a name="484868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#165">[#165]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I create the TriMesh its geometry is vertical instead of horizontal, so I've rotated it until it's horizontal. Then I have to rotate the visible TriMesh 180 degrees to match the ODE geometry (the texture isn't dark until I do this).<br><br>If I rotate the geometry but don't rotate the visible TriMesh this is what happens:<br><br>Imagine looking forwards with a slope going up from left to right, this would be your visible TriMesh... &gt;&gt;&gt; / &lt;&lt;&lt;<br><br>But, the geometry of the TriMesh slopes up from right to left... &gt;&gt;&gt; \ &lt;&lt;&lt;<br><br>??? <br><br></td></tr></table><br>
<a name="484873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#166">[#166]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ODE dll is one level of complexity, and should remain as close to the original ODE as possible.  Additions and alterations are a second level based on that, and should be implemented via Blitz code or a separate DLL.<br><br>I know this.  I am presently developing an editor based on an engine I am still writing, both written in BlitzPlus, but both are compartmentalized into different levels, so I can take the engine code out and compile it into a DLL, or use it to write another program.  It is extremely important to keep your levels of complexity separate. <br><br></td></tr></table><br>
<a name="484889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#167">[#167]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your problems in blitz are nothing to do with ODE - they don't affect one another...<br><br>I don't know why you're mentioning the Blitz3D problem? there is no visible trimesh. There is only a Blitz3D mesh - with all associated Blitz3D problems... I take it you're prolly not that used to Blitz3D yet?<br><br>ODE keeps it's own mesh data entirely seperarate. I think you are working with a bad mesh.<br><br>Here is some extra trimesh code, taken from arkon's, and modified by me to use world space verts:<br><pre class=code>
;creates the ent to collide with - see ODESPACE variable and pass your space to it along with your mesh.
Function ODECollision(mesh,ODESpace)
	tris_count% = 0
	vert_count% = 0
	For i = 1 To CountSurfaces(mesh)
		tris_count = tris_count + CountTriangles(GetSurface(mesh, i))
		vert_count = vert_count + CountVertices(GetSurface(mesh, i))
	Next
	vertices_bank% = CreateBank(vert_count * 4 * 4)
	indices_bank% = CreateBank(tris_count * 3 * 4)
	offset% = 0
	offset_tris% = 0
	baseverts=0
	For i = 1 To CountSurfaces(mesh)
		sf = GetSurface(mesh, i)
		For v = 0 To CountVertices(sf) - 1
			TFormPoint VertexX(sf, v),VertexY(sf, v),VertexZ(sf, v),mesh,0
			PokeFloat vertices_bank, offset, TFormedX()
			offset = offset + 4
			PokeFloat vertices_bank, offset, TFormedY()
			offset = offset + 4
			PokeFloat vertices_bank, offset, TFormedZ()
			offset = offset + 8
		Next
		For t = 0 To CountTriangles(sf) - 1
			For j = 0 To 2
				v = TriangleVertex(sf, t, j)+baseverts
				PokeInt indices_bank, offset_tris, v
				offset_tris = offset_tris + 4
			Next
		Next
		baseverts=baseverts+CountVertices(sf)
	Next
	
	t_data = dGeomTriMeshDataCreate()
	dGeomTriMeshDataBuildSimple(t_data, vertices_bank, vert_count, indices_bank, tris_count * 3)
	Return dCreateTriMesh(ODESpace, t_data)
End Function
</pre><br><br>When you're done with ODE, it should just work with this routine fine with no changes in Blitz... Verts are in world space so the orientation of the entity doesn't matter.<br><br>PLEASE DONT take this routine as gospel though as obviously the Jedive ODE wrapper might be different? <br><br></td></tr></table><br>
<a name="484906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#168">[#168]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's just the way I'm trying to explain things:<br>When I say visible TriMesh, I mean the Blitz mesh.<br>And when I say the TriMesh geometry, I mean the TriMesh Data used for collisions.<br><br>At this stage I think I can see what's wrong now. I have the Blitz mesh ;) and the TriMesh aligned to each other correctly. Everything is as it should be, except the collision surface is on the underside of the TriMesh instead of the surface.<br><br>The mesh I'm testing it with is from the Quadbike demo that was around when Arkons wrapper was first released, the mesh itself is fine (you probably have the same one 002.b3d).<br><br>All I need to do is figure out how to change the collision surface from the underside to the surface.<br><br>I'll try that function too, and see if that makes any difference... <br><br></td></tr></table><br>
<a name="484914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#169">[#169]</a></td></tr></table></td></tr><tr ><td class="posttext"> the reason this happens is the "winding order" of the triangles. Basically instead of going 0,1,2 to make a triangle, you need to go 3,2,1.<br><br>Your routine for trimesh simply has flipped triangles. Use flipmesh on your mesh, feed the trimesh to ode, then flipmesh again to put it back to normal for blitz. If thats the problem then all you need to do is modify your make trimesh function so the winding order (normals) are reversed.... (to avoid a pointless flipmesh call)<br><br>ODE uses normals to figure out what way up things are. So changing the way you feed triangles to ode will fix this I suspect... <br><br></td></tr></table><br>
<a name="484931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#170">[#170]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'll try that.<br><br>The exact same thing (collision surface wrong) happened with your function too btw. <br><br></td></tr></table><br>
<a name="484941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#171">[#171]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmmmm weird init? that function's fine with Arkon's lib, so I assume he's probably doing a little fixing behind the scenes in his lib.<br><br>Did you try flipmesh to test if that was the case? <br><br></td></tr></table><br>
<a name="484959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#172">[#172]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, flipmesh corrected the collision surface but it caused that texture/colour darkening weirdness again. <br><br></td></tr></table><br>
<a name="484961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#173">[#173]</a></td></tr></table></td></tr><tr ><td class="posttext"> Send the lot over and I'll give it a shot here if you like? <br><br></td></tr></table><br>
<a name="484988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#174">[#174]</a></td></tr></table></td></tr><tr ><td class="posttext"> That code didn't work for me... maybe you made some updates to the dll? <br><br></td></tr></table><br>
<a name="484993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#175">[#175]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about sending out what we got so far and getting some more eyes on it. <br><br></td></tr></table><br>
<a name="484998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#176">[#176]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flying, I've just sent the complete test code for you.<br><br>Wayne, do you want to try it too? <br><br></td></tr></table><br>
<a name="485014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#177">[#177]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I try it on a variety of meshes, it simply falls through, going to experiement further :) <br><br></td></tr></table><br>
<a name="485017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#178">[#178]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, please send me what I need to see the problem. <br><br></td></tr></table><br>
<a name="485034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#179">[#179]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, check your inbox :) <br><br></td></tr></table><br>
<a name="485073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#180">[#180]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just got home from work and had a bite to rat. I'm checking it out now. Thanks for sending it so quickly. <br><br></td></tr></table><br>
<a name="485074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#181">[#181]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having a bite to rat eh? What does rat taste like then ;)<br><br>I'm gonna have to continue my TriMesh quest tomorrow, got to get some zzzZZZZ now. <br><br></td></tr></table><br>
<a name="485113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#182">[#182]</a></td></tr></table></td></tr><tr ><td class="posttext"> From ODE docs:<br><div class="quote"> <br>The Normals argument is optional: the normals of the faces of each trimesh object. For example,<br><br>...<br><br>This pre-calculation saves some time during evaluation of the contacts, but isn't necessary. If you don't want to calculate the face normals before construction (or if you have enormous trimeshes and know that only very few faces will be touching and want to save time), just pass a "NULL" for the Normals argument, and dCollideTTL will take care of the normal calculations itself. <br> <br></div><br><br><a href="http://ode.org/ode-latest-userguide.html#sec_10_7_6" target="_blank">http://ode.org/ode-latest-userguide.html#sec_10_7_6</a><br><br>...So it shouldn't need any normal info at all? <br><br></td></tr></table><br>
<a name="485155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#183">[#183]</a></td></tr></table></td></tr><tr ><td class="posttext"> That only applies to dGeomTriMeshDataBuild() which isn't implemented into the wrapper yet.<br><br>This is the one we're playing around with:<br>dGeomTriMeshDataBuildSimple()<br><br>What concerns me most at the moment is that in Arkons wrapper the ODE TriMesh always stays aligned with the Blitz mesh when positioning or rotating the Blitz mesh using RotateMesh and PositionMesh.<br><br>I've noticed that once the TriMesh is aligned correctly, changing the 'position' of the mesh with PositionMesh causes it to 'rotate'? Something is still very wrong with the alignment stuff. <br><br></td></tr></table><br>
<a name="485174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#184">[#184]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think this wrapper was a mistake, and should have not been released until something as obviously important as orientation and trimesh was fixed. Quite disheartening cos VIPER has put in so much effort trying to nail the problems and the problems keep coming!<br><br>Jedive said he can't look at it for another 2 weeks (15th I think he said). <br><br></td></tr></table><br>
<a name="485184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#185">[#185]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I think this wrapper was a mistake, and should have not been released until something as obviously important as orientation and trimesh was fixed.<br> <br></div><br><br>It was hardly a mistake - bugs are found when you test the product and this is what we do now. You're just too inpatient... Jedive/VIP3R will fix it but it won't happen during the next nanosecond.<br><br>This is looking good and is more usable than Arkon's was in the end... but I wish they could combine their talents because Arkon had some things right in there... maybe splitting up the cash or something? <br><br>It WOULD be a shame to have two "almost there" but non-working ODE wrappers in the end. :) <br><br></td></tr></table><br>
<a name="485208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#186">[#186]</a></td></tr></table></td></tr><tr ><td class="posttext"> TriMesh now works perfectly as it did in the Arkon wrapper.<br> <br>I've had to basically rewrite the whole wrapper though.<br> <br>There are still some errors to nail so I'm going to have to work on those a little longer.<br><br>I'll keep you updated...<br><br>Jedive please contact me asap, I understand you are busy at the moment but I'm not spending hours of my time fixing your code only to have my emails ignored. <br><br></td></tr></table><br>
<a name="485213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#187">[#187]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R, can you email me (my email address can be found from my profile)... I think you have deserved $US10 as well. I did say that if someone would make a working ODE lib I would buy two :) ...To me it seem fair that you get something too. <br><br></td></tr></table><br>
<a name="485233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#188">[#188]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe that the ODE code Viper has fixed belongs to viper and should be made opensource as a mark of respect for the pioneering work by ODE authors.<br><br>The new ODE lib would be free for all to improve on and become the definitive solution for Blitz physics.<br><br>Jedive released something clearly broken and has chosen to release it at a time when he cannot support it. <br><br></td></tr></table><br>
<a name="485241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#189">[#189]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice job VIP3R! <br>I spent 4hr last nite trying to get what seemed like a simple problem resolved. Great to see you nailed it. <br><br></td></tr></table><br>
<a name="485245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#190">[#190]</a></td></tr></table></td></tr><tr ><td class="posttext"> VIP3R,<br>What Issues are left?<br>let me guess cylinders ??<br><br>Will you market a line of skillfully coded ODE demo programs with source code?<br><br>Send over a working trimesh if you have sometime.<br><br>Thanks<br><br>8) <br><br></td></tr></table><br>
<a name="485276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#191">[#191]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made a PayPal donation to VIP3R for his support of this library. I have sent him half them money I made from this lib (which is not too much BTW).<br><br>For respect to the buyers, I will not made this free. The reason why it were not free at the beginning, is because this is a work I made for Halo, and he was going to pay me for it. Instead of that, I decided to sell it to other people, and the fact is that I have made less money than what he was going to pay me (and now that I have sent half of it to VIP3R, it is even less!). <br><br></td></tr></table><br>
<a name="485281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#192">[#192]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm even more pleased!<br><br>This product is a fantastic buy right now, and would easily be worth double the price. <br><br>I'm happy we can continue to move forward. <br><br></td></tr></table><br>
<a name="485295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#193">[#193]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jedive, after it is tested completely, post an ad on the ODE forum, and set up a package for use with DBPro, and you will make more than I offered you.  That's what I was going to do, because I know I would make up my own losses that way.  Do not ever market anything primarily to Blitz users...just look at what happens to the products that do (Quill3D, etc.)<br><br>I would also raise the price to around 40 USD.  People who need it will pay a fair price, and people who don't will complain no matter what.  If you had started at that price, you would have all the sales you got anyways, and three times as much money. <br><br></td></tr></table><br>
<a name="485299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#194">[#194]</a></td></tr></table></td></tr><tr ><td class="posttext"> BULL[poop] halo.<br><br>Jedive: what you do is your business: I don't care if you give half the money to Viper or not... that is none of our concern.<br><br>My concern is that I paid for a library that didn't work like you advertised it to... <br><br>However because you provided the source, we can try to fix the broken parts and for this I thank you... I hope you will continue providing the source code. <br><br></td></tr></table><br>
<a name="485307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#195">[#195]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right, I don't know anything.  I've only done $100,000 in sales with my own work.  Maybe $2000 of that came from Blitz users. <br><br></td></tr></table><br>
<a name="485309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#196">[#196]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gentleman, lets move and make this the number one wrapper, and let the kids play with Arkon's wrapper.<br><br>I'm stoked to get a new update, lets do it guys! <br><br></td></tr></table><br>
<a name="485316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#197">[#197]</a></td></tr></table></td></tr><tr ><td class="posttext"> $100,000 is fine, cartography shop was it?<br><br>Thats not a wrapper.<br>Anyway the reason halo is talking utter [poopies] here is because ODE is in actual fact, free.<br><br>Therefore 10E is a good price for the wrapper, not $40.<br><br><br>[*** flying willy: please stop swearing in your posts -- it's against the <a href="/faq/faq_entry.php?id=1" target="_blank">forum rules</a> -- BlitzSupport.] <br><br></td></tr></table><br>
<a name="485340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#198">[#198]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Quick Update:</b><br>Things are looking <b>very</b> promising now that the TriMesh works correctly.<br><br>Issues Remaining:<br>* Re-alignment of the entire ODE geometry.<br>* Capped cylinders don't collide with the TriMesh.<br>* Normal cylinders need checking (they can crash the wrapper).<br><br>Please be patient, I'm working <b>flat out</b> to correct these issues.<br><br>I would also like to thank Jedive for his kind donation, which came as a complete surprise :O<br><br>I'll keep you all updated on the progress... more soon... :) <br><br></td></tr></table><br>
<a name="485405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#199">[#199]</a></td></tr></table></td></tr><tr ><td class="posttext"> alls well ends well :) <br><br></td></tr></table><br>
<a name="485498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#200">[#200]</a></td></tr></table></td></tr><tr ><td class="posttext"> C'mon ppl... patience. Nice gesture there, Jedive! Two wise heads are certainly better than zero [my head...]. I'm just glad that this ODE *is* going somewhere, even if it needs two coders. It has been WIP just over *one* week now, so of course it's not "done yet".<br><br>Blitz3D will really get a "new" life when we can use true physics (that work and are stable). I have some stuff on the pipeline that will show off JV-ODE nicely when it's 100% finished (and my models, which will take some time, but they are far from RBG boxes...).<br><br>Thumbs up!<br><br>[edit]<br><br>Wo-hoo - 200th post on this thread... maybe it's time to lock this and start a new one? It's getting long :) <br><br></td></tr></table><br>
<a name="485509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#201">[#201]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just sent a mail to BRL to lock this thread and start a new one. <br><br></td></tr></table><br>
<a name="485540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#202">[#202]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do not pass this point, senor. This way please...<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=43468" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=43468</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
