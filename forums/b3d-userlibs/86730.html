<!DOCTYPE html><html lang="en" ><head ><title >CollLib v2.0 (userlib) is released</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CollLib v2.0 (userlib) is released</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >CollLib v2.0 (userlib) is released</a><br><br>
<a name="983157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The free collection lib is now better than ever.<br><br>It expands Blitz3D and BlitzPlus is several ways that makes life in these languages much nicer.<br><br>Now with the powerful debug-dll in version 2.0 you don't have to be a resource-management-guru to find illegal usages etc. (Full internal handle and bounds checking in debug-mode with popups that tells you what went wrong)<br><br>Freeware for use in any (even commercial) projects:<br><br>D/L link: <a href="http://download.ecma.webfactional.com/CollLib_v2.03.zip" target="_blank">http://download.ecma.webfactional.com/CollLib_v2.03.zip</a><br><br>from README.txt:<br><br><pre class=code>
****************************************************************************
*                                                                          *
*                               CollLib v2.0                               *
*                                                                          *
*               Collection Library for Blitz3D and BlitzPlus               *
*                                (userlib)                                 *
*                                                                          *
* Lib author: Mattias Hansson (aka MaHan)                                  *
* (Safe)Wrapped FreePascal functionality.                                  *
****************************************************************************

What does it do?

+ Provides lists (yes, several lists of the same Type's!)
+ Manages strings (Lots of strings, very fast!)
+ Provides a hashed lookup-list. (find a string among millions in &lt;1ms!)
  (full HashMap).
+ Haves a utility function to convert a locale ANSI string to a valid UTF-8
  string.


What is new in v2.0?

+ A debug-mode dll that helps you find errors in your program (regarding
  calls to CollLib). (The debug-dll trades speed for instance-validation
  and range-checking.)
+ New function CollLibClear() to: 
    1) Clean up stray resources.
    2) Ability to check if your program cleans up after itself
       (not necessary but recommended)
</pre><br><br>I hope you find it as useful as me :-)<br><br>EDIT: Forgot the ListDelete() function in 2.0. Added in 2.01<br><br>EDIT2: Today I found quite a rare bug in the TStringHashList-implementation (yes in the library code of fpc!). Fixed in 2.02.<br><br>EDIT3: Added reverse StringListSort() <br><br></td></tr></table><br>
<a name="983715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone uses the StringHashList in this lib, re-download the new version, as I found a nasty bug while programming today.<br><br>The bug affected the functions:<br><br>StringHashRemoveValue%(shlHandle%, key$)<br>StringHashGetValue%(shlHandle%, key$)<br>StringHashExists%(shlHandle%, key$)<br><br>Sometimes in rare cases these functions can fail in the old version. <br><br></td></tr></table><br>
<a name="983723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why exactly would you need this lib?<br><br><div class="quote"> 1)Clean up stray resources. <br></div>Isn't that what FreeEntity, FreeImage, etc... are for?<br><br>What is this thing supposed to help with? <br><br></td></tr></table><br>
<a name="983733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This lib adds collections to the Blitz3D and BlitzPlus languages.<br><br>It does not help with FreeImage and FreeEntity, but it provides 3 new list-types.<br><br>Short descrption:<br>1. List: Similar to a normal integer array (dim), except its fully dynamic, blazingly fast in both modifications (add/delete) and access.<br><br>I use Lists all the time since the normal type-lists (first, last, each etc.) are limited to only 1 list per type, and I often want to use several lists of the same type.<br><br>Example of usage: I'm right now writing a dynamic tile-map that consists of a List of Lists of TTile (my tile type), so I'm "simulating" a two dimensional array. Tried it without any problems on a map with 1000x1000 tiles so far, and the only limit seems to be the memory.<br><br><br>2. StringList: A insanely fast list of strings, where each string additionally has a optional integer value attached, that of course can be used to hold handles to Blitz entities.<br><br>3. StringHashList: A HashMap/Associative table.<br><br>Easiest explained like a (very fast) phone book. You pass a name (key-string) and you get the number (integer value) associated with this string.<br><br>There is a sacrifice in modification speed (adding new values is not as fast as in the two first lists) but TStringHashList can find a string among millions in fractions of a millisecond. (using binary search)<br><br>Since it (similar to the stringlist) matches strings to integers this list again is very nifty when used with Blitz-object handles.<br><br>Example: I used this to write a cached text-command (since the one built in is so slow). It renders Text to a new Image and stores the image with the passed string (for screen output) as key. Next time the function is called the StringHashList is called and checked if this string is already pre-rendered. If so it just calls DrawImage on the associated image, which is much faster.<br><br>EDIT: added example of list usage <br><br></td></tr></table><br>
<a name="983750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I see it's usefulness now :) I see that you can sort strings which is really useful for things like player lists and server lists.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!
; Run this program with debug disabled to really understand
; the speed of the List!
; IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!IMPORTANT!

Graphics 800, 600, 0, 2

mysl=CreateStringList()

Cls

SetBuffer(BackBuffer())

StringListAdd(mysl,"006")
StringListAdd(mysl,"Cake")
StringListAdd(mysl,"007")
StringListAdd(mysl,"Soda")
StringListAdd(mysl,"Armor")
StringListAdd(mysl,"Zebra")
StringListAdd(mysl,"55")
StringListSort(mysl)

Text 10, 30, "... done"
Text 10, 50, "And equally fast when retrieving values!"
Text 10, 60, "Now looking up each string to check if they're correct ..."
Text 10,80, StringListCount(mysl)+" Strings"
Flip

For i = 0 To (StringListCount(mysl)-1)
	Text 10,150+(i*20), StringListGetString(mysl, i)
Next

Text 10, 70, "... done"
Flip


FreeStringList(mysl) ; try to comment this line to see how recources check of CollLibClear() works.

Select CollLibClear()
	Case 0
	  Color 255, 0, 0
	  Text 10, 100, "CollLib resources where NOT cleaned completely when CollLibClear()."
	Case 1
	  Text 10, 100, "CollLib resources where completely cleaned when CollLibClear(). Good Job!"
	Case 2
	  Text 10, 100, "Runtime CollLib used. Unable to check application resource management."
End Select

Color 255, 255, 255
Text 10, 120, "press [esc] to exit"

Flip

While Not KeyHit(1)
Wend



EndGraphics

</textarea> <br><br></td></tr></table><br>
<a name="983757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;) Yeah, thats a possibility.<br><br>Or if you got a TUser type you could do this:<br><pre class=code>
;Add a new user
local newUser.TUser = new TUser
StringListAddValue(mysl, "Cake", handle(newUser))

;Then have the user accessible on the same index as the string in the StringList:
local user.TUser = Object.TUser(StringListGetValue(mysl, someUserIndex%))
; do stuff with the user here
user\posX = user\posX + 1 ; etc

</pre> <br><br></td></tr></table><br>
<a name="983796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool. I like em! <br><br></td></tr></table><br>
<a name="983830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmk how about this... StringListSort only sorts things in forward order. Can you make it so you can choose which way you want to order things? So instead of<br><br>A<br>B<br>C<br><br>you get<br><br>C<br>B<br>A <br><br></td></tr></table><br>
<a name="983862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GIA_Green_Fire_ I'll look into it. A single reversed sort on the StringList is probably easy to add since iirc it's built into the underlying TStringList component.<br><br>If you need it like "right now" you could use the normal "sort" and then write an own routine reversing the list fast with the function StringListSwap%(slHandle%, idx1%, idx2%).<br><br><br>Possible future plan: I was thinking of making a user customizable sort. Since Blitz+ and Blitz3D does not have callbacks I'll though about trying to make a "call sequence" of it, something in the lines of (for List example):<br><br><pre class=code>
//Compare func returns -1 if item1 &lt; item2, 0 if item1 = item2 and 1 if item1 &gt; item2
function MyCompareFunc(item1%, Item2%)
  local user1.TUser = Object.TUser(item1)
  local user2.TUser = Object.TUser(item2)
  local result = 0
  If user1\name &lt; user2\name then result = -1
  if user1\name &gt; user2\name then result = 1
  Return result
end function

local mySort=CreateSort(myList)

While not SortFinished(mySort)
  SortCompare(mySort, MyCompareFunc(SortValue1(mySort), SortValue2(mySort))
Wend

FreeSort(mySort)

</pre><br><br>This would enable total user customizable sorts and that could be nice to have maybe? <br><br></td></tr></table><br>
<a name="983876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GIA_Green_Fire_: Ok I added reverse sort to the lib. (download in first post above).<br><br>Note the new param reverse. If you pass false the sort is done as it has been. If you pass true you get reverse sort order.<br><br>Changes:<br><pre class=code>
v2.03:

* Added reverse param to StringListSort(slHandle%, reverse%). False = normal. True = Reverse alphabetic order.
* Added StringHashCount%(shlHandle%)
* Added StringListSortDemo.bb
* Updated the StringHashLists demos to use the new StringHashCount function.

</pre> <br><br></td></tr></table><br>
<a name="983942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you need it like "right now" <br></div>Nah, I was just telling you that because it seemed like it would be useful later on if <i>someone</i> needed it. Like if you had a server list that scrolls and the servers are in order of abc, over 1000 servers, and the one you're looking for is in the Z section, you would want to reverse the order so you can get to the Z's faster. It's cool that you put it in there though ;) <br><br></td></tr></table><br>
<a name="983964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank's<br><br>here a simple example using types<br><br><pre class=code>
;
; simple code to see if I get the point!
;
; 100 myType objects are created and their handles stored in 4 diferent list based on some
; conditions of the Random field.
;
; so, we end with 4 lists that has some objects in comon, but when we need an object with one attribute
; we only has to search on the apropiate list, not the entire collection of objets (with for each..)

Graphics 800,600

Type myType
	Field Number
	Field Random
End Type

mylist_1=CreateList()	;Random &gt; 10
mylist_2=CreateList()	;Random &lt; 30
mylist_3=CreateList()	;(Random &gt; 40) and (Random &lt; 60)
mylist_4=CreateList()	;(Random Mod 2) = 0

For i=1 To 100
	temp.myType = New myType
	temp\Number = i
	temp\Random = Rand(1,100)
	If temp\Random &gt; 70 Then ListAdd(mylist_1,Handle(temp))
	If temp\Random &lt; 20 Then ListAdd(mylist_2,Handle(temp))
	If (temp\Random &gt; 40) And (temp\Random &lt; 60) Then ListAdd(mylist_3,Handle(temp))
	If (temp\Random Mod 2)=0 Then ListAdd(mylist_4,Handle(temp))
Next

Cls

Print "Items in list 1: "+ListCount(myList_1)
Print "Items in list 2: "+ListCount(myList_2)
Print "Items in list 3: "+ListCount(myList_3)
Print "Items in list 4: "+ListCount(myList_4)
Print

Print "Random &gt; 10"
DumpList(myList_1)

Print "Random &lt; 30"
DumpList(myList_2)

Print "(Random &gt; 40) And (Random &lt; 60)"
DumpList(myList_3)

Print "(Random Mod 2) = 0"
DumpList(myList_4)




WaitKey()

FreeList(myList_1)
FreeList(myList_2)
FreeList(myList_3)
FreeList(myList_4)

End

Function DumpList(list)
	Text$ = ""
	j=0
	For i=0 To ListCount(list)-1
		temp.myType = Object.myType(ListGet(list,i))
		Text$ = Text$ + "("+temp\Number + ":" + temp\Random + ")  "
		j=j+1
		If j=10 Then
			Print Text
			j=0
			Text$ = ""
		End If
	Next
	If Text &lt;&gt; "" Then Print Text
	
	Print 
	Print

End Function
</pre><br><br>Juan <br><br></td></tr></table><br>
<a name="984020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, Juan you got the point exactly. This is imo the single most valuable use of the List in the Blitz3D and Blitz+ languages, even if there are lots of other nifty things that can be done. :-)<br><br>Just wanted to point out 2 minor details in the example:<br><br>#1<br>These two lines ...<br><pre class=code>
mylist_1=CreateList()	;Random &gt; 10
</pre><br><pre class=code>
Print "Random &gt; 10"
</pre><br>... do not correspond with this one:<br><pre class=code>
If temp\Random &gt; 70 Then ListAdd(mylist_1,Handle(temp))
</pre><br><br>#2<br>And also a ...<br><pre class=code>
SeedRnd(MilliSecs())
</pre><br>... in the top of the program, would enhance the demo =) <br><br></td></tr></table><br>
<a name="984100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are right (and so much more like the &lt;30 etc!<br><br>when i firs test it, i was using two list's and the rule to be in one or the other was the value 10, then i tihink that 4 list with overlaped references to objets should give more sense, and when i expand the idea to 4 list i change the rule but not the text displayed!<br>And of course SeedRnd would be good to force the pseudorandomic generator to generate a diferent sequence of values in every try.<br><br>rewrite:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;
; simple code to see if I get the point!
;
; 100 myType objects are created and their handles stored in 4 diferent list based on some
; conditions of the Random field.
;
; so, we end with 4 lists that has some objects in comon, but when we need an object with one attribute
; we only has to search on the apropiate list, not the entire collection of objets (with for each..)


Graphics 800,600

SeedRnd(MilliSecs())

Type myType
	Field Number
	Field Random
End Type

mylist_1=CreateList()	;Random &gt; 70
mylist_2=CreateList()	;Random &lt; 20
mylist_3=CreateList()	;(Random &gt; 40) and (Random &lt; 60)
mylist_4=CreateList()	;(Random Mod 2) = 0

For i=1 To 100
	temp.myType = New myType
	temp\Number = i
	temp\Random = Rand(1,100)
	If temp\Random &gt; 70 Then ListAdd(mylist_1,Handle(temp))
	If temp\Random &lt; 20 Then ListAdd(mylist_2,Handle(temp))
	If (temp\Random &gt; 40) And (temp\Random &lt; 60) Then ListAdd(mylist_3,Handle(temp))
	If (temp\Random Mod 2)=0 Then ListAdd(mylist_4,Handle(temp))
Next

Cls

Print "Items in list 1: "+ListCount(myList_1)
Print "Items in list 2: "+ListCount(myList_2)
Print "Items in list 3: "+ListCount(myList_3)
Print "Items in list 4: "+ListCount(myList_4)
Print

Print "Random &gt; 70"
DumpList(myList_1)

Print "Random &lt; 20"
DumpList(myList_2)

Print "(Random &gt; 40) And (Random &lt; 60)"
DumpList(myList_3)

Print "(Random Mod 2) = 0"
DumpList(myList_4)




WaitKey()

FreeList(myList_1)
FreeList(myList_2)
FreeList(myList_3)
FreeList(myList_4)

End

Function DumpList(list)
	Text$ = ""
	j=0
	For i=0 To ListCount(list)-1
		temp.myType = Object.myType(ListGet(list,i))
		Text$ = Text$ + "("+temp\Number + ":" + temp\Random + ")  "
		j=j+1
		If j=10 Then
			Print Text
			j=0
			Text$ = ""
		End If
	Next
	If Text &lt;&gt; "" Then Print Text
	
	Print 
	Print

End Function

</textarea><br><br>btw<br><br>is there a function to get an idx in the list based on the value stored?. <br>(as i see, the idx isn't asociated to an element on the list: if i delete the element 3 of the list, then the element 3 of the list is asigned to the next in the list (exept that only three elementes were in the list), isn't it?)<br>say, i have some list's, some blitz entities (or types..)  ho's handles are stored on the list's but if one entity has to be deleted, i have to delete that item from the list,or the various list's in which it could be. I could do a search for all the list until i found the handle and with the idx i delete that item. <br><br>Is it posible to do it better?<br><br>thank's<br><br>Juan <br><br></td></tr></table><br>
<a name="984135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd recommend you to look at the StringHashList if you want to have a static assigned key (or index) for a value.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">



Graphics 800,600

SeedRnd(MilliSecs())

Type myType
	Field Number
	Field Random
End Type

mylist_1=CreateStringHashList(True)	;Random &gt; 70
mylist_2=CreateStringHashList(True)	;Random &lt; 20
mylist_3=CreateStringHashList(True)	;(Random &gt; 40) and (Random &lt; 60)
mylist_4=CreateStringHashList(True)	;(Random Mod 2) = 0


For i=1 To 100
	temp.myType = New myType
	temp\Number = i
	temp\Random = Rand(1,100)
	Local hdl = Handle(temp)
	If temp\Random &gt; 70 Then StringHashAddValue(mylist_1, MakeIdKey(i), hdl)
	If temp\Random &lt; 20 Then StringHashAddValue(mylist_2, MakeIdKey(i), hdl)
	If (temp\Random &gt; 40) And (temp\Random &lt; 60) Then StringHashAddValue(mylist_3, MakeIdKey(i), hdl)
	If (temp\Random Mod 2)=0 Then StringHashAddValue(mylist_4, MakeIdKey(i), hdl)
Next

Cls

Print "Items in list 1: "+StringHashCount(myList_1)
Print "Items in list 2: "+StringHashCount(myList_2)
Print "Items in list 3: "+StringHashCount(myList_3)
Print "Items in list 4: "+StringHashCount(myList_4)
Print

Print "a.) Random &gt; 70"
DumpStringHashList(myList_1)

Print "b.) Random &lt; 20"
DumpStringHashList(myList_2)

Print "c.) (Random &gt; 40) And (Random &lt; 60)"
DumpStringHashList(myList_3)

Print "d.) (Random Mod 2) = 0"
DumpStringHashList(myList_4)

Print "Showing items that exist in both (c) and (d)"

CheckObjectsInList1ThatExistInList2(myList_3, myList_4)

FreeStringHashList(myList_1)
FreeStringHashList(myList_2)
FreeStringHashList(myList_3)
FreeStringHashList(myList_4)

Delete Each myType ; Blitz types still need to be deleted!

Local CollLibResult=CollLibClear()
If Not CollLibResult Then Print "CollLib resources where not correcly Free'd."

WaitKey()


End


Function MakeIdKey$(i%)
	Local s$ = Str(i)
	While (Len(s) &lt; 3)
		s = "0" + s
	Wend
	Return s
End Function

Function CheckObjectsInList1ThatExistInList2(shlist1%, shlist2%)
	Local slTemp = CreateStringList()
	StringHashListToStringList(shlist1, slTemp)
	StringListSort(slTemp, False)
	Local s$
	
	Local i
	For i = 0 To StringListCount(slTemp)-1
		If StringHashExists(shlist2, StringListGetString(slTemp,i)) Then ;Here is the real comparision (and it's superfast!)
			temp.myType = Object.myType(StringListGetValue(slTemp,i))
			s=s + "("+StringListGetString(slTemp,i)+":"+temp\Random + ")  "
			If Len(s) &gt; 80 Then
				Print s
				s = ""
			EndIf
			EndIf
	Next
	FreeStringList(slTemp) ; clear up.
	If (s &lt;&gt; "") Then Print s
	Print 
	Print
End Function

Function DumpStringHashList(shl_)

	; We dump over the contents of the StringHashList to a StringList
	; to access it by index:
	Local slTemp = CreateStringList()
	StringHashListToStringList(shl_, slTemp)
	StringListSort(slTemp, False) ; StringHashList messes up the order (sorts internaly on hashvalue), so we re-order here again
	Local s$
	
	Local i
	For i = 0 To StringListCount(slTemp)-1
		temp.myType = Object.myType(StringListGetValue(slTemp,i))
		s=s + "("+StringListGetString(slTemp,i)+":"+temp\Random + ")  "
		If Len(s) &gt; 80 Then
			Print s
			s = ""
		EndIf
	Next
	FreeStringList(slTemp) ; clear up.
	If (s &lt;&gt; "") Then Print s
	Print 
	Print
	
End Function


</textarea><br><br>I rewrote your code a bit to show you how StringHashLists may be used to check correlations between sets of values in a fairly efficient way.<br><br>Just an additional note (you may already know this): Blitz type instances do not magically disappear if you delete a CollLib-List, -StringList or -StringHashList that holds its handle. <br><br></td></tr></table><br>
<a name="984160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> than's for your fast response<br><br>the question was in this direction.<br>i didn't test the string and hash functions, based on the fact that i only need to store handles, but, the way you use it is very ilustrative (don`t know if that word exists in english, but hope you understand).<br><br>Juan <br><br></td></tr></table><br>
<a name="984166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I can see how the leap from integer handles to strings may firstly seem a little inefficient for a programmer, but the StringHashList hashes the strings so they actually become small integer values themselves.<br><br>So when you use the function StringHashAddValue() it actually:<br><br>1. Calculates a hash (an integer-value) based of the key-string.<br>2. Inserts the hash into the right place in a sorted table.<br><br>When you use the function StringHashExists()  (or *GetValue etc.) internally the StringHashList does this:<br><br>1. Calculates a hash based of only the search-key-string (that is sent in to the function).<br>2. Binary searches the sorted hash-table for a matching hash.<br><br>Thinking this way it's very logical to use a StringHashList even when you fill the keys with string representations of the handles.<br><br>Example:<br><br>StringHashAddValue(myShl, Hex(Handle(myTypeInstance)), &lt;whatever handle you need to lookup fast&gt;)<br><br>or<br><br>StringHashAddValue(myShl, Str(Handle(myTypeInstance)), &lt;whatever handle you need to lookup fast&gt;)<br><br>This way you can use Blitz Type instances as "keys" to map other handles. (or images, or cubes, or &lt;you get it&gt; ... :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
