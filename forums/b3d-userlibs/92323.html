<!DOCTYPE html><html lang="en" ><head ><title >A new kind of scripting</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A new kind of scripting</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=94" >Blitz3D Userlibs</a>/<a href="#bottom" >A new kind of scripting</a><br><br>
<a name="1051584"></a>

<a name="1051585"></a>

<a name="1051586"></a>

<a name="1051587"></a>

<a name="1051588"></a>

<a name="1051616"></a>

<a name="1051617"></a>

<a name="1051618"></a>

<a name="1051619"></a>

<a name="1051699"></a>

<a name="1051764"></a>

<a name="1051769"></a>

<a name="1051861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tired of painfully-slow scripting languages directly interpreted in Blitz3D? Can't be bothered to write yet another custom VM for your game's unique language?<br><br>Tiny C Compiler is the answer!<br><br>TCC is a lightning-fast C compiler by Fabrice Bellard, compatible with C89 and most of C99, capable of compiling C to machine code directly in your program's memory, and running it! The compiler is fast enough that there's pretty much no noticeable delay, and the result is moddable game logic running directly on the CPU, rather than being slowed down by interpretation.<br><br><a href="https://sites.google.com/site/nangdongseng/downloads/libtcc.zip?attredirects=0&amp;d=1" target="_blank">Click here to download the B3D wrapper.</a><br><br>Four annotated examples are included. To be called from Blitz3D, C functions must return an int and accept a bank (or type object) - as in the examples, it may be convenient to actually write a C wrapper for functions that don't fit this pattern. The bank can be any size (that's your business), and is supposed to hold parameters or pointers to other data structures. Also note that the DLL needs to be accompanied by the "include" and (I think) "lib" folders in order to be able to supply standard C include files and features.<br><br>Function pointers obtained via MikhailV's <a href="http://fastlibs.com/libraries.php" target="_blank">FastPointer</a> will work correctly from C, as long as they've got the right type signature (at least, simple tests indicated this works). You can either pass them in as parameters, or use the AddSymbol function to make them globally visible in your C code - either way, B3D functions can easily be called from the script.<br><br>Finally, if you don't like the C programming language, don't despair - as well as a language in its own right, C is a popular compiler target for higher-level languages (<a href="/posts.php?topic=89467" target="_blank">hmmm, have we been here before?</a>). Writing a compiler from your custom scripting language to C is much simpler than a full script compiler and interpreter, and will still let you benefit from TCC's direct execution on the CPU.<br><br>Aside from scripting, there are any number of other non-game-related uses for this library. For example, the magic of C pointers makes B3D call stack inspection easy.<br><br><br>TCC is originally licenced under the LGPL, which essentially means you can use and distribute it freely without having to open-source your project.<br><br>(Before using this, do consider the downsides of directly-executed scripts: where an interpreted scripting engine can recover gracefully from script crashes, end users can completely crash the game by writing bad C code, or even come up with something malicious as you no longer have full control over how they mod your program... keep these drawbacks in mind!)<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1051859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> as always, very interesting!<br>thank's<br><br>Juan <br><br></td></tr></table><br>
<a name="1052958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yasha, very interesting post, I'm looking forward to trying this later this week. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
