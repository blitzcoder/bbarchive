<!DOCTYPE html><html lang="en" ><head ><title >What Blitzmax+MiniB3d still can do</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What Blitzmax+MiniB3d still can do</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=92" >Graphic Chat</a>/<a href="#bottom" >What Blitzmax+MiniB3d still can do</a><br><br>
<a name="1238309"></a>

<a name="1238310"></a>

<a name="1238311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just want to share a tiny milestone of my Oldschool RPG Engine ported to Blitzmax, ready to run and including full source+media. A simple 2D map made in Excel (yes, Excel is a good Mapeditor!), converted to Radiant Map Format, improved for lighting tests within Radiant and finally rendered with Q3MAP2 to a BSP. This BSP is being parsed to separate meshes in MiniB3D using Normalmaps and DOT Lights for better lighting.<br><br>But see yourself what vanilla miniB3D is capable of without shaders (click for full size):<br><br><a href="http://www.christianhart.de/bmax/orcsbmax/ORCS_MiniB3D_Demo.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/orcsbmax/ORCS_MiniB3D_Demo_t.jpg"></a><br><br><a href="http://www.christianhart.de/bmax/orcsbmax/ORCS_MiniB3D_Demo.zip" target="_blank">Download Demo+Source (8.9MB)</a><br><br>Walk with arrow keys, D show/hide Dotlights, Z enable/disables Z-Order sorting, RMB = Torchlight on/off <br><br></td></tr></table><br>
<a name="1238312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty :-) <br><br></td></tr></table><br>
<a name="1238313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very well detailed. Luv the lighting. Who are the people in the paintings, and.. did you do those yourself too or are they existing works? ;-)Obviously you are doing great in BMax using MiniB3D. Do you consider it the better choice over Blitz3D? <br><br></td></tr></table><br>
<a name="1238314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. It's laggy even for MY graphics card. Which is an Nvidia GeForce GTX 750 Ti that can run the Heaven benchmark on 30+ FPS. I'm only getting between 15 - 20 FPS with this demo, I'm sorry to say. <br><br></td></tr></table><br>
<a name="1238318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's more to processing graphics than just your graphics card.  RAM, processor speed, etc.  Post the rest of your specs son. <br><br></td></tr></table><br>
<a name="1238320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty, but only took ~10 seconds for the motion sickness to kick in. :-? <br><br></td></tr></table><br>
<a name="1238322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 10 seconds for the motion sickness to kick in <br></div><br>&lt;cough&gt;pussy&lt;cough&gt; <br><br></td></tr></table><br>
<a name="1238328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you guys.<br><br>But 15-20 FPS? Here on my GTX 780M / i7 4770K (3.5GHz) I have constant 60FPS and when you press "V" which enables/disables VSYNC, umm lets see yourself, over 1100 FPS - are you sure you pressed the "Turbo" button on your 80386 rig? ;-) Even in the maximum possible fullscreen resolution mode here at 2560x1440 i have about 400FPS.<br><br><img src="http://www.christianhart.de/bmax/orcsbmax/1000fps.jpg"><br><br>The only code part which actually stresses the CPU is the ZOrder sorting every frame, but we're talking about only a few hundred vertices to sort here - see yourself in the main loop, it is nearly empty. Disable it with "Z" and see if this increases the FPS. Beside that, the FPS calculation in the upper left is a long-time average FPS calculation, not per second like in Fraps. So if you run the demo for a longer time you'll get more precise values.<br><br>Rick, The people on the paintings are taken from [a http://commons.wikimedia.org/wiki/Category:1669_portrait_paintings]Wikimedia Commons in the time from 1660-1760[/a]. Yes, Blitzmax+MiniB3D is better and in some situations faster than vanilla B3D. And I love the more Object-oriented programming there and hate the casting in Superstrict Mode but this forces me to create better code from the beginning. <br><br></td></tr></table><br>
<a name="1238350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice example.<br>I noticed that there's no 'culling' of the rooms (if you turn on wireframe view you can see all the rooms in the levels): maybe with some sort of culling enabled things could be a little bit speeder. <br><br></td></tr></table><br>
<a name="1238370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool. Thanks! <br><br></td></tr></table><br>
<a name="1238373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No there is no culling yet. I'm using only a few textures and ALL walls for example are single surface, look at the FPS and I'm using no shaders so the graphics card is bored to death. Perhaps if it'll become more detailed. Culling of detailed props I'll place later makes sense. <br><br></td></tr></table><br>
<a name="1238375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotshot2005</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you going do Bump mapping on the wall or it is already there?<br><br>You have done very well :) Nice One! <br><br></td></tr></table><br>
<a name="1238557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It uses DOT3 bump mapping with normals maps. Each colormap texture in this map has a normalmap, too. It would look much better using shaders but vanilla miniB3D has no shader support. It just uses the vertex colors and a greyscale version of the lightmap plus additional DOT3 vertex lighting to achieve this effect.<br><br>Layer 0: Vertex Color<br>Layer 1: Greyscale Lightmap, Blendmode 5<br>Layer 2: Normalmap, Blendmode 4<br>Layer 3: Colormap, Blendmode 2 (or 5 is possible, too)<br>Layer 4: Original Lightmap, Blendmode 3<br><br>The Vertex Color is identical with the MINLIGHT Variable which is here 120 (116 would be darker, 128 brighter). It is the Torch Lightcolor value, too. The Dotlights colorize the grey vertex colors of the level - from their position some linepicks are casted to the level geometry, check if there are wall collisions and color the vertices like in a normal map. The more vertices you have there, the better will be the bump mapping effect but it takes longer in the initial calculation - I think this can be precalculated and stored to optimize it.<br><br>When you walk around, only the vertices will be illuminated by the torch light and gives some torch light effect on the normalmaps (only brights them up but does not calculate a per-pixel lighting on the normalmaps). It is not very complex but I had to play around with the values to get this lighting effect. It is not 100% mathematically correct but looks good so far and much better than only a lightmap.<br><br>Here are three screenshot of the untextured level, 1st only vertex colors, 2nd vertex+greyscale lightmap and third vertex+lightmap+normalmap. You can clearly see the bumpmap effect (you can try it yourself if you uncomment the BrushTexture commands in the q3bsp.bmx):<br><br><img src="http://www.christianhart.de/bmax/orcsbmax/DOTlights_Vertex.jpg"><br><img src="http://www.christianhart.de/bmax/orcsbmax/DOTlights_Lightmap.jpg"><br><img src="http://www.christianhart.de/bmax/orcsbmax/DOTlights_Normalmap.jpg"> <br><br></td></tr></table><br>
<a name="1238568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool. Front page material. <br><br></td></tr></table><br>
<a name="1238588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting techniques.. <br><br></td></tr></table><br>
<a name="1238590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice looking demo :)<br>The controls are similar to Legend of Grimrock isn't it ? <br><br></td></tr></table><br>
<a name="1238682"></a>

<a name="1238683"></a>

<a name="1238684"></a>

<a name="1238685"></a>

<a name="1238686"></a>

<a name="1238688"></a>

<a name="1238689"></a>

<a name="1238690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>No. It's laggy even for MY graphics card. Which is an Nvidia GeForce GTX 750 Ti<br> <br></div><br><br>I have the same graphics card so something is very wrong with your system.<br><br>It runs very fast here, but there seems to be a bug in the FPS calculations.  For example if I run the program (v-sync off) and simply watch the screen, the FPS climbs and climbs.  Pressing v again settles it.  Also, running your demo sometimes it's near 400FPS, other times more like 300FPS.  The first time I ran it it was about 1000 FPS!!  Maybe something to do with where I was when I turned off v-sync.<br><br>Looks nice though. <br><br></td></tr></table><br>
<a name="1238750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ran ok.  Not hugely impressed. Just looks light a light mapped scene in b3d with a few flickering lights.  Controls were unusual - wasn't expecting cursor keys and to move in those discrete steps.<br><br>It wasn't terrible or anything just nothing spectacular...not compared to your space stuff anyway.<br><br>Oh...how do you go up the stairs? <br><br></td></tr></table><br>
<a name="1238794"></a>

<a name="1238795"></a>

<a name="1238796"></a>

<a name="1238797"></a>

<a name="1238878"></a>

<a name="1238879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty, what did you expect? Legend of Grimrock in vanilla miniB3D? :-) At this point, I don't know how to improve the lighting further. I'm proud that my BSP loader works so that I can use a reliant Level Editor like Radiant for the mapping. Shaders would be fine but miniB3D does not support them. Perhaps realtime shadows? But how to implement them? Do you have any suggestions what can be made better using miniB3D only?<br><br>I made a small animation to show the difference between a simple "Light mapped scene" only and the "Dotlightmapped scene" with Normal Maps and Dotlights you see in this demo (click for original resolution):<br><br><a href="http://www.christianhart.de/bmax/orcsbmax/lightmap.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/orcsbmax/lightmap_t.jpg"></a><a href="http://www.christianhart.de/bmax/orcsbmax/dot.jpg" target="_blank"><img src="http://www.christianhart.de/bmax/orcsbmax/dot_t.jpg"></a><br><br><a href="http://www.christianhart.de/bmax/orcsbmax/dotlightmap.gif" target="_blank">GIF Animation comparison</a><br><br>The stairs are without a function yet, its just a graphics demo of an oldschool RPG remake attempt. I've kept it simple as an example to show how to do it. Sure the stairs will lead to another level later. And I love to use cursor keys like in my space demos. And if it'll become a game one day, there will be a WASD implementation/option, too. But not yet.<br><br>And Matty, the FPS counter is only a loose approximate average of all FPS counted ever since the program starts and simply divides them by the frames. Ok, the FPS count could reset when switching Vsync mode to give a more accurate output. If you want real frames per second, output the variable "fps" instead of "averagefps" in the text command. <br><br></td></tr></table><br>
<a name="1238799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vinnicius</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool <br><br></td></tr></table><br>
<a name="1238830"></a>

<a name="1238831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Matty, what did you expect? Legend of Grimrock in vanilla miniB3D? :-) ...I'm proud that my BSP loader works so that I can use a reliant Level Editor like Radiant for the mapping.<br> <br></div><br><br>Don't be discouraged Krischan, you've made good progress...The lighting is more realistic by turning the torch off.<br><br>Hmm, but I think that flashing animation of light map normal map is going to give people a headache or seizure...Just post the pictures side by side for comparison. <br><br></td></tr></table><br>
<a name="1238862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm the biggest graphics fan there is, but it's really all about gameplay.  Often times twiddling around with obscure graphical settings becomes a way to avoid buckling down and doing the real work.<br><br>There was a series of playable FPS game demos, some in some big mansions, on here a few years back made with Blitz3D.  That was a good example of getting real work done. <br><br></td></tr></table><br>
<a name="1238868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks terrific. <br><br></td></tr></table><br>
<a name="1238882"></a>

<a name="1238883"></a>

<a name="1238884"></a>

<a name="1238885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Steve, no more headaches - compare in hires now.<br><br>And yes Josh, its all about gameplay. But you need something for the player's eyes and ears called "immersion", too. You don't need ultra realistic graphics but it should still have a minimum but sufficient level of visual scenery. Example: here you are in an old dark castle of a vampire so it should be midnight with a thunderstorm, lightnings, flickering torches, knight armors, carpets and strange paintings and all that stuff you would expect there. Here, the lightmap looked good so far but it was not "dark" enough so I experimented with the Dotlights. I think it has more immersion now than before and wasn't that hard to code as the normalmaps and some initial vertex calculations "do" the job.<br><br>The alternative is to return to text adventures like Zork ;-) They are a lot easier to code and we don't need to upload screenshots anymore... <br><br></td></tr></table><br>
<a name="1239032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Love it so far. <br><br></td></tr></table><br>
<a name="1266952"></a>

<a name="1266953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting render, but the normalmap effect is not as good as a bumpmap effect to give relief to a surface (imo). <br><br>Why do the surfaces seem to be less lighted (more dark) with the normal map than with a lightmap ? (with a bumpmap effect, some parts of the surface will be less lighted (where the holes are) and some parts of the surface will be more lighted (where the bumps are), but the light should spread the same way on all surfaces. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
