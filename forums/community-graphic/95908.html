<!DOCTYPE html><html lang="en" ><head ><title >Super Mario Galaxy-esqe rim lighting with blitz3d!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Super Mario Galaxy-esqe rim lighting with blitz3d!</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=92" >Graphic Chat</a>/<a href="#bottom" >Super Mario Galaxy-esqe rim lighting with blitz3d!</a><br><br>
<a name="1107511"></a>

<a name="1107512"></a>

<a name="1107513"></a>

<a name="1107514"></a>

<a name="1107515"></a>

<a name="1107516"></a>

<a name="1107517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> sup guys<br>I've been trying recently to create rim lighting with blitz3d thats decently similair to the rim lighting in the mario galaxy games.<br>I somewhat pulled off a convincing effect using only 2 parented directional lights (originally 4) for the rimming,one for the center lighting and playing around with the ambient light. I call it "fake velvet wrapping" (named after the velvet shader which was used in the smg games)<br><br><a href="http://imageshack.us/photo/my-images/546/blitzcc2011092720564532.png/" target="_blank">http://imageshack.us/photo/my-images/546/blitzcc2011092720564532.png/</a><br>-without FVW<br><br><a href="http://imageshack.us/photo/my-images/9/blitzcc2011092720565114.png/" target="_blank">http://imageshack.us/photo/my-images/9/blitzcc2011092720565114.png/</a><br>-with FVW<br><br>It's got alot of problems though.<br>The rim light is pretty dim and not was noticable as I was hoping for it to be and the lighting looks quite ugly on actual maps and levels.<br><br>For a brighter more defined rim outline it is possible to add two more parental lights on top of the original rim lights, but since blitz3d can only support 8 rendered lights at once, it's seems like kind of a waste of the precious effect.<br><br>I just wanted to show that it is sort of possible to pull off with blitz3d. It's the best I can do at the moment.<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1107518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before I start, I'll admit that I don't know much about rim lighting from a technical standpoint so there might be more going on than I see,<br><br>That said, could you not fake rim lighting by applying a sphere map (basically a black texture with a blurry white circle (hollow) almost as big as the texture) and set that to additive blending? <br><br></td></tr></table><br>
<a name="1107519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cubed Inc.</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually you can, but using real lights to fake it would save alot of time. Also, the mario model used has several textures split up from several images, so I wasnt able to do your idea properly. You would also have to apply the spheremap to EVERY object, so it would prove somewhat less conventient. I might try out your idea though. <br><br></td></tr></table><br>
<a name="1107523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, these are valid points. I was thinking mostly in terms of it being a cheaper effect than using the lights, and perhaps being a stronger effect than you've managed to achieve so far. It would need to be on all materials of all meshes, and you'd have to create the spheremap, so I can certainly see that your technique has advantages. <br><br></td></tr></table><br>
<a name="1107524"></a>

<a name="1107525"></a>

<a name="1107526"></a>

<a name="1107527"></a>

<a name="1107528"></a>

<a name="1107529"></a>

<a name="1107530"></a>

<a name="1107575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rim lighting can be done well if you have fast extension lib for Blitz3D, using a rim light cube map and aligning it to a light source(doesnt have to be a light, any entity to give angle of application)<br><br> you can then apply that to any object you wish to have rim lighting.  This wont suffer any weird angle artifacts like the sphere map approach.<br><br>its not hard to apply a texture to all materials just make your own application routine and have it do all the work, it can pass through the entity and its children performing and checks or special case stuff you want it to do. After its applied once thats it.. no real time lighting to take up gpu time or waste any of your 7 dx lights. <br><br>When you use the Function call of the FastExt lib to align the cubemap to an orientation its updated on every entity that has it applied you dont have to reapply or anything like that. I once used it on all my Mesh particles without any speed hit whatsoever and were talking 1500 particles seen at once all with rimlighting.<br><br>ApplyRimlight(entity,rimtexture,texturechannel=6)<br><br>This application style is exactly what I do for all my special fx textures that can be applied in game.<br><br><br>I don't use rimlighting in Tiny Tanks anymore but I haven't updated my tutorial video yet so you will can see it there on the TT website still.<br><br>edit : fastext also lets you use blend modes such as addsigned, and addsmooth which help with this effect too<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1107535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just see a Mario character...what should the rim lighting look like? Or is it a good thing that I don't notice the effect? <br><br></td></tr></table><br>
<a name="1107536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree it is a bit dim. Is there any way to increase the contrast? <br>Have you also played with negatively-colored lights (i.e: -50,-50,-50 to give some nice darkening effects)?<br><br><div class="quote"> what should the rim lighting look like? <br></div><br>It is a coloring factor based on the Dot product of the eye-vector with a pixel's normal vector (this when properly done in shader code, that is).<br><br><font class="tiny">Shader Designer screenshot (anything orange is rim-color):</font><br><img src="http://i51.tinypic.com/lazrc.jpg"> <br><br></td></tr></table><br>
<a name="1107537"></a>

<a name="1107538"></a>

<a name="1107546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Kryzon - I can see how it should work now, basically the orange areas are where the pixel's normal vector is roughly approaching perpendicular to the eye vector...<br><br>Edit - a bit like this:<br><br><pre class=code>
Graphics3D 512,512,0,2
camera=CreateCamera()
mesh=LoadMesh("teapot.x")
EntityFX mesh,1+2

MoveEntity camera,0,0,-3

For s=1 To CountSurfaces(mesh)
	surf=GetSurface(mesh,s)
	For v=0 To CountVertices(surf)-1
		VertexColor surf,v,0,0,0
	Next 
Next


Repeat
TurnEntity mesh,.1,.2,.3

For s=1 To CountSurfaces(mesh)
	surf=GetSurface(mesh,s)
	For v=0 To CountVertices(surf)-1
		TFormNormal VertexNX(surf,v),VertexNY(surf,v),VertexNZ(surf,v),mesh,camera
		VertexColor surf,v,127.0 + 127.0 * TFormedZ(),127.0 + 127.0 * TFormedZ(),127.0 + 127.0 * TFormedZ()
	Next 
Next


RenderWorld
Flip

Until KeyDown(1)
End
</pre><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1107608"></a>

<a name="1107666"></a>

<a name="1107667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Precisely! :)<br><br>EDIT: I just noticed how you're using the TFormedZ() part of the vector. It's representing '-1' when the normal points towards the camera, and '+1' when the normal points away from it.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1108226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, but something to remember is that when its pointing away from the camera usually that vertex won't be visible. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
