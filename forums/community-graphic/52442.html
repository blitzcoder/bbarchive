<!DOCTYPE html><html lang="en" ><head ><title >Finally... Decent Water</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Finally... Decent Water</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=92" >Graphic Chat</a>/<a href="#bottom" >Finally... Decent Water</a><br><br>
<a name="585382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> strongly influenced on the code by rob cummings, and the cubemapping demo in the code archives, i finally got what looks like i'll be using it for the blitz version of the sub thingee...<br><br><img src="http://home.att.net/~subbase2/blitzcubedwater6.jpg"><br><br>still a lil too mirror like, but close to what i'm looking for...<br><br>yeah... i think i'm gonna go with this...<br><br>--Mike <br><br></td></tr></table><br>
<a name="585421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what's the secret? <br><br></td></tr></table><br>
<a name="585447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks really nice - can you make the water a little bit transparent so you can see the sub through it? <br><br></td></tr></table><br>
<a name="585518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Impressive! Go on, give us a clue. <br><br></td></tr></table><br>
<a name="585522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> NICE work red.<br><br><br>note:<br>You lot can download the cubed demo from www.redflame.net/files/cubed.zip<br><br>Probably guess who I am now hehe. <br><br></td></tr></table><br>
<a name="585550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks guys... it took me long enough to get it working half right...<br><br>actually... there's no secret... the basis for the code is in the archives somewhere, and rob cummings (is that you oneeyed :)  ) was generous enough to let us 'look at' his cube demo code a while back...<br><br>my stuff is a direct outgrowth of these code pieces... 6 sided cube mapping... what i did waste a lot of time with, was not setting the cubemapping camera range far enough to get my skybox reflecting... aside from that, it's nothing new or special... <br><br>i'm just riding on the shoulders of those who came before me... and i'm appreciative of their ingenuity, and their generosity...<br><br><br>Vorderman... yes, you are quite correct... i'm playing around with this, and a few other things, now, in order to make it a lil less mirror like... and a lil more ocean like...<br><br>remember a while back i put forth a sort of challenge to see who could come up with some water that looked like, or came as close to the water in this scene...<br><br><img src="http://home.att.net/~subbase2/VS7Albatross1.jpg"><br><br>well... i'm still trying... but to be honest, i haven't got a clue on how to get the refracted stuff in there... and the whitecaps...<br><br>damn... i should've decided to make an underground fps instead of a game on the water...<br><br>any suggestions... please...  :)<br><br><br>--Mike <br><br></td></tr></table><br>
<a name="585580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braincell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  haven't got a clue on how to get the refracted stuff in there... and the whitecaps... <br></div><br><br>Doesnt look refracted to me, just like it is a reflection with a lot of noise. They may have code that makes the cube map textures noisy by scattering the pixels. Dont know how possible that is in blitz tho. You could also try to blur them but then the reflections on the waves in the distance wont look as detailed/sharp as on the screenshot. I really think you should try figuring out how to scatter pixels on a cubemap, but you should have a high res cubemap. <br><br>Someone correct me if im wrong with my idea here.<br><br>The white caps... i have an idea, why not make a vertical texture that is vertical to the water. I mean if you had a flat square going straight up, if you textured it the texture would be flat on it, with more blue below and whiter and whiter (with whitecaps texture) above. Then, if you have water whoose verts you can access individually, you can change their UV coordinates based on their Y (height above "flat" water), and then the higher it goes the higher the V moves. In effect, i think thats what Becky did in her sailing demo thing and i thought how it could be done. You could add more than one texture too and blend some, move them, etc.<br><br>Oh one more thing i noticed. I see why you might be saying refracting and not reflecting. Under certain higher angles there are no reflections. This i think is shader stuff.<br><br>Hope any of these ideas help at all? <br><br></td></tr></table><br>
<a name="585604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Source engine renders the scene 3 times for its water.<br>Once for refraction and scattered bits of nothing, once for lighting, and then the final render.<br><br>That water in the last screenshot looks nice! <br><br></td></tr></table><br>
<a name="585620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paolo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I pretty much like the first pic Mike,<br>as you said it is a bit too mirror but with one more<br>"noisy" texture in the plane will look great !<br>Add that texture and post the same screenie again please :) <br><br></td></tr></table><br>
<a name="585622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lenn... i think you're right... it may be a shader working...<br><br>Mr. PW... that last shot is from a indie program called Virtual Sailor... yeah, the guy who made it sure does know water :)<br><br>--Mike <br><br></td></tr></table><br>
<a name="585774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Red,<br><br>Try "cleartexturefilters" to get that break up in the detailed textures.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="585778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> will do... thx IPete...<br><br>hey there Paolo... long time no see... the plane pic was taken from Virtual Sailor... it's an example of the scene i was trying to recreate using Blitz3D...<br><br>--Mike <br><br></td></tr></table><br>
<a name="585808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paolo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops ... I was talking about the &gt;water plane&lt; in the first pic (in your first post)<br>I mean, as you said it is too much "mirroring", having one<br>more texture above the plane will make it look better I think ... <br><br></td></tr></table><br>
<a name="585819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> any suggestions... please... :) <br></div>To make the water seem less mirror like try darkening the water mesh so it blends with the cube map. I'd also give it a bit of a blue tinge, but experiment to see what works best. Maybe a better suggestion is to use a tiled texture under the cube map to darken the water. This could then be used to add a bit of noise to the water reflection too.<br>I'd use a variation on the particle system for the white caps as they only appear when a wave is reaching it's highest point and beyond a certain distance you can't see them anyway. So I'd stick a few of emitters in the scene to create the effect on near by waves as they reach their peak.<br>As for making the water transparent I wouldn't bother. I've seen very few oceans that are transparent enough to see below the surface more than a few feet away.<br><br>Hope some of these ideas are useful. <br><br></td></tr></table><br>
<a name="585844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was bored so I had a go at cube mapped water. It's a colored mesh with a noise texture then the cube map on top.<br><br><b>Click to enlarge</b><br><a href="http://www.3se-davew.x5g.com/cube.png" target="_blank"><img src="http://www.3se-davew.x5g.com/tmbcube.png"></a> <a href="http://www.3se-davew.x5g.com/cube2.png" target="_blank"><img src="http://www.3se-davew.x5g.com/tmbcube2.png"></a><br><br>Not bad for 30 minutes work. Now it just needs a few white crests on those wave peaks. <br><br></td></tr></table><br>
<a name="585884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braincell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would be better if you put noise infront of the camera (ie transparent quad) while making the cube map. That would give it noise. But i talked about scattering, not noise :) <br><br></td></tr></table><br>
<a name="585958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for the suggstions guys... i'm trying a few things out... <br><br>my bad Paolo... i read it wrong... <br><br>my situation is slightly complicated by the fact that...<br><br>1- my skybox is huge... 800000 <br>2- my water isn't a flat plane, it is undulating the vertices via a sin wave...<br>3- i use 9 of these water meshes and each moves in a treadmill fashion as the sub/ship moves in order to provide the illusion of a continuous ocean surface for the immediate view, no matter in what direction the sub/ship is moving...<br><br>Oddball...  why did it take you so long :)   the whitecaps and the refracted 'lighting', yeah... that's gonna be the fun part... <br><br>i think Becky had a lil of that in her boat race thingee...<br><br>Lenn... your idea sounds like it may have some promise... <br><br>thanks again guys for the ideas... <br><br>--Mike <br><br></td></tr></table><br>
<a name="586008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Finjogi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. why 9 water meshes.. it would seem more economical to use just one and scroll it one polygon size assuming you use regular grid. Like almost all old scrolling games, scroll one tile size and then update grid offset. Just a thought :) <br><br></td></tr></table><br>
<a name="586020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> sure it would be more economical... but because you are on a ship in motion... and the water has to appear not to move every 5 seconds or so... economy must take a back seat to the game environment (one of the big differences between demos and actual games... it's easy to whip up a cubemapped demo, a lil more work to actually put it into a game)...<br><br>let me expound on this a lil  :)<br><br>a single mesh would need to be moved continuously to keep up with a ship in motion... using 9 grids, the grid you are on never moves while you are  on it, only the ones surrounding you... so you should have grid ready for you always when you arrive at your new position...<br><br>the illusion of a continuous, uninterupted ocean is maintained...<br><br>--Mike <br><br></td></tr></table><br>
<a name="586240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braincell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think what he suggested was that you make one grid and move with with the ship but the movement ON the grid should appear stationary so if you can make the waves seem to "stay put" while the grid moves, would give you some economy. It would require additional maths (and a little brainwork) but it would be more economical. You just have to calculate how much the ship moves and change the phase of the waves by a certain amount (depending on their frequency vs distance). <br><br></td></tr></table><br>
<a name="586270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> wasn't there a problem with the part that is underwater? wasn't it mirrored too? How did you solve that? <br><br></td></tr></table><br>
<a name="586331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lenn... ahhh, ok... i see now, sorry Finj,  if that's what you were talking about... the thing i'd have trouble with is the part where... <div class="quote"> It would require additional maths (and a little brainwork) <br></div> :)<br>the 9 grid treadmill is something i've used before and it seems to work so that's why i stuck with it... copyentity()  seems pretty quick... <br>besides... to give the illusion, i'm gonna need either one big mesh, or 9 lil ones... so, with the additional math, i dunno how much economizing i'm gonna get outta it...<br>but i will give it a try though... never can tell... thx<br><br>jfk... this is not a mirror, i'm using a cubemapping process to derive the reflections... <br>the problem i was having was using the mirror function to get the reflections... it mirrored everything above and beneath the mirror plane...<br><br>--Mike<br><br><br>thanks again for the help <br><br></td></tr></table><br>
<a name="587071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Red, why don't you use a cubemap for the water? Create a cubemap with masked bottom and top texture, and 4 white sides, so, when the normals of the water reach a certain angle, the cubemap will show the white sides, on the peaks. <br><br></td></tr></table><br>
<a name="587079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> hhmmmmm.... hhhhhmmmmmmmmmmmmmmmmmmm....<br><br>lemme try dat!!!<br><br><br>seriously, thanks Ross... i'll give it a go... <br><br>i am using a cubemap now, but stumbling all over the place with small problems, mainly getting the reflections not to go all over the place when the viewpoint raises it altitude (y setting)... haven't really had a chance to attack the other stuff yet...<br><br>--Mike <br><br></td></tr></table><br>
<a name="590232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I quite like Black and White 2's water:<br><img src="http://members.dodo.com.au/~tzuyd/BW0003.png"><br>Nice wobbliness underneath the mountains, waviness everywhere, moon reflection in the water in the lower right hand corner, shore splash overlapping the beach (not much).<br><br>Of course it's almost all done with shaders, you can tell because the sea is just one huge flat plane.  Looks really convincing in motion though... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
