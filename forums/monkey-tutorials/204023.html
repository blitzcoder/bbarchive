<!DOCTYPE html><html lang="en" ><head ><title >Getting Started with Native Code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Getting Started with Native Code</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=513" >Monkey Tutorials</a>/<a href="#bottom" >Getting Started with Native Code</a><br><br>
<a name="2043079"></a>

<a name="2043080"></a>

<a name="2043083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a quick simple tutorial for wrapping native functions!<br><br><b>SIMPLE html5 example - myDeviceResolution.monkey</b><br><br>[monkeycode]<br>Import "myNative.js"<br><br>Extern<br><br>  Function SetDeviceResolution:Void(w:Int, h:Int)<br>  'Add more functions here if you want<br><br>Public ' Back to Public from Extern<br>[/monkeycode]<br> <br>Import the file with native code. In this case I'm using a .js file then we will call a function in this file. <br><br>In file called myNative.js<br>[monkeycode]<br>function SetDeviceResolution(w, h) {<br>        var canvas=document.getElementById( "GameCanvas" );<br>        canvas.width  = w;<br>        canvas.height = h;<br>}<br>[/monkeycode]<br>DONE<br><br><br>Anywhere in your code just import the monkey-file above<br><div class="quote"> <br>Then just call SetDeviceResolution( 500,400), and if you are on the html5 target that javascript function will be called with those parameters.<br> <br></div><br><br><br>Explanation: Extern like Public and Private are used to switch access scope and can only be used outside a class (in module scope). Type Extern and now external functions can be defined as one-line abstract functions. Type Public, or Private to go back to normal definitions.<br><br>Function SetDeviceResolution:Void(w:Int, h:Int) automatically maps to the function SetDeviceResolution(w, h) in the myNative.js file because they have the EXACT same name.<br><br><b>ADVANCED</b><br>You can be more fancy here and import depending on the file's name<br>Here is an example of that from diddy:<br><br>[monkeycode]<br>#if HOST="macos" And TARGET="glfw"<br>Import "native/diddy.${TARGET}.mac.${LANG}"<br>#else<br>Import "native/diddy.${TARGET}.${LANG}"<br>#end<br>[/monkeycode]<br><br>Above: Note that in the import string ${LANG} will be replaced by cpp,js,cs,as or java AND ${TARGET} will be replaced by android, flash, html5, glfw,ios,psm,win8 or xna<br><br>For this to work on all targets you need to create 8 files, one per target! Also note that in diddy's case above they have 2x for the glfw due to slight changes in mac/win. Also the native/ means those files are expected to be placed in a folder called "native".<br><br>If you do not yet support one or more targets you can add something like this to your Monkey file:<br><br>[monkeycode]<br>#If LANG&lt;&gt;"js"<br>#Error "setting device resolution are unavailable on this target"<br>#Endif<br>[/monkeycode]<br><br>If you prefer to name your native functions different from the Monkey one then you might be happy to learn that Monkey also supports wrapping like this:<br>[monkeycode]<br>Extern<br><br>  Function MySetDeviceResolution:Void(w:Int, h:Int) = "SetDeviceResolution"<br><br>Public<br>[/monkeycode]<br><br>Now "SetDeviceResolution" will be the function-name in the .js file that will be called.<br><br>Remember it is CaSEseNsitivE.<br><br>For more in-depth and advanced wrapping check this tutorial out: <br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1736" target="_blank"> iOS Integration </a> <br><br></td></tr></table><br>
<a name="2043420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage1982</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is exactly the kind of tutorials that should be available in the Monkey documentation.<br><br>An extended version for C#/C++ and the use of external libraries is more than welcome ! <br><br></td></tr></table><br>
<a name="2043474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> An example of native C would be great for me too! :) <br><br></td></tr></table><br>
<a name="2043485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> diddy and even my module have native cpp code integrated. So a quick look there shows you how it can be done. The problem are static libraries, These can't be imported automatically. You need to  modify the created project to be able to use these. <br><br></td></tr></table><br>
<a name="2043552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sammy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mike, thank for the tips.<br><br>What is the problem with static libs, is it including the libs in the build or is there a problem calling the lib? <br><br></td></tr></table><br>
<a name="2043611"></a>

<a name="2043612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Including the lib into the compilation process is not allowed (yet). it would need a mod to the trans (see Monkey-Extra module) to allow CC_OPT style switches like "-lmylib".<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=3387" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=3387</a> <br><br></td></tr></table><br>
<a name="2050230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> good tutorial m8 <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
