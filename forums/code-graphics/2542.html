<!DOCTYPE html><html lang="en" ><head ><title >Arbitrary-Control Bezier Curves</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='Calculate bezier curves with any number of control points per bezier, language=bb, category=Graphics'><meta name='author' content='ImaginaryHuman'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=1>Graphics</a>/Arbitrary-Control Bezier Curves</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="2542.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arbitrary-Control Bezier Curves by ImaginaryHuman</td><td align="right">2009 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> This deceptively simple code allows for the calculation of a bezier curve with any number of control points, from 3 upwards.<br><br>The function calculates one point on a curve. You will need to call it multiple times with a varying `Position`, in the floating point range of 0.0 to 1.0, and then use the points for drawing - e.g. draw straight lines between each point.<br><br>Note, one of the only drawbacks besides speed is that the calculation destroys the contents of the arrays of control points, so if you are to calculate many points on a single curve you may want to make a copy of your control-point arrays before calling the function each time.<br><br>I have tested it with a 50 control-point bezier curve and made myself a nice spiral :-D With so many control points, the calculation gets much heavier, and thus slower, so it's dubious as to the usefulness of using so many points for a single curve when cubic beziers are usually good enough. However, 6-10 point beziers are quite interesting.<br><br>This generic function is about 1.4 times slower than a hand-coded approach to a specific number of control points, mainly due to the loop overhead.<br><br>Pass it an array of X coordinates and an array of Y coordinates, which define the control points. The point on the curve is returned in the variables PointX,PointY.<br><br>Replace all of the references to `Float` with `Double` for more accurate calculations. </td></tr><tr ><td class="cell"><pre class="code">Function CurvePointAny(X:Float[],Y:Float[],NumberOfControls:Int=3,Position:Float,PointX:Float Var,PointY:Float Var)
	'Calculate a point on a bezier curve with any number of control points using single-precision floating point math
	'Requires at least 3 control points with X and Y coordinates and a current position on the curve in the range 0..1
	'Can handle any number of control points &gt;=3, but the more you add the more calculation is required
	'Coordinates are returned in PointX and PointY variables
	'Contents of X and Y arrays will be trashed by the calculations, so create copies if you need to preserve values

	'Calculate bezier curve with any number of control points
	Local OuterLoop:Int=NumberOfControls-1			'Total number of outer-loop iterations
	Local InnerLoop:Int
	While OuterLoop&gt;0
		InnerLoop=0									'Start inner loop at 0
		While InnerLoop&lt;OuterLoop
			X[InnerLoop]:+((X[InnerLoop+1]-X[InnerLoop])*Position)	'Calculate X point on the curve
			Y[InnerLoop]:+((Y[InnerLoop+1]-Y[InnerLoop])*Position)	'Calculate Y point on the curve
			InnerLoop:+1								'Next inner loop
		Wend
		OuterLoop:-1									'Next outer loop
	Wend	

	'Copy final position into return variables
	PointX=X[0]
	PointY=Y[0]
End Function</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>2009</font></td></tr></table></td></tr><tr ><td class="posttext"> Someone please move this to the BlitzMax section, sorry ;-D <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
