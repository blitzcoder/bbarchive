<!DOCTYPE html><html lang="en" ><head ><title >2d/3d math help (differential calculus)..</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2d/3d math help (differential calculus)..</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >2d/3d math help (differential calculus)..</a><br><br>
<a name="1152657"></a>

<a name="1152658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure this is the place to post this but someone might be able to help..<br><br>I'm working on some 3d collision code for sphere vs triangle, cylinder vs triangle, cone vs triangle etc.  It's special case stuff where these primitives are cast straight down from the sky and given their X,Z positions I only need to solve the height of first contact.  Contacts with triangle faces or vertices is easy enough but contacts with their edges is a bit more involved.<br><br>I've got cylinder and sphere code working nicely.  Basically if a triangle edge overlaps a cylinder or a sphere it truncates it, the size of the truncation is used to find a point on the triangle edge...<br><br><img src="http://www.matibee.co.uk/temp/cyl-edge-test.jpg"><br><br>But the section through a cone is very different to the simple sections through a cylinder or a sphere -- they're a function of the cone angle and the distance between the truncation plane and the cone centre.<br><br><img src="http://www.matibee.co.uk/temp/cone-edge-test.jpg"><br><br>This'll be where the differential calculus comes in but it's been a looong time since I did that at uni.<br><br>My question is (which probably underlines my lack of calculus experience), given we know the required tangent, can we rearrange the formula for finding the tangent to find an x or y position on it?  Otherwise, am I going to have to 'walk' the curve until I find a matching tangent?<br><br>Any help appreciated :)  I've only just started down this road, and I'll solve it in time.  I'm just looking to reduce that time if I can ;)<br><br>Cheers<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1152700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cannot imagine why calculus should be needed?<br><br>Couldn't the upper part of the cone/ 2d-triangle be splitted into different easy to calculate objects ? - triangles, trapezoid, ...<br><br>The theorem of intersecting lines is also a thing which may help to get a nice and short formula. May be some rotations or further information (last animation position, ...) are needed.<br><br>Just some ideas as I do not have the time now to do more things in depth. <br><br><br>PS: I do not really know what the points you marked are in reality. Do you want to know the edge cutting the hit object? Or what is the exact position you want to calculate (in your cone example the height would be the most lower part of the triangle hitting the line).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1152705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the key idea is to use the axis of the cone. This is the line through the apex and "down the middle".<br><br>As the triangle edge descends the first point of contact with the cone is the one you seek. But don't stop there. Imagine the edge continuing until it hits the axis. Now go back to thinking of the edge stopping when it hits the cone. Consider the line from the intersection point on the axis to the tangency point where the edge touches the cone. The line is perpendicular to the edge at this point.<br><br>The point on the axis is easy to calculate. The orientation of the descending edge is known. It shouldn't be too hard to work out the details using the perpendicularity of the line from the axis point to the point where the edge contacts the cone.<br><br>That's as much progress as I can make without rolling up my sleeves and doing some real work. <br><br></td></tr></table><br>
<a name="1153212"></a>

<a name="1153213"></a>

<a name="1153216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your thoughts guys.  The more I look at this the more I need calculus to truly solve it (although I may opt to perform half testing for now as that's simpler.)<br><br>If the edge is flat (same height both ends) finding the intersection is easy but as the edge becomes steeper the contact point moves further along the curve (see final part of diagram above) but this also has the effect of moving the contact point further from the axis.  I think that simultaneously solving the height <i>and</i> the distance from the axis can only be done through the one common factor we have and that's the angle of the edge.  The true intersection is where the angle of the edge and the slope of the curve match.<br><br>The function for the curve (for a cone of inifite height) is ( Sqr( x * x + d * d ) / Tan( a ) )  where <b>d</b> is the distance from the cone axis (length of blue line in first part of cone/edge diagram above) and <b>a</b> is the cone angle.<br><br>Dave Eberly's geometric tools site also mentions this curve of seperation: www.geometrictools.com/Documentation/IntersectionTriangleCone.pdf  (see Section 3 - Finding Intersection.)<br><br>BTW - this is not for real time use but accuracy is pretty important (to 4 decimal places.) Also (just to reiterate), the contact point shown in the final diagram is the only point on the surface of the cone that may hold true for a known edge, known cone and known X and Z positions.<br><br>Thanks for listening :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
