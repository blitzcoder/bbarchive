<!DOCTYPE html><html lang="en" ><head ><title >How to locate a server?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to locate a server?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >How to locate a server?</a><br><br>
<a name="999890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Given a web site(eg. www.abcdefg.com), how could we know the country the server located (eg. USA, UK, etc.)<br><br>Thanks in advance <br><br></td></tr></table><br>
<a name="999892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go to a site like this and research it...<br><br><a href="http://www.dnsstuff.com/tools" target="_blank">http://www.dnsstuff.com/tools</a> <br><br></td></tr></table><br>
<a name="999907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a bit cumbersome, but this is what it boils down to:<br>- Each domain name has an IP address associated with it<br>- These IP addresses are handed out / governed by several agencies, depending on the continent they are on. These are registred in apublic database that can be queried.<br><br>For Example:<br>ARIN -&gt; North American<br>RIPE -&gt; Europe<br>APNIC -&gt; Asia/Pacific<br>AfriNIC -&gt; Africa<br><br>Each of these run so-called WhoIs servers, which can be queried for extended information on the IP address (or block) in question.<br><br>WHOIS is a very, very simple protocol: All you need to do is connect to port 43 of a whois server, and send the domain name or IP address for the site in question.  'normal' whois servers that can only look up domain names, to find out the geographical location you're going to have to query the whois servers of ARIN and the likes, and you'll need the IP for that.<br><br>- Open a TCP connection to port 43 on whois.arin.net<br>- Send the IP address you're curious about<br>- Parse the results.<br><br>for example: if you send 4.4.2.2 to whois.arin.net, you'll get a bunch of information, among which is the following:<br><div class="quote"> <br>OrgName:    Level 3 Communications, Inc. <br>OrgID:      LVLT<br>Address:    1025 Eldorado Blvd.<br>City:       Broomfield<br>StateProv:  CO<br>PostalCode: 80021<br>Country:    US<br><br>NetRange:   4.0.0.0 - 4.255.255.255 <br>CIDR:       4.0.0.0/8 <br>NetName:    LVLT-ORG-4-8<br>NetHandle:  NET-4-0-0-0-1<br>Parent:     <br>NetType:    Direct Allocation<br> <br></div><br><br>and looking at the Country: field, you can tell that the server on IP 4.4.2.2 is in the US.<br><br>Now, if we try to look for example yahoo.jp, which we'd guess is probably in Japan, we do the same thing: Resolve the domain name to an IP: 124.83.139.192<br><br>However, now when we ask whois.arin.net about 124.83.139.192, it returns different information:<br><br><div class="quote"> <br>OrgName:    Asia Pacific Network Information Centre <br>OrgID:      APNIC<br>Address:    PO Box 2131<br>City:       Milton<br>StateProv:  QLD<br>PostalCode: 4064<br>Country:    AU<br><br>ReferralServer: whois://whois.apnic.net<br><br>NetRange:   124.0.0.0 - 124.255.255.255 <br>CIDR:       124.0.0.0/8 <br>NetName:    APNIC-124<br>NetHandle:  NET-124-0-0-0-1<br>Parent:     <br>NetType:    Allocated to APNIC<br> <br></div><br><br>As you can see, it's allocated to one of the other registries, and lists a ReferralServer: whois.apnic.net.<br>That means you'll need to do a SECOND query, against the whois.apnic.net server on port 43 as well.<br><br>It returns the following:<br><div class="quote"> <br>% APNIC found the following authoritative answer from: whois.apnic.net<br>% [whois.apnic.net node-2]<br>% Whois data copyright terms    <a href="http://www.apnic.net/db/dbcopyright.html" target="_blank">http://www.apnic.net/db/dbcopyright.html</a><br>inetnum:      124.83.128.0 - 124.83.255.255<br>netname:      YAHOO-NET<br>descr:        Internet Content Provider<br>country:      JP<br>admin-c:      YJ982-AP <br>tech-c:       YJ982-AP<br>status:       ALLOCATED PORTABLE<br>mnt-by:       APNIC-HM<br>mnt-lower:    MAINT-AP-YAHOO-JP<br>remarks:      -+-+-+-+-+-+-+-+-+-+-+-++-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br>remarks:      This object can only be updated by APNIC hostmasters.<br>remarks:      To update this object, please contact APNIC<br>remarks:      hostmasters and include your organisation's account<br>remarks:      name in the subject line.<br>remarks:      -+-+-+-+-+-+-+-+-+-+-+-++-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br>changed:      hm-changed@... 20060221<br>changed:      hm-changed@... 20070608<br>source:       APNIC<br>role:         YAHOO JAPAN<br> <br></div><br><br>As you can tell, it shows 'Country: JP', which means Japan.<br><br>Now, things may get a little murky when you are talking about large ISP's that span across national borders and/or run web proxy servers, but for the vast majority of cases the returned information will be accurate.<br><br>(you can do a quick test and see for yourself simply by opening a command prompt on your PC, and type:<br><pre class=code>telnet whois.arin.net 43</pre><br>This will give you a blank screen with blinking cursor. Type the IP address you want to know about, hit enter, and bam -- you should see the results. <br><br></td></tr></table><br>
<a name="999945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> WhoIs gives ownership, not actual location.  Some other tools are capable of giving actual location, down to the city.  I have never really researched how they do it, so I do not know the specifics. <br><br></td></tr></table><br>
<a name="999990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just out of curiosity, I thought I'd try xlsior's whois explanation in BlitzMax (the initial lookup anyway):<br><br><pre class=code>
SuperStrict

Local socket:TSocket = CreateTCPSocket ()

If socket

	If ConnectSocket (socket, HostIp ("whois.tucows.com"), 43)
	
		Local stream:TSocketStream = CreateSocketStream (socket)
		
		If stream
		
			WriteString stream, "bbc.co.uk" + Chr (13) + Chr (10)
			
			Local result:String
			
			While Not Eof (stream)
			
				result = ReadLine (stream)
				Print result
				
			Wend
			
			CloseStream stream
	
		EndIf
		
		CloseSocket socket
		
	EndIf

EndIf
</pre> <br><br></td></tr></table><br>
<a name="1000223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> This was kinda helpful, seems you'd need to do a few different checks to various administrative/registration co's.<br><br><a href="http://www.private.org.il/IP2geo.html" target="_blank">http://www.private.org.il/IP2geo.html</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
