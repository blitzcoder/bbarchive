<!DOCTYPE html><html lang="en" ><head ><title >Sigh.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sigh.</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Sigh.</a><br><br>
<a name="968502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What the hell is a Union?<br><br><div class="quote"> <br>typedef struct tagRAWINPUT { <br>    RAWINPUTHEADER    header; <br>    union {<br>             RAWMOUSE    mouse; <br>             RAWKEYBOARD keyboard; <br>             RAWHID      hid; <br>            } data;<br>} RAWINPUT, *PRAWINPUT; *LPRAWINPUT;<br> <br></div><br><br>I found these pages describing it, but they do a terrible job and I don't understand what they're saying:<br><br><a href="http://en.wikipedia.org/wiki/Union_%28computer_science%29" target="_blank">http://en.wikipedia.org/wiki/Union_%28computer_science%29</a><br><a href="http://msdn.microsoft.com/en-us/library/y9zewe0d%28VS.80%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/library/y9zewe0d%28VS.80%29.aspx</a><br><br>I mean it looks like a union and a struct are the same thing and the above is nesting a union called data in the struct, so there would be a field in the struct called data, and that field would have subfields called mouse, keyboard, and hid that one could access, but if that's the case I don't understand why the outer one is declared as a struct but the inner one is declared as a union. <br><br></td></tr></table><br>
<a name="968503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://tinyurl.com/mleuu9" target="_blank">http://tinyurl.com/mleuu9</a> <br><br></td></tr></table><br>
<a name="968505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So basically, a union allows me to reference a single chunk of memory with ten different variable names?<br><br>Who came up with that crazy idea?  Why not just have a single field and call it "data"?  I mean hell, you have to access the fields by first typing "data" ANYWAY the way they have that particular example set up.<br><br>I mean maybe if you didn't have to type the name of the union to access the members it might have some use somehow in object oriented stuff, but since you do...<br><br>Hm... I guess they can be different types though.  If you just had a variable called Data you couldn't do that... <br><br></td></tr></table><br>
<a name="968508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hm... I guess they can be different types though. <br></div>Yes. That's the power of unions. In your example, the data member can hold any one of three different types. <br><br></td></tr></table><br>
<a name="968509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought the power of unions was that nobody could ever be fired or have their wages reduced? <br><br></td></tr></table><br>
<a name="968510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That too. <br><br></td></tr></table><br>
<a name="968513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's still silly though.  You're saving, what, a few bytes?  At the cost of less readable code, and having to type a bunch more every time you want to access one of those vairables?  Not to mention opening the potential for difficult to find bugs if you accidentally overwrite one of the values somewhere you shouldn't. <br><br></td></tr></table><br>
<a name="968543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what's this do?<br><br><pre class=code>
typedef struct tagRAWMOUSE { 
  USHORT    usFlags; 
  union {
         ULONG    ulButtons;
             struct {
                       USHORT usButtonFlags;
                       USHORT usButtonData;
                       };
  };
  ULONG ulRawButtons;
  Long  lLastX;
  Long  lLastY;
  ULONG ulExtraInformation;
} RAWMOUSE, *PRAWMOUSE, *LPRAWMOUSE;
</pre><br><br>I've got a union, which I understand, but in that there's a struct, and there's no name listed after the struct to access the members with.<br><br>Am I to understand that with this setup, you either have ulButtons, OR you have both usButtonFlags and usButtonData? <br><br></td></tr></table><br>
<a name="968545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
typedef struct tagRAWKEYBOARD {
    USHORT MakeCode; ' 2
    USHORT Flags; ' 2
    USHORT Reserved; ' 2
    USHORT VKey; ' 2
    UINT Message; ' 4
    ULONG ExtraInformation; ' 4
} RAWKEYBOARD, *PRAWKEYBOARD, *LPRAWKEYBOARD;
</pre><br><br>UINT = Unsigned, 4 bytes, 0 through 4294967295<br>ULONG = Unsigned, 4 bytes, 0 through 4294967295<br><br>WHY HAVE BOTH?<br>WHY HAVE BOTH IN THE SAME STRUCT RIGHT NEXT TO EACHOTHER?<br><br>God, it's like they're intentionally trying to make things more difficult.<br><br>[edit]<br><br>Amazing.  In one of the related structures they also have DWORDs.  Which are the same exact thing as the above two as well, again, just with a different name!<br><br>I know why these different type idenfiers might all have come into existence, but to use them all in the same codebase, in the same set of structures?  Ugh.  It's like Microsoft has no code consistency. <br><br></td></tr></table><br>
<a name="968546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Am I to understand that with this setup, you either have ulButtons, OR you have both usButtonFlags and usButtonData? <br></div><br>I believe so, yes (my C is a bit rusty, TBH). It seems to allow you to access the button data wholesale via ulButtons, OR access the same data, but broken down into it's specific components, via usButtonFlags and usButtonData.<br><br><div class="quote"> WHY HAVE BOTH?<br>WHY HAVE BOTH IN THE SAME STRUCT RIGHT NEXT TO EACHOTHER? <br></div>Because C source is intended to be cross platform. While UINT and ULONG are the same here, they may not be on other architecture. <br><br></td></tr></table><br>
<a name="968552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't buy that excuse.  These are functions in a DLL.  No matter what language you use, the returned data will always be the same size.  Also because they're part of the OS and you want to maintain forward compatability, you will never want them to change size if the code is ever recompiled.<br><br>I've never liked the idea of ints being different sizes on different architectures.  That sort of setup is just asking for memory leaks and other nasty bugs.  And for what?  So the code runs as fast as possible on whatever architecture it's running on?  I guess that's a positive.  But it still doesn't make any sense to use a variable type like that in a DLL whose interface should never change. <br><br></td></tr></table><br>
<a name="968553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this instance, I think the coder is just being anal. He/she is using a form of Hungarian Notation, after all. :) <br><br></td></tr></table><br>
<a name="968559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Philip7</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Google 'anal hungarian' and it wil all be explained. <br><br></td></tr></table><br>
<a name="968560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you do, you're unlikely to get any links to anything remotely programming related. <br><br></td></tr></table><br>
<a name="968588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Google 'anal hungarian' and it wil all be explained.  <br></div><br>You, Sir, have a very evil (and very Dutch) sense of humour. I like it! <br><br></td></tr></table><br>
<a name="968596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is why I don't like C++/C, it's waay over complicated sometimes. However, in some cases, it's a necessary evil. I avoid it whenever possible though :| <br><br></td></tr></table><br>
<a name="968607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift, can you make sure these topics get posted in General Help please (and with a descriptive title). Moving... <br><br></td></tr></table><br>
<a name="968614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift, you really ought to just learn C and/or C++ (the two are not the same, so learning C++ does not mean you learned C, and vice versa).  How you survived this long without learning it is beyond me, but if you're using BMax and something outside the standard modules, it helps to know one or the other (typically C is more useful, from what I've seen).<br><br><div class="quote"> This is why I don't like C++/C, it's waay over complicated sometimes. <br></div>This isn't complex.  A union just gives you a much easier way to access different kinds of data in the same region. <br><br></td></tr></table><br>
<a name="968617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably more convoluted than complicated. Half of the stuff I wouldn't worry about - like unions. A relic from the days when memory was scarce. <br><br></td></tr></table><br>
<a name="968634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nillium:<br><br>I knew C at one point.  My first job was as a C programmer for a company that made game controllers.<br><br>I'd been programming my whole life, but within three months of switching to C I quit programming, and my job.  I would not pick up a compiler again for three years, and then, only for Visual Basic, then Dark Basic, then the different flavors of Blitz.<br><br>Trying to figure out how these Windows calls works has only served to cement my resolve against getting back into C programming.  Having to read through twenty pages of documentation just to get the X and Y position of the mouse isn't my idea of fun.  I had to read almost as much to do that as I did to research complex graphics algorithms for stitching images together and calculating 3D shape from 2D shading!<br><br>C can go jump in a lake. :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
