<!DOCTYPE html><html lang="en" ><head ><title >opengl depreciation and compatibility</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >opengl depreciation and compatibility</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >opengl depreciation and compatibility</a><br><br>
<a name="1078721"></a>

<a name="1078731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have a question about maintaining compatibility in openGL. <br>I'm upgrading my software from Blitz3D to MiniB3D. I thought I change from DX7 to OpenGL, since I need not to worry about deprecation.<br><br>Elas, as I understand, older openGL functions are now deprecated, and will be 'removed in future versions'. Some manufacturers will not include these functions anymore. (the opengl 'core' profile)<br><br>Also, there are cards which only support up to a certain version, such as OpenGL 1.5. My own laptop has that.<br><br>How could I write software that is compatible with both older and newer cards? And how long should I expect this software to last? MiniB3D runs fine on my OpenGL 1.5 machine, but will it also keep running on newer videocards?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1078728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Moving from Blitz3D to MiniB3D (in terms of the 3D aspect of Blitzmax) isn't an upgrade, its more of a step sideways.<br><br>No reason MiniB3D apps won't run on newer hardware.  There's been a couple of commercial games done with it (Super Gerball for one) so there can't be that many issues.<br><br>Oh, and the word you're looking for is deprecated, not depreciated, which means something entirely different. <br><br></td></tr></table><br>
<a name="1078732"></a>

<a name="1078734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dang, I've allways read that as depreciated.. thanks for letting me know. I can't edit the topic title, but I edited the post itself.<br>The reason I called it an upgrade, is that I was under the (wrong) impression that even though OpenGL gets extended, the core functions weren't affected. So that in a way OpenGL 1.5 is less obsolete than DX7.<br>Still it feels wrong to write something new using 'deprecated' functions. Even though my own hardware doesn't support anything else.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1078737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can find what is being deprecated on lists throughout the web (both official and independent).<br><br><a href="http://www.devklog.net/2008/08/23/forward-compatible-opengl-3-entry-points/" target="_blank">http://www.devklog.net/2008/08/23/forward-compatible-opengl-3-entry-points/</a><br><br><a href="http://stackoverflow.com/questions/1218449/opengl-whats-the-deal-with-deprecation" target="_blank">http://stackoverflow.com/questions/1218449/opengl-whats-the-deal-with-deprecation</a><br><br>But yeah, soon enough MiniB3D will have to be updated to the new specification. <br><br></td></tr></table><br>
<a name="1078745"></a>

<a name="1078746"></a>

<a name="1078750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, if I understand it correctly, to be able to serve both old and new videocards, I'm better off using OpenGL 1.5 functions, like the ones minib3d uses?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1078783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems for the time being the old OpenGL specification that MiniB3D uses is still compatible with recent cards, though it seems that it would invoke a "compatibility mode" to support these deprecated features.<br><br>More info here: <a href="http://developer.nvidia.com/object/opengl_driver.html#faq" target="_blank">http://developer.nvidia.com/object/opengl_driver.html#faq</a> <br><br></td></tr></table><br>
<a name="1079088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> After reading quite a bit, I've decided -for now- to go with the approach that is described here:<br><a href="http://www.rojtberg.net/302/developing-opengl-3-when-all-you-have-is-opengl-1-5/" target="_blank">http://www.rojtberg.net/302/developing-opengl-3-when-all-you-have-is-opengl-1-5/</a><br><br>My card only supports ASM based shaders (I believe they're called shader programs). In my engine, I will add a separate file that implements these programs. Later on, if GL1.5 would get unsupported, I can then replace this module by a GLSL one.<br><br>Thanks for all the help! I'll post an example in the openGL section. <br><br></td></tr></table><br>
<a name="1079197"></a>

<a name="1079198"></a>

<a name="1079200"></a>

<a name="1079201"></a>

<a name="1079202"></a>

<a name="1079203"></a>

<a name="1079205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Intel are to blame....  damn you intel... and may you go bankrupt when blogg's processors eat your faces.<br>Get a different mistress as MS is getting a real bucket!<br><br>In short, STOP MAKING GPUS!!!!!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1079238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>STOP MAKING GPUS!!!!!<br> <br></div><br><br>Apparently they've just stopped sucking instead!<br><br><a href="http://www.pcgamer.com/2011/03/04/epic-latest-intel-integrated-graphics-dont-suck/" target="_blank">http://www.pcgamer.com/2011/03/04/epic-latest-intel-integrated-graphics-dont-suck/</a> <br><br></td></tr></table><br>
<a name="1079472"></a>

<a name="1079832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know about cards and their quality, but I have an onboard SiS.<br>My experience so far: if it runs on my laptop, it will run anywhere.<br><br>Thanks for the links, info and feedback!<br><br>Here is my archive entry .. future reference. <br>Uses BlitzMax, openGL. Based off code from codesamples.com: <a href="http://www.codesampler.com/oglsrc/oglsrc_9.htm" target="_blank">http://www.codesampler.com/oglsrc/oglsrc_9.htm</a><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Global llen% = 0

SetGraphicsDriver GLGraphicsDriver()
GLGraphics 800,600,0,0,GRAPHICS_BACKBUFFER|GRAPHICS_DEPTHBUFFER 

Global g_pixelProgramID%
Global g_vertexProgramID%
Global time#

'array to hold two triangles that form a square
Global g_triVertices:Float[] = ..
[..
     0.0,0.0,  0.0,0.0,-1.0, -1.0,-1.0, -4.0 ,..
     1.0,0.0,  0.0,0.0,-1.0,  1.0,-1.0, -4.0 ,..
     1.0,1.0,  0.0,0.0,-1.0,  1.0, 1.0, -4.0 ,..
..
     0.0,0.0,  0.0,0.0,-1.0, -1.0,-1.0, -4.0 ,..
     1.0,1.0,  0.0,0.0,-1.0,  1.0, 1.0, -4.0 ,..
     0.0,1.0,  0.0,0.0,-1.0, -1.0, 1.0, -4.0..
]

init() 'setup OPENGL
initShader() 'load and compile shaders

Repeat

	render() 'render square with shaders

Until KeyHit(27) 'ESC=exit

End

'
' init() - Setup OPENGL
'
Function init()

	glewInit()

	glEnable( GL_DEPTH_TEST ) 'enable z-buffer
	glEnable(GL_CULL_FACE) 'enable cull
	glCullFace(GL_BACK) 'set cullmode

	glClearColor( 0.85, 0.7, 0.5, 1.0 ) 'cameraclscolor

	glMatrixMode( GL_PROJECTION ) 'choose projection matrix
	glLoadIdentity() 'reset it
	gluPerspective( 45.0, 640.0 / 480.0, 0.1, 100.0 ) 'create camera view
	
End Function

'
' Load and compile shader
'
Function initShader()

	'
	' Check capabilities
	'
	
	Local Extensions$ = String.FromCString(Byte Ptr(glGetString(GL_EXTENSIONS)))
	Local VPSupport% = Extensions.Find("GL_ARB_vertex_program") &gt; -1
	Local FPSupport% = Extensions.Find("GL_ARB_fragment_program") &gt; -1
	If Not(VPSupport)
		Print "No Vertex Program support."
		End
	End If
	
	If Not(FPSupport)
		Print "No Fragment Program support."
		End 
	End If	

	'
	' Create the vertex program...
	'

    glGenProgramsARB( 1, Varptr g_vertexProgramID )
    glBindProgramARB( GL_VERTEX_PROGRAM_ARB, g_vertexProgramID )
    
    Local shader_assembly$ = readShaderData() 'read from data (DefData) below

    glProgramStringARB( GL_VERTEX_PROGRAM_ARB, GL_PROGRAM_FORMAT_ASCII_ARB, Len(shader_assembly), shader_assembly.ToCString() )
	
    If ( glGetError() &lt;&gt; GL_NO_ERROR )
	Print "ERROR in vert.shad."
	End 
    End If

	'
	' Create the fragment program...
	'

	' Create the vertex program
    glGenProgramsARB( 1, Varptr g_pixelProgramID )
    glBindProgramARB( GL_FRAGMENT_PROGRAM_ARB, g_pixelProgramID )
    
    shader_assembly = readShaderData() 'read shader from data (DEFDATA) below 

    glProgramStringARB( GL_FRAGMENT_PROGRAM_ARB, GL_PROGRAM_FORMAT_ASCII_ARB, Len(shader_assembly), shader_assembly.ToCString() )

    If ( glGetError() &lt;&gt; GL_NO_ERROR )
     Print "ERROR in pix.shad."
     End 
    End If

End Function

'
' readShaderData() - read shader from data (DEFDATA) below
'
Function readShaderData$()
	
	Local out$
	
	Repeat
	
		Local l$
		ReadData l$
		If l$ = "---" Exit
		
		out$ = out$ + l$ + Chr$(13)
		
	Forever
	
	Return out$
	
End Function

'
' render() - render a square using shaders
'
Function Render()

     glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT )
	 
     glEnable( GL_VERTEX_PROGRAM_ARB ) 'enable shaders
	glBindProgramARB( GL_VERTEX_PROGRAM_ARB, g_vertexProgramID )
	
     glEnable( GL_FRAGMENT_PROGRAM_ARB )
	glBindProgramARB( GL_FRAGMENT_PROGRAM_ARB, g_pixelProgramID )

	time :+ 0.001 'counter (global)
		
	Local ff#[] = New Float[4] 'create array
	ff[0] = time 'insert into first value of array
	ff[1] = 0
	ff[2] = 0
	ff[3] = 0
     glProgramLocalParameter4fvARB(GL_FRAGMENT_PROGRAM_ARB,0,ff) 'pass (4-float) array to fragment shader (/program)
	
	glInterleavedArrays( GL_T2F_N3F_V3F, 0, g_triVertices ) 'set triangle array
	glDrawArrays( GL_TRIANGLES, 0, g_triVertices.length/8 ) 'draw triangle array

	glDisable( GL_FRAGMENT_PROGRAM_ARB ) 'disable shaders
	glDisable( GL_VERTEX_PROGRAM_ARB )

	Flip
End Function


#ShaderData

DefData "!!ARBvp1.0" 'calculation pro vertex
DefData ""
DefData "# Constant Parameters"
DefData "PARAM mvp[4] = { state.matrix.mvp }; # Model-view-projection matrix" 'read default openGL renderview matrix
DefData ""
DefData "# Per-vertex inputs"
DefData "ATTRIB inPosition = vertex.position;" 'read position
DefData "ATTRIB inColor    = vertex.color;" 'read color
DefData "ATTRIB inTexCoord = vertex.texcoord;" 'read uv coordinate
DefData ""
DefData "# Per-vertex outputs"
DefData "OUTPUT outPosition = result.position;" 'set output xyz
DefData "OUTPUT outColor    = result.color;" 'set output color
DefData "OUTPUT outTexCoord = result.texcoord;" 'set output uv
DefData ""
DefData "DP4 outPosition.x, mvp[0], inPosition;   # Transform the x component of the per-vertex position into clip-space"
DefData "DP4 outPosition.y, mvp[1], inPosition;   # Transform the y component of the per-vertex position into clip-space"
DefData "DP4 outPosition.z, mvp[2], inPosition;   # Transform the z component of the per-vertex position into clip-space"
DefData "DP4 outPosition.w, mvp[3], inPosition;   # Transform the w component of the per-vertex position into clip-space"
DefData ""
DefData "MOV outColor, inColor;       # Pass the color through unmodified"
DefData "MOV outTexCoord, inTexCoord; # Pass the texcoords through unmodified"
DefData ""
DefData "END"
DefData "---"

DefData "!!ARBfp1.0" 'calculation pro pixel/fragment
DefData "PARAM c = program.local[0];" 'Data passed from line 125 (array Local ff#)
DefData "TEMP colorX;" 'internal variable
DefData ""
DefData "MOV colorX, fragment.texcoord[0].x;" 'read u-coordinate into colorX
DefData "ADD colorX, colorX, fragment.texcoord[0].y;" 'add v-coordinate to colorX
DefData "ADD colorX, colorX, c.x;" 'add input from main program (time counter from BMX code)
DefData "MUL colorX, colorX, 25.0;" 'multiply by 25
DefData "FRC colorX, colorX;" 'leave only fractional part (x MOD 1)
DefData "MUL colorX, colorX, 2.0;" 'multiply by two
DefData "FLR colorX, colorX;" 'leave only integer part (x = floor(x))
DefData ""
DefData "MOV result.color, colorX;" 'move colorX into result color (rgba)
DefData ""
DefData "MOV result.color.a, 1;" ' set alpha to 1.0
DefData ""
DefData "END"
DefData "---"
</textarea><br><br>Update:<br>In the meanwhile, I've discovered my portable device has only openGL 1.0.<br>Also, glInterleavedArrays and glDrawElements are also deprecated. That leaves me without any options to develop for 3.0.<br>So, I've decided to put all 'depecation' sensitive routines in a single module. As soon as the deprecated stuff gets removed, I'll update this module and the program is up-to-date again.<br>It is however good to prepare this a bit. The module should allow for such an update. Therefore, I'm using matrices and quaternions that I calculate myself, and I use vertex buffers. This will allow an easier transistion later on:<br><a href="http://blog.vrplumber.com/index.php?/archives/2285-glInterleavedArrays-is-deprecated....html" target="_blank">http://blog.vrplumber.com/index.php?/archives/2285-glInterleavedArrays-is-deprecated....html</a><br>Sigh .. I find it all somewhat frustrating.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
