<!DOCTYPE html><html lang="en" ><head ><title >Blitzmax app works very slow on Windows 8</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitzmax app works very slow on Windows 8</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Blitzmax app works very slow on Windows 8</a><br><br>
<a name="1230968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both fullscreen or window mode.<br><br>I recently updated my system and installed Win8<br>My game does not use more than 20% processor or 400 mb ram but it moves very, very slow. Can be seen at animations. The pauses between frames are very big.<br><br>I found something on forums about Blitz3D and Dx7, but is not the case here.<br><br>Any quick tip?<br><br>Thanks,<br>R. <br><br></td></tr></table><br>
<a name="1230997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Calibrator</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are only the graphics affected by the slow-down or is everything slower?<br>Could be a driver-related problem if the latter isn't true. <br><br></td></tr></table><br>
<a name="1230999"></a>

<a name="1231005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try switching to use OpenGL, and see if that fixes it -- supposedly windows 8 has a regression in support for DirectX7, and limits the framerate of such apps to ~30fps<br><br>If switching to OpenGL or one of the newer DirectX versions runs faster, then this is what's affecting your app. <br><br></td></tr></table><br>
<a name="1231001"></a>

<a name="1231002"></a>

<a name="1231003"></a>

<a name="1231004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="1231011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior: Switching to GLMax2DDriver did not solve the issue. Also I dont used DX7. I used the DX9 drivers..<br><br>@Calibrator: I have my latest drivers installed.<br>The whole app is slowed down. <br>I observed a loading time bigger than usual. Also the animations have now bigger pauses between frames. My entire game is like a slow motion one. <br><br></td></tr></table><br>
<a name="1231012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just written a little test prog to try this out, and everything seems to be fine here?<br><br><pre class=code>Graphics 800,600,32

Local px:TPixmap = CreatePixmap(128,128,PF_RGBA8888)
px.ClearPixels($FFFF00FF)
Local img:TImage = LoadImage(px)

While Not KeyDown(key_escape)
	Cls
	'px:TPixmap = GrabPixmap(1,1,1,1)
	DrawImage(img,MouseX(),MouseY())
	Flip
Wend</pre><br><br>(Windows 8.1, 6GB RAM, Intel HD4000 integrated GPU (Lenovo Ideapad G580)) <br><br></td></tr></table><br>
<a name="1231013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GfK: your little test prog is working fine here too.<br><br>Also checked my FPS. They are 60-61.<br><br>However, my animations are very slow.<br><br>At every update I use this to take the game time:<br><br><pre class=code>
Local GameTime:Float = MilliSecs()
</pre><br><br>then I pass the value GameTime to all my methods where I need it.<br><br>In my animation method I have something similar to this:<br><pre class=code>
				If gameTime &gt; animHintLastCheck + animHintFrameTime
					hintAnimationFrame = hintAnimationFrame + 1
					animHintLastCheck = gameTime

					'irrelevant code here
									
				End If
</pre><br><br>on other OS is working fine... <br><br></td></tr></table><br>
<a name="1231014"></a>

<a name="1231015"></a>

<a name="1231017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So basically what you're saying, on the strength of that code, is that the Millisecs() timer is running at slower than it should be?<br><br>Wait a minute... why do you have gametime:Float, when Millisecs() returns an Int?  It probably isn't the cause, but it just struck me as odd.<br><br>[edit] Actually I may be onto something there.  This laptop has only been on a couple hours and the code below already is demonstrating horrible loss of accuracy in the stored value.  Change gameTime to an Int and spot the difference - it's MUCH smoother.<br><br><pre class=code>Graphics 800,600,32

Local gameTime:Float

While Not KeyDown(key_escape)
	Cls
	gametime = MilliSecs()
	DrawText gametime,50,50
	Flip
Wend</pre> <br><br></td></tr></table><br>
<a name="1231042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also keep in mind: Millisecs() might return negative values (if your computer is running for 28+days - which is happening more often these days).<br><br>Means: adjust your code as a negative value "decreases" so <br><b>If gameTime &gt; animHintLastCheck + animHintFrameTime</b><br>will be no longer working correctly.<br><br><br>@GfK<br>Now just explain why this float changes the performance. Shouldnt it just assign a value to a variable in both cases?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1231045"></a>

<a name="1231047"></a>

<a name="1231048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now just explain why this float changes the performance. <br></div><br><br>A Float has only 24-bit accuracy. So when Millisecs stored in a Float reaches 2^24 it starts to lose precision. 2^24 millisecs is less than five hours.<br><br>Imagine floats have three digit ( decimal ) accuracy. The then next number after 2340.0 is 2350.0 and there are no numbers in between.<br><br>Watch the equivalent thing happen with 24-bit floats:<br><br><pre class=code>' In this example ms simulates a large MilliSecs() value of 172800000.
' This is a 32-bit binary value of    00001010010011001011100000000000.
' Next possible float value is        00001010010011001011100000010000.
' The first and last 1's span 24 bits     ^                      ^

ms = 2 * 24 * 60 * 60 * 1000  ' milliseconds in two days.

' Here are millisecs as an Int and a Float.
' Note the Int can change by 1, but the smallest change to the Float is 16.

For n = 1 To 50
	ms = ms + 1
	msf:Float = ms
	Print ms + "  " + msf
Next</pre> <br><br></td></tr></table><br>
<a name="1231046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Means: adjust your code as a negative value "decreases" so <br>If gameTime &gt; animHintLastCheck + animHintFrameTime<br>will be no longer working correctly. <br></div><br>The right way to do this is<br><pre class=code>If gameTime - animHintLastCheck &gt; animHintFrameTime</pre><br>This is immune to the "rollover to negative" problem. <br><br></td></tr></table><br>
<a name="1231057"></a>

<a name="1231058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> gametime = 10<br>animHintLastCheck = -10<br>10 - (-10) = 20 [OK]<br><br>gametime = -30<br>animHintLastCheck = -10<br>-30 - (-10) = -20 [FAIL]<br><br><br>So you better go with abs(currTime - oldTime):<br><br>gametime = 10<br>animHintLastCheck = -10<br>abs(10 - (-10)) = 20 [OK]<br><br>gametime = -30<br>animHintLastCheck = -10<br>abs(-30 - (-10)) = 20 [OK]<br><br>Like said, the negative values decrease (think I saw this when users reported some "rollover"-fails like unhandled mouse clicks in my overlayed gui system) - so the further the time advances, the higher the negative value (-1 &gt; -2).<br><br>Other options got discussed in multiple threads already. I myself now use a "Time"-class with various functions, eg. returning the time in milliseconds since app-start. <br><br></td></tr></table><br>
<a name="1231059"></a>

<a name="1231060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd's example is to handle the rollover from positive to negative, which will happen once every ~25 days.  I don't see the relevance of your example, which seems to insinuate that time runs backwards. <br><br></td></tr></table><br>
<a name="1231082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> changing the float to int did not affect the speed. same issues.<br><br>also the Floyd tip did not help me. <br><br>I tested the game again today on a Win7 machine and is ok. Only on Win8 seems is slow. <br><br></td></tr></table><br>
<a name="1231115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Calibrator</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm...<br><br>Even problems with loading times? Generally slow?<br><br>Could be a problem with that specific machine then which means a lot more questions...<br>- Are other BlitzMax programs affected or only this specific game?<br>- Is the game slow after a fresh reboot with no other programs running?<br>- Which Windows version are you using? 8 or 8.1 or 8.1 Patch 1?<br>- 32 or 64 bit Windows?<br>- Amount of RAM?<br>- What graphics hardware are you using? Separate card with its own memory or integrated solution that uses system RAM? Which graphics chip?<br>- How graphics intensive is your game? (= how much RAM does it use that could affect system performance?)<br>- Did you try to disable your anti-virus software? ("real-time protection")<br>- How is the virtual memory being handled on your machine? (Windows caring about that or did you set a fixed amount?) <br><br></td></tr></table><br>
<a name="1231120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The loading times are a little slower than always. On my previous OS (win 7) and on any Win7 machine I tested the loading time is small anyway (a few seconds)<br><br><b>- Are other BlitzMax programs affected or only this specific game?</b><br>I do not have any other Blitzmax projects with animation using Millisecs right now (still in devel)<br>I have a look over the samples and those are running fine. I did not test them all.<br><br><b>- Is the game slow after a fresh reboot with no other programs running?</b><br>yes.<br><br><b>- Which Windows version are you using? 8 or 8.1 or 8.1 Patch 1?</b><br>Err.. Last one?!<br><br><b>- 32 or 64 bit Windows?</b><br>64<br><br><b>- Amount of RAM?</b><br>8 Gb<br><br>[/b]- What graphics hardware are you using?<b><br>GTX 760 Overclocked :D<br><br>[b]- How graphics intensive is your game?</b><br>:)) <a href="https://www.youtube.com/watch?v=PjbR7W4Ka0I" target="_blank">https://www.youtube.com/watch?v=PjbR7W4Ka0I</a><br><br><b>- Did you try to disable your anti-virus software?</b><br>I only use default Windows 8 protection :-s<br><br><b>- How is the virtual memory being handled on your machine?</b><br>As I said in the previous post:<br>My game does not use more than 20% processor or 400 mb ram but it moves very, very slow. <br><br></td></tr></table><br>
<a name="1231128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Calibrator</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This really is a tough one!<br><br>So you have a regular, modern Windows machine with standard graphics hardware...<br><br><b>- Which Windows version are you using? 8 or 8.1 or 8.1 Patch 1?<br>Err.. Last one?!</b><br><br>From what I read the difference between Windows 8 and 8.1 (which is the last one) can be quite drastic so it's always important to be exact here. Personally, I haven't had problems with my BlitzMax game in development on my Win 8.1 machine at all. It's in the Early Cambrian stage, though, so it's certainly not some sort of standard...<br><br><b>- How graphics intensive is your game?<br>:)) https://www.youtube.com/watch?v=PjbR7W4Ka0I</b><br><br>Ah, of course, you are the Crystals-of-Time-guy... ;-)<br>So, while it is a graphics intensive game it isn't a graphics hardware (= GPU + memory) intensive game. If anything I'd rule the Geforce out. <br>While I experienced some slowdowns in my game with older Intel graphics hardware in certain resolutions I never had those with a discrete graphics hardware solution like a Geforce or Radeon card. Both worked extremely well.<br><br>The overclocking bit should be completely irrelevant, though.<br><br><b>- Did you try to disable your anti-virus software?<br>I only use default Windows 8 protection :-s</b><br><br>Which means you are using the Windows Defender software which I believe was called Microsoft Security Essentials under Win7 and earlier.<br>I haven't had a problem with this in regards to pretty much anything out there and certainly not with BlitzMax or an app compiled by it.<br><br><b>- How is the virtual memory being handled on your machine?<br>As I said in the previous post:<br>My game does not use more than 20% processor or 400 mb ram but it moves very, very slow.</b><br><br>While some games require virtual memory to be active - even though they don't use a lot of RAM themselves (by todays standards) - you are OK if you didn't change the default settings (which means Windows cares for virtual memory).<br><br>I'm still convinced that it is somehow a problem of your specific machine and I believe many customers would've been angry with the game running badly on their Win8(.1) machines.<br><br>I keep thinking about system resources, though, and if the memory and bus thoughput are OK then we have to check if the game gets the full attention of the CPU or is restricted.<br><br><br><b>My game does not use more than 20% processor or 400 mb ram but it moves very, very slow.</b><br><br>What CPU do you have?<br>If you have a quadcore CPU a CPU usage of 20% is actually a lot if your program is a single-threaded app. It is, right?<br><br>Another thought:<br>Did you try different Windows compatibility settings for the game by clicking the app icon with the right mouse button and selecting them in the "properties" menu (sorry, I don't have an English version of Windows)? <br><br></td></tr></table><br>
<a name="1231130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you compile the program on Windows 8 itself, or are you running a build that you made on another system?<br><br>Is there are sort of sandbox utility active while you run the game? <br><br></td></tr></table><br>
<a name="1231142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Floyd's example is to handle the rollover from positive to negative, which will happen once every ~25 days. I don't see the relevance of your example, which seems to insinuate that time runs backwards.  <br></div><br><br>The number once reaches its maximum, then the next number is the minimum (the negative value). As time goes by then, this number increases (mathematically, means "Minimum+1")<br><br>So for a number with MinMax of (-3, 3) this reads:<br>0,1,2,3, -3,-2,-1, 0,1,2,3, -3 ...<br><br>also see: <a href="http://www.blitzbasic.com/Community/posts.php?topic=60215" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=60215</a><br><br>So my conclusion would be, that "abs" is needed because of the calculations you see in the prior post (-3 - -2 is -1, abs(-3 - -2) is 1, compared like "value &gt; animTimer" which might be 1-3, this wont work then without abs).<br><br><br><br>@Ravl<br>Could you check how many times a special loop (a specific animation) is executed during a second? Maybe the problem lies in something else (eg. you mixed"hertz" and "interval").<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1231184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try reinstalling DirectX 9?  When I got my new computer, installed with Windows 8.1, I noticed a lot of games running slowly.  Read somewhere that Windows 8 only comes with DX 11 natively and anything 9 or earlier is emulated.  Tried installing DX 9.0c from MS site and everything ran much faster. <br><br></td></tr></table><br>
<a name="1231249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> @TomToad:<br>Cannot start the DX9 installer. tells me I need other OS :D<br>I tried to use OpenGL anyway and I still have the same issues.<br><br>@Derron:<br>I am planning to have a look at that.<br><br>@Calibrator:<br>yeah I tried with Win7 compatibility and still the same behavior.<br>I remember back when I develop the game I made a quick test on a Virtual XP machine with no video drivers enabled. Basically that machine was the lowest possible Windows computer ever made. The game ran perfectly :))<br><br><br><br>I will try to make new test on other Win8 machines to see if this is a problem which only appears on my pc. Although I jsut reisntalled Win8 and the only programs installed are: steam, blitzmax and monkey dev and ides.. :( <br><br></td></tr></table><br>
<a name="1231294"></a>

<a name="1231295"></a>

<a name="1231296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> So your game is running at 60fps and your animation is choppy.<br><br>I think you should forget about blaming the OS and revisit what people have said above. You cannot use floats for the purpose of reading the millisecond timer.<br><br>The following code <br><br><pre class=code>
For i=1 To 20
Local ms=MilliSecs()
Local badfloat:Float=ms
Print ms+"  rounds to float with error "+(badfloat-ms)
Delay 5
Next
</pre><br><br>Produces the following on my macbook which hasn't been powered off for a while and which will I imagine produce choppy animation<br><br><div class="quote"> <br>87819166  rounds to float with error 2.00000000<br>87819172  rounds to float with error -4.00000000<br>87819178  rounds to float with error -2.00000000<br>87819184  rounds to float with error 0.00000000<br>87819189  rounds to float with error 3.00000000<br>87819195  rounds to float with error -3.00000000<br>87819201  rounds to float with error -1.00000000<br>87819207  rounds to float with error 1.00000000<br>87819212  rounds to float with error 4.00000000<br>87819217  rounds to float with error -1.00000000<br>87819223  rounds to float with error 1.00000000<br>87819229  rounds to float with error 3.00000000<br>87819234  rounds to float with error -2.00000000<br>87819240  rounds to float with error 0.00000000<br>87819246  rounds to float with error 2.00000000<br>87819251  rounds to float with error -3.00000000<br>87819256  rounds to float with error 0.00000000<br>87819262  rounds to float with error 2.00000000<br>87819268  rounds to float with error -4.00000000<br>87819273  rounds to float with error -1.00000000<br> <br></div> <br><br></td></tr></table><br>
<a name="1231307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gfk<br>I have to excuse, just wanted to post that I had a chance to check on a notebook:<br><br><pre class=code>
$ uptime
 18:25:12 up 27 days, 21:49, 30 users,  load average: 2.36, 1.74, 1.26
</pre><br><br>then I recognized that I made a mistake in my example (I talked about increasing values, but the examples used increasing ones (curr: -30, last: -10 while it should be the opposite). Sorry for the statements I gave earlier in this threads. I mixed "previous" and "current" which made the calculation-failures self-fullfilling.<br><br>But at least this keeps being the truth (albeit useless knowledge): the rollover-integer increases its value until it switches to positive again (-3,-2,-1,0,..).<br><br>Conclusion: no abs is needed (except you do not know if to "A - B &gt; C" or "B - A &gt; C").<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1231310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer:<br>I already said earlier I changed the value from float to int. the issue is still present. <br><br></td></tr></table><br>
<a name="1231311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you have the time to check if your animation-position is changed accordingly or somehow this is skipped sometimes?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1231312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron:<br>I will do this tonight when I go home.<br><br>Just an 'update':<br>The interesting part is that if I make a pause between frames bigger than 500 ms it's working fine. The problem is that my animations need something like 20-25..<br><br>Also, just tested the game on a crappy laptop with Windows8 x64 and is working fine :))<br><br>What problem it might be is affecting my machine. But could also affect others.. <br><br></td></tr></table><br>
<a name="1231313"></a>

<a name="1231314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I do is use a float for the frame counter - completely removing any dependency on Millisecs().  If you want the animation to run slower, just use a smaller stepsize, i.e.:<br><br><pre class=code>
Repeat
    frame:+0.1
    If floor(frame) &gt; myImage.frames.length
        frame:-myImage.frames.length 'if you just reset to zero, you MIGHT get a glitch in the anim smoothness
    EndIf
    DrawImage(myImage,x,y,floor(frame)
Forever</pre><br>(may not work - typed directly into replybox, but you get the idea). <br><br></td></tr></table><br>
<a name="1231349"></a>

<a name="1231350"></a>

<a name="1231351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, oops sorry about that.<br><br>Perhaps you could provide the output of the code anyway. <br><br>I took a look at BlitzMax and in blitz.mod there is no code calling timeBeginPeriod which traditionally was always required to get the multimedia timer to perform properly. If you want to try it, change startup() method in blitz_app.c[106] to the following and rebuild module.<br><br><pre class=code>
static void startup(){
	_mainThread=GetCurrentThreadId();
	timeBeginPeriod(1);	
}
</pre><br><br>Just to be pedantic, is your animation running slow but smooth, or is it just choppy? <br><br></td></tr></table><br>
<a name="1231379"></a>

<a name="1231380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> what about<br><br>system.win32.c (used in TWin32SystemDriver)<br><pre class=code>
void bbSystemStartup(){
...
	timeBeginPeriod( 1 );
...
}
</pre><br><br>Isn't this doing what you suggested or is this something different ?<br><br><br>@animations<br><br>He wrote "The pauses between frames are very big." - so I assume they are in sequence, but with the wrong delay. In both cases the chances for a bug in his code is higher than in the BRL code (when used the "common way").<br>Best of course would be if he could code a sample showing that behaviour - including all needed code and a verified failing on his setup.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1231440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh good it is there. Thanks Derron, please ignore my post. <br><br></td></tr></table><br>
<a name="1231674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, back again.<br><br>In these 2 days I made an upgrade to my pc: bought a new proc and a new motherboard. <br><br>did not reinstall OS (because I kept my SDD) but I made another test.<br><br>Now is working fine.<br><br>I will keep in mind your tips regarding the millisecs and I hope there will be no other issues. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
