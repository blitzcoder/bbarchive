<!DOCTYPE html><html lang="en" ><head ><title >Need help with stubborn PHP SQL error</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Need help with stubborn PHP SQL error</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Need help with stubborn PHP SQL error</a><br><br>
<a name="1138155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. I need some help with a rather stubborn PHP SQL problem... So what's going on is that mysql_error() is returning Warning: mysql_fetch_row(): supplied argument is not a valid MySQL result resource... I checked my UPDATE query in my PHP code, time &amp; time again, yet I see NO problem with it. It is STILL returning this error, and I have NO idea what's going on. Can someone PLEASE help me fix it? Here's the link: <a href="http://pastebin.com/2Kv2xtzx" target="_blank">http://pastebin.com/2Kv2xtzx</a><br>Thanks to all who help! :) <br><br></td></tr></table><br>
<a name="1138228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe the error is here?<br><pre class=code>
$masterquery = "UPDATE `users` SET `user_id` = \"$genid\" WHERE `username` = \"$user_name\";";
</pre><br><pre class=code>
$masterquery = "UPDATE `users` SET `user_id` = '".$genid."' WHERE `username` = '".$user_name."';";
</pre> <br><br></td></tr></table><br>
<a name="1138239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope... I'm STILL getting supplied argument is not a valid MySQL result resource :( <br><br></td></tr></table><br>
<a name="1138240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apparently, the mysql_query() is returning 1, instead of a resource array..... :( how do i fix this? <br><br></td></tr></table><br>
<a name="1138245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm no PHP/SQL expert, so correct me if I'm wrong, but doesn't MySQL UPDATE return 1 if successful, or 0 if not?<br><br>If you intend to be parsing a resource array then you should be using SELECT. <br><br></td></tr></table><br>
<a name="1138265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well. Im just trying to stop ppl from logging in to the same account, either from the same ip, or a different ip, on different browsers. <br><br></td></tr></table><br>
<a name="1138269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about people who have a dynamic IP address? If you do that and their IP changes, they'll be stuck. <br><br></td></tr></table><br>
<a name="1138271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You seem to devote a lot of energy to trying to stop users from doing entirely reasonable things. Do you document these unusual behaviours? Because if not, you're going to get a lot of bug reports when things suddenly appear to stop working.<br><br>I still remember that time you wanted help deleting the user's files from their machine without permission (which, incidentally, was <i>malware</i>). Is this more of the same logic? <br><br></td></tr></table><br>
<a name="1138281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> deleting the user's files from their machine without permission (which, incidentally, was malware) <br></div>Question of curiousity, a bit off-topic but I'll keep it brief: if a program were to include such behaviour in its actual EULA terms agreement - i.e. something like "by installing this program, you acknowledge that any files on your computer may be moved, renamed or deleted without notification" - would it still technically be malware? <br><br></td></tr></table><br>
<a name="1138282"></a>

<a name="1138283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, no. i do not want anything to do with malware. i JUST wanna prevent people from taking advantage of my membership system by logging in and stealing bandwidth not to mention someone else who WANTS to use it right, and cant, because i had to delete the account due to account fraud..... -.-<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138337"></a>

<a name="1138338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't quite understand...<br><br>You don't want people to log into their account, from a different IP address than the one they signed up with? Is this what your wanting to do? <br><br></td></tr></table><br>
<a name="1138349"></a>

<a name="1138350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> No no no. I just want to prevent membership fraud. How I do that, I really dont care, but I dont want any fraud. I also want to stop OTHER IPs from logging in to an account thats ALREADY logged in.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No no no. I just want to prevent membership fraud. How I do that, I really dont care, but I dont want any fraud. I also want to stop OTHER IPs from logging in to an account thats ALREADY logged in. <br></div>With most service providers using dynamic IPs, and so many folks having a range of internet-ready devices and using public wifi hotspots these days, what you're proposing to do is just not practical. <br><br></td></tr></table><br>
<a name="1138352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> what you need to do is check in the game/app whether they are logged in or not and if so dont let em log in again <br><br></td></tr></table><br>
<a name="1138355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks Edzup :) <br><br></td></tr></table><br>
<a name="1138361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> the best way is have a timeout variable that increments every second this gets reset every packet they send and if it gets beyond a certain value they get kicked.<br><br>As an example my networking system uses 120 seconds as a counter this can be changed in the program, when the player gets beyond the limit the server closes the connection and removes the player. Reasons for the system are in all games you have to have a timeout in case of dropped connections with this in mind its easier to keep track of with that idea than elaborate schemes.<br><br>When someone logs back in after dropping they will have to wait for the server to kick the other old connection then allow them in again, there maybe other ways of doing this but this one seems to be in use quite a lot these days :) <br><br></td></tr></table><br>
<a name="1138369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what you need to do is check in the game/app whether they are logged in or not and if so dont let em log in again  <br></div><br><br>Make sure that they are also -active- though, because it's really annoying if your application (or PC) crashes, or internet connection hiccups and severs the link, and then not being able to re-connect yourself because the server still think that you are already logged in. <br><br></td></tr></table><br>
<a name="1138458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would I check if they are active? <br><br></td></tr></table><br>
<a name="1138460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thundros: look at my previous post, best way is to send a ping packet I send 'Ping' in a network message to the clients once every twenty seconds and see how long they take to send 'Pong' back if they dont after the timeout period then they get removed as the connection is dead. <br><br></td></tr></table><br>
<a name="1138561"></a>

<a name="1138565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> nvm<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1138683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, but how do i send a ping pong in PHP? Ive done it in blitz, but not in PHP. <br><br></td></tr></table><br>
<a name="1138754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> ? <br><br></td></tr></table><br>
<a name="1138866"></a>

<a name="1138867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT: Nvm :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
