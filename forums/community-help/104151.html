<!DOCTYPE html><html lang="en" ><head ><title >Attempting to load a b3d entity from a bank</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Attempting to load a b3d entity from a bank</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Attempting to load a b3d entity from a bank</a><br><br>
<a name="1259785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is my attempt so far, which results in a MAV:<br><br><pre class=code>

Local b3dentityone = LoadAnimMesh(FiLoadFromBank(bank[6]))

</pre><br><br>Any assistance with where I'm going wrong appreciated. <br><br></td></tr></table><br>
<a name="1259795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well...if I was debugging that I'd take everything out of the nested brackets first and make sure all the return values were valid....as a start. <br><br></td></tr></table><br>
<a name="1259930"></a>

<a name="1259931"></a>

<a name="1259932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm after digging around I'm beginning to think I've finally bitten of more that I can chew:  Managed to extract jpgs from the end of an exe - however extracting b3d(s) that are plastered onto the end of an exe as well as images is eluding me.<br><br>Time to hang up the coding boots and read a book I think, for tonight anyway.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=20336#207774" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=20336#207774</a> <br><br></td></tr></table><br>
<a name="1260236"></a>

<a name="1260237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, hello BlitzPlotter,<br><br>The <b>FiLoadFromBank</b> is a custom function to be used with images only, <br>it cannot be interfaced to any other file type (including meshes).  <br><br>Here is the FiLoadFromBank in its original form (located in FreeImage.bb)::<br><div class="quote"> <b><br>Function FiLoadFromBank(bank)<br> ;Loads a FreeImage bitmap from a bank<br> ;Returns a FreeImage bitmap or False if fails<br><br> Local stream, fif, dib<br> If bank = 0 Then Return 0 ;No bank<br> stream = FreeImage_OpenMemory(bank, BankSize(bank)) ;Attach to memory<br> fif = FreeImage_GetFileTypeFromMemory(stream, 0) ;Format from filetype<br> If fif &gt;= 0 ;Format is valid<br>  dib = FreeImage_LoadFromMemory(fif, stream, 0) ;Load from memory<br> EndIf<br> FreeImage_CloseMemory(stream) ;Close memory<br> Return dib<br>End Function<br></b> <br></div>===========================================================================<br><br>In order to accomplish what you're trying to do, then perhaps try this different simpler strategy :: <br><br>(a) Extract the B3D directly out of the EXE and save into a file on disc.<br>(b) Read the B3D file normally, using LoadAnimesh ...<br><br><b> LoadAnimMesh( Filename$, [Parent] ) </b><br><br>I don't believe there is any shortcut strategy of loading it into a bank first.   <br>Good Luck. <br><br></td></tr></table><br>
<a name="1260242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If its a static b3d (no animation) you could just convert the vertex, triangle and uv data to simple DefData statements and read it in creating it as you go. This way would give you no model files at all but doesn't exactly work for animated meshes. <br><br></td></tr></table><br>
<a name="1260408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Virtlands and Edzup, thanks for the feedback. I believe I need to read and consequently write byte by byte from the start 'offset' to the end 'offset' and read in the animated mesh using the LoadAnimMesh as you've suggested.<br><br>Seeing as they are animated meshes I think this'll be my way forward. I like a challenge, this one has almost proven too much though ;) Thanks for confirming the way forward, its appreciated. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
