<!DOCTYPE html><html lang="en" ><head ><title >lightmap and texture   together ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >lightmap and texture   together ?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >lightmap and texture   together ?</a><br><br>
<a name="1079556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dunno if this is possible but :<br>is it possible to become one file for both ?<br>i mean can i  precalculate texture &amp; lightmap to get   one file ?<br>thx <br><br></td></tr></table><br>
<a name="1079567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you mean blending them, that would be possible, but then the 'detail' texture would have a pretty low res. Alternatively, the total texture should have a huge resolution. I don't think any of those is advisable. I think the main reason for this separate lightmap/detailmap method to exist is to maintain some resolution on your models.<br>But you could maybe tile the two, place them side by side on a single texture. Then adjust the UV coords so:<br>UV0 = UV0 * 0.5<br>UV1 = UV1 * 0.5 + 0.5<br>Where UV0 is the first set of coords, and UV1 is the second one. <br><br></td></tr></table><br>
<a name="1079579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The other reason is that every 'tile' of normal texture would end up being different to the previous one (because of the varying shadows), and would require huge amounts of VRAM.<br><br>It is possible tho. You can do it in 3DSMax and in gile[s] (v1 only possibly). <br><br></td></tr></table><br>
<a name="1079685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As mentioned, possible yes, advisable no. You can't recycle the underlying  texture as every vert is going to need it's own to get the shadow right = CRAZY extra memory used. You have to do this for the shadow texture anyway BUT if they're separated they can be independent resolutions so you could use a 256x256 for your actual texture and then have lots of room for a shadow texture, or just accept that the shadow might have blocky edges (probably a mix of the 2). More control and lower overhead = win win over pre-baking everything together. <br><br></td></tr></table><br>
<a name="1079879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps the question should be "why do you want to do it?" It may be that you're trying to achieve something which could be done another way. Or it may be that you have very specific requirements and perhaps it is advisable - in this very limited circumstance - to bake the texture and lightmap into one. <br><br></td></tr></table><br>
<a name="1080051"></a>

<a name="1080052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks for your answers .<br>Its not  a Problem ,much moore a Theoretical Question.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1080098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way of baking light, on-the-fly, that is, creating a simple light map when a new level is started? Pre-baking does not take into account scenery getting moved around only at the initial level load? <br><br></td></tr></table><br>
<a name="1080113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you wrote your own shadow system, you could logically then use that to generate baked textures, etc... it would be a helluva lot of work though I suspect. IMO you'd be better off creating a solid dynamic shadow system than a dynamic shadow system designed for texture generation... seems like 120% of the effort for 80% of the returns... <br><br></td></tr></table><br>
<a name="1080119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply, what is a "solid dynamic shadow system"? <br><br></td></tr></table><br>
<a name="1080133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> solid, dynamic shadow system. damn you english language!<br><br>basically a real-world usable, stable system by which you can generate shadows "dynamically" (e.g. based on the current state of the world space and lighting conditions.)<br><br>IMO if you can get that far, then going the extra mile to be able to generate "baked" textures, and then applying those would be a LOT more work than just optimizing the shadow system to run in real time (so the textures don't need to be baked at all and it would be live so moving a light source or object would adjust the shadows as well). A lot more work to get NON real-time shadows. <br><br></td></tr></table><br>
<a name="1080137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah I see. Using on-the-fly baked shadows has the advantage of speed, for shadowing static objects placed when your level is initialised. <br><br>I was hoping to write a procedurally generated level routine but I can't use offline baked shadows with that kind of level data. Dynamic shadows are easier, relatively speaking but the speed impact can be a real burden, especially on older systems/mobile devices. <br><br></td></tr></table><br>
<a name="1080145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your level is created using prefab elements (boxes, piramids, ramps etc.) and there is only a single directional light, maybe you could compound a lightmap using prerendered patches? <br><br></td></tr></table><br>
<a name="1080151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a thought... still could be a hassle to map correctly but every bit of complexity you remove from the equation makes it that much easier to solve... <br><br></td></tr></table><br>
<a name="1080174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a single directional light (sun, for instance), you could try stencil shadows.<br>You wouldn't need to calculate the extrusion every frame (just once, at load-time), and dynamic objects would get shadowed when going under the environment's shadows. It would look pretty good. <br><br></td></tr></table><br>
<a name="1080190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Downloading giles (v1) ,but cant find the option to blending texture and lightmap together . Beaker ? <br><br></td></tr></table><br>
<a name="1080265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> How could you extract the required UV information from the stencil map, say if I was using OpenGL? <br><br></td></tr></table><br>
<a name="1080266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> How could you extract the required UV information from the stencil map, say if I was using OpenGL? <br><br></td></tr></table><br>
<a name="1080274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't extract UV information from the stencil map to do stencil shadows.<br><br>You first render the whole scene with ambient light, then "mark" the stencil buffer  by rendering the shadow volumes and then re-render the whole scene with direct lighting and stencil culling turned on (without clearing the color buffer of course).<br><br>Only parts that the shadow volumes don't hit will be rendered with the light influence - thus making those parts brighter and shadowed parts remain dark [or ambient-lit, if you will]. <br>It's a multipass process.<br><br>There are a few ways to go about stencil-shadowing with shadow volumes in OpenGL (some even patented, like the <a href="http://newenthusiast.com/carmacks-reverse-still-an-issue-20090409489" target="_blank">Z-Fail method</a>). <br>The method used for rendering has to change if the camera intersects any of the shadow volumes, or else holes in the shadows will appear.<br><br><a href="http://joshbeam.com/articles/stenciled_shadow_volumes_in_opengl/" target="_blank">http://joshbeam.com/articles/stenciled_shadow_volumes_in_opengl/</a><br><a href="http://www.codesampler.com/oglsrc/oglsrc_8.htm#ogl_shadow_volume" target="_blank">http://www.codesampler.com/oglsrc/oglsrc_8.htm#ogl_shadow_volume</a> <br><br></td></tr></table><br>
<a name="1080286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that but I wanted a way to 'quck bake' shadows onto a texture (or multi texture) at the level load event. The lights would be static. Icant use a pre-bake method as parts of the level may change, inter level loads. Speed is what is required at the fist of flexibility. I have to keep to a single pass rendering tequnique for the target platforms. <br><br></td></tr></table><br>
<a name="1080292"></a>

<a name="1080423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't get that. If you are baking the lightmap at load-time then that's pre-baking it.<br><br>In any case, you can use a unified system of CSM* or PSSM* for real-time, dynamic shadows for everything (environment, characters, objects etc.).<br><br>*Cascaded Shadow-Maps<br><br>**Parallel-split Shadow-Maps (it's a type of CSM)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1080315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that (and damn the iPads rubbish autocorrect! :P).<br><br>It's an interesting subject, the more I look into shadow systems in general, the more intriguing I am finding the subject. <br><br></td></tr></table><br>
<a name="1080400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Won't your texture usage go through the roof blending the lightmaps onto the texture. It pretty much makes tiling textures unusable, so instead you'll have to have one very very large texture for these areas. That is why the whole idea of using a different UV set exists for lightmaps. I can't imagine this being a useful idea in any way, shape or form.<br><br>I am very curious what you'd use it for ? :) <br><br></td></tr></table><br>
<a name="1080451"></a>

<a name="1080454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mulititexture would be used if texture memory was getting squeezed, shadows using a smaller format, 2 bits for example in this situation, texture compression can be brought in to help. It's all about speed, if the engine runs out of resources or extra resources are available it changes the method it is using to render the scene. Adapting to maximise the rendering speed is the main goal, while sacrificing as much texture memory to do this as possible.<br><br>I have tried various methods of shadows, most require at least two passes, some fast hardware or advanced graphics features, shaders for example. Or pre bake, which locks all your geometry into one position. I'm looking for a halfway house, semi static and it needs to work on slow hardware, if possible.<br><br>My game is 3D puzzler, set from a first person perspective. The puzzles are mainly logic ones but some are physics based. The basic level structures are predesigned with procedural methods used to alter the level design and certain puzzle elements.<br><br>I really want a decent look to it and for it to make it onto the mobile Market without crawling.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1080455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mulititexture would be used if texture memory was getting squeezed, shadows using a smaller format, 2 bits for example in this situation, texture compression can be brought in to help. It's all about speed, if the engine runs out of resources or extra resources are available it changes the method it is using to render the scene. Adapting to maximise the rendering speed is the main goal, while sacrificing as much texture memory to do this as possible.<br><br>I have tried various methods of shadows, most require at least two passes, some fast hardware or advanced graphics features, shaders for example. Or pre bake, which locks all your geometry into one position. I'm looking for a halfway house, semi static and it needs to work on slow hardware, if possible.<br><br>My game is 3D puzzler, set from a first person perspective. The puzzles are mainly logic ones but some are physics based. The basic level structures are predesigned with procedural methods used to alter the level design and certain puzzle elements.<br><br>I really want a decent look to it and for it to make it onto the mobile Market without crawling.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
