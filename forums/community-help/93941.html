<!DOCTYPE html><html lang="en" ><head ><title >Server image manipulation?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Server image manipulation?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Server image manipulation?</a><br><br>
<a name="1076200"></a>

<a name="1076202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, lets say I have a image that is 3px by 3px(for a simple example). Is there a way that I can isolate 9 areas(each 1px by 1px), and build a new image by rearranging these squares into a new shape? Of course the real image wouldn't be 1px by 1px, but I would know the pixel location and size of each rectangular region<br><br>Let me show you a diagram:<br><br><img src="http://img340.imageshack.us/img340/8318/rect4605.png"><br><br><br>Would something like php's GD library work for this? The image would be on my web server, I would know the dimensions, and I would know the dimensions of the new image<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076280"></a>

<a name="1076281"></a>

<a name="1076282"></a>

<a name="1076283"></a>

<a name="1076286"></a>

<a name="1076288"></a>

<a name="1076290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A couple of 2dimensional uint[] arrays maybe? One bigger than the original (say 2-3x the size) do your shifting with the pixel orientation center-center and then clip the result into a new smaller array or an image/pixmap object.<br>-Or just use 2 images and using the same method as above, lock the buffers and read writefast the pixels directly to do your shifting (possibly faster?)<br><br>I am not really sure i understand what you are trying to do. Are you after some kind of algorythm or are you talking about storage? Plus what is it with the "half pixel" movement?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076302"></a>

<a name="1076304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> they're not going to be single pixels. I was going to rearrange an image(texture of a mesh) to show the front/back view of the mesh. The texture areas are rectangular<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean a UV map?<br><br>Eg:<br><img src="http://patrickwolleb.subumbo.com/wp-content/uploads/2009/07/UVMAP.png"><br><a href="http://patrickwolleb.subumbo.com/uv-mapping/" target="_blank">http://patrickwolleb.subumbo.com/uv-mapping/</a> <br><br></td></tr></table><br>
<a name="1076450"></a>

<a name="1076455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, so can I do this with some server-side php stuff in 2d?<br><br>basically, I want to preview what a texture looks like on a known mesh(front and back view)<br><br>and I know where the front and back "uv coords" are on the image, so can I just build two new front and back images by rearranging these rectangles?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076483"></a>

<a name="1076485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at <br><a href="http://de3.php.net/manual/en/function.imagecopymerge.php" target="_blank">http://de3.php.net/manual/en/function.imagecopymerge.php</a><br><br><br>So your steps:<br><br>0. (Preparational thoughts)<br>- if you want to have a kind of online-preview, you have to save the image in a working directory as just uploaded pictures will get deleted after the "initial"-php-process is dying (script which receives upload exited)<br><br>1.<br>- receive image by "upload" : "$_FILES" in PHP<br>- receive "to change"-params in PHP too<br><br>- Copy it to a working directory if you have a sharedhoster with shared /tmp directory (else you will not have all necessary rights, linux base....)<br>You can check this by using "move_uploaded_file()"<br>If you are not allowed to "move", you have to open the image in PHP, and save it to your working directory, because then the image is "chown" to your PHP-UserId/you.<br>If you are able to work, and are not interested where you work with your image, you can just open it, modify it - and when saving remember yourself to change filename as you wont have access to the /tmp directory.<br><br>2. open it in PHP, remember, big images are hungry for ressources, so you may run into some php-limits (imagine 2048x2048 textures)<br><br>3. modify it by using "imagecopymerge", link at the top contains an example<br><br>4. output to client/save to disk/mail... /return it ;D<br><br><br><br>Should be enough I think.<br><br>bye<br>MB<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like it'll work. I'll check it out! <br><br></td></tr></table><br>
<a name="1076501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems to be the way to go. Question though: What is the first pixel on the image? 0,0 or 1,1? and the last bottom-right corner? WIDTH-1,HEIGHT-1 or just WIDTH,HEIGHT? <br><br></td></tr></table><br>
<a name="1076522"></a>

<a name="1076523"></a>

<a name="1076524"></a>

<a name="1076525"></a>

<a name="1076526"></a>

<a name="1076527"></a>

<a name="1076528"></a>

<a name="1076529"></a>

<a name="1076530"></a>

<a name="1076531"></a>

<a name="1076532"></a>

<a name="1076533"></a>

<a name="1076534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neither, UV map coords are just a reference they do not relate to pixels at all.<br><br>I suppose you could think of them as fractions of your overall texture regardless of resolution. <br><br>For examples:<br><br>-If you had a texture 64x64 and used a UV map on a plane of UV 0,0 - 0.5,0.5 then you will be seeing 32x32 of your texture.<br><br>-If you used a uv  of .5,.5 - .75,.75 then you would be showing pixels 15,15 - 24,24 (or there abouts) assuming it is a 64x64 texture. <br><br>-If you used 0,0 - 2,2 then you would be seeing 2 repeats of your texture (assuming you have the repeat flag on, otherwise it will texture map 1/4 of your plane with 1 repeat.<br><br>What i reccommend is setting up a test project in blitz with 1 cube and a texture with a angled camera so you can see the faces. Then play around with all the flags like repeat, clamp etc and then fiddle with the cube's verts UV numbers. You will soon see how it works. <br><br>To get an acutal pixel position on a uvmap (assuming the texture is mapped 0,0-1,1) i guess you could use:<br>ie to get UV position of pixel 10,9 on the uvmap  <br>float X=10;<br>float Y=9;<br>float UVX=(1.0/TextureWidth)*X;<br>float UVY=(1.0/TextureWidth)*Y;<br><br>Then create a texture with 4 different textures in all 4 quarters and see if you can map different faces to different textures. This is where it gets a little more tricky.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure the imagemerge function works off of pixels, not uv coords? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
