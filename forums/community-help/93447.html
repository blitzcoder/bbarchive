<!DOCTYPE html><html lang="en" ><head ><title >Port-Forwarding and IP Distances</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Port-Forwarding and IP Distances</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Port-Forwarding and IP Distances</a><br><br>
<a name="1068980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a bit a novice when it comes to coding multiplayer stuff and was wondering if anyone could help with a few questions I have?<br><br>Firstly, the app which is acting as the server opens a port to receive data, but it will be unable to receive anything if the port hasn't been set for port-forwarding on the router. Now I know how to do this manually through my router, but I was wondering if there is a way that the app itself can do this for those players who aren't very technically minded?<br><br>Secondly, is there a way to determine the physical distance between to IP address? This would be extremely useful for pairing up players who are near each other and therefore reduce lag somewhat. I have seen other multiplayer games do this so it must be possible. <br><br>Any info would be most useful. <br><br></td></tr></table><br>
<a name="1068997"></a>

<a name="1068998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not an expert eighter. I think port forwarding isn't possible by code, esp. not in user (nonadmin) mode. And isn't port forwarding set in the router hardware anyway?? As far as I know portforwarding and firewall configuration is still one of those things multiplayers will have to go trough and it's also an ongoing issue for a dedicated community of howto-googlers. I could be wrong tho.<br><br>The physical distance (I think you only care about the lag?) might be calculated, simply by checking the lag to a certain user. Once there was PING, but I think nowadays many  firewalls prevent ping calls from being answered. But since your game is running, you can easily do your lag test with some homemade tcp or udp handshakes by your own. What really matters is your MP archithecture. Is it peer to peer, or is there a central server? I assume you want a central server that manages many games where people can participate, but each game has its own local gameserver running, eg. for 8 users or so, and you want these game servers to be optimized geographically(?)<br>What you could do is a lag check from every player to every local gameserver (listed on the main server). So the game would download a list of IPs of local game servers and test the lag to each one of them.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Non of the modern multiplayer games require you to set up port-forwarding, so if they're not doing it from code what are they doing?<br><br>I have a global list of games in play. I thought it would help to order that list by physical distance to assist the user in finding the least laggy connection. I'm not sure it'd be practical to contact all the games on the list just to test lag.<br><br>I did some heavy googling but came up empty. <br><br></td></tr></table><br>
<a name="1069003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now I know how to do this manually through my router, but I was wondering if there is a way that the app itself can do this for those players who aren't very technically minded? <br></div><br><br>There is a uPnP protocol that can have a computer initiate *some* router changes, but unless the router is compatible and configured to allow it, it won't work...<br>See here: <a href="http://en.wikipedia.org/wiki/Universal_Plug_and_Play" target="_blank">http://en.wikipedia.org/wiki/Universal_Plug_and_Play</a><br>Universal plug &amp; play NAT traversal through IGD.<br><br>In most cases you'll be out of luck, unfortunately.<br><br>One way many 'big name' games work around it is by having central servers: the clients make an outgoing connection to the server, and the server then relays the info from the various players to each other over this tunnel.  Since it's outgoing rather than an unsolicited incoming connection this will work through any router. <br><br></td></tr></table><br>
<a name="1069006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks xlsior. I think I'm getting the idea now. I'd need a central server to allow access without port-forwarding. I don't think that would be practical for my needs. Oh well. <br><br></td></tr></table><br>
<a name="1069076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should only need a central server to start the players talking to each other -- you don't have to have a central server controlling the whole game:<br><br><a href="http://www.gnu-darwin.org/www001/src/ports/devel/raknet/work/Help/natpunchthrough.html" target="_blank">http://www.gnu-darwin.org/www001/src/ports/devel/raknet/work/Help/natpunchthrough.html</a><br><br><a href="http://www.mindcontrol.org/~hplus/nat-punch.html" target="_blank">http://www.mindcontrol.org/~hplus/nat-punch.html</a><br><br><a href="http://en.wikipedia.org/wiki/UDP_hole_punching" target="_blank">http://en.wikipedia.org/wiki/UDP_hole_punching</a> <br><br></td></tr></table><br>
<a name="1069566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This NAT punching sounds like just what I need, but I can't make heads nor tails of how to implement it. Does anyone have a BlitzMax example I could pick apart, nothing too complex. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
