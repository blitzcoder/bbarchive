<!DOCTYPE html><html lang="en" ><head ><title >Mahjong?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mahjong?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Mahjong?</a><br><br>
<a name="1009439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone here like it? Played it?<br><br>I have a small doubt: I just discovered how to play it (with Mahjong Titans on Vista), and now I want to write my own. <br><br>I managed to correctly draw the board, check for matches and free tiles... but I couldn't figure out yet how to generate the board, in a way that it's always solvable.<br><br>I thought sorting pieces in pairs, and laying out them also in pairs in the board - I could make it, but no go so far.<br><br>Has anyone tried that? Any hints or clues???<br><br>Thanks in advance to everyone ;) <br><br></td></tr></table><br>
<a name="1009477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I thought sorting pieces in pairs, and laying out them also in pairs in the board - I could make it, but no go so far. <br></div><br><br>Should work just fine.<br><br>Just remember that even with an 'always solvable' board, you can still fail: Even though you guarantee that there is (was) a workable solution, the order that the tiles are picked up in can prevent you from completing a board regardless since there are multiple sets of the same tiles present in a typical Mahjong game.<br><br>(For example: You have two pairs of a particular tile. You randomly put down a pair at the following coordinates: (1,1) and (2,1)<br>then you put down the second pair: (1,1) and (2,2)<br>Player makes the match (2,1) + (2,2), which is valid... But now the other pair is both stacked on (1,1), and no longer can be picked up and the board is now unsolvable.  <br><br>If the player had picked up (1,1) + (2,1) and then (1,1) + (2,2) the board would still be winnable at that point.<br><br>Anyway, the occasionally painting yourself in the corner is pretty much by design I gather. If you wanted to make it easier to could also check and verify that you're not having any duplicates in a stack, but that make the game too easy... Plus you'd still have the opportunity to have other deadlock combinations where certain tiles you need to unlock a row are stock somewhere in the middle of that very same row.<br><br>It's pretty much by design though, not every play will automatically be winnable. You have to consider the odds of getting stuck later when making certain combinations, that's part of the game. <br><br></td></tr></table><br>
<a name="1009479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and something else to consider: different mahjong games have different goals.  <br><br>In some variations your goal is to clear the entire board every time.<br><br>In others, all you need to do is unlock two special golden tiles, and once you make that match the level is over regardless of how many tiles are left. (You can reward/penalize with bonus points depending on how many tiles are left at the time you make that match.  An example of a series of games that use that Mechanic is MahJong Quest (http://www.gamehouse.com/download-games/mah-jong-quest )<br><br>Some of the more recent versions also have other special tiles, which give the player the ability to perform special operations, eg.:<br>- Choose any tile and remove it (plus the other one forming its pair, which may or may not be visible)<br>- Remove all occurrences of a particular tile<br>- Allow the user to swap two tiles of their choice<br><br>Having those specials allows the user a way out of a deadlock situation, if they use them carefully.  You can of course reward the user for any remaining special abilities at the end of a level, to reward actually thinking ahead.<br><br>Plus there's often (a limited number of) undo's, hints, etc. for when people get stuck.  It's also helpful if the game shows how many possible moves are on the table at that moment. <br><br></td></tr></table><br>
<a name="1009485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mahjong is actually a 4-player gambling game.<br><br>The game you are referring to uses Mahjong Tiles, but is just a matching game.  It is called Mahjong because the first person to create a matching game with the tiles called it Mahjong.  I think it is actually called Mahjong Solitaire.<br><br>Wikipedia link to the actual Mahjong game:<br><br><a href="http://en.wikipedia.org/wiki/Mahjong" target="_blank">http://en.wikipedia.org/wiki/Mahjong</a> <br><br></td></tr></table><br>
<a name="1009488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ya I played real Mahjong at my brothers place.. his wife is from Hong Kong and taught us how to play... totally different than computer Mahjong. <br><br></td></tr></table><br>
<a name="1009493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ditto on the its not really mahjong issue, having said that it frees you up from always using the default tile set of chinese symbols and other pieces, you could have dominoes, playing cards or as one blitz game from way back when brightly coloured 8bit computer logos and game icons<br><br>the same goes for how the tiles are laid out, you dont have to follow the traditional layouts, you could design your own <br><br></td></tr></table><br>
<a name="1009520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone. I already am blocking two tiles with same symbol to overlap themselves, and even tried to block them side-by-side, but still, there are deadlocks.<br><br>As for it being Mahjong Solitaire, I know, I read the wikipedia article (and other sites) already :)<br><br>My first goal is to implement the mode to "remove all tiles" - like in Mahjong Titans - and (I don't know how) on MS version you *can* always win, so there is a way to guarantee the board will always be solvable.<br><br>I already have preliminary functions to test combinations, find combinations and show how many are left.<br><br>Of course, after I come with a solution I'll implement multiple layouts, multiple tilesets, and even other play modes. But I need to get the basic working right first ;) <br><br></td></tr></table><br>
<a name="1009540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you know there are deadlocks?  You play it out?<br><br>How do you know you are not just making a mistake that ls leading to a deadlock?<br><br>Two of the same tiles can be on top of each other, three is what you do not want.<br><br>Why are you so worried about whether there will be deadlocked?  If a person were to play by themself and actually stack up the tiles, there can be deadlocks.<br><br>The best thing to do is score how many tiles are left over, as well as how long it took to get there.  Then it does not matter if they deadlock.  They can still try to remove more tiles than the person before them or the same number of tiles in a faster time. <br><br></td></tr></table><br>
<a name="1009545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if tiles on the board layout are placed in pairs one after the other, you should always end up with a solvable board... since removing them in reverse order will solve it.  That doesn't mean the player will do that of course, which is why the player may not solve every solvable board ;) <br><br></td></tr></table><br>
<a name="1009548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I got it! Sometimes erasing all code (at least the one which shuffled the board heh) and starting from scratch helps a lot =)<br><br>The trick was to avoid the same tile above and below, side by side, and to fill the board from the "borders" to the center... still have more testing to do (like other layouts and so) but I think I got it :)<br><br><div class="quote"> <br>How do you know you are not just making a mistake that ls leading to a deadlock? <br></div><br><br>Because I wrote code to test all possible solutions to a given board :)<br><br><div class="quote"> Why are you so worried about whether there will be deadlocked? <br></div><br>I don't want to create a "no-win" game. Otherwise, I don't think the game would be much fun ;)<br><br><div class="quote"> <br>Well, if tiles on the board layout are placed in pairs one after the other, you should always end up with a solvable board... <br></div><br>Not always. If you have a small board, and few tiles, it works. But with bigger boards, you can easily lock one "pair" with other two. Specially since the board has up to 5 layers, you can even block a tile below another!<br><br>Now I'm going to get more layouts into the game and see if it will work everytime :)<br><br>Cheers! <br><br></td></tr></table><br>
<a name="1009551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Except pretty much all of the MahJong games I've seen (I've played maybe half a dozen of them over the past few years) DO allow side-by-side matches, and two copies of the same tile on top of each other.<br><br>Preventing those might actually make it too easy? <br><br></td></tr></table><br>
<a name="1009560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not always. If you have a small board, and few tiles, it works. But with bigger boards, you can easily lock one "pair" with other two. Specially since the board has up to 5 layers, you can even block a tile below another! <br></div><br><br>If you don't allow the pairs to be placed on top of each other then you won't have that problem... as long as the two are placed in different locations... you might end up with two same tile types stacked... but its in a way that the board can still be solved.<br><br>Starting the board from the border to the inside tells me how to play your boards to win... always start from the middle and work your way out to the border. <br><br></td></tr></table><br>
<a name="1009577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think _Skully is right.  If you place the tiles in pairs in playable locations, then the reverse of that will clear the board, so you ARE guaranteed to have a winnable board. <br><br></td></tr></table><br>
<a name="1010763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Placing tiles in pairs guarantees nothing. Look at this for example:<br><br>First place two "A" tiles on a 4x2 board:<br><br>.A..<br>A...<br><br>Then, add two "B" tiles:<br>.AB.<br>A..B<br><br>Now, two "C" tiles:<br>.ABC<br>AC.B<br><br>And last, two "D" tiles:<br>DABC<br>ACDB<br><br>It's a nice deadlock.<br><br>I'm still looking for a good solution for *any* board :( <br><br></td></tr></table><br>
<a name="1010782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Placing tiles in pairs guarantees nothing. Look at this for example: <br></div><br><br>It does if you don't fill in random  blanks, but work either outwards from the center... <br><br></td></tr></table><br>
<a name="1010820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You placed one of the D's in an unplayable location...<br><br>Like I said, if you place the tiles in playable locations, you will be guaranteed to have a winnable board. <br><br></td></tr></table><br>
<a name="1010868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, what I'm missing? Look at the example below, it's a valid board (taken from another game), I'm placing pairs from center to border, in "playable positions", but still, the last two pieces end up blocking everything!<br><br><img src="http://www.icongames.com.br/temp/mahjong-bug.gif"> <br><br></td></tr></table><br>
<a name="1010906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> The last 2 were not a valid placement.  After placing them, they must be able to be picked up.  You have to place them as if they were legally played. <br><br></td></tr></table><br>
<a name="1010911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that. But that's the only place left on the board, so I have nowhere else to put them.<br><br>So what could be done to avoid this from happening? I tried everything I can think of so far, but still haven't achieved a good solution for that. <br><br></td></tr></table><br>
<a name="1010931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you work from the center outwards, then the last place to put down a tile will always be accessible.<br><br>(Of course you can still match different levels, as long as you have a small island on the bottom layer you can start layering on top of those too) <br><br></td></tr></table><br>
<a name="1011839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally solved it. It has nothing to do with placing tiles from center, from borders... in many, many layouts this will always lead to a dead end.<br><br>The solution is to actually place all tiles on board (as empty), and then solve it forward, removing tiles by pairs, and keeping a list of removed tiles.<br><br>Then it's just a matter of resetting the board, and assigning random "images" to the tiles on the list... it creates one hell of a hard game, and seems to be always solvable for the little tests I've done so far :) <br><br></td></tr></table><br>
<a name="1011919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, you just play the game, grabbing free tiles at random, keeping a list of the pairs you grab, then put image pairs on the tiles?!?!<br><br>That is genius.  Probably really fast too. <br><br></td></tr></table><br>
<a name="1011927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...what would be the benefit of that over automating the lay-down?<br><br>It's much more work to generate new boards your way, plus you end up with the exact same end result: as long as you have multiples of some of the tilepairs, you can still end up with a deadlock if the player doesn't match the exact same combination pairs that you did in your trial game.<br><br>Just seems like adding more work with no pay-off. :-? <br><br></td></tr></table><br>
<a name="1011962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> The player causing a deadlock is OK, in fact it is almost always possible.  He just want there to be a possible solution.<br><br>I don't see how you think that his solution is generating more work.  If there are 144 tiles, he just has to pick 72 pairs, and put them in a list, then assign tile faces to them.  Pretty easy in my opinion.  PC should be able to do it in a split second. <br><br></td></tr></table><br>
<a name="1012053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> All the versions of the game I have played had 4 of each tile rather than 2. Would that help your situation or make it even more difficult to generate valid levels? If nothing else it would mean you only had to design half the number of tile images... :o) <br><br></td></tr></table><br>
<a name="1012068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> My method is pretty fast, and unlike the "pick a pair, place it from the center/border", it works for every layout I tested so far (30+), as long as it obey to the basic requirement of mahjong solitaire games: having an even number of places for tiles.<br><br>You can even use less than 144 tiles, and it will work pretty good.<br><br>And it's already placing the tiles pair by pair. I previously sort the images by pairs too, so it's dead simple to generate a board. <br><br></td></tr></table><br>
<a name="1012079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't matter how many tiles are in a set.  Treat them as pairs, not sets of 4 and placing them is not an issue. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
