<!DOCTYPE html><html lang="en" ><head ><title >How to store the datas for a large world ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to store the datas for a large world ?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >How to store the datas for a large world ?</a><br><br>
<a name="1166891"></a>

<a name="1166949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Let's imagine i want to make a game with a large world :<br>Each zone measures 500*500units<br>There are 200*200zones in the world<br>So this makes a world of 100*100km<br><br>I think this is really a lot of space to fill but i want to generate the terrains procedurally and then add some buildings manually and some buildings procedurally.<br><br>I see 2 solutions and one of them doesn't seem to be possible because of the huge amount of octets it will take to save the heightmaps and saves :<br><br>1st solution :<br>With this solution, the program generates each terrain and saves it as a 512*512pixels heightmap<br>From my understanding, if i save each heightmap with the minimum parameters (PX%,PY%,GreyColor%) in a custom file, this will take 512*512*3*4 = 3145728octets  3.145mo<br>And with this, i have to save the properties of the buildings of the zone, of the objects of the zone, of the characters of the zone, of the nodes and links of the zone.<br>This will take more octets.<br>So let's assume each zone takes 4mo of heightmaps and saves, with a world of 200*200zones this will take 200*200*4 = 160go This is too much !<br><br>2nd solution :<br>With this solution, the program generates the terrain, the buildings, the objects, the characters, the nodes and the links, of the zone only when the player visits this zone.<br>Obviously this will takes less octets and maybe Player will never visit all the zones (200*200 = 40000zones !)<br>But this will require a longer loading time because the program will have to generate the components of the zone.<br><br>I don't understand how video games like Fallout 3 or Skyrim or GTA4 store their files and saves ? They seem so big and detailed. I only want to make a game with low polys graphics and simple functionalities but it seems to take too much space on the HD. <br><br>Any suggestions ?<br><br>Thanks,<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1167719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i have tried to write a custom terrain file by writing only the RGB value as a byte.<br>So now i have a terrain file of 262144octets which is an improvment compared to the 3.145mo !<br><br>But still, if the world is 200*200 zones, this will take 200*200* 262144 = 10485760000octets so it is more than 10go ! <br><br>Do you know another way to store the grey color of each pixel of a heightmap(512*512pixels) ?<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1167746"></a>

<a name="1167747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multiple options:<br><br>1)<br>Just compress the data even more:<br>Each Int is able to hold 4 bytes - which each can be 256 different values.<br>There is no real need to save the PX and the PY-values. If you know where X0,Y0 of the "map-tile" is positioned, you know where X1,Y100 is located...<br>So your Heightmap just stores the "Z-Coordinate". In your case this is a int.<br><br>If have an absolute minimum in your world (eg. z = -10000) you can add 10000 to the Z-coordinate and save it only using 3 bytes (google for 3byte-&gt;int algorithms). This way you would have an additional byte for custom settings (like rotation or type of that tile).<br><br>So you end up with 512*512*4 = 1024kb (or with 3 bytes = 768kb)<br>EDIT: if like you posted only bytes are used: it is 256kbytes.<br><br>Now just compress that data with PNG/Targa and it is really compact concerning disk space (memory is still 1024/768/256kb).<br><br><br>2) do it like image compressors<br>take your 512x512 area and count the values.<br>The most often used value is the base for the whole area.<br>Just write the parts differing from the base.<br>If using a base style (snow...) you will end up saving some bytes.<br>-&gt; wont do that as it is not the best thing to do.<br><br>3) search for rects.<br>This is the method PNG and others use:<br>they search for patterns in your 512x512 area.<br>Means: wander from x0,y0 to x511,y511 and look for areas bigger than just 1x1. Instead of saving each 1x1-area, they save: x4,y7 = rect(50,20).<br><br>This is highly optimizing "boring" landscapes... eg wide grasslands.<br><br><br>4) "vectorize" (mathematics) your landscape<br>Instead of saying: grassland height 1, grassland height 2, ... grassland height 10, mountain height 11, ...<br>You safe: gradient(grassland, mountain, height1, transHalfAt 10, height20)<br><br>That is kind of your "procedurally generation"-method. But instead of saving the result, save the procedure.<br><br><br><br>bye<br>Ron<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1167749"></a>

<a name="1167750"></a>

<a name="1167751"></a>

<a name="1167752"></a>

<a name="1167753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I may be wrong, but I think that games like Skyrim are "Asset drived".<br>Which mean each object you see in the game has been modeled to get the best control and details on it. Then a database (SQL, XML, etc.) is used to store position, rotation &amp; settings of objects.<br>They probably create their own terrain editor, something like Grome Editor from quad software( <a href="http://www.quadsoftware.com/" target="_blank">http://www.quadsoftware.com/</a> ) who saves each map on a collada format.<br><br>Depending on the level of details, UV info, structures, etc. You can expect that a map of 10x10 km may take roughly 10 Mb of hard disk space.<br><br>Then it's up to you to create the best engine to exploit seamlessly all those map with a gradual level of details (LOD), optimizations, etc.<br><br>Procedural generated maps is a lot of work, especially if you plan to use so many areas on so much space! It's very feasible of course but you take the risk to reproduce those games with an extremely huge world, always the same type of 3D assets and the same boring missions.<br><br>I'm totally fan of huge procedural generated world with fixed random seed (so you can share your discoveries like in Elite for example), but only if the randomness has been "humanly populated". I'm waiting the next <b>Starbound</b> impatiently ( <a href="http://playstarbound.com/" target="_blank">http://playstarbound.com/</a> :-).<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1167762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>That is kind of your "procedurally generation"-method. But instead of saving the result, save the procedure.<br> <br></div><br>Derron&gt;&gt;This is an interesting concept, thanks.<br><br>But i think i will keep the 262144octets terrain file because it is the only way i can store precisely the height for each unit.<br>I want to be able to modify the terrain in realtime in order to be able to dig in the ground !<br><br><br><br><div class="quote"> <br>Procedural generated maps is a lot of work, especially if you plan to use so many areas on so much space! It's very feasible of course but you take the risk to reproduce those games with an extremely huge world, always the same type of 3D assets and the same boring missions.<br> <br></div><br>Armitage 1982&gt;&gt;I don't plan to make a game as detailed as Skyrim or Fallout 3 ! I am realist. But i can certainly make an open world game with low details, an interesting gameplay, and the desire to explore and discover things.<br>I will try with a smaller world to see what i manage to do. <br><br></td></tr></table><br>
<a name="1168109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you know another way to store the grey color of each pixel of a heightmap(512*512pixels) <br></div><br>This is essentially what's been suggested earlier. <br><br>Rather than storing 512 * 512 * 4 * 8 bits you only need 512 * 512 * 8 bits at the most for a 512x512 Heightmap (Typical Blitz Heightmaps especially only use a single 8-bit byte for Height anyway when loaded from an image (Red channel. Green and Blue and any Alpha channels are ignored)<br><br>So the first instance, save the heightmaps as 256 colour images if you are loading them with say, LoadTerrain()<br><br>Otherwise, if you are 'manually' generating the terrain mesh from values read from a file, ensure you only reade a single 8-bit Byte (or even less if you are so inclined and do not need 255 levels of terrain?) <br><br></td></tr></table><br>
<a name="1168177"></a>

<a name="1168179"></a>

<a name="1168180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Otherwise, if you are 'manually' generating the terrain mesh from values read from a file, ensure you only reade a single 8-bit Byte (or even less if you are so inclined and do not need 255 levels of terrain?) <br> <br></div><br>I think that's what i have done here :<br><div class="quote"> <br>Ok i have tried to write a custom terrain file by writing only the RGB value as a byte.<br>So now i have a terrain file of 262144octets<br> <br></div><br>512*512*1byte (the grey color of the pixel from 000 to 255)<br><br>And then i create the terrain with CreateTerrain() and ModifyTerrain()<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1168301"></a>

<a name="1168302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remember to use compression methods... that is why i suggested to save them as grayscale targa/png.<br><br><br>bye<br>Ron<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1213016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe, funny you mention "digging in the ground" RemiD, cos that's exactly what I like to use in blitzterrain:  "destructibility".<br><br>I set it so that when throwing grenades you get crude craters, which I think looks pretty cool as a feature. <br><br></td></tr></table><br>
<a name="1213080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, being able to modify the terrain heights is a cool feature indeed :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
