<!DOCTYPE html><html lang="en" ><head ><title >C++ list removal</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >C++ list removal</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >C++ list removal</a><br><br>
<a name="1066276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way to get fast removal of an object from a list in C++, like BMX has?  The C++ list erase function wants an iterator, which makes no sense.  If you remove an element from a list, the position of all the elements after it will change. <br><br></td></tr></table><br>
<a name="1066280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.cplusplus.com/reference/stl/list/remove/" target="_blank">http://www.cplusplus.com/reference/stl/list/remove/</a> <br><br></td></tr></table><br>
<a name="1066282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would have to iterate through the entire list to remove an element. <br><br></td></tr></table><br>
<a name="1066283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a faster version bmx has? Or are you talking about TLink::remove? <br><br></td></tr></table><br>
<a name="1066285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep.<br><br>Unless anyone has any other ideas I am going to have to do my own linkages in each class that needs them:<br><br>entity-&gt;next<br>entity-&gt;prev <br><br></td></tr></table><br>
<a name="1066320"></a>

<a name="1066321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The C++ list erase function wants an iterator, which makes no sense. If you remove an element from a list, the position of all the elements after it will change. <br></div><br><div class="quote"> list::erase - Return value: A bidirectional iterator pointing to the new location of the element that followed the last element erased by the function call, which is the list end if the operation erased the last element in the sequence. <br></div><br><br>??<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1066403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.cplusplus.com/reference/stl/list/erase/" target="_blank">http://www.cplusplus.com/reference/stl/list/erase/</a><br><br><div class="quote"> Parameters<br>All parameters are of member type iterator, which in list containers are defined as a bidirectional iterator type.<br><br>position<br>    Iterator pointing to a single element to be removed from the list.<br>first, last<br>    Iterators specifying a range within the list container to be removed: [first,last). i.e., the range includes all the elements between first and last, including the element pointed by first but not the one pointed by last.  <br></div><br><br>So you provide the position in the list of the item you want removed.  How can you find this position without iterating through the list?  If you store a position when the item is added to the list, it will be invalidated if another item is removed from the list. <br><br></td></tr></table><br>
<a name="1066405"></a>

<a name="1066408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. You can add the same object to a list multiple times.<br><br>2. In common scenario objects in lists require removal during iteration of the list, hence iterator pointer is modified and returned by erase<br><br>3. <a href="http://www.cplusplus.com/reference/stl/list/remove/" target="_blank">http://www.cplusplus.com/reference/stl/list/remove/</a> - your comment to this link makes no sense<br><br>4. to learn C++ buy and read Stroustrup's book <a href="http://www2.research.att.com/~bs/3rd.html" target="_blank">http://www2.research.att.com/~bs/3rd.html</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1066414"></a>

<a name="1066416"></a>

<a name="1066417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> your comment to this link makes no sense <br></div><br>So.. what?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1066415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops, wrong end of the stick, sry. <br><br></td></tr></table><br>
<a name="1066418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since you seem to be the C++ Expert in the house, could you explain in a C++-Newbish way what the C++ std::list Equivalent of a TLink is, please? Because, you know, I have no idea. <br><br></td></tr></table><br>
<a name="1066423"></a>

<a name="1066425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't a TLink basically an instance of an ::iterator?<br><br><div class="quote"> So you provide the position in the list of the item you want removed. How can you find this position without iterating through the list? If you store a position when the item is added to the list, it will be invalidated if another item is removed from the list.  <br></div><br><br>No, an iterator is not based on position, it is a reference to an instance of an object pointer in a list, and is not invalidated when other items are added or removed from the list. I think of them as pointers with list scope.<br><br>The main problem is that any iterators that reference the object you are removing from a list become invalidated. <br><br>I prefer to use a deleteme flag in objects and then have only one place in the program where the object list is already being iterated where objects are actually removed and destroyed.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1066432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> why not use a Vector for that sort of thing then you can just call Vector[ the one I want to get rid of].erase :) <br><br></td></tr></table><br>
<a name="1066438"></a>

<a name="1066440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> why not use a Vector for that sort of thing then you can just call Vector[ the one I want to get rid of].erase :)  <br></div><br>Vectors are arrays.  If you have a large array and remove an element somewhere in the middle, the entire memory following that element has to be copied.  The advantage of lists is elements can be added and removed quickly, but it is slower to access a single element at any arbitrary position, so you usually iterate through the list operating on each element.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1066471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't find the answer you are looking for, try at <a href="http://www.gamedev.net/community/forums/forum.asp?forum_id=21" target="_blank">GameDev.NET</a>. Lovely people there too; many are C++ experts. <br><br></td></tr></table><br>
<a name="1066511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what would you do, something like this?:<br><br>list.push_back(65)<br>iterator&lt;int&gt; it = list.end()<br>list.push_back(32)<br>list.remove(it)//removes 65 <br><br></td></tr></table><br>
<a name="1066691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> list.push_back(65)<br>list.push_back(32)<br>list.remove(65) <br><br></td></tr></table><br>
<a name="1066971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> We've been over this.  Removing elements by value is slow. <br><br></td></tr></table><br>
<a name="1067086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your code from #16 looks pretty solid, does it work? <br><br></td></tr></table><br>
<a name="1067846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> This appears to be the right way to do it:<br><pre class=code>//Declare the list, object, and link
list&lt;Model*&gt; list;
Model* model = new Model;
list&lt;Model*&gt;::iterator link;

//Add object to list and retrieve the link
list.push_front(this);
link = list.begin();

//Remove the link
list.erase(link);</pre> <br><br></td></tr></table><br>
<a name="1067865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, thats nice to know and clears things up, thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
