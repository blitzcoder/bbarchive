<!DOCTYPE html><html lang="en" ><head ><title >How to make several heightmaps tile ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to make several heightmaps tile ?</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >How to make several heightmaps tile ?</a><br><br>
<a name="1110584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, :)<br><br>I want to create several 512x512 heightmaps separately with a fixed Y scale and then i want to make them tile.<br><br>Can i use a sofware or a code that makes an image tile or is there a specific software or a code to make several heightmaps tile correctly ?<br><br>Thanks,<br>Good day, <br><br></td></tr></table><br>
<a name="1110619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If there's room to cheat, you should do so. <br><br>"Always make your life easier" - Brucey<br><br>Create a huge texture that's comprised of all those 512² heightmaps, but only load the portion you want to edit - I'd recommend a 1024² portion of that big one because this way you can edit several at the same time, including their edges.<br>After editing, overwrite the original big one with this edited portion, at the appropriate coordinates. <br>When you're done with all the edits, cut that big one into several 512² and they'll indirectly tile. <br><br></td></tr></table><br>
<a name="1110657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good idea, thanks Kryzon.<br><br>Do you know what is the maximum size of an image in pixels that Blitz3d is able to load and save ?<br><br>I would prefer to code a small program to do what you have explained.<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1110676"></a>

<a name="1110677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz3D's maximum texture size is determined by your video card and is usually 4096x4096 or 8192x8192, I think. If you use images instead, it's possible that there is no upper limit except your machine's memory (no idea how image-images work...). For textures, you can actually just test it fairly simply by seeing how large a texture actually gets created.<br><br>I'm not sure I understand your question fully though - do you mean you want to create the heightmaps separately with unconnected runs through something like L3DT, and then glue them together by making the edges fit?<br><br>If so, I would advise against doing that.<br><br>One thing that's possible with most heightmap algorithms (certainly DSA, presumably also Perlin noise although I've never thought about that one) is to take a small grid and use it as a base for a much more detailed version, by running the algorithm over it until it has the level of detail you want. This means that rather than making the maps first and attaching them together, you can make a low-res map of the whole area and then enhance patches of it: these patches will naturally tile because 1) their terrain flows from one area into the next, and 2) you can keep track of surrounding tiles to ensure edge verts are in the right places.<br><br>If L3DT doesn't offer this functionality, it would be better to just create one enormous map and cut it up, as Kryzon suggested (while you can certainly do the above in B3D, it's a very complex topic and you'd be reinventing the L3DT wheel).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In fact, i have already created a 10240x10240pixels heightmap using L3DT.<br><br>What i was wondering was if it is possible to load such a big image in Blitz3d in order to cut it in small 512x512tiles.<br><br>From my tests, Blitz3d doesn't like it, the program seems to freeze.<br><br>Then i was planning to reload each tile in L3DT and add specific reliefs. <br><br></td></tr></table><br>
<a name="1110681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...you should probably look into using an image editor for this...<br><br>Some are scriptable (not something I've ever investigated myself, but it can be done), or you could just cut the image into quarters and try again with Blitz3D, saving you the effort of doing each of the 400 cells by hand.<br><br><div class="quote"> Blitz3d doesn't like it, the program seems to freeze. <br></div><br><br>How long did you leave it? Blitz3D can act oddly when it faces a difficult task, even when it's still actually doing something useful. Normally, when a Blitz3D program runs out of memory, it just aborts with no error message (even in debug mode!), so a program that looks frozen is usually either trapped in an infinite loop, or is doing something but taking a really long time about it. <br><br></td></tr></table><br>
<a name="1110749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What i was wondering was if it is possible to load such a big image in Blitz3d in order to cut it in small 512x512tiles.<br><br>From my tests, Blitz3d doesn't like it, the program seems to freeze. <br></div><br>I'm sure that as a texture you <b>cannot</b> load something as big as that 10240².<br><br>So you are left with loading it as an image and "blitting" the section you want (with CopyRect() from the ImageBuffer) onto a viable-sized texture such as a 512² or bigger, and doing whatever you want from there. However, if you already have it as an image you can create smaller images, copy data and save them as your tiles.<br><br>If Blitz3D can't load this image with its native LoadImage() command, you can use the FreeImage userlib: <a href="/codearcs.php?code=1732" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1732</a>, which gives you another way to load image files and more advanced stuff like loading from banks.<br>Just changing the FiRead function code from that userlib can already do all you need with cropping a smaller section of a bigger image. You can copy a section to another image, already save it as one of the tiles etc.<br><br>Also look at the Splitz tool: <a href="http://www.feldfunker.de/?s=splitz" target="_blank">http://www.feldfunker.de/?s=splitz</a> <br><br></td></tr></table><br>
<a name="1110778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have managed to do it some hours ago.<br><br>With ReadPixel() or GetColor() forget it ! It is too slow !<br><br>But with CopyRect it is fast and perfect !<br><br>I have to improve the code in order to copy all the tiles in a loop but here is a start :<br><pre class=code>
Graphics3D 1024,768,32,2
SetBuffer BackBuffer()
HidePointer

;Size of the Large Heightmap = 10240x10240pixels

;Size of the Small Heightmap = 1024x1024pixels

Color 255,000,255
Print "Defining the XOffset% and YOffset%."
XOffset% = 0
YOffset% = 10240-1024 ;first heightmap starts at 0X,0Z

Color 255,000,255
Print "Opening the Large heightmap."
LargeImage = LoadImage("L3DT Heightmap10240.png")

Color 255,000,255
Print "Creating the Small heightmap."
SmallImage = CreateImage(1024,1024)

Color 255,000,255
Print "Drawing specific color on the pixels of the corners for debug."
SetBuffer(ImageBuffer(LargeImage))
Color 255,000,000
Plot XOffset%,YOffset%
Color 000,255,000
Plot XOffset%+1023,YOffset%
Color 000,000,255
Plot XOffset%,YOffset%+1023
Color 255,255,000
Plot XOffset%+1023,YOffset%+1023
SetBuffer(BackBuffer())

Color 255,000,255
Print "Copying the color of the specified pixels of the Large heightmap to the Small heightmap."
CopyRect(XOffset%,YOffset%,1024,1024,0,0,ImageBuffer(LargeImage),ImageBuffer(SmallImage))

Color 255,000,255
Print "Closing the Large heightmap."
FreeImage(LargeImage)

Color 255,000,255
Print "Writing black lines on the borders of the Small heightmap."
SetBuffer(ImageBuffer(SmallImage))
;Color 000,000,000
;Line 0,0,1023,0
;Line 1023,0,1023,1023
;Line 1023,1023,0,1023
;Line 0,1023,0,0
SaveBuffer(ImageBuffer(SmallImage),"000000HOutput.bmp")
SetBuffer(BackBuffer())
Color 255,000,255
Print "Small heightmap saved."

Color 255,000,255
Print "Drawing the Small heightmap."
DrawImage(SmallImage,0,0)

Flip
FlushKeys
WaitKey
Color 255,000,255
Print "Closing the Small heightmap."
FreeImage(SmallImage)

End
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
