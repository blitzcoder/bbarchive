<!DOCTYPE html><html lang="en" ><head ><title >How to update some elements of a GUI</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to update some elements of a GUI</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >How to update some elements of a GUI</a><br><br>
<a name="1181180"></a>

<a name="1181181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, :)<br><br>I am currently working on a GUI for a project and i wonder how to update some elements of the GUI :<br><br>-&gt;Message area (a zone where there is instructions or a message, with possibility to scroll up or to scroll down)<br><br>-&gt;Text field (a zone where there is typed text, with possibility to add a char, to add a space, to move before the previous char or before the next char, to remove the previous char or the next char)<br><br>-&gt;Chat area (a zone where there are the text lines of all users)<br><br>I have already managed to code all these elements, my question is more about how to update these elements, because they can be modified depending on the text or text lines on them.<br><br>First, i have tried to build all the elements each frame, and to draw them after the render3d with rect + line + text + drawimage.<br>It is easy to modify the text but it is a bit slow to render.<br><br>Second, i have tried to prebuild all the elements once in several images, and to draw them after the render3d with drawimage.<br>It is more complicated to modify but it is faster to render.<br>I can modify each element only when necessary (if the text is scrolled up or down, if a char is added or removed, if a line is added or removed.)<br><br>Note : the elements of the GUI which never change are prebuilt (the windows, the buttons, the switches, the info areas)<br><br>Is there a better approach to do this ?<br><br>Thanks for you suggestions, <br><br></td></tr></table><br>
<a name="1181182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not just have a 'Redraw' flag that when set to true gets the element redrawn then it sets the flag back to false, this way only whats needed to be drawn is redrawn :) <br><br></td></tr></table><br>
<a name="1181198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Why not just have a 'Redraw' flag that when set to true gets the element redrawn then it sets the flag back to false, this way only whats needed to be drawn is redrawn<br> <br></div><br>Oh i see what you mean but i don't think it will work if there are 3d meshes rendered before, i think this will erase the elements of the GUI.<br><br>Or maybe i will have to use a quad mesh with the elements of the GUI textured on it.<br>I have to try that, thanks.<br><br>If you have others suggestions, they are welcome. <br><br></td></tr></table><br>
<a name="1181269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just decouple the logic from the drawing (wohhoo helpful hint) ... this idea is also used for gui things.<br><br><br>Your world graphically changes: set the world-type field to "dirty" or "redraw" (this means eg. mouse used for rotation, animation ...) - only useable if you are coding something "static" like model editors or animationless games - else you will have to use "staticSinceMilliseconds"-timers which you can use for checking (back in the times of 2d we used DirtyRects-methods). <br><br><br>Someone types something -&gt; Keypress-Event, all listeners check if they are targeted.<br>GuiChat is targeted: field "dirty" or "redraw" is set to true, content is changed according the keypresses.<br><br>After all listeners processed that event, do the next one until all events are finished.<br><br>After you have drawn your 3d scene you will draw the gui (I think the gui stays on top of all other elements). The gui itself can have z-indexes for gui-element-ordering (different windows). <br><br>Now Gui-Object-caching can start: decide on the different states (world dirty, gui dirty, gui already cached) whether you grab the pixmap from the backbuffer or not. As soon as then changes happen (world dirty or guiobject dirty) you will have to reset the cache: so as soon as there are some animations per second you will end up doing more work than without caching.<br><br>Each drawn element sets it's "dirty"/"redraw" field to false.<br><br>flip.<br><br><br><br>If your gui objects are rectangles without alpha transparency or shadows you could cache them in nearly all situations (grabpixmap or directly "build" the pixmap). If you know that only your gui-object-decoration is using transparency/alphas ... and there is a rectangle in it containing the texts, you could still consider caching the inner rectangle. Especially if the calculation of text-alignment is slowing down everything (align "justify" is such a case :D).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1181280"></a>

<a name="1181281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>If your gui objects are rectangles without alpha transparency or shadows you could cache them in nearly all situations (grabpixmap or directly "build" the pixmap). If you know that only your gui-object-decoration is using transparency/alphas ... and there is a rectangle in it containing the texts, you could still consider caching the inner rectangle.<br> <br></div><br>Yes i already do that, one image for the "background" and i add the text on top of this.<br><br>After this dicussion i now think that it will be faster to draw a GUI on several textured meshes, each mesh having a specific ZOrder.<br>There will be no need to redraw all elements because it is only a matter of hiding/showing the right meshes and redrawing only the text on some elements.<br><br>The only problem i see with this method is that i will have to use textures with a larger resolution than the resolution of the images i currently use, and specific UV coords depending on the element width height so that the element appearance is the same as if it was with an image.<br><br>Or maybe one big texture for each layer (for each different ZOrder)<br><br>I don't think i will code this now, i will finish my GUI with 2D commands until it is functional. But at least i have some ideas on what to do next.<br><br>Thanks again, <br><br></td></tr></table><br>
<a name="1181335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> As soon as you have a good "caching" mechanism, you will in no time adjust it so it used multiple textures/objects if the dimension is bigger than a certain limit.<br><br>What I meant with "caching" included the text too (not only the compound image of different gui-"tiles"). So your gui object is drawn using: cacheImage + DecorationTiles (flowers and beetles at all corners...you know :D).<br><br>In Blitz you have to do that kind of caching as it really slows down if you use a lot of texts with the default truetyperenderer (multiple glyphs/images - one for each character). If you are having hard times with text2image you will better perform if you code your own fonttype which reads ttfs and "packs" all glyphs into one single texture. This saves the need of bitmapfonts and allows easy modfication concerning fontsizes.<br><br>As you seem to be able to "hide and show" only certain meshes I assume you are already using a non blitzmax approach (whole screen gets refreshed during flip) and therefor your "dirty rects" should be performing quite fast (only changed parts of the screen get refreshed).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1181365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>As you seem to be able to "hide and show" only certain meshes<br> <br></div><br>No, for now i use only the commands rect + line + text + drawimage of Blitz3d.<br><br>But from this discussion and my current understanding i think that several quad meshes + several textures + hideentity/showentity can produce a similar result and be faster to update/render.<br><br>I will try once i have finished it in 2d, thanks for the tips. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
