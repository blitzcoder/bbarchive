<!DOCTYPE html><html lang="en" ><head ><title >Tips for making a Solitaire card game</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tips for making a Solitaire card game</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Tips for making a Solitaire card game</a><br><br>
<a name="1240663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to try making a Solitaire-card game, similar to:  <a href="http://www.bigfishgames.com/download-games/24789/zombie-solitaire/index.html" target="_blank">http://www.bigfishgames.com/download-games/24789/zombie-solitaire/index.html</a><br><br>but I have no idea where to start. I assume you cannot simply randomize the cards. Are there some specific algorithms to make sure that the player has some chances to finish a game?<br><br>What should I start looking/learn? <br><br></td></tr></table><br>
<a name="1240666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you should do it like you do when creating a sudoku-puzzle.<br><br>In my old sudoku puzzler "yourdoku" I created the sudokus and removed a random number: then I checked if the algorithm is able to solve the sudoku without "ambiguity" (a 9 or 1 fits into slot x and the other empty slot y also accepts 9 or 1).<br>According to the difficulty set up I removed more and more numbers of the field.<br>Another way to increase difficulty then was how many "steps ahead" the solver must plan to fill things (this decided whether eg simple rules like "scanning cols / rows" finds the next number, or if marking fields with possible numbers is needed).<br><br><br>For solitaire this means:<br>1. Generate a shuffled deck<br>2. Try to let your algorithms solve the game<br>3. if not solveable, generate a new deck<br><br><br>If that "checking" does really take a while, you need to precalculate decks: instead of "random" you use "mersenne twister"-numbers (same initial seed will produce the exact random numbers). Now you check some thousand of seeds if their random numbers generate a valid deck, store the ones which are valid (or store invalid ones...).<br><br><br>So: yes, you have read right: you need a "solver" for your game (this also allows a "hint" at every step in the game). This also allows things like "no possible solution left, want to undo?"<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1240673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an editor which allows me to edit the positions of the cards, in layers.  The lowest layer is zero, and if I place another card which overlaps an existing card, then it automatically adds it to the next layer above.  My editor supports 32 layers (a random number I originally chose for no logical reason), but I don't think I've ever used more than about 7 or 8 layers.<br><br>What I end up with from a code point of view, is an array (one element per layer) of TLists.  The TList contains all of the cards "slots" (positions) which are on that layer.<br><br>I then pre-calculate a list of cards I'm going to populate the level with.  The list is exactly the same length as the number of card slots I've defined for that level.  You can add in parameters so the flow changes direction after X cards, or jumps to a random card.  i.e. you might have in your list:<br><br>A, 2, 3, 4, 3, 2, 7, 8, 7, 6, 5, 4, 3, 2, 3, 4, J, Q, K, Q, J, 10, 9, 8...and so on.<br><br>Then starting with the lowest layer, I add the first card.  Continue adding cards from the list, in order, making sure that I do not add cards to a slot which is above an empty slot on a lower layer.  When the list is empty, then also, this means that all the cards slots are populated.<br><br>The remaining cards are put into a queue (I think I use a TList) which acts as a stack for the foundation cards.  I have a function which shuffles the remaining cards in the stack, by iterating through the list, and adding them to a new list in first or last position randomly.  Finally, I make sure that the player has a playable card at the top, if any exist.  This becomes the first foundation card.<br><br>I'm crap at explaining stuff but that's pretty much it. <br><br></td></tr></table><br>
<a name="1240698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm....when I play patience/solitaire in real life there's no guarantee of winning so why should that be the case in a pc game? <br><br></td></tr></table><br>
<a name="1240701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because you might have paid for that pc game.<br> <br>Nobody could guarantee that you would own a demon/devil - but hey, there is Diablo and you are able to kill one. <br><br>Do not ask why a pc game differs to the real world. Else you also wont play Super Mario as for sure: red mushrooms with white dots are not that tasty (I know you can eat the younger ones and they are hmm kind of "illusionous").<br><br>serious: would you like such a game? you play it for 15 minutes ... press undo multiple times (easy in a "digital game") and try it again without registering, that it is not solveable?<br><br>Gfk does something similar to what I have proposed: you spread the cards according to "rules". His rules are, that cards of all slots are somewhat "non blocking" ("if you take them in the right order - which you do not know- you will be able to place all of them on the target slots).<br><br>Dunno if this is able for all "variants" but might be easier than a solver. BUT ... like said a solver is able to give you hints for what to do next.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1240861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @GfK: I think I understand the process you applied. I also played your game and I see the pattern there. I like your game design and I think is easier to implement than others.<br><br>What I cannot understand is this:<br><br><pre class=code>
I then pre-calculate a list of cards I'm going to populate the level with. The list is exactly the same length as the number of card slots I've defined for that level. You can add in parameters so the flow changes direction after X cards, or jumps to a random card. i.e. you might have in your list:

A, 2, 3, 4, 3, 2, 7, 8, 7, 6, 5, 4, 3, 2, 3, 4, J, Q, K, Q, J, 10, 9, 8...and so on.
</pre><br><br>how do you 'precalculate' this?<br><br>@Matty:<br>As Derron said. This types of games like other casual games, must be pleasant and easy to play. You must give the user the chance to win it. <br><br></td></tr></table><br>
<a name="1240875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I have a standard set of 52 cards to work from (the "stack").  The first card for the queue is chosen at random, because it's just a starting point - doesn't matter what card it is.<br><br>My level editor has a "max run length" parameter - let's say it's "5".  That means I can choose a one-higher or one-lower card for the next 5 card choices that I add to the queue.  The reason for this parameter is that I can adjust the level difficulty by making the max run length higher (easier) or lower (more difficult).<br><br>Each time I add a card to the queue, I remove it from the stack, and a counter increases so I know when I need to throw in a random card - in this case it would be when I've added five cards to the queue.  If the max run length was zero, then that basically means that each card added to the queue is completely random - which would make a level extremely difficult as you'd need more foundation cards to complete it.<br><br>So to build the queue of cards I'm going to populate the level with, I basically do that.  If I remember right, I think I also added in a weighted random somewhere, so even if you set the max run length to 5, it won't *necessarily* add 5 cards before it decides to throw in a random one.  Weighted random is as basic as:<br><pre class=code>If Rand(1,5) = 1
   'add a random card here and reset counter to zero.
EndIf</pre><br>That would mean that regardless of what max run length is set to, for each card added there is *always* a 20% chance that the logic will put a random card in anyway.<br><br>You'll really just have to play around with whatever parameters etc you decide on to see what works best for you - there's no right or wrong way of doing it.  Getting the difficulty right is a colossal juggling act, and whatever you do, you'll get people complaining the game is too easy, and other people complaining it's too difficult. <br><br></td></tr></table><br>
<a name="1240878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >okee</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> serious: would you like such a game? you play it for 15 minutes ... press undo multiple times (easy in a "digital game") and try it again without registering, that it is not solveable? <br></div><br><br>Am I getting old or in't that part of the game ? there is always a chance that you will run out of moves. Windows solitaire still does this.<br>Even if you wrote an algorithm to predetermine whether the game can be won, isn't there a possibility that the player could play the cards in<br>such a way that they run out of moves. <br><br></td></tr></table><br>
<a name="1240938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Agreed okee....not every game is winnable in patience/solitaire so I don't see why we need to make a pc version winnable.  It is part of the game that it is not always able to be won. Winning isn't everything. <br><br></td></tr></table><br>
<a name="1240939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> How are we defining "winning"?<br><br>In Crime Solitaire 2 (and most other solitaire games I'm aware of), you don't need to remove ALL the cards to win.  It psychologically makes "winning" feel much more within reach if you don't have to clear every card in order to do it, because you still have choices at the end. <br><br></td></tr></table><br>
<a name="1240957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate solitaire games now... apart from they make me money... so here I go again... :/ <br><br></td></tr></table><br>
<a name="1240965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> GfK - I've only played solitaire/patience in "real life" and the odd game on Microsoft's solitaire that came with Windows NT but there were many occasions where either through my own decision or the simple ordering of the cards that no further progress could be made and the problem could not be "solved".  <br><br>i've not played yours or any of the modern casual solitaire clones but I suppose if I were to describe "winning" it would be the same as "solving" a patience/solitaire deck to its perfect completion.  <br><br>Is that not what winning is in casual solitaire games? <br><br></td></tr></table><br>
<a name="1240977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I hate solitaire games now... apart from they make me money... so here I go again... :/  <br></div>Really?  I've worked on nothing but solitaire games since 2010.  I am completely and utterly pig bloody sick of it.<br><br>I do have another solitaire game half-finished that I started with that guy who bailed out half way thru, but I don't think my sanity is going to take any more solitaire.<br><br>If I do anything else it will have to a complete diversion.<br><br><div class="quote"> Is that not what winning is in casual solitaire games?  <br></div>No, and it's kind of a big deal to casual gamers.  They don't like to lose, so you can't let them lose.  They need to be made to feel like they're winning ALL the time, hence why most games have tons of trophies and achievements and God knows what else. <br><br></td></tr></table><br>
<a name="1240978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks GfK....your description of the casual gamer reminds me of when I was a school teacher where "everyone's a winner baby" .. <br><br></td></tr></table><br>
<a name="1240979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's completely true.  I swear if casual gamers were playing board games, nine games out of ten they'd flip the table. <br><br></td></tr></table><br>
<a name="1241013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://suyts.files.wordpress.com/2013/10/image589.png"> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
