<!DOCTYPE html><html lang="en" ><head ><title >What's wrong with this? [MYSQL]</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What's wrong with this? [MYSQL]</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >What's wrong with this? [MYSQL]</a><br><br>
<a name="1075943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
$sql="INSERT INTO skin (ID, name, desc, authname, dl, datetime) VALUES (NULL, '$_POST[name]', '$_POST[desc]', '$_POST[authname]', '0', '$datetime');";
$result=mysql_query($sql);
</pre><br><br>I'm getting a nice fat:<br><br>"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc, authname, dl, datetime) VALUES (NULL, 'sdfsdf', 'Enter your Description...' at line 1 "<br><br>What's going on? it must be something stupidly simple. <br><br></td></tr></table><br>
<a name="1075990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> One posibility could be that it could be the datetime field in the skin table isnt compatbile becourse datetime is also a value type. <br><br></td></tr></table><br>
<a name="1075996"></a>

<a name="1075997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, try quoting the datetime column.<br><br>*EDIT*<br>Better yet, rename the column to something descriptive.  what does it represent (i.e. last_login, last_downloaded, last_modified, date_created)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tri|Ga|De</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use HeidiSQL to test my SQL agains a MySQL database.<br>Its very helpfull. <br><br></td></tr></table><br>
<a name="1076043"></a>

<a name="1076045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it's not the date time name check that you're sanitizing your input values. Looks like you're taking the raw post value, if it contains control or restricted characters (such as apostrophes, quotes, etc.) you will have big input handling problems as well as massive security holes (a properly formatted description field could for example wipe your whole database...)<br><br>SQL tends, by default, though it can be configured otherwise, to auto escape input (which has it's own problems) nothing else does. And it's auto escape isn't as good as a normal SQL escape call... One thing I've had to do is actually strip the escapes and then re escape them to get proper safety checks, and even that has a few holes (though generally they just cause errors with intentionally malformed content, not full security holes...)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Always use prepared statements...  then you don't need to worry about the content of the data you are inserting.<br><br>Things like this : '$_POST[name]' <br>can allow arbitrary access to all kinds of things you really don't want to know about! <br><br></td></tr></table><br>
<a name="1076087"></a>

<a name="1076088"></a>

<a name="1076089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was left over from me trying to simplify things as much as possible to find the bug. Here's the updated version; I changed datetime to posttime in the database, but it's still spitting errors out:<br><br><pre class=code>
$name = mysql_real_escape_string($_POST['name']);
$desc = mysql_real_escape_string($_POST['desc']);
$authname = mysql_real_escape_string($_POST['authname']);
$datetime=date("Y-m-d H:i:s"); //create date time
$sql="INSERT INTO skin (name, desc, authname, dl, posttime) VALUES ('$name', '$desc', '$authname', '0', '$datetime')";
$result=mysql_query($sql);
</pre><br><br>Here are the datatypes:<br>ID - PRIMARY, AUTO INC, int(11)<br>name - varchar(255)<br>desc - varchar(255)<br>authname - varchar(255)<br>dl - int(11)<br>posttime - datetime<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did it really let you create a table with a column called 'desc' ? <br><br></td></tr></table><br>
<a name="1076156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yahfree</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! That was the problem, can't believe i missed that. It was shorthand for "description" :o<br><br>Thanks Brucey, I knew it was something stupid! <br><br></td></tr></table><br>
<a name="1076158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, desc is also a command (for sorting in descending order), never spotted that one. <br><br></td></tr></table><br>
<a name="1076355"></a>

<a name="1076357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use desc (or anything you like) if you wrap it in []s (at least you can in MSSql)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> MySQL &lt;&gt; MSSql<br><br>... thankfully :-) <br><br></td></tr></table><br>
<a name="1076388"></a>

<a name="1076389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grab a copy of SQLyog. Btw, try &amp; catch are your friends.<br><br>Be really careful when using names that are reserved by MYSQL : <a href="http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html" target="_blank">http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1076405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @brucey, yeah i know ;P but can you not box your fields/records to stop them being confused with keywords as well? <br><br></td></tr></table><br>
<a name="1076412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> In MySQL you can also do `desc` if you have a column named the same as a command. <br><br></td></tr></table><br>
<a name="1076416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can quote them, but really, you shouldn't name your columns after keywords.  For the same reason you shouldn't name variables or functions after existing keywords <br><br></td></tr></table><br>
<a name="1076454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Common sense dictates you don't name anything after keywords :-)<br><br>Unless laziness trumps common sense? <br><br></td></tr></table><br>
<a name="1076457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been guilty of it myself, but it's due to ignorance rather than laziness.  And it got corrected as soon as I found out. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
