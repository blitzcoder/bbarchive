<!DOCTYPE html><html lang="en" ><head ><title >ways to write if and or parenthesis (for the same</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ways to write if and or parenthesis (for the same</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >ways to write if and or parenthesis (for the same</a><br><br>
<a name="1299337"></a>

<a name="1299338"></a>

<a name="1299339"></a>

<a name="1299357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ways to write if and or parenthesis (for the same logic)<br><br>Hello, :)<br><br>Here is a small test writing the same logic but in different ways (Blitz3d or BlitzPlus) :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D(640,480,32,2)

TRef% = 0
TList$ = ""

If( TRef = 0 And TList = "" Or TList = "LEV" )
 DebugLog("here1")
EndIf 

If( TRef = 0 ) And ( TList = "" Or TList = "LEV" )
 DebugLog("here2")
EndIf 

If( TRef = 0 And TList = "" ) Or ( TRef = 0 And TList = "LEV" )
 DebugLog("here3")
EndIf 

WaitKey()

End()
</textarea><br>All seem to work well, however i prefer the way 3 because i find it more clear.<br><br>How would you write the same logic and why write it this way ? <br><br></td></tr></table><br>
<a name="1299347"></a>

<a name="1299348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would use the #2 (without () at the TRef part), simply because you save 1 comparison.<br>The Second reason is, if you want to change TRef to 1, you would need to do it on both sides (on case 3) and this would mean, 1 useless step. <br><br></td></tr></table><br>
<a name="1299350"></a>

<a name="1299351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally, i find the #1 confusing... <br><br>using And can be considered like another if() isn't it ?<br>for example, #1 is the same as #2 yes ? no ? <br><br></td></tr></table><br>
<a name="1299356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would prefer style 2 which seems to express the idea more naturally. Style 1 is not the same logic. <br><br>You have three conditions:<br><br>TRef = 0<br>TList = ""<br>TList = "LEV"<br><br>Let's give them names A,B,C each of which can be True or False. Note True and False are just names for 1 and 0.<br><br>There are eight different configurations. We can test them all with your three versions.<br><br>If the three tests were equivalent then the only results would 000 and 111. As you can see this is not the case when A is False and C is True.<br><br><pre class=code>Graphics3D 640,480,0,2 
SetBuffer FrontBuffer()

For A = 0 To 1
	For B = 0 To 1
		For C = 0 To 1
		
			results$ = " ABC = " + A + B + C + "   results = "
			If A And B Or C
				results = results + "1"
			Else
				results = results + "0"
			EndIf 
			
			If A And ( B Or C )
				results = results + "1"
			Else
				results = results + "0"
			EndIf 		
			
			If ( A And B ) Or ( A And C )
				results = results + "1"
			Else
				results = results + "0"
			EndIf 

			Print results
						
		Next
	Next
Next

WaitKey
</pre> <br><br></td></tr></table><br>
<a name="1299358"></a>

<a name="1299359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes i see the difference now.<br>#2 and #3 are the same logic, #1 is not.<br>but what can be confusing is writing #1 like this :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D(640,480,32,2)

TRef% = 0
TList$ = ""

If( TRef = 0 And TList = "" Or TRef = 0 And TList = "LEV" )
 DebugLog("here1")
EndIf 

If( TRef = 0 ) And ( TList = "" Or TList = "LEV" )
 DebugLog("here2")
EndIf 

If( TRef = 0 And TList = "" ) Or ( TRef = 0 And TList = "LEV" )
 DebugLog("here3")
EndIf 

If( ( TRef = 0 And TList = "" ) Or ( TRef = 0 And TList = "LEV" ) )
 DebugLog("here4")
EndIf 

WaitKey()

End()
</textarea><br>which could be the same wanted logic than #3 or #4 but apparently is not recognized as the same... <br><br></td></tr></table><br>
<a name="1299361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another test<br><pre class=code>Graphics3D 640,480,0,2 
SetBuffer FrontBuffer()

For A = 0 To 1
	For B = 0 To 1
		For C = 0 To 1
		
			results$ = " ABC = " + A + B + C + "   results = "
			If A And B Or A And C
				results = results + "1"
			Else
				results = results + "0"
			EndIf 
			
			If ( ( A And B ) Or A ) And C 
				results = results + "1"
			Else
				results = results + "0"
			EndIf 		
			
			If ( A And B ) Or ( A And C )
				results = results + "1"
			Else
				results = results + "0"
			EndIf 

			Print results
						
		Next
	Next
Next

WaitKey
</pre><br>The first two are equivalent but the third is not. It differs in a single case, ABC = 110.<br><br>The problem is that And has the same precedence as Or. I would expect it to be higher since And,Or are analogous to Multiplication,Addition.<br>But Blitz3D goes its own way.<br><br>Unfortunately the Blitz Basic Language Reference is not online. You can find it in IDE. The preference table is on the Expressions page. <br><br></td></tr></table><br>
<a name="1299366"></a>

<a name="1299367"></a>

<a name="1299368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The problem is that And has the same precedence as Or. I would expect it to be higher since And,Or are analogous to Multiplication,Addition.<br>But Blitz3D goes its own way.<br> <br></div><br>Yes it is probably better to separate every different logical test with parentheses, just to be sure... <br><br></td></tr></table><br>
<a name="1299380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always force my precendence (regardless of language) like:<br><pre class=code>
If not Tref
	If TList = "" Or TList = "LEV" doStuff()
Endif
</pre><br>More readable to me in this case as well, since all comparisons need Tref to be 0. <br><br></td></tr></table><br>
<a name="1299394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flanker512</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Cocopino, and this way is useful because you can add an ElsIf statement for every step you check.<br><br>Also, I remember a code recently in the code archives (check a point in a polygon shape), it worked fine but quite slow, someone rewrote the If ElseIf statements a more clever way and performances improved by almost a factor of 2. <br><br></td></tr></table><br>
<a name="1326226"></a>

<a name="1326227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> the correct way to write this is to consider the OR like a separate if()<br>like this :<br><pre class=code>
Graphics3D(640,480,32,2)

TRef% = 0 ; 0
TList$ = "" ; "" or "LEV"

If( TRef = 0 And TList = "" ) Or ( TRef = 0 And TList = "LEV" )
 DebugLog("here")
EndIf 

WaitKey()

End()
</pre> <br><br></td></tr></table><br>
<a name="1326333"></a>

<a name="1326334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the correct way to write this is to consider the OR like a separate if() <br></div><br>The correct way depends on what you are trying to achieve and your own style (or the style required by the company you are working for).<br><br>For performance, it is better to write it like this<br>If TRef = 0 And (TList = "" Or TList = "LEV")<br><br>Your version will require four comparisons while my version will require three.  With BlitzMax, the difference is greater as comparisons stop as soon as the program can determine the rest.  For example, if TRef = 1, then TList will not need to be evaluated.<br><br>The BlitzMax code below will show how the checks are done by calling a function for each check.  You can clearly see that My version out performs yours in every single combination<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Global Checks:Int = 0

Function TRefFun:Int(s:Int)
	Checks :+ 1
	Print "TRef tested = "+s
	
	Return s
End Function

Function ListFun:String(s:String)
	Checks :+ 1
	Print "List tested = "+s
	
	Return s
End Function

Function Test1(TRef:Int, List:String)
	Checks = 0
	Print "If (TRef = 0 And List = ~q~q) Or (TRef = 0 And List = ~qLEVq)"
	If (TRefFun(TRef) = 0 And ListFun(List) = "") Or (TRefFun(TRef) = 0 And ListFun(List) = "LEV")
		Print "Pass"
	Else
		Print "Fail"
	End If
	Print "Total Checks = "+Checks
End Function

Function Test2(TRef:Int, List:String)
	Checks = 0
	Print "If TRef = 0 And (List = ~q~q or List = ~qLEV~q)"
	If TRefFun(TRef) = 0 And (ListFun(List) = "" Or ListFun(List) = "LEV")
		Print "Pass"
	Else
		Print "Fail"
	End If
	Print "Total Checks = "+Checks
End Function

Local TRef:Int = 0
Local List:String = ""


Print "~nTRef = 0, List = ~q~q"
Test1(TRef,List)
Test2(TRef,List)

TRef = 1
Print "~nTRef = 1, List = ~q~q"
Test1(TRef,List)
Test2(TRef,List)

TRef = 0
List = "LEV"
Print "~nTRef = 0, List = ~qLEV~q"
Test1(TRef,List)
Test2(TRef,List)

TRef = 1
Print "~nTRef = 1, List = ~qLEV~q"
Test1(TRef,List)
Test2(TRef,List)

TRef = 0
List = "Other"
Print "~nTRef = 0, List = ~qOther~q"
Test1(TRef,List)
Test2(TRef,List)

TRef = 1
Print "~nTRef = 1, List = ~qOther~q"
Test1(TRef,List)
Test2(TRef,List)

</textarea><br><br>The resulting printout<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">TRef = 0, List = ""
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 0
List tested = 
Pass
Total Checks = 2
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 0
List tested = 
Pass
Total Checks = 2

TRef = 1, List = ""
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 1
TRef tested = 1
Fail
Total Checks = 2
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 1
Fail
Total Checks = 1

TRef = 0, List = "LEV"
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 0
List tested = LEV
TRef tested = 0
List tested = LEV
Pass
Total Checks = 4
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 0
List tested = LEV
List tested = LEV
Pass
Total Checks = 3

TRef = 1, List = "LEV"
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 1
TRef tested = 1
Fail
Total Checks = 2
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 1
Fail
Total Checks = 1

TRef = 0, List = "Other"
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 0
List tested = Other
TRef tested = 0
List tested = Other
Fail
Total Checks = 4
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 0
List tested = Other
List tested = Other
Fail
Total Checks = 3

TRef = 1, List = "Other"
If (TRef = 0 And List = "") Or (TRef = 0 And List = "LEVq)
TRef tested = 1
TRef tested = 1
Fail
Total Checks = 2
If TRef = 0 And (List = "" or List = "LEV")
TRef tested = 1
Fail
Total Checks = 1
</textarea><br><br>Edit to add:  If using Blitz Basic (Blitz+ or Blitz3D), Cocopino's version works best as it will save you 2 comparisons when TRef &lt;&gt; 0. <br><br></td></tr></table><br>
<a name="1326341"></a>

<a name="1326342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little tip some may not know: If the first expression of an 'And' comparison is false then the 2nd expression of it isn't even computed and the 'And' comparison doesn't take place.<br><br>The real number of comparisons taking place ( ignoring the inners of the string compares ) are<br><pre class=code>
If( TRef = 0 And TList = "" ) Or ( TRef = 0 And TList = "LEV" )
</pre><br>1. (TRef = 0<br>2. And<br>3. List = "")<br>4. Or<br>5. (TRef = 0<br>6. And<br>7. List = "LEV")<br><br>When TRef = 0 then all comparions are done - 1, 2, 3, 4, 5, 6, 7<br>When TRef &lt;&gt; 0 then 3 comparisons take place. 1, 4, 5.<br><br><br><pre class=code>
If TRef = 0 And (List = "" or List = "LEV")
</pre><br>1. TRef = 0<br>2. And<br>3. (List = ""<br>4. Or<br>5. List = "LEV")<br><br>When TRef = 0 then 1, 2, 3, 4, 5 are done<br>When TRef &lt;&gt; 0 then 1 is done<br><br><br><pre class=code>
If not Tref
	If TList = "" Or TList = "LEV" doStuff()
Endif
</pre><br>1. not Tref<br>2. TList = ""<br>3. Or<br>4. TList = "LEV"<br><br>When Tref = 0 then 1, 2, 3, 4 are done<br>When Tref &lt;&gt; 0 then 1 is done <br><br></td></tr></table><br>
<a name="1326343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> not sure if these rules are the same for all languages, but in doubt, if you have an error in your code and you don't know the cause, you may want to try to debug your if() which contains AND/OR because sometimes what you have written seems logical but the language may interpret it differently (depending on where you put the parenthesis) <br><br></td></tr></table><br>
<a name="1326361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you'll find that the 'And' rule applies to pretty most programming languages, yes. It's been a standard form of optimisation from day one of compiler birth.<br>The concept is that if the first expression is false there's no point in checking the second expression on account that the whole 'And' expression would be false already. <br><br></td></tr></table><br>
<a name="1326431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz3D does not short-circuit the evaluation, so all comparisons are evaluated.  BlitzMAX will short-circuit once it can be determined if the If statement will pass or fail.<br><br>So in BlitzMax, you can check if a handle exists before doing something with it like so<br><b>If Image And Image.Width &gt; Image.Height then ...</b><br>If Image = Null, then BlitzMax will never attempt to read the Width and Height fields.  But in Blitz3D<br><b>If Image And Image\Width &gt; Image\Height Then...</b><br>Will result in an error if Image doesn't point to a valid handle as all terms will be evaluated.  In that case, you would need Col's third version to keep the checks safe.<br><b>If Image<br>   If Image\Width &gt; Image\Height Then...<br>EndIf</b> <br><br></td></tr></table><br>
<a name="1326435"></a>

<a name="1326436"></a>

<a name="1326437"></a>

<a name="1326438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Blitz3D does not short-circuit the evaluation <br></div><br>Ahh cool, good to know! A bad assumption on my part.<br><br>I was under the impression that all languages did the 'And' optimisation. Of the BRL family of languages I only use Blitzmax and BlitzmaxNG. All other languages that I use don't evaluate the second expression if the first one fails and, as you say, Blitzmax* doesn't do it either.<br><br><div class="quote"> you would need Col's third version to keep the checks safe <br></div><br>*passes credit to Cocopino* <br><br></td></tr></table><br>
<a name="1326440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never combine And and Or simply because it is so easily to introduce errors due to misinterpreting the precedence or incorrect brackets.<br><br>Actually I avoid using Then unless it's a single line (single statement even, I avoid : too)<br>And furthermore, I can't abide ElseIf as well.<br><br>Any situation where there may be (perceived or otehrwsie) potential ambiguity I like to eradicate it entirely.<br><br>Therefore I try to opt for a long-winded and verbose approach.<br><br><pre class=code>
If (Condition1)
	If (Condition2)
		If (Condition3)
			;123
		Else
			;1,2
		End If
	Else
		If (Condition3)
			;1,3
		Else
			;1
		End If
	End If
Else
	If (Condition2)
		If (Condition3)
			;2,3
		Else
			;2
		End If
	Else
		If (Condition3)
			;3
		Else
			; 0
		End If
	End If
End If
</pre><br><br>The intention of course should always reflect the coder's preference and requirements. For me I want to be able to see the clauses expanded and specific so I can narrow down quickly and easily either  to make changes or track down bugs.<br>Whilst there may be slight optimisation benefits I think these are possibly far less critical so long as the overall approach is methodical. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
