<!DOCTYPE html><html lang="en" ><head ><title >Pathfinding in AHOG game</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pathfinding in AHOG game</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >Pathfinding in AHOG game</a><br><br>
<a name="1205859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi again,<br><br>I really have to implement a hint system in my adventure hidden object game. If you are not familiar with it, what this means:<br><br>1. the player is somewhere in the game in a random scene and have no idea what to do next<br>2. he is pressing the Hint button<br>3. based on a path, the game must show him where to go next.<br><br>the idea is not to tell him: "go to the bedroom 2". i must guide him from scene to scene using some arrows.<br><br>i never worked with path finding algorithms so what should I use? any easy to learn/understand mechanic?<br><br>thanks, <br><br></td></tr></table><br>
<a name="1205864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't think you'd need pathfinding per se, for that.<br><br>What I would do is have an index for each room.  Within that index, is the <b>initial</b> step you need to take to get to "bedroom 2".  So, let's say you're in the conservatory.  The index for the conservatory says to get to bedroom 2, you need to exit the screen at the left side.  This step takes you into the kitchen.<br><br>In the kitchen, the index says that to get to Bedroom two, the initial step you need to take is exit screen top - to go to the hallway.<br><br>In the hallway, top click again, upstairs to the landing.<br><br>From the landing, exit screen right to Bedroom 2.<br><br>You would of course have to build the indices manually but I would think that's fairly trivial. <br><br></td></tr></table><br>
<a name="1205885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi GFK,<br><br>I have like 84 scenes in the game. More than half are sometimes during the game... 'a hint target room'.<br><br>Using your system, I have to put in every hotspot from ALL my 84 scenes paths to the other rooms...  pretty trivial indeed. <br><br></td></tr></table><br>
<a name="1205887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it might be a lot.  But I don't think there's any other way, given that your locations don't exist in any structured form, which rules out any regular pathfinding technique you might have been able to use.<br><br>I still think the indices method is the way to go, and I can't think of any way of automating the setup just now.  Unless there was some way you could make a hidden "2d" version of your game world (a bunch of nodes, with a pre-calculated distance between each), and based the path finding off of that somehow. <br><br></td></tr></table><br>
<a name="1205888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends on a few things.<br><br>Are the exits for each scene always just at the edges i.e. top,down,left and right?<br><br>If you laid all the scenes down flat on a 2D grid and would that placement represent the true physical structure of the whole game world?<br><br>If you can satisfy the above then you could automate pathfinding for each scene.<br><br>If not then all you have are lots of unconnected locations which don't exist in any structured form e.g. a grid or as 2d or 3d points in a world and as such it's not possible to automate pathfinding without hard coding some extra information into each scene first. <br><br></td></tr></table><br>
<a name="1205889"></a>

<a name="1205890"></a>

<a name="1205892"></a>

<a name="1205893"></a>

<a name="1205896"></a>

<a name="1205897"></a>

<a name="1205915"></a>

<a name="1205916"></a>

<a name="1205917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br>There may be several ways to do what you want. <br>I deduced the following:<br><br>Your level is a network of rooms. Since you can have a room leading to several other rooms (not only through common doors, but secret passages etc.), we cannot use a 2D or 3D grid to represent this network (and thus we cannot use the A* algorithm, which takes physical distance between nodes as a measurement of the cost of travel).<br><br>Therefore, just imagine an abstract network of linked nodes. Each node in this network is a room, and each node has links that connect this node to the other nodes it can lead to. Each link represents a portal (a door, a passage etc.) in your game through which the player travels between rooms.<br><br>- - - - -<br>There's some preprocessing required:<br><br>1) You need to identify and collect all 'terminating nodes'. These are nodes that only have ONE link, so they are at the "tips" of branches.<br><br>2) After having identified all terminating nodes, go through each terminating node and start building 'sections'. To do this, you begin at a terminating node and start travelling its single link, adding and NUMBERING the nodes you encounter on your way. For numbering, the first terminating node has the lowest index, 'zero', and the last node you encounter (another terminating node, which is the other end of the section) will have the highest index for this section.<br>Each node with more than TWO links you encounter while building a section indicates a branch, and thus a new section needs to be created - if while building a section you reach a node with three links, for example, you build an extra section structure, populate it with the nodes that were previously travelled, then travel one link until you find an end (the first section), and then get back and travel the other link until you find the other end (the second section).<br>Nodes with two links are normal intermediary nodes, since they come from a node and go to another node (two links). It's nodes with more than two links that indicate a branching.<br>To recognize the ends of sections, you either reach another terminating node or you reach a REPEATED node (in the case of cyclic sections which loop).<br>For these cyclic sections, the other terminating node of it is the node that precedes a repeated node - when you head into a repeated node (one that was already added and indexed in the section), consider the previous node the terminating node of that section. This is an artifical terminating node, it isn't included in the official terminating nodes list - it only exists for the section that has it.<br>So each terminating node can belong to several sections.<br>You can delete a section when you find that its pair of terminating nodes was already used by a section previously calculated - this means the sections would be the same, just the indexing that would be reversed.<br><br>- - - - -<br>Now for the pathfinding. Everytime the player selects that "Hint" you do:<br><br>1) Get the node for the room you're in, and also get the node for the relevant room you want to travel to (each room is associated with a node, so this is just querying a Field in your Room Type). <br><br>2) Go through ALL the sections you precalculated before, and collect the ones that have both your current node, and the relevant room node.<br>If you have multiple occurrences (that is, multiple ways to arrive at the same relevant room), pick the occurrence that has the lowest DIFFERENCE between the indexes of the original node and the relevant node (this is the shortest way of all).<br><br>3) Reckon, based on the indexing of the section you picked, which direction to travel by. <br>If your current node has a bigger index than the relevant room's node's index, travel in a negative direction (that is, head to the node one index lower than your current and repeat).<br>If your current node has an smaller index than the relevant room's node's index, travel in a positive direction (head to the node one index above your current one, and repeat).<br>When I say "travel", I mean indicate by an arrow the portal object in the room that you player needs to click or interact with to go to the room that the next node represents. This will eventually have you arriving at the relevant room. <br><br></td></tr></table><br>
<a name="1205898"></a>

<a name="1205899"></a>

<a name="1205900"></a>

<a name="1205901"></a>

<a name="1205902"></a>

<a name="1205903"></a>

<a name="1205918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are some images to illustrate the process.<br><br>First you have the network of nodes for your level, each node representing a room:<br><br><img src="http://s24.postimg.org/t8dvs7i79/pathfinding_network.png"><br><br>Then you can identify the terminating nodes of this network: the ones with only one link.<br><br><img src="http://s24.postimg.org/wt9rbfmqt/pathfinding_terminating_Nodes.png"><br><br>Then you proceed to build sections. Since there are only two terminating nodes in this network, either one will cover all the sections - if there were more terminating nodes the amount of sections would increase exponentially.<br>Each branch indicates new sections that need to be created. A network like this can have several paths, especially because of that cyclic element beginning at node 2.<br>The following is a representation of how the algorithm works.<br><br><img src="http://s23.postimg.org/wlm4f1edn/pathfinding_process.png"><br><br>And then you use these sections for pathfinding like explained in part 2 of the previous post. <br><br></td></tr></table><br>
<a name="1206023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at graph algorithms. these are exactly what you're looking for. there's a ton of code floating around the web for breadth and depth first searches on graphs.<br><br>the principle for you would be that your rooms act as nodes in the graph, and the graph edges would represent those rooms that are connected to each other. Once you've set this up, running a common search algorithm like a breadth or depth first search (or both, seeing a i guess you won't need to do it more than once really) which will give you the path to the room you need. <br><br>If you gave each room on your game map a coordinate, you could write a little routine that set up the graph's connecting edges for you. easy!<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1206043"></a>

<a name="1206044"></a>

<a name="1206045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If each room is connected to at least another room, and if you want to calculate the shortest open path from one room to another room, you can use the Astar algorithm with non grid nodes. <br>However if you want the player to follow a specific path from one room to another but not necessarily the shortest path, you will have to define it manually...<br><br>If you want to calculate the shortest open path from one room to another room :<br>If you have a 2d or 3d representation of the rooms in a 2d or 3d space, you can automatically calculate the distance of each link from one passage to another passage. <br><br>If you don't have a 2d or 3d representation of the rooms in a 2d or 3d space, you can manually attribute the distance or the "cost" of each link from one passage to another passage.<br><br>Then you can use the Astar logic to automatically calculate the shortest and open path from one room to another.<br><br>It is also important to store the state of each passage (open or blocked) so that you can take a passage into account or not when you use the path calculation routine. <br><br></td></tr></table><br>
<a name="1206148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> again, this is out of my league..<br><br>i started Friday night to implement something similar. worked hard until now and have to test it.<br><br>i hope it will work <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
