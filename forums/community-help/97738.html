<!DOCTYPE html><html lang="en" ><head ><title >How to free memory associated with 3D Entities</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to free memory associated with 3D Entities</h1><a href="forums.php" >Community Forums</a>/<a href="topics.php?forum=125" >General Help</a>/<a href="#bottom" >How to free memory associated with 3D Entities</a><br><br>
<a name="1137190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I free memory associated with 3D entities prior to executing the End command? <br><br></td></tr></table><br>
<a name="1137196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're talking about Blitz3D then 'ClearWorld' will do it, or just delete the individual entities using 'FreeEntity'. The memory will get freed when the 'End' command is used also. <br><br></td></tr></table><br>
<a name="1137197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Memory associated with"?<br><br>ClearWorld will get rid of everything in the 3D scene; EndGraphics will get rid of any other graphics stuff as well. Beyond that... it's all manual. If you've got a third-party extension DLL, either it provides some relevant clear-everything method or it doesn't.<br><br>However, when your program is ending is really the one time you <i>don't</i> normally need to pay much attention to this. At the very least, the OS will reclaim all the memory it used and close open file handles and so on (only the most pathetic excuses for student-project OSen - nothing in major use at the moment - will fail to do this).<br><br>If you're still experiencing the crash-on-End problem...<br><br>1) Ensure it's End: use debug mode to print debug messages or insert Stops before everything that happens as the program ends, so you can be sure it reaches the End command<br><br>2) If you're using any DLLs, try dummying them out: just comment out your entire HUD if you're using FastImage, for instance. If the error goes away, take note of which one you removed in that stage<br><br>3) Create a new project, copy your code into the new project in chunks until it reproduces the error<br><br>4) If all else fails and you have a pure-B3D project that definitely crashes on the End command that can be reproduced by creating it anew... it's a B3D bug<br><br>While you should eventually also check things like media if you can't find the problem before then, this would still point to a B3D bug as it <i>should</i> have no trouble unloading anything it was able to load in the first place.<br><br>You;ve probably already thought of this stuff, but eh. <br><br></td></tr></table><br>
<a name="1137222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> At the very least, the OS will reclaim all the memory it used and close open file handles and so on <br></div><br>This is a very important point.<br>No need to free client-allocated memory if you're going to terminate your application right after; leave it to the OS. <br><br></td></tr></table><br>
<a name="1137256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yasha &amp; Zethrax - thank you for the suggestions, will run through that when I get home at the weekend. <br><br></td></tr></table><br>
<a name="1140296"></a>

<a name="1140297"></a>

<a name="1140298"></a>

<a name="1140299"></a>

<a name="1140300"></a>

<a name="1140301"></a>

<a name="1140302"></a>

<a name="1140303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yasha, thankyou for the suggestion - I inserted a few DebugLog commands (never used those before - not even sure how they work - didn't quite get that far) however, it NOW QUIT s WITHOUT ERRORING.<br><br>Woo hoo! I can only presume the debuglog commands are letting whatever wasn't getting a chance to finish... finish.  (:D<br><br>Blitz 3D rocks ;)<br><br><img src="http://www.wishingwellsoftware.co.uk/quitting_Nice.jpg"><br><br><br>That was, until I created an executable - oh well. I am trying a debug compile now and interestingly I am getting Array Index out of bounds, before it even starts to render - however within the executable it just 'coped' with it.<br><br>So, turns out I'd one 3D and one 4D array, the first I incremented to 4d and seems to be okay. Been doing this so long can't recall how I  hung it together anyways ;)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1140351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> never used those before - not even sure how they work - didn't quite get that far <br></div><br><br>If you run in Debug mode (naturally), the Debug Window that shows your code when you pause the program also has an "empty" tab. DebugLog simply prints text to this tab. It's mainly more useful than Print because, like a file, it persists without you having to redraw it every frame (and without affecting the appearance of your application), and you can dump huge amounts of <i>formatted</i> text (newlines work!), and you can select-all and copy to a text editor to store the data for later if it's important.<br><br><br><div class="quote"> the executable it just 'coped' with it. <br></div><br><br>One of the reasons Debug mode is a) useful and b) slow: it includes bounds-checks on both arrays and banks. In Release mode, array and bank accesses are just unchecked memory offsets... and doing these into empty space is always unpredictable (it's entirely dependent on what the background memory management system has decided to do with that empty space - often, as you've found, it will be misleadingly "safe" because the space is still part of the main available block for the application).<br><br><br><div class="quote"> Blitz 3D rocks ;) <br></div><br><br>Blitz3D's debugger was one of its awesome killer features back when it was new (everyone has them <i>now...</i>)! Along with excellent documentation, it's pretty much why I got into it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
