<!DOCTYPE html><html lang="en" ><head ><title >Timescale</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='Keep things moving in realtime regardless of framerate and lag, language=bb, category=Algorithms'><meta name='author' content='Streaksy'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=6>Algorithms</a>/Timescale</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="2663.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >Timescale by Streaksy</td><td align="right">2010 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> Put SyncLagScale in your main loop, and multiply every movement by Timescale#, and it'll move fluidly.  I've found this extremely useful.  It's an alternative to using frame-limitting timers.<br><br>You can even use SetTimeScale(s#) to control the speed of time.<br><br>Enjoy &gt;D<br><br>(Code archive contribution #4) </td></tr><tr ><td class="cell"><pre class="code">Global TimeScale#,LagScale#,TimeScaleMul#=1,TimeScaleLastTime ;TIMESCALING
Global TimeScaleLibPresent=1


Function SyncLagScale()
tim=MilliSecs()
timepassed#=tim-TimeScaleLastTime
If TimeScaleLastTime=0 Then lagscale=1 Else lagscale=(timepassed/1000)*50
TimeScaleLastTime=tim
timescale=lagscale*timescalemul:If timescale&gt;6 Then timescale=6
If timescale&gt;20 Then timescale=1  ;okay thats alot... lets treat it like a delay rather than an example of framerate
End Function

Function SetTimeScale(s#)
timescalemul=s
End Function</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>2010</font></td></tr></table></td></tr><tr ><td class="posttext"> I've been thinking for a while about doing something like this in a game - any frame rate would be supported and lag would be accounted for, which would be very useful in multiplayer games in that computers stay in sync despite one computer lagging more than the other.<br><br>I was going to comment on how you should limit the scaling, but I see that you've already accounted to this.  <br><br>Nicely done and useful.  Thanks for posting. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Streaksy</td><td align="right"><font class=tiny>2010</font></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again serpent =D <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
