<!DOCTYPE html><html lang="en" ><head ><title >Number from a poisson distribution</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='Returns a random number from a Poisson distribution with given mean, language=bmx, category=Algorithms'><meta name='author' content='Warpy'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=6>Algorithms</a>/Number from a poisson distribution</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="2321.bmx">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >Number from a poisson distribution by Warpy</td><td align="right">2008 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> quoth wikipedia, <br>"In probability theory and statistics, the Poisson distribution is a discrete probability distribution that expresses the probability of a number of events occurring in a fixed period of time if these events occur with a known average rate and independently of the time since the last event. The Poisson distribution can also be used for the number of events in other specified intervals such as distance, area or volume.<br>....<br>The parameter lambda is not only the mean number of occurrences, but also its variance. "<br><br><br>This is a little function that returns a random number from a poisson distribution with mean value that you provide. You might want to use this for things such as randomly emitting objects, population growth, or anything that either might happen or might not happen at any instant in time. </td></tr><tr ><td class="cell"><pre class="code">Function poisson(lambda!)
	If lambda&gt;500 Return poisson(lambda/2)+poisson(lambda/2)
	k=0
	u!=Rnd(0,1)
	fact=1
	p!=Exp(-lambda)
	u:-p
	While u&gt;0
		k:+1
		fact:*k
		p:*lambda/k
		u:-p
	Wend
	Return k
End Function


'  example - draws a graph of the proability density function
Local counts[20]
For i=0 To 1000
	p=poisson(5)
	If p&lt;20
		counts[p]:+1
	EndIf
Next

Graphics 800,800,0
For i=0 To 19
	DrawRect i*40,0,40,counts[i]
	Print counts[i]
Next
Flip
WaitKey()</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>2008</font></td></tr></table></td></tr><tr ><td class="posttext"> edit: added a recursion thing at the start of the function to cope with precision errors: exp(-lambda) gets rounded to zero somewhere around lambda=750 <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>2008</font></td></tr></table></td></tr><tr ><td class="posttext"> This is getting a little esoteric for the Blitz forums.<br><br>For the "very big lambda" case you might instead implement a function to return a random number from a Normal distribution, with given mean and variance. That's a Gaussian distribution for the physicists in the crowd.<br><br>Then a Normal distribution with mean and variance both equal to a large lambda should a very good approximation of Poisson. If you do implement this you might want to test that assertion. I think it's true, but it has been rather a long time since I studied this stuff. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>2008</font></td></tr></table></td></tr><tr ><td class="posttext"> Good point, I'd forgotten about that. And I think poisson approximates a binomial distribution, if I can remember what little stats I did at uni.<br>I think I'll write up a series of these, each calling the next one up when the numbers get too big. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>2008</font></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This is a little function that returns a random number from a poisson distribution with mean value that you provide. You might want to use this for things such as randomly emitting objects, population growth, or anything that either might happen or might not happen at any instant in time. <br></div>But it will still have to rely on a random number in the first place, as it will output the same values for the same mean each time.<br><br>We have to seed our random function, and even if we seed it with another random number to a trillion it would still have a pattern.<br><br>If only random was truly random... ;) <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>2008</font></td></tr></table></td></tr><tr ><td class="posttext"> ... what?<br><br>Are you saying I need to say pseudorandom? Let it go, man. <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
