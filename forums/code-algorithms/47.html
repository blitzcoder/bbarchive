<!DOCTYPE html><html lang="en" ><head ><title >FloatString</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='float to string conversion with n decimal points, language=bb, category=Algorithms'><meta name='author' content='skidracer'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=6>Algorithms</a>/FloatString</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="47.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >FloatString by skidracer</td><td align="right">2001 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> float to string conversion with n decimal points </td></tr><tr ><td class="cell"><pre class="code">Function FloatString$(f#,dp=2)
	a$=Int(f*(10^dp))
	l=Len(a$)
	If l<=dp a$=Right$("000000",dp+1-l)+a$
	Return Left$(a$,Len(a$)-dp)+"."+Right$(a$,dp)
End Function

</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >barryem</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> This might be a little simpler and a little faster depending on the internals of the compiler<br><br>Call it with either:<br>print using$(number, decimals)<br>or<br>text x,y, using$(number, decimals)<br><br>; n# is the number to convert<br>; dec is the number of decimal places wanted<br>Function using$(n#, dec)<br>	s$ = Str$ n#<br>	t$ = Left$(s$, Len(s$) - Instr(s$, ".")+ dec -1)<br>	Return t$<br>End Function<br><br>Does anyone know the internals of Blitz3D enough to know if this sort of thing is faster or slower than calling a function in a DLL, assuming the function in the DLL is itself fairly effecient?<br><br>Or, maybe more to the point, is Blitz3D fast enough with little stuff like this that we don't have to care most of the time?<br><br>Barry <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Strings are slow in b3d, so almost defintely faster to to pass it on to a .dll.<br><br>Your above example, you need to enclose function pars that return a value within brackets, otherwise they'll return 0,"". () <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Barry, I think he has not done it like that because Blitz does not show the full floating point accuracy when it converts to a string, and it also may use exponential format, i.e. 5.121218 will convert to "5.12122" and 0.00001 will convert to "1.e-005", which you may not want. (Well in fact exponential format might be useful for storing floats in strings or text files (XML perhaps) if it was accurate but it is subject to the same rounding effects). <br><br>Blitz float to string conversion does not deal with large numbers, which are still well within the 23 bit range of the mantissa, very well either. Try Print Float(1048577) for instance.  More pointless rounding.<br><br>Skidracers routine needs fixing to deal with larger numbers and small negatives though, like -0.00001 for instance.<br><br>Here is a similar effort from me intended to display a number in a fixed field size with leading spaces centred on the decimal point, which (cough) was not working too well either.  Hopefully fixed now though.  Max number is still limited to what will be stored in an Int, but it calculates the fractional part separately. <a href="/codearcs/codearcs.php?code=34" >Format$ (number,digits [,places])</a><br><br><div class="quote"> <br>Or, maybe more to the point, is Blitz3D fast enough with little stuff like this that we don't have to care most of the time? <br> <br></div><br>Indeed. <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
