<!DOCTYPE html><html lang="en" ><head ><title >Is In Triangle 2D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='Check if point is inside triangle, language=bb, category=Algorithms'><meta name='author' content='Difference'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=6>Algorithms</a>/Is In Triangle 2D</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="483.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >Is In Triangle 2D by Difference</td><td align="right">2002 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> Check if point is inside triangle </td></tr><tr ><td class="cell"><pre class="code">; by Charles H. Giffen from
; http://groups.google.com/groups?selm=3784B03B.F1CCF05D%40virginia.edu&amp;oe=UTF-8&amp;output=gplain
; Blitz Port by Peter Scheutz

Function IsInTriangle ( px#,py#, ax#,ay#,bx#,by#,cx#,cy# ) 

	Local bc#,ca#,ab#,ap#,bp#,cp#,abc#

	bc# = bx*cy - by*cx 
	ca# = cx*ay - cy*ax 
	ab# = ax*by - ay*bx
	ap# = ax*py - ay*px
	bp# = bx*py - by*px
	cp# = cx*py - cy*px
	abc# = Sgn(bc + ca + ab)

	If (abc*(bc-bp+cp)&gt;0) And (abc*(ca-cp+ap)&gt;0) And (abc*(ab-ap+bp)&gt;0) Then Return True
End Function</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Here is an example.<br><br><pre class=code>Graphics 800,600,0,2


x1#=50
y1#=50

x2#=150
y2#=50


x3#=70
y3#=350



SetBuffer BackBuffer()

Color 255,255,255

While Not KeyHit(1)
	
	Cls
	
	Line x1,y1,x2,y2
	Line x3,y3,x2,y2
	Line x1,y1,x3,y3
	
	x#=MouseX()
	y#=MouseY()
	
	
	If IsInTriangle(x,y,x1,y1,x2,y2,x3,y3)
		
		Text 10,10,"Inside"
		
	Else
		
		Text 10,10,"-"
		
	EndIf
	
	
	
	Flip
	
Wend


End


; by Charles H. Giffen from
; <a href="http://groups.google.com/groups?selm=3784B03B.F1CCF05D%40virginia.edu&amp;oe=UTF-8&amp;output=gplain" target="_blank">http://groups.google.com/groups?selm=3784B03B.F1CCF05D%40virginia.edu&amp;oe=UTF-8&amp;output=gplain</a>
; Blitz Port by Peter Scheutz

Function IsInTriangle ( px#,py#, ax#,ay#,bx#,by#,cx#,cy# ) 

	Local bc#,ca#,ab#,ap#,bp#,cp#,abc#

	bc# = bx*cy - by*cx 
	ca# = cx*ay - cy*ax 
	ab# = ax*by - ay*bx
	ap# = ax*py - ay*px
	bp# = bx*py - by*px
	cp# = cx*py - cy*px
	abc# = Sgn(bc + ca + ab)

	If (abc*(bc-bp+cp)&gt;0) And (abc*(ca-cp+ap)&gt;0) And (abc*(ab-ap+bp)&gt;0) Then Return True
End Function</pre> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, very useful. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for <b>isinTriangle</b>....<br>Here is some related code I found (in "C") for finding whether a point is inside a polygon of any number of corners :<br><br>sourcepage --&gt; <a href="http://alienryderflex.com/polygon/" target="_blank">http://alienryderflex.com/polygon/</a><br><br>[ Fast "Point in PolyGon" code by author <b>Lascha Lagidse</b> ]<br><pre class=code>
//  Globals which should be set before calling this function:
//
//  int    polyCorners  =  how many corners the polygon has (no repeats)
//  float  polyX[]      =  horizontal coordinates of corners
//  float  polyY[]      =  vertical coordinates of corners
//  float  x, y         =  point to be tested
//
//  (Globals are used in this example for purposes of speed.  Change as
//  desired.)
//
//  The function will return YES if the point x,y is inside the polygon, or
//  NO if it is not.  If the point is exactly on the edge of the polygon,
//  then the function may return YES or NO.
//
//  Note that division by zero is avoided because the division is protected
//  by the "if" clause which surrounds it.

bool pointInPolygon() 

{
  int   i, j=polyCorners-1 ;
  bool  oddNodes=NO      ;

  for (i=0; i&lt;polyCorners; i++) {
    if ((polyY[i]&lt; y &amp;&amp; polyY[j]&gt;=y
    ||   polyY[j]&lt; y &amp;&amp; polyY[i]&gt;=y)
    &amp;&amp;  (polyX[i]&lt;=x || polyX[j]&lt;=x)) {
      if (polyX[i]+(y-polyY[i])/(polyY[j]-polyY[i])*(polyX[j]-polyX[i])&lt;x) {
        oddNodes=!oddNodes; }}
    j=i; }

  return oddNodes; 
}</pre><br><br><br>[ Here’s a pre-calcuation efficiency improvement provided by <b>Patrick Mullen</b>. This is useful if you have many points that need to be tested against the same (static) polygon: ]<br><pre class=code>//  Globals which should be set before calling these functions:
//
//  int    polyCorners  =  how many corners the polygon has (no repeats)
//  float  polyX[]      =  horizontal coordinates of corners
//  float  polyY[]      =  vertical coordinates of corners
//  float  x, y         =  point to be tested
//
//  The following global arrays should be allocated before calling these functions:
//
//  float  constant[] = storage for precalculated constants (same size as polyX)
//  float  multiple[] = storage for precalculated multipliers (same size as polyX)
//
//  (Globals are used in this example for purposes of speed.  Change as
//  desired.)
//
//  USAGE:
//  Call precalc_values() to initialize the constant[] and multiple[] arrays,
//  then call pointInPolygon(x, y) to determine if the point is in the polygon.
//
//  The function will return YES if the point x,y is inside the polygon, or
//  NO if it is not.  If the point is exactly on the edge of the polygon,
//  then the function may return YES or NO.
//
//  Note that division by zero is avoided because the division is protected
//  by the "if" clause which surrounds it.

void precalc_values() 
{
  int   i, j=polyCorners-1 ;

  for(i=0; i&lt;polyCorners; i++) {
    if(polyY[j]==polyY[i]) {
      constant[i]=polyX[i];
      multiple[i]=0; }
    else {
      constant[i]=polyX[i]-(polyY[i]*polyX[j])/(polyY[j]-polyY[i])+(polyY[i]*polyX[i])/(polyY[j]-polyY[i]);
      multiple[i]=(polyX[j]-polyX[i])/(polyY[j]-polyY[i]); }
    j=i; }}

bool pointInPolygon() {

  int   i, j=polyCorners-1 ;
  bool  oddNodes=NO      ;

  for (i=0; i&lt;polyCorners; i++) {
    if ((polyY[i]&lt; y &amp;&amp; polyY[j]&gt;=y
    ||   polyY[j]&lt; y &amp;&amp; polyY[i]&gt;=y)) {
      oddNodes^=(y*multiple[i]+constant[i]&lt;x); }
    j=i; }

  return oddNodes; 
}</pre><br>Sorry it's all in "c" code, but maybe someone can transform it into Blitz3D.   :)<br><br>============================================================<br><font class="tiny"> Here are related links :: <br><br>NerdParadise : Determining if a Point is in a Triangle<br><a href="http://www.nerdparadise.com/math/geometry/pointinatriangle/" target="_blank">http://www.nerdparadise.com/math/geometry/pointinatriangle/</a><br><br>TotoLogic BlogSpot : Accurate point in triangle test<br><a href="http://totologic.blogspot.fr/2014/01/accurate-point-in-triangle-test.html" target="_blank">http://totologic.blogspot.fr/2014/01/accurate-point-in-triangle-test.html</a><br><br>StackOverFlow : Count points inside triangle fast<br><a href="http://stackoverflow.com/questions/14757920/count-points-inside-triangle-fast" target="_blank">http://stackoverflow.com/questions/14757920/count-points-inside-triangle-fast</a><br><br>StackOverFlow : How to determine if a point is in a 2D triangle?<br><a href="http://stackoverflow.com/questions/2049582/how-to-determine-if-a-point-is-in-a-2d-triangle" target="_blank">http://stackoverflow.com/questions/2049582/how-to-determine-if-a-point-is-in-a-2d-triangle</a><br></font> <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
