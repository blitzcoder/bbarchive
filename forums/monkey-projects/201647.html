<!DOCTYPE html><html lang="en" ><head ><title >MonkeyMax - BlitzMax Target</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MonkeyMax - BlitzMax Target</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=511" >Monkey Projects</a>/<a href="#bottom" >MonkeyMax - BlitzMax Target</a><br><br>
<a name="2015330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Continuing from this post:<br><a href="http://www.monkeycoder.co.nz/Community/posts.php?topic=1573" target="_blank">http://www.monkeycoder.co.nz/Community/posts.php?topic=1573</a><br><br>But more an "offical" project now ;)<br><br>This is the first part of the BlitzMax Target - meaning it only currently translates Monkey code - <b>NOT</b> Mojo! So <b>no</b> graphics stuff yet!<br><br>Instructions:<br><br>1. Grab the zip file from here:<br><a href="http://www.therevillsgames.com/monkey/MonkeyMax/MonkeyMax.zip" target="_blank">http://www.therevillsgames.com/monkey/MonkeyMax/MonkeyMax.zip</a><br><br>2. Back up your Monkey Folder!! The zip will replace several files, including Trans, config.winnt.txt etc!<br><br>3. Extract the zip file into your Monkey Folder<br><br>4. Alter the config.winnt.txt and set your BlitzMax path - This is my config.winnt.txt so it will have removed all your paths... Thats why I told you to back up your Monkey Folder in Step 2!<br><br>5. Run Monk.exe and open the bmaxTest.monkey file<br><br>6. Click Run and select BMAX<br><br>7. Hopefully it will now output a heap of stuff in the console - this is the BlitzMax program running!!<br><br>I've done a heap of testing and it seems okay... Arrays still need work, but meh! <br><br></td></tr></table><br>
<a name="2015325"></a>

<a name="2015324"></a>

<a name="2015328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wahay :D Glad to see this is going well <br><br></td></tr></table><br>
<a name="2015348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ???? Besides using DirectX on Widnows then, what would be the use for it? <br><br></td></tr></table><br>
<a name="2015355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice work Mr T!<br><br>Dabz <br><br></td></tr></table><br>
<a name="2015368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what would be the use for it <br></div><br><br>A lot of the current Monkey coders are from a Blitz background, having a BlitzMax target means that they should be able to debug the code themselves using BlitzMax tools.<br><br>Also since BlitzMax is very stable I feel it would be a better alternative than the current GLFW target. <br><br></td></tr></table><br>
<a name="2015377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DruggedBunny</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... and you could do a more configurable/adaptable/desktop-friendly port with the same game converted to BlitzMax. <br><br></td></tr></table><br>
<a name="2015387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great stuff! Well done :) <br><br></td></tr></table><br>
<a name="2015390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ???? Besides using DirectX on Widnows then, what would be the use for it? <br></div><br>I consider it a Windows / Mac / Linux friendly target that I know will work. I've had little to no luck with GLFW and XNA when releasing for windows. <br><br></td></tr></table><br>
<a name="2015406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neuro</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is awesome :)! <br><br></td></tr></table><br>
<a name="2015463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b><u>MojoMax News:</u></b><br><br><b>Good News:</b><br>I've got a sprite displaying on the screen \o/<br><br><b>Bad News:</b><br>BlitzMax OO hurts!! BlitzMax's inheritance doesn't properly kick in until the constructor chain is complete... which means I have to change mojo's app.monkey, I did not want to do this!<br><br>This is the generated BlitzMax code using the standard app.monkey:<br><pre class=code>Type bb_MyGame Extends bb_App 
	Method  bb_MyGame_new:bb_MyGame()
		Super.bb_App_new();
		Return Self;
	EndMethod</pre><pre class=code>Type bb_App 
	Method  bb_App_new:bb_App()
		bb_device=(New bb_AppDevice).bb_AppDevice_new(Self);
		Return Self;
	EndMethod</pre><pre class=code>Type bb_AppDevice Extends gxtkApp
	Method  bb_AppDevice_new:bb_AppDevice(bbt_app:bb_App)
		Self.bb_app=bbt_app;
		bb_SetGraphicsContext((New bb_GraphicsContext).bb_GraphicsContext_new(Self.GraphicsDevice()));
		Return Self;
	EndMethod</pre><pre class=code>Type gxtkApp
..
	Method New()
		app=Self;
		ggraphics=New gxtkGraphics;
		
		'input=new gxtkInput;
		'audio=new gxtkAudio;
		
		startMillis=BlitzMaxMillisecs()
		
		'game.stage.addEventListener( Event.ENTER_FRAME,OnEnterFrame );
		
		SetFrameRate( 0 );
		
		InvokeOnCreate();
		InvokeOnRender();
		Update()
	EndMethod</pre><br>I had to add a Setup() Method to get around this:<pre class=code>Type bb_App 
	Method  bb_App_new:bb_App()
		bb_device=(New bb_AppDevice).bb_AppDevice_new(Self);
		bb_device.SetUp();
		Return Self;
	EndMethod</pre><pre class=code>Type gxtkApp
..
	Method New()
		app=Self;
		ggraphics=New gxtkGraphics;
	EndMethod
	
	Method Setup()
		
		'input=new gxtkInput;
		'audio=new gxtkAudio;
		
		startMillis=BlitzMaxMillisecs()
		
		'game.stage.addEventListener( Event.ENTER_FRAME,OnEnterFrame );
		
		SetFrameRate( 0 );
		
		InvokeOnCreate();
		InvokeOnRender();
		Update()
	EndMethod</pre> <br><br></td></tr></table><br>
<a name="2015462"></a>

<a name="2015461"></a>

<a name="2015460"></a>

<a name="2015459"></a>

<a name="2015458"></a>

<a name="2015457"></a>

<a name="2015452"></a>

<a name="2015451"></a>

<a name="2015492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to show the above problem more:<br><br><b>Java Code</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
package test;

public class Test
{
  public static void main( String s[] )
  {
    System.out.println("Start");
    new MyGame().MyGameNew();
  }
}

class MyGame extends App
{
  public MyGame( )
  {}

  public void MyGameNew( )
  {
    super.AppNew();
  }
}

class App
{
  public App( )
  {}

  public void AppNew( )
  {
    new AppDevice().AppDeviceNew();
  }
}

class AppDevice extends GxtkApp
{
  public void AppDeviceNew( )
  {}

  public void Update( )
  {
    System.out.println("AppDevice - Update");
  }
}

class GxtkApp
{
  public GxtkApp( )
  {
    Update();
  }

  public void Update( )
  {
    System.out.println("GxtkApp - Update");
  }
}
</textarea><br><br>When you run the above Java code it will print out:<pre class=code>Start
AppDevice - Update</pre><br><br><b>BlitzMax Code</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Print "Start"

New MyGame.MyGameNew()

Type MyGame Extends App
	Method MyGameNew()
		Super.AppNew()
	EndMethod
EndType

Type App
	Method AppNew()
		New AppDevice.AppDeviceNew()
	EndMethod
EndType

Type AppDevice Extends GxtkApp
	Method AppDeviceNew()
	EndMethod
	
	Method Update()
		Print "AppDevice - Update"
	EndMethod
EndType

Type GxtkApp
	Method New()
		Update()
	EndMethod
	Method Update()
		Print "GxtkApp - Update"
	EndMethod
EndType
</textarea><br><br>This code outputs:<pre class=code>Start
GxtkApp - Update</pre><br><br>You see it actually calls the incorrect Update method!! Is this a bug with BlitzMax!? <br><br></td></tr></table><br>
<a name="2015491"></a>

<a name="2015490"></a>

<a name="2015489"></a>

<a name="2015488"></a>

<a name="2015487"></a>

<a name="2015486"></a>

<a name="2015507"></a>

<a name="2015508"></a>

<a name="2015509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could potentially get around this by making your types a base Abstract type and then the real type (ie accessed from translated monkey code) is extended. EG<br><br>monkey<pre class=code>Class apple
	Method func()
	End
End</pre>blitzmax<pre class=code>Type appleBase Abstract
	Method func() Abstract
End Type

Type apple Extends appleBase
	Method func()
	End Method
End Type</pre>I dont even know if the targets translation code allows this, but it's what I usually have to do in max to get inherited methods to work "properly" in this scenario. I always wondered if it was a blitzmax bug or by design? <br><br></td></tr></table><br>
<a name="2015504"></a>

<a name="2015505"></a>

<a name="2015506"></a>

<a name="2015536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Skn3: I always wondered if it was a blitzmax bug or by design? <br></div><br>Personally I think it's just poor OO design.  See this post by FlameDuck as to why this kind of thing is dangerous:  <a href="http://monkeycoder.co.nz/Community/post.php?topic=1534&amp;post=14007" target="_blank">http://monkeycoder.co.nz/Community/post.php?topic=1534&amp;post=14007</a> <br><br></td></tr></table><br>
<a name="2015639"></a>

<a name="2015640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you reckon essentially it shouldn't be allowed ? Or did I misunderstand? <br><br></td></tr></table><br>
<a name="2015594"></a>

<a name="2015809"></a>

<a name="2015810"></a>

<a name="2015811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sprites frames now work :)<br><br>And I've got DrawText to work... I had the translator wrong - opps! <br><br></td></tr></table><br>
<a name="2015833"></a>

<a name="2015834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've checked in MonkeyMax and the start of MojoMax into the Diddy Repository.<br><br>To get MojoMax to work you need to do a few things:<br><br>Copy the mojo monkey files to the mojomax module folder and alter app.monkey:<br><br>Add "Method SetUp()" to Class gxtkApp="gxtkApp"<br><br>And change the App Class' New method:<br><pre class=code>Class App
  	Method New()
 		device=New AppDevice( Self )
 		device.SetUp()
 	End
</pre><br><br>And comment out the input and audio stuff...<br><br><a href="http://code.google.com/p/diddy/source/browse/#svn%2Ftrunk%2Fmonkeymax" target="_blank">http://code.google.com/p/diddy/source/browse/#svn%2Ftrunk%2Fmonkeymax</a> <br><br></td></tr></table><br>
<a name="2015832"></a>

<a name="2015933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow looking good, keep it up! <br><br></td></tr></table><br>
<a name="2018693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teremochek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Compile error"<br>local bbt_l:String=((bbt_lhs) as bb_StringObject).bb_value;<br>I'm doing wrong? <br><br></td></tr></table><br>
<a name="2018697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheRedFox</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is great! You efforts motivated me to have a look at all the trans module and dig in deeper :-)<br><br>Mark really did a great job... Wow.<br><br>From the tokenizer code and so on, it would be interesting to get a code beautifier. JungleIDE doesn't do it (yet) even if they parse everything.<br><br>Is there anybody out there who started one? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
