<!DOCTYPE html><html lang="en" ><head ><title >Threading</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Threading</h1><a href="forums.php" >Monkey Archive Forums</a>/<a href="topics.php?forum=511" >Monkey Projects</a>/<a href="#bottom" >Threading</a><br><br>
<a name="2027395"></a>

<a name="2027397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, I made a threading module for Monkey.  It's essentially a clone of POSIX threads, so go read up on Mutexes and CondVars.<br><br>Checked into Diddy repository (but a separate module):<br><a href="http://code.google.com/p/diddy/source/browse/#svn%2Ftrunk%2Fsrc%2Fthreading" target="_blank">http://code.google.com/p/diddy/source/browse/#svn%2Ftrunk%2Fsrc%2Fthreading</a><br><br>Example:<br><a href="http://code.google.com/p/diddy/source/browse/trunk/examples/Threading/threadTest.monkey" target="_blank">http://code.google.com/p/diddy/source/browse/trunk/examples/Threading/threadTest.monkey</a><br><br>Currently supported targets:<br>MonkeyMax! :)<br>GLFW (Windows and Mac)<br>stdcpp (untested)<br>iOS<br>Android<br><br>TODO:<br>HTML5 (tricky, but I might be able to with web workers)<br>XNA (once I bother to learn threading in .NET)<br><br>Never TODO:<br>Flash, because it doesn't support threading.<br><br>Go go beta test!<br><br>Edit: The feature table in the comments of threading.monkey got messed up with tab characters.  I'll fix it with the next commit. <br><br></td></tr></table><br>
<a name="2027394"></a>

<a name="2027392"></a>

<a name="2027393"></a>

<a name="2027401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Samah, great stuff! <br><br>Would threading solve the input lag problem on ios devices when using vblank?<br><br>BTW, for a future project I may need my app to stay on the background and show an alert sometimes. I have not looked in to it myself yet, but any help (paid if needed) on the subject would be appreciated.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="2027409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Playniax: Would threading solve the input lag problem on ios devices when using vblank? <br></div><br>Can't say I've heard of that, could you elaborate a bit?<br><br>Also I've looked at cancelling threads on Android (using thread.interrupt()) and it kind of works... I'm a little worried about mutexes though since they're only ever unlocked by the developer and would be left locked if the thread were cancelled.  Might be able to remedy this if Mark adds exceptions (and a finally block). <br><br></td></tr></table><br>
<a name="2027416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://stackoverflow.com/questions/10202259/cadisplaylink-causes-the-lag-between-touchesbegan-and-touchesended" target="_blank">http://stackoverflow.com/questions/10202259/cadisplaylink-causes-the-lag-between-touchesbegan-and-touchesended</a><br><br>You can find a bunch of stuff about this cadisplaylink and input lag on google.<br><br>So nothing on keeping your Monkey app on the background for alerts? :) <br><br></td></tr></table><br>
<a name="2027417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Monkey app on the background for alerts?  <br></div><br>What type of alerts? Do you mean notifications? If so you don't keep your app "awake", iOS receives a notification for your app and starts it (if you want) automatically. <br><br></td></tr></table><br>
<a name="2027501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Implemented cancelling threads for Android.  Not sure how I'm going to do the other targets (if I can).  We'll see once XNA is done. <br><br></td></tr></table><br>
<a name="2027504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Playniax</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills: Not sure yet. I am still waiting for details for the app but what I do know is that it needs to notify the user from time to time with information using location data and network / database stuff and I would love to use Monkey for it. I think it's better to await more details before I do more posts about it :) Thanks! <br><br></td></tr></table><br>
<a name="2027512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skn3</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Samah are you sure your not Brucey in disguise :D<br><br>good stuff! <br><br></td></tr></table><br>
<a name="2027517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hahah nah... he's been surprisingly absent from the Monkey scene. :) <br><br></td></tr></table><br>
<a name="2027546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This could be useful for loading images and loading save game files while making sure the phone doesnt think the game has crashed right? <br><br></td></tr></table><br>
<a name="2027550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Samah</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, but I'm not sure if you'll be able to preload images in a separate thread.  You can load the data into system memory, but I think piping it to the GPU memory will need to be done on the rendering thread still.  Give it a shot! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
