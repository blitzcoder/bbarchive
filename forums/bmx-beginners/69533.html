<!DOCTYPE html><html lang="en" ><head ><title >Reading from file (2 problems)...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Reading from file (2 problems)...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Reading from file (2 problems)...</a><br><br>
<a name="778064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ryan Burnside</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello again<br><br>I'm midway through writing a conversion program that takes an Anim8or file and converts it to an Open GL list. Currently I'm having two problems,<br><br>1. I need tot vertexes to be stored as they are written in the text file. I really have no choice I have to convert the strings into floating values. The accuracy is terrible some of them have up to 3 tenths off. I've heard that bmax can't handle converting a string to float even if the float string is well within the length of a float.<br><br>Do I really need to iterate through values in the string and add the proper values to a base float?<br><br>Aka string ="35.678"<br><br> 30.0<br>   5.0<br>     .600<br>     .07<br>+   .008<br>--------------<br> 35.678<br><br>My next question I save all vertexes to a two dimensional array. I don't know how big the global array has to be when i start the program. Only after the user selects and reads a file do I know how big to make the array. The array is three indicies wide (x,y,z) and I don't know height because the array point numbers vary. <br><br></td></tr></table><br>
<a name="778071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've heard that bmax can't handle converting a string to float even if the float string is well within the length of a float. <br></div><br>Don't know where you heard that. I convert back and forth between floats and strings all the time, and it works fine.<br><br>I wasn't sure what part of the second question was a question so I just stuck to the first one. <br><br></td></tr></table><br>
<a name="778075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think he's asking "How do you read data into an array when you don't know how big the array is going to be".<br><br>That being the case, I'd suggest using a TList.  You can then use TList.ValueAtIndex() to operate the TList in the same way you'd use an array. <br><br></td></tr></table><br>
<a name="778076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the IDE, goto Help -&gt; Language -&gt; Strings.<br><br>In the list of methods is ToFloat()<br><br>which you use something like :<br><pre class=code>
Local s:String = "6.45"

Local f:Float = s.ToFloat()

</pre> <br><br></td></tr></table><br>
<a name="778077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The array is three indicies wide (x,y,z)  <br></div><br>Create yourself a type :<br><pre class=code>
Type TVertex
    x:Float
    y:Float
    x:Float
End Type
</pre><br>and as Gfk suggests, store them in a List. You can always convert this to an Array when you are finished building it. <br><br></td></tr></table><br>
<a name="778149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ryan Burnside</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I didn't know you can directly access elements of a list without using a for loop and iterator. Solved. :)<br><br><br>When I read in numbers from files they get messed when read as floats...<br><br>ex<br>-14.532<br><br>becomes<br><br>-14.5299997<br><br>I've had worse results too. The number -14.532 can be represented by a float can't it? <br><br></td></tr></table><br>
<a name="778154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know why you'd get that. I get -14.5319996 which is pretty decent.<br><br>I also don't get the use of String.ToFloat(). It must just be me because a lot of people seem to use it, but I always just preferred :<br><br><pre class=code>
Local s:String= "6.45"
Local f:Float=Float(s)
</pre> <br><br></td></tr></table><br>
<a name="778200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ryan Burnside</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would appear that I had an issue with the space tokens in my files. All correct now. Thanks for all the help.<br><br>A new problem arises:<br><br>I have saved all my point objects to a handy dandy array but    point_list.valueatindex(index:int)     returns an Object not a point...<br><br><br>I get the following error:<br><br>"unable to convert 'Object' to 'point' " <br><br></td></tr></table><br>
<a name="778210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> try casting it.<br><pre class=code>
point = TPoint(point_list.valueatindex(index:int))
</pre> <br><br></td></tr></table><br>
<a name="778212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ryan Burnside</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh that seems to work! It's odd you have to cast the objects. <br><br></td></tr></table><br>
<a name="778507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is very common on non COM based objects. If you're a Visual Basic 6 programer, it can seem strange to you, but it makes the language faster, becouse the program doesn't have to deal with interfaces at runtime.In fact, not doing this would force the language to provide a late binding mechanism, and this always speed down performance and increases programs memory usage. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
