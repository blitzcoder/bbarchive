<!DOCTYPE html><html lang="en" ><head ><title >Memory Leaks - How Can You Tell?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory Leaks - How Can You Tell?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Memory Leaks - How Can You Tell?</a><br><br>
<a name="767272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. Have read a lot recently about memory leaks and often see 'fixed minor memory leak' listed in update feature lists. How can I tell if my programme is causing a memory leak? Am I correct in believing leaks only occur if I declare and allocate an object (ie. pixmap, image, imagefont, stream etc.) but don't set it to Null and call GCCollect when I'm done? <br><br></td></tr></table><br>
<a name="767274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. Leaks also occur when you allocate external memory, not managed by GCC and don't free it again. You may not be doing this, of course.<br><br>Incidentally, you don't normally have to "set it to null" to destroy an object. You just have to stop using it, remove it from a container, or let it go out of scope. If you have cyclic references ( two objects both of which reference each other ) then you will need to manually null one to break the cyclic dependency and allow one ( then the other will automatically follow ) to be collected. <br><br></td></tr></table><br>
<a name="767288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How can I tell if my programme is causing a memory leak? <br></div>Leave it running over night. If your machine grinds to a halt, and starts thrashing on the harddrive like mad, that's a good sign. <br><br></td></tr></table><br>
<a name="767295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go for the brute force eh FlameDuck? :)<br><br>@Chalky:<br>You could also look to see if you've duplicated your variables... that is you create an object identical to another object but keep both in memory needlessly. <br><br></td></tr></table><br>
<a name="767338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gabriel:<br>I haven't yet reached the lofty heights of allocating external memory so don't have to worry about that! Forgive me for asking (I'm pretty new to Max) but does 'out of scope' mean creating an object inside a function, but not destroying it before exiting the function? If I do this kind of thing, does Max automatically execute GCCollect when a programme terminates? <br><br></td></tr></table><br>
<a name="767342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Forgive me for asking (I'm pretty new to Max) but does 'out of scope' mean creating an object inside a function, but not destroying it before exiting the function? <br></div><br>You can't destroy objects any more, so the second part of that question is somewhat redundant. But yes, if you create a new object and put it into a local variable, where the variable is local to a function, then the object will no longer be reachable when you exit the function and the GC will ( sooner or later ) collect it, and free your memory. <br><br></td></tr></table><br>
<a name="767348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent. Thanks. <br><br></td></tr></table><br>
<a name="767350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here you go:<pre class=code>SuperStrict

Function doStuff()
	Local i:Int = 45 ' Creates an Integer i which has Local scope to the dostuff() function.
	For Local a:Int = 0 Until 10 ' Creates an Integer a which has Local scope to the For loop.
		i:+a
	Next
	
	' a is now out-of-scope (no longer accessable) and is garbage collected.
	Print i
EndFunction

' i is now out-of-scope, and is garbage collected.

doStuff()</pre>Now I realize it's not the best example in the world, but I think it illustrates the principle of scope  fairly well. It also doesn't do that whole recursive reference thing that is the bane of the BlitzMAX GC model. <br><br></td></tr></table><br>
<a name="767358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chalky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Best example in the world or not - it's a very good illustration - thanks FlameDuck. <br><br></td></tr></table><br>
<a name="767448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paposo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>GCC not manage correctly de ciclic references. <br>If you have two object and the object A reference  B and the object B reference A, is good way for make a memory leak.<br><br>Bye,<br>   Paposo <br><br></td></tr></table><br>
<a name="767483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> BMax Help Home/Welcome Page&gt;Tutorials and Articles&gt;BlitzMax Memory Management <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
