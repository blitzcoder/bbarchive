<!DOCTYPE html><html lang="en" ><head ><title >First hello and problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >First hello and problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >First hello and problem</a><br><br>
<a name="810581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm now slowly trying out BlitzMAX as I believe my next game will be created in this language. <br>Already (of course) I'm stumbling into problems and am thinking if you could just point out what am i doing wrong here cause I just don't get the thing with dynamic arrays.<br>I have 3 different types here and in the 3rd (TPond) I'm trying to write a normal Create function but it just won't let me create an array of objects on the fly. What am i doing wrong? The errormessage I receive is: "Unable to convert from 'TSquare Array' to 'TSquare Array'"<br><br><pre class=code>
Type TObject Abstract 
	Const CTILE = 1
	Field Mesh
	Field Typ
	Field X
	Field Y
End type

Type TSquare Extends TObject
	Field Obj:Object
End Type

Type TPond
	Const MaxSquareWidth = 80
	Const MaxSquareHeight = 20
	Field Squares:TSquare[]
	
	Function Create:TPond(SqWidth,SqHeight)
		Local Temp:TPond=New TPond
		Temp.Squares=New TSquare[SqWidth,SqHeight]
	End function
End Type
</pre> <br><br></td></tr></table><br>
<a name="810582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> God, I'm sorry for starting up that low and bad. I found the solution myself just seconds after so it's fixed. The syntax should be :<br><br>Temp.Squares = New TSquare[SqWidth,SqHeight]<br><br>It didn't like to have thise brackets afterwards. <br><br></td></tr></table><br>
<a name="810585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;beaten to it&gt; <br><br></td></tr></table><br>
<a name="810587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah.. thanks I changed my question slightly but I did miss out the 2D 'comma'. <br>Thanks a lot Nomen. <br>I think I will enjoy BlitzMAX even more than B3D<br><br>*edit* <br>Now this was a confusing first post, I agree. Nomen, you helped me out before you erased it though. I did 2 mistakes in the code and you showed me the second problem. Now it's all fixed and I can go on making more mistakes. Thanks <br><br></td></tr></table><br>
<a name="810590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem at all. Not even sure if the comma in the brackets is the right way to denote a 2D array. <br><br></td></tr></table><br>
<a name="810592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It gives that errormessage in first post if it isn't there so at least it works properly. <br><br></td></tr></table><br>
<a name="810593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does that work?<br><br>I would have thought that as Temp isnt returned or stored anywhere, that it would be GC'ed.<br><br>If you are moveing from B3D, types arent automaticly put onto a list, so the New TPond stops existing when control leaves Create <br><br></td></tr></table><br>
<a name="810600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, well I hadn't come to that part yet as i was trying out the initiating of the array. Yes, of course the Temp-object will be returned. Still it's really tricky this type of handling objects. <br>Now I'm stuck on another thing (as predicted). Hope I'm not a pain in the ass but I guess you can just stop answering me if I am. Here it goes, this is what it looks like now:<br><pre class=code>
Type TObject Abstract 
	Const CTILE = 1
	Field Mesh
	Field Typ
	Field X
	Field Y
End type


Type TTile Extends TObject
	
	Field Letter
	
	
	Function Create:TTile(letter=0)
		Local Temp:TTile
		If Letter=0 Then Letter = Rand(65,80)
		Temp = New TTile
		Temp.Letter = Letter
		Temp.Typ = CTILE
		Return Temp
	End Function

End Type
Type TSquare
	Const CTILE = 1,CWATER = 0

	Field Obj:Object
	Field SqTyp%
End Type



Type TPond
	Const MaxSquareWidth% = 80
	Const MaxSquareHeight% = 20
	Field Squares:TSquare[,]
	Field SqWidth%
	Field SqHeight%
	
	Function Create:TPond(SqW,SqH)
		'Creates an empty pond. Returns a Pondobject.
		Local Temp:TPond=New TPond,n,m
		If SqW &gt; MaxSquareWidth Then SqW = MaxSquareWidth
		If SqH &gt; MaxSquareHeight Then SqH = MaxSquareHeight
		Temp.SqWidth = SqW
		Temp.SqHeight = SqH
		Temp.Squares=New TSquare[SqWidth,SqHeight]
		
		'Sets water in all Squares
		For n = 0 To SqWidth-1
			For m = 0 To SqHeigth-1
				Temp.Squares[n,m].SqTyp = 0
			Next
		Next
		
		Return Temp 
	End function
	
	Method AddObject(Obj:Object,x,y)
		Self.Squares[x,y].SqTyp = Obj.Typ
		Self.Squares[x,y].Obj = Obj
	End Method
	
End Type
</pre><br><br>I'm trying to make this as easy as possible. I have this basic foundational Type called TObject that has basic fields telling what kind of object it is and a handleholder for a mesh (don't ask). <br>The TPond-type is basically an array containing Squares. Each Square can contain any extended object from the basic TObject Type. Now in the last Method in TPond I'm trying to use fields from the basic TObject as I know only Objects extended from the TObject will wind up there. <br>This doesn't seem to work<br>Must I write an Add-function for every extended Type from TObject even if I'm just using fields from the basic TObject??<br><br>Edit: To clarify my question. I don't know WHAT Type of object will be passed into the AddObject Method, but I do know that all those objects will be extended from the Basic TObject and therefor I know all of them will have a Field called Typ.<br>Still trying to reach the field with Obj.typ will render an error. What do I do? Write Add for each Type that will be passed as a parameter? <br><br></td></tr></table><br>
<a name="810602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paposo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>The method AddObject get parameter Obj:Object<br>The type Object not contain field Typ<br>The correct declaration is Obj:TObject<br><br>Note: You write code plus debugable if you use the directive:<br>SuperStrict. Is unvaluable this directive!!!!<br><br>Bye,<br>   Paposo <br><br></td></tr></table><br>
<a name="810603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand, but will that actually work? I mean I will pass objects that are not of the type TObject but several different extended types from the TObject. <br><br></td></tr></table><br>
<a name="810615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> God this really is hard to get your head arund, not even the simpliest code seem to work. Can you please guys take a look at this and don't mind the above:<br><pre class=code>
Type TSquare
	Const CTILE = 1,CWATER = 0
	
	Field Obj:TObject
	Field SqTyp%
End Type



Type TPond
	Const MaxSquareWidth% = 80
	Const MaxSquareHeight% = 20
	Field Squares:TSquare[,]
	Field SqWidth%
	Field SqHeight%
	
	Function Create:TPond(SqW,SqH)
		'Creates an empty pond. Returns a Pondobject.
		Local Temp:TPond=New TPond,n,m
		If SqW &gt; MaxSquareWidth Then SqW = MaxSquareWidth
		If SqH &gt; MaxSquareHeight Then SqH = MaxSquareHeight
		Temp.SqWidth = SqW
		Temp.SqHeight = SqH
		Temp.Squares= New TSquare[SqW,SqH]
		
		' Sets SqTyp to 0 in all Squares
		For n = 0 To SqW-1
			For m = 0 To SqH-1
				Temp.Squares[n,m].SqTyp = 0
			Next
		Next
		
		Return Temp 
	End Function
	
End Type
</pre><br><br>The last rows in the Create Function that says <br><pre class=code>Temp.Squares[n,m].SqTyp = 0</pre> just don't seem to work and complains about trying to access a field of a NULL-object, but I just created those objects with Temp.Squares= New TSquare[SqW,SqH], didn't I????<br>Help please! <br><br></td></tr></table><br>
<a name="810637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AJirenius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Making it clearer: what is WRONG with the code below?<br><pre class=code>
Type SmallFighter
	Field Name$
End Type


Type Cruiser
	' This Type got an array holding SmallFighter in it.
	Field Hangar:SmallFighter[]
	
	
	' This Function below takes one argument (number of Smallfighters in the array) and then returns a cruiser with that array.
	
	Function CreateCruiser:Cruiser(NrShip)
		Local Temp:Cruiser = New Cruiser
		Temp.Hangar = New SmallFighter[NrShip]
		Return Temp
	End Function
	
		
End Type

' Program starts here where I create a Cruiserobject with name Mothership (holds 4 SmallFighters)
Local Mothership:Cruiser = Cruiser.CreateCruiser(4)

' Now I'm trying to set a name on the first fighter in the hangar. Errormessage!
' Seems like it's just a null-object
Mothership.Hangar[0].Name="Black Hawk"
</pre> <br><br></td></tr></table><br>
<a name="810664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Type SmallFighter
	Field Name:String
End Type


Type Cruiser
	' This Type got an array holding SmallFighter in it.
	Field Hangar:SmallFighter[]
	
	
	' This Function below takes one argument (number of Smallfighters in the array) and then returns a cruiser with that array.
	
	Function CreateCruiser:Cruiser(NrShip)
		Local Temp:Cruiser = New Cruiser
		Temp.Hangar = New SmallFighter[NrShip] 
		For f = 0 To NrShip-1
		   Temp.Hangar[f] = New SmallFighter
		Next
		Return Temp
	End Function
	
		
End Type

' Program starts here where I create a Cruiserobject with name Mothership (holds 4 SmallFighters)
Local Mothership:Cruiser = Cruiser.CreateCruiser(4)

' Now I'm trying to set a name on the first fighter in the hangar. Errormessage!
' Seems like it's just a null-object
Mothership.Hangar[0].Name="Black Hawk"</pre> <br><br></td></tr></table><br>
<a name="810717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but I just created those objects with Temp.Squares= New TSquare[SqW,SqH], didn't I <br></div><br>Just so you know, using New MyArray[x] or New MyArray[x, y] etc, only allocates memory for the array itself, but it does not create any of its content. You have to do that yourself.<br><br>As H&amp;K's example demonstrates, you first initialise the size of the array, and *then* populate that array with new objects.<br><br>The only kind of arrays that don't require you to do this are with "primitive" types, like Int, Float, Double, etc. Once you create an array of those, you can start using it immediately.<br><br>HTH<br><br>:o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
