<!DOCTYPE html><html lang="en" ><head ><title >ImageTile manipulation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ImageTile manipulation</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >ImageTile manipulation</a><br><br>
<a name="486104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hope someone will help me through this.<br><br>Got 50 tiles loaded into fiftytiles:Timage<br>Screen displays 1st 4 tiles. Perfect<br><br>The problem:<br>Player destroys one of the tiles as required.<br>For example tile #3.<br>How do I now get tile 1,2,4,5 to display instead of 1,2,3,4?<br><br>Thank You <br><br></td></tr></table><br>
<a name="486118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not very clear what kind of 'tile' system you have in mind by your posting, but typically I find it easiest to use a two-dimensional array to keep track of the layout of a tile-based game.<br><br>For example, you can translate your screen position (=tile) to a slot in the array, where you can keep track of which tile to draw where.<br>If there is no tile, put use a -1 or something for the value. Any time a tiles changes, you need to figure out which position it was in, and update that location in the array accordingly to reflect the new value.<br><br>If you use LoadAnimImage to load the info into your 'fiftytiles'TImage, then you can address the various tiles by their frame number.<br><br>When drawing the screen, you would do something like this:<br><br><pre class=code>
local Leveldata[15,10]

For y=0 to 9
   For x=0 to 14
      If leveldata[x,y] &lt;&gt; -1 Then
         DrawImage(fiftytiles,x*50,y*50,leveldata[x,y])
      End If
   Next
Next
</pre><br><br>The above assumes a tile width and height of 50x50. Obviously change this to reflect your tiles, and unless you want to start in the upper left corner of the screen with your tiles, add an X and Y offset to the drawimage stuff as well.<br><br>(BlitzMax has a built-in TileImage command, but since it only draws blocks of identical tiles, you will have to draw your tiles individually in this case.) <br><br></td></tr></table><br>
<a name="486143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xlsior is right, It depends on how you're using the Timages. If they are in a list and the player 'deletes' one then you run through the list again and it will display<br>1,2,4,5 as if they are 1,2,3,4...won't it? <br><br></td></tr></table><br>
<a name="486226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not exactly clear on the question either but it seems you might be thinking of using an array to store all the TImages?<br><br>Using an array you can implement a manually-controlled linked list system quite simply. All you need is a `Watermark` which is a variable to keep track of how many tiles are stored in the array (also acts as an index) and a variable to keep track of how much space the array actually has.<br><br>Let's say, you have a maximum of 50 tiles,<br><br>Local TileArray:TImage[50]<br>Local Watermark:Int=0<br>Local Space:Int=50<br><br>You load your images in and each time you add one to the TileArray[] you add it at the Watermark position (starts at 0), and increment the watermark by 1. Continue until all tiles are loaded, then Watermark should =50.<br><br>You can now use EachIn or similar to go through the array, where the last image to work on or use will be Watermark-1.<br><br>Then to remove images, you copy the highest-numbered tile in the array to the position of the tile you want to remove. Ie you overwrite the entry you want released with the highest entry, which is at Watermark-1, and decrease Watermark by 1. This auto-defragments the space in the array. Then you can again use EachIn to go through the array up to Watermark-1.<br><br>If you need to keep track of which tiles are which, if it's necessary for your engine, you might then want to maintain another array which acts as an index remapper. You give each tile a number and, at that numbered index in the ramap array (of int's) you store the number of what actual position in the Tile array it is stored at. If you don't need to know which images are representing what, you can ignore this part.<br><br>Maybe that helps, I dunno.<br><br>I am using these watermarked/auto-defragmenting arrays in my app a lot. When I need to add more items than there is space for in the array I just do array=array[..newsize] - it copies the handles to the objects to the new array, rather than copying all the object data.<br><br>You're basically maintaining a fixed space (array of 50 for example) which can be filled by different amounts of items; when you want to add an item you add it at the watermark and increase it by 1, and to remove you copy the item from watermark-1 to the item you want removed and decrease the watermark. <br><br></td></tr></table><br>
<a name="486238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior<br>Ok an array. Will do some experiments with that.<br><br>How does leveldata[x,y] equal a frame number?<br>DrawImage(fiftytiles,x*50,y*50,leveldata[x,y])<br><br>@AngleDaniel<br>Whew - now that's way over my head but I will study what you said, do some experimenting and learn some more.<br><br>I guess the original post should have included my code snippet:<br><pre class=code>
Global fiftytiles:TImage
Global x=60
fiftytiles:TImage = LoadAnimImage ("media/images/tiles.png",126,25,0,50)
Function gettiles()
     For n=0 To 3
          DrawImage fiftytiles,x,120,frame
          x:+131
          frame:+1
     Next
          frame=0
          x=60
End Function
</pre><br>If I can change the DrawImage line to:<br>DrawImage fiftytiles,x,120,tilearray[n]<br>then the rest of my problem should be an easy fix. I would change the tilearray in the function that carries out the tile destruction. (I think)<br>{edit}<br>Yes, I added this: Global tilearray[]=[0,1,2,3] and changed:<br>this - DrawImage fiftytiles,x,120,frame<br>to this - DrawImage fiftytiles,x,120,tilearray[n]<br>Yea, it's all coming together quickly now.<br>Thanks a whole bunch folks. <br><br></td></tr></table><br>
<a name="486296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How does leveldata[x,y] equal a frame number? <br>DrawImage(fiftytiles,x*50,y*50,leveldata[x,y])  <br></div><br><br>It doesn't equal a framenumber, but represents a grid that contains the relative postition for each tile.<br><br>Then the position in the array holds the framenumber of tile that should be drawn at that place.<br><br>But the best way of doing this greatly depends on exactly what it is that you're trying to accomplish and what kind of game you're writing.<br><br>If you only ever have 4 tiles in a row, remove one from the middle, and have the others slide over &amp; see a new one appear, (as I now realize you might be trying to do), things would be different. <br><br></td></tr></table><br>
<a name="486331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior<br>Yes, 4 tiles on screen. Player selects one, it goes, tiles move left as required.<br>It is working as desired now using two one dimensional arrays.<br>The first array holds the frame numbers of the 4 tiles on screen.<br>The second array holds the pointer tile frame number. <br><br></td></tr></table><br>
<a name="486558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'd probably want an array at each [x,y] location within the leveldata array.<br><br>ie each element in leveldata[x,y] points to a frames[num] array, holding the numbers of the sequence of animation frames.<br><br>You could make it a triple-dimension array, e.g.<br><br>leveldata[x,y,frame] .... like leveldata[50,50,10] - ie a map 50x50 tiles, with 10 frames of animation per tile.<br><br>Or, you could have a separate array defining the animation sequence for each tile number and just use that to decide which frame to draw. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
