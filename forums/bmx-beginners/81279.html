<!DOCTYPE html><html lang="en" ><head ><title >Why is there a delay when I play my sound?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why is there a delay when I play my sound?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Why is there a delay when I play my sound?</a><br><br>
<a name="915613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UnderwoodNullium</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is my code:<br><br>Global hit:TSound = LoadSound("hit.wav")<br>If KeyHit(key_enter)<br>  PlaySound(hit)<br>End If<br><br>The hit.wav file is almost a megabyte.  I need it to play as soon as enter is pressed, but there is always a delay when I play it, no matter what.  I press 'enter', then about half a second later it plays the sound.  What is going on?  Are there any other ways to play a sound I can try?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="915615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using Vista, by any chance?<br><br>There are several different sound drivers that you can use, and some of them have the delay you describe under certain operating systems. Switching to one of the others may fix your problem.<br><br>I don't remember the specific driver options (Directsound, OpenAL, ...?) but you may be able to find it for yourself if you search the forums a bit. <br><br></td></tr></table><br>
<a name="915619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UnderwoodNullium</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm using Vista!  Do you think you could give me a little example that shows how to use DirectSound to load and play a sound in BlitzMax?  Thanks again. <br><br></td></tr></table><br>
<a name="915629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UnderwoodNullium</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never mind I got it!  Thank you so much for your help.  I just did:<br><br>setaudiodriver("directsound") and it worked. <br><br></td></tr></table><br>
<a name="915732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> DirectSound had some stability problems on certain hardware, too.  I don't know if it still does.  I'm using OpenAL, anyway.<br><br>Its not ideal that Blitzmax doesn't have a single sound driver that works as it should on all hardware.  Nobody ever seemed to get to the bottom of it. <br><br></td></tr></table><br>
<a name="916516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it's for an important project..give bruceys FMOD wrapper a look. Once I played around with that, I had absolutely no reason to look elsewhere for any other audio solutions. Beyond streaming it supports a lot of nice jaw dropping features. <br><br></td></tr></table><br>
<a name="916522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... does that mean if it is important and you don't mind paying the fmod license fee to use it? <br><br></td></tr></table><br>
<a name="916536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Notice that KeyHit requires that the key not only be pressed down but also released before it will register as `hit`. You should otherwise test using KeyDown rather than KeyHit, maybe that's got something to do with it. <br><br></td></tr></table><br>
<a name="916567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it has anything to do with keyhit. There is *really* a 1 second delay when playing a sound on vista with the default audio driver. Choosing another driver does the trick. I'm surprised this hasn't been fixed yet to be honest. <br><br></td></tr></table><br>
<a name="917548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >767pilot</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've installed the OPENAL driver and copied the 2 dll into my project root folder.<br><br>I use the following<br><br>EnableOpenALAudio()<br><br>SetAudioDriver("openal")<br><br>yet have no sound. Same with <br><br>SetAudioDriver("directaudio").<br><br>Removing the SetAudioDriver and using the default driver gives me sound again with the delay.<br><br>This is on Vista 32 SP1 on a laptop with onboard sound. Any ideas why this would not work? <br><br></td></tr></table><br>
<a name="917557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try "OpenAL Generic Software" and "Directsound".  You need to get the correct name, as I don't think there is one simply called "OpenAL".  You can use AudioDrivers() to retrieve the names of all available drivers. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
