<!DOCTYPE html><html lang="en" ><head ><title >Question on Arrays and Memory and Question on Type</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question on Arrays and Memory and Question on Type</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Question on Arrays and Memory and Question on Type</a><br><br>
<a name="620739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Smurftra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>I have some questions regardings arrays and how the memory is used and also on types.<br><br>1) I'm using an array to store objects of a type i did myself (The type only has fields, no methods, its basicaly a C Struct or VB Type, for reference)<br><br>I want to remove element X from my array. I do this by looping the array from X to the end and then repositioning the value (So if i had 1,2,3,4 and want to remove 2, i copy 3 over 2, then 4 over 3, so i'm left with 1,3,4,4)<br><br>Then i used this:<br><br>Array = Array[..Array.Length-1]<br><br>It works. Now to my question: What happens with the last element of the array? Is it automaticaly removed from memory? If i redim the array again to Length+1, will the new element already be set to 4?<br><br>(I do not want to use a list because i want to be able to calculate mathematicaly what element i want to read/write. (Array[X*Y].Field = 0). So please dont tell me i can fix this with a list cuz it wont work for my final goal)<br><br>2) Ok, maybe someone who coded some VB can help me on my question about Types.<br><br>In VB, you can have a Type, which is like the types in BlitzMax but without methods/functions.<br><br>Then you can have classes, which is like BlitzMax's Type when there are methods in it.<br><br>So given these Types:<br><br>Type One<br> Field X:Int<br> Field Y:Int<br>End Type<br><br>Type Two<br> Field O:One[10]<br><br> Method Swap (ID1:Int, ID2:Int)<br>  Local Temp:One<br>  <br>  Temp = O(ID1)<br>  O(ID1) = O(ID2)<br>  O(ID2) = Temp<br> End Method<br>End Type<br><br><br>ok, so my method, Swap, what is it doing?<br><br>Is it simply swapping pointers, or is it actually swapping the values of the fields X and Y of my type One?<br><br>I'll rephrase because i know my english is not that good and want to make sure i'm clear:<br><br>In VB, a type without methods is like an Int, if i say A = B, the values changes, it doesnt make A point on B. That is what i want to acheive.<br><br>So, will my code work, or should i use:<br><br> Method Swap (ID1:Int, ID2:Int)<br>  Local Temp:One<br>  <br>  Temp.X = O(ID1).X<br>  Temp.Y = O(ID1).Y<br><br>  O(ID1).X = O(ID2).X<br>  O(ID1).Y = O(ID2).Y<br><br>  O(ID2).X = Temp.X<br>  O(ID2).Y = Temp.Y<br><br> End Method<br><br><br>[EDIT]<br><br>Forgot to add this: if i use Array.Length alot, is it like a variable or it calculates the length each time? (Should i store array.length in a local variable if i'm gonna use it more than once or would this cost the same on the cpu/whateverelse)<br><br>Thanks in advance for the help <br><br></td></tr></table><br>
<a name="620767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you misunderstand what slicing does.<br>A slice consists of new things, which are copies of old things.<br><br>Consider the slices in this code.<br><pre class=code>
Local a[] = [ 111,222,333,444,555 ]
Local b[]

b = a[..3]  ' a[..3] is a new array, built from copies of a[0],a[1],a[2]

b[0] = 321

Print
Print a[0]  ' check that a[] and b[] are different arrays
Print b[0]

a = a[..3]  ' a[..3] is another new array, just as with b = a[..3]

' At this point there are no references to the original five elements 
' of a[] and they are available for garbage collection.</pre> <br><br></td></tr></table><br>
<a name="620870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I want to remove element X from my array. I do this by looping the array from X to the end and then repositioning the value (So if i had 1,2,3,4 and want to remove 2, i copy 3 over 2, then 4 over 3, so i'm left with 1,3,4,4) <br></div>If you don't need the objects sorted, a quicker way is to swap the object you want to get rid of, with the last element in the array.<br><br><div class="quote"> Is it simply swapping pointers, or is it actually swapping the values of the fields X and Y of my type One? <br></div>It is simply swaping the references. <br><br></td></tr></table><br>
<a name="621120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Smurftra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for the answers<br><br>Floyd: Ok i understand now, but i think the blitz manual needs an overhaul if that is the case because it says i can redim arrays using slices<br><br>i mean, here's an example straight from the help:<br><br>Local a[200]	'initialize a[] to 200 elements<br>(...)<br>a=a[..200]	'resize a[] to 200 elements<br><br><br>so i though blitz was 'intelligent' and understood that if i use the same variable (a) i want to redim and i use a new variable (b=a[..200]) i want a copy.<br><br>So basically i'm doing it right, and the memory will be cleared at one point by blitz by itself since flushmem doesnt exist anymore?<br><br><br>Flameduck: thanks for the answer about the pointers. In my case i need the elements sorted.<br><br>Would still like an answer to this: <br><br>if i use Array.Length alot, is it like a variable or it calculates the length each time? (Should i store array.length in a local variable if i'm gonna use it more than once or would this cost the same on the cpu/whateverelse)<br><br>again thanks for the help, much appreciated. <br><br></td></tr></table><br>
<a name="621130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> the array length would not change unless you were making a new one, so probably it doesn't require a calculation more than one time per creation? <br><br></td></tr></table><br>
<a name="621186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can use array.dimensions()[0] to get its actual size (or [i] for the i-th dimension), just in case Length is not update on slicing.<br><br><br>And yes, the BM garbagecollector is now automatic and will clear unreferenced elements (this does not mean it is freed when it falls out of the array automatically. As long as it is used somewhere else it will stay active) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
