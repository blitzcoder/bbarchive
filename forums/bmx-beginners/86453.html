<!DOCTYPE html><html lang="en" ><head ><title >Accessing types within functions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Accessing types within functions</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Accessing types within functions</a><br><br>
<a name="980116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I did a forum search and couldn't find this anywhere else.  Is there a reason why you can't use a type within a function?  I've been using a book, Game Programming for Teens, and the author uses types within functions multiple times, but the code will not compile in the most recent version of BlitzMax.  Perhaps an excerpt of my code will highlight my problem:<br><br>Function CheckPenguinCollisions(penguin.x, penguin.y, tree.x, tree.y)<br>	<br>	If (ImagesCollide(penguinAnimation, penguin.x, penguin.y, 0, treeImage, tree.x, tree.y, 0))<br>		penguin.x = 400<br>		penguin.y = 300<br>	EndIf<br>End Function<br><br>Earlier in the code, in the main game loop, I call the function CheckPenguinCollisions(penguin.x, penguin.y, tree.x, tree.y).  I would like to write the function so I don't need to pass it any parameters and can just do all of my collision detection within one function.  Any help is much appreciated! <br><br></td></tr></table><br>
<a name="980118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh...<br><br>Unless the penguin is a global you will have to pass the penguin type to the function like this:<br><br><pre class=code>
Function CheckPenguinCollisions(penguin:PenguinType, tree.x, tree.y)

If (ImagesCollide(penguinAnimation, penguin.x, penguin.y, 0, treeImage, tree.x, tree.y, 0))
penguin.x = 400
penguin.y = 300
EndIf
End Function
</pre><br><br>In this case penguinAnimation would have to be a global variable but it should probably be in the penguin type like penguin.animation<br><br>Cheers <br><br></td></tr></table><br>
<a name="980119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try<br><br><pre class=code>
Function CheckPenguinCollisions(P:Penguin, T:Tree)
   If (ImagesCollide(penguinAnimation, P.x, P.y, 0, treeImage, T.x, T.y, 0))
      P.x = 400
      P.y = 300
   EndIf
End Function
</pre><br><br>I think that's what you wanted to do. I don't think your code would have been valid code in BlitzPlus either, but in BlitzMax the : operator is used to indicate the type of a variable where in BlitzPlus it was the . operator. BlitzMax does still use the . operator to access fields and methods, as I've done above. <br><br></td></tr></table><br>
<a name="980122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The code compiled but nothing seemed to happen...the penguin still passes through trees (his coordinate resets in the function is arbitrary and just to let me know it's actually doing something).  Thank you for the help guys, but do you know what might cause it to not update the coordinates?  Is it just treating everything as a local variable and then discarding the data when the function is done executing? <br><br></td></tr></table><br>
<a name="980123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that depends on whether you're using our code or you're still using your code. In your code, you're passing in some integers by value, so nothing you do to those integers will mean anything outside that function. Parameters to a function are effectively just local variables.<br><br>EG:<br><br><pre class=code>
Function DoSomething(X:Int, Y:Int, Z:Int)
End Function
</pre><br><br>Is pretty much the same as:<br><br><pre class=code>
Function DoSomething()
   Local X:Int
   Local Y:Int
   Local Z:Int
End Function
</pre><br><br>Except that those variables have a value set to them when they're parameters. But still, they're local to the function.<br><br>In my code, and to a lesser extent in _Skully's code (he hasn't made tree an object, but I have) anything you do to your penguin (or your tree in my code) will stay done because the object is passed by reference and you're still dealing with the same object. <br><br></td></tr></table><br>
<a name="980124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I apologize, I should have been more clear.  I did use essentially what you guys had just with the code updated.  So my two types are TPenguin and TTree.  And I also made penguinAnimation and treeImage global variables.  Here is the updated code:<br><br>In the main loop:<br><pre class=code>CheckPenguinCollisions(penguin:TPenguin, tree:TTree)</pre><br><br>In the function definitions:<br><pre class=code>Function CheckPenguinCollisions(penguin:TPenguin, tree:TTree)

If (ImagesCollide(penguinAnimation, penguin.x, penguin.y, 0, treeImage, tree.x, tree.y, 0))
     penguin.x = 400
     penguin.y = 300
EndIf

End Function</pre> <br><br></td></tr></table><br>
<a name="980160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Post complete runnable code and someone will be able to help. <br><br></td></tr></table><br>
<a name="980167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it's pretty long and the code was done piecemeal because it's my first game and first time programming in BASIC.  I'd be happy to answer any questions.  Thank you all for the continued help, I'm really excited about completing this.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">


'Penguin Peril - By Daniel Allen
'Note about mechanics - player can never progress past the middle of the screen.  As such, the 
'player's coordinates never increase past 410.  As the player 'pushes' against the middle of the
'screen, the illusion of motion is given by scrolling in objects from right to left

'Initialize graphics mode
Graphics(800,600)

'Center image handle
AutoMidHandle True

'Seed the timer
SeedRnd(MilliSecs())










''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'IMAGES
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''


		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Character Images
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		'Penguin's animation
		Global penguinAnimation = LoadAnimImage("penguinanimation.bmp",58,58,0,25) 'each frame is 58 x 58, start at frame 0, 25 frames total
		
		'Turtle's animation
		turtleAnimation = LoadAnimImage("turtle.bmp",76,48,0,20) ' each frame is 76 x 48, start at frame 0, 10 frames total
		
		'Drill penguin's animation
		digAnimation = LoadAnimImage("dig.bmp",25,12,0,10) ' each frame is 25 x 12, start at frame 0, 10 frames total
		drillAnimation = LoadAnimImage("drill.bmp",30,30,0,12) ' each frame is 30 x 30, start at frame 0, 12 frames total
		drillAttackAnimation = LoadAnimImage("drillattack.bmp",45,45,0,14) ' each frame is 45 x 45, start at frame 0, 14 frames total
		
		'Walrus's animation
		walrusAnimation = LoadAnimImage("walrus.bmp",88,56,0,12) ' each frame is 88 x 56, start at frame 0, 12 frames total
		
		'Snowman's animation
		snowmanAnimation = LoadAnimImage("snowman.bmp",90,90,0,24) ' each frame is 90 x 90, start at frame 0, 24 frames total
		
		'Polar bear's animation
		polarBearAnimation = LoadAnimImage("polarbear.bmp",64,70,0,20) ' each frame is 64 x 70, start at frame 0, 20 frames total
		
		'Portal animation
		'portal = LoadAnimImage("portal.png",80,128,0,12) 'each frame is 80 x 128, start at frame 0, 12 frames total
		
		
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Background Images
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		'Clouds
		clouds = LoadImage("clouds.bmp")
		'Snowy Hills
		snowyHills = LoadImage("snowyhills.png")
		'Ground
		ground = LoadImage("ground.bmp")
		'Snowflakes
		snowflakeImage = LoadImage("snowflake1.png")
		
		
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Object Images
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		'Snowballs
		snowballImage = LoadAnimImage("snowball.bmp",64,32,0,3) ' each frame is 64 x 32, start at frame 0, 3 frames total
		'Trees
		Global treeImage = LoadImage("tree.bmp") 'Image is 52 x 80 pixels, (26, 40) is the center  NOTE: (11, 63) -&gt; (39, 79) diagonal vertices for collision box
		'Rocks
		bigRockImage = LoadImage("bigrock.bmp")
		smallRockImage = LoadImage("smallrock.bmp")
		'Fireball
		fireballImage = LoadAnimImage("fireball.bmp",28,25,0,4) ' each frame is 28 x 25, start at frame 0, 4 frames total










''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'GLOBAL VARIABLES
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''


Global cloudScroll = 0
Global hillScroll = 0
Global groundScroll = 800 
Global snowflakes:TList = CreateList()
Global snowballs:TList = CreateList()
Global trees:TList = CreateList()
Global smallRocks:TList = CreateList()
Global bigRocks:TList = CreateList()
Global drillPenguins:TList = CreateList()
Global slideLength:Float = 10.0
Global slide = 0
Global canSlide = 1
Global randNum
Global isDigging = 1
Global isDrilling = 0
Global isAttacking = 0










''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'CONSTANTS
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''


Const friction:Float = 1.0










''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'TYPES
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Player Type
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		'Penguin Type
		Type TPenguin
			Field x, y		'Penguin's x,y-coordinates
			Field vx, vy	'Penguin's velocity
			Field hp		'Penguin's hit points
			Field frame		'Penguin's animation frame
		End Type
		
		'Create the penguin
		penguin:TPenguin = New TPenguin
		
		'Initialize penguin
		penguin.x = 300
		penguin.y = 400
		penguin.vx = 10
		penguin.vy = 10
		penguin.hp = 50
		penguin.frame = 3
		
		
		
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Enemy Types
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		'Turtle Type
		Type TTurtle
			Field x, y		'Turtle's x,y-coordinates
			Field vx, vy	'Turtle's velocity
			Field hp		'Turtle's hit points
			Field frame		'Turtle's animation frame
		End Type

		'Create the turtle
		turtle:TTurtle = New TTurtle
		
		'Initialize the turtle
		turtle.x = 600
		turtle.y = 550
		turtle.vx = 1
		turtle.vy = 1
		turtle.hp = 10
		turtle.frame = 0
		
		
		
		
		
		'Create the drill penguin
		drillPenguin:TPenguin = New TPenguin
		drillPenguin.vx = 10
		drillPenguin.frame = 0
		drillPenguin.hp = 5
		
		
		
		
		
		
		'Walrus Type
		Type TWalrus
			Field x, y		'Walrus's x,y-coordinates
			Field vx, vy	'Walrus's velocity
			Field hp		'Walrus's hit points
			Field frame		'Walrus's animation frame
		End Type
		
		'Create the Walrus
		walrus:TWalrus = New TWalrus
		
		'Initialize the Walrus
		walrus.x = 600
		walrus.y = 500
		walrus.vx = 2
		walrus.vy = 2
		walrus.hp = 20
		walrus.frame = 0
		
		
		
		
		
		
		'Snowman type
		Type TSnowman
			Field x, y		'Snowman's x,y coordinates
			Field hp		'Snowman's hit points
			Field frame		'Snowman's animation frame
		End Type
		
		'Create the Snowman
		snowman:TSnowman = New TSnowman
		
		'Initialize the Snowman
		snowman.x = 600
		snowman.y = 400
		snowman.frame = 0
		snowman.hp = 50
		
		
		
		
		
		'Polar bear type
		Type TPolarBear
			Field x, y		'Polar bear's x,y coordinates
			Field vx, vy	'Polar bear's velocity
			Field hp		'Polar bear's hit points
			Field frame		'Polar bear's animation frame
		End Type
		
		'Create the polar bear
		polarBear:TPolarBear = New TPolarBear
		
		'Initialize the polar bear
		polarBear.x = 600
		polarBear.y = 400
		polarBear.vx = 5
		polarBear.vy = 5
		polarBear.frame = 0
		polarBear.hp = 40





		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Object Types
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''


		'Snowflake Type
		Type TSnowflake
			Field x,y		'Snowflake's (x,y)-coordinates
		End Type
		
		'Create the snowflake
		snowflake:TSnowflake = New TSnowflake
		
		
		
		
		
		'Snowball Type
		Type TSnowball
			Field x,y
			Field frame
			Field orientation
		End Type
		
		'Create a snowball
		snowball:TSnowball = New TSnowball
		
		
		
		
		
		'Tree Type
		Type TTree
			Field x,y
		End Type
		
		'Create a tree
		tree:TTree = New TTree
		
		
		
		
		
		'Rock Type
		Type TRock
			Field x,y
		End Type
		
		'Create rocks
		bigRock:TRock = New TRock
		smallRock:TRock = New TRock
		
		
		
		
		
		
		
		
		
		
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'MAIN LOOP
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''




While Not KeyDown(KEY_ESCAPE)	'Press Esc to exit

Cls 						'Clear the screen


	'''''''''''''''''''''''''''''''''''''''''''''''''''''''	
	'Draw Images
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
	
	'Draw the clouds
	TileImage(clouds, cloudScroll, 70)
	
	'Draw the ground
	DrawImage(ground, groundScroll, 430)
	
	'Draw the hills
	For i = 0 To 10
		DrawImage(snowyHills, (i*254 + hillScroll), 180)	
	Next
	
	'If penguin reaches half-way point on screen, stop penguin from progressing and speed up scrolls	
	If penguin.x &gt;= 401
		penguin.x = 400
		cloudScroll = cloudScroll - 3
		hillScroll = hillScroll - 6
		groundScroll = groundScroll - 8
		
		'Randomly generate a tree and set its position
		randNum = Rand(1, 20)
		If randNum = 5
			tree:TTree = New TTree
			tree.x = 825
			tree.y = Rand(260, 560)
			ListAddLast(trees, tree)
		EndIf
		
		'Scroll trees in 
		For tree:TTree = EachIn trees
			tree.x = tree.x - 8
		Next
		
		'Randomly generate a rock and set its position
		randNum = Rand(1, 30)
		If randNum = 5
			bigRock:TRock = New TRock
			bigRock.x = 825
			bigRock.y = Rand(260, 560)
			ListAddLast(bigRocks, bigRock)
		EndIf
		If randNum = 15
			smallRock:TRock = New TRock
			smallRock.x = 825
			smallRock.y = Rand(260, 560)
			ListAddLast(smallRocks, smallRock)
		EndIf
		
		'Scroll rocks in 
		For bigRock:TRock = EachIn bigRocks 
			bigRock.x = bigRock.x - 8
		Next
		
		For smallRock:TRock = EachIn smallRocks 
			smallRock.x = smallRock.x - 8
		Next

			
		If groundScroll &lt; 400
			groundScroll = 800
		EndIf		
		'endportal.x = endportal.x - 8
	EndIf
	
	
	'Draw the penguin
	DrawImage(penguinAnimation, penguin.x, penguin.y, penguin.frame)
	
	
	
	'Draw the enemies
	'DrawImage(turtleAnimation, turtle.x, turtle.y, turtle.frame)
	
	DrawImage(walrusAnimation, walrus.x, walrus.y, walrus.frame)
	
	'DrawImage(snowmanAnimation, snowman.x, snowman.y, snowman.frame)
	
	'DrawImage(polarBearAnimation, polarBear.x, polarBear.y, polarBear.frame)
	
	
	
	
	
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''	
		'Snowball throwing animation and updater
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
			
			'If player hits F key and is facing right, create a new snowball, initialize it
			If KeyHit(KEY_F) And KeyDown(KEY_RIGHT) 
				snowball:TSnowball = New TSnowball
				snowball.x = penguin.x + 5
				snowball.y = penguin.y
				snowball.orientation = 1
				ListAddLast(snowballs, snowball)
			EndIf
			
			'If player hits F key and is facing left, create a new snowball, initialize it
			If KeyHit(KEY_F) And KeyDown(KEY_LEFT)
				snowball:TSnowball = New TSnowball
				snowball.x = penguin.x - 5
				snowball.y = penguin.y
				snowball.orientation = 0
				ListAddLast(snowballs, snowball)
			EndIf
			
			'For every snowball, move it left or right 8 pixels depending on which way the penguin was facing when shot.
			For snowball:TSnowball = EachIn snowballs
				
				'Increment frame of snowballs and reset if frame exceeds limit
				snowball.frame = snowball.frame + 1
				If snowball.frame &gt; 2
					snowball.frame = 0
				EndIf
				
				
				'If the player was facing right, orient the snowball and move it
				If snowball.orientation = 1
					snowball.x = snowball.x + 20
					
					'If snowball moves off screen , delete it.  Otherwise, draw it.
					If snowball.x &lt; 0 Or snowball.x &gt; 800
						ListRemove(snowballs, snowball)
					Else
						DrawImage(snowballImage, snowball.x, snowball.y, snowball.frame)
					EndIf
				
				'If the player was facing left, orient the snowball and move it
				Else
					snowball.x = snowball.x - 20
					'If snowball moves off screen , delete it.  Otherwise, draw it.
					If snowball.x &lt; 0 Or snowball.x &gt; 800
						ListRemove(snowballs, snowball)
					Else
						DrawImage(snowballImage, snowball.x, snowball.y, snowball.frame)
					EndIf
				EndIf
			Next
			
			
		
	
	
	'Draw the trees
	For tree:TTree = EachIn trees
			
		'If tree leaves screen, destroy it.  Otherwise, draw it.
		If tree.x &lt; -25
			ListRemove(trees, tree)
		Else
			DrawImage(treeImage, tree.x, tree.y)
		EndIf
	Next
	
	
	
	
	
	'Draw the rocks
	For bigRock:TRock = EachIn bigRocks
			
		'If rock leaves screen, destroy it.  Otherwise, draw it.
		If bigRock.x &lt; -25
			ListRemove(bigRocks, bigRock)
		Else
			DrawImage(bigRockImage, bigRock.x, bigRock.y)
		EndIf
	Next
	
	For smallRock:TRock = EachIn smallRocks
			
		'If rock leaves screen, destroy it.  Otherwise, draw it.
		If smallRock.x &lt; -25
			ListRemove(smallRocks, smallRock)
		Else
			DrawImage(smallRockImage, smallRock.x, smallRock.y)
		EndIf
	Next
	
	
	
	
	
	'Draw the snowflakes
	DrawSnowflakes(snowflakeImage, snowflake.x, snowflake.y)
	
	'If at least one snowflake gets deleted, create a new one and initialize it
	If CountList(snowflakes) &lt; 125
		snowflake:TSnowflake = New TSnowflake
		snowflake.x = Rand(0,800)
		snowflake.y = 0
		ListAddLast(snowflakes, snowflake)
	EndIf	

	
	
	
	
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	'Check Input
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
	penguin.x = UpdatePenguin_Walk_X(penguin.x, penguin.vx)			'Update penguin's x-coordinates based on walk
	penguin.y = UpdatePenguin_Walk_Y(penguin.y, penguin.vy)			'Update penguin's y-coordinates based on walk
	penguin.frame = UpdatePenguin_Frame(penguin.frame, penguin.y)		'Update penguin's frame
	penguin.x = UpdatePenguin_Slide_X(penguin.x)					'Update penguin's x-coordinate based on slide				
	penguin.y = UpdatePenguin_Slide_Y(penguin.y)					'Update penguin's y-coordinate based on slide
	
	
	
	
	
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	'Update Enemies
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
			
			
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			'Turtle
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
			turtle.x = UpdateTurtle_Walk_X(turtle.x, turtle.vx, turtle.y, penguin.x, penguin.y)
			turtle.y = UpdateTurtle_Walk_Y(turtle.x, turtle.y, turtle.vy, penguin.x, penguin.y)
			turtle.frame = UpdateTurtle_Frame(turtle.x, turtle.y, turtle.frame, penguin.x, penguin.y)
		
		


	

			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			'Driller Penguin
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
			'If there is no penguin in the list, create a new one at random x,y coordinates
			If CountList(drillPenguins) = 0
				drillPenguin.x = Rand(0,800)
				drillPenguin.y = Rand(260, 576)
				ListAddLast(drillPenguins,drillPenguin)
			EndIf
			
			'If there is a penguin in the list and he is attacking, update his x coordinate
			If CountList(drillPenguins) = 1 And isAttacking = 1
				drillPenguin.x = drillPenguin.x - drillPenguin.vx
			EndIf
			
			'If the penguin moves off the screen, destroy him
			If drillPenguin.x &lt; 0
				ListRemove(drillPenguins, drillPenguin)
				isAttacking = 0
				isDigging = 1
				drillPenguin.frame = 0
			EndIf
			
			'If there is a penguin in the list and he is digging, draw him and update his frame
			If CountList(drillPenguins) = 1 And isDigging = 1
				DrawImage(digAnimation, drillPenguin.x, drillPenguin.y, drillPenguin.frame)
				drillPenguin.frame = drillPenguin.frame + 1
				If drillPenguin.frame &gt;= 9
					isDigging = 0
					isDrilling = 1
					drillPenguin.frame = 0
				EndIf
					
			ElseIf CountList(drillPenguins) = 1 And isDrilling = 1
				DrawImage(drillAnimation, drillPenguin.x, drillPenguin.y, drillPenguin.frame)
				drillPenguin.frame = drillPenguin.frame + 1
				If drillPenguin.frame &gt;= 11
					isDrilling = 0
					isAttacking = 1
					drillPenguin.frame = 0
				EndIf
		
			ElseIf CountList(drillPenguins) = 1 And isAttacking = 1
				DrawImage(drillAttackAnimation, drillPenguin.x, drillPenguin.y, drillPenguin.frame)
				drillPenguin.frame = drillPenguin.frame + 1
				If drillPenguin.frame &gt;= 13
					drillPenguin.frame = 3
				EndIf
			EndIf
			
			
			
			
			
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			'Walrus
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			walrus.x = UpdateWalrus_Walk_X(walrus.x, walrus.vx, walrus.y, penguin.x, penguin.y)
			walrus.y = UpdateWalrus_Walk_Y(walrus.x, walrus.y, walrus.vy, penguin.x, penguin.y)
			walrus.frame = UpdateWalrus_Frame(walrus.x, walrus.y, walrus.frame, penguin.x, penguin.y)
			
			
			
			
			
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			'Snowman
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			
			
			
			
			
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			'Polar Bear
			'''''''''''''''''''''''''''''''''''''''''''''''''''''''
			polarBear.x = UpdatePolarBear_Walk_X(polarBear.x, polarBear.vx, polarBear.y, penguin.x, penguin.y)
			polarBear.y = UpdatePolarBear_Walk_Y(polarBear.x, polarBear.y, polarBear.vy, penguin.x, penguin.y)
			polarBear.frame = UpdatePolarBear_Frame(polarBear.x, polarBear.y, polarBear.frame, penguin.x, penguin.y)
			
			
			
			
			
			
			
			
			
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	'Check Collisions
	'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
	CheckPenguinCollisions(penguin:TPenguin, tree:TTree)

	
	

	

SetColor(0,0,0)
DrawText("X Coordinate: " + penguin.x, 0, 588)
DrawText("Y Coordinate: " + penguin.y, 0, 576)
SetColor(255,255,255)

'Wait 1/10 of a second
Delay 100

'Flip the buffers
Flip

Wend
'END OF MAIN LOOP










''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'FUNCTIONS
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''




		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Object Updates
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		
		
				
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'DrawSnowflakes()
				'DRAWS RANDOM SNOWFLAKES
				'PARAMETERS: 
				'		snowflake's image 
				'		snowflake's x-coordinate
				'		snowflake's y-coordinate
				'RETURNS:
				'	   	N/A
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function DrawSnowflakes(snowflakeImage, x, y)
					For Local snowflake:TSnowflake = EachIn snowflakes
						x = Rand(0,800)
						y = y + 5		'Make snowflakes fall
							'If there's too many snowflakes, delete the extras
							If y &gt; 605
								ListRemove(snowflakes, snowflake)
							Else
								DrawImage(snowflakeImage, x, y)
							EndIf
					Next
				
				End Function
	













	
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Player Updates
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		
		
		
		
		
		
		
		
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePenguin_Walk_X()
				'CHECKS INPUT AND UPDATES PENGUIN'S X-COORDINATES
				'PARAMETERS: 
				'		penguin's x-coordinate 
				'		penguin's velocity's x-component
				'RETURNS:
				'		penguin's x-coordinate
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePenguin_Walk_X(x, vx)
					
					'If player presses left, move penguin left
					If KeyDown(KEY_LEFT) And x &lt;= 48
						x = 48		
					ElseIf KeyDown(KEY_LEFT) And Not slide
						x = x - vx
					
					'If player presses right, move penguin right	
					ElseIf KeyDown(KEY_RIGHT) And Not slide
						x = x + vx
					EndIf
					
				Return x
				
				End Function










				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePenguin_Walk_Y()
				'CHECKS INPUT AND UPDATES PENGUIN'S Y-COORDINATES
				'PARAMETERS: 
				'		penguin's y-coordinate 
				'		penguin's velocity's y-component
				'RETURNS:
				'		penguin's y-coordinate
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePenguin_Walk_Y(y, vy)
					
					'If player presses up, move penguin up
					If KeyDown(KEY_UP) And Not slide
						y = y - vy
						'Don't move too far up
						If y &lt;= 260
							y = 260
						EndIf
					
					'If player presses down, move penguin down
					ElseIf KeyDown(KEY_DOWN) And Not slide
						y = y + vy
						'Don't move too far down
						If y &gt;= 576
							y = 576
						EndIf
					EndIf		
				
				Return y
				
				End Function
		









				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePenguin_Slide_X()
				'TAKES IN PENGUIN'S X-COORDINATE AND CALCULATES NEW COORDINATES FOR A SLIDE
				'PARAMETERS: 
				'		penguin's x-coordinate 
				'RETURNS:
				'		penguin's x-coordinate
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePenguin_Slide_X(x)
				
					'If player holds down D key and presses left, right, up-left, up-right, down-left, down-right, slide the penguin
					If KeyDown(KEY_D)
						slide = 1
					Else
						slide = 0
					EndIf
					
					If KeyDown(KEY_LEFT) And slide
						x = x - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf	
					
					ElseIf KeyDown(KEY_LEFT) And KeyDown(KEY_UP) And slide	
						x = x - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
					
					ElseIf KeyDown(KEY_LEFT) And KeyDown(KEY_DOWN) And slide 
						x = x - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
					
					ElseIf KeyDown(KEY_RIGHT) And slide 
						x = x + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
					
					ElseIf KeyDown(KEY_RIGHT) And KeyDown(KEY_UP) And slide 
						x = x + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						
					ElseIf KeyDown(KEY_RIGHT) And KeyDown(KEY_DOWN) And slide 
						x = x + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
					EndIf
				
				Return x
			
				End Function
			
		








				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePenguin_Slide_Y()
				'TAKES IN PENGUIN'S Y-COORDINATE AND CALCULATES NEW COORDINATES FOR A SLIDE
				'PARAMETERS: 
				'		penguin's y-coordinate 
				'RETURNS:
				'		penguin's y-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePenguin_Slide_Y(y)
					
					'If player holds down D key and presses up, down, up-left, up-right, down-left, down right, slide the penguin				
					If KeyDown(KEY_D)
						slide = 1
					Else 
						slide = 0
					EndIf
					
					If KeyDown(KEY_UP) And slide 
						y = y - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far up
						If y &lt;= 260
							y = 260
						EndIf
					
					ElseIf KeyDown(KEY_UP) And KeyDown(KEY_LEFT) And slide
						y = y - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far up
						If y &lt;= 260
							y = 260
						EndIf
					
					ElseIf KeyDown(KEY_UP) And KeyDown(KEY_RIGHT) And slide
						y = y - slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far up
						If y &lt;= 260
							y = 260
						EndIf
					
					ElseIf KeyDown(KEY_DOWN) And slide 
						y = y + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far down
						If y &gt;= 576
							y = 576
						EndIf
						
					ElseIf KeyDown(KEY_DOWN) And KeyDown(KEY_RIGHT) And slide 
						y = y + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far down
						If y &gt;= 576
							y = 576
						EndIf
					
					ElseIf KeyDown(KEY_DOWN) And KeyDown(KEY_LEFT) And slide
						y = y + slideLength
						slideLength = slideLength - friction
						If slideLength &lt;= 0.0
							slide = 0
							slideLength = 10.0
						EndIf
						'Don't move too far down
						If y &gt;= 576
							y = 576
						EndIf
					EndIf
					
				Return y
				
				End Function
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Enemy Updates
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		
		
		
		
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'Turtle Updates
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				
				
				
				
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateTurtle_Walk_X()
				'CHECKS PENGUIN'S POSITION AND UPDATES TURTLE'S X POSITION
				'PARAMETERS: 
				'		turtle's x-coordinate
				'		turtle's velocity's x-component
				'		turtle's y-coordinate
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		turtle's x-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''	
				Function UpdateTurtle_Walk_X(turtle_x, turtle_vx, turtle_y, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the turtle, idle the turtle
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 100 And Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt;= 55
				
						'Make turtle follow penguin
						If penguin_x &lt; turtle_x
							turtle_x = turtle_x - turtle_vx
						ElseIf penguin_x &gt; turtle_x 
							turtle_x = turtle_x + turtle_vx
						EndIf
					
					EndIf
					
					'If penguin pushes against the middle barrier, scroll in turtle
					If penguin_x &gt; 400
						turtle_x = turtle_x - 5
					EndIf
					
					Return turtle_x
				
				End Function
				
				
				
				
				
				
				
				
				
				
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateTurtle_Walk_Y()
				'CHECKS PENGUIN'S POSITION AND UPDATES TURTLE'S Y POSITION
				'PARAMETERS: 
				'		turtle's x-coordinate
				'		turtle's y-coordinate
				'		turtle's velocity's y-component
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		turtle's y-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdateTurtle_Walk_Y(turtle_x, turtle_y, turtle_vy, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the turtle, idle the turtle
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 100 And Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt;= 55
				
						'Make turtle follow penguin
						If penguin_y &lt; turtle_y
							turtle_y = turtle_y - turtle_vy
						ElseIf penguin_y &gt; turtle_y 
							turtle_y = turtle_y + turtle_vy
						EndIf
					
					EndIf
					
					Return turtle_y
				
				End Function
				
				
				
				
				
				
				
				
				
				
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateWalrus_Walk_X()
				'CHECKS PENGUIN'S POSITION AND UPDATES WALRUS'S X POSITION
				'PARAMETERS: 
				'		walrus's x-coordinate
				'		walrus's velocity's x-component 
				'		walrus's y-coordinate
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		walrus's x-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdateWalrus_Walk_X(walrus_x, walrus_vx, walrus_y, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the walrus, idle the walrus
					If Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt;= 55
				
						'Make walrus follow penguin
						If penguin_x &lt; walrus_x
							walrus_x = walrus_x - walrus_vx
						ElseIf penguin_x &gt; walrus_x 
							walrus_x = walrus_x + walrus_vx
						EndIf
					
					EndIf
					
					'If penguin pushes against the middle barrier, scroll in walrus
					If penguin_x &gt; 400
						walrus_x = walrus_x - 5
					EndIf
					
					Return walrus_x
				
				End Function
				









				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateWalrus_Walk_Y()
				'CHECKS PENGUIN'S POSITION AND UPDATES WALRUS'S Y POSITION
				'PARAMETERS: 
				'		walrus's x-coordinate
				'		walrus's y-coordinate
				'		walrus's velocity's y-component
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		walrus's y-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdateWalrus_Walk_Y(walrus_x, walrus_y, walrus_vy, penguin_x, penguin_y)

					'If the penguin is outside a radius of the walrus, idle the walrus
					If Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt;= 55
				
						'Make walrus follow penguin
						If penguin_y &lt; walrus_y
							walrus_y = walrus_y - walrus_vy
						ElseIf penguin_y &gt; walrus_y 
							walrus_y = walrus_y + walrus_vy
						EndIf
					
					EndIf
					
					Return walrus_y
				
				End Function
				
				
				
				
				
				
				
				
				
				
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePolarBear_Walk_X()
				'CHECKS PENGUIN'S POSITION AND UPDATES POLAR BEAR'S X COORDINATE
				'PARAMETERS: 
				'		polar bear's x-coordinate
				'		polar bear's velocity's x-component
				'		polar bear's y-coordinate
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		polar bear's x-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePolarBear_Walk_X(polarBear_x, polarBear_vx, polarBear_y, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the polarbear, idle the polar bear
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 100 And Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt;= 55
				
						'Make polar bear follow penguin
						If penguin_x &lt; polarBear_x
							polarBear_x = polarBear_x - polarBear_vx
						ElseIf penguin_x &gt; polarBear_x 
							polarBear_x = polarBear_x + polarBear_vx
						EndIf
					
					EndIf
					
					'If penguin pushes against the middle barrier, scroll in polar bear
					If penguin_x &gt; 400
						polarBear_x = polarBear_x - 5
					EndIf
					
					Return polarBear_x
				
				End Function










				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePolarBear_Walk_Y()
				'CHECKS PENGUIN'S POSITION AND UPDATES POLAR BEAR'S Y COORDINATE
				'PARAMETERS: 
				'		polar bear's x-coordinate
				'		polar bear's y-coordinate
				'		polar bear's velocity's y-component
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		polar bear's y-coordinate
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePolarBear_Walk_Y(polarBear_x, polarBear_y, polarBear_vy, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the polar bear, idle the polar bear
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 100 And Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt;= 55
				
						'Make polar bear follow penguin
						If penguin_y &lt; polarBear_y
							polarBear_y = polarBear_y - polarBear_vy
						ElseIf penguin_y &gt; polarBear_y 
							polarBear_y = polarBear_y + polarBear_vy
						EndIf
					
					EndIf
					
					Return polarBear_y
				
				End Function
				

			

	
	
	
	
	
	
	
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Frame Updates
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'''''''''''''''''''''''''''''''''''''''''''''''''''''''




				'''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePenguin_Frame()
				'CHECKS INPUT AND UPDATES PENGUIN'S FRAME
				'PARAMETERS: 
				'		penguin's frame
				'		penguin's y-coordinate 
				'RETURNS:
				'		penguin's frame
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePenguin_Frame(frame, y)
		
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
					'Frame Updates - Linear movement
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
					'If player presses left, decrement frame number
					If KeyDown(KEY_LEFT) And Not slide
						frame = frame - 1
						If frame &gt;= 3
							frame = 2
						EndIf
						'If frame gets too low, reset frame
						If frame &lt; 0
							frame = 2
						EndIf
						
					'If player presses right, increment frame number	
					ElseIf KeyDown(KEY_RIGHT) And Not slide
						frame = frame + 1
						If frame &lt;= 3 Or frame &gt;= 7
							frame = 4
						EndIf
						'If frame gets too high, reset frame
						If frame &gt; 6
							frame = 4
						EndIf
					
					'If player presses up, change frame to walking away animation and increment frame number
					ElseIf KeyDown(KEY_UP) And Not slide
						frame = frame + 1
						If frame &lt;= 12 Or frame &gt;= 15
							frame = 13
						EndIf
						'If frame gets too high, reset frame
						If frame &gt; 14
							frame = 13
						EndIf
					
					'If player presses down, change frame to walking right and increment frame number
					ElseIf KeyDown(KEY_DOWN) And Not slide
						frame = frame + 1
						If frame &lt;= 3 Or frame &gt;= 7
							frame = 4
						EndIf
						'If frame gets too high, reset frame
						If frame &gt; 6
							frame = 4
						EndIf
		
						
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
					'Frame Updates - Idle
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
	
					'If player is idle use default penguin image
					ElseIf Not KeyDown(KEY_UP) And Not KeyDown(KEY_DOWN) And Not KeyDown(KEY_RIGHT) And Not KeyDown(KEY_LEFT) And Not slide
						 frame = 3
					EndIf
			
			
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
					'Frame Updates - Sliding
					'''''''''''''''''''''''''''''''''''''''''''''''''''''''
	
					
					'If player holds down D, penguin can slide
					
					If slideLength &lt;= 0.0
						frame = 22
					EndIf
					
					If KeyDown(KEY_D) And KeyDown(KEY_LEFT)
						frame = 23
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_RIGHT)
						frame = 21
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_UP)
						frame = 21
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_DOWN)
						frame = 22
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_UP) And KeyDown(KEY_LEFT)
						frame = 23
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_DOWN) And KeyDown(KEY_LEFT)
						frame = 22
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_UP) And KeyDown(KEY_RIGHT)
						frame = 21
					ElseIf KeyDown(KEY_D) And KeyDown(KEY_DOWN) And KeyDown(KEY_RIGHT)
						frame = 22
					ElseIf KeyDown(KEY_D) And Not KeyDown(KEY_DOWN) And Not KeyDown(KEY_UP) And Not KeyDown(KEY_LEFT) And Not KeyDown(KEY_RIGHT)
						frame = 22
					EndIf
	
		
		
				Return frame

				End Function
				
				
				
				
				
				
				
				
				
				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateTurtle_Frame()
				'CHECKS PENGUIN'S POSITION AND ORIENTS THE TURTLE AS WELL AS ANIMATING THE TURTLE
				'PARAMETERS: 
				'		turtle's x-coordinate
				'		turtle's y-coordinate 
				'		turtle's animation frame
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		turtle's frame
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdateTurtle_Frame(turtle_x, turtle_y, turtle_frame, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the turtle, idle the turtle
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt; 100 And turtle_x &gt; penguin_x
						turtle_frame = 0
					ElseIf Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt; 100 And turtle_x &lt; penguin_x
						turtle_frame = 19
					EndIf
					
					
					'If the penguin is inside the radius of the turtle, animate turtle according to orientation
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 100 And Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt; 55 And turtle_x &gt;= penguin_x
						turtle_frame = turtle_frame + 1
						
						'If frame gets too high, reset it
						If turtle_frame &gt;= 3
							turtle_frame = 0
						EndIf
						
					ElseIf Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 100 And Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &gt; 55 And turtle_x &lt; penguin_x
						turtle_frame = turtle_frame - 1
						
						'If frame gets too low, reset it
						If turtle_frame &lt;= 16
							turtle_frame = 19
						EndIf
						
					EndIf
					
					
					'If penguin gets too close, make turtle attack
					'Orient the turtle
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) = 55 And turtle_x &gt;= penguin_x
						turtle_frame = 5
					ElseIf Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) = 55 And turtle_x &lt; penguin_x
						turtle_frame = 14
					EndIf
					
					'Attack animation
					If Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 55 And turtle_x &gt;= penguin_x
						turtle_frame = turtle_frame + 1
						
						'If frame gets too high, reset it
						If turtle_frame &gt; 9
							turtle_frame = 5
						EndIf
						
					ElseIf Sqr((turtle_x - penguin_x)^2 + (turtle_y - penguin_y)^2) &lt; 55 And turtle_x &lt; penguin_x
						turtle_frame = turtle_frame - 1
						
						'If frame gets too low, reset it
						If turtle_frame &lt; 10
							turtle_frame = 14
						EndIf
						
					EndIf
					
					
					Return turtle_frame
					
				End Function
				
				
			







				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdateWalrus_Frame()
				'CHECKS PENGUIN'S POSITION AND ORIENTS THE WALRUS AS WELL AS ANIMATING THE WALRUS
				'PARAMETERS: 
				'		walrus's x-coordinate
				'		walrus's y-coordinate 
				'		walrus's animation frame
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		walrus's frame
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdateWalrus_Frame(walrus_x, walrus_y, walrus_frame, penguin_x, penguin_y)
				
					'If the penguin is outside a radius of the walrus, idle the walrus
					If Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 100 And penguin_x &lt; (walrus_x + 100) And penguin_x &gt; (walrus_x - 100) And penguin_y &gt; walrus_y
						walrus_frame = 0
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 100 And penguin_x &lt; (walrus_x + 100) And penguin_x &gt; (walrus_x - 100) And penguin_y &lt; walrus_y
						walrus_frame = 9
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 100 And walrus_x &gt; penguin_x And penguin_y &gt; (walrus_y - 100) And penguin_y &lt; (walrus_y + 100)
						walrus_frame = 3
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 100 And walrus_x &lt; penguin_x And penguin_y &gt; (walrus_y - 100) And penguin_y &lt; (walrus_y + 100)
						walrus_frame = 6
					EndIf
					
					
					'If the penguin is inside the radius of the walrus, animate walrus according to orientation
					If Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 55 And penguin_x &lt; (walrus_x + 100) And penguin_x &gt; (walrus_x - 100) And penguin_y &gt; walrus_y
				
						walrus_frame = walrus_frame + 1
						
						'If frame gets too high, reset it
						If walrus_frame &gt;= 2
							walrus_frame = 0
						EndIf
						
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 55 And penguin_x &lt; (walrus_x + 100) And penguin_x &gt; (walrus_x - 100) And penguin_y &lt; walrus_y
						
						walrus_frame = walrus_frame + 1
						
						'If frame gets too high, reset it
						If walrus_frame &gt;= 11
							walrus_frame = 9
						EndIf
						
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 55 And walrus_x &gt; penguin_x And penguin_y &gt; (walrus_y - 100) And penguin_y &lt; (walrus_y + 100)
						
						walrus_frame = walrus_frame + 1
						
						'If frame gets too high, reset it
						If walrus_frame &gt;= 5
							walrus_frame = 3
						EndIf
						
					ElseIf Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &lt; 100 And Sqr((walrus_x - penguin_x)^2 + (walrus_y - penguin_y)^2) &gt; 55 And walrus_x &lt; penguin_x And penguin_y &gt; (walrus_y - 100) And penguin_y &lt; (walrus_y + 100)
						
						walrus_frame = walrus_frame + 1
						
						'If frame gets too high, reset it
						If walrus_frame &gt;= 8
							walrus_frame = 6
						EndIf
						
					EndIf
						
					
					Return walrus_frame
					
				End Function










				'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				'UpdatePolarBear_Frame()
				'CHECKS PENGUIN'S POSITION AND ANIMATES THE POLAR BEAR
				'PARAMETERS: 
				'		polar bear's x-coordinate
				'		polar bear's y-coordinate 
				'		polar bear's animation frame
				'		penguin's x-coordinate
				'		penguin's y-coordinate
				'RETURNS:
				'		polar bear's frame
				''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
				Function UpdatePolarBear_Frame(polarBear_x, polarBear_y, polarBear_frame, penguin_x, penguin_y)
				
					
					'If the penguin is outside a radius of the polar bear, idle the polar bear
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt; 100 And polarBear_x &gt; penguin_x
						polarBear_frame = 19
					ElseIf Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt; 100 And polarBear_x &lt; penguin_x
						polarBear_frame = 0
					EndIf
				
				
					'If the penguin is inside the radius of the polar bear, animate polar bear according to orientation
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 100 And Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt; 55 And polarBear_x &gt;= penguin_x
						polarBear_frame = polarBear_frame - 1
						
						'If frame gets too low, reset it
						If polarBear_frame &lt;= 14
							polarBear_frame = 19
						EndIf
						
					ElseIf Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 100 And Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &gt; 55 And polarBear_x &lt; penguin_x
						polarBear_frame = polarBear_frame + 1
						
						'If frame gets too high, reset it
						If polarBear_frame &gt;= 5
							polarBear_frame = 0
						EndIf
						
					EndIf
					
					
					'If penguin gets too close, make polar bear attack
					'Orient the polar bear
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) = 55 And polarBear_x &gt;= penguin_x
						polarBear_frame = 13
					ElseIf Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) = 55 And polarBear_x &lt; penguin_x
						polarBear_frame = 6
					EndIf
					
					'Attack animation
					If Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 55 And polarBear_x &gt;= penguin_x
						polarBear_frame = polarBear_frame - 1
						
						'If frame gets too low, reset it
						If polarBear_frame &lt;= 10
							polarBear_frame = 13
						EndIf
						
					ElseIf Sqr((polarBear_x - penguin_x)^2 + (polarBear_y - penguin_y)^2) &lt; 55 And polarBear_x &lt; penguin_x
						polarBear_frame = polarBear_frame + 1
						
						'If frame gets too high, reset it
						If polarBear_frame &gt;= 9
							polarBear_frame = 6
						EndIf
						
					EndIf
					
					
					Return polarBear_frame
				
				End Function

Function CheckPenguinCollisions(penguin:TPenguin, tree:TTree)

If (ImagesCollide(penguinAnimation, penguin.x, penguin.y, 0, treeImage, tree.x, tree.y, 0))
penguin.x = 400
penguin.y = 300
EndIf
End Function

</textarea> <br><br></td></tr></table><br>
<a name="980170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> As you can see a lot of the code in the main loop could be relegated to functions if I could pass the various types (tree, penguin, driller penguin, etc.) to the functions. <br><br></td></tr></table><br>
<a name="980350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any ideas? <br><br></td></tr></table><br>
<a name="980360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi,<br><br>Im not going to go through error checking you code, but some gerneral comments<br><br>You are using Types soly as variable holders, they are much much more than this. Any functin that is called (for example) MovePenguin() should really be PART of the type "Penguin", that is Method Move() inside Penguin<br>Penguin.Move <br>In this way the main passing values error pointed out by the others is nearly aways a non issue.<br><br>As a basic rule, ANY function that is being passed either a single whole instance, or a single whole instance plus a few secondary vaules shoud really be methods, and any function that is using the ALL the instances of the type (ie the iteration through the list), should be a function of that type. (And not a global function) <br><br></td></tr></table><br>
<a name="980378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also,<br><br>Since all your "actors" have common variables you can do this:<br><br><pre class=code>
type actor
	Global actors::Tlist=new Tlist
	Field x, y		'Penguin's x,y-coordinates
	Field vx, vy	'Penguin's velocity
	Field hp		'Penguin's hit points

	Method New()
		actors.addlast(self)
	End Method

	Method Move()
		x:+vx
		y:+vy
	End Method

	Function MoveAll()
		For local a:actor=eachin actors
			a.Move()
		Next
	End Function
end type

Type TPenguin extends actor
	Field frame		'Penguin's animation frame
End Type

Type Turtle extends actor
	Field frame		'Turtles animation frame
End Type

</pre> <br><br></td></tr></table><br>
<a name="980392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't see anything wrong. Inside your collision function, do a cls, draw the images at their collision check positions and do a flip, then wait for a keypress. See what it shows you. I'm thinking maybe one of the images is blank or something? <br><br></td></tr></table><br>
<a name="980871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I think I understand what you guys are saying in terms of turning the extraneous functions into type methods, but since I have no experience with them, on the face of it, it looks like it's not doing much else for me even if I make a general type like "actor" because every actor has different coordinates, velocities, hit points, frames, etc., so I'm curious as to what the advantage is to using this over what I have.  Can anyone explain this more clearly? <br><br></td></tr></table><br>
<a name="981010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its part of the paridine of object programing.<br><br>In strickly old BAsic (say), you would go<br><br>"What does the program need to do next?"; Lets say the answer is move peguins forward.<br>So you would program to move all the peguins forward, then (say) you want to check which peguins have fallen in a hole.<br>So you program checking each penguin to see if it has fallen into a hole.<br>Then you want to remove the penguins that have fallen into a hole, so you program etc<br>Now each one of these is to you a seperate function, each function either goes tho your list of penguins, or is passed a penguin and the acts on it as needed ie moves forward etc<br><br>Now in a Object envionment you would go<br><br>"What are all the things I need a penguin to do, or have done to it?"<br>Well first I need it to move forward, and I need to see if it has fallen into a hole. And I need to remove it from play if it has fallen into a hole. etc<br>So you program the "object/class" Penguin, and you program all the things you think you might want to do to a penguin as methods. (Then you think, going thro the list of penguins really should be part of the object. So you Program a functio INSIDE the object to do this.<br><br>-----------------------------<br><br>Now what skully is saying is that a penguin is really a lot like a turtle, so he is making a sub object "actor" and has "penguin" and "turtle" inherit the things the have in common. (too be honest hes just using that as an example, and they could be the same class exactly; so when you look back dont think we are wrong, just realise we are making it simple.<br><br>What you want to do is find the most basic things all the "objects/actors" have in commom, (ie a graphic, a place on the screen, a place on the map) and make an object for that. Then anything that is different (static actor vrs dynamic for example) extend the base object <br><br></td></tr></table><br>
<a name="983105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you all so much for the continued help and support, I'm learning so much from all of you.  I think I finally got things working. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
