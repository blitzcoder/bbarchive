<!DOCTYPE html><html lang="en" ><head ><title >How do i delete unused objects?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How do i delete unused objects?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >How do i delete unused objects?</a><br><br>
<a name="1064136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lillpeter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> As i create objects such as partices and bullets in my game i add everything to a list which i then interate through to update and draw the objects. When an object is exiting the screen or "dies" in some other way i tell the object to remove itself from the list. <br><br>What just struck me is that does this mean i never really delete the object itself and only the link to it through the list?<br><br>I haven´t found any answers to this here that i feel happy with and i wonder how i make sure that unused objects are deleted? I read that the "flushmem" command clears objects with no pointers to them. Is that all i need to add to get rid of the objects i´m talking about? There should be nothing in my code that tries to access any objects outside the lists.<br><br>/Peter <br><br></td></tr></table><br>
<a name="1064151"></a>

<a name="1064152"></a>

<a name="1064154"></a>

<a name="1064155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> locals that have gone out of scope and objects you have no way of accessing any more and as long as there are no two variables referencing each other,  will be automatically collected and restored by the garbage collector. A "garbage collector" is a small program that runs integrated with any Blitzmax applications/games that you create and is responsible for cleaning the program while it's being executed. it has its advantages and disadvantages and depending on how you use it it can be a blessing or a curse. constantly creating and removing many objects can decrease it's function ability and cause the program to come to a crawl randomly.  A way to prevent this like with any other language is by recycling objects as this prevents the garbage collector from working too hard to restore memory and for the memory to be available for new objects.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1064158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Each object remembers if something is pointing to it.<br><br>Once nothing is pointing to it, it is ready for Garbage collection.<br><br>An object pointed to only within a function needs to be put on some sorta list (map etc), so that when the function finishes, it still exists.<br><br>DONT worry about GC at all unless you are allocating Banks/memory blocks or the like, in which case read up on them.<br><br>If you have speed/timing issues turn off the GC for calc intensive low variable creation routines, then back on after these.<br><br>Generally just dont worry about it, if you can get to it it exists, if you cannot then it probably don't <br><br></td></tr></table><br>
<a name="1064159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make a global count variable, and in Method New increase it by 1 and in Method Delete decrease it by 1. Print it to the screen and you can see if your objects are being deleted or not. Note: don't use Method Delete for anything else, it's a special internal method and shouldn't be fiddled with. But for a debug check like this, it's ok to experiment. <br><br></td></tr></table><br>
<a name="1064188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is ok to use the delete method. It gets called when an object gets removed from memory. But you cannot guarantee that it will be called for all objects when your program ends. <br><br></td></tr></table><br>
<a name="1064193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lillpeter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the answers. The recycle object approach mentioned here sounds very interesting. <br><br>Would that be as simple as moving the unused objects to a separate list, which i then look into for an object of the right type before i create a new one? <br><br></td></tr></table><br>
<a name="1064249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, using the delete method is fine. The only caveat is that you should not use it for anything critical, since there is no absolute guarantee that it will be called.<br><br>Yes, it would be as simple as moving unused objects to a new list (or array) which you later access when you need to create a new one. Pooling will be particularly beneficial if you're using the threaded GC which is quite a bit slower than the standard GC. Either way, it's a nice concept to understand as it can be vital with speed-sensitive stuff (eg: particles.) <br><br></td></tr></table><br>
<a name="1064476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So with those restrictions in mind, can anybody tell me any useful, non-debug purposes of the delete method?<br><br>As for pooling, it's best to maintain a seperate list for each type and removelast one when needed (or create new if empty).<br><br>This isn't just to save time scanning a list, say you have a non-abstract base type, how do you know what you're getting from the list is a real base and not a derived? There are solutions but simpler just to have a unique list for each declared type.<br><br>You can't put the type in the list in the delete method as a way to hijack the collector, that can result in strange things. You need to manually "delete" the object with your own normal function.<br><br>My game creates and deletes objects like there's no tomorrow and it runs fine, so don't get all worried about pooling. <br><br></td></tr></table><br>
<a name="1064493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So with those restrictions in mind, can anybody tell me any useful, non-debug purposes of the delete method? <br></div><br>Well I use the delete method to indicate a change in the reference count of managed objects. For example, in the delete method of a Material (set of visual properties) I reduce the reference count of all textures that material used. On the offchance that the delete method is never called.. well it doesn't matter because if the program should end before the delete method is called, all textures get unloaded when the program ends anyway, <br><br></td></tr></table><br>
<a name="1064967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good example. <br><br></td></tr></table><br>
<a name="1064969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> the delete function is useful for deleting textures in openGL when there are no images using the texture....<br>apart from that i dont use it <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
