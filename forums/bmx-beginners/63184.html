<!DOCTYPE html><html lang="en" ><head ><title >Making a file shorter</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Making a file shorter</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Making a file shorter</a><br><br>
<a name="705789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, after such a long time with no problems at all, here I am again begging for assistance<br><br>I am using a file (amoungst other things) for data storage<br><br>The sort of data it stores is not used often and is by no means suitable to be kept in RAM<br><br>The last part of the file consists of a string (not the variable type) of characters of varying length<br><br>At certain points (i.e. quitting the game), this entire string of characters nees to be removed from the end of the file<br><br>The file is already open (using OpenFile) during this "cleanup" to modify other characters in the file back to their original state, using SeekStream and WriteByte<br><br>Counting the number of characters on the end of the file is no problem, I can SeekStream to a marker "E:" which tells the engine where the string starts, however removing them is<br><br>After looking through the documentation, it would appear that BMax has absolutly no command that can remove characters from a file, without overwriting them with something else, thus meaning that the file can never get any shorter<br><br>Nor is there a command that simply shortens an open file, which I could use to shave off the right number of characters<br><br>I need a workaround thus to do the following:<br>-Remove a variable number of characters from the end of a file, or after the current "cursor" position in the file<br><br>This seems like a simple operation to me, and one that Blitz really should be capable of<br><br>This problem really couldnt have come at a worse time, as my new housemate is convinced that Blitz is very limited purely due to the fact that it isnt C++, and I am very eger to demonstrate that this is not the case <br><br></td></tr></table><br>
<a name="705814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a common problem in all languages (at least without database commands, which do the same as below but internally), and is not particular to Blitz.<br><br>Normally you would just write a new file (or overwrite the same one) with the characters removed.<br><br>No way around this.<br><br>If speed is an issue then you may need to be very selective about when you actually reconstruct the file. You can always write an Int at the beginning of the file that holds the eventual required length.<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="705832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Get a different housemate :) <br><br></td></tr></table><br>
<a name="705856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol Enay, I'll consider it :p<br><br>Beaker: Ty very much<br><br>If that is the way it is done then that is the way I will do it<br><br>I only need to run the function when exiting the game, or on starting the game after a crash, and I suppose speed isnt so essential in either of those situations <br><br></td></tr></table><br>
<a name="705938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wouldn't it be quicker if you use a seperate file for storing the string and then simply delete it on exit or crash? <br><br></td></tr></table><br>
<a name="706127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kenshin, Y'know, you are completely and totaly right and I'm gonna do that, ty <br><br></td></tr></table><br>
<a name="706331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> For deleting just a few bytes to the end i would suggest the following:<br><br>Load the desired File to a bank with LoadBank(url), then simply resize the bank to the size you will need e.g: ResizeBank(MyBank,BankSize(MyBank)-256) and at least save it back to the old place with SaveBank(url). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
