<!DOCTYPE html><html lang="en" ><head ><title >drawline with image</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >drawline with image</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >drawline with image</a><br><br>
<a name="1264320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blicek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello<br><br>I am writing here in the BlitzMax, but my problem relates to almost all basic. Well, I can not cope in a standard way using in-built commands draw the line (solid).<br><br>As far as using the command:<br><br>DrawLine x, y, x 1, y1<br><br>I don't have any problems this if you want to use an image for example. about the size of 1 x 1 pixel and have the same effect as using the above commands can not cope.<br><br>Do I have to use a separate function on their own, or just the command ready for example. in BlitzMax?<br><br>And below this effect using-BUT! DrawLine x, y, x 1, y1:<br><br><br>Graphics 800, 600<br><br>While Not A KeyDown (Key_Escape)<br><br>MX = MouseX ()<br>We = MouseY ()<br><br>If the MouseDown (1)<br><br>DrawLine, x,y, mx, my<br><br>Endif<br><br>x = mx<br>y = my<br><br>Flip<br>Wend<br><br>Very please help<br><br>Blicek <br><br></td></tr></table><br>
<a name="1264339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>not sure what you are trying to accomplish, but when I run this:<pre class=code>SuperStrict

Graphics 800, 600

Local mx:Int, my:Int, x:Int, y:Int

While Not KeyDown (Key_Escape)

	mx = MouseX()
	my = MouseY()
	
	If MouseDown(1) Then	
		DrawLine (x, y, mx, my)		
	EndIf
	
	x = mx
	y = my
	
	Flip
Wend</pre><br>...it draws white solid line when I press left mousebutton.<br><br>-Henri <br><br></td></tr></table><br>
<a name="1264340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blicek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I mean to draw the image on the screen rather than using the drawline. <br><br></td></tr></table><br>
<a name="1264352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> DrawImage() <br><br></td></tr></table><br>
<a name="1264402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blicek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> After all, I wrote that I want to get the effect of the line, but using an image rather than using the DrawLine!<br><br>For example, whereas the image as a 1 x 1 pixel and i want this pixel to draw a continuous line. And here is my problem !.<br><br>I'm waiting for help<br><br>Blicek <br><br></td></tr></table><br>
<a name="1264411"></a>

<a name="1264413"></a>

<a name="1264414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Theoretically you can draw a line made from an image...<br>but if you draw a line, which is made from a 1x1pix image it will be the same as drawing a regular line, because a 1x1pix image will only have one point of one single color. Not really an image!<br><br>Draw a line made of an image:<br><br><pre class=code>Function DrawImageLine(X#,Y#,X1#,Y1#,Img:Image)
     Local delta#=(Y1-Y)/(X1-X)
     For local i%=0 to (X1-X)
          DrawImage Img, X+i, Y+delta*i
     Next
End Function
</pre><br><br><br>But if you are sure, that the image is always only 1x1pix, you could pick the color of this pixel and use is for the regualr DrawLine() command.<br><br><br>I'm not 100% sure, but this can be a way to find out a pixel color in an image:<br><pre class=code>Global R%,G%,B%
Function GetImageColor(X#,Y#,Img:Image)
     Local Pic:TPixMap=LockImage(Img)
     local Color%=ReadColor(Pic,X,Y)
     R=(Color Shr 0) &amp; 255
     G=(Color Shr 8) &amp; 255
     B=(Color Shr 16) &amp; 255
     UnlockImage Img
End Function
</pre> <br><br></td></tr></table><br>
<a name="1264603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blicek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok<br><br>Here's what I meant! Thanks a lot-BUT<br><br>I had to fix myself a mouse to draw anything on the screen here is the code:<br><br>Graphics 800, 600<br><br>IMG = LoadImage ("g:/bm/work/point .png")<br><br>While Not A KeyDown (Key_Escape)<br>x 1 # = MouseX ()<br>Y1 = MouseY ()<br><br>DrawImageLine (X, # Y, # X 1, Y1, # #, Img)<br><br>x = x 1 #<br>y # = n #<br><br>Flip<br>Wend<br><br>Function DrawImageLine (X, # Y, # X 1, Y1, # #, Img)<br>Local delta # = (Y1 # s #)/(x 1-X # #)<br>For Local and% = 0 (x 1 #-X #)<br><br>If the MouseDown (1)<br>DrawImage Img, X, # + and Y # + delta # and<br>Endif<br><br>Next<br>End Function<br><br>and here is the drawing but only in the right side and the left side does not work?<br><br>Why?<br><br>Please reply<br><br>Blicek <br><br></td></tr></table><br>
<a name="1264634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found a better algo which uses the principe of pythagoras:<br><br><pre class=code>SuperStrict
Graphics 800, 600
Global X%, Y%, X1%, Y1%
Global Img:TImage = LoadImage ("Pixel.png")
DrawImage Img,0,0

X = MouseX ()
Y = MouseY ()

While Not KeyDown (Key_Escape)
	If MouseDown(1)
		X1 = MouseX ()
		Y1 = MouseY ()
		If (X1&lt;&gt;X) Or (Y1&lt;&gt;Y)
			DrawImageLine (X, Y,  X1, Y1, Img)
			X = X1
			Y = Y1
		EndIf
	EndIf
	Flip
Wend

Function DrawImageLine (X#, Y#, X1#, Y1#,Img:TImage)
	Local length# = Sqr((X1-X)^2+(Y1-Y)^2)
	Local deltaX# = (X1-X)/length
	Local deltaY# = (Y1-Y)/length
	For Local i%=0 To length
		X=X+deltaX
		Y=Y+deltaY
		DrawImage Img,X,Y
	Next 
End Function
</pre><br><br>there are a lot of bug in your code...<br>1.<br>What are you doing with all these '#'? In my codes they are used to define FLOAT-variables.<br><br>2.<br>Do not use a variable named 'AND', because it is a reserved word in BlitzMax<br><br>3.<br>In "While Not A KeyDown" the "A" is wrong! The same with "the" in "If the MouseDown (1)" <br><br></td></tr></table><br>
<a name="1264847"></a>

<a name="1264848"></a>

<a name="1264849"></a>

<a name="1264850"></a>

<a name="1265342"></a>

<a name="1265343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Graphics 800,600
SetBlend Alphablend
Local img:TImage = CreateImage(1,3)
Local pxm:TPixmap = LockImage(img)
pxm.WritePixel(0,0,$10FFFFFF)
pxm.WritePixel(0,1,$FFFFFFFF)
pxm.WritePixel(0,2,$10FFFFFF)

DrawImage img,-1,0 ' preload image to graphics buffer
SetImageHandle(img,0,1)

Function Line(x1:Float,y1:Float,x2:Float,y2:Float,img:TImage)
	Local ox:Float,oy:Float
	GetScale(ox,oy)
	Local oa:Float = GetRotation()
	Local vx:Float = x2-x1
	Local vy:Float = y2-y1
	Local ang:Float = ATan2(vy,vx)
	length:Float = Sqr(vx*vx+vy*vy)
	SetScale(length,1)
	SetRotation(ang)
	DrawImage(img,x1,y1)
	SetScale(ox,oy)
	SetRotation(oa)
End Function

SetColor(0,255,0) 
Local ms:Int= MilliSecs()
Line(100,100,500,150,img)
Line(500,150,400,300,img)
Line(400,300,100,300,img)
Line(100,300,100,100,img)
ms = MilliSecs()-ms

DrawText ms + " Millisecs to draw",10,10

DrawText "Press a key to exit ",100,500
Flip
WaitKey()

</pre><br><br>this might be better as this produce AA lines. <br><br></td></tr></table><br>
<a name="1265344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> [code]<br>. <br><br></td></tr></table><br>
<a name="1265134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blicek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK OK<br><br>Very thanks for all<br><br><br>Blicek <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
