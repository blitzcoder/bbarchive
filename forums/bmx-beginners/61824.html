<!DOCTYPE html><html lang="en" ><head ><title >Memory of the animations</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory of the animations</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Memory of the animations</a><br><br>
<a name="690811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi again, i have a big problem, my game uses very long animations and it uses a lot of memory, i would like to know if there is some way to save as memory as i can, making for example that the bmax loads only the frame that is showing it (the memory of the process grows all the animation untill it reaches the top of the animation) Is this possible? Anybody can help me? Any examples? <br><br></td></tr></table><br>
<a name="690849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You shouldn't be trying to load animations right as you're drawing them. But you can try to load animations a few minutes before you draw them (not everything needs to be in mem at once).<br><br>If your animations are becoming too large, try to isolate parts of them which do not change in appearance. Then draw each part, i.e., of an explosion as single frames but move, scale, rotate, fade them individually. You can also try loading smaller resolution animations for some visuals and then draw them scaled larger.<br><br>But if you find yourself using several hundreds of MB of mem to hold your animations then you should reconsider what is possible. <br><br></td></tr></table><br>
<a name="690995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So i have to cut the anims on diferent ones? and delete its and load it every time i run the animation ? <br><br></td></tr></table><br>
<a name="691002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could look at something like <a href="/posts.php?topic=51647#578284" target="_blank"> this </a> which delivers single-surface. <br><br></td></tr></table><br>
<a name="691009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi tonyg i tried the code of jim brown but it seems not to work, it tells me "TDX7ImageFrame" not found :/ <br><br></td></tr></table><br>
<a name="691015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's now called TD3D7ImageFrame plus you need to take out the flushmem() <br><br></td></tr></table><br>
<a name="691029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> with one of my animations doesnt work and i dont know why, it doesnt show anything and it requires the same process of the loadanimimage function<br><br>The runner sprite is showed but mine not. My anim its a 12408x176 png 8bits with rbga <br><br></td></tr></table><br>
<a name="691072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jim Brown's code states each frame has to be horizontal. In general they both say it's best to have pow2 images. <br><br></td></tr></table><br>
<a name="691084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> My animation has each frame horizontal ._., but this codes doesnt draw anything if i use my anims -_- <br><br></td></tr></table><br>
<a name="691111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you trying to conserve system memory or video memory?<br><br>I'm assuming system memory, but if that isn't the case then you do have some options. <br><br>If you're just trying to cut down your RAM usage, you'll likely have to come up with a scheme to dynamically load and unload images. <br><br>Also, if any of your animations are using identical frames anywhere (perhaps as a crude method to control the animation speed) you could cut them out and instead create a wrapper class that handles frame changes, animation speeds, delays, etc. <br><br></td></tr></table><br>
<a name="691113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> What if you reduce the number of frames in your anim?<br>If it happens with 4 frames then post them and somebody can give it a try. <br><br></td></tr></table><br>
<a name="691566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Little OT: How can I know the actual video memory usage? I was thinking to expand my game adding some new gfx features but I need to keep it working on machine with little memory... <br><br></td></tr></table><br>
<a name="691575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> D/L "Video Memory Watcher" at <br><a href="http://www.nonatainment.de/web/Default.aspx?tabid=62" target="_blank">http://www.nonatainment.de/web/Default.aspx?tabid=62</a><br><br>It works like a charm. <br><br></td></tr></table><br>
<a name="691580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, but I was looking for something to use internally in Bmax: if I have enough space then load new gfx... <br><br></td></tr></table><br>
<a name="691582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, not sure there is a method. <br><br>I wonder what happens when you run out of Vid mem. Does LoadImage/LoadAnimImage throw an exception...simply return null...or something else?<br><br>I too would love to know if there is any way to get system information like VRAM, RAM, CPU speed, etc, so that my game could tailor itself to the machine it's on. <br><br>Anyone? :) <br><br></td></tr></table><br>
<a name="691587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was talk about doing this and, I think, Mark stated you couldn't trust the output from the Vidcard anyway.<br>Not sure about OGL but, with DX, here's what I think happens from checking the code.<br>Loadimage/Loadanimimage loads the file as a pixmap internally. <br>When you drawimage for the first time, DX will create a surface and apply the pixmap as a texture moving it to Vidmem.<br>DX Texture Manager is used to move images in/out of Vidmem as required. The algos are on the web somewhere but, basically, it's an oldest/least used affair. <br>If you have LOTS of images which are used often and/or small graphics mem you can get into a trashing state affecting performance. <br>Single-surface images can get around this to some degree as<br>can your drawing order. <br>I suppose if there was a tool which could cap VRAM, RAM, CPU Speed you could check the lowest spec your game runs OK on and make them your minimum requirements.<br>Anybody know such a tool? <br><br></td></tr></table><br>
<a name="692149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Josepho</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a question, if i set the game depth to 16, it will comsume less video memory ? I try it but i cant look the process textbox without minimize the game so i cant watch how memory is taking.. <br><br></td></tr></table><br>
<a name="692194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seriously, download video mem watcher. It's like the process viewer except it monitors only video ram usage. You can open it in the background, then open your game, let your game run for a bit, and then check the usage stats. <br><br></td></tr></table><br>
<a name="692464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Punksmurf</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it's also an idea to try ogl-driver insteat of the dx one. Wouldn't hurt, anyway. <br><br></td></tr></table><br>
<a name="692695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it isn't ATI Radeon or NVidia Geforce, it would seriously hurt ... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
