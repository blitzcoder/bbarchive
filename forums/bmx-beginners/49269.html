<!DOCTYPE html><html lang="en" ><head ><title >getmouse() and getkey() alternatives.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >getmouse() and getkey() alternatives.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >getmouse() and getkey() alternatives.</a><br><br>
<a name="547825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TrickyRic</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i only purchased blitzmax today, the linux build, and must admit so far i'm impressed! however, it seems a few too many commands have been depricated and thus i'm having a little trouble porting some of my old win32 applications over...<br><br>the two functions bugging me the most (parden the pun) are getmouse(), and getkey(). for screensaver development these functions were pretty much a requirement in blitzbasic and blitz3d as conditions within the main loop. why have they been depricated from max? too many differences in the api of linux, mac, and windows maybe? whatever the reason, i need a solution! how do others check for mouse and keyboard input without having to check each individual key/button in one LONG statemente of or operators?<br><br>ty. <br><br></td></tr></table><br>
<a name="547829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzwiki.org/index.php/Main_Page" target="_blank">http://www.blitzwiki.org/index.php/Main_Page</a><br><br><br>Guide there shows the main differences between Blitz3D and Blitzmax - might help. <br><br></td></tr></table><br>
<a name="547837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TrickyRic</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi.<br><br>thanks for the link but to be honest i'd already noticed it in the stickies &lt;grin&gt;. it helped me in other areas, such as the introduction of framework and import commands (kinda funny seing a c like structure in a basic interpretation, but what the hell it speeds compilation and execution up by unbloating scripts so...), but i can't find any reference to the above deprications. <br><br></td></tr></table><br>
<a name="547846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you have GetChar() to check keyboard input, although this is mainly keys with ASCII codes.  If you want to check for all scancodes then you could use...<br><br><pre class=code>
Function GetKey:Int()
  Local key:Int=-1
  For Local i:Int = 0 to 255
    If KeyHit(i) Then key=i;Exit
  Next
  Return key
End Function
</pre>Where -1 would indicate no key was pressed and anything else would return the key code (not the usual scancode) of the key.<br><br>I wouldn't have thought this necessary in a screensaver though, as I don't think that many people would press anything other then Space or Return to get out.  Unless you have something else in mind.<br><br>As for the mouse, the 3 mouse buttons actually have key codes (or you could use the usual MouseHit or MouseDown).  As for the movement, simply keep track of the last known X and Y co-ordinates and if they change the next frame you know the mouse has moved.<br><br>Hope that helps a little. <br><br></td></tr></table><br>
<a name="547876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TrickyRic</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> theoretically looping through the keys would indeed do the same job as good ol' getkey, but in practice having to parse through so many functions and condition checks every single time the main loop loops a cycle would surely slow things down considerably? this is already a pretty resource hungry screensaver i'm porting over (hell its optimal resolution is 400x300 in a 16bit colour depth!).<br><br>whats more, being the freak that i am, i'm a sucker for tradition, and traditional screensavers take ANY mouse or keyboard input as a signal to close. why's this a problem? well put simply, not all mice are 2-3 button. more precisely, anyone who's played with the xorg/xf86 settings for the inputdevice section on a linux box will know that different systems map different buttons. the mx1000 is a great example of this - with a default config and no zaxismapping values, some of the buttons behave somewhat oddly...<br><br>now i have no knowledge of the workings behind the getkey() or getmouse() functions in previous blitz releases, but i'd assume at least getmouse() would offer something reliable enough to deal with this kind of scenario? a direct interface with the i/o buffers of the operating system perhaps? if so then looping through possible hits simply wouldn't be reliable enough for use in a traditional screensaver.<br><br>maybe i'm looking too deep into all this? i can be somewhat of a perfectionist at times... <br><br></td></tr></table><br>
<a name="547884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maybe i'm looking too deep into all this? <br></div><br><br>:)<br><br><pre class=code>
Graphics 640,480,16

Local mx = MouseX()
Local my = MouseY()

Repeat
	If GetChar() End
	If MouseHit(1) Or MouseHit(2) Or MouseHit(3) End
	If MouseX()&lt;&gt;mx Or MouseY()&lt;&gt;my End
Forever
</pre><br><br>That'll do it. <br><br></td></tr></table><br>
<a name="547886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ashmantle</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzBasic and Blitz+ and Blitz3D all have functions for retrieving key states and mouse movement.<br><br>BlitzMax has this for keys:<br><br>GetChar();<br>if any key is pressed on the keyboard, blitzmax maintains a queue of them and GetChar() returns the character code or 0 if queue is empty.<br><br>Mouse:<br><br>MouseX() and MouseY() (MouseZ() for mousewheel)<br>they will return current position in relation to top-left corner of screen. Easy to write MouseMoved() function from this.<br><br>EDIT: bah, Papa Lazarou beat me to it ^^ <br><br></td></tr></table><br>
<a name="547887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, but i forgot MouseZ :) <br><br></td></tr></table><br>
<a name="548029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TrickyRic</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> cheers guys, getchar() does the trick. surprised i didn't notice that in the command index actually, hehe.<br><br>still a little worried about mouse input though. without a generic function like the previous getmouse(), developers have to assume the use of a 1-3 button mouse... mine has 8 plus horizontal and verticle scroll... <br><br></td></tr></table><br>
<a name="548031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does not change anything as only 3 buttons and 3 axises are supported. (more were only supported in old Blitz through DirectInput) <br><br></td></tr></table><br>
<a name="548130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TrickyRic</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> guess i'll declare this as solved then :). cheers guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
