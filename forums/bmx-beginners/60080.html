<!DOCTYPE html><html lang="en" ><head ><title >Creating none rectangular window</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating none rectangular window</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Creating none rectangular window</a><br><br>
<a name="670143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can BlitzMax be used to create a windowed app that does not have a standard rectangular window?<br><br>Apologies if this has been answered but I could not find any referece to none rectangular windows on the Forums.<br><br>Thank You <br><br></td></tr></table><br>
<a name="670147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not being funny, but when have you seen any nonrectangular windows? <br><br></td></tr></table><br>
<a name="670149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Winamp and a few other 'windowed' applications that are not rectangular. <br><br></td></tr></table><br>
<a name="670152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No  they are rectangular, but copy the desktop to a canvas, then copy the "distorted" image over to it, with full transparency for the bits "outside" the application.<br><br>Or simply copy the "distorted" image onto the desktop<br><br>IE, They make bits of the rectangle see though/invisable <br><br></td></tr></table><br>
<a name="670155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> But they only respond to mouse activity within their own space not their default rectangle?<br><br>Anyway is there a way to do this "distorted" image thing in BlizMax?<br><br>Regards <br><br></td></tr></table><br>
<a name="670161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> it should actually be simple for mark to add it in win2k/xp but thats probably why he wont, it wouldnt be cross platform. <br><br></td></tr></table><br>
<a name="670162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try.<br>Make a canvas, attached to the desktop, set transparacy, (Using setalpha, and setblend) and see. <br><br></td></tr></table><br>
<a name="670166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can easily ignore mouse activity that is outside of a given area by doing per-pixel collision checks.<br><br>I also agree that most windows will be actually rectangular and copy what is beneath them. That said, what if you move a window underneath/behind a non-rectangular window? Will it update in the corners?<br><br>You can set an Alpha value for gadgets... does this apply to windows? <br><br></td></tr></table><br>
<a name="670185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK I've managed to get the border to go transparent but the main window area stays opaque...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Extern "win32"
   Function GetActiveWindow%()
   Function ShowWindow(hWnd , state)
   Function SetWindowLongA(hWnd, nIndex, dwNewLong)
   Function SetLayeredWindowAttributes(hwnd, crKey, bAlpha, dwFlags)	
EndExtern

Graphics(320,180,0)

Local win=GetActiveWindow()
ShowWindow(win,False)

Const GWL_STYLE = -16
Const GWL_EXSTYLE = $FFFFFFEC

Const WS_BORDER = $800000
Const WS_EX_LAYERED = $80000
Const WS_CAPTION =$C00000
Const SWP_FRAMECHANGED = $0020
Const SWP_SHOWWINDOW = $0040
Const SWP_HIDEWINDOW = $0080


Local old:Int=GetWindowLongA(win,GWL_STYLE)

Local newstyle:Int = old &amp; WS_EX_LAYERED


Local style:Int=SetWindowLongA(win,GWL_EXSTYLE,newstyle)

SetWindowPos(win , HWND_TOP , 100 , 100 , 320 , 180 , SWP_FRAMECHANGED | SWP_HIDEWINDOW) ; 

SetWindowLongA(win, -20,  $80000)

SetLayeredWindowAttributes(win, 0,100,2)

ShowWindow(win , 1)

SetAlpha(0.5)

Repeat

	DrawText "What No Borders",0,0 

Flip()

Until KeyHit(KEY_ESCAPE)

End
</textarea><br><br>Note that the code is based on some snippets dragged together so I could be missing the point here, can anyone provide additional help/guidance/advice?<br><br>Regards <br><br></td></tr></table><br>
<a name="670199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would have gone for using DeskTop:TGadget, and putting a canvas on that <br><br></td></tr></table><br>
<a name="670230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to add a canvas with Desktop() as the parent group, without a window? <br><br></td></tr></table><br>
<a name="670235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont know, thats just how I would find out, if I wanted to know <br><br></td></tr></table><br>
<a name="670262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> there are winapi commands that allow you to set the clipping rect of a window to polygon, thus allowing non-rectangular windows.<br><br>SetWindowRegion I think it is. <br><br></td></tr></table><br>
<a name="670271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erroneouss</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> TheCodeProject.com had something as using a bitmap to make a non-rectangular window in C# with the Windows API and BlitzSys has it too (But it is Blitz3D).  So it is possible :] <br><br></td></tr></table><br>
<a name="670990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it should actually be simple for mark to add it in win2k/xp but thats probably why he wont, it wouldnt be cross platform. <br></div><br><br>What?? Should be possible on all 3 platforms = cross platform<br><br>One good example in linux = Mplayer <br><br></td></tr></table><br>
<a name="671001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not that sure, that Cocoa allows this kind of stuff at all as it has the by far most restrictive rules on what is allowed in GUI (like buttons can't be oversized etc). <br><br></td></tr></table><br>
<a name="671038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> is that on mac? <br><br></td></tr></table><br>
<a name="671045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes <br><br></td></tr></table><br>
<a name="671068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's have to work on all three platforms for brl to add it. <br><br></td></tr></table><br>
<a name="671091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Because buffered windows are required for transparency or non-rectangular shapes, almost all Cocoa windows are buffered. Nonretained windows are appropriate for transitory images or simple connection lines, such as are used in Interface Builder for target-action connections. <br></div><br><br><a href="http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CoreAppArchitecture/chapter_7_section_4.html" target="_blank">http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CoreAppArchitecture/chapter_7_section_4.html</a><br><br>Anything is possible ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
