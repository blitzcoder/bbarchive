<!DOCTYPE html><html lang="en" ><head ><title >Corrupt picture when using Flip Command ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Corrupt picture when using Flip Command ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Corrupt picture when using Flip Command ?</a><br><br>
<a name="1185379"></a>

<a name="1185380"></a>

<a name="1185382"></a>

<a name="1185385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just done a random screen fill routine to display a picture.<br><br>In windowed mode it works fine,but in full screen mode it draws the picture,and then steps back to an unfinished picture,with thousands of missing pixels.<br><br>If I plot the picture randomly,and do a flip at the end,the picture is fine.<br><br>If I do multiple flips to see the picture being drawn,then the picture looks corrupted.<br><br>Any idea why ? <br><br></td></tr></table><br>
<a name="1185386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you drawing the entire image before the screen flip or just adding a few pixels to the back buffer and expecting it to update accordingly?<br><br>You can't rely on the contents of the back buffer after a flip has been made. <br><br></td></tr></table><br>
<a name="1185387"></a>

<a name="1185388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am drawing a few pixels to the backbuffer,then perform the flip.<br><br>And do this over and over again until the picture is drawn. <br><br></td></tr></table><br>
<a name="1185389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think tbh we would need to see the code, there are loads of things that could come into play here. A nice checklist to check for is:<br>1) Full screen depth compared to desktop depth making sure its the correct depth for the image.<br>2) resolution<br>3) plotting the pixel at the correct x, y coordinate (simple I know but sometimes overlooked)<br>4) Try a different renderer with SetGraphicsDriver sometimes you may get strange results depending on your hardware in this instance change the graphics driver and see if it helps (yes I have had this with a Intel GMA 945)<br>5) try it with a different image.<br><br>:P <br><br></td></tr></table><br>
<a name="1185390"></a>

<a name="1185391"></a>

<a name="1185392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am too embarrassed to show you my code.....lol<br><br>But will go through your checklist.<br><br>Reagrding point 5.<br><br>I was having exactly the same results when i was plotting plain pixels,let alone plotting a picture. <br><br></td></tr></table><br>
<a name="1185393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> how are you loading the image, if your doing plotting I would load it as a pixmap and plot from the RGB values of that this way it will be easier for you to get all the relevant data from the image. <br><br></td></tr></table><br>
<a name="1185394"></a>

<a name="1185395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can't rely on the contents of the back buffer after a flip has been made.  <br></div><br>That's almost certainly the real issue. You might expect that after a Flip the backbuffer will hold whatever was previously on screen, i.e. the front buffer.<br><br>But there are no guarantees. The graphics driver can do anything it likes to the back buffer after a flip. It could clear it, or not. It might even use it for "scratch paper" in preparation for whatever it will do during the actual rendering. <br><br></td></tr></table><br>
<a name="1185396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have yet to learn about pixmaps :(<br><br>I think firstly,I should try to get it behaving properly,with plotting plain white pixels ?<br><br>My code is obviously quite rough....hmmm <br><br></td></tr></table><br>
<a name="1185397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> So,how can I guarantee the contents of the backbuffer ? <br><br></td></tr></table><br>
<a name="1185398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use CLS to clear the buffer before drawing operations but this will clear anything you drew to it after the last flip <br><br></td></tr></table><br>
<a name="1185399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah,I tried CLS,but couldn't see anything being drawn.....lol <br><br></td></tr></table><br>
<a name="1185400"></a>

<a name="1185401"></a>

<a name="1185402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> try this, change image.png to your own image<br><br><pre class=code>
'plot test

Graphics 1024, 768, 32		'fullscreen

Global Image:TPixmap = LoadPixmap( "image.png" )

Global Temp:TPixmap = CreatePixmap( Image.Width, Image.Height, PF_RGBA8888 )

Local X:Int, Y:Int		'variables for plotting
Local Pixel:Int

While KeyDown( KEY_ESCAPE )=0
		Cls							'clear the buffers
		X = Rand( Image.Width -1 )
		Y = Rand( Image.Height -1 )
		Pixel = ReadPixel( Image, X, Y )
		WritePixel( Temp, X, Y, Pixel )  
		DrawPixmap Temp, 0, 0
		Flip
		Delay( 1 )						'to stop 100% CPU usage
Wend
End
</pre><br><br>its not fast but will give you an idea :)<br><br>Basically create a temp pixmap that will hold what the user will see, read a pixel from the image pixmap that we loaded and plot it on the temp one then render that. <br><br></td></tr></table><br>
<a name="1185403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the code.<br><br>Will LoadPixmap load .jpg as well as .png ?<br><br>because I loaded a .jpg and changed the resolution to 1920 x 1080.<br><br>but the program just hung ? <br><br></td></tr></table><br>
<a name="1185404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this one, this uses the standard LoadImage :)<br><br><pre class=code>
'plot test

Graphics 1024, 768, 32		'fullscreen

Global Image:TImage = LoadImage( "image.png" )
Global ImagePixmap:TPixmap

Global Temp:TPixmap = CreatePixmap( Image.Width, Image.Height, PF_RGBA8888 )

Local X:Int, Y:Int		'variables for plotting
Local Pixel:Int

While KeyDown( KEY_ESCAPE )=0
		Cls							'clear the buffers
		X = Rand( ImageWidth( Image ) -1 )
		Y = Rand( ImageHeight( Image ) -1 )
		ImagePixmap = LockImage( Image )
		Pixel = ReadPixel( ImagePixmap, X, Y )
		UnlockImage( Image )
		WritePixel( Temp, X, Y, Pixel )  
		DrawPixmap Temp, 0, 0
		Flip
		Delay( 1 )						'to stop 100% CPU usage
Wend
End
</pre><br><br>:) <br><br></td></tr></table><br>
<a name="1185405"></a>

<a name="1185406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is mad.....<br><br>I tried the second code sample,<br><br>Changed the resolution to 1920 x 1080 and the image to a .jpg.<br><br>It still bombed ? <br><br></td></tr></table><br>
<a name="1185407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have tested the above code with the resolution you require and tested different formats like jpg, png, bmp and tga and it works perfectly I would in this instance update the video drivers for your graphics card. <br><br></td></tr></table><br>
<a name="1185409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> How strange,<br><br>I have an Nvidia 660 GTX with the latest drivers installed.<br><br>hmmmm.<br><br>Maybe the problems I am having are with the graphics driver then ? <br><br></td></tr></table><br>
<a name="1185410"></a>

<a name="1185411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a NVidia 9400M here with the latest drivers for the card and it works perfectly as expected.<br><br>Try adding<br><pre class=code>
SetGraphicsDriver GLMax2DDriver()
</pre><br><br>to the beginning of the source code before the Graphics statement and see if it helps :) <br><br></td></tr></table><br>
<a name="1185413"></a>

<a name="1185415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I updated the graphics drivers,and tried adding the GLMax2DDriver,but still nothing is working ?<br><br>Should I reinstall Blitzmax,maybe its corrupted ? <br><br></td></tr></table><br>
<a name="1185417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I installed codeblocks recently,maybe thats cocked something up ? <br><br></td></tr></table><br>
<a name="1185421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is a weird one indeed, on my machine it works perfectly as expected but on yours it bombs, are you trying it in debug mode Programs&gt;&gt;Build Options&gt;&gt;Debug should be ticked also Programs&gt;&gt;Build Options&gt;&gt;Build GUI App should also be ticked :). It might shed light as to whats wrong. <br><br></td></tr></table><br>
<a name="1185424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Build GUI App   ( wasn't ticked ) ?<br><br>I will try the code om my other PC. <br><br></td></tr></table><br>
<a name="1185426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> You aint gonna believe this,<br><br>I just copied and pasted your code into blitz and compiled it from there and nothing happened right ?<br><br>But when I saved it,then compiled it,it worked :) <br><br></td></tr></table><br>
<a name="1185427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> As this uses graphics you HAVE TO HAVE 'Build GUI App' ticked otherwise it will 'bomb' :) <br><br></td></tr></table><br>
<a name="1185429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damm !  Sorry :(<br><br>Will your routine randomly fill the entire picture without picking previously plotted pixels again ? <br><br></td></tr></table><br>
<a name="1185430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> dont apologise we all make those mistakes the build gui app one we have all made at least once or twice when start using BlitzMax.<br><br>The code just picks a random pixel and then plots it to a pixmap then displays it, it doesnt check for already used pixels so it can overwrite pixels with other pixels. I created the code merely to demonstrate the idea and a good way of going about it, yes there are numerous ways to go about it but this to me is one of the better ones :) <br><br></td></tr></table><br>
<a name="1185431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will have a look at your code in more detail.<br><br>And thanks for the insight into pixmaps........will try to use this.<br><br>Thanks again,I appreciate it :) <br><br></td></tr></table><br>
<a name="1185489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you do a Flip, the backbuffer content is copied to the visible screen and then the backbuffer is trashed, or becomes part of a chain of several backbuffers whose content is trashed. After you flip you must then do a clear-screen and then draw something. You will only see what is drawn IN THE CURRENT FRAME and nothing else. So if you want to see a progressive update then you either have to redraw everything from the start all the way up to your progress point, or before you do a Flip you need to grab the backbuffer into an image and then redraw that image at the start of the next frame before you pick up the drawing where you left off. <br><br></td></tr></table><br>
<a name="1185502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok,I think I understand....<br><br>So if I plot some pixels to the pixmap and then flip,and then add some more pixels to the pixmap then do another flip and so on ?<br><br>because the pixmap will be constant, and the backbuffer will be not ? <br><br></td></tr></table><br>
<a name="1185529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's one way, yes, though somewhat slow perhaps. <br><br></td></tr></table><br>
<a name="1185575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can either<br><br>a) draw to a pixmap and then drawpixmap every frame<br><br>b) draw to the backbuffer then grab it into an image and draw that image each frame<br><br>c) draw to the backbuffer from the beginning of the `drawing` up to a stopping point each frame, starting from scratch each time. <br><br></td></tr></table><br>
<a name="1185578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> This begs the question...<br><br>Could BlitzMax be modified to allow us access to these back buffers?  So, we can be sure to keep them around and be able to use the same one over and over, or flip between two different back buffers, etc...<br><br>Or, is this part of the code out of our reach? <br><br></td></tr></table><br>
<a name="1185595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> The backbuffers seem to be graphics-card specific too -- depending on the card (and drivers) I've seen anywhere from 2 to 4 different backbuffers that get cycled through.<br><br>Never assume that the backbuffer contents remain after a flip. <br><br></td></tr></table><br>
<a name="1185770"></a>

<a name="1185771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can either<br><br>a) draw to a pixmap and then drawpixmap every frame<br><br>b) draw to the backbuffer then grab it into an image and draw that image each frame<br><br>c) draw to the backbuffer from the beginning of the `drawing` up to a stopping point each frame, starting from scratch each time. <br><br>-ImaginaryHuman-   <br></div><br><br>Ok,have been messing around with the A &amp; C options,and these are my findings.<br><br>The times it took to perform my task are based on a 1920 x 1080 resolution and drawing 5760 pixels per flip.<br><br>a) This is the best method so far....40 Seconds<br><br>b) Haven't tried this yet,but would it be quicker than a ?<br><br>c) This took the longest time,180 seconds.<br><br>My original method finished in 10 seconds,but as you guys pointed out to me,you can't rely on the backbuffer,so my routine was pretty useless,as it<br>just trashed the graphics at the end. <br><br></td></tr></table><br>
<a name="1185814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you "grabimage" each frame it will be slow. Instead just "cache" the image for every eg. minute. After that time period you just refresh the cache. So you have an image of "up to a minute ago + pixels to draw for that minute". If you do this eg. every 10 seconds you average out the time it needs to do that "heavy" grabimage.<br><br><br>Another idea is to split the screen into chunks. If a chunk is 100% "filled", just display its SubImage (DrawSubImageRect) as this should be faster than single-plotting them. The smaller the split-settings are (eg. 20x20 tiles) the faster they get 100% filled - but the more tiles have to get drawn each flip.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1185832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about this problem myself.  Solved it by adding a command to the max2d modules which change the behavior of the MASKBLEND option of SetBlend.  I posted the changes here <a href="http://blitzbasic.com/Community/posts.php?topic=100428" target="_blank">http://blitzbasic.com/Community/posts.php?topic=100428</a> <br><br></td></tr></table><br>
<a name="1185854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grabbing to an image is not all that quick but drawing the image afterwards is 10x or more faster than drawing a pixmap. So as mentioned above you could grab the image once every x number of frames and then use that as your baseline of where to draw newer pixels from. Bear in mind also though that drawing pixels to the backbuffer requires uploading geometry over the graphics bus to the gpu which is likely a lot slower than drawing to the pixmap using the cpu. So there are tradeoffs.<br><br>You can't get direct access to the backbuffer like you used to be able to `in the old days` because it is now `owned` by the OpenGL or DirectX API's which have their own interface to the resources they've allocated on the hardware... so the backbuffer is kind of inside of OGL/DX and it's unknown exactly what format the data will be stored in.. it could be ARGB, BGRA, RGBA, could be 32-bit, could be 16-bit, could be floating point, whatever. So it's basically not something that the API's have exposed in order to allow you to use the same API on different hardware without worrying about lots of different possible storage formats.<br><br>You could partly get around that using a framebuffer/render-texture and then drawing to the texture and then at the end drawing the texture to the backbuffer. However even then the internal format of the texture is not necessarily known regardless of what format you asked it to be. <br><br></td></tr></table><br>
<a name="1185923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drex</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ok,have been messing around with the A &amp; C options,and these are my findings.<br><br>The times it took to perform my task are based on a 1920 x 1080 resolution and drawing 5760 pixels per flip.<br><br>a) This is the best method so far....40 Seconds<br><br>b) Haven't tried this yet,but would it be quicker than a ?<br><br>c) This took the longest time,180 seconds.<br><br>My original method finished in 10 seconds,but as you guys pointed out to me,you can't rely on the backbuffer,so my routine was pretty useless,as it<br>just trashed the graphics at the end.  <br></div><br><br>Oh dear :(<br><br>I didn't realise that having debug ticked,slowed the programs down so much.<br><br>Option a) doesn't take 40 seconds at all,it takes 5 :)<br><br>Thanks for all your help guys,<br><br>Sorry for being such a noob.....lol<br><br>At least i'm in the right forum section :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
