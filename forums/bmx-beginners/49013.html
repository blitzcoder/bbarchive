<!DOCTYPE html><html lang="en" ><head ><title >Step expression must be constant?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Step expression must be constant?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Step expression must be constant?</a><br><br>
<a name="545183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why does the step part of a for/next loop has to be constant? I find this seriously annoying, because is means that i have to rewrite something simple as:<br><pre class=code>For local x = 0 to width step gridsize</pre><br>to:<br><pre class=code>Local x
While x &lt; width
    x :+ gridsize
Wend
</pre><br>It might be a small detail, but I really don't see any reason for the step part to be constant...<br><br>Also the help documents say:<br><div class="quote"> <i>Keyword To</i> Followed by a constant which is used to calculate when to exit a For..Next loop. <br></div> But the To keyword, luckily, doesn't need to be followed by a constant. <br><br></td></tr></table><br>
<a name="545188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I understand it, one of the reasons it has to be constant is because if you were to modify gridsize, it would probably end up throwing an exception (you could end up referencing beyond the end of an array for instance). <br><br></td></tr></table><br>
<a name="545192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> true, but there are loads of constructions which you can use to create errors which doesn't mean that those constructions should be limited.<br><br>besides, i (wrongfully?) assume that, for the compiler, the step expression works like the while/wend construction above. <br><br></td></tr></table><br>
<a name="545195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's also for compiler optimization actually, I seem to recall a discussion about this issue elsewhere (maybe for B3D).<br><br>*EDIT*<br><br>here we are:<br><a href="http://www.blitzbasic.com/archive/posts.php?topic=18836" target="_blank">http://www.blitzbasic.com/archive/posts.php?topic=18836</a> <br><br></td></tr></table><br>
<a name="545219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah, i see, mark is being anal ;) but it seems to make sense so i'll just shut it and use while/wend instead. <br><br></td></tr></table><br>
<a name="545383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I think it's also for compiler optimization actually, I seem to recall a discussion about this issue elsewhere (maybe for B3D). <br></div><br><br>I appreciate the performance improvements, but I really think that a potential optimisation is not a justification for such a language limitation.<br><br>Ideally, the compiler should see whether or not the step expression is constant or variable, and only add the additional code if it is variable.  As long as the behaviour is well-documented, it shouldn't be a problem.<br><br>I believe such optimisations are the reason why case statements in some languages must be constant.  I think that the compiler should look at the whole switch / select construct and if all of the case expressions are constant, it will produce specially optimised code, otherwise it will generate the equivilent of a series of if...elseif...endif statements. <br><br></td></tr></table><br>
<a name="545439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmoc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;&lt;&lt; I agree with him <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
