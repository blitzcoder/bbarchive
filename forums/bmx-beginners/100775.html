<!DOCTYPE html><html lang="en" ><head ><title >beginner question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >beginner question</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >beginner question</a><br><br>
<a name="1192677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ashes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am initializing a variable inside a function<br><br>like this: Global CurrentPiece:TPiece=New TPiece<br><br><br>then in another function I use the variable: <br><br>CurrentPiece.yPos:+1<br><br>I get a compiler error: "Identifier 'CurrentPiece' not found.<br>yPos has implicit value in type definition.<br><br>Why does this happen? If I initialize the varibale outside the function it compiles without errors. <br><br></td></tr></table><br>
<a name="1192678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A global inside a function is the same as a static local, it's not global to the whole program, thus only available in that function. <br><br></td></tr></table><br>
<a name="1192684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ashes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks <br><br></td></tr></table><br>
<a name="1192688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> another begginers question <br><br>If i have a TList<br>and i want to get the last object on the List. how can i get it? <br><br></td></tr></table><br>
<a name="1192696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> SuperStrict<br>Global MyList:TList=New TList<br><br>ListAddLast MyList , "One"<br>ListAddLast MyList , "Two"<br>ListAddLast MyList , "Three"<br><br>If Not MyList.IsEmpty() Then <br> Local s:String = String( <b>MyList.last()</b> )<br> Print s  'prints Three<br>EndIf <br><br></td></tr></table><br>
<a name="1192709"></a>

<a name="1192711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> And another way to populate the list:<br><pre class=code>SuperStrict

Global myList:TList = New TList

myList.AddLast("One")
myList.AddLast("Two")
myList.AddLast("Three")

If Not myList.IsEmpty() Then
	Local s:String = String(myList.Last())
	Print s
EndIf</pre><br>This is more in the OO style of coding. <br><br></td></tr></table><br>
<a name="1192726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Global can be a bit confusing as it acts different ways depending on where it is in the program.  A Global at the start of a program acts the way you expect, accessible to any function or routine.  A Global defined in a function acts more like a static variable, one which retains its value with multiple function calls as oppose to a local which gets re-initialized with each call.<br><pre class=code>SuperStrict

For Local i:Int = 1 To 10
	MyFunction()
Next

Function MyFunction()
	Global a:Int = 0 'this will retain it's value over several calls
	Local b:Int = 0 'this will be re-initialized to 0 each call
	
	a :+ 1
	b :+ 1
	
	Print "A = "+a+", B = "+b
End Function
</pre><br><br>If a Global is used in a Type, then the variable is shared among all instances of the type, can even be accessed without creating an instance, as opposed to a Field which belongs only to that type itself.<br><pre class=code>SuperStrict

Type THello
	Global a:Int = 10'This will be shared with all instances
	Field B:Int = 5'Each instance will get it's own B
End Type

Local AWorld:THello = New THello
Local BWorld:THello = New THello

'Print the initial values
Print "AWorld.a = "+AWorld.a+", AWorld.b = "+AWorld.b
Print "BWorld.a = "+BWorld.a+", BWorld.b = "+BWorld.b+"~n"

AWorld.a = 50 'Change the variables in AWorld
AWorld.b = 120

'Bworld.a changes because it shares with AWorld.a, but BWorld.b
' retains its own value
Print "AWorld.a = "+AWorld.a+", AWorld.b = "+AWorld.b
Print "BWorld.a = "+BWorld.a+", BWorld.b = "+BWorld.b+"~n"

'THello.a can even be accessed without creating an instance of the type
Print "THello.a = "+THello.a

'This would create an error because Fields need an instance of the type
'Print "THello.b = "+THello.b
</pre> <br><br></td></tr></table><br>
<a name="1192742"></a>

<a name="1192763"></a>

<a name="1192764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UNZ</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @global in types<br>have also a look at <a href="http://www.blitzbasic.com/Community/posts.php?topic=100761" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=100761</a><br><br>@global in functions<br>I didn't know that! With this you can create encapsuled functions in some very cool ways. That was one of the things I missed in BMax. I once had the homework to write a "tamagotchi" in some scheme dialect in college.<br>Here it goes in BMax (plus a sum example):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict
Framework brl.standardio

Function add:Int(a:Int, b:Int) Return a + b End Function 'calculate a+b
Function sub:Int(a:Int, b:Int) Return a - b End Function'calculate a-b
Function alternate:Int(a:Int, b:Int) Return a+(b * (-1)^b) End Function 'calculate a+-b with alternating sign

Print "~nadd sum:" + sum(5, add) 'compute and print 0+1+2+3+4+5
Print "sub sum:" + sum(5, sub) 'compute and print 0-1-2-3-4-5
Print "alternate sum:"+sum(5,alternate) 'compute and print 0+1-2+3-4+5

'create a tamagotchi
Print "~nTAMAGOTCHI"
local tama(action:String) = create_tamagotchi()
tama("time_passes") 
tama("feed")
tama("time_passes")
tama("feed")
tama("time_passes")
tama("time_passes")
tama("feed") 'We can't feed it because it is dead (NOOOOOOO!!!)

'-----------------------------------------------------
Rem
	bbdoc: generic sum function to iterate over integers 1,2,3 ... i and perform an operation on them
End Rem
Function sum:Int(i:Int, operation:int(a:Int,b:Int))
	Global s:Int
	Global op:Int(a:Int, b:Int)
	s = 0
	op= operation
	Return sum_iter(i)
	
	'-----------------------------------------------------
	Function sum_iter:int(i:Int)
		If i &lt;= 0
			Return s
		Else
			s= op(s,i)
			Return sum_iter(i-1)
		Endif
	End Function
End Function

'-----------------------------------------------------
Rem
	bbdoc: create a tamagotchi.
	about: This tamagotchi will have 2 of 'food'.
				It is dead when it has 0 of 'food'.
				You need To feed it so it stays alive.
				When it is happy it makes an 'annoying noise' but when it is dead there is only silence...
End Rem
Function create_tamagotchi(action:String)()
	Global food:Int
	food= 2
	Return tamagotchi
	
	'-----------------------
	Function tamagotchi(action:String)
		
		Select action
			Case "feed"
				feed()
			Case "time_passes"
				time_passes()
			Default
				Print "unkown action:" + action
		End Select
		
		'------------------------------
		Function feed()
			If food &lt;= 0
				Print("silence...")
				Return'dead already?
			EndIf
			Print("annoying noise")
			food :+ 1
		End Function
		
		'------------------------------
		Function time_passes()
			Print "tick-tock"
			If food &lt;= 0 Then Return 'dead already?
			
			food :- 1
			If food = 0 Then Print("your tamagotchi starved!")
		End Function
	End Function
End Function
</textarea><br><br>EDIT:<br>No wait, I just realized that there can only be one instance of that global in a function. That means that for example a second tamagotchi:<br><pre class=code>
local tama2(action:String) = create_tamagotchi()
</pre><br>will be identical with the first. So it is still not the same as local variables accessible by inner functions. Too bad <br><br></td></tr></table><br>
<a name="1192840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ashes</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks TomToad - very useful, and also adds more clarity to jsp's answer.<br><br>@unz<br>I didn't know you can use nested functions in Bmax... pretty neat. <br><br></td></tr></table><br>
<a name="1194365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UNZ</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wanted to mention that you can define constants inside a function as well<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict
Framework brl.standardio

bla()
Function bla()
	Const MY_CONST:int=1
	DebugLog MY_CONST
	
	'This does not work because it is a constant
	'My_CONST= 2
End Function

'This does not work because it is outside of the function
'DebugLog MY_CONST
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
