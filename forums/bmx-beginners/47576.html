<!DOCTYPE html><html lang="en" ><head ><title >Why is Self=Null wrong?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why is Self=Null wrong?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Why is Self=Null wrong?</a><br><br>
<a name="528699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My first day of actually trying to learn BlitzMax after owning it and not using it for six months. ( Translation: Expect many more stupid questions soon. )<br><br>I have a type with a create function and delete method. In the delete method, I nullify the instance with Self=Null but the compiler won't have it. Am I not supposed to assign anything to Self? What's the preferred way then? <br><br></td></tr></table><br>
<a name="528719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> self is not a var and thus cannot be assigned.<br><br>try:<br><pre class=code>
function Destroy(todestroy:TMyType)
    todestroy = null
    flushmem
End Function
</pre> <br><br></td></tr></table><br>
<a name="528722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pert: Don't you mean..<br><br><pre class=code>
Function Destroy( Destroyable:Object Var )
     Destroyable = Null
     FlushMem
End Function
</pre><br><br>Which is rather weird, because you'd be better off just setting the variable to Null.  But then, can you pass Self to a Object Var that nullifies it?<br><br>To the testing grounds! <br><br></td></tr></table><br>
<a name="528723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, you can't. <br><br></td></tr></table><br>
<a name="528724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That works, thanks. It still seems wrong that you can't destroy a type instance from a method.<br><br><pre class=code>
Cube.Free()
</pre><br><br>makes much more sense than<br><br><pre class=code>
MeshType.Free(Cube)
</pre> <br><br></td></tr></table><br>
<a name="528750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> setting it to null doesn't actually free it though.<br><br><b>All null does is set the handle to null</b><br><br>Once the object has no handles, it is destroyed by flushmem.  This way you cannot have memory problems by trying to access something that's been freed.  In many cases an object will only have one handle. this is why "=null" works.  Handles can also go out of scope (especially in strict mode).  Just dont worry about it, set all handles you wont need afterwords to null and flushmem occasionally.  The only time you really have to worry about it is with cyclic types like TList... <br><br></td></tr></table><br>
<a name="528773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know all that. What I don't get is why we have to go the long and ugly route of doing it with a static function and passing the instance when a method could null-ify it-self. Just seems like that would be the cleaner syntax. <br><br></td></tr></table><br>
<a name="528788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> uh, if you understood all that you would know that nothign can null-ify a type.  you can only nullify its handles. <br><br></td></tr></table><br>
<a name="528887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jay Kyburz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> so umm. in my game, all i am doing is removing the instance of my type from a list of said type so that is no longer refrenced by anything. Is this freeing its memory? (i have freemem in my main loop. <br><br><br>Methond New()<br>  myList.addlast self<br>End Method<br><br>Method Free()<br>    mylist.remove self<br>End Method<br><br>oh yeah.. and how do you do the code thing <br><br></td></tr></table><br>
<a name="528904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  uh, if you understood all that you would know that nothign can null-ify a type. you can only nullify its handles. <br></div><br><br>And if Self is the handle you used when calling the method, that's exactly how the method should see it. The handle I passed should be nullified. <br><br></td></tr></table><br>
<a name="528916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hakea - <a href="http://blitzwiki.org/index.php/Memory_management" target="_blank">BlitzWiki</a> to the rescue...<br><br>Oh, and...<a href="/faq/faq_entry.php?id=2" >What are the forum codes?</a> <br><br></td></tr></table><br>
<a name="529017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> [code]<br>Type MyEntity<br>   Global _list:TList<br>   Field _link:TLink<br>   <br>   Method New( )<br>      _link = _list.AddLast( Self )<br>   End Method<br>   <br>   ' Of course, you also have to nullify your reference to it then call FlushMem.  But this gives you a chance to free any other resources.<br>   Method Dispose( )<br>      _link.Remove( )<br>   End Method<br>End Type <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
