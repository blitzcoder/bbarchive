<!DOCTYPE html><html lang="en" ><head ><title >slow runtime...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >slow runtime...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >slow runtime...</a><br><br>
<a name="477729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi there,<br><br>when i use "drawpixmap" to draw a background image, and then "drawpixmap" again for a front image(player) its going very slow when my player moves to the left or right...? why does this happen? i know it has something to do with buffers, but the original "SetBuffer Backbuffer()" command is not there, and the manual docs are confusing me as hell!<br><br>does anyone know how to fix this? <br><br></td></tr></table><br>
<a name="477732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> DrawPixmap is intended for image manipulation in ram (slow). You should be looking at drawimage instead. Drawimage will draw an image loaded with LoadImage, which is stored in video memory (fast) <br><br></td></tr></table><br>
<a name="477741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well,it somewhat worked...but the background image is totaly weird..! its like ten similiar programs in weird colors all running beside each other...<br><br>maybe its my graphics card... <br><br></td></tr></table><br>
<a name="477745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zeptera, post your code as this doesn't make sense at the moment. <br>ALL images are drawn to the 'backbuffer' automatically which is why there is no 'setbuffer' in bmx. You still need to 'flip' though. <br><br></td></tr></table><br>
<a name="477751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, thanks for replying... here is the code<br><br>Graphics 1024,768<br><br>mamma1=LoadImage("mamma1.jpg")<br>mamma2=LoadImage("mamma2.jpg")<br>mamma3=LoadImage("mamma3.jpg")<br>natur=LoadPixmap("natur.jpg")<br>	<br>playerx#=512<br>playery#=600<br><br>While Not KeyHit(KEY_ESCAPE)<br><br>'playernm=playernm<br><br>Cls<br> 	<br>'	SetColor (0,25,255) <br><br>'	DrawText ("Welcome to my game!",0,750)<br>'	DrawText ("" + playernm$,0,730 )<br><br>	If KeyDown(KEY_UP)<br>		playery=playery-5<br>'		playernm=playernm+1<br>	EndIf <br>	<br>	If KeyDown(KEY_DOWN)<br>		playery=playery+5<br>'		playernm=playernm+1<br>	EndIf 			<br><br>	If KeyDown(KEY_LEFT)<br>		playerx=playerx-5<br>'		playernm=playernm+1<br>	EndIf 			<br><br>	If KeyDown(KEY_RIGHT)<br>		playerx=playerx+5<br>'		playernm=playernm+1<br>	EndIf <br>	<br>	If playerx &gt; 960<br>		playerx = 960<br>	EndIf	<br>	<br>	If playerx &lt; 0<br>		playerx = 0<br>	EndIf 	 <br>	<br>'	DrawPixmap natur,0,0<br>	<br>	DrawImage mamma3,playerx,playery<br><br>Flip<br> <br>Wend <br><br>	<br>End <br><br></td></tr></table><br>
<a name="477758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That works fine for me. Can you take a screenshot to show us what's going wrong? <br><br></td></tr></table><br>
<a name="477760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried your code and when the DrawPixMap command is not commented, the other image Mamma3 goes slower and slower each game loop.<br>Is that the problem you described?<br><br>In the beginning it goes quite fast, but the longer the program is running, the Mamma3 picture can be repositioned slower and slower each game loop.<br><br>I tried adding a FlushMem right after the DrawPixMap command and now it is not slowing down anymore after each game loop.<br><pre class=code>
DrawPixMap natur, 0, 0
FlushMem
</pre><br>It is still slow, but now it doesn't slow down each game loop.<br><br>If you want it faster, why not load the "natur.jpg" as an Image, using LoadImage and draw it with DrawImage?<br>That way it is MUCH faster. <br><br></td></tr></table><br>
<a name="477776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sometimes I wonder if the `slower and slower` problem is to do with pixmaps creating images as they are copied over and not freeing the images afterwards. .. ends up using virtual memory even. ??/ <br><br></td></tr></table><br>
<a name="477787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess that would be the case, because after about 10 seconds, my entire system almost came to a complete halt.<br>Pressing Escape took about 5 seconds, before BMax executed the command to end the program.<br><br>That's why I tried the FlushMem command, and it seems to work.<br>Now the program runs at the same speed all the time, without my system coming to a almost complete halt.<br><br>Now when I start any program, it loads very slowly.<br>I think because my graphics memory is full (don't know for sure).<br>But this can be fixed easily by just rebooting. <br><br></td></tr></table><br>
<a name="477827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats the acctual problem...<br><br>its looks weird when i say : Loadimage and drawimage natur.jpg<br><br>i dont know how to take screenie...can you tell me? <br><br></td></tr></table><br>
<a name="477833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zeptera, What do you mean? The first loads the image to memory, the second draws it to the backbuffer. It's the same as BlitzBasic.<br>I haven't found out how to take a BMX specific screen but somebody else suggest using 'print screen'. <br><br></td></tr></table><br>
<a name="477868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try it with a different file (not natur.jpg)?<br><br>I tried it with a picture from my collection, and in both cases, they were displayed exactly the same (= shown correctly).<br><br>If it works with another picture, then open "natur.jpg" in a paint-package (Microsoft Paint for example) and resave it (preferably to a different file), then delete the original and replace it by the resaved file.<br>It could be that the format of "natur.jpg" is slightly corrupted. <br><br></td></tr></table><br>
<a name="477967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah well, "natur.jpg" is very colorful, taken with a nikon. I will try that way soon, thanks for posting! <br><br></td></tr></table><br>
<a name="478091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> heh...well iam using a mac so there is no "printscreen" here :D <br><br></td></tr></table><br>
<a name="478102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Services / screen / Grab Screen? <br><br></td></tr></table><br>
<a name="478105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> in game? i dont get that... <br><br></td></tr></table><br>
<a name="478132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use<br><pre class=code>Graphics 800,600,0</pre><br>to run it in a window instead of full screen. <br><br></td></tr></table><br>
<a name="478144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah...when i use graphics 800,600,0 it works like it should(i mean the picture is there correctly), so why doesnt it work ok in 1024,768? <br><br></td></tr></table><br>
<a name="478156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it work at 800x600 or 640x480 fullscreen? <br><br></td></tr></table><br>
<a name="478320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeptera</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, but not in 1024,768...<br><br>thanks to all for answering! <br><br></td></tr></table><br>
<a name="478321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> perhaps it helps to speed up when using the right types for the images so it does not need to search them in the system again and again every loop?<br><br>mamma1:TImage=LoadImage("mamma1.jpg")<br>mamma2:TImage=LoadImage("mamma2.jpg")<br>mamma3:TImage=LoadImage("mamma3.jpg")<br>natur:TImage=LoadPixmap("natur.jpg") <br><br>( or TPixMap if pixmap is used ) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
