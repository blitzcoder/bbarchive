<!DOCTYPE html><html lang="en" ><head ><title >Images and buffers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Images and buffers</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Images and buffers</a><br><br>
<a name="922945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gillissie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm from Blitz3D, so I am stumped on how to draw to an image. I don't see any commands for setting the current buffer (such as SetBuffer() in B3D). Basically, I want to create an image, draw some stuff to it, including text, than save the image as a file. It can't be that hard, but I can't figure it out.<br><br>Thanks for the help! <br><br></td></tr></table><br>
<a name="922948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are not able to draw to an image as in b3d BB, everything is drawn to the backbuffer and displayed when you flip. Draw anything to the back buffer and grab it with grabpixmap or grabImage before flipping.<br><br>note: you are limited to the screen area for grabs. <br>you can draw directly to the pixmap but that's really low level stuff such as writepixel readpixel. no other command works on pixmap such as drawtext, drawline etc... os of now. <br><br></td></tr></table><br>
<a name="922950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indiepath posted some code yonks ago, regarding render targets, basically, the backbuffer is a render target, you can create a texture in DirectX and specify that it can be used to render too, I'm using this code C++/DirectX when creating a blank image:-<br><br><pre class=code>
Texture newtexture;
D3DXCreateTexture(pD3DDevice,imageWidth,imageHeight,1,D3DUSAGE_RENDERTARGET,D3DFMT_A8R8G8B8,D3DPOOL_DEFAULT,&amp;newtexture.texture);
newtexture.texture-&gt;GetSurfaceLevel(0,&amp;newtexture.pTextureSurface);
</pre><br><br>After creating the texture (with the specified D3DUSAGE_RENDERTARGET usage flag), I grab the surface using GetSurfaceLevel, then when I want to draw on the texture, instead of the backbuffer, you use this:-<br><br><pre class=code>
pD3DDevice-&gt;SetRenderTarget(0,newtexture.pTextureSurface);
</pre><br><br>And jobs a good'un! :)<br><br>So, it is posssible in BlitzMax to draw to images, you really must look under the hood though and make room for it.<br><br>Dabz <br><br></td></tr></table><br>
<a name="923026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is interesting Dabz.<br>Can you please post a working example so I can get a better idea how it works? <br><br></td></tr></table><br>
<a name="923032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No one has posted a working version compatible with the latest version of BMax. And no one has posted a version compatiblel with both OGL and Bmax. This process is called "Render To Texture" btw. <br><br></td></tr></table><br>
<a name="923038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> As dabz said, indeipath posted working code, and that HighGfx module also does it, as far as I remember. <br><br></td></tr></table><br>
<a name="923059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>No one has posted a working version compatible with the latest version of BMax. And no one has posted a version compatiblel with both OGL and Bmax.<br> <br></div><br><br>I find it truely amazing that you had actually found time to post that in your busy life... For what good it was! Oo<br><br><div class="quote"> <br>This process is called "Render To Texture" btw. <br> <br></div><br><br>Offically, by the nice chaps who make the DirectX API, they are called Render Targets... <a href="http://msdn.microsoft.com/en-us/library/bb976073.aspx..." target="_blank">http://msdn.microsoft.com/en-us/library/bb976073.aspx...</a> btw<br><br>But, your probably too busy to read it! :P Hehehe<br><br><div class="quote"> <br>Can you please post a working example so I can get a better idea how it works? <br> <br></div><br><br>Basically, its no more than what I've posted up there in C++, the one thing you have to remember is that the backbuffer is also a render target, so after you've setup DirectX, you need to grab the backbuffer surface too:-<br><br><pre class=code>
pD3DDevice-&gt;GetRenderTarget(0,&amp;pBackBuffer);
</pre><br><br>Then, when you want to return drawing to the back buffer, you use:-<br><br><pre class=code>
pD3DDevice-&gt;SetRenderTarget(0,pBackBuffer);
</pre><br><br>When you generally setup a render target in DirectX , it starts off as non transparent black, which is obviously a bit of a bugger... BUT, you can clear the target with 0 alpha, then draw on it as usual.. Which creates a masking effect (Doesnt work on the backbuffer though)! :)<br><br>This is all in DirectX9 (Though, I wouldnt have a clue about DirectX7) and is currently implemented in my own engine which I'm building.<br><br>Dabz <br><br></td></tr></table><br>
<a name="923070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Though, I wouldnt have a clue about DirectX7" lol..<br><br>Your DX9 solution is wonderful and I'm sure it has 1000's of users, but for Blitzmax coders the goal is to write games for Mac and Windows so we need a OpenGL and DirectX7 solution. The biggest hurdle is making it compatible with the existing graphics pipeline built into Blitzmax. Unless I missed something, if someone has this already working, I'll pay money for this and I'm sure others would as well. <br><br></td></tr></table><br>
<a name="923072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Unless I missed something <br></div><br>A search of the forum should turn something up. <br><br></td></tr></table><br>
<a name="923076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Your DX9 solution is wonderful and I'm sure it has 1000's of users, but for Blitzmax coders the goal is to write games for Mac and Windows so we need a OpenGL and DirectX7 solution. The biggest hurdle is making it compatible with the existing graphics pipeline built into Blitzmax. Unless I missed something, if someone has this already working, I'll pay money for this and I'm sure others would as well.<br> <br></div><br><br>Well, from what I do recall, someone posted on the forum requesting if indiepath could re-release the code.<br><br>Indiepath declined to release it to the general public, but did say that if the person in question emailed him, he would send him the source.<br><br>That was a while back mind, so... The only person to ask is Indie himself...<br><br>Shy bears get no soup, as the saying goes! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="923083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> All links to HighGfx seem to be broken (afaik it only supported OpenGL).<br><br>The most curious thing is why Indiepath has yet to just post the source to his modules - if they are free why be so protective? <br><br></td></tr></table><br>
<a name="923086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=74515#833732" target="_blank"> Highgfx </a> and <a href="/posts.php?topic=73223#834797" target="_blank"> Tim's RTT source </a> <br><br></td></tr></table><br>
<a name="923088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never saw the mirror, thanks.<br><br>Indiepath's module works great! <br><br></td></tr></table><br>
<a name="923096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Plash...is Indiepath's code openfl and dx supported? Fingers are crossed! :) I did some amazing things in DX8 where my engine could render a whole scene to a texture. Very cool! :) <br><br></td></tr></table><br>
<a name="923116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could have easily figured out both questions, if you'd simply read the code.<br>I'll leave it up to you. <br><br></td></tr></table><br>
<a name="923123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Plash. <br><br></td></tr></table><br>
<a name="923134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks on my side guys. I just hope Gillissie find all this tech stuff usefull. What A way to throw somebody new into BMAX. Welcome Aboard. <br><br></td></tr></table><br>
<a name="923223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> RTT doesn't work on my old intel box. Bummer. <br><br></td></tr></table><br>
<a name="923415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I remember the posted RTT-code also doesn't work when using the inofficial dx9-code placed here in the forums (which should have been updated some "this weekend" ago).<br><br>So atm you have to include some switches (if settings.mode='dx9' then doX else if settings.dx7 then doY else doZ).<br><br><br>bye MB <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
