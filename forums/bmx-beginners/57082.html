<!DOCTYPE html><html lang="en" ><head ><title >Playing MP3's</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Playing MP3's</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Playing MP3's</a><br><br>
<a name="634670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys,<br><br>I'm a former Blitz2d programmer (yeah, that far back) that's taken the plunge last night and purchased BlitzMax and MaxGUI so I can get back into programming again. Now I've kind of grown up with Blitz from the Amiga version so I've got a rough idea of what I'm doing but what I appear to be missing is a method for playing MP3's.<br><br>I'm working through Assari's exellent tutorials to get used to MaxGUI so I thought i'd make myself a simple little MP3 player which can do things like save playlists and upload mp3's to my memory card for me with a nice gui front end.<br><br>Of course if I can't actually play MP3's with this version of Blitz then I'm kind of at a dead end from the start as all my music is in that format and I dont want to convert it all into Ogg or (heaven forbid) Wavs.<br><br>Many thanks if anyone can help me out. <br><br></td></tr></table><br>
<a name="634699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is due to license reasons.<br>As long as you do not own a license, you should not use MP3 in your software (5000 downloads and you need one, no mather if freeware or commercial).<br><br>Thus OGG is the standard format in BM. <br><br></td></tr></table><br>
<a name="634744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> this might help get you started,<br><br>[EDIT] modified to use an alias name to resolve big path names<br><br><pre class=code>
' mci based windows media controller
' derived from <a href="http://www.gamedev.net/reference/articles/article2053.asp" target="_blank">http://www.gamedev.net/reference/articles/article2053.asp</a>

Extern "win32"

Function mciSendStringA(cmd$z,resultbuffer:Byte Ptr=Null,buffersize=0,hwndcallback=0)

End Extern

Local file$
Local cmd$
Local result

file="E:\music\Bloc Party\Silent Alarm\01 Like Eating Glass.mp3"

cmd="open ~q"+file+"~q alias mysound"

result=mciSendStringA(cmd)

Print "result="+result

cmd="play mysound from 0"

result=mciSendStringA(cmd)

Print "result="+result

Input "hit enter to end"
End
</pre> <br><br></td></tr></table><br>
<a name="634749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats nice Simon. Tried it with a  *.wmv and it works nicely. <br><br></td></tr></table><br>
<a name="634781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This brings up an interesting point -- if your application itself does not play the MP3, but essentially uses the windows API to hand it over to the operating system to have it played instead, does your application still need a license for the MP3 functionality, or would it be covered by Microsoft's own license? <br><br></td></tr></table><br>
<a name="634795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This brings up an interesting point -- if your application itself does not play the MP3, but essentially uses the windows API to hand it over to the operating system to have it played instead, does your application still need a license for the MP3 functionality, <br></div>Yes.<br><br><div class="quote"> or would it be covered by Microsoft's own license? <br></div>Microsofts license only covers Microsoft.<br><br><a href="http://www.mp3licensing.com/" target="_blank">http://www.mp3licensing.com/</a> <br><br></td></tr></table><br>
<a name="634832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Too bad. Thanks for clearing that up, though. <br><br></td></tr></table><br>
<a name="635071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's spot-on, skidracer. Thanks a lot for that. Being new to BlitzMax I wont even try to kid myself I understand what's going on there but I can read enough to modify it for my own use.<br><br>Not that i'll go and write my own MP3 player now. If it's illegal then I can't do that even if it is just for my own use. <br><br></td></tr></table><br>
<a name="635142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> For your own usage you can, but only for your own usage ... <br><br></td></tr></table><br>
<a name="635148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would guess that only applies to software that dictates the playback of mp3 files, if it requires user selection I can't help thinking you'd be off the hook with the mp3 license.<br><br>In any case, using such a method you will need to include mediaplayer7 or above in your specification / system requirements so you may as well use the superior WMA format for any tracks that the software itself is dependent on for it's function. <br><br></td></tr></table><br>
<a name="635170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure theres an open source way to convert mp3 to ogg... <br><br></td></tr></table><br>
<a name="635179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Audacity<br><br><a href="http://audacity.sourceforge.net/" target="_blank">http://audacity.sourceforge.net/</a> <br><br></td></tr></table><br>
<a name="647882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to revisit old threads but I've got mp3 playback running ok now in my program but the slight flaw is I have no idea how to actually get the mediaplayer to stop playing the file when it's playing. I can restart it with the same function call but that's my lot.<br><br>Anyone got a suggestion? <br><br></td></tr></table><br>
<a name="649538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobody abe to help me out here? I have no idea how to send media player an external command or even what commands it would accept but surely someone does? <br><br></td></tr></table><br>
<a name="649554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> See MSDN or VB documentation on that. Both cover MP COM handling quite good. <br><br></td></tr></table><br>
<a name="649737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> heres a quick class<br><br><pre class=code>Extern "win32"

Function mciSendStringA(cmd$z,resultbuffer:Byte Ptr=Null,buffersize:Int=0,hwndcallback:Int=0)

End Extern

Type TMusic
	Global musicnumber:Int=0
	Field number:Int,paused:Int
	Field playing:Int
	Function Open:TMusic(sfile:String)
		Local music:TMusic=New TMusic
		music.number=TMusic.musicnumber
		TMusic.musicnumber:+1
		music.Load(sfile)
		Return music
	End Function
	
	Method Load(sfile:String)
		mciSendStringA("open ~q"+sfile+"~q alias "+Name())
	End Method
		
	Method Play(from:Int=0)
		If Not paused 
			mciSendStringA("play "+Name()+" from "+from*1000)
			playing=1
		Else
			mciSendStringA("resume "+Name())
			playing=True
			paused=False
		EndIf
	End Method
	
	Method Pause()
		If paused Return
		mciSendStringA("pause "+Name())
		paused=True
		playing=False
	End Method
	
	Method Stop()
		mciSendStringA("stop "+Name())
		playing=False
		paused=False
	End Method
	
	Method Name:String()
		Return ("TMusic"+String(number))
	End Method
	
End Type
</pre> <br><br></td></tr></table><br>
<a name="649739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> ....and an example<br><br><pre class=code>Local basketcase:TMusic=TMusic.Open("C:\Documents and Settings\All Users\Documents\My Music\Green Day\Dookie\Green Day - Basket Case.mp3")
basketcase.Play()
WaitKey
</pre><br>You can specify an amount of time in seconds to start at. <br><br></td></tr></table><br>
<a name="649755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Coming in in the middle of the discussion, so sorry 'bout that.)  Skid's code works great for me, though I use Ogg for my game stuff, due to MP3 license evilness. <br><br></td></tr></table><br>
<a name="649909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> khomy prime: Thanks a lot for those examples. I'll give them a test run now.<br><br>WendellM: Agreed about mp3 license but it's only something I'm writing for myself so it shouldn't be an issue. I've already put in ogg support for playback but I'm a bit dissapointed about the memory hogging and slow speed in playback to consider it viable having a program play lots of ogg files in a row.<br><br>Simons code was spot on for playing back an MP3 but I needed a bit more control than just playing one track hence my question.<br><br>While I'm on the subject of Ogg files though is there any way of accessing the track information within blitzMax or am I looking at an external routine for that too? <br><br></td></tr></table><br>
<a name="1000620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >asoed</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does someone know how to get the lenght of an mp3 and the current playing positions for the example above? <br><br></td></tr></table><br>
<a name="1000648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at my MP3 playing library for Blitz3D (link in signature) - it uses MCI also, so it's just a matter of adapting the strings sent to the code posted above... <br><br></td></tr></table><br>
<a name="1000658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does someone know how to get the lenght of an mp3 and the current playing positions for the example above?  <br></div><br>Various BlitzMax modules support cross-platform playback of mp3s, and allow you to see the current position as well as lots of other information. <br><br></td></tr></table><br>
<a name="1000679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >asoed</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @brucey: could you name one please, I'm looking but can not find.<br><br>@slotman: where can I find it? I'm having trouble understanding some english, not native speaking.<br><br>Thanks a lot! <br><br></td></tr></table><br>
<a name="1000689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey is always shy about naming his own modules.<br><br>Look at the links in his signature, I am sure you will find what you are looking for. <br><br></td></tr></table><br>
<a name="1000929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >asoed</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks people, I got it working (BASS)! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
