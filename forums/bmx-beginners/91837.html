<!DOCTYPE html><html lang="en" ><head ><title >Rectangle to Rectangle collision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Rectangle to Rectangle collision</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Rectangle to Rectangle collision</a><br><br>
<a name="1045322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br>I am trying out the BMax demo and so far love it! One thing I was looking for is an BMax Function for Rectangle to Rectangle Collision<br><br>I understand that I can write a simple...<br><pre class=code>
Method CheckRectCollision(r1X:FLOAT,r1Y:FLOAT,r1W:INT,R1H:INT,r2X:FLOAT,r2Y:FLOAT,r2W:INT,R2H:INT)
     If(r1X&gt;=r2X AND r1X&lt;r2X+r2W AND r1Y&gt;=r2Y AND r1Y&lt;r2Y+r2H)
          Collide = "TRUE"
     ENDIF
END METHOD
</pre><br>Or something along those lines, but I was wondering if there was a built in function to already do this.<br><br>I've been searching through the forums and the code archives but cant seem to find something as simple as this.<br><br>Thanks for the help! <br><br></td></tr></table><br>
<a name="1045339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kragoth74</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right. BMax is strangely missing a RectsOverlap function, like good old Blitz. <br><br></td></tr></table><br>
<a name="1045347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I normally use this:<br><br><pre class=code>
Function RectsOverlap:Int(x0:Float, y0:Float, w0:Float, h0:Float, x2:Float, y2:Float, w2:Float, h2:Float)
	If x0 &gt; (x2 + w2) Or (x0 + w0) &lt; x2 Then Return False
	If y0 &gt; (y2 + h2) Or (y0 + h0) &lt; y2 Then Return False
	Return True
End Function
</pre><br><br><div class="quote"> BMax is strangely missing a RectsOverlap function <br></div><br>It isnt hard to write your own though... <br><br></td></tr></table><br>
<a name="1045361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a related question regarding rect to rect collision.<br><br>For a card game, where i would want to check if a player moves a card and places it right ontop of another card within say a 10 pixel buffer, how would you change the RectsOverlap function above?<br><br>So the function would need to not only know if the cards overlap, but if they are placed so close they almost cover each other, so that I would know to move the card somewhat, when the player drops it, so they do not fall directly ontop of each other. <br><br></td></tr></table><br>
<a name="1045376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kragoth74</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like that:<br><br><pre class=code>
if abs(x2 - x1) &lt; 10 and abs(y2 - y1) &lt; 10 then...
</pre> <br><br></td></tr></table><br>
<a name="1045392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's with the CAPS? <br><br></td></tr></table><br>
<a name="1045394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> what I did on my card game is check the mouse position agains the card area where I want it to go. If a valid test is found, then align the new card with the card found in the test. To select a card check the mouse position card by card from the top card to the bottom. The first test to be true is the card to select and the tests are finished. <br><br></td></tr></table><br>
<a name="1045401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> zawran:<br><pre class=code>
If RectsOverlap(x0+5,y0+5,w0-5,h0-5,x2+5,y2+5,w2-5,h2-5)
</pre> <br><br></td></tr></table><br>
<a name="1045503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the responses! Thats what I needed to know.<br><br>"What's with the CAPS?"<br>It was after a long session of keyboard mashing. <br><br></td></tr></table><br>
<a name="1045537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a Rect base class i use in a current project myself (feel free to use if you find it useful):<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Base type for several Types (classes) in the 2D lib whose
'  "Extent" or "Area Of Effect" can be defined as a rectangle in 2D space.
Type TRect2D
	Field x:Int, y:Int, w:Int, h:Int
	
	Function RectsOverlap(r1:TRect2D, r2:TRect2D)
		Return ((r1.x + r1.w &gt; r2.x) And (r1.y + r1.h &gt; r2.y) And (r1.x &lt; r2.x + r2.w) And (r1.y &lt; r2.y + r2.h))
	End Function
	
	Function RectsCollide(r1:TRect2D, r2:TRect2D)
		Return Not (r1.x &gt; r2.x + r2.w Or r1.x + r1.w &lt; r2.x Or r1.y &gt; r2.y + r2.h Or r1.y + r1.h &lt; r2.y)
	End Function
	
	Method Collision(otherRect:TRect2D)
		Return RectsCollide(Self, otherRect)
	End Method
	
	Method Overlap(otherRect:TRect2D)
		Return RectsOverlap(Self, otherRect)
	End Method
	
	Function CreateRect:TRect2D(x:Int, y:Int, w:Int, h:Int)
		Local nr:TRect2D = New TRect2D
		nr.x = x; nr.y = y; nr.w = w; nr.h = h
		Return nr
	End Function

	Method toString:String()
		Return "TRect2D: x=" + x + ", y=" + y + ", w=" + w + ", h=" + h
	End Method

	Method copyTo(r:TRect2D)
		r.x = x
		r.y = y
		r.w = w
		r.h = h
	End Method
	
		
End Type

</textarea><br><br><br>edit:<br>Note the difference (important): <b>Overlap()</b> is when 2 rects actually are on top of eachother i.e. at least 1 pixel overlap, while <b>Collision()</b> is true even when at least 2 pixels of the different rects are right beside each other. <br><br></td></tr></table><br>
<a name="1045546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the responses guys.<br><br>Sometimes it difficult to spot the easy solutions even though they are right there in front of you, you know "I cannot see the forest because of all those trees being in the way" kind of thing. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
