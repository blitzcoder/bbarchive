<!DOCTYPE html><html lang="en" ><head ><title >Number of Items in Map?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Number of Items in Map?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Number of Items in Map?</a><br><br>
<a name="1155993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ReconditePhreak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> There doesn't seem to be a good way of getting the number of items in a Map.  There's a method for checking if it's empty, but that isn't good enough for what I'm doing.<br><br>This is roughly what I'm doing now, is there a better way?<br><br><br>Local mvalues:TMapEnumerator = map.values()<br><br>Local count:Int = 0<br>For Local v:String = EachIn mvalues<br>	count :+ 1<br>Next <br><br></td></tr></table><br>
<a name="1155994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simplest way, depending on how you want to get this information, might be to extend TMap with a counter that increments when items are added and decrements when they are removed? Would likely be a better way if you're modifying the map frequently and also querying the size frequently.<br><br>If you don't need to query the size very often, or the map doesn't change (in which case you can store the size anyway), the way you're doing it now will be fine, since performance only matters in hotspots (in which case, the readability and obviousness of this method are definite plus points).<br><br>A more efficient way to actually count the items in a map without keeping a running total would be to traverse the tree structure top-down (most easily expressed recursively), rather than down-and-up-and-down-and-up... as the enumeration does. <br><br></td></tr></table><br>
<a name="1155997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ReconditePhreak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That approach is what I'll go with then.<br><br>I'm really curious as to how you would manually traverse the tree structure, however, for educational purposes.<br><br>I use the following as a reference for BM maps <a href="http://en.wikibooks.org/wiki/BlitzMax/Modules/Data_structures/Maps" target="_blank">http://en.wikibooks.org/wiki/BlitzMax/Modules/Data_structures/Maps</a><br><br>It doesn't mention any way to do that, is there more complete documentation somewhere?<br><br>If you say look at the sourcecode directly, I'm completely ok with that, but I would need to know where to find it for BM. <br><br></td></tr></table><br>
<a name="1156023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm really curious as to how you would manually traverse the tree structure, however, for educational purposes. <br></div><br><br>The Wikibooks page looks largely like a copy of the BlitzMax built-in documentation, which you can get at from the IDE (sidebar -&gt; Home tab -&gt; Modules -&gt; Data Structures -&gt; doubleclick Maps). At the top of the original documentation page there's a link to the source code for the module.<br><br>Then you could do something like:<br><br><pre class=code>Function countSubtree:Int(root:TNode)
    If root &lt;&gt; nil
        Return 1 + countSubtree(root._left) + countSubtree(root._right)
    Else
        Return 0
    EndIf
End Function

Function countMapItems:Int(m:TMap)
    Return countSubtree(m._root)
End Function</pre><br><br>...which won't actually work as-is, because "nil" is private to the map module, but you can extract the value easily enough (create a new empty map and copy its _root; ta-da, you have TMap's nil value).<br><br>Doing it with <i>literal</i> recursion like that will be quite slow, due to the large number of function calls, and possibly unsafe for large maps, due to the possibility of stack overflow; but it shows the simplest way to move down the tree. One common way to design these sorts of functions is to start with a recursive definition and then, once the basic method is clear, unwrap the recursion into a local loop (sometimes with an explicit stack; in this case you don't need one since the map contains all the data required for tracing your progress). <br><br></td></tr></table><br>
<a name="1156086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ReconditePhreak</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow, I'm using BLIDE and somehow I missed that documentation, thank you for that.<br><br>The map itself will never contain more than 10 items, but I'll start digging into this, just so I can get a familiarity with it.<br><br>While I'm at it, do you know of any modules of data structures floating about?    I've googled around and haven't really been able to come across anything, but something that has Hashtables, queues, skip lists, and so on?  The list and map is good for most things, but I like having a larger variety of data structures to choose from.  I've considered writing my own, but I'd really prefer to use one that's been tried and tested, if possible. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
