<!DOCTYPE html><html lang="en" ><head ><title >(Silly) Flip question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >(Silly) Flip question</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >(Silly) Flip question</a><br><br>
<a name="1047452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>I am working on some sort of educational game, so the interface I wrote is quite basic, as well as the display (using Max2D, in Windowed Mode) and until now my limited skills allowed me to get what I wanted. In that game, the graphics are updated when something happens, which may be a big mistake, I don't know, but which is working perfectly until now on any Windows PC I could test it. <br><br>That was for the Windows version of the game. Yesterday I got my hands on a Mac and tried to compile the game to see what happens. <br><br>The game is more or less working, which is somewhat magic in itself (thanks Blitz) but the Flip command doesn't seem to act the same way on Windows and on Mac. On Windows, when I use Drawimage something, then Flip, then drawimage something else, then flip again, what I get is 2 layers, the second being displayed on top of the first one. On Mac, the same code leads to some ugly flickering as if the images were swapped all the time. I guess I could fix it by cleaning the code and using flip in a better way, but can someone explain why do those two computers act so differently?<br><br>Sorry if the question is silly or simply too vague, and thanks very much in advance, <br>Pierre <br><br></td></tr></table><br>
<a name="1047453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi.<br><br>You probably have some kind of main game loop? If you could post it here, it would help pin-point the problem.<br><br>:) <br><br></td></tr></table><br>
<a name="1047457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do but showing it would be like to receive you at home with old pizza boxes and dirty clothes all over the floor. :)<br><br>I guess I can fix it with some work but I would still be wondering why I had to change it to get it to work... <br><br>Thank you for your answer, I will try to post some readable code later. <br><br></td></tr></table><br>
<a name="1047458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I guess I could fix it by cleaning the code and using flip in a better way <br></div>It's not a silly question at all but do fix it, not to use Flip in a better way but to use it in the 'proper' way. Draw everything that needs to be drawn, flip, clear the new backbuffer and repeat... <br><br><div class="quote"> but can someone explain why do those two computers act so differently? <br></div>You're not guaranteed that the backbuffer will be left intact after a flip. Different drivers manage things differently -- try enough different Windows systems and you'll probably find similar behaviour to the Mac eventually. <br><br></td></tr></table><br>
<a name="1047460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I get it. So getting a Mac version that works should make the Windows version better too. Let's go back to work :(<br>Thank you very much!<br><br>EDIT : ...Tell me if I'm getting it right : Flip is meant to update the whole display at a time. Everything I want to see on the screen must be drawn before flipping...? <br><br></td></tr></table><br>
<a name="1047467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Flip is meant to update the whole display at a time. Everything I want to see on the screen must be drawn before flipping...?  <br></div><br>Yep -- that's it in a nutshell. <br><br></td></tr></table><br>
<a name="1047469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's what I will do then. Thanks again! <br><br></td></tr></table><br>
<a name="1047488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The issue is that *some* video cards / drivers clear the backbuffer automatically, and others don't. Some use 2, 3 or even 4 backbuffers, which means if you keep flipping without redrawing your background may go back three or four frames in time.<br><br>The OpenGL specifications state that you can make no assumptions on the state of the backbuffer -- you're going to have to redraw the entire screen each frame to make sure that it works on -all- computers.<br><br>You're going to run into a host of problems otherwise: if may work flawless on one computer, but a different graphics cards or even different driver version can cause chaos on another PC. <br><br></td></tr></table><br>
<a name="1047496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your main game loop should look something like this:<br><br><pre class=code>While (Not KeyDown(KEY_ESCAPE)) And (Not AppTerminate())
    '...some code here to control timing if desired...

    UpdateLogic()

    Cls
    DrawStuff()
    Flip

    Delay 1 'gives better multitasking performance, as a slight pause lets the OS know you've completed your work
Wend</pre> <br><br></td></tr></table><br>
<a name="1047525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the tips. I hope displaying all that stuff everytime won't get too slow (it was OK speedwise until now without wondering too much about optimization). @ Czar Flavius : I should have done it that way from the beginning but was too lazy to change my bad habits. :( <br><br></td></tr></table><br>
<a name="1047693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello<br>Me again!<br><br>I think I understand everything above and can't do anything but agree with it but here's something strange, at least for me. <br><br>I had written another game before, for French speech and language therapists (that's my daily job, and as you can see I'm far from being able to become a professional developer :) ). It was a commercial game, a few hundreds or maybe more (!) copies have been sold and to my knowledge none of the buyers complained about it, although it was coded even more badly than the new piece of soft I'm working on. At the time (last year) I compiled a MacPPC and a MacIntel version on a friend's Mac, both seemed to work OK with no display issue. When I compile THE VERY SAME CODE on my own Mac, today, the display is messy and flickering as it is on my new game whereas the game compiled a few months ago on my friend's Mac still works perfectly well... I tried to compile it with various Blitzmax versions from version 1.30 on but it didn't seem to change anything. <br><br>Does someone have a clue? Now I know I coded it all in a very amateurish and bad way, but until now it seemed to work on any PC/Mac... And it still does when I run last year's executables...<br><br>Thanks in advance, <br><br></td></tr></table><br>
<a name="1047740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> on MAC you need to use Flip True otherwise you get tearing... i recall a previous conversation about this. <br><br></td></tr></table><br>
<a name="1047747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you! I'll try to remember that (at the moment it does'nt seem to change anything however) <br><br></td></tr></table><br>
<a name="1047768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Calibrator</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pierrou,<br><br>I can't help you with the subject at hand (learning BMax myself...) but:<br><br><i>I had written another game before, for French speech and language therapists (that's my daily job, and as you can see I'm far from being able to become a professional developer :) ). It was a commercial game, a few hundreds or maybe more (!) copies have been sold</i><br><br>You are a professional developer in *my* book! <br><br></td></tr></table><br>
<a name="1047771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) <br><br>Indeed I've earned some money and had to pay some taxes out of that. But when I'm over with this half bad new project I'm working on I promise I'll do things in a cleaner way, I might gain some time eventually that way. <br><br></td></tr></table><br>
<a name="1047918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you think there is a chance that the trouble I'm in has something to do with the version of XCode installed on the computer (it's the only difference I can see apart from the machines themselves, between last year's compilation and this year's compilation) or not? <br><br></td></tr></table><br>
<a name="1047926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try recompiling the modules?<br>At least that way everything has consistently be compiled against the same version of xcode, and you're not mixing &amp; matching things. <br><br></td></tr></table><br>
<a name="1047929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm talking about two (probably) different issues in this topic, which might eventually become confusing. In the latest posts I mentioned the very strange fact that the same code compiled with the same version of Blitzmax on two different machines lead to different resultats, one perfect and one 100% messy. I'm talking about my first piece of soft. <br><br>I can't remember which version of XCode was used last year to compile the version of the first game that's still working,  since it was on a friend's computer and XCode DVD. For myself I'm using XCode 3.2.4. And I've recompiled the modules at least 10 times since saturday to try to get MaxGUI working in release mode but that's a third problem I mentioned in the MaxGUI section of the forum :)<br><br>Thanks!<br><br>(anyway the best thing to do now whatever the explaination of it all is to correct my errors even though they didn't seem to cause trouble until this week) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
