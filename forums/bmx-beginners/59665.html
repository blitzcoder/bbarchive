<!DOCTYPE html><html lang="en" ><head ><title >point 'n' click adventure pathfinding?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >point 'n' click adventure pathfinding?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >point 'n' click adventure pathfinding?</a><br><br>
<a name="665136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone here tried implementing the type of pathfinding that you used to find in adventure games such as Monkey Island or King's Quest?<br><br>I've read about a number of different methods, but I'm looking for the simplest, easiest to implement way. Really any help/advice about this would be appreciated - ideas and techniques, code snippets, anything! <br><br></td></tr></table><br>
<a name="665460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No ideas, anyone? <br><br></td></tr></table><br>
<a name="665534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you seen the AStar Pathfinding Module? (<a href="http://www.blitzwiki.org/index.php/AStarNode_(AStar_Pathfinding_Module)" target="_blank">link to wiki</a>) <br><br></td></tr></table><br>
<a name="665542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, thanks for the link but it looks grid-based to me. Am I wrong about this? <br><br></td></tr></table><br>
<a name="665544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> monkey island could as well be on such a grid.. not a flat square one, but a grid where each cell has an irregular shape.. In the end, pathfinding doesn't care what a mapunit/cell looks like, it only finds paths in a grid.. <br><br></td></tr></table><br>
<a name="665559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I take your meaning and, conceptually, I understand it too. It doesn't help me make an actual working system though.<br><br>I think the problem I'm having is that all the examples of A* that I've seen have been too general purpose, in possession of far too many confusing features that I don't need, and primarily grid based (often with disclaimers saying that they can be adapted to work in non-grid configurations, but skirting over how that might be done.) They also usually only feature eight degrees of movement, which is inadequate to reproduce the effect I'm looking for.<br><br>What I need is more <i>specific</i> help to solve my particular problem; a simple, clean way to replicate the pathfinding found in typical old-school 2d adventure games without needless complexity or features that I don't need. Frankly I hate programming, and my mathematics is terrible, but I like creating, so the simpler the solution (and the explanation) the better! <br><br></td></tr></table><br>
<a name="665564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> try a simple 2d grid then which is your room, and you simple walk from a to b by interpolating between these 2 points. To prevent walking through walls you could create a look-up for that grid. The lookup has, like, points moved away from walls.. uhm..<br><br><pre class=code>
room:

.   .   .   .   .   .   .   .

.   .   .   . | .   .   .   .
              |
.   .   .   . | .   .   .   .
              |
.   .   .   . |  .   .   .   .

.   .   .   .   .   .   .   .


lookup:

.   .   .   .   .   .   .   .
            .   .
.   .   .     |     .   .   .
              |
.   .   .     |     .   .   .
              |
.   .   .  .  |  .  .   .   .
            .   .
.   .   .   .   .   .   .   .

</pre><br>As you see I 'moved' the gridpoints a bit around the wall.<br><br>No matter where you are in that grid, you can just walk to anywhere looking that look-up, the gridpoints force you to walk around the wall. Doesn't really work for very big 'n complex rooms with zillions of walls in all kinda shapes, but for simple stuff it might work.. <br><br></td></tr></table><br>
<a name="665601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> any method you use is going to use obstacle avoidance &amp; pathfinding which require some math to perform. <br><br>I would advise that if you are going to program (with Blitz or any language) that you really invest some time learning the Math.  not a dig, just good advice.<br><br>a good place to start is by taking a look at max's math mod. (sin,cos, atan, atan2, etc...) and Google for each one in turn and have fun with it. <br><br></td></tr></table><br>
<a name="665607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well since I only need to know this one particular thing, I think investing the significant amount of time it would take to study mathematics would be overkill, don't you? Besides, I have never and will never consider mathematics "fun" under any circumstances. :p<br><br>I guess what I'm trying to say is that I'm using Blitz Max out of necessity rather than for fun, so I just want the quickest, easiest, most painless solution that won't sidetrack me for too long. <br><br></td></tr></table><br>
<a name="665610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand what you are saying and I don't pretend to be a Math expert but from my experience, a crash course in Math (just a weekend) benefits every area of your programming.<br><br>I am a more creative type. I enjoy modelling and photoshop over Math any day of the week.<br><br>however :) , if you invest a small amount of time mastering a few Math fundamentals it will pay off huge.<br><br>with that said. I will try to knock up some functions that may assist you.<br><br>you want a non-player character to guide himself around a room avoiding collisions with objects while seeking a goal (doorway, object, whatever), right? <br><br></td></tr></table><br>
<a name="665612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, that's exactly it. Thanks! <br><br></td></tr></table><br>
<a name="665619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nelvin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> AStar/A* is just the topic you'll have to do research. A* is nothing more than the rules of how to evaluate the next step from the current position, estimating it's costs and compare that to other moves to find the best path in the (hopefully) most efficient way.<br><br>It doesn't matter if your examples are grid based, or if you have any kind of graph with connected nodes or how much connection went from a single node of if it's a different number of connections for different nodes - your typical evaluation loop just checks the given connections from the current node.<br><br>I used such an approach in a Point&amp;Click engine I wrote some years ago and it worked pretty well (we released a couple of games at the company I worked for back then). A more advanced solution would then not use single nodes but connected polygons/triangles but for a first step you should try to understand the basics using simple nodes (which might already be a reasonable solution for your game)<br><br>Btw. A* needs almost no math besides addition and sqrt (for estimating the costs of a move/path) <br><br></td></tr></table><br>
<a name="665710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've done some testing with A* in a sample point-n-click adventure environment, and it does seem to be the best / most natural solution.<br><br>Just a couple of thoughts:<br><br>1) It is grid based, but you can create a grid overlay for your walking map. Correspond the 'walkable' parts of the screen with values in an array for the A* searcher.<br><br>2) since there is a lot of calculations involved, you can greatly speed it up by using a lower resolution walk map than the actual screen resolution. E.g. have 1024x768 graphics, but use a 320x240 walk map.<br><br>The downside is that your walking patterns are only up to 3 pixels accurate, but the time necesary to find a path is *much* smaller... making all the difference on a slow(ish) computer.<br><br>Depending on how much accuracy you need, you can even use a 160x120 walkmap, if ~6 pixel accuracy is enough. (You can still walk on a pixel-by-pixel base, but your final target destination may be rounded a couple of pixels)<br><br>What I did myself: Take a picture of the background. In a paint program, add a new layer and manually draw an overlay of the walkable bits in a very distinct color. When done, remove the real background, and save the image.<br><br>I then loaded the new image in a small program I created, which would generate the walking map array based on the color of the pixels in the image.<br>either it could take every x-th pixel to downsample the size of the walking map, or you could scale the image down in the graphics program in the first place and count every pixel after that.<br><br>3) Also important, figure out a way how to handle unreachable destinations. What I did myself if you click on a target destination for which there is no walkable path: figure out a straight line between the target and destination points. Then pick an alternate destination point that is 90% on that line. If there is a path possible, walk there instead. If it fails to, check at 80%, 70%, 50%, 40%, 25%, 15%.... You'll walk 'most' of the way, until blocked by something. Much more user friendly and natural than refusing to walk altogether if there is no direct path.<br><br>Another tip: some A* routines only account for horizontal &amp; vertical movements. You'll probably get more natural looking results if you also make diagonal movement possible, since in real live people would tend to take the direct route as well.<br><br>Last but not least: if you have a background with much perspective (e.g.  road leading into the distance, hills, etc) you probably also have to figure out a way to include some kind of dept map to account for the size of your character on various parts of the map. Have him/her get scaled small when far away, and full-size when up close. Possibly also slow down movement speed in pixels/sec when the sprite is far away (although not quite as much as in real life, or it will get tedious to wait for it to finish walking) <br><br></td></tr></table><br>
<a name="1325840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> An alternative to nodes positioned on a grid is to use nodes only around obstacles and near incorners and outcorners and near passages (on both sides).<br><br>Each node has one or several links to others nodes of the same zone (room), and instead of checking if the cells at front, at back, at left, at right, are accessible, you check which are the links from this node to others nodes and consider these others nodes as potential nodes for the path.<br>This dramatically decreases the number of nodes required.<br><br>When creating links between nodes, in 2d, you can probably use a kind of "2d linepick" : draw a line between node and other node on another image and check if one of the pixel of the line intersects with a pixel of an obstacle or of a wall, if yes, it means that the path is blocked, if no, it means that the path is free... <br><br></td></tr></table><br>
<a name="1325860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...You do realize this was a 10 year old thread? :-) <br><br></td></tr></table><br>
<a name="1325868"></a>

<a name="1325869"></a>

<a name="1325870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> RemiD The Thread NecroMancer ;-)<br><br>..but kidding aside, not locking up a thread is also a good thing because some forums have a date expiration on them, and so this allows newbies to ask or follow up a question related to that thread, particularly if some participants are still around after all these years. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
