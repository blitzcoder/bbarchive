<!DOCTYPE html><html lang="en" ><head ><title >2D Flashlight Effect?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D Flashlight Effect?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >2D Flashlight Effect?</a><br><br>
<a name="1080298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm looking to have the screen black but have a round flashlight at the mouse cursor.  So I would draw my regular graphics, then draw a black sprite the size of the screen, and then draw a round sprite that would need to be able to cut through the black.  Anyone have any ideas on how to do this? <br><br></td></tr></table><br>
<a name="1080303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arabia</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a guess, not sure if this is the right/best way of doing it.  Have a massive black sprite with a transparent circle in it - then just position this sprite with an offset to make the circle centre where the mouse is.<br><br>I'm sure there is a better way of doing this, but I'm not the right person to ask :D <br><br></td></tr></table><br>
<a name="1080304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would definitely work.  But I was thinking of some covering the whole screen with one large black sprite and then having a sprite with a white or transparent circle on it and doing some sort of bit mask or something.  is there a way to do it like that? <br><br></td></tr></table><br>
<a name="1080313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> MaskPixMap?  Sounds about what I'm looking to do.  I'll report back with a demo if I get it working. <br><br></td></tr></table><br>
<a name="1080319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not quite what you want but you could look into using light blend, might be a way to get it out of there, I've gotten some neat lighting effects in a sewer environment before with it... <br><br></td></tr></table><br>
<a name="1080320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzmax.com/Community/posts.php?topic=49403" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=49403</a> <br><br></td></tr></table><br>
<a name="1080354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweet, thanks for the replies! <br><br></td></tr></table><br>
<a name="1080677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another idea, similar to the above:<br><br>create a black box, cut out your circle (use feathering if desired).<br>create a normal black box.<br>load these up as TImages.<br>draw your scene.<br>draw these boxes, the cutout box is where the mouse pointer is.<br>the black box, you move the handle to it's topleft, and stretch it so it's covering the screen up to the cutout box. (or you could use DrawRect)<br>Do the same for the left, right, and bottom sides of the cutout box.<br> <br>Another idea:<br>draw your scene<br>use GrabImage the size of your cutout box<br>clear the screen to black, draw the image, then the cutout box over the top of it <br><br></td></tr></table><br>
<a name="1080698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need to use big sprites. This can be achieved with clever blending.<br><br>- Draw the <b>flashlight sprite</b> to set up the "visibility" of the next images to be drawn.<br>- Set blending to be ShadeBlend. Whatever you draw next will only appear on the already visible parts of the screen. This visible part was defined previously by the flashlight sprite, so the user will only see what happens to be drawn on top of the flashlight.<br><br>Download <a href="http://i55.tinypic.com/wrdqba.png" target="_blank">this image</a> as the "flashlight.png" to use with the code.<br><pre class=code>
SuperStrict 
SetGraphicsDriver GLMax2DDriver()
Graphics 800,600 

For Local i:Int = 1 To 100
	SetColor Rand(0,255),Rand(0,255),Rand(0,255)
	DrawRect Rand(-20,800),Rand(-20,600),Rand(100,400),Rand(100,400)
Next
SetColor 255,255,255 'Restore default color.

Local background:TImage = CreateImage(800,600)
GrabImage background,0,0
Local flashlight:TImage = LoadImage("flashlight.png")
MidHandleImage flashlight 

While Not (KeyHit(KEY_ESCAPE) Or AppTerminate())
	Cls 
	
	SetBlend ALPHABLEND 'Allow the flashlight sprite to have a feathered image.
	
	DrawImage flashlight,MouseX(),MouseY() 'Draw first the flashlight sprite.
	
	SetBlend SHADEBLEND 'Setup the background blend.
	
	DrawImage background,0,0			    'Draw the background and anything else.
    'DrawImage [...]
	
	Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
