<!DOCTYPE html><html lang="en" ><head ><title >file problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >file problems</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >file problems</a><br><br>
<a name="715522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just putting the finishing touches to my game and somehow I have introduced a very strange bug.<br><br>After playing the game for a short time, all file access fails (e.g. loading an image, saving a data file). Does anyone know why this could happen? Why would a LoadImage or WriteFile fail when they worked previously within the same game session? What could I have done to prevent this from working?<br><br>Posting code is difficult as I'm not sure exactly where the problem occurs, only that it does. It just seems like something is causing all file access to fail but I have no idea as to what would cause this.<br><br>Sorry if this is a bit vague but I am hoping there is some obvious reason as to why this happening - I've spent hours trying to fix it and it's driving me nuts! If anyone can shed some light on this I would be eternally grateful! <br><br></td></tr></table><br>
<a name="715524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is possible that you have filled the video ram? And as such can no longer load imagess <br><br></td></tr></table><br>
<a name="715525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good thought but I don't think so - there are not many images and I have a 256MB card. Plus that wouldn't explain why I can no longer write the data file either! <br><br></td></tr></table><br>
<a name="715533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think there is a limit to the number of file streams you can have open at any time. Make sure you use CloseStream() whenever you want to close a file.<br><br>No idea if that will fix it or not, but it's all I've got ;). <br><br></td></tr></table><br>
<a name="715539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks fir the suggestino but all streams are closed.<br><br>I've done some more testing and have the following:<br><br><pre class=code>
dataFile = WriteFile(saveFile$)

If dataFile Then
	'code here
	
	
	CloseFile(dataFile)
Else
	Local tempImg:TImage = LoadImage("gfx\test.png")
	If  tempImg = Null Then Print "no image"
	RuntimeError "ERROR: Could not write save file " + saveFile$
End If

</pre><br><br>Both the "no image" &amp; runtime message are output. So it can not open the image file, and can not write to the save file. Note that both the savefile and image were previously loaded before this code was run so the files definately exist and have been accessed previously. <br><br>The error does not always occur so sometimes the savefile is updated and images are loaded - very odd. I've just realised it's Friday 13th, so maybe I'll leave it until tomorrow and have another crack at it ;-) <br><br></td></tr></table><br>
<a name="715572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing I'd recommend doing is doing a FlushStream( datafile ) after you make your writes to your data file. I've found that in some cases this is necessary (see my thread titled "Bug, Perhaps?" for more details on that.)<br><br>The graphics loading thing is really weird. I'm not normally superstitious but today HAS been weird. I already managed to break a large glass bowl at work in a freak situation. And I've had some code go weird on me as well. <br><br></td></tr></table><br>
<a name="716280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ghost Dancer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally found the problem - the save file was not always being closed, so programmer error, he he.<br><br>Thanks for your help though! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
