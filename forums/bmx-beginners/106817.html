<!DOCTYPE html><html lang="en" ><head ><title >desktop Screen resolution change?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >desktop Screen resolution change?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >desktop Screen resolution change?</a><br><br>
<a name="1317159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way to do this?:<br><br>I am using the GUI (windowed mode) but what to be able to change the users display mode from whatever it's set at (usually higher) down to 800x600 so that the window fills more of the screen (i.e. is more optimal) and the users desktop is changed to 800X600 resolution (naturally).<br><br><br>Any pointers? Thanks. <br><br></td></tr></table><br>
<a name="1317175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably useless.<br><br>If you're using maxgui, just set your window to be resizable, the user will do what he wants ; maximize/reduice the windows and if he really wants, he'll change his screen resolution by himself.<br><br>Except for a fullscreen game, and only with a disclamer and a previous check that the resolution is available, you should never impose a resolution to the user.<br><br>Just to mention, if I launch an app that resizes my desktop to this kind of resolution just because the developper can't optimize his stuff to fit on my 1920*1080 (which, nowadays, is a standard for desktop), I'll first remove the application and then if possible, I 'll Yell at the author, because it's intrusive, frustrating and, seriously risky -&gt; small resolutions worked on old computers, but now this kind of resolution imply graphical changes and more to think the screen won't support it ... And occasionnaly won't get back to the previous mode ... or worse ... computer freezes). <br><br></td></tr></table><br>
<a name="1317230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The thing is that I want to make it easy for the user to maximise the window size so that it's easier to see (its actually a map editor which mirrors the game as a wysisyg). I what to be able to change between the native resolution that he's running his desktop at and the optimal resolution for the window.<br><br>Note that there is the option to resort back to the screen-mode the user was using before! I'm sure there is a way to do it, but it's probably rather involved. Still, I want to be able to do it because its something useful.<br><br>Thanks for your comment anyway! <br><br></td></tr></table><br>
<a name="1317248"></a>

<a name="1317254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres something i had lying around :p<br>Check the bottom for the interesting parts. Windows only.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

SuperStrict

Framework MaxGUI.Drivers
Import BRL.EventQueue
Import PUB.Win32


Const WIDTH:Int = 800
Const HEIGHT:Int = 600
Const BPP:Int = 32
Const HZ:Int = 60

Global win:TGadget = CreateWindow( "Main", 32,32, 320,240, Null, WINDOW_TITLEBAR | WINDOW_RESIZABLE)
Global btn1:TGadget = CreateButton( "Fullscreen", 32,32, 75,25, win)
Global btn2:TGadget = CreateButton( "Maximized", 32,64, 75,25, win)
Global btn3:TGadget = CreateButton( "Restore", 32,96, 75,25, win)
Global btn4:TGadget = CreateButton( "Exit", 32,128, 75,25, win)

SetGadgetLayout btn1, 1,0,1,0
SetGadgetLayout btn2, 1,0,1,0
SetGadgetLayout btn3, 1,0,1,0
SetGadgetLayout btn4, 1,0,1,0
DisableGadget btn3

Global isfull:Int = False

While WaitEvent()
	Select CurrentEvent.ID
		Case EVENT_GADGETACTION
			Select CurrentEvent.Source
				Case btn1 ' fullscreen
					If Not isfull And ChangeDisplayMode( WIDTH, HEIGHT, BPP, HZ) Then
						isfull = True
						DisableGadget btn1
						DisableGadget btn2
						EnableGadget btn3
					EndIf
				Case btn2 ' fullscreen + maximize
					If Not isfull And ChangeDisplayMode( WIDTH, HEIGHT, BPP, HZ) Then
						isfull = True
						DisableGadget btn1
						DisableGadget btn2
						EnableGadget btn3
						ShowWindow( win.Query(QUERY_HWND), SW_MAXIMIZE)
					EndIf
				Case btn3 ' restore
					If isfull And RestoreDisplayMode() Then
						isfull = False
						EnableGadget btn1
						EnableGadget  btn2
						DisableGadget btn3
						ShowWindow( win.Query(QUERY_HWND), SW_RESTORE)
					EndIf
				Case btn4
					Exit
			EndSelect			
		Case EVENT_WINDOWCLOSE 
			Exit
	EndSelect
Wend
RestoreDisplayMode()
End




'
' ChangeDisplayMode / RestoreDisplayMode
'
Private
Const DEVMODE_Size:Int = 156

Const dmSize:Int = 32
Const dmFields:Int = 40
Const dmPelsWidth:Int = 108
Const dmPelsHeight:Int = 112
Const dmBitsPerPel:Int = 104
Const dmDisplayFrequency:Int = 120

Const SPI_SETNONCLIENTMETRICS:Int = $002A

Extern "Win32"
	Function EnumDisplaySettingsA:Int( devicename:Byte Ptr, modenum:Int, devmode:Byte Ptr)
EndExtern
Public


Const DISP_TEST:Int = 0
Const DISP_TEMP:Int = 1
Const DISP_PERM:Int = 2

Function ChangeDisplayMode:Int( width:Int, height:Int, bpp:Int = 0, hz:Int = 0, mode:Int = DISP_TEMP)
	Local dm_:Byte[DEVMODE_Size]
	Local dm:Byte Ptr = dm_
	Short Ptr(dm + dmSize)[0] = DEVMODE_Size
	
	Local i:Int = 0
	While EnumDisplaySettingsA( Null, i, dm)
		If Int Ptr(dm + dmPelsWidth)[0] = width And ..
			Int Ptr(dm + dmPelsHeight)[0] = height And ..
			Int Ptr(dm + dmBitsPerPel)[0] = bpp And ..
			Int Ptr(dm + dmDisplayFrequency)[0] = hz Then

			Int Ptr(dm + dmFields)[0] = DM_PELSWIDTH | DM_PELSHEIGHT | DM_BITSPERPEL | DM_DISPLAYFREQUENCY
			
			Local flags:Int
			Select mode
				Case DISP_TEST	flags = CDS_TEST
				Case DISP_TEMP	flags = CDS_FULLSCREEN
				Case DISP_PERM	flags = CDS_FULLSCREEN | CDS_UPDATEREGISTRY
			EndSelect
			
			If ChangeDisplaySettingsA( dm, flags) = DISP_CHANGE_SUCCESSFUL Then
				If mode &lt;&gt; DISP_TEST Then SendMessageA( HWND_BROADCAST, WM_DISPLAYCHANGE, SPI_SETNONCLIENTMETRICS, 0)
				Return True
			EndIf
			
			Exit
		EndIf
		i :+ 1	
	Wend
	Return False
EndFunction

Function RestoreDisplayMode:Int()
	If ChangeDisplaySettingsA( Null, 0) = DISP_CHANGE_SUCCESSFUL Then
		SendMessageA( HWND_BROADCAST, WM_DISPLAYCHANGE, SPI_SETNONCLIENTMETRICS, 0)
		Return True
	EndIf
	Return False
EndFunction
</textarea> <br><br></td></tr></table><br>
<a name="1317286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FireballStarfish</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'll first remove the application and then if possible, I 'll Yell at the author, because it's intrusive, frustrating and, seriously risky <br></div><br>I have to agree. If some application changed my desktop resolution, especially without clearly asking beforehand, I would get very angry. I could also easily see that causing irreversible effects, like resizing windows, rearranging desktop icons, making other programs that can't deal with the resolution change crash... <br><br></td></tr></table><br>
<a name="1317316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never, ever change the desktop resolution.  It can create a host of problems.  Instead, resize the window to fit the desktop and scale everything accordingly.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict
Import maxgui.drivers

Global Window:TGadget = CreateWindow("Hello",50,70,800,600,Null,WINDOW_TITLEBAR|WINDOW_RESIZABLE|WINDOW_CLIENTCOORDS)'create a resizable window
Global Canvas:TGadget = CreateCanvas(0,0,ClientWidth(Window),ClientHeight(Window),Window) 'make canvas full size of window
SetGadgetLayout Canvas, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED 'Keep canvas aligned to window

Global image:TImage = CreateImage(20,30) 'create a white square image
Local p:TPixmap = LockImage(image)
ClearPixels(p,$FFFFFFFF)
UnlockImage(image)

Global Timer:TTimer = CreateTimer(60)
AddHook EmitEventHook,MyHook

Repeat
	WaitEvent()
Forever

Function MyHook:Object(id:Int,data:Object,context:Object)
	Local event:TEvent = TEvent(data)
	
	Select event.id
		Case EVENT_WINDOWCLOSE, EVENT_APPTERMINATE
			End
		Case EVENT_GADGETPAINT 'Draw the canvas grid
			SetGraphics CanvasGraphics(Canvas)
			SetViewport 0,0,GadgetWidth(Canvas),GadgetHeight(Canvas) 'Make sure clipping is properly set after resize
			SetVirtualResolution 800,600 'scale graphics to the window size
			SeedRnd(0) 'seed the random generator so we get consistent colors
			
			For Local y:Int = 0 Until 20 'draw the grid of square images
				For Local x:Int = 0 Until 40
					SetColor Rand(0,255),Rand(0,255),Rand(0,255)
					DrawImage image,x*20,y*30
				Next
			Next
			
			Flip
		Case EVENT_TIMERTICK
			RedrawGadget Canvas
	End Select
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1317318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Never, ever change the desktop resolution. It can create a host of problems.  <br></div><br><br>Does it apply on Blitz3D as well? <br><br></td></tr></table><br>
<a name="1317319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It applies on anything.  The user has set that resolution for a reason.  Changing the resolution will at best move all the desktop icons around and resize windows, at worst could crash programs or even the system if the resolution is not supported.<br><br>Changing resolution in fullscreen programs with DirectX or OpenGL is ok as Windows is designed to deal with those cases, but changing the desktop itself is a big no-no. <br><br></td></tr></table><br>
<a name="1317344"></a>

<a name="1317345"></a>

<a name="1317346"></a>

<a name="1317347"></a>

<a name="1317349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my case this is not true for a number of reasons; that's why I want to do it!<br><br>Here's why.<br><br>1. The program is meant to be used by me/a few people only for map generation.<br><br>2. I change my res all the time (from the desktop). The worst I've ever had happen to me is that you have to move a few icons around on resize. The fact that you are able to change the resolution from the desktop suggest that YOU CAN do it without crashing things (you check of course, that your gfx card can display the necessary mode).  Now if you are talking from the standpoint of doing it through blitzmax then you may just be right (I don't know enough about it which is why I'm probing you guys for some info here).<br><br>If you resize the window, the graphics WILL NOT resize, or if you make it so that they are resized via scaling (i.e. the user drags the window to be as big as possible) they will look rather ugly (I suppose you could force it to only "double" or "tripple" up but then all this requires much more coding). I don't want to go the scaling way. Giving the user the OPTION (read OPTION) to change resolution down to 800*600 (a little old-fashioned but still a well supported resolution) and an alternative to go back to his native resolution within a menu (and to default back to his native resolution at the end of the program) is all I'm looking for here (nice and simple in coding terms).<br><br>So while it may indeed create problems, that's what I want to do. So please don't say never ever - there's a reason for it. If I work out how to post a screenshot, what I'm trying to do will probably be much clearer.<br><br>Nevertheless thanks for all your input. <br><br></td></tr></table><br>
<a name="1317352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="https://c3.staticflickr.com/9/8034/28667543394_f104a107f9_b.jpg"> <br><br></td></tr></table><br>
<a name="1317363"></a>

<a name="1317365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you guys serious??<br>Changing resolutions wont crash your app nor will it mess with your icons or stay in that resolution, unless you want it to that is.<br><br>What do you think OpenGL games does to go fullscreen? They call the exact same API that Windows itself uses from its "Change Resolution" dialogs.<br>So im sure if that many games manage to do it correctly, we can too :p<br><br>Now about randomly changing resolutions without the users permission i can agree with. But the rest sounds like cyber superstition or something. <br><br></td></tr></table><br>
<a name="1317377"></a>

<a name="1317378"></a>

<a name="1317381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tend to agree with you grable, and thanks for you snippet of code above by the way.<br><br>I just see it from the point of view that the way I want to do it is more elegant than having to spend more time resizing things (using more memory/taking more time to code it when I could be working on what I'm actually aiming for without such things getting in the way).<br><br>And that's really the whole point of blitz, isn't it? To make things easier for us. So some of you may frown upon it and say it's not the right way to do things. But as you know, there are so many ways to achieve something; this seems the logical way for me to achieve it for this particular app.<br><br>If blitz provides a way to do it (through openGL or whatever) then, well, it's there to be exploited. <br><br>It just seems to be a neat way of bringing down everyone's common resolution to that of the app rather than having to resize everything for the convenience of what ever one of the multiple possibilities of screenmodes that everyone will be running.<br><br>Of course, if you look at the graphic above THE CHOICE IS GIVEN TO THE USER AS TO WHETHER HE WANTS TO OPTIMISE THE WINDOW OR NOT!  So I wouldn't be forcing anyone working in a high res mode not to squint at the window which doesn't need so high a resolution!<br><br>BTW, I run 1280 by 1024 as standard (on my old 17 inch monitor).<br><br>Perhaps some of you are coming from the point of view that you may be running a lot of programs at once (some of which my not like the lower resolution and crash) so yes I get what you are getting at. Me? I tend to only have 1 or 2 working windows open at a time. We're all different ;-) <br><br></td></tr></table><br>
<a name="1317526"></a>

<a name="1317530"></a>

<a name="1317531"></a>

<a name="1317543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you think OpenGL games does to go fullscreen? They call the exact same API that Windows itself uses from its "Change Resolution" dialogs.<br>So im sure if that many games manage to do it correctly, we can too :p<br> <br></div><br>You're wrong.<br>A fullscreen application that changes the resolution will not move icons (and here, let's not talk about the ones that resizes very badly and explode your desktop icons... but let's speak only about thoose who don't) only if there is only one screen (else it will) because it saves the current state of the desktop to restore it while the application close, while a desktop modification will modify everything anytime an icon doesn't fit the desktop area.<br><br><div class="quote"> Now about randomly changing resolutions without the users permission i can agree with. But the rest sounds like cyber superstition or something. <br> <br></div><br>Yes, it's just my old computer that wasn't aware of superstitions, so it's probably a psycho-effect that it froze any time I tried to set the resolution.<br><br>On low-cost computers or on slow computers, a blitz3d game that goes fullscreen in an unsupported mode can lead to a not-responding computer.<br>There is even no certainty the previous resolution will be restored.<br>All the internal stuff make the best to get it working, but it's not 100% safe.<br><br>(and an unsupported fullscreen "Graphics X,Y" will just lead to a runtime error after trying to modify the resolution. So, the "restore" part won't be called in your program)<br><br><br>Anyway,<br>@Juiceter :<br>You want to have your application to fit the screen ? Use the window size with maxgui (then set it to maximized)<br>For the graphics, you just have to use "SetScale" to zoom/unzoom your stuff to fit the screen (or use the virtualresolution)<br><br>It's the proper way to do it, so you might probably want to get used to it for a later more deployed stuff.<br><br>You can track the window size with the EVENT_WINDOWSIZE id<br><pre class=code>
While PollEvent()
 Select EventId()
   Case EVENT_WINDOWSIZE
     Screen_Scale# = ClientWidth(MyWindow)/MyDesiredWidth
     ' or based on Height
     Screen_Scale# = ClientHeight(MyWindow)/MyDesiredHeight
Wend

' on top of your drawing stuff
SetScale Screen_Scale, Screen_Scale
</pre><br><br>So, there is really no need to resize the desktop, you just resize the window.<br><br>Whatever, if you persist to resize the desktop (and if it's for windows only) there is all the needs in the windows API<br>-&gt; EnumDisplayDevices will list the devices (ie: screens)<br>-&gt; EnumDisplaySettings will list the modes available for the device (width, height, depth)<br>-&gt; ChangeDisplaySettings ... will modify the desktop<br><br><br>ps : And of course, if you use this, be sure I'll never test anything you post, you're aware that most of us don't like application that plays with the desktop resolution.<br>There is nothing personnal, for Blitz3D users, it's the same - when someone post a code that use "Graphics/Graphics3D 800,600,0,1" I'm here to yell at him if he was aware. <br><br></td></tr></table><br>
<a name="1317542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you think OpenGL games does to go fullscreen? They call the exact same API that Windows itself uses from its "Change Resolution" dialogs.<br>So im sure if that many games manage to do it correctly, we can too :p <br></div><br>Not true.  When you make an OpenGL call or DirectX call, Windows will save the current state of the desktop and hand control of the screen to the program.  When the program is done, Windows will restore the desktop back to its original state.<br><br>When you change the actual desktop resolution, like with the video properties dialog, Windows will rearrange the icons and resize windows to fit.  The old state is not saved.  Even if you change back to the original resolution, the windows will remain resized and icons will only revert if they were on auto-arrange.  If you had the icons set manually to where you would like them, then you will be stuck moving them back by hand.<br><br>The desktop is the user interface into the operating system.  The program contains it's own user interface.  The desktop should not be modified to match your program, rather your program should be modified to match the desktop.<br><br>If resizing the windows makes things too ugly, you can always have a "preview fullscreen" option.  There you would set up a graphics display with Graphics 800,600,32 .  This way you can use the actual resolution without messing with the desktop itself.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict
Import maxgui.drivers
SetGraphicsDriver GLMax2DDriver()

Global Window:TGadget = CreateWindow("Hello",50,70,800,600,Null,WINDOW_MENU|WINDOW_TITLEBAR|WINDOW_RESIZABLE|WINDOW_CLIENTCOORDS)'create a resizable window
Global Canvas:TGadget = CreateCanvas(0,0,ClientWidth(Window),ClientHeight(Window),Window) 'make canvas full size of window
SetGadgetLayout Canvas, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED, EDGE_ALIGNED 'Keep canvas aligned to window
Global Fullscreen:Int = False

CreateMenu("Preview Fullscreen",101,WindowMenu(Window))
UpdateWindowMenu Window

Global image:TImage = CreateImage(20,30) 'create a white square image
Local p:TPixmap = LockImage(image)
ClearPixels(p,$FFFFFFFF)
UnlockImage(image)

Global Timer:TTimer = CreateTimer(60)
AddHook EmitEventHook,MyHook

Repeat
	WaitEvent()
Forever

Function MyHook:Object(id:Int,data:Object,context:Object)
	Local event:TEvent = TEvent(data)
	
	Select event.id
		Case EVENT_WINDOWCLOSE, EVENT_APPTERMINATE
			End
		Case EVENT_GADGETPAINT 'Draw the canvas grid
			SetGraphics CanvasGraphics(Canvas)
			SetViewport 0,0,GadgetWidth(Canvas),GadgetHeight(Canvas) 'Make sure clipping is properly set after resize
			SetVirtualResolution 800,600 'scale graphics to the window size
			DrawBoard()
		Case EVENT_TIMERTICK
			RedrawGadget Canvas
		Case EVENT_MENUACTION
			If Event.data = 101
				StopTimer(Timer)
				Fullscreen = True
				Graphics 800,600,32
				DrawBoard()
			End If
		Case EVENT_KEYDOWN
			If event.data = KEY_SPACE And fullscreen = True
				Fullscreen = False
				EndGraphics()
				Timer = CreateTimer(60)
			End If
				
				
	End Select
End Function

Function DrawBoard()
			SeedRnd(0) 'seed the random generator so we get consistent colors
			
			For Local y:Int = 0 Until 20 'draw the grid of square images
				For Local x:Int = 0 Until 40
					SetColor Rand(0,255),Rand(0,255),Rand(0,255)
					DrawImage image,x*20,y*30
				Next
			Next
			
			SetColor 255,255,255
			If fullscreen Then DrawText "Press SPACE to return to editor",100,10
			
			Flip
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1317552"></a>

<a name="1317553"></a>

<a name="1317554"></a>

<a name="1317555"></a>

<a name="1317556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not true. When you make an OpenGL call or DirectX call, Windows will save the current state of the desktop and hand control of the screen to the program. When the program is done, Windows will restore the desktop back to its original state. <br></div><br>That may be true for DirectX, which has its exclusive access options.<br>But not so for OpenGL, which has NO api to change the resolution of the screen.<br>Which is why GLMax2D uses that function for example.<br><br><div class="quote"> When you change the actual desktop resolution, like with the video properties dialog, Windows will rearrange the icons and resize windows to fit. The old state is not saved. Even if you change back to the original resolution, the windows will remain resized and icons will only revert if they were on auto-arrange. If you had the icons set manually to where you would like them, then you will be stuck moving them back by hand. <br></div><br>Thats true, but only because that dialog has no TEST function. I seem to remember back in the day that it popped up a window giving you 15 seconds to cancel it at which point it would reset all windows and icons back to the original state (or do the resizing and moving after those 15 seconds), but that is no longer the case.<br>Still, that dialog does nothing magical!<br><br><div class="quote"> The desktop is the user interface into the operating system. The program contains it's own user interface. The desktop should not be modified to match your program, rather your program should be modified to match the desktop. <br></div><br>And this is somehow worse then when a game does it?? I see no difference between a game going fullscreen by changing the resolution and an application doing the same, whether you maximize the window or not.<br><br>Hey dont take my word for it, dig a little deeper into GLMax2D or any other OpenGL game and youl see what i mean.<br>And if you still dont believable me, try hooking that API and see who calls it yourself. <br><br></td></tr></table><br>
<a name="1317557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @grable : Juiceter didn't mention about opengl.<br>We're trying to be generic, so we're not taking opengl apart...<br><br>And by the way, running an opengl 3d context (in blitzmax) on a dual screen desktop with the application using a different resolution that my primary screen, and all I can see is the image on the first screen that is partially seen on the second screen.<br>Then if I use Alt+Tab without closing the fullscreen application, I go back to a resized desktop and fully reorganised icons, and ... it also removed my wallpaper.<br><br>So, whatever OpenGL doesn't call any API function for fullscreen, the windows drivers will. <br><br></td></tr></table><br>
<a name="1317559"></a>

<a name="1317561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @grable : Juiceter didn't mention about opengl. <br></div> Except he just did.<br><br>And no need to take OpenGL apart, just search for ChangeDisplaySettings in "/brl.mod/glgraphics.mod/glgraphics.win32.c".<br><br><div class="quote"> And by the way, running an opengl 3d context (in blitzmax) on a dual screen desktop with the application using a different resolution that my primary screen, and all I can see is the image on the first screen that is partially seen on the second screen.<br>Then if I use Alt+Tab without closing the fullscreen application, I go back to a resized desktop and fully reorganised icons, and ... it also removed my wallpaper. <br></div><br>So your saying that even GLMax2D messes up your desktop? Maybe that has something to do with multiple monitors... I only have one so am unable to test.<br><br><div class="quote"> So, whatever OpenGL doesn't call any API function for fullscreen, the windows drivers will. <br></div>No it wont. Only thing OpenGL cares about is making a context attached to a window. Thats it. There is NO WAY to tell opengl what screen resolution you want. Therefore the drivers cant to anything.<br><br>Im not pulling this out of my ass here, its all over the internet if you bother to search for it. <br><br></td></tr></table><br>
<a name="1317566"></a>

<a name="1317567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well thanks one and all. Interesting comments there.<br><br>Not sure if you guys have read what I've said though - it's probably only going to be me that's using this app; so I won't be releasing any code for anyone to test. If it works for me then it will be fine. Interesting lines of thought, though. <br><br></td></tr></table><br>
<a name="1317576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @grable : OpenGL (from Blitzmax or not) creates a context. if you want it to be fullscreen you have to modify the desktop resolution to fit its window.<br>Then line 117 "if( ChangeDisplaySettings( &amp;dm,CDS_FULLSCREEN )==DISP_CHANGE_SUCCESSFUL )"<br><br>I'm a bit lost in the conversation ...<br>All I can see is that actually Blitzmax changes the display mode to get the opengl context in fullscreen mode. So, what's your point ?<br><br>BTW, I think perhaps you don't understand (maybe I'm just not clear, I don't fully master the english language ^^) that I (we ?) don't bother anyway if it comes from opengl or windows or a graphics driver or blitzmax, in the end, the resolution is still modified at some step until the application ends.<br>And that's all what I'm speaking about, because, wherever the problem is, it's still there.<br>So, we should never intend to modify the display unless really advert the user.<br>The side effects are legions, because, while it's supposed to be safe, it has never been. It's a process that can break at so many moment that it's actually trully unsafe.<br>When you do it to launch a game, you already know it will, and generally, you have a windowed launcher that allows to set the good resolution and choose or not to go fullscreen.<br><br><br>@Juiceter:<br>No problem. I really think you should try a virtual resolution, at least you'd learn how to master it, but if you want to go for fullscreen, it's obviously up to you.<br>Then you probably have what you need on this topic.<br>And as I said above, what I said is really not something to take personnal.<br><br><br>ps :<br><div class="quote"> <i>@grable : Juiceter didn't mention about opengl.</i><br>Except he just did. <br></div><br>Don't think I'm trying to proove anything, but I really can't see where he did. So, sorry if I might have missed it<br>The only one I can find related to opengl by Juiceter is :<br><div class="quote"> <br>If blitz provides a way to do it (through openGL or whatever) then, well, it's there to be exploited. <br> <br></div><br>And honnestly, I don't think it's relevant in what we said so there must be something else I missed. <br><br></td></tr></table><br>
<a name="1317578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> All I can see is that actually Blitzmax changes the display mode to get the opengl context in fullscreen mode. So, what's your point ? <br></div><br>My point is that OpenGL itself does not change the resolution, it has to be done from an API like ChangeDisplaySettings.<br>Which is the same API used by Windows itself to change resolution (except for DX, which is at a lower level).<br><br>All im saying is that there is NO DIFFERENCE, between YOU calling ANY api to change the resolution and ANYTHING ELSE doing the same.<br>Its the same thing.<br>So if one of them is wrong, the other is right, where does that leave us?<br><br><div class="quote"> Don't think I'm trying to proove anything, but I really can't see where he did. So, sorry if I might have missed it <br></div><br>Its in post #14.<br><br>And note that i never said one should do this on a lark which you seem to think. You change the resolution because the user wanted to, thats it.<br><br>These worries about screen resolution changes being "dangerous" is a past long gone!<br>I havent had any trouble with doing that for 16+ years, and i threw out my CRT last year even. <br><br></td></tr></table><br>
<a name="1317586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Its in post #14.<br> <br></div><br>Ok, so it's not from Juiceter, it's from TomToad.<br><br><div class="quote"> <br>These worries about screen resolution changes being "dangerous" is a past long gone!<br>I havent had any trouble with doing that for 16+ years, and i threw out my CRT last year even. <br> <br></div><br>You're like many other, a lucky one.<br>We are not all as lucky, so we know it can be really annoying, and it's far from a "past long gone". <br><br></td></tr></table><br>
<a name="1317590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You're like many other, a lucky one.<br>We are not all as lucky, so we know it can be really annoying, and it's far from a "past long gone". <br></div><br>If your going to phrase it like that, you should say your the unlucky one.<br>IE screen resolution changes messing up your system is the exception not the rule.<br><br>I would much like to know what kind of hardware you have and how old the drivers are if this is a problem for you. Really. <br><br></td></tr></table><br>
<a name="1317592"></a>

<a name="1317595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> In retrospect, "upscaling" is probably the way most would do it (and probably safer too for the reasons given). However, it just seems to me that it isn't very, shall we say, graceful. <br><br>- you are adding more code, which slows development down<br><br>- you are using more resources (more memory, and more code means slower execution time).<br><br>You can look at it from that point of view too. Ok, perhaps they result in minor hits on performance due to the power of todays PCs etc. but I was brought up coding on the Amiga, and as such I tend to try and code in such a way that I do things "tightly" (it's just a habit).  <br><br>It's a pity that you can't just change desktop screenmode and when you are finished have the users screenmode re-invoked (with all icons in their original places). <br><br></td></tr></table><br>
<a name="1317601"></a>

<a name="1317602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's a pity that you can't just change desktop screenmode and when you are finished have the users screenmode re-invoked (with all icons in their original places). <br></div>You can though. So long as you keep the process that changed the resolution running it should reset when it terminates.<br>(on Windows atleast, and assuming you used the API correctly) <br><br></td></tr></table><br>
<a name="1317605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep! <br><br></td></tr></table><br>
<a name="1317657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>If your going to phrase it like that, you should say your the unlucky one.<br> <br></div><br>Not that much, you just don't care about one thing :<br>We are not all based on the American stuff.<br>In France, we have not the same electrical outlet, nor the same output power, and all the hardware is calibrated for US standard. All we have here is some derived stuff that fit our electrical supplies, but it's still made to work with higher voltage.<br>It leads to monitor flickering from time to time, and lots of power supply that fail just because of overvoltages on the lines.<br>(some Frenchies are more lucky than others, like in Paris, they have good tensions on their lines)<br><br>So, anytime you require a bit more supply than necessary, you take a risk. And this risk is here anytime you switch the monitor resolution, anytime you restart the computer, or anytime you run a game that alternate between high and low polygon density (with a high end GPU, it can goes from 30W to 500W ... it's too much for the lines).<br><br>I have an external voltage regulator, but it's not enough for my PC (it's limited to 500 Watt and my PC can go up to 800 Watt)<br><br>Then, There is a lot of failure with french hardware, it's not an "unlucky" thing but more something we have to deal with.<br>As you probably don't read the french news about hardware, you're just not aware of that.<br>And I highly suppose France is not the only country with this problem (I think germans maybe too ?) <br><br></td></tr></table><br>
<a name="1317663"></a>

<a name="1317664"></a>

<a name="1317665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> you just don't care about one thing  <br></div><br>Well i didnt know your country had a shit electric system, so how can i not care about something i didnt know?<br><br>And im not American either, dont know what gave you that idea.<br><br>500 Watts is your maximum draw??? Holy shit man, that must suck. No stove, very little heating and maybe a flatscreen if your lucky.<br>I though middle Europe had better tech, guess i was wrong on that one.<br><br>I live in Norway, and we have a generally good electric system. Though there are places with old networks that exhibit the same problems as you have.<br>And i have lived in such places, and never have i ruined that much hardware! So i know what your talking about.<br><br>But that still does not make it a hardware problem, its an electric one.<br>Given <strike>enough</strike>the required amount of juice your hardware would be able to change resolutions like its supposed to.<br><br>So that era really IS long gone, you just didnt notice.<br><br>EDIT: I guess im being a pedant at this point, so dont take it the wrong way ;) <br><br></td></tr></table><br>
<a name="1317670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Juiceter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I swear by a decent surge protector. Everyone should have all their delicate kit linked up to one.<br><br>I have to say that I hated my old 17 inch Amiga multisync monitor switching screenmodes (it had a reed switch in it, and used to give a massive click every time it did so). It were pretty scary I tell thee! <br><br></td></tr></table><br>
<a name="1317684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Well i didnt know your country had a shit electric system, so how can i not care about something i didnt know?<br> <br></div><br>Yep, That's what I said, when you don't know about it, you can't figure it.<br>Well, all installations in France are not that bad, and it's supposed to use the NF (which is almost in all terms the same as the EU norms) but there are too many overvoltages due to, maybe too old electric centrals and not enough maintained wire network ... "when you're not in Paris"<br><br>And BTW, norway and Sueden have very good feedbacks, so you're maybe a lucky one to live there :)<br>While I supposed Norway also use 230V with 50 hz, there is much to think it's just better installed.<br><br>All province region that is not Paris just suck a bit ... worse electric installement, bad internet, or late to be installed, less work available, almost no R&amp;D society ...<br>Even the foreigners only talk about Paris ... (or the Normandy's Omaha Beach for some reasons -_-')<br>I'm maybe a bit exagerating but that's how I feel it and most of my neighboors too.<br><br><div class="quote"> <br>500 Watts is your maximum draw??? Holy shit man, that must suck. No stove, very little heating and maybe a flatscreen if your lucky.<br> <br></div><br>Nope, that's just the maximum my box support.<br>I don't know the word in english and can't find it on google -&gt; in French it's called "Onduleur".<br>It allows to anticipate voltage ruptures and overvoltages, it's pretty accurate and I've never had any electic problem when I used to use it<br>But, I just can't plug my computer on it anymore because of its 500 watt max capacity.<br>For the little story, I used to use it before with my old computer. I had too much charge on it when I plugged my laptop, so I disconnected the old computer and plugged it directly on the mural outlet.<br>It fried in the same week. So I built a new computer, more powerfull ...<br><br>I've moved several times, and different cities, and always experienced electrical problems, with different hardwares. And when I talk to friends of thoose problems when they happen, there is always someone to answer "Oh, that remind me when it happenned to me for [...]"<br><br>France is not supposed to be a bad country, or a poor contry, but I think maybe, French are too snooty to admit we live with too many old devices, and tons of things are going very wrong.<br><br>[edit]<br>"surge protector", maybe that's near the word I looked for.<br>But google just shows me some external outlet ... so it's maybe a bit far to what I'm refering.<br><br>-&gt; <a href="https://www.amazon.fr/Infosec-65522-Zenergy-Onduleur-prises/dp/B004QQW1MO" target="_blank">https://www.amazon.fr/Infosec-65522-Zenergy-Onduleur-prises/dp/B004QQW1MO</a><br>That's what i'm talking about.<br><br>Now, I'm looking for a 1000 Watt (or more) version.<br>something like this (but this one is too expensive)<br>https://www.amazon.fr/KOENIG-Onduleur-USV-2000-1200/dp/B00651UWS8/ref=sr_1_2?ie=UTF8&amp;qid=1472670882&amp;sr=8-2&amp;keywords=onduleur+1200w <br><br></td></tr></table><br>
<a name="1317688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Internet says UPS, external power supply with a battery. Which makes more sense now.<br>Not a bad thing to have, especially where you live hehe.<br><br>Heres hoping that 1000watter solves your power issues :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
