<!DOCTYPE html><html lang="en" ><head ><title >load unlimited images</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >load unlimited images</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >load unlimited images</a><br><br>
<a name="1047380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello everyone,<br><br>I just bought blitzmax (I have little experience with it), and I have a question.<br><br>I'm working on a program where the user should be able to load unlimited images. My question is how can I do that?<br>I've tried a lot but could not find the answer.<br><br>Thank You a lot! <br><br></td></tr></table><br>
<a name="1047383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Load them as pixmaps using LoadPixmap.... you obviously aren't going to be able to VIEW a huge amount of images all on-screen at once, so you can simply convert them to `Images` as you need to show them. You won't be able to keep them all in video ram as Images, there just isn't enough of it (e.g. maybe only 32-64mb on many systems), so you'll have to figure out a way to spool them from pixmaps into images in a fairly smooth way - perhaps by using small `pixmap windows` from each pixmap and thus uploading only small sections of image each frame - e.g. 64x64 or 256x256, so that you are drawing `tiles` on the screen as the image scrolls or whatever. It should be fast enough to be smooth. You just wont be able to do an upload of a whole big image every frame and expect it to be smooth. By loading into pixmaps with LoadPixmap you are using main memory, so you could have a gigabyte or more available, depening on the computer. You also might consider storing the image in a compressed format in ram and only decompress as you need to view it. You could use zip or something similar. Another option is to spool images from disk as they are needed - a bit slower and more difficult to get smooth but it'd allow you to use a lot less memory. <br><br></td></tr></table><br>
<a name="1047393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by unlimited images? <br><br></td></tr></table><br>
<a name="1047396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you mean by unlimited images?  <br></div><br><pre class=code>
Repeat
	Local img:TImage = LoadImage("myimage.png")
Forever
</pre><br>heh. this was just joke but... im too thinking about unlimited images.. <br><br></td></tr></table><br>
<a name="1047416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> But what does that mean? Why would you do that?<br><br>If you want to use the same image multiple times, you should load it as a pixmap, and then deal with that pixmap. Particularly with pngs as they are relatively slow to load, as they must be decompressed. By loading a png once into a pixmap, and then using that pixmap for all my image operations, I speeded up my loading routine by several seconds. <br><br></td></tr></table><br>
<a name="1047417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ ImaginaryHuman<br>Thanks.<br>I did some experimentation with LoadPixmap.<br>it works well, but it is too slow.<br><br>@ Tsaar Flavius<br>The user can load images into the program.<br>There should be no restriction (with images).<br><br>@ Zeke<br>if this was possible... <br><br></td></tr></table><br>
<a name="1047419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The difference between an image and a pixmap, is that the image is stored in your videocards' memory, while a pixmap is in your normal computer RAM.<br><br>They are slow to draw, because each time you draw a pixmap, it needs to be copied across the motherboard into video memory first.<br><br>but... pixmaps are only limited by the amount of memory windows can access, which is huge in part hanks to the ability to access virtual memory if there isn't enough.<br>By comparison, your video card needs to store everything in video memory, which tends to be significantly smaller.<br><br>Other complicating factors:<br><br>- Images are stored *uncompressed* in video memory, taking 4 bytes for each pixel  (32 bit: 24 bits for the color, and 8 bits for alpha info)<br>- memory allocated rounded *up* to the nearest power-of-two size.<br>  This means that an 800x600 pixel JPEG file that's 50KB on disk, all of a sudden takes up 1024 x 1024 x 4 = 4 MB of video RAM.<br><br>Just because you WANT to load infinite images doesn't mean that your videocard can store an infinite amount of those 4 MB data chunks. Even completely ignoring the video memory requirements of the windows GUI itself and all it entails, you're not going to fit more than 64 of those in the video memory of a fairly typical video adapter with 256MB onboard memory.<br><br>You'll either need to put up with the hassle of pixmaps, or you'll have to come up with some fancy system to load/unload your data dynamically where the user may not notice what's going on... But there are very real system limitations you're running into here. <br><br></td></tr></table><br>
<a name="1047436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very real, and very physical limitations for something like that!<br><br>If you try to store an unlimited amount of images in every PC there is on the planet, you'll still eventually run out of room.<br><br>What I would do is something boarding on 3D trickery when it comes to them doing large out door areas, as an example, load up, say 9 images and think of them images as a grid (With the centre on being the only visible one), if the user clicks to look right, bring the ones to the right to the centre which they see the new middle image, the old centre ones go to the left of the grid, thus, losing the original left images and fill the now vacant right hand side with new images from the harddrive!<br><br>Do that for all directions, like up, down, left and right, and move, lose and replace images respectively.<br><br>Obviously, you'll need a filing system in place so it knows what to drag in, but that shouldnt be too much hassle really... So, at anyone time you should only have 9 images in memory (Be in video or system), but with the potential to navigate around massive image libraries (I'll not say unlimited, because, well, theres always a limit really) <br><br>Dabz <br><br></td></tr></table><br>
<a name="1047445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am aware that there is a limitation.<br>This limitation is different for each computer.<br>EDIT: the Programme should be able to load images until memory is full.<br><br>is it also possible that all the picture pasted together into one big picture?<br>and that the program shows a part of that big picture?<br><br>@Dabhand<br>I use blitzmax, not blitz3d.<br>3d is a bit difficult ;) <br><br></td></tr></table><br>
<a name="1047451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I use blitzmax, not blitz3d.<br>3d is a bit difficult ;) <br> <br></div><br><br>Yeah, but my example on how you could handle it was based on how they manage to create massive game areas, they load bits in, the player wanders over somewhere, new bits are loaded while behind them bits of the level are dropped.<br><br>This is the same, yet, instead of a entire 3D level to show, you could use the same system to display shedfuls of images without hogging the users system and crippling it!<br><br>:)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1047455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> is it also possible that all the picture pasted together into one big picture?<br>and that the program shows a part of that big picture? <br></div><br>Have a look at GrabPixmap.<br><br><div class="quote"> you'll have to come up with some fancy system to load/unload your data dynamically where the user may not notice what's going on <br></div><br>I thought the video card automatically swapped images between vram and ram if there is a shortage of memory. Slow of course, but shuoldn't crash the program.<br><br><br>I think by "unlimited" he means "arbitrary amount" <br><br></td></tr></table><br>
<a name="1047466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried to make a load/unload system.<br>here:<br>==============================================<br>AppTitle$ = "load multi image"<br>Graphics 600,400<br><br>	'add here the lokations of the images. they must be separated by a space<br>	imageopen$ = "images/intro.png images/ge.PNG images/boss.png images/maxball.png" + " " <br>	<br>#beg<br><br>	'vieuw image names<br>	oldimageopen$ = imageopen$<br>	y = 0<br>	#vieu<br>	DrawText(Left(oldimageopen,Instr(oldimageopen," ")-1),0,y)<br>	oldimageopen$ = Mid(oldimageopen,Instr(oldimageopen," ")+1)<br>	y = y + 12<br>	If Len(oldimageopen) &gt; 1 Then Goto vieu<br><br>	'select a picture<br>	If MouseHit(1) Then<br>		choose = MouseY()/12<br>		changepic = 1<br>	EndIf<br>	<br>	'image <br>	If changepic = 1 Then<br>	Cls <br>	choose1 = 0<br>	oldimageopen$ = imageopen$<br>	If choose &gt; 0 Then<br>		#vieua<br>		choose1 = choose1 + 1<br>		oldimageopen$ = Mid(oldimageopen,Instr(oldimageopen," ")+1)<br>		If choose1 &lt; choose Then Goto vieua<br>	EndIf	<br>	pict = LoadPixmap(Left(oldimageopen,Instr(oldimageopen," ")-1))<br>	DrawPixmap(pict,200,50) <br>	changepic = 0<br>	EndIf<br><br>	'exit<br>	If KeyHit(key_escape) Then End<br>	<br>	'vieuw screen<br>	Flip<br><br>Goto beg<br><br>============================================== <br><br></td></tr></table><br>
<a name="1047473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ouch...<br><br>To start, and this isnt meant to be personal, so please dont take it the wrong way... But to start, you really need to look at how you are setting your apps out, thats horrible to read, check out the samples or the archives and get a bit of a handle on how everyone is programming using things like functions, loops and types.<br><br>Secondly, if you want to achieve your aim, you need a bit of a plan, its okay for us to suggest stuff, and now and again people do knock out example code, by the looks of things though, someone could knock out an example and (I mean no disrespect) you wouldnt know how it works... Which is pointless really!<br><br>So, what would I do if I was in your shoes... Well, I'd look at other code, read tutorials just generally play around... While I'm at it, I'd scrawl on a bit off of paper ideas that would help me get around the problem, theres been idea's here, so I would work on the best way of doing it... <br><br>If I have time tomorrow (Its late here now and I'm shot) I could write something (Unless someone chips in first), but, I wouldnt explain everything, you'll have to take it as it is... Which is the worry! ;)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1047501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Merry Christmas!!!<br><pre class=code>SuperStrict 'this makes us need to state the types of variables and reduces bugs

AppTitle$ = "load multi image"
Graphics 600,400

'add here the locations of the images. they must be separated by a " ? "
Global image_open:String = "images/intro.png ? images/ge.PNG images/boss.png ? images/maxball.png"

'the Split method will automatically split up our string for us
Global images:String[] = image_open.Split(" ? ")

'this will hold the image we load
Global display_image:TImage

'we will do our work within the main game loop
main_loop()
End



Function view_image_names()
    Local y:Int = 0
    
    'this will go through every image file path
    For Local image:String = EachIn images
        DrawText image, 0, y
        'TextHeight can give us the height of the next no matter the font
        y = y + TextHeight(image_open)
    Next
End Function

Function choose_picture:Int()
    'this returns the index number of the image path the user has chosen
    'or it returns -1 to show nothing has been selected
    Local choose:Int = -1
    If MouseHit(1) Then
        choose = MouseY()/TextHeight(image_open)
    End If
    Return choose
End Function

Function draw_picture()
    'if a picture has been loaded, draw it
    If display_image
        DrawImage display_image, 200, 50
    End If
End Function

Function main_loop()
    'repeat until escape is pressed or the red X is clicked
    While (Not KeyDown(KEY_ESCAPE)) And (Not AppTerminate())
        Cls
        'draw the list of image paths
        view_image_names()
        'draw the picture if one has been loaded
        draw_picture()
        Flip
        Delay 1
        
        'find out what the user has chosen
        Local choose:Int = choose_picture()
        
        'if choose is -1 then nothing has been chosen
        'if the user clicks below the text it will give a number too big
        'so check also that choose is within the number of images!
        If choose &gt; -1 And choose &lt; images.Length
            'load the image from the path at this position number
            display_image = LoadImage(images[choose])
            'check that the image was loaded. if the image file doesn't exist for example, give an error message
            If Not display_image Then RuntimeError "Could not find " + images[choose] + "."
        End If
    Wend
End Function</pre> <br><br></td></tr></table><br>
<a name="1047505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a project that works with theoretically limitless numbers of images, here's a little background that may be useful.<br><br>There are 3 limits to keep in mind. Displayable images (limited by the video card usually), loadable images (limited by the system's ram) and processing time (this is key to maximizing your limits).<br><br>First, you can't just load things forever, you're going to hit a hardware limitation sooner rather than later. So what it comes down to is how to you make it LOOK like you're loading an infinite number of pictures. My personal approach is scaling and caching on the fly. I get a list of everything I need loaded, I then cycle through that and create batches if needed (my users actually create batches in the form of Albums) then cycle through the active batch and create thumbnails which are small so I can get tons of them in memory at once. When a user requests a full size image I display the thumbnail scaled (DrawImageRect()...) to the size of the real image (it will be blocky and blurry but it lets them know somehing is happening) then load the full image and replace the thumbnail with that ASAP.<br><br>If you combine this with a caching system that retains the full size image as long as possible (until too many have been requested, however you define "too many") then you can get a fairly smooth experience.<br><br>I also use threading to do the loading in the background while the rest of my program is working.<br><br>If you are working on composits you could go a step further as was mentioned above and use grabimage or grabpixmap to store that, allowing you to dump the origonals...<br><br>it's all very use specific, but the key is how can you make it transparent to the user that something is being removed or added to give the impression that everything is always there, rather than ACTUALLY having everything always there, which isn't possible. <br><br></td></tr></table><br>
<a name="1047545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dabhand<br>I have not much experience.<br>sorry, I will do my best.<br><br>@Czar Flavius<br>great, This works great.<br>I've compared it with my and see that I have a lot to learn.<br>such as the locations (image_open) stride with a space, that was stupid of me.<br>Thank you very much!<br><br>The program must shows more than one picture at a time.<br>I go there a restriction on it, maby eight photos at the time.<br>I'm going to try to make a systeen.<br>I want to try the same structure  as that of Czar Flavius (thanks again) <br><br></td></tr></table><br>
<a name="1047546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>@Dabhand<br>I have not much experience.<br>sorry, I will do my best.<br> <br></div><br><br>Dont apologize, we all started somewhere, but, it is recommended that you have a good hunt through all the tutorials on here to get a general feel on how to get the best out of the language! :)<br><br>It'll go a long way! ;)<br><br>Dabz <br><br></td></tr></table><br>
<a name="1047591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>SuperStrict


Global image_list:TList = New TList


'you can add any image variable, but for this example we use this one
Local image:TImage

'load an image from wherever
image = LoadImage(...)

'add it to the list!
image_list.AddLast(image)

'load an image from wherever
image = LoadImage(...)

'add it to the list!
image_list.AddLast(image)

'load an image from wherever
image = LoadImage(...)

'add it to the list!
image_list.AddLast(image)


Function display_all_images()
    Local y:Int = 0
    
    For Local image:TImage = EachIn image_list
        DrawImage image, 0, y
        y :+ ImageWidth(image)
    Next
End Function

'you can use this to remove an image
image_list.Remove(image)

'you can use this to find out how many things are in your list
image_list.Count()

'you can use this to reset your list to 0
image_list.Clear()</pre> <br><br></td></tr></table><br>
<a name="1047627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ssdw</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Czar Flavius, wooow, it look so easy but it isn't.<br>it work great. my problem is solved.<br>Thank you very much.<br><br>and thanks everyone for the help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
