<!DOCTYPE html><html lang="en" ><head ><title >IncBin and LoadImageFont</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >IncBin and LoadImageFont</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >IncBin and LoadImageFont</a><br><br>
<a name="502121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mirko</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does LoadImageFont not work with IncBin ?<br><br>WithLoadImage it works fine, but i can't get LoadImageFont to use a fontfile included with incbin. <br><br></td></tr></table><br>
<a name="502123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, it doesn't work with fonts.<br><br>I had considered writing an ImageToImageFont routine which would allow you to use incbin but I'm lazy :) <br><br></td></tr></table><br>
<a name="502193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LeisureSuitLurie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It definitely doesn't...which sucks <br><br></td></tr></table><br>
<a name="502232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Just had a look through freetype, and *think* this is doable.<br><br>Will keep hacking... <br><br></td></tr></table><br>
<a name="502233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Er.. Why doesn't it work with IncBin? 0_o <br><br></td></tr></table><br>
<a name="502330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br><div class="quote"> <br>Er.. Why doesn't it work with IncBin? 0_o <br> <br></div><br><br>Because the FreeType library doesn't provide any IO 'hooks', the way the jpeg, png, ogg etc libraries do. Instead, it just uses the standard 'C' IO commands, which Max doesn't/can't intercept.<br><br>By hooks I mean callback functions that allow the calling app to provide IO mechanisms. With such hooks, the IO 'read' code can be Max code, which can then just use the standard Max stream system. Have a look at PNGLoader in brl.mod to see how the png lib is hooked.<br><br>However, trawling through the code it looks like FreeType does in fact localize it's IO to a single object-like struct which includes callbacks, and it will hopefully be possible to intercept things at this level.<br><br>This will mean messing with FreeType source code, which I'm not 100% happy about, but I think is worth it in this case. <br><br></td></tr></table><br>
<a name="502333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I see. <br><br></td></tr></table><br>
<a name="502339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I've successfully hooked it, but it's a little messy!<br><br>Something in freetype appears to be validating the filepath and rejecting Max's '::' 'stream protocol' prefix.<br><br>I've worked around it by stripping off the prefix before calling freetype, and reattaching it in the 'Open' callback. Ugly, but good enough for now! <br><br></td></tr></table><br>
<a name="502415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mirko</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whow, great news.<br>If the memory exception bug (reported here <a href="http://blitzbasic.com/Community/posts.php?topic=44935" target="_blank">http://blitzbasic.com/Community/posts.php?topic=44935</a> )<br>will once be fixed too, BlitzMax will be 'the one and only' for my PC in my car ;-)<br><br>bye,<br>Mirko<br><br>[My car-pc-project, started a few years ago <a href="http://www.barchetta.info/ArtikelNr283" target="_blank">http://www.barchetta.info/ArtikelNr283</a> (text is german only)] <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
