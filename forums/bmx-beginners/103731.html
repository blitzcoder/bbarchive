<!DOCTYPE html><html lang="en" ><head ><title >Make 2 version of same code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Make 2 version of same code</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Make 2 version of same code</a><br><br>
<a name="1251513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://en.wikibooks.org/wiki/BlitzMax/Language/Conditional_Compiling" target="_blank">http://en.wikibooks.org/wiki/BlitzMax/Language/Conditional_Compiling</a><br><br>Example:<pre class=code>Global QVew:Int = True

?Not QVew
DebugLog "This is running Always: True/False"
?QVew
DebugLog "This is Never running: True/False"
?
DebugLog "OK Always Running"
</pre>Can I set what code that is going to compile? <br><br></td></tr></table><br>
<a name="1251520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The identifiers are fixed.<br><br>Custom identifiers:<br><br><pre class=code>
global QVew:Int = true
if QVew
  debuglog "bla"
else
 debuglog "blubb"
endif
</pre><br><br>--&gt; so the same procedure as usual.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1251521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Was wondering if I could exclude code to the compiler somehow:<br>Don't compile this code and this and this..<br><br>Build 1 is the code I have now<br>Build 2 exclude the graphical interface (that is like 50% of the code)<br>But I still need some of the graphical GUI<br><br>If I split the code then I have 2 code to update<br>I guess a normal If is my best option after all, Thanks Ron <br><br></td></tr></table><br>
<a name="1251546"></a>

<a name="1251547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you not have the gui code in a separate source file and just include it into the main code?<br><br>That way you could compile it with the include line active and just comment that line out for the second version? <br><br></td></tr></table><br>
<a name="1251626"></a>

<a name="1251628"></a>

<a name="1251629"></a>

<a name="1251630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I make another try to see why I could not reach: wxWidgets MyFrame from MyMOBii<br><br>This is my attempt<br><br>MyFrame.bmx:<pre class=code>
Import "MyCode.bmx"
Global MFrame:MyFrame
Global MyMOBii:MOBii = New MOBii
Type MyFrame Extends wxFrame
...
End Type</pre><br>MyCode.bmx:<pre class=code>Import "MyFrame.bmx"
Type MOBii Extends MyFrame
...
End Type</pre>When testing I get this ERROR:<br><b>Compile Error: Duplicate identifier 'MyFrame'<br>Build Error: failed to compile C:/BlitzMax/MOBii/BLL/MyCode.bmx</b><br><br><br>It be fantastic if this would work, I say <br><br></td></tr></table><br>
<a name="1251627"></a>

<a name="1251636"></a>

<a name="1251637"></a>

<a name="1251638"></a>

<a name="1251639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I erase all file in .bmx<br>I change MyFrame to MOBii in:<pre class=code>Type MyApp Extends wxApp
	MyMOBii = MOBii(New MOBii.Create(,,, 0, 0, 100, 100))
End Type</pre><br><br>Then I get <br><b>Compile Error: Unable to open file '.bmx/MyCode.bmx.debug.win32.x86.i'</b><br><br>If I move/rem the: Import "MyCode.bmx"<br>MyFrame want: MyCode.bmx.debug.win32.x86.i<br>and MyCode.bmx want: MyFrame.bmx.debug.win32.x86.i<br><br>I am working to make: MyFrame.bmx independent<br>I am still little impressed I never come this far without try explain the problem<br>(Thinking out Loud) <br><br></td></tr></table><br>
<a name="1251667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You created a cyclic dependency:<br><br>"MyFrame" imports "MyCode" (which says: compile "MyCode" first, then "MyFrame")<br><br>"MyCode" imports "MyFrame" (which says: compile "MyFrame" first, then "MyCode").<br><br><br>Restructure your code to avoid this dependency.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1251687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I been sitting 7 hour now and try make MyFrame.bmx independent<br>I try move all MyFrame bla bla from other types to MyFrame<br>Then I get to my biggest type that have nestled code with MyFrame<br>So I made it:<br>Type BiggestType Extends wxFrame<br><br>Fixing my wrong make me realize I just move all the code to a new file but don't make the code splittable just make it independent.<br>(I had to plan this from the beginning)<br><br>these 7 hour make me understand the Power and the use of: Extends<br>and the importance to keep the function inside the Type<br>I think this is called learning the hard way ^^<br><br>I Reload my 7 Hour old backup and continue with My Life <br><br></td></tr></table><br>
<a name="1251693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Removing cyclic dependencies has multiple approaches:<br><br>The easiest one for you in BlitzMax is this<br><br><pre class=code>
file "mytypebase.bmx"
Type MyTypeBase
  Method Move() abstract
End Type


file "mytype.bmx"
Type MyType extends MyTypeBase
  Method Move(); dosomething; End Method
End Type


file "mycode.bmx"
Import "mytypebase.bmx"

Type MyCode
  Field mytype:MyTypeBase
  Method Update()
    mytype.Move()
  End Method
End Type

file "main.bmx"
Import "mycode.bmx"
Import "mytype.bmx" 'the extended one !
global code:MyCode = new MyCode
code.mytype = new MyType

code.update() 'will run Move() of MyType while "MyCode" just knows about "MyTypeBase"
</pre><br><br>This is similar to "interfaces", but this is not existing in "vanilla blitzmax" (think Yasha posted something "interface"like some months ago).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1251708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MOBii</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I shall make time and do this example when my head is back to normal, so I can feel and play with the code!<br><br>For my splitting:<pre class=code>
Import "mytypebase.bmx"

Type MyCode
  Field mytype:MyTypeBase
</pre>I think this is what I need todo to split my 2 Type that has nestled-ed code.<br>Thank thee I learn a lot today!<br><br><a href="http://en.wikibooks.org/wiki/BlitzMax/Language/User_Defined_Types" target="_blank">http://en.wikibooks.org/wiki/BlitzMax/Language/User_Defined_Types</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
