<!DOCTYPE html><html lang="en" ><head ><title >What type of object is this?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What type of object is this?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >What type of object is this?</a><br><br>
<a name="542423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> for example:<br><pre class=code>
local MyObject:String
Local MyObject2:Int
</pre><br><br>Is there a way to queery the object type?  To find out (in code) if the object is a string, integer, or float? <br><br></td></tr></table><br>
<a name="542431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> there isn't a reliable way to simply say:<br><pre class=code>
If Int(MyObject) then print "Is an int"
If String(MyObject) then print "Is a string"
</pre><br>because if you put a number at the beginning of the string, both cases will be true since the number can be converted to an int. <br><br></td></tr></table><br>
<a name="542464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you use sizeof() to indicate? Int's should be 4 bytes, strings are in almost all cases likely to not be 4 ??? <br><br></td></tr></table><br>
<a name="542479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cajun17</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> String is an object and since all objects are stroed by refrence they will show a size of 4 as well. <br><br></td></tr></table><br>
<a name="543809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scienthsine</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ohh come on... atleast test what you say :/<br><br>Sizeof() will work, it returns the amount of memory allocated for that variable. It works on strings, objects, etc... <br><br></td></tr></table><br>
<a name="543824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Pertubatio : this example doesn't make sense anyway as the int is *not* an object while the String is. And thus you can't by example pass in int to a function that expects a string. It appears you can because an implicit int -&gt; string conversion is performed for you, but then the function really get passed a string and not an integer. So let's say MyObject is that parameter, obviously the test "If String(MyObject)" will always succeed.<br>In short a function that expects as a parameter an object (like a string) cannot get passed a "value" type like an integer or a float, and conversely a function that expects as a parameter a value type cannot get passed an objects. So such a acase will never arise at runtime, and then trying to discriminate at runtime between both categories of types makes no sense.<br><br>On the other hand, a function that expects an object of a given type A can very well get passed an object of another type B (provided B inherits A). So in this case checking the type at runtime does make sense.<br><br>In short testing at runtime an object's type makes sense only if we're *really* talking about objects. Like by example String , TList, TLink, Object, but *not* int.<br>And then yes, doing a test like <pre class=code>If String(MyObject) then print "Is a string"</pre>is perfectly reliable.<br><br>The key point here is that when you do<pre class=code>
Local someString$
Local someInt%
...
If Int(someString) then print "Is an int"
If String(someInt) then print "Is a string"</pre>the compiler does built-in int&lt;-&gt;string conversion (like converting 12 from and to "12"), that is a conversion that is entirely specific to the int&lt;-&gt;string conversion. But when you do<pre class=code>
Local someObject1:SomeType1
...
If SomeType2(someObject1) then print "Is an object of type SomeType2"
</pre>the compiler does a very different thing : converting the "reference to SomeType1" someObject1 to a "reference to SomeType2". That is, a very different thing even though the syntax looks the same. <br><br></td></tr></table><br>
<a name="543827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only test for this kind of stuff is:<br><br>1. First test for string, so you look if there is a non numeric in string (input)<br><br>2. Test for Float: find a "," in string (input)<br><br>3. if both is not the case, it is int.<br><br>(if - elseif - else - endif :)) <br><br></td></tr></table><br>
<a name="543835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you read my post Dreamora?<br>Here you're advising to parse a string to see if it's a string a float or an integer ^-^<br>There's some reasoning problem here... <br><br></td></tr></table><br>
<a name="543839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wildly of topic I know, but did anyone else find themselves reading this threads title with a crap Lloyd Grossman accent? <br><br></td></tr></table><br>
<a name="543856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No there is no problem with this Koriolis.<br>See the 3 steps and try them out in the simple 6 line source and you will see that it works.<br><br>Problem is that you assume that string (input) only works on objects which isn't true as it is explicitely meant to convert numerics into strings or better objects so it would give true in any case and wouldn't be reliable for this check.<br><br>thats why I made the "check for type characteristics" ... string have non numeric an float has a "," followed by more numbers. <br><br></td></tr></table><br>
<a name="543857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> thats why I made the "check for type characteristics" ... string have non numeric an float has a "," followed by more numbers.  <br></div><br><br>A float has a decimal seperator "." unless of course you're weird and foreign ;) <br><br></td></tr></table><br>
<a name="543892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  No there is no problem with this Koriolis.<br>See the 3 steps and try them out in the simple 6 line source and you will see that it works.<br> <br></div>It simply depends on what you mean by "works".<br><div class="quote"> Problem is that you assume <br></div>I *assume* nothing in programming. And again reading my post would have helped you not to write this wrong statement. I explicitely explained at the end of my last post that although the similar syntax there are here 2 distinct categories of conversion happening here, one of them being the string &lt;-&gt; int conversion like in "string(123").<br><br>Let's recap.<br>First (please, please, read my post this time) in reality you would either *always* have a string, an int or a float, you cannot be in a situation where you get passed (via a parameter, a type field or whatever) something that could be once an integer, once a float and once a string. This is *not*, red my lips, *not* possible.<br>In the best situation let's say your variable is declared as a string, then in this case, ahem, it's a string. So if the var was assigned an int or a float (via argument passing if it's an argument, or explicit assignment if it's a local var, global var or type field), then a int -&gt; string or float -&gt; string conversion happened in the first place. Reconverting to string ("string(input)") makes no sense.<br>Example:<br><pre class=code>Function f(s$)
    ...
End Function
Local param% = 1
f(param)</pre><br>in f you do know that s IS a string, it will always be. It doesn't matter if param was an integer.<br><br>Second point, let's say that's no problem for you that the var you access is really a string, but you want to know what the *value that was assigned to it" originally was (like what "param"'s type in my previous example. But then<br>Pertubation has been clear enough on the problem.<br>In my example whe you do f(1) it is *exactly* as if I'd done f("1"), and "1" is a perfectly legitimate string parameter. Your solution would only be applicable if you do know in advance that when the user calls f with a string a value, it will never start by the string representation of some numeraical value. It's not that often that you can enforce this. <br>And anyway that's not what was requested by the original poster. As I understand it He asked how to determine the "real" type of the variable (which again cannot be once a string, an int or a float).<br><br><br><br>As a side note I think this an interesting discussion as there might be a non negligeable amount of people here that do not realize that <br>(1) integers and floats are not objects in BlitzMax (like in most of the other languages), (2) BMX uses static typing (<a href="http://en.wikipedia.org/wiki/Data_type#Type_checking" target="_blank">see Wikipedia's type checking page</a>), not dynamic typing (good thing I'd say), and all the concreate implications it has. <br><br></td></tr></table><br>
<a name="543938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why must the string not start with numerical?<br>You check the string to see if there is a non-numerical in and it is granted that it is a string. Sure in worse cases it could still be a string that represents a numeric.<br><br><br>The poster wanted to know how to find out if it is an int, string or float and the only way to do that, thanks to BMs C++ like "numerics are no objects" OO break, is to see whats inside ...<br><br><br>btw: Read the first posting. There was nothing with PASSED. He wanted to know how to check for a given type and I'm only answering that question. I did not answer any stuff in between, only tried to do what the XY postings before mine didn't: show a possible solution.<br><br>I know that an can't switch between string and int/float as the later are no real objects :(<br><br><br>@Perturbatio: you're right :-) Thats a different language that uses "," as seperator. <br><br></td></tr></table><br>
<a name="544184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why must the string not start with numerical? <br></div>It's precisely because it can that there is a problem. But I'm not sure explaining it again would convince you so I'll just give up.<br><br><div class="quote"> btw: Read the first posting. There was nothing with PASSED. <br></div>I read it thanks, and I'd appreciate you to do the same with my posts.<br>Why testing the type of an object? Because you are not the one that created it. Typically (like say 95% of the time) this is an object that was passed to you as a parameter.<br><br><div class="quote"> He wanted to know how to check for a given type and I'm only answering that question <br></div>and I'm only saying this this doesn't look like a decent solution to me, and that in any case it's important to understand that in reality you'll always be manipulating a string in the situation you exposed.<br><br>I'll guess you get my point now. <br><br></td></tr></table><br>
<a name="544340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that I will manipulate a string this way.<br>But for BM this is the only solution as<br><br>1. Numerics are no types (as you know too)<br>2. Numerics are automatically casted making type () casttests useless for testing purpose<br>3. There is no other way to examine the "type of content" without using string and checking for characteristic content ... which is why I search for non-numeric for a string (if there is even only 1 non-numeric in the string I can't have been numeric before casting), search for "," for a float (as it will be in even if the number was the same as an Integer) and if both isn't the case, I know that it is an integer.<br><br>I know that this isn't the ultimative great solution, but the only solution that I can think of as long as you are not planning to bit examine the stuff.<br><br>the only trivial numeric check is the one for double due to sizeof differences with int / float.<br><br><br>btw: the good point of this solution is, that you can use the input:object declaration even for numerics if you cast them to string, you just have to "analyze" them for backparsing afterwards. This is a quite large + of this solution I think (otherwise you have to use Bank, Memory or 2 different function/method declarations for this kind of stuff, at least as long Mark is keeping this inconsistency in the system with non-type numerics which I think was just for simplicity with ASM / C++ stuff. I've been thinking about I could make Numerics as real types as it can sometimes be quite frustrating when you are normally used to Eiffel which only has types and full OO no procedural anymore) <br><br></td></tr></table><br>
<a name="544349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. yep<br>2. yep<br>3. this is indeed no a great solution to say the least.<br><br><div class="quote"> the only trivial numeric check is the one for double due to sizeof differences with int / float. <br></div>Here you're again testing for a type that is very well known at compile time (the sizeof an integer or a float, or double won't magically change during runtime, because the type itself certainly won't change), in short it has no use.<br><pre class=code>framework brl.basic
Import brl.standardio

Local f% = 123.456
Local d! = 123.456

Local v! ' or v%

v = f
Print SizeOf(v)

v = d
Print SizeOf(v)</pre>It's clear that sizeof v will always be the same no matter the type of the value that was assigned to it. For even more fun use a string var (v$).<br><br><div class="quote"> I've been thinking about I could make Numerics as real types as it can sometimes be quite frustrating when you are normally used to Eiffel which only has types and full OO no procedural anymore) <br></div>It's indeed easy to make some TInt, TDouble etc wrapper type, and will allow to put numerics in lists TList by example. This is exactly what Java does, even if it isn't perfect.<br>At least if your var is reference to an object (excepting string) you know an integer or a float can't be cast to an object so you would have no problem : handling the case where the var is a numeric would only mean handling these wrappers. <br><br></td></tr></table><br>
<a name="544365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alright gentlemen, although I appreciate your answers I have found that what I wanted to do cant be done, not only because of the limitations with objects(ints not being objects), but with the way functions pass parameters.<br><br>What my goal was, with my scripting engine, was to have the user pass a variable and the engine record it as a pointer so that the script engine may write to it and yet the user's engine still use the variable.  I wanted to accept an object (IE string, int, etc), find out what it was and assign a pointer to it that the scripting engine used as a variable.  Since I can't pass an arbitrary object to a function/method (have to define what it is anyhow), then I must split up the user defining variables as DefineInt, DefineFloat, and DefineString...  So I already know what it is anyhow...<br><br>But again, thanks for the help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
