<!DOCTYPE html><html lang="en" ><head ><title >any way to speed up drawing a masked pixmap?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >any way to speed up drawing a masked pixmap?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >any way to speed up drawing a masked pixmap?</a><br><br>
<a name="536073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> somehow i get huge slowdowns if i draw a masked pixmap. if i just draw the pixmap in solidblend mode, my framerate stays very acceptable. pixmaps actually seem very slow in general, but since i can't grab a part of the screen, i have to use pixmaps...<br><br>any suggestions?<br><br>thanks!<br><br>(and if this has already been asked many times, i am sorry but the search function is disabled at the moment...)<br><br>ps. i miss buffers ;) <br><br></td></tr></table><br>
<a name="536108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you want to do with the pixmap?<br>You could convert it into an image...<br>image=loadimage(my_pixmap)<br>What is stopping you using grabimage/grabpixmap from the backbuffer? <br><br></td></tr></table><br>
<a name="536129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i want to "damage" the pixmap (think scorched earth) and draw it over a background. i will try to convert it into an image but i can't imagine that it would make it any faster.<br><br>nothing is stopping me from using grabimage or grabpixmap, i am using grabpixmap. i can't understand why grabimage does not has a width and height argument. <br><br></td></tr></table><br>
<a name="536136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  i can't understand why grabimage does not has a width and height argument.  <br></div><br>because you create an image to be used with it before calling the command, so the image already has the dimensions set. <br><br></td></tr></table><br>
<a name="536162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> good point :) <br><br></td></tr></table><br>
<a name="536170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought so :) <br><br></td></tr></table><br>
<a name="536189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Images draw quicker than pixmaps.<br>If you don't change the image many times then it might be quicker to convert the pixmap to an image. <br>Depending on how you draw the damage you can either convert the image to a pixmap and use writepixel or draw the image, draw the damage, grab the damaged image into a newly created image or the original image. <br><br></td></tr></table><br>
<a name="536207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> For me images draw 10 times faster than pixmaps. I am sure it can be up to 50 times faster with the highest end graphics cards.<br><br>I presume you are making some kind of Scorched Earth type of game thing where you have some land that you want to deform in some way, removing parts when explosions happen and so on. And I presume you'll want to redraw the land each frame. What you could look into is setting up and using the openGL command glReadPixels(). It is slow, just like GrabPixmap and DrawPixmap are slow, but I believe you can get it to grab only a given rectangle from the screen and put it into a certain location in memory, ie in a pixmap, taking into account the overall pitch/width of the pixmap etc. You could draw an explosion on-screen and grab that area of the backbuffer into the relevant location on the pixmap.<br><br>If you want to get a bit more advanced you might think about setting up your own textures with direct OpenGL commands. That way you will get the reference handle to the texture. Then you can upload a PART of the pixmap to a PART of the existing texture/image, using glTexSubImage2D. It would probably be faster to just update the changed parts of the image/texture from a rectangle of the pixmap, rather than upload the entire pixmap (which is basically what DrawPixmap does). Then you could just DrawImage which will be faster overall. You could also use glCopyTexSubImage2D which grabs a rectangular portion of the backbuffer and puts it into an existing image/texture. I think it uses the CPU but it may be faster than saving it off to a pixmap and then re-uploading it. <br><br></td></tr></table><br>
<a name="536248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean something like this?<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=48169" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=48169</a><br><br>If yes then you could test it and if the FPS results fulfil your needs I could post a small example abot how to do it.<br>The newer Version also supports already Background Images <br>and custom destroyable Terrain. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
