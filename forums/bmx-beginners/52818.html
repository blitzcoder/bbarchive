<!DOCTYPE html><html lang="en" ><head ><title >Type Dependencies</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Type Dependencies</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Type Dependencies</a><br><br>
<a name="589983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In a platform game I am working on I have an array to hold the tiles for the board. I also have a Type Player to define the characters that run around the board. The problem is several of the methods in my Player type need to access the array to determine collisions and board interactions. But the array is defined outside the Type so the Type does not compile.<br><br>What is the cleanest way to have my Player Type know about the array? I know I could pass the array in as a parameter to my Player methods but I don't like that. <br><br>Should I define a pointer field in my Player Type and initialize it to my actual array when I instantiate a player?<br><br>I guess what it comes down to is how do I reference a Global variable or object in a Type definition. <br><br></td></tr></table><br>
<a name="589994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you got any example code? <br><br></td></tr></table><br>
<a name="590062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No sample code. Currently I'm doing it with little or no OOP so I'm basically using a bunch of global data and functions. Will re-do it once I get a better handle on how to structure my types and such. <br><br></td></tr></table><br>
<a name="590124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the array's a Global you should be able to get to it from inside a Type... <br><br></td></tr></table><br>
<a name="590146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you dson't want the array to be global (easiest) I'd make a pointer to it in the type an initialise it early on. <br><br></td></tr></table><br>
<a name="590190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I know I could pass the array in as a parameter to my Player methods but I don't like that. <br></div>Why not? That sounds like a perfectly suitable solution to me... <br><br></td></tr></table><br>
<a name="590394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  if the array's a Global you should be able to get to it from inside a Type...  <br></div><br>Well my Type is in a separate file so it won't build because it doesn't know the array. I think there is a way to define the array as EXTERN or something. Haven't looked into it. I like my types to be as independent as possible though.<br><br><div class="quote">  If you dson't want the array to be global (easiest) I'd make a pointer to it in the type an initialise it early on.  <br></div><br>That is the way I am tending to go although I haven't worked with BM pointers and such yet. I like it though. Objective C uses that approach a lot.<br><br><div class="quote">  I know I could pass the array in as a parameter to my Player methods but I don't like that. <br></div><br><div class="quote"> Why not? That sounds like a perfectly suitable solution to me...  <br></div><br>I only like to pass parameters to a method if I will be calling the method with different values for the parameters. In this case I would be passing the same array every time. The fact that the method will always operate on the same array should be built into the method  . <br><br></td></tr></table><br>
<a name="590421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I guess what it comes down to is how do I reference a Global variable or object in a Type definition <br></div><br><br>It sounds more like you are trying to access an array defined in another file and has nothing to do with the fact you are inside a type.<br><br>If you are using import switch to include so effectively the compiler sees the whole project as one large file <br><br><br>or if you must use imports, add an import board.bmx line at the top of your player.bmx file. Import does not mean the file get's compiled twice just that the importer gets access to the stuff declared in the import file, eg:<br><br>game.bmx<br>  import board.bmx<br>  import player.bmx<br><br>player.bmx<br>  import board.bmx <br><br>is perfectly ok and now your player.bmx routines can see the global arrays defined in board<br><br>the only problem with import vs include is you can not have board.bmx importing player.bmx as this creates a "cyclic depndency" <br><br></td></tr></table><br>
<a name="590461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qweeg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I had a similar issue to this - but it may just be my dodgy coding (actually this is the most likely :) )<br><br>I have a user defined type and one of its fields is another user defined type.  The types are in different files and all files are Includes in the main game file.  Probably easier to see in the code.  Here is the first type and in SHIP.BMX:<br><br><pre class=code>
'Enemy Ship - extends TypShip.  This is abstract so cannot be created itself.
Type typEnemyShip Extends TypShip abstract
	Field tAttackPattern:typAttackPattern
	Field varSplineTime:Float = 0.0
	Field intCurrentSpline:Int = 0
	Field intKillPoints:Int
EndType


'Enemy Spinner - extends TypEnemyShip
Type TypEnemySpinner Extends typEnemyShip
...
... some methods
...
endtype
</pre><br>The enemy spinner has a field of type typAttackPattern.  The attack pattern type is in a seperate file ATTACKPATTERN.BMX thus:<br><br><pre class=code>
Type typAttackPattern

	Field intEnemyCount:Int
	Field intAttackSpeed:Int
	Field tMotionPath:typMotionPath[5]

EndType

Global tSpinnerPattern1:typAttackPattern = New typAttackPattern
tSpinnerPattern1.intAttackSpeed = 100
tSpinnerPattern1.intEnemyCount = 1

For Local i:Int = 0 To 4
	tSpinnerPattern1.tMotionPath[i] = arrSpinnerPath1[i]
Next

</pre><br>In the first file SHIP.BMX 10 enemy spinners are initialised thus:<br><br>Global arrEnemySpinner:TypEnemySpinner[10] 'create 10 enemy spinners<br><br><pre class=code>
For Local i:Int = 0 To 9
	arrEnemySpinner[i] = New TypEnemySpinner
	arrEnemySpinner[i].Initialise()
	arrEnemySpinner[i].tAttackPattern = tSpinnerPattern1
Next
</pre><br>but this fails in the compiler on the line:<br><pre class=code>
arrEnemySpinner[i].tAttackPattern = tSpinnerPattern1
</pre><br>However if I move initialisation of the 10 spinners to the ATTACKPATTERN.BMX file then everything is fine - but it has to be after the line:<br><br><pre class=code>
Global tSpinnerPattern1:typAttackPattern = New typAttackPattern
</pre><br>I guess it makes sense that you can't assign the SpinnerPattern1 as it has yet to be initialise - so I guess maybe the order that files are included is relevant.  It's just that in the past this has never seemed to be a problem - everything just seems to get resolved be the compiler provided I use includes for all the files.<br><br>Anyway it's not really a problem - I just moved my declarations out to a seperate file together an everything is hunky dory, just thought it might be relevant. <br><br></td></tr></table><br>
<a name="590598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I only like to pass parameters to a method if I will be calling the method with different values for the parameters. In this case I would be passing the same array every time. The fact that the method will always operate on the same array should be built into the method . <br></div>In that case you need a "Singleton".<pre class=code>Strict

Type SingletonExample Final
	Global myInstance:SingletonExample

	Method New()
		If myInstance &lt;&gt; Null
			RuntimeError "Singleton creation error"
		EndIf
	EndMethod 

	Function getInstance:SingletonExample()
		If myInstance = Null
			myInstance = New SingletonExample
		EndIf
		Return myInstance
	EndFunction
EndType</pre>It's not a "true" singleton (since BlitzMAX doesn't allow for Private constructors, meaning you can (in theory) instantiate more than one Singleton), but it works similar enough to one. To use it,use "SingletonExample.getInstance()" and you'll have access to any public fields or methods included in the singleton object. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
