<!DOCTYPE html><html lang="en" ><head ><title >Read Alpha value of an image</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Read Alpha value of an image</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Read Alpha value of an image</a><br><br>
<a name="1152926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, this must be an easy one. for a few days I searched the google, but I cannot find the answer.<br><br>I load in my scenes from 40 to 60 objects which are TImage s. Every object is a sprite representing an object (eg: bottle, glass, etc.), which also have a shadow. I am interested to see check what is the Alpha value of the sprite I click. I need this to see if I click on the shadow or on the object. The shadow will always have alpha &lt; than 255 and this will help me a lot.<br><br>I only was able to check with collision detection if I click on the image or not. <br><br></td></tr></table><br>
<a name="1152927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> edit:<br><br>here it is what I use now:<br><br>	Method objectInfo()<br>		Local tempPixmap:TPixmap = LockImage (ho[0].Image)<br><br>		p = ReadPixel (tempPixmap , MouseX() - ho[0].PosX, MouseY() - ho[0].PosY)				<br>		getPixelAlpha(p)		<br>	End Method<br>	<br>	Function getPixelAlpha(pixelValue%)<br>		A=(pixelValue Shr 24)&amp;$FF<br>	EndFunction<br><br>Is this the correct way? I mean I must use this methods in realtime.. <br><br></td></tr></table><br>
<a name="1153058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Other way could be:<br><br>load image with alpha and without alpha (masked or different sprite).<br>So you could use CollideImage.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1153130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ravl, your way is perfectly fine, but if the image isn't dynamic you don't need lockimage every time. Just do it once and store the pixmap along with the image. Otherwise your app will recreate the texture every time you use lockimage. <br><br></td></tr></table><br>
<a name="1153170"></a>

<a name="1153171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Oddball:<br><br>I used this:<br>In my HiddenObject type I have this method<br><pre class=code>
	Method Load()
		Image = LoadImage("graphics\items\" + objectImageName)
		Pixmap = LockImage (Image)
	End Method
</pre><br><br>and in my click method this:<br><br><pre class=code>

		pix = ReadPixel (ho[objectID].Pixmap , MouseX() - ho[objectID].objectPosX , MouseY() - ho[objectID].objectPosY )			
		Local alphaValue = getObjectAlpha (pix)	
		Return alphaValue

</pre><br><br>and is working fine, BUT I have a question.<br>When should I use UnlockImage?<br><br>After I finished the scene and the objects dissapear?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1153193"></a>

<a name="1153194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no need to UnlockImage as that method does nothing, literally, as there is no code in the method. But if you are worried about it put it immediately after you have obtained the pixmap.<pre class=code>	Method Load()
		Image = LoadImage("graphics\items\" + objectImageName)
		Pixmap = LockImage (Image)
		UnlockImage (Image)
	End Method</pre><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1153284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are concerned about the memory usage (each image is stored as pixmap too):<br><br>you could write bitmap-masks in rgb-channels. -&gt; One pixmap can held 3 images (or you do some kind of spritemap).<br><br>Instead of using "ReadPixel" you should try if imagescollide has better performance.<br>Some years ago I decided to use ImagesCollide for checking what state of a country is hovered. ReadPixel was lowering the fps in a not acceptable way (it depends on the alignment of your "images" on the screen, whether their rects overlap, ...).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1153291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ravl</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,<br><br>I will stick to this for now. If to much memory will be used than I will go to mask.<br><br>Thank you guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
