<!DOCTYPE html><html lang="en" ><head ><title >Prolem Loading Data From File</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Prolem Loading Data From File</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Prolem Loading Data From File</a><br><br>
<a name="487733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> File = OpenFile(path)<br>If Not file Return<br>line:String = ReadLine File<br><br>Here is my code - i get a compiling error: <br>"Compile Error:Unable to convert from 'String(TStream)' to 'String'<br>[/BMAX LEARNING/Tile Game/Level Creator.bmx;174;2]"<br><br>Line 174 is the last line I posted here.  The two lines above I thought might be relevant.  Thanks in advance for your help, Will. <br><br></td></tr></table><br>
<a name="487757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Global line:string

Function LoadFile(path:string)
     Local file:Int
	
	file = ReadFile(path)

	While Not Eof(file)
		line:+ ReadLine(file)
	Wend
	
	CloseFile file
End Function</pre><br><br>This will load a normal text file and fill the 'line' string variable with that file. Feel free to adapt it to your purpose. I think you only need to put brackets around you ReadLine statement to get it to work.<br><br>Hope it helps <br><br></td></tr></table><br>
<a name="487770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i'm not sure why but it seems like "ReadLine(path)" works and not "Readline file"<br><br>How do I get an integer of float out of my file?<br><br>xtiles:Int = ReadLine(File) 'WriteLine File, map.xtiles<br><br>I get the error: <br>"Compile Error:Unable to convert from 'String' to 'Int'<br>[/BMAX LEARNING/Tile Game/Level Creator.bmx;187;2]<br>Build Error: failed to compile /BMAX LEARNING/Tile Game/Level Creator.bmx"<br><br>any ideas? <br><br></td></tr></table><br>
<a name="487841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ReadInt(file)<br>ReadFloat(file)<br><br>Look in the 'Command-&gt;Streams' section in the help for lots more.<br>Most commands in Blitz that are going to recieve some data use the brackets around the parameter that is going to recieve that data. Blitzbasic and Blitz3d have done this for years. You'll get used to it and it makes sense after a while.<br><br>There was a post about this quite some time ago but I can't find it. Sorry.<br><br>Regards <br><br></td></tr></table><br>
<a name="487852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're returning a value from a function, you need brackets around its parameters. <br><br></td></tr></table><br>
<a name="488038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the brackets heads up! Thats really important!  Additionally, its still not working:  <br>I am using readInt(File) to return an integer, here, firstoff, is the beginning of my file:<br><br><pre class=code>Tilemap:
Tilemap X Tile Count
25
Tilemap Y Tile Count
25
Tilemap X Tile Size
24
Tilemap Y Tile Size
24
Tile Information Follows:
Number of tile attributes:
10</pre><br><br>This is the code I am using to read it:<br><br><pre class=code>Print ReadLine(File) 'WriteLine File, "Level Creator File"
	Print ReadLine(File) 'WriteLine File, "Tilemap:"
	Print ReadLine(File) 'WriteLine File, "Tilemap X Tile Count:"
	Print Readint(file) 'WriteLine File, map.xtiles
	Print ReadLine(File) 'WriteLine File, "Tilemap Y Tile Count:"
	Print Readint(file) 'WriteLine File, map.ytiles
	Print ReadLine(File) 'WriteLine File, "Tilemap X Tile Size"
	Print Readint(file) 'WriteLine File, map.tilewidth
	Print ReadLine(File) 'WriteLine File, "Tilemap Y Tile Size"
	Print Readint(file) 'WriteLine File, map.tileheight
	Print ReadLine(File) 'WriteLine File, "Tile Information Follows:"
	Print ReadLine(File) 'WriteLine File, "Number of tile attributes:"
	Print Readint(file) 'WriteLine File, TileAttributeCount"</pre><br><br>And THIS is what it outputs:<br><br><pre class=code>Tilemap:
Tilemap X Tile Count
25
1416195173
map Y Tile Count
842337546
Tilemap X Tile Size
842272010
Tilemap Y Tile Size
842272010
Tile Information Follows:
Number of tile attributes:
825232650</pre> <br><br></td></tr></table><br>
<a name="488056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ReadInt is for reading binary files, you can cast the string you get from readline to an int by replacing each of your =ReadInt(file) lines with =int(ReadLine(file)) <br><br></td></tr></table><br>
<a name="488059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or use <br><br>WriteInt<br><br>instead of WriteLine<br><br>coz your are trying to 'WriteLine' to the file and 'ReadInt'  back from the file!! It doesn't matter to mix and match text and binary in the same file, you just need to read it back in correctly. <br><br></td></tr></table><br>
<a name="488068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> But if he mixes WriteLine and WriteInt when creating the file then it can no longer be viewed or changed with a text editor.<br><br>A plain text file should have all data, including numbers, written with WriteLine. The same data is read back with ReadLine. This will produce string values, such as "25" for the number 25.<br><br>As mentioned, such strings can be cast to integer with Int( YourStringValue$ ).<br><br>Note that previous versions of Blitz would do this cast automatically when assigning a string value to an integer variable:<br><br>myInteger = "25"<br><br>This would set myInteger to the numeric value 25. But BlitzMax does not do this. You must explicitly use Int() to cast a string to an integer. <br><br></td></tr></table><br>
<a name="488072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are 100% correct. That will work.<br><br>BUT<br><br>Why would you need a text editor when you are using a program to write and read the file?? only valid reason I could think of, I suppose, is in a 'learning to trust your code' phase. <br><br></td></tr></table><br>
<a name="488079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because you may want to make a small change to the file, perhaps changing to 25 to 26.<br><br>Or you may want to allow people to 'configure' the program with a text file. They will not need source code or BlitzMax. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
