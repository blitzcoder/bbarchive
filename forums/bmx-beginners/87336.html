<!DOCTYPE html><html lang="en" ><head ><title >How to structure my Types and Tlists</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to structure my Types and Tlists</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >How to structure my Types and Tlists</a><br><br>
<a name="989698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robb</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to implement a sort of tag-search system to my game's entities however I am totally confused as to how to best set up my types and data structures.<br><br>1) At the moment I have a main 'world' object that contains a list of 'entity' objects together with a list of 'bundle' objects. <br><br>2) Each bundle will contain a list of search tags that can be assigned to the entity objects. <br><br>3) An entity can have multiple tags, however it can only have one tag from each bundle (hence the bundle object). The structure (and pseudocode of the objects) I am thinking of is something like this:<br><br><img src="http://i5.photobucket.com/albums/y172/RobbBakuhatsu/diagram-1.png"><br><br>Is this a sensible way of doing this? there a better way of structuring this?<br><br>I want to be able to return a list of all entities or entities by tag. <br>I also might need to return a list of all tags – could this be built on request by looping each of the world's bundles and adding the tags to a temp list (rather than a global tag list)?<br><br>Basically I'm a bit confused as to how to put this all together, and whether I should be using global lists or per-object lists or even if I should be using Tlists!<br><br>Any help would be greatly appreciated! <br><br></td></tr></table><br>
<a name="989700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scienthsine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That seems like a well laid plan. There is nothing wrong with having a global list, a list of lists containing things that are in other lists, etc... Just make sure you handle removal/addition, etc all correctly. Keep track of everything, and your good to go.<br><br>It depends on your speed requirements if you need to build the list of tags on request or not. If you are needing everything to be lightning fast, keep track of another global tag list, else do it on request.<br><br>To get entities by tag, ofcourse, you'll need to loop trough the bundles of tag lists, match, then add the entity to your temp list, then return the list.<br><br>In a physics engine, and a gui engine I built I used global lists so I could easily do batch processing on all of a type. I also had other lists though, for example I had groups (which I also had a global list of) which contained a list of certain objects (also in their respective global lists).<br><br>Just structure it how you have it in the diagram, and you'll do fine. :) <br><br></td></tr></table><br>
<a name="989709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not too sure what you are asking for, but I feel that TMaps may be of use to you here. A TMap is kind of a cross between an Array and a TList. They increase in size as needed like a TList, but you can jump straight to the item you need right away, like an Array.<br><br>You basically associate each object in the TMap with a String, which is known as the key (for your purposes, read: tag!) Then to get at the object, you just give the map that tag, and out it pops! Like so,<br><br><pre class=code>Type TMushroom
	Method speak()
		Print "I am a mushroom."
	End Method
End Type

Local map:TMap = New TMap
Local m:TMushroom = New TMushroom
map.Insert("Tag_Mushroom", m)
Local temp:TMushroom = TMushroom(map.ValueForKey("Tag_Mushroom"))
temp.speak()</pre><br><br>I notice in your description you have need for multiple objects to share the same tag. Hm, you can't add multiple objects to a map with the same key (it will overwrite). However what you CAN do is add TLists to the map! :D So to give an object a tag, add it to the end of the list that exists in the map. To get all objects with that tag, get the list from the map and go through each item! I'll leave the specifics of how to code that to you :P<br><br><br>Oh yeah, I'm in the helping zone this week! <br><br></td></tr></table><br>
<a name="990241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robb</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies! They both clarify a lot of things for me.<br><br>What is the best practice regarding Tlinks and objects being in multiple lists?<br><br>Would it be wise to have more than one tlink field in my types, e.g. the Tag object has a link to the bundle object's list and another link field for it's position in the global list?<br><br>I think this would fall down with an entity object though as exists in both the World's entity list, and also in <i>each</i> Tag's list. Basically, an entity could feasibly be in 5/6 lists and I'm a little concerned as to how best to break all of those links when the entity is removed. <br><br></td></tr></table><br>
<a name="990249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not give each object a TList of TLinks to all the TLists it's in? Say that three times fast!<br><br><div class="quote"> it's position in the global list <br></div> Tut tut, no ' in possesive its. <br><br></td></tr></table><br>
<a name="990257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robb</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks for your response, that seems like a sensible option!<br><br><div class="quote"> Tut tut, no ' in possesive its.  <br></div><br>No offense but I'd appreciate not being called out on a grammatical mistake. I understand the use of an apostrophe, it was merely a typing error.<br>While you probably did not intended it as such, your correction comes across as rather patronising and within the context of the thread, is entirely unnecessary. <br><br></td></tr></table><br>
<a name="990305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scienthsine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> A TList of TLinks would allow for easy removal from all lists, and once again is completely ok aslong as you keep track of what your doing.<br><br>Since your obviously capable of making little diagrams, I would suggest that you make one detailing your final structure when finished. That looks like great documentation, even if just a reminder for yourself. :) <br><br></td></tr></table><br>
<a name="990307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Tut tut, no ' in possesive its.<br> <br></div><br><br>Nothing like breaching the rules while correcting someone else... eh?<br><br><div class="quote"> <br>I'm a little concerned as to how best to break all of those links when the entity is removed.<br> <br></div><br><br>Of course, the best practice is to remove them from each of the lists that its been added to prior to removal... don't want null object references! <br><br></td></tr></table><br>
<a name="990330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I jested :'( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
