<!DOCTYPE html><html lang="en" ><head ><title >[Help] Music problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[Help] Music problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >[Help] Music problem</a><br><br>
<a name="936244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello everybody! I have a problem in one of my program. There are sounds in .wav that are triggered when certain keys are pressed. They all work fine. When I tried to add music to the program, the sound sucks really bad. I tried putting it in .wav and .ogg, but both didn't work fine. I cutted the sound file to 20 seconds, but it doesn't change a thing. I would like to know why it does this and how to fix it. <br><br></td></tr></table><br>
<a name="936246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you say it sucks really bad, what do you mean?<br>Did the sound not work at all? Was it choppy?<br><br>More specific details please :-) <br><br></td></tr></table><br>
<a name="936265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ya sorry about this, the sound works but what I hear is like the sound would be 1000000% overdrived so it's really unpleasant. <br><br></td></tr></table><br>
<a name="936272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you post a very simple example of the code that recreates this problem, e.g. a main loop that responds to keys and plays sounds and the muisc playing in the background? <br><br>I think there are problems with DirectSound, the default sound driver in BlitzMax on some systems.<br><br>Have you tried setting up a different audio driver, most people recommend OpenAL e.g: <br><br><pre class=code>SetAudioDriver("OpenAL")</pre> <br><br></td></tr></table><br>
<a name="936279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I can't really post the code because it's separated in 5 different .bmx files. I would like to know how to use AudioAL in blitzmax, do I need to install it? How? Thanks! <br><br></td></tr></table><br>
<a name="936282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes you/your users need to install OpenAL to use the OpenAL driver. <br><br></td></tr></table><br>
<a name="936286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'll try it. <br><br></td></tr></table><br>
<a name="936287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It did the same problem, the sounds really creepy. Here's the code I use for the song. Note that I commented out the PlaySound because I don't want to hear it.<br><br><pre class=code>
		If Not IntroSound
			IntroSound:TSound = LoadSound("sounds/intro.wav")
		EndIf
				
		Select Mode
	
			Case Intro
				
				'PlaySound( IntroSound )
				
				Level = 0
				
				DrawImage( Background,400,300 )
								
				DrawText "Welcome to Asteroids Hugo Beta Version 2",50,100
				
				DrawText "Highest Score this run: "+HighestScore+" points.",50,130
				
				DrawText "Steer with LEFT, RIGHT      ",50,170
				DrawText "Thrust with UP and DOWN     ",50,190
				DrawText "Fire with SPACE             ",50,210
				
				DrawText " ---------  P R E S S   S P A C E   T O  S T A R T  ---------- ",50,260
			
				If KeyHit(Key_Space) StartGame()
				
			Case Playing</pre> <br><br></td></tr></table><br>
<a name="936297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> - What operating system?<br>- Did you specify a specific sound drivers? <br><br></td></tr></table><br>
<a name="936299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> While I don't use Blitzmax (I use blitzplus and blitz3d) it looks, if that section is looped through repeatedly, that you are playing the sound over and over on top of itself which will sound terrible.  You may like to check if the channel is playing first (does blitzmax use channels?). <br><br></td></tr></table><br>
<a name="936300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> #1: You Imported the OpenAL module, yes?<br>#2: Did you set the OpenAL driver as the current sound driver?<br>(.. Both assumed, since you stated "the sounds really creepy")<br><br>EDIT: @Matty: Yes, it does.<br><br>Ah! You might want to use a channel with your sound. <br><br></td></tr></table><br>
<a name="936334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Plash Yes I used OpenAl, but it did the same thing.<br>Also, I think Matty's right, could you tell me how to use channels? Thanks a lot, I'll be back later like at 4:30 pm so I might not answer anything during now and this time. <br><br></td></tr></table><br>
<a name="936368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pharmhaus</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an example how to use  channels:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Local Music:TSound = LoadSound(Path , True)		'Loop=true
If Music &lt;&gt; Null Then						'Music is Loaded?
	Local Channel:TChannel = CueSound(Music)	'prepare your music for playing
	If Channel &lt;&gt; Null Then					'check if there was a free channel
		Channel.SetVolume(1.0:Float)  		'max vol 1.0 = 100%  | 0.5 = 50% etc.
		Channel.SetPan(0.0:Float)			'-1=left speaker; +1=right speaker
		Channel.SetDepth(0.0:Float) 			'surround sound depth | -1 = back | 1 = front
		Channel.SetRate(1.0:Float) 			'1.0 = 100% speed | 2.0 = 200% | 0.5 = 50% etc.
		ResumeChannel(Channel)				'Play!
	EndIf
EndIf
</textarea> <br><br></td></tr></table><br>
<a name="936455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, Soory to answer this late, it didn't work either with the channel. I think I'm going to record it and also I'll try with another song. I won't do this now since it's 1 am, but I'll try to do it soon. Also, thanks for the help! <br><br></td></tr></table><br>
<a name="936456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by 'it didn't work either'? Did you import and set the driver then load your music correctly with the example?<br>(You should check if the sound is already playing before resuming the channel.) <br><br></td></tr></table><br>
<a name="936458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens if you don't try to start playing the sound/channel each time around the loop? <br><br></td></tr></table><br>
<a name="936604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh my god, you were right, it's because the sound was looping over it over and over. I changed its place and now it's working. I placed it out of the loop, thanks! Now I would like to know how to loop it, like when it's over it restarts automatically. Also, how to stop the music, like when I want another want to start, how to stop the other. <br><br></td></tr></table><br>
<a name="936607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I figured out how to stop the music with channels. I just need to know how to loop it please. Thanks in advance! <br><br></td></tr></table><br>
<a name="936612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you load the sound set the flag to SOUND_LOOP (the channel example given does that).<br><br>EDIT: Or, if you want more control over the looping, you could manually check if the channel stopped playing and restart it. <br><br></td></tr></table><br>
<a name="936623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big Tree Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, Nice, now you solved all my sound problems (for the moment). Thanks to all of you who helped me fix this. See you later on the forums! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
