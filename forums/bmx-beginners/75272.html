<!DOCTYPE html><html lang="en" ><head ><title >Code Behavior Gone Wild</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Code Behavior Gone Wild</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Code Behavior Gone Wild</a><br><br>
<a name="841143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Background: Wheel on screen - starts turning with mouse click - automatic increase in speed during rotation.<br><br>The Action Code: r:+b<br><br>r is the variable representing degrees of circle<br>b is the variable used to speed up rotation of the wheel<br><br>The first mouse click on screen begins the wheel turning (b=.1). Everything is automated after that.<br>During rotation (clockwise) b is incremented .01 approximately 180 times so at the end of the first 360 degrees of rotation b equals about 1.8.<br>This goes on and on but when b equals about 61 the incrementing stops or at least the readout of b stops. The wheel keeps turning at the high rate of speed reached but appears almost to stand still but you know its still rotating by the slight wobble and the readout of r and turns (the variable to keep track of how many total revolutions).<br><br>It's quite a hoot to watch but when spin reaches 3minutes:15seconds variable b absolutely locks up at 61.0017624 even though the wheel keeps spinning as though nothing happened.<br><br>Can anyone shed some light on this code behavior? <br><br></td></tr></table><br>
<a name="841161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Without any code it's VERY difficult to have an idea.<br>A complete guess would be you're checking for the size of b in the range n.n0 to n.n9 when it doesn't work like that for floats. <br><br></td></tr></table><br>
<a name="841229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only check for the size of b is: DrawText "Value b: " + b, 800,250<br>The start value of b is: b:+.1 all the automatic increments are b:+.01<br><br>Here are all the files to look at this program. The code is 91 lines including spaces between sections.<br>The program is not finished but it functions completely except for glitch mentioned above.<br>Don't laugh too hard at the amatureish code structure! Hey! it works! :}<br><b>Updated these files to reflect glitch repair as noted in below post!</b><br>(the images) <a href="http://localocate.biz/blitz/magimages.zip" target="_blank">http://localocate.biz/blitz/magimages.zip</a><br>(the bmx) <a href="http://localocate.biz/blitz/magmotor.bmx.zip" target="_blank">http://localocate.biz/blitz/magmotor.bmx.zip</a><br>(the debug) <a href="http://localocate.biz/blitz/magmotor.debug.app.zip" target="_blank">http://localocate.biz/blitz/magmotor.debug.app.zip</a> <br><br></td></tr></table><br>
<a name="841240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hey! it works! <br></div><br>... apart from the glitch? :-) <br><br></td></tr></table><br>
<a name="841242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very cool :-)<br><br>The reason it "locks up" is because you have gaps in your "if r&gt; and r&lt;" code... once it reaches the magic 60 degrees (and a bit)  and it hits one of those gaps, it will simply rotate around the gap forever.<br>Since b is only updated when the the rotation falls outside of the gap, b isn't updated any more.<br><br>If click to the right enough  times ones it "locks", it should eventually have enough degree change to flick back into working...<br><br>:o) <br><br></td></tr></table><br>
<a name="841244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> around 66 is the value where it picks up again... <br><br></td></tr></table><br>
<a name="841254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder what will happen when b reaches above 360? :) <br><br></td></tr></table><br>
<a name="841321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey - I ran it for 32 minutes but the b variable remained at 61.0017624. How many minutes till yours restarted?<br>When I leave for work I will start the program and see what happens after several hours. ;)<br><br>Jesse - Good question - but the fun is in watching the rotation speed up from zero. When you can no longer see rotation - then whats the point. My reason for making this little program is to test a theory I have about creating a self powered motor. The red blinking ovals represent "battery power" turned on or off. The starter battery is one "D" cell. The shaft drives a minature generator which cranks out 12 watts at 6 volts. (bicycle light generator). When rotation reaches a certain rpm - the generator takes over supplying power and bypasses the "D" cell.<br><br>I still would like to know what makes the b variable stop in the first place? <br><br></td></tr></table><br>
<a name="841335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I ran it for 32 minutes but the b variable remained at 61.0017624. <br></div><br>And it would remain at that value forever if you left it.<br><br>As I explained earlier, once it falls into the "gap" that you've programmed into it, you are pretty much stuck...  (you need to click to increase b until it reaches 66 or so.)<br><br>Why 66?<br><br>Because 5 * 66 = 330<br><pre class=code>
If r&gt;329 And r&lt;361
</pre><br>330 just makes it into the 6th segment of your circle. After which time it will slowly increase again by itself<br><br>Anything between 61 and 66 will not be enough to get outside of the gap you've coded into lights().<br><br>Remember, 6 * 61 &gt;= 360, which resets r back to 0.<br>r :+ 61 + 61 + 61 etc... &gt;= 360, which resets r back to 0.<br><br>r :+ 61<br>If r&gt;29 And r&lt;61  .... FALSE (61)<br>r :+ 61<br>If r&gt;89 And r&lt;121 ... FALSE (122)<br>r :+ 61<br>If r&gt;149 And r&lt;181 ... FALSE (183)<br><br>etc...<br><br>:-)<br><br>Back to the drawing board, Emmett, TheBeginner. <br><br></td></tr></table><br>
<a name="841400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry - was a double post <br><br></td></tr></table><br>
<a name="841404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Emmett</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey -<br>Thanks so much for the explanation. Add the bolded line where shown to fix it. It will now run non-stop to 360.<br><pre class=code>r:+b
<b>If r+b=&gt;360 b:+.01</b>
If r=&gt;360 reset
SetRotation(r)
DrawImage rotor, 506, 384
info
Flip</pre>Now if someone would be so kind and explain how I could capture and display <b>RPM</b>?<br>I tried the following:<pre class=code>rpm = turns/(seconds) Mod 60 * 60
SetColor 255,0,0
DrawText "RPM: " + rpm,800,280
SetColor 255,255,255</pre>But - it don't work. It coughs out an RPM but only at 60,120,180 etc. <br><br></td></tr></table><br>
<a name="841425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It coughs out an RPM but only at 60,120,180 etc.  <br></div><br><br>I assume your turns and seconds are stored in integers -- if you divide these with each other, the results will also be in integers, and you'll end up with a lot of rounding errors. You then multiple these by 60 later on, hence the steps of 60 in the final result.<br><br>To fix, all you need to do is convert the variables to floats or doubles while doing your math, like this:<br><br><pre class=code>
rpm:Int = double(turns)/(double(seconds)) Mod 60 * 60 
Print rpm
</pre><br><br>or alternate with the same result:<br><br><pre class=code>
rpm:Int = Float(turns)/(Float(seconds)/60)
Print rpm
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
