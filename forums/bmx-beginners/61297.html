<!DOCTYPE html><html lang="en" ><head ><title >Joyhat -1 or 0?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Joyhat -1 or 0?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Joyhat -1 or 0?</a><br><br>
<a name="684697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have two controllers I'm testing a game with.  One is a classic Sega Genesis controller, the other is a Nyko AirFlo.  The Genesis controller has no joyhat, and when I check what the joyhat value is, it reports zero.<br><br>The AirFlo controller uses its d-pad as a joyhat and reports -1 if it is not being used, and 0 when up is pressed on the pad.<br><br>Obviously this is creating some problems for me.  How can I detect if the stick has a joyhat?  I see there are functions for JoyAxisCaps and JoyButtonCaps, but I don't know if/how these releate to the joyhat. <br><br></td></tr></table><br>
<a name="684701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look <a href="http://blitzwiki.org/index.php/JoyAxisCaps" target="_blank"><b>here</b></a> and <a href="http://blitzwiki.org/index.php/JoyHat" target="_blank"><b>here</b></a>. <br><br></td></tr></table><br>
<a name="684702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's not answering my question, Ian.  The problem is my other controller reports the joyhat as being at position 0, not -1.  I believe this is because it has no joyhat.<br><br>"Reports the position of the joystick's HAT/POV controller if supported." if it isn't supported, it's returning a zero?  How can I tell if it's supported, or if the user is just pressing up on it?<br><br>Here's the button caps and axis caps for the two controllers I have.  <br><br>This is the airflo:<br>I believe it has 13 buttons, two analog sticks and a d-pad (joyhat)<br><br>stick 0 button caps:00000000000000000001111111111111<br>stick 0 axis caps:00000000000000000000001000001111<br><br>This is the genesis controller:<br>It has a d-pad that reports as joyX/joyY and as buttons, and 7 actual buttons, for a total of 11 buttons.  <br><br>stick 1 button caps:00000000000000001111111111111111<br>stick 1 axis caps:00000000000000000000000000000011 <br><br></td></tr></table><br>
<a name="684704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's not answering my question, Ian. <br></div>It is, you're just not looking. ;o)<br><br>Did you run, or look at, the example code?<br><br>I'll give you a hint...<pre class=code>If JoyAxisCaps(joySelected) &amp; (1 Shl JOY_HAT) then Print "Woohoo, a JoyHat!"</pre><br>:o)<br><br>[edit]<br>I don't really understand why Skid didn't just define the FreeJoy constants as bitmasks in the first place. We could of just used...<pre class=code>If JoyAxisCaps(joySelected) &amp; JOY_HAT</pre>...etc<br>[/edit] <br><br></td></tr></table><br>
<a name="684706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you edit your post? ;)  I didn't see the first link.  I think this is what I need, thanks! <br><br></td></tr></table><br>
<a name="684707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I was in mid edit when you posted. ;o)<br><br>The information you needed was in the original link, it was just hidden a bit in the example code. :o) <br><br></td></tr></table><br>
<a name="684833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it... but now MORE PROBLEMS!  <br><br>On the Mac, the hat is all screwy.  Not hitting it *is* zero, all the numbers are shifted and when you get to up+left, it returns -1 !<br><br>Is this a bug?  X( <br><br></td></tr></table><br>
<a name="684858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It certainly doesn't seem too clever. ;o) <br><br></td></tr></table><br>
<a name="685771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably a difference in the Windows drivers vs the Mac drivers for joysticks (or possibly a BRL mistake).  If you want code that can handle all platforms using the same code, you'll probably have to write a 'callibration' system which stores the values returned for up/down/whatever and translates in between values on the fly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
