<!DOCTYPE html><html lang="en" ><head ><title >Graphics failure</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Graphics failure</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Graphics failure</a><br><br>
<a name="548037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dear community,<br><br>With SDL now being available, I would like to be able to query blitzmax to see if it can do DX accelerated and then ask it if OpenGL accelerated is available.<br><br>So it tries DX, and if that fails, it tries OGL and if OGL fails or IS NOT accelerated, then it switches to SDL.<br><br>I would like to check because if both DX and OGL fail, it's likely blitzmax will throw an error instead of letting me choose to use SDL.<br><br>Your thoughts? <br><br></td></tr></table><br>
<a name="548045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been pondering this too. I use the D3D driver by default, and I would like to drop back to the OpenGL one if D3D drivers are not available. I just can't see any way to predict it. I tried testing to see whether the resolution I use is available, but I rather suspect that will come back as positive on machines which aren't going to run the game properly anyway. <br><br></td></tr></table><br>
<a name="548147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thing is, a lot of OpenGL drivers will run in software, so a benchmark is also a very good idea when doing the initial startup test.<br><br>You could check if DX works fine, if not, check OGL, if ogl is slow, then compare to SDL.<br><br>This is because opengl often works under software - painfully slowly too - when the SDL option would be very fast.<br><br>All we need are reliable checks we can make ourselves. <br><br></td></tr></table><br>
<a name="548182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> More ill-informed ramblings...<br><br>Experimenting with DXDiag's Display tests plus RegMon from www.sysinternals.com it looks like you can read the Registry key "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Direct3D\Drivers\SoftwareOnly" (using the Win32 API's RegistryOpenKey and RegistryQueryValue functions) to determine whether you're in software mode or not (hardware 3D acceleration being available should give a value of 0, software 1). It can also be used to set the mode -- DXDiag updates in real time to reflect this when you edit the value in RegEdit; this is NOT a good idea, other than for testing on your own machine!<br><br>Fiddle at your own risk! Stick to only reading the key.<br><br>For OpenGL, I guess you could check to see if you can open "opengl32.dll" via LoadLibraryA if you want to be really careful, then open your display, and use this to try and determine whether it's accelerated: <a href="http://www.opengl.org/resources/faq/technical/mswindows.htm" target="_blank">"5.040 How do I know my program is using hardware acceleration on a Wintel card?"</a>. Yikes. It doesn't seem like you can check with OpenGL until you have a display, or at least not via any official method. <br><br></td></tr></table><br>
<a name="548209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks James!<br><br>Not trying to detract from your sterling efforts but this is something BlitzMax needs to be able to handle... would appreciate it if you could put in a good word for it.<br><br>For example:<br><br>test = Graphics 640,480,0...<br><br>Returns false if it failed to start up for any reason. <br><br></td></tr></table><br>
<a name="548895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (using the Win32 API's RegistryOpenKey and RegistryQueryValue functions <br></div><br><br>Sounds great, James, but how does one go about accessing those Win API calls exactly? I've looked in User32, GDI32 and Kernel32 and I can't find anything resembling them. I tried the MSDN too, but can't find anything that looks useful from BMax. <br><br></td></tr></table><br>
<a name="548929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe that this method of fiddling in the registry is bad news. For starters, the registry is depreciated in longhorn: there will be no registry.<br><br>Much like unix and mac systems at the moment. Therefore (I know this sounds lame) it's best if Mark and the team make graphics() return a boolean if it managed to start up.<br><br>I won't be accessing the registry at all in my game: I think it's a recipe for disaster to be honest (and not at all cross platform compatible) <br><br>That said, I really appreciate your kind help James. <br><br></td></tr></table><br>
<a name="549009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> For starters, the registry is depreciated in longhorn: there will be no registry. <br></div><br><br>Do you have a source on that? It would seem pretty insane to drop any support for the registry, bearing in mind how many programs rely on it. <br><br></td></tr></table><br>
<a name="549194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just beta tester talk. Unix and Mac don't have a registry. It's considered far more stable not to have one.<br><br>As windows registry gets fuller, the system tends to slow down a lot. It is abused a lot. If the registry is corrupted, you kiss the entire windows installation goodbye, and have to recover it.<br><br>The registry was a terrible idea. <br><br></td></tr></table><br>
<a name="549240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats why registry defrager are really recommended for fast boot ups (as well as a real defrager as the windows one doesn't win any price for really used systems ... replaced mine with Diskeeper)<br><br><br>Sybixsus: Why shouldn't they drop it? Actual program may be executed within a "sandbox" anyway for stability and compatiblity reason (as they rely on GDI which is replaced with WGF) and there is no reason the sandbox shouldn't emulate a registry for this old apps. <br><br></td></tr></table><br>
<a name="549297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sybixsus: Why shouldn't they drop it? Actual program may be executed within a "sandbox" anyway for stability and compatiblity reason (as they rely on GDI which is replaced with WGF) and there is no reason the sandbox shouldn't emulate a registry for this old apps. <br></div><br><br>I said dropping all support for it would be insane, not stopping using it for the future. Fish's implication was that using the registry was a problem because Longhorn was just going to drop it completely. Longhorn will probably drop a lot of things, but I doubt to the point where programs which use them will have problems running. <br><br></td></tr></table><br>
<a name="549313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rambo_Bill</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no Longhorn, its called Vista... Get with the times ppl. <br><br></td></tr></table><br>
<a name="549317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> tell this MS and their longhorn alpha build 4074 I downloaded 4 days ago ;-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
