<!DOCTYPE html><html lang="en" ><head ><title >Exclude objects from For Next loop</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Exclude objects from For Next loop</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Exclude objects from For Next loop</a><br><br>
<a name="840958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baz</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br>let's say I want to check each variable inside an array of an object  with each variable of the array in each other object .  After looping through all the variables of object A, it has to be blocked from the list so that the loop does not  produce equal AB / BA pairs NOR does it allow object A to be compared with any other object during that frame.<br>It's basically an intersecting lines detection, where  the lines are "reconstructed" to vertex and edge by another function, based on the array number.  The current code looks like this and does not work for more than two bodies(i.e. if body A collides with body B, both are somewhy "blocked" for the rest of the simulation"):<br><br><br>Function DetectRectCollision()                             '''''''''''''loops through all bodies and their edges in the list to <br>                                                            ''''''''''''find intersecting lines<br>  Local pass% = True<br><br>  Local EliminateList:TList = CreateList() <br>  <br><br>    For Local Rect1:Rect = EachIn RectList<br>      For Local Rect2:Rect = EachIn RectList<br><br>             pass = True <br>         <br>         For Local ERect:Rect = EachIn EliminateList<br><br>           If (ERect = Rect1) Or (ERect = Rect2)                <br>             pass = False  <br>           <br>           EndIf  <br>         Next <br>               <br>         <br>         If (Rect1 &lt;&gt; Rect2) And pass = True<br>                      <br>           ListAddLast(EliminateList, Rect1) <br>           ListAddLast(EliminateList, Rect2)<br><br>           For Local c% = 0 To 3<br>             For Local k% = 0 To 3<br>                 <br>	  	  <br>               Local u1#<br>		       Local u2#<br>           <br>               Local nom1# <br>               Local nom2# <br><br>               Local denom# <br><br> <br>               Local d1x# = Rect1.LineArr[c].x<br>               Local d1y# = Rect1.LineArr[c].y<br>           <br>               Local d2x# = Rect2.LineArr[k].x <br>               Local d2y# = Rect2.LineArr[k].y<br> <br>               Local d12x# = ((Rect1.Pos.x + Rect1.VertArr[c].x) - (Rect2.Pos.x + Rect2.VertArr[k].x))<br>               Local d12y# = ((Rect1.Pos.y + Rect1.VertArr[c].y) - (Rect2.Pos.y + Rect2.VertArr[k].y)) <br>                             <br><br><br>               nom1 =  d2x * d12y - d2y * d12x<br>               nom2 =  d1x * d12y - d1y * d12x<br>    <br>               denom = d2y * d1x - d2x * d1y<br><br><br>               u1 = nom1/denom<br>               u2 = nom2/denom<br>  <br><br>               If (u1 &gt; 0 And u1 &lt; 1) And (u2 &gt; 0 And u2 &lt; 1)  &gt;&gt;&gt;&gt;&gt;&gt; INTERSECTION of line segments occured<br>                  <br>                            <br>                  Local Cross:Vector = New Vector <br>                  Cross.Assign(c, k)<br> <br>                  Rect1.AddIntersection(Cross)  ''''''stores    <br>each intersection as a vector in an array     <br> <br>                              <br>               <br>               EndIf  <br>                         <br><br>             Next          <br>           Next <br><br>          Rect1.ProcessIntersection(Rect2)          '''''''''''''''   <br>      <br>        EndIf <br><br>      Next<br>    Next   <br>  <br>  <br>End Function <br><br></td></tr></table><br>
<a name="840982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> use "continue" <br><br></td></tr></table><br>
<a name="841077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baz</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks I didn't know anything about continue . But when I try it this way I get "duplicate" collisions just like without any exclusions. At the moment I really can't wrap my head around what's causing the problem.  <br>Maybe you could take a look at the actual program:<br><a href="http://www.megafileupload.com/en/file/37615/rigid-bmx.html" target="_blank">http://www.megafileupload.com/en/file/37615/rigid-bmx.html</a><br>sorry for that link. I don't have any webspace.<br>You can pull on the rects with the mouse. Notice that body 3 won't collide with the other two unless you comment out<br>the "EliminateList Loop", but then you get multiple <br>collisions. I remember that I had it working before I recoded some parts of the function.<br><br>P.s.: What are the tags to format your posted code?<br>Thanks <br><br></td></tr></table><br>
<a name="841102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll take a look. you know, you can post the whole code here but not the executable. just use a codebox. here are the forum codes:<br><a href="http://www.blitzmax.com/faq/faq_entry.php?id=2" target="_blank">http://www.blitzmax.com/faq/faq_entry.php?id=2</a> <br><br></td></tr></table><br>
<a name="841106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> you know you can change your object elimination to something like this<br>code sample:<br><pre class=code>
Local List:TList= New TList
list.addlast("apple")
list.addlast("pear")
list.addlast("mango")
list.addlast("peach")
list.addlast("cherry")

Local list2:TList = list.copy()

For Local a$ = EachIn list
	Print a$
	list2.removefirst()
	For Local b$ = EachIn list2
		Print "  "+b$
	Next
Next 
</pre><br><br>I don't have too much experience with the time comsumption of list.copy() but I dought it will affect program execution that much.<br>[edit]<br>note: it only copy addresses, not objects but you knew that right?. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
