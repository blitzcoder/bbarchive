<!DOCTYPE html><html lang="en" ><head ><title >Obtain reference to an object in a TList</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Obtain reference to an object in a TList</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Obtain reference to an object in a TList</a><br><br>
<a name="1010521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WiredWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>This is probably really easy to do but unfortunately the documenation on TLists is a little brief to say the least.<br><br>I've made a new TList object and then placed a number of custom objects into it.<br><br>How do I retrieve a reference to one of those objects so I can modify it's attributes?<br><br>I've tried referencing it by defining a TLink and then using TList.LastLink but it doesn't seem to actually return a reference to the object because when I try to update an attribute it says the name isn't recognised.<br><br>Thanks<br><br>Pete <br><br></td></tr></table><br>
<a name="1010531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

local list:tlist = new tlist
list.addlast("a")
list.addlast("b")
for local s:string = eachin list
    print s
next</textarea><br>Same for objects, too. You iterate through the list with eachin.<br>Lists are very good if you need to alter many (but an unknown, varying number of) objects in the same manner. <br><br></td></tr></table><br>
<a name="1010568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WiredWorm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> But what if you don't want to iterate through all items in the list but want to reference a specific item? <br><br></td></tr></table><br>
<a name="1010569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use TList's ValueAtIndex method, which will return an Object.  You'd then have to cast the object to whatever type its meant to be, i.e.<br><br><pre class=code>t:myType = myType(myTList.ValueAtIndex(2))</pre><br><br>(the index should be in the range 0 to myTList.Count()-1) <br><br></td></tr></table><br>
<a name="1010572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note though, that ValueAtIndex will iterate through all items until it gets to that index... Speedy it ain't! <br><br></td></tr></table><br>
<a name="1010574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> whenever you get an object from a TList, you have to 'cast it' to tell BlitzMax wich kind of object it is. To do so, use any type name as a 'function conversion'.<br><br>As instance:<br><pre class=code>Local MyVariable:TMyObject 
MyVariable = TMyObject(MyList.First())  'Notice the type name as a 'conversion function' here.
MyVariable.MyField = "Hello world" </pre> <br><br></td></tr></table><br>
<a name="1010575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Note though, that ValueAtIndex will iterate through all items until it gets to that index... Speedy it ain't! <br></div>Yep, if you need to regularly use ValueAtIndex you should consider an alternative.  TMaps are good, or arrays.  Depends on what you want to do, really. <br><br></td></tr></table><br>
<a name="1010586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> TList.LastLink gives a link to the last object in the list - is this what you want to do? Or do you want to gain access to an object in the middle of the list?<br><br>When you add an object to a list, you can catch its link then:<br><pre class=code>'add object to list and store link
Local link:TLink = my_list.AddLast(my_object)

'.............. later on

'retrieve object from link, and store the object you get in a temporary variable
Local temp_object:TMyObject = TMyObject(link.Value())
'you can now modify the temporary variable and the object in the list is updated immediately
temp_object.my_field = 5</pre><br><br>You need to find an appropriate way of storing those links you get for easy access later, or you could end up just moving the problem from one part of the code to another. This depends on what you are trying to do exactly. <br><br></td></tr></table><br>
<a name="1010757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But what if you don't want to iterate through all items in the list but want to reference a specific item?  <br></div><br>As mentioned above TList is good if you want to access many objects in the same manner, for example calling all objects 'update'-method.<br>If you need direct access to specific instances an array ot TMap will be much more efficient. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
