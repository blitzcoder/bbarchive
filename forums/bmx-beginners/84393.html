<!DOCTYPE html><html lang="en" ><head ><title >2D Platform Jumping\Collisions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D Platform Jumping\Collisions</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >2D Platform Jumping\Collisions</a><br><br>
<a name="953467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can anyone offer me some advice on how to tackle 2D Mario style platform jumping? It`s actually a little harder than it seems.<br><br>After a look around on the web and several failed attempts myself I`m a bit baffled as to how to tackle the platform collisions successfully.<br><br>I have a character who can jump at variable heights depending on how long the jump button is held down and that works fine, the problem is that when he falls back down to earth, because he is effected by gravity, he ends up going through my platforms by a different amount each time. I need him to obviously land on top of these platforms. I have tried several approaches including resetting his y position to the point before he hit the platform and also moving him back up from the platform once he has hit until he no longer hits it but neither seemed to work that well in practice.<br><br>Are there any other approaches that I could look into? <br><br>Any help would be most appreciated.<br><br>Jason. <br><br></td></tr></table><br>
<a name="953469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I helped Amon with his code a few months back with his tile platform game. <br>and he posted the working code a few days back here:<br><a href="http://www.blitzmax.com/Community/posts.php?topic=84117" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=84117</a><br><br>if you can't figure it out from that code let me know and I I'll be glad to help you solve it. <br><br></td></tr></table><br>
<a name="953492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks :) I`ll have a read and get back to you if I need more help.<br><br>[Edit]<br>OK, I`ve had a look at it but am still having trouble understanding what is happening when the player is falling with regards to the Mod part. Could you please take a moment to describe it to me in pseudo code? <br><br>Seems to work well though so hopefully with a little more help I will be able to adapt it to my needs.<br><br>Jason. <br><br></td></tr></table><br>
<a name="953543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know if you know what mod is, so I am going to explaint it. mod gives you the remainder of a division. example  7.5 mod 4 = 3.5 now lets say you tiles are 32x32 and the botom of your character is y.  If the character is at say 96y which is at the bottom of the tile. If you calculate the remainder of 96 mod 32(tile height) you get 0 which we assume is where you want to be at y when the character lands. if say the player is at 99, 99 mod 32 is 3 that sets the character 3 pixels below the edge of the tile. if it is a small number of pixels of the edge of the tile you want it to return to the edge else you want it to keep going down.<br>I am going to give you an example assuming you are using a two dimensional grid, the character is on its way down and the character is one pixel wide.  <br><pre class=code>
if [x/32] ,y/32] = 1 then  ' detect if there is a tile at the specified location 32 is the tile size
    if (y mod 32) &lt; 4 then ' detect if the character is at most 4 pixels below the top of the tile 
       y = floor(y /32)*32 ' set it back to the top of the tile
       jump = false        ' stop the character from jumping
    endif
endif
</pre><br>you need be aware that if the falling speed is greater than 4 then it's going to fail the test randomly and it will possibly keep falling and go through all of the tiles with out stopping. you either need to set the speed limit to 4 or compensate for the jumping speed. <br><br>also what I did is I checked one point against a tile but characters are generaly more than one pixel wide so You need to check the front and  back of the character in case only one of the two ends is touching the tile otherwise it's going to keep on falling. Hense Amon's example:<br><pre class=code>
		If Map[(PlayerX + Player_Width) / 32, PlayerY / 32 + 1]= 1 or Map[(PlayerX - Player_Width * 2) / 32 + 1, PlayerY / 32 + 1]= 1
		
</pre><br>what I showed you is just one way. you can also do a pixel perfect collision like Dabhand example, and others. There are several tutorials in the internet I even saw one in Youtube a while back. I don't know if it's there anymore. <br>well, I hope you understood that. <br><br></td></tr></table><br>
<a name="953567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the explanation. I`m going to give it a go and see how it works.<br>Just out of interest would this approach work for non tile based platformers?<br><br>Thanks again,<br>Jason. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
