<!DOCTYPE html><html lang="en" ><head ><title >B3D v BMAX</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B3D v BMAX</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >B3D v BMAX</a><br><br>
<a name="1112246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had decided to scrap my old BB3D proggy and start fresh using BMAX, but I have stumbled onto a 'big' problem.<br><br>The B3D version of the game is in 800x600, whilst the new version is using 640x480 in BMAX.<br><br>Using FRAPS to look at FPS rates, I am very dissappointed to see a rather significant drop using BMAX...<br><br>B3D gives a rock-solid 60, BMAX gives me anything between 35 and 57.<br><br>What am I doing wrong?  Same graphics files, same animations, even the same code (almost)...? <br><br></td></tr></table><br>
<a name="1112252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotshot2005</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> IF you show the code of BlitzMax then I am sure that are some BMAX Expert here will help your Goal! :) <br><br></td></tr></table><br>
<a name="1112255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which driver are you using in BMAX? Perhaps your graphics card has good DX7 support and poor DX9 (I think the default for BMAX...). Just a thought. Also are you running in debug mode? Are you using pure bmax, or is it a 3D program and you're using MiniB3D? <br><br></td></tr></table><br>
<a name="1112261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hotshot:  the code is too extensive to show here.<br><br>ima: the default driver is used I presume because I have no reference to any other <br><br></td></tr></table><br>
<a name="1112262"></a>

<a name="1112263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What are you doing with it?<br><br>i.e. 2D or 3D? If 2D, was the B3D version using native 2D or 2D-in-3D? Just drawing, or pixel-crunching? Is there a lot of text involved, or a lot of input polling? If 3D, what are you doing apart from the very basics of 3D rendering? etc.<br><br>Oh, and seconding ima747: make sure it's not in debug mode!<br><br>Also, isn't the default graphics mode OpenGL?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1112264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yasha:  It's a 2d-scrolling platform...nothing special.  Debugmode is off. <br><br></td></tr></table><br>
<a name="1112265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Default order is in order of support of :-<br><br>Dx9 , Dx7 , OpenGL.<br><br>As Yasha and ima747 suggest, more specific information is needed. <br><br></td></tr></table><br>
<a name="1112266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can output the current driver used by using<br><br><b>GetGraphicsDriver().ToString()</b><br><br>to return the driver name as a string. <br><br></td></tr></table><br>
<a name="1112276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two thoughts:<br><br>- Try setting the display drivers to DX7 to try to match B3D, and see if that makes any significant difference on your computer<br>- If you're using drawtext, try disabling those statements and see if if that has much effect on your framerate. Drawtext can be notoriously slow on some computers. If that's the problem, then switching to an imagefont may be the way to go. <br><br></td></tr></table><br>
<a name="1112277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> After changing the drivers, variables don't work so good...<br><br>TTimer, TImage etc... <br><br></td></tr></table><br>
<a name="1112284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> there are many things that can slow the game down and with out looking at your code we are just shooting in the dark. <br>best thing you can do is profile it to find out where the issues are then post the specific issues here so we can help you.<br><br>I am also willing to look at your code if you don't mind sending it to me or at least your key files. <br><br></td></tr></table><br>
<a name="1112336"></a>

<a name="1112337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> After changing the drivers, variables don't work so good...<br><br>TTimer, TImage etc...  <br></div><br><br>Are you using any framework/imports?<br><br>If so, it's possible that you are missing in import that may have happened 'behind the scenes' before through the default graphics driver.<br><br>Note that TImage is probably reserved by the system already, if you created your own variable by that name it could be conflicting.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1112351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> My experience here is just the opposite: usually bmax is faster than b3d - specially in 2D! (In 3D, with miniB3D sometimes b3d can be faster, sometimes miniB3D wins).<br><br>First of all: why your game in bmax is 640x480? a simple "graphics 800,600" and it will run at the same resolution as b3d :P<br><br>Second: how did you convert the code? Did you use the "automatic" converter in the IDE? That uses a lot of tricks, which ends up creating a lot of handles and other things to emulate B3D coding, which is bound to slow everything down.<br><br>Third: as said above, comment any "framework" command from the program, and try SetGraphicsDriver &lt;driver&gt;. Maybe your card doesn't support dx9 properly, so try dx7 and even opengl.<br><br>Fourth: You're not by any chance loading images in the main loop, are you? B3D would check the filename and completely skip the loading if the texture was already loaded in memory, while I suspect max will load it eveytime.<br><br>If all of that fails, you can still check the speed difference by doing a stress test - draw tons of images on screen at once. Show the FPS on screen and you can see which one is faster! =) <br><br></td></tr></table><br>
<a name="1112357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Slotman:<br><br>Code conversion was a line at a time, no converter was used.<br>No loading takes place during the main loop.<br>Changing the driver to DX7 knocks the program out so it won't even compile.<br><br>the command 'jugs:TImage=loadimage...' is spat out because of TImage! <br><br></td></tr></table><br>
<a name="1112371"></a>

<a name="1112373"></a>

<a name="1112374"></a>

<a name="1112375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should compile and run fine - changing the driver has nothing to do with it.<br><br>Are you sure you're not using the "Framework" command anywhere?<br>Are you using the latest version of blitzmax?<br><br>Try this code below:<br><br><pre class=code>
SuperStrict

SetGraphicsDriver D3D7Max2DDriver()

Graphics 800,600,0

' change this to your bmax install path
Local bmxPath:String = "C:\Apps\Linguagens\BlitzMax"

If FileType(bmxPath+"\samples\breakout\media\B-Max.png")&lt;&gt;1 Then Notify "Error: file path is wrong!"; End

Local image:TImage=LoadImage(bmxPath +"\samples\breakout\media\B-Max.png")
If image=Null Then Notify "Error loading image!"; End

While Not KeyHit(KEY_ESCAPE)
   Cls
   DrawImage image, 0,0
   Flip
Wend
</pre><br><br>Don't forget to change the bmxPath to where you installed blitzmax. (Not in "Program Files..." I hope)<br><br>If that doesn't work - try reinstalling blitzmax, updating your drivers... or something :P~<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1112414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used the 'SetGraphicsDriver D3D7Max2DDriver()'<br><br>And all is well again...cheers all.  Am now getting 71 fps!<br><br>Yippeeeeeeee! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
