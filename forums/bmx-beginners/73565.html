<!DOCTYPE html><html lang="en" ><head ><title >Clairified topic! Comma dilimited databases in txt</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Clairified topic! Comma dilimited databases in txt</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Clairified topic! Comma dilimited databases in txt</a><br><br>
<a name="821892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DCI</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok.. my last topic no one understood, so, after spending days thinking how exactly to phrase this.. and having my car catch fire. (wonderful week.) anyways, heres my question.<br><br>This is an example of a text file for one portion of the game I'm working on. This is a unit database, telling what mechanized units are in this zone.<br><br>Filename: 3488578237.(whatever)<br>93324,	50,	50,	4,	<br>93324,	90,	45,	3,<br>93390,	30,	90,	3,<br><br>Explanation of the above text and numbers:<br>The filename, is the particular zone id that the data represents.  <br><br>the first number is the UNIT ID, which references another central database, listing all the units in the game.  So if the game needs to know what the mechs weapons are, or how much armor it has, it looks up the other central database.<br><br>The second number, is the unit’s X coordinate on the 100x100 hexagon grid, while the third number, is it’s Y coordinate..  <br>the last number, is the facing side, starting clockwise. <br><br>Things I need to know,<br><br>What is the command to make blitz generate a new text file with a predetermined filename for a new zone? Each zone has its own unit database (as well as other databases), so, if the zone is colonized, the game needs to make a new database, abeit blank at the beginning, to later be filled with unit information. <br><br>What is the command to search the database for a particular unit ID?<br><br>How would you for instance, replace the 3rd field on unit Id 93324?<br><br>Can you change just one of the entries on that particular Unit’s info? Or do you need to re-write all the info on that line to update it?<br><br>What is the command and syntax to add another line and thus ‘entry’ to the text file database? For instance, we want to add a 4th mechanized unit’s information to the table..<br><br>And most importantly, what are the commands and syntax of extracting data (using) information from the database?<br>Pulling the unit information into individual variabales(field 2 goes to viariable named X, field 3 goes to variable named Y) etc, or a single variable that contains all of the unit’s information? (all of the information on a given line goes into (a variable named Z, or the unit id’s number as the variable)<br><br>I’ve bought ALL 3 blitz books I could find, game programming for teens, blitz3d and the blitzmax book.. and I cant find aNY good information on database use, or extracting data from comma delimited textfile ‘databases’ or much of anything along those lines. PLEASE HELP! This is my major hiccupping point! <br><br></td></tr></table><br>
<a name="821907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> To begin with, I'm having trouble attempting to comprehend your devotion to using a comma-separated text file "database" system.<br><br>The reason you seem to be finding it hard to unearth details on how to go about writing a comma-separated text file "database" system is probably because there are few people who would consider putting in all that work to manage the files, manage the "tables", and manage the 6th field of the 7th row of the table named "894353".<br><br>Of course, if, at the end of the day, you are after a completely proprietary, obfuscated file format, you are definitely heading along the right tracks. And I hope for your sake you are documenting everything in great detail.<br><br>I could, at this point, go on to discuss a perfectly feasible and thoroughly tested alternative file-based database format, but it seems that 1) you don't seem interested in learning anything new/better/useful, and 2) it's already been mentioned before. Anyhoo.. for those that missed it last time. SQLite probably does all that you want, does it better, does it faster, and has examples in BlitzMax already available...<br><br>However, since we are here rather, to fan the flames of your obsession with a comma-separated text file "database" system, I guess we should not try to convince you otherwise, and see about pointing in a direction where you can read/write text files and whatnot.<br><br><br><br>Rather than try to edit the files in place, as you appear to want to do : <br><div class="quote"> How would you for instance, replace the 3rd field on unit Id 93324? <br></div><br>I suspect you will have a much easier time of it by holding the text file "in-memory", changing it when required, and re-writing the file to disk when think it's a good time to flush the data (perhaps immediately, perhaps later).<br><br>To open a file for reading, you can use "ReadStream()", along with "ReadLine()" to read a line of text. You can check for the end of a file with "EOF()". And when finished, you can close it with "CloseStream()".<br><br>As for reading in the data, you can use the String "split()" method to split a line of text by "," (comma) into an array of strings. This array you could either use as is, or perhaps copy into proper fields... like  X = s[0] .. Z = s[4] etc.<br><br>To open a file for writing you can use "WriteStream()", along with "WriteLine()" to write a line of text. When finished, you can close it with "CloseStream()".<br><br>... <br><br></td></tr></table><br>
<a name="821938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> However, since we are here rather, to fan the flames of your obsession with a comma-separated text file "database" system, I guess we should not try to convince you otherwise, and see about pointing in a direction where you can read/write text files and whatnot. <br></div>Please don't encourage him. While I realize that failure is the best teacher, you know what he has planned is never, ever going to work. The best possible solution for this problem is quadratic O(n^2) and most are worse.<br><br>For the amount of data he was talking about in the other threads we're talking about an algorithm that's unlikely to finish. Ever. Like bubble sorting the bible.<br><br>I'll reiterate my advice from your previous thread. Your design is fundamentally flawed. Get some experience in database design first. <a href="http://www.amazon.com/Fundamentals-Database-Systems-Ramez-Elmasri/dp/0805317554" target="_blank">This</a> would be a fairly good place to start. <br><br></td></tr></table><br>
<a name="822175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is this used for? Saving/loading game data from harddisk? I think you should tell us the purpose/reason why you want this system. <br><br></td></tr></table><br>
<a name="822196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> He has said.<br>He wants a sortof vertual Ram, using a "comma-separated text file "database" system" to hold all the game data <br><br></td></tr></table><br>
<a name="822205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> whats wrong with that?  I use CSV files for some of my game data so it's easily editable.  Some other date is saved straight as Integers/Floats etc into TStreams like Profiles and save games, high scores etc. <br><br></td></tr></table><br>
<a name="822210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> As long as it is not huge amounts of data, there should be no problems. <br><br></td></tr></table><br>
<a name="822212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> And if you have no huge amount of data, you don't need a database system, you could use a block based binary structure, where each block has a constant size together with a TOC (table of contents) that just holds the mapping for name -&gt; id of the head entries.<br>All the subentries can refer to the correct index on their own.<br><br>This approach would map to a simple array of TBank (or byte ptr if you need higher performance) at runtime RAM representation <br><br></td></tr></table><br>
<a name="822236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> whats wrong with that? <br></div>I dont think that there is anything wrong with it either. (Just to be clear).<br><br>Apparently though there was a previous thread inwhich his stated aim was concidered too difficult/not right, or what ever<br><br>If I was going to do it though, I think I would <b>not</b> make it Text, and would go for Byte, word and Int fields <br><br></td></tr></table><br>
<a name="822261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DCI</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, to give a basic idea, this is for the server end of the game. Each player, is assigned a player ID. The player then picks a section of the galaxy to go to, then planet to set up their operation on. the planet they pick, depending on size, has between 50 and several thousand zones. in each zone they can build so many buildings to enhance their 'empire'. This is a persistant universe, all players existing simultaniously. While the buildings and such would exist only for logistical reasons and are not combat units.. What I was giving an example of, was the persistant unit database. when the combat units interact, it would pull amunition off of that unit's ammo count, whlie reducing the amount of armor or shield energy on the other combat unit. I cant pre-determine what all the fields, or field size will be, because all the combat units are custom configured, and the amount of fields per field entry could differ. <br><br></td></tr></table><br>
<a name="822263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it is a back end server for a game, then you NEED to use a database.  No doubt about it.  Use a database or don't do it at all. <br><br></td></tr></table><br>
<a name="822267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DCI</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> the problem ive had with sql before, is access speed with huge record amounts. which is why the txtfile database i was thinking would be superior, Smaller server footprint, quicker searches, and less problems when reaching higher count on records. The gameis likly going to have something like, 500 million entries for buildings, mines, vessles, infantry, mechanized combat units, flying units and armored units, turrets, all to be placed by that particular empire's owner. <br><br></td></tr></table><br>
<a name="822268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I cant pre-determine what all the fields, or field size will be <br></div><br><br>So, why wouldn't something like this work?<br><br><pre class=code>
Table : AUnit
        Field : unitId
        Field : ...

Table : AUnitField
        Field : unitId
        Field : fieldId
        Field : fieldType
        Field : fieldValue
</pre><br>1 AUnit has many AUnitFields....  nothing hard coded, completely flexible.<br><br>As Flameduck says, you need to learn about Database Design, because believe it or not, Relational databases are there for a reason - to manage data in a relational way.<br><br>But you should probably stick with a comma-separated text file "database" system as you'll not need to learn as much. <br><br></td></tr></table><br>
<a name="822269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Real databases also have useful things like Indexing, which if used properly can work very fast. Again, it's down to your design. Design it well, and you shouldn't have any problems. <br><br></td></tr></table><br>
<a name="822270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DCI</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey brucey, could you give me a more extensive example of that? also.. how would that go about saving that information to disc, and retrieving, and editing it? my original question is still valid ;) <br><br></td></tr></table><br>
<a name="822345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> quicker searches, <br></div> Correct me if I'm wrong, but my understanding of searching a plain text file is it starts at the top and basically reads its way down until it finds what you're looking for? And that searching a giant text file, especially for records at the end, would be extremely slow? <br><br></td></tr></table><br>
<a name="822346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... unless you have lots of text files and hold an index to each in memory. In my inexperienced view a database is very much like a load of text files accessed via an index (or unique key). The advantage is that you can index different columns and use it to select and/or order your data. <br>Using text files *might* work but its going to be re-engineering a solution that somebody has already fixed. <br><br></td></tr></table><br>
<a name="822354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 500 million records using arrays and text files?  Are you kidding me?<br><br>There are many reasons you will need to use a database.  Some of the most important ones are:<br><br>speed - I know you think databases are slow, but reading text files with that many records will give a whole new meaning to slow.  Databases are built to handle data like that quickly, using indexing and other features.<br><br>data security - Databases are transactional.  Each write to the database is handled and written.  A power loss will lose the last few writes, no big deal.  If you hold the data in memory, it is lost at a power loss or program crash.  Text files needs to be randomly accessed or the whole file will need to be written at once.  Meaning it could ALL be lost with a program crash or power failure.<br><br>If you are keeping data on an MMO, you cannot keep important data only in memory, it must constantly be written to the hard disk in some manner.  With a database, you tell the server, write this data tot he database, then your propgram goes about it's business.  With a text file system, your program will have to manage opening the file, finding the correct spot to write the data, writing it, closing the file, etc...  Any interruption of that process could destroy the entire file. <br><br></td></tr></table><br>
<a name="822356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> "The gameis likly going to have something like, 500 million entries for buildings, mines, vessles, infantry, mechanized combat units, flying units and armored units, turrets, all to be placed by that particular empire's owner." <br></div> Waaa?! All placed by a human?? Placing half a billion units doesn't sound fun. Will there be a GUI for this, or do they have to edit the text files? ; ) <br><br></td></tr></table><br>
<a name="822364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think he means 500 million in total.<br><br>DCI you are probably not going to like all these replies you are getting, but perhaps you have bitten off more than you can chew with this project? If you want that many entities you really need to use "normal" databases. <br><br></td></tr></table><br>
<a name="822469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its not really important if its the right way to go about it or not. If its a seperate distinct part of the program, either a self contained Type, or a full BlackBox, then DCI can change it latter if the need for such change seems needed.<br><br>@DCI,<br>I do agree with the others, that you would be better to use a pre-built system, so that you could get along with the meat of your game faster, but I would not fault you for trying to write you own either.<br>However, from your reply when shown an expandable type example, I would highly recomend that you start with something simpler. Maybe write a "Model" of the "Model" of your game, not worring about that you might have 500 million of something, practice other parts of the language with maybe 50 Max.<br>Im not sure if Bmax has a "serialise" command or not, but Im sure that part of these new commands we got last updat are for that, so maybe concider them.<br>Also I would have to agree, that although it may seem that text from file access is faster that SQL (or other), that normaly only in arbitary examples, once you start needing randomly placed files to read, (and in you own decription you have no Idea of Field length), need to read the first half of every other file before you find what you need, the advantage of a pre-existing dbase command set will be joy. Dont forget people spend years writing good Dbases, and its only a fraction of what you need for you program. <br><br></td></tr></table><br>
<a name="822521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, joking aside, if you want to reinvent the wheel, which is useful for learning purposes, then my advice is the same as that already given: to modify a record, read it in as a type and write the whole thing out. Trying to do text insertions would be a lot of effort for little or no speed increase. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
