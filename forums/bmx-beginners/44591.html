<!DOCTYPE html><html lang="en" ><head ><title >Change screenmode</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Change screenmode</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Change screenmode</a><br><br>
<a name="496250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was trying to implement a change-over between Windowed mode and Full screen mode, and was seeing some really weird things...<br><br>May be obvious in hindsight, but I should probably bring it up anyway and maybe safe someone else some hair-pulling moments.<br><br>I found that when I ended the current graphics mode and switched to a new graphics mode (in particular between windowed and full screen) that the sprites I had loaded were gone. I knew that that would be the case, I had a function to reload them.<br><br>However, what kind of threw me off is that this worked only intermittently:<br><br>Going from full screen to windowed mode would require the sprite loading routine to be called TWICE to have any effect, while the other way around (windowed to full screen) would only work if I called it ONCE. <br><br>Switching from full screen to windowed and only loading the sprites once would return in a white screen, and then switching back to full screen would require the sprites to be reloaded twice in a row before anything other than a white screen would be drawn... <br><br>Extremely confusing...<br><br>The fix turned out to be to explicitely de-reference all existing sprites FIRST (mysprite=NULL, flushmem) and then do the loading... I was under the impression that it should be able to simply load &amp; overwrite the old info on the fly, and the confusing part was that this DID work, but only part of the time.<br><br>Is this a bug, or a 'feature'? Might be worth mentioning some of these situations in the manual somewhere... <br><br></td></tr></table><br>
<a name="496251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, I can reload all sprites without problems, but how does one reload the default font? After changing the screenmode, any text printed in the default font (no specific font or size was explicitely delared at any time) will simply show up as white rectangles.<br><br>I guess it would be really helpful if there were some kind of text re-initialization function that will restore/reload the defaults. <br><br></td></tr></table><br>
<a name="497322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bumping this thread as I have the 'white rectangle' problem.<br><br>I thought I'd got around the problem using this code.<br><br><pre class=code>
Local DefaultFont:TImageFont
DefaultFont = GetImageFont()

change mode

SetImageFont(Defaultfont)
</pre><br><br>But this only seems to work once for fonts - even using global.  Has anybody got some code that works no matter how many changes of the graphics mode? <br><br></td></tr></table><br>
<a name="497492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very strange... it does only work the first time it's called indeed. <br><br></td></tr></table><br>
<a name="497688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump.  :-( <br><br></td></tr></table><br>
<a name="497843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Already mentioned that bug a month ago, but no fix out yet.<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=43626" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=43626</a><br><br>For my program I coded an ini file, where the user can set screen mode.. :/ <br><br></td></tr></table><br>
<a name="497851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm that's strange Squatting Neville's example works perfectly.  But in a real program it doesn't - my program works for one change only before getting the blank rectangles instead of text - and not at all without the code I mentioned.<br><br>Perhaps an alpha problem?<br><br>Screenshot1 is how should look. www.elliottproductions.co.uk/temp/screenshot1.jpg<br><br>Screenshot2 is how it looks after 2 changes of graphics mode. www.elliottproductions.co.uk/temp/screenshot2.jpg <br><br></td></tr></table><br>
<a name="497853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> btw: is there a way to get rid of the console window behind the blitz window in windowed mode?<br><br>Link broken!  add .jpg!<br><br>THATS EXACTLY MY BUG! HAVE THE SAME HERE! <br><br></td></tr></table><br>
<a name="497855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The links fixed.<br><br>The last update removed the console window Grisu - haven't tried it in Windowed mode though - but Mark said the work on a completed Windowed mode is to be finished. <br><br></td></tr></table><br>
<a name="497856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> btw: is there a way to get rid of the console window behind the blitz window in windowed mode? <br></div><br><br>In 1.05. enable 'Build GUI App' in the Program menu. <br><br></td></tr></table><br>
<a name="497857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> As long as I code within the ide, its no longer present.<br><br>But when making an exe and running it alone, I get this:<br>[removed] <br><br></td></tr></table><br>
<a name="497859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh, just saw the other post. Thanks a lot... that did it! <br><br></td></tr></table><br>
<a name="497860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So just the font problem now eh Grisu? <br><br></td></tr></table><br>
<a name="497865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> yepp, but i gave up by now and read an inifile on startup... not my liking... but I such stuff drives me crazy. <br><br></td></tr></table><br>
<a name="497866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> For what it's worth I've reported it as a bug. <br><br></td></tr></table><br>
<a name="497868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Already did that ages ago, no fix by now... :(<br><br>Sent u something via e-mail! :D <br><br></td></tr></table><br>
<a name="497870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> So did I!  I thought I'd solved it until I tried to change modes again.  ;-)<br><br>Got your email - but I don't have rar - a zip version would be good. <br><br></td></tr></table><br>
<a name="497872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uploading zip version.. COMPLETE!<br><br>Same link as before, but with ".zip"!<br><br>btw: Your email took looooooooooooooooooooooooong! <br><br></td></tr></table><br>
<a name="497881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> What we need is a autoreloading of image's/font's<br><br>this is so easy... blitzmax should save pathname from a image, that was loaded with LOADIMAGE etc... after changing GFX-mode, bbmax can start a subroutine, that reload all images again that was loaded and exist now... <br><br></td></tr></table><br>
<a name="497934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> what we need is bmax handle all data on default when changing screen modes. This works wonderful with bp... so why not implement this for bmx as well? <br><br></td></tr></table><br>
<a name="497947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't wait any longer (it was bugging me) so I wrote my own drawtext function and designed a font.  So I can change modes as often as I like now.  :-D<br><br>If you load a font graphic in with loadanimimage (contains all letters etc in ascii order from 32) then use something like...<br><br><pre class=code>
For Local loop = 0 To text.length-1

  DrawImage(gfx_font,x+font_size,y,text$[loop]-32)
  x :+ font_size

Next

</pre> <br><br></td></tr></table><br>
<a name="497981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hopefully this will be fixed next week. I think the solution is that there needs to be a deafult OpenGL context created when the app starts and then any windows and fullscreen modes you create will inherit / share this context and all textures loaded will be retained. <br><br></td></tr></table><br>
<a name="497990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's good news - I know it's a beta version but sometimes it can be frustrating when things don't work.<br><br>Glad to hear you're working on the problem. <br><br></td></tr></table><br>
<a name="498016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot skidracer!<br><br>*grisu makes the dragon dance* <br><br></td></tr></table><br>
<a name="501053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Steve looks at his calender.  ;-) <br><br></td></tr></table><br>
<a name="501383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Release dates are always pain... ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
