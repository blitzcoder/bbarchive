<!DOCTYPE html><html lang="en" ><head ><title >Arrays vs Lists</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Arrays vs Lists</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Arrays vs Lists</a><br><br>
<a name="586735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lillpeter</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I´m currently working on my first Bmax game and i´ve run into a qouple of questions.<br><br>1.  In my game i´m using an array (consisting of types) to hold the bullets i create when playing (reorganizing it to fill the empty slots as the bullets die). <br>While for all my particles that i generate when i blow something up i´m using a linked list to hold them.<br>I´m wondering wich technique that is best suited for holding all the objects? i mean i could easily create a linked list for the bullets instead and vise versa for the particles.<br><br>2. My second question is about drawing all all the stuff to the screen, as i generate alot of particles (about 800 - 1000 particles) they really slows the game down, any tips on improving drawing times would be appreciated.<br><br>Maybe it´s hard for you to answer these questions without looking at my code, but i´m mostly interested<br>in general priciples for programming (in blitzmax) i don´t really know anything about optimizing yet so any tips on this would be very helpful.<br><br>Me out <br><br>Peter <br><br></td></tr></table><br>
<a name="586742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i would always use a list for bullets. if you want to limit the number of bullets just do somthing like<br><br>if bulletlist.count() &lt; 100 Then bulletlist.addlast mybullet.create(x, y, whatever)<br><br>I would also use a list for the particles as well, because lists are dynamic and arrays are static, you can easily add and remove items.<br><br>making it draw the particles faster will depend on your looping structure. make sure your not doing the same thing over again. You could also try reducing the number of colours the particle sprites use, or make them smaller <br><br></td></tr></table><br>
<a name="586744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I don't see how 800 - 1000 particles could slow your <br>program.  Even if they were drawn via bitmaps.  (I recently <br>made a program that had 16,000 particles bouncing and <br>flying around my screen.  I had Bmax cap it off at 60 fps)<br><br>Can you loosely explain how your particles move/react to the world?<br><br>And the general rule seems to be that lists are cleaner and <br>have some nice functions, while arrays are simpler and run <br>faster, but also require a bit more work for you. <br><br></td></tr></table><br>
<a name="586749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Diablo, Arrays are dynamic too.  can you run this and tell <br>me if this is what you are talking about?<br><pre class=code>
Strict

Local array:Int[20]
array[19] = 99

array = New Int[10]

Print array[19]

</pre><br><br>this program will crash because you changed the array <br>size.  This is fine, but the problem is, you lose the data the<br> array was holding, but the array gets resized!  You could <br>just create a temporary array to hold the data while you <br>resize the main array.  And there you have a dynamic <br>collection of things with the speed advantages of Array and functionality of TList. <br><br></td></tr></table><br>
<a name="586750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes but you still have to tell it how big you want the array. and i get an output of 0 anyhow.<br><br>EDIT: you thinking that it adds 10 because it dosen't <br><br></td></tr></table><br>
<a name="586752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know, it takes 10 away. : ) That's why it crashes. <br><br></td></tr></table><br>
<a name="586753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> [double post] <br><br></td></tr></table><br>
<a name="586755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lillpeter</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow, thanks for the fast replies<br><br>Drew<br><br>as for the particles they don´t really interact with anything,<br>they are just thrown outwards by random angles, and they also contain some other simple data, here´s the type i´m using.<br><br>Type spark<br>	Field x#,y#,move_x#,move_y#,r#,g#,b#,life#,alpha#,scale#<br>End Type<br><br>the move_x and move_y variables are added to the x and y when moving the particle. <br><br></td></tr></table><br>
<a name="586756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, it just assigns array as a new 10d array with empty pointers. which means you loss all info, if you are going todo it that way you have make sure you create a temp array, fill that array, and then resize the new array and fill it with the items in the other array:<br><br>Strict<br>Local i:Int<br>Local c:Int<br><br>Local array:Int[20]<br>array[9] = 99<br>Local tmparray:Int[20]<br>For i:Int = EachIn array<br>	tmparray[c] = i<br>	c:+ 1<br>Next<br>c = 0<br><br>array = New Int[10]<br>For i:Int = EachIn tmparray<br>	array[c] = i<br>	c:+ 1<br>Next<br>c = 0<br><br><br>Print array[9]<br><br>;; which isn't dynamic (because you create a new array instead of resize it) <br><br></td></tr></table><br>
<a name="586758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Lillpeter <br><br>make sure you delete them when they go out of view.<br><br>EDIT: like<br><br>for aspark:spark = eachin sparklist<br>    if aspark.x &lt; 0 or aspark.x &gt; graphicswidth() or aspark.y &lt; 0 or aspark.y &gt; graphicsheight() then sparklist.remove(aspark)<br>next <br><br></td></tr></table><br>
<a name="586760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>empty pointers. which means you loss all info<br> <br></div><br><br>Yeah, I said that. ;)  <br>And sure it's not truly dynamic, but the tmp method works fine.<br>And the speed benefits of arrays over lists is worth <br>considering.   To be honest, I don't even consider using lists <br>when I program.  There is no benefit to make up for the <br>speed loss.<br><br><i>Worst case scenario with arrays:</i><br>If you are feeling lazy and don't want to be bothered to <br>write an array-resizing function, you can just set a high <br>upper limit to your arrays.<br><br>Say for example, you're doing effects particles.  You should<br>always have an upper limit anyway (say, 1000) so <br>initialize 1000 particles but only process active ones.<br><br>for local a = 0 to particleNum<br><br>to add a particle:<br><br>if particleNum &lt; particleMax particleNum:+1<br>particle[particleNum+1] = active<br><br>to remove any arbitrary one:<br><br>particle[a] = particle[particleNum]<br>particleNum:-1<br><br>Believe me, the above methods are invaluable and <i>quick</i> <br><br></td></tr></table><br>
<a name="586764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lillpeter</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yo, <br>all the bullets, enemys and particles are deleted when they exits the screen, i´m writing out the variable values on the screen as i play and it works fine.<br><br>Also, i downsized my particle image, i really seems to run faster, it was way to big anyway, thanks for all the tips. <br><br></td></tr></table><br>
<a name="586772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Diablo/Drew,<br>You might like to look at slices to resize arrays<br><pre class=code>
Local a[10]	'initialize a[] to 10 elements
For x = 0 To 9
  a[x]=x
  Print a[x]
Next
a=a[..5]	'resize a[] to 5elements
For x=0 To (SizeOf a / 4) -1
	Print a[x]
Next
</pre><br>Check <a href="http://www.x-xressive.com/ParticleCandy/index.html" target="_blank"> Speed Optimization Hints </a> for particle hints although 800-1000 suggests something else is wrong.<br>Personally, I would use lists for both bullets and particles as you'll be adding and deleting both quite often. I would use arrays (or arrays of types) for more static data or for direct access (e.g. tiles).<br>I'm sure there was big discussion about lists vs arrays here a couple of months ago.<br><a href="/posts.php?topic=51617&amp;hl=linked%20lists%20arrays" target="_blank"> List speed </a><br><a href="/posts.php?topic=47347&amp;hl=linked%20lists%20arrays" target="_blank"> Lists vs arrays </a><br><a href="/posts.php?topic=46718&amp;hl=linked%20lists%20arrays" target="_blank"> lists vs arrays 2 </a><br><a href="/posts.php?topic=42783&amp;hl=linked%20lists%20arrays" target="_blank"> Array of types </a> <br><br></td></tr></table><br>
<a name="586773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh, array slicing.  Nice!  Thank you Tonyg, I forgot about that. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
