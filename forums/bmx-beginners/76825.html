<!DOCTYPE html><html lang="en" ><head ><title >The best use or Tlists's</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >The best use or Tlists's</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >The best use or Tlists's</a><br><br>
<a name="859457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get how to make and use them in general, but was wondering is ther a best way to use Tlists.<br><br><br>At the moment i generally make them global eg<br><br>Global explo:TList=New TList<br><br>and then access them in the main program is this the preffered method or does it have any benefits all fall downs as compared with say have a Tlist inside the type attached as one of the fields inside the type eg.<br><br>Type Tstreak<br>	Field PointList:TList <br>        field all the other fields etc<br>        <br>        funtions etc<br>        methods etc<br><br>end type<br><br>i am guessing this way that say if i cal an update(0 from within this type there is no external or main code chunk with the loop going through the list like the first eg where the list is global.......<br><br>is this a six of one, half dozen of the other is there gunuine benefits from one....any ideas?<br><br>ta <br><br></td></tr></table><br>
<a name="859458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having a bit of trouble following your English there, but in general there's no problem having the list as either a global or as a field within a type, or even as a field global. No major benefit either way. It just depends on what is more convenient for the task at hand. <br><br></td></tr></table><br>
<a name="859461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know it sounds vague, and trite, but put it where it belongs. Either could be right and either could be wrong, you have to do the right thing for the task at hand.<br><br>Perhaps an example will make my reply less vague and trite.<br><br>If my Types are Soldier and Orders, let's say we're making a little RTS. Each soldier can have a set of orders given to him by the player and he does them in order. Those orders are his and only his. So of course, they're going to be a field within his object. If there are lots of soldiers, and you need a list of those soldiers then they also relate to soldiers, but they don't relate to just one soldier, they relate to all soldiers, so they should be global within the type. Now perhaps we have a list of messages being displayed on the screen, telling the player what has happened. Those aren't related to the soldier at all, so they go outside the type. Or they may go inside another type, but for simplicity's sake, we'll say they don't. So that gives us :<br><br><pre class=code>
Global DisplayMessages:TList

Type Soldier
   Global List:TList ' List of Soldiers
   Field Orders:TList ' List of Orders
End Type
</pre><br><br>Use the right tool for the right job.<br><br>The word "has" is usually used as a guiding rule for fields. If you can say "my soldier *has* orders" it should be a field. You can't say "my soldier *has* a list of soldiers" because unless he's the General, he probably doesn't. But it is a list of soldiers, even if each soldier doesn't have one, so it probably should be in there, and those are globals. Related, but not to an instance of the type. And he certainly doesn't have a list of messages being displayed on the screen, and they don't relate to soldiers anyway. So they're not there. <br><br></td></tr></table><br>
<a name="859472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> My rule of thumb is "use globals only as a last resort". If it's possible to place the variable within a type as a Field instead, then *generally* that's what you should do. Following that rule can save you big headaches down the track. <br><br></td></tr></table><br>
<a name="859540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Globals within a type are VERY useful and not considered global in the scope of the program. <br>I use globals in the type if the list (or whatever) belongs to the type rather than an instance (e.g. there will only be one list) and as a field when each instance will have it's own list. (as per Gabriel basically). <br><br></td></tr></table><br>
<a name="859611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pmc</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What exactly does a "global" field inside of a type definition do? The object is accessible from any function anyway, isn't it?<br><br>Sorry if that's too nooby a question... :)<br><br>Anyway... thanks to the OP because I didn't know I could/should stuff the list of objects into the object definition itself anyway. Makes for tidier code for me because my lists are all globals and are defined just before the type definition block so I can remember the association.<br><br>-pmc <br><br></td></tr></table><br>
<a name="859641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Global within a type is :<br> - Available within all functions/methods of the type.<br> - Declared once but keeps it's value.<br> - Is available to all other parts of the program as &lt;type&gt;.name. For example Type TTest global variable Name can be accessed using TTest.Name. <br><br></td></tr></table><br>
<a name="860841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats cleared quite a few things up appreciate the help.<br><br>With blitz3D to get rid of all the types in a list it was a simple as Delete Each MyType<br><br>is there a quick way to empty all elements out of a Tlist.. <br><br></td></tr></table><br>
<a name="860853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> clearlist or method listname.clear <br><br></td></tr></table><br>
<a name="860854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like extending a type and adding my own fields and methods... <br><br></td></tr></table><br>
<a name="861046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok just to check i am getting this right, if i declare a global within a type, it is accessible to all methods and functions from within the type, and is accessible from outside by using the typename.variablename convention. <br><br>A local declared within a type is only used within that method or function and can only be accessed elsewhere only if it is returned as part of a function say.<br><br>this getting used to oop, is like getting into somebody else's clothes from the wrong end. I guess as long as they look good when on, thats all that matters. The main thing is  now i can see how to put them said clothes on the right way....lol.<br><br>we'll see..... <br><br></td></tr></table><br>
<a name="861049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> A local declared within a type is only used within that method or function and can only be accessed elsewhere only if it is returned as part of a function say. <br></div><br>As far as I know you can't declare locals in a type, but fields technically are locals, how you're thinking anyways. <br><br></td></tr></table><br>
<a name="861053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> locals as in you have to do a for local i =0 to 9  .... next loop sort of thing, or a temp incremental counter of some sort.....within a function or method... <br><br></td></tr></table><br>
<a name="861054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a for instance... In my football game I have a Type Player.   I make a global list in my type and every new player gets added to the list:<br><br><pre class=code>
Type TPlayer
   Global list:Tlist
   Field name:String

   Function Create(nm:String)
       if not list then list = CreateList()
       Local newplayer:TPlayer = New TPlayer
       newplayer.name = nm
       list.AddLast(newplayer)
   End Function

   Function UpdateAll()
      For local player:TPlayer = EachIn TPlayer.list
           p.Update()
           p.Draw()
      Next
   End Function

   Method Update()
       ' Run about
   End Method

   Method Draw()
      ' DrawImage()
   End Method
End Type
</pre><br><br>Then from your main game loop you can do: TPlayer.UpdateAll()<br><br>Even better is you can override the compare function to create your own list sorting. So if your type has a field, say "age" you can do TPlayer.list.Sort() to sort them in age order.<br><br>There was a great tutorial on this kind of stuff but I can't remember which one it was now... Spend an hour reading it though and you'll be set for life. :D <br><br></td></tr></table><br>
<a name="861055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> locals as in you have to do a for local i =0 to 9 .... next loop sort of thing, or a temp incremental counter of some sort.....within a function or method... <br></div><br>Ah, I misread what you originally said, sorry. <br><br></td></tr></table><br>
<a name="861490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ok just to check i am getting this right, if i declare a global within a type, it is accessible to all methods and functions from within the type, and is accessible from outside by using the typename.variablename convention. <br><br>A local declared within a type is only used within that method or function and can only be accessed elsewhere only if it is returned as part of a function say.<br> <br></div><br>Exactly right. It is all about scope. <br>A global within a type stays in scope even when the function/methods of that type end. This means it can still be accessed.<br>A local defined within a function, method or loop goes out of scope when they finish so is not longer accessible. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
