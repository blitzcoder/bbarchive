<!DOCTYPE html><html lang="en" ><head ><title >Use of Globals</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Use of Globals</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Use of Globals</a><br><br>
<a name="1110793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have seen many topics on the use of Globals, and the general law is NOT to use them where possible.<br><br>If that is the case how can I use a graphics font within 2 or more functions without declaring the graphic as a Global?  Wouldn't that mean loading the graphic at the start of each function? <br><br></td></tr></table><br>
<a name="1110795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could pass the graphic into the functions... or if the "functions" are actually methods of an object, the object could store the graphic in a field...<br><br>Globals are slower than fields or locals, not usually a big problem however. Generally globals should be avoided because if something is a global the general rule of thumb is the problem is likely your structure that requires it to be global in the first place...<br><br>You may well end up with globals in the real world, but again, the fewer you have you're more likely to have "better" structure. Better meaning more portable, easier to debug, easier to track program flow, likely more optimized and therefore more likely faster etc.<br><br>Here's a possibly applicable conceptual example related to a font:<br>Program loads<br>Game is told to start playing<br>Game loads level and resources (map, graphics, sounds, font etc.) and stores them in a "current level" object which (for laziness might be global, but optimally should be within the context of the current game loop, or handed to the current game loop)<br>Function is called that needs a font, so the font from the level resources object is handed to that function. The advantage here is that you can take that function and pop it into another game 6 months from now and all you have to do it hand it a font and whatever other input it needs and huza, re-used code, hours saved, etc.<br><br>Hope that helps <br><br></td></tr></table><br>
<a name="1110822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like fonts I would use as globals. Ignore the angry mob, it's just not worth setting up a whole font management system just to have a couple of fonts to choose from. If you're making a text editor with billions of fonts that would be a different story.<br><br>Globals are slower than locals, but I think fields are slower than globals, to put the perfomance "penalty" into perspective. Globals are slower because the compiler must check their value every time you read from them, in case something somewhere else has modified them (as they are globals). The compiler can optimize out many reads of locals when their value doesn't change as it knows nothing unexpected will happen to them. Fields fall into the former catagory, as your object could be referenced (and changed by) things outside of the function. Plus, there is an extra pointer dereference to access the field. <br><br></td></tr></table><br>
<a name="1110840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> An alternative to the Globals for assets is a Asset Loader with some sort of Cache. That way you can eliminate Globals for assets.<br><br>But if the game has limited assets, I wouldn't even bother and just stick to Globals. But that's me. <br><br></td></tr></table><br>
<a name="1110860"></a>

<a name="1110920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem with globals are two-fold: namespace and huge issues when all of a sudden you still want multiple instances of that global - and often enough you don't yet know this when you've just typed your first 500 lines o' code.<br><br>If you are sure that a certain something is used only once in your whole program, and it has a really unique name, then you could use a global. Something like PI is a global too. If you have a name like 'gamefont'.. well, I can't imagine some other place where I'd need this word for something else, so something like this would be ok.<br><br>It would be bad if you have Player:timage as a global. First: player may be a word you want to use for something else too (preferably as an <i>object</i> that contains your timage among other things!), in another context. And secondly: all of a sudden you've decided to make a two-player mode, separate viewports next to each other and your player all of a sudden needs to become an array of two. Happy Search&amp;Replace&amp;PullYourHairshOut then.<br><br>Personally I'd create a global object containing all these global variables. That way only this object instance is the only global in your namespace. The rest is carefully tucked away in it. Like:<br><br>----<br><br>Type Gameglobals<br> Field gamefont=LoadFont(..)<br> Field refreshrate=30<br> Field graphicswidth=640<br> Field graphicsheight=480<br> Field graphicsmode=1 ' 0 windowed, 1 fullscreen<br> ' etc,<br>End Type<br><br>Global MyGameGlobals:Gameglobals=New Gameglobals<br><br>----<br><br>Every object and function anywhere in your game can access these Fields, while the only global you've wasted is MyGameGlobals.. the chance of a namespace collision is probably zero dot zero.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> to re-address this, I often end up with fonts as globals OR a global font manager object (that handles loading caching, drawing etc.) but I do this out of lazyness (real world vs. "optimal"... time is a factor that gets ignored when planning an optimal development path...).<br><br>If you have a single font, and you draw it from multiple places, and it will never change, it's just your game font then I would *usually* slap it in a global and move on... but if there's a chance you will want to change font, or use multiple fonts, or you're talking about something less generic like an entity graphic, etc. etc. then you will save a lot of heart ache by planning out a better system...<br><br>So real world, only talking about a (singular) font, I would probably go with a global to save time. But just about anything else needs more thought and planning so try not to make it a habit... or maybe use this as a first pass towards better planning and see if you can find a way to NOT use a global so when you really need to not use a global you know what you're doing... <br><br></td></tr></table><br>
<a name="1110906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a good idea. Have a global TMap called fonts_library, and store your fonts with a string key for their name. Then you can access them anywhere easily, and add as many new fonts as you like, with only one global name. <br><br></td></tr></table><br>
<a name="1111067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So...to recap, Globals slow down compilation time?  But not runtime? <br><br></td></tr></table><br>
<a name="1111070"></a>

<a name="1111071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use them, use them. Better not to. But programming the why you can is better than not programming the way you cannot.<br><br><div class="quote"> If that is the case how can I use a graphics font within 2 or more functions without declaring the graphic as a Global? Wouldn't that mean loading the graphic at the start of each function?  <br></div><br>This is not a "Answer that is always right", but...<br>If I have two functions that need access to the same variable, and said variable only exists once. I would make the Functions member functions of a type, and the "Variable" a global field of that type<br><br>Oh, and runtime is possibley going to be slower.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1111074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> They don't slow down compilation time. They negligibly slow down run-time. When I said "the compiler must check this, that.." what I meant was, the code that the compiler generates must do this, that. <br><br></td></tr></table><br>
<a name="1111118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Magic word...Neglibly.  Thanks for the information guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
