<!DOCTYPE html><html lang="en" ><head ><title >TileMap Collision movement problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TileMap Collision movement problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >TileMap Collision movement problem</a><br><br>
<a name="878251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! I´m giving up in trying to code this by my own and i humbly ask for help :).<br><br>My problem is not the collision actually, but what has to be done when a collision is detected... flag the direction the player is moving to prevent that input (key_up for example) to keep moving the player in that way?<br><br>Im really lost here, i can have one collision detection at a time, but when i do lets say top and down collisions at the same time, the player freezes as soon as it collides... <br><br>thanks in advance! <br><br></td></tr></table><br>
<a name="878289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before moving the player check whether the move will cause a collision. If it will then don't move the player or change the number of pixels moved by the player to 0. <br><br></td></tr></table><br>
<a name="878298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As tonyg says you dont stop the user from pressing the key but rather set the movement to zero if that movement will cause a collision. From what I am make out from your post your problem is when the player is moving diagonally for example up and to the right and hits a wall at the top you want the player to continue sliding along the wall to the right.<br><br>One possible solution could be:<br><br>Say you have the two variables PlayerX, PlayerY which have the players position. You would then have two more variables PlayerMoveX, PlayerMoveY which are reset to zero before you check for player input.<br><br>Then based on what keys the player is pressing you would set the movement variables accordingly.<br>So if the player is pressing the up key and the right key then PlayerMoveX would equal 1 and PlayerMoveY would equal -1.<br><br>Now you can check to see if the movement would cause a collision. <br>The trick here is to check each axis seperately.<br>First check if the movement in the x direction would cause a collision and if it does then reset the x movement.<br><br>If checkCollision(playerX + playerMoveX, playerY ) = true Then<br>  playerMoveX = 0<br>End If<br><br>Now check in the yDirection<br><br>If checkCollision(playerX, playerY + playerMoveY ) = true Then<br>  playerMoveX = 0<br>End If<br><br>Finally you can now set the new position of the player<br><br>playerX :+ playerMoveX<br>playerY :+ playerMoveY<br><br><br>Hope this is what you were after and it helps.<br><br>Cheers <br><br></td></tr></table><br>
<a name="878465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey! thanks both for your fast replyes! :)<br><br>I did it and it worked! was doing something similar like you said but not in advance (ie. stop movement when player had allready collided.. that´s why he got stuck) and btw,,, the conflict i had was in mi "Player viewport" code, since i want to avoid to allways move screen when player moves, i did a no move screen zone for player (ie. x:300,y:300,w:200,h:200 so as long as player image is inside that zone the whole map doesnt need to scroll)...also your idea is good QuietBloke, i might do it some time later :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
