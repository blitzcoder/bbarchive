<!DOCTYPE html><html lang="en" ><head ><title >Sprite Animation Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sprite Animation Problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Sprite Animation Problem</a><br><br>
<a name="1292870"></a>

<a name="1292871"></a>

<a name="1292873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shepherd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. I just recently started with BlitzMax. Anyways my problem is that my Image/sprite is not animating when I press any of the 4 arrow keys. Here is my code section regarding the animation and key press,<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Method MovePlayer()

			
	If KeyHit(key_left)
             PlayerDir=PLEFT
             walk=0
             UpdatePlayer()
	End If 
			
	If KeyDown(key_left)
	     PlayerDir=PLEFT
            walk=1
	     x#=x#-1.0
	     UpdatePlayer()
        End If

	If KeyHit(key_right)
 	      PlayerDir=PRIGHT
  	      walk=0
	      UpdatePlayer()
	End If 	
			
	If KeyDown(key_right)
	       PlayerDir=PRIGHT
	       walk=1
	       x#=x#+1.0
	       UpdatePlayer()
        End If

        If KeyHit(key_up)
	      PlayerDir=PUP
	      walk=0
	      UpdatePlayer()
	End If 
				
	If KeyDown(key_up)
	       PlayerDir=PUP
	       walk=1
	       y#=y#-1.0
	       UpdatePlayer()
	End If 

	If KeyHit(key_down)
	       PlayerDir=PDOWN
	       walk=0
	       UpdatePlayer()
	End If 
	
       If KeyDown(key_down)
	     PlayerDir=PDOWN
	     walk=1
	     y#=y#+1.0
	     UpdatePlayer()
	End If 
				
End Method 

 Method UpdatePlayer()
		
	Local i=0,j=0,k=0,l=0
			
	'DOWN
	If(PlayerDir=PDOWN And walk=0)
		DrawImage(PlayerDownWalkI,x#,y#,0)
	End If 
				
	If(PlayerDir=PDOWN And walk=1)
		DrawImage(PlayerDownWalkI,x#,y#,i)
		i=i+1
		If i=4 Then i=0
	End If
			
	'UP
	If(PlayerDir=PUP And walk=0)
	       DrawImage(PlayerUpWalkI,x#,y#,0)
	End If
			
	If(PlayerDir=PUP And walk=1)
		DrawImage(PlayerUpWalkI,x#,y#,j)
		j=j+1
		If j=4 Then j=0
	End If

	'LEFT
	If(PlayerDir=PLEFT And walk=0)
		DrawImage(PlayerLeftWalkI,x#,y#,0)
	End If
			
	If(PlayerDir=PLEFT And walk=1)
		DrawImage(PlayerLeftWalkI,x#,y#,k)
		k=k+1
		If k=4 Then k=0
	End If

	'RIGHT
	If(PlayerDir=PRIGHT And walk=0)
		DrawImage(PlayerRightWalkI,x#,y#,0)
	End If 
			
	If(PlayerDir=PRIGHT And walk=1)
		DrawImage(PlayerRightWalkI,x#,y#,l)
		l=l+1
		If l=4 Then l=0
	End If
					
End Method 		
</textarea> <br><br></td></tr></table><br>
<a name="1292872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i, j, k and l are always zero - since they are declared as locals in your UpdatePlayer() method.<br><br>Perhaps you would be better calling them something more useful and making them Fields in your Type. <br><br></td></tr></table><br>
<a name="1292874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shepherd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok I will try making them as fields in my type. I tried with global but still no animation.It's like it always in the first frame(0). <br><br></td></tr></table><br>
<a name="1292875"></a>

<a name="1292877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you declare them global, do this _outside_ of the method "UpdatePlayer". <br><br>Each time you call UpdatePlayer() now, you reset the variables i, j, k and l to 0 before you check for "down" etc.<br><br><br>@fields<br>"i" and "j" seem to be "frames"-numbers. As you cannot walk down and up in the same time, you might think of making them "share" the same variable.<br>Then you reset the frame to "0" as soon as you start moving down from another direction (so if the direction changes - reset, if the direction was already the same, skip reset).<br><br>If you do so, your type might just contain "Field frame:int".<br>Having this, allows for multiple units having their individual frame number instead of sharing a big single global.<br><br> <br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1292876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Globals are bad. Let's use something else here :-) <br><br></td></tr></table><br>
<a name="1292878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I already edited my above post.<br><br>Your type might look this way:<br><br><pre class=code>
type TUnit
  Field direction:int
  Field frame:int
  Field sprite:TImage
  Field x:int, y:int 
...
End Type
</pre><br><br>These "direction", "frame" are individual variables for each instance of the type TUnit (eg the player or a mob). They are persistent for the life of the instance.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1292879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is it at the moment with people using really bad variable naming!? <br><br></td></tr></table><br>
<a name="1292881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shepherd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all. I already added the frame variable to my type as suggested by brucey and all of you. The Animation is working now but the animation plays only after I release the respective arrow key. I want the animation to play during the key press only. Once I release the arrow key i want the animation to stop. Right now it's the opposite. <br><br></td></tr></table><br>
<a name="1292885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  What is it at the moment with people using really bad variable naming!?  <br></div><br>What do you mean? Everyone is at different levels of skill. <br><br></td></tr></table><br>
<a name="1292889"></a>

<a name="1292890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> instead of<br>If key... direction = x<br><br>You do<br><pre class=code>
Local newdirection=0 'reset in all cases
If keyDown(...) then newdirection=2
If keyDown(other key) then newdirection=3

If direction &lt;&gt; newdirection
 'Reset frames
 'Adjust speed...
 direction = newdirection
Endif
</pre><br><br>This changes direction as soon as none of the interesting keys is down.<br><br>Bye<br>Ron <br><br></td></tr></table><br>
<a name="1292894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shepherd</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ron <br><br>Thanks,but I already figured it out.Anyways, Do you have any suggestions regarding how to change the speed of animation. I am using CreateTimer and WaitTimer but it just feels so laggy when I use them at low values. Like if I set CreateTimer to 12 or less than 12 value the player moves slow like there is lag. And If i give 15 or more value the animation speeds up a lot. So any Idea or suggestions regarding on how to control the animation speed? <br><br></td></tr></table><br>
<a name="1292912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>What do you mean? Everyone is at different levels of skill.</b><br><br><img src="http://internetjatek.hu/score_gold.jpg"><br>Munch, you get a medal for that great statement of understanding you made.<br><br><img src="http://www.poemocean.com/files/media/content/3586/1394816860-201174.jpg"><br><br>Do we all type the same way ? No. Me ? I tilt the external keyboard at a hard 45-degree angle to the left. Does that make me a bad typist ? Not at 135wpm with high accuracy it doesn't. :) <br><br></td></tr></table><br>
<a name="1292913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What do you mean? Everyone is at different levels of skill.  <br></div><br><br>What I mean is that it is really really bad coding practice to name your variables using single letters. I just pointed out the fact that lately I've seen some really bad naming for variables.<br><br>It doesnt take any skill to name your variables to something meaningful. These days you dont need to have single letter variables, PCs have so much more room and you will find it so much easier to understand your own logic if you name them correctly.<br><br>Yes I am a professional software developer by trade, I perform code reviews for peers nearly every day and I fail the review if they are not up to standard or have poor naming standards. <br><br></td></tr></table><br>
<a name="1292998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well now, Therevills, I think "I" is a perfectly good variable for a FOR/NEXT loop. And if you need one inside, there is always "J"<br><br>I suppose someone could do:<pre class=code>For Index=0 to EndValue
  For InnerIndex=0 to SecondaryEndValue</pre>But the way I see it, I and J are pronouns. You remember that good old Schoolhouse Rock song ?<br><br><iframe width="560" height="345" src="http://www.youtube.com/embed/koZFca8AkT0" frameborder="0" allowfullscreen></iframe> <br><br></td></tr></table><br>
<a name="1292999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think he was talking about temporary index variables but "properties".<br>So instead of "frameNumber" you use i,j,k,...<br><br>The more complex code gets, the more an "understandable" variablename helps. This also counts for comples function calls:<br><br>DrawStretchedSprite(sprite, x, y, w, h, frame) <br>is maybe easier to recognize than<br>DrawStretchedsprite(s,x,y,i,j,k) <br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1293108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ron. I do this ! (mostly, sort of, when I can remember) :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
