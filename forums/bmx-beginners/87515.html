<!DOCTYPE html><html lang="en" ><head ><title >What is an "@Ptr" ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What is an "@Ptr" ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >What is an "@Ptr" ?</a><br><br>
<a name="992037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all.<br><br>What's the purpose of putting an AT sign (@) before Ptr?  The two function calls below produce the same output.  What's @ mean?  For example:<br><br>Function MyFunc1(aParam Ptr)<br>	Print aParam[0]<br>End Function<br><br>Function MyFunc2(aParam @Ptr)<br>	Print aParam[0]<br>End Function<br><br>Local a = 100<br>Local ap Ptr = Varptr a<br><br>MyFunc1(ap)   ' Prints 100<br>MyFunc2(ap)   ' Also prints 100<br><br><br><br>By the way, what are the tags used in this forum to display code snippets?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="992038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ is shorthand for :Byte. in the same way that % is short for :int <br><br></td></tr></table><br>
<a name="992040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, many thanks!  That is not documented in the BM docs, is it? <br><br></td></tr></table><br>
<a name="992041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any other type tags that I might be unaware of?  So far, I know of these:<br><br>@<br>%<br>#<br>!<br>$<br>$w<br>$z <br><br></td></tr></table><br>
<a name="992172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can also use @@ for Shorts. <br><br></td></tr></table><br>
<a name="992177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Plash!  I'll make a note of this.<br><br>Where do you guys find all this undocumented stuff?  Honestly! <br><br></td></tr></table><br>
<a name="992189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Where do you guys find all this undocumented stuff? Honestly! <br></div>That's a secret ;)<br><br>Honestly, though, I have no idea. I've noticed the @@ in some of Nilium's code, which he probably picked up from someone else's code.<br>There are a bunch of undocumented, strange and interesting things you can do in Max.<br><br>For example, short-hand ternary operations (which, sadly, can only be used to set integer variables):<br><pre class=code>SuperStrict

Framework brl.standardio

Local myval:Int
Local condtrue:Int = 100, condfalse:Int = 50

Print("myval = False ? " + condtrue + " : " + condfalse + "")
myval = False And condtrue Or condfalse
Print(myval)

Print("myval = True ? " + condtrue + " : " + condfalse + "")
myval = True And condtrue Or condfalse
Print(myval)</pre><br><br>Which Nilium also figured out, somehow. <br><br></td></tr></table><br>
<a name="992418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scienthsine</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why the hell isn't this in the docs under Help-&gt;Language-&gt;Variables? &gt;.&lt; <br><br></td></tr></table><br>
<a name="992678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Plash, that's very interesting!  Although I'd file that under clever programming rather than an undocumented language feature.  :) <br><br></td></tr></table><br>
<a name="992685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, anyone know what a "wstring" is anyway?  (Tag: $w)  A wide c-string?  Unicode? <br><br></td></tr></table><br>
<a name="992726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That isn't something unique to Max, but it's usually considered dangerous because it depends upon the order in which the Ands and Ors are evaluated. In most languages this is left undefined, so could vary from compiler to compiler, so should be avoided. Of course, the BMax compiler is unlikely to fundamentally change any time soon or a competing compiler pop up.. but it's the principle that counts, right?? Well if you use it, just make sure you understand the evil magics you are using :P <br><br></td></tr></table><br>
<a name="993486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jasu</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think Ands and Ors are evaluated always the same way. And is always stronger than Or, so it gets evaluated first. At least this is how I remember from math class. Over ten years ago... :)<br><pre class=code>
Print (False And False Or True And True) ' returns True
Print (False And False) Or (True And True) ' returns True
Print (False And (False Or True) And True) ' returns False
</pre><br>Cherish your boolean math. This:<br><pre class=code>
R = x1*y1
If X1&gt;Y1
   R = R + x2
EndIf
</pre><br>Is 50 times faster when written like this:<br><pre class=code>
R = x1*y1 + x2 * (X1&gt;Y1)
</pre><br>'IF' evaluation gets pretty hidden, so it's a bit more difficult to read, but the advantage is huge. <br><br></td></tr></table><br>
<a name="993863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think Ands and Ors are evaluated always the same way <br></div> Maybe you are right. I can't be bothered to ponder it any further :) But it just set off some alarm bells in my mind..<br><br><div class="quote"> the advantage is huge.  <br></div>There is an advantage, but 'huge', depends.. If that kind of thing is really the bottleneck for your code, then you can change it later, but readable code is important too.. <br><br></td></tr></table><br>
<a name="994488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jasu</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right. No reason to use it in many situations. But in cases where it can be used, it should. You can of course leave the more understandable version in comments, as I do.<br><br>I benchmarked the above code inside for loop with 10 000 000 iterations.<br>The normal way took 115 ms and the one line version took 5 ms. I think the difference deserves to be called huge. <br><br></td></tr></table><br>
<a name="994493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> If that is the bottleneck of your code, then yes it is huge and should be done :D<br><br>But I don't often have 10,000,000 iterations per game update ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
