<!DOCTYPE html><html lang="en" ><head ><title >return from Function not working?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >return from Function not working?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >return from Function not working?</a><br><br>
<a name="660690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lotonah</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there...this isn't the exact code, but close enough (for brevity).<br><br>'Main<br>  Global Plyr1 :int=0<br>  Global Plyr2 :int=0<br>  Global Winner :int=0<br><br>  Plyr1=0  <br>  Plyr2=1<br>  LogicModule()<br>  print Winner<br>  waitkey<br>End<br>  <br>Function LogicModule()<br>  Winner=0<br>  if Plyr1=0 and Plyr2=1 then Winner=1<br>  return Winner<br>end function  <br><br>Now, if I put the print inside the function, it will print a 1.  When I put the print after the function call, it prints a 0.  I'm assuming it's something to do with the RETURN not properly passing Winner back to the main program?<br><br>Help would be appreciated.  Thanks! <br><br></td></tr></table><br>
<a name="660695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Prints 1 here.<br>Try putting superstrict at the top of your code.  I bet in your source, you misspelled "winner" somewhere.  Maybe winer, or wniner or something like that.  Using Superstrict will show you where such errors occur. <br><br></td></tr></table><br>
<a name="660797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need to return anything from your Function (as it is above), because you have set Winner to be a Global variable, which is visible to the entire program regardless of whether it's in a Function or not.  Take out the 'Return Winner' line from your Function.<br><br>On the other hand, if you need the Function to return Winner, you should assign the output from LogicModule to your Winner variable, as follows:<br><br><pre class=code>
' Main
Global Ply1:Int=0
Global Ply2:Int=0
Global Winner:Int

Ply1=0
Ply2=1
Winner=LogicModule()
Print Winner
WaitKey
End

Function LogicModule()
  Winner=0
  If Ply1=0 And Ply2=1 Then Winner=1
  Return Winner
EndFunction
</pre><br>Having said all that, the code posted above should work, so you may have made a mistake elsewhere that causes the value of Winner to get changed. <br><br></td></tr></table><br>
<a name="660827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You haven't defined that it WILL return anything.<br><br>In your function declaration you have to specify the TYPE of data that will be returned.<br><br>Function LogicModule:Int()<br>...<br>End Function <br><br></td></tr></table><br>
<a name="660900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You only need to define the return Type if using Strict or SuperStrict modes.  If not, then Int is assumed as default. <br><br></td></tr></table><br>
<a name="661048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, cool. <br><br></td></tr></table><br>
<a name="661139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lotonah</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, thanks guys, it works now.  Actually, turning on STRICT mode helped uncover a few other problems too.<br><br>In the end, I did the following changes:<br><br>Winner=LogicModule()  (JazzieB's suggestion)<br>&amp;<br>Function LogicModule:Int()  (AngelDaniel's suggestion)<br><br>The combination did it.  You guys rock! <br><br></td></tr></table><br>
<a name="661141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to consider using Superstrict too. It makes for stronger code and is much less prone to you having a silly bug that you miss when you are hunting down issues - especially with the "everything defaults to int if you don't say what it is" thing.<br><br>Also, if anyone else is likely to have to look at your code at some point, using Superstrict will have meant you've "typed" all your variables, and it's easier for them to see what is going on.<br><br>:-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
