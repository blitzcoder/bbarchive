<!DOCTYPE html><html lang="en" ><head ><title >OOP and Speed</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OOP and Speed</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >OOP and Speed</a><br><br>
<a name="636218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ant</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi I've been looking through an OOP tutorial on how to create a vertical shooter:<br><br>http://www.shmup-dev.com/wiki/index.php?title=Tutorials:BlitzMAX:Creating_a_Vertical_Shooter<br><br>In the example when an object is created, its added to a list (for example the player) and then when the code needs to access that object, a global list is read and a local object is assigned to the last object in the list.<br><br>Now I understand the reasons why this is done, but because lists are used quite a lot,  I wondered if if there would be a significant drop in speed  compared to the non friendly OOP method of simply:<br><br>player  = TPlayer.Create()<br><br>...and then directly referencing 'player' for the rest of the game (as opposed to reading it from a global list when the code needs to access it).<br><br>I'd appreciate any opinions on this. Thanks <br><br></td></tr></table><br>
<a name="636223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should assign player that way even when using the list.<br><br>Using the list has a different reason: You have a exact knowledge that the reference to the object exist and how you can remove it.<br><br>If you need many controlled access to objects thought, using TMap instead of TList is a good idea .. <br><br></td></tr></table><br>
<a name="636228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ant</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to clarify - you mean I should always assign the player:<br><br>player = TPlayer.Create() ?<br><br>Not sure I understand your response - it sound  like you think I should do the above, but as you rightly said one of the benefits of having them in a list is an exact knowledge of objects that exist and how to remove them...? <br><br></td></tr></table><br>
<a name="636232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have an instance of TPlayer you always need, then yes, you should have a straight reference to it, not only having it in the list.<br><br>As the player isn't just a regular object but a very specific and central one (as all the userinput normally applies to it), using a list only would be a very bad idea performance wise.<br><br>Using the list for operations is a good idea if you have for example several enemies (like in a space invader game as easy to understand example), so you can calculate the behavior of all enemies in the enemylist for one after another. As you need to do this for all enemies in the list, using the list is a good idea, as it does not have an "useless operation" overhead anymore. As well you can dynamically create new enemies without thinking about new variable names etc. <br><br></td></tr></table><br>
<a name="636233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ant</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats great, thanks for clearing that up. <br><br></td></tr></table><br>
<a name="636344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> using a list only would be a very bad idea performance wise. <br></div>No it wouldn't. There is no way you will be able to detect even the slightest measurable difference between the two. <br><br></td></tr></table><br>
<a name="636437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have 100 entries and need exactly the player entity from ships to apply the user input, then it definitely is as you first need to find it.<br>Lists are great if you do perform stuff to the list as whole but not if you need one specific objet from the list. (Sure you could put the player at the first position, but as you have to retrieve it over and over again the code structure is cleaner using a global player reference)<br><br>If you have something you exactly need one specific, you already know when start searching, then TMap is far better performance wise. <br><br></td></tr></table><br>
<a name="636438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> then it definitely is as you first need to find it. <br></div>Not if it's always the last element in the list.<br><br><div class="quote"> If you have something you exactly need one specific, you already know when start searching, then TMap is far better performance wise. <br></div>Well it is with regards to searching, but not to inserting and removing (or iterating). Depends on what kind of operations you're doing. Generally, even with 100 elements in the list, you're not going to see a significant difference between a 'constant' search (array or global), and a 'linear' seach (list) unless your target is a 10Mhz 386. <br><br></td></tr></table><br>
<a name="636479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> list and array are both linear searches.<br>But from your answer, I get that you do not have the least idea of what TMap is or does. <br><br></td></tr></table><br>
<a name="636507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LosButcher</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the way I see it:<br>An arary use constant time as it know where to look in the memory like: something[i] , it should look at the spot of 'i'. Inserting to an array is constant IF there is room in the array. Removing is also constant but does not free the memory. Then you have to make the array smaller wich is very peformance consuming.<br><br>The TMap also has liniar search as you have the a key wich determines the place to look for the object. Iterations is slower at you dont have ref from object to object. Inserting and removing is slower at it has to rebuild the map.<br><br>In a List you have to go through the list until you get a mach, making the search liniar.<br>Inserting to a list is constant as you just put a ref to the last object and removing is constant efter you found the object to remove. <br><br></td></tr></table><br>
<a name="636526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Array only has constant if you know the index.<br>The counterpart is that Array create an overhead when you need to dynamically resize them (intelligent system do a resize to x2 or /2. TBank actually uses a similar overallocation strategy as well as it saves you very much time in average case)<br><br>TMap is implemented as a binary tree, this means not O(n) but O(log n) for searching , which is not linear.<br><br>List: Only insert is constant, the other have O(n) as both have the search operation involved which has O(n) as you stated.<br><br><br>But again: My point is, that if you have 1 specific object that is used over and over again (for example the player object), its a lot of overhead to retrieve it over and over again if you have to apply user input! (I don't say, that you shall not put it into the list! Because physical stuff etc are calculated for all dynamic objects in the exactly same way so there the object needs to be in the list. But only operating on the list is what I do not think is a good idea. While retriving might be doable in constant time, its still a higher constant than using straight the reference) <br><br></td></tr></table><br>
<a name="636537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to have a lot of objects on a list before searching through them rather than accessing one directly makes a difference. Even then you can can exit once the object is found.<br>However, I agree that saving a much-used object link away for reuse is 'handy'. <br><br></td></tr></table><br>
<a name="636548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Haramanai</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using only arrays.<br>To remember an object I just store an int of the position of the object in the array.<br>I use loops only when I need O(n) activity to be done by the Objects. And ussaly I am creating AABB trees to have the minnimum search when I am working with coordinates. Also a good practice is to check the double distance of the objects to check witch one is nearer to the target. <br><br></td></tr></table><br>
<a name="636647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Smurftra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> All this discussion brings to me a question and i figured here is the place to ask it instead of creating a new thread:<br><br>I personnaly dont like TLists.<br><br>For my project, i have the graphic engin, which stores all the data and methods pertinent to graphics.<br><br>So i have an array of images, animations, movement scripts.<br><br>This way, i can setup a sprite this way:<br><br>MySprite.Init(Images[imgFrog], [Animations[aniJump], Movements[movJump])<br><br>So i have a direct access by a key or ID to the elemnt i want.<br><br>So right now i dynamically work with my arrays by slicing them 1 element bigger when adding and 1 element smaller when removing)<br><br>My question is: Should i be using TMaps instead? Is that what they are usefull for? Is it faster than what i'm doing?<br>Under what conditions?<br><br>My thought: Since i load everything at the start of the game, i think the array is faster, but if i was to load/unload alot during gameplay, then i should switch to TMaps? Is that correct?<br><br>thanks,<br><br>Smurftra <br><br></td></tr></table><br>
<a name="636652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> No it would not be faster I fear. If you know the ID, then arrays are the fastest possibility solution as you have a direct access.<br><br>TMap's strong point is searching a given key within a set and thats what I use it for: Save data according their name which might be used at some point. Thats for example a very good idea (at least I think so) is using it if you have objects and need a search functionality. <br><br></td></tr></table><br>
<a name="636665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Smurftra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> So if i was to keep loading/unloading all the time during game, tmap would increase the speed of that portion, but decrease the speed of retrieving the object.<br><br>thats how i understand it. <br><br>TMap is basically like a Collection or Dictionnary in Visual Basic.<br><br>Thanks for the info Dreamora <br><br></td></tr></table><br>
<a name="636801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> list and array are both linear searches. <br></div>I meant to say access, obviously. With the array you can have the index, so it is effectively equivalent to your 'global' except more likely to be cached.<br><br><div class="quote"> But from your answer, I get that you do not have the least idea of what TMap is or does. <br></div>Funny, because that's the same impression I get. Isn't that wonderfully argumentative? Oh and by the way, TMap is an Associative Array, not a BST.<br><br><div class="quote"> My question is: Should i be using TMaps instead? Is that what they are usefull for? Is it faster than what i'm doing? <br></div>No. What you're looking for is a HashMap.<br><br><div class="quote"> Under what conditions? <br></div>Under conditions where you change a lot of data around frequently and it needs to be kept sorted.<br><br><div class="quote"> TMap is basically like a Collection or Dictionnary in Visual Basic. <br></div>Well I don't know about VB terminology, but yes. Dictionary and Associative Array are different names for the same ADT. <br><br></td></tr></table><br>
<a name="636867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Oh and by the way, TMap is an Associative Array, not a BST. <br></div><br>No, it's both. <br><br></td></tr></table><br>
<a name="636883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No, it's both. <br></div>A BST can, by definition, have 'equal' elements. An associative array cannot. Neither can TMap. <br><br></td></tr></table><br>
<a name="636986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, that's not correct, BSTs may be designed to allow duplicate entries, but it's not a requirement. <br><br></td></tr></table><br>
<a name="637234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Smurftra</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there hashmap modules included in blitzmax? <br><br></td></tr></table><br>
<a name="637515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, not so far.<br>There are other core "structures" missing as well so far so we perhaps should build up those.<br><br>Is there a page dedicated to that? I don't like the modules board that much, its crowded and the search functionality is next to useless. <br><br></td></tr></table><br>
<a name="637993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is very context heavy - there are places were arrays<br>are best suited to problem, and places were lists or maps<br>are better suited..the idea that you should use one type<br>of storage solution for all your problems is jst madness..<br><br>which system do you feel more comfortable using?, which<br>one best fits the problem your trying to solve?  does the <br>code your working on really need to be optimised?<br><br>..good design is good design.... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
