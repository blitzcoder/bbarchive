<!DOCTYPE html><html lang="en" ><head ><title >Defining array size on the fly</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Defining array size on the fly</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Defining array size on the fly</a><br><br>
<a name="1083912"></a>

<a name="1083913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey everyone!<br><br>I recently picked up Blitzmax again... I'm 18 now but I used to code in Blitzmax when I was like 11-12. Yeah, I started kinda young lol. I feel like I definitely have a better grasp on a lot of basic concepts now :P.<br><br>Long story short, I've been working through iterations of a basic 2D rect-collision based engine. I'm just trying to get back into the flow of Blitzmax, learn some stuff I didn't know before, and relearn what I DID already know. The problem I've been having, though, seems ridiculously easy though that I'm PROBABLY just missing something obvious.<br><br>I have a type (called TMap) which has an array as one of its fields. Fairly standard, right? But I didn't want to define the dimensions of this array until an instance of TMap has been created. I thought, "no problem, I'll just check the documentation on how to do this!"<br><br>The documentation gave me, of course, this:<br>"Arrays may also be created 'on the fly' using the syntax:<br><br>New [ Dimension1 , Dimension2 etc... ]<br>This returns an array of the specified dimension(s) with each element initialized to Null. For example:<br>Local int_array:Int[]<br>int_array=New Int[10]"<br><br>That's perfect! So I tossed it into my code, like so:<br><br>Field tilearray:TTile[]'This is located with all the other fields for TMap. TTile is another type, which is defined just after TMap in my source code.<br><br>Then, in my init:TMap() method...<br>tilearray = New TTile[xcount, ycount]<br><br>I got the following error:<br>"Compile Error<br><br>Unable to convert from 'TTile Array' to 'TTile Array' "<br><br>xcount and ycount are two other fields in my TMap type. Not that it matters. When I first hit the error, I started substituting both my variables and the TTile type with constant numbers and 'int', respectively. No luck.<br><br>The problem comes up even when I C&amp;P the actual example into my code. It runs fine in its own program though. So the problem's gotta be somewhere else in my code, right? Except that removing the trouble line solves the problem. What am I missing?<br><br>edit: Also, if it helps any, I get an error when I try calling "map.init()" as well. It says "Identifier 'init' not found". Init() is definitely a method in my TMap type, and 'map' is definitely an instance of TMap and I definitely created it.<br><br>Thanks,<br>Nate<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1083930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can do it like this:<br><pre class=code>
field tilearray:Ttile[xcount,ycount] 
</pre><br>or like this:<br><pre class=code>
field tilearray[,] = new TTile[xcount,ycount]
</pre> <br><br></td></tr></table><br>
<a name="1083963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks, I'm not getting the error anymore. Buuuuut, I don't get why that fixed it since the documentation example didn't work in my code either. Also I'm still getting an error trying to call map.init().<br><br>map = New TMap<br>map.init()<br><br>I see nothing wrong with these two lines..... lol.<br><br>Thanks!<br>Nate <br><br></td></tr></table><br>
<a name="1083979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need to call the init function, didn't even know it existed! It's enough to create a new TMap, just start using! <br><br></td></tr></table><br>
<a name="1083994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Init() is my own method. I use it to set up the object's properties. In this case, things like the number of tiles, assigning a TTile object to each element of the array I was having trouble with, stuff like that. But for some reason the compiler isn't recognizing the method even after I've created an instance of TMap! <br><br></td></tr></table><br>
<a name="1084014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> map:tmap=new tmap <br><br></td></tr></table><br>
<a name="1084015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> See how did I miss that? I had it before lol. Thanks guys =).<br><br>Nate <br><br></td></tr></table><br>
<a name="1084016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> z80jim: There's already a type defined call "TMap".  It's a map for mapping keys to objects provided by blitz, and unless you force your code to NOT include it using specific a "framework"/"import" it'll be included by default, meaning..<br><br><pre class=code>
map = New TMap
map.init()
</pre><br><br>won't work because the blitz TMap has no init() method.  <br><br>The easiest thing to try is renaming your TMap to TGameMap or something. <br><br></td></tr></table><br>
<a name="1084020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I definitely did NOT know that. I've been using it before without any problem though... I must automatically be overriding it? This is actually my third iteration of the same general 2D concept, starting fresh each time. TMap hasn't given me any trouble yet. <br><br></td></tr></table><br>
<a name="1084029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think TMap has been in Blitz since the very beginning, but now it is definately part of the standard language so you'll need to name your type something else I'm afraid. <br><br></td></tr></table><br>
<a name="1084060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >z80jim</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for letting me know! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
