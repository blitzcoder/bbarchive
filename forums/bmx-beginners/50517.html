<!DOCTYPE html><html lang="en" ><head ><title >ReadString nonsense</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ReadString nonsense</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >ReadString nonsense</a><br><br>
<a name="562243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just don't get ReadString in Blitzmax.<br><br>In Blitz 3D/2D you did :-<br><br><pre class=code>ReadString(f$)</pre><br>But now in Blitzmax you have to specify the size as well. <br><br><pre class=code>ReadString(f$,&lt;stringsize&gt;)</pre><br><br>What's that all about?<br><br>I've got a load of oldskool Blitz strings I want to read in Blitzmax and I can't because I need to know the size. But that's an anomoly in itself because I don't know the sizes of any of the strings until I've read them and I need to know the size before I can read them. WTF! DOH! <br><br>AAAAAAAAAAAARRRGGGGGGGHHHHHHH!!!  HELP! ;) <br><br></td></tr></table><br>
<a name="562249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboommax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
fileout = WriteFile("test.txt")
	WriteString(fileout,"pies")
CloseFile(fileout)

filein = ReadFile("test.txt")
	tmpsize = Readint(filein)
	Print ReadString(filein,tmpsize)
CloseFile(filein)
</pre><br><br>fixed :P <br><br></td></tr></table><br>
<a name="562285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That won't work (for anything but strings that are 4 characters long). <br><br></td></tr></table><br>
<a name="562287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try:<br>Function Old_ReadString(file) <br>	Local size = Readint(file)<br>	Return ReadString(file,size)<br>End Function <br><br></td></tr></table><br>
<a name="562290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll give it a whirl. Cheers dude. <br><br></td></tr></table><br>
<a name="562308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it threw me at first too.  I have no idea why they'd butcher it like that, but whatever...<br><br>I wrote some wrapper functions for readstring/writestring and moved on. <br><br></td></tr></table><br>
<a name="562309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> While Not eof(configFile)<br>Local line:String = readline(configFile).Trim()<br>...<br>wend <br><br></td></tr></table><br>
<a name="562337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... yeah, thanks. <br><br></td></tr></table><br>
<a name="562348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep it works. Thanks :) <br><br></td></tr></table><br>
<a name="562352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, obviously it works.  I can read the documentation too.<br><br>However that doesn't explain why writestring/readstring are broken.  There's still a problem there. <br><br></td></tr></table><br>
<a name="562462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> They're not broken. On Unix, strings are stored as an array of bytes followed by a null character, zero. So the string "ABC" would be bytes 65 66 67 0. On windows strings are stored by a size followed by the string. So the string "ABC" would be bytes 3 0 0 0 65 66 67. ( I think the size is 4 bytes long but im not sure. ) Anyway, C obviously uses the Unix format, and all BMX programs are built around imported C code, so they probably follow standards of C.<br><br>[EDIT] Also a lot of C functions require you to put in a size. For example, read() takes 3 arguments: file descriptor, buffer pointer, and number of bytes to read. <br><br></td></tr></table><br>
<a name="562465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are "broken" in the sense that they don't work like their Blitz3D equivalents (and hence everyone who upgrades from Blitz3D has to stumble over this bump in the road), not that they are actually broken in terms of code. <br><br></td></tr></table><br>
<a name="562466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> They're not broken. They're just different. If you look at WriteBytes and ReadBytes they're the same way. Just use the function that Beaker posted. <br><br></td></tr></table><br>
<a name="562613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I swear, it's like talking to a wall.<br><br>They don't work like their Blitz3D counterparts.  This is confusing for anyone (ANYONE) moving up to BlitzMax from Blitz3D.  Hence, they appear broken.<br><br>I'm not sure what part of that is confusing for you and, frankly, I'm done trying to explain it to you. <br><br></td></tr></table><br>
<a name="562634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I don't like is that you write a string and what you do instead is write an int and then an old skool string when quite clearly you haven't done that in code yourself. (Writing an int first)<br><br>What would've helped for me is if the Documentation explained what the size parameter was used for as currently it doesn't tell you anything, even a compilable of source code would've been nice. As when you convert your code from old skool to Blitzmax this totally baffles you considering you didn't need it before. <br><br>A tricky one if you're not expecting it. <br><br></td></tr></table><br>
<a name="562797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hear you ENAY, will update the docs. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
