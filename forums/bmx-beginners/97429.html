<!DOCTYPE html><html lang="en" ><head ><title >Grid occupied tiles?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Grid occupied tiles?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Grid occupied tiles?</a><br><br>
<a name="1132183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've flipped through a lot of these forums and Googled up plenty on tile mapping. I just don't see any clear information on how to be able to move things within a small grid, without putting them on top of existing objects or certain tiles.<br><br>If I move a playing piece to another and there is a piece there, I want to say that piece can't move to this square. If I spawn a monster and there is a monster on the square, I want it to find another find another square within CERTAIN limits of the entire grid. The grid is 4x4, but I only want monsters to spawn in the top 4x4.<br><br>I'm trying to sort out lists and arrays, but they don't seem to be helping me functionally because while I can add things to them, I don't seem to be able to retrieve anything from them usefully other than creating new types from the list or Foreach, then do this type stuff. Am I thinking wrong in that I could put each piece's root cords in a list or array and be able to have pieces scan this list or array? <br><br></td></tr></table><br>
<a name="1132228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> can you post a minimalist example of what you are trying to do. I am having a bit of a problem trying to understand how you are setting your grid system. In theory what you are trying to do seems very straight forward so I don't see the problem. Post it in code or in pseudocode form whichever is best for you as long as it's easy to understand. <br><br></td></tr></table><br>
<a name="1132242"></a>

<a name="1132244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Psuedocode:<br><br>My tilemap creates a plain 4x10 Grid with 64x64 tiles.<br><br>Self explanatory I would think.<br><br>It then places my Players  on the bottom 4x4 of this grid based on 64x64. that move similar to chess pieces.<br><br>Type Player1 = New Player<br><br>Method Draw()<br>positionx = 64<br>positiony = 448<br>EndMethod<br><br><br>Type Player 2 = New Player<br><br>Method Draw()<br>positionx = 128<br>positiony = 448<br>EndMethod<br><br>Type Player 3 = New Player<br><br>Method Draw()<br>positionx = 64<br>positiony = 512<br>EndMethod<br><br>Type Player 4 = New Player<br><br>Method Draw()<br>positionx = 128<br>positiony = 512<br>EndMethod<br><br>During the Player Turn phase you have the ability to move your Player pieces around their bottom 4x4 of the 4x10 grid. This was easy  to limit with Mouse/64*64 tricks.<br><br>What I can't figure out is how to let Player 1 know that Player 2 is already at 128,448 so it cannot move there.<br><br>Now I understand a procedure I've seen people use where it flags a tile "occupied" with a simple 1 or 0 check. This is going to be problematic for my system for a couple reasons. Mainly because my Players have attacks based on columns and rows within the 4x10 grid. Would look something like:<br><br><br>Function PlayerAttack()<br><br>       GetEnemyPosition  (lets say this finds Enemy at  64,64)<br>       EnemyHealth - 100<br>       If EnemyExistsPositionX = 128, 192,256<br>       EnemyHealth - 100<br>       EndIf<br>EndFunction<br><br>This horribly demonstrated attack would attack an entire Row of Enemies on the grid.<br><br>I can't figure how to find an enemy exists at 64,64, much less tell it to also attack 64,128 + 64,192+64,256 if an enemy exists there as well.<br><br>Essentially: I need a way to find out the X,Y of a player OR enemy before actions can take place between my players or enemies. <br><br>Right now the only way I've gotten around this is hard coding some weird and incredibly long x,y checks on multiples of 64. I know that is the incredibly long and broken way to do this.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1132258"></a>

<a name="1132259"></a>

<a name="1132260"></a>

<a name="1132261"></a>

<a name="1132263"></a>

<a name="1132264"></a>

<a name="1132270"></a>

<a name="1132271"></a>

<a name="1132272"></a>

<a name="1132273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> just create your grid of type "Tentity":<br><pre class=code>

grid = new tentity[4,10]

</pre><br><br>this will create a grid of 4x10 of null Tentity objects.<br><br>when you move an entity into the tile position, just assign it like this:<br><br><pre class=code>
         grid[x,y] = enemy1
</pre><br><br>to check if the tile is occupied you just check it like this<br><pre class=code>
        if grid[x,y+1] = null
              grid[x,y+1] = grid[x,y]
              grid[x,y] = null
        endif
</pre><br><br><b>calculate the pixel precision for the entity only for display purpose.</b><br><br>if you are using the  mouse to chose a tile in the maze.<br>you need to figure out in what tile the mouse is on by doing something like this.<br><br>first subtract the position of the maze from the mouse position :<br><br>px = MouseX() - gridPositionx<br>py = mouseY() - gridPositiony<br><br>then divide it by the tile size:<br><br>x = int (px / tileWidth)<br>y = int (py / tileHeight)<br><br>x and y now contain the tile at which the mouse is located.<br><br>if the maze is shifting positions of the screen just add the number of tiles shifted  across and down to the x and y respectively. <br><br>I hope this helps.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1132268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you yet again, Jesse. I understand this concept and will try to get it into my code.<br><br>I was looking through all the tutorial for Arrays and Lists, but they only explain how to use "Bob", "Tom", etc as strings and its a bit deceptive for someone like that's trying to use it for a greater good. This helps me with that as well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
