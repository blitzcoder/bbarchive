<!DOCTYPE html><html lang="en" ><head ><title >Main Loop - Best Practices</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Main Loop - Best Practices</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Main Loop - Best Practices</a><br><br>
<a name="1093321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blackwater</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, I feel like a total newb for asking this, probably because I'm still a noob! But what does everyone recommend for the main loop? Right now I have a repeat / forever loop, and inside that WaitForEvent for everything. This includes a timer to update update the screen every 60 times per second, mouse and keyboard input, everything. Is this the recommend way to do it? Or should I just do away with the wait for event, update the screen with the "root" loop, and grab the mouse and keyboard input as they come in with SelectEventID()?<br><br>Would love to hear some suggestions. :) <br><br></td></tr></table><br>
<a name="1093433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am a pretty beginner programmer like yourself. What I initially did when I programmed was put a <br><br><pre class=code>
Delay #
</pre> <br><br>inside my main loop to get the timing right with the animations but now as I look back on that I do not want to limit my computer. Instead of:<br><br><pre class=code>
player.x + 10
 
...

Delay 60


'I USE NOW

player.x + 3

...

Delay 0 
</pre><br><br>I figured if I can change the position (to decrease it) and take out the Delay function, I can keep the same game without limiting the cpu. <br><br></td></tr></table><br>
<a name="1093451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redspark</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't go with a constant rate either from a timer or waiting on the vSync Flip(), then you should use a between calculation to determine what frame you are on.  That way, the game appears to have a consistent frame rate for things like animation.  Otherwise, the speed of you animation will change from computer to computer.<br><br>IMHO, it is best to use a constant loop rate if your game is 2D.  Using the vsync page Flip() is often a simple way of doing that.  Even still, it is best to use a 'Tween style approach as vsyncs can be missed during high calculations.  Limiting the CPU usage also cuts down on battery drain of laptops, heat build up in all computers and returns some CPU cycles to the OS for it to deal with its own issues.<br><br>But that's just my opinion.  I'd rather use a hammer where appropriate instead of a Sledge hammer -- especially if it isn't needed. ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
