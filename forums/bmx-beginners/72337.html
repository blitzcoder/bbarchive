<!DOCTYPE html><html lang="en" ><head ><title >RandExcept (rifddle)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >RandExcept (rifddle)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >RandExcept (rifddle)</a><br><br>
<a name="808384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt Merkulov</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you make a function that returns a random integer (int) number in certain range but except one? In example, RandExcept(3, 9, 5) can return 3, 4, 6, 7, 8, 9 with equal chances, but never 5.<br><br>Main limitation is that you only allowed to enter code in one sting after "Return", so it'll be one formula.<br><br>Just interesting.<br><br><pre class=code>
Function RandExcept(v1, v2, ev)
 Return ' Your code must be only here in this line after Return
End Function
</pre><br><br>P. S. This riddle obviously HAVE a solution :) <br><br></td></tr></table><br>
<a name="808389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want Rand(3,9) except 5 then use Rand(3,8) and add 1 if result is at least 5. <br><br></td></tr></table><br>
<a name="808396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jake L.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function RandExcept% (v1%,v2%,ex%)
 if v1=v2 and ex=v1 then RuntimeError ("Use some useful parameters!")
 local res%
 repeat
    res=Rand(v1,v2)
 until res&lt;&gt;ex
 return res
End Function
</pre> <br><br></td></tr></table><br>
<a name="808426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt Merkulov</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jake L.:<br><br>Keep this in mind:<br><div class="quote"> <br>Main limitation is that you only allowed to enter code in one sting after "Return", so it'll be one formula.<br> <br></div> <br><br></td></tr></table><br>
<a name="808428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not possible as a single line but with 2 lines:<br><pre class=code>
Function RandExcept(v1, v2, ev)
 local i:int = rand(v1,v2)
 return i + (i&gt;=ev)
end function
</pre><br><br>Reason that a single line can not work is there as well: you need to know the result of rand before you can work with it! <br><br></td></tr></table><br>
<a name="808431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jake L.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, read over that. Is there any reason for this (kind of strange) limitation you set yourself? <br><br></td></tr></table><br>
<a name="808473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there any reason for this (kind of strange) limitation <br></div><br>It's a puzzle, not a question about useful code.<br><br>At first glance it seems impossible. I can think of some tricks that suggest there may be a solution, although I have not found one.<br><br>For example, you could shift the values up to the top of the range of 32-bit integers. The idea is to have some of them "overflow" to negative numbers. This breaks the sequence into two pieces, rather like the excluded value. But I don't see a way to extend this idea to a solution to the original puzzle. <br><br></td></tr></table><br>
<a name="808520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it !<br><br><pre class=code>
' The idea is to generate equally spaced double precision
' numbers with a gap very slightly larger than 1. Values are
' converted to integer with Floor.

' The gap must be carefully chosen so that excl is missed.

' Suppose the numbers were 3.97, 4.99, 6.01, 7.03, where the gap is 1.02.
' The Floor values are 3, 4, 6, 7 and the value 5 has been skipped.

' Assumes reasonable values: low &lt;= excl &lt;= high   and   low &lt; high.

Function RandEx( low , high , excl )
	Return  Floor( excl + Rand( 1 + low - excl , high - excl ) * ( 1 + 1! / 2 ^ 34 ) - 1! / 2^35 )
End Function

</pre> <br><br></td></tr></table><br>
<a name="808533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function RandExcept(v1, v2, ev)

	Return HiddenRandExcept(v1, v2, ev)

End Function









Private

Function HiddenRandExcept(v1, v2, ev)

 Local i:Int = Rand(v1,(v2-1))
 Return i + (i&gt;=ev)

End Function</textarea> <br><br></td></tr></table><br>
<a name="808563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> *points at H&amp;K*<br><br>Cheater, cheater, cheater...<br><br>Cheater, cheater, cheater...<br><br>H&amp;K???  Heckler and Koch??? <br><br></td></tr></table><br>
<a name="808567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hugs and Kisses.<br><br>Not cheating,<br>1) Works,<br>2) Comforms with condition "Main limitation is that you only allowed to enter code in one sting after "Return" <br><br></td></tr></table><br>
<a name="808631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, but I am guessing that the private function isn't part of one "sting" after return.  But, I am not sure what a "sting" is, so I could be way off base... :) <br><br></td></tr></table><br>
<a name="808695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhans0n</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function RandExcept(v1, v2, ev)
 Return Int(Trim(Replace(" "+String(Rand(v1, v2-1))+" ", " "+String(ev)+" ",String(v2))))
End Function
</pre><br><br>Pretty?  No.  Works?  Seems to.<br><br>To explain, it generates a random number from v1 to v2 minus one.  Then it turns that into a string, and replaces any instance of ev with v2.  I put in spaces around the random number and the replace string just in case the ev was 5 and the randomly generated number was 50.  Then it strips off the spaces and turns it back into an int. <br><br></td></tr></table><br>
<a name="808756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function RandExcept(v1, v2, ev)
	Return [Rand(v1, ev-1), Rand(ev+1,v2)][Rand(v1,v2-1)&gt;=ev]
End Function</pre><br>Pretty? I think so.<br>Works? Yep.<br><br>;)<br><br>The main trick here is to use auto arrays and array indexing to select one value among two possibles ones, based on a third parameter (exactly like the ternary operator in C).<br>Then all you have to do is:<br>- generate two random values in the first (v1 to ev-1) and second (ev+1 to v2) range<br>- select between these two values, based on a random value that can be 0 or 1 and with a probability (of being one or the other) that matches the relative sizes of the two ranges. <br><br></td></tr></table><br>
<a name="808768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function RandExcept(v1, v2, ex)
	Local result = Rand(v1, v2-1)
	If result = ex Then result = v2
	Return result
End Function</pre><br><br>Not as good as those others I know, but I wanted a go ;) <br><br></td></tr></table><br>
<a name="808792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, but he said it had to all be one line on the return line...<br><br>In other words:<br><br>Function RandExcept(v1, v2, ev)<br> Return ' YOUR CODE MUST BE RIGHT HERE ONLY ON THIS LINE<br>End Function <br><br></td></tr></table><br>
<a name="808795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function RandExcept(v1, v2, ex)
	Local result = Rand(v1, v2-1); If result = ex Then result = v2; Return result;
End Function</pre><br>;) <br><br></td></tr></table><br>
<a name="808799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol <br><br></td></tr></table><br>
<a name="808801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ' Your code must be only here in this line after Return <br></div><br><br>:( <br><br></td></tr></table><br>
<a name="808890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhans0n</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis, yours is definitely much prettier than mine, but I think Czar Flavius beats us both.  :) <br><br></td></tr></table><br>
<a name="808892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, but which version is faster? ( No, don't test it, I was being facetious :P ) <br><br></td></tr></table><br>
<a name="808900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhans0n</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guarantee mine is the slowest, and Czar Flavius's is the fastest. <br><br></td></tr></table><br>
<a name="814201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt Merkulov</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd, Koriolis: (cheers) :)<br><br>jhanson: unfortunately, the chances of returned numbers appearance are not equal.<br><br>And here's my variant, based on strings also:<br><br><pre class=code>
For n = 0 To 19
	res1$ = res1$ + RandExcept(0, 5, 5) + ", "
	res2$ = res2$ + RandExcept(0, 5, 3) + ", "
	res3$ = res3$ + RandExcept(-3, 2, -1) + ", "
Next
Print "Test 1, from 0 to 5 except 5: " + res1$
Print "Test 2, from 0 to 5 except 3: " + res2$
Print "Test 3, from -3 to 2 except -1: " + res3$

Function RandExcept(v1, v2, ev)
	Return Mid$(Rand(v1, ev - 1) + "            " + Rand(ev + 1, v2), 12 * (Rand(v1,v2 - 1) &gt;= ev)).ToInt()
End Function
</pre> <br><br></td></tr></table><br>
<a name="814251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhans0n</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matt Merkulov:  They absolutely are equal in my solution.  If you have a range of 1 to 5, and you want to skip 3, you should have a 25% chance of getting 1, 2, 4, or 5.  My solution generates a random number from 1 to 4 (25% chance of each) and replaces all of the 3's with 5's.  If it got any more equal than that, my head would explode. <br><br></td></tr></table><br>
<a name="814442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt Merkulov</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh sorry, I missed this. You're right. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
