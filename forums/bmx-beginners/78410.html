<!DOCTYPE html><html lang="en" ><head ><title >Timage and arrays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timage and arrays</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Timage and arrays</a><br><br>
<a name="879661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is wrong with this.....<br><br><pre class=code>
	Global me:timage[6]

	me[0] = LoadImage("incbin::gfx/circle01.png")
	me[1] = LoadImage("incbin::gfx/circle02.png")
	me[2] = LoadImage("incbin::gfx/triangle01.png")
	me[3] = LoadImage("incbin::gfx/triangle02.png")
	me[4] = LoadImage("incbin::gfx/triangle03.png")
	me[5] = LoadImage("incbin::gfx/triangle04.png")
</pre><br><br>its something silly i know....i just can not figure it... <br><br></td></tr></table><br>
<a name="879668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Global me:timage[] = new TImage[6] <br><br></td></tr></table><br>
<a name="879671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you should have the images declared first:<br>incbin "gfx/circle01.png"<br>the same for all the other images. <br><br></td></tr></table><br>
<a name="879673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> its still coming up with syntax error<br><br><pre class=code>
	Global me:timage[] = New Timage[9]
	
	me[0] = LoadImage("incbin::gfx/circle01.png")
</pre><br><br>images declared......why is this? <br><br></td></tr></table><br>
<a name="879687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> First thing is you don't say what the syntax error is.<br>Second is that the code to reproduce your problem should be so small I don't understand why you don't post it all.<br>Anyway, this works :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 800,600
	Incbin "max.png"
	Global me:timage[] = New Timage[9]
	
	me[0] = LoadImage("incbin::max.png")
    DrawImage me[0],0,0
Flip
WaitKey
</textarea> <br><br></td></tr></table><br>
<a name="879739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> incbin "...."<br>puts the images in your executable code.<br>then to extract the images from your code you need to:<br>loadimage("incbin::........") <br><br></td></tr></table><br>
<a name="879825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok....i figured out why it was not working....this is what i had.<br><br><pre class=code>
Global cb

Type brush

	Global me:timage[] = New Timage[9]
	
	me[0] = LoadImage("incbin::gfx/circle01.png")
	me[1] = LoadImage("incbin::gfx/circle02.png")
	me[2] = LoadImage("incbin::gfx/triangle01.png")
	me[3] = LoadImage("incbin::gfx/triangle02.png")
	me[4] = LoadImage("incbin::gfx/triangle03.png")
	me[5] = LoadImage("incbin::gfx/triangle04.png")
	me[6] = LoadImage("incbin::gfx/circle01_blue.png")
	me[7] = LoadImage("incbin::gfx/circle01_yellow.png")
	me[8] = LoadImage("incbin::gfx/blob_alpha_blue.png")
	
	Function draw()
		SetAlpha 0.5
		DrawImage me[cb], MouseX(), MouseY(), 0
		SetAlpha 1
	End Function
	
End Type
</pre><br><br>I now realise it was giving me a "syntax error in user defined type"<br><br>I was trying to set the values for the array, and i had not made an instance of this type and then declared the array values...<br><br>so if i added a function create().....then declared them it all works....sorry for not having the full story....but thanks for your help..<br><br>or just made the array global to the whole code it works perfectly...<br><br>thanks again <br><br></td></tr></table><br>
<a name="880140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paposo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>You put code inside a type and outside any method or function.<br>Make a method or function for load all images.<br><br>Bye,<br>    Paposo <br><br></td></tr></table><br>
<a name="880392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> and read the documentation on types <br><br></td></tr></table><br>
<a name="880820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok Sorted that, I am just not getting the whole array thing in my head very straight.....this is what I have....<br><br><pre class=code>
Type Tbrush

	Global no:Int, on:Int, getbrush:Int
	Global sx:Int, sy:Int, wx:Int, wy:Int
	Global brushlist:TList = New TList
	
	Field brushmap:Int[]
	
	Function Create(sx,sy,wx,wy)
		b:Tbrush = New Tbrush
		b.wx = wx
		b.wy = wy
		b.brushmap[]=New Int[wx,wy]
		For Local x = 0 To wx - 1
			For Local y = 0 To wy - 1
				b.brushmap[x, y] = (sx + x) + ((sy + y) * 20)
			Next
		Next
		brushlist.AddLast b
		sx = 0; sy = 0;wx = 0; wy = 0
	End Function
	
	Function draw()
		For b:Tbrush = EachIn brushlist
			For Local x = 0 To b.wx
				For Local y = 0 To b.wy
					DrawImage Ttiles.tileimg, MouseX() + x * 32, MouseY() + y * 32, b.brushmap[x, y]
					DrawText "wx= " + b.wx + "  wy= " + b.wy, MouseX() + 12, MouseY() + 12
				Next
			Next
		Next
	End Function
	
End Type
</pre><br><br>compile error expecting identifier is what error i get on the line where i am trying to resize the array.....I am assuming you can resize an array at any point...<br><br>What i am trying to do is make a tiled brush, based on a drag and click off another screen with my tiles on. sx and sy are the starting positions on that page of the tiles and wx and wy are how many tiles wide and high the brush will be in tiles....so i want to be able to make any size brush based on what i click and drag......<br><br>Any ideas what i am doing wrong....... <br><br></td></tr></table><br>
<a name="880830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just found this post......<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=57229#636139" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=57229#636139</a><br><br>So am i now too assume you can only have square fake multidimensional arrays...<br><br>you couldn't have something like array[12][22]<br><br>you would have to have array[12][12].....<br><br>Is there any other way of storing such information like map data..... <br><br></td></tr></table><br>
<a name="880835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is for resizing arrays. If you know their size I think you can use anything. <br><br></td></tr></table><br>
<a name="880837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok i modified it according to that last post....<br><br><pre class=code>
Type Tbrush

	Global no:Int, on:Int, getbrush:Int
	Global sx:Int, sy:Int, wx:Int, wy:Int,ww%
	Global brushlist:TList = New TList
	
	Field brushmap:Int[][]
	
	Function Create(sx,sy,wx,wy)

		b:Tbrush = New Tbrush
		b.wx = wx
		b.wy = wy
		If wy&gt;wx Then b.ww=wy Else b.ww=wx
		b.brushmap=b.brushmap[..b.ww]
		For Local i=0 To b.ww-1
			b.brushmap[i]=b.brushmap[i][..b.ww]
		Next
		
		For Local x = 0 To b.wx - 1
			For Local y = 0 To b.wy - 1
				b.brushmap[x][y] = (sx + x) + ((sy + y) * 20)
			Next
		Next
		brushlist.AddLast b
		sx = 0; sy = 0;wx = 0; wy = 0
	End Function
	
	Function draw()
		For b:Tbrush = EachIn brushlist
			For Local x = 0 To b.wx-1
				For Local y = 0 To b.wy-1
					Print "x= "+x+"  y= "+y
					DrawImage Ttiles.tileimg, MouseX() + x * 32, MouseY() + y * 32, b.brushmap[x][y]
					DrawText "wx= " + b.wx + "  wy= " + b.wy, MouseX() + 12, MouseY() + 12
				Next
			Next
		Next
	End Function
	
End Type
</pre><br><br>this is what i end up with but it gives me a "Unhandled Exception:Attempt to index array element beyond array length" eror at the line in the draw() function "DrawImage Ttiles.tileimg, MouseX() + x * 32, MouseY() + y * 32, b.brushmap[x][y]"<br><br>I am guessing my array hasn't for some reason been sized......<br><br>any ideas.. <br><br></td></tr></table><br>
<a name="880840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi DREAM<br><br>change this line...<br><pre class=code>Field brushmap:Int[]</pre>to this...<br><pre class=code>Field brushmap:Int[,]</pre><br><br>and change<br><pre class=code>b.brushmap[]=New Int[wx,wy]</pre>to<br><pre class=code>b.brushmap=New Int[wx,wy]</pre><br><br>In the code above (four posts up) your not really resizing the array, just replacing it with a new one of a different size.<br>The resizing mentioned on that other thread refers to array slicing, which cant be done on 2d+ arrays. <br><br></td></tr></table><br>
<a name="880849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks REDi....works a treat....just in case anybody else does a search for arrays and resizing....heres what worked for me...<br><br><pre class=code>
Type Tbrush

	Global no:Int, on:Int, getbrush:Int
	Global sx:Int, sy:Int, wx:Int, wy:Int
	Global brushlist:TList = New TList
	
	Field brushmap:Int[,]
	
	Function Create(sx,sy,wx,wy)
		
		b:Tbrush = New Tbrush
		b.wx = wx
		b.wy = wy
		b.brushmap=New Int[wx,wy]

		For Local x = 0 To b.wx-1
			For Local y = 0 To b.wy-1
				b.brushmap[x,y] = (Int(sx/32) + x) + ((Int(sy/32) + y) * 20)
			Next
		Next
		brushlist.AddLast b
		sx = 0; sy = 0;wx = 0; wy = 0
		
	End Function
	
	Function draw()
		For b:Tbrush = EachIn brushlist
			For Local x = 0 To b.wx-1
				For Local y = 0 To b.wy-1
					DrawImage Ttiles.tileimg, MouseX() + x * 32, MouseY() + y * 32, b.brushmap[x, y]
				Next
			Next
		Next
	End Function
	
End Type
</pre><br><br><br>ta......<br><br>Ian <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
