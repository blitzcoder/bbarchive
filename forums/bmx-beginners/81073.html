<!DOCTYPE html><html lang="en" ><head ><title >Running Blitz Full Speed/Drawing Images Offscreen</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Running Blitz Full Speed/Drawing Images Offscreen</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Running Blitz Full Speed/Drawing Images Offscreen</a><br><br>
<a name="913021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. I have a couple of questions:<br><br>1. Is there a way to run one of my programs from the Blitz IDE, so that 99-100% of the processor time is devoted to it - without closing all the other applications (I usually have open down). Would I need to disable the Virus checker as well?<br><br>2. If I draw objects offscreen using the DrawImage command am I right in assuming that nothing will actually happen - I am doing this for a scrolling game. I figured I wouldn't need to do a check to see where the view window is because if Blitz *automatically* didn't draw such objects - then no processor-time would be wasted.<br><br>Thanks for any help :) <br><br></td></tr></table><br>
<a name="913041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2) The GPU will auto clip the objects so there isn't that much of a hit. I did some stress tests a while back and there was a slight performance increase if you recognized an object was off the screen and didn't render it. But it was slight. However, if an object's alpha = 0 then you should not render it. ;) <br><br></td></tr></table><br>
<a name="913044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. I do not think this is possible.  In fact, I don't think it is possible at all.  To not return time slices to any other apps running on the machine?  I doubt it.<br><br>2. Try it and find out.  Would be an easy thing to try.  Draw 2000 images on screen check speed.  Then draw 1000 on screen and 1000 off screen, check speed.  Then just draw 1000 on screen, check speed. <br><br></td></tr></table><br>
<a name="913049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe when you flip(0) most of the time, if not all, is absorbed by the application. I have gotten in to problems when trying to access other applications when running my main applications at full speed with flip(0). Sometimes I have to add a Delay(ms) for it to start giving access to the rest of windows but maybe there is another reason for it that I am not familiar with. <br><br></td></tr></table><br>
<a name="913057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you do a Flip 0 and you don't poll the system for events then you will hog the cpu (core). Even if you do wait for events, you will still hog most of the cpu time.<br><br>Trying to draw an object off-screen takes some cpu and gpu time - the cpu has to send instructions to the graphics card about what to try to draw, and the graphics card has to think about whether any of the pixels are within the viewport. Of course it will clip the graphics since there is no offscreen areas in the backbuffer, but it still has to think about each pixel in the image to see if it's visible. So you do save at least some time if you can void even trying to draw such objects. But it's a matter of how much time you save, and for just drawing a bunch of 2d quads it isn't going to be that significant. <br><br></td></tr></table><br>
<a name="913060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> IH, I am pretty shure delay is how you free time for the cpu for other uses.<br>this is a rip part of the flip command and its how it deals with it:<br><pre class=code>
       .
       .
	Local dt=_syncTime-MilliSecs()
	If dt&gt;0
		Delay dt
	Else
       .
       .
</pre><br><br>just look at the source for flip(). Yes, there is a possibility I am missunderstanding it. <br><br></td></tr></table><br>
<a name="913396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much for all the help<br><br>I've just made a test program and it appears to be a *lot* faster by doing a check to make sure the image is going to be displayed inside the screen boundary before doing a DrawImage call.<br><br>BTW will Flip 1 also absorb all the CPU time (like Flip 0) ? <br><br></td></tr></table><br>
<a name="913455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 2. If I draw objects offscreen using the DrawImage command am I right in assuming that nothing will actually happen <br></div><br>Nope, sadly.  I've tested this in a realtime environment - drawing thousands of images off screen will result in a hit.  Simply wrapping the drawimage command with soemthing that calculates whether the image is in visible boundaries gave me a 100 fps boost.<br><br>Seems to me that something like this should probably be added straight into Max2D really.<br><br><div class="quote"> I did some stress tests a while back and there was a slight performance increase if you recognized an object was off the screen and didn't render it. But it was slight.  <br></div><br>My program suffered a ~20% decrease in speed, I wouldn't call that slight. <br><br></td></tr></table><br>
<a name="913471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Flip 1 will be a bit friendlier to the operating system. If it has to wait for the vertical blank then it sits in its little loop (which someone pasted above) and if it's not time to do the flip yet it gives control to the o/s to do other tasks. So yes it's friendlier than Flip 0. Flip -1 is friendly too. Otherwise you can just use Delay 1 to give the o/s a little bit of time. <br><br></td></tr></table><br>
<a name="913606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok - Thanks :)<br><br>Yes it would be good - Hotcakes- if the DrawImage command automatically did these checks - but maybe they would slow down DrawImage commands that are inside the screen boundary - especially if you were drawing a large number of objects. <br><br>I got a similar result to you performance-wise when I added the checks. <br><br></td></tr></table><br>
<a name="913608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maybe they would slow down DrawImage commands that are inside the screen boundary <br></div><br>Well, it's just a few extra checks to the width and height of the image and the screen res for each call.  Of course that's not free.  I couldn't see it being too expensive, though I havn't done any tests on a game that doesn't draw images off screen. <br><br></td></tr></table><br>
<a name="913770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "My program suffered a ~20% decrease in speed, I wouldn't call that slight."<br><br>Interesting. In my tests I had 1000's of objects, but not 1000's at a time being rendered off screen. I do stand corrected, because at that point if you have 100's of objects being rendered off screen that will indeed take a hit.<br><br>I could see some kind of space game where there are lots of ships, planets, etc, flying around and in that scenario it would be better to compute the size of the objects taking into consideration scale, etc, etc, and if they are completely off screen don't render them. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
