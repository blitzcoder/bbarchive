<!DOCTYPE html><html lang="en" ><head ><title >Method compare. Why it behaves like that?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Method compare. Why it behaves like that?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Method compare. Why it behaves like that?</a><br><br>
<a name="661625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I dont understand whats going on while using  method compare.<br><br>In short:<br>I put Image instances in the imagelist<br>Draw images in imagelist on screen <br>Call "Method collide"<br><br>Works, i click on that images on screen and they get removed.<br><br>The Problem:<br>It only works if i dont have "Method compare" in my Type. <br>With "Method compare" in Type Image:<br>Imagescollide gets true but it doesnt listremove the images i have clicked on (but removes other images).<br><br>I dont even call "method compare" by myself.<br>And shouldnt it just return the int value of "muh-s.muh"?<br>If "Method compare" would mix up some fields or Imagelist, why everything is drawn correctly on screen (loops through imagelist and draws them)?<br><br>Any compare gurus out there?<br><br><br><br>type Test<br>field imagelist:tlist=new TList<br>end type<br><br>type Image<br>Field Bitmap<br>Field X=random<br>Field Y=random<br>Field muh<br><br>Method compare(obj:Object)  <br>          Local t:tile = tile(obj)<br>          If t=null Then Return 1<br>          Return muh - t.muh<br>End Method<br>End Type<br><br>Method collide<br>For i:image=eachin Test.imagelist<br>if imagescollide (mousecursor,  i) then <br>ListRemove test.list, i;<br>endif<br>next  <br>end method <br><br></td></tr></table><br>
<a name="661627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have overwritten the compare method used by Findlink method, used by list.remove method used by ListRemove function?<br>&lt;edit&gt; I think there's a post by sswift documenting dangers of using compare override.<br>P.S. That's not the code you're using either... is it? <br><br></td></tr></table><br>
<a name="661635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, i wrote that "pseudo" Code only to document my problem a little better:D<br><br>Thank you, looks like i have to find a way to sortlist things by field value without overriding compare method. <br><br></td></tr></table><br>
<a name="661636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might have missed the '?' at the end of my initial response. <br>Post your actual code and somebody can give it a try, see the output and suggest something. <br><br></td></tr></table><br>
<a name="661640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To remove the object from list, the overwritten compare must return 0 if the object is the searched one as TList removes an object basing on compare(otherObject) = 0 <br><br></td></tr></table><br>
<a name="661685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a similar 'error': once I introduced a compare method the only way to eliminate the object is keep track by its link and use the method LINK.remove()... <br><br></td></tr></table><br>
<a name="661869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found this really irritating too. There should be two compare methods. One that is only used by the sort command and can be overridden so that we can have user defined sorts, and another compare method that is used by all the other commands like .Remove(). Is there any sane reason why it is the way it is? <br><br></td></tr></table><br>
<a name="661977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah I found compare problematic too, I touched on it in a tutorial on my site, there really ought to be two types of compare method it think Oddball has a good point. <br><br></td></tr></table><br>
<a name="662150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1.20 introduced a seperate compare function pointer for sorting. (its a function pointer that takes 2 objects and returns an Int that does the same as compare).<br><br>So you can use compare for "remove tests" and the compare function pointer for sorting.<br><br>That happened due to a looooong discussion on the sense or nonsense of using compare for sort and find :-) <br><br></td></tr></table><br>
<a name="662218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have an example of how to do this? I really didn't understand any of that function pointer mumbo jumbo. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
