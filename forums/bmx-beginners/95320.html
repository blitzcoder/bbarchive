<!DOCTYPE html><html lang="en" ><head ><title >Drawing different images (select...case help)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Drawing different images (select...case help)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Drawing different images (select...case help)</a><br><br>
<a name="1097036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to remake a platformer and have a quick question on displaying different images. So its like a megaman game... you can run left and right, jump, shoot, shoot while jumping, climb, shoot while climbing etc. The question I have is what paramaters do I show which image? Do I use 50 flags and if flag 3 and 8 are not null, show this image. I know there is an easier way and maybe select...case can help me? I am looking for your input <br><br></td></tr></table><br>
<a name="1097040"></a>

<a name="1097041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your post is mixing and matching concepts, its really not going to get you any useful answer<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=95110" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=95110</a><br><br>(You may gleem info from the above and other, then come back and ask a more specific question)<br>ie How do I know which direcion mario to draw etc<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! I haven't seen a post like this!! Thanks so much I will take a look at this <br><br></td></tr></table><br>
<a name="1097048"></a>

<a name="1097049"></a>

<a name="1097050"></a>

<a name="1097051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, here is my specific question: can I use select case with a variable within a type that can be directly accessed to draw an image?<br><br><pre class=code>
Type Man
    Field stance
           Rem
           1 = idle
           2 = jump
           3 = run right
           4 = run left
           5 = shoot
           endrem
end type
</pre><br><br>With the select case code:<br><pre class=code>
Function Draw ()

	Select stance
		Case 1
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		Case 2
			DrawImage megaJump:TImage,player.x,player.y,player.frame
		Case 3
			DrawImage megaRR:TImage,player.x,player.y,player.frame
		Case 4
			DrawImage megaRL:TImage,player.x,player.y,player.frame
	End Select 
	
EndFunction </pre><br><br>And this would happen if I did something like:<br><pre class=code>
Function Movement ()
	If KeyDown (KEY_RIGHT) 
		player.stance = 3
		player.x:+2
		
	ElseIf KeyDown (KEY_LEFT)
		player.stance = 4
		player.x:-2
		
	EndIf 
</pre><br><br>Would this be viable?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Would this be viable? <br></div>Very much so.<br>(+-2 seems a bit far per frame) You Could say ADD .1 everyframe stance is 3, Ans have 20substances per direction. But yep nail on the head<br><br><br>(The numbers in first code box, make them Global Const) <br><br></td></tr></table><br>
<a name="1097053"></a>

<a name="1097054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks good to me, Zacho. Use some consts to make your code more readable.<br><br>e.g: (untested)<br><br><pre class=code>const STANCE_IDLE=1
const STANCE_JUMP=2

select (stance)
   case (STANCE_IDLE)

   ...etc....

</pre>Edit... beaten to it by H&amp;K.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes, I know its a bit sloppy, i will clean it up soon. Thanks for the help guys!! <br><br></td></tr></table><br>
<a name="1097057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh wait, another quick question... its out of topic but how can I delay the frame rate within a function (I want to make the sprites flip frames much much slower) without slowing down the game, is that possible? <br><br></td></tr></table><br>
<a name="1097081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Easier to create a new topic for new questions... ;-)<br><br>Anyhoo... how about creating a counter, which you decrement, when it reaches zero, move onto the next frame?<br><pre class=code>
...
   Const flipDelay:Int = 5
   Const maxIndex:Int = 7

   Field count:Int = 0
   Field imageIndex:Int = 0

...

   Method update()

      If Not count Then
         imageIndex :+ 1
         If imageIndex &gt; maxIndex Then
            imageIndex = 0
         End If
       
         count = flipDelay
      End If

      count :- 1

   End Method
</pre><br><br>or something like that...<br><br>Another option is to run the delay off the clock/delta time, so that you are relying on time rather than the frame rate of your game (frame rate is not always guaranteed to be constant) <br><br></td></tr></table><br>
<a name="1097082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could use individual timers for animation speed:<br><br>Each actor has a personal time variable, which ticks with a individual step rate. Only if this time is lower than the current computer time Millisecs() the animation step can rise. Every time the step rises, the time will be adjusted 200 msecs into the future.<br> <br>Here is a symbolic example:<br><pre class=code>
Repeat
    If Player.StepTime&lt;Millisecs() Then
        Player.StepTime = Millisecs() + 200
        Player.Step = (Player.Step +1) Mod Player.MaxSteps
    Endif
    DrawAnimatedImage Image[Player.Stance] , Player.X , Player.Y , Player.Step
    Flip 
Forever</pre>(where... <br>Step = the current animation frame<br>MaxSteps = the number of frames of this animation<br>200 = the step rate: every 200msecs) <br><br></td></tr></table><br>
<a name="1097095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can make stand, move, attack Global images for each type of character. Load these once at game start. Then each type has a currentimage field of type TImage. In the update phase, based on the select case, make the currentimage equal one of the globals. Then in the draw phase you only need one draw statement, using currentimage. You might need to store the number of frames in globals as well and copy this into a field too. <br><br></td></tr></table><br>
<a name="1097124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys! I actually found a timer for bullets in another game I made and successfully imported it to work with frames, so I don't need any more help with the animations ;D. Here's the code if you are curious:<br><br><pre class=code>

Global StartTime:Int = MilliSecs()

....


Function Frames ()

Local CurrTime:Int = MilliSecs()

	
	If CurrTime - StartTime &gt; 150

			player.frame:+1
			
			StartTime = CurrTime
	
	EndIf	
			If player.frame &gt; 2
				player.frame = 0
			EndIf 

	
EndFunction </pre><br><br><br>And here's another question about the Select...Case question I originally asked ;D. I want my idle pose to be displayed if nothing else in my game isnt happening (ie player isnt jumping or moving,etc). I have some finicky code at the moment which works after I jump (I go back into idle position) but not after I run right or left. I am thinking one big select...case function but I have some doubts:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'MEGA MAN REMAKE
Graphics 800,600
AppTitle = "MegaMan [{Gam3rs Unit3}: ZaChO]"
AutoMidHandle(True)
SeedRnd MilliSecs()

Const Gravity:Float = 0.2


Global Jump:Int = 1
Global JumpHeight:Float = 3.7
Global CanJump:Int = 1
Global Falling:Int = 0

Global stance:Int = 1

Global StartTime:Int = MilliSecs()


Type MegaMan 'idle
	Field x,y
	Field frame
	Field stance
		Rem
		1 = idle
		2 = jump right
		99 = jump left
		3 = run right
		4 = run left
		5 = shoot
		EndRem 
EndType




SetMaskColor(0,128,128)


'LOAD IMAGES
Global megaIdle:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdle.bmp",30,36,0,3)
Global megaJump:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJump.bmp")
Global megaJumpL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpL.bmp")
Global megaRR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRR.bmp",30,36,0,3)
Global megaRL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRL.bmp",30,36,0,3)


Global player:MegaMan = New MegaMan 'idle
	player.x = 400
	player.y = 500
	player.frame = 0
	player.stance = 1


While Not KeyHit(KEY_ESCAPE) 
Cls	
		DoJump ()
		Movement ()
		Draw ()
		
Flip 
Wend 


Function Draw ()

	Select stance
		Case 1 'idle
			Frames ()
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		Case 2 'jump
			DrawImage megaJump:TImage,player.x,player.y
		Case 99 'jump left
			DrawImage megaJumpL:TImage,player.x,player.y
		Case 3 'run right
			DrawImage megaRR:TImage,player.x,player.y,player.frame
		Case 4 'run left
			DrawImage megaRL:TImage,player.x,player.y,player.frame
		Default
			Frames ()
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
	End Select 
	
	DrawText"Jump= "+ Jump,10,10
	DrawText"X= "+ player.x,10,20
	DrawText"Y= "+ player.y,10,30
	
EndFunction 
 
Function DoJump ()


	If KeyHit(KEY_SPACE) 
		Jump = 1
		CanJump = 0
	End If
	
	If Jump = 1
		stance = 2
		player.y:-JumpHeight
		JumpHeight:-Gravity
		If JumpHeight &lt;= - 1.0 
			Falling = 1
		EndIf
	End If
	
	If Falling = 1
		player.stance = 2
		player.y:+3.2
		
			If player.y &gt;= 500
						Jump = 0                        
						Falling = 0
						CanJump = 1
						JumpHeight = 3.7
						stance = 1
			EndIf 
	EndIf 
End Function

Function Movement ()
	If KeyDown (KEY_RIGHT) 
		If Jump = 1 Or Falling = 1
			stance = 2
		ElseIf Jump = 0 Or Falling = 0
			stance = 3
			Frames ()
		EndIf 
 
	player.x:+1
	
	ElseIf KeyDown (KEY_LEFT)
		If Jump = 1 Or Falling = 1
			stance = 99
		ElseIf Jump = 0 Or Falling = 0
			stance = 4
			Frames ()
		ElseIf Not KeyDown (KEY_LEFT)
			stance = 1
		EndIf
	player.x:-1
	
	
	EndIf 	
		
 
EndFunction


Function Frames ()

Local CurrTime:Int = MilliSecs()
	
	If CurrTime - StartTime &gt; 150

			player.frame:+1
			
			StartTime = CurrTime
	
	EndIf	
			If player.frame &gt; 2
				player.frame = 0
			EndIf 

	
EndFunction </textarea> <br><br></td></tr></table><br>
<a name="1097129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed that but now working on holding "jump" animation while in air.... <br><br></td></tr></table><br>
<a name="1097131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed =D <br><br>I will be sure to come back with more questions when I hit them. <br><br></td></tr></table><br>
<a name="1097137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use Default in a Select. This will trigger if no Cases are matched. It's a bit like Else in If. <br><br></td></tr></table><br>
<a name="1097141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I was aware of that, I think I have that in my code... Thanks =)<br><br>Fixing up my code and soon-to-be adding in bullet animations or working on the stage next <br><br></td></tr></table><br>
<a name="1097142"></a>

<a name="1097143"></a>

<a name="1097144"></a>

<a name="1097145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Can I suggest a little rework with your logic of handling the movement. I suggest to completely separate the code for handling the keys away from the code that handles the movement and break it down to the smallest sections.<br><br>In pseudo code something like :-<br><br>HandleKeys() 'Set necessary flags for movement / image.<br>HandleMovement() 'You 'could' change flags again here if you wanted/needed.<br>Draw()<br><br>This way you can set the falling/jumping/stance flags according to keys being pressed or idle if none, then in the movement code adjust the characters position, also if the character image needs changing because of the player re-acting with the game level ( falling ) then the image can be changed accordingly again. You may need to introduce another flag to set whether facing left or right to use to select the correct image to display, but it would make the code a lot easier to follow logically in the long run. As the game code grows it will need to be as easy to follow logically as possible. Its quite surprising how you quickly become swamped with trying to follow the codes logic instead of working on the game features.<br><br>EDIT :- If you going to introduce bullets etc then my suggestion above will more than likely be necessary. For eg :- You will need to know which direction the character is facing to start firing bullets in the correct direction.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... thats a very good idea col. I will definetly (and am) be cleaning up my code, thats an interesting way of putting it, I will look into it. I am in the process of un-clogging all of my code now anyway so I am sure it will help! <br><br></td></tr></table><br>
<a name="1097148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'MEGA MAN REMAKE
'Version 0.9

Graphics 800,600
AppTitle = "MegaMan [{Gam3rs Unit3}: ZaChO]"
AutoMidHandle(True)
SeedRnd MilliSecs()



'***********
'All of the constants to make jumping work in-game
Rem
	Gravity = Force of gravity
	Jumping = 1 ; Not jumping = 0
	JumpHeight = Height of jump
	Can Jump? 1 = Yes ; 0 = No
	Falling? 1 = Yes ; 0 = No

EndRem 
'***********
Const Gravity:Float = 0.2
Global Jump:Int = 1
Global JumpHeight:Float = 3.7
Global CanJump:Int = 1
Global Falling:Int = 0


'***********
'Keeps track of time
'***********
Global StartTime:Int = MilliSecs()


'***********
' 'Stances'
' These keep track of what stance MegaMan is in
'***********
Const IDLE = 1
Const IDLE_L = 2
Const RUN_R = 3
Const RUN_L = 4
Const JUMP_R = 5
Const JUMP_L = 6


	'***********
	'Keep this - Don't know why?
			Global stance:Int = 1
	'***********


'***********
'Type MegaMan
'***********
Type MegaMan
	Field x,y 'Coordinate positions
	Field savedX 'Saved X-value 
	Field frame 'Frame
EndType


'***********
'Set mask color to greenish color
'***********
SetMaskColor(0,128,128)


'LOAD IMAGES
Global megaIdle:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdle.bmp",30,36,0,3)
Global megaIdleL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdleL.bmp",30,36,0,3)
Global megaJumpR:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJump.bmp")
Global megaJumpL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpL.bmp")
Global megaRR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRR.bmp",30,36,0,3)
Global megaRL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRL.bmp",30,36,0,3)


'***********
'Create a new player
'***********
Global player:MegaMan = New MegaMan
	player.x = 400
	player.y = 500
	player.frame = 0
	


'***********
'Main Loop
'***********
While Not KeyHit(KEY_ESCAPE) 
Cls	
		DoJump ()
		Movement ()
		Draw ()
		
Flip 
Wend 







'***********
'FUNCTIONS
'***********

Function Draw ()


	'***********
	'Select conditions to draw MegaMan
	'***********
	
	Select stance
		
		'***********
		'If MegaMan is idle, facing right
		Case IDLE_R
			Frames ()
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		
		'***********
		'If MegaMan is idle, facing left
		Case IDLE_L 
			Frames ()
			DrawImage megaIdleL:TImage,player.x,player.y,player.frame
		
		'***********
		'If MegaMan is jumping to the right
		Case JUMP_R 
			DrawImage megaJumpR:TImage,player.x,player.y
		
		'***********
		'If MegaMan is jumping to the left
		Case JUMP_L 
			DrawImage megaJumpL:TImage,player.x,player.y
		
		'***********
		'If MegaMan is running to the right
		Case RUN_R 
			DrawImage megaRR:TImage,player.x,player.y,player.frame
		
		'***********
		'If MegaMan is running to the left
		Case RUN_L 
			DrawImage megaRL:TImage,player.x,player.y,player.frame

	End Select 
	
	
	'***********
	'Debugs
	'***********
		DrawText"savedX= "+ player.savedX,0,0
		DrawText"X= "+ player.x,10,20
		DrawText"Y= "+ player.y,10,30
	
EndFunction 



'***********
'JUMPING - YES!!
'***********
Function DoJump ()

	
	'***********
	'Was spacebar hit?
	'***********
	
	If KeyHit(KEY_SPACE) 
		
			Jump = 1 'Currently "jumping"
			CanJump = 0 'Cannot jump while jumping
	EndIf
			
			'***********
			'Animation problems while jumping in both directions
			'***********
			
			If Jump = 1
		
				If stance = IDLE_L
					stance = JUMP_L
				ElseIf stance = IDLE_R
					stance = JUMP_R
			EndIf 	
		
		
		player.y:-JumpHeight
		JumpHeight:-Gravity
		If JumpHeight &lt;= - 1.0 
			Falling = 1
		EndIf
	EndIf
	
	If Falling = 1
		player.y:+3.2
		
			If player.y &gt;= 500
						player.y = 500
						Jump = 0                        
						Falling = 0
						CanJump = 1
						JumpHeight = 3.7
						stance = 1
			EndIf 
	EndIf 
End Function

Function Movement ()
	If KeyDown (KEY_RIGHT) 
		player.savedX = player.x
		If Jump = 1 Or Falling = 1
			stance = JUMP_R
		ElseIf Jump = 0 Or Falling = 0
			stance = RUN_R
			Frames ()
		EndIf 
 
	player.x:+1
	
	ElseIf KeyDown (KEY_LEFT)
		player.savedX = player.x
		If Jump = 1 Or Falling = 1
			stance = JUMP_L
		ElseIf Jump = 0 Or Falling = 0
			stance = RUN_L
			Frames ()
		EndIf
	player.x:-1
	
	
	EndIf 	
	
		
			
			If Not KeyDown(KEY_RIGHT) And player.savedX &lt; player.x And Jump = 0	
				stance = IDLE_R
			ElseIf Not KeyDown(KEY_LEFT) And player.savedX &gt; player.x And Jump = 0			
				stance = IDLE_L			
			EndIf 					
									
											
 
EndFunction


Function Frames ()

Local CurrTime:Int = MilliSecs()
	
	If CurrTime - StartTime &gt; 150

			player.frame:+1
			
			StartTime = CurrTime
	
	EndIf	
			If player.frame &gt; 2
				player.frame = 0
			EndIf 

	
EndFunction 


Function HandleKeys ()
EndFunction

Function HandleMovement ()
EndFunction </textarea><br><br>^ to know what works while i rework code <br><br></td></tr></table><br>
<a name="1097154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> One of the biggest problems I see, is with the absolute file location in the LoadImage function.<br>If for some reason you want to try it out in a different computer, it will not work.<br>The basic structure should be a main folder where your game executable is, one or several sub folders where your assets(graphics, sounds and data files) should be.<br>and accessed like this from with in the game source:<br><pre class=code>
 LoadAnimImage("images/myImage.png",32,32,0,8)
</pre><br>images is a folder inside the game folder that holds all of the images.<br>this way you can just move the game folder to any computer and it will just work. the way you have it will only be able to run in the computer it was made. <br><br>Not bad if that is what you want though. <br><br></td></tr></table><br>
<a name="1097162"></a>

<a name="1097163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not into posting too much code unless someone is really struggling ( which you're not ), so I'll just give a quick example with pseudo code of what I mean with breaking everything down to smaller sections...<br><br>For the HandleKeys function a suggestion of logic could be :-<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function HandleKeys ()
	If PLAYERSTATE not PLAYERJUMPING and PLAYERSTATE not PLAYERFALLING
		If KeyDown( KEY_LEFT )
			If PLAYERSTATE = FACINGRIGHT
				SetPlayerToFaceLeft 'Just set Flags only
			Else
				MovePLayerLeft 'Just set Flags only
			EndIf
		EndIf
	
		If KeyDown( KEY_RIGHT )
			If PLAYERSTATE = FACINGLEFT
				SetPlayerToFaceRight 'Just set Flags only
			Else
				MovePlayerRight 'Just set Flags only
			EndIf
		EndIf
	EndIf
EndFunction
</textarea><br><br>As you can see it doesn't repeat the same checks and its easy to follow. You can even write 'SetPlayerToFaceRight' in a new function to make the code even easier to follow, but be aware that breaking it down too much can eventually make it more difficult to follow. Then in the HandleMovement function you simply write code to... well... handle the movement including setting the jumping and falling images according to the flags set.<br><br>Don't take the above code literally, like I say it's just a brainstorm of logic only, not actual code.<br><br>Good luck.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Spoke to soon :o... I have a question about your three functions, I have refixed my code but have something like this at the moment. I did what you suggested and have three separate functions but am having trouble with the movement. Before, I had the player move when the corresponding key was hit, and it detected direction pretty well... now I do not know how to call movement through a function, I either get my player sliding across the screen in one direction or not moving at all:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

'MEGA MAN REMAKE
'Version 0.9
Strict 
Graphics 800,600
AppTitle = "MegaMan [{Gam3rs Unit3}: ZaChO]"
AutoMidHandle(True)
SeedRnd MilliSecs()



'***********
'All of the constants to make jumping work in-game
Rem
	Gravity = Force of gravity
	Jumping = 1 ; Not jumping = 0
	JumpHeight = Height of jump
	Can Jump? 1 = Yes ; 0 = No
	Falling? 1 = Yes ; 0 = No

EndRem 
'***********
Const Gravity:Float = 0.2
Global Jump:Int = 1
Global JumpHeight:Float = 3.7
Global CanJump:Int = 1
Global Falling:Int = 0


'***********
'Keeps track of time
'***********
Global StartTime:Int = MilliSecs()

Global STANCE:Int = 1
'***********
' 'Stances'
' These keep track of what stance MegaMan is in
'
'Actions follow this guideline to simplify:
'
'	(ACTION WITH FEET) = This can be IDLE, RUN, JUMP or SLIDE
'   (ACTION WITH HAND) = THIS can be SHOOT or GRAB or (NULL = don't type anything)
'   (DIRECTION) = RIGHT or LEFT
'
'  Thus; [ (ACTION WITH FEET)_(ACTION WITH HAND)_(DIRECTION) ]
'***********
Global DIRECTION = 1 '1 = right; 0 = left

Const IDLE = 1
Const IDLE_LEFT = 2

Const RUN_RIGHT = 3
Const RUN_LEFT = 4
	Const RUN_SHOOT_RIGHT = 5
	Const RUN_SHOOT_LEFT = 6

Const JUMP_RIGHT = 7
Const JUMP_LEFT = 8
	Const JUMP_SHOOT_RIGHT = 9
	Const JUMP_SHOOT_LEFT = 10

Const SHOOT_RIGHT = 11
Const SHOOT_LEFT = 12

Const SLIDE_RIGHT = 13
Const SLIDE_LEFT = 14

Const CLIMB = 15



'***********
'Type MegaMan
'***********
Type MegaMan
	Field x,y 'Coordinate positions
	Field savedY 'Saved Y-value (jumping)
	Field frame 'Frame
EndType


'***********
'Type Bullet
'***********
Type BulletType
	Field x,y
	Field xv:Int = 2
	Field frame
	Field health
	
		'Method Update()
		'	x:+xv
		'		frame:+1
		'			If frame &gt; 2
		'				frame = 0
		'			EndIf 
		'EndMethod 
		
		'Method UpdateL()
		'	x:-xv
		'		frame:+1
		'			If frame &gt; 2
		'				frame = 0
		'			EndIf 
		'EndMethod 		
EndType 



'***********
'Set mask color to greenish color
'***********
SetMaskColor(0,128,128)


'LOAD IMAGES
Global megaIdle:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdle.bmp",30,36,0,3)
Global megaIdleL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdleL.bmp",30,36,0,3)
Global megaJumpR:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJump.bmp")
Global megaJumpL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpL.bmp")
Global megaRR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRR.bmp",30,36,0,3)
Global megaRL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRL.bmp",30,36,0,3)
Global megaSR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShoot1.bmp",40,36,0,3)
Global megaSL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShoot1L.bmp",40,36,0,3)
Global megaRunRS:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShootRR.bmp",31,36,0,3)
Global megaRunLS:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShootRL.bmp",30,36,0,3)
Global megaJumpSR:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpSR.bmp")
Global megaJumpSL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpSL.bmp")

Global bullet1:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/bullet1.bmp",15,13,0,3)
Global bullet1L:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/bullet1L.bmp",15,13,0,3)

'***********
'Create a new player
'***********
Global player:MegaMan = New MegaMan
	player.x = 300
	player.y = 400
	'player.savedY = 500
	player.frame = 0


'***********
'Main Loop
'***********
While Not KeyHit(KEY_ESCAPE) 
Cls	
		Keys () 'Keyboard input
		Movement ()
		Draw ()
FlushKeys()		
Flip 
Wend 






Function Keys ()
	
	If KeyDown (KEY_LEFT)
		If DIRECTION = 1
			STANCE = IDLE_LEFT
		Else
			Movement ()
		EndIf 
	
	EndIf
	
	If KeyDown (KEY_RIGHT)
		If DIRECTION = 0
			STANCE = IDLE
		Else 
			Movement ()
		EndIf
	
	EndIf 

EndFunction 

Function Movement ()

	If STANCE = IDLE
		player.x:+1
	ElseIf STANCE = IDLE_LEFT
		player.x:-1
	EndIf 
	
EndFunction


Function Draw ()

	Select STANCE
		
		Case (IDLE)
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		
		Case (IDLE_LEFT)
			DrawImage megaIdleL:TImage,player.x,player.y,player.frame
		
	End Select
	
EndFunction </textarea><br><br>I think I am mixing up something here but I cannot see it <br><br></td></tr></table><br>
<a name="1097212"></a>

<a name="1097214"></a>

<a name="1097216"></a>

<a name="1097217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think so too.<br>The idea now is that everything is broken now to smaller sections and they need to be handled separately. You could use the movement function as is but you need to either pass in the direction as a function variable, or use a global variable, or write a separate movement function to handle moving left and another movement function to handle moving right.<br><br>EDIT :-<br>Imagine the logic at this small of a level -<br><br>The player is looking right...user presses right...check player is looking right...if so move player else if player not looking right make the player look right...<br><br>That logic can then loop back over itself and covers if the player is looking left,right or idle and the user presses right. First time its run it will check the player direction and if its not facing right then it set a flag to display the right facing image, ( every other time this code is run and the user is pressing right key and the player is already facing right ) if the player is already facing right then set a flag to actually move the player.<br><br>You then do the same but for facing and moving the player left.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, yes you are right, but its fixed, check it out! Ill work on the images code next:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'MEGA MAN REMAKE
'Version 0.9
Strict 
Graphics 800,600
AppTitle = "MegaMan [{Gam3rs Unit3}: ZaChO]"
AutoMidHandle(True)
SeedRnd MilliSecs()



'***********
'All of the constants to make jumping work in-game
Rem
	Gravity = Force of gravity
	Jumping = 1 ; Not jumping = 0
	JumpHeight = Height of jump
	Can Jump? 1 = Yes ; 0 = No
	Falling? 1 = Yes ; 0 = No

EndRem 
'***********
Const Gravity:Float = 0.2
Global Jump:Int = 1
Global JumpHeight:Float = 3.7
Global CanJump:Int = 1
Global Falling:Int = 0


'***********
'Keeps track of time
'***********
Global StartTime:Int = MilliSecs()

Global STANCE:Int = 1
'***********
' 'Stances'
' These keep track of what stance MegaMan is in
'
'Actions follow this guideline to simplify:
'
'	(ACTION WITH FEET) = This can be IDLE, RUN, JUMP or SLIDE
'   (ACTION WITH HAND) = THIS can be SHOOT or GRAB or (NULL = don't type anything)
'   (DIRECTION) = RIGHT or LEFT
'
'  Thus; [ (ACTION WITH FEET)_(ACTION WITH HAND)_(DIRECTION) ]
'***********
Global DIRECTION = 1 '1 = right; 0 = left

Const IDLE = 1
Const IDLE_LEFT = 2

Const RUN_RIGHT = 3
Const RUN_LEFT = 4
	Const RUN_SHOOT_RIGHT = 5
	Const RUN_SHOOT_LEFT = 6

Const JUMP_RIGHT = 7
Const JUMP_LEFT = 8
	Const JUMP_SHOOT_RIGHT = 9
	Const JUMP_SHOOT_LEFT = 10

Const SHOOT_RIGHT = 11
Const SHOOT_LEFT = 12

Const SLIDE_RIGHT = 13
Const SLIDE_LEFT = 14

Const CLIMB = 15



'***********
'Type MegaMan
'***********
Type MegaMan
	Field x,y 'Coordinate positions
	Field savedY 'Saved Y-value (jumping)
	Field frame 'Frame
EndType


'***********
'Type Bullet
'***********
Type BulletType
	Field x,y
	Field xv:Int = 2
	Field frame
	Field health
	
 		
EndType 



'***********
'Set mask color to greenish color
'***********
SetMaskColor(0,128,128)


'LOAD IMAGES
Global megaIdle:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdle.bmp",30,36,0,3)
Global megaIdleL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaIdleL.bmp",30,36,0,3)
Global megaJumpR:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJump.bmp")
Global megaJumpL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpL.bmp")
Global megaRR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRR.bmp",30,36,0,3)
Global megaRL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaRL.bmp",30,36,0,3)
Global megaSR:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShoot1.bmp",40,36,0,3)
Global megaSL:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShoot1L.bmp",40,36,0,3)
Global megaRunRS:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShootRR.bmp",31,36,0,3)
Global megaRunLS:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/megaShootRL.bmp",30,36,0,3)
Global megaJumpSR:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpSR.bmp")
Global megaJumpSL:TImage=LoadImage("C:/Users/Zachary/Pictures/Mega Man/megaJumpSL.bmp")

Global bullet1:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/bullet1.bmp",15,13,0,3)
Global bullet1L:TImage=LoadAnimImage("C:/Users/Zachary/Pictures/Mega Man/bullet1L.bmp",15,13,0,3)

'***********
'Create a new player
'***********
Global player:MegaMan = New MegaMan
	player.x = 300
	player.y = 400
	player.frame = 0


'***********
'Main Loop
'***********
While Not KeyHit(KEY_ESCAPE) 
Cls	
		Logic ()
		
		Keys () 'Keyboard input
		Draw ()
		
Flip 
Wend 






Function Keys ()
	
	If KeyDown (KEY_LEFT)
		If DIRECTION = 1
			STANCE = IDLE_LEFT
		Else
			DIRECTION = 0
		EndIf 
	Movement ()
	EndIf
	
	If KeyDown (KEY_RIGHT)
		If DIRECTION = 0
			STANCE = IDLE
		Else 
			DIRECTION = 1
		EndIf
	Movement ()
	EndIf 

EndFunction 

Function Movement ()

	If DIRECTION = 1
		player.x:+1
	ElseIf DIRECTION = 0
		player.x:-1
	EndIf 
	
EndFunction


Function Draw ()

	Select STANCE
		
		Case (IDLE)
			
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		
		Case (IDLE_LEFT)
			
			DrawImage megaIdleL:TImage,player.x,player.y,player.frame
		
	End Select
	
	
	
	
	
	DrawText"X:"+player.x,0,0
	
EndFunction 



Function Logic ()

	If STANCE = 1
		DIRECTION = 1
	ElseIf STANCE = 2
		DIRECTION = 0
	ElseIf STANCE = 3
		DIRECTION = 1
	ElseIf STANCE = 4
		DIRECTION = 0
	ElseIf STANCE = 5
		DIRECTION = 1
	ElseIf STANCE = 6
		DIRECTION = 0
	ElseIf STANCE = 7
		DIRECTION = 1
	ElseIf STANCE = 8
		DIRECTION = 0
	ElseIf STANCE = 9
		DIRECTION = 1
	ElseIf STANCE = 10
		DIRECTION = 0
	ElseIf STANCE = 11
		DIRECTION = 1
	ElseIf STANCE = 12
		DIRECTION = 0
	ElseIf STANCE = 13
		DIRECTION = 1
	ElseIf STANCE = 14
		DIRECTION = 0
	EndIf
	
EndFunction 	
</textarea> <br><br></td></tr></table><br>
<a name="1097215"></a>

<a name="1097220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Getting there :-)<br>Select Case would be best used in your Logic function. And you only really need to call Movement() once, at the end of the Keys() function outside of any If statements. It will work as you have it. Just pointing it out, can save your fingers from typing :-)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097218"></a>

<a name="1097219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> If select case would work in logic, where should i put my code to draw the sprites?<br><br>Do i just merge the two, is that what you are saying?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097222"></a>

<a name="1097223"></a>

<a name="1097224"></a>

<a name="1097226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need to merge them,<br>I mean<br><br><pre class=code>
Keys()
Logic()
Draw()
</pre><br>also<br><pre class=code>
Function Logic()
	Select STANCE
		Case 1,3,5,7,9,11,13
			DIRECTION = 1
		Case 2,4,6,7,10,12,14
			DIRECTION = 0
	EndSelect
EndFunction
</pre><br>There are optimisations that can be done here using clever math, but save that until you have the concept.<br><br>EDIT :- Also theres no real need to have ElseIf here -<br><pre class=code>
	If DIRECTION = 1
		player.x:+1
	ElseIf DIRECTION = 0
		player.x:-1
	EndIf 
</pre><br>as DIRECTION is either 1 or 0, so<br><pre class=code>
	If DIRECTION = 1
		player.x:+1
	Else
		player.x:-1
	EndIf
</pre><br>would be ok in this part<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahhh, see I didn't know you could do that... THanks for the clever math =) <br><br></td></tr></table><br>
<a name="1097227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe. That isnt the clever math :-)<br><br>using<br><br><pre class=code>
Function Logic ()
	DIRECTION = STANCE Mod 2
EndFunction
</pre><br>is the clever bit :-) <br><br></td></tr></table><br>
<a name="1097231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whats Mod? I  havent seen that before <br><br></td></tr></table><br>
<a name="1097233"></a>

<a name="1097235"></a>

<a name="1097237"></a>

<a name="1097238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Mod' is a standard math function meaning Modulus. Its the whole number remainder after the calculation.<br>In the example 'DIRECTION = STANCE Mod 2', in laymans terms it means...<br><br>'DIRECTION' = the remainder after 'STANCE' is divided by '2'<br><br>In the case of STANCE = 1... 1 divide 2 will give 1 as a result, and STANCE = 0... 0 divide 2 will give 0 as the result.<br><br>EDIT :- As you are using the DIRECTION variable as either 1 or 0, you can use that little optimisation. Don't worry about optimising anything until you have finished the game though. As you will need your code as easy to read as possible remember.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1097246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> ^ Now THAT is fancy!! I think I will pass until I get my code close to working :p Another question (Hope I aren't asking too too many :o)<br>My code is working pretty solid until I am trying to return to an idle pose. I can no longer stop like I did in my messy-code. Does anyone see anything fishy?<br><br><pre class=code>
'***********
'Main Loop
'***********
While Not KeyHit(KEY_ESCAPE) 
Cls	
		
		Logic ()
		Keys () 'Keyboard input
		Draw ()
			UpdateFrame ()
Flip 
Wend 






Function Keys ()
	
	If KeyDown (KEY_LEFT)
		
		player.savedX = player.x
		
		If DIRECTION = 1
			STANCE = IDLE_LEFT
		Else
			STANCE = RUN_LEFT
		EndIf 
	Movement ()
	EndIf
	
	If KeyDown (KEY_RIGHT)
		
		player.savedX = player.x
		
		If DIRECTION = 0
			STANCE = IDLE
		Else 
			STANCE = RUN_RIGHT
		EndIf
	Movement ()
	EndIf
	
  

EndFunction 

Function Movement ()

	If DIRECTION = 1
		player.x:+1
	ElseIf DIRECTION = 0
		player.x:-1
	EndIf 
	
	
	
EndFunction


Function Draw ()

	

	Select STANCE
		
		Case (IDLE)
			
			DrawImage megaIdle:TImage,player.x,player.y,player.frame
		
		Case (IDLE_LEFT)
			
			DrawImage megaIdleL:TImage,player.x,player.y,player.frame
			
		Case (RUN_RIGHT)
		
			DrawImage megaRR:TImage,player.x,player.y,player.frame
			
		Case (RUN_LEFT)
		
			DrawImage megaRL:TImage,player.x,player.y,player.frame
		
	End Select
	
	
	
	
	

	
EndFunction 



Function Logic()
	
	If Not KeyDown (KEY_RIGHT) And player.savedX &lt; player.x
    	DIRECTION = 1
		'STANCE = IDLE
	EndIf
	If Not KeyDown (KEY_LEFT) And player.savedX &gt; player.x
		DIRECTION = 0
		'STANCE = IDLE_LEFT
	EndIf 
	
	
	Select STANCE
		
		Case 1,3,5,7,9,11,13
			DIRECTION = 1
		Case 2,4,6,7,10,12,14
			DIRECTION = 0
	
	EndSelect
	
	
	
EndFunction




Function UpdateFrame ()


'TIMERS
Local IDLE_TIMER:Int = MilliSecs()
Local RUN_TIMER:Int = MilliSecs() 

DrawText "timer: " + (IDLE_TIMER - START_TIME),11,11
	

'***********
'IDLE FRAMES
'***********
	If STANCE = IDLE 
		If IDLE_TIMER - START_TIME &gt; 1040
		
			player.frame:+1
			
			START_TIME = IDLE_TIMER
		EndIf 
	EndIf
	
	If STANCE = IDLE_LEFT
		If IDLE_TIMER - START_TIME &gt; 1040
		
			player.frame:+1
			
			START_TIME = IDLE_TIMER
		EndIf
	EndIf 

'***********	
'RUNNING FRAMES		
'***********				
	If STANCE = RUN_RIGHT 'Or STANCE + RUN_LEFT
		If RUN_TIMER - START_TIME &gt; 150
		
			player.frame:+1
			
			START_TIME = RUN_TIMER
		EndIf
	EndIf 
	
	If STANCE = RUN_LEFT
		If RUN_TIMER - START_TIME &gt; 150
		
			player.frame:+1
			
			START_TIME = RUN_TIMER
		EndIf
	EndIf
		
	
	
	If player.frame &gt; 2
		player.frame = 0
	EndIf
EndFunction 
</pre><br><br>I can bet you its in logic but I don't know what.... <br><br></td></tr></table><br>
<a name="1097249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> by the way, player.savedX is a field in my type that "originally" stored a variable so I could return to normal pose but it doesnt fit in here obviously... <br><br></td></tr></table><br>
<a name="1097250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zacho</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nevermind again, I found and fixed my problem <br><br></td></tr></table><br>
<a name="1097255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> First theres no need to check for KeyDown(...) ( or Not KeyDown() as the case is ) in the Logic() function. Use Logic() to only check flags set by the Keys() function, and use the Keys() only to check for the keys and set the flags.<br><br>Looks like you'll need a flag to allow for STANDINGSTILL? maybe in the DIRECTION, Use DIRECTION = 1 for right, DIRECTION =  -1 for left, DIRECTION = 0 for stationary. You can also use these values in the movement code too, if you think about it :-)<br><br>On a different note - do you know how to use the Debugger features of the MaxIDE ? You can use it to step through your code one code statement at a time and look at all of your variables to what them changing. If you're not using it then you're missing out on an invaluable tool! Start a new thread if you need help with it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
