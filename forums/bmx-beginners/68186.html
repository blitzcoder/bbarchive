<!DOCTYPE html><html lang="en" ><head ><title >saving game data</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >saving game data</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >saving game data</a><br><br>
<a name="761715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >delusan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone explain the basics of saving game data so that it is available the next time the game is played? <br><br></td></tr></table><br>
<a name="761718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> open/create a file. Write the data to it. close the file<br><br>Open a file. read the data from it. close the file.<br><br>Someone is bound to give you a link, or some code. But I would recomend just sitting down and trying to do the above. Even if you then use someonelese code you will understand it better because of the work you put in doing your own <br><br></td></tr></table><br>
<a name="761740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't it get all convoluted with regard to where you are allowed or supposed to store the data, mainly on windows? <br><br></td></tr></table><br>
<a name="761861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No.  Even on Vista a program is allowed to write to its own folder.<br><br>You can of course play it safe and obtain the user's folder or applications data folder and store the information there.  I also make the additional step of using SetFileMode to give read/write rights to all user types after saving the file, as this solved some issues I was having on the Mac and Linux.<br><br>As for the original question, you need to work out which variables, arrays and so on hold the entire game state at any one time and save those to a file.  You then load them all back into the original vairables to restore the game as it was and start your main loop again.<br><br>What you need to save will vary greatly depending on the style of game and whether you can save anywhere or just between levels.  Basically, you will need to save all the information regarding the player (score, lives, level, etc), any enemies (position, energy, etc) and the level itself (or the state of anything that can change).  If you only allow saving between levels, then only the player info and the starting level number is needed.  If you allow saving anywhere, things get complicated in that you will have much more to save. <br><br></td></tr></table><br>
<a name="761918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can your program even write to c:\document settings\profilename\application data\ on winxp/vista?<br><br>Obviously on linux it can write to /usr/username, but is there a generic settings folder like on windows?<br><br>Mac? <br><br></td></tr></table><br>
<a name="761921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>can someone explain the basics of saving game data so that it is available the next time the game is played?"<br> <br></div><br><br>essentially, it depends on what you are trying to save and what you want the player to experience when he/she resumes play.<br><br>besides the file detail mentioned earlier, you could look into the following:<br><br>1. you will probably want to save gamestate. meaning the locations (x,y,z) of all the game assets at the time of the save. Sometimes you might not want to do this. i.e if there are alot of moving enemies in your game, you might not want the player to be able to incrementally save every 3 seconds after killing an enemy.<br><br>2. you'll want to save the game logic. (I.e if a button was pressed that opened a door you'll want the level to load with the door open and button pressed)<br><br>with that said, you might want to have an autosave feature that saves the players progress at certain points (especially after a challengin part) or at least stops and asks (do you want to save now?)<br><br>depending on your level of expertise, you might want to look at Brucey's LibXML module. you can save game to an XML file.<br><br>If your game assets are organized into Types, the Save/Load functions should be easier. as you could just save the Field Data for the game assets. <br><br></td></tr></table><br>
<a name="761949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can your program even write to c:\document settings\profilename\application data\ on winxp/vista? <br></div>Yes.<br><br><div class="quote"> Obviously on linux it can write to /usr/username <br></div>Actually no. Not usually (since there isn't such a directory, and the current user won't have write access - unless they have root privileges). It can write to /home/username tho'.<br><br><div class="quote"> but is there a generic settings folder like on windows? <br></div>Yup. It's called /etc. And there isn't a generic one on Windows. Depending on what you need to do, there are at least 3 Single Points Of Truth as to how you could save such data persistently with Windows.<br><br><div class="quote"> Mac? <br></div>Dunno. Reckon it's the same as on Linux.<br><br>Basically I think that the XML serialization bradford6 is hinting at is probably the easiest solution - although somewhat prone to abuse - if that's an issue.<br><br>Also I suppose you could use SQLLite or something similar if you wanted to use a relational dataset. <br><br></td></tr></table><br>
<a name="761987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can your program even write to c:\document settings\profilename\application data\ on winxp/vista? <br></div><br>A Microsoft page on Vista's restrictions ("User Account Control for Game Developers"):<br><br><a href="http://msdn2.microsoft.com/en-us/library/bb206295.aspx" target="_blank">http://msdn2.microsoft.com/en-us/library/bb206295.aspx</a> <br><br></td></tr></table><br>
<a name="762037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >delusan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> folks - thats a lot of information and much appreciated - however, your levels of expertise are MUCH higher than mine ... i just want to learn to write a save/read back  feature for my modest games ... a what BMax functions are used and how are they used type thing.  I followed up your information with a search and that information + what you have shared with me here enabled me to write my own (rudimentary) code that works in my program.  Much thanks to you all !! <br><br></td></tr></table><br>
<a name="762045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look in the streams module. You'll need to openstream, writestream, readstream to create or ready the file for reading/writing and then the appropriate read/write command for the type of data you want to read/write. <br><br></td></tr></table><br>
<a name="762055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This may be what you're looking for..<br><br>Say you have a game with bricks. You need to load a level that's saved. You create a function for creating the bricks, and you create a function to load from the file. Then you write a parser function which interprets what's in the file and creates the brick from the data. For instance the data in the file could be something like<br>1,100,200,255,255,255:2,400,100,200,200,200. The : forms as a seperator for you when you read it so it's easier to distinguish when a new brick starts and ends. The format is id,x,y,r,g,b in this case. It's pretty simple once you play a bit with it, and don't forget to use openfile and closefile. <br><br></td></tr></table><br>
<a name="762071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> WendellM: Thanks, just what I needed. <br><br></td></tr></table><br>
<a name="762092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to help, Grey.  I was pleased to find that today after all the uncertainty as to exactly what Vista does and doesn't allow.  It'll likely be a while before I get Vista (I'm putting it off as long as practical), but that looks like it fills in the blanks. <br><br></td></tr></table><br>
<a name="762119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah it's nice and specific. <br><br></td></tr></table><br>
<a name="762167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, that document makes interesting reading.  However, some of what it says seems to contradict my own tests...<br><br>I have a simple Space Invaders game that saves a high score table in the same folder as the game.  According to that document, when the game is run from a standard account with UAC turned on, and assuming that BlitzMax apps are running in legacy mode, the high score table should be saved in the virtualised Program Files folder (if there isn't a file already present in the normal folder).  I've just tested this and it creates a new scores file in the same folder as the game!<br><br>So this poses a bit of a question...  Are BlitzMax apps given admin rights and/or are they running in legacy mode under Vista?  Or maybe it's down to the installer I use, which may give the necessary rights to programs saving files in their own folder.  These questions probably should be asked/answered in another thread though, as it's starting to get a little off-topic.<br><br>The question being asked at the top of this is HOW to save games, not WHERE.  Probably confused the poor guy now! <br><br></td></tr></table><br>
<a name="762177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> yah we've hijacked a bit but he seemed to be happy with the answers already.<br><br>Must admit that your saving thing is pretty weird.  Why not just try your app in it's own folder without using an installer? <br><br></td></tr></table><br>
<a name="762221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I have thought of trying to install manually without an installer, but in no rush at the moment.  Simple reason that all my final releases are for the general public, which will all be in installer form anyway.  Having said that, I will try at some point. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
