<!DOCTYPE html><html lang="en" ><head ><title >Portions of an Image</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Portions of an Image</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Portions of an Image</a><br><br>
<a name="879505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Teacup</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>A quick introduction; I'm a late-20's IT worker, I've been coding since I was a young'en and remember Blitz from my days back in Amiga land - it was one of my first languages along with Amiga E.<br><br>I spend most of my coding time delving into the underbelly of C#, PHP and other assorted things for business applications. I recently found out that Blitz had been made over and decided to jump back in. It feels pretty comfortable so far and I'm hoping that it will help me get the game ideas that have been stuck in my head for so many years out into the open.<br><br>So that's me and why I'm here; now my query. :-)<br><br>I have a .png image that has a collection of sprites for a 2D game. I know I could split the file into many files and use a seperate TImage for each one, but I would rather keep them as one file / one TImage and pull out the bits I need when I need.<br><br>On the Code Archives section of this site I found Cower.Drawing which seems like it's meant to do exactly what I want.<br><br>I've added it to my mods directory as appropriate, used bmk to makemod it and used Framework to include it into my game (or at least what will be a game one day.)<br><br>I've set up the DrawImageBlock code as I think it should be, as opposed to the Draw code.<br><br>But then there's a problem. I get an error message complaining about my TImage being a null value (or similar.) To put it short, it doesn't work. I've traced the error down to the initial loading (LoadImage) of my TImage but I'm not sure why.<br><br>If I take out the Cower.Drawing stuff and use Draw instead, I get my whole image and no errors - so I know that code is fine. But the question is, why does Cower.Drawing seem to cause this problem?<br><br>Ultimately, all I want to do is display parts of the image as and when necessary, so if anyone doesn't know the answer to my question but does have an alternative solution, please do show me!<br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="879507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're trying to load an animated character where all frames are the same size and it is all in one image then look at LoadAnimIMage?<br><br>If this is not what you want to do and you just want to grab part of an image to display look at Grabimage and pixmaps. <br><br></td></tr></table><br>
<a name="879509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Teacup</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The second option is what I'm after. I'll take a look. Many thanks. :-)<br><br><br>Update: Solved.<br><br>This works like a charm:<br><a href="http://blitzbasic.com/codearcs/codearcs.php?code=1440" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1440</a> <br><br></td></tr></table><br>
<a name="879519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... but might be slow.<br>Try <a href="/posts.php?topic=73195#818223" target="_blank"> this </a> might help <br><br></td></tr></table><br>
<a name="879528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Teacup</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tony. If you don't mind me asking, why would it be slow in comparison to the DrawImageRect code? <br><br></td></tr></table><br>
<a name="879575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> it has to reload the pixmap from system memory to video memory (i.e. new pixmap to an image/surface) while drawimagerect uses the same surface each time but displays different portions of it. <br><br></td></tr></table><br>
<a name="880484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Teacup</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks tony, I'll go with the way you suggested.<br><br>(Sorry for the delay, ultra busy week!) <br><br></td></tr></table><br>
<a name="882157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceCowboy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If all your sprites are the same size you could use LoadAnimImage and draw the individual sprites by drawing the different frames. You don't have to use it for animated sprites...<br><br>e.g. if you had 100 32x32 pixel sprites..<br><pre class=code>
sprite = loadanimimage ("sprites.png",32,32,0,100,MASKEDIMAGE)
drawimage sprite,x,y,0    ' draws 1st sprite
drawimage sprite,x,y,1    ' draws 2nd sprite
drawimage sprite,x,y,2    ' draws 3rd sprite, etc
</pre><br><br>..dunno if this is better/worse than the DrawImageRect method, or just different.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
