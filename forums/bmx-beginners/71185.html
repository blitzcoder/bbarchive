<!DOCTYPE html><html lang="en" ><head ><title >Mac ini file being ignore yet data saved!?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mac ini file being ignore yet data saved!?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Mac ini file being ignore yet data saved!?</a><br><br>
<a name="795651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is weird, but I'm a Mac noob so maybe you know what's going on.<br><br>I'm compiling my ATOMG demo on the MAc and it has an ini file in the same folder as the exe.<br><br>When I change any settings in the ini file the game is ignoring them.  However, if I change the settings in the game, they are being retained and loaded next time I load the game BUT not in the local ini file - somewhere else instead!<br><br>My game makes a default ini file if it can't load from the ini file so maybe it's doing that, but the question is where?  I've done a finder for AOTMG.ini and the only one it finds is in the same folder as my game.  Are apps on the Mac not allowed to write to folders on desktop or something (this is where my game is), like Vista's UAC - is it virtualising my ini file somewhere else?<br><br>Maybe I've just cocked up the paths, I've used forward slashes everywhere.  The game data loads fine, just not the ini file!<br><br>Thanks for any advice. <br><br></td></tr></table><br>
<a name="795652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops, think it was a problem with my code that checks the file name for "debug" to see if it's running in debug mode - I was looking for ".exe" and not ".app".<br><br>HOWEVER, why the hell is my filename (obtained via AppFile()) like this:<br><br>"/Users/jakebirkett/desktop/BMax Jake/AOTMG/AOTMG.debug.app/Contents/MacOS/AOTMG.debug"<br><br>Basically what the hell is Contents/MacOS/AOTMG.debug doing on the end.  Sounds like some kind of virtualisation.<br><br>Is there a place where I should tell the BMax IDE it's safe to write to in the OS and where my game can safely write ini files etc?  Thanks. <br><br></td></tr></table><br>
<a name="795655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow found out some more.  If I right click on the AOTMG.app I can select "Show Package Contents", this has a several sub folders and eventually I can find the actual end program and of course an ini file sitting in the same folder.<br><br>If I run the program in that folder, I get a Terminal window appearing and the the game runs but the mouse pointer I've made doesn't keep up with the Mac mouse pointer, weirdness.<br><br>All data is read properly and profiles are written to the correct place so I just need to fix how I test if the filename is a debug version or not seeing as that's how I auto-determine the name of the ini file... <br><br></td></tr></table><br>
<a name="795656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK fixed it. <br><br></td></tr></table><br>
<a name="795662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad you've sorted it, but I have been advised in the past that although it's OK to store all your application's resources in the application bundle, it's NOT a good idea to allow the app to write stuff there, i.e. your INI file.<br><br>What I've done in my Rockfall game is to store the INI file and player profiles in the /Users/Shared/ folder, but obviously created a sub-directory of SOS Software/Rockfall - The Return DX/.<br><br>Also, you may want to check AppArgs[], as the first argument passed to the app is the name of the app.  Not sure if this is in a different format to that obtained by AppFile().  I'd check, but I'm not on my Mac at the moment. <br><br></td></tr></table><br>
<a name="795673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> JazzieB: Thanks for advice.  Any idea why writing in the app bundle is a bad idea (Actually I'm not writing in the app bundle, I'm writing in the same folder that the app bundle is in, so at the top level of the app bundle).<br><br>Anyway I may have to change where it writes for Vista, so I'll just use that special folder you mentioned on Mac. <br><br></td></tr></table><br>
<a name="795700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> A good place to put preference type files is either in<br><br>/Users/&lt;user&gt;/Application Support/&lt;app&gt;/...<br><br>or<br><br>/Users/&lt;user&gt;/Library/Preferences/...<br><br>But rather than hard-coding the paths, use the API to get to the folder.<br><br>If you really want to put it in Shared, it should probably go in /Users/Shared/Library/Application Support/&lt;app&gt;/...<br><br>(for &lt;app&gt; you might also do your company name instead, of course).<br><br>:o) <br><br></td></tr></table><br>
<a name="795716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, good advice on the paths front.<br><br>Hmm, however if it's an ini file it should really go in shared in case the user changes as another use may still want to play it.  Also any game profiles should go in shared so that you can see an list when you play the game...also high scores.  In fact there's not much I'd want to store that would be user specific... <br><br></td></tr></table><br>
<a name="795800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry Grey, I misunderstood your post and took it to be that you were writing to within the app bundle itself.  To answer your question though, from what I understand, it all comes down to the file permissions of the running app.  Not sure of the implications, other than it not working as expected, but was advised not to do this in a thread around here somewhere.<br><br>Also, in the same thread I believe, it was also suggested to use the /Users/&lt;user&gt;/Library/Preferences/ folder, but this only seems to be user specific.  In other words, there is no such folder for Shared, which is why I do it the way that I do, which I'm guessing is how you would like to do it also.<br><br>EDIT - Just discovered that there is a /Library/Preferences/ folder, which is not in the /Users/ folder.  Not sure if this works as an alternative to just using the /Shared/ folder, but I would still be inclined to use the latter nonetheless. <br><br></td></tr></table><br>
<a name="795839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, shared folder sounds the way to go for me.  Thanks for the heads up.  Have you any code to retrieve that folder via a system call? <br><br></td></tr></table><br>
<a name="796153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No special API call.  The folder should be present on all Mac's and is always called /Users/Shared/, even when the Mac is set-up for another language.<br><br>If it's not there, then I use Brucey's Special Folder mod to retrieve the user's own folder and store the files there instead. <br><br></td></tr></table><br>
<a name="796157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
