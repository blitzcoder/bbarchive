<!DOCTYPE html><html lang="en" ><head ><title >Can I resize an arry within a function?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can I resize an arry within a function?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Can I resize an arry within a function?</a><br><br>
<a name="683076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edit] resize an ARRAY (of course)<br>And if I can; HOW?<br>I don't mind if the content is destroyed or not.<br>Or do I have to use banks for this purpose?<br><br>Is there a way to figure this kind of stuff out (an easy way) without bothering my fellow Blitzers? Some GOOD documentation somewhere?<br><br>t.i.a. for all your reactions. :) <br><br></td></tr></table><br>
<a name="683077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> read about array Slices .. theres a section in the languages ref page, heres the jist of it...<br><pre class=code>Local a[200]	'initialize a[] to 200 elements
a=a[50..150]	'extract middle 100 elements of a[]
a=a[..50]     	'extract first 50 elements of a[]
a=a[25..]	'extract elements starting from index 25 of a[]
a=a[..]		'copy all elements of a[]
a=a[..200]	'resize a[] to 200 elements

</pre><br><br>I guess if you want to resize within a functon, just pass the array to the function... <br><br></td></tr></table><br>
<a name="683078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Help / Language / Slices in your documentation.<br>Wiki has some good stuff on arrays as well...<br><a href="http://www.blitzwiki.org/index.php/Slices" target="_blank"> Wiki slices </a> <br><br></td></tr></table><br>
<a name="683084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx, but i'm afraid slices won't do.<br>I don't want to create a huge array (just in case)when the "user" just needs a small one.<br>I was thinking more in the line of REDIM, or something.<br>(i'm getting the feeling i can start rewriting things, using banks) or are there other solutions? <br><br></td></tr></table><br>
<a name="683093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> slices *will* do .. what're you affraid of? :P<br><br><pre class=code>
local smurf:int[10] ' &lt;- now 10 smurfs
local gargamel:int=1337
smurf=smurf[..gargamel] ' &lt;- now 1337 smurfs
smurf=smurf[..1] ' &lt;- 1 smurf left :(
</pre> <br><br></td></tr></table><br>
<a name="683099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm afraid I meant resizing a multi-dimensional array.<br>I should have been more clear on that point.<br>Thanks anywho... <br><br></td></tr></table><br>
<a name="683101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can't unfortunately use slices on a multi-dimensional array, you can however use them on an <a href="http://www.blitzwiki.org/index.php/Arrays#Resizing_an_Array_of_Arrays" target="_blank">Array</a> of Arrays <br><br></td></tr></table><br>
<a name="683111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Byteemoz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't need to keep the content, you can also do that:<pre class=code>Local a:Int[,,] ' array variable for a three-dimensional array
a = New Int[2,2,2] ' create small array
a = New Int[99,99,99] ' replace with big array
a = New Int[2,2,2] ' and small again</pre>-- Byteemoz <br><br></td></tr></table><br>
<a name="683155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a way to figure this kind of stuff out (an easy way) without bothering my fellow Blitzers? <br></div>Try it? <br><br></td></tr></table><br>
<a name="683167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abomination</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aah, to try and fail miserably! Story of my life!<br><br>[edit] (as to not to bump) njagnjag...<br>@Byteemoz:<br>That realy works like a charm!<br><pre class=code>	
Global array:Int[,,]  

resize(1,2,3)
resize(4,5,6)

Function resize(A:int,B:int,C:int)
   array = New Int[A,B,C] 	
End Function
</pre> <br><br></td></tr></table><br>
<a name="1036290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since that BlitzWiki link is dead above I thought I'd resurrect this thread since I am looking to do a similar thing.<br><br>I am making a map editor, and I read in a thread elsewhere (I think some suggestions on jesse's map editor) that being able to re-size a map on the fly while editing would be helpful since not everyone knows exactly how large their map has to be before they begin creating it.<br><br>So the map is basically a 2D array of tiles.  I would like it if I could expand the map on the fly by either adding a row or column to the top, bottom, or either side of the map.  Now it sounds like slicing works only for 1D arrays, so can anyone explain a relatively painless way to add in a row or column on any edge of the map?  It's critical that I be able to add the row or column on ANY side, not just the bottom/right sides where the map would expand naturally if I edited the array size.  <br><br>-muffins <br><br></td></tr></table><br>
<a name="1036297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will be slow but ok for one-off use. Store the map in a temporary variable. Then create the map variable afresh, but with bigger dimensions. Then copy the old map back into the new map. Using Ints for example<br><pre class=code>
'creating the map
Global map_x = 10, map_y = 10
Global map:Int[,] = New Int[map_x, map_y]

'resizing the map
Local temp:Int[,] = map, temp_x = map_x, temp_y = map_y
map_x = 20, map_y = 20 'new map size
map = New Int[map_x, map_y]
'copy old map into new map
For Local x:Int = 0 Until temp_x
	For Local y:Int = 0 Until temp_y
		map[x, y] = temp[x, y]
	Next
Next</pre><br>To insert rows at the beginning of the map, simply offset the x and y in the loop by an amount. <br><br></td></tr></table><br>
<a name="1036325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This code makes sense, but it generates a runtime error: Unhandled Exception:Can't insert Null object into list. <br><br>Here's my code:<br><br><pre class=code>
	
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		'Function MapResize()
		'Parameters: 
		'Returns: None
		'Expands or shrinks the map in the direction of the arrow key pressed
		''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
		Function MapResize()
			
			Local temp:TTile[,] = map
			Local temp_x:Int = xMap
			Local temp_y:Int = yMap
			
		
		'Expands the map
			If KeyDown(KEY_EQUALS) And KeyDown(KEY_RIGHT)
				xMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_EQUALS) And KeyDown(KEY_LEFT)
				xMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 1 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_EQUALS) And KeyDown(KEY_UP)
				yMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 1 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_EQUALS) And KeyDown(KEY_DOWN)
				yMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
		'Shrinks the map
			ElseIf KeyDown(KEY_MINUS) And KeyDown(KEY_RIGHT)
				xMap:-1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_MINUS) And KeyDown(KEY_LEFT)
				xMap:-1
				map = New TTile[xMap, yMap]
				For Local x:Int = 1 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_MINUS) And KeyDown(KEY_UP)
				yMap:-1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 1 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			ElseIf KeyDown(KEY_MINUS) And KeyDown(KEY_DOWN)
				yMap:-1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
			EndIf
			
		End Function
</pre> <br><br></td></tr></table><br>
<a name="1036330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I am making a map editor, and I read in a thread elsewhere (I think some suggestions on jesse's map editor) that being able to re-size a map on the fly while editing would be helpful since not everyone knows exactly how large their map has to be before they begin creating it. <br></div><br><br>I store my map's as <a href="/posts.php?topic=90905" target="_blank">relative references</a> so there is no map boundary or array size issues.  Thats non-standard but in your editor environment it removes the "I need more map" problem since you can expand it any time. <br><br></td></tr></table><br>
<a name="1036339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @muffins<br> there is no Tlist execution in that code(function) so the problem is some where else not in that specific part of the program. The problem is that you are moving a null object into a Tlist object and is whats causing the error.<br><br>you know, I like how you are implement the resizing and I might just apply it in mine. OO makes it so easy to implement and modify code.<br><br>[rant]<br>it is interesting how programmers that know how to do something will tell you that their software or applications can do something but don't show sample code or at least some pseudo code. somehow I understand their worries. if they show someone how to do something, how are they going to make money on their creations when every other coder will become a potential business threat. that is not so bad but what really bothers me is that some programmers here will say, you are doing this wrong, my way is better, but dear not show how they do it.  That is not the kind of help us posting in the begginers section need. <br>Those who post in the beginners section don't want someone to brag about what they can do.<br>I would rather not have any comments posted in my thread  than have someone brag about what they can do and not really help.  <br><br>note that I only commented this here because muffins brought an interesting point about a comment that wasn't resolve in a thread that was posted for help in debugging and not for criticism.<br><br>if I offended somebody here I am sorry, it's not my intention but that's how I feel  and if the shoe fits... <br> [/rant] <br><br></td></tr></table><br>
<a name="1036369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll have to agree with Jesse here...while it can be seen as helpful to more advanced programmers that have the capacity to generate the type of code that is being protected, to a beginner, we are no better off than before we posted our concerns.  I'm glad this was addressed, and thank you to everyone who takes time out of their day to help or contribute thoughts to these threads, because they truly do make a difference to not only those who needed the help, but to others who come along and find that they, too, have the same issues while learning.<br><br>@Jesse<br>I did find it strange that the issue was related to a TList, but I figured that for some reason BlitzMax treated an array as a sort of "rigid, indexed" TList, so I thought that's what caused the problem.  Thankfully, my code (found here: <a href="/posts.php?topic=90934" target="_blank">Need help debugging</a>) only invokes one function call of "AddLast" in the entire file, which is where my debugger points me.  Specifically, the block of code is in a Type's function (The TTile type's function UpdateTiles() which gets called every iteration of the main game loop).  The block looks like this:<br><br><pre class=code>
			'This function will clear the drawing queue, cycle through the map array and determine what tiles are currently visible,
			'and then add the visible tiles to the drawing queue
			Function UpdateTiles()
				
				
				draw_list.Clear() 'reset the drawing list
				For Local y:Int = 0 To (yMap - 1)		'For every tile
					For Local x:Int = 0 To (xMap - 1)
						If visible(x,y)		'If the tile is visible, then add it to the end of the list so the tiles in the foreground are drawn last
							ListAddLast(draw_list:TList, map[x,y])
						End If
									
					Next
				Next
				
			End Function
</pre><br><br>Which is peculiar, because it is saying that map[x,y] which is a TTile object is now null.  I'm not sure what is becoming Null within the scope of the MapResize() function. <br><br></td></tr></table><br>
<a name="1036398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it is interesting how programmers that know how to do something will tell you that their software or applications can do something but don't show sample code or at least some pseudo code. <br></div><br><br>I'm guessing that was directed at me?  Anyway, I was just posting a metholodology not a pre-packaged solution.  Once could easily state that its interesting how "new" developers want everything handed on a silver platter too.  Part of learning to code is learning how to implement an idea since ultimately thats what coding is.<br><br><div class="quote"> I understand their worries. if they show someone how to do something, how are they going to make money on their creations when every other coder will become a potential business threat <br></div><br>Bah... thats the paranoid coders perceptions only.  The coders capable of making their own will do so for their own uses if they see an advantage to the method/idea.  Code snippets are no big deal, its when pretty much the whole system needs to be posted to satisfy someone's "questions" that eyebrows raise. And that happens alot... its also a matter of time.  Do people working on their own projects have time to post pseudo code?  Not always, so they post the concept and leave it to newby coder to ask further questions later on if they can't figure it out. <br><br></td></tr></table><br>
<a name="1036410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I'm guessing that was directed at me?<br> <br></div><br><br>not necessarily, you were just the trigger. ;)<br><br><div class="quote"> <br> Once could easily state that its interesting how "new" developers want everything handed on a silver platter too. Part of learning to code is learning how to implement an idea since ultimately thats what coding is.<br> <br></div><br>not always the case and it sure can make it a lot easier not to have to reinvent the wheel every time one sits down to code. Another thing is that when someone post code or pseudo code I 99% of the time do not use it as is. I get ideas from it and modify it or redesign it for my own needs.<br><br>another thing is that one needs to look at how the person in need are coding. I did not see him asking for a free meal as you can see he figured it out by his own means. All he needed was some help figuring out some commands that were not clearly explained in the documentation. <br>Ideas come a dime a dozen and I am sure he has his share of. the question is, does he really need one more undefined solutions?<br><div class="quote"> <br>so they post the concept and leave it to newby coder to ask further questions later on if they can't figure it out. <br> <br></div><br>if you say so but if thats how I feel I usually let them know. I have seen comments in other threads as well as in mine were programmers come throw a stone and hide, never comeback to really help. <br><br>As I said you were just the trigger. <br><br></td></tr></table><br>
<a name="1036490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skully did give a link to some more information about his method which is nice of him. <br><br></td></tr></table><br>
<a name="1036499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> :)<br>you are a good guy Czar. <br><br></td></tr></table><br>
<a name="1036618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> bump <br><br></td></tr></table><br>
<a name="1036736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I revised my code a bit and for the expansion part of it, this is what I have:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
				Function MapResize()
			Local temp:TTile[,] = map
			Local temp_x:Int = xMap
			Local temp_y:Int = yMap
			
		
		'Expands the map
		If KeyDown(KEY_EQUALS)
			'Expand rightward
			If KeyDown(KEY_RIGHT)
				FlushKeys()
				xMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
				
				For Local i:Int = 0 Until temp_y
					map[temp_x, i] = TTile.Create(temp_x, i, blank_id, passableToggle)
				Next
			
			'Expand leftward	
			ElseIf KeyDown(KEY_LEFT)
				FlushKeys()
				xMap:+1
				map = New TTile[xMap, yMap]
				
				For Local i:Int = 0 Until temp_y
					map[0, i] = TTile.Create(0, i, blank_id, passableToggle)
				Next
				
				For Local x:Int = 1 Until (temp_x + 1)
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x - 1, y]
					Next
				Next
				
			'Expand upward	
			ElseIf KeyDown(KEY_UP)
				FlushKeys()
				yMap:+1
				map = New TTile[xMap, yMap]
				
				For Local i:Int = 0 Until temp_x
					map[i, 0] = TTile.Create(i, 0, blank_id, passableToggle)
				Next
				
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 1 Until (temp_y + 1)
						map[x, y] = temp[x, y - 1]
					Next
				Next
			
			
			'Expands downward	
			ElseIf KeyDown(KEY_DOWN)
				FlushKeys()
				yMap:+1
				map = New TTile[xMap, yMap]
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x, y]
					Next
				Next
				
				For Local i:Int = 0 Until temp_x
					map[i, temp_y] = TTile.Create(i, temp_y, blank_id, passableToggle)
				Next
			EndIf
		EndIf
End Function
</textarea><br><br>To keep things easy when I thought about this on paper, I restricted myself to an initial 3 tile x 3 tile map and tried to expand it in all directions.  This code, in principle, should be able to do that.  However, when I actually run this code, only the expansion rightward and expansion downward actually work.  Leftward and upward don't work, but if you use them, and then do an expansion downward or rightward, it produces some REAL strange results.  Any thoughts? <br><br></td></tr></table><br>
<a name="1036773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't really looked at your TTile but I think you need to adjust every old TTile x and y position  everytime you expand left or up.<br><br>this is not too important but I also think you are overthinking the for loops:<br><br><pre class=code>
				For Local x:Int = 1 Until (temp_x + 1)
					For Local y:Int = 0 Until temp_y
						map[x, y] = temp[x - 1, y]
					Next
				Next
</pre><br>this would be simpler:<br><pre class=code>
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x+1, y] = temp[x, y]
					Next
				Next
</pre> <br><br></td></tr></table><br>
<a name="1036850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess I am not understanding why anything would need to be adjusted for the expansion.  For rightward and downward expansion, the original map is staying put, and either an extra column or extra row is being tacked on.  In this sense, the old map can be transferred to the new map sequentially beginning at index (0,0) and stopping at the last tile of the original map.<br><br>Leftward and upward expansion are a bit more awkward.  First, you copy the old map into a temp map.  Then what you do is create an entirely new map (one new column if leftward expand, one new row if upward expand).  Let's consider leftward expansion.<br><br>I want the leftmost column to be blank, and the rest of the map to look like my old map.  What I have to do is fill in this new map by first initializing the first column with new, blank tiles (which is why I'm calling my TTile.Create() function before copying over the old map).  Then I need to run through the remaining tiles in the new map, whose area should have the same dimensions as my old map.  So what my code does is start with the second column in the new map, and copy the first column of the old map into this column.  Then it proceeds to the next column, and so on until it reaches the end.  So by copying it over how my code is set up, there should be no need to do any "readjustments" because the act of copying the old map over is doing the adjustment in the process of traversing my old 2D array and entering each of the entries into a new entry in the new 2D array.<br><br>This picture might help:<br><img src="http://i16.photobucket.com/albums/b39/muffinssoda/Untitled-1.jpg"><br><br>So what my program should do is start with the map on the left.  (Colors match up with colors in the old and new maps.  Let's pretend that each is a perfect square.)  Then it should create the left most column of the map on the right, and then it copies over RED, GREEN, BROWN, then ORANGE, BLUE, PINK, then YELLOW, VIOLET, GRAY.  Therefore each old tile is in a new position since the For...Next loops automatically readjusted the coordinates.<br><br>As for the two bits of code you posted, they are equivalent.  It's just a matter of how you think about them.  Neither is more "difficult" in the sense that one is doing more work than the other, nor is one more extraneous.  One may be more conceptually difficult than other for one person, I just wrote it initially how it made sense to me since that's how I chose to index things, whereas it was more natural for you to index things the other way.  It's like changing indexes in a summation or a finitely indexed Cartesian product...two very different looking things can represent the same outcome, it's just a matter of a shift in index.  <br><br>For example:<br><img src="http://upload.wikimedia.org/math/e/3/1/e3114b84602343dddffd631e9abd9047.png"> <br><br></td></tr></table><br>
<a name="1036885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>As for the two bits of code you posted, they are equivalent. It's just a matter of how you think about them....<br> <br></div><br><br>obviously. I just thought it was something you would want to make easier to understand for someone else to read. Specially someone who is helping you and don't really know anything about your code and simple, we all strive for simplicity.  Anyway, no big deal.<br><br>I feel as if you are getting a little tense(frustrated maybe) And I feel you are directing the frustration  at me. If you don't want me help you no big deal but so  far I have been the main one who have been pointing out the things that need to be fixed and so far I have not been wrong and I doubt this is the exception. <br><br>I am going to give it a last chance if you don't get it, I'll step aside and let someone else help you. <br><br>when you first create the TTile array you assign the first tile x = 0, y = 0 from the For/Next loop.<br>when you expand to the right, you give the right tile " x= xMap"  this is correct but when you expand to the left  you move the first tile to the second position but its value is still x=0 and y=0 and this is when the problem starts. When you create the tile to the left you give it the value x=0 and y =0 now as the two tiles next to each other have the same x and y values they are displayed overlaped. if you keep on expanding it to the left or top the values will continue to be stacked and you will see less and less of the map.  <br><br>I hope this is clear to you, if not, I hope someone else can explain it to you better. <br><br></td></tr></table><br>
<a name="1036893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry if I was not polite or appeared to be directing frustration at you.  I did not intend to do so and I apologize for the error in communicating it.  You've been nothing but helpful to me and I really appreciate the time you have spent helping me :)  I certainly am frustrated at the problem itself though, and I will try to use the frustration constructively.<br><br>I think I understand what you have said, though my misunderstanding of the problem itself is not allowing me to see where I have made the error.  I feel as though when I read through my code it all looks like how it should be even though it isn't, which is the source of my frustration here.  Should I be adjusting the x, y coordinates in my TTile.Create() function parameters? <br><br></td></tr></table><br>
<a name="1036900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Should I be adjusting the x, y coordinates in my TTile.Create() function parameters? <br> <br></div><br>Yes. but only when expanding to the left or top. See if this make sense to you:<br><pre class=code>
			'Expand leftward	
			ElseIf KeyDown(KEY_LEFT)
				FlushKeys()
				xMap:+1
				map = New TTile[xMap, yMap]
				
				For Local i:Int = 0 Until temp_y
					map[0, i] = TTile.Create(0, i, blank_id, passableToggle)
				Next
				
				For Local x:Int = 0 Until temp_x
					For Local y:Int = 0 Until temp_y
						map[x+1, y] = temp[x, y]
						map[x+1,y].x = x+1    '**********************************************
					Next
				Next
</pre> <br><br></td></tr></table><br>
<a name="1036905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I finally understand!  haha, I was completely overlooking the fact that my TTile type had x, y fields and that these fields actually defined where the tiles were because in fact, I do not have anything that looks like map[x, y].x or map[x, y].y in my code, so up until now, they were not serving a purpose.  Thank you so much for your help :)<br><br>-muffins <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
