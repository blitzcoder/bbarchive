<!DOCTYPE html><html lang="en" ><head ><title >How to DrawText then erase it?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to DrawText then erase it?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >How to DrawText then erase it?</a><br><br>
<a name="996304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bill246</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the game I'm making, I want to draw a simple "You Win" message on the screen when the player gets 10 points.  The text will stay on the screen until the player hits the space bar.  Right now it locks up when the score hits 10 points, and the message doesn't appear until on screen until after hitting the space bar.  Here it my code:<br><br>If PlayerScore=10 Then<br>     Repeat<br>     DrawText "YOU WIN,200,200<br>     Until KeyDown(KEY_SPACE)<br>     PlayerScore=0<br>End If<br><br>I tried moving the DrawText to before the Repeat loop, but it still doesn't put the text on the screen until the space bar is hit, and then it's only visible for a second.<br><br>Does anyone have an ideas what I'm doing wrong?<br><br>Also, I'm not sure how to erase the text after the space bar is hit.  I looked through documentation and didn't see an Erase command or anything.  <br><br><br>Thank you! <br><br></td></tr></table><br>
<a name="996305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The text is being drawn, but onto the back buffer.  You need a Cls before it, and a Flip after it. <br><br></td></tr></table><br>
<a name="996310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can put your code in [ code ] tags :) (but remove the spaces)<br><pre class=code>If PlayerScore=10 Then
	Repeat
	*	DrawText "YOU WIN,200,200
	Until KeyDown(KEY_SPACE)
	PlayerScore=0
End If</pre><br><br>I'm guessing that you have a main game loop, which updates the game, and then draws it before repeating. When the program gets to the part of the code marked with *, it gets stuck on that line until the spacebar is pressed. This means it isn't able to continue running the main game loop, which is why the program locks up.<br><br>As GfK says, to get it to appear before the spacebar you need a Flip after it (otherwise it can't get drawn until spacebar is pressed, and the program can get back to the main game loop where it will eventually get to the Flip)<br><br>The way the drawing routine works is you splash everything you need onto the screen/buffer, and then flip it and use Cls to clear the buffer and draw the next scene. Once drawn, you can't remove something from the buffer. If you don't mind the game pausing when this message appears, the above suggestion should work. If you want the game to continue playing and the message only disappear when spacebar is pressed, try this<br><br><pre class=code>'somewhere at the start of your code
Global HasWon = False

'in your game loop
If PlayerScore &gt;= 10 Then
	HasWon = True
	PlayerScore = 0
End If

If HasWon
	DrawText "YOU WIN", 200, 200
	If KeyDown(KEY_SPACE)
		HasWon = False
	End If
End If</pre><br><br>You could also put this on a timer, so after x seconds the message disappears on its own. I hope this helps. <br><br></td></tr></table><br>
<a name="996707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bill246</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for the help! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
