<!DOCTYPE html><html lang="en" ><head ><title >Better effect when the player hit the ennemy</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Better effect when the player hit the ennemy</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Better effect when the player hit the ennemy</a><br><br>
<a name="1055893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi !<br>i'm searching a better and fast method to display an sprite effect when the player shoot hit the sprite ennemy ship (hImage) but not destroy it yet (shield).<br><br>i've this :<br><pre class=code>
SetColor 0,255,0
SetAlpha 0.8
SetBlend LIGHTBLEND
DrawImage hImage, mx#, my#, frame
SetBlend (ALPHABLEND)
SetColor 255,255,255
SetAlpha 1.0
DrawImage hImage, mx#, my#, frame
</pre><br><br>is there a better method ? i can't reproduce old school effect when the sprite was completely white ! <br><br></td></tr></table><br>
<a name="1057072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump. I'm interested in this too.<br><br>Is there a <b>procedural</b> way of making a sprite go full flat-colored without you actually having to clone every frame of every sprite and filling it with a flat color in an image editor? <br><br></td></tr></table><br>
<a name="1057094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This thread might be of some help. <br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=91711" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=91711</a> <br><br></td></tr></table><br>
<a name="1057095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> After reading that, I can think of making a blank image the same size as the sprite, then filling it with the color you want, then <b>copying</b> the original sprite frame's alpha channel. <br><br></td></tr></table><br>
<a name="1057100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would personally use white rather than your final color then you can set the color before you draw the sprite, which would allow you to change colors on the fly for some other effects, like flash between red and yellow etc. Combine with blend mode changes and alpha etc. For more effect options all without any real overhead. <br><br></td></tr></table><br>
<a name="1057234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if you have the alpha-channel copied alright, it all requires you to fill the entire image with the color you want. No need for blending (other than turning on Alpha Blending so just the 'shape' of the sprite is shown, not a flat-colored rectangle). <br><br></td></tr></table><br>
<a name="1057786"></a>

<a name="1057787"></a>

<a name="1057790"></a>

<a name="1057791"></a>

<a name="1057792"></a>

<a name="1057797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.bayre.com/2010/animstrip_test.png"><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
Graphics 800,600

Local hImage:TImage = LoadAnimImage ("animstrip_test.png",128,128,0,16)

If hImage = Null Then
	Notify "Can't find the image file !"
	End
End If

Local Frame
Local PosX, PosY
Local Time

PosX = GraphicsWidth()/2
PosY = GraphicsHeight()/2
Time = MilliSecs()

MidHandleImage hImage


Local WhiteImageWithAlpha:TImage = CreateImage(hImage.Width,hImage.Height)

Local Pix1:TPixmap = LockImage(hImage)
Local Pix2:TPixmap = LockImage(WhiteImageWithAlpha)

For Local x:Int = 0 Until hImage.Width
	For Local y:Int = 0 Until hImage.Height
		WritePixel(Pix2,x,y,ReadPixel(Pix1,x,y) | $FFFFFF)
	Next
Next

UnlockImage(WhiteIMageWithAlpha)
UnlockImage(hImage)

MidHandleImage WhiteImageWithAlpha

While Not KeyDown (KEY_ESCAPE)

	Cls
	
	If Time + 50 &lt; MilliSecs() Then
		If Frame &lt; 15 Then
			Frame = Frame + 1
		Else
			Frame = 0
		End If
		Time = MilliSecs()
	End If
	
	SetAlpha 1.0
	SetBlend alphablend
	DrawImage hImage, PosX, PosY, Frame
	
	If KeyDown(KEY_SPACE) Then
		SetBlend lightblend
		SetAlpha 0.2
		DrawImage WhiteImageWithAlpha,PosX,PosY
	End If
	
	Flip	

Wend 

</textarea><br><br>How to adapt this code when you use several frames ?<br><br>hope DrawImage WhiteImageWithAlpha,PosX,PosY, Frame &lt;----- this !<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1057796"></a>

<a name="1057799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
Graphics 800,600

Local hImage:TImage = LoadAnimImage ("animstrip_test.png",128,128,0,16)

If hImage = Null Then
	Notify "Can't find the image file !"
	End
End If

Local Frame
Local PosX, PosY
Local Time

PosX = GraphicsWidth()/2
PosY = GraphicsHeight()/2
Time = MilliSecs()

MidHandleImage hImage


Local WhiteImageWithAlpha:TImage = CreateImage(hImage.Width,hImage.Height, himage.frames.length)


For Local f=0 To himage.frames.length-1
	Local Pix1:TPixmap = LockImage(hImage, f)
	Local Pix2:TPixmap = LockImage(WhiteImageWithAlpha, f)
	
	For Local x:Int = 0 Until hImage.Width
		For Local y:Int = 0 Until hImage.Height
			WritePixel(Pix2,x,y,ReadPixel(Pix1,x,y) | $FFFFFF)
		Next
	Next
	
	UnlockImage(WhiteIMageWithAlpha,f)
	UnlockImage(hImage,f)
Next

MidHandleImage WhiteImageWithAlpha

While Not KeyDown (KEY_ESCAPE)

	Cls
	
	If Time + 50 &lt; MilliSecs() Then
		If Frame &lt; himage.frames.length - 1 Then
			Frame = Frame + 1
		Else
			Frame = 0
		End If
		Time = MilliSecs()
	End If
	
	SetAlpha 1.0
	SetBlend alphablend
	DrawImage hImage, PosX, PosY, Frame
	
	If KeyDown(KEY_SPACE) Then
		SetBlend lightblend
		SetAlpha 0.2
		DrawImage WhiteImageWithAlpha,PosX,PosY, frame
		DrawImage WhiteImageWithAlpha,PosX+ 200,PosY, frame
	End If
	
	SetAlpha 1.0
	DrawText "Press space...",0,0	
	Flip	

Wend 
</textarea><br>YES !<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1057810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like it like this.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
Graphics 800,600

Local hImage:TImage = LoadAnimImage ("animstrip_test.png",128,128,0,16)

If hImage = Null Then
	Notify "Can't find the image file !"
	End
End If

Local Frame
Local PosX, PosY
Local Time

PosX = GraphicsWidth()/2
PosY = GraphicsHeight()/2
Time = MilliSecs()

MidHandleImage hImage

Local WhiteImageWithAlpha:TImage = CreateImage(hImage.Width,hImage.Height, himage.frames.length)


For Local f=0 To himage.frames.length-1
	Local Pix1:TPixmap = LockImage(hImage, f)
	Local Pix2:TPixmap = LockImage(WhiteImageWithAlpha, f)
	
	For Local x:Int = 0 Until hImage.Width
		For Local y:Int = 0 Until hImage.Height
			WritePixel(Pix2,x,y,ReadPixel(Pix1,x,y) | $FFFFFF)
		Next
	Next
	
	UnlockImage(WhiteIMageWithAlpha,f)
	UnlockImage(hImage,f)
Next

MidHandleImage WhiteImageWithAlpha

While Not KeyDown (KEY_ESCAPE)

	Cls
	
	If Time + 50 &lt; MilliSecs() Then
		If Frame &lt; himage.frames.length - 1 Then
			Frame = Frame + 1
		Else
			Frame = 0
		End If
		Time = MilliSecs()
	End If
	
	SetAlpha 1.0
	SetBlend alphablend
	DrawImage hImage, PosX, PosY, Frame
	
	If KeyDown(KEY_SPACE) Then
		SetBlend lightblend
		SetAlpha 0.9
		SetColor 255,0,0
		DrawImage WhiteImageWithAlpha,PosX,PosY, frame
		SetColor 255,255,255
	End If
	
	SetAlpha 1.0
	DrawText "Press space...",0,0	
	Flip	

Wend
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
