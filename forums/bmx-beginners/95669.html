<!DOCTYPE html><html lang="en" ><head ><title >useing Global</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >useing Global</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >useing Global</a><br><br>
<a name="1103494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Lett</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This may sound like a daft question, but is useing Global as oposed to Local causing any performance loss or is it ok to use Globals genraly and just use local in a few places?<br><br>regards <br><br></td></tr></table><br>
<a name="1103497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should use Local as much as possible. Anything Global will always be available during the entire runtime of a program, and taking up memory. Everything Local will me collected by the garbage collector when out of scope.<br><br>It's best practice anyway to let as little as possible be dependent of Global (state). <br><br></td></tr></table><br>
<a name="1103498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, lets clear something up.<br><br>Any performaance loss or gain by using Global will NOT create or clear any Bottleneck in your program.<br><br>Its possible to make it the bottle neck, but you would have to go out of your way to do so.<br><br>Having said that, try to have as few true Global as possible, one method is to have a "Game Singleton;- Type", this would be a type you create one instance of, and it has global fields, eg (Taking screen width)<br><br>Global screenwidth:int = 1024<br>or<br>Game.Screen.Width = 1024<br><br>(Ok so I made Screen dimensions a Vector pair lol)<br><br>The benefits of this multiply exponentially when you start you use predictive text ie BLIDE) <br><br></td></tr></table><br>
<a name="1103499"></a>

<a name="1103500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with these posts. (Although I dislike the singleton design pattern) With global variables there are two seperate issues of concern.<br><br>The first is that global are very, very, very slightly slower than locals. However, unless you are using them for almost every variable, the performance impact is negligible. Don't even care about it.<br><br>However, global variables should be discouraged as they tend to indicate bad program design. This has nothing to do with performance, but about keeping your code tidy and organised. For example, you might make the player's position or lives a global variable. But what if you want to add two player mode? It's better to pass the player's details into a function as parameters (using a player Type for instance) rather than retreive the data from specific global variables inside the function. Then you can reuse the same function for any number of players - it's just a case of passing the right player type object to the function.<br><br>Things such as the current resolution, volume setting, etc, you can happily keep as global variables. I also find it can be handy to keep a global count of the number of certain objects in the same, to help debug and such.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103658"></a>

<a name="1103660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apart from that,<br><br>A lot of things in a visual world have a width and a height, such as players, bullet sizes, game tiles, room dimensions, map dimensions etc. In the ideal case such variables are always 'width' and 'height', so that you never have to wonder, 3000 lines below the definition of such things what the names were again. But as there's only one width and height possible in your variable space, it'll form a problem. The alternative would be having types attached to the name, such as playerwidth, mapwidth, roomwidth, bulletwidth, tilewidth etc. but by then you should realize that types/classes have been invented for a reason: MyPlayer.width, MyMap.width, MyRoom.width, SomeBullet.width, Tile.width etc. So, in reality the number of variables (names) you'll be using with types is typically less than when using globals, making it easier for a programmer to deal with 'em. One can extend types with this idea, having a base type with 'width' and 'height', and have extended types with the rest of the details. Often I find these mechanisms a bit far stretched though, I do use it in an easy canvas system I've made though.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1103976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Lett</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks all, this has been realy usefull, i was trying to minimise the global use, as it does help to keep code neat and tidy.<br><br>regards<br>Ian <br><br></td></tr></table><br>
<a name="1103999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xcessive</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> On an unrelated topic, I accidentally read your name as Iam Leet for this entire thread. <br><br></td></tr></table><br>
<a name="1104010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't keep creating the same variables inside a loop, either. Create it once outside the loop as a Local and then use it in the loop.<br><br>Locals potentially go in CPU registers semi-permanently and can be much faster. Globals are always stored in main memory which is slower. Use as many locals as you can where possible. <br><br></td></tr></table><br>
<a name="1104057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Imaginary<br><br>Do you happen to know where Global Fields used as loop indexes go?<br><br>Eg<pre class=code>
Type aType

Global LoopIndex

MEthod AMethod()

For LoopIndex= 1 to 20
next
end method: End Type</pre>As a global field Im looking at one creation, and possibly being put on a register when in the loop. Where as for a local Im looking at creation every call, and GC <br><br></td></tr></table><br>
<a name="1104192"></a>

<a name="1104193"></a>

<a name="1104194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>For Local LoopIndex= 1 to 20
Next</pre><br>Globals and fields are never put on registers, only locals. Only objects are garbage collected, not integers or floats. A local created inside the for loop or nearby scope is the fastest way.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1104234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strict <br><br></td></tr></table><br>
<a name="1104241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strict is a good idea in general, but I don't see how it relates to deciding whether to use global or local variables? <br><br></td></tr></table><br>
<a name="1104243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Czar<br><br>Thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
