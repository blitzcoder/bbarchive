<!DOCTYPE html><html lang="en" ><head ><title >Creating an in game GUI from scratch...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating an in game GUI from scratch...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Creating an in game GUI from scratch...</a><br><br>
<a name="1248767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am creating my very beautiful game and I need an in game GUI.<br><br>I have ifsoGUI and is very nice but a lots of gadgets are missing. For example there is no canvas gadget and I need it very very much for my game and my level editor.<br>So I thought if I will create my own GUI from scratch it will be better with more gadgets and will fulfill the needs of my game.<br>But there is one HUGE problem for now.<br><br>I don't know how to create a GUI and the GUI theory in generic.<br>I know in a GUI there are the windows and gadgets, but each gadget have and events too.<br><br>Also I don't know little things about methods and lists.<br>Any one of you , you have already working on your own GUI , do you have some idea how to setup my base gadget and how to inherit from this and add other objects (the gadgets) and how to link them.<br>You can understand what I say, I have seen some source code from some guis but I don't understand some things about how the Create method works, how to add some object in a list.<br><br>I created this code:<br><br><pre class=code>
Type Share_Variables Abstract

	Field x:Int
	Field y:Int
	Field width:Int
	Field height:Int
	Field gadget_list:TList = New TList
	
	Global window_list:TList = New TList
	
End Type

Type GUI_window Extends Share_Variables

	Function Create:GUI_window(x, y, width, height)
		Local w:GUI_window = New GUI_window
		w.x = x
		w.y = y
		w.width = width
		w.height = height
		w.gadget_list = New TList
		'w.hidden = True
		Share_Variables.window_list.addlast(w)
		Return w
	EndFunction
	
End Type

Function Create_window:GUI_window(x:Int, y:Int, width:Float, height:Float)
	Return GUI_window.Create(x, y, width, height)
EndFunction

Graphics(640, 480, 0, 60)

Global main_window:GUI_window
main_window = Create_window(25, 25, 111, 122)

While Not AppTerminate() Or KeyHit(KEY_ESCAPE)

	If KeyHit(KEY_ESCAPE) Then Ending()
	If KeyHit(KEY_SPACE) Then Ending()

	DrawText(String main_window.x, 0, 200)
	DrawText(String main_window.y, 0, 210)
	DrawText(String main_window.width, 0, 220)
	DrawText(String main_window.height, 0, 230)
	
	Flip - 1
	
Wend

Function Ending()
	End
End Function
</pre><br><br>And it compiled.<br>It returned the position and window dimensions. I think is a good start but I don't know the theory and what I do next.<br>I will try to draw some graphic in those x,y,width and height variables. <br><br></td></tr></table><br>
<a name="1248788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you looked at <a href="http://www.nrasool.co.uk/development/frygui-blitzmax/" target="_blank">FryGUI</a>, <a href="http://myweb.tiscali.co.uk/diablogames/portfolio/" target="_blank">HighGUI 3</a> or <a href="http://maxmods.googlecode.com/svn/trunk/cegui.mod/" target="_blank">CEGUI</a>? <br><br></td></tr></table><br>
<a name="1248835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was thought to create one gui from scratch to understand how things work.<br>The FryGUI is a dead link.<br>Do other guis support canvas gadgets and skinnable interface?<br>I don't understand how other guis work.<br>And there is not book for blitzmax which explains all of these about types, methods lists etc... <br><br></td></tr></table><br>
<a name="1248837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotshot2005</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> TAKE look at this one<br><br>http://www.amazon.com/Programming-Absolute-Beginner-BlitzMax-ebook/dp/B005FCFGM0/ref=sr_1_1?ie=UTF8&amp;qid=1350762993&amp;sr=8-1&amp;keywords=games+programming+for+the+absolute+beginner+with+blitzmax <br><br></td></tr></table><br>
<a name="1248838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotshot2005</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> TAKE look at this one<br><br>http://www.amazon.com/Programming-Absolute-Beginner-BlitzMax-ebook/dp/B005FCFGM0/ref=sr_1_1?ie=UTF8&amp;qid=1350762993&amp;sr=8-1&amp;keywords=games+programming+for+the+absolute+beginner+with+blitzmax<br><br>or this one<br><br><a href="http://www.truplo.com/blitzmaxbeginnersguide/wave1.html" target="_blank">http://www.truplo.com/blitzmaxbeginnersguide/wave1.html</a><br><br>Hope that help :) <br><br></td></tr></table><br>
<a name="1248839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also recommend the Beginners Guide link that hotshot posted above. Explains a lot, very well.<br><br>From <b><a href="/posts.php?topic=42519" target="_blank">this page</a></b> there's also a link to a PDF. <br><br></td></tr></table><br>
<a name="1248852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have uploaded my copy of Fry.mod <a href="/logs/userlog.php?user=8652&amp;log=1737" target="_blank">here</a>. FryGUI says it supports both these things.<br><br>CEGUI supports skins but it seems you have to figure out how to render to texture to create a canvas gadget. It has good docs/forum though.<br><br>HighGUI 3 (thread <a href="/posts.php?topic=60330" target="_blank">here</a>) supports both things too. It seems to be relatively simple so you could customize it if you want.<br><br>There is a very detailed OOP/types tutorial by John J <a href="http://brucey.net/programming/blitz/misc/library/BlitzMax_OOP_Tutorial.pdf" target="_blank">here</a>.<br><br>There is a linked list demo by fredborg <a href="/posts.php?topic=50285" target="_blank">here</a>. There are also good examples posted to the online manual.<br><br>"Games Programming for the Absolute Beginner with BlitzMax" is only on Kindle, it was also only sold as a book in N. America but you might find a 2nd hand copy. <br><br></td></tr></table><br>
<a name="1249010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much for you suggestions.<br>The HighGUI 3 have dead links too.<br>I am reading the books I found but I have difficulties with lists. <br><br></td></tr></table><br>
<a name="1249015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The HighGUI 3 links work here.<br><br>There is another book for BlitzMax called Game Programming for Teens, 3E (3rd edition) by Maneesh Sethi which is basically a beginner's tutorial for how to make an Invaders clone. It does touch on types and lists but not in much depth. There is also 3D Game Programming for Teens, 2nd Edition which is for Blitz3D.<br><br>If you are confused about lists then look at the online manual data commands <a href="/bmdocs/command_list_2d_cat.php?show=Data" target="_blank">here</a>. The examples posted there show you the basics pretty well. <br><br></td></tr></table><br>
<a name="1249099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> For GUI code look at Brucey's SFXR port, it shows how to code a simple GUI with buttons and sliders.<br><br>GUI coding is sort of a conceptual bear at first but it's much simpler than you think. <br><br></td></tr></table><br>
<a name="1249122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> With the resources you gave me , I manage to create 2 windows (Very simple just squares)<br><br>I can create as many windows as I want and I can put in any x,y position and make them at any size.<br>Then I can change their color and their text.<br><br>The code so far. (Works).<br><br><pre class=code>
'Here are the types of the program
Type Base_gadget Abstract

	Field x:Int
	Field y:Int
	Field width:Int
	Field height:Int
	Field parent:Base_gadget
	Field name:String
	
	Field gadget_color_red:Byte = 255
	Field gadget_color_green:Byte = 50
	Field gadget_color_blue:Byte = 255
	
	Global gadget_list:TList = CreateList()
	
EndType
	

Type GUI_Window Extends Base_gadget
	
	Method Create:GUI_Window(wName:String, wX:Int, wY:Int, wW:Int, wH:Int, parent:Base_gadget)
		
		Local new_gadget:GUI_Window
		new_gadget = New GUI_Window

		Self.name = wName
		Self.x = wX
		Self.y = wY
		Self.width = wW
		Self.height = wH
		
		gadget_list.AddLast(new_gadget)
		
	EndMethod
	Method Show()
		SetColor(Self.gadget_color_red, Self.gadget_color_green, Self.gadget_color_blue)
		DrawRect(Self.x, Self.y, Self.width, Self.height)
		
		SetColor(255, 255, 255)
		DrawText(Self.name ,Self.x+2,Self.y+2)
	End Method

	Method Set_Color:GUI_Window(red:Byte, green:Byte, blue:Byte)
		Self.gadget_color_red = red
		Self.gadget_color_green = green
		Self.gadget_color_blue = blue
		
	End Method
EndType


'Windowed
Graphics(640, 480, 0, 60)

'Full Screen
'Graphics(640, 480, 32, 60, 1)


SetMaskColor(255, 0, 255)

SetBlend(ALPHABLEND | MASKBLEND)

Global main_window:GUI_window = New GUI_window
Global main_window2:GUI_window = New GUI_window

main_window.Create("win1", 50, 50, 50, 50, Null)
main_window2.Create("win2", 110, 50, 50, 50, Null)




main_window.Set_Color(255, 0, 0)
main_window2.Set_Color(255, 155, 50)

main_window.Show()
main_window2.Show()



While Not AppTerminate() Or KeyHit(KEY_ESCAPE)

	If KeyHit(KEY_ESCAPE) Then Ending()
	If KeyHit(KEY_SPACE) Then Ending()

	DrawText(String main_window.x, 0, 100)
	DrawText(String main_window2.x, 0, 110)

			
		Flip - 1

Wend

Function Ending()
End
End Function
</pre><br><br>I still don't know how to select some object from the lists.<br><br>In the create method I tried this code:<br><br><pre class=code>
	Method Create:GUI_Window(wName:String, wX:Int, wY:Int, wW:Int, wH:Int, parent:Base_gadget)
		
		Local new_gadget:GUI_Window
		new_gadget = New GUI_Window

		new_gadget.name = wName
		new_gadget.x = wX
		new_gadget.y = wY
		new_gadget.width = wW
		new_gadget.height = wH
		
		gadget_list.AddLast(new_gadget)
		
	EndMethod
</pre><br><br>Using new_gadget instead of self and didn't work.<br>And I don't know how to select each of the new_gadget to change its color , position , size and text. With the self it worked.<br><br>If you copy and paste the code above (before this one) and compile it works. <br><br></td></tr></table><br>
<a name="1249137"></a>

<a name="1249138"></a>

<a name="1249139"></a>

<a name="1249140"></a>

<a name="1249141"></a>

<a name="1249145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your problem is you've got 2 instances of the type a local one in create and the global. Either pass the global one as parameter to create and use it instead of the local or return the local and use a dummy global to access the method. <br><pre class=code>	Method Create:GUI_Window(wName:String, wX:Int, wY:Int, wW:Int, wH:Int, parent:Base_gadget)
		
		Local new_gadget:GUI_Window
		new_gadget = New GUI_Window

		new_gadget.name = wName
		new_gadget.x = wX
		new_gadget.y = wY
		new_gadget.width = wW
		new_gadget.height = wH
		
		gadget_list.AddLast(new_gadget)
		Return new_gadget
		
	EndMethod
...
Global dummy:GUI_window = New GUI_window

Global main_window:GUI_window = dummy.Create("win1", 50, 50, 50, 50, Null)
Global main_window2:GUI_window = dummy.Create("win2", 110, 50, 50, 50, Null)</pre><br><pre class=code>Method Create:GUI_Window(wName:String, wX:Int, wY:Int, wW:Int, wH:Int, new_gadget:GUI_Window, parent:Base_gadget)
		
		new_gadget.name = wName
		new_gadget.x = wX
		new_gadget.y = wY
		new_gadget.width = wW
		new_gadget.height = wH
		
		gadget_list.AddLast(new_gadget)
		Return new_gadget
		
	EndMethod
...
Global main_window:GUI_window = New GUI_window
Global main_window2:GUI_window = New GUI_window

main_window.Create("win1", 50, 50, 50, 50, main_window, Null)
main_window2.Create("win2", 110, 50, 50, 50, main_window2, Null)</pre> <br><br></td></tr></table><br>
<a name="1249142"></a>

<a name="1249143"></a>

<a name="1249144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, the third way is to not use New in Create and use Self. Also, there is an example of how to look up the list.<br><pre class=code>	Method Create:GUI_Window(wName:String, wX:Int, wY:Int, wW:Int, wH:Int, parent:Base_gadget)
		
		Self.name = wName
		Self.x = wX
		Self.y = wY
		Self.width = wW
		Self.height = wH
		
		gadget_list.AddLast(Self)
				
	EndMethod
...
	Function Lookup()
		For Local a:GUI_Window=EachIn gadget_list
			Print a.name+","+a.x+","+a.y+":"+a.width+","+a.height
		Next
	End Function
...
Global main_window:GUI_window = New GUI_window
Global main_window2:GUI_window = New GUI_window

main_window.Create("win1", 50, 50, 50, 50, Null)
main_window2.Create("win2", 110, 50, 50, 50, Null)

GUI_window.Lookup()</pre> <br><br></td></tr></table><br>
<a name="1249298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't understand what you mean with the dummy<br>I will use the third example with self without add local new_gadget.<br>I am still confused with lists. <br><br></td></tr></table><br>
<a name="1249344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The dummy is just an instance of the type so you can access the methods or fields but apart from that it is not used. So by dummy I meant "An imitation of a real or original object, intended to be used as a practical substitute."<br><br>Not sure what you don't understand about lists. A list is a collection of objects, usually you want them of the same type but you can have different objects in the same list and look up any type with an EachIn loop. It's similar to storing data in a one-dimensional array but more flexible. The list uses TLink internally hence the name, but normally you don't need to use links. <br><br></td></tr></table><br>
<a name="1249365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Henri</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to find a specific object in a list you then have to iterate through the list from first object to the last (or at least until the object is found).<br>Identify the object by comparing it with the object instance you want to find or with an id like:<br><br><pre class=code>SuperStrict

Type a
	Field id:Int
	Field s:String = "Test object of type A"
EndType

Local list:TList = New TList

'Create some test objects and store them in the list
For Local i:Int = 0 To 9
	
	Local obj:a = New a
	obj.id = i	'example of using an id to later identify the object
	
	list.addlast(obj)
Next

'Finding object with id 5
Local found:Int

For Local obj:a = EachIn list
	If obj.id = 5 Then
		found = True
		Print obj.s + " | ID=" + obj.id
	EndIf
Next

If Not found Then Print "Object not found"</pre><br>-Henri <br><br></td></tr></table><br>
<a name="1249403"></a>

<a name="1249404"></a>

<a name="1249405"></a>

<a name="1249407"></a>

<a name="1249408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I advise that you really work hard to understand lists because they are unbelievably powerful and make a lot of previously hard things seem easy.<br><br>If you run into trouble with them and just want to get your GUI done, you could try an array with a Top variable.<br><br>So you would make windowarray:TWindow[100]<br><br>Then you initialize it like so<br><br><pre class=code>for i = 0 to 99 {because that is the way arrays count}
Windowarray[i]=new TWindow {you have to initialize them or get an exception! NEVER FORGET because otherwise you will run into this again and again and never know why}
Next
</pre><br><br>Then as you add windows into that array you increment Top.<br><br>When a window dies, decrement Top.<br><br>When you need to walk your list of windows, do<br><br><pre class=code>for i = 0 to top
Windowarray[i].dostuff()
Next
</pre><br><br>If top ever exceeds your array size - 1, because again arrays count from zero, you can throw an error, or you can resize your array thus:<br><pre class=code>Windowarray= Windowarray[..Top*2]</pre><br>This will expand the array as you need it, doubling the size each time, and will give you more space than you will ever need, with an optimally small number of resize operations because those are slow in some implementations.<br><br>All that's basically what lists do for you.  Also a list can hold anything, even different types of object.<br><br>If you don't wanna mess with resizing, even though it's super simple, just allocate a window array as large as you want.<br><br>Preallocating is generally sneered at as wasteful of memory but in these days of huge memory spaces that's a bogus concern and preallocation can pay large dividends in speed and smoothness because the garbage collector doesn't have to run at strange intervals.<br><br>By doing a list within an array you are reinventing the wheel but that is a great way to learn how wheels work and if you already understand arrays, just use those until you understand how GUIs work.  Then you can work on lists.  One conceptual headache at a time.<br><br>If you want to understand lists read this:<br><a href="http://en.m.wikibooks.org/wiki/BlitzMax/Modules/Data_structures/Linked_lists" target="_blank">http://en.m.wikibooks.org/wiki/BlitzMax/Modules/Data_structures/Linked_lists</a><br>And the Blitzmax OO Tutorial by John.<br><br>Type out all the examples and get them to run and you will understand, it's not as hard as it seems. <br><br></td></tr></table><br>
<a name="1249412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> instead of keeping references of old "windows" in your array you should null them if not used anymore.<br><br>You then could replace<br><pre class=code>
for i = 0 to top
Windowarray[i].dostuff()
Next
</pre><br><br>with<br><br><pre class=code>
for local window:TMyWindow = EachIn Windowarray
  window.dostuff()
Next
</pre><br><br>If you define your Windowarray to contain "guibaseobject" instead of "guiwidget" you could of course store other widgets too.<br>The "eachin"-loop then skips all items not of type "TMyWindow" (or ancestors of TMyWindow).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow there is a lots of work :P<br>Now I am working to skin my first window. Soon I will post a zip file with the graphics included.<br>Another one obstacle is and I don't understand , how to add gadgets on this new window I have created and how to create event system.<br>When I will finish with the skinning of the first window I will try to add one simple button on this new window.<br>I will post a zip file , because the next code include and graphics too.<br>Thank you very very much for your valuable information and help you provide me. <br><br></td></tr></table><br>
<a name="1249471"></a>

<a name="1249478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way to code an event system of sorts is as follows.<br><br>Make a function InRect(x,y,  ux,uy,lx,ly).  This returns a 1 if x,y is within the rectangle (ux,uy,lx,ly) and a zero otherwise.  You are going to be calling this function on every click, for every gui item.<br><br>Make a type TClickRect.  This will be your parent GUI object.  It has an onclicked() method.  That is what will get called every time it is clicked.<br><br>This gets added to a TList thus:<br><br><pre class=code>
widgetlist:TList = new TList
TestClickRect:TClickRect = new TClickRect
widgetlist.addlast(TestClickRect)
</pre><br><br>Then your click checking loop:<br><pre class=code>
if MouseHit(1)
temprect:TClickRect = new TClickRect
for temprect = eachin widgetlist
if inrect(MouseX,MouseY, &lt;widget upperx, uppery, lowerx, lowery&gt;) 
temprect.onclicked()
next
endif
</pre><br><br>That doesn't take into account whether there are overlapping items.  You will need to figure that out yourself but basically you figure out which windows a mouseclick is within, and then of those, figure out which has the highest Z value which means the window that is on top of that window stack.  <br><br>Now when you make your TWindow, you extend TClickRect.  <br><br>Type TWindow contains a TList.<br><br>TList contains a list of TClickRects.  Those are your buttons.<br><br>This is probably the simplest way to do windows.<br><br>By making lists of TClickRects, you can also make button bars, menubars, all sorts of things.  All windowing systems are basically built out of clickrects.<br><br>If you really want to go crazy, learn about function pointers, and then assign functions to buttons when you create the buttons.  That is a somewhat ghetto way of doing things but if you are doing it the easy way that will give you a lot of power.<br><br>But if I WERE YOU I would figure out lists or how to make arrays of buttons, have a function <br>AddButton(name:string, x:int, y:int, width:int, height:int, functionpointer) that adds buttons to a list or a static array, then use that to build up a button bar, and use that buttonbar within your game.<br><br>This is a very simple way of doing things and it's pretty powerful, it lasted for years in the GLUT toolkit.  Have a right click bring up a buttonbar right where you clicked, then a left click on an item calls that item's function pointer and makes the menu disappear again.<br><br>Writing a GUI is a great learning experience and it's very interesting but learning it is not really trivial and it's really up to you whether you want to fart around with learning that right now or whether you want to work on your game. <br><br>You could also do a very simple thing and use my mousewheel menu:<br><pre class=code>
Strict

Global numitems = 7 	
Global currentitem:Int  ' Which item is currently selected 
Global olditem:Int

Global currenttextline:Int
Graphics 640,480

Global ticks = 0
Global namearray:String[100]  ' 100 menu items total
Global menufadeouttimer:Int ' When this has elapsed, the menu disappears automatically

' This is your list of menu item names.
namearray[0]="Thing1"
namearray[1]="Thing2"
namearray[2]="Redthing"
namearray[3]="Bluething"
namearray[4]="BarThing"
namearray[5]="FooThing"
namearray[6]="Exit"

While Not KeyDown(KEY_ESCAPE) And Not (currentitem=6 And menufadeouttimer&lt;0)
	ticks = ticks + 1 
	Cls
	currenttextline=0
	olditem= currentitem
	currentitem= Abs(MouseZ()) Mod numitems ' Mousewheel Switches Tile Types
	If olditem&lt;&gt; currentitem
		menufadeouttimer = 60
	EndIf
	menufadeouttimer:-1		
	If menufadeouttimer &gt; 0 
	drawmenu()
	Else
		SetScale 2,2
		SetColor 255,0,0
		DrawText namearray[currentitem], 0,-2
		SetScale 1,1
	EndIf
	Flip
Wend

Function drawmenu()
	SetBlend alphablend
	SetAlpha .5  ' draw semi-transparent menu background
	SetColor 0,0,0
	DrawRect 0,0,200,1000
	SetAlpha 1
	If menufadeouttimer &lt; 50 And menufadeouttimer &gt; 0 SetAlpha 1*(51/menufadeouttimer)
	'SetColor 255,0,0
	Local recty = 0*12
	DrawRect 0,recty,200,24
	SetScale 2,2
	SetColor 255,0,0
	DrawText namearray[currentitem], 0,-2
	SetScale 1,1
	SetColor 255,255,255
	recty = currentitem*12 + 24
	DrawRect 0,recty,200,12
	For Local i = 0 To numitems 
		If i = currentitem
			SetColor 0,0,0
		Else 
			SetColor 255,255,255
		EndIf
		DrawText namearray[i], 10,i*12 + 24
		SetColor 255,255,255
	Next
	SetAlpha 1
End Function

Function consoleprint(toprint$)
	currenttextline:+12
	DrawText(toprint$,10,currenttextline)
End Function
</pre><br><br>But this is not complete!  It needs to execute code somehow based on the selection you made.  Either do that with a function pointer or a case statement.<br><br>Here is a bit of code explaining how to bind function pointers to keys.  A function pointer can also be bound to a buttonID.<br><pre class=code>' bindkey - binds key to function
Global functions()[256]  '  This is an array of function pointers, one for each ascii keycode.
						 '  Not all of these will be initialized...
						 '  If you are using this in your menu system, you will execute these on
						 '  a given button press, as down below in the main loop.
Graphics 320,200
Function bind(key:Int, func())  ' Binds a key to a function pointer.
	functions[key]=func
End Function

Function thing1()  ' Example functions.  These could be anything...
DrawText "thing1", 10, 10
End Function

Function thing2()
DrawText "thing2", 10, 10
End Function

Function bail()
End
End Function


' These are the binding statements.  These bind a key to a function.
' Thing1, Thing2 and bail are all references to functions.
bind(KEY_1,thing1)  
bind(KEY_2,thing2)
bind(KEY_ESCAPE,bail)

While(1)
	Repeat
		char% = GetChar()
		If char And functions[Int(char)] 
			Cls
			functions[Int(char)]
			Flip
		EndIf 
		' Or for your button menu system,
		' if somebuttonhit and functions[buttonID]
		   ' in other words, if the button id has had a function assigned to it
	 	' functions[buttonID]    ' Execute whatever function corresponds to that button ID
	    ' endif
	Until char=Null
Wend
</pre> <br><br></td></tr></table><br>
<a name="1249473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of "checking which widgets think they contain the widget" and afterwards filtering it:<br><br>- have a list of widgets. Each time you add a widget, sort the list using a custom compare-function (which returns 1/0/-1 depending on the zindex compared to the other widget)<br><br>So your list contains a zordered list - which you need anyway if you have overlapping widgets.<br><br>When checking for "clicks" you check from "top to bottom". while rendering is from "bottom to top".<br><br>As soon as an item registered a click, no other widget has to get checked.<br><br>If you want to inform other widgets too - inform them via the widget itself (it sends out an event à la "widget clicked" with the widget as payload/sender).<br><br><br>You may also consider to have a "GetScreenRect:TRectangle" method in each widget - it returns the visible area for the widget on the screen.<br><br>It is calculated this way:<br>x = parent.GetX() + x<br>y = parent.GetY() + y<br>w = max(parent.GetX(), x) - min(parent.GetX2(), GetX()) <br>h = similar to w<br><br>x2 is "x + w". I use "getX()" so it checks the parents parent and so on.<br><br>Method GetX:Float()<br>if parent then return parent.GetX() + x<br>return x<br>End Method<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249479"></a>

<a name="1249483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) The very first version is ready<br><br><a href="https://app.box.com/s/pbzmvin7lr095su54dfm" target="_blank">GUI Ver 0.0001</a><br><br>It creates 3 windows with simple skin , (you can create as many windows you want) , you can change the color , you can make them<br>hidden or show and you can change the text of the title bar.<br><br>You can't move them yet not drag or select them and change their z order. (But you can initialize the size and position on creation only)<br>Hmm change the z order and position on run time... I haven't figure out how to do this yet , but I will find it.<br>The next step is to add one simple button gadget on this window.<br><br>Edit: Oooops a lots of new posts added. I will try to make the window dragable and clickable and change the z order of the window. I confused a lot with the new code you sent me. <br><br></td></tr></table><br>
<a name="1249480"></a>

<a name="1249481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still think when you're trying to write a game and an editor, writing a windowing system so you can get to that point is way too much effort.  It's really not a trivial undertaking and there are easier ways of doing almost anything than that. <br><br></td></tr></table><br>
<a name="1249488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I still think when you're trying to write a game and an editor, writing a windowing system so you can get to that point is way too much effort. It's really not a trivial undertaking and there are easier ways of doing almost anything than that. <br> <br></div><br><br>I know there are easier ways to do it just using the ifsogui I am already have , but there is not any complete gui library for blitzmax. Even the high gui is not complete.<br>Menus are missing , right button menus are missing too. Most of the guis don't have canvas gadget and other more complex gadgets.<br><br>Creating a gui (If I will manage to finish it) will give me a lots of experience of object oriented programming and understanding other things that I still haven't understood with other languages too. On thing I wasn't understood in the past was the lists and classes with inheritance. Now I have learnt the inheritance is just the "extends" command in one struct or type and the class was one method or function inside the struct or type.<br>This took me more than 6 years to understand it. Also I discovered the command eachin always I used the for loop with fixed variables.<br><br><br>Ok I will try to make the window movable and change its z order.<br>:) <br><br></td></tr></table><br>
<a name="1249503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> The whole "drag" thing is not that easy ... it's NOT just "if mouseover and mousehit then setDragged".<br><br>In my gui I do not handle "drag n drop" properly, but I handle it. Just check how wxWidgets handle it: a drag event starts not on "mousedown/mouseup" but on "mousedown and moved mouse over a certain distance".<br><br>Think of it as if the widgets are glued on the background and you need a specific force to unglue them.<br><br><br>@missing things:<br>A Menu is just a Canvas + Labels.<br>A Context Menu is a Menu created as soon as a widget is configured to react that way on a right click.<br><br>A GUI Toolkit just needs to provide you with basic widgets.<br><br>Eg. is a "Spinner" nothing more than a "Input" + 2 small buttons with a glyph on each of them.<br><br>A "Color selector" is a Canvas/Window with colored buttons (with design "inset") etc.<br>If you want to have a color wheel, then that is a canvas which reacts to your clicks and has a custom render code.<br><br>Do not blame the existing toolkits not to have "everything" you could imagine.<br>There are always multiple ways to combine things to form something new: eg. I combined a "input" and a "list" to a dropdown-widget - using this approach it is even possible to "drag n drop" items from the dropdown widget to a list or other way around. A list is nothing more than a special "panel" (canvas) which listens to some events and contains scrollers (the area to scroll something).<br><br><br>To keep things "easy to modify" you should think about the design before coding ... I have many things I would have better coded differently. I think "stubs" (functions doing nothing) are not that costly compared to the benefit you gain instead of having to copy-paste a lot of code from widget A to B.<br>So something like DrawBackground() DrawContent() DrawOverlay() DrawDebug() helps to just override things changing between widgets.<br><br><br>Also think a bit about connectors (Field onClick:int() = null) which you could easily attach custom functions too (same is possible for your draw methods) but it is similar to extending types to override behavior, don't know what is the preferable way of doing things.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> A new versions is out<br><br><a href="https://app.box.com/s/pbzmvin7lr095su54dfm" target="_blank">GUI Ver 0.0001b</a><br><br>It does the dragging effect but is not so smooth have lag. I don't have understood about the z order yet and when you overlap the windows you dragging and windows behind.<br>This is just the drag effect , drag the window from the title bar. <br><br></td></tr></table><br>
<a name="1249545"></a>

<a name="1249546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems this .self command do miracles.<br>I fixed the zorder and now I can move my windows without picking up overlapped ones behind , but I did it little differently.<br><br>The next version of my GUI.<br><br><a href="https://app.box.com/s/pbzmvin7lr095su54dfm" target="_blank">GUI Ver 0.0002</a><br><br>The next is to see how to add one gadget (for example a button over the existing window).<br><br>I have issues when I move the mouse fast. The pointer goes outside of the window very fast and the window remains unmovable. How do I will fix this? <br><br></td></tr></table><br>
<a name="1249570"></a>

<a name="1249571"></a>

<a name="1249572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have it stay selected until the mouseclick is released.  <br><br>When it is first selected, give the mousepointer a "currentlygrabbedwindow" ID.<br><br>If this ID is non-null, always have that window follow the mouse.<br><br>When the click is released, give that ID a null or zero value.<br><br>Looks like you are almost there. <br><br></td></tr></table><br>
<a name="1249573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> For such cases I have a "GUIManager" - it contains the "widget list", helper functions ("addWidget") but also contains the currently focused widget etc.<br><br>So you could store the exact widget there (draggedWidget:TGUIWidget) or just the ID - but you then have to make sure that the ID is unique (a GUID) . You then have to "get(id)" each time you compare it (but you save to unset one reference).<br><br><br>@rest<br>Do like zoqfotpik suggested: split into "grab" and "release" - grab then of course could be like suggested above be a mix of "mousedown" and "moved distance &gt; x".<br><br>Similar you will have to handle "button clicks" - you should act on "mouseup" not on "mousedown" (store object on mousedown but emit "click" if mouseup is on the same object).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have window IDs in my code!<br>Do I need to add extra argument in my window create method? <br><br></td></tr></table><br>
<a name="1249598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it's a big problem you could make it a global variable.  This gets incremented every time you create a window and in your window create method the window ID gets set to that variable. <br><br></td></tr></table><br>
<a name="1249599"></a>

<a name="1249605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just have something like this:<br><br><pre class=code>
TBaseWidget
 Field ID:int
 Global LastID:int = 0

 Method New()
   LastID :+1
   ID = LastID
 End Method
End Type
</pre><br><br>That "New" Method is also called as soon as you do a "new TMyWidget" - as soon as you extend "TMyWidget" from "TBaseWidget". Even if you override "Method New()" in your custom widgets, it gets "traversed" up to the baseWidget.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now Derron, is there any other good way other than a global variable?<br><br>I use globals.  I may not use a *ton* of them but when I'm finished with a project I often have a screenful or more.  Is it better to put it inside a type for reasons of modularity, and if you do that, wouldn't "lastID" be running into dangers of namespace incompatibility? <br><br></td></tr></table><br>
<a name="1249606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> how could the run into "namespace problems"?<br><br><br>Instead of a global variable you could use a GUID ... eg. based on something like "amount of instances of my type" + nanoseconds since programmestart or so.<br>You just have to make sure, that you cannot reuse an existing GUID (or think of threading ...).<br><br>For predefined things a GUID is really handy (eg "enemy-01" "player-1") ... but for things like particle systems you will better use a global "lastID".<br><br>If all your objects extend from a baseobject, you wont even pollute namespaces.<br><br><br>Could you give an example (maybe I just do not understand enough from "namespaces" and problems arising there) ?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1249666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just mean conflicting variable names.  Of course there's an obvious way to fix that problem.<br><br>Nothing technical regarding ID numbers, just a general question regarding global variables and naming.  I usually precede mine with JT in things I package up for reuse. <br><br></td></tr></table><br>
<a name="1249677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> To avoid this I just use the globals in a "Manager"-type. The Manager itself is a singleton so its variables are "fields" - this way it could get properly exposed to LUA (reflection only handles Fields - and modded, it handles Const but not Global).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
