<!DOCTYPE html><html lang="en" ><head ><title >Floating numbers and precision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Floating numbers and precision</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Floating numbers and precision</a><br><br>
<a name="825544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, can somebody give me some advice? i have this small piece of code:<br><br>SuperStrict<br><br>Local w:Float = 0<br>Local n:Float = 1.<br>Local inc:Float = 0.1<br>Local result:Float = n + inc<br><br>Print result<br>result:+inc<br>Print result<br><br>End<br><br>What happens here is that float numbers doesnt appear to be very precise... the resulting printing gives<br><br>1.10000002 when it should be 1.10000000<br><br>1.20000005 when it should be 1.20000000<br><br>¿why?<br><br>Thanks in advance! <br><br></td></tr></table><br>
<a name="825549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because some numbers cannot be perfectly represented with only 32 bits of precision. I'm not going to give a complete treatise on how floating point numbers are represented bit-by-bit because you can research that on a hundred sites just by googling. Suffice it to say that even within the seven digit precision you can generally expect from floating point numbers there are too many combinations for all numbers to be perfectly represented.<br><br>If you want greater precision, use doubles. If you want perfect precision, don't use floating point values at all. <br><br></td></tr></table><br>
<a name="825559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although when trying to apply percise mathematics, floating points can seem terrible, when used for many caculations the inpercision is actually not that significant in many cases. For example, in many of the experiments I conduct at university, if I can collect results accurate to even as few as 3 decimal places accurately, then I'm going to be very pleased (although of course it depends entirely upon what I'm measuring!)<br><br>When dealing with formulas for things such as distance etc the fact that the number is only accurate to the 7th decimal place is hardly ever going to be of an consequence.<br><br>When dealing with percise maths, stay away! <br><br></td></tr></table><br>
<a name="825637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A floating point number is not the same thing as a REAL number - it cannot accurately represent all numbers. You only have 32 bits within which to specify enough detail to get close to a number. In some cases you get as close as needed but in other cases there either isn't enough decimal places, or the `spread` of numerical representation is not precice enough to represent the numbers you want precicely.<br><br>You can move to trying to use Doubles, as Gabriel suggested, or otherwise you have to create some kind of `if this number is within a certain error tolerance range of this other number` function ie approximately equals. <br><br></td></tr></table><br>
<a name="825808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rixarn</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey thanks four your help! Didnt knew that thing about floating point numbers so, i guess i´ll use doubles instead. :) thanks :D <br><br></td></tr></table><br>
<a name="825927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel I should point out a double IS a floating point number, just one with twice the accuracy. <br><br></td></tr></table><br>
<a name="825983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> and far lower performance as float is handled natively by the CPU while double needs to be calculated in several steps. <br><br></td></tr></table><br>
<a name="826020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yah floats are faster than doubles. That said, I find that Longs are even slower than doubles which is susprising.<br><br>You might try fixed point within an integer.<br><br>You can't accurately/reliably represent any non-integer/non-whole numbers, you can only approximate. <br><br></td></tr></table><br>
<a name="826045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> and far lower performance as float is handled natively by the CPU while double needs to be calculated in several steps. <br></div>The FPU does all calculations with 80-bit registers, doubles should be handled just as natively as floats. <br><br></td></tr></table><br>
<a name="826101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ¿why? <br></div>Becuase:<div class="quote"> What happens here is that float numbers doesnt appear to be very precise... <br></div><a href="http://en.wikipedia.org/wiki/Floating_point" target="_blank">Tada</a>!<br><br><div class="quote"> and far lower performance as float is handled natively by the CPU while double needs to be calculated in several steps.  <br></div>Rubbish. Like Azathoth said, floating point numbers, regardless of single or double precision, are handled by the FPU (the CPU handles integer arithmetic) using 80-bit registers. There is no performance penalty for using one over the other. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
