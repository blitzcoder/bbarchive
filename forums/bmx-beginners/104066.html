<!DOCTYPE html><html lang="en" ><head ><title >Question about GetPoolChannel issues</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question about GetPoolChannel issues</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Question about GetPoolChannel issues</a><br><br>
<a name="1258169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I am using the PoolChannel functions for my sound of my game.<br>It was found from here:<br><a href="https://github.com/GWRon/Dig/blob/master/base.sfx.channelpool.bmx" target="_blank">https://github.com/GWRon/Dig/blob/master/base.sfx.channelpool.bmx</a><br><br>I have some issues , some times some sounds doesn't play.<br>for example I use some sound for my interface clicks and if I hit the buttons or play some sound multiple times the sound doesn't play or doesn't sounds well.<br>I tried to do some trick, to preload the sounds and play them before the game begins because when I tried to play some sound for the first time and when I tried to play another one the previously sound was stopped.<br><br>{code}<br>Function Init_Sounds_Music()<br>	<br>	'PREPARE SOUNDS<br>	If Not GetPooledChannel("Music01").Playing() Then PlaySound(Music01, GetPooledChannel("Music01")) GetPooledChannel("Music01").SetVolume(0)<br>	If Not GetPooledChannel("Music02").Playing() Then PlaySound(Music02, GetPooledChannel("Music02")) GetPooledChannel("Music02").SetVolume(0)<br>	If Not GetPooledChannel("Music03").Playing() Then PlaySound(Music03, GetPooledChannel("Music03")) GetPooledChannel("Music03").SetVolume(0)<br><br>	If Not GetPooledChannel("Inventory_Left").Playing() Then PlaySound(Inventory_Left, GetPooledChannel("Inventory_Left")) GetPooledChannel("Inventory_Left").SetVolume(0)<br>	'If Not GetPooledChannel("Inventory_Left1").Playing() Then PlaySound(Inventory_Left, GetPooledChannel("Inventory_Left1")) GetPooledChannel("Inventory_Left1").SetVolume(0)<br>	'If Not GetPooledChannel("Inventory_Left2").Playing() Then PlaySound(Inventory_Left, GetPooledChannel("Inventory_Left2")) GetPooledChannel("Inventory_Left2").SetVolume(0)<br>	'If Not GetPooledChannel("Inventory_Right1").Playing() Then PlaySound(Inventory_Right, GetPooledChannel("Inventory_Right1")) GetPooledChannel("Inventory_Right1").SetVolume(0)<br>	'If Not GetPooledChannel("Inventory_Right2").Playing() Then PlaySound(Inventory_Right, GetPooledChannel("Inventory_Right2")) GetPooledChannel("Inventory_Right2").SetVolume(0)<br>	<br>	If Not GetPooledChannel("Step01a").Playing() Then PlaySound(Step01a, GetPooledChannel("Step01a")) GetPooledChannel("Step01a").SetVolume(0)<br>	If Not GetPooledChannel("Step01b").Playing() Then PlaySound(Step01b, GetPooledChannel("Step01b")) GetPooledChannel("Step01b").SetVolume(0)<br><br>	If Not GetPooledChannel("Wall_Hit1").Playing() Then PlaySound(Wall_Hit1, GetPooledChannel("Wall_Hit1")) GetPooledChannel("Wall_Hit1").SetVolume(0)<br>	<br>	If Not GetPooledChannel("Sound_Bell_1").Playing() Then PlaySound(Bell1, GetPooledChannel("Sound_Bell_1")) GetPooledChannel("Sound_Bell_1").SetVolume(0)<br>	If Not GetPooledChannel("Sound_Bell_2").Playing() Then PlaySound(Bell2, GetPooledChannel("Sound_Bell_2")) GetPooledChannel("Sound_Bell_2").SetVolume(0)<br>	If Not GetPooledChannel("Sound_Bell_3").Playing() Then PlaySound(Bell3, GetPooledChannel("Sound_Bell_3")) GetPooledChannel("Sound_Bell_3").SetVolume(0)<br>	If Not GetPooledChannel("Sound_Bell_4").Playing() Then PlaySound(Bell4, GetPooledChannel("Sound_Bell_4")) GetPooledChannel("Sound_Bell_4").SetVolume(0)<br>	If Not GetPooledChannel("Sound_Bell_5").Playing() Then PlaySound(Bell5, GetPooledChannel("Sound_Bell_5")) GetPooledChannel("Sound_Bell_5").SetVolume(0)<br>	If Not GetPooledChannel("Sound_Bell_6").Playing() Then PlaySound(Bell6, GetPooledChannel("Sound_Bell_6")) GetPooledChannel("Sound_Bell_6").SetVolume(0)<br><br>	For All_Levels = 1 To Max_Levels<br>	<br>		For All_Doors = 1 To Max_Doors<br>			If Not GetPooledChannel("door[" + All_Levels + "," + Doors[All_Levels, All_Doors].x + "," + Doors[All_Levels, All_Doors].y + "]") Then<br>			PlaySound(Door_Opening, GetPooledChannel("door[" + All_Levels + "," + Doors[All_Levels, All_Doors].x + "," + Doors[All_Levels, All_Doors].y + "]"))<br>			GetPooledChannel("door[" + All_Levels + "," + Doors[All_Levels, All_Doors].x + "," + Doors[All_Levels, All_Doors].y + "]").SetVolume(0)<br>			EndIf<br>		Next<br>	Next<br>	If Not GetPooledChannel("Generic_Clink").Playing() Then PlaySound(Generic_Clink, GetPooledChannel("Generic_Clink")) GetPooledChannel("Generic_Clink").SetVolume(0)<br>	'==================================================================================================================================================<br>		<br>	'Delay(1000)<br>	'STOP SOUNDS<br>	GetPooledChannel("Music01").Stop()<br>	GetPooledChannel("Music02").Stop()<br>	GetPooledChannel("Music03").Stop()<br><br>	GetPooledChannel("Inventory_Left").Stop()<br>	'GetPooledChannel("Inventory_Left1").Stop()<br>	'GetPooledChannel("Inventory_Left2").Stop()<br>	'GetPooledChannel("Inventory_Right1").Stop()<br>	'GetPooledChannel("Inventory_Right2").Stop()<br><br>	GetPooledChannel("Step01a").Stop()<br>	GetPooledChannel("Step01b").Stop()<br>	<br>	GetPooledChannel("Wall_Hit1").Stop()<br><br>	GetPooledChannel("Sound_Bell_1").Stop()<br>	GetPooledChannel("Sound_Bell_2").Stop()<br>	GetPooledChannel("Sound_Bell_3").Stop()<br>	GetPooledChannel("Sound_Bell_4").Stop()<br>	GetPooledChannel("Sound_Bell_5").Stop()<br>	GetPooledChannel("Sound_Bell_6").Stop()<br>	<br>	For All_Levels = 1 To Max_Levels<br>		For All_Doors = 1 To Max_Doors<br>		GetPooledChannel("door[" + All_Levels + "," + Doors[All_Levels, All_Doors].x + "," + Doors[All_Levels, All_Doors].y + "]").Stop()<br>		Next<br>	Next<br>	GetPooledChannel("Generic_Clink").Stop()<br>	'==================================================================================================================================================<br>	<br>		<br>	'NORMALIZE SOUNDS<br>	GetPooledChannel("Music01").SetVolume(1)<br>	GetPooledChannel("Music02").SetVolume(1)<br>	GetPooledChannel("Music03").SetVolume(1)<br><br>	GetPooledChannel("Inventory_Left").SetVolume(1)<br>	'GetPooledChannel("Inventory_Left1").SetVolume(1)<br>	'GetPooledChannel("Inventory_Left2").SetVolume(1)<br>	'GetPooledChannel("Inventory_Right1").SetVolume(1)<br>	'GetPooledChannel("Inventory_Right2").SetVolume(1)<br><br>	GetPooledChannel("Step01a").SetVolume(1)<br>	GetPooledChannel("Step01b").SetVolume(1)<br>		<br>	GetPooledChannel("Wall_Hit1").SetVolume(1)<br>	<br>	GetPooledChannel("Sound_Bell_1").SetVolume(1)<br>	GetPooledChannel("Sound_Bell_2").SetVolume(1)<br>	GetPooledChannel("Sound_Bell_3").SetVolume(1)<br>	GetPooledChannel("Sound_Bell_4").SetVolume(1)<br>	GetPooledChannel("Sound_Bell_5").SetVolume(1)<br>	GetPooledChannel("Sound_Bell_6").SetVolume(1)<br>	<br>	For All_Levels = 1 To Max_Levels<br>		For All_Doors = 1 To Max_Doors<br>		GetPooledChannel("door[" + All_Levels + "," + Doors[All_Levels, All_Doors].x + "," + Doors[All_Levels, All_Doors].y + "]").SetVolume(1)<br>		Next<br>	Next<br>	GetPooledChannel("Generic_Clink").SetVolume(1)<br>	'==================================================================================================================================================<br>End Function<br>{/code}<br><br>The code above plays all sounds of the game and set the volume to 0<br>Then stop the sound. Then I set the sound volume back to 1.<br><br>After this when I started the game , the sounds which played doesn't stop , but when I added even more sounds the older sounds now don't play.<br><br>Is it possible to find out how to know if some sound is not playing to be removed to have free channel and do not cause my sounds not playing.<br><br>I also tried and TChannelPool.channelLimit = 32<br><br>any idea?<br><br>Thank you :) <br><br></td></tr></table><br>
<a name="1258205"></a>

<a name="1258214"></a>

<a name="1258215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> First of all: use [ ] for code blocks, not { } (this would be seen when reviewing your post before pressing the [Post]-Button).<br><br><br>What are you doing here:<br><pre class=code>If Not GetPooledChannel("Sound_Bell_1").Playing() Then PlaySound(Bell1, GetPooledChannel("Sound_Bell_1")) GetPooledChannel("Sound_Bell_1").SetVolume(0)</pre><br><br>if not playing "sound_bell_1" then start playing it AND set volume to 0.<br>I think you could skip playing that sound at all.<br><br>THIS does not preload (predecode) the sounds, this is done via "LoadSound(url)".<br><br><br>I think you try to pre-allocate channels for the sound - but this is why we have the pool, what if you cannot pre-allocate enough channels? This is why the pool-principle was introduced.<br><br><br>The whole class does not manage "freeing channels" or other things, it just adds some convenience regarding managing various channels. If you remove a channel from the pool, it is up to you to "channel.Stop()" etc. else the channel will keep playing the sounds if they were set to be repeating forever.<br><br><br><br>@channelLimit<br>it just limits the amount of simultaneous managed channels. If you try to get the "33th" channel, it returns a prior one - and if you start another sound in it, it will NOT stop the other sound playing in this channel, it will add it to that channel (I think it behaves that way, so I am nur sure about it.<br>Of course it is up to you to just create a channel for each "sound". With "channelLimit = 32" you could play up to 32 sounds at the same time (bgmusic, door sfx, monster cry, spell sfx, ... I cannot imagine enough to fill the 32 slots for a SIMULTANEOUS usage)<br><br><br><br>Ok, so what to check for you:<br>Just experiment with ONE 1-2 channels to get a feel how to work with it (setting new sounds etc).<br>Remove (or comment out) that whole "getChannel(bla);PlaySound(blubb, bla);getChannel(bla).setVolume(0)" and the same for the "Stop(), setVolume(1)" part.<br><br>Then use "CueSound" if you want to "prepare" every channel to start playing. CueSound() instead of PlaySound() is like putting the sound into a channel, and pressing "stop". <br><br>I do not know if that is all even needed. In my game we just "playsound" (+ some wrappings) and use the appropiate channel for that kind of sound (to avoid eg. 20 different gui sounds to play simultaneously).<br><br>So in your case the easiest way to play a door sound is:<br><br>PlaySound(myDoorsound, GetPooledChannel("door_1"))<br><br>And if you play with volume, panning in GENERAL!<br>GetPooledChannel("door_1").SetVolume(1)<br>GetPooledChannel("door_1").SetPan(0)<br>PlaySound(myDoorsound, GetPooledChannel("door_1"))<br><br>or using caches:<br>local c:TChannel = GetPooledChannel("door_1")<br>c.SetVolume(1); c.SetPan(0)<br>PlaySound(myDoorsound, c)<br><br><br>Why? <br>Because as soon as you limit the channels, you will reuse existing channels. And existing channels might have adjusted settings (volume, pan). <br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1258236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used TChannelPool.GetChannelCount(True) and I found I occupy 17 channels for NOW.<br><br>And then I used TChannelPool.ProtectChannel("bluh key") for all of my sounds and for now all sound issues solved. But I am experimenting and I am not sure what will happen later on. SO, I am not sure if the Protected Channels corrected whole problem.<br><br>I increased the channel limit to 128. All modern sound blaster and on board sound cards supports at least up to 128 channels.<br>For now all static not changing sounds , backgrounds , interface sounds and repeatable sounds that do not need to be panned are in protected mode. the other 3D sounds from doors (According to example you sent me in previous post and other dungeon objects which changes dynamically) I left them to unprotected mode.<br><br>So far so good and I am thanking your again for this nice collection of sound functions.<br>:)<br><br><div class="quote"> <br>First of all: use [ ] for code blocks, not { }<br> <br></div><br>I was using square brackets for my code before and you told me to use curly brackets and I was changed to curly. You said to use {codebox} instead of {code} I used to use [code] and now I used {code}. what is the difference between {code} and [code]? You said the {codebox} activates horizontal and vertical scroll bars for huge code. <br><br></td></tr></table><br>
<a name="1258237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> always use square brackets.<br><br>The CODE tag creates a lump of code on a black background, which extends to fit the code.  Good for small amounts of code.<br><br>The CODEBOX tax does the same, but the height is restricted and scrollbars are added - better for posting lots of code. <br><br></td></tr></table><br>
<a name="1258238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote in "{codebox}" etc to avoid the forum turning it into something ... so when I write "{b}boldtext{/b}" this keeps the way it is, replacing it with [ and ] the result is "<b>boldtext</b>".<br><br>Sorry for the confusion I brought up.<br><br><br>@ProtectChannel()<br>Like I hope to have explained already: if you limit the channels somehow and you request a new channel which would exceed that limit, an existing channel is returned instead of a new one.<br>For channels containing things running forever or channels which should not get suddenly stopped (eg. speech of a dialogue) then you should "protect" that channel.<br><br>For normal SFX (opening a door) you should not protect, because it is not that bad if another sound is played (imagine dozens of glasses falling down). <br> <br>If you do not enounter problems, do not use the channelLimit at all, set it to -1 and it should create channels without limitation.<br>If you then encounter problems with your sound card, you reached its limit and should think about setting a channelLimit. <br><br>Really think about adding channels for each object VERSUS having channels for specific types. If you only have 1 background music playing at the same time, then only have a channel "backgroundmusic" instead of channels for each track (bgmusic1, bgmusic2 ...).<br>If you want "cross fading" then have two backgroundmusic-channels (lowering volume on A and raising on 2 will crossfade).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1258262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I am changing levels , for example if the party reach a staircase and changing level , I am fading out the current background music until reaches the setvolume(0) and then stop that music and after the party arrived to next level , I have one generic routine which checks if the level was changed and a new single background music is starting.<br><br>I post this code here for idea for games when you are changing levels.<br>Now I will use {codebox} :P<br><br>This code checks what music you will play for each level<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'Music Mechanics
Const Max_Levels:Byte = 50
Global Level_music:String[Max_levels + 1]

Type My_Party
	Field x:Byte
	Field y:Byte
	Field Level:Byte
	Field Direction:Byte
EndType
Global Party:My_Party = New My_Party

Type My_Bells_music
	Field Time_Delay:Int
	Field Deadline_time:Int
	Field Frame:Byte
	Field Played:Byte
	
EndType
Global Bells_music:My_Bells_music = New My_Bells_music

Function Music_Mechanics()
	
	If Level_music[Party.Level] = "bells" Then

		If (Current_time &gt;= Bells_music.Deadline_time) Then
		Bells_music.Time_Delay = Rand(5000, 10000)
		Bells_music.Deadline_time = Current_time + Bells_music.Time_Delay
		Bells = Rand(1, 6)
		Bells_music.Played = 0
		EndIf
		
			If Bells = 1 And Bells_music.Played = 0 Then PlaySound(Bell1, GetPooledChannel("Sound_Bell_1")) Bells_music.Played = 1
			If Bells = 2 And Bells_music.Played = 0 Then PlaySound(Bell2, GetPooledChannel("Sound_Bell_2")) Bells_music.Played = 1
			If Bells = 3 And Bells_music.Played = 0 Then PlaySound(Bell3, GetPooledChannel("Sound_Bell_3")) Bells_music.Played = 1
			If Bells = 4 And Bells_music.Played = 0 Then PlaySound(Bell4, GetPooledChannel("Sound_Bell_4")) Bells_music.Played = 1
			If Bells = 5 And Bells_music.Played = 0 Then PlaySound(Bell5, GetPooledChannel("Sound_Bell_5")) Bells_music.Played = 1
			If Bells = 6 And Bells_music.Played = 0 Then PlaySound(Bell6, GetPooledChannel("Sound_Bell_6")) Bells_music.Played = 1

	End If
	If Level_music[Party.Level] = "dungeon" Then
		If Music_Played[Party.Level] = 0 Then
		PlaySound(Music01, GetPooledChannel("Music01")) GetPooledChannel("Music01").SetVolume(1)
		Music_Played[Party.Level] = 1
		EndIf

	End If
	If Level_music[Party.Level] = "catacomb" Then
		If Music_Played[Party.Level] = 0 Then
		PlaySound(Music02, GetPooledChannel("Music02")) GetPooledChannel("Music02").SetVolume(1)
		Music_Played[Party.Level] = 1
		EndIf

	End If
	If Level_music[Party.Level] = "forest" Then
		If Music_Played[Party.Level] = 0 Then
		PlaySound(Music03, GetPooledChannel("Music03")) GetPooledChannel("Music03").SetVolume(1)
		Music_Played[Party.Level] = 1
		EndIf

	End If


End Function
</textarea><br><br>The code to fade out the sound when you are changing level:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Global Background_Transfering_Sound_Volume:Float

'Fade Out Sound
Function Fading_Out_Sound()
	
	
	'If the current level sound is "bells"
	If Level_music[Party.Level] = "bells" Then
	
		'Stop Background Bells
		GetPooledChannel("Sound_Bell_1").Stop()
		GetPooledChannel("Sound_Bell_2").Stop()
		GetPooledChannel("Sound_Bell_3").Stop()
		GetPooledChannel("Sound_Bell_4").Stop()
		GetPooledChannel("Sound_Bell_5").Stop()
		GetPooledChannel("Sound_Bell_6").Stop()
	
	EndIf
	'If the current level sound is "dungeon"
	If Level_music[Party.Level] = "dungeon" Then

		If (Current_time &gt;= Fade_Out_Sound.Deadline_time) Then
		Fade_Out_Sound.Time_Delay = 100
		Fade_Out_Sound.Deadline_time = Current_time + Fade_Out_Sound.Time_Delay

			'Fade Out Background Music			
			If Background_Transfering_Sound_Volume &gt; 0.04 Then
			Background_Transfering_Sound_Volume = Background_Transfering_Sound_Volume - 0.04
			GetPooledChannel("Music01").SetVolume(Background_Transfering_Sound_Volume)
			EndIf
			If Background_Transfering_Sound_Volume &lt; 0.04 Then GetPooledChannel("Music01").SetVolume(0) Background_Transfering_Sound_Volume = 0
			
		EndIf

	EndIf
	'If the current level sound is "catacomb"
	If Level_music[Party.Level] = "catacomb" Then

		If (Current_time &gt;= Fade_Out_Sound.Deadline_time) Then
		Fade_Out_Sound.Time_Delay = 100
		Fade_Out_Sound.Deadline_time = Current_time + Fade_Out_Sound.Time_Delay

			'Fade Out Background Music			
			If Background_Transfering_Sound_Volume &gt; 0.04 Then
			Background_Transfering_Sound_Volume = Background_Transfering_Sound_Volume - 0.04
			GetPooledChannel("Music02").SetVolume(Background_Transfering_Sound_Volume)
			EndIf
			If Background_Transfering_Sound_Volume &lt; 0.04 Then GetPooledChannel("Music02").SetVolume(0) Background_Transfering_Sound_Volume = 0
			
		EndIf

	EndIf
	'If the current level sound is "forest"
	If Level_music[Party.Level] = "forest" Then

		If (Current_time &gt;= Fade_Out_Sound.Deadline_time) Then
		Fade_Out_Sound.Time_Delay = 150
		Fade_Out_Sound.Deadline_time = Current_time + Fade_Out_Sound.Time_Delay

			'Fade Out Background Music			
			If Background_Transfering_Sound_Volume &gt; 0.05 Then
			Background_Transfering_Sound_Volume = Background_Transfering_Sound_Volume - 0.05
			GetPooledChannel("Music03").SetVolume(Background_Transfering_Sound_Volume)
			EndIf
			If Background_Transfering_Sound_Volume &lt; 0.05 Then GetPooledChannel("Music03").SetVolume(0) Background_Transfering_Sound_Volume = 0
			
		EndIf

	EndIf


End Function
</textarea><br><br>Note1 {codebox} with curly brackets doesn't work. After Previewing post.<br>Note2 The sound files are missing from this post you can put your own.<br>The above code is just an idea for a game and fades the music during changing levels. It works perfectly in my game. (Not cross fade). <br><br></td></tr></table><br>
<a name="1258289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> As long as it works enjoy your work.<br><br>The more complex sceneries get, the more you will like generic functions doing things for you.<br><br>Eg. "crossfading".<br><br>[I skipped a bit of this posts content as this portion repeatingly crashed the blitzmax-servers and even was not "preview"-able - that is why the server was down for some time and only was up for some minutes before I tried to post my reply again]<br><br>Idea is:<br>- Crossfader-Type has method "PlayNext(audio, crossfadingDuration)"<br>- when calling this method:<br>- - a timer/millisecs()-storage is set so you know the "starting point"<br>- - the "audio" file is stored in the non-active channel of the two ones<br>- - if there is no active channel, the non-active channel gets the active one (maybe only fade in?)<br>- - start playing the channel of the audio file<br>- each time you update() the crossfader (should be done each "tick" then) you lower the volume of the active channel ( 1.0 minus (currentTime-startTime)/Duration = progress between 0.0 and 1.0). Raise the volume by progress (which is then 0.0 - 1.0).<br><br>It is pretty simple and straightforward. Most complex part is surely the switch "inactive" to "active" channel (to allow playing a new audio while crossfading is still in progress).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
