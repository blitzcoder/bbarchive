<!DOCTYPE html><html lang="en" ><head ><title >2D Camera + ViewPort + SetOrigin</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D Camera + ViewPort + SetOrigin</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >2D Camera + ViewPort + SetOrigin</a><br><br>
<a name="1152695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blackwater</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. I'm working with Blitzmax again after a long hiatus and need to revisit a few issues that I was never able to wrap my head around. In my future game I'm currently setting the groundwork for, I'm going to have a map much larger than what can fit on the screen.<br><br>For starters I'm working on an editor to create the game world and will need to be able to scroll around the level, placing various sprites. <br><br>So let's say my game world is 5000p x 5000p. The only way to move around is using SetOrigin, correct? I just discovered that the SetOrigin command takes inverted numbers. For example, to move 100 pixels to the right on the X axis, I actually have to put in -100 for X in SetOrigin, is that right? So in any direction, I have to add or subtract in the opposite direction that I'm really going?<br><br>Assuming that's the case (hopefully someone will confirm), how do I keep track of where I am in the actual game world? Do I just keep a global X and Y variable? So if my Origin is -500 for X, my global X variable will actually be 500? Is there a better way of doing this?<br><br>So that brings me to my second point, SetViewPort. The way I understand it, as long as my ViewPort matches my where I am in the game world, it will only draw that portion of it. I can have another function drawing a 1000 sprites but BM will only draw the ones within the viewport boundry? <br><br>Using the above example, if my xorigin (the adjusted one) is 500, I would SetViewPort for 500 (and Y, width, and height to match my screen), it's going to save a ton of memory, processing, etc by only drawing that part of my world?<br><br>Hopefully I wasn't too long winded :) If anyone can shed some light on this, confirm what I said or point me in a new direction it would be greatly appreciated, thanks! <br><br></td></tr></table><br>
<a name="1152706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's right. Your player moves in real coordinates to f.e. X=2000,Y=1200. This depends not on any SetOrigin() or SetViewport(): All actors, enemies, buildings and the player have the real world coordinates. So you can check collisions, etc...<br><br>The SetOrigin() can be set independent as you need it. You can set it to center the player: <br><pre class=code>SetOrigin -Player.X-ScreenWidth()/2, -Player.Y-ScreenHeight()/2</pre><br>will show the screen from X=1600 to x=2400<br><br>or to jump with the camera to the end of your world:<br><pre class=code>SetOrigin -5000+ScreenWidth(), -5000+ScreenHeight()</pre><br>will show the screen from X=4200 to X=5000<br><br>or fly over the scenery:<br><pre class=code>Step=step+1
SetOrigin 2000, -step</pre><br>will show moving Y from (Y=0 to Y=600) to (Y=1 to Y=601) ...to (Y=4400 to Y=5000) <br><br>The ViewPort for all this is always ....<br><pre class=code>0,0,ScreenWidth(),Screenheight()</pre><br>...which already cares about scenery outside of the visible window will not be drawn. <br>So ,there is no need to react on SetOrigin(). You only need SetViewPort, if you want to restrict areas inside the visible screen. <br><br></td></tr></table><br>
<a name="1152734"></a>

<a name="1152735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >blackwater</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's awesome, thanks. One more question for this topic, what is the best way to keep track of where the screen is in the game world? Should I just keep a global variable X and Y, and adjust that normally the same time I adjust SetOrigin? Or is there a better, more accepted way?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1152745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, I would do it this way too.<br><br><pre class=code>
....
' case screen to the player:
    ScreenXoff%=Player.X-ScreenWidth()/2
    ScreenYoff%=Player.Y-ScreenHeight()/2
'case else...
....
Function DrawAll()
     SetOrigin -ScreenOffX, -ScreenOffY
     ...
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
