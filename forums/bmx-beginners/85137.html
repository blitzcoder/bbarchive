<!DOCTYPE html><html lang="en" ><head ><title >BlitzMaxPath() doesn't work from a module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzMaxPath() doesn't work from a module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >BlitzMaxPath() doesn't work from a module</a><br><br>
<a name="962554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>I want a module to read a data file. So I can change some data without recompiling the module.<br>Therefor I need to address the correct folder, which is the module folder. <br>But I get an error when the the BlitzMaxPath() function is called:<br>"Unable to locate BlitzMax path"<br><br>If I just type<br>Print BlitzMaxPath()<br>and compile this it gives me the correct path but when I type the same line inside the module I get the error.<br><br>Any ideas?<br>(see BRL.MaxUtil for the BlitzMaxPath() function)<br><br>[edit]<br>btw. The function ModulePath(modID$) doesn't work correct!<br>I have a module 'color.mod' in the following path:<br>c:/Program Files/BlitzMax/mod/kistjes.mod/color.mod<br><br>Print ModulePath("color") returns:<br>C:/Program Files/BlitzMax/mod/color.mod<br><br>Hey? Where's kistjes.mod???<br>I would call this a bug.<br><br>[edit2] oops. When you type <br>Print ModulePath("kistjes.color") <br>it returns the correct path. Sorry :/<br><br>PS: as you can see this is all a Windows issue. Don't know what happens in MacOS or Linux. <br><br></td></tr></table><br>
<a name="962555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzmaxPath only works if the MaxIDE is running as far as i remember. It reads a runtime path variable.<br><br>Also try Modulepath("kistjes.color"). <br><br></td></tr></table><br>
<a name="962596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If this is for your own use then just write the path into your program.<br><br>But in general BlitzMaxPath() would be meaningless since there may be many versions of BlitzMax on one computer. I have two that show up in my Start..All Programs... list. There are others which are not even installed, but are simply backup copies in folders. <br><br></td></tr></table><br>
<a name="962603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If this is for your own use then just write the path into your program. <br></div><br><br>It's not only for myself. A collegue of mine is using the same modules, but he owns a Mac. It would be nice if the module was platform independent.<br><br>A bit more about the module and why I use an external data file.<br>The color module offers a Color type that is color space independent, as you can describe the color object in RGB, CMY(K) or HSV. <br>The color module also stores and offers a color palette (approx. 200 colors) that is used by our visual designers. This allows me to describe colors by there name (in stead of their RGB values). <br><br>The color table is stored in a data file. Each line has: name, red, green, blue.<br>I want to be able to modify the data file without recompiling the color module.<br><br>So, yes if it was only for myself, I could write the path into the module. That is exactly what I have done so far.<br><br>Suggestions are very welcome. <br><br></td></tr></table><br>
<a name="962609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure I follow what you want to do.<br><br>You want the module code, which is compiled into your executable, to read some data from the module folder?<br><br>Wouldn't it be better to copy the data to your application folder at build-time, perhaps as part of a post-build script?<br><br>Here's a small example which copies a DLL from a module folder to the application folder :<br><pre class=code>
# post build script
#
#
@define doPostInstall

	# only interested for Win32 platform
	
	if bmk.Platform() == "win32" then

		local path = utils.ModulePath("bah.fmod") .. "/lib/win32/"
		local file = "fmodex.dll"

		# copy FMOD
		sys.CopyFile(path .. file, %exepath% .. "/" .. file)
		
	end

@end

# run the post install
doPostInstall
</pre><br>The post-build script would run as part of the application build process.<br><br>Of course, you may be after something completely different, in which case my post is entirely pointless :-)<br><br>As Floyd says, a runtime (for your app) BlitzMaxPath() is useless, for the reasons he stated. <br><br></td></tr></table><br>
<a name="962624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How stupid of me!!!<br>I'm just transposing the problem from the module to every application using that module. <br>I understand what I was doing wrong but I do not know how to describe.<br><br>So, let's forget all about this and get back to work ;)<br>Sorry bothering you. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
