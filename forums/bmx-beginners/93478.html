<!DOCTYPE html><html lang="en" ><head ><title >Question on Lists</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question on Lists</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Question on Lists</a><br><br>
<a name="1069442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ranoka</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My question is, can a list be iterated/looped through backwards?<br><br><pre class=code>
For Local foo:BaType = EachIn fooList
    InterestingFunction(foo)
Next
</pre><br><br>The only solution I can think of is to reverse the list, iterate through it, and then reverse it again. Which doesn't seem very efficient.<br><br>Or go back through, and reverse all my logic to allow for only iterating through a list forwards.<br><br>Any help/tips appreciated! <br><br></td></tr></table><br>
<a name="1069443"></a>

<a name="1069444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use TLinks to start at the end and work back to the beginning.<br><br>[edit] Quick and dirty example:<br><pre class=code>
Strict

Local list:TList = New TList

For Local n:Int = 1 To 10
	list.addlast(String(n))
Next

Local link:TLink

link = list.lastlink()
Repeat
	Print String(link._value)
	link = link.prevlink()
Until link = Null</pre><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> quick and dirty: reverse the list.<br><br>very efficient: do what GFK says<br><br>wasteful but possibly easy to read later: treat the list like an array by accessing the elements by their location with ValueAtIndex().<br><br>going one wasteful step further, convert the list to an array and then access locations...<br><br>long story short, there's no built in way, GFK's post would be the most efficient, but the "native" approach (i.e. not digging into the links themselves) would probably be to reverse the list and go through that. I wouldn't expect that to be too prohibitively slow, though it will obviously depend on the size of your list and how critical speed really is for you...<br><br>working with copies of lists can be handy by the by: e.g. if you need to remove things from a list as you go through it. loop through a copy of the list and when you find something that needs removing, pop it out of the master list. Since you're iterating a different list you can make changes to the original... this can also be used sometimes in multithreaded applications to not have to lock a list for the entire time spent looping through it, so long as you keep in mind that the copy is only a snap shot of the list from when the iteration started...<br><br>I seem to have rambled, hope GFKs answer was the one you were looking for :0) <br><br></td></tr></table><br>
<a name="1069460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ranoka</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the explanation ima747, I do appreciate it.<br>I will probably use GfK's approach for what I'm doing. So thanks for that clear example GfK!<br><br>I'm starting off with quite a basic retro style game from the Spectrum, so speed isn't a great issue, and I currently have 7 lists each with 30 links, so I probably could do any of these and not notice a difference.<br><br>I have done some Flash and am used to using their slow but flexible arrays (which are nothing like normal/real arrays really).<br>I haven't really seen much use of linked lists in AS3. I've heard people doing C++ talk about them. I thought I would get some practice in by using them on my simple project.<br><br>Cheers again. <br><br></td></tr></table><br>
<a name="1069466"></a>

<a name="1069467"></a>

<a name="1069468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should use a While loop rather than a Repeat loop?? What happens if the list is empty? (I don't know, does the link come out Null) Also use the method Value() rather than accessing the field _value directly. Nicer that way.<br><br>You can also use list.Reverse() to reverse that list and list2 = list.Reversed() to make a second list of the same objects but reversed. They are slow operations. But if the list won't be modified anymore and you need to go backwards often, you could use them.<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069471"></a>

<a name="1069472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ranoka</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure a 2nd copy of the list would be that helpful, because I'm changing the order of the links every update: removing the back one and putting it on the front.<br><br>If I wasn't planning on changing the order of the contained objects so much I would probably just use an array.<br><br>So wouldn't the 2nd list be in a different order than a reversed order of the first after I've changed some links?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069535"></a>

<a name="1069537"></a>

<a name="1069538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So wouldn't the 2nd list be in a different order than a reversed order of the first after I've changed some links? <br></div>Yes, it would.  Its daft to maintain two separate lists when you can do the job [much easier] with one.<br><div class="quote"> You should use a While loop rather than a Repeat loop?? What happens if the list is empty? <br></div>Probably, unless you know for sure the list isn't going to be empty at that point.  Otherwise you'll get an attempt to reference null object error with my code as is.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> One possible longer term solution would be to extend TList and TListEnumerator<br><br>You could create a property on the list that determines the iteration order and then your new TListEnumerator would check this and act accordingly.<br><br>Only useful if you're likely to do this a lot. <br><br></td></tr></table><br>
<a name="1069574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ranoka</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To be honest, if I knew more about lists before I began and knew you could only iterate through them forwards, then I would have done my logic with that in mind. At this point I think I'll work around that rather than reversing the logic (maybe I'll refactor it later).<br><br>My lists always have something in them currently, but I think I'll need to animate them being emptied, so I'll keep the null exception in mind. Thanks for the heads up! <br><br></td></tr></table><br>
<a name="1069577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzmax.com/Community/posts.php?topic=82916#935611" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=82916#935611</a> <br><br></td></tr></table><br>
<a name="1069633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> removing the back one and putting it on the front. <br></div> Why not remove the front one and put it on back? <br><br></td></tr></table><br>
<a name="1069638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ranoka</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because that's the reverse of what I need, and would cause the game element to go backwards.<br><br>Also, I need to start with the back of the List so that it's drawn behind what's in front.<br><br>I could reverse both of these things, but then the data and code is harder to understand. <br><br></td></tr></table><br>
<a name="1069643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it a drawing list? Make a compare function to sort them by y coordinate and descending sort the list each frame. I do it in my big game and there is no performance problem with hundreds of units. <br><br></td></tr></table><br>
<a name="1069658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1807" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1807</a><br>it allows<br>local list:TListF = new TListF<br>for blah:yourtype = eachin list.From(start:TLink,howMany:int=-1)<br>or<br>for blah:yourtype = eachin list.ReverseFrom(start:TLink,howMany:int=-1)<br>or<br>for blah:TLink = eachin list.LinksFrom(start:TLink,howMany:int=-1)<br><br>if howMany is -1 then it will continue to the end or the begining as in the case of ReverseFrom. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
