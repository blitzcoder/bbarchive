<!DOCTYPE html><html lang="en" ><head ><title >Threaded TCP connection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Threaded TCP connection</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Threaded TCP connection</a><br><br>
<a name="671817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been messing around with TCP a couple days now.<br>Does anyone know how to achieve real threading, in such a way that your game does not hang when it for instance does a writeline/sendline? <br><br>Currently I have readline/writeline in my mainloop (through a server and a connection class, connection.update()), and with writeline, it will lock up completely, so I've resorted to using readbyte only when there's data on the socket. Then it doesn't lock up, but it's still not real threading, and I can't figure out how to do it just now.. Can anyone help? Basically I want to be able to fire off a couple lines to a stream, without worrying about a slowdown in my game.<br><br>(Yes I know of tnet/bnet/whatever mod, but I'm trying to learn the basics here, and I know UDP should be used for games, but the purpose here is sending data :)) <br><br></td></tr></table><br>
<a name="671841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does anyone know how to achieve real threading, in such a way that your game does not hang when it for instance does a writeline/sendline? <br></div>You can't. BlitzMAX doesn't support threading yet. <br><br></td></tr></table><br>
<a name="671848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not even possible by "faking it" then? <br><br></td></tr></table><br>
<a name="671850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Drago has written a real threadding mod for an old version of bmx. Don't know where you can download / get it though... :( <br><br></td></tr></table><br>
<a name="671860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is useless.<br>GC is not threadsafe so using the threading module on a system with more than 1 core (HT or real dual core / dual processor) will guaranteed lead to fatal errors!<br><br>and faking is only possible through timed programming so at best through eventhooks and a timer <br><br></td></tr></table><br>
<a name="672111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I think the word is not threading then. What I mean is for the connection to occur in the "background", in such a way the main game itself will not stall, even for a miliseconds.. Is that possible? <br><br></td></tr></table><br>
<a name="672115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No<br><br>Or I should say: no, not with one app<br><br>There is the possibility to create a "connection app" that you start through CreateProcess and that writes all needed data to console from which you can read it thought :-) <br><br></td></tr></table><br>
<a name="672187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I guess that's what they have done in bnet/tnet etc. <br><br></td></tr></table><br>
<a name="672346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So I guess that's what they have done in bnet/tnet etc. <br></div> No, not in TNet, and I guess not in BNet either. Even TNet stalls when you initiate a TCP connection. That is why I do not use Peer to Peer TCP yet. However if the location you connect to is close, the time to connect is just a couple of milliseconds, so you might not notice. UDP on the other hand is running while connecting without problems.<br><br>If you want to learn how to do it yourself I could send you the source to "TNet_Core". Which is a wrapper for the blitzmax socket functions to make the creation and working with sockets easier. Mail me and I will mail it to you (for free). It is what TNet Advanced is built upon. <br><br></td></tr></table><br>
<a name="672467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Wave, thank you very much!<br><br>I will mail you right away! <br><br></td></tr></table><br>
<a name="672473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> this might help:<br><br>1. use UDP<br>2. send tiny amounts of information per 'write'<br>3. do error checking in your program (TCP error checking overhead is expensive) <br><br></td></tr></table><br>
<a name="672609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I stated in my first post I won't be using UDP for this purpose, as it is to send data that must be sent/received properly. <br><br></td></tr></table><br>
<a name="672660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 2. send tiny amounts of information per 'write' <br></div>By 'tiny', he means more than 64 bytes, and less than 256.<br><br><div class="quote"> I stated in my first post I won't be using UDP for this purpose, as it is to send data that must be sent/received properly. <br></div>You can roll your own virtual connection, sequencing scheme, sliding window, reliability and congestion control on top of UDP if you want. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
