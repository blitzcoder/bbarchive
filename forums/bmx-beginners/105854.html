<!DOCTYPE html><html lang="en" ><head ><title >Multiplayer Networking</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Multiplayer Networking</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Multiplayer Networking</a><br><br>
<a name="1296301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all!<br><br>It's been quite a while since I've posted here on the forums (the search function does it's job well. haha.)<br><br>I'm looking to learn more about blitzmax's networking functions, and am running into trouble.<br><br>Any pointers would be greatly appreciated.<br><br>I've already found several posts on various Bnet and Gnet tutorials.<br><pre class=code>
<a href="/posts.php?topic=51171" target="_blank">Short GNet tutorial</a>

<a href="/posts.php?topic=80224" target="_blank">Online and Network Tutorials</a>

<a href="/posts.php?topic=59623#669513" target="_blank">BNet UDP Multiplayer Tutorial</a>

<a href="/posts.php?topic=57105" target="_blank">GNET tutorial that works?</a>
</pre><br><br>All of which have not been much help. It seems there are no recent Gnet tutorials and reading through Blitzmax's documentation has not helped me either.<br>Nor have I been able to find Raknet which appeared to at one point be a module from Brucey, and being worked on by Zeke as well.<br><br>However, all those posts are 6 to 10 years old. (boy does the time fly.)<br><br>What is the current consensus of what library to use?<br>Gnet? Bnet? Raknet? others?<br><br>I would like to begin developing a multiplayer function to a game I'm working on in my spare time.<br><br>Thanks for the help.<br><br>B <br><br></td></tr></table><br>
<a name="1296366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gnet builds on "eNet" (pub.enet). So you could facilitate the functionality of that library already. Seems it cannot handle broadcasts (one package to your complete local network) but dunno if this is a requirement for you.<br><br>@Gnet<br>there is a sample in the samples folder (samples/mak/gnetdemo.bmx)<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296386"></a>

<a name="1296395"></a>

<a name="1296396"></a>

<a name="1296399"></a>

<a name="1296400"></a>

<a name="1296401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! This might put me on the right track.<br><br>Looking through the gnetdemo sample now.<br>Wouldn't have thought to look in the 'mak' folder for it.<br><br>With my previous experiments in Blitzmax and Unity the biggest issue I have so far is the program works fine with all computers connected to my router, but doesn't see computers connected over the web. For example at my brother's apartment, he can't connect.<br><br>Thought it might be a port forwarding issue, so we've forwarded some ports I'd like to use (UDP). Still can't get my head around the exact way this whole thing works.<br><br>I'll have to see if the demo can connect from his place.<br><br>EDIT: I got the demo working between my laptop and desktop using my ipv4 address to connect to. In the past I've uses my outside address (I google 'whatsmyip') to have others connect to me. This never seems to work.<br>Is there something I'm missing?<br><br>Thanks again. <br><br></td></tr></table><br>
<a name="1296419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> portforwarding allows to reach a certain port on your computer via "wan ip" (internet ip) and a port.<br><br>so forwarding port 1234 to 192.168.0.2,port 5678 means any packet send to "wanip:1234" is received by your router and redirected to 192.168.0.2:5678<br><br>Now you need an app listening to the socket at port 5678. For UDP you have the problem, that you often just do not define which port is used at all. you send an packet and afterwards you know which port was assigned this time.<br>If you defined the sender port, than it should work already.<br>If you cannot define that port, you might think of using an additional TCP-channel (which allows defining the outgoing-port). <br><br>If you think you did everything correct, then setup WireShark (or another port sniffer) and check whether the data flow is correct or not (if internet-traffic is coming in etc). Setup the filter to your ports to skip the other packages flowing in and out of your NIC.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296426"></a>

<a name="1296427"></a>

<a name="1296430"></a>

<a name="1296431"></a>

<a name="1296432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been keeping the service and internal ports identical, thought that would be easier. Is this bad practice?<br><br>Here's my logic thus far.<br><br>I forwarded Service port 3849 to my ipv4 192.168.0.100 and Internal port 3849.<br>I give my external IP to my brother at his apt.<br>(PORT was set as a const)<br><br>Host was created using:<br><pre class=code>
Local host:TGNetHost=CreateGNetHost()
</pre><br><br>In the game code he executes the connect cmd in game which uses this code:<br><br><pre class=code>
If Not GNetConnect( host, externalIP, PORT ) Notify "Connect failed"
</pre><br><br>He typed everything correctly and my game was currently:<br><pre class=code>
GNetListen(host, PORT)
</pre><br><br>So im assuming my external ip will be translated by my router to my ipv4, and since both ports have been forwarded and the game is currently running it should work.<br><br>Is this how it works?<br><br>EDIT:<br>PS: Does it matter whether his port 3849 is forwarded on his router as well?<br><br>After using <a href="http://www.nirsoft.net/utils/cports.html" target="_blank">CurrPorts</a> it sees my game on the correct port, but does not say connection is established, does not see a Remote Port, or Remote Address, or Local Address.<br><br>Using <a href="http://www.yougetsignal.com/tools/open-ports/" target="_blank">YouGetSignal.com</a> says that the port is not currently open. I assume that is true because no data is currently being pushed or pulled through that port. <br><br></td></tr></table><br>
<a name="1296433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does it matter whether his port 3849 is forwarded on his router as well? <br></div>Usually, only the server needs to open its ports. But since eNet uses UDP both might need to, it depends.<br><br>I suggest creating your Client and Server and debugging them locally before trying to connect over the internet.<br>IE: Make sure the client and server can actually send messages to each other. <br><br></td></tr></table><br>
<a name="1296434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @grable<br><br>Currently everything works fine locally.<br>However, now I'm thinking that possibly his port wasn't forwarded. He said he removed the forward after initial testing. Maybe he forgot to put it back on. <br><br></td></tr></table><br>
<a name="1296435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check what kind of PortForwarding you configured on your router (TCP, UDP, BOTH).<br><br>More important is: what is your ISP. Do you have "cable" ? Often they give you "DS-Lite", which means you do no longer have your own IPv4 adress - you share it with 100 other users. So reaching your router from outside wont work that well then (how to know which of these 100 users was meant when addressing your WAN-IP).<br><br>So if this is the case, you wont be able to do it "the easy way". Dunno how to do IPv6 with BlitzMax though.<br><br>If you want, download XAMPP (or start another local server). Forward port 80 to your local ip and check if your brothers computer is able to connect to your "website" then (http://yourWANip).<br><br><br>@not currently open<br>It does not matter whether you send data in that moment, there is a listener for that port and one someone knocks at this port, it might react.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need to download a server. This sample will do:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Framework BRL.StandardIO
Import BRL.SocketStream

SuperStrict

Const PORT:Int = 80

Local server:TSocket = CreateTCPSocket()
If Not BindSocket( server, PORT) Then Throw "unable to bind port " + PORT
SocketListen server
Local client:TSocket = SocketAccept(server, -1)
If client Then
	Print "connected " + DottedIP( SocketRemoteIP(client))
	Local stream:TStream = CreateSocketStream(client)	
	While Not stream.Eof()
		Local s:String = stream.ReadLine()
		If Not s Then Exit
		Print "~t" + s
	Wend
	Print "sending response"
	stream.WriteLine "HTTP/1.1 200 OK"
	stream.WriteLine "Content-Type: text/html"
	stream.WriteString "~r~n"
	stream.WriteLine "&lt;html&gt;&lt;body&gt;SUCCESS&lt;/body&gt;&lt;/html&gt;"
	stream.Close()
EndIf
End
</textarea> <br><br></td></tr></table><br>
<a name="1296442"></a>

<a name="1296443"></a>

<a name="1296444"></a>

<a name="1296445"></a>

<a name="1296446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron<br><br>I have Time Warner Cable. After chatting with a representative online they said that they do use Dual Stack Lite.<br><br>So this might explain all my problems! boooo...<br><br>Checking on that XAMPP thing now.<br><br>@grable<br>Thanks for the code. It works for me when I use my ipv4 and my external ip. If an outsider used "http://my external IP" would they get the same 'SUCCESS' result?<br><br>Does this mean that I just have to learn socket programming in Bmax and all my troubles will go away? (...ya like it's that easy) <br><br></td></tr></table><br>
<a name="1296447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If an outsider used "http://my external IP" would they get the same 'SUCCESS' result? <br></div>Most likely yes. Your router/provider might do a loopback, so the true test is from someone outside their network.<br>But i doubt they ignore outside connections like that. So your good to go :) <br><br></td></tr></table><br>
<a name="1296449"></a>

<a name="1296450"></a>

<a name="1296451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly what is the difference between using BRL.SocketStream and Gnet?<br>Does Gnet just use sockets at the base level?<br>Will using socket streams be limited to TCP only?<br>I've read online that for games where time is a factor you want to use UDP.<br><br>My game only has a few variables that need updating as fast as possible:<br><pre class=code>
x, y, health, max health, animation frame, current action, missile x,y, 
</pre><br>everything else doesn't have to be sent over the web.<br><br>My idea is to have online interactions appear as smooth as possible as possible. Like the other player is just an NPC already in your world to help or hinder your progress. (Exactly like the Dark Souls series.)<br><br>My plan is to create a server running on my desktop.<br>Upon starting the game it connects to the server and it's IP gets added to a list.<br><br>The server then will take incoming requests from a player wanting to help/hinder another player when they trigger an event in game. The server will then select another player that is still online and in a compatible location, and hand over their IP.<br><br>Then the two players will be connected to each other rather than the server.<br><br>Does this make sense? Is this possible using BRL.SocketStream? <br><br></td></tr></table><br>
<a name="1296454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> An online game is perfectly doable with TCP. The reason people favor UDP is for low latency and broadcast options among other things.<br>But for small time stuff it doesnt really matter that much.<br><br>GNet uses ENet which uses UDP. So there are some layers in between there too, possibly adding to the latency. But again, for small stuff it doesnt matter.<br><br>For the intermediary server doing negotiations between clients, using TCP with a text protocol is good enough too.<br><br>For the direct connect stuff, all clients requesting another player would then have also have to have the relevant ports open. As they would then have to listen for outside connections. Which might not always be possible. As you know ;)<br><br>Doing it without direct connect takes more work though, and requires a faster internet connection and possibly machine to handle the data for all clients (though it doesnt look like there will be much of that in your case)<br><br>In any case for your purposes i suspect GNet is easier to work with as it syncs data between connected peers automatically whenever something changes.<br>And it would probably use less resources as well. <br><br></td></tr></table><br>
<a name="1296460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great information. Thanks!<br><br>I guess I'll just do some more trouble shooting and see where that leads me. <br><br></td></tr></table><br>
<a name="1296505"></a>

<a name="1296507"></a>

<a name="1296509"></a>

<a name="1296510"></a>

<a name="1296511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> - your provider might handle ":80" (just check that by test-using port 80 in your gnet-test)<br>- try out "BNetEx" (an udp-blitzmax-module) if you think there is a problem with enet/gnet<br><br><a href="http://community.bugbeargames.com/index.php?topic=6063.30" target="_blank">http://community.bugbeargames.com/index.php?topic=6063.30</a><br><a href="http://steamcommunity.com/app/107410/discussions/0/38596747866548836/?l=swedish" target="_blank">http://steamcommunity.com/app/107410/discussions/0/38596747866548836/?l=swedish</a><br>...<br><br>When trying that "port 80" thing (gnetdemo with 80 as port), check your openport-website if it is open then...<br>A question on the port 80 thing: did you port forward port 80 to your local computer or did it "just work"? (normally you should port forward, except your router made some assumptions, which I doubt)<br><br><br>If you made sure, that the problem is something with the ISP, then "hole punching" might help:<br>- somehow you need to know the IP and sender port of the other side:<br>- - eg. by sending a request to a public available server:<br>- - - client-&gt;server: "I want to host"<br>- - - server receives packet "ip:port, I want to host" and stores it<br>- - - client2-&gt;server: "I want to play"<br>- - - server receives packet "ip:port, I want to play" and stores it<br>- - - server-&gt;client packet "client2ip:port, wants to join your game"<br>- - - server-&gt;client2 packet "clientip:port, awaits your join"<br>- - - ...<br>- now both, client and client2 know the used IP and port of each other but are not able to send packets to each other (without port forwarding)<br>- hole punching uses the trick, that outgoing packages from a:portX-&gt;b allow b to answer to a the same way (b-&gt;a:portX)<br>- so the first packet from client-&gt;client2 is rejected, but once client2 sent a packet to client (at least tried so... as this gets rejected too) they both are able to send packets. Both opened their doors for the other client.<br><br>BTW: senderPort might differ in the case of multiple clients on the same computer. This is why you cannot rely on fixed ports but need to be aware of variations. This means, you use the port you get when receiving packets, not the port the sender says it uses.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296550"></a>

<a name="1296551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> In reference to the "port 80" thing, are you talking about the code grable posted?<br>If so: I ran it a couple of times, it gave the same result each time, first without the port forwarded, then with, then without again. It worked when I typed in <i>http://myIPv4</i> and <i>http://myexternalIP</i>.<br><br>I'm going to test the gnetdemo with my brother on service port 80 with it forwarded to my ipv4 to internal port 80, when I have the chance.<br><br>In regards to the hole punching, am I understanding this correctly?<br>Once two clients have sent a packet to each other, and those packets have been rejected, they can send more packets via the same route and they won't be rejected?<br><br>Say if A sends a packet to B saying "I'm here" and B sends a packet to A saying "I'm here". Both get rejected. But since neither has received a response they just send out the "I'm here" packet again and it will go through as a result that both have sent packets through that port already?<br><br>Is this a result of both A and B sending a packet from their 'port X' and because of that the port leaves itself open?<br>I'm not sure if I'm understanding 100%.<br><br>I'll continue testing Gnet, and if I think there's still a problem I'll check out that BnetEx module.<br><br>EDIT:<br>After reading the first link you posted, I'm wondering if my port forwarding through my router isn't actually forwarding the ports because my ISP uses DS - Lite. Do you think this is possible? <br><br></td></tr></table><br>
<a name="1296560"></a>

<a name="1296561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>B:</i><br><div class="quote"> Once two clients have sent a packet to each other, and those packets have been rejected, they can send more packets via the same route and they won't be rejected? <br></div><br><br>Yes, this is called "hole punching". The router accepts incoming packets as soon as one from "local" has sent a packet to the "incoming sender-ip:sender-port"  before.<br><br>More information: <br><a href="https://en.wikipedia.org/wiki/UDP_hole_punching" target="_blank">https://en.wikipedia.org/wiki/UDP_hole_punching</a><br><a href="https://en.wikipedia.org/wiki/Hole_punching_(networking)" target="_blank">https://en.wikipedia.org/wiki/Hole_punching_(networking)</a><br>(there is also a "flow" example there... which is maybe more understandable than mine).<br><br><br><br>@Port Forwarding<br>You said, you reached your server at port 80 without manual setup port forwarding - are you sure your brother reached your computer via the external IP?<br>IF so, I assume something is wrong then ;-)<br>How should his computer know which of your computers behind the modem/router is listening to :80 (the default port when just using "http://your.public.wan.ip"). What would happen if you had two computers behind your router, both running that sample posted above? This is what port forwarding is for.<br>It would only work, if your router is in "Bridge mode" (just exposing your whole local network to the public, no filtering, no securing) or with the old "PPPoe"-approach (your computer is the modem sharing its connection to the LAN).<br><br><br>@DS-Lite<br>As far as I know you cannot port-forward with DS-Lite (as I explained already) as many people share the same IP(v4). How should your provider know who is meant when your brother calls "http://wan.ip.of.many" ?<br><br>There are "IPv6 to IPv4"-helpers online, which translate "my.anyDynamicIPService.com" to your individual IPv6. I did not use them for now so I cannot help you on this. IPv6 is individual for each computer, so there is no need for port-forwarding (each computer is addressable individually). Maybe for "IPv6" we should ask for help in the community (with the right keywords in the thread... "IPv6 GNet/Multiplayer - How To?").<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296567"></a>

<a name="1296568"></a>

<a name="1296569"></a>

<a name="1296570"></a>

<a name="1296571"></a>

<a name="1296572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> To clarify @Port Forwarding<br>the <i>http:// my.public.wan.ip</i>  worked when I typed it in my own browser regardless of Forwarding Port 80 or not.<br>I just got my brother to try it just now, and it worked with the Port Forwarded. I didn't try it without the Port Forwarded, not enough time.<br><br>More importantly tho!<br>I got the gnetdemo working!<br><br><u>With</u> my Port 80 forwarded on my side and Port 80 <u>not</u> forwarded on his side.<br>He was able to connect to my public wan ip.<br><br>However, I was not able to connect to his. I assume because his port wasn't forwarded.<br><br>And I wasn't able to test any other Ports.<br><br><br>Good news though!<br><br>This means others can connect to my server and get data.<br>Then I can try hole punching to connect clients together.<br><br>More testing is needed. <br><br></td></tr></table><br>
<a name="1296577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Next try if your custom port works too (should do!).<br><br>Your brother does not need to forward port 80 (or your individual then) too. This should only be needed for the server, to be publically available.<br>Once the client (your brother) connects to the server, he already initiated a connection to you, and any response of you to your brother (sent to your brothers IP:port he used when sending his initial package) will then automatically be ok (you "hole punched" then already).<br><br><br>@you connecting your own public.wan.ip<br>This wont work, as your OS already knows your public-ip and therefor "loops" your request (you do not generate outgoing/ingoing traffic...).<br><br><br>@got the gnetdemo working<br>So what did  you have to do to make it work?<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a heads up, exposing known ports like HTTP(80) is not a good idea unless you have a battle tested server.<br>As there is rampant port scanning and vulnerability searching all over the internet at all times.<br><br>I recently made a HTTP server for serving files to friends, and having one open on port 80 publicly for 3 mins and i already got 4 random connections with bogus data.<br>Use ports &gt;1024 as they are not as often port scanned. <br><br></td></tr></table><br>
<a name="1296596"></a>

<a name="1296597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> having a server running for test scenarios means often: you installed an up-to-date-server. Also you wont run it 24hrs/day.<br><br>My NAS runs a simple webserver + php 24hrs/day and got not hacked or so. Of course people scan your services, they aren't all bad boys just because they do this.<br><br>Exposing something _non-web_ at port 80 is might be even better. Also there are some games around using port 80 because often restrictive firewalls (read: companies) allow HTTP/HTTPS/POP/SMTP/IMAP but nothing else.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1296612"></a>

<a name="1296614"></a>

<a name="1296616"></a>

<a name="1296617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im not saying never do it, just be sure that the server your using knows its shit. Like IIS, Apache, Nginx etc. And that it is properly secured.<br><br>I of course made my own HTTP server, and there are a lot of small things that needs to be taken into account.<br>Like error checking every little thing, making sure it can handle bogus data gracefully etc.<br><br>That is doubly so when using another protocol then the expected of the port, as then you WILL get "bogus" data.<br>Except in the case of TCP vs UDP of course. <br><br></td></tr></table><br>
<a name="1296627"></a>

<a name="1296628"></a>

<a name="1296629"></a>

<a name="1296630"></a>

<a name="1296631"></a>

<a name="1296632"></a>

<a name="1296633"></a>

<a name="1296634"></a>

<a name="1296635"></a>

<a name="1296636"></a>

<a name="1296637"></a>

<a name="1296638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> How reliable is this method?<br><br><a href="/codearcs.php?code=3121" target="_blank">"Get External IP" from code archives</a><br><br>It missed the last digit of my IP, so I changed this:<br><pre class=code>
ipEnd= Instr(MyParsedIP$,"&lt;/body&gt;",1)<b>'-1</b>
</pre><br>Just commented out that -1 and it works fine for my particular IP.<br>But doesn't that mean this method won't work perfectly for everyone, as IP's are not a standard set of numbers long.<br><br>However, this site takes forever to load in my bmax game. Users will probably task kill it thinking it's a bug.<br><br><br>I found this site <a href="http://ipinfo.io/ip" target="_blank">ipinfo.io</a> that just spits out the number with very minimal html and parsed it to get the right address for me.<br>Works instantly in my game.<br><br>I just changed this:<br><pre class=code>
ResultBank:TBank=LoadBank("http::checkip.dyndns.org")

and

ipstart=Instr(MyParsedIP$,":",1)+2
ipEnd= Instr(MyParsedIP$,"&lt;/body&gt;",1)-1
</pre><br><br>To this:<br><pre class=code>
ResultBank:TBank=LoadBank("http::ipinfo.io/ip")

and

ipstart=Instr(MyParsedIP$,"y&gt;",1)+1
ipEnd= Instr(MyParsedIP$,"&lt;/body&gt;",1)-1
</pre><br>I know this method will only work as long as the site remain up.<br><br>Any ideas on a better way to get your current External IP inside of Bmax without connecting to a server and have it give it to you?<br><br>(I'm thinking of trying to somehow parse a google search for 'what's my ip', because I'm sure google will always be online.) <br><br></td></tr></table><br>
<a name="1296640"></a>

<a name="1296642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> All those IP showing sites may ban you for excessive use though. And as you have noticed a lot of them can be slow too.<br><br>You can use raw sockets and use ICMP packets to ping an address, get your ip that way. But its a rather involved process.<br><br>Or you can cheat and call ping instead ;)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Framework BRL.BLitz

Extern "C"
	Function popen:Int( cmd$z, mode$z)
	Function pclose( f:Int)
	Function fgets:Int( p:Byte Ptr, sz:Int, f:Int)
EndExtern

Const PING_COMMAND:String = "ping -r 1 -n 1 "
Const DEFAULT_HOST:String = "www.google.com"

Local cmd:String
If AppArgs.Length &gt; 1 Then
	cmd = PING_COMMAND + AppArgs[1]
Else
	cmd = PING_COMMAND + DEFAULT_HOST
EndIf

Local f:Int = popen( cmd, "r")
If Not f Then Throw "unable to start ping"

Local ip:String = "unknown"
Local buf:Byte[1024]
While fgets( buf, buf.Length - 1, f)
	Local s:String = String.FromCString(buf)
	Local i:Int = s.Find("Route:")
	If i &lt;&gt; -1 Then
		ip = s[i + "Route: ".Length ..]
		Exit
	EndIf
Wend

WriteStdout "IP: " + ip
pclose f
End
</textarea> <br><br></td></tr></table><br>
<a name="1296657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the heads up on the banning. I don't wanna anger anyone.<br><br>@cheat ping call<br>I'm only getting 'unknown' back.<br>ip:string is not getting assigned somehow. <br><br></td></tr></table><br>
<a name="1296658"></a>

<a name="1296659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm.. try running it in a terminal and see what it spits out:<pre class=code>
ping -r 1 -n 1 www.google.com
</pre>The expected output:<pre class=code>
Pinging www.google.com [84.208.42.39] with 32 bytes of data:
Reply from 84.208.42.39: bytes=32 time=9ms TTL=59
    Route: 111.222.333.444

Ping statistics for 84.208.42.39:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 9ms, Maximum = 9ms, Average = 9ms
</pre>The IP should come after the "Route:" part.<br><br>Might be some version differences im not aware of (using Windows 10 here) <br><br></td></tr></table><br>
<a name="1296662"></a>

<a name="1296663"></a>

<a name="1296664"></a>

<a name="1296665"></a>

<a name="1296666"></a>

<a name="1296667"></a>

<a name="1296668"></a>

<a name="1296669"></a>

<a name="1296670"></a>

<a name="1296671"></a>

<a name="1296672"></a>

<a name="1296673"></a>

<a name="1296674"></a>

<a name="1296675"></a>

<a name="1296676"></a>

<a name="1296677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops dbl post <br><br></td></tr></table><br>
<a name="1296678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>First off, I really appreciate all your help my friend.</b><br>I'm using win 10 as well.<br><br>I'm getting everything except the <div class="quote"> Route: 111.222.333.444 <br></div><br><br>After googling ping cmd arguments I can't seem to find an <b>-r</b> argument.<br><a href="https://technet.microsoft.com/en-us/library/cc737478%28v=ws.10%29.aspx" target="_blank">https://technet.microsoft.com/en-us/library/cc737478%28v=ws.10%29.aspx</a><br>This doesn't show it exists.<br><br>Here's what I'm getting<br><pre class=code>
C:\Users\myname&gt;ping -r 1 -n 1 www.google.com

Pinging www.google.com [74.125.28.106] with 32 bytes of data:
Request timed out.

Ping statistics for 74.125.28.106:
    Packets: Sent = 1, Received = 0, Lost = 1 (100% loss),
</pre><br><br>and this if I leave out the args<br><pre class=code>
C:\Users\myname&gt;ping www.google.com

Pinging www.google.com [74.125.25.103] with 32 bytes of data:
Reply from 74.125.25.103: bytes=32 time=149ms TTL=40
Reply from 74.125.25.103: bytes=32 time=67ms TTL=40
Request timed out.
Reply from 74.125.25.103: bytes=32 time=56ms TTL=40

Ping statistics for 74.125.25.103:
    Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
Approximate round trip times in milli-seconds:
    Minimum = 56ms, Maximum = 149ms, Average = 90ms
</pre><br><br>Same results when I use Cygwin or Windows Powershell. <br><br></td></tr></table><br>
<a name="1296679"></a>

<a name="1296680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your using Windows 10 its there.. typing "ping" alone will show that.<br>Its supposed to trace the route the packets take as well as pinging.<br><br>But tracing takes time, so it seems to timeout easily for slow connections.<br>And now that i think about it that DS-Lite thingy might mess things up further, i dont know.<br><br>You could try increasing the timeout with "-w &lt;milliseconds&gt;", since your maximum is 149 try 200 or 250.<br>Or try increasing the number of pings with "-n &lt;number&gt;" and hope one of them goes through.<br><br>Once you have a recipe that works, you can plot them back into the sample and see if it manages to parse it correctly (it should, so long as "Route:" is present)<br><br>Though this all makes it a tad unreliable... :/ <br><br></td></tr></table><br>
<a name="1296681"></a>

<a name="1296682"></a>

<a name="1296683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, you're right.<br>Typing ping shows -r, but microsoft's website doesn't. meh..<br>I thought you might have add some extras installed or a different terminal or something.<br><br>now when I run it.<br><br><pre class=code>
C:\Users\myname&gt;ping www.google.com

Pinging www.google.com [173.194.203.105] with 32 bytes of data:
Reply from 173.194.203.105: bytes=32 time=51ms TTL=38
Reply from 173.194.203.105: bytes=32 time=52ms TTL=38
Reply from 173.194.203.105: bytes=32 time=43ms TTL=38
Reply from 173.194.203.105: bytes=32 time=47ms TTL=38

Ping statistics for 173.194.203.105:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 43ms, Maximum = 52ms, Average = 48ms
</pre><br><br>Slightly better ms, but still no Route: and any arg of -r # always timesout.<br><br><br>Usually I get quite decently fast internet.... Throttling?... dum dum DUM!<br>Maybe just a busy time of night here.<br><br>in cmd when I type 'ping' it says -r is (IPv4) only.<br>I feel like that's my problem.<br><br>and ya, makes it quite unreliable. :C<br><br><br>I've decided that I'll just execute the parsing of that website once upon first game launch and then save the users IP to a file along with the rest of the data.<br>Then as long as the data is there I won't need to bother the site unless there's a problem connecting in which I'll do it again.<br><br>I made my first little Gnet game thing tho, not very impressive yet, but it's on the way. Connected perfectly with my brother on ports 80 and 3849. I have both forwarded, he didn't.<br><br>Now to just write the server...<br><br><br>Little screenshot:<br><img src="http://imageprocessor.websimages.com/width/936/crop/0,0,936x508/mister-b.webs.com/screeny.PNG"> <br><br></td></tr></table><br>
<a name="1296684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems like the most reasonable way yeah.<br><br>Like the look of your game too, reminds me of those old Sierra games :) <br><br></td></tr></table><br>
<a name="1296685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br><br>Oh, those were my favorite. I love this art style and ASCII as well. <br><br></td></tr></table><br>
<a name="1296695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @port 80<br>Once your custom port works, do not use it - if one works, the others should do too.<br>Also, your brother does not need to forward that port too - except he "hosts".<br><br>You do not need to know _from_ which port the other players join your game, they use whatever port is available for them.<br><br>Imagine your game host being a post box. People handing in letters (that thing out of paper :-)) write their sender's address on it. These people will have to know where to find your post box ("abc street 123" - "abc street"=ip, "123"=port). From the moment of handing it in you know the sender's address and are able to hand back the letter if they forgot to pay for the stamp :-).<br><br>This example also shows, that address data could be faked...<br><br><br><br>@what is my ip<br>For this I have my "lobby" on my own server/website.<br>Just a simple PHP-Script/"API" responding to certain commands. So a "mygame/GetIP" returns the plain IPv4 of the requesting client (the game of the user) ,"mygame/ListGames" returns serialized data of currently announced games (gamename, playeramount, playermax, ..., hostIP, hostPort). "mygame/AnnounceGame?gamename=..." expects the gamename, playeramount... and adds them to the list of games, or updates the corresponding entry (gameGUID).<br><br>So this little script acts as "lobby" - your hosting game client informs the "lobby", everybody wanting to play your game knows that "lobby" (url and how to reach it), they do not need to know you. Once they want to play, the ask the "lobby" for the list of games. Now they know every game currently waiting for players (you could introduce filters for specific users or game titles... so the server only responds with a smaller list).<br>With that information you could eg. show a list of available games and upon a click on once of that games, the "/join ip:port" could automatically be executed.<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1297872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron<br>Thanks for all the help. Everything seems to run fine except one little hiccup.<br><br>My brother and I were both at our parents house over the weekend, so we did some testing. I'm using port 3849 exclusively now and it works perfectly well when I host and my bro connects to me using my IPv4.<br><br>The port has not been forwarded on my Dad's router.<br><br>The problem is when he hosts and I attempt to connect to him on his IPv4.<br>It doesn't work. I tried ports 3849, 80, 2500, and some others.<br>I couldn't get it to work when he hosted and I attempted to connect to him.<br><br>We were both running the exact same .exe file, and we both made sure our windows firewall wasn't blocking it.<br><br>I can't figure it out.<br><br><br>This might all work fine after I write a server, but I don't have the time to tackle that at the moment.<br><br>Any Ideas?<br><br>Thanks again! <br><br></td></tr></table><br>
<a name="1297898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would you try accessing that small "webserver" (post #9) on your brothers computer?<br><br>If this is not possible too, then something might block.<br><br><br>Like I said, it is good to have "wireshark" installed for such purposes: run it and it records all incoming and outgoing traffic. Now filter that to your specific port and voila, you see if your packets are going out, and if some packets come in in return.<br><br><br>Also make sure whether both of you are able to connect to their "server" locally (two instances of your app on one computer) - if this fails, then your code might contain bugs (eg. it fails on creating the socket or so).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to all contributors for some illuminating data.<br>One question though can one (router)port that has been forwarded to a particular port on one IP, be shared with another port on another IP on the same LAN.<br>Have fun Cps <br><br></td></tr></table><br>
<a name="1299601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did not really get what you want to achieve?<br><br>router port X<br>-&gt; computer 1 port X<br>-&gt; computer 2 port X<br><br>Think this kind of "relay" isn't possible that easily. You could sniff all incoming data on computer 1 and forward this to computer 2 on your own (to whatever port).<br><br>Another keyword is "unicast" - so similar to a video on a normal cable tv it is "broadcasted to all". Not all routers allow such unicasting.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks for the feedback/keyword I'll have to investigate. The object was to avoid setting up multiple ports on a router to forward to each computer (IP) that needed port forwarding on a local network, one port being easier from an admin point of view. hope this makes it clearer. Have fun Cps <br><br></td></tr></table><br>
<a name="1299651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> NO...just do not do that (=&gt; bad habbit).<br><br>Your router does know who sent a packet to an external receiver - this allows hole punching (allows to receive responses from the receiver to the sender).<br>Your router does _not_ know who is addressed when it receives an initial packet to "my-internet-ip:Port".<br><br>This is where port forwarding comes handy: it allows to guide incoming packets to the right receiver.<br><br>If you now would relay every packet to portX to all-local-computers:portY this might work.<br><br>You could check, what happens if you use port forwarding to 'mylocalip.255:portX" (so eg. "192.168.0.255"). 255 is most often the broadcast address of your LAN.<br>(check it by "ping -b 192.168.0.255" - multiple computers in your LAN might respond - in my case none of my systems responded, which seems "normal" for my setups). Maybe broadcasting via 255.255.255.255 works too.<br><br><br>If that would work, it might still lead to trouble: what happens if two computers in your LAN want to communicate with the same remote computer on the same port? How would your router know who the remote one wants to send a packet to?<br><br>What is often used is this approach:<br>wanIP:port1 -&gt; 192.168.0.1:port1<br>wanIP:port2 -&gt; 192.168.0.2:port1<br><br>so for the application on the client the port "port1" was used, but for the remote computer both clients have individual addresses: wanIP:port1 and wanIP:port2<br><br><br>In your app you need to attach the "public port" to some information packets so the receiver knows what address port to use. The "envelope" of the packet contains "wanIP:port1" but to answer, it should use eg. "wanIP:port2" (for the second computer).<br><br><br><br>Also do not forget:<br>- port forwarding only works for IPv4<br>- port forwarding does not work for IPv6 or ds-lite (multiple internet users share one single IPv4 address)<br><br>With IPv6 you do not need port forwarding as each computer has an individual (and publically reachable - make sure you are using a router then!) address.<br> <br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again, looks like IPv6 is the way to go. You have given me plenty to think about, I'll to put it to good use making my multiplayer things work over the internet instead of just over a LAN. Have fun Cps <br><br></td></tr></table><br>
<a name="1299687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> IPv6 wont work with IPv4-only connections (eg. mine - I downgraded from IPv6 with ds-lite to IPv4 as I offer some services for the computers of my parents and my smartphones).<br><br><br>Also I do not know how to tackle IPv6 with vanilla BlitzMax.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the warning I'll stick to IPv4. I'm going to absorb and apply what I've picked up from thread above. That way I'll avoid asking a question that leads back over old ground.<br>P.S. I'm using the GNet structure for network commands and the Gnet lobby for announcing that my server is ready for a client and providing the client with the servers name (encrypted).<br>All working well on a LAN (with an internet connection via a router). I'm just having to get to grips with the port forwarding methods described above to enable play over the internet. Have fun Cps <br><br></td></tr></table><br>
<a name="1299718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use a gnet-a-like networking basement:<br>- configurable local port (or range - in the case a port is already used, eg. second local client, other app ...)<br>- online lobby for making games known to remote computers<br>- local broadcast to make game available on LAN<br><br>If you host a game, the game with your WAN-ip and used port is send to the lobby.<br>If you want to join a online game, you ask the lobby for games, they send then the wanIP:port of the game host.<br><br>Connection is then established using the common functionality. the "joining user" does not need to do port forwarding then (hole punching) but I used to do port forward to ease the pain.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a quick look at your web site (nice). I assume that your lobby is in web space (not a local server) and runs under either php or java and that it contains all the information needed for connection between clients and servers in a data base. This looks like something I will have to learn, as the GNET lobby only provides;  session name, server name and seemingly the router IP as seen by the internet. Thus these exchanges about port forwarding have been really helpful.<br>As an aside; I do like the direct x7 direct play concept of a Game Unique Identifier (GUID) in a peer to peer environment (Jack Hoxley's articles) but that's not going to work for Mac's. Have fun Cps <br><br></td></tr></table><br>
<a name="1299795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry but I forgot to ask about communication failure timeouts over the internet. At the moment I'm allowing about 60 seconds before my programs report and recover from a communications error. This is plenty of time for a LAN, but what sort of delays have you allowed for in your over the internet games ? Have fun Cps <br><br></td></tr></table><br>
<a name="1299816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> the whole networking aspect is prone to be redone some time in the future.<br><br>I think delay handling depends on the game you do. It depends on whether the game is run on a server and the clients only display things and send their inputs - or whether each client computes the whole game on its own and just receives the input of the others.<br><br>If you use the second approach:<br>- read about "lock-step" (kind of simulation turns and waiting for inputs for the next turn), this might involve, that all your inputs could be stored as "commands"<br>- read about floating point determinism and/or avoid floats at all<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1299833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cps</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing 2d, 2 player alternate move based strategy games (The Viking Game, Tri-Tactics etc) so speed of connection isn't important.<br>Only the individual moves are communicated with each cpu processing the move data, so the second approach you described seems appropriate.<br>Thanks again for the pointers, I've got some serious reading to do. Have fun Cps <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
