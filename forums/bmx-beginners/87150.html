<!DOCTYPE html><html lang="en" ><head ><title >Equivalent of userlibs in BlitzMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Equivalent of userlibs in BlitzMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Equivalent of userlibs in BlitzMax</a><br><br>
<a name="987649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've asked this question before but never had an answer (2 years ago).  The question was; Is there a simple method to adapt a Blitz3D userlib into a Bmax one?<br><br>If there is no simple method, then is there ANY method of doing so? <br><br></td></tr></table><br>
<a name="987652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You just need to link to the DLL, either dynamically with GetProcAddress() or statically with Import (assuming you have a *.a file to link to - if not you can generate one with the GCC tools)<br><br>Then you need to convert the DECLS file to a set of declarations for BlitzMax, which basically means putting them in an Extern block. There are dozens of examples around. I'd pick one of Brucey's smaller modules and use that as a guideline. <br><br></td></tr></table><br>
<a name="987659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gabriel,  then would the following logic work:<br><pre class=code>Global lib% = LoadLibraryA("win32.dll")
function1 = GetProcAddress(lib,"function1@8")
function2 = GetProcAddress(lib,"function2@8")
function3 = GetProcAddress(lib,"function3@8")
</pre><br><br>But, I don't see how the parameters work yet... <br><br></td></tr></table><br>
<a name="987682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, that's more or less the dynamic way of linking. You don't need to do anything with the parameters when you assign them. You just need to declare the variables correctly. Turn SuperStrict on, so that you're not tempted to forget.<br><br>EG:<br><br><pre class=code>
Global ThisFunctionSendsTwoInts(First:Int, Second:Int)
ThisFunction=GetProcAddress(lib,"ThisFunctionSendsTwoInts@8")
</pre> <br><br></td></tr></table><br>
<a name="987684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> _33, note that you need to change the "A" suffix to a "W" since BlitzMax will only support Unicode in future releases. It will still work with the "A", but it would be good to get in the habit of using the "W" (and it will work with Vista and later versions of Windows). <br><br></td></tr></table><br>
<a name="987690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I must have missed the news that BlitzMax is dropping support for single-byte strings in the future. Isn't that going to break a lot of third party modules which use libraries which rely on them? <br><br></td></tr></table><br>
<a name="987693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I must have missed the news that BlitzMax is dropping support for single-byte strings in the future. Isn't that going to break a lot of third party modules which use libraries which rely on them?  <br></div><br><br>Don't remember that either -- although versions.txt in Blitzmax 1.34 does state this:<br><div class="quote"> ::::: IMPORTANT ::::: This will be the last release to support Win95/98/ME. <br></div><br><br>But I thought that was more because Win9x doesn't support the unicode stuff natively (it requires an additional DLL that you aren't supposed to bundle with your app), rather than them actively stripping out support for external non-unicode interfaces. <br><br></td></tr></table><br>
<a name="987694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I thought that was more because Win9x doesn't support the unicode stuff natively (it requires an additional DLL that you aren't supposed to bundle with your app), rather than them actively stripping out support for external non-unicode interfaces. <br></div><br>Also, Mark said that he didn't want to have to support Unicode and ANSI, too much of a hassle. <br><br></td></tr></table><br>
<a name="987703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I thought that was more because Win9x doesn't support the unicode stuff natively (it requires an additional DLL that you aren't supposed to bundle with your app), rather than them actively stripping out support for external non-unicode interfaces. <br></div><br>Yes, that's exactly what I thought too.<br><br><div class="quote"> Also, Mark said that he didn't want to have to support Unicode and ANSI, too much of a hassle.  <br></div><br>Well I'm all for removing hassle, but if a load of third party libs stop working, I would have thought that would be hassle for him too. Still, I guess it doesn't affect me much as I don't plan on updating BlitzMax before the release of SST and I was probably going to be using something other than BlitzMax for future games anyway. <br><br></td></tr></table><br>
<a name="987952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unicode is more widely accepted as a standard (mainly because of it's support for other languages), which makes it better for the long run; I'm sure that Mark knows this.<br>Anyway, with the way Microsoft is, they don't care that your applications are broken or anything, they'll just tell you to buy and program for a more recent version of Windows.  Case in point: even <a href="http://tinyurl.com/yc5wnrc" target="_blank">Windows XP is no longer for sale at Microsoft.com</a>.<br>Even so, <a href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT" target="_blank">it doesn't look like there will be very many broken usermade libs</a> for this reason.  At least, not for WinNT.  UTF-8 is supposed to be compatible with CP1252. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
