<!DOCTYPE html><html lang="en" ><head ><title >Question RE  Returning Null or 'Data' from Hook FN</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question RE  Returning Null or 'Data' from Hook FN</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Question RE  Returning Null or 'Data' from Hook FN</a><br><br>
<a name="894494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >USNavyFish</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey everyone, <br><br>Thanks for taking the time to read my question.  I'll keep things short:<br><br><br>What's the best way to keep hook functions from ignoring emitted events?   I understand that returning null effectively bleeps out the event, but it seems that all the other hook functions still take the time to 'look' at this nullified event.<br><br>I have a program with 5 or 6 hook functions, but only one of them is called frequently.  Instead of all 6 functions checking the event's data per emitted event, I'd much rather have the 'frequent' hook function check all events first, and completely intercept them if they are the appropriate type of event:  This would mean that 95% or more of all emitted events would be intercepted by that first hook function, requiring only 1 conditional for every event instead of requiring 6 conditional checks for every event.  This becomes significant because I am emitting tens of events per second.<br><br><br>I know this could be done quite easily through a hierarchical Select-Case block, acting as a 'Master Hook Function', but I'd like to keep my hook functions as separate as possible for reusability purposes.  Any advice? <br><br></td></tr></table><br>
<a name="894496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >USNavyFish</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yea, one more question -- is it possible to 'subscribe' to forum threads, and receive email notification when replies are made?? <br><br></td></tr></table><br>
<a name="894563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haven't really thought about it but I probably would go with a single object which check events. Other object resgister for 'special' events and are informed by the 'registrar'. Maybe a list of object is kept for each event in a TMAP and their 'registered' method is called which contains its own SELECT block. <br>I might have misunderstood the question though so post a simple example of your current solution and ay why it's not good enough.<br>.<br>You can't subscribe to threads. <br><br></td></tr></table><br>
<a name="894665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> IIRC i tried it as well and found the same behavior. When an event is 'in progress' it will be checked by any hook.<br>I used then instead a WaitEvent() loop with MyType.OnEvent handler which can easily switched during runtime.<br>Sometimes it worked also for me to peek the event in the queue and kill it before it reached the 'in progress' state or may kill all of them, depends on what you want to achieve:<br><pre class=code>
Function KillAllPendingEvents ()
    While PollEvent()
    Wend
End Function
</pre><br>Did you measure a performance hit? Because 5-6 hooks with 10-30 events per second doesn't sound too heavy if nothing is done actually. <br><br></td></tr></table><br>
<a name="894714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >USNavyFish</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating a "Master Event Hooker"  object sounds like a viable solution.   Instead of calling <pre class=code>Addhook EmitEventHook, ThisHookFunction</pre> <br>I would call "TMasterHooker.RegisterHook(TMyType)"  with some parameters to control hook direction.<br><br>Then, I would simply add a single hook for the "TMasterHooker", and call TMasterHooker.RegisterHook(TMyType) for each type to be hooked in order of most common to least common.<br><br>The MasterHooker would iterate through its internal list of registered hooks, checking IDs, and then make the appropriate function call. After returning from that function call, I would simply break out of the iteration loop to prevent the other conditional checks.<br><br><br>Not sure how expensive the custom type overhead in Blitzmax can be.  This solution may be more trouble than it's worth.   JSP - no, at this moment it's more of an intellectual exercise.   I have not sought to measure a performance hit.  This is all a fairly low priority on my todo list.  I was simply wondering if there was an easy or common way to shed a few conditionals.<br><br>Thank you all for your responses! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
