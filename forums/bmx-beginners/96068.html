<!DOCTYPE html><html lang="en" ><head ><title >CLS - speed measuring!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CLS - speed measuring!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >CLS - speed measuring!</a><br><br>
<a name="1110236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyBargee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, All!<br><br>I supposed, that CLS is a very slow function, but when I tried to measure it, I've got a problem. The CLS() function didn't want to work properly without... DrawText() function! When you put Drawtext() after Cls() everything was Ok, but if you try to use only Cls() the computer hung. <br><br>What should I do to measure the Cls() speed correctly?<br><br>Have a look the code:<br><br>' ---------------------------<br>SuperStrict               	<br><br> Global time1:Long=0<br> Global bb:Long=0<br> Global width:Int=800, height:Int=600, depth:Int=16, freq:Int=60 <br><br> SetGraphicsDriver GLMax2DDriver()	<br> Graphics(width,height,depth,freq,GRAPHICS_BACKBUFFER)<br> <br> time1=MilliSecs()<br> Repeat<br>	Cls()	<br> 	'DrawText("Text",10,20)<br> 	Cls()	<br> 	'DrawText("Text",10,20)<br> 	Cls()	<br> 	'DrawText("Text",10,20)<br> 	Cls()	<br> 	'DrawText("Text",10,20)<br> 	Cls()	<br>	If  (MilliSecs()-time1) &gt; 1000 Then Exit 	' 1 sec<br>	bb=bb+1<br> Forever<br> Print "Times=" + bb<br> Print "Times/5000=" + bb/5000<br>' --------------------------- <br><br></td></tr></table><br>
<a name="1110239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you only have the feeling it would hang. Fact is, it runs so fast, that it eats all performance. It remains no timer for  Windows to handle MouseEvents.<br><br>You should always add  a timer, that prevents BMax form eating all performance:<br><br><pre class=code>
Graphics 800,600
FPS=CreateTimer(60)
Repeat
     Cls
     Flip 0
     WaitTimer FPS
Until KeyHhit(Key_Escape)
</pre> <br><br></td></tr></table><br>
<a name="1110242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyBargee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you, Midmaster, for the nice idea!<br><br>On the contrary, if you check the time, you will see that Cls(),Cls(),Cls(),Cls(),Cls() will take much more time, than  Cls(),Drawtext(),Cls(),Drawtext(),Cls(),Drawtext(),Cls(),Drawtext(),Cls(),Drawtext() !!! Why?<br><br>And the question still exists: How to measure the Cls() speed? <br><br>I used the same approach and by now I've measured Drawtext(), DrawImage(), DrawRect(), SetcColor,  but Cls()! <br><br></td></tr></table><br>
<a name="1110336"></a>

<a name="1110337"></a>

<a name="1110445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ??????????? Why are you trying to measure Cls speed? When would you need to use more than 60 Cls a second?<br><br>Depending on the system and options, there may be a limit to the number of Cls you can call per second. That may be why it is seeming slow.<br><br>Edit: I confused Cls with Flip, but I guess my point still stands!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you really want to measure Cls speed then the loop should not call Millisecs() or KeyHit() or other "System" routines, which may also use significant amounts of time. I would suggest using a large, fixed number of calls to Cls, something in this style:<br><pre class=code>
time=MilliSecs()
For n = 1 To 10000
	Cls
Next
time = MilliSecs() - time</pre> <br><br></td></tr></table><br>
<a name="1110386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The speed of Cls is high! On my yery slow notebook below 1/500000 sec. Why do you want to speed it up?<br><br>The problem is your test. First test with 100, then with 1000 then with 10000 and you will see that the graphic card will get problems with too much CLS's commands <br><br>with 100 0msec<br>with 1000 1msec<br>with 10000 &gt;5000msec<br><br>So the time results of a too long test will say nothing about the real speed of one CLS.<br><br><pre class=code>SuperStrict
Graphics 800,600
Global time%=MilliSecs()
Global Maxi%=100 ' Or 1000 Or 10000
For Local n% = 1 To Maxi
	Cls
Next
time = MilliSecs() - time
Print time</pre> <br><br></td></tr></table><br>
<a name="1110408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyBargee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you.<br><br>1. "??????????? Why are you trying to measure Cls speed?"<br><br>I'm working on a project where I have to output a big stuff at the screen between two flips(-1). So, I have up to 16 msec to do it and I have to be sure about it, especially if the user has a very old computer... .<br><br>2. "The speed of Cls is high!"<br><br>You right! That's it! "the graphic card will get problems with too much CLS's commands"!<br><br>Let's try the full screen and 16 depth. Why? Because this modes influence on the Cls() speed results. For example, depth 32 takes more time...<br><br>Try to run my code from the first post. There are only 5 times Cls(), but you will wait for 5 minutes! May be the speed of Cls() is high, but why we wait for so much and why we can't get  "1/500000 sec" speed in my example?<br>However, if we put Drawtext() after Cls() in the example above, the speed will be Ok: the result will appear immediately. Why is Cls() so special? <br><br></td></tr></table><br>
<a name="1110435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This really is pointless - by definition you will never need to do more than one CLS each frame, at which point it's pretty much intantaneous. For argument's sake, just assume it takes 0ms and continue on. <br><br></td></tr></table><br>
<a name="1110446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your users are using a very old computer, then the speed of Cls is the least of your worries.<br><br>The first question is, do you need to do a Cls? For example, if you draw a background image that fills the entire screen, or the screen is filled with tiles etc, then you don't need it.<br><br>If you do need it, then that's what you need. You can't really do much about the cost of something you must do. <br><br></td></tr></table><br>
<a name="1110471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyBargee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to everyone,<br><br>I've got it!<br>:) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
