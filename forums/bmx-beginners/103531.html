<!DOCTYPE html><html lang="en" ><head ><title >How to Calculate the distance of a sound source?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to Calculate the distance of a sound source?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >How to Calculate the distance of a sound source?</a><br><br>
<a name="1247278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I would like to create some 3D sounds using sound pan and sound volume functions.<br><br>In my example I have one door which is the sound source and this door is in some coordinates on the map.<br><br>The door have its position on the map and the party of players have their position on the map too.<br><br>The map is a grid of squares and in this example we assume the door is at the position (x,y)= 10,10.<br>The party if is near to the door will hear the sound louder and if the party is far will hear the door more quietly.<br><br>But the party can hear the sound at the left or at the right of the sound source if it is direction is opposite of the door.<br><br>For example if the party position (x,y) = 10,11 means the party is in front of the door in distance 1 square and will hear the sound very loudly but the sound pan will be equal (0)<br>If the party strife to the left to the square 9,11 then it must hear the sound panned to the right.<br><br>How Do I calculate the distance of the party x.y from the door x.y to play my sound louder or quietly or panned to the left or right according the the party's and door position. For example if the door is at (10,10) and party is at (5,7). The distance calculation will be the same regardless if the party is in front of the door if see the door behind.<br><br>I use types for my door and my party.<br><br>Party.x<br>Party.y<br><br>Door[lvl,n].x<br>Door[lvl,n].y<br><br>The "lvl" and "n" are the variables for level and door number. Both are just types.<br>There will be a lots of doors so I will put them in a loop to check if there are a lots of doors or any sound source near or far to calculate the distance.<br><br>Thank you :) <br><br></td></tr></table><br>
<a name="1247281"></a>

<a name="1247282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This might help:<br><br><pre class=code>//get distance
dx# = door[lvl,n].x - Party.x
dy# = door[lvl,n].y - Party.y

distance# = Sqr((dx*dx)+(dy*dy));

//get direction
direction# = Atan2(door[lvl,n].y - Party.y, door[lvl,n].x - Party.x)
</pre> <br><br></td></tr></table><br>
<a name="1247308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of "distance" you should do this:<br><br>- calculate amount of "walls" between you and the source<br>- each wall cuts by X, each door in a wall lowers the cut<br>- direction of the source is depending on the doors you have in your current "room"<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1247323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your code was PERFECT. Thank you very very much. <br><br></td></tr></table><br>
<a name="1247952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are some interesting features you can do with sounds...<br><br>Some sounds do indeed come from a point source and so a radius squared fall off if appropriate.<br><br>But some sounds may come from different shaped sources.  So for example sound which comes from a line source rather than a point would fall off directly proportional to the distance, not the square of the distance....<br><br>For example if you wanted to make the sound of the ocean while standing on the shore of the beach you would reduce the volume of the sound directly with the distance between you and the ocean. Whereas if you wanted to make the sound of a gunshot then the fall off would be related to the square of the distance.... <br><br></td></tr></table><br>
<a name="1247977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> All of this sound-distance-calculations totally ignore barriers between you and the object.<br><br>rooms redirect sounds to doors (+ some "unclear" sound through the walls...damped).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1247981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to get complicated then I suppose you can take into consideration diffraction of the sound waves around objects depending on wavelength/frequency of sound as well as setting up interference patterns.....but that might be going too far. ....unless you're making a rock concert simulation.  ;-) <br><br></td></tr></table><br>
<a name="1247989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The original question was something containing doors...<br><br>It is not that hard to check the way "using doors" from source to target ... and you then could use the "shortest" (aka most powerful) way to play sound from ...<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1247996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh...Oops I kind of missed the bits about doors.  In a way you could almost use your pathfinding routine to evaluate this....kill two birds with one stone. <br><br></td></tr></table><br>
<a name="1248762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I with the code GfK gave , I managed to make my door (The source of the sound) it will not be and monster or spell or any kind of thing too. When you open the door you hear the door sound near and far and left and right according to the position of the player.<br>I haven't thought about cutting the sound. If the source is behind an obstacle like wall.<br>But the player can hear the sound up to 5 squares away,  so even if there is an obstacle or wall the player will hear the sound quietly and far. Cutting the sound completely ruins the mystery and curiosity of what sound you hear and the atmosphere of a monster larking behind a secret passage.<br>For now I managed to do the 3D sound effect. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
