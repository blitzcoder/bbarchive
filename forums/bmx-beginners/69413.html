<!DOCTYPE html><html lang="en" ><head ><title >Angle Problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Angle Problems</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Angle Problems</a><br><br>
<a name="776601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mothmanbr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working in a single AI for my game, so the enemies will dodge rocks and other obstacles. So I'm making a check to see if the path ahead is blocked. If it is, it opens the angle in 20 degrees and checks in both directions, and goes to the one that is unblocked. If both are blocked, then it picks one randomly. Once it is in the new path, it calculates the angle to the player and starts to turn again.<br><br>But there's a problem: sometimes instead of turning like 45 degrees to reach the player, the enemy turns 315 degrees. Since I check if the new angle is smaller or larger than the new angle and adjust it, I believe this is a problem with angles above 360 or under 0. Should I use a mod 360 to adjust the angle? I always hear Mod should be used rarely, so is there any other way to do this?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="776606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When did you hear Mod should be used rarely?<br><br>Anyway your problem isnt that the AI is chossing the wrong angle, but that it is turning the wrong way to get there. Its a problem between how your enemy turns, and where it wants to turn to. <br><br></td></tr></table><br>
<a name="776696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mothmanbr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been banging my head on this for a while now, and I really can't find out a way to do this.<br><br>I'm getting two angles, the current angle, and the new angle. I get the new angle using the ATan2 function, or just adjusting a bit if the enemy finds an obstacle. Anyway, I can't find a way to make him always take the shortest turn. The closest I got was with this: <br><br>If NewAngle &lt; 0 then NewAngle = 360 - NewAngle<br><br>If CurrentAngle - NewAngle &lt; 0 then<br>    Raises CurrentAngle until it reaches NewAngle<br>else<br>    Lowers CurrentAngle until it reaches NewAngle<br>endif<br><br>Well... When the enemy is north of the player position, it doesn't work. And sometimes he will take the biggest turn, when the current angle is something 300, for example, and the new angle is 50. 300 - 50 will give you 250, which is larger than 0, so he just lowers his angle until it becomes 50, when it would be way easier to just raise it to 410.<br><br>Any suggestions? Or a better way to do this? Thanks. <br><br></td></tr></table><br>
<a name="776697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If NewAngle &lt; -180 then NewAngle = 180 - NewAngle<br><br>etc<br><br><br>Basicly make your angle range -180 to +180 <br><br></td></tr></table><br>
<a name="776709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mothmanbr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks H&amp;K, I have to do this in all the angles I use, correct?<br><br>That means I have to check if it goes over -180 or 180 everytime I change an angle, right? Should I make a method where I just send the new angle and it puts it between the range for me? Or is there an easier way? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
