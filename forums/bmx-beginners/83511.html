<!DOCTYPE html><html lang="en" ><head ><title >Fixed rate logic</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fixed rate logic</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Fixed rate logic</a><br><br>
<a name="942134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> There have been many threads on these forums about various timing methods in Blitz and I now have a pretty good grasp on delta timing but what I am really looking for is a nice, easy to understand fixed rate logic explanation\example as the ones I have looked at seem to make the whole thing really overly complex sounding. <br><br>Please would someone be kind enough to explain it in a noob friendly manner for someone who has never used it before. I`m sure that there are many people new to such concepts that would appreciate a helping hand apart from me.<br><br>Thanks for any help,<br><br>Jason. <br><br></td></tr></table><br>
<a name="942154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make sure you calculations and frame drawing takes less cpu cycles than the computer has (ie make the program run slower than the computer can do), so that you can draw/calculate 1/25th of a sec(say) faster than 1/25th of a second, then Wait untill 1/25th of a second has finished<br><br>Probably easiest way would be you use the message stack, every 1/25(say) post a message to draw screen, and post a mesasge to do logic cycle(again lets say 1/25 of a sec).<br><br>As long as teh logic cycle takes less time than the next post for screen, and screen less time than the next post to logic, you game now updates rock solid at 25 frames a second/ (cept your bound to get stupid windows messages messing it up if either logic of drawing is nearly 1/50 of a sec) <br><br></td></tr></table><br>
<a name="942157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing fixed rate tweening, and have been for years, and I have to be honest. I didn't understand anything H&amp;K said. So if anything I'm about to say repeats on what he just said, it's not because I'm ignorant or that I'm suggesting it's wrong, I just couldn't follow it.<br><br>Fixed rate logic is really pretty simple. What you do is decouple your logic (logic is the collective term used for everything except rendering really, so stuff like moving your game objects around, collision, physics, all that stuff) from your rendering. So instead of calling update and render once each per loop, you may call each once, more than once or not at all, depending on how the game is running.<br><br>As the name suggests, logic is run at a fixed rate. So you pick a desired frame rate. This frame rate is for logic only and has nothing to do with your rendering frame rate, so I'll call it UPS - Updates Per Second - to help differentiate. Essentially, you're just deciding how many times per second you want to run all your game logic. If you have a lot of complex physics, you might want this as high as 60UPS, but most games can drop down as low as 30UPS and still be very responsive.<br><br>So each time you run your loop, you see if enough time has passed that another update is due. If your UPS rate is 30 then you'll be running an update as soon as (1000/30) 33.3 milliseconds have passed. If your game is able to run much faster, you can see that you will often run the main loop and that much time won't have passed. On these occasions, you simply won't call your logic, you'll go straight to rendering. If your game is running too slow and can't keep up, it may be necessary to run your logic twice. IE: If more than 66.6 milliseconds have passed since the last update, you'll need to update twice.<br><br>Now the problem that might have occurred to you by now is that things are going to be really jerky updating 30 times a second, and even more so when you render the same frame multiple times without calling your logic at all. And it would, if we stopped there, but we don't. What we then do is "tween" between updates. So if the time which has passed is only half way to the next update, what we then do is interpolate the position, rotation, scale, etc of everything in the scene so that it is half way between where you determined it would be at the end of the last logic update, and where it was at the end of the PREVIOUS logic update.<br><br>It's very important to understand that you're tweening backwards. I know it won't make sense at this point, but it works. You can't tween forwards because you don't know where things will be in a future update. Objects will intersect with other objects because you have not yet calculated collisions. So we always tween backwards.<br><br>And that's really the essence of the theory. For the practice, I highly recommend Gaffer on Games, whose article is excellent. Personally, I had a few problems getting my head around his theory, which is why I've given you my version as well.<br><br><a href="http://gafferongames.com/game-physics/fix-your-timestep/" target="_blank">http://gafferongames.com/game-physics/fix-your-timestep/</a><br><br>Incidentally, I'm not his crazy internet stalker. His code is not flawed. Gaffer worked for Dynamix on Tribes 2 and I think he's worked for Pandemic, Sony, etc since then. He knows his stuff. If you can get your head around his stuff, it deals with complex physics, multiplayer, whatever you'll ever have to throw at it. Makes stuff like bullet time spectactularly easy too. <br><br></td></tr></table><br>
<a name="942487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys, most helpful. Sorry for the late response. <br><br>Gabriel, that was a really good explanation. Any chance of a very simple piece of code (bare minimum) showing it in action?<br><br>I think a coversion of the Gaffer code with some comments would be a great help if you could spare a few minutes.  I would be most greatful :) <br><br>Also how would you do things like bullet time as you mention?<br><br>Jason. <br><br></td></tr></table><br>
<a name="942550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Gaffer code is classic but it took me quite a few readthroughs until I finally understood the very last bit.  Remember fixed rate logic means more complex drawing functions but easier logic code.  Delta time is the reverse i.e. more complex logic but easier drawing.  But the complications for both are really not that bad and frankly one of the two methods is essential if you don't want to rely on a timer or something. <br><br></td></tr></table><br>
<a name="942579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my games I use the method posted by Swerdnik years ago. It fixes the logic frame rate at a certain value, but it doesn't do complicated thing with drawing. I guess this means you could see stuttering in the graphics though that has never been a problem for me. But it could explain the cobwebs in my online guestbook.<br><br>Here's a post by Grey Alien ;) containing Swerdnik's code:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=42173#472662" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=42173#472662</a><br><br>The code is also posted by Mike Boeh himself near the bottom of this thread:<br><br><a href="http://forums.indiegamer.com/archive/index.php/t-3099.html" target="_blank">http://forums.indiegamer.com/archive/index.php/t-3099.html</a> <br><br></td></tr></table><br>
<a name="942581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This follows the Gaffer method, as far as I can tell:<br><pre class=code>
Global boxes:TList=New TList
'this is a box. It will accelerate under gravity, spin at a constant rate,
'and fade away as it gets lower
Type box
	Field ox#,oy#,x#,y#
	Field oan#,an#
	Field vx#,vy#,van#
	
	Function Create:box(x#,y#)
		b:box=New box
		b.x=x
		b.y=y
		b.vx=Rnd(-3,3)
		b.van=Rnd(-20,20)
		boxes.addlast b
		Return b
	End Function
	
	Method update()
		'remember previous state
		ox=x
		oy=y
		oan=an
		
		If oy&gt;600
			'if was off screen *last* frame, delete this box
			'shouldn't use current frame to delete box, because on render it might be interpolated back onto the screen
			boxes.remove Self
		EndIf
		
		'move to new state
		vy:+1
		x:+vx
		y:+vy
		an:+van
	End Method
	
	Method draw(alpha#)
		'work out position and rotation at *apparent* time
		cx#=ox+(x-ox)*alpha
		cy#=oy+(y-oy)*alpha
		can#=oan+andiff(an,oan)*alpha	'can't just do (an-oan)*alpha because what if oan=170 and an=-170?
		
		'fade depends on y-position so can use cy instead of keeping track of old fade and new fade
		fade#=1-(cy/600.0)
		
		SetAlpha fade
		SetRotation can
		DrawRect cx,cy,20,20
	End Method
End Type

'this just gives the difference between two angles
Function andiff#(an1#,an2#)
	an1=(an1-an2) Mod 360
	If an1&lt;-180 an1:+180
	If an1&gt;180 an1:-180
	Return an1
End Function



'init graphics
Graphics 800,600,0
SetBlend ALPHABLEND


'set up timing
Global dt#=.01
Global t#=0
Global ctime#=MilliSecs() 'must set ctime to current time because otherwise you do millions of logic steps in the first frame!
Global accumulator#=0

While 1

	'work out time elapsed since last frame started
	newtime#=MilliSecs()
	deltaTime#=(newtime-ctime)/1000.0
	ctime=newtime
	accumulator:+deltatime
	
	If MouseX()&gt;0
		dt=MouseX()/2400.0
	EndIf
	
	steps=0	'keep track of how many steps done this frame, just for curiosity's sake
	
	While accumulator&gt;dt
		If Rand(10)=1	'create a box every 10 logic steps, on average
			box.Create Rand(800),0
		EndIf
		
		
		For b:box=EachIn boxes
			b.update
		Next
		
		t:+dt
		accumulator:-dt
		steps:+1
	Wend
	
	'render stage
	Local alpha#=accumulator/dt
	
	'show some information about the speed of the simulation
	SetRotation 0
	SetAlpha 1
	DrawText "dt: "+dt,0,0
	DrawText "logic FPS: "+1/dt,0,15
	DrawText "steps: this frame: "+steps,0,30
	DrawText "display FPS: "+1/deltatime,0,45
	
	'draw the boxes
	For b:box=EachIn boxes
		b.draw alpha
	Next

	Flip
	Cls
	
	If KeyHit(KEY_ESCAPE) Or AppTerminate()
		End
	EndIf
Wend
</pre><br><br>QuickSilva, I suggest you have a go at working things out yourself for a while instead of coming here and asking for code, you'll get a much better understanding of how everything works. <br><br></td></tr></table><br>
<a name="942632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks for all of the info and links, still a little unsure but like Warpy says it`s probably best to give it a go myself. I`ll give it a go and post my results so you guys can tell me if I`m understanding things correctly.<br><br>One other thing I would like to ask though before I start, is tweening really needed or is it just the icing on the cake? Can the tweening be added later if need be without changing my game too much?<br><br>Finally, can tweening be added to delta timing and is it needed in the same way as with fixed rate logic? <br><br>Thanks again for everyones time with regards to this topic.<br><br>Jason. <br><br></td></tr></table><br>
<a name="942640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have an example I could share as I've really never used Max2D, and an example using TV3D would probably confuse you ( Quaternions and matrices, it's all 3D. )<br><br>Is tweening really needed? Not necessarily, but you will need to increase your logic rate if you don't use it. With tweening, your logic can go at 30 UPS or even 20 or 15 and still be very smooth and responsive. Without tweening, you would need to run your logic at least 60 UPS or possibly much higher. I've seen people running their logic at 100 or even 200 UPS. If your logic is very simple, a casual game for example, then this might be fine. With a physics engine, AI, pathfinding, etc, 200 UPS would kill you.<br><br>Can tweening be added later? Yes, but I'd advise against it. In theory it shouldn't be too hard, but you might program things in a way which makes it difficult to add tweening later. If you do everything with tweening in mind, you'll avoid that.<br><br>No, tweening can't be added to delta time, because tweening is a visual update without a logic update. Delta time doesn't let you update visuals without updating logic, so there would be nothing to tween between.<br><br>No, it's not necessary, or even advantageous to tween with delta timing, for the same reason. Delta timing is all about going as fast as you can, so there's never anything to tween.<br><br>Tweening is purely about keeping the screen updates as smooth as possible when you're running at a low logic rate. That's not the problem with delta timing. The problem with delta timing is that you can't use it with a physics engine or any kind of numerical integration or any kind of calcuation where the result must be consistent, because your simulation can and will "explode". Also you can't lower the rate of your logic right down with delta timing, which can be vital if you're CPU bound, as most games are these days. These are the problems that are solved by using fixed rate logic. Tweening is just something you add to fixed rate logic to ensure that you're not sacrificing any visual smoothness in order to fix all those other problems. <br><br></td></tr></table><br>
<a name="942652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for your insight, Gabriel <br><br></td></tr></table><br>
<a name="942655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gabriel that has help me understand things a great deal better. This thread has really helped in general.<br><br>One a final note before I go and put this into action, with delta timing I can simply set the delta value to delta*.1 to get slow motion (bullet time effect) I cannot see how this is done with fixed rate logic. Is it simple to do?<br><br>Jason. <br><br></td></tr></table><br>
<a name="942664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same thing with render tweening. Just pass a smaller timestep to your logic code and let the tweening carry on as before. Obviously your timestep won't be fixed if you pass in a smaller timestep, but so long as the value is constant during bullet time and constant out of bullet time ( ie: you're only ever passing in two different values ) it shouldn't cause any problems.<br><br>You can also pause everything in your game with this too. Just pass 0 to your logic and if your logic code is correct, everything should stop. <br><br></td></tr></table><br>
<a name="942674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, thanks :)<br><br>Jason. <br><br></td></tr></table><br>
<a name="942706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Foppy: Wow that's ancient, and also in BlitzPlus.  I adapted that for my framework when I started using BlitzMax an added in a delta element for ultra smoothness, but it means it's no longer "proper" Fixed Rate because varying sizes of delta can get passed into the logic functions.<br><br>@QuickSilva: Yeah like Gabriel says choose a method, test it, make sure you understand it (like how it applies to movement, acceleration/deceleration, gravity, timers, drawing etc.) and then stick to it.  Changing timing methods mid game would probably be a code refactoring nightmare. <br><br></td></tr></table><br>
<a name="942713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed rate with higher logic cycles like Ga's framework is ideal for today's modern machines. For older computers I still like delta where each loop does 1 logic/render update. As long as you cap the delta min/max it's a breeze to code. <br><br></td></tr></table><br>
<a name="942793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There`s an example in Krylars book called `The Rolling Timer`. After reading through this thread I assume that it is basically doing the same thing. Am I correct or is this a different method altogether?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

; Initialize our main timer.
Main_Timer=Millisecs()

While Not KeyHit(1)
    ; What`s the difference in time since our last check?
    ElaspedTime=Millisecs()-Main_Timer
    
    ; Slowing donw. Clamp update to 40 FPS. (1000/40=25)
    If ElapsedTime&gt;25
        ClampValue=ElapsedTime/25
        For i=1 to ClampValue
            ; Update objects here. 
        Next 
        
        ; Add appropriate offset to Maint_Timer
        Main_Timer=Main_Timer+ClampValue*25  
    Else
        ; Update objects as normal and reset Main_Timer to current time.
        Main_Timer=Millisecs()
    EndIf
Wend

</textarea><br><br>@Grey Alien :<br><br>Your framework uses one of the smoothest timing methods around. Do you use tweening or is the high logic rate that you use (200 I recall) enough to avoid this? You also say that you use a delta element for extra smoothness. How do things look without this added?<br><br>Also how is the slow motion achieved in your framework if you do not mind me asking? Can you give me a small example of what needs to be added to make this work?<br><br>Thanks,<br><br>Jason. <br><br></td></tr></table><br>
<a name="942858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @QuickSilva:  Yeah I use 200 logic updates per second.  This is normally 3.something logic updates per frame. For the first 3 whole logic updates Delta is 1 and for the last update Delta is &lt;1.  This makes it very smooth.  Without the final fractional delta it is less smooth.  Slow motion was achieved by applying a multiplier to delta (the multiplier is less than one).  Did you see this in action yet with the bullet time on the Mega Pill explosion in Unwell Mel (level 7), it's rather spectacular :-) <br><br></td></tr></table><br>
<a name="942872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I did. It does indeed look very cool in action. You did a great job on that game. Thanks for answering my question too.<br><br>Jason. <br><br></td></tr></table><br>
<a name="943049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ MGE or anyone else who knows the answer,<br><br>When you say cap the delta values min and max values could you please explain how this would be done? <br><br>Jason. <br><br></td></tr></table><br>
<a name="943066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let's say the game experiences a huge delay and instead of Delta being in a "normal" range you get a silly value like 200, well then everything would move WAY too far so you are better off capping it by saying If Delta&gt;2 then Delta=2.  2 is just a Max number I've picked here but it could be whatever you feel is suitable.  Not quite sure why you'd cap the lower value though (cap is also probably the wrong word for a lower value unless it goes negative but Delta shouldn't do that unless the timer rolls round on the PC, so you could cap it at 0.) <br><br></td></tr></table><br>
<a name="943126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah I see, so simple :) Thanks for the explanation.<br><br>Jason. <br><br></td></tr></table><br>
<a name="943179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> After taking in all of the great info provided in this thread I`m finally starting to understand things. I just wanted to say a big thanks once more to everyone who helped. I`m sure that this thread will help many others too in the future.<br><br>One thing I wanted to ask is that delta timing never seems to be quite as smooth as fixed rate logic. Is this common? Can both methods be made to produce the same smooth look? I`ve even tried a steady delta timing method where the delta only gets updated if it changes by a certain amount. This is still not as smooth as fixed rate timing. Here`s the link to that code,<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=431" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=431</a><br><br>After seeing the benefits I am starting to like fixed rate logic more and more but I would still like to know if the same smoothness can be achieve with delta timing.<br><br>Jason. <br><br></td></tr></table><br>
<a name="943203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is how I do it<br><pre class=code>
Global OldMillisecs:Long=MilliSecs()
Global NewMillisecs:Long=MilliSecs()
Global DeltaString:String = CurrentTime$()
Global DeltaTimePassed:Long = 0
Global DesiredFPS:Long = 60

Global UserUpdate:Long = NewMillisecs

Function CheckDeltaTime()
	'called every cycle but updated every second
	If CurrentTime$()&lt;&gt;DeltaString
		OldMillisecs = NewMillisecs
		NewMillisecs = MilliSecs()
		DeltaString = CurrentTime$()
		
		DeltaTimePassed = NewMillisecs - OldMillisecs
	EndIf
End Function
</pre><br><br>then call the CheckDeltaTime at the end of the main loop and to do a check do this (DesiredFPS is something like 60 for 60fps)<br><pre class=code>
	If MilliSecs()&gt;UserUpdate+ ( DeltaTimePassed /DesiredFPS )
            'update goes here
        Endif
</pre><br><br>Hope it helps <br><br></td></tr></table><br>
<a name="943206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> One thing I wanted to ask is that delta timing never seems to be quite as smooth as fixed rate logic. Is this common? Can both methods be made to produce the same smooth look? <br></div><br>Yes, it's common that fixed rate logic with tweening will be smoother on machines which can cope well with your game, simply because you spend more time rendering and less time needlessly updating logic. Unless you run your logic at a very high rate, in which case, it will be more or less the same. On slower machines, where the computer is struggling to keep up, I would expect delta time and fixed rate logic to produce similar results. <br><br></td></tr></table><br>
<a name="943310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Grey Alien :<br><br>You mention that you use a delta value also in you timing code. Is this a replacement for tweening or do you just choose not to tween? How does your timing code look when you set a low logic rate of say 10? Does your delta value have the same effect as tweening?<br><br>@ All<br><br>The tweening part seems to be the most difficult to implement. Is it hard to do? This is what I am struggling with the most I think. I could just leave that part out but I want to try to understand it.<br><br>Also what sort of machines (spec-wise) would be capable of running at a logic rate of 200?  <br><br>Jason. <br><br></td></tr></table><br>
<a name="943326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Foppy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also what sort of machines (spec-wise) would be capable of running at a logic rate of 200? <br></div>It depends on the code that is executed. But with my games I have no problem running them at 200 fps on my 6 year old 1.7 Ghz pc. If I were to write an RTS game with lots of pathfinding computations I would program it in such a way that one computation is divided over multiple logic frames. <br><br></td></tr></table><br>
<a name="943333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The tweening part seems to be the most difficult to implement. Is it hard to do? <br></div><br>No, it's a piece of cake in 2D. You're just doing linear interpolation between two positions, two scales, two colors, two rotations, etc. I suppose the rotations offer the biggest challenge since you would need to ensure that they tween the correct way. IE: Interpolating between angles of 1 and 359 would need to be done the short way and not the long way. But even that is just a case of a simple condition to check for it.<br><br>In 3D, it's slightly more difficult because you can't tween euler angles and you have to use quaternions which can be easily interpolated with a Spherical Linear intERPolation. In 2D, it's dead simple. All you're really doing is the exact same equation you were doing with delta time except that instead of moving something by 2*Delta pixels you're positioning it at (End-Start)*Tween pixels. <br><br></td></tr></table><br>
<a name="943348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent. I finally think that I understand it now.<br><br>Cheers guys!<br><br>Jason. <br><br></td></tr></table><br>
<a name="943391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to get the true running speed of my program using fixed rate logic?<br><br>With delta timing you can set flip to false to get a true reading but if you do this with fixed rate logic it peaks at a certain value. I`m assuming that this is the correct behaviour or am I missing something?<br><br>Jason. <br><br></td></tr></table><br>
<a name="943504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> @QuickSilva: If the logic rate was reduce below about 60Hz with my method it would start to look crappy (because there is no tweening, that's for rendering only).  The delta is not used for tweening, it just smooths out the final logic iteration per frame. <br><br></td></tr></table><br>
<a name="943515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Grey for clearing that up. <br><br>With tweening, size, rotation, scale etc... obviously need to be tweened but what about animation frames? Do we need to do anything fancy with those incase a frame may not have been the same half a step back in time? Is this being too picky or does it need to be looked into.<br><br>I`m talking purely 2D games here. Would there be any visible benefit from doing this? I`m guessing not but I just wanted to ask those that may have tried to do it in their own work.<br><br>Also the way I understand it is that if you are running at a logic rate of 10 you are saving more cpu time than if you are doing a 200 logic rate. When calling up the task manager to see if this is true both values are giving me about the same cpu usage. Why is this? Adding a delay 10 into my main loop lowers this value in both cases. Is adding this good practice or not?<br><br>Finally, logic updates can vary between frames, rendering only ever occurs once per frame. Is this correct? The rendering part is now confusing me a little as when I try to calculate my true fps it seems to reach a limit and then stop. I`m not sure why this is, I`m obviously misunderstanding something with regards to when the rendering takes place. Maybe this is the correct behaviour? <br><br>Should I be using flip false or flip true? Are there benefits to each method? Flip true seems to keep the cpu usage at a much lower reading but should I locking to the refresh rate or not? <br><br>Any further advice would be most appreciated.<br><br>Jason. <br><br></td></tr></table><br>
<a name="943814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes you would need to tween anim frames too or it would look bad.<br><br>I used Flip 1 because I don't like vertical tearing.  It looks much nicer imho for 2D games. <br><br></td></tr></table><br>
<a name="943820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> With tweening, size, rotation, scale etc... obviously need to be tweened but what about animation frames? Do we need to do anything fancy with those incase a frame may not have been the same half a step back in time? Is this being too picky or does it need to be looked into. <br></div><br>Yes, you'll need to tween animation speed too.<br><br><div class="quote"> Also the way I understand it is that if you are running at a logic rate of 10 you are saving more cpu time than if you are doing a 200 logic rate.When calling up the task manager to see if this is true both values are giving me about the same cpu usage. Why is this? <br></div><br>No, you're not saving the CPU time, you're using it more efficiently. Instead of running the logic 200 times just to keep the screen updates smooth, you're spending all your time rendering instead, as rendering is what determines the smoothness of your visuals. Now there may be a game whose logic needs to run 200 times per second, but I don't think I've ever seen one.<br><br><div class="quote"> Finally, logic updates can vary between frames, rendering only ever occurs once per frame. Is this correct? <br></div><br>With fixed rate logic? No. Either can happen multiple times per frame. If rendering only ever happened once, you wouldn't need to tween. If you're on a fast machine, you might have time to render 5 or 10 frames for every logic update. <br><br><div class="quote"> Should I be using flip false or flip true? Are there benefits to each method? <br></div><br>I'm a big advocate of Flip True. I can't see any sense in using anything else. If you were making a 3D first person shooter, I suppose I'd recommend having it optional because there are FPS fans who insist on having every frame rendered and don't care about tearing. Personally I find tearing very distracting and quite unprofessional. Having said that, Resident Evil 5 tears like a myopic origami expert, so I guess some people don't mind it. <br><br></td></tr></table><br>
<a name="943893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry i haven't read everything in this thread other than someone was looking for a simple example of fixed steps with interpolation.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2039" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2039</a><br><br>this is something I posted a while ago in code archives, IMO this is as simple as it gets for an example.<br><br>p.s.  I would like to add that tweening is the smoothest possible solution other than pure delta timing.  With higher FPS you have more precise motion, which only gets smoother with better performance.   Fixed timing without interpolation has capped FPS, so if you run your updates at 200Hz and your machine is capable of rendering the game at 1500 fps, you will max out at 200FPS, anything higher than that and you're drawing the same frame more than once. <br><br></td></tr></table><br>
<a name="943918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would not say any one method is the "smoothest possible".  As long as you update every vertical refresh, it will be as smooth as it can be. <br><br></td></tr></table><br>
<a name="943921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As long as you update every vertical refresh, it will be as smooth as it can be.  <br></div><br>Of course it won't. If it moves in uneven amounts (which it does in anything other than tweening or pure delta timing) then it won't be smooth. <br><br></td></tr></table><br>
<a name="943922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks HrdNutz for the link, it confirms that I am doing things correctly which is good :)<br><br>I now have the movement, rotation and scale of my objects all working properly with tweening thanks to the advice of all who have help me for which I am most greatful. I`m quite proud that it is working so well.<br><br>The final component that I still cannot grasp though is how to tween the animation frames. I`m working on a 2D game so how can I tween the frames as they are integer values such as frame 1,2,3 etc... Should I be tweening when the frames get updated instead? I`m a little confused with the theory.<br><br>Another question that this brings up is with counters. Should I be simply using frame_counter:+1 each logic update or should I be using a version like if millisecs is 500 millisecs greater then last time then update the frame_counter? Will both versions work or should I make sure I only update my counters by using the millisecs method?<br> <br>Hopefully this will be the final question and then I will have a good grasp on what I need to do.<br><br>Overall I have really started to appreciate the benefits of this timing method and the smoothness it brings.<br><br>Jason. <br><br></td></tr></table><br>
<a name="943924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry TaskMaster, what i meant was "theoretically" smoothest possible  by measuring FPS with no vertical sync.  In reality rendering cant really show faster than a monitor can refresh itself regardless if the app is waiting for vertical refresh or not.<br><br>edit: tweening also deals with all time remainders inside the render loop, so you don't get some odd and uneven movement due to remainder. <br><br></td></tr></table><br>
<a name="943927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> @quicksilva<br><br>im not sure what you mean by tweening frames, because you cannot interpolate between two textures unless you do some crazy stuff like morphing.  If sprite frame rate isn't tied directly to logic, aka you have a sprite and you just want it to keep playing the animation at the same speed regardless of updates, then animation code should just go into your render routines and not be part of logic updates.  If you require that your animation is tied directly to logic, aka animation is exactly 2 seconds long, and at the end you want to update something in logic, then you should probably figure a way to update the frames in your logic loops and not rendering. <br><br>basically you should be setting which animation to play inside logic updates, but run the timing and frame updating code inside render routine, it really doesn't have much to do with logic at all, unless your animation frame is dependent on some game logic state.  If any of your animations exceed your update time, for example you run your code at 10Hz and animation plays at 24FPS, you cannot update your frames inside logic, just not enought UPS.  Watch out if you have animation that you want to play at 100FPS (many many frames) but the app FPS is running at lower speed, then you have to skip some frames to make sure the animation is playing at proper interval.<br><br>As for frame counting you want to use frame:+1 inside the logic loop, because you are guaranteed updates at a precise interval.  This is how you can reproduce behaviours and bugs exactly every time.  IF you want to have variable update frequencies, like all of a sudden you want to change the frequency from say 30 to 60Hz, you should keep track of application time, where you accumulate the UPDATE-TIME (dont use real delta here, use the fixed one)  the 'fixed' delta is your update time, which you use to scale everything just like in delta timing, except this delta never ever changes, so you can depend on it.<br><br>the whole idea about fixed intervals is that your app goes through EXACTLY SAME STATES every time you run it, and it will produce EXACT SAME ANSWERS every time.  Something not possible pure delta timing. <br><br></td></tr></table><br>
<a name="943932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, i can barely understand what I wrote above myself O.O<br><br>TLDR: sprite frame updates mostly belong in the rendering loops, update loop can control the animation based on game state changes, and rendering loop takes care of figuring out which frame to display next int he current animation. you do not interpolate frames, you only skip frames if you're somehow behind.<br><br>Keep track of application time in Millisecs or in Frames, both work.  Just make sure that using millisecs you accumulate the fixed delta time, which never changes.  If logic is runing at 10ups, your fixed delta = 100ms at all times. <br><br></td></tr></table><br>
<a name="943943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The final component that I still cannot grasp though is how to tween the animation frames. I`m working on a 2D game so how can I tween the frames as they are integer values such as frame 1,2,3 etc... Should I be tweening when the frames get updated instead? I`m a little confused with the theory.<br> <br></div><br>Yes, tween the time. I generally have a timeeelapsed field in objects for this sort of thing. Then you can tween how much time has elapsed and use that time elapsed and the total time of the animation to calculate which frame to show.<br><br><div class="quote"> Another question that this brings up is with counters. Should I be simply using frame_counter:+1 each logic update or should I be using a version like if millisecs is 500 millisecs greater then last time then update the frame_counter? Will both versions work or should I make sure I only update my counters by using the millisecs method? <br></div><br>No idea. What are your counters doing? What do you use them for? I don't recall ever wanting or needing to count frames, I always deal in time. <br><br></td></tr></table><br>
<a name="943948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> what Gab said above about interpolating time works too, i just personally use render loops to update my animations using REAL delta time (not the fixed one, i got both lol) <br><br></td></tr></table><br>
<a name="944096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ HrdNutz : <br><br>In you code example, in the render phase, there is a part of the code that I am having trouble understanding,<br><br>' interpolate between old and actual positions<br>Local tx# = X * tween + OldX * (1.0 - tween)<br><br>Please could you explain it in a little more detail for me? I know it tweens between the old and new values but ut`s the way it works that I cannot quite grasp.<br><br>Thanks,<br>Jason. <br><br></td></tr></table><br>
<a name="944103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> When tween is zero, you get<br><pre class=code>
tx# = X*0 + OldX*(1 - 0)
      = OldX
</pre><br><br>And when tween is 1, you get<br><pre class=code>
tx# = X*1 + OldX*(1-1)
      = X + OldX*0
      = X
</pre><br><br>And when, for example, tween is 0.5:<br><pre class=code>
tx# = X*0.5 + OldX*(1 - 0.5)
      = X*0.5 + OldX*0.5
</pre><br><br>so halfway between X and OldX. <br><br>Fairly simple! Again, QuickSilva, if you're having trouble with this, you really need to work on your maths. <br><br></td></tr></table><br>
<a name="944121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> You`re completely correct, my Maths does let me down :(<br><br>Thanks for explaining it though, you made it seem a lot clearer.<br><br>Jason. <br><br></td></tr></table><br>
<a name="944378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wanted to quickly ask, some people type float values like, 1.0 whereas others simply type 1. Is there a reason for this, good coding practice perhaps or does it actually change the result that we get back?<br>Should I also be type 0.5 or is .5 just as good? <br><br>I suppose what I`m asking is, is it more for the programmer to make things easier to read?<br><br>Jason. <br><br></td></tr></table><br>
<a name="944380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> 0.5 and .5 are interpreted exactly the same by the compiler.<br><br>1.0 and 1 are different however - 1.0 is interpreted as a float, while 1 is interpreted to be an integer - i.e. a whole number. This can become important if you're using another integer, e.g.<br><br>1.0/2 gets performed as a floating point operation, so the result is 0.5<br><br>but<br><br>1/2 gets performed as an integer operation, so the decimal part of the result is dropped and the result is just 0.<br><br>Sometimes it is useful to do this automatic rounding though, which is why the compiler works the way it does.<br><br>If you're working with two integers but want to get a floating point result, just change one or both of the numbers to a float before the operation:<br><br>Float(1) / 2 = 0.5<br><br>note that Float(1/2) = 0 still, because it works out 1/2 = 0, then turns the result of that into a float.<br><br>(by the way, a 'floating point number' is the computer's way of representing numbers with decimal or fractional parts. It's called a 'floating' point because the digits are stored in a fixed number of bits in memory, and then the computer keeps track of where the decimal point is - it can move about. This is in contrast to fixed point numbers, where, for example, the first four bits will represent the whole number part, and the last four bits represent the fractional part - the decimal point is fixed in one place) <br><br></td></tr></table><br>
<a name="944418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah it's definitely work knowing how the compile converts numbers in the source code.  I often stick a .0 on the end of an Int because I want the result to be floating point. <br><br></td></tr></table><br>
<a name="944434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for explaining things so clearly Warpy, I wish I had a Maths teacher like you back in the day.<br><br>When I test my code with a really low logic rate and also use tweening any objects that I want to leave the screen on the right and reappear on the left seem to return to the left of the screen from the right almost in reverse. Am I doing something wrong or is this the correct behaviour? Is there a way around it if it is? Without tweening all is fine so that seems to be the problem. Is it just a case of not tweening in these situations? <br><br>Are there any other situations like this that I should look out for?<br><br>Jason. <br><br></td></tr></table><br>
<a name="944458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Say your screen's 800 pixels wide.<br><br>In the previous frame, the object was on the right hand side of the screen, say at x=780.<br><br>In this frame, it's at the left hand side of the screen, say x=20.<br><br>When you're tweening, you're interpolating between these two numbers, so you obviously get something that's in the range 20..780, i.e. to the right of the current position. <br><br>What you need to do is, when you wrap the object's new position round to the left of the screen, also do the same to the old x value, so it ends up being a negative number. <br><br>Something like<br><pre class=code>
x:+xvelocity 'move right
if x&gt;800
   x=x-800  'wrap object to left of screen
   ox=ox-800  'correct old position
endif
</pre><br><br>You also need to watch out for this sort of thing when doing collisions, but I expect that's a bit beyond you at the moment. <br><br></td></tr></table><br>
<a name="944658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Quicksilve: hoho, that situation is like one of the issues I brought up with tweening a while back (same issue can occur with objects bouncing off another object i.e. changing path) and thus I prefer not to tweening it because I don't want to code special tween cases.  That's just me though.  Warpy's code will work. <br><br></td></tr></table><br>
<a name="944663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can now see why you use a higher logic rate in your framework. Still, the good thing is I finally understand the theory :) <br><br>With collisions I`m assuming you mean that with a very low logic rate your objects may enter other objects? How do we safe guard against that then? It would be handy to know for future reference even if it is beyond me at present.<br><br>Cheers for the continued helped. I bet you are all tired of me by now. I`ve just always found this subject very confusing.<br><br>Jason. <br><br></td></tr></table><br>
<a name="944666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Collisions" just means the fact that moving objects may bump into each other, or into the scenery, and how to deal with that.<br><br>For example, if a ball bounces off a wall, its velocity is reflected off the wall. In verlet motion, because the velocity is defined implicitly as the difference between the current position and the previous position, you need to correct the old position by moving it "into" the wall, so it's the correct distance and direction behind the current position. <br><br></td></tr></table><br>
<a name="945129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> When deciding my objects speeds should I being doing anything special to keep them in sync with my timing or can I use any values I choose? In other words, will using certain values result in a cleaner movement of my sprites?<br><br>Jason. <br><br></td></tr></table><br>
<a name="945164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jur</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Choose such speeds which fit your game (gameplay-wise). If your game is fast paced, you will probably need higher logic rate to keep movements smoother. And of course, use float coordinates. <br><br></td></tr></table><br>
<a name="945334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> So there is no benefit from choosing certain values in advance then.<br><br>Just wanted to check.<br><br>Jason. <br><br></td></tr></table><br>
<a name="945336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah no benefit to certain speeds.  There used to be when you had a fixed refresh rate (you'd typically move 1 or 2 pixels per frame so it looked really smooth), but as you don't know the framerate on PC and are doing tweening, you can move at any speed and it can still look smooth. <br><br></td></tr></table><br>
<a name="945427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is an interesting thread and good review of the subject of timing in general.<br><br>Earlier on as I was reading through I thought about a few things. One of them I think may have been explained more toward the posts up until this one, regarding animation. My concern is, if you use fixed rate logic with tweening, and your logic rate is very low - lets say 10fps, and you're using tweening to update your graphics, that's all very well for the update but now you are stuck with only being able to do logic on your game objects 10 times per second.<br><br>For example, let's say you have an enemy character which you want to be able to change its direction of movement quite quickly and perhaps randomly. Let's say you want it to be so erratic that it should change direction possibly every frame - at 60fps. If your logic is only 10fps, your game character cannot go through all of its animation steps. It would appear to change direction less often. So the problem is, with a low fixed rate for logic you are required to use a `lower resolution` of animation timing. Animation becomes `blockier` or jerkier, in a sense.  Just to push the point, if your logic rate was 5fps, you would start to see all objects in the game changing directions only 5 times per second and it would be very noticeable like a stuttering of animation, plus animation frames would only change 5 times per second - not very smooth.<br><br>I think this is one of the drawbacks of the idea of a low logic rate using fixed rate logic. It's all very well that you save lots of cpu time but it does impose limitations on how fine-grained your animation can be. The only way to get around that at a low logic rate is to do actually do some kind of morphing or tweening of the graphic images themselves - like perhaps if each logic frame was a `keyframe` and the rendering system was using vectorgraphics with tweening between keyframes. That would work for smoothing out animation, but you'd still only really be able to have a new key a few times per second.<br><br>Still, most animation is probably not noticeably different after, say, 25fps logic, so you could probably still pull of a fairly low logic rate (30fps say) and use tweening.<br><br>Another thing I wanted to mention was with regard to what GrayAlien has said about his framework's timing. You mentioned a logic rate of 200fps, and presumably targetting a framerate of about 60fps, resulting in 3-point-something logic updates per graphics frame. You talked about needing to use a delta value after the last frame in order to make up the exact logic position of, e.g. 3.2 logic steps, which would be exactly the position objects should be in when the next graphics frame is to be rendered. This is good, and I can see why when you render the logic results visually you are drawing state which is much more precicely timed.<br><br>However, the whole reason you are having to do that extra delta step to simulate a fractional logic framerate is because your logic rate is not an exact multiple of your graphics rate. If your graphics rate was 60hz and your logic rate was 60*3=180hz, your delta would always be 0 and you would only have to do exactly 3 logic steps per frame. Since 60hz is so popular, I wonder why you chose to go with 200 as a default, when 180 would have been automatically smoother?<br><br>What I'm getting at, though, isn't whether you chose the logic rate well, but that in order to have perfectly precice timing you must have a fixed logic rate which ultimately is an exact multiple of your graphics rate (unless you have added delta or tweening which will be almost as accurate). If you have the fixed rate logic at 200hz without tweening or delta, objects will understandable be a little bit off from where they should be and a moire effect will result, wiggling the object position and decreasing smoothness. So why not just lock the logic rate in at a multiple of the graphics rate?<br><br>I know I know, what you're thinking is that you don't know what hz rate the user's computer is going to use for the display, and that you need to adapt to multiple hz rates. Well this is where my next idea comes in. One of the major benefits of having a sense of the predictable passage of time, is that when you design your game and set up your animation you will know for sure how fast the animation `normally` plays. So if your logic is fixed at 200hz then you know that you can create animations which will always take the same amount of time to complete no matter what the graphics framerate is. And the same with delta timing, it lets you lock-in a predictable `rate-of-time` so that you can design for that rate and let the timing system take care of how it displays.<br><br>Well, my idea is NOT make the logic rate fixed, but to instead make it an exact multiple of the display hz rate. So for 60hz you might have logic at 120 or 180, and for 85hz you might have logic at 170 or 255. You could perhaps have an `ideal` logic rate, which could be 200hz, and then pick the nearest multiple to that rate - so in the case of 60hz you'd choose 180. Doing this will totally remove all sense of predictable time and your animations will now be all over the place. BUT, you now introduce something I'll call a `design-time` framerate. This is simple a fixed framerate which you design your animations for - like you would have done for fixed rate or delta logic, or even for when you were sure a 60hz refresh with Flip 1 would never be compromized. <br><br>This `design time` hz rate is now easy to target - it could be, say, 50hz, 60hz, maybe even 25hz. The only thing you have to do then is transition between design time and logic time. How would we do that? Simple linear tweening. So you run your graphics at a flexible rate, you run your logic at a multiple of the display hz, and then when you do your logic you tween between logic timing and design timing. This lets you a) design for a fixed framerate, b) choose a logic rate which exactly fits into the display hz rate, c) lets the graphics update still occur as often as possible.<br><br>Another advantage is you could have multiple `design time` logic rates, depending on the object you are animating. If you have some object whose animation really looks fine changing no more than 5 times per second, where each animation change must occur on the beat of 1/5th of a second intervals, then you could use a design-time logic rate of 5hz which is then tweened to your semi-fixed logic rate. Then you might have the player character which you want to update the animation of at 25hz and the movement at 120hz - you can have two pieces of logic running at different hertz rates which are then tweened to the main logic rate.<br><br>Something else I was thinking about, when someone mentioned 3D and physics, is a way to overcome the explosiveness of a variable logic hz. What if you implement a double-buffered logic system? In one buffer you do normal logic fixed at a specific logic rate, say 50hz. Then in another buffer at 200hz, you copy the logic from the slow-reliable buffer into the fast-interpolation buffer every 4 cycles, and inbetween the four cycles you implement delta timing. Not enough would happen to explode the physics because every 1/50th of a second the main logic refreshes the temporary logic. Meanwhile the temporary logic can be delta timed, you can slow it way down, you can scale it, you can do `bullet time`, and then when you reach the point where you need to refresh proper positions you update the fixed rate buffer. This way you keep updating at a fixed logic rate in one logic system and inbetween updates you temporarily do delta timing.<br><br>It would be somewhat like predicting the positions of objects like you do when you implement multiplayer networked games - you don't necessarily know exactly where an object will be in the next true game state, so you predict it, you interpolate to it, and then you perhaps implement spline smoothing between the `actual` logic (the fixed rate) and the `predicted` logic (with delta time). I think it would work, would allow you to slow logic down or speed it up, while still keeping the physics simulation stable.<br><br>One more thing I wanted to mention is that there is a delay between when the logic starts to be processed and when the frame flips the display. Let's say that right just before the next logic cycle begins, the player spaceship is supposed to change animation frames. So you start doing your next logic cycle and notice the animation frame should have changed. so you change the frame, and then you draw the new frame. However, let's say that just prior to when you flip the new frame, the logic would have told you that another animation frame needs to be shown. Now it will again have to wait until 1 frame late. What if you predict the future? What if you look at what the game time *will be* at the time when the frame actually flips next, rather than what the time *was* at the start of the frame.<br><br>Since by the time you Flip a new frame into view, time has passed, you should really be rendering `the future` so that when it flips into view it is `on time`. This will in most cases remove the 1fps lag. In some cases it won't have any effect - e.g. user input. If the user pressed a key during the previous frame and it didn't get processed yet, it's effects are not going to be considered until 1 frame later. Unfortunately you can't just suddenly do a whole new logic update right at the last minute in the current frame, which might've caught the user-input and produced a different graphic upon display. But aha - that's where a high logic rate comes in. A high fixed or semi-fixed logic rate increases the responsiveness of user input. And even if `rendering the future` doesn't improve the user responsiveness, it can at least show you a more precice world state at the time of the flip. The only thing is I'm not sure if this would throw the world state out of sync with the player - if the world is 1 step ahead of the player the player could be at a disadvantage. <br><br></td></tr></table><br>
<a name="945463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jur</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delta value does not only cover fractional logic iteration but also variations in loop time durations so it changes constantly. On my system there is no difference in smoothness between 200 an 180 hz. <br>Your idea about having different logic rates for different logic operations is interesting but I think that one would need very good reason to complicate his code with such stuff :)   My "design" time is "real" time. For animations, timers etc. I always use milliseconds. It is logical to use "real" time scale for time depending operations. These values are then converted to "logic rate" values. That way you can change logic rate, and speed will remain the same. Of course if you make logic rate to low and use short timed intervals in your code then things will not be ok - the logic rate "granulation" must be "fine" enough to cover all time intervals. <br><br></td></tr></table><br>
<a name="945507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> the idea behind fixed interval updates is predictability, your app goes through same exact states, every time, with no discrepancies.   Any variation in frequency may result in un-reproducible behavior, something pure delta timing suffers from.  Tweening is used to deal with any time remainders outside logic updates, but otherwise logic is exact on-a-dime.<br><br>regarding user input; you can record it outside the update loop, and use last recorded values inside logic iteration.  This removes the sensitivity problems even in as low as 10Hz updates.<br><br>60Hz is a sweet spot for most games, some may go as low as 10, but higher than 60 is mostly wasteful with tweening. <br><br></td></tr></table><br>
<a name="945640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it better to record user input this way too, say for a demo mode or replay? I was actually wondering how this would be done.<br><br>If I wanted to make my game more friendly to lower spec computers what would be the most beneficial way? Would reducing the hertz (in the graphics command) from 60 to 30 help for a slower computer or would reducing the logic rate be most beneficial? Do either of these methods make a big difference to people with older hardware? Should I do both? Maybe a delay in the main loop could help free up some time too.<br><br>Jason. <br><br></td></tr></table><br>
<a name="945672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Reducing logic hertz (updates per second) benefits performance, how much, depends on complexity of your logic.  Rendering should generally be allowed to run full scpeed, which most of the time is capped by monitor refresh rate anyways.<br><br>Replays are cake wen using fixed interval updates; every time you process input like key_down and key_up, record the action into a list or whatever, along with time or update iteration.  For example;  at 1000 milliseconds of app time KEYUP was pressed, at 4000 millisecs KEYUP was unpressed; that's holding the UP key pressed for 3 seconds, and is represented by 2 recorded values, when the key was pressed and when it was released.  Substitute real input with recorded values to replay the actions, and since you know the specific times for each input, you can make your game go through the same exact actions, and because using fixed interval updates you are guaranteed exact game state at specific game time, actions will replay without discrepancy.<br><br>recodred values are roughly:<br>TIME, ACTION<br><br>to replay:<br>if game time = recorded time, execute recorded action <br><br></td></tr></table><br>
<a name="945676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> So simple :) <br><br>So reducing the hertz parameter of the Graphics command say to Graphics 640,480,0,30 from (Graphics 640,480,0,60) would be of no benefit?<br><br>Jason. <br><br></td></tr></table><br>
<a name="945711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes using fixed rate logic (and tweening) should yield a perfectly accurate replay whereas delta may not. I say "may" because it depends on what sort of game objects you have and how critical having the same set of data is for a replays - it may not matter for many game types. <br><br></td></tr></table><br>
<a name="945717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would say go with a frame number to reference your replay data, rather than a time, because there are all sorts of reasons why your game could be running slower or faster than it did when you recorded - such as the o/s interrupting your application and creating jitters (right Gray?). If you store a frame number then even if there is a sudden lag during playback it will pick up where it left off, otherwise if it is time based it could<br>skip a bunch of moves.<br><br>As to HZ in the Graphics command, this is asking for what hz refresh rate you want the screen to be when you open it, it's not really to do with logic rate. If you ask for a 30hz screen and if by change the hardware supports 30hz you'll get a screen with that refresh rate and it'll be really uncomfortable to look at. That said, if 30hz is not available, the hz will be promoted to a default like 60hz. If you then use Flip -1, it will flip at 30hz even if the hardware display is at 60hz. That said, what's the chances that any hardware supports any display hz below like 50hz? So maybe it's safe to ask for 30hz, so long as you use Flip -1, cus if you use Flip 1 having asked for 30hz it'll flip at 60 cus that's what the hardware will v-sync at. <br><br></td></tr></table><br>
<a name="945744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Imaginary<br><br>when using true fixed step updates, time or frame can be used for reference, because there is absolutely no chance that app time will be off, for any reason, because you keep track of app time using 'fixed delta', so frame and time will always be in sync. <br><br></td></tr></table><br>
<a name="945784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yeah I use 200 logic updates per second. This is normally 3.something logic updates per frame. For the first 3 whole logic updates Delta is 1 and for the last update Delta is &lt;1.  <br></div><br><br>GA has been boasting about his timing code for years.  Can anyone, from the above description, post some pseudo code that does what he's talking about?  3 passed of Delta 1 followed by a fourth with a fractional remainder.  I mean, does anyone else get what he means and can put this in code form? <br><br></td></tr></table><br>
<a name="945865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> HrdNutz, if you are going to use miliseconds you either a) have to stop your application's timer when there is *ANY* time taken up by the o/s or other apps, or b) skip some of the recording when time is lagging behind where it should be. It's just that you didn't mention either of those and without them your timing is going to be off. What is your app going to do when another app is lauched and gobbles up a few seconds of CPU time? Playback is going to freeze for a moment, or it's going to have to skip a section.<br><br>Chroma, if your logic rate is fixed at 200hz, and your display is refreshing at a rate of 60hz, then to find out how many logic steps ideally need to be performed every display refresh you do 200/60=3.333333.<br><br>So every time you update your graphics and do a Flip 1, you'd have to do 3.3333333 steps of logic.<br><br>Basic fixed-rate logic without any additional tweening or delta would simply say that you need to do 3 whole logic steps before the next graphics refresh, and then the .333333 would be added to the `accumulator` - the amount of accumulated time which needs to be used up - ready for the next frame. In the next frame the accumulator would start off at .33333 and then you'd be adding 3.33333 to it, producing 3.666666. You would do another 3 whole steps of logic then render the frame, putting the .66666 into the accumulator. Then the next frame it would be at 3.999999. You'd do 3 steps of logic then render. Then in the next frame you'd get 0.99999+3.33333=4.33332 - you'd now have to do 4 logic steps and then put the .33332 in the acumulator for next time. Then you render again.<br><br>This works okay, but it's not entirely accurate. Each time you go to render a frame, you really *should* have done 3.33333 logic steps, but you only did 3, or 4. So it's a little bit off. You could be off by a third of a logic step. So your objects might be slightly ahead or behind where they're supposed to be and this could cause some visible wiggle. Your animation frames might also be off, plus anything else you animate.<br><br>To get around this, there are a few solutions. One is to set your logic hz rate really high, to make it more `fine grained`. The higher the rate, the less noticeable the `error` will be. So lets say you did logic at 1000hz, then 1000/60=16.66667. So you'd be doing 16 logic steps per frame, and percentage-wise the difference between 16 steps and 17 steps is much less noticeable than the difference between 3 and 4. The steps are smaller. But this requires a really high logic rate which means you have to do all your calculations many more times, using more CPU time. It can be very intensive and prohibitive.<br><br>So then you have the solution of dealing with the 0.33333 in some way. You can either deal with it in the logic or in the graphics rendering. If you deal with it in the graphics rendering, with tweening, you still do either 3 or 4 logic steps and then you look at the decimal remainder (the .33333) and you calculate where the graphics would be/were at 0.33333 of a frame previously. So if in the previous frame an object was at an x coordinate of 50 and now it's going to be at 80, you find the difference (80-50=30). So there are 30 pixels between the two frames. You then do 30*0.33333, to get 9.99999. So then you draw the objects at the place/state they'd be at 9.99999 pixels from their previous frame, rather than at 80, you might draw at 50+9.99999=59.99999. That's tweening, but it does require that your graphics rendering is a bit more complicated. Everything that moves or changes has to be scaled in this way. But it has the up-side that you don't have to change your logic code. You can just do a whole 3 or 4 steps of logic each frame. That's also good for physics stability which needs whole increments not fractions.<br><br>The other solution is what GrayAlien has done. He's moved the decimal part of the logic steps from the graphics side into the logic side. So now he does 3.33333 steps of logic each frame. This ensures that objects are exactly where they are supposed to be instead of potentially a whole frame behind or ahead. He does this by doing 3 normal iterations of logic code. Then to make up the .33333 he scales everything in the logic by multiplying by 0.33333 for one final logic pass. Objects move about 1 extra 3rd of their movement distance, animation frames advance by one third of a frame (it adds up), etc. This puts all the logic in one place rather than trying to scale during the rendering pass. This makes it easier. One thing it does do, however, is it makes all physics calculations unstable because now he's doing less than fixed/whole-amount logic steps. That fluctuation (between whole frames and 1/3rd of a frame) is not good for physics stability, but it works fine when you don't have a realistic physics simulation - like most 2d games which fake the physics.<br><br>So you might ask yourself why GrayAlien isn't just using a fixed logic rate of, say, 100Hz, since he's taking care of the remainder with a delta value. And there's no major reason why you couldn't do that. However, there are other advantages to a higher fixed rate. The more often you can process logic, and in particular user-input, the more immediately responsive you can be to the user's actions. Processing user-input at 200hz is going to give you `3 or 4 chances` to process user-input per frame. That means that if the user pressed a key sort of towards the end of the frame, there might still be enough logic time to process the keypress and thus influence what graphics will be drawn, rather than wait until the next frame to process it. It can make the game more responsive. However, to do that, ideally you'd have to space out the logic steps and not just do them immediately after each other. If you're trying to do 3.33333 logic steps per frame, then ideally you'd do one step at 0 milliseconds offset, 1 at 5, 1 at 10, and the .3333 at 15 - and this would be offset based on the accumulator. But I don't think GrayAlien is doing this.<br><br>Another benefit of a higher logic rate is to in most cases solve problems with collision detection for fast moving objects. An object could jump from one side of an obstacle to another without seeming to touch it, but if the logic hertz is fine-grained enough you will be more likely to register the collision. 200hz is therefore better for collisions than 60hz, supposing you are doing pretty basic rectangle or circle collisions and not swept polygons. <br><br></td></tr></table><br>
<a name="945874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Imaginary<br><br>App time is tracked within the update loop; lets say your frequency is 10Hz, that makes the fixed delta 100ms.  You can either track each update, or scale it by the fixed delta.  In other words; 3 update ticks will track as 300ms constant, there is just no way those two numbers will be out of sync, thus you could either use the update iteration 3, or time of 300ms, because at 3 updates your app time will be 300ms (always), its essentially the same thing.  Any hickups are dealt outside the update loop, but inside you are guaranteed app time to be 100ms per each update tick (at 10Hz).  You can just think of App time as Frame Number * Fixed Delta.<br><br>also, nothing against GA's framework (mad respect), but it does not use true fixed interval updates, because he throws the remainder into another update tick with smaller delta.  This essentially removed the benefit of fixed step updates to reproduce exact application states. <br><br></td></tr></table><br>
<a name="945887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay.<br><br>I agree that Gray's framework is not stable for real physics math, which I said above also, but for most 2D games and the kind of audience his framework targets it doesn't matter. Most people aren't going to be doing real physics calculations. I agree that a fixed step with graphics tweening is the only real solution for steady physics and exactly-accurate updates. But without physics the delta pass works just as well.<br><br>It might be interesting to also review here the effects of external applications on the smoothness of the game - perhaps you can give us a summary of jitter correction, Gray? <br><br></td></tr></table><br>
<a name="945908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman: Great analysis, it's correct as far as my framework goes.  I did consider trying the logic at 180Hz or 120Hz so most of the time it would be in sync with the display (at 3x or 2x) but of course there's no guarantee it would actually stay in sync and also I thought that almost being in sync but occasionally slipping out might look pretty bad if I always used a Delta of 1 and didn't bother with the fractional Delta.<br><br>Re: Jitter Correction, I'm pretty sure there's a detailed thread about it round here somewhere where I posted a test app.<br><br>Basically instead of blindly reacting to a big change in Delta caused by external apps interfering it looks smoother if you only alter Delta a little bit each frame until the time loss/gain is caught up.  You do this by keeping a history of the time taken for each frame in an array and average it, so when the delta changes a lot you can interpolate between the new Delta and the average delta and pick a suitable value.  This seems to smooth out some bad jitters but you'll still see them, just not as bad.  Also certain situations will always look bad with or without jitter correction, like if the game is being severely interrupted by something external.<br><br>Another factor with jitter correction is that as the delta changes you may notice your game speed up and slow down as it compensates for time loss/gain on a particularly interrupted system (so that 10 seconds of game time still equals 10 seconds of real time).  This can be reduced by clamping the amount of delta change you allow BUT you will loose/gain actual game time so if you had a 10 second counter, it wouldn't match your watch, it might be 11 seconds or 9 (that's a big exaggeration to make the point).<br><br>Basically with all this timing lark it's not an exact science.  We simply cannot sync to the display like in days of old, so we have to come up with other solutions.  Some are more suitable for certain games e.g. physics based games and others are suitable for heavy logic games (low frequency logic updates with tweening) and some are suitable for fairly light logic arcadey games (high frequency update with delta component), and jitter correction works well on some PCs and not others depending on how bad the jitter is.  It's kinda all down to personal preference (even VSync is down to personal preference but I prefer it on, but you cannot rely on it being on as it may be forced off in drivers).  The main thing is YOU MUST use some kind of timing instead of none, so pick your method and stick with it, and then just get the game done! :-)<br><br>To be clear, I'm not saying my method is better than anyone else's, it's just another method that works for me that I find easy to understand and implement, and it's tried and tested on countless systems.  Horses for Courses as they say. <br><br></td></tr></table><br>
<a name="945934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent analysis there ImaginaryHuman.<br><br>And basically what you're doing GA is you're sampling the delta time over a specific number of cycles and averaging it to one delta time thereby 'theoretically' eliminating huge jumps in delta cause by backgroud apps eating up cpu cycles.  You're storing the most recent 10 or 20 delta times and then adding them together and dividing by the respective number of samples.  I did the same thing about 7 years ago.  I think sometimes you try to be too mysterious in your methods hehe...I can assure you what you're doing is nothing new. :)<br><br>I still think the Gaffer way is the best as you can run the logic at a fixed rate and it will also tween the graphics if the render fps dips below the logic fps.  Also, you say tweening can cause collisions to fail.  All tween does is interpolate rendering, NOT the logic.  So if you're running your logic at 200 cycles then you most likely won't miss a collision and with the rendering running at full speed you most likely won't draw an object inside an object inadvertently.  So, you're avoiding tweening for no reason and it would probably help smooth out your graphics even more.  Give it a shot.  The best that could happen is your graphics get even smoother and the worst is...you stick with your current timing code.<br><br>Btw, I despise vertical tearing too and also use Flip 1. <br><br></td></tr></table><br>
<a name="945946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. And GreyAlien, sorry I spelt your nickname as Gray with an A - it's one of those international differences.<br><br>I agree that there are different ideal solutions depending on what type of game you're doing and what kinds of calculations it needs to do.<br><br>The downside of tweening is that is complicates drawing operations because you now have to do a lot of `logic` calculations right in the middle of doing rendering. Keeping the logic and rendering separate can make things a bit simpler to understand and implement. Rendering code can get a bit complex sometimes so maybe it's easier to keep the logic all in one place and maybe that's also a bit cleaner in terms of being object oriented.<br><br>The upside is that if you can put in the time to make it work, fixed rate plus tweening is about as good as it gets. But let's not forget that if you can make an efficient game which under-uses the available cpu/gpu power then you can just use Flip 1 as your timing and be done with it, so long as the vertical sync is working of course.<br><br>Opting for `tearing` to be a feature of the display in a game, is to me a bit pointless considering all the effort the system has to go to to draw to a hidden backbuffer and flip it to the front. You might as well use a single-buffered display, save on the flip, plus save on needing to do a clearscreen, plus be able to use dirty-rects and preserve the background. It would still tear much like a Flip 0 screen but it'd be even faster. The only drawback is the player can see `the drawing process` mid-flow.<br><br>I think for quality purposes you've gotta go with Flip 1. The only thing I don't like about Flip 1 is that if your framerate drop below the hz rate of the display, it *halves* the framerate. Then the game is sitting in a loop for almost a whole frame doing nothing waiting for the next vblank. This is also where triple buffering could help - you could start drawing the next frame while the current one is still waiting to flip. It would be nice to have a command that tells you how close the system is to doing a vsync in terms of milliseconds, so you could decide whether to try to call Flip 1 or whether it's too late and to do a Flip 0 then start on the next frame. <br><br></td></tr></table><br>
<a name="945955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman: No worries about Gray, I saw it but declined to comment :-)  I often wondered if I should have registered GrayAlienGames and redirected. <br><br></td></tr></table><br>
<a name="945977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> regarding Jitters and stuff;  they are caused not only by background processes, but by the application itself as well.  Different frames may take different times to render, not to mention that frame time measure is based on previous frame, so its an estimate to begin with.  Just try rendering a random amount of things from 0 to 10000, jitters will be ridiculous.  To help smooth out the estimate frame timing, average deltas, and look into equalization, basically reject or clamp some deltas that are way out of the ordinary, so you don't end up feeding huge spikes to your averaging algorithm. <br><br></td></tr></table><br>
<a name="946118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's where triple buffering would help - you can use some of the spare time at the end of a frame to start working on the next frame. But not so easy to do in BlitzMax. Also you're not very likely in most games to go from 0 objets to thousands of objects, more likely a sustained rate of x number of objects plus some increase. That's one of the things to think about when you design the game - if there's going to be a lot of slowdown when there's too many objects then maybe you have to up the system requirements or cut back on the eye candy. <br><br></td></tr></table><br>
<a name="946137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jur</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can say that jitters are really problematic on some computers as mine is such. The Grey Aliens jitter correction makes a big difference in smoothness.<br>Recently I did few changes to his delta timing and add accumulator for tweening, to see how it would work in my project. Then I had to do few changes to my code but not much really. After few solved bugs, I got my game running with tweening instead of delta timing... and it wasnt really smooth. The cause - jitters! So I utilized Greys jitter correction which kept movements smooth in delta timing and found out that it is doing just as fine job keeping things smooth with tweening (i am now filling the accumulator with average times).<br>Bottom line...  tweening or delta time, none will provide smooth movements (at least on some computers) if you dont have a solution for jitters. <br><br></td></tr></table><br>
<a name="946140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting Jur. <br><br></td></tr></table><br>
<a name="946230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's good to know. Perhaps some form of jitter correction/time smoothing needs to be a standard part of our timing systems rather than an optional extra.<br><br>It was so much easier on the Amiga when you could disable all multitasking and have full control of a very predictable specification of hardware, you could push things to the limit of the hardware and be sure it would never fluctuate into screen lag. See what we gave up in the name of multitasking? :-)<br><br>One issue I see with jitter correction is, in a way, it stretches and contracts logic time, which like Grey said, has the effect of making objects speed up and slow down - not entirely desirable. Is there a better way? <br><br></td></tr></table><br>
<a name="946263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, it was even easier in DOS, that was totally smooth too.<br><br>So the speed up/down will only occur after a severe jitter, like a major time out. Of course you can clamp those delta values like I said but then the game time is no longer mapped to real time. <br><br></td></tr></table><br>
<a name="946279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you think it is better, following a major interruption, to just let the game time pick up where it left off, or should you be trying to accelerate it to where it should be? <br><br></td></tr></table><br>
<a name="946350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well...Diablo and Diablo II accelerated to where it should be so I'd say use that method since it's been used in a hit game. <br><br></td></tr></table><br>
<a name="946368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your game is going to network, then it must catch up.<br><br>And networking is another thing that Grey's method would have a problem with.  If you are doing a fixed logic rate, then all players games will be able to run at the same rate and sprites (or other objects) will run the same number of steps and be in the same spot.  But, the minute you do a partial LOGIC update with a partial Delta, you lose that.  So, I think the high logic rate works, but you should not be doing that extra little partial update in your logic, if you are going to do any networking. <br><br></td></tr></table><br>
<a name="946378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman: yeah after a big interruption I ignore the massive delta to avoid a huge amount of logic processing to catch up, but after lots of little interruptions may be worth catching up.  You just have to figure out what is too long, 10 frames or 50 frames or whatever. <br><br></td></tr></table><br>
<a name="946471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you could have a separate section of logic to handle network traffic which runs at a lower fixed rate like 16/25/30fps and decouple it from the rest of the logic system so that you're not tied down. ??<br><br>It's a good point though, about networking. It's not an area that many people have experience with. I can see that you'd need some kind of `game time` to synchronize the events from other computers. Maybe the server machine should run with fixed rate logic then the clients can be whatever delta/tweened speed they want? <br><br></td></tr></table><br>
<a name="946480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah not many of us have made networked games so it's a good point and a tricky issue.  I expect that syncing multiplayer games is a whole big specialist area with many pitfalls and possible solutions - it's a full-time job for people in AAA game companies.  Maybe there are some decent books and free stuff on the web about it. <br><br></td></tr></table><br>
<a name="947490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to bring this up again but I`m still struggling to see what is happening with the tweening part despite Warpys explanation.<br><br><pre class=code>
Local tx#=x*tween+oldx*(1.0-tween)
</pre><br><br>Let`s say that my current x position is 200 and my old x position was 100. Next my tween value is 0.5.<br><br>In my mind the following should work,<br><br><pre class=code>
TweenPosition=OldXPosition+(CurrentXPosition-OldXPosition*TweenValue)
</pre><br><br>So, TweenPosition=100+(200-100*0.5)=150<br><br>Am I missing something? Maybe someone code post an alternative to the original code (tx#=x*tween+oldx*(1.0-tween)) to show what is happening in a different manner?<br><br>Jason. <br><br></td></tr></table><br>
<a name="947495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> You got your brackets wrong, but my and your equation are the same, otherwise. The *tweenvalue bit needs to be outside the brackets:<br><br><pre class=code>
TweenPosition = OldXPosition + (CurrentXPosition - OldXPosition) * TweenValue</pre> <br><br></td></tr></table><br>
<a name="947498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> So multiplication comes before any of the addition or subtraction, right?<br><br>Cus I thought it should be:<br><br><pre class=code>
TweenPosition = OldPosition + ((CurrentXPosition-OldXPosition) * TweenValue)
</pre><br>otherwise aren't you multiplying the result of oldx+(currx-oldx), as a result, by the tween value? <br><br></td></tr></table><br>
<a name="947521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're taught the order of precedence rule in school: BIDMAS<br><br>Brackets<br>Indices<br>Division<br>Multiplication<br>Addition<br>Subtraction<br><br><br>So in quicksilva's equation, you work out the brackets first:<br><pre class=code>(CurrentXPosition - OldXPosition) = (200 - 100) = 100</pre><br>Then do the multiplication:<br><pre class=code>(CurrentXPosition - OldXPosition)*TweenValue = 100 * 0.5 = 50</pre><br>And finally do the addition:<br><pre class=code>OldPosition + ((CurrentXPosition-OldXPosition) * TweenValue) = 100 + 50 = 150</pre> <br><br></td></tr></table><br>
<a name="947526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> So in theory my interpretation (apart from the brackets being in the wrong place) should work then?<br><br>Jason. <br><br></td></tr></table><br>
<a name="947538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep <br><br></td></tr></table><br>
<a name="947542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> For some reason it was BEDMAS for me where E = Exponential<br><br>Maybe it's a UK thing. <br><br></td></tr></table><br>
<a name="947547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> USA too. That I remember. and so there won't be a comfusion, it shoud be in this order: <br><br>()   <br>^<br>*,/ same priority in any order <br>+,- same priority in any order<br><br>Imaginary Human, the outer parentesis work but are not necessary. <br><br></td></tr></table><br>
<a name="947562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eureka I`ve got it! Seriously though, I finally understand everything that has been written about here and it feels great! My Maths is also getting better by the day and I am trying to learn all of the good stuff that I was never really taught at School. I`m actually really enjoying it now despite my frustrating experiences with it in the past. Maths is fun! BMax is also proving to be a joy to program in. I`m glad that I finally took the plunged and started to learn how to use it. <br><br>You guys are great, thanks a lot to everyone that helped :)<br><br>Onward to making my first game complete with proper timing...<br><br>Jason. <br><br></td></tr></table><br>
<a name="947574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one dude!  It feels great to understand this stuff.  I found I used some of my old school maths for a few of my recent games and it was pretty cool to finally use it in "real life" haha.  I enjoyed maths at school though, learnt trig to rotate 3D cubes before we were taught it ... was a pretty geeky guy ;-) <br><br></td></tr></table><br>
<a name="947603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Maybe it's a UK thing.  <br></div><br><br>err, Jake, I'm from Newcastle...<br><br>Actually, I was taught BODMAS, with O for Ordinals, but the way it's on the GCSE syllabus now is BIDMAS, so I went with that. <br><br>This thread just keeps on going, doesn't it? <br><br></td></tr></table><br>
<a name="947622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> err, Jake, I'm from Newcastle... <br></div>Wasn't sure if you were UK or not, for some reason I thought you might be in the US, don't know why.  Anyway, if you live there, no wonder you are into maths, as you probably don't want to go outside ;-p  I flew to it once from Bristol and saw several famous snooker players on the aeroplane and in the airport but that was about all. <br><br></td></tr></table><br>
<a name="947648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re the precedence of operations, yeah I can see that now. It doesn't read well, in terms of English. I think I prefer explicitly using extra brackets everywhere to make exactly sure things are calculated in the order I want them, ie I'd write it as:<br><br><pre class=code>
TweenPosition = OldPosition + ((CurrentXPosition-OldXPosition) * TweenValue)
</pre><br>which allows me to read `left-to-right` more or less, ie you start out with OldPosition, then you add to it everything inside the backets. Within the brackets you take current, you subtract old from it, then you multiply. That's much easier to understand than `skip the old position, go into the brackets, do the bracket part, then jump ahead to multiply, then go back and add`. Maybe just my preference, because otherwise it doesn't look intuitive that the multiply would happen earlier. <br><br></td></tr></table><br>
<a name="947664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do the same thing ImaginaryHuman.  I put parens around it so it works out the way I like.<br><br>The biggest gotcha to the whole thing is the order in which subtraction and addition can be done is arbitrary, so it can sneak up and bite you in the butt.<br><br>3 + 4 - 2 - 3 = ?<br><br>The order that this statement is done will change its outcome.  And the results could be different answers. <br><br></td></tr></table><br>
<a name="947665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> TaskMaster<br>I don't think so. how do you figure that? <br><br></td></tr></table><br>
<a name="947666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> TaskMaster - you read from left to right. So, you do 3 + 4, then subtract 2, then subtract 3. Even if you do subtraction first, you do 4 - 2, then subtract 3, then add 3, getting the same answer. <br><br></td></tr></table><br>
<a name="947672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I tend to add in "unneeded" brackets to aid readability so there can be no ambiguity about what the processing order is. <br><br></td></tr></table><br>
<a name="947676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> It might be reasonable when it is a big equation but for simple ones I find it unnecessary. Using Bmax Ide, I find it difficult to work with brackets when there are many so I try not to add unnecesary ones but I can go crazy with Blide. <br><br></td></tr></table><br>
<a name="947677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Agreed.  Too many brackets can also be hard to work out.  Sometimes to simplify I make a local variable and work out some of the formula in that before plugging it into the main one.  There's no real need to but it's easier to read/maintain.  Obviously I wouldn't do this for some critical piece of code that needed to be optimised. <br><br></td></tr></table><br>
<a name="947792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> 3+4-2-3<br><br>Some compilers work right to left.  Other work left to right.<br><br>Lets go left to right:<br>(3+4)-2-3<br>(7-2)-3<br>5-3<br>2<br><br>Now, right to left:<br>3+4-(2-3)<br>3+(4- -1)<br>3+5<br>8 <br><br></td></tr></table><br>
<a name="947793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok so we just need to know how BlitzMax is doing it.<br><br>I agree about too many brackets getting way confusing sometimes, to even figure out how many brackets to put in and where. But I do like the simplicity of reading left-to-right. And I do a similar thing, GreyAlien, where I'll break it down into parts if it gets too complicated. But I've seen some advanced coders here writing many many parts of a formula all on one line. I find that hard to read, especially with no comments either. <br><br></td></tr></table><br>
<a name="947797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> TaskMaster, the bottom one works like this:<br>3+4(-2-3)<br>3+4-5<br>3(+4-5)<br>3-1<br>2<br><br>in order to express a negative number you have to include the sign so for the computer to know it is one you have to include the sign and is why the explanation work. <br><br></td></tr></table><br>
<a name="947831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is where all of the confusion comes from.  And why it is just so much cleaner to include the parens.  :) <br><br></td></tr></table><br>
<a name="947833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is why some people think <a href="http://en.wikipedia.org/wiki/Reverse_Polish_notation" target="_blank">Reverse Polish Notation</a> is better than normal notation. I disagree, but it certainly makes these kinds of things less complicated. <br><br></td></tr></table><br>
<a name="947845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Warpy: Did you post in the "What's the Most Nerdish thing you've done" thread? As that may well qualify ;-p  Actually I'd classify it as Geekish, because Geek implies skill and Nerd implies uh dumbassness. <br><br></td></tr></table><br>
<a name="947853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/codearcs.php?code=2450" target="_blank">That</a> is nowhere near the geekiest thing I've done.<br><br>(The algorithms section of the code archives belongs to me now, by the way.) <br><br></td></tr></table><br>
<a name="947908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Agreed that you have exceeded your previous geek limitations.  Congrats.<br><br>"All your algorithm are belong to us" <br><br></td></tr></table><br>
<a name="948253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have my tweening up and running very nicely now but I still get the slightest little hiccup every now and then in windowed mode. I have seen many post about this before, is there a solution or is it just a Windows thing? Full screen works great but the windowed thing bugs me a little so if I can solve it somehow I would like too. I have tried Flip 0 and Flip 1 with the same results. I was hoping that by adding the tweening that this wouldn`t happen.<br><br>Jason. <br><br></td></tr></table><br>
<a name="948254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Full screen works great but the windowed thing bugs me a little so if I can solve it somehow I would like too."<br><br>You'll solve it...and then release your game and 1000's of peeps will go "man...it stutters a bit windowed mode". LOL.. Welcome to PC game coding. <br><br></td></tr></table><br>
<a name="948261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thing is, I do not remember Blitz3D doing this in windowed mode so this is why I wanted to ask. If it was purely a PC quirk then I would have the same problem in Blitz3D would I not? <br><br>Another thing is that even Grey Aliens Framework demos show the stuttering in windowed mode now when I compile with BMax 1.32. They were perfectly smooth when compiled with version 1.30. I`m wondering if something may have changed in the latest version. <br><br>[Edit] Just downloaded the AOTMG demo from Jakes website and this is silky smooth in windowed mode so the problem definitely seems to be with the latest BMax. Can anyone else confirm this? <br><br>Jason. <br><br></td></tr></table><br>
<a name="948268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it that you're defaulting to threaded builds and using the new garbage collector?<br><br>Alternatively, are you giving some time to the operating system to complete it tasks rather than hogging the cpu and shutting it out, causing it to have to force your app to pause? You should at least either do a Delay 1, or poll the system for events so that the o/s can get some time to do it's thing more spread-out rather than in a burst? <br><br></td></tr></table><br>
<a name="948286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would be keen to find out what is causing that stuttering too, hopefully it's the threading and can be turned off. <br><br></td></tr></table><br>
<a name="948304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman :<br><br>I`m not using threads at all so the new garbage collector isn`t being used either.<br><br>The code being used is the same code I was using in version 1.30 which didn`t stutter at all using Jakes FrameWork. I have tried adding a delay to see if it made any difference, just to check, but it doesn`t. <br><br>I know that windows are now centered automatically so maybe something else has been tinkered with too?<br><br>Jason. <br><br></td></tr></table><br>
<a name="948309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I know that windows are now centered automatically <br></div>Great!  Anyone know if that's true of the Mac too?  So DX and OpenGL?<br><br>Perhaps the VSync or something has been tweaked. This is a bummer and may stop me using V1.32  Although V1.32 has some cool fixes by the sounds of things. <br><br></td></tr></table><br>
<a name="948357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just meant that if you have `Threaded` selected under the build menu it will use the new garbage collector, regardless of whether you actually use threads for anything. <br><br></td></tr></table><br>
<a name="948369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll test out V1.32 towards the end of next week (going to Seattle for a few days meanwhile). It could be machine related too, like it might be OK before AND after on mine, or bad with both versions on mine.  Won't know until I test it. So if someone else can do more tests meanwhile, then great. <br><br></td></tr></table><br>
<a name="948438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman :<br><br>Sorry, I meant to point out that I didn`t have the threaded option on either.<br><br>@GreyAlien :<br><br>It would be handy if you could check when you get back and let us know your results. In the meantime I will try out a few different things like going back to version 1.30 and seeing if that changes anything. With regards to the window being centered on Mac I cannot say (but I`m sure that Mark wouldn`t have added it if it didn`t) and yes, it works for both DX and OGL.<br><br>A great addition! All we need now is native icon support.<br><br>Jason. <br><br></td></tr></table><br>
<a name="948475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, figured out that the problem was not caused by BMax but by me setting the AutoImageFlags to 0 as I was going for a retro\pixel i.e. no blurring of images when scaled upward.<br><br>Can anyone explain why this results in the odd jittering of my images when they move? Also is there a way to avoid this whilst retaining the pixel sharpness of my images?<br><br>Jason. <br><br></td></tr></table><br>
<a name="948714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Back on subject now. I`m adding a few bells and whistles to my timing code now that it`s working well. <br><br>First question, should I be adding any jitter correction to the delta value, will it have any impact when using tweening or is it redundant in this case? I`m thinking of adding the delta values to an array and using the average from this. Would this work and if so how many values would be good to store for an accurate result?<br><br>@HrdNutz:<br><br>You once quoted this in another thread regarding timing,<br><br><div class="quote"> <br>Even fixed step loops use some type of Delta Timing as a base, to ensure the right amount of steps/second is executed. And the Delta Time is where jitters occur. The simple way to average Deltas is to keep adding new deltas to a buffer (removing the oldest ones) and using the average of all those as Delta Time. The buffer can scale dynamically depending on execution rate - a .5 second to 1 second buffer works well. There are other ways to do this, but this is the simplest and effective.<br> <br></div><br><br>What do you mean by a .5 to 1 second buffer, an array with 500 or 1000 places? (1 second = 1000 millisecs) Also how would you scale this to match the execution rate?<br><br>Second question, in the Retro 64 method (link above from Foppy) the programmer checks for alt-tab cases like this,<br><br><pre class=code>
;account for when the user alt-tabs :)
If NumTicks &gt; 20 Then NumTicks = LastNumTicks
LastNumTicks = NumTicks	
</pre><br><br>I can see the point to this but just wanted to ask how the number 20 is chosen in this case?<br><br>Thanks for any further help, it`s all coming together now :)<br><br>Jason. <br><br></td></tr></table><br>
<a name="948724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Carter</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> One of you should write up tutorials on the different timing methods and post them in the blitzmax tutorial section. because this topic is something most new people dont know about and end up asking questions because theres almost to much stuff about delta time, frame limiting and tweening to know whats good and what isnt.<br><br>Pete <br><br></td></tr></table><br>
<a name="948836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> Few glad the problem was the flag.  It's simply that no autoimageflags loads the image in without filteredimage and thus the image will not draw at sub-pixel coords which is required for totally smooth movement. <br><br></td></tr></table><br>
<a name="948860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can rest easy Grey Alien :) BTW, you mean phew! I think ;)<br><br>Jason. <br><br></td></tr></table><br>
<a name="948896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep I did mean phew, lol, weird typo... <br><br></td></tr></table><br>
<a name="948921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> We all get those days Grey. <br><br>Back on topic, can anyone answer my latest questions in post 125?<br><br>Jason. <br><br></td></tr></table><br>
<a name="949187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firstly, when you're usign tweening you are probably not using delta timing at the same time. So why would you add anything to delta when you're tweening? Tweening is really to compensate for the difference between the timing of `whole logic frame updates` versus the precice decimal amount of logic frames which should be done at a given time. I'm not sure how tweening would deal with jittering, maybe it would `just work`? Anyone?<br><br>As to the 20 frames averaging, or 20 frames capping, it's just a number picked out of the air which presumably allows there to be normal operation when there is up to that much lag but not more. You could pick another number. Probably need to experiment to force a jitter lag and see how it performs.<br><br>I'm only replying to this because nobody else did for a while, so sorry if this is not helpful. <br><br></td></tr></table><br>
<a name="949204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman :<br><br>To my understanding, and please correct me if I am wrong here, even fixed rate logic is using some type of Delta Timing so that it knows how many steps it needs to execute. This is the part that I thought may benefit from a bit of jitter correction but again I may be wrong? If tweening is involved then maybe it is not needed at all?<br><br>Any further input on this would be most helpful,<br><br>Jason. <br><br></td></tr></table><br>
<a name="949618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, fixed rate logic does not have anything to do with delta. It runs at a fixed rate of n logic cycles per second - where n is an integer, ie whole cycles only. It never does `part of a cycle` like delta timing does.<br><br>However, it's when you add tweening, as an extra interpolation in the *graphics code*, or by copying the current whole-frame logic state into a temporary logic buffer to perform tweening on it so that the graphics code doesn't have to mess with the tweening, that you get into this variable display stuff.<br><br>The difference between tweening and delta is that delta is usually applied to the logic code, whereas tweening is applied to the graphics code (unless doing the double-buffered logic I just mentioned).<br><br>If you get a jitter when you're doing delta timing you can just adjust the delta by adding a `speedup` or `slowdown` value to it each frame until it's back to `current time`.<br><br>If you get a jitter when you're doing fixed rate logic, it's a different ball of wax. By the time that you are supposed to be rendering graphics, lets say maybe you were supposed to do 3 logic steps before rendering but only got to do 1 due to a small jitter, your logic is now 2 frames behind. Then along comes your graphics with tweening code and is supposed to be emulating a logic hz of 3.2 cycles per frame. Maybe it would then try to use logic data 2 frames old and tween the equivalent of a predicted movement based on old data? would you then have to smooth the object movements using splines? It could get quite tricky. Delta timing doesn't suffer quite so much because you just multiply everything by the delta value, but especially where you have a high logic hz rate you may have to account for multiple logic frames each time you come to do your tweening. <br><br>So basically your tween value gets adjusted by adding the delta jitter value to it somehow, but this might not get you quite so smooth results as delta timing handling jitters. Anyone else care to share some experience with this? <br><br></td></tr></table><br>
<a name="968975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> loads the image in without filteredimage and thus the image will not draw at sub-pixel coords which is required for totally smooth movement. <br></div><br><br>What?!  If you don't load an image with the FILTEREDIMAGE flag then it won't draw it at fractional coordinates?  It'll only draw it at Ints??  Can anyone corroborate this?  I'm not anywhere near my computer atm. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
