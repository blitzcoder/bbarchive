<!DOCTYPE html><html lang="en" ><head ><title >Strange image behavior</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Strange image behavior</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Strange image behavior</a><br><br>
<a name="499321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Today I was working on my Jill of the Jungle game when I noticed something odd. Any image that's position is tracked with floats becomes blurred when moving it around the screen. Here is a simple example that gives me the same problem on two different machines. <br><pre class=code>
Graphics 320, 240, 32

SetMaskColor 255, 0, 255
img = LoadImage("jill.png", MASKEDIMAGE)

Local jY# = 15

SetColor 255, 255, 255
Repeat
Cls

DrawImage img, 50, jY
DrawText jY, 1, 1

If KeyDown(KEY_UP) Then jY:-.1 ElseIf KeyDown(KEY_DOWN) Then jY:+.1

FlushMem; Flip
Until KeyDown(KEY_ESCAPE)
</pre>Required Image: <img src="http://legion.gibbering.net/eik/jill.png"><br><br>Press down to move Jill and you'll notice the top and bottom of the image doesn't appear the same when at certain positions. This is causing every tile in my map to randomly change from 16 to 17 pixels tall. Why does this happen and how can it be fixed? <br><br></td></tr></table><br>
<a name="499335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eikon, Same thing happens with me. I converted the code to .bb and all was OK. <br>I can only assume it's a 'feature' of the 'improved' float<br>system.<br>Check...<br><a href="/posts.php?topic=43861#489843" target="_blank"> here </a><br>and<br><a href="/posts.php?topic=44396" target="_blank"> here</a><br>and<br><a href="/posts.php?topic=43916" target="_blank"> here </a><br>If it is caused by this then it's VERY annoying.<br>Obviously, I reserve the right to be very wrong. <br><br></td></tr></table><br>
<a name="499354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to waste your time, TonyG. Converting the float with Int() fixes the problem. :|<br><br>Note to self: Experiment more before posting... <br><br></td></tr></table><br>
<a name="499462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nonsense! Then you rob idiots like me of solutions to problems I havent run into yet!! ;) <br><br></td></tr></table><br>
<a name="499542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The effect you are seeing is actually correct. What's happening is that your graphics card is probably applying realtime antialiasing on all the pixels to try to represent what the image would look like at a sub-pixel coordinate. This does tend to have the subtle effect of making the image look a little blurred, especially if you're used to seeing solid distinctions between areas of different colors.<br><br>Of course, as you found, converting your coords with Int() resolves the issue because when the coordinates are whole numbers there is no antialiasing effect shown. <br><br></td></tr></table><br>
<a name="499543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could also try a call to glDisable(GL_POLYGON_SMOOTH) and that might have the same effect of switching off the antialiasing. <br><br></td></tr></table><br>
<a name="499548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm.. I didn't get any blurring just the top of her head went missing every few moves. Same thing was OK on B3D on <br>the same machine so, in my case, it wasn't the graphics card.<br>Anyway, it's over now. <br><br></td></tr></table><br>
<a name="499559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> DirectX isn't OpenGL.<br>So just because B3D did something this does not imply that BM does it as well or in the same way <br><br></td></tr></table><br>
<a name="499563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll consider myself corrected <br><br></td></tr></table><br>
<a name="499609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why does this happen and how can it be fixed? <br></div>Sub pixel positioning. Since BlitzMAX uses a texel based (or 3D if you wish) coordinate system (as opposed to pixel based) 2,5 is actualy a valid position! Ofcourse since the screen cannot display this position accurately, the 3D hardware is compensating for it by transforming the image.<br><br>As you have noticed yourself, the "fix" is to use absolute integer positions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
