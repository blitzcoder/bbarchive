<!DOCTYPE html><html lang="en" ><head ><title >random numbers drawn from a normal distribution</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >random numbers drawn from a normal distribution</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >random numbers drawn from a normal distribution</a><br><br>
<a name="1222513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GreenVertical</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to create a function which will give me random numbers which are drawn from a normal (i.e. Gaussian) distribution - in which I can input the mean and standard deviation as arguments. (I know that there is a 'quick and dirty' way of getting 'normalish' random distributions by just adding several random numbers together but I wanted something a bit more precise). <br><br>I managed to find some code in Pascal which I converted to Blitzmax but the output I get is rather odd....<br><br>for 10 iterations - I got this as output - I'm not even sure what these symbols mean<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br>-1.#I<br><br>Can anybody help me spot the error in my function or at least tell me why I get this strange non-numeric output?<br>Many thanks in advance...<br><br>Here is my code.....<br><br>Strict<br>SeedRnd MilliSecs()<br><br>Local rNum:Float<br>For Local i:Int = 1 To 10<br>	rNum= randomgaussian(0,1)<br>	DrawText rNum,400,10+(i*30)<br>	Print dectostring(rNum,2)<br>Next<br>End<br><br>Function RandomGaussian:Float(mean:Float,SD:Float)<br>Local U1:Float, S2:Float, rGauss:Float<br>    Repeat<br>    	U1= 2*Rnd() - 1 <br>    	S2= Sqr(U1) + Sqr(2*Rnd()-1) <br>    Until S2 &lt; 1 <br>  	rGauss= Sqr(-2*Log(S2)/S2) * U1 * SD + Mean<br>	Return rGauss<br>EndFunction<br><br>Function DecToString:String(value:Double,places:Int=5)<br>	Return Left(String(value),Instr(String(value),".") + places)<br>EndFunction <br><br></td></tr></table><br>
<a name="1222515"></a>

<a name="1222534"></a>

<a name="1222546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function RandomGaussian:Float(mean:Float,SD:Float)
	Local U1:Float, U2:Float, M:Float, S2:Float, rGauss:Float
	Repeat
	U1= Rnd(-1,1) 
	U2 = Rnd(-1,1)
	S2= U1*U1 + U2*U2
	Until S2 &lt; 1 
	M = Sqr( -2*Log(S2)/S2 )
	rGauss= M * U1 * SD + Mean
	' NOTE: You get a second, independent, value essentially for free with M * U2 * SD + Mean
	Return rGauss
EndFunction</pre><br>Box-Muller also generates two values. Just remember that BlitzMax uses degrees.<br>So something like Cos( 2*Pi*U ) should be Cos( 360*U )<br><br>Both methods rely on generating a random "direction", meaning a randomly oriented unit vector. <br><br></td></tr></table><br>
<a name="1222954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GreenVertical</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks indeed - works great! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
