<!DOCTYPE html><html lang="en" ><head ><title >Why does Rnd work this way?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why does Rnd work this way?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Why does Rnd work this way?</a><br><br>
<a name="914498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see that Rnd(min_val,max_val) works differently from Blitz3D inasmuch as max_val is <b>exclusive</b>. Why is this?<br><br>So now how do i get a random number in the inclusive range 0.0 to 1.0, for example?<br><br>I also see that Rand()'s parameters are both inclusive... <br><br></td></tr></table><br>
<a name="914501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> scrub that... need to read better <br><br></td></tr></table><br>
<a name="914546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So now how do i get a random number in the inclusive range 0.0 to 1.0, for example? <br></div><br>Just use <b>Rnd(0,1)</b>.  Never concerned myself with all that inclusive/exclusive lark.  When you're returning a double the chances of that double being exactly 1 would be miniscule anyway.<br><br>Just ran a couple of hundred iterations and the highest I got was 0.99442527370318512.  Do you need it more precise than that? <br><br></td></tr></table><br>
<a name="914547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you need it more precise than that? <br></div>Probably not, now you mention it. I was just wondering why it differed from the other blitz languages, really. I also need to get used to the increased precision offered by Doubles, as I've not had to use them in a good while. :) <br><br></td></tr></table><br>
<a name="914548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The floating point value Rnd(a,b) is in the range from a to b, where a is included but b is excluded. This is the way it works in all versions of Blitz and all other languages I can think of.<br><br>It is a natural consequence of the way floats work. Imagine a simplified system with exactly three decimal digits. To generate a random float we generate three random digits. There are one thousand possible values uniformly distributed in the range 000 to 999. Now we put a decimal point at the front to get values from .000 to .999, which includes 0 but not 1.<br><br>So that's our random x from 0 to 1, with 1 excluded. For the range a to b we generate x as before, then calculate ( a + x * ( b - a ) ). This ranges from a to b ,with b excluded.<br><br>That's exacly how Rnd() works, except with random binary bits instead of random decimal digits. <br><br></td></tr></table><br>
<a name="914553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the Blitz3D docs say:<br><div class="quote"> <br>This returns either a floating point or integer number of a random value falling between the start and end number. It returns an integer if assiged to an integer variable, and it returns a floating point value if assiged to a floating number variable. <b>The start and end values are inclusive.</b><br> <br></div><br><br>Your explanation does make sense though, Floyd. Maybe the docs are wrong - wouldn't be the first time. :) <br><br></td></tr></table><br>
<a name="914600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It returns an integer if assiged to an integer variable, and it returns a floating point value if assiged to a floating number variable. <br></div><br>That's wrong no matter what else the function does. The returned value is always floating point, single precision for classic Blitz languages and double for BlitzMax.<br><br>Of course, if assigned to an integer variable then the value is converted to an integer. For example "n% = Rnd(1,4)" can only produce the results 1,2,3 in BlitMax.<br><br>But in earlier Blitz languages the conversion is done by rounding to the nearest integer. Hence the possible values are 1,2,3,4. This is no doubt the source of confusion about the end of the range being included.<br><br>It also a source of error. The length of the interval is 3. The integer results 1,2,3 in BlitzMax are equally likely, each occuring about 1/3 of the time. But the 1,2,3,4 of older Blitzes are not equally likely. The 2 and 3 each have probability 1/3, but the 1 and 4 split the other 1/3. This was particularly problematic in Blitz's early days when there was no Rand function. <br><br></td></tr></table><br>
<a name="914625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sheesh, talk about lazy! I've just now read the Blitz3D description of Rnd() all the way through.<br>It actually uses the faulty "y = Rnd(0,10)" in the example code.<br><br>Here is a demostration of the difference.<br><br>In BlitzMax the numbers 1,2,3 occur with counts near 1000,1000,1000.<br>In Blit3D the numbers 1,2,3,4 occur with counts near 500,1000,1000,500.<br><br><pre class=code>
Global count[5]   ;'   This array syntax works with both BlitzMax and Blitz3D etc.


Print
Print "  Count occurences of 1,2,3,4."
Print
For n = 1 To 3000
	r = Rnd(1,4)
	count[r] = count[r] + 1
Next

For n = 1 To 4
	Print n + "  " + count[n]
Next

WaitKey
</pre> <br><br></td></tr></table><br>
<a name="914659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Big10p: I never knew that, but I too don't worry about it as that chance of hitting a full rounded integer as the top number is so rate. <br><br></td></tr></table><br>
<a name="914755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting stuff, Floyd! <br><br></td></tr></table><br>
<a name="914871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rand is inclusive though<br><br>e.g.<br><div class="quote"> <br>For x=1 To 100000<br>random=Rand(1,10)<br>If random=10<br>RuntimeError "arg"<br>EndIf<br>Next<br> <br></div> <br><br></td></tr></table><br>
<a name="914969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know, I mentioned that in my first post. ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
