<!DOCTYPE html><html lang="en" ><head ><title >Is there still no bitwise NOT?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is there still no bitwise NOT?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Is there still no bitwise NOT?</a><br><br>
<a name="630866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have discovered I can so Blah = Blah Xor $FFFFFFFF to do a bitwise not, but I would think I should be able to do a normal bitwise not, like you can in C.  I think in C it would go something like Blah = !Blah.<br><br>Maybe the Boolean Not would work in BlitzMax, but I'm pretty sure it didn't work in other versions of Blitz, so I don't trust it will work here. <br><br></td></tr></table><br>
<a name="630868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
x=1
x=not x
print x
</pre> <br><br></td></tr></table><br>
<a name="630874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bitwise not is ~<br><br>There is a thread elsewhere about the difference between using ~ for not or for xor.<br><br>If you do:<br><br>x=1<br>x=~x<br>print x<br><br>you'll get a bitwise not of x only<br><br>if you include a second variable in the operation, it turns it into an xor<br><br>x=1<br>y=2<br>x=x~y<br>print x<br><br>prints the xor of the two values<br><br>If you think about it, since ~value is the same as FFFFFFFF xor value, it would be a waste of space for BRL to create a separate specific ! operator. If you want to do something like:<br><br>a=b + !d<br><br>do<br><br>a=b+(~d)<br><br>put it in brackets. <br><br></td></tr></table><br>
<a name="630883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> tonyg: That is logical "Not", not bitwise. <br><br></td></tr></table><br>
<a name="630889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Angel:<br>Thanks, that works!  <br><br>But you don't need to put it in brackets to use it as in your last example.<br><br>And I don't think it would be a waste to allow us to use !.  It would be one less difference from other languages like C, and it would not confuse people who think it is doing something with xor but they can't figure out what. <br><br></td></tr></table><br>
<a name="630898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't ! used for declaring Doubles or something? <br><br></td></tr></table><br>
<a name="630906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Binary not: Not<br>Bit Not: ~<br>binary invert (bitwise not for all bits): value ~ $FF (or how many bytes it has) <br><br></td></tr></table><br>
<a name="630919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> binary invert (bitwise not for all bits): value ~ $FF (or how many bytes it has) <br></div><br>Or just ~value, surely? <br><br></td></tr></table><br>
<a name="630923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup.<br><br>And yes, I think ! is used for something more important. Get over it ;-D <br><br></td></tr></table><br>
<a name="630938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No ~value does not work ... tried that back when someone asked on the bug board. I would have assumed a similar behavior as well ... <br><br></td></tr></table><br>
<a name="630944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it <b>DOES</b> work.<br><br><pre class=code>Local value = %111

Print Bin( ~value )</pre> <br><br></td></tr></table><br>
<a name="630961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think he means...<pre class=code>Local b:Byte = 0
Print Bin(~b) ' gives -1 (I meant just negative) even though it's unsigned.
Print Bin(Byte(~b))
Print Bin(b ~ $FF)</pre><pre class=code>Local b:Byte
Local i:Int = $FFFFFFFF

Print Bin(i ~ (~b))
Print Bin(i ~ (b ~ $FF))</pre><br><br>SSwift, What do you mean *still*?<br><br>~ has been the bitwise compliment/not since B2D (at least)! <br><br></td></tr></table><br>
<a name="630964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes if you use binary.<br>But any number is in real a binary so it should work any numeric type without inverting it!<br><br>If you invert 0 (type Byte) you should get 255 which you do not get as a mather of facts. <br><br></td></tr></table><br>
<a name="630982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bill:<br>Wow.  You're right.  <br><br>But where is it in the freaking help file?!  <br><br>I've been coding in Blitz for about five years now, asking for bitwise NOT at times, like when trying to work directly with Windows, and other folks have agreed with me that it was unfortunate it didn't have it, and would offer "solutions" like using subtraction.  I ended up solving the problem by simply not using not, and using constants that I inverted manually.  I only just found the xor trick the other day.<br><br>It sure would have been nice if it were documented, or Mark, or someone else in the know would have answered my posts asking for a bitwise not all those times.  Sheesh! <br><br></td></tr></table><br>
<a name="630985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think Bin `extends` the variable to an Integer before displaying it? If the uppermost bit in the number is set, it will fill all the upper 24 bits with 1's as well, to represent -1 as an Integer. I had the same thing happen with Hex$() trying to display Double's. As soon as you set the 31st bit it fills the upper 32 bits with 1's, as part of displaying it (original data unchanged).<br><br>So you're SEEING -1, as 11111111111111111111111111111111, but that's because of the display technique. If you print value Shr 8 you'll notice it's 0 instead of having 8 0's at the top end.<br><br>And yes, again, it DOES work to do ~value, same as !value <br><br></td></tr></table><br>
<a name="631003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry<br>I'm wrong. Seems like one of the last SyncMods changed something since the thing was posted in the bugs<br><br>sorry for that *shutting myself*<br><br>PS: I'm aware how the 2 complement in PC works ... its part of my education ... <br><br></td></tr></table><br>
<a name="631006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And yes, again, it DOES work to do ~value, same as !value <br></div>Yes, I know. I was the one that showed you (your thread about subtracting 2 unsigned longs). :o)<br><br>I think you're missing the point I was making (albeit, rather badly)...<pre class=code>Local b:Byte = $FF

Print b

Print ~b ' Should an unsigned variable be represented as being negative? I'd say not.</pre><br><br>[edit]But It appears that wasn't what Dreamora was going on about anyway...:o)[/edit] <br><br></td></tr></table><br>
<a name="631012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was my point. But the convert to string seems to involve a convert to a different numeric type first. If you enclose the ~b with a byte() it will result in 255 (checked that before the above posting).<br><br>Its just another of BMs extremely inconsistent handling of situations and operators :( <br><br></td></tr></table><br>
<a name="631014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you enclose the ~b with a byte() it will result in 255 <br></div>Yeah, I already did that above.<br><br>It's still wrong IMHO!<br><br>A byte containing $FF when converted to an int should be $000000FF, not $FFFFFFFF...<br><pre class=code>Local b:Byte
Local i:Int = $FFFFFFFF

Print i &amp; (~b) ' Shouldn't this be $FFFFFFFF AND $FF (255) ??

'b' = ~b
Print i &amp; b ' Like this?</pre>'b' shouldn't be converted to an int before inversion.<br><br>Am I just talking from my nether regions here?<br><br><br>Anyway, after that completely pointless rantette...<br><br><br>@Sswift - It's in the docs (for B3D at least), but it *is*  well hidden. ;o)<br><br>Go to 'Language Reference&gt;Expressions'. <br><br></td></tr></table><br>
<a name="631112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> For some reason you need to cast (~b) to a byte<br>This works<br><pre class=code>
Local b:Byte
Local i:Int = $FFFFFFFF

Print i &amp; Byte(~b) ' $000000FF

'b' = ~b
Print i &amp; b ' Like this?
</pre> <br><br></td></tr></table><br>
<a name="631220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it is the print statement itself that extends it from byte to Int equivalent, producing the extra bits. Probably when you do ~byte it actually does only invert the 8 bits, but when you PRINT it it prints additional made-up bits. Your byte variable is still only $FF. <br><br></td></tr></table><br>
<a name="631228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local a:Int
Local b:Byte

b = %100000001
b = ~b

Print Bin(b)

a = ~b

Print Bin(a)
</pre><br><br>I suspect this is the source of the problem.  B is getting converted to an int before the NOT is performed, and when you perform the NOT on an int, you get the result you see here. <br><br></td></tr></table><br>
<a name="631236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL...This is what happens when you try to operate a forum when you're suffering from sleep deprivation. ;oD<br><br>I know that's what's happening, I just didn't explain it very well.<br><br>It's definitely not just the print statement...<pre class=code>Local b:Byte = 0
Local i2:Int = $FFFFFFFF

Local i2:Int = i &amp; ~b

Print "'i2' should be 255, it's actually " + i2
Print "Especially for AngelDaniel - " + (i2 Shr 24)

i2 = i &amp; Byte(~b)
Print i2</pre>It's probably not a good idea to be mixing different variable types like this anyway though.<br><br>I just thought it was worth a mention. I tend to just stick to ints anyway. <br><br></td></tr></table><br>
<a name="631292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> The operation is wrong<br><br>It should be Local i2:Int=i~b <br><br></td></tr></table><br>
<a name="631315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> *sigh*...I give up... 8o/<br><br>But, can I have some? <br><br></td></tr></table><br>
<a name="631562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> In C bitwise xor is the ^ opperator and bitwise not is the ~ character. So BMX just uses the ~ for both because ^ is the exponent opperator. But making ! the bitwise not opperator would be bad because in every other language ! is the logical not. ( The notequal opperator &lt;&gt; should be != but I think it doesn't matter as much.)<br><br>I was thinking that maybe the Byte type is actually signed, because in C (or at least in the MacOS X gcc implementation) a char is signed:<br><pre class=code>
char c = 0xFF;
printf("%i\n", c);
/* produces -1 */
</pre><br>So that could be explaining why you kept getting some of those problems because Bytes are signed.<br><br>EDIT:<br><br>I just tried a small Byte test and got some strange results:<br><pre class=code>
Local b1:Byte = $FF
Local b2:Byte = ~b1
Print b1      ' produces 255'
Print ~b1    ' produces -256'
Print b2      ' produces 0'
Print ~b2    ' produces -1'
</pre><br>Printing b1 made me think that Bytes are unsigned as it printed 255 which is what would be expected in an unsigned byte. But when I printed ~b2 it came as -1 which would be expected in a signed byte! Printing b2 seemed right as it came out to 0, but the strangest one was b1 which came out to -256!<br><br>-256 cannot be expressed as either a signed or unsigned byte so I'm thinking that what happened was that b1 ( $FF ) was converted to an int ( $000000FF )<br>and then the bitwise not of that is $FFFFFF00 which is -256. That would explain the b1 which is 255 because if it is $FF then it is converted to an int which is $000000FF which is 255. ~b2 is right because b2 is converted to an int which is $00000000 and the not of that is $FFFFFFFF which is -1. b2 is 0 either way.<br><br>So in the end, all these problems arrise because everything seems to be converted to an int before any operators are applied in the Print function.And I still don't know whether Bytes are signed or unsigned. <br><br></td></tr></table><br>
<a name="631709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I had BlitzMax, I would prefer they kept away from ! operator, because since you can pump C code inside Max, you might automatically place the ! in the source thinking it was the bitwise not operator, then finding out it goes titties up  because it should really be the ~ operator!<br><br>Que head scratching for a while! :)<br><br>Dabz <br><br></td></tr></table><br>
<a name="632000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's what I think is happening.  ~ is used to XOR two numbers together.  I bet that when you don't specify 2 parameters, BlitzMax will XOR one parameter with a constant, and I bet that constant is $FFFFFFFF.<br>So if you do <br><pre class=code>
Local v1:Byte = $FF
Print ~v1
</pre><br>What happens is that v1 needs to be converted to an int because the constant is an int.  Then v1 is XORed with the constant and the result is returned to Print.  So $FF is converted to $000000FF, then XORed with $FFFFFFFF, giving you $FFFFFF00 which is -256.<br>Now when you cast the number to byte, then the top 24 bits are truncated leaving you with $00.  So if you did<br>[code]<br>Local v1:Byte = $FF<br>Local v2:Byte = ~v1<br>Print v2<br>[code]<br>Then v1 is converted to $000000FF, XORed with $FFFFFFFF leaving you with $FFFFFF00, then converted to byte and assigned to v2, making v2 = $00.<br><br>It seems the solution is to treat ~ as only an XOR if you're using anything other than ints.  So to do a NOT on a byte, just use $FF ~ v1.  Now since both sides of the equation are bytes, it'll not do any conversions and give you the correct answer. <br><br></td></tr></table><br>
<a name="632313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah that would explain why the bytes were mysteriously being converted to Ints and printing out strange and unexpected values. Though I think if you are XORing a byte, even if it is with an implicit constant like it seems to be here, BMX should at least XOR it with a Byte constant and not an Int constant, since v1 is a Byte and not an Int. <br><br></td></tr></table><br>
<a name="632318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should ... thats the problem ...<br>And as worse part it does not even mention that it does this not allowed conversion <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
