<!DOCTYPE html><html lang="en" ><head ><title >textwidth and textheight?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >textwidth and textheight?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >textwidth and textheight?</a><br><br>
<a name="1101468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So exactly how does textwidth work?<br>is each character the same width and height?<br><br>I am using textwidth and textheight to make a collision box around a character ie x or s or D.<br><br>how would i find whether some objects x and y coordinates are within a box using the textheight and textwidth command, as well of course as the texts x.y coords itself.<br><br>heres a snippit of my code:<br><br><pre class=code>

g.x and g.y are x,y coords of player character
b.x and b.y are x.y coords of enemy character
g.c$ and b.c$ are the chracters string which is a single letter
g.sx/g.sy and b.sx/b.sy are the setscale variables for each individual character

If b.d = 0
		If g.x + (TextWidth(g.c$)) &gt; b.x And g.x &lt; b.x + (TextWidth(b.c$)) And g.y + (TextHeight(g.c$)) &gt; b.y And g.y &lt; b.y + (TextHeight(b.c$))
			FlushKeys()
			battlepause = 1
			WaitTimer(CreateTimer(2))
			battle(g,b)
		EndIf
		SetScale 3,2
EndIf
</pre><br><br>also does using setscale for different size texts change the number given my textwidth?<br>I made an example code, but the number did not change, however i am getting different results in my actual code.<br><br>so would i do it like this?<br><br><pre class=code>
If g.x + (TextWidth(g.c$)*g.sx) &gt; b.x And g.x &lt; b.x + (TextWidth(b.c$)*b.sx)
</pre><br><br>hope i explained my problem well enough.<br>thanks for the help! :) <br><br></td></tr></table><br>
<a name="1101470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It returns the actual width and height of the text in question - unless you are using a monospaced font each character is NOT the same width.<br><br>I don't know if it has been changed or not, but when blitsmwx first came out the Netscape was ignored completely: so to get the ACTUAL sizes in pixels you'd need to multiply it by your current scale yourself. <br><br></td></tr></table><br>
<a name="1101576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i see. thanks for the reply.<br>i think ill just have to draw a box behind the character to get the width and height.<br><br>Also, is there any better way to check for collision? im just using strings for the character, not an image. i guess i could make images for all the different characters like a D for dragon and a g for goblin etc... and then use ImagesCollide. but id rather not do that if i dont have to, i wanna focus more on the actual game play.<br><br>ill upload my code if you want to see it to give me feedback. <br><br></td></tr></table><br>
<a name="1101579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simple bounding box collision test, assuming your anchor is top left corner.<br><br><pre class=code>
If (obj1.x + obj1.width &gt;= obj2.x And obj1.x &lt;= obj2.x + obj2.width And obj1.y + obj1.height &gt;= obj2.y And obj1.y &lt;= obj2.y + obj2.height)
	Print "Obj1 overlaps obj1"
EndIf
</pre> <br><br></td></tr></table><br>
<a name="1101581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ima747<br><br>I understand that, i just couldnt figure out if the textwidth and textheight gave me the actual width and height cuz I am scaling the text larger than normal.<br>have any ideas? <br><br></td></tr></table><br>
<a name="1101592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't believe the scale is factored into the text size commands, it does factor the size of the font you loaded but I don't believe it uses your draw scale as well. To test, get text width for something, then change scale, get text width again. if they're the same, you have to factor your own scale...<br><br>To factor your own scale, just get the text width/height and multiply it by the scale you've set.<br><br>Any other graphics you have are also not going to factor in the draw scale, so you might just want to include the draw scale factor into the collision test (... obj1.x + obj1.height * x_scale &gt;= ...). Depends how you're laid out, if you change scales a lot (perhaps each object has it's own scale that needs to be factored?) etc. <br><br></td></tr></table><br>
<a name="1101599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did do a test to try that and it showed the width to stay the same at all scales,<br>but its possible that i was only getting the original width/height and not updating it when i changed the scale.<br>ill try that real quick.<br>also, in my code above i do multiply the width/height by the scale,<br>and then i was getting funny results that were either much too big or too small.<br>I am missing something. <br><br></td></tr></table><br>
<a name="1101703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like you're using the wrong scale somewhere, or have a math operation reversed...<br><br>You could try making a visible collision box with a drawing primitive to get a better sense of what your numbers doing. Also make sure you're using the right anchors, the scale is being calculated appropriately for the drawing scale used if you're changing your scales, etc. Could be as simple as a typo. <br><br></td></tr></table><br>
<a name="1101772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just so you know...<br><br>Textheight returns the height of the font, not the height of the string you pass it.<br><br>In other words, if you send "Yy" and you send "a", textheight is going to return the same height, even though the "Yy" one is actually taller.  So, you can just pass an empty string to textheight and get your value once and save it.  No reason to call it multiple times in your program, unless the font changes. <br><br></td></tr></table><br>
<a name="1102458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >B</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for the help guys.<br><br>@ima747<br>I did have a typo! I was using the attack of the character as the scale so the more you leveled up the larger your collision box got. haha. i just played my game for a while and found that out. still not working as well as i would like tho.<br><br>@taskmaster<br>i didnt know thats how it worked.<br>I think im going to just use numbers rather then the textheight/width. the hitbox around all the characters will be the same.<br><br>thanks again guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
