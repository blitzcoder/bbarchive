<!DOCTYPE html><html lang="en" ><head ><title >OOP Design for Boardgame</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OOP Design for Boardgame</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >OOP Design for Boardgame</a><br><br>
<a name="832275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. I am making a computer version of the boardgame Thud!, although I guess this will apply to any generic boardgame. I have made boardgames in the past, but would like some advice on what would be good design, especially OOP design that I'm relatively new to.<br><br><a href="http://en.wikipedia.org/wiki/Thud_%28game%29" target="_blank">http://en.wikipedia.org/wiki/Thud_%28game%29</a><br><br>Rather than me reiterate the article, have a quick look. You only really need to read the gameplay section.<br><br>My current idea is to create a board type that has a 2d array of cell types. Each cell type has a piece field, and a boolean value for whether or not there is a piece.<br><br>Assuming that's right, here's the piece type. My procedural blood tells me that the piece type should have a piecetype field which holds a constant. Dwarf could be 1, troll 2, 3 for thudstone and 4 for corner. (If only Blitz had enums)<br><br>My OOP senses are tingling that perhaps I should have dwarf, troll, thudstone and corner types that extend from piece. But I'm not sure how these would tell the game what type they are, other than returning a whatis function constant number. But that's just a long way of doing the above.<br><br>So any ideas? <br><br></td></tr></table><br>
<a name="832432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why do you need a boolean ( which Blitzmax doesn't actually have ) to tell you if there's a piece there or not. If the piece field holds a piece, it's occupied, if not, it's not. I don't see the point of another separate field.<br><br>Secondly, I don't know the game at all, so could you explain to me why the game would need to know whether the piece is a troll or a dwarf? The whole point of inheritance is for things *not* to know what type of thing extendedthing is. <br><br></td></tr></table><br>
<a name="832449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. If I want to see if a piece can move from one square to another, I need to know if that square is occupied. By boolean I mean an int which is just set to 0 or 1 :)<br><br>2. Trolls and dwarfs have different rules for movement and capture. <br><br></td></tr></table><br>
<a name="832450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If I want to see if a piece can move from one square to another, I need to know if that square is occupied. <br></div><br>And in what way does testing if the square has a piece in its piece field not solve that problem? I'm still not seeing the need for a separate field.<br><br><div class="quote"> 2. Trolls and dwarfs have different rules for movement and capture.  <br></div><br>Then they should implement abstract methods from the base class which define how those rules affect them respectively. If you're constantly checking to see what type they are, you're defeating the purpose of inheritance, and in fact you would actually be better off not inheriting at all. <br><br></td></tr></table><br>
<a name="832458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make a piece type with an abstract move method.<br><br>Then the dwarf inherits the piece type and the dwarf's move method moves how dwarfs are allowed to move.<br><br>The troll inherits the piece type and the troll's move method follows the rules of how a troll can move.<br><br>etc... <br><br></td></tr></table><br>
<a name="832466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Secondly, I don't know the game at all, so could you explain to me why the game would need to know whether the piece is a troll or a dwarf? <br></div><br><br>The trolls and dwarfs are two opposing teams, so knowing what type it is also tells you who owns it. <br><br></td></tr></table><br>
<a name="832547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks.<br><br>For the first thing, you mean checking if the piece field is null or not? I thought about that but wasn't sure if it was a safe way of doing it. Guess it is!<br><br>I'm still having difficulty with the second bit. For example, a dwarf can only attack trolls and vice versa. So he needs to know what type is he trying to capture. <br><br></td></tr></table><br>
<a name="832584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>For the first thing, you mean checking if the piece field is null or not? I thought about that but wasn't sure if it was a safe way of doing it. Guess it is! <br></div><br>Yes, that's it. It's as safe as you make it. As long as you make sure you null the field when a piece is removed from that square of the board, it's rock solid.<br><br><div class="quote"> <br>I'm still having difficulty with the second bit. For example, a dwarf can only attack trolls and vice versa. So he needs to know what type is he trying to capture. <br></div><br><div class="quote"> The trolls and dwarfs are two opposing teams, so knowing what type it is also tells you who owns it.  <br></div><br>Right, I think I understand now. In general, I meant what TaskMaster described, but there are a number of ways.<br><br>If trolls and dwarfs are really very similar. If, for example, the only difference is like black and white in chess, it's just a team identifier, then I wouldn't inherit them at all. I'd just have a team field and use that.<br><br>EG:<br><br><pre class=code>
Field Team:Int

Const TEAM_DWARF:Int=1
Const TEAM_TROLL:Int=2

Method Attack(Piece2:Piece)
   If Self.Team&lt;&gt;Piece2.Team
      ' The piece is on a different team, so it's ok to attack it.
   End If
End Method
</pre><br><br>If, as I initially suspected, trolls and dwarves are really quite different, and have different rules about how they move and this sort of thing, then inheriting them probably is a good way to go. Personally, I would definitely want to keep all the type casting or type testing in those types though, because letting the game do it could get messy.<br><br>So you might have something like this :<br><br><pre class=code>
Type Piece

   Const TEAM_DWARF:Int=1
   Const TEAM_TROLL:Int=2

   Method GetTeam:Int()
   End Method

   Method Attack(Piece2:Piece)
      If Self.GetTeam()&lt;&gt;Piece2.GetTeam()
         ' WE CAN ATTACK
      End If
   End Method
End Type

Type Troll Extends Piece
   Method GetTeam:Int()
      Return TEAM_TROLL
   End Method
End Type

Type Dwarf Extends Piece
   Method GetTeam:Int()
      Return TEAM_DWARF
   End Method
End Type
</pre><br><br>Then I would do something very similar for whatever other rules differentiate the different pieces. If they move differently, I would have an abstract move method. If they attack differently, the same. If there's anything I needed to know about them ( such as what team they were on, but could also be game rules which apply only to certain pieces ) then I would do that with abstract methods too.<br><br>It's all personal preference at the end of the day, and there are lots of ways to do it. It's not really right and wrong so much as ways you like and ways you don't. In my case, I don't much like the idea of the game examining pieces to see what type of piece they are. I like the idea of having the pieces do that themselves and then providing a method for them to tell the game if they can do certain things or if certain rules apply to them. At first it probably seems like extra work but as the game gets bigger, it tends to save you more and more work. <br><br></td></tr></table><br>
<a name="832613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If trolls and dwarfs are really very similar. If, for example, the only difference is like black and white in chess, it's just a team identifier, then I wouldn't inherit them at all. I'd just have a team field and use that. <br></div><br><br>They're not -- all trolls move like kings in chess, and all dwarfs move like queens. Plus they both have a special move as well, which depends on the locations of the opponent and their own other units. (They can either do a 'normal' move, or get thrown to the end of a line of identical units, IIRC)<br><br>The idea is that the trolls are slow, few in number, and strong. The dwarfs are fast, large in number, and weak.<br><br>All games are a two-parter, with both players playing each of the races once. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
