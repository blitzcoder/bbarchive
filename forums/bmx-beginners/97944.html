<!DOCTYPE html><html lang="en" ><head ><title >Dragging or moving the window fast causes hang</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Dragging or moving the window fast causes hang</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Dragging or moving the window fast causes hang</a><br><br>
<a name="1140956"></a>

<a name="1140959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello ,<br><br>I am creating my application with MAXGUI and I use some canvas gadget to draw my maps and some dungeon preview for my level editor.<br><br>When I am moving the window of my application or shaking fast or my window is outside of the screen , then my application hangs (Freezes for a long time) , if I wait and leave it , it will continue to work and unfreeze , but sometimes the application cause the not response error and windows forces to terminate.<br><br>I made a little research in the forums and you are saying like something about hooks which I didn't understand.<br><br>Also there is the EVENT_WINDOWMOVE , I put all RedrawGadget() for all my canvases , but the problem wasn't fixed.<br><br>Also put the  RedrawGadget() for all canvases in my main event loop , but this made the program hangs again faster.<br><br>Is there some easy solution to make my program updated the window hook event?<br><br>Thank you very much.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1141067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> When I am moving the window of my application or shaking fast or my window is outside of the screen , then my application hangs (Freezes for a long time) <br></div><br>This sounds like the events add up a lot in the event queue and when leaving it for a while they are processed and the application is responsive again.<br>Either there are too many events, or the time to process is too long.<br><br><div class="quote"> something about hooks which I didn't understand. <br></div><br>I don't think hooks will help you here, your application would probably freeze even earlier. This happens because there is no queue when using hooks, but every event is processed immediately (although you could create your own queue then).<br><br><div class="quote"> Also put the RedrawGadget() for all canvases in my main event loop , but this made the program hangs again faster. <br></div><br>As the cycle to redraw is probably taking too much time this makes things even worse when in the main loop. Try to use the redraw as less as possible (instead of more) and try to optimize that function if possible.<br><br><div class="quote"> Is there some easy solution to make my program updated the window hook event? <br></div><br>Again, a hook is probably not the solution here. A hook helps if you need immediate action when an event occurs, for example you resize a window and the event goes into the queue but you can process that event only after releasing the mouse button which is may too late. Using a hook lets you redraw your window content already while resizing, which looks a lot better.<br>Don't know if you are using Logic Gui (only for design or also program structure), because it can create your whole form hooked in the events but you need to understand Blitzmax types quite well.<br>Old but still valid discussion about hooks:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=79728" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=79728</a> <br><br></td></tr></table><br>
<a name="1141203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If hooks not solves the problem , what do you think that will.<br><br>I have problem because my application hangs if I act violently with the window or if I put the window outside of the screen and my application is unusable.<br><br>I have only one RedrawGadget() function when I press the horizontal and vertical scrollers to update my map. My map is a canvas gadget with tiles.<br><br>I have put all my drawing canvas gadgets updates in the GADGETPAINT event.<br><br>I setGraphics on each of my canvases and I flip after drawing something in my canvases.<br>If I will put the flip command once at the end of the EventID only the last canvas will be drawn and the graphics will be false in that last canvas.<br><br><pre class=code>
	If EventID() = EVENT_GADGETPAINT Then
	
		SetGraphics CanvasGraphics(background_canvas_panel)
		Draw_Background_panel_wallpaper()

		SetGraphics CanvasGraphics(map)
		Draw_Map()
		
		SetGraphics CanvasGraphics(dungeon_preview)
		Draw_Dungeon_Preview()
		
		SetGraphics CanvasGraphics(north_wall_preview)
		Draw_North_Walls_Preview()
		
		SetGraphics CanvasGraphics(south_wall_preview)
		Draw_South_Walls_Preview()
		
		SetGraphics CanvasGraphics(west_wall_preview)
		Draw_West_Walls_Preview()
		
		SetGraphics CanvasGraphics(east_wall_preview)
		Draw_East_Walls_Preview()
		
		SetGraphics CanvasGraphics(lower_panel_canvas)
		Draw_Lower_Panel()
		
		
		'Flip &lt;--- If I put it here I have false results
	End If
</pre><br>Each function contains the flip command separately<br><br>I have seen many of posts about hooks and I don't have understand nothing.<br><br>What is the difference between flip and flip 0? <br><br></td></tr></table><br>
<a name="1141226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If hooks not solves the problem , what do you think that will. <br></div><br>Without seeing the code I can just guess and would say a different code design.<br><br><div class="quote"> I have problem because my application hangs if I act violently wit <br></div><br>If you can't stop the events and can't minimize the time for the redraw you could may set a flag that a redraw is in progress and when a new event occurs it will be just ignored.<br>Another way could be to reduce the redraws to a certain FPS by calculating the MilliSecs between redraws.<br><br><div class="quote"> if I put the window outside of the screen and my application is unusable <br></div><br>What happens then?<br><br><div class="quote"> I have only one RedrawGadget() function when I press the horizontal and vertical scrollers to update my map. My map is a canvas gadget with tiles. <br></div><br>Do you draw everything or only what is visible? Maybe you loose some time drawing tiles not anymore visible.<br><br><div class="quote"> I setGraphics on each of my canvases and I flip after drawing something in my canvases. <br></div><br>Sounds ok. I would also set the ViewPort before drawing on each of the canvasses, also to cut out all invisible area.<br>SetViewport 0,0,GadgetWidth( Canvas ),GadgetHeight( Canvas )<br><br><div class="quote"> If I will put the flip command once at the end of the EventID only the last canvas will be drawn and the graphics will be false in that last canvas. <br></div><br>Every canvas needs it's own flip as you already discovered.<br><br><div class="quote"> What is the difference between flip and flip 0?  <br></div><br>Flip 0 does not wait for the vertical blank and thus occurs as soon as possible. <br><br></td></tr></table><br>
<a name="1141293"></a>

<a name="1141354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am drawing all tiles on my canvas , but I think graphics that outside of the canvas size , not presents or does?<br><br>I tried and setviewport function for all canvases , but I didn't have and improvement.<br><br>I upload the game file with source code to see how the program freezes.<br><br><a href="https://www.box.com/s/697437255e9ce60f2342" target="_blank">https://www.box.com/s/697437255e9ce60f2342</a><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1141300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you use Event = PollEvent() or WaitEvent?<br><br>PollEvent() can allow the system to continue when there are no events in the cue excellent for server apps, also adding a Delay(1) at the end of your main loop will free the CPU cycles for windows to use other things this also has a knock on effect of making your apps faster. <br><br></td></tr></table><br>
<a name="1141318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Load_Data.bmx is missing in the download. <br><br></td></tr></table><br>
<a name="1141334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neither PollEvent() Nor Delay(1) worked.<br><br>I have already use waitevent() to capture my events.<br><br>PollEvent() makes the application freezes more. <br><br></td></tr></table><br>
<a name="1141335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will upload in the morning <br><br></td></tr></table><br>
<a name="1141355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The file was updated , Includes the Load_Data.bmx<br><br><a href="https://www.box.com/s/697437255e9ce60f2342" target="_blank">https://www.box.com/s/697437255e9ce60f2342</a> <br><br></td></tr></table><br>
<a name="1141359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It won't compile: Draw_Dungeon_Preview not found.  Plus I need a zipstream module installed. So I couldn't prove what I'm about to recommend.<br><br>Your gadgetpaint code is flawed.  You should just repaint the gadgets that need repainting, at the moment you are drawing all three views for every gadgetpaint message you receive, regardless of who asked for it.  Your loop should be more like this:<br><br><pre class=code>
Repeat

	WaitEvent()
	
	If EventID() = EVENT_WINDOWCLOSE And EVENT_APPTERMINATE Then End
	If EventID() = EVENT_GADGETPAINT Then
	
		Select EventSource()
		Case background_canvas_panel
			SetGraphics CanvasGraphics(background_canvas_panel)
			Draw_Background_panel_wallpaper()
			Flip
		Case map
			SetGraphics CanvasGraphics(map)
			Draw_Map()
			Flip
		Case dungeon_preview
			SetGraphics CanvasGraphics(dungeon_preview)
			Draw_Dungeon_Preview()
			Flip
		End Select 
		
	End If

Forever
</pre> <br><br></td></tr></table><br>
<a name="1141362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok ,<br>I uploaded again with koriolis zipstream mod included<br>With exe file included<br>With the folder and outside my BlidePlus solution.<br><br>If you don't have the BlidePlus the Eob4_Editor.bmx is the main file<br>If you don't have blide plus just load the maxide and load Eob4_Editor,bmx and everything will compile.<br><br><br><a href="https://www.box.com/s/717e40bf56e8271d4973" target="_blank">https://www.box.com/s/717e40bf56e8271d4973</a> <br><br></td></tr></table><br>
<a name="1141363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are also too many flip, sometimes in the draw function and then again in the main loop.<br><br>As matibee said there are still things missing to compile it.<br><br>The ZipStream module can be found here:<br>http://www.koriolis-fx.com/forum/index.php?action=dlattach;topic=15.0;attach=19<br><br>When I run the provided editor.exe and just doing nothing your program takes more or less 100% CPU. As you have a WaitEvent() in your main loop it looks like that you produced somewhere an endless loop or constantly generating events. <br><br></td></tr></table><br>
<a name="1141366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange why my program not compiles to you and here compiles perfectly?<br><br>Where do I put my waitevent()?<br><br>I include ZipStream module in my editor.zip you have downloaded.<br><br>What things are still missing?<br><br>Here I have CPU Usage 1% <br><br></td></tr></table><br>
<a name="1141370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, didn't saw your new upload.<br>My last post was still related to the first code.<br><br>When I compile your new code it also is at 1%, will have a closer look later. <br><br></td></tr></table><br>
<a name="1141371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> mod/brl.mod/eventqueue.mod/eventqueue.bmx:<br>[bbcode]<br>Function Hook:Object( id,data:Object,context:Object )<br>	Local ev:TEvent=TEvent( data )<br>	If Not ev Return<br>	<br>	Select ev.id<br>	Case EVENT_WINDOWMOVE,EVENT_WINDOWSIZE,EVENT_TIMERTICK,EVENT_GADGETACTION,EVENT_GADGETPAINT 'added EVENT_GADGETPAINT<br>		PostEvent ev,True<br>	Default<br>		PostEvent ev<br>	End Select<br>	<br>	Return data<br>End Function[/bbcode]<br>and rebuild modules. <br><br></td></tr></table><br>
<a name="1141378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I change a lot of code and changed if(s) with Select(s) and Case(s)<br><br>And the program messed up. It became little faster , it freezes again but unfreezes little faster , might "select" and "case" commands are faster whan "if" commands.<br><br>The canvases was messed up , now canvaces draws other graphics than it should , for example graphics from upper canvas (The tools canvas) presents graphics for Map X and Y , Lower_panel_canvas.<br><br>If I will not use RedrawGadget() my gadgets not redraws to present the updated graphics in the canvases , but if I will use  RedrawGadget()  the program becomes slower and freezes longer.<br><br>Conclusion:<br><br>I will not use MaxGui for my Level Editor , I am working and with another one level editor (Backup) <br><br>The link of the second version of the level editor:<br><a href="https://www.box.com/s/880c4a768974757502d0" target="_blank">https://www.box.com/s/880c4a768974757502d0</a><br><br>Which works better , not freezes , but uses the ifsoGui module. Things that exist in MaxGui not exists in ifsoGui. IfsoGui not freezes my program and verything works nice.<br><br>But things are missing in ifsoGui that exists in MaxGui, like canvas gadgets and menus. (TaskMaster knows about this and fed up with my report).<br><br>A lots of difficulties with this language. Many of the modules not compiles , a lots of struggles. wxGui Module which is the best for this case not compiles at all.<br><br>I will create my level editor only and nothing else. (If I will manage to finish it).<br><br>The main game which works perfectly was created with PureBasic and PureGDK module. And there is no problem. (You will say why not you create your level editor with PureBasic and are you complaining here?) , The Gui system of PureBasic is not so easy as BlitzMax , (MaxGui and ifsoGui modules).<br><br>I spent a lots of money for the language for modules for expansions for programs , I am very unhappy.<br><br>The language alone without no modules, works. But a lots of things are missing.<br><br>The commercial modules which worked was , ifsoGui, but is incomplete.<br>The maxGui , is abandoned and is incomplete and not works well.<br>And from free modules the only module which compiled was koriolis zipstream which works perfectly.<br><br>My new ifsoGui skin is included take it as a gift.<br><br>For people who is curious to see the main game download this:<br><a href="https://www.box.com/s/56b41340c30234d4fb0a" target="_blank">https://www.box.com/s/56b41340c30234d4fb0a</a><br><br>The old editor included which was created with MS-Visual Basic 6 , but is vary old and unstable language with newer versions of windows. XP &amp; 7. <br><br></td></tr></table><br>
<a name="1141379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>mod/brl.mod/eventqueue.mod/eventqueue.bmx:<br><br><br>Function Hook:Object( id,data:Object,context:Object )<br>        Local ev:TEvent=TEvent( data )<br>        If Not ev Return<br>        <br>        Select ev.id<br>        Case EVENT_WINDOWMOVE,EVENT_WINDOWSIZE,EVENT_TIMERTICK,EVENT_GADGETACTION,EVENT_GADGETPAINT 'added EVENT_GADGETPAINT<br>                PostEvent ev,True<br>        Default<br>                PostEvent ev<br>        End Select<br>        <br>        Return data<br>End Function<br><br>and rebuild modules<br><br> <br></div><br><br>What do you mean with this?<br><br>To go to my mod folder to my brl module and in eventqueue.mod folder , I will find one source file with name eventqueue.bmx<br>and put the code you gave me above?<br><br>Where to put the code and how to call the new code from my application?<br>Or does it called automatically and fix whole my problems?<br>My new changes I made , I messed up my application , I will load my backups does this fix my problems?<br><br>I will make the changes and I will post what I found. If the problem will be fixed.<br><br>How did you learn all of these? Really one new programmer of one new language (NEW 7 years old) anyway , do any new programmer need to make all of these surgeries in the code to make everything work correctly , what happen for one newbie who don't know how to do all of these and there is not any documentation and all of these fixes not included when you purchase the language out of the box. <br><br></td></tr></table><br>
<a name="1141381"></a>

<a name="1141382"></a>

<a name="1141383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok the last surgery was successful , it fixed my problem , I load the backups , before I change the code from if to selects and cases and now when I am shaking the window the program not freezes.<br><br>So why does this not was fixed in the official language?<br><br>Do you liked the second version of my editor?<br><br>The MaxGui version of the editor will become like the first editor the Visual Basic 6 one.<br><br>May I ask and one thing which must be fixed?<br><br>BUG WITH SCROLLBARS:<br><br>When you pressing the body of the horizontal scrollers and vertical scroll bars , not the up and down arrows , not the handler , but the body of the scrollbar , when you press the body of the scrollbar body  highlights and not scrolls , only if you drag the handler and push the arrows , would you please help me to fix and this?<br><br>What kind of surgery doctors do I need to do in which file?<br>I will keep safe all of these updates.<br><br>Thank you very much , now at least I have some hope to continue to develop my level editor. :)<br><br>When I will finish whole my game , I will keep one gift for people who helped me.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1141386"></a>

<a name="1141387"></a>

<a name="1141389"></a>

<a name="1141390"></a>

<a name="1141391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> scrollbars fix:<br>when you create sliders and setslider range, change lower range from 0 to 1:<br>[bbcode]<br>map_horizontal_scroller = CreateSlider(0, 361, 601, 18, background_canvas_panel, SLIDER_HORIZONTAL)<br>SetSliderRange(map_horizontal_scroller, 0, 18)<br>	<br>map_vertical_scroller = CreateSlider(602, 0, 16, 361, background_canvas_panel, SLIDER_VERTICAL)<br>SetSliderRange(map_vertical_scroller, 0, 28)<br>[/bbcode]<br>to:<br>[bbcode]<br>map_horizontal_scroller = CreateSlider(0, 361, 601, 18, background_canvas_panel, SLIDER_HORIZONTAL)<br>SetSliderRange(map_horizontal_scroller, 1, 19) 'range 0 to 18<br>	<br>map_vertical_scroller = CreateSlider(602, 0, 16, 361, background_canvas_panel, SLIDER_VERTICAL)<br>SetSliderRange(map_vertical_scroller, 1, 29) 'range 0 to 28<br>[/bbcode]<br><br>also small fix to mainloop:<br>[bbcode]<br>If EventID() = EVENT_GADGETACTION Then<br>		If EventSource() = map_horizontal_scroller Or map_vertical_scroller Then<br>		RedrawGadget(map)<br>		'Flip<br>		EndIf<br>[/bbcode]<br>to:<br>[bbcode]<br>If EventID() = EVENT_GADGETACTION Then<br>		If EventSource() = map_horizontal_scroller Or EventSource()=map_vertical_scroller Then 'fixed<br>		RedrawGadget(map)<br>		'Flip<br>		EndIf<br>[/bbcode]<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1141398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Zeke suggest in his first post is to change the behavior of the MaxGUI internal Event Queue.<br>All events are collected in a queue and some events have the chance to flood the queue until overflow.<br>So what is done in the hook he describes is to ignore a certain event if there is still one of the same type in the queue.<br>Means when now a GADGETPAINT event comes up it will be ignored if there is still one in the queue.<br>The most common event who floods the queue is the TIMERTICK... when too fast.<br>This could help in your case to a certain extent.<br>I see some other problems when looking into your code, which I think should be solved first.<br><br>What I see is that you use a lot of different canvasses (7 or so), in my opinion you could just use one. That would already minimize some problems, as it is much easier to handle.<br>Another problem is that you put gadgets on top of a canvas, canvas on canvas, slider on canvas and so on. Please avoid it totally to put any other gadget on a canvas it is not really designed for it (nor supported).<br><br>When you only want to display a certain wallpaper without any animation, just use a simple panel and set the picture as pixmap to it.<br>When trying to draw your different stuff which is now visible in an extra canvas on the canvas, like the North,West... just use a simple offset value to draw on the big canvas.<br>Choose your gadgets in a way that the canvas is in the middle and other control gadgets like textfields, buttons, stepper, sliders are outside the canvas. <br><br>Types could simplify your workflow a lot. <br><br></td></tr></table><br>
<a name="1141405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) Perfect <br><br></td></tr></table><br>
<a name="1141407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> My program works well now why do I need put my slider outside of my canvases? I want my slider to be beside of my level number texts.<br><br>I had used lots of label gadgets , but I was need to refresh the gadgets and sometime all of these label gadgets was blinking.<br>I was need a lots of variables for creating all of these label gadgets so now I put a lots of things inside the canvas with the simple blitzmax core commands like drawtext and changing colors without need to mess with a lots of gadgets creations.<br><br>For example the tools panel , which I will put all of my tools buttons , I don't need to create buttons gadgets as image buttons not exist , I don't have yet used the smartbuttons , but I don't like the idea to have a panel gadget as a button , and again I will need to create a lots of panel gadgets.<br><br>The 4 canvases which you see the North South West and East wall side for each square and the dungeon preview, might be 5 useless canvaces , I will see if I will remove them and just use draw image in specific position.<br><br>Even if I use only one canvas for whole window area , again if I will draw the map tiles positioned on this only one canvas , I will need to put horizontal and vertical scrolls inside the canvas again , because the map needs horizontal and vertical scrollers.<br><br>But I will need and other canvases , when I choose other options from menus which I don't have ready yet. For example each of options of the game are on one panel , the panel have one canvas and on the canvas you see the graphics.<br><br>When the program starts you see the map edit panel , but there will be and other panels which will have canvases for adventure properties , for monster properties , for dungeon mechanics etc... <br><br></td></tr></table><br>
<a name="1141416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My program works well now why do I need put my slider outside of my canvases?<br>I had used lots of label gadgets , but I was need to refresh the gadgets and sometime all of these label gadgets was blinking. <br></div><br>As said, the way you use it, it is not supported. The blinking or flickering gadgets is one of the results. This flickering also means extra redraws which means extra time.<br><br><div class="quote"> For example the tools panel , which I will put all of my tools buttons... <br></div><br>I don't know how your editor should look at the end, but there are always different possibilities.<br>You could just use the big canvas and reserve a part for the tools and do all things via graphics.<br>Or you could show all tools in a ListBox where you could choose the one needed. A ListBox can have also icons as big as your tiles.<br>If the tools are limited a normal toolbar may even enough. If needed you could put the toolbar in an extra floating window on top.<br>Even a bunch of panel (each with a tile) inside a ScrollPanel could be used, and so on...<br><br><div class="quote"> Even if I use only one canvas for whole window area , again if I will draw the map tiles positioned on this only one canvas , I will need to put horizontal and vertical scrolls inside the canvas again , because the map needs horizontal and vertical scrollers. <br></div><br>The ScrollBars need to be outside the canvas, which means you need a little bit different design of the form to achieve the same as what you want.<br><br><div class="quote"> But I will need and other canvases , when I choose other options from menus which I don't have ready yet. For example each of options of the game are on one panel , the panel have one canvas and on the canvas you see the graphics.<br>When the program starts you see the map edit panel , but there will be and other panels which will have canvases for adventure properties , for monster properties , for dungeon mechanics etc... <br></div><br>I don't understand clearly what you mean here. It is not so that you can't have another canvas, of course you can, but you don't need it if you just want to display different things. The same canvas can show your tiles, then show the map, then show the 3D view and so on. It depends only what you draw, in what mode you are like edit mode or trial mode in your program. <br><br></td></tr></table><br>
<a name="1141456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am making changes for using only one canvas. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
