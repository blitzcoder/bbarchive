<!DOCTYPE html><html lang="en" ><head ><title >String Pointers?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >String Pointers?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >String Pointers?</a><br><br>
<a name="666337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although I can see reasons why string pointers would not be implemented, I can also see situations where they could be very useful. ( For example, a self-contained InputBox in a custom GUI, so the box can actually put it's result into a variable automatically. )<br><br>The thing is, I did a quick forum search and I found a thread with someone talking about string pointers in BlitzMax, but I can't find any way to declare them. String Ptr is an "illegal pointer type" according to the compiler. Are they declared differently or been removed or whoever was talking about them was confused? <br><br></td></tr></table><br>
<a name="666350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Variable type pointers have been removed with 1.16 or 1.18 (assume for consistency reason. Within BM, everything is managed and a ptr is not manageable ...) <br><br></td></tr></table><br>
<a name="666356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see, thanks. Well that's a damn shame. Makes it very much harder to write self-contained objects when the objects access to external variables is limited like that. I suppose a workaround is to use a Bank, have the object resize it and put the contents of the string into it, and then get it back out to a variable again later, but it's going to be quite slow and it's a pretty ugly solution since you have to manually update the variable from the bank. <br><br></td></tr></table><br>
<a name="666367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As it needs to update anyway, I would suggest directly using a string and maintain a subscriber list (list of all objects that use the string) which is notified of updates. <br><br></td></tr></table><br>
<a name="666451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That doesn't really work. When the gadget gets destroyed, it's not deleted because the string object still has a reference to it and the gadget doesn't know about the string, so it can't do anything about it.<br><br>So the string would have to have a TList connected to it, and the Gadget would have to have yet another link ( it already has one for the list of gadgets and one more if the object is a child of a parent gadget ) and it would probably have to be implemented in an abstract gadget type, which means objects that have no connection to a string still have the link and have to check if it's non-null and remove it if it is. Pretty much as ugly as the solution I mentioned above. <br><br></td></tr></table><br>
<a name="666456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If an object subscribes to something, this is a 2 sided action. Once on the object that it subscribes to and once on itself.<br><br>As your objects needs to update the string it must known to which "string offerer" it is subscribed and this can be used to unsubscribe it before freegadget-ing <br><br></td></tr></table><br>
<a name="666459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't a string just an array of bytes? Use Varptr(MyString)? <br><br></td></tr></table><br>
<a name="666461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> A string is a structure that contains its length and a pointer to a buffer of (unsigned) shorts.<br><br>You could in theory get the pointer to it, but it's probably not worth it since you'll still have to reallocate the memory and such if you need to expand the string. <br><br></td></tr></table><br>
<a name="666810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> After further consideration, I've decided ( in case anyone searches for this and wonders the same things I wondered ) that the cleanest way to handle this is with two function pointers, one to a function which sets the string and one to a function which gets the string. It means writing those functions for every string I want to use it with, BUT it doesn't require wrapping the string in another object, which would be very ugly, and it doesn't require a TList or anything like that. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
