<!DOCTYPE html><html lang="en" ><head ><title >Beyond Array length/bounds?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Beyond Array length/bounds?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Beyond Array length/bounds?</a><br><br>
<a name="744409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This keeps throwing an error for me.<br><br><pre class=code>
		WriteMap:TStream = WriteFile(ThisFile)
		For Local yiter:Int = 0 Until MapWidth 
			For Local xiter:Int = 0 Until MapHeight 
				WriteString WriteMap,FactoryMap[xiter,yiter]
			Next
		Next
		CloseStream(WriteMap)
</pre><br><br>I can confirm that the file exists and is opened correctly as it writes the data in the array to the file.<br><br>It crashes with an "Unhandled Exception:Attempt to index array element beyond array length" error and BLide highlights Writestring.<br><br>Any ideas what could be causing it?<br><br>Thanks :) <br><br></td></tr></table><br>
<a name="744412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not the writing to the file that's causing the problem, but reading from your FactoryMap array.  The error would seem to suggest that the array hasn't be defined to the size of MapWidth and MapHeight, and is smaller than it should be.  Start by checking where the array is defined/set-up. <br><br></td></tr></table><br>
<a name="744414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i assume you store the dimensions of factorymap[] as you init the array. As arrays count from 0, mapwidth and mapheight are 1 to big. <br><br>Second error that may be there is the fact that you iterate through mapheight with the x-axis and vice versa. <br><br></td></tr></table><br>
<a name="744415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi JazzieB, thanks for the reply.<br><br>This is how i setup my MapWidth and MapHeight variables for the array.<br><br><pre class=code>
Global MapWidth:Int = 1024/32
Global MapHeight:Int = (( 768 / 32 ) - 2)
</pre> <br><br></td></tr></table><br>
<a name="744416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brendane</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Double check your code - you are using y for the *width* and x for the *height*. Is this your intention? If your defined array is not square and you really meant x:=width, y:=height then that could be your problem. <br><br></td></tr></table><br>
<a name="744417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Second error that may be there is the fact that you iterate through mapheight with the x-axis and vice versa.  <br></div><br><br>OH NO! That was the problem. I can't beleive my project was on hold for 2 hours while I tried to figure out why that was happening.<br><br>It's fixed now, thanks to BladeRunner. :)<br><br>Thanks Dude. :) Thanks All :) <br><br></td></tr></table><br>
<a name="744418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't spot that he was getting MapWidth and MapHeight mixed up with the X and Y axis!<br><br>Anyway, as for your first sentence, when Until is used in a For loop BlitzMax stops before it reaches the last value, so would actually stop at MapWidth-1 and MapHeight-1, in this case.  So this isn't the problem here.  Probably just the whole X/Y mix-up thing. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
