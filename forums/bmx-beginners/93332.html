<!DOCTYPE html><html lang="en" ><head ><title >Help creating a tile based game</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help creating a tile based game</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Help creating a tile based game</a><br><br>
<a name="1067053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spraycanmansam</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>As the title, I've been searching the forum and external sources for a few days for info and code snippets to help me on my way to create a tile based RPG.<br><br>I wouldn't class myself as a noob when it comes to programming, I've punched out a few run-of-the-mill games but I've never attempted a tile-based game.<br><br>I work best when I can see the basic working code/principle and break it down. Are there any links to posts on the forum with a working example and source code?<br><br>I really need to know where to start and how to setup and handle the tiles? Even if there's a framework/engine that would help?<br><br>Much appreciated :)<br><br><br>Cheers,<br>Sam <br><br></td></tr></table><br>
<a name="1067094"></a>

<a name="1067095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In this post I helped someone with what sounds like a similar game. Here is the post with a working code sample, that might give you some ideas. You need to press enter to start it.<br><br><a href="http://blitzbasic.com/Community/posts.php?topic=90762#1033024" target="_blank">http://blitzbasic.com/Community/posts.php?topic=90762#1033024</a><br><br>You could take a look at TileMax by _Skully<br><br><a href="http://tilemax.webs.com/" target="_blank">http://tilemax.webs.com/</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1067134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although nowadays they aren't the most performing ones, they're still a good source of information, helping the novice to figure out what are the basic mechanics behind a tile-based visualization engine.<br>Both engines come with an handy module+example written for Blitzmax. You can find them by scrolling the following urls:<br><a href="http://tilestudio.sourceforge.net/" target="_blank">http://tilestudio.sourceforge.net/</a><br><a href="http://tilemap.co.uk/mappy.php" target="_blank">http://tilemap.co.uk/mappy.php</a><br><br>Tile Studio, IMHO, is very interesting to work on. ;-) <br><br></td></tr></table><br>
<a name="1067136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> when you say tile-based do you mean square tiles or iso? <br><br></td></tr></table><br>
<a name="1067166"></a>

<a name="1067167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is a link to a simple tile engine source code I made a few years back:<br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=2235" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=2235</a><br><br>it is not much but it illustrate basic principles.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1067232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AltanilConard</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The idea behind tilebased RPG's are pretty universal. Once you're familiar with BlitzMax you could best learn from other sources. I remember finding some GameDev articles extremely usefull, but can't find them atm...<br><br>For handling the Tiles, just use a 2 dimensional array of integers, use a tilesheet where each frame represents a tile, and drawing the map gets easy.<br><br>I believe writing a full featured Tilemap class yourself (probably multiple times) is a necessary experience for all 2D game programmers, you'll learn lots from it. <br><br></td></tr></table><br>
<a name="1067504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spraycanmansam</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @slenkar: I would love to make an iso-tile game, but I'm starting easy and going for the basic square tile game :)<br><br>Thanks for the examples, they're very useful :)<br><br>I've been thinking about how to go about generating and reading the tile maps...? (the examples created random tile maps)<br><br>I'm downloading Tilestudio to see if I can figure out if it will do what I want it to do. Half the problem is I don't know what I want it to do :P <br><br></td></tr></table><br>
<a name="1067521"></a>

<a name="1067525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spraycanmansam</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok well I've knocked up a lil tile system from the examples, I've included the code (modified so it'll run out of the box :) If I've done anything wrong or there's a more efficient way, school me :P<br><br>Something I need help with is how would I program the character to move on the tiles? Specifically, I want the character to move a tile at a time but with a smooth transition... does that make sense? <br><br>Say a tile is 32px. If the character moves 32px every key hit it's too fast and jerky. I'm after a way to make the character keep moving to the next tile after the direction key press.<br><br><pre class=code>

Strict


Graphics( 1024, 768 )

'MAP VARIABLES

Const tileSize		= 32
Const mapWidth		= 20								'width of map in tiles
Const mapHeight		= 20								'height of map in tiles

Global map:TTile[,] = New TTile[ mapWidth, mapHeight ] 	'creates a tile map mapWidth wide * mapHeight high



'TILE VARIABLES

Global numOfTileBases = 1
Global allTileBases:TTileBase[] = New TTileBase[ numOfTileBases ]



'TYPES

Type TTile
	
	Field X:Int
	Field Y:Int
	
	Field tileBase:TTileBase	
	
	Global list:TList
	Global image:TImage

	
	Method render()
		
		tileBase.render( X, Y )
	
	End Method
	
	Method update()
	
		render()
	
	End Method
	
	
	Function updateAllTiles()
		
		If Not list  Return
		
		For Local t:TTile = EachIn list
		
			t.update()	
		
		Next
	
	End Function

	Function createTile:TTile( x:Int, y:Int, tileBase:Int )
	
		If Not list  list = CreateList()
		Local t:TTile = New TTile
		list.AddLast( t )
		
			t.X = x
			t.Y = y
			
			t.tileBase = allTileBases[ tileBase ]
		
	End Function
		
End Type


Type TTileBase
	
	Global image:TImage
	

	Method render( x:Int, y:Int )
	
		'DrawImage( image, tileXYtoPixelXY( x ), tileXYtoPixelXY( y ) )
		
		SetColor( 75, 75, 75 )
		DrawRect( tileXYtoPixelXY( x ), tileXYtoPixelXY( y ), tileSize - 1, tileSize - 1 )
		SetColor( 255, 255, 255 )
		
	End Method
	
	
	Function createTileBase:TTileBase( passable:Int )
		
		Local tb:TTileBase = New TTileBase
					
		
		'If Not image  image = LoadImage( "images/grassimg.png" )

		Return( tb )
		
	End Function
	
End Type




Type TPlayer
	
	Field X:Float
	Field Y:Float
	
	Global list:TList
	Global image:TImage

	
	Method render()
	
		'DrawImage( image, X, Y )
		DrawRect( X, Y, tileSize, tileSize )
		
	End Method
	
	Method update()
	
		render()
		
		
		'dont want to be able to move diagonally
		
		If KeyDown( KEY_LEFT )	
			X:-1
		Else If KeyDown( KEY_RIGHT )
			X:+1
		Else If KeyDown( KEY_DOWN )
			Y:+1
		Else If KeyDown( KEY_UP )
			Y:-1
		End If

	End Method
	
	
	Function updatePlayer()
	
		If Not list  Return
		
		For Local p:TPlayer = EachIn list
		
			p.update()
		
		next
				
	End Function
	
	Function createPlayer()
	
		If Not list  list = CreateList()
		Local p:TPlayer = New TPlayer 
		list.AddLast( p )
		
			p.X = ( mapWidth / 2 ) * tileSize
			p.Y = ( mapHeight / 2 ) * tileSize
		
		'If Not image  image = LoadImage( "images\playerimg.png" )
		
	End Function

End Type




loadMap()
TPlayer.createPlayer()

SetOrigin( (1024/2)-(mapWidth/2)*tileSize, 768/2-(mapHeight/2)*tileSize ) 'centers map


While Not KeyHit( KEY_ESCAPE )
	
	Cls
	
		TTile.updateAllTiles()
		TPlayer.updatePlayer()
	
	Flip

Wend




'FUNCTIONS

Function loadMap() 										'create map of tiles
	
	allTileBases[ 0 ] = TTileBase.createTileBase( Null )
	
	
	For Local x:Int = 0 To ( mapWidth - 1 )
		For Local y:Int = 0 To ( mapHeight - 1 )
			map[ x, y ] = TTile.createTile( x, y, 0 )
		Next
	Next

End Function


Function tileXYtoPixelXY( z:Int )								'multiplies map x and y values by the tileSize
	
	Return( z * tileSize )

End Function
</pre><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1068216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To keep a character moving: use a timer, and don't control the x,y-coords directly from reading out the cursor keys, but let cursor keys set a walking state to 1, and a direction variable to the direction given with these cursors. As long as the state is 1, the player moves into the direction given by the direction variable. If the player has arrived onto the new tile, set the walking state to 0.<br><br>With each timer tick you update the whole shebang.. <br><br></td></tr></table><br>
<a name="1068231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simplified, but clear as a whistle.<br><br><pre class=code>SuperStrict
Graphics 640,480

Local px:Int=64,py:Int=64,direction:Int,walking:Int
Local timer:ttimer=CreateTimer(30)

Repeat
	WaitTimer(timer)

	' scan the cursors
	'
	If KeyDown(KEY_LEFT)
		If walking=0 direction=3;walking=1
	ElseIf KeyDown(KEY_RIGHT)
		If walking=0 direction=1;walking=1
	ElseIf KeyDown(KEY_UP)
		If walking=0 direction=0;walking=1
	ElseIf KeyDown(KEY_DOWN)
		If walking=0 direction=2;walking=1
	EndIf
	
	' update player
	If walking
		Select direction
			Case 0 py:-2
			Case 1 px:+2
			Case 2 py:+2
			Case 3 px:-2
		End Select
		If px=(px/16)*16 And py=(py/16)*16 ' check whether the player is on a grid point
			walking=0
		EndIf
	EndIf
	
	' draw the whole shebang
	Cls

	' blue grid	
	SetColor 0,0,255
	For Local y:Int=0 To 479 Step 16
		DrawRect 0,y,640,1
	Next
	For Local x:Int=0 To 639 Step 16
		DrawRect x,0,1,480
	Next
	
	' yellow hero
	SetColor 255,255,0
	DrawRect px,py,16,16
	
	DrawText "U R D L Esc",2,2
	Flip
Until KeyHit(KEY_ESCAPE)
End</pre> <br><br></td></tr></table><br>
<a name="1069313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mate! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
