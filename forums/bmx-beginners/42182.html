<!DOCTYPE html><html lang="en" ><head ><title >OpenGL pipelining?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OpenGL pipelining?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >OpenGL pipelining?</a><br><br>
<a name="472734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that OpenGL has lists and also can run immediate instruction, so I am wondering, in immediate mode, should I be trying to do `other things` in amongst calls to opengl commands? ie should I be pipelining my code so that the gfx card is preferably active as much time as possible as opposed to having to wait around for the rest of my program? Is it better to do a bunch of gl commands and then a bunch of regular code, or interweave them? <br><br></td></tr></table><br>
<a name="472862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmoc</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is only "immediate" mode (as far as most situations are concerned). If by "other things" you mean non-rendering tasks then no because you want to push data to the gfx card as fast as poss. It directly impacts on fps as your scenes get more complicated. It would also make your code generally more complicated because the "division-of-labour" will be unclear. Best to consider your code as being (at least) two distinct sections: rendering, ie, purely pushing data to gfx card, and everything else. <br><br></td></tr></table><br>
<a name="472898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe it is pipelining anyway. When you call drawimage, it begins rendering on the card. <br><br></td></tr></table><br>
<a name="472900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would structure my main loop so that all rendering is done first followed by the game logic and ending with the buffer swap. (If need be, you could probably stuff some CPU work between the initial Cls and the first rendering bit.) That way, the graphics card can get on and do its thang while the logic's going on. Mind you, it will probably have finished doing its stuff long before the logic has finished, but hey.<br><br>Having said that, I've done a couple of tests and I haven't really seen any practical advantage of using things like Vertex Arrays to draw loads of sprites in one go, over using DrawImage. <br><br></td></tr></table><br>
<a name="473015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just following up my own post. Don't mind me :)<br><br>In another thread -  <a href="http://blitzbasic.com/Community/posts.php?topic=42118" target="_blank">http://blitzbasic.com/Community/posts.php?topic=42118</a> - I found that Cls takes an awful lot of GPU time. I'd now suggest putting a *lot* of game logic between the Cls and the drawing commands and other stuff, perhaps input or networking, between the drawing and Flip. <br><br></td></tr></table><br>
<a name="473647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmoc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> or don't use cls? <br><br></td></tr></table><br>
<a name="473852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vertex buffers will be faster cuz you dont have to transfer them to the card every single frame, since a major bottleneck is bus bandwidth not card speed. <br><br></td></tr></table><br>
<a name="473915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does cls work if its that slow ?<br><br>I duno but I always thought that it just nulled the backbuffer. ?<br><br>Does it actually go through the backbuffer pixel by pixel ?<br><br>Also is that actually true or do you at least think that there would be a speed increase by positioning the Render above the Update ??<br><br>This is my normal game loop.<br><br><pre class=code>
repeat
  cls
   update()
   render()
  flip
until sumtin haps.....
</pre><br><br>With all game logic being done first, and then Drawing everything to screen afterwarsd.<br><br>I'm now wondering just how much faster and just how big an impact it would have by moving these two functions around to draw/push to card first then update, but I dont have anything in max far enough on to notice any change, perhaps some one else does ?? <br><br></td></tr></table><br>
<a name="473990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmoc</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on your app, if you are recreating the whole scene each frame (which you are most likely doing) then why bother doing cls? Even a single sq poly is faster than cls if you must clear the frame. <br><br></td></tr></table><br>
<a name="474002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is driver and card specific to be sure, but in general OpenGL immediate commands to nothing but add data to an internal buffer.  When that buffer is full, or when there's a need to flush it, then it is transferred up to the card and rendered in one shot.  That rendering happens in parallel with your code anyway, so don't worry about it.<br><br>For the really big rendering performance boosts, you want to use display lists. <br><br></td></tr></table><br>
<a name="474076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I was wrong about that. I thought Cls was slow, but it was something else instead. It's fine to use Cls. Just ignore my last post ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
