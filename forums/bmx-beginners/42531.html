<!DOCTYPE html><html lang="en" ><head ><title >Are arrays aligned in memory?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Are arrays aligned in memory?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Are arrays aligned in memory?</a><br><br>
<a name="476307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am just wondering, if you define an array of whatever type, e.g. integers or function pointers (yes I'm a function pointer maniac), will BlitzMax allocate the memory for the array aligned in memory to a multiple of the size of the type? (or of 4) ... so that when you access the elements, you read from memory addresses that are multiples of 4? Or does it just read from any memory address? <br><br></td></tr></table><br>
<a name="476316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm, I'm going to say most likely not.  There is no point to aligning the array to the memory, that i know of.  Arrays of ints will be increments of 4, longs incremnts of 8, shorts increments of 2, etc, but strings, arrays and objects are just increments of 4 because they are pointers.<br><br>Err, wait, do you mean an increment of the size of the type of thing it points to? No. Pointers are 4 bytes.  One of the confusing things about saying blah:Byte Ptr.<br><br>Anyway, I'm not sure what you mean. <i>Offsets</i> to elements from the array's memory address will be multiples of the type's size, but not necissarily the actual address. <br><br></td></tr></table><br>
<a name="476443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I mean, let's say, if I create an array, will it for example be stored at address 12 in memory (a multiple of 4) or will it be stored at 11, or 9, or 10?<br><br>The reason I ask is because I know that on most processors it is faster to read and write memory to aligned addresses. If I read an int from address 12, it might well be faster than reading from address 10 because the CPU might have to read the contents of 8 and 12 to produce a full integer value. Also writing an integer to 10 might require two writes, one to 8 and one to 12.<br><br>I recall this was an issue on the 68040 CPU whereby it was preferable to align memory accesses to multiples of 4. It proved to be a lot faster. Similar, some CPU's differ in that if you write 4 sequential bytes to memory, it may be just as fast as writing an integer, due to how the cache works.<br><br>What I'm trying to establish is whether I'm taking a performance penalty by using an array based on where in memory it is located.? <br><br></td></tr></table><br>
<a name="476446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a few tests, and from what I can tell, it seems that all arrays are aligned to the nearest 8 bytes in memory. Arrays of bytes, shorts, int's, longs and doubles are all aligned to 8-byte boundaries. Which is good :-) <br><br></td></tr></table><br>
<a name="476454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Phew!!! Disaster averted. <br><br></td></tr></table><br>
<a name="476470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol <br><br></td></tr></table><br>
<a name="476474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Once again, can you please stop posting non beginner related topics in the Beginner's Area. <br><br></td></tr></table><br>
<a name="476518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm, this isn't the beginners area? <br><br></td></tr></table><br>
<a name="476536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It was before he moved it ;]<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=42550" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=42550</a> <br><br></td></tr></table><br>
<a name="476668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I didn't spot that. Sorry I messed up again *doh*<br><br>I will cease creating topics in the beginners area altogether. I guess I'm not a beginner! :-) But I AM new to BlitzMax, hense the confusion and ambiguity. What defines something as `beginner` is subjective - new to BlitzMax? New to programming? Since I can't draw the line I'll just post any new topics/questions here then we can all share some cake :-) <br><br></td></tr></table><br>
<a name="476694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think something like "the aligmnent of array data in memory" classifies as a beginner topic.  Most beginners are trying to figure out what the hell a function is. <br><br></td></tr></table><br>
<a name="476735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure, if you're a beginner to programming in general, but what about if you are beginner to BlitzMax and don't know how to do something in it that you did in other languages? Are you not then a beginner?<br><br>Anyway, never mind, it's no biggie. <br><br></td></tr></table><br>
<a name="476826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh I think the Beginner forum tends to lean more to those newbies to programming, rather than those newbies to BMax.  I mean as far as BMax is concerned, we're pretty much all on equal ground here ('cept the beta testers:) so it doesn't really make much sense for -everyone- to post in it ;] <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
