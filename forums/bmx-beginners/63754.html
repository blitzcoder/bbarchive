<!DOCTYPE html><html lang="en" ><head ><title >textured line between spheres</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >textured line between spheres</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >textured line between spheres</a><br><br>
<a name="711616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi !<br>Is there a method to drawing this ? (the lines between the sphere) :<br><img src="http://www.bayre.com/zigwigwis/relation.png"><br>A textured poly (or quad) drawing between two spheres ? Don't know how to do this with bmax ! Need your ideas and code tips !!!<br><br>Note : the spheres are displayed at random position x,y on the screen. <br><br></td></tr></table><br>
<a name="711618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Either a textured poly or break the connectors into small segments so you can just use rectangular images, add/subtract segments to extend it, and hide and extra behind the balls. <br><br></td></tr></table><br>
<a name="711642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Drag a Shadded sphere along the path. <br><br></td></tr></table><br>
<a name="711658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Drag a Shadded sphere along the path.  <br></div><br><br>Are these lines supposed to be static, or also animate?<br><br>Rather than dragging a sphere (which would mean hundreds or thousands of sprites needing to be drawn), it might be the easiest to actually make sprite(s) that just contain a picture of (part of) the wobbly line, and rotate those at the correct angles. That way you can get the same effect with drawing just a couple of sprites which is bound to be significantly faster than dragging a sphere. <br><br></td></tr></table><br>
<a name="711659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> which would mean hundreds or thousands of sprites needing to be drawn <br></div><br><br>No it would mean one sprite drawn hundreds or thousands of times. But point taken. (my intention was to sudjest that it was created by dragging the sphere, and then the grab pasted, but hah, your right, just one "Hump" would be enough <br><br></td></tr></table><br>
<a name="711718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Are these lines supposed to be static, or also animate? <br></div><br>better if animated. <br><br></td></tr></table><br>
<a name="711722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm trying a textured poly function by Proger from the code archive. i can't draw a rectangle !<br>i'm searching a single textured line function (d3d and opengl compatible) ... Is someone know how to draw a textured line with this picture !!!<br><img src="http://www.bayre.com/zigwigwis/onde.png"><br>Thanks ! <br><br></td></tr></table><br>
<a name="711787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi !<br>don't understand 'Proger' (code archive) functions. Is there a way to adapt this code to produce  only a textured line (with the image from the previous post) ?<br>Thanks for your help !!!<br><br>My try :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

' TexturedPoly by Proger

'SetGraphicsDriver GLMax2DDriver()
Graphics 1024,780

Local Image:TImage = LoadImage("media/onde.png") ' 32x32 256x256 e.t.c

Local x1# = 100
Local y1# = 150
Local Largeur# = 32.00
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Local xyuv:Float[] = [ ..
			x1#, y1#, 0.0, 1.0, ..
			Float (MouseX()), Float(MouseY()), 1.0, 1.0,  ..			
			Float(MouseX()) , Float(MouseY()) + Largeur# , 1.0, 0.0, ..
			x1#, y1#+Largeur# , 0.0 , 0.0 ]

While Not KeyDown (KEY_ESCAPE)

	Cls
	xyuv[4] = MouseX() 
	xyuv[5] = MouseY()
	xyuv[8] = MouseX() 	
	xyuv[9] = MouseY() + Largeur#
	SetBlend AlphaBlend
	DrawTexturedPoly Image , xyuv
	Flip
Wend

Function DrawTexturedPoly( image:TImage,xyuv#[],frame=0, vertex = -1)
	Local handle_x#,  handle_y#
	GetHandle handle_x#,  handle_y#
	Local origin_x#,  origin_y#
	GetOrigin origin_x#,  origin_y#	
	
	Local D3DDriver:TD3D7Max2DDriver = TD3D7Max2DDriver(_max2dDriver)
	
	Assert Image, "Image not found"
	
	If D3DDriver Then 
		DrawTexturedPolyD3D ..
			D3DDriver,..
			 TD3D7ImageFrame(image.Frame(frame)), ..
			 xyuv, handle_x, handle_y, origin_x,origin_y, vertex*4
		Return
	End If
	Local  OGLDriver:TGLMax2DDriver = TGLMax2DDriver(_max2dDriver)
	If OGLDriver Then
			DrawTexturedPolyOGL ..
				OGLDriver,..
				 TGLImageFrame(image.Frame(frame)), ..
				 xyuv, handle_x, handle_y, origin_x,origin_y,  vertex*4
		Return
	End If
End Function


Function DrawTexturedPolyD3D( Driver:TD3D7Max2DDriver,  Frame:TD3D7ImageFrame,xyuv#[],handlex#,handley#,tx#,ty# , vertex)
	If Driver.islost Return
	If xyuv.length&lt;6 Return
	Local segs=xyuv.length/4
	Local len_ = Len(xyuv)
	
	If vertex &gt; - 1 Then
		segs = vertex / 4
		len_ = vertex
	End If
	Local uv#[] = New Float[segs*6] ' 6
	

	Local c:Int Ptr=Int Ptr(Float Ptr(uv))
	
	Local ii:Int = 0
	For Local i=0 Until len_ Step 4
		Local x# =  xyuv[i+0]+handlex
		Local y# =  xyuv[i+1]+handley
		uv[ii+0] =  x*Driver.ix+y*Driver.iy+tx
		uv[ii+1] =  x*Driver.jx+y*Driver.jy+ty 
		uv[ii+2] =  0  ' *********** THIS IS THE Z-COORDINATE
		c[ii+3] = Driver.DrawColor
		uv[ii+4] =  xyuv[i+2]
		uv[ii+5] =  xyuv[i+3]
		ii:+6
	Next
	Driver.SetActiveFrame Frame
	Driver.device.DrawPrimitive(D3DPT_TRIANGLEFAN,D3DFVF_XYZ| D3DFVF_DIFFUSE | D3DFVF_TEX1,uv,segs,0)
End Function

Function DrawTexturedPolyOGL (Driver:TGLMax2DDriver, Frame:TGLImageFrame, xy#[],handle_x#,handle_y#,origin_x#,origin_y#, vertex) 
	Private
	Global TmpImage:TImage
	Public
	
	If xy.length&lt;6 Return
	
	Local rot#  = GetRotation()
	Local tform_scale_x#, tform_scale_y#
	GetScale tform_scale_x, tform_scale_y
	
	Local s#=Sin(rot)
	Local c#=Cos(rot)
	Local ix= c*tform_scale_x
	Local iy=-s*tform_scale_y
	Local jx= s*tform_scale_x
	Local jy= c*tform_scale_y
	
	glBindTexture GL_TEXTURE_2D, Frame.name
	glEnable GL_TEXTURE_2D
	
	glBegin GL_POLYGON
	For Local i=0 Until Len xy Step 4
		If vertex &gt; -1 And i &gt;= vertex Then Exit
		Local x#=xy[i+0]+handle_x
		Local y#=xy[i+1]+handle_y
		Local u#=xy[i+2]
		Local v#=xy[i+3]
		glTexCoord2f u,v
		glVertex2f x*ix+y*iy+origin_x,x*jx+y*jy+origin_y
	Next
	glEnd
	If Not tmpImage Then tmpImage = CreateImage(1,1)
	DrawImage tmpImage, -100, - 100 ' Chtob zbit' flag texturi
End Function
</textarea> <br><br></td></tr></table><br>
<a name="711807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a method to repeat the pattern of the texture along the line ??? <br><br></td></tr></table><br>
<a name="711822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup. Set the UV coord of the right side to a multiply of 1 <br><br></td></tr></table><br>
<a name="711836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/codearcs.php?code=1795" target="_blank"> DX UV Wrap </a> <br><br></td></tr></table><br>
<a name="711845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rimmsy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://modules.indiepath.com/forum/viewtopic.php?t=11" target="_blank">http://modules.indiepath.com/forum/viewtopic.php?t=11</a><br><br>That should do the trick, I think. <br><br></td></tr></table><br>
<a name="711940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Yup. Set the UV coord of the right side to a multiply of 1 <br> <br></div><br><br><pre class=code>
Local xyuv:Float[] = [ ..
			x1#, y1#, 0.0, 1.0, ..
			Float (MouseX()), Float(MouseY()), 5.0, 1.0,  ..			
			Float(MouseX()) , Float(MouseY()) + Largeur# , 5.0, 0.0, ..
			x1#, y1#+Largeur# , 0.0 , 0.0 ]
</pre><br>Is it ok ? <br><br></td></tr></table><br>
<a name="712272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> results with code from the previous post :<br><img src="http://www.bayre.com/zigwigwis/onde2.gif"><br><br>not really what's i want.  this not repeat the pattern along the line !!! <br><br></td></tr></table><br>
<a name="712278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/codearcs.php?code=1795" target="_blank"> DX UV Wrap </a><br>? <br><br></td></tr></table><br>
<a name="712306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to switch on texture wrapping which is off by default. Not sure how tho <br><br></td></tr></table><br>
<a name="712331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/codearcs.php?code=1795" target="_blank"> DX BLOOMING UV CHUFFING WRAP </a> <br><br></td></tr></table><br>
<a name="712357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> @tonyg. Nice code but is there a solution also with opengl ? <br><br></td></tr></table><br>
<a name="712360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't do much OGL but, I thought, extending beyond 1.0 made the texture wrap. <br><a href="/posts.php?topic=62484#698130" target="_blank"> OGL comment </a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
