<!DOCTYPE html><html lang="en" ><head ><title >MouseX/MouseY Input Lag??</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MouseX/MouseY Input Lag??</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >MouseX/MouseY Input Lag??</a><br><br>
<a name="781885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aeronux</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. In my little RTS game project, I use MouseX() and MouseY() for all sorts of different things. However, there is some sort of lag between the time you click and the time you move your mouse. For instance, if you try to drag to select a group of units, you have to move your mouse, wait a second, click, wait a second, move the mouse, release, wait a second, then issue an order. If otherwise, the selection rectangle will become altered due to this lag problem.<br><br>Is there any sort of way for me to fix this? I appreciate it. <br><br></td></tr></table><br>
<a name="781888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you clearing the input buffer after you have grabed the click? <br><br></td></tr></table><br>
<a name="781889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aeronux</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What? I didn't know you needed to...<br><br>What does that do?<br><br>edit: looked it up, is flushmouse what you mean (cleans out mouse button states?) ? I was manually doing that actually, but I added in those (flushmouse and flushkeys) at the end of my input function, and it just made the lag worse... <br><br></td></tr></table><br>
<a name="781898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What? I didn't know you needed to <br></div>Dont get me wrong, Im guessing<br>oh well, thats me stumped ;)<br><br>Humm, I "think" then you have to make sure that the program has time to handle the queue, so Maybe a delay 1? <br><br></td></tr></table><br>
<a name="781907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Aeronux</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I have a FPS maintaining object that automatically keeps my 'game' from running to quickly (so, it is already delaying X ms...)<br><br>So, there goes that idea.<br><br>I appreciate the help though H&amp;K. <br><br></td></tr></table><br>
<a name="781976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> However, there is some sort of lag between the time you click and the time you move your mouse. <br></div>Switch to OpenGL. This is a known issue with DirectX and nVidia drivers, that is considered a feature by both Microsoft and nVidia. If you have an nVidia graphics card, you can install the Forceware Coolbits package (or manually hack your registry) to change the setting "Maximum frames to render ahead" from the default of 3 to a more sensible default of 1. <br><br></td></tr></table><br>
<a name="781990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using the latest Bmax level? <br>Search for 'mouse lag' in the Bmax forums as there is anb oustanding issue in windowed mode (and that might even be fixed with latest syncmods).<br>It's always useful to provide small example code showing the problem. <br><br></td></tr></table><br>
<a name="782022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @FlameDuck:  I don't think that's his problem.  I get a mouse lag as well, but it is only a fraction of a second.  Long enough to be noticeable, but not an entire second long.  Unless his movement requires precision movement, I'd doubt he'd really notice the lag at all.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics 800,600,32
Local oldmousex:Int
Local oldmousey:Int
Local mouseflag:Int = False

While Not KeyHit(KEY_ESCAPE)
	Cls
	If MouseDown(1)
		If Mouseflag
			Local newx = MouseX()
			Local newy = MouseY()
			DrawLine oldmousex,oldmousey,oldmousex,newy
			DrawLine oldmousex,oldmousey,newx,oldmousey
			DrawLine oldmousex,newy,newx,newy
			DrawLine newx,oldmousey,newx,newy
		Else
			mouseflag = True
			oldmousex = MouseX()
			oldmousey = MouseY()
		End If
	Else
		mouseflag = False
	End If
	Flip
Wend</textarea><br>eta: This will show you the difference between where the mouse pointer is and where the pointer is being rendered.<br><pre class=code>Graphics 800,600,32

While Not KeyHit(KEY_ESCAPE)
	Cls
	DrawRect MouseX()-10,MouseY()-10,20,20
	Flip
Wend</pre> <br><br></td></tr></table><br>
<a name="782043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was a lag issue for windowed mode dx that was fixed last week, syncmods for a fix.<br><br>Aeronux, are you using normal flip? <br><br>If your game does have intense render requirements you would be best reading the mouse events and not using mousex() mousey(). The following demonstrates (see EventX etc. for more details (equals location of mouse at time MouseDown or such actually occured)).<br><br><pre class=code>
Framework brl.d3d7max2d
Import brl.eventqueue

Graphics 640,480

While True
	While PollEvent()
		DebugLog CurrentEvent.tostring()
	Wend
	Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="782063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeahthis whole second thing sounds like a completely different issue.  The render lag wasn't that bad unless you were doing silly amounts of rendering and then it affected keys and pointer position, everything. <br><br></td></tr></table><br>
<a name="782863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just got a new Intel iMac with OpenGL and am finding a significant mouse lag effect.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="782865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> From the description: DO NOT USE DELAY to force drop the frame rate!<br>Delay will hold the whole application, this actually means that during that time, input isn't processed as well -&gt; queue up of all user input which can have some "unnice" side efects.<br>And after each flip, just to make sure, grab a 1x1 large pixmap, this clears the backbuffer chain (or has the fix been reimplemented into the new DX module) <br><br></td></tr></table><br>
<a name="782874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The fix was only required for Windowed mode (it was already in Full-screen mode) and has been reimplemented, just Syncmods as Skidracer says. <br><br></td></tr></table><br>
<a name="783142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll test the grabbing pixmap pixel to see if that fixes the lag on intel mac. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
