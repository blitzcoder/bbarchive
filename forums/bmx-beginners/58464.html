<!DOCTYPE html><html lang="en" ><head ><title >Replacing a color?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Replacing a color?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Replacing a color?</a><br><br>
<a name="650323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhans0n</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I saw that in the code archives, there's sample code for replacing a color in an image, but they're all for BlitzPlus or Blitz3d.  I was wondering if there is a BMax equivalent?<br><br>Basically, what I am hoping to do is be able to draw a sprite of a guy on the screen with a solid colored shirt, and then change that shirt to whatever color I want.  I know you can kind of do that with SetColor, but it would tint all of the colors in that sprite, not just the shirt. <br><br></td></tr></table><br>
<a name="650339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Build your sprite from seperate (greyscale) images. That way you can change the colors quickly in realtime using the 3D hardware (SetColor), rather than slowly (ReadPixel / WritePixel) using the CPU. <br><br></td></tr></table><br>
<a name="650532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ie have a separate `shirt` image from the rest of the character <br><br></td></tr></table><br>
<a name="650549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> what they said :) <br><br></td></tr></table><br>
<a name="651452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its simple, set the colour you dont want to be transparent, draw the sprite on a background of the colour you do want, and then grab the sprite again from where you drew it<br><br>I use this sort of thing alot in my own game engine <br><br></td></tr></table><br>
<a name="651488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tricky to do that in Bmax as you can't easily change the mask colour for an image. <br><br></td></tr></table><br>
<a name="651495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you cant for an image, but you can for a pixmap, since pixmaps support loading of pngs I dont see any dissadvantage so far to using them, but I havnt played with pixmaps yet so I dont know for sure<br><br>Edit: Aww heck, theres no command to grab pixmaps, there goes that plan<br><br>Edit2: Wait, yes there is, why isnt that in the pixmaps section? <br><br></td></tr></table><br>
<a name="651520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is true but how does that work for changing more than a single colour?<br>The colourize demo on BC uses writepixel which is very fast in Bmax so a straight conversion would work well. <br><br></td></tr></table><br>
<a name="651521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> very simple<br><br>Mask the pixmap to the next colour you dont want, and lay it on the next colour you do want, rinse and repeat<br><br>My games engine as it currently stands (in B+) has a function for doing just this, so I simply have to give it the image I want changing, the old RGB Values, and the new RGB Values<br><br>A character sprite under my engine has a grand total of 14 colours that all change depending on the character's hair/skin/eye/shirt/trouser colours, and armour material, if B+ can do it all before the user notices, I'm sure BMax can as well <br><br></td></tr></table><br>
<a name="651524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you give an example? I tried to do this before but pixmap masks are destructive so I never got it to work. <br><br></td></tr></table><br>
<a name="651536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can give an example in B+ if you like, but I'm trying to get it working in B-Max now and dont even know enough to get as far as the function<br><br>The B+ code does use Images, its only for the BMax that I'm trying to use Pixmaps instead <br><br></td></tr></table><br>
<a name="651539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would prefer a Bmax example as I had something similar to what you suggest working in B2D/B3D but pixmap/maskpixmap seems to works differently from image/maskimage<br>In fact, as I never got it to work I used the greyscale solution the others posted. <br>If you can post your Bmax solution when you get it I would appreciate it. <br><br></td></tr></table><br>
<a name="651541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The greyscale solution is fine when your the one doing all the work, and only want very basic sprites with large blocks of colour, but if you look at any professional sprite you will usualy see no more than 2 pixels of the same colour in any one place<br><br>This makes splitting the sprites up into multiple images VERY impractical indeed, you'd end up either handling a huge ammount of images, or pissing off your pixel artist by giving them the constraint of using large blocks of colour, and sticking to greyscale<br><br>I'm going to need a little help to get as far as being able to try anything with my solution.<br><br>I'm trying to load a pixmap from a png file using LoadPixmapPNG, but when I compile the code it tells me its expecting a type name<br><br>I've tried putting the variable I want it in before (Variable =) the command, and after the command (,Variable and :Variable), and I've tried having the variable within a Type Instance, but the only one that does anything different is putting the :Variable syntax which tells me it wants ")" instead of ":"<br><br>I'm baffled <br><br></td></tr></table><br>
<a name="651542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> local mypixmap:TPixmap=loadpixmap("my.png")<br>P.S. What version of Bmax are you using? <br><br></td></tr></table><br>
<a name="651546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> whatever version the trial download is<br><br>Graphics 800,600<br>Local Cheese:PF_RGBA8888 = LoadPixmapPNG("Images/Cursor.png")<br><br>Those are the first 2 lines, when I try to compile I get an error saying:<br><br>"expecting type name"<br><br>and the cursor set to that second line<br><br>I have the program saved in the correct directory, and I'm sure the file exists <br><br></td></tr></table><br>
<a name="651550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Loadpixmappng returns a TPixmap type and not a PF_RGBA8888 type.<br>Anyway...<br>local mypixmap:TPixmap=loadpixmap("mypic.png") <br><br></td></tr></table><br>
<a name="651562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mordax_Praetorian</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> With much help from the guys in the irc channel I got that while the site was down<br><br>Encountering a new error now, wanna try fixing it myself, ty for the help <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
