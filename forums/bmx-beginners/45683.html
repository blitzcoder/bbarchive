<!DOCTYPE html><html lang="en" ><head ><title >Parameters to constructor</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Parameters to constructor</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Parameters to constructor</a><br><br>
<a name="507792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>I am having trouble passing parameters to my constructors.<br><br>Example:<br><br>type player<br>field player_size:float<br>   method new(size:int)<br>      player_size = size<br>   end method<br>end type<br><br>Player1:player = new player(20) <br><br></td></tr></table><br>
<a name="507794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You cant pass params to the constructor. <br><br></td></tr></table><br>
<a name="507795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks dude.<br><br>Will do a workaround. <br><br></td></tr></table><br>
<a name="507938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can however, make a create function (any name works):<br><br><pre class=code>Type player
 Field player_size:float
 Function Create(size:int)
  n:player=new player
  n.player_size=size
  Return n
 End Function
End Type</pre> <br><br></td></tr></table><br>
<a name="507941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, that is what i am doing, thanks :) <br><br></td></tr></table><br>
<a name="593730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Feels like a kludge :(<br><br>I think constructors should take arguments <br><br></td></tr></table><br>
<a name="593773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Feels like a kludge :( <br></div>It isn't. It's called a "Simple Factory" pattern, and it solves a lot of creation issue, even in languages that have constructors that take parameters.<br><br>BlitzMAX uses them extensively. CreateList, CreateImage, CreatePixmap, CreateWindows, CreateGraphics, etc... <br><br></td></tr></table><br>
<a name="593782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's called a "Simple Factory" pattern <br></div><br><br>It isn't.  A Simple Factory Pattern returns an instance of one of <i>several</i> classes depending upon the parameters passed to the factory method, which is something that constructors alone cannot do.<br><br>Parameters taken by constructors are typically used to initialize member variables. <br><br></td></tr></table><br>
<a name="593798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The kludge feeling would be reduced if you BlitzMax implemented:<br><br>a) Method overloading<br>b) Derived functions that can return compatible derived types<br><br><pre class=code>
Type T_Place

	Field Name:String

	Function Create:T_Place (name:String)
		Local obj:T_Place = New T_Place
		
		obj.Name = name
		
		Return obj
	End Function

End Type

Type T_City Extends T_Place

	Field Population:Int
	
	Function Create:T_City (name:String, population:Int)
		Local obj:T_City = New T_City
		
		obj.Name = name
		obj.population = population
		
		Return obj
	End Function
	
End Type
</pre><br>This gives a compile error: "Overriding method differs by type".<br><br>So the derived type factory has to be called something else like CreateCity and you say:<br><br>Local city:T_City = T_City.CreateCity("Sydney", 3276207)<br><br>Whereas I'd like to say:<br><br>Local city:T_City = new T_City("Sydney", 3276207)<br><br>Also the derived type has no built-in way to pass parameters to its base type constructor so you end up having to implement yet another differently named method in each type for its descendents to set its parameters<br><br><pre class=code>
' Star type - These guys shine and occasionally explode
Type T_Star Extends T_Natural

	Function CreateStar:T_Star(name:String, pos:T_Pos, vel:T_Pos, colour:T_Colour, mass:Float, radius:Float, rot:Float, rotRate:Float)
		Local obj:T_Star = New T_Star

		obj.SetStarParms(name, pos, vel, colour, mass, radius, rot, rotRate)
		
		Return obj
	End Function

	Method SetStarParms(name:String, pos:T_Pos, vel:T_Pos, colour:T_Colour, mass:Float, radius:Float, rot:Float, rotRate:Float)
	
		super.SetNaturalParms(name, pos, vel, colour, mass, radius, rot, rotRate)
	
	End Method
	
End Type
</pre><br>Here T_Star is derived from T_Natural and happens to have the same parameters although it could have additional ones or even not have some but provide defaults.  I regard it as duplication for T_Star to directly set the properties that it inherits from T_Natural.  It should be possible to pass these to the super constructor in a minimal way.<br><br>I'd like to see something like the following in BlitzMax (based on C# syntax):<br><pre class=code>
' Star type - These guys shine and occasionally explode
Type T_Star Extends T_Natural

	Method New(name:String, pos:T_Pos, vel:T_Pos, colour:T_Colour, mass:Float, radius:Float, rot:Float, rotRate:Float)
	: base(name, pos, vel, colour, mass, radius, rot, rotRate)
	'  Anything else you want to initialise here
	End Method

End Type
</pre><br>Add in that you might want constructors with various parameters and you start to write things like:<br><br>' Default empty constructor<br>Function CreateStar:T_Star()<br><br>' Constructor with Name, Pos, Vel, Colour, Mass<br>Function CreateStarNPVCM:T_Star(name:string, ...)<br><br>' Constructor with everything<br>Function CreateStarNPVCMRRR:T_Star(name:string, ...)<br><br>This is the area in which BlitzMax is weakest as a language with OO aspirations. <br><br></td></tr></table><br>
<a name="593838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> b) Derived functions that can return compatible derived types <br></div>Last time I checked it did, which was a good surprise. I think your problem in your example is due to the parameter list, not the return type. So it's again related to a lack of overloading, not the inability to have overriden methods return different types.<br><br>For (a), while it would clearly be nice, it isn't mandatory (it's usefull but not that much more than for any function, the constructor is not so special here).<br><br>BTW, overloading has close to nothing to do with OO. You can have it in non OOP languages, and (as in BlitzMax, but it's no the only one) you can have OOP languages without it.<br><br>The arguments for overloading are clear. Arguments against include the ambiguity problem (which one to call when more than one compatible overload is found). I would argue here that a solution might be to completly remove ambiguity by always disallowing for 2 overloads to have corresponding parameters (parameters at the same position in the parameter list) that are implicitely convertible from one the the other. The other alternative (chosing the 'best' overload when possible like in C++) would be too muech of a mess.<br><br><br>What lacks more is some acces restrictions at the function/method level. If the client 'MyType' should always call MyType.Create, there is currently no way to enforce it and prevent the direct call to the New AFAIK. <br><br></td></tr></table><br>
<a name="593845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> A Simple Factory Pattern returns an instance of one of several classes depending upon the parameters passed to the factory method, which is something that constructors alone cannot do. <br></div>That's an Abstract Factory Pattern. I don't believe several classes is a requirement, but I don't have any books here to check it. <br><br></td></tr></table><br>
<a name="593864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis,<br><br>You might be right about b) being a result of a) but either way many pains in BlitzMax would be solved by allowing method overloading.<br><br>I struggle to think of a non OO language that provides method overloading nor one apart from BlitzMax that is OO and fails to provide it.  You must have some examples in mind ?<br><br>Seems to me that objects (contain data and code), inheritence (one thing is a more specialised version of another with possible new data and code) and polymorphism (an object reference can be the base type or something derived from it) concepts follow each other naturally.  This is surely the heart of OO.<br><br>The desire for overloading arises directly as a productivity requirement from inheritence.  Even better if it is supported in the IDE then you get all of the variations of a method at your fingertips.<br><br>I just don't agree that choosing a method among overloaded alternatives leads to too much of a mess.  Lots of mainstream languages do it (C++, Java, C#, Visual Basic).  Lots of people have no problem with it and more to the point would complain bitterly if it was taken away.<br><br>And if it is an issue then do what I said.  Require an exact type match for each parameter so there is no possible ambiguity.  This may require explicit casting but so be it.<br><br>I agree with wanting access restrictions.  You'll notice that in my 'ideal' last example it is a true constructor method rather than a factory function.  Even better if you could then hide the default constructor like:<br><br>private Method New()<br><br>So that it cannot be invoked. <br><br></td></tr></table><br>
<a name="593887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's an Abstract Factory Pattern. I don't believe several classes is a requirement, but I don't have any books here to check it. <br></div><br><br>No it isn't.  An Abstract Factory is one level of abstraction higher than the Simple Factory - it returns one of several <i>factories</i> (simple or abstract.)  When in doubt, or books without, Google.<br><br><div class="quote"> The kludge feeling would be reduced if you BlitzMax implemented <br></div><br><br>No it wouldn't.  Using a method as a constructor simply to get initialization of member variables is still a kludge, with or without overloading. <br><br></td></tr></table><br>
<a name="593936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Flameduck: octothorpe is right, it's factory not an abstract factory.<br><br><div class="quote"> No it wouldn't. Using a method as a constructor simply to get initialization of member variables is still a kludge, with or without overloading.  <br></div>I tend to disagree here. More precisely I'd say that not being able to have different constructors, with parameters, is a bit annoying, but named constructors in itself is not really a bad thing.<br><br><br><div class="quote"> Seems to me that objects (contain data and code), inheritence (one thing is a more specialised version of another with possible new data and code) and polymorphism (an object reference can be the base type or something derived from it) concepts follow each other naturally. This is surely the heart of OO. <br></div>I agree, but overloading is an implementation of static, compile-time polymorphism, and that's till something pretty different from what you have listed here.<br><br><div class="quote"> I just don't agree that choosing a method among overloaded alternatives leads to too much of a mess. <br></div>Depends. There are 2 issues: the mess that can arise for the language user (and it really can exist, especially when combining overriding and overloading). And the mess for compiler writer (features that have a direct impact on the typing system should be added very carefully).<br><br>The core problem is that overloading and overriding are 2 orthogonal issue, with one being resolved at compile time and on at runtime. You're mentionaing C++, and C++ is precisely the language where I think the problem is most obvious. But certainly in a language with a cleaner and simpler design such as BlitzMax, the problem could tend to be almost not significant. *Maybe*<br><br>Note that in case I was being unclear, I am not advocating against overloading, far from it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
