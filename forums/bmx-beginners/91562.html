<!DOCTYPE html><html lang="en" ><head ><title >Game Programming Practices</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Game Programming Practices</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Game Programming Practices</a><br><br>
<a name="1041856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >psychoullis</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I play around with BM for fun and relaxation. Even though I like programming very much I know nothing about programming 'the right way'.<br><br>I was wondering if you know any books or websites about 2D game practices. For example, how do you structure all the objects in a game. Is there a parent object that all the rest extend from? Or not? What is the most efficient way to check for collisions?<br><br>Something like that. I found a couple of books but either they have very general programming concepts or they are extremely focused on one subjects. I am looking for something general and overall about 2D game programming.<br><br>thanks! <br><br></td></tr></table><br>
<a name="1041864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make as an abstract type a gameobject with methods to draw and update. Store all your created objects in a big list (you can use the New method to ensure this). Iterate through the list updating the objects and drawing any that are on the screen. Extend from this your players, aliens, bullets etc. Have a Game type that contains this list and has methods to update the game. <br><br></td></tr></table><br>
<a name="1041865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >psychoullis</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey thanks!<br>This is the point where I am (sort of) :)<br><br>I have 2 extends (player and enemies). I have 1 player alive in the game and 10 enemies.<br><br>Let's not add any bullets for the moment. How would you check for collisions (efficiently)? <br>EDIT: I mean the method not the actual code... I created bounding boxes so that I can use the CollideRect command, and it works :)<br><br>Thanks again <br><br></td></tr></table><br>
<a name="1041869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends on the situation. There are some build in collision commands but I've never used them. You can just loop through every other object and check to see if the coordinates overlap, like this:<br><pre class=code>Function collides2:Int(size1, size2, location1:TVec2, location2:TVec2)
	Local size = Max(size1, size2)
	Return (location1.x + size &gt;= location2.x - size ..
		And location1.x - size &lt;= location2.x + size ..
		And location1.y + size &gt;= location2.y - size ..
		And location1.y - size &lt;= location2.y + size)
End Function</pre><br><br>For only 11 objects it will be fast enough. <br><br></td></tr></table><br>
<a name="1041874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >psychoullis</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah maybe you missed my EDIT tag but thanks...<br><br>I read and learned how to detect the collision between 2 BBoxes.<br><br>I was just wondering what is the best way to do it in the game. It would be a waste to check every entity in the game with all the rest, since you will check all of them twice. So I probably need to do it progressively or something... I still haven't figured it out :)<br><br>Any suggestions? <br><br></td></tr></table><br>
<a name="1041876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How many objects are going to be on screen at any given time?  I would utilize the list that Czar mentioned so that you can determine what objects are currently being drawn on screen and only check those against each other.  That way you're not checking collisions for things that aren't even visible, and chances are the number of objects on screen will not be enough so as to slow down your program when checking them against each other.  At least if you have a sufficiently fast computer you should be all set.  I will think more about this though, because it does seem superfluous to check everything against each other, and essentially double counting.  There has to be a combinatorial way to solve this problem.<br><br>EDIT: Good point, Czar.  In that case, it might be safe to check everything in the game if it currently "exists" regardless of whether or not it is being shown.<br><br>What I would then do is have an array of objects (not specific extensions so that way you could check a character against a tree, etc.) so that the objects in existence are organized into this array.  Then check the first entry in the array against all other entries inductively.  So check objects[0] against objects[1], objects[0] against objects[2], all the way to objects[0] against objects[num_objects - 1].  Then check the object at index 1 against all objects after it, so objects[1] against objects[2], objects[1] against objects[3], and so on.  This will prevent double counting.  <br><br>Some code, not sure if it runs:<br><pre class=code>
Global gameObjects:TList = CreateList()

'Fill your list with your objects

Global num_objects:Int = CountList(gameObjects) 'This is the number of objects in existence

Global objects:TObject[] = New TObject[num_objects] 'The array provides indices that the List does not have, thus assuring that we will not double count since everything has a "definite place"

'Let's check some collisions!
Local i:Int = 0

If i &lt; (num_objects - 1)
   For Local j:Int = (i + 1) To (num_objects - 1)
      objects[i].CheckCollisions(objects[j])
   Next
   
   i:+1
EndIf

</pre><br><br>So just to be sure you understand, we're letting i be the index of the base object starting at object at location 0 in our array, and then checking it against every other object in the For, Next loop (here I'm assuming your CheckCollisions method is called by the base object and takes as a parameter the object you are checking against).  Once we've checked our base object against all other objects in the array sequentially, then we shift the index up so our base object is the object at index 1, and then sequentially check, until our base object is the last object in the list, in which case we don't need to check anything, hence the strict inequality in the If statement conditional.<br><br>abelian_grape <br><br></td></tr></table><br>
<a name="1041877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well be careful only updating that which is visible, you don't want enemies elsewhere on the map going through walls etc. On any computer that wasn't around in the dinosaur age, don't worry about checking inefficiency with around 10 objects! <br><br></td></tr></table><br>
<a name="1041878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >psychoullis</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> hahaha thanks guys... The number 10 I just used it for example... <br><br>I want to learn to program in such way that my program is scalable... <br><br></td></tr></table><br>
<a name="1041880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check my post edit psychoullis.  I think it might be helpful.  If not, it certainly helped me in my own programming, haha!<br><br>abelian_grape <br><br></td></tr></table><br>
<a name="1041881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Only scale as much as you need :P<br><br>I'm going to use a technique in my game - split the world into a number of zones, each 500x500 pixels (completely made up number, experiment for best result). Each zone contains a list of all objects in that zone. When you check for collisions, only check for them amongst the list of objects in its current zone (and also each adjacent zone, in case it is on the border). That will significantly speed things up - you won't waste time checking for something completely elsewhere on the map. <br><br></td></tr></table><br>
<a name="1041882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abelian_grape</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a really neat idea Czar.  I think I will attempt to implement a similar routine in my code.  <br><br>abelian_grape <br><br></td></tr></table><br>
<a name="1041886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its called cellular division and I use the same technique in TileMax when the tile system is enabled.  The tile size is the cell size and all Sprites that are linked to the tiles are collision checked that way.<br><br>Unlinked Sprites check against other unlinked Sprites the brute force way.<br><br>It works great... you can do this two ways...<br><br>1...<br>First pass through the objects places them in cells (array) based on dividing the x,y positions by the cell size then checks are conducted within an objects cell and to the adjacent cells...<br><br>2...<br>Cell positions are update as the object is updated.. pre-sorted then do the cell adjacent tests. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
