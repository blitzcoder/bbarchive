<!DOCTYPE html><html lang="en" ><head ><title >my tile map editor + gui</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >my tile map editor + gui</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >my tile map editor + gui</a><br><br>
<a name="1026506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been working on putting together a tile map editor. it is at its early alpha stage. it has a few bugs but it's usable none the less.<br><br>features included:<br>graphical gui windows style:<br>re sizable movable windows<br>sliders<br>text input fields<br>lists <br>drop down menu<br>buttons<br>mulit windows<br><br><br>the tile map editor is basic and working:<br>creates maps any size and uses tiles between 4x4 to 128x128 narrow or wide, multiple layers limited to six. map size limited by ram.<br>undo and redo single tile or group.<br>multi group tile buffer storage and selection and removal.<br>Saves tilegrid and graphics to a single file and loads from a single file. <br><br>I am posting it in hopes I can get some help in solving bugs that I can't see. i am almost sure the file requester will crash in windows 7 and vista but I don't know for sure. I know it has a bug in the ability to read directories. if there is an old diskette drive, it will more than likely crash as it waits to read the disk drive. Also, I don't know for sure as I don't have one anymore. I have solved most of the problems I know off or know how to repair. I have one problem I don't know how to solve and thats the ability to peek at the devices with out it asking to insert a cd or a disk which is where it fails most of the time. the code for the drive's acces is from skin[3]ac and is in the code archives. any help is appreciated.<br><br>I don't know how well it will work in other systems. I am curious if this works in windows 7 or vista.<br><br><br>I am planning:<br>add the ability to paste a group of tiles (done)<br>add animated tiles  <br>an object layer<br>scripting of objects if I can figure out how to implement it.<br> <br>you can download the file from here:<br>windows:<br><a href="http://www.filefront.com/17271981/tilemapeditorWip.zipmac" target="_blank">http://www.filefront.com/17271981/tilemapeditorWip.zipmac</a><br>ppc:<br><a href="http://www.filefront.com/16928161/tilemap-mac.zip" target="_blank">http://www.filefront.com/16928161/tilemap-mac.zip</a> <br><br></td></tr></table><br>
<a name="1026534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, not running Windows Vista or 7 as i'm a die-hard Xp user. I can confirm that the map editor runs fine on my machine. I created a map, loaded and saved it with no problems. Don't know if that's much help, however :) <br><br></td></tr></table><br>
<a name="1026535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems to work fine in Windows 7. :) <br><br></td></tr></table><br>
<a name="1026798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xerra and iprice thank you for your time. I will keep working on this hopefully I can find most of the bugs. <br><br></td></tr></table><br>
<a name="1028695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hepcat</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jesse,<br><br>I have a vista machine and a mac. Your file isn't available anymore... or I would have tested it ;) <br><br></td></tr></table><br>
<a name="1028753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks hepcat. I have been updating the file fixing bugs and integrating other options but I forgot to update the link. I have updated the link in the first post to reflect the current state.  Thanks in advance for any input you can provide. <br><br></td></tr></table><br>
<a name="1028784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Volker</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine here under Windows 7 64 bit. <br>Except  the error I get after starting  because there<br>is no drive A. After clicking on continue two times the editor starts. <br><br></td></tr></table><br>
<a name="1028809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Volker! That error keeps bugging the s***t out of me. Aparently your Bios still has the floppy disk drives registered in it, that is why you get the error. I haven't been able to go around that problem. The program is made to run in full screen mode but if I do that it will lock the program, sense, it will not display the error window in full graphics mode. if anyone has any idea on how to solve that error please help. I am using skin3[ac] code that is in the code archives to get full access to the directory/drive system but it lacks the ability to look for available drives with out actually looking for content in them. thus the error. I posted this problem before but no one was able to help me, maybe this time around some one has a solution. hopping. <br><br></td></tr></table><br>
<a name="1029193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been tinkering with your map editor again as I was thinking about doing some kind of scrolling based game after I finish what I'm doing.<br><br>How do I load up an image file of tiles seperately to start creating a map from them?<br><br>Is it possible to save the window positions when you save a map file so when it's loaded they appear where you left them?<br><br>The layer switching buttons are great but is it possible to have them colour highlighted or something when toggled so it's clearer which layer is active at the time?<br><br>The viewing window for the graphic tiles doesn't appear to have scroll bars so wont show all the tiles in the example map I have.<br><br>Other than that it's looking really good for something that's not finished. Good work, Jesse. <br><br></td></tr></table><br>
<a name="1029278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for trying it out Xerra. It is still in a "lets try to see if this works" stage. thanks for for bringing up things that I had not considered.<br><div class="quote"> <br>How do I load up an image file of tiles separately to start creating a map from them?<br> <br></div><br>I have made it so that it only allow graphics to be loaded when first creating the map. When the new window is open you get to select the map size,tile size and which sprite image to use for tiles. you can type the image name directly, or you can look for it with the search button. It only takes Png, bmp and jpg files, The normal blitzmax files. The image file size has to follow the same rules as when loading animated images in BlitzMax. you can put the exact tile count if you know it or if you want to include all of the tiles in the sprite and you don't want to go through the process of counting the tiles you can put an exagerated number and it will load the number of tiles available only. Once the map is saved you don't need the sprites image file anymore as they get integrated in the map and will not need to be included separately.<br><br><div class="quote"> <br>Is it possible to save the window positions when you save a map file so when it's loaded they appear where you left them?<br> <br></div><br>no, I had not considered that but good idea. I'll add it to the things to do.<br><div class="quote"> <br>The layer switching buttons are great but is it possible to have them colour highlighted or something when toggled so it's clearer which layer is active at the time?<br> <br></div><br>I thing I need to make better buttons, they do have up and down state if you look carefully, problem is I made the buttons myself and my graphics skills are not that great. I will try as you say to see if that works better.<br><div class="quote"> <br>The viewing window for the graphic tiles doesn't appear to have scroll bars so wont show all the tiles in the example map I have.<br> <br></div><br><br>I have not noticed anything wrong with it. The times I have tried it does create a scroll bar and it does show all of the tiles but I'll keep on testing maybe I can figure out what went wrong.<br><br>I want to add a a few things like:<br>the ability to resize the map<br>layer shifting<br>stamp a group of tiles<br>animations<br>create an editor state file. (new)<br><br>thanks Again Xerra. <br><br></td></tr></table><br>
<a name="1029288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem at all. I didn't think to test with a new map creation but I just tried it and it's fine. I also got the tiles scroll bars appearing when I loaded in another tile set so I guess I must have done something wrong before.<br><br>Curious as to one thing, however. What's the max size of a map you can have with the editor at the moment? I tried with a 1000 height, 32 width but it was only a screens worth in height still. Smaller setting on the height side would work but I don't have the file mapformat.rtf that the help window refers to in the version i'm using so I think it would be hit and miss doing trial and error to work it out myself :)<br><br>I do really like the editor as it stands, though, so i hope you keep up with it :-) <br><br></td></tr></table><br>
<a name="1029314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ops! another bug. I guess I have to work on fixing the scroller for maps wider or taller than the size of the scroller(tile per pixel in scroller). I guess for now the max map size is 615x555. until I can figure out how to solve that issue.<br><br>[edit] scroller appears to be working correctly now, I will post update soon [/edit]<br><br>I didn't want to post the format sense I am sure it will change a couple of times before I am done.  Here it is for the current state of the program.<br><pre class=code>
				TILE MAP FORMAT
read variables in THIS ORDER
open map file
bytes	 		type	 		description
5			string			"JPMAP"  identifies the map type
1			byte			tile size width max  128
1			byte			tile set Height max 128
4			int			starting tile to load
4			int			number Of Tiles to Load
4			int			map width
4			int			map height
4			int			number of layers
4			int 			image size  (stored file size)
variable		bank			the actual sprites image in a bank
sprites image can be created like this:
local imagebank:tbank = New TBank
imagebank.resize(imageFileSize)
imagebank.read(mapFile,0,Image Size)
image = animImage(imagebank,tile size width,tile size height,first,count)
-------------------------------------map follow --------------------------------------------------------------
layer  = 0 until  number of layers
      read layer type  byte     ' 1 collision layer,  2 tile layer
      for  y = 0 until  map height
           for  x = 0 until map width
                  if layer type =  collision layer
                             read byte  to collision:byte[x,y] collsion layer
                   else
                          read short  to map:short[x,y,Layer] tile layer
                   endif
             next x
     next y
next leyer
close mapfile
</pre><br>you can load all of the layers in to the map array. The last layer to be saved is always the collision layer if it has one. just remember to load it as bytes.<br>I still need to figure out a way to compress large maps. <br><br></td></tr></table><br>
<a name="1030091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've made a mapeditor recently for a retrogame I'm doing. Over 2500 lines o'code. It includes a script editor for automatic (multiple) road connectors (draw with one tile and it picks the right road crossings and T-crossings) and random tiles (draw with one grass tile, and it paints all related tiles like grass, trees, rocks etc.). It includes a full featured tile editor to draw tiles, a palette editor (it's retro, so it's 16 colors out of 512), a few (fixed) layers to set flags and a few exporters. The only GUI object I made myself (apart from the mapviewer, tile manager and tile editor) was a menu with a few text options. For the rest it's just OS graphics.<br><br>It's not the first time I've made editors, and over the years I've found out the things that work and the things that don't work. Things that work are often the result of radical choices; an unconventional hotkey here, an unconventional menu there etc. Also, I've made quite a few games since 2005 (no blitz games but typically I made editors for them in blitz).<br><br>Things I have to say about your editor (so far):<br>- ditch the pulldown menu code. That's what the OS is for, and it does a way better job than yours..<br>- ditch the file requester, for the same reasons stated above<br>- ditch the scrollbar code, idem dito (do you realize that the white background looks like the foreground button to drag around?)<br>- I don't know how big my maps will be, so I don't want to have to choose that at the start. Rather I want to expand my map at either side when required<br>- meanwhile I've made it loop ad infinitum when trying to create a new project while there was an old one<br>- trade visual menus for hotkeys.<br>- I have the feeling that sooner or later you'll hit a brick wall when you are really about to make a game with it. The problem lies in having separate objects for map and collision. A programmer may ask you for another 3..4 layer types, meaning you'll have to update your whole code to include that in your drawing routines and event checks. My own map editor uses a tile type which contains an array. So, what's 'map' and 'collision' in your code is mapdata[x,y].data[0] and mapdata[x,y].data[1] in my code. With this I can step through all my layers with a simple for loop, and that's it.<br><br>But you gotta start somewhere.. :P and my first map editors were handy, in a way, but definitely not future proof and full o' one shot code. So, it'll come. In time, as I predict that your current efforts needs a few deep rooted design changes. <br><br></td></tr></table><br>
<a name="1030134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your opinion CS_TBL and I respect it even though I never asked for one. I posted it in hope I could get some help figuring out bugs.:<br><div class="quote"> <br>I am posting it in hopes I can get some help in solving bugs that I can't see. i am almost sure the file requester will crash in windows 7 and vista but I don't know for sure. I know it has a bug in the ability to read directories. if there is an old diskette drive, it will more than likely crash as it waits to read the disk drive. Also, I don't know for sure as I don't have one anymore. I have solved most of the problems I know off or know how to repair. I have one problem I don't know how to solve and thats the ability to peek at the devices with out it asking to insert a cd or a disk which is where it fails most of the time. the code for the drive's acces is from skin[e]ac and is in the code archives. any help is appreciated.<br> <br></div><br>I am making this for my own benefit and use, and no, I am not about to change anything about it as per your suggestions. I own a copy Bmax gui but decided to go this route anyway as I would like to integrate this into a game and I marely want to learn to do stuff on my own.<br>I posted this file for help and if in the process someone finds it usefull then good else it is serving its purpose either way. I realize that it is not everybody's cup of tea and there are things i don't like about it either but I will change them as I am able to figure things out. I am trying to make it extremely flexible as I am progressing. I realize I can't  think of all obstacles I will encouter but that will serve me as experience for future projects.<br><br>I hope you don't take this the wrong way as I do appreciate any comments any one makes but sometimes my decisions are not up for discusion and this is one of them. <br>by the way I would like to see your tile map editor if that is possible. Maybe it will give me some ideas to integrate into mines. <br><br></td></tr></table><br>
<a name="1032794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> if anybody cares about helping me test it, I have updated the editor:<br><br>fixed the scroller ( I think)<br>added group selector (left shift + left mouse button + mouse movement)<br>store selected group to buffer<br>added buffer window(buffer window scroller still not functional)- fixed<br>in progress: <br>delete selected<br>paste buffer<br><br>to do:<br>settings file<br>create objects layer(group tiles for movement, animation and characteristics)<br><br>executable in first post. <br><br></td></tr></table><br>
<a name="1032882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Xerra</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, i'll have another look, thanks Jesse. I'll update once i've given it a test run, mate. <br><br></td></tr></table><br>
<a name="1032895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jaydubeww</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This looks promising! Is it just for windows at the moment? <br><br></td></tr></table><br>
<a name="1032903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Is it just for windows at the moment?
</pre><br>Yes, at the moment. The only thing that is limiting from compiling in other systems is the file requester which looks in other drives; the code is specific to windows. I might have to remove it and limit it to a single drive to create a Mac and Lenux executable.<br><br>[edit]<br>thanks Xerra forgot to acknowledge earlier <br><br></td></tr></table><br>
<a name="1033122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shortwind</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, been testing and playing with your map editor.  I've got a couple questions, and possibly a bug...  First I would like to say I'm impressed with how you've progressed.  You created the window code yourself?  That's great.  I like the "sun-mouse" option on the windows, it's nice not having to click to bring the window to the front.<br><br>How do I resize the windows?  (Main map editor window, and tileset window...)  I can't seem to resize any of the windows. :(  (How do I resize the main window???)<br><br>Can we have more than one buffer for creating standard multiple tile "models"?  Currently one buffer is great, but it would be awesome to be able to have many buffers, easily pickable from the buffer window.  I also should be able to click on the buffer window "pre-build model" and have it automatically selected as the thing to paste in the map editor window.  It would be great to also be able to save these "pre-built" "models" between sessions.<br><br>I can't get the keyboard controls to work.  CTRL K, CTRL V, don't work in the editor window, I have to goto the edit menu to create and paste the buffer.<br><br>Finally, a request.  This may not be appropriate for your project, or your intent with this editor, but I would like to see an expansion on the buffer, "model", concept.  In other words, if I want to create a "model" for a complete tree, it would be nice to be able to build that tree, including collision area, and layer area (so a character can walk behind, or in front of the tree.)  Also, I would like to be able to open a "work" window, where I build the prebuild "models", instead of having to do that in the main editing window.  But maybe this is beyond the scope of your current project.<br><br>Maybe I'm stupid, but how do I use the collision layer???  I'm probably just missing something obvious, but I guess I'm used to being able to ctrl-right-click on a tile and bring up a window with properties on that tile, or group of tiles and set the collision property.  (I suppose it would be nice to be able to set default properties in the tile window itself... but maybe I'm missing something....)<br><br>Also, what are your plans for "viewing the map???"  I believe you should add an option to view the map in a selected resolution (full-screen), and have a "fake" character be able to navigate the level, for faux-pa testing.<br><br><br>:D <br><br></td></tr></table><br>
<a name="1033138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shortwind, Thanks for the kind words and Thanks for testing it out.<br><div class="quote"> <br>You created the window code yourself?<br> <br></div><br>yes 100% from my own ideas. I have been working on the Gui for over a year on and off. I did several versions before but I decided to stick with this one. I am not so sure I like the graphics. I will probably change to a different graphics set some time in the future or not. the Gui could definitely need some work but it's serving it's purpose as it is. It is also not event driven which 'might' change in the future. <br><br><div class="quote"> <br>How do I resize the windows? (Main map editor window, and tileset window...) I can't seem to resize any of the windows. :( (How do I resize the main window???)<br> <br></div><br><br>the Gui has options just like the real windows:<br>it has close, minimize, and resize options which have to be set during creation. I have set the movable option only and that is why they can not be resized, minimized or closed. There are things about the resize options that still don't work and is another reason why I locked them to those options. I will start working on an options window so that they can be set during use and at start up. thats after I fix a couple of bugs that have been stressing me.<br><br><div class="quote"> <br>I can't get the keyboard controls to work. CTRL K, CTRL V, don't work in the editor window, I have to goto the edit menu to create and paste the buffer.<br> <br></div><br><br>I haven't updated the file but I have fixed CTRL K, not CTRL V and is one of the bugs that's stressing me. It was supposed to be a simple integration  "if lcontrol down and key_v hit then pastegroup= true" but it's behaving like a toggle switch I can't understand why it works with the menu and not the short cut key  when it is doing the exact same thing. anyway, as soon as I figure it out, I will update the download link.<br><div class="quote"> <br>Finally, a request. This may not be appropriate for your project, or your intent with this editor, but I would like to see an expansion on the buffer, "model", concept. In other words, if I want to create a "model" for a complete tree, it would be nice to be able to build that tree, including collision area, and layer area (so a character can walk behind, or in front of the tree.) <br> <br></div><br><br>I debated weather to do that or just a single layer. I opted for the single layer sense you can actually paste the model in any layer you want.<br>if it is pasted in the collision layer(which I haven't tried, and hoping it works),any none empty tile gets converted to a collision tile.<br><br><div class="quote">  <br>Also, I would like to be able to open a "work" window, where I build the prebuild "models", instead of having to do that in the main editing window. But maybe this is beyond the scope of your current project.<br> <br></div><br><br>I want to integrate editing into the buffer and a menu "buffer create" option which should more or less solve that and should not be too hard to implement.<br><br>I have debated on allowing multiple buffer windows but I haven't figured out a way to manage them. i mean displaying them. I don't want to croud the desktop with say 20 objects that won't be need at a single time. Maybe I can have a separate screen like I do to view  the map where the user can choose the model then switch to pasting that specific model. what do you think?<br><br><div class="quote"> <br>Also, what are your plans for "viewing the map???" I believe you should add an option to view the map in a selected resolution (full-screen), and have a "fake" character be able to navigate the level, for faux-pa testing.<br> <br></div><br>I think I might be going over my head because I don't know how I am going to do this but I want to add an object layer(values and descriptions). a layer where you can assign values to an object such as attach two or more tiles so they can move in a uniform way or be animated. I don't want to go beyond that sense I think that would take away the editors flexibility and purpose as it is supposed to be a general purpose tile map editor. <br><br>the collision layer is an option sense some tile map designers create two layers a graphical tile layer and a collision layer the collision layer is for collision only that is where the objects move or collide with in a game. the player doesn't get to see the collision layer but it's synchronized with the tile layer. the collision layer is the only layer where collision takes place in a map weather it's for walking, falling or stopping. that in itself makes it optional sense some programmers would rather program to check by graphical tile number than by collision layer value.<br><br>I am basing this information on what I have experienced from seeing a limited number of tile map editors. There are a lot better ones I know, but I wanted to make one for my own experience. <br><br>Bare in mind that this is the first time I try to make a tile map editor or a project of this magnitude. Honestly, I don't know where this will take me as far as finishing it but so far I feel very optimistic.<br><br>thanks to everyone who has tested it also. <br><br></td></tr></table><br>
<a name="1033143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool stuff! I plan to make one of these for myself so I never have to write another hacky editor for an in progress tile based game.  keep it up man!<br><br>I also like how you use your very own gui, that must have been tough to write. <br><br></td></tr></table><br>
<a name="1033237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nate thanks for trying it out and for your comments.<br><div class="quote"> <br>I also like how you use your very own gui, that must have been tough to write.<br> <br></div><br>yes, it has been a bit of trouble specially with no reference code or help to base it on. As it is, it's barely usable. the main GUI need a bit of work as well as the rest of the gadgets. I stop putting my full attention on it sense it is really time consuming. now, I'll do modifications when I find I need them. <br><br>I have fixed the bugs mentioned previously and modified the program to the ability to keep on pasting the buffer until the right mouse button is selected. <br><br>I have updated the link in the first post to reflect the current state. <br><br></td></tr></table><br>
<a name="1033650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was trying to convert my editor to Mac and Lenux. I haven't tried it on Lenux and currently I am trying to port it to Mac. I guess it's going to be a lot more work than I imagined. I don't know how many persons here have ppc macs and I was wondering if I should even make an attempt at porting the code to PPC. The other problem is that my desktop video card has recently fried and I am stuck with my laptop and the only place I have lenux installed is in my desktop ( split lenux and windows xp) so I guess that is a no go for now.<br><br>I don't have too much experience with macs and all I ever owned is my g4 Ibook and hardly use it sense I feel more comfortable in windows. My ignorant question is; do all Mac, Intel and PPC, have a one button mouse? <br>I am used to programming the right mouse button to do gestures. I am guessing that wont work in macs but that is just my ignorant input.  <br><br>any ideas?<br><br>I have updated the download link in the first post to current state. <br><br></td></tr></table><br>
<a name="1033663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assumed you could just compile the exact same code on mac and it would work all of the time.  Is this not the case?  maybe its something to do with xcode? <br><br></td></tr></table><br>
<a name="1033683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I assumed you could just compile the exact same code on mac and it would work all of the time.<br> <br></div><br><br>I just found out it doesn't. for starters it it goes into the file requester right from the start it's as if it is registering 'LCONTROL O' as soon as the program starts but with out touching a key. I can not input in to any fields of my requester GUI in the  text fields and doesn't respond to the buttons. <br>The other problem is with the left and right  mouse button. I use them for pasting and removing tiles and groups of tiles but sense there is no right mouse button that part is not working. I don't know if the lcontrol is the same in windows as in mac but it seems to not be responding to the conbination of the lcontrol key and the left mouse button.<br><br>that was just a straight port of the running windows executable posted above. <br><br></td></tr></table><br>
<a name="1033692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jaydubeww</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know, most Macs have a one button mouse. Except the Magic Mouse has a "right" click; having two fingers on the mouse, lifting your pointer finger up, then lifting your middle finger up then clicking with the middle finger. Other than that, holding control and clicking the mouse on a mac is the "right click" for those without a Magic Mouse. <br><br></td></tr></table><br>
<a name="1033719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to figure out a work around for all the non working stuff as I use the Lcontrol + key for hot keys and the right mouse button to delete tiles.<br>what I don't understand its why the program starts with the the requester active if in windows it starts normally. <br><br>I guess, I'll have to do some serious debugging and logic modifications if I want it to work in Mac computers. I thought it was going to be so simple.<br><br>I haven't even tried Lenux. :( <br><br></td></tr></table><br>
<a name="1033722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> have you tried flush keys at the beginning? <br><br></td></tr></table><br>
<a name="1033730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, but I'll find out tomorrow. Thanks. <br><br></td></tr></table><br>
<a name="1034340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> well I found out that, that wasn't it. <br>what I found out is that doing a direct copy of all the windows files including  .o and .a files is some what problematic. I didn't realize that the compiler was using the windows .bmx folder files from my windows build to create the mac executalbe. As soon as I unchecked the Quick Build it started working as spected. <br>Sad it took me this long to figure it out.<br> Any way, I have adopted it to work with macs if any one wants to test it:<br>for macs undocumented commands:<br>Left shift +mouse button+ mouseMovement  selects an area of the map.<br>Left ctrl + mouse button select tile from map<br>left  system + mouse button unselects buffer tiles/remove tiles. <br><br></td></tr></table><br>
<a name="1035215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am currently in the process of implementing an "init file" (initialization files) file  parser I just seen a couple of samples, one from the code archives by Madk and one from Here: <a href="http://www.socoder.net/?showcase=23426." target="_blank">http://www.socoder.net/?showcase=23426.</a> and I decided to do one my self, based on this two. not exactly the same for either one but I did used some ideas from each. this is what I got so far:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict
Const	VAR_TYPE_NULL		:Int = 0
Const	VAR_TYPE_INT		:Int = 1
Const	VAR_TYPE_FLOAT		:Int = 2
Const	VAR_TYPE_STRING	:Int = 3
Const	VAR_TYPE_HEX		:Int	= 4
Const	VAR_TYPE_BIN		:Int = 5
Const	VAR_TYPE_BOOLEAN	:Int = 6
Const	VAR_TYPE_INVALID	:Int = 7
Const	VAR_TYPE_COMMENT	:Int = 8
Const	VAR_TYPE_BLANK		:Int = 9


Type Tbasic Abstract
	Field _list	:TList
	Field _link	:TLink
	Field _done	:Int
	
	Method New()
		_list = New TList
	End Method
	
	Method addItem(l:Object)
		_list.addlast(l)
	End Method
	
	Method reset()
		_link = Null
		_done = False
	End Method
	
	Method setNext:Int()
		If _done Return False
		If _link = Null
			_link = _list.firstLink()
			If _link = Null
				_done = True
			EndIf
		Else
			_link = _link.nextLink()
			If _link = Null
				_done = True
			EndIf
		EndIf
		If _done = True Return False
		Return True
	
	End Method
	
	Method getCurrent:Object()
	
		If _done = True  Return Null
		If _link = Null Return Null
		Return _link.value()
	
	End Method
	

End Type

Type TLexeme
	Field name	:String
	Field line	:String
	Field iType	:Int
	Field iValue	:Int
	Field fValue	:Float
	Field sValue	:String
	Field comment	:String
	Method New()
		name = Null
		iType = VAR_TYPE_NULL
		svalue = Null
	End Method
	
	Function Create:TLexeme(s:String,com:String)
		Local l:TLexeme = New TLexeme
		l.line = s
		l.comment = com
		If s
			Local p:String = findPrefix(s)
			If p
			  l.name = p
			Else
				'error handling for invalid string
			EndIf
			s = findSufix(s)
			If s
				l.sValue = s
				If stringIsFLoat(s)
					l.iType = VAR_TYPE_FLOAT
					l.fValue = Float(s)
				ElseIf stringIsInt(s)
					l.iType = VAR_TYPE_INT
					l.iValue = Int(s)
				ElseIf StringIsHex(s)
					l.iType = VAR_TYPE_HEX
					l.ivalue = hexStringToInt(s)
				ElseIf stringIsBinary(s)
					l.iType = VAR_TYPE_BIN
					l.ivalue = binStringToInt(s)
				ElseIf stringIsString(s)
					l.iType = VAR_TYPE_STRING
					l.sValue = s[1..s.length-1]
				ElseIf stringIsBoolean(s) &gt; -1
					l.itype =  VAR_TYPE_BOOLEAN
					l.iValue = StringIsBoolean(s)
				Else
					l.iType = VAR_TYPE_INVALID
					l.sValue = "INVALID STRING '" +l.line+"'"
				EndIf
			Else
				l.iType = VAR_TYPE_INVALID
				l.sValue = "INVALID STRING '"+l.line+"'"
			EndIf
		Else
			If com
				l.iType = VAR_TYPE_COMMENT
			Else
				l.iType = VAR_TYPE_BlANK
			EndIf
		EndIf
		
		Return l
	End Function
	
	Function findPrefix:String(s:String Var)
		Local n:Int = Instr(s,"=")
		If n &gt; 0
			If n&gt;1
				Local p:String =  Trim(s[..n-1])
				s = s[n-1..]
				Return p 
			EndIf
		EndIf
		Return Null
	End Function
	
	Function findSufix:String(s:String)
		Local n:Int = Instr(s,"=")
		If n &gt; 0 
			s = Trim(s[n..])
			Return s
		EndIf 
		Return Null
	EndFunction

	Method display()
		Local s:String = name+" = "
		Select iType
			Case VAR_TYPE_FLOAT
				s :+ fValue +comment
			Case VAR_TYPE_INT,VAR_TYPE_HEX,VAR_TYPE_BIN,VAR_TYPE_BOOLEAN
				s :+ iValue +comment
			Case VAR_TYPE_STRING,VAR_TYPE_INVALID
				s :+ sValue + comment
			Case VAR_TYPE_COMMENT,VAR_TYPE_BLANK
				s = comment
		End Select 		
		Print s	
	EndMethod

	Function StringIsInt:Int(s: String)
	
	    If s.length = 0 Then Return False
	    For Local i:Int = 0 Until s.length
	        Local c:Int = s[i]
	        If Not (CharIsNumeric(c) Or (c = 45)) Then Return False
	        If (i &gt; 0) And (c = 45) Then Return False 
	    Next
	    Return True
	End Function
	
	Function StringIsFloat:Int(s: String)
	
		If s.length &lt; 2 Then Return False
	     Local radix:Int = 0
		For Local i:Int = 0 Until s.length
			Local c:Int = s[i]
			
			If Not (CharIsNumeric(c) Or (c = 45) Or (c = 46)) Then Return False
			If (i &lt;&gt; 0) And (c = 45) Then Return False
			
			If (c = 46) Then
				radix :+ 1
				If i = s.length Then Return False
			EndIf
			If radix &gt; 1 Then Return False 
		Next
	     If radix = 0 Return False
		Return True      
	End Function
	
	Function StringIsIdent:Int(s: String)
	
		If s.length = 0 Then Return False
		For Local i:Int = 0 Until s.length
			Local c:Int = s[i]
			If (i = 0) And CharIsNumeric(c) Then Return False
			If CharIsIdent(c) = False Then Return False
		Next
		Return True        
	
	End Function
	
	Function StringIsHex:Int(s: String)
	
		Local sCount: Int = 0
		If s.length &lt; 2 Then Return False
		For Local i:Int = 0 Until s.length
			Local c:Int = s[i]
			If Not (CharIsHex(c) Or (c = 45) Or (c = 36)) Then Return False
			If (i &gt; 0) And (c = 45) Then Return False '-
			If (i &gt; 1) And (c = 36) Then Return False '$
			If (c = 36) Then sCount :+ 1
		Next
	    If sCount &lt;&gt; 1 Then Return False
	    Return True       
	End Function 
	
	Function StringIsBinary:Int(s: String)
	
	    Local c: Int
	    Local sCount: Int = 0 ' symbolCount
	
	    Local result:Int = False
	    If s.length &lt; 2 Then Return Result
	    
	    For Local i:Int = 0 Until s.length
	        c = s[i]
	        If Not (CharIsNumeric(c) Or (c = 37)) Then Return False
	        If (i &gt; 0) And (c = 37) Then Return False
	        If (c = 37) Then sCount:+1
	    Next
	    
	    If sCount &lt;&gt; 1 Then Return False
	    Return True        
	End Function
	
	Function stringIsString:Int(s:String)
		If s[0] &lt;&gt; 34 Return False
		If s[s.length-1] &lt;&gt; 34  Then Return False
		For Local i:Int = 1 Until s.length-1
			Local c:Int = s[i]
			If s[i] = 34 Return False
		Next
		Return True
	End Function
	
	Function StringIsBoolean:Int(s:String)
		If s.toLower() = "true" Return 1
		If s.toLower() = "false" Return 0
		Return -1
	End Function
	
	Function HexStringToInt:Int(s: String)
	
		Local v:Int = 0
		Local h:String
		If s[0] = 45 Then 
			h=s[2..s.length]
		Else
		     h=s[1..s.length]
		EndIf
		For Local i:Int = 1 To h.length
			Local n:Int = h[i-1]
			If n &gt; 47 And n &lt; 58 ' 0 to 9
				n :- 48 
			ElseIf n &gt; 96 And n &lt; 103 ' a to f
				n :- 87
			ElseIf n &gt; 64 And n &lt; 71 'A to F
				n :- 55 
			Else
				Assert 0, "Invalid character in hexadecimal string "
			EndIf
			v :| (n Shl ((h.length-i) Shl 2))
		Next
		If s[0] = 45 Then v = -v
		Return v
	End Function
	
	Function BinStringToInt:Int(s: String)
		Local v:Int = 0
		s = s[1..s.length]
		For Local i:Int = 1 To s.length
			Local n:Int = s[i-1]
			Assert (n &gt; 47 And n &lt; 50), "Invalid character in binary string "
			n :- 48
			v :| n Shl (s.length - i)
		Next
		Return v
	End Function
	
	Function CharIsNumeric:Int(a:Int) 'asc value
		If (a &gt;= 48) And (a &lt;= 57) Then Return True '0 - 9
		Return False
	End Function 
	
	Function CharIsHex:Int(a:Int) 'asc value
		If (a &gt;= 48) And (a &lt;= 57)  Then Return True '0 - 9
		If (a &gt;= 65) And (a &lt;= 70)  Then Return True 'A - F
		If (a &gt;= 97) And (a &lt;= 102) Then Return True 'a - f
		Return False    
	End Function
	
	Function CharIsIdent:Int(a:Int) 'asc value
		If (a &gt;= 48) And (a &lt;= 57) Then  Return True ' 0 - 9
		If (a &gt;= 65) And (a &lt;= 90) Then  Return True ' A - Z
		If (a &gt;= 97) And (a &lt;= 122) Then Return True ' a - z
		If (a = 46) Then Return True ' .
		If (a = 95) Then Return True ' _
		Return False    
	End Function

	Method getInt:Int()
		If iType = VAR_TYPE_INT Or iType=VAR_TYPE_HEX Or iType=VAR_TYPE_BIN Or iType=VAR_TYPE_BOOLEAN
			Return iValue
		ElseIf itype = VAR_TYPE_FLOAT
			Return Int(fValue)
		EndIf
		Return 0
	End Method
	
	Method getFloat:Float()
		If iType = VAR_TYPE_FLOAT
			Return Int(fValue)
		ElseIf iType = VAR_TYPE_INT Or iType=VAR_TYPE_HEX Or iType=VAR_TYPE_BIN Or iType=VAR_TYPE_BOOLEAN
			Return Float(iValue)
		EndIf
		Return 0
	End Method
	
	Method getString:String()
		Return sValue
	End Method
	
	Method getBinString:String()
		Return sValue
	End Method
	
	Method getHexString:String()
		Return sValue
	End Method
	
	Method getBoolean:Int()
		If iType = VAR_TYPE_BOOLEAN
			Return iValue
		EndIf
		Return 0
	End Method
		
EndType

Type TSection Extends TBasic
	Field name	:String
	Function Create:TSection(name:String)
		Local s:Tsection = New Tsection
		s.name = name
		Return s
	End Function
	
	Method setItem(s:String)
		Local com:String = stripComments(s)
		s = Trim(s)
		Local lexeme:TLexeme = TLexeme.Create(s,com)
		addItem(lexeme)
	End Method
	
	Method getItem:Tlexeme(s:String)
		reset()
		While setNext()
			Local item:TLexeme = TLexeme(getCurrent())
			If item.name.Tolower() = s.toLower() Then Return item
		Wend
		Return Null
	End Method
	
	Method setItemInt:Int(s:String,v:Int)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_INT
					item.iValue =  v
					item.sValue = String(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				ElseIf t = VAR_TYPE_FLOAT Or t = VAR_TYPE_HEX Or t = VAR_TYPE_BIN Or t=VAR_TYPE_BOOLEAN
					item.iType = VAR_TYPE_INT
					item.iValue = v
					item.sValue = String(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method
	
	Method setItemFloat:Int(s:String,v:Float)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_FLOAT
					item.fValue =  v
					item.sValue = String(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				ElseIf t = VAR_TYPE_INT Or t = VAR_TYPE_HEX Or t = VAR_TYPE_BIN Or t=VAR_TYPE_BOOLEAN
					item.iType = VAR_TYPE_FLOAT
					item.iValue = v
					item.sValue = String(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method
	
	Method setItemHex:Int(s:String,v:Int)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_HEX
					item.iValue =  v
					item.sValue = Hex(v)
					item.line = item.name + " = " + item.sValue + item.comment
					Return True
				ElseIf t = VAR_TYPE_INT Or t = VAR_TYPE_FLOAT Or t = VAR_TYPE_BIN Or t=VAR_TYPE_BOOLEAN
					item.iType = VAR_TYPE_HEX
					item.iValue = v
					item.sValue = Hex(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method
	
	Method setItemBin:Int(s:String,v:Int)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_BIN
					item.iValue =  v
					item.sValue = Bin(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				ElseIf t = VAR_TYPE_INT Or t = VAR_TYPE_HEX Or t = VAR_TYPE_STRING Or t=VAR_TYPE_BOOLEAN Or VAR_TYPE_FLOAT
					item.iType = VAR_TYPE_INT
					item.iValue = v
					item.sValue = Bin(v)
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method
	
	Method setItemBoolean:Int(s:String,v:Int)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_BOOLEAN
					If v
						item.iValue =  1
						item.sValue = "True"
					Else
						item.iValue = 0
						item.sValue = "False"
					EndIf
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				ElseIf t = VAR_TYPE_INT Or t = VAR_TYPE_HEX Or t = VAR_TYPE_BIN Or t=VAR_TYPE_FLOAT Or t = VAR_TYPE_STRING
					item.iType = VAR_TYPE_BOOLEAN
					If v
						item.iValue =  1
						item.sValue = "True"
					Else
						item.iValue = 0
						item.sValue = "False"
					EndIf
					item.line = item.name + " = " + item.sValue + " " + item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method

	Method setItemString:Int(s:String,v:String)
		reset()
		While setNext()
			Local item:Tlexeme = Tlexeme(getCurrent())
			If item.name.ToLower() = s.toLower() Then
				Local t:Int = item.iType
				If t = VAR_TYPE_STRING
					item.sValue = String(v)
					item.line = item.name + " = " + item.sValue
					Return True
				ElseIf t = VAR_TYPE_INT Or t = VAR_TYPE_HEX Or t = VAR_TYPE_BIN Or t=VAR_TYPE_BOOLEAN Or t = VAR_TYPE_FLOAT
					item.iType = VAR_TYPE_STRING
					item.sValue = v
					item.line = item.name + " = " + "~q" + item.sValue + "~q" + " "+ item.comment
					Return True
				EndIf
			EndIf
		Wend
		Return False
	End Method
	
	Function StripComments:String(s:String Var)
		Local com:String = Null
		Local openedParenthesis:Int
		For Local i:Int = 0 Until s.Length
			If openedparenthesis = False
				If s[i] = 34 Then openedParenthesis = True '"
				If s[i] = 59 Then ';
					com = s[i..]
					s = s[..i]; Return com
				EndIf
			Else
				If s[i] = 34 Then openedParenthesis = False '"
			EndIf
		Next
		Return com
	End Function
	
	Method display()
		reset()
		Print name
		Local s:String
		While setNext()
			Local l:Tlexeme = Tlexeme(getCurrent())
			l.display()
		Wend
		Print
	End Method
			
End Type

Type TinitParser Extends Tbasic
	Field document:TDocument
	Field bracketOpen:Int
	
	Function Create:TinitParser(document:Tdocument)
		If document
			Local p:Tinitparser = New TinitParser
			p.document = document
			p.CreateSections()
			Return p
		EndIf
		Return Null
	End Function
	
	Method createSections:Int()
		document.reset()
		Local n:Int = 0
		Local section:TSection = Tsection.Create(" ")
		additem(section)
		While document.setNext()
			Local line:String = String(Document.getCurrent())
			Local t:String = Title(line)
			If t
				section = Tsection.Create(t)
				addItem(section)
			Else
				section.setItem(line)
			EndIf
		Wend
		Return True
	End Method
	
	Method getSection:Tsection(s:String)
		reset()
		While setNext()
			Local section:tsection = Tsection(getCurrent())
			If section.name.ToLower() = s.ToLower() Return section
		Wend
		Return Null
	End Method
	
	Method Title:String(line:String)
		bracketOpen=False
		Local titleStart:Int = 0
		Local titlewidth:Int = 0
		For Local i:Int = 0 Until line.length
			If bracketOpen = False
				If line[i] = 91 ' "["
					If line.length &gt; i+2
						bracketOpen = True
						titleStart = i+2
					Else
						Exit
					EndIf
				EndIf
			Else
				If line[i] = 93 '"]"
					titleWidth = i - titleStart+1
				EndIf
			EndIf
		Next
		If titleWidth &gt; 0
			Return Mid$(line,titleStart,titleWidth)
		EndIf
		Return Null	
	End Method
	
	Method display()
		reset()
		While setNext()
			Local section:Tsection = Tsection(getCurrent())
			section.display()
		Wend
	End Method
	
End Type

Type TDocument Extends TBasic

	Function Create:Tdocument(fileName:String)
		Local file:TStream = OpenFile(fileName)
		If file = Null Return Null
		Local d:Tdocument = New Tdocument
		Repeat
			d.addItem(file.ReadLine())
		Until file.Eof()
		file.close()
		Return d
	End Function

	Method display()
		reset()
		While SetNext()
			Print String(getcurrent())
		Wend
	End Method
End Type

Local d:Tdocument = Tdocument.Create("example.ini")
Local p:TinitParser = Tinitparser.Create(d) 
If p
	Local Gfx:Tsection = p.getSection("graphics")
	If gfx
		Local lex:Tlexeme = gfx.getItem("width")
		If lex Print lex.getInt()
		gfx.display() 'the display function was added for testing purpose only
	EndIf
	Print "******************************"
	p.display() 
EndIf
</textarea><br>it can be tested with this init file:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; Example config file

[example]
myVariable = $FF ; try changing this to different data types!

[graphics]
width	   = 1024
height     = 768
depth      = 32
fullscreen = %0 ; binary
apptitle   = "My \example\ application!"
background = $3333f7

; Comment

[data]
foo = "foo"
bar =1.234
baz = .245
bas = False

[another.section]
foo_1 = 101
foo_2 = 102.01
foo_3 = 103
flags = %001100001
negativeHex = -$FF

</textarea><br><br>init file format:<br><div class="quote"> <br>;comments<br>[section name]<br>variable = value ; do not name 2 or or more variable name with the same name per section, as it will only be able to access the first one with the search.<br>.<br>.<br>[section name]; do not name 2 or more the same as it will be able to access the first one through the search only.<br>.<br>.<br>[section name]<br>.<br>.<br>.<br> <br></div><br>it processes strings,floats, integers, bin int strings, hex int strings and booleans((true/false))<br><br>it does not work with values longer then integers or floats) I have yet to add the ability to write files but is in progress. if any one is interested in using it feel free to use it with out any limitations.<br><br>I have limited it to those variable types sense that is all I need at this stage but will modify as needed.<br><br>once I finish the ability to create ini files, I will add it to the editor.<br>the print function was only added for the purpose of testing. and will not be included in the actual parser.<br>I will not post any more update to the parser unless people show interest in it . <br><br></td></tr></table><br>
<a name="1035696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I finally implemented the parser for the ini tile and is working fluidly(I think) from what I have tested.<br><br>how it works:<br>the editor creates a default ini file if the ini file is not included or is deleted. the "ini" file can be modified and set to work for a specific computer. The graphics mode can be set to "window = true" for window mode or "window = false" for full screen mode, As long as the graphics card support it. I suggest to only attempt to set a mode that is known to work, as invalid modes will more than likely will: crash the editor, will cause a garbled screen or will shut down the monitor.<br><br>If the editor is closed while working with a map, as long as the map has been saved or loaded, when the editor is restarted the map will continue with the previous editor map file and the previous editor settings.<br><br>The windows can be resized only through the ini file. I will implement an "ini" settings window; is in my to do list.<br><br>implemented the ability to save buffered objects.<br><br>if anybody cares to test it, update is in the first post. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
