<!DOCTYPE html><html lang="en" ><head ><title >Noob: How Would I Trap This DX Error?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Noob: How Would I Trap This DX Error?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Noob: How Would I Trap This DX Error?</a><br><br>
<a name="901275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This first code does not trap. It throws a weird DX error in the console screen:<br>"DXERROR err=UNKNOWN:-2005531925 747"<br><pre class=code>
SetGraphicsDriver D3D7Max2DDriver()
If Graphics(1680,1050,32,-1) = Null
 Print "Trapped!" ' &lt;&lt;&lt; never gets trapped!
 End
EndIf
</pre><br>But this works, for test purposes I'm just throwing something obvious at it.<br><pre class=code>
SetGraphicsDriver D3D7Max2DDriver()
If Graphics(32,32,32,-1) = Null
 Print "Trapped!" ' &lt;&lt;&lt;&lt; Works!
 End
EndIf
</pre><br><br>This came about when I purchased a new widescreen monitor. But I'm still using a crappy GPU. So I'm assuming there isn't enough VRAM to handle the large screen. But since control isn't coming back to the program I can't trap for it? Or can I doing something else? Thanks for any suggestions. <br><br></td></tr></table><br>
<a name="901281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does GraphicsModeExists() say your chosen resolution is available then? <br><br></td></tr></table><br>
<a name="901283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes sir. I'm falling a logic path looking for compatible modes first.<br><br>I reinstalled DirectX, same error.<br><br>In OpenGL mode, there is no error reported in the console, no trapping either. <br><br></td></tr></table><br>
<a name="901289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still no luck...<br><br><pre class=code>
SetGraphicsDriver D3D7Max2DDriver()
'SetGraphicsDriver GLMax2DDriver()
Global Ok:Int
'
ok = GraphicsModeExists(1680,1050,32,0)
'
If ok
 If Graphics(1680,1050,32,-1) = Null
  Print "Error creating Graphics Screen!" ' &lt;&lt;&lt; never gets trapped!
  End
 EndIf
Else
 Print "Mode Not Available"
EndIf
</pre> <br><br></td></tr></table><br>
<a name="901290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=69119#772582" target="_blank"> This might help</a> <br><br></td></tr></table><br>
<a name="901291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then there's not much you can do. I think the error code you're getting relates to this error message (as far as I can tell anyway)<br><br>"The device could not be created because the render target surface is not located in video memory." <br><br>Which would indeed suggest that there might be unsufficient VRam available to create the graphics context. I don't know that there's anything you can do to trap it though. It seems like something that Max2D should be trapping. <br><br></td></tr></table><br>
<a name="901324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies. I did do a DX re-install. Looks like the problem is Max2D in both OpenGL and DX mode, is simply not handling the error correctly. So Gabriel you're correct. This is nothing I can do in this scenario other than having the program bomb out.<br><br>This sucks. <br><br></td></tr></table><br>
<a name="901641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've created a thread in the bug forum. Because alot of programmers are deafulting to desktop resolutions, and in the case where this happens, we will not be able to trap for it. <br><br></td></tr></table><br>
<a name="901654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I have code in place that check to see if a video mode is available before creating it yet some users still reported the game bombing on loading so I'd love to see a solution to this too.<br><br>Also based on this info, maybe it is *not* the best solution for widescreen games to use the desktop res and scale up the game graphics after all due to lots of VRAM use, so perhaps a lower matching aspect ratio res should be chosen instead.  I guess it's possible that that mode could generate the same error (or a different error) too...  Plus it would be interpolated on TFTs if that was not their natural res. <br><br></td></tr></table><br>
<a name="901666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad I bought this new widescreen monitor, otherwise I never would have realized the bug. So now what I'm doing is building 2 arrays of graphics modes that my game can run best in. One for widesreen and one for standard. The arrays are constructed in order of best case to worse case.<br><pre class=code>
Global widescreenmodes:Int[] = [1280, 800, 1440, 900, 1280, 768, 1280, 720]
Global standardmodes:Int[] = [1024, 768, 800, 600,640,480]
</pre><br>Depending on desktop aspect ratio, the program loops through the suitable array checking to see If GraphicsModeExists(), the first one it finds a match with, it uses it.<br><br>If no matches found, it defaults to the desktop res. But at least this way, I can hopefully find a better suited res for the game depending on my games resolution and aspect ratio. The key thing is to make sure you build the arrays with enough realistic info on resolutions past, present and future.<br><br>But since my games are wide screen to begin with, I hopefully wouldn't run into the situation that some games have, where the game res is 800x600 and it ends up being stretched on wide screen monitor. eek... <br><br></td></tr></table><br>
<a name="901671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you are not worried about TFT interpolation due to not running at the natural res?  I guess that's better than having a very slow game running at full desktop res. <br><br></td></tr></table><br>
<a name="901690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm somewhat of a noob on the whole TFT, LCD stuff, I've been a CRT user forever. Perhaps you could explain what TFT interpolation is? If that means the monitor scaling the image to run in a resolution it does not support, then I havn't seen a problem yet.<br><br>I've tested my game which uses the projection matrix to scale to the device, on over 12 LCD monitors now. (I'm taking my game demo on a flash drive to several stores) And it looks fine. Perhaps since it appears it's always going to scale up and not down, there's not a problem? I could understand if it has to scale down, there could be more graphic issues.<br><br>So...what TFT interpolation problems have you come across? Thanks. <br><br></td></tr></table><br>
<a name="901794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh OK, so a TFT has a "natural" resolution which is the actual number of physical pixels it has across and down. So for laptops that is normally the desktop resolution they come pre-installed with.  So of course if you set a TFT to use a lower resolution, then every pixel you want to draw will be spanning 1 point something physical TFT pixels.  In the old days some TFTs had none or very poor "interpolation" which basically means scaling, so it looked really naff when you displayed graphics and text at the non-natural TFT res (all blocky and weird).  Nowadays TFTs are a lot better but still if you use a non-natural res you'll get some scaling and thus the image will not be perfect.  I'm on my Macbook Pro right now using a lower res than the natural one (because it's plugged into my plasma TV) and the text looks a little blurry compared to it's natural res.<br><br>So basically there is a choice of say: a) using desktop res and scaling the gfx with the GPU - the GPU is probably good at scaling b) using the exact game res with no GPU scaling - so the TFT does the scaling and it may not be so good c) using a res which is neither that of the game or the natural TFT res thus the GPU does scaling and then to make matters worse the TFT scales the result!<br><br>Make sense yet? <br><br></td></tr></table><br>
<a name="901811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info, greatly appreciated. Yah, that makes perfect sense. Guess I'm going to have to look for an even older lcd monitor, because so far the game images are coming up fine.<br><br>This frickin bug really makes me not want to resort to desktop mode as the default. !#@#$^%^ <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
