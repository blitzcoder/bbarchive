<!DOCTYPE html><html lang="en" ><head ><title >TextHeight() problem!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TextHeight() problem!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >TextHeight() problem!</a><br><br>
<a name="1110985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyBargee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>I'm trying to draw a text in the middle of recrectangles. For this task, I computed the width and height of the text and then drew  a recrectangle like DrawRect(10,10,width,heigh) and put DrawText(word,10,10) on it. <br><br>I've faced a problem when I tried TextHeight() and used consola.ttf. The height had been computed wrongly! On the other hand, TextHeight() computed the text correctly for arial.ttf! But I need to use the consola.ttf.<br>What is wrong in my code, how to solve this problem? Help, pls!<br><br><pre class=code>

SuperStrict

Const word:String="IT IS A TEXT..."

Global Font1:TImageFont=LoadImageFont("consola.ttf",70,SMOOTHFONT)	
If Font1 = Null Then Print("* ERROR: File consola.ttf not loaded!"); End

Global Font2:TImageFont=LoadImageFont("arial.ttf",70,SMOOTHFONT)	
If Font2 = Null Then Print("* ERROR: File arial.ttf not loaded!"); End

Global h:Short=0			' height of the font
Global w:Short=0			' width of the font

' --- CODE ---
 Graphics(800,600,16,60,GRAPHICS_BACKBUFFER)
 
 Repeat
 	Cls
'consola.ttf				
	SetImageFont(Font1)
 	h=TextHeight(word)
 	w=TextWidth(word)
	SetColor 0,0,255	
 	DrawRect(10,100,w,h)
	SetColor 255,255,255				
	DrawText(word,10,100) 

'arial.ttf
	SetImageFont(Font2)
 	h=TextHeight(word)
 	w=TextWidth(word)
	SetColor 0,0,255	
 	DrawRect(10,200,w,h)
	SetColor 255,255,255				
	DrawText(word,10,200) 

	Flip(1)

 Until KeyHit(KEY_ESCAPE) Or AppTerminate()

</pre> <br><br></td></tr></table><br>
<a name="1110994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's actually nothing wrong with your code or the FontHeight function.  It's to do with the font itself.  Seems like Consola has additional space beneath the text (can't remember the technical term for this).  I think you will therefore need to make manual adjustment to the position of the text to make it central. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
