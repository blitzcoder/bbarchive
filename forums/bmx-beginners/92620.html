<!DOCTYPE html><html lang="en" ><head ><title >nth digit of PI</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >nth digit of PI</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >nth digit of PI</a><br><br>
<a name="1056417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shortwind</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm trying to program the formula to find the Nth digit of PI.<br><br>Here is one version of the formula, but I'm doing something wrong and can't make it work...<br><br>Quoted from <a href="http://www.math.hmc.edu/funfacts/ffiles/20010.5.shtml" target="_blank">http://www.math.hmc.edu/funfacts/ffiles/20010.5.shtml</a><br>Here is a very interesting formula for pi, discovered by David Bailey, Peter Borwein, and Simon Plouffe in 1995:<br><br>Pi = SUMk=0 to infinity 16-k [ 4/(8k+1) - 2/(8k+4) - 1/(8k+5) - 1/(8k+6) ].<br><br>...<br><br>Now Wolfram says something different:<br><br><a href="http://mathworld.wolfram.com/PiDigits.html" target="_blank">http://mathworld.wolfram.com/PiDigits.html</a><br><br>Xn = frac( 16Xn-1 + 120n^2 - 89n +16 / 512n^4 - 1024n^3 + 712n^2 - 206n - 21)<br><br>I can't get either of these to work.  It's got to be my interpretation of the formulas.<br><br>My non-working attempt...<br><br><pre class=code>

'4/(8k+1) - 2/(8k+4) - 1/(8k+5) - 1/(8k+6)
Local k:Double
Local j:Double
Local x:Double

For k=0 To 4

j=16^-k*( (4/(8*k+1)) - (2/(8*k+4)) - (1/(8*k+5)) - (1/(8*k+6)))

Print j

Next 

'Xn = frac( 16Xn-1 + (120n^2 - 89n +16 / 512n^4 - 1024n^3 + 712n^2 - 206n - 21))
For k=0 To 4

x= 16*(k-1) + (((120*n^2) - (89*n +16)) / ((512*n^4) - (1024*n^3) + (712*n^2) - (206*n) - 21))

Print x

Next
</pre> <br><br></td></tr></table><br>
<a name="1056423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> you forgot to sum the first one:<br><pre class=code>

'4/(8k+1) - 2/(8k+4) - 1/(8k+5) - 1/(8k+6)
Local k:Double
Local j:Double
Local x:Double

For k=0 To 24

j:+16^-k*( (4/(8*k+1)) - (2/(8*k+4)) - (1/(8*k+5)) - (1/(8*k+6)))

Print j

Next 
</pre> <br><br></td></tr></table><br>
<a name="1056426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shortwind</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks skidracer, but I guess I'm still confused.<br><br>If I want to find the 29th digit of PI, I should be able to make k=29, send it to the formula and have 7 as the answer.  Do I need to change to a different print routine to make it work correctly?<br><br>The whole point of this formula is to make it so you don't have to calculate all the previous digits.  I just stuck it in a loop to see what answers I'd get.<br><br>Maybe I'm just not smart enough to figure this out.... ho hummmm.<br><br>:( <br><br></td></tr></table><br>
<a name="1056431"></a>

<a name="1056432"></a>

<a name="1056433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a lot of detail missing from that description. And it ultimately gives base 16 digits.<br><br>Pi in base 10 is 3.14159..., which means 3 + 1/10 + 4/100 + 1/1000 etc.<br><br>Pi in base 16 is 3.243F6..., which is 3 + 2/16 + 4/256 + 3/4096 + 15/65536 etc.<br><br>First, here's a demonstration that the infinite sum gives the value of Pi.<br>Then we pick out the first few hexadecimal digits.<br><br><pre class=code>
Local k:Double
Local j:Double
Local x:Double
Local Pie:Double

For k=0 To 15  ' not quite infinity, but close enough. 
	Pie :+ 16^-k*( (4/(8*k+1)) - (2/(8*k+4)) - (1/(8*k+5)) - (1/(8*k+6)))
Next 

Print
Print " 0 to 15 sum: " + Pie
Print " Value of Pi: " + Pi
Print 

' Now let's see some hexadecimal digits of Pi.
Local n:Int, d:Int, t:String

For n = 0 To 10
	d = Int(Pie)
	Pie :- d
	Pie :* 16
	t :+ "0123456789ABCDEF"[d..d+1]
Next
Print "Pi in base 16: " + t[0..1] + "." + t[1..] + "..."
</pre><br><br>The point of all this is that the initial sum to compute Pi contains powers of 1/16. At first it looks like you need to do the entire sum. That's what I do in the sample code above. But with careful estimates you can figure out what a particular digit is with much less computation. As I said, there are a lot of details to fill in.<br><br>Also, you really can't get very far with double precision floats. They give 53-bit accuracy. Calculating Pi out to the 29th hexadecimal digit needs far more as each digit is four bits. Allowing for some extra precision to ensure rounding to the proper digit you would probably need about 130-bit accuracy.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1056434"></a>

<a name="1056445"></a>

<a name="1056470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is interesting. It looks like that MathWorld formula has a typo.<br><br>I implemented it and the resulting digits looked nothing like reality. <br><br>Notice that the terms in the numerator go + - +. The denominator goes + - + - -.<br>We can reasonably speculate that should be + - + - +.<br><br>Now the result agrees with the code I posted earlier: 3.243F6A8885<br><pre class=code>
Local x:Double, n:Double, d:Int

For n = 1 To 10	
	x = 16*x + (120*n^2 - 89*n +16) / (512*n^4 - 1024*n^3 + 712*n^2 - 206*n + 21)
	x :- Floor(x)   ' x = Frac(x)
	d = Int(16*x)   ' nth hexadecimal digit after 3.
	Print d
Next</pre>Note this can't be continued for long. Every time through the loop we multiply by 16 and discard the integer part. This throws away 4 bits. So with 53-bit arithmetic we can get twelve digits, maybe thirteen. After that the results are certainly junk. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
