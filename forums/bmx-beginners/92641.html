<!DOCTYPE html><html lang="en" ><head ><title >Finding Server in local network</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Finding Server in local network</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Finding Server in local network</a><br><br>
<a name="1056724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >explosive</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello altogether,<br><br>I'm wondering about the best way to find computers in a local network via a router.<br><br>Basically I have two computers. Now when the second one starts, I like to access files on my first one. Connecting via the TCP-Commands provided by Blitz ist not a problem at all, I just have to specify the IP-address of the computer. Now that i'm running a router with DHCP (and I don't really want to change that...) I somehow have to find the address given to the computers.<br><br>The setup looks like this:<br>Machine 1: Ubuntu 10.10/openSuse 11.3 Linux<br>Machine 2: Mac OS X 10.5<br>Right now I have the server running under linux on port 48620 (looked to be quite uncommon). As I said before connection works perfectly if I directly connect to the address of that computer<br>So starting the client under MacOS I've tried the following script:<br><pre class=code>Local tcpsocket:TSocket=CreateTCPSocket()
For x=170 To 180
	Local ip=192*256*256*256+168*256*256+0*256+x
	Print DottedIP(ip)
	If ConnectSocket(tcpsocket,ip,48620)
		Print "server running!"
		stream=CreateSocketStream(tcpsocket)
		Print ReadLine(stream)
		Exit
	Else
		Print "next try..."
	EndIf
	Print "waiting"
	Delay 200
Next</pre><br><br>The programme freezes at "ConnectSocket()" when no server could be found. Likely that the router tries to find the computer in the network but I'm not sure. Any idea?<br><br>And by the way: is there a better way to find the local ip-address that using "ifconfig"? Something that's directly implemented in BlitzMax? <br><br>Many thanks in advance<br>puzzled Simon <br><br></td></tr></table><br>
<a name="1056732"></a>

<a name="1056733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use HostIP to look up another computer's IP:<br><pre class=code>
Print DottedIP(HostIp("localhost"))
Print DottedIP(HostIp("google.com"))
Print DottedIP(HostIp("mylinuxbox"))
</pre><br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1056767"></a>

<a name="1056768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the HostIP to work, you either need to have a DNS server that the names get registered to (many of the home network routers do have this functionality built-in, but that's not always the case), or the individual computers have to actively advertise themselves on the network (which may or may not be the case depending on the network settings on the individual client computers. Especially if computer thinks it's a public network, it may not broadecast its presense all over the place by default)<br><br>Alternatively:<br><br>Alternatively, you can look at the IP address of your own computer, and then attempt to connect to the other addresses in the same subnet.<br>(e.g. you have 192.168.1.17, then try successively to connect to PC's at 192.168.1.1 through 192.168.1.254)<br><br>There's also the broadcast IP, typically at .255 (192.168.1.255 in the example above)<br><br>If you send a message to the broadcast address, it will be seen by ALL computers in the local LAN. If you have your client listen for incoming connections on a specific port, it should receive the message. If this message includes some identifier of your program and the sender/server IP, you can then have the client in turn use that info to establish a connection to the server.<br><br>However, for this to work properly, you really should use something like Brucey's inet module, which allows you to see the netmask associated with your IP. *most* of the time the broadcast address is .255, but if your network is subdivided into smaller chunks or you only got a partial block from your ISP, then you will need the netmask to calculate the actual broadcast address instead of just assuming it's .255<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1056960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >explosive</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>I fiddled around a bit. The results using TCP or UDP are very unsatisfying. I had a look at the GameNet-Module and I think it works perfectly for finding computers in the net. I mainly used this tutorial: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1640" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1640</a> .<br><br>If you're looking for something similar, just write a loop and scan all ips in your subnet. For good results set the local timeout_ms-variable to something like 10 (Millisecs). This is fairly enough for me in a 300MBit WLAN.<br><br>Many thanks anyway.<br>Simon <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
