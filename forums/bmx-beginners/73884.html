<!DOCTYPE html><html lang="en" ><head ><title >generic type assignment?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >generic type assignment?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >generic type assignment?</a><br><br>
<a name="825424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know if this is possible?  I'm trying to write a load and save system for my types.  I got the save part to work, but the loading is giving me some issues.  My goal is to make the system complete generic so it will save any type you throw at it.<br><br>here's my save function...<br><pre class=code>Function saveType(instance:Object,file:TStream)
	Local id:TTypeId=TTypeId.ForObject(instance)
	Local fList:TList = id.EnumFields()
	WriteLine  file,"new " + id.name()
	For Local myField:TField = EachIn fList
		WriteLine file,myField.name() + " " + myField.getString(instance)
	Next
End Function</pre><br><br>Here's my non working save function...<br>This is a string in my file that says "new agent".  "agent" is the name of my type.  I threw the "new" in there so it knew it was creating a new type and not assigning a field.<br><br><pre class=code>Function loadTypes(filename:String)
	Local file:TStream = ReadFile(filename)
	Local myLine:String
	myLine = ReadLine(file)
	Local myCom:String[] = myLine.split(" ")
	Select myCom[0]
		Case "new"
			Local id:TTypeId=TTypeId.ForName(myCom[1])
			Local myItem:Object = id.newObject()
	End Select
	CloseFile file
End Function</pre><br><br>I'm probably not using the "Object" part incorrectly.  Anyone know how to resolve this? <br><br></td></tr></table><br>
<a name="825441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Anyone know how to resolve this? <br></div>At the risk of repeating myself. Runtime Reflection. There is no other (practical) way to do it. <br><br></td></tr></table><br>
<a name="825468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What if something is depending on another object?<br><br>like:<br>Type TMyParent<br>  field MyChildren:TMyChildren<br>End Type<br><br>Type TMyChildren<br>End Type<br><br><br>You would have to save them in the right order ... which doesn't make it generic. If not paying attention to the right order, you would have to store parent-links within the children and so on.<br><br>If all objects are independent from all others, a generic save/load would be nice, but in most times you have some connections between which may be lost when not acting in special ways on them.<br><br><br>bye<br>MB <br><br></td></tr></table><br>
<a name="825534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You wouldn't have to save them in order.  But, you would need to know which objects need other objects.  If you load an object that needs another object, then if the second object hasn't been loaded yet, you just have to remember to create that connection after you do load the new object.  It is possible, it would take quite a bit of work though. <br><br></td></tr></table><br>
<a name="825572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I see where your going with this.  Maybe a generic method is not the best. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
