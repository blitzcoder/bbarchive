<!DOCTYPE html><html lang="en" ><head ><title >@Skidracer: SavePixmapPNG with 256 colors only?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >@Skidracer: SavePixmapPNG with 256 colors only?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >@Skidracer: SavePixmapPNG with 256 colors only?</a><br><br>
<a name="657917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>Is there a flag for SavePixmapPNG so that it only uses 256 colors or grayscale? <br>16M really boosts the filesize on larger images (even with compression level 9)!<br><br>If not, could you add this for the next update please?<br><br>Grisu <br><br></td></tr></table><br>
<a name="657961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try:<br><br>px=ConvertPixmap(px2,PF_I8)<br>SavePixmapPNG(px, .... etc<br><br>This will convert the pixmap into grayscale, probably based on one of the components, not sure how it works really, but it should then only save a 256-color image. I have used it to draw a grayscale image and then save it only as 1 channel. <br><br></td></tr></table><br>
<a name="658003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grayscale works, thanks Angel!<br><br>256 color would awesome... <br><br></td></tr></table><br>
<a name="658033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think Max will be supporting 256-color stuff anytime soon. It is quite an old display system, the kind of thing you had 10 years ago, or more. I know some games are cool with it, and it is nice and fast using old-school techniques. But these days you can almost assume everyone will be using at least a 16-bit true-color non-paletted mode.<br><br>Also some OpenGL implementations don't support indexed mode.<br><br>You would probably have to do all your own code if you want to support 256-color indexed graphics.<br><br>Your image doesn't have to be grayscale, you just need to work with whatever way the pixmaps are working. You could draw everything into the Red channel and download it with glReadPixels() to a GL_RED based memory buffer.<br><br>I don't think you're likely to see 256-color support added to blitz anytime soon. <br><br></td></tr></table><br>
<a name="658049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> AD: This isn't about true indexed display modes, it's just about saving PNG files that aren't unnecessarily huge by quantizing the color down to a limited palette. Indexed PNG images are still loaded into full RGB colour pixmaps. I think this would be a good addition too, probably an extra optional parameter in SavePixmapPNG to activate it would be the best idea. I don't know how hard it is to do a good colour-quantization procedure though, hopefully there's a freely useable one somewhere. <br><br></td></tr></table><br>
<a name="658066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> 256-color is old for displaying, but still very useful in files.  In my case for mobile devices. <br><br></td></tr></table><br>
<a name="658083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;&gt;256-color is old for displaying<br><br>is this a joke? most people use 256 colors for smaler file sizes... <br><br></td></tr></table><br>
<a name="658154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> An example: My iconstrip saved as 16M PNG wastes 2,5 MB. <br>With 256 colors it is 560 KB small! And this is a lot!<br><br>Yes, I could use Jpg for compression once we have SavePixmapJPG, but the image will look blurry then! <br><br></td></tr></table><br>
<a name="658203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> MrCredo - maybe you should actually read my whole post. :) <br><br></td></tr></table><br>
<a name="658256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh now I get what you're after.<br><br>Yes, you'd need to have the colors quantized down and then saved as a proper 256-color PNG. That could be a nice addition, especially to balance out the loading of PNG's at various depths.<br><br>I agree that for some purposes, like icons and gui's and stuff like that, 256-colors is sufficient. After all, lots of 256-color games have been popular and since you are converting from 256 to 24-bit, you have more than just one palette, so no real limits on the number of colors (other than that each file can only have 256).<br><br>I hear they are going to also include SavePixmapJPG in the next update. :-)<br><br>It would be nice to also have Load and save of GIF which I believe now is patent free? and BMP? and jpeg2000? and maybe TIFF? <br><br></td></tr></table><br>
<a name="658467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skidracer gets a heart attack if he reads all the requests here... ;)<br><br>*puts his life rescue kit in a place nearby* <br><br></td></tr></table><br>
<a name="658712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hm.. i don't know how to create a pixmap with 256 colors and set the palette colors? is this possible in blitz? <br><br></td></tr></table><br>
<a name="658850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not currently supported. Max pretty much assumes in most places that you'll have a 16 or 32 bit display.<br><br>It doesn't have any pallete options, other than some that are provided by OpenGL. <br><br></td></tr></table><br>
<a name="659797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bmx supports 256 grayscale. So it shouldn't be hard making it 256 colors. <br><br></td></tr></table><br>
<a name="659831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> hm... i think blitzmax should have full 256-color-support for pixmaps (for creating and saving images) - but opengl/dx-output with 256 colors is not up-to-date - and is not needed. <br><br></td></tr></table><br>
<a name="659884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never asked for a 256 color display mode! <br>Someone misunderstood that. <br><br></td></tr></table><br>
<a name="659889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes and i do not mean your posting - only a idea for blitz-creators... <br><br></td></tr></table><br>
<a name="659913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> How to output a 256 color image if your image within BM is not paletted? Using autopaletting isn't a solution, the output would be useless in most cass.<br><br>You would need to provide a palette and manually write the pixmap data according to that palette. That way, sure it would be smaller for saving.<br>But much of work just for a few kb ... especially if the output result would look definitely better if using a true graphic program. <br><br></td></tr></table><br>
<a name="660315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora - we should be able to define palettes and pixmap data manually - but at the moment we can only set pixmap data and not palette data - that's all<br><br>BlitzMax should do not more...<br><br>at this way - we can create a program that can create optimized images for web. And 256 color is useful for web graphics...<br><br>At the moment - i think i can't do it (without extern lib or so) <br><br></td></tr></table><br>
<a name="660360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment, you would need to implement the rest of the png libs functionality, at least if the open lib supports paletted PNGs. <br><br></td></tr></table><br>
<a name="660664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you really MUST have 256 color PALETTE mode support, PureBasic still supports it... :)<br><br>Also, I hear jpeg2000 does a good job with quality and small file sizes. Don't know if there's a loader/saver for BM, yet.<br><br>Russell <br><br></td></tr></table><br>
<a name="863101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did we ever get 256 png saves? <br><br></td></tr></table><br>
<a name="863279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can recommend <a href="http://www.libpng.org/pub/png/apps/pngquant.html" target="_blank">pngquant</a>. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
