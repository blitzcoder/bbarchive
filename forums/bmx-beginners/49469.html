<!DOCTYPE html><html lang="en" ><head ><title >ImagesCollide</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ImagesCollide</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >ImagesCollide</a><br><br>
<a name="550285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Argh. Why can't I figure out how to use ImagesCollide?<br><br>Ok so it's :-<br><br>ImagesCollide(TImage1,x,y,frame1,TImage2,x,y,frame2)<br><br>I don't get why you need you need frame1 and frame2.<br><br>In Regular Blitz i just use (Image1,x,y,Image2,x,y) and everything works. If I don't specify a frame then I get errors and when I fill in 0 for the 2 frames I just don't get any results at all. Nothing happens in game at all.<br>What am I doing wrong?<br><br>HELP! :) <br><br></td></tr></table><br>
<a name="550338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In regular blitz you'd get an error 'not enough parameters' if you didn't specify a frame with imagescollide.<br>This works in Bmax...<br><pre class=code>
Graphics 640,480
image1:TImage=CreateImage(128,128)
image2:Timage=CreateImage(128,128)
SetColor 255,0,0
DrawRect 0,0,128,128
GrabImage(image1,0,0)
Cls
SetColor 0,0,255
DrawOval (0,0,128,128)
GrabImage(image2,0,0)
SetColor 255,255,255
While Not KeyHit(key_escape)
  Cls
  DrawImage image1,100,100
  DrawImage image2,MouseX(),MouseY()
  If ImagesCollide(image1,100,100,0,image2,MouseX(),MouseY(),0) DrawText "Collided",0,0
  Flip
Wend
End
</pre><br>Can you show some code?<br>&lt;edited to include generated images&gt; <br><br></td></tr></table><br>
<a name="551475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi ;<br>yap this works but i must check allframes from a image if i dont know which frame is plotted ...<br>hmm need a better (faster way) ... <br><br></td></tr></table><br>
<a name="551481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> For a fast version, will hopefully document soon, there is some source here:<br><br><a href="http://www.blitzbasic.com/logs/userlog.php?user=5&amp;log=491" target="_blank">http://www.blitzbasic.com/logs/userlog.php?user=5&amp;log=491</a><br><br>It is not the simplest method to do fast collisions which would be to call CollideImage with every DrawImage to build a collision map of the scene while you're rendering it. The game's update loop can then collide everything quickly with the collision maps created in the previous flip. <br><br></td></tr></table><br>
<a name="551500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might be missing something here. <br>Why would you have to check all frames from an image? <br>If you're displaying an image with multiple frames then you'd have to use something like a 'curframe' variable to display the frame you want... wouldn't you? This is the frame you check the collisions with. <br>As in BB, for multiple enemies, couldn't you check collisions for all enemies on a list by looping?<br>Having said that I haven't really checked collision layers much yet. <br><br></td></tr></table><br>
<a name="551518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RiK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> This *really* needs documenting properly. <br><br>I'm pretty sure I know what it's doing and I've got it working in a simple example but aproperly documented example would be a great help. <br><br></td></tr></table><br>
<a name="551579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree... more documentation on the subject (if possible, some illustrations would be nice too) is needed... <br><br></td></tr></table><br>
<a name="656338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Realise this is an old thread, but I'm damned if I can get ImagesCollide to return anything other than 0.<br><br>The documentation appears to be as useless as it was eight months ago when this thread was started. :/<br><br><pre class=code>	If ImagesCollide(imgMouse,MouseX(),MouseY(),0,tiles,xstart,ystart,0)
		DrawText "Collided!",0,0
	EndIf</pre><br><br>Why doesn't this work??? <br><br></td></tr></table><br>
<a name="656357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like it should work accoring to the docs.  I haven't used that one yet; been using CollideImage instead which DOES work.  Try making a mini app and post an example for us to test.  Or just force a collision by changing your mouseX and Y and startX and Y to 0 and making 100% sure there is some graphics at the same position in your tiles image. <br><br></td></tr></table><br>
<a name="656374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found CollideImage but the documentation doesn't make any sense.  What's a collision layer???  How do I use the Writemask and Collisionmask parameters?  Come on, who wrote this nonsense??<br><br>I'm starting to despise Blitzmax. :/ <br><br></td></tr></table><br>
<a name="656388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> CollideImage writes the image to a layer (you have 16 of them). To which layer an image is written, is defined through the writemask.<br><br>If you want to check if an image collides with anything, you do that basing on the layers as well. But this time you have to write the needed layer flag to the collision mask.<br><br>Quite simple :-)<br><br>Don't forget to call resetcollisions after you check all collisions. <br><br></td></tr></table><br>
<a name="656391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heheh, man those were the days, 8 months ago too!<br>I never did quite figure why ImagesCollide didn't work.<br><br>In the end I gave up and since then have been using my own bounding box and circle collision code that I wrote ever since. If that's making you pull your hair out then you should have a tinker with drawrect and then try to resist not making a '4 line inside a function' MyDrawRect function ;)<br><br>&gt; I'm starting to despise Blitzmax. :/ <br><br>Don't despair Dave! It sorta gets better later, I've had 12 months of crazy Blitzmax things to deal with.<br><br>Besides, just wait until you start putting sound in your game..... <br><br></td></tr></table><br>
<a name="656452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gfk, Does that example I posted with ImagesCollide work?<br>If it does then post your code and somebody will see what's happening.<br>There are lots of good examples on how collideimage is used hidden away. Shame some of them couldn't have been used in the doc. <br>e.g.<br><a href="/posts.php?topic=49518" target="_blank"> Collideimage1 </a><br><a href="http://www.blitzwiki.org/index.php/CollideImage" target="_blank"> Wiki Collideimage entry </a><br><a href="/posts.php?topic=53356&amp;hl=collideimage" target="_blank"> Collideimage wrapper </a><br><a href="/posts.php?topic=41263&amp;hl=imagescollide" target="_blank"> Extra doc which doesn't seem to have made it </a> <br><br></td></tr></table><br>
<a name="656464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The thing with the CollideImage is to look very carefully at the flags in the help example.  The first call "Writes" to layer 1 and the second call "Checks" the specified object against layer 1.  It's quite cool in a way actually. <br><br></td></tr></table><br>
<a name="656548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I think the original problem was something to do with the image I was using.  I re-exported it from Photoshop, and everything works fine now.<br><br>I've since bumped into a mouse lag problem, which after a dig through the forums I've managed to work around (GrabPixmap), but that REALLY needs fixed. :/<br><br>I still maintain that the documentation is hopelessly vague in places, though. <br><br></td></tr></table><br>
<a name="656671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gfk: This is the best mouse fix problem, by Indiepath, add straight after Flip:<br><br><pre class=code>
Function FlushGraphics:Int()
	?Win32
		If TD3D7Max2DDriver(_max2dDriver)
			Local sdesc:DDSurfaceDesc2 = New DDSurfaceDesc2
			sdesc.dwSize = SizeOf(sdesc)
			Local res:Int = PrimaryDevice.backbuffer.Lock(Null,sdesc,DDLOCK_WAIT|DDLOCK_READONLY,Null)
			PrimaryDevice.backbuffer.unlock(Null)
			Return res
		EndIf
	?
End Function
</pre> <br><br></td></tr></table><br>
<a name="656688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks - beaker suggested exactly that fix at about 2am this morning but I didn't get chance to try it til just now.<br><br>Hope this gets fixed 'officially' in the next update anyway. :) <br><br></td></tr></table><br>
<a name="656689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me too :) <br><br></td></tr></table><br>
<a name="656710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Me Three and a few more things too like the vertical tearing in Windowed Mode and the sound channel bugs. <br><br></td></tr></table><br>
<a name="656724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> and proper streaming music audio. <br><br></td></tr></table><br>
<a name="656739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about audio that doesn't crackle on 98? <br><br></td></tr></table><br>
<a name="656787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was actually considering start a thread call High Priority Bugs that we could post proper big known bugs that really affect us all as opposed to tiny bugs that aren't much of an issue right now... <br><br></td></tr></table><br>
<a name="656794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> A proper media library would already be good enough ... loading times like hell for OGG is a serious problem. <br><br></td></tr></table><br>
<a name="656808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've started a "Major Requests" thread <a href="http://www.blitzbasic.com/Community/posts.php?topic=59005" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=59005</a><br><br>Be cool if people added stuff there, like streaming oggs. <br><br></td></tr></table><br>
<a name="1158430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vin78</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had this problem. But have solved it now.<br><br>I don't know why it doesn't just let you specify:<br><br>If Sprite Collision 1,2<br>Else<br>Endif<br><br>But for some reason were defining Images and not sprites. Pain in the Arse.<br><br>If anyone is still confused it is thus:<br><br>If ImagesCollide(YOUR_IMAGE_A_NAME,YOUR_IMAGE_A_XPOS,YOUR_IMAGE_A_YPOS,0,YOUR_IMAGE_B_NAME,YOUR_IMAGE_B_XPOS+WIDTH OF IMAGE,YOUR_IMAGE_B_YPOS+HEIGHT OF IMAGE,0)<br>		DrawText "Collided!",0,0<br>	EndIf<br><br>YOUR_IMAGE_A_NAME<br>YOUR_IMAGE_A_XPOS=THE X POSITION ON THE SCREEN OF YOUR_IMAGE<br>YOUR_IMAGE_A_YPOS=THE Y POSITION ON THE SCREEN OF YOUR_IMAGE<br>0<br>THEN<br>YOUR_IMAGE_B_NAME<br>YOUR_IMAGE_B'S X POSITION+WIDTH OF YOUR IMAGE<br>YOUR_IMAGE_B'S Y POSITION+HEIGHT OF YOUR IMAGE<br><br>Remember that the computer doesn't know you've got a sprite at the Mousex() and Mousey() positions!<br><br>And that it is merely checking if the two have overlapped WITHIN THE BOX<br>you have created with YOUR_IMAGE_A_XPOS,YOUR_IMAGE_A_YPOS and <br>YOUR_IMAGE_B'S X POSITION+WIDTH OF IMAGE B<br>YOUR_IMAGE_B'S Y POSITION+WIDTH OF IMAGE B<br> <br>Cheers<br>V <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
