<!DOCTYPE html><html lang="en" ><head ><title >Interesting problem with collision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Interesting problem with collision</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=101" >BlitzMax Beginners Area</a>/<a href="#bottom" >Interesting problem with collision</a><br><br>
<a name="483734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pavlov</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Object A collides with object B.  I believe I'm detected the collision the correct way and am removing object B from its list but would also like to remove object A from its list.  Any ideas?<br><br>' go through all the attacking missiles looking for a collided image<br>For Local A:AttackingMissile = EachIn AttackingMissilelst<br>	CollideImage(A.anImage, A.x, A.y, 0, 0, 1)<br>Next<br><br>' attacking missile collides with a city<br>For Local B:Cities = EachIn CitiesLst<br><br>	If CollideImage(B.anImage, B.x, B.y, 0, 1, 0)<br>		PlaySound nukeSnd<br>		AddExplosion(B.x, B.y, 1)<br>		B.target = 0<br>	End If<br>Next <br><br></td></tr></table><br>
<a name="483741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're not using the extra argument that lets you pass an object to the collision function that you then retrieve in an Object array when something else collides with it. (Remember you'll have to downcast it.) <br><br></td></tr></table><br>
<a name="484010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pavlov</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Object A keeps coming back as null.  Feels like I've run through the gauntlet of what it could possibly be.  Any suggestions would be greatful.  Thanks.<br><br>' go through all the attacking missiles looking for a collided image<br>For Local A:AttackingMissile = EachIn AttackingMissileLst<br>	CollideImage(A.anImage, A.x, A.y, 0, 0, 1, A)<br>Next<br><br>' attacking missile collides with a city<br>For Local B:Cities = EachIn CitiesLst<br><br>	Local collided:Object[] = CollideImage(B.anImage, B.x, B.y, 0, 1, 0, Null)<br><br>	If collided<br>		For Local i = 0 To Len(Collided) - 1<br>			Local A:AttackingMissile = AttackingMissile(Collided[i])<br>If a = Null<br>Print "it's null null"<br>End If<br>			AttackingMissileLst.remove(A)<br>		Next<br>		PlaySound nukeSnd<br>		AddExplosion(B.x, B.y, 1)<br>		B.target = 0<br>	End If<br>Next <br><br></td></tr></table><br>
<a name="484328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... sorry, as far as I can tell that should work. By the way, if the cities remain stationary and the missiles are moving around the screen, it might make more sense to draw the cities to a collision layer not the missiles, and compare the missiles to it. Then you only need to clear and redraw the city layer when a city is destroyed rather than every frame, which I think could make it faster.<br><br>However, I might have no idea what I'm talking about. <br><br></td></tr></table><br>
<a name="484546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pavlov</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fixed it with some help from a program called rockout.bmx that came with blitzmax.  I put the following code in the attacking missiles update method and it worked like a charm.  Life is good.  Do you think I found a bug based on the source code listed above? <br><br>For Local City:Cities = EachIn CitiesLst<br><br>	Local ox:Int = x - width / 2<br>	Local oy:Int = y - height / 2<br><br>	Local ogx:Int = City.x - City.width / 2<br>	Local ogy:Int = City.y - City.width / 2<br><br>	' Check collision...<br><br>	If OverLap (ox, oy, ox + width, oy + height, ogx, ogy, ogx + City.width, ogy + City.height)<br>		AddExplosion(City.x, City.y, 1)<br>		PlaySound nukeSnd<br>		City.target = 0<br>		AttackingMissileLst.remove(Self)<br>	End If<br>Next <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
