<!DOCTYPE html><html lang="en" ><head ><title >Problem with ReadPixels</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with ReadPixels</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=508" >XNA</a>/<a href="#bottom" >Problem with ReadPixels</a><br><br>
<a name="2046486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I draw my screen, then run this:<br><br>'(w=512 h=512)<br>Local buf:=New Int[w*2*h]<br>ReadPixels buf,0,0,w,h,w,w*2<br><br>But I always get this error, and only in XNA (not GLFW, iOS or Android):<br><br>Monkey Runtime Error : The rectangle is too large or too small for this resource.<br>Parameter name: rect<br><br>Does anyone have any ideas why this might only be happening in the XNA target? <br><br></td></tr></table><br>
<a name="2046473"></a>

<a name="2046487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I found the problem, and it's only on XNA.<br><br>If the CreateImage is larger than the DeviceWidth/DeviceHeight on XNA, then ReadPixels breaks.<br><br>I had it at 512x512, but when I changed it to 480x320 (my Width/Height) then it worked.  I've yet to see if this change has any affect on other platforms yet. <br><br></td></tr></table><br>
<a name="2046488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would you read from outside the current buffer? Makes sense, no? <br><br></td></tr></table><br>
<a name="2046491"></a>

<a name="2046492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I need to draw will draw off screen, and there are no errors if I draw off screen.  So I didn't think there would be a problem with drawing what I always draw, then reading all the pixels.<br><br>Plus it worked fine in GLFW, Android, iOS, and Flash as it was.  So I didn't see any reason why it wouldn't work in XNA, which is the problem.  Monkey is supposed to be code-once and work on all targets, which isn't true in this case, so that doesn't make sense to me.  ReadPixels needs to be fixed so that it works the same with all targets. <br><br></td></tr></table><br>
<a name="2046490"></a>

<a name="2046493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm very surprised you are getting any pixels offscreen on other targets. <br><br></td></tr></table><br>
<a name="2046494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >benmc</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may not be getting the pixels off-screen, but it's allowing the code to work and not cause errors. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
