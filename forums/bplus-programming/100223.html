<!DOCTYPE html><html lang="en" ><head ><title >Help with functions.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help with functions.</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Help with functions.</a><br><br>
<a name="1181736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >indietom</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br>I'm trying to learn how to use blitzplus so I can team up with my friend at game jams. The problem is I don't get functions, I know how to make a normal simple function but it doesn't look nice.(this is how <a href="http://pastebin.com/ZW1FE30z)But" target="_blank">http://pastebin.com/ZW1FE30z)But</a> I want them to look like this, <a href="http://pastebin.com/6zv3UDvC" target="_blank">http://pastebin.com/6zv3UDvC</a> . When I do it this way nothing happens.<br><br>Thanks for any help. <br><br></td></tr></table><br>
<a name="1181738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I ...<i>think</i> I can guess what you're trying to do, but it isn't clear. Can you explain in more detail what you want to achieve?<br><br><br>Also, you can put code directly in your forum posts:<br><br>{code}<br>Stuff<br>{/code}<br><br>^ replace the {} with [] and you get this:<br><br><pre class=code>Stuff</pre> <br><br></td></tr></table><br>
<a name="1181739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >indietom</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is what I want to do in more detail. <br><br><pre class=code>
This is what my friends' use:
 
fuction move()
 
if keyDown(down) then playerY = playerY + 5
if keyDown(up) then playerY = playerY - 5
if keyDown(right) then playerX = playerX + 5
if keyDown(left) then playerX = playerX - 5
 
if keyDown(s) then player2Y = player2Y + 5
if keyDown(w) then player2Y = player2Y - 5
if keyDown(r) then player2X = player2X + 5
if keyDown(d) then player2X = player2X - 5
 
end function
 
This is what I want mine to look like:
 
function controls(x,y,keyForDown,keyForUp,keyForLeft,keyForRight)
if keyDown(keyForDown) then y = y + 5
if keyDown(keyForUp) then y = y - 5
if keyDown(keyForRight) then x = x + 5
if keyDown(keyForLeft) then x = x - 5
 
end function
 
global playerX = 0;
global playerY = 0;
 
global player2X = 0;
global player2Y = 0;
 
; main loop
 contols(playerX,playerY,down,up,left,right)
 contols(player2X,player2Y,s,w,a,d)
; main loop
</pre> <br><br></td></tr></table><br>
<a name="1181740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >indietom</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is my actual code to. <br><pre class=code>
Graphics 640,480,0,0
SetBuffer BackBuffer()

Global b = 0

Global playerX = 0
Global playerY = 0
Global playerW = 24
Global playerH = 24

Global player2X = 48
Global player2Y = 0
Global player2W = 24
Global player2H = 24

While b = 0
 Cls
 If KeyHit(1) b = 1
 Rect playerX,playerY,playerW,playerH
 Rect player2X,player2Y,player2W,player2H
 controls(playerX,playerY,200,208,203,205)
 Flip
Wend
End

Function controls(x,y,keyForUp,KeyForDown,keyForLeft,keyForRight)

 If KeyDown(keyForUp) Then y = y - 5 ; 200
 If KeyDown(keyForDown) Then y = y + 5 ; 208
 If KeyDown(keyForLeft) Then x = x - 5 ; 203
 If KeyDown(keyForRight) Then x = x + 5 ; 205

End Function

Function collision(x,y,x2,y2)

 ;If x &lt; x2 And x &gt; x2 And y &lt; y2 And y &gt; y2

End Function
</pre> <br><br></td></tr></table><br>
<a name="1181741"></a>

<a name="1181742"></a>

<a name="1181743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function controls(x,y,keyForUp,KeyForDown,keyForLeft,keyForRight)

 If KeyDown(keyForUp) Then y = y - 5 ; 200
 If KeyDown(keyForDown) Then y = y + 5 ; 208
 If KeyDown(keyForLeft) Then x = x - 5 ; 203
 If KeyDown(keyForRight) Then x = x + 5 ; 205

End Function</pre><br>The problem here is that function arguments are always called by value. That means x,y are just local copies of the x,y in your main program. The horrible solution is to use global variables for x,y and not pass them to the function. The better way is a user-defined Type which holds relevant info for the things you want to move. Have x,y as Fields and pass the appropriate type object to the function. <br><br></td></tr></table><br>
<a name="1181745"></a>

<a name="1181746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd pretty much said it, but to expand that answer:<br><br>There are two types of variable (actually three, but never mind the third for now): local, and global. They differ in how they are handled by functions.<br><br>When you declare a global, that name is visible throughout your program. The one slot can be accessed and set by code anywhere, inside functions or out. It "lives" in the main program body, part of the basic chunk of data that makes up your program's core.<br><br>When you use a local (B+ will let you get away with not declaring them, but you should always do it anyway), it is only visible <i>in the current scope</i>. The outer level of the program is one scope; inside each function body is a separate scope. When you call a function, a new scope body is created with the local variables, and it gets destroyed when the function leaves, so there is also nothing shared between two calls of a function (if the same function is active twice at the same time through "recursion", each activation gets its own scope too, but don't worry about that right now).<br><br>A function's arguments are always declared as local to that function's scope. So when you call 'controls', new slots named x, y, etc. are created and <i>then filled with</i> the values passed in the function call - but these are separate slots from playerX, playerY, etc. At the end of the call these slots are destroyed so the changes you made to the x slot within the function body are lost.<br><br>As Floyd said, and you already discovered, one way to have a function affect the world outside it is to have it access globals. This works, but is rather ugly as it gets confusing later on when you have a lot of code. However, it will do for now (you can stop reading here if you want).<br><br><br>Since the arguments to a function are always <i>copied</i>, it may seem like there's no other way to affect external data, but actually there is: by passing in <i>references</i> to "things" that exist outside the function. While the reference itself is copied, the reference still points to the same "thing", and therefore when you access that "thing" through the parameter name, you can change it. For instance, you know this:<br><br><pre class=code>a = CreateImage(128, 128)
b = a        ;We still have just one image - it wasn't copied, but b and a both refer to it
a = 0        ;This doesn't affect b at all, it only overwrite the image *handle*</pre><br><br>A simpler, very fast "thing" we can create is an array, which is just a block of memory where we can get at the internal components by a numeric index. Arrays clean up automatically (never need to delete them, they die at the end of their original scope just like variables), and can only be passed to functions rather than assigned to any old variables with '='. With an array you can do this:<br><br><pre class=code>Local dirs[2]    ;Array holding directions: 1 is x and 2 is y

Function controls(d[2], keyU, keyD, keyL, keyR)
    If KeyDown(keyU) Then d[2] = d[2] - 5 ; 200
    If KeyDown(keyD) Then d[2] = d[2] + 5 ; 208
    If KeyDown(keyL) Then d[1] = d[1] - 5 ; 203
    If KeyDown(keyR) Then d[1] = d[1] + 5 ; 205
End Function

controls dirs, 200, 208, 203, 205     ; Passes _a reference_ to the dirs array into the function
; where the reference will be called d but point to the same array</pre><br><br>'d' and 'dirs' are two names pointing to the same "thing", in this case an array rather than an image, so modifying the array through 'd' will affect what you can later access through 'dirs'. This lets you change things outside of a function, without needing to use globals, which is handy because it makes it very visually explicit what is being changed. You can also affect things in multiple locations (you could pass any int-2 array to controls and modify it in this way). <br><br></td></tr></table><br>
<a name="1184452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Friek555</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Oh, I didn't know this function</pre><br>This is normal<br><pre class=code>This</pre>is code<br><pre class=code>I</pre>like<pre class=code>writing</pre>in<pre class=code>code</pre><br><br>Sorry for destroying this reasonable discussion, I just want to try out this <pre class=code> awesome code </pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
