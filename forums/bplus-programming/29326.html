<!DOCTYPE html><html lang="en" ><head ><title >32-bit images *using* the alpha byte</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >32-bit images *using* the alpha byte</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >32-bit images *using* the alpha byte</a><br><br>
<a name="310283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WillKoh2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When a readpixelfast call is made you get a 32-bit integer but with an alpha that is always 255, and when you write to the screen it is if the alpha byte of the write value had been 255, whatever it actually was. Now - could someone write functions that saves, loads and draws bitmaps with the alpha byte in taken into effect? Or should I use PNG-images, how then, and do they contain frames for animation? <br><br></td></tr></table><br>
<a name="310291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> alpha has no effect in Blitzplus, no matter what value you set it at. <br><br></td></tr></table><br>
<a name="310292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WillKoh2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, i know.. unless you read the alpha byte from a bank and then calculate color of pixel as a blend between imagepixel (in bank) and screen-pixel, where the image is as solid as the alpha byte is great. <br><br></td></tr></table><br>
<a name="310313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see any reason why you couldn't, but I suppose it would be pretty CPU-intensive, since you're doing the work of the GPU in software. <br><br></td></tr></table><br>
<a name="310314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alphasource# = alphaintvalue / 255<br><br>this converts a 0 to 255 alpha value toa 0 to 1 floating point value.<br><br>alphadest# = 1 - alphasource#<br><br>red = (redsource * alphasource#) + (reddest * alphadest#)<br>green = (greensource * alphasource#) + (greendest * alphadest#)<br>blue = (bluesource * alphasource#) + (bluedest * alphadest#)<br><br>then just change the destination color to the above red/green/blue color...<br><br>Note, however that this isn't fast enough for most real time use... <br><br></td></tr></table><br>
<a name="310319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason why it's too slow for realtime use is that readpixelfast and writepixelfast are slow simply because they have to transverse the videocard bandwidth bottleneck to return/set anything...<br><br>If you are wanting to do this in realtime then forget about the backbuffer() as it won't do you any good...instead create a image in system memory for this, and store your sprites in banks or arrays...writepixelfast is very fast when used within system memory...and you can then use the built in Blitz draw image routines (NOT writepixelfast) to put your system memory image "buffer" onto the frontbuffer() for the user to see...<br><br>When you writepixelfast you are not only sending a 16/32 bit color across to the video card but you are also sending out a message telling the video card you are sending a single pixel and screen cords for it's location...so in effect you are trying to transfer around 4 times the data just to write one pixel to the screen...but when useing the Blitz image drawing commands this can be done faster because the system tells the videocard how much is being transfered at once, so each pixel doesn't need the added "header" memory transfer overhead that writepixelfast does... <br><br></td></tr></table><br>
<a name="310493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WillKoh2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> MSW: Hrm.. good to know.. but to create a new blitz-image with regard taken to alpha and the background makes the image be in need of re-generation when the background changes. Would it still be faster though, to, for each "DrawImageAlpha", to generate a new image through a readpixelfast / poking in bank loop, and then draw it using DrawImage, perhaps? You mean that a bank is perfectly drawable as an image if it consists of the same 32-bit integers (although alpha byte is not effective)? Any extra bytes telling width/height/mask/frames to take into account when manually generating a blitz image?<br><br>I was trying to do very much that same thing you suggested in your 2nd post but f*cked up somehow and made the whole thing more complicted than necessary..<br><br>Now I'll try a DrawImageAlpha func using WritePixelFast for a start... <br><br></td></tr></table><br>
<a name="310505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WillKoh2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;crappy code removed&gt; <br><br></td></tr></table><br>
<a name="310656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>What's wrong anyone? <br> <br></div><br><br>Your Azul image is a .JPG which doesn't support alpha channels...<br><br>when you load an image Blitz converts it into the same color depth as your program is useing...this means a 8-bit paletted 256 color .BMP is converted into full 32-bit color when you use the Blitz loadimage function...and as BlitzPlus doesn't have support for alpha channels...it won't do anything with them. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
