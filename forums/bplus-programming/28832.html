<!DOCTYPE html><html lang="en" ><head ><title >Getting different results on different computers</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Getting different results on different computers</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Getting different results on different computers</a><br><br>
<a name="303856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan60</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game is not exactly the same on both of my computers.  I came across this problem trying to solve my network game.  I have tanks with AI.  They don't do the same thing on both computers, but they do the exact same thing on the same computer every time I run the game, <br><br>I do use rand , I don't randomize it though for this test<br><br>The problem doesn't happen right away, <br><br>All testing is done with no user input at all.<br><br>Any known problems with floating point on different computers?<br>What about 'random' will always be the same on different computers<br><br>My computers use AMD 600 and AMD 1200  CPUs(I think) <br><br></td></tr></table><br>
<a name="303858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >googlemesilly</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is one of the problems with different hardware profiles I guess. <br><br></td></tr></table><br>
<a name="303876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hansie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dan60<br><br>Just for reference, also check out this thread:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=28810" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=28810</a> <br><br></td></tr></table><br>
<a name="303974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Brine</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>Yo could always generate a big list of random numbers and include this in with your executable, then all instances could look up values in the table, theirfore by-passing the random values are different on different computers problem!<br><br>Mr Brine. <br><br></td></tr></table><br>
<a name="304528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan60</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting frustrated with this problem.  I would like to pin point the the problem so I can find a work around solution. Otherwise I will have to rethink my whole network game. <br><br>I doubt its going to be the random generator.  My map is generated randomly and appears identical on any computer.<br>Unless the the random number changes after a few thousand numbers or something.<br><br>I do use lots of floating point sins a cos, collision detection and so on. Shouldn't the floating point be the same on all computers? <br><br> why do tanks take a different path on different computers.  The tanks should do as they are told not have a mind of their own.<br><br>I did discover one interesting thing.  <br>*** changing the graphics mode also changes the result.<br>example <br>Graphics 800,600,2<br>Graphics 800,600,1<br>wont give the same tank path. <br><br></td></tr></table><br>
<a name="304596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WoeIsMe</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure how to answer this how you want, but...<br><br>If this is a network game (I'm not sure how network games work yet, so correct me if I'm wrong) then why don't you have one "master" computer, and the values/coordinates/whatever for the AI tanks are all sent from the same "master computer". Therefore, should the AI tanks' values change between computers, they will be corrected and use the values from the "master" computer.<br><br>I'm not sure how you'd do this or if it's fully possible, but I think that would be a good approach. <br><br></td></tr></table><br>
<a name="304802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I did discover one interesting thing. <br>*** changing the graphics mode also changes the result. <br>example <br>Graphics 800,600,2 <br>Graphics 800,600,1 <br>wont give the same tank path.<br> <br></div><br><br>That could explain the problem if your tank pathfinding/collision detection routines are built around specific colors on a texturemap/image... <br><br></td></tr></table><br>
<a name="304880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan60</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, not using colors for pathfinding or collision detection.   <br><br>Using debuglog I've been trying to track when it starts to differ. It seems to be after a imagecollide  detection (not the first one though),  but hard to be 100% sure. <br><br></td></tr></table><br>
<a name="304967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Nope, not using colors for pathfinding or collision detection. <br><br>Using debuglog I've been trying to track when it starts to differ. It seems to be after a imagecollide detection (not the first one though), but hard to be 100% sure. <br> <br></div><br><br>Yes, you most certainly are depending on image colors if useing imagescollide() <br><br></td></tr></table><br>
<a name="305031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan60</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> To MSW:<br><br>MSW YOU RULE!!!<br><br>I replaced all ny imagescollide with imageoverlap and problem disappeared!  <br><br>Problem also disappeared when I changed graphics 800,600,16 to Graphics 800,600,32<br><br>My network game works now!! <br><br>I still don't fully understand why that happens. If the two compared pixels aren't black shouldn't that be a collision?<br><br>What solution to you recommend?<br>a) use graphics 800,600,32<br>b) don't use imagescollide<br>c) change sprite colors (would that help?)<br>d)other<br>How much do I owe you?<br><br>I'll post a link to my demo soon. <br><br></td></tr></table><br>
<a name="305055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would just write my own collision routines, because frankly I don't see any point in haveing pixel perfect collision detection (most professionaly developed 2D games use "hit boxes" or "collision zones" and rarely if ever need to dive into pixel perfect accuricy)<br><br>But if you must have pixel perfect accuricy then I suggest you do it in your code useing banks or arrays to store single bit depth images that you can use to check with...this is prolly going to seem very complicated, but like the "hit box" methods, it allows you to keep your collision routines seperate from color depth conversion problems...<br><br>else:<br><div class="quote"> <br>What solution to you recommend? <br>a) use graphics 800,600,32 <br>b) don't use imagescollide <br>c) change sprite colors (would that help?) <br> <br></div><br><br>a) yeah, you can do that...but some folks might not be able to run it<br><br>b) yeah, might be a good idea...but if you must, there are ways to still use it without hitting against the color conversion problems<br><br>c) might be a good idea...as a 32-bit color like: (red = 8, green = 8, and blue = 8...a very dark grey color) could wind up being converted to red = 0, green = 0, blue = 0 in 16-bit modes...<br><br>The simplest solution would be to write a little application that loads your graphics in 32-bit mode...then goes through each pixel and if it isn't black (0,0,0) then it changes it to pure white (255,255,255)...the application then saves the resault as something like "&lt;imagename&gt;MASK.BMP"<br><br>Then in your game you load both the original art and the MASK versions created by the application...then do the imagescollide checks with the MASK versions as the 32-bit to 16-bit color conversion shouldn't effect it that much...but of course this requires that you use approx twice the amount of video memory, twice the number of graphics... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
