<!DOCTYPE html><html lang="en" ><head ><title >Sound bug workaround?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sound bug workaround?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Sound bug workaround?</a><br><br>
<a name="323460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrMartin</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anybody found a fix or workaround for this bug:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=26915" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=26915</a><br>?<br><br>Short version: Start a program that use the soundcard while a Blitz program is running, and any sound in the Blitz program will just die. When explorer.exe gets focus the sound comes back again.<br><br>--<br>Martin Gunnarsson <br><br></td></tr></table><br>
<a name="904452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >meemoe_uk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has this bug been fixed yet? I still get it.<br>For me the sound becomes grainy and crackly, and varys in serverity, from barely noticable to killing the sound completely.<br>I used to think it was my computers fault, since the sound would break in simular fashion on other applications, doom, unrealT, duke3D... but then it turned up on other computers I was testing on. Sometimes it doesn't occur. Other times it takes a while before it occurs in the blitz prog. Other times it's there from the start.<br>It's behaviour is different on different computers. There are plenty of apps that don't have this problem at all. I can have other apps running while I load music into blitz's music browser, and get the bug in the blitz music without it in the other app. Bug can occur with min code, i.e. loadsound, playsound. It affects sfx as well as music.<br><br>Seems like there's a 'loose variable' somewhere in the blitz sound code. For PC sound, I think some assumption that was correct a while ago is no longer correct, and several apps have been caught out. <br><br></td></tr></table><br>
<a name="904466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >meemoe_uk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> heh. I've lived with the problem for years, and only occasionally tried to tackle it. I've only just now realised that it helps to close all other apps when running my blitz prog. Seems blitz sound is taking a lower prior than these apps. Doesn't completely solve prob though, only reduces severity. i.e. takes awhile for prob to occur. Doesn't completely destroy sound, only mildly grainy. <br><br></td></tr></table><br>
<a name="904481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >meemoe_uk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I've solved my own instance of the problem, I will try to describe.<br>I was using the 'playmusic, pausechannel' workaround used to avoid loading music during playtime. It seems that some musics misbehave if you do this. I'm not sure why, I suspect it's due to complexity of the music. The one which generated the problem for me was a 22 channel xm file.<br>Solution. Identify the musics which cause the prob and use stop channel instead of pausechannel. If the you want to stick with the music, you will have to resort to loading music while ingame.<br><br>For me the problem was tricky since the sound didn't break until the problem music was loaded and played, paused, some other music was loaded, played, paused, and the some other music was played. ?!? Crazy.<br><br>I'm not convinced this is the general solution to the bug for all users. It may crop up in other forms on different computers, since I think it's a 'loose variable' bug. If this doesn't work for you you might try reducing the number of musics loaded and stored with the playmusic,pausechannel workaround.<br><br>Here's the code I used to ID the bad music...<br><br><br><br>s1=PlayMusic(&lt;filename of problem music&gt;)<br><br>s2=PlayMusic&lt;filename of ok music1&gt;)<br>PauseChannel s2<br>s3=PlayMusic(&lt;filename of ok music2&gt;)<br>PauseChannel s3<br><br>sfx1=LoadSound(&lt;sfx to test for breakage&gt;)<br><br>MouseWait()<br>PauseChannel s1 ; Change this to STOPchannel to solve the bug!!!<br>ResumeChannel s2<br>a=PlaySound(sfx1)<br>While Not KeyDown(1)<br> If MouseHit(1) Then b=PlaySound(sfx1)<br>Wend <br><br>PauseChannel s2<br>ResumeChannel s3<br><br>While Not KeyDown(2)<br> If MouseHit(1) Then b=PlaySound(sfx1) ; sound breaks here!!!<br>Wend<br><br>End <br><br></td></tr></table><br>
<a name="1075713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TAS</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work, I was having the same problem switching between 17 background sounds. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
