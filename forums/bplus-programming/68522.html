<!DOCTYPE html><html lang="en" ><head ><title >Readline</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Readline</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Readline</a><br><br>
<a name="765579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been trying to create a level editor for my game, using data.  I have the data working flawlessly so I tried to add a save function. When I use a variable saved with the data, and apply is in place of the data, everthing works.  When I use the readline command to load the same string of data I recieve an error like "all files in data must be a constant"  So I made the variable loaded with the readline command a constant using the const command.  I got the same error.  Does anyone have any ideas of how to fix this error?  Thanks <br><br></td></tr></table><br>
<a name="765802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> could we get some code to test what you're talking about? <br><br></td></tr></table><br>
<a name="765913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the problem code.  It creates the error message "expression must be a constant".  There is other code, but it works.  The problem only occurs with the readline section. <br><pre class=code> 

Const filein = ReadFile("file.txt")
Const Read1$ = ReadLine(filein)
;Const Read2$ = ReadLine$(filein)
;Const Read3$ = ReadLine$(filein)
;Const Read4$ = ReadLine$(filein)
CloseFile( filein )
.level0
Data Read1$;1
Data "00000000000000000000000000000000000000000000000000";2
Data "00000000000000000000000000000000000000000000000000";3
Data "00000000000000000000000000000000000000000000000000";4
Data "00000000000000000000000000000000000000000000000000";5
Data "00000000000000000000000000000000000000000000000000";6
Data "00000000000000000000000000000000000000000000000000";7
Data "00000000000000000000000000000000000000000000000000";8
Data "00000000000000000000000000000000000000000000000000";9
Data "00000000000000000000000000000000000000000000000000";10
Data "00000000000000000000000000000000000000000000000000";11
Data "00000000000000000000000000000000000000000000000000";12
Data "00000000000000000000000000000000000000000000000000";13
Data "00000000000000000000000000000000000000000000000000";14
Data "00000000000000000000000000000000000000000000000000";15
Data "00000000000000000000000000000000000000000000000000";16
Data "00000000000000000000000000000000000000000000000000";17
Data "00000000000000000000000000000000000000000000000000";18
Data "00000000000000000000000000000000000000000000000000";19
Data "00000000000000000000000000000000000000000000000000";20
Data "00000000000000000000000000000000000000000000000000";21
Data "00000000000000000000000333000000000000000000000000";22
Data "0000000000000000G000003333300000000000000000000000";23
Data "3333333000033333Z333333333333333333333333333333333";24
Data "313F3DZ0000EZ333Z333333363333333333333333333333323";25
Data "3333333000033333Z333333333333333333333333333333333";26
Data "0000000000000000Z000003333300000000000000000000000";27
Data "00000000000000000000000333000000000000000000000000";28
Data "00000000000000000000000000000000000000000000000000";29
Data "00000000000000000000000000000000000000000000000000";30
Data "00000000000000000000000000000000000000000000000000";31
Data "00000000000000000000000000000000000000000000000000";32
Data "00000000000000000000000000000000000000000000000000";33
Data "00000000000000000000000000000000000000000000000000";34
Data "00000000000000000000000000000000000000000000000000";35
Data "00000000000000000000000000000000000000000000000000";36
Data "00000000000000000000000000000000000000000000000000";37
Data "00000000000000000000000000000000000000000000000000";38
Data "00000000000000000000000000000000000000000000000000";39
Data "00000000000000000000000000000000000000000000000000";40
Data "00000000000000000000000000000000000000000000000000";41
Data "00000000000000000000000000000000000000000000000000";42
Data "00000000000000000000000000000000000000000000000000";43
Data "00000000000000000000000000000000000000000000000000";44
Data "00000000000000000000000000000000000000000000000000";45
Data "00000000000000000000000000000000000000000000000000";46
Data "00000000000000000000000000000000000000000000000000";47
Data "00000000000000000000000000000000000000000000000000";48
Data "00000000000000000000000000000000000000000000000000";49
Data "00000000000000000000000000000000000000000000000000";50
</pre> <br><br></td></tr></table><br>
<a name="765925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok... first off, you can't change the value of constants that you declare.  The problem is that every time you run the program, windows loads the file into a different location so you can't declare filein as constant.  The same goes with read1$ because theoretically, the contents of the file could change each time the program is run.  So, you need to change all of the const commands in the program to global (for a variable), or just leave it out all together.  <br><br>Your next problem is that you don't understand just how the data command works and I suspect that you probably don't need it for your level creator at all.  You see, the data command can only be used to store large amounts of information that don't change whenever the program is run.  So data command lines are similar to const lines that store a lot of information.  In addition, you have to use more commands to access the information that you stored with the data commands.  Specifically, you should look into the restore and read commands if your still interested in using the data command.  <br><br>However, I don't believe you need to use this command because you said that you were building a save command into your program.  You usually save information into files and don't use the data command at all.  normally you would use the writeline, writebyte, write-whatever, commands to save information. <br><br></td></tr></table><br>
<a name="765934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> First of all, without the const commands I get the error "All files in data must be a constant"  YOu are right about not needing the data command for a level editor, but that is how my entire game is based, and I do not wish to change it.  The only reason that I am useing the readline command at all is so that I can change levels without recompiling my game.  There will be only one file like this, but I need to have it use data and work this way.  The file is not used as a save file, but the editor itself.  The editing is complicated and not ment to be efficient.  I need the editor so that I can distribute it without giving out the source code.  I am only writhing the engine, all the levels will be written by other people.  This is why I need it this way.  Thank you for your seggestions, but if you have any other ideas that would be greatly appreciated. <br><br></td></tr></table><br>
<a name="765939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >William Drescher</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe the problem lies in the first DATA call (Data Read1$). That is where your "All files in DATA must be a constant." You can't put a 'ReadLine' returned variable into a DATA command because it's not a constant, so the first one will have to be a default, like "01EF030201", or, when you save the level, make the first line a variable, insert it in the file, then, start reading from the data commands. <br><br></td></tr></table><br>
<a name="765943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >William Drescher</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a twist!<br><br>I re-ran the program changing the Const Read1$ = ReadLine("file.txt") to Global Read1$ = ReadLine("File.txt") and the error was "Data expression must be constant" and the cursor was put to the first line in the Data call. So I have now fully confirmed my previous post both to me, and the readers! :) <br><br></td></tr></table><br>
<a name="765953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you explain how to do that. <br><br></td></tr></table><br>
<a name="765978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This does most of what you are trying to do... I think.<br><br>Global filein = ReadFile("file.txt")<br>Global Read1$ = ReadLine(filein)<br>;global Read2$ = ReadLine$(filein)<br>;global Read3$ = ReadLine$(filein)<br>;global Read4$ = ReadLine$(filein)<br>CloseFile( filein )<br>Print "Read1="+read1<br>Restore level0<br>For I=1 To 49<br>	Read read1<br>	Print read1<br>Next<br>WaitKey()<br><br>.level0<br>Data "00000000000000000000000000000000000000000000000000";2<br>Data "00000000000000000000000000000000000000000000000000";3<br>Data "00000000000000000000000000000000000000000000000000";4<br>Data "00000000000000000000000000000000000000000000000000";5<br>Data "00000000000000000000000000000000000000000000000000";6<br>Data "00000000000000000000000000000000000000000000000000";7<br>Data "00000000000000000000000000000000000000000000000000";8<br>Data "00000000000000000000000000000000000000000000000000";9<br>Data "00000000000000000000000000000000000000000000000000";10<br>Data "00000000000000000000000000000000000000000000000000";11<br>Data "00000000000000000000000000000000000000000000000000";12<br>Data "00000000000000000000000000000000000000000000000000";13<br>Data "00000000000000000000000000000000000000000000000000";14<br>Data "00000000000000000000000000000000000000000000000000";15<br>Data "00000000000000000000000000000000000000000000000000";16<br>Data "00000000000000000000000000000000000000000000000000";17<br>Data "00000000000000000000000000000000000000000000000000";18<br>Data "00000000000000000000000000000000000000000000000000";19<br>Data "00000000000000000000000000000000000000000000000000";20<br>Data "00000000000000000000000000000000000000000000000000";21<br>Data "00000000000000000000000333000000000000000000000000";22<br>Data "0000000000000000G000003333300000000000000000000000";23<br>Data "3333333000033333Z333333333333333333333333333333333";24<br>Data "313F3DZ0000EZ333Z333333363333333333333333333333323";25<br>Data "3333333000033333Z333333333333333333333333333333333";26<br>Data "0000000000000000Z000003333300000000000000000000000";27<br>Data "00000000000000000000000333000000000000000000000000";28<br>Data "00000000000000000000000000000000000000000000000000";29<br>Data "00000000000000000000000000000000000000000000000000";30<br>Data "00000000000000000000000000000000000000000000000000";31<br>Data "00000000000000000000000000000000000000000000000000";32<br>Data "00000000000000000000000000000000000000000000000000";33<br>Data "00000000000000000000000000000000000000000000000000";34<br>Data "00000000000000000000000000000000000000000000000000";35<br>Data "00000000000000000000000000000000000000000000000000";36<br>Data "00000000000000000000000000000000000000000000000000";37<br>Data "00000000000000000000000000000000000000000000000000";38<br>Data "00000000000000000000000000000000000000000000000000";39<br>Data "00000000000000000000000000000000000000000000000000";40<br>Data "00000000000000000000000000000000000000000000000000";41<br>Data "00000000000000000000000000000000000000000000000000";42<br>Data "00000000000000000000000000000000000000000000000000";43<br>Data "00000000000000000000000000000000000000000000000000";44<br>Data "00000000000000000000000000000000000000000000000000";45<br>Data "00000000000000000000000000000000000000000000000000";46<br>Data "00000000000000000000000000000000000000000000000000";47<br>Data "00000000000000000000000000000000000000000000000000";48<br>Data "00000000000000000000000000000000000000000000000000";49<br>Data "00000000000000000000000000000000000000000000000000";50 <br><br></td></tr></table><br>
<a name="766021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll be a lot happier if you abandon this idea and use files rather than Data statements for the levels. Since the Data statements are part of the code you can't add or change levels without recompiling and distributing new executable programs.<br><br>But if you really want to put everything into Data then you could select which one to use like this:<br><br><pre class=code>
DataSet = 2

Select DataSet
	Case 1: Restore data1
	Case 2: Restore data2
	
	Default: ; do some kind of error handling
End Select

; Now ready to read from one of the data sets.
; In this case the next Read would produce "Second data set."


.data1
Data "First data set."

.data2
Data "Second data set."</pre> <br><br></td></tr></table><br>
<a name="766057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am already using code like that to change levels.  I had another idea that may work.  Is it possible to create an exe file of a piece of code, but not compile the include file in and then edit the include file to change the levels. <br><br></td></tr></table><br>
<a name="766065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I'm afraid that is not possible. All the files, including 'included' files are compiled into the .exe.<br><br>However, you can use a data file to store the level data.<br>So then you have the compiled .exe and a separate file that contains the level data.<br><br>Later on, when you want to publish your project, you could perhaps use a data packer to include all your data into a single file. <br><br></td></tr></table><br>
<a name="766238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is what I wish to do, use a data file.  It would be greatly apprecieated if you could post some sample code that would to that. <br><br></td></tr></table><br>
<a name="766248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's some code that might get it accross.  <br><br>fileout=WriteFile("lol.txt");Creates or Recreates a file for writing<br>WriteLine(fileout,"Hello World!") ;Writes one line of text<br>WriteString(fileout,"ABCDEFGHIJKLM");Stores a standard string variable, the characters are ended with four bytes<br>WriteInt(fileout,131);Integer, the standard numeric variable.  Max of 2147483647 Minimum of -2147483648<br>WriteShort(fileout,100);Two bytes, max of 65535<br>WriteByte(fileout,10);Single byte, max of 256<br>CloseFile(fileout);Moves the file from memmory to the hard drive<br><br>filein=ReadFile("lol.txt")<br>Print ReadLine(filein)<br>Print ReadString(filein)<br>Print ReadInt(filein)<br>Print ReadShort(filein)<br>Print ReadByte(filein)<br>CloseFile(filein)<br>WaitKey()<br><br>Just remember not to mix up the order that you read or write from/to the file.  If you do, then the data will appear corrupted.  Also, if you open a file for both reading and writing at once, without closing the file first, the file's data will be lost. <br><br></td></tr></table><br>
<a name="766276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please use codeboxes ( [code][/code] or [codebox][/codebox] ) <br><br></td></tr></table><br>
<a name="766277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> That generates the same problem, how can you get objects loaded from a file into a data statement? <br><br></td></tr></table><br>
<a name="766279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm... you don't.  Like I said, data statements are <b>constant</b>, which means that they can't be changed unless you recompile the program from the source code. <br><br></td></tr></table><br>
<a name="766289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> so what exactly is keeping you from just loading this into an array or something like that? <br><br></td></tr></table><br>
<a name="766336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have already written an engine for data. <br><br></td></tr></table><br>
<a name="766362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> well yeah, I have to agree that it kindof sucks that you have to change it, but from my experience that should be a minor change if you used functions to encapsulate your code well. <br><br></td></tr></table><br>
<a name="766372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops, I didn't use functions. <br><br></td></tr></table><br>
<a name="766394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's how I'd do it... Feel free to write your own.  It would probably be better for you to do that so you can get a feel for banks.  Also, remember that a bank is just a section of memory, so you have to count in bytes and this also means that there is no REALLY good way to get to the data unless you treat it like Blitz treats an array.  I used banks because I'm pretty sure that you can change the sizes of blitz basic arrays easily to accommodate for levels of different sizes.  <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle("Level Example")
Graphics 800,600,16,2
SetBuffer(BackBuffer())
SeedRnd(MilliSecs())

;Sizes of Various data types in bytes
Const IntegerSize=4
Const ShortSize=2

MyLevel=GenRandLevel(10,5)
If Not MyLevel Then RuntimeError("Could not create level!")
If Not writelevel("test.lvl",MyLevel) Then RuntimeError("Could not write level!")
FreeBank(MyLevel)
MyLevel=loadlevel("test.lvl")
If Not mylevel Then RuntimeError("Could not reload level!")
Cls
DrawLevel(MyLevel)
Flip
WaitKey()

Function GenRandLevel(xsize,ysize) ;Generates a random level and stores it into a bank
	levelbank=CreateBank(2*IntegerSize+xsize*ysize*shortsize);2 integers plus a rectangle of shorts to store the pieces
	If Not levelbank Then Return 0
	;Save the size of the level (maximum for both x and y is 2^16-1 [the size of the positive portion of an integer])
	PokeInt(levelbank,0,xsize)
	PokeInt(levelbank,IntegerSize,ysize)
	DebugLog("Level Sizes are: " + xsize +","+ysize) ;Just for a little information
	For IcountRands=IntegerSize*2 To (ShortSize*xsize*ysize)+IntegerSize*2-1 Step ShortSize
									;skip the first 8 bytes due to the level sizes being there
									;use step 2 because a short takes up two bytes
									;Subtract one because it is an offset which start counting at 0
		PokeShort(levelbank,IcountRands,Rand(0,4)) ;A short allows for 2^16-1 different pieces
	Next
	Return levelbank
End Function

Function drawlevel(levelbank) ;Draws the generated level
	;Get the Level Sizes
	xsize=PeekInt(levelbank,0)
	ysize=PeekInt(levelbank,IntegerSize) ;Skip IntegerSize number of bytes to get past the x coordinate
	DebugLog("Drawing Level of size " + xsize +"," + ysize) ;Again, just for info
	If BankSize(levelbank) &lt;&gt; xsize*ysize*2+8 Then RuntimeError("Level Corrupted!") ;Make sure the the file loaded ok
	For ycoord=0 To ysize-1 ;Start counting at 0 because we don't want to skip the first row of pieces
		For xcoord=0 To xsize-1 ;start counting at 0 because we don't want to skip the first piece
			piecetype=PeekShort(levelbank,ShortSize*(xcoord+ycoord*xsize)+IntegerSize*2)
			;Draw the Pieces
			Select piecetype
			Case 0
				Text (xcoord)*15,(ycoord)*15,"A"
			Case 1
				Text (xcoord)*15,(ycoord)*15,"B"
			Case 2
				Text (xcoord)*15,(ycoord)*15,"C"
			Case 3
				Text (xcoord)*15,(ycoord)*15,"D"
			Case 4
				Text (xcoord)*15,(ycoord)*15,"E"
			Default
				;This is for pieces that we don't have images for
				Text (xcoord)*15,(ycoord)*15,"X"
				DebugLog("Unknown piece: " + piecetype)
			End Select
		Next
	Next
End Function

Function loadlevel(loadfile$)
	levelhandle=ReadFile(loadfile)
	If Not levelhandle Then Return 0
	levelbank=CreateBank(FileSize(loadfile))
	ReadBytes(levelbank,levelhandle,0,FileSize(loadfile))
	CloseFile(levelhandle)
	Return levelbank
End Function

Function writelevel(savefile$,levelbank)
	levelhandle=WriteFile(savefile)
	If Not levelhandle Then Return False
	WriteBytes(levelbank,levelhandle,0,BankSize(levelbank))
	CloseFile(levelhandle)
	Return True
End Function
</textarea> <br><br></td></tr></table><br>
<a name="766481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is great!  It will take a while, but I think I may be able to get it to work, but I have one question.  How do you read the lvl and edit it without being able to read bites.  Otherwise that is great.  Thank you. <br><br></td></tr></table><br>
<a name="766483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> what do you mean?  You can use peekshort to read the information from the bank, once you have loaded it.  You can also use pokeshort (as seen in genrandlevel) to write them.  Also, I said that you can't read and write to files at the same time, banks are a different story <br><br></td></tr></table><br>
<a name="766556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I ment can you read and edit the level with a program like notepad. <br><br></td></tr></table><br>
<a name="766591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use readline/writeline to read/write data to the file, you can edit the file in notepad. <br><br></td></tr></table><br>
<a name="766596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alaric</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> you just have to make sure that you select bytes to represent your level that can be seen inside of notepad.  By the way, you can open notepad for them with execfile("notepad.exe"). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
