<!DOCTYPE html><html lang="en" ><head ><title >does CopyRect clip?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >does CopyRect clip?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >does CopyRect clip?</a><br><br>
<a name="210639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> For example, if the source rect is bigger than the destination rect. Or do I have to do the clipping in-code, myself?<br><br>Cheers <br><br></td></tr></table><br>
<a name="210967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Curtastic</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You dont pass a size for the destination. <br><br></td></tr></table><br>
<a name="211148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know you dont pass a size for the destination buffer but what if the destination buffer isn't big enough to hold a complete copy of the source buffer, e.g.<br><br>...<br>tex = CreateTexture(128,128)<br>...<br>CopyRect 0,0,800,600,0,0,FrontBuffer(),TextureBuffer(tex)<br>...<br><br>Or, what I'm more interested in is what happens if you offset source rect in the dest rect, e.g.<br><br>...<br>tex = CreateTexture(800,600)<br>...<br>CopyRect 0,0,800,600,10,10,FrontBuffer(),TextureBuffer(tex)<br>...<br><br>Does the copy get clipped to the confines of the dest buffer or not. Anyone know?<br><br>Thanks <br><br></td></tr></table><br>
<a name="216042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabbede</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it should be clipped automatically...<br>Of course, I'm not 100% sure but when I wrote something like your example here above some days ago I didn't come up against any error! <br><br>Bye! <br><br></td></tr></table><br>
<a name="216150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> When in doubt, try it out......... <br><br></td></tr></table><br>
<a name="216774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dabbede: No, I haven't come across any probs with it either but I just think it's better to be safe rather than sorry. :)<br><br>Sir Gak: That's the problem: how do you check to see if clipping is taking place or not? <br><br></td></tr></table><br>
<a name="227266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oldefoxx</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good question.  What happens when you try to copy more data into an area of memory than allowed for it?  The answer is, either you check for limits in both the source and destination, so that you only copy as much as permitted, or you don't and in copying too much you cause a buffer overflow/overwrite condition.<br><br>Since array structures are usually organized in consecutive memory areas, it is sometimes possible to write to one element and detect if other elements adjacent to that one are altered.  But you also have an issue as to which order the information is being copied in - if copying from a lower memory area to a higher one, some routines copy from the high order byte backwards, and from the low order byte upwards when copying to a lower area of memory.  The idea is to allow the data to not overwrite itself incorrectly if the upper and lower bounds of the two areas overlap.  In order to achieve the expected effect, some copy routines adjust the end of the copy area offsets beforehand to maintain a trailing edge clipping effect, while others may actually cause a leading edge clipping effect if the copy process ran from high end downwards.<br><br>Of course if you use a really large source, and attempted to copy to a really small destination, you might induce a memory access violation situation if the underlying code attempts this without checking limits.  you could in effect be trying to write outside the area permitted to the program.<br><br>But to see if clipping does occur without necessarily running to those extremes, you should be able to try and copy from a large buffer to s small one, then copy from the small buffer back to the large one, but for each copy you specify the size of the large buffer, and you clear it beforehand.  You would then get one of three results:<br><br>(1)  All the information from the large buffer is returned to it.  This indicates that the information was not clipped when you copied it to the small buffer, in which case you were probably just lucky that you did not encounter a major problem.<br><br>(2)  Only the information from the small buffer is copied back, and the rest of the large buffer is still set to nil data (all zeros, for instance).  This indicates that the copy process is pretty smart, and not only clipped in writing to the small buffer, but equally adept in not copying back information outside its area.<br><br>(3)  You get back the contents of the small buffer, followed by garbage data or data that does not reflect what was in that same area previously in the large buffer.  This is a probable result, and means that the information was clipped properly when copied to the smaller buffer, but that the copy process had no issues with copying over data outside the scope of the small buffer when it's upper limit was exceeded. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
