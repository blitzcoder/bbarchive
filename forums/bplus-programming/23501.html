<!DOCTYPE html><html lang="en" ><head ><title >How to free music handle with B+?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to free music handle with B+?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >How to free music handle with B+?</a><br><br>
<a name="242962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assign a backgroundmusic with:<br><br>      musicchn=PlayMusic(MusicDir$+musicfiles(song_no)) <br><br>When I need to change music I stop it and free up the memory used:<br><br>      StopChannel musicchn <br>      FreeSound musicchn   <br><br>This works perfect with B3D 1.83, but with B+ the program crashes and I get the message "Invalide sound handle".<br><br>As there is nothing like "Freemusic" what can I do to make it work in B+ 1.35?<br><br>Notes:<br>- No, I can't use Loadsound as some formats are not supported!<br>- No, I can't just play new music files as the arising  memory leak will crash the pc!<br><br>*looks helpless and waits for the enlightment* <br><br></td></tr></table><br>
<a name="243053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure PlayMusic does not stream the music from the device, therefore the only memory that is really allocated for it is the handle (which means you don't need to "free" anything)?<br><br>Remember that FreeSound is designated as a counterpart to LoadSound, not PlayMusic.<br><br>This makes sense to me, anyway.  If you want to verify it, load up a memory usage watcher and see what happens when you do use the different commands. <br><br></td></tr></table><br>
<a name="243059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks soja. I just leave out the freesound command.<br><br>BTW: Does B+ load up the vid mem dynamically, it seemed so to me as the memory usage was not that constant as under B3D 1.83... <br><br></td></tr></table><br>
<a name="243134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't tell you off the top of my head... though I wouldn't be surprised, since the recent engine was written from scratch. <br><br></td></tr></table><br>
<a name="243140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Power of Blitz... <br>I would think so cause the same code compiled with b3d has a more static memory consumption.<br><br>Anyway, I took out all freesounds and it works now! :) <br><br></td></tr></table><br>
<a name="243321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, B+ has three ways of storing and managing gfx.  As for the LoadMusic thing, obviously if you're using midis or modules their memory consumption would be quite large if you've loaded a few of them...  So this is still a valid issue.  I just assumed they would be cleared from mem when StopMusic is called. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
