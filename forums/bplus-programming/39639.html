<!DOCTYPE html><html lang="en" ><head ><title >the main loop - does everyone do the same ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >the main loop - does everyone do the same ?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >the main loop - does everyone do the same ?</a><br><br>
<a name="442350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm new to all this stuff so was wondering if I'm doing things correctly in my main loop<br><br>Function main_loop ()<br><br> While Not keyhit(1)<br><br>  Update_Game_Timers()<br>  Get_Player_input()<br>  Check_Sprite_to_Screen_Collision()<br>  Check_Sprite_to_Sprite_Collision()<br><br>  WaitTimer(screentimer)  ; timer runs at 60Hz<br>  Draw_Screen()<br>  Draw_Sprites()<br>  <br> Wend<br><br>End Function<br><br><br><br>As you can see from the above code I have a screentimer set at 60, so the screen is redrawn at 60Hz. Is this the best way to attain smooth graphics or am I using an incorrect method ? <br><br></td></tr></table><br>
<a name="442366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moore</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I would say no, it does not utilize the full power of the computer, it limits frame rate try this:<br><br>say you want your gameObj to move across the screen at 100 pixels per second<br><br>speed = 100<br><br>newTime = Millisecs()<br>timeElapsed = newTime - OldTime<br>x = x + (speed/1000) * timeElapsed<br>oldTime = newTime<br><br>This allows the game to run at the optimal cycles while the gameObj moves at a constant rate. Whether you achieve 10 frames per sec or 200 the gameObj will always move at 100 pixels per sec. <br><br></td></tr></table><br>
<a name="442368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't use timers.  Delta time's much more useful in the long run for frame timing -- tutorial on delta time <a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=gamemorduun03212002.html" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="442370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys will definitely look into delta time<br><br>At the moment I want to get the main loop correct - just discovered vwait : flip false. Is it preferrable to use this?<br><br>What is happening during vwait : flip false ? <br><br></td></tr></table><br>
<a name="442384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dax Trajero</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> mordun, thanks for that Delta Time tutorial - certainly a more efficient way to run my code.<br><br>My question is this - regardless of whether I use delta time or Create Timer / Wait Timer methods...<br><br>...assuming my user has disabled the VSYNC on their video card, which means its best to not use VWAIT...<br><br>...if I use VWAIT : FLIP FALSE then how does this manage to sync my code with the users video card ? <br><br></td></tr></table><br>
<a name="442449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't ever use VWAIT : FLIP FALSE.  It hoses on certain drivers and causes unmanageably bad flickering.  You're safest using Flip True.  If the user has vwait notification turned off then delta time will still manage the framerate properly. <br><br></td></tr></table><br>
<a name="442667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> One potential problem with delta timeing is the millisec value will eventualy "roll over" back to zero...which in turn can lead to a game update basied upon a huge negative elapsed time...Of course this is very rare (like once every month or so if the PC is left continuesly on)...but the result can be pretty devistateing if not taken into account.<br><br>A simple check of elapsed time (if elapsedtime&gt;0 then continue to update the game) is all you really would need...Sure it could lead to a skipped update when it occurs, but that is better then the player suddenly finding themselves and other game objects thrown across the map because elapsed time, used to calculate movements, winds up being some huge negative number during a update....so keep it in mind<br><br>also you really may not want your application to monopolise the CPU if you want it to live happily with a multitasking enviroment like Windows...course there are better functions then Blitz timers that are suited to maximizeing your use of the timeslice granted by the OS. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
