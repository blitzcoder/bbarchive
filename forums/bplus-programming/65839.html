<!DOCTYPE html><html lang="en" ><head ><title >Help Please</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help Please</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Help Please</a><br><br>
<a name="735528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> SetBuffer DesktopBuffer()<br>Global imagebackground=CreateImage( 773,600 )<br>GrabImage imagebackground,GraphicsWidth()/2-386,GraphicsHeight()/2-300<br><br>windowx = (GraphicsWidth()/2-(773/2))<br>windowy = (GraphicsHeight()/2-(600/2)) <br>window = CreateWindow ("Game",windowx,windowy,773,600,Desktop(),0)<br>canvas = CreateCanvas (0, 0, ClientWidth (window), ClientHeight (window), window)<br>SetGadgetLayout canvas, 1, 1, 1, 1<br>SetBuffer CanvasBuffer (canvas)<br><br><br>While Not KeyHit(1)<br>DrawBlock imagebackground,0,0<br>FlipCanvas (canvas)<br>Cls<br>Wend <br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>;-----------------------------------<br>The above code is a simplified version on code that creates a "transparent" background for my app.  I was wondering if anyone had an idea of a way to make it update.  Currently if you leave the window and change anything behind the app, nothing lines up in the screenshot anymore.  So if anyone has ideas of how to make it update they would be gladly appreciated. <br><br></td></tr></table><br>
<a name="735847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andres</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you should try changeing the CreateImage() flags? <br><br></td></tr></table><br>
<a name="735971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How So? <br><br></td></tr></table><br>
<a name="736343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, to get it to update, you need to grab the desktop image repeatedly in your code, instead of just loading once. So like:<br><pre class=code>While Not KeyDown(1)

SetBuffer DesktopBuffer()
Global imagebackground=CreateImage( 773,600 )
GrabImage imagebackground,GraphicsWidth()/2-386,GraphicsHeight()/2-300
windowx = (GraphicsWidth()/2-(773/2))
windowy = (GraphicsHeight()/2-(600/2)) 
window = CreateWindow ("Game",windowx,windowy,773,600,Desktop(),0)
canvas = CreateCanvas (0, 0, ClientWidth (window), ClientHeight (window), window)
SetGadgetLayout canvas, 1, 1, 1, 1
SetBuffer CanvasBuffer (canvas)
DrawBlock imagebackground,0,0
FlipCanvas (canvas)

Wend</pre>The only thing is that this will cause moderate to major slowdown on most PCs. To combat this problem, try creating some code that only updates the background if the window is moved. <br><br></td></tr></table><br>
<a name="736670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't seem to get it to work correctly.  That was is just creates lots of windows.  When I change the code to this:<br><br><br>windowx = (GraphicsWidth()/2-(773/2))<br>windowy = (GraphicsHeight()/2-(600/2)) <br>window = CreateWindow ("Game",windowx,windowy,773,600,Desktop(),0)<br>canvas = CreateCanvas (0, 0, ClientWidth (window), ClientHeight (window), window)<br>SetGadgetLayout canvas, 1, 1, 1, 1<br>imagebackground=CreateImage( 773,600 )<br><br><br><br><br>While Not KeyDown(1)<br><br>SetBuffer DesktopBuffer()<br>GrabImage imagebackground,GraphicsWidth()/2-386,GraphicsHeight()/2-300<br><br>SetBuffer CanvasBuffer (canvas)<br>DrawBlock imagebackground,0,0<br>FlipCanvas (canvas)<br><br>Wend<br><br><br><br>The window stays black and nothing happens, what should I do? <br><br></td></tr></table><br>
<a name="736920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's because you're not actually copying anything off of the desktop buffer; GrabImage doesn't do that. My suggestion: investigate the CopyImageRect() command. <br><br></td></tr></table><br>
<a name="737287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That command doesn't exist. <br><br></td></tr></table><br>
<a name="737486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh. It exists in Blitz3D's 2D command set, so I thought B+ would have it. <br><br></td></tr></table><br>
<a name="737557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Petron</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well then any other suggestions <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
