<!DOCTYPE html><html lang="en" ><head ><title >Anyone see anything wrong with this code?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Anyone see anything wrong with this code?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Anyone see anything wrong with this code?</a><br><br>
<a name="523635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This works:<br><br><pre class=code>
X1 = BOBX#(BOB_MenuItem(Loop)) - BOBWidth(BOB_MenuItem(Loop))/2
Y1 = BOBY#(BOB_MenuItem(Loop)) - BOBHeight(BOB_MenuItem(Loop))/2
					
X2 = BOBX#(BOB_MenuItem(Loop)) + BOBWidth(BOB_MenuItem(Loop))/2
Y2 = BOBY#(BOB_MenuItem(Loop)) + BOBHeight(BOB_MenuItem(Loop))/2
					
If (Mouse_X &gt;= X1) And (Mouse_X &lt;= X2) And (Mouse_Y &gt;= Y1) And (Mouse_Y &lt;= Y2)
</pre><br><br><br>But this won't work:<br><br><pre class=code>
If BOB_RectOverlap(BOB_MenuItem(Loop), Mouse_X, Mouse_Y, 1, 1)

; -----------------------------------------------------------------------------------------------------------------------------------
; This function returns TRUE if the bounding rectangle of a BOB overlaps the specified region of the screen.
; -----------------------------------------------------------------------------------------------------------------------------------
Function BOB_RectOverlap(ThisBOB.BOB, Rect_X, Rext_Y, Rect_Width, Rect_Height)
	
	X1 = Floor(ThisBOB\Position_X#-ThisBOB\Handle_X#)
	Y1 = Floor(ThisBOB\Position_Y#-ThisBOB\Handle_Y#)
	
	Return ImageRectOverlap(ThisBOB\Image, X1, Y1, Rect_X, Rect_Y, Rect_Width, Rect_Height)

End Function
</pre><br><br><br>Anyone got any ideas why this isn't working?  ImageRectOverlap isn't supposed to take transparent pixels into account, and even if it did, the image I'm checking against is mostly opaque pixels.  <br><br>Increasing the width and height of the rectangle I'm testing the image against has no effect, so it is not a bug with rectangles that have a 1x1 size.<br><br>I've checked the data, the image width and height are being returned properly in the function.  The handle coordinates are in the center of the image as expected.  (Note I'm not using the image handle stuff Blitz has, the handle I refer to are the offsets I add to the position of the image.)<br><br>I've tried clicking all over the screen to see if maybe something is messed up and I can hit something, but I hit nothing.  It is as if the ImageRectOverlap command does not work.<br><br>I'm sure I've just made some stupid mistake though, I am tired. <br><br></td></tr></table><br>
<a name="523651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see anything wrong with it.  Perhaps your Position_X# (or Y#)  or Handle_X# (or Y#) or Mouse_X (or Y) aren't holding the correct values? <br><br></td></tr></table><br>
<a name="523669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would have thought ImageRectOverlap would already take into account the image handle. <br><br></td></tr></table><br>
<a name="523677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the function definition - "Rext_Y" <br><br></td></tr></table><br>
<a name="523717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Falken:<br>That was it.  I figured it out this morning while the forums were down. :-)<br><br>STIPUD TPYOS! <br><br></td></tr></table><br>
<a name="523718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OH, and I would just like to thank every person who has ever bought my BOBS system for fixing this bug on their own and not reporting it to me, since it has been in there since day 1. :-) <br><br></td></tr></table><br>
<a name="523720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skid:<br><br>"I would have thought ImageRectOverlap would already take into account the image handle."<br><br><br>My BOB system until recently didn't allow you to use image handles except with normal masked or non-masked blitting.  <br><br>I just added handles to the system though, so now instead of using image handles, you specify the BOB handles.  I have to do this because the BOB system allows you to blit with all sorts of different blending modes and alpha.  It needs to be able to do that manually, and handle clipping.  Blitz doesn't provide a way to get the location of the handle you have specified for an image, so I can't get the handle.  And it makes more sense to specify handles on a per BOB basis rather than a per image basis since you may use the same image on more than one BOB. <br><br></td></tr></table><br>
<a name="524229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The fact that the BB IDE doesn't complain about typos and is happy to use an undeclared variable with value 0 has caused me sooo much wasted time, it's a real bummer. <br><br></td></tr></table><br>
<a name="524465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LineOf7s</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grey, try this:<br><br><a href="http://www.quickiegames.com/tools/preprocessor/features.html" target="_blank">http://www.quickiegames.com/tools/preprocessor/features.html</a><br><br>Featuring, amongst other things:<br><div class="quote"> Option Explicit <br>Option Explicit is enabled by including the preprocessor directive "#Option Explicit" at the top of your source code. It will give an error whenever a variable is implicitly defined. <br></div><br><br>Free, too.  Good ole Micky Richtenfrankensteiner.  :o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
