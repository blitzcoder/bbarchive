<!DOCTYPE html><html lang="en" ><head ><title >Problem with ImagesCollide</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with ImagesCollide</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Problem with ImagesCollide</a><br><br>
<a name="221199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi everybody,<br><br>I have a problem with ImagesCollide: sometimes it gives error "Illegal memory address". <br><br>It is big problem for us, because this error occurs more or less regulerely in 10% of runs.<br><br>As I understand, it is somehow related to video hardware. Does anybody know how to deal with such problem?<br><br>Thanks if you can hekp.<br><br>Mikle. <br><br></td></tr></table><br>
<a name="221205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have had this problem, when testing a Blitz creation in debug mode. It usually occurred when I had exited the application by closing the window rather than letting it stop/end 'naturally'<br><br>Perhaps some memory is used and certain data is residual in a pagefile or something making less free space for when you re-run the app. <br><br></td></tr></table><br>
<a name="221231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,<br><br>The problem is that the error occurs in non-debug mode, when I check intersection of mouse cursor with an image. When the program is simple enough and image collision checking is not used heavily, everything works fine. But when some threshold of complexity is crossed, the error occurs. Either this is related to disk swap or video memory usage, I don’t know.<br><br>When I worked with 8-mb video card under Win95 the problem appeared much more frequently. <br><br>Now I have GeForce2-64 and work under XP, but the error appears from time to time. I work on Duron-630 with 128 Mb. <br><br>Mikle. <br><br></td></tr></table><br>
<a name="221248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe that this problem comes up if you make lots of images at run-time which is quite inefficient. It is also due to the way that Blitz3D and Blitz2D handled images in memory. BlitzPlus has a "flag" for images which allows them to be more stable, if you really must create and free images on the fly at runtime. Like I said though, I don't recommend it. <br><br></td></tr></table><br>
<a name="221264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> probably you try to check a image that isnt avaible / is not loaded. i think this error occurs if you check for an image that isnt avaible.<br><br>do you check through serveral images in a loop? have you deleted some images before? <br><br></td></tr></table><br>
<a name="221334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tiger</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/bbs/posts.php?topic=20054" target="_blank">Click here!</a> <br><br></td></tr></table><br>
<a name="221340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> To Jochen Heizmann:<br><br>Thank you.<br><br>Yes, I check through several images in a loop. Say, I have 20 buttons with complex form (e.g. animal figures) on the scene and I need to activate one of them (change its frame) when the cursor touches it. In this case, as you understand, I cannot use ImagesOverlap command.<br><br>Usually I try to avoid ImagesCollide command, but in some cases it is not possible.<br><br>Maybe, I have to formulate the problem clearly.<br><br>=================<br><br>When used in cycle, ImagesCollide command SOMETIMES causes memory allocation error while working with THE SAME set of images.<br>All images are “correct” (that is, exist and are created outside of checking loop). <br><br>When many images are loaded into memory (say, 20-30 mb of graphics), probability of the error increases.<br><br>Usually this error occurs in one of 10-20 runs of the same program, on old video cards (2-3 year old) more probably than on new ones (say, GF2 with 64 mb). It seems that on professional video cards, specially designed for 2d-applications (Matrox), this problem does not occur (but I am not sure).<br><br>=================<br><br>Mikle. <br><br></td></tr></table><br>
<a name="221341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> To cyberseth:<br><br>Sorry, what do you mean under “runtime”? Sometimes I do create a lot of rotated images on fly, but not in the main program cycle. Or you meant that ALL images should be only loaded?<br><br>By the way, you touched the point I always wanted to clear up (about the way that Blitz3D and Blitz2D handle images). Could you tell me where I can get some information about it and what are the advantages of Blitz+ in this sense?<br><br>Thanks,<br><br>Mikle. <br><br></td></tr></table><br>
<a name="221375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I mean that you should always refrain from creating images during the game loop if possible, rather than at the beginning of the game. Either use one image over and over again for "temporary" images. (Where you'd create an image, do stuff to it, then free it. Instead use the same image in memory over and over again.) And load all media at the beginning.<br><br>Check the BlitzPlus docs for LoadImage, LoadAnimImage and CreateImage commands:<br><br>LoadImage( filename$[,flags] )<br><br>Where flag is of the following:<br>1 : managed<br>2 : dynamic<br>4 : scratch<br><br>"dynamic" is the type used in Blitz3D/2D and is the fastest type of image to write to directly. But it's often a bit volatile and can disappear if you create and free lots of images during the game loop. "managed" images get round this by being very stable and they also don't free up if you change graphics modes. The downside is that they are slower. "scratch" images are stored in RAM instead of VRAM so they are the slowest by far, but as they don't take up any VRAM you can have more of them.<br><br>Personally I think it's a bit odd that the flags should be 1, 2, and 4 instead of 3. You only use ONE flag, not a combination.<br><br>One last thing. You shouldn't use ImagesCollide for checking the mouse over buttons. You only want to check if the "tip" of the mouse is over a button, not the whole mouse image. So instead, you should use ImageRectCollide(image, x, y, 0, MouseX(), MouseY(), 1, 1) <br><br></td></tr></table><br>
<a name="221439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> To cyberseth,<br><br>I usually do just as you say. As I have found, the problem is not in ImagesCollide, but in multi-framed images. See my &lt;a href=http://www.blitzbasic.com/bbs/posts.php?topic=20054 target=_blank&gt; post to BlitzBugs forum.<br><br>Thanks for tip with mouse. I’ll use it when possible.<br><br>Mikle. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
