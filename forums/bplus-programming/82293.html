<!DOCTYPE html><html lang="en" ><head ><title >Of kings, knights, and musicals...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Of kings, knights, and musicals...</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Of kings, knights, and musicals...</a><br><br>
<a name="927554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Actually, this isn't about the musical <i><a href="http://en.wikipedia.org/wiki/Chess_(musical)" target="_blank">Chess</a></i>; it only came to mind because members of <a href="http://en.wikipedia.org/wiki/ABBA" target="_blank">ABBA</a> wrote the music.)<br><br>I've just designed graphics for a chess set, and naturally I want to make a chess game with them. This would be simple enough if the pieces could jump and capture other pieces of either color, but as only the Knight can do the former and no piece can do the latter, I need help.<br><br>I'm considering using a group of tiles, each with a separate x and y as well as "space x" and "space y" to indicate its position on the board.<br><br>I think I know how I can program in most of the movements -- even the Knight's. However, Pawn capturing movements are unusual, especially the <i>en passant</i> capture. <b>Question 1: How could you program in Pawn capture moves?</b> (For the normal capture, how do you determine whether a "man" (a piece or Pawn) is in that space?)<br><br><b>Question 2: How do you program in check?</b> Either the King must be moved, or something must be moved to block the attack, but how can you force the player to do so?<br><br><b>Question 3: How do you prevent jumping in non-Knights?</b> In other words, if there is another piece in the way, how do you prevent the piece from being moved <i>past</i> the other piece?<br><br>Also, about a couple of the rules that might make this more or less playable:<br><b>Gameplay Question 1: When a Pawn reaches the end of the board, does it always become a Queen (as I've always played it), or is the player entitled to choose what to make it (as I've heard it played)?<br><br>Gameplay Question 2: Should a Pawn be able to move two spaces on its first turn, and should Pawns be able to capture <i>en passant</i>?</b> These seem like they might be a little complicated to code, but they're probably worth it.<br><br>I guess that's probably enough to start. Sorry if I'm being a little too long-winded.<br><br>Thank you!<br>Tomas Khan <br><br></td></tr></table><br>
<a name="927603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> As for the chess questions, you can choose any piece in place of the queen, but this is rare because the queen is the best piece, and having the pawn move double on  first turn and en passant capture is crucial to game strategy so it should be implemented.<br><br>As for the rest of the stuff you're dealing with paths of the piece and checking what pieces are in the way.  I would think the best way to do this would be an array, then create a list of x and y 'coordinates' per space per move then systematically check to see if each space is occupied, then follow a procedure according to what is there.<br><br>I imagine programming an effective chess AI with multiple strategies and the ability to adapt would be quite difficult, hope your up to the challenge.  As far as the programming part though, that's what I would do. <br><br></td></tr></table><br>
<a name="927606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, my immediate goal is to get a two-player game going. We don't know what we've done with our physical chessboards, and so this could be the next best thing. I knew it would be hard to make an AI, and in any case I wouldn't be making Deep Blue, but right now programming it to play against me is a secondary goal, though one I would have to accomplish if I ever released it.<br><br>I imagine that to let the player choose, you would add in a loop where you would show the possible pieces somewhere on the screen, preventing any interference or selection of other pieces?<br><br>I have an idea for moving double on the first move, but I'm not so sure with the en passant. How would you ensure that en passant would only be allowed if the enemy Pawn had <i>just</i> passed over the attacked square?<br><br>Meanwhile, about the paths... the King, Knight and Pawn will do fine, as their paths can't be blocked (well, except the double-moving Pawn, but I think I know how I could solve that). The Bishop, Rook, and Queen, however, could be a little harder.<br><br>Oh, and I forgot castling. Hmm.<br><br>Thank you! <br><br></td></tr></table><br>
<a name="927613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David Boudreau</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah king paths can be blocked for castling, and line-of-check (can't legally castle through nor move into check).  Standard computer chess UI for castling requires the player to move the king first; your program accepts or not the legal 2-space king move, i.e. accepting both the conditions of path (not done through a line of check), the castling rook and king have not moved before, and that there are no other pieces in the line of castling (in between the two pieces).<br><br>Pawns must be promoted on their 8th rank to any piece besides a king or another pawn.<br><br>Recognize draws would be good too: stalemates, and king vs. any of the following: king and bishop, king and knight.  king and 2 bishops has a limit like 60 moves, same for king with knight and bishop.  usually though the "repeat" rule comes into effect before then:  can't have same position for 3 straight moves in a row, that is automatic condition for a draw as well.<br><br>Definitely go with an array(8*8) at the very least, and approach the structure conceptually (and be able to read ahead to the next move to determine each potentially legal move to prevent illegal moves)  chess seems like a big huge battle during play but the field is not that big.  It's relatively easy to program as it is turn-based, and each of the 64 squares is kind of like a "pixel" you'd want to"collision detect" in a faster-paced game. <br><br></td></tr></table><br>
<a name="927626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David Boudreau</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Question 1: How could you program in Pawn capture moves?<br><br>Various ways- this will be the fun of making the program-- and don't worry so much about whatever method you start with, because in a turn-based game like chess you could have it be very inefficient and still perfectly playable, compared to a fast-paced FPS action game.<br><br>Question 2: How do you program in check? Either the King must be moved, or something must be moved to block the attack, but how can you force the player to do so?<br><br>Is the king in any opposing piece's attacking squares?  then he's in check.  don't force the player to do anything except "not make illegal moves".  You simply allow only moves that are legal.  Just think it through logically.<br><br>When I first learned chess notation, I used the traditional method which was much worse than a much simpler, better notation:  just write Square coordinateFrom, a dash, then SquareCoordinateTo.  No need to even record what piece it was.  Keep that in mind.  It doesn't matter so much what kind of piece takes what kind of piece.  Any piece from a given square has a finite number of possible squares for its next move.<br><br>oh and if you add any extra features, I highly encourage you to add a review type of branching system so players can review their games and go off in different nodes, then return to the main branchline-- that really needs to be encouraged more in chess players, reviewing games.  Don't invest your time in a thinking game like chess only to forget or ignore the critical moves right after.<br><br><br>Question 3: How do you prevent jumping in non-Knights? In other words, if there is another piece in the way, how do you prevent the piece from being moved past the other piece?<br><br>It might be a function called AnotherPieceInTheWay() that returns true or false and called at the top of an if statement:<br><br>If AnotherPieceInTheWay() = True Then PreventMove = True<br>; prevent illegal move<br><br>and in the function, check each square in the array between move-from square and move-to square.<br><br>Gameplay Question 2: Should a Pawn be able to move two spaces on its first turn, and should Pawns be able to capture en passant?<br><br>Yes, and yes.<br><br>En Passant is not so tough to program in and check for.  The point of the rule is to prevent passed pawns that got to be passed pawns only because they took advantage of the two-space move.  So the rule is there to say "hold it, he just moved that pawn two spaces-- if he had moved it at the normal one-square speed per move, I would be able to capture it normally with my pawn on the 5th rank" so the ruleset allows the capture.  (So in the position right before en passant could happen, it doesn't matter whether the pawn moves 1 or 2 spaces, it can still be captured from the opposing pawn on the 5th rank in either case, so just treat it the same in your code.)<br><br>It only comes into play when a pawn moves two spaces from his second rank (From white's perspective, if Black loses a pawn to this rule it always means it was an attempt to move it from the 7th rank to 5th rank). <br><br></td></tr></table><br>
<a name="927781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> All of the pieces are now moving -- even the Pawn's double first move! (Only they don't interact with each other yet. I'll be getting to that later.) <br><br></td></tr></table><br>
<a name="927791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> with regards to the game play question 2:<br>if you deleted the (musical) part from wiki you would have had tonnes of info on the game itself and im assuming you have read that page at some point<br><br>ommiting a set of rules from chess, even under the pretence of "i dont know how to code it" breaks the game for those that want to play chess with out the hassle of setting it up or finding another player (assuming your AI develops)<br>if they got the full rules of chess running on a spectrum 48 and perhaps a zx81 then it had damn well better work on a circa 2008/09 machine ;)<br><br>chess variants do exist but most follow the movement/caputure rules they just might lay them out differently<br><br>also i wanted to learn shogi (japanese chess) but with no idea on the player glyphs(?) i hadnt a clue which piece was which, but if i took the time to read and understand the rules, i could (when i used to have time) work out the game code and play from there (or cheat and play someone elses windows version)<br><br>the same (or perhaps modified) 8*8 array couild also be used in checkers othello and with a tweak go <br><br></td></tr></table><br>
<a name="930107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for not responding sooner; it's just that I haven't been making any progress on this program. Perhaps checkers might be a useful jumping-off point; it has no particularly strange rules, and its mildly strange rules -- jumping over enemies and promotion -- probably wouldn't be that difficult to handle, certainly in comparison to en passant and castling.<br><br>In any case, I don't think I'll be making any progress on it for some time. Thank you, and any suggestions will be helpful when I come back to it, but as I said, I don't think I might be doing much on chess for a while. Maybe we should just buy another chessboard... <br><br></td></tr></table><br>
<a name="930154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> im sure coding chess is way easier than mastering playing chess<br>chess AI however ;)<br><br>the board is just a 2d array and would have different internal coordinates than you would be used to in regular chess notations<br>and as such piece moving would be written differently, but in a way just the same as regular notations<br><br>rooks would be in grid coordinates 0,0 0,7 7,0 7,7 assuming that the top left is 0,0 and bottom right is 7,7 and pawns spread out across 1,0 to 1,7 and 6,0 to 6,7<br>thats easier for me to find than kings bishop 5 all these other bits real chess players under stand<br><br>aslong as the pieces adhear to their real counterparts when moving its all a case of making sure that if the queen wants to move she has a clear line of sight between start and finish and cannot pass through a fellow team mate to get to the piece she is capturing <br><br></td></tr></table><br>
<a name="930155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know something, I think you just gave me an idea...<br><br><div class="quote"> rooks would be in grid coordinates 0,0 0,7 7,0 7,7 assuming that the top left is 0,0 and bottom right is 7,7 and pawns spread out across 1,0 to 1,7 and 6,0 to 6,7 <br></div><br>That's basically what I'm doing, only with types, not an actual array. I don't know if an array would be easier, but anyway. Combine that with what David Boudreau said earlier --<br><div class="quote"> check each square in the array between move-from square and move-to square <br></div><br>And I realize that maybe I could use a piece's location and a tile's location and check tiles in between!<br><br>I still don't think I'll have time to code it for a while, but maybe when I do, it'll work better. Thank you! <br><br></td></tr></table><br>
<a name="931938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think your best using an array:<br><br>Each piece has a number: 1 = white pawn, 2 = white knight... etc 9 = black pawn 10 = black knight.<br><br>Just fill your array with the appropriate numbers to indicate there starting positions. What i did for movements was something like another array, which held all the possible squares a piece can move too. There are many ways to do the piece moving thing, but the foundation should be the array, where you can check any square to see what piece occupies a square. <br><br></td></tr></table><br>
<a name="936576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I might have some idea of where to go with this, but it would probably involve arrays, which I don't use much -- in fact, mainly, if not only, for rotations. I'm much more familiar with types, and I've been trying to use them for the tiles, but an array would probably simplify things.<br><br>First of all, can types and arrays be merged; if so, how; and is that a useful way to implement a group of tiles with characteristics of both?<br><br>Second, how do you store multiple related items (space x, space y, and whether a piece can be moved there) in an array? Do you put in a third dimension?<br><br>Third, when I create tiles and such, I generally use a For... Next loop (e.g., "For a = 1 To 8 [...] Next"). But can a For... Next loop be run <i>backwards</i>? (e.g., For b = (piece\spx - 1) To 0) If so, I think I would be able to Exit if there was a piece in the way.<br><br>Thank you! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
