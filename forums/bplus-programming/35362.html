<!DOCTYPE html><html lang="en" ><head ><title >Blitz is screwing with jpegs</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz is screwing with jpegs</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Blitz is screwing with jpegs</a><br><br>
<a name="384617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am in the process of writing a screen saver and the image quality is of the utmost importance. I would use PNG but size is also a major factor. When comparing a JPEG from outside of Blitz, and then inside, i've noticed something very strange.<br><br>Take these two images:<br><img src="http://legion.gibbering.net/eik/jpg1.PNG"> <img src="http://legion.gibbering.net/eik/jpg2.PNG"><br><br>The former is how it appears in any image viewer i've tested, the latter is from a Blitz+ window. Both my desktop and the graphics mode were set to 32bit. <br><br>I don't usually use jpgs in blitz so maybe i've missed something basic, but why is it degrading the image? <br><br></td></tr></table><br>
<a name="384698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> And the difference is?  What does the degrading do?  Can you zoom in to show some detail?<br><br>The 2nd one looks less blurred, maybe?<br><br>Are you resizing the image at all in b+ ? <br><br></td></tr></table><br>
<a name="384750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check your canvas dimensions.  The right picture is slightly bigger than the left one.  Whenever you resize JPGs, you will introduce artifacts. <br><br></td></tr></table><br>
<a name="384796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> No canvas, just a Graphics window. <br><br>The pics were taken from screen grabs so the dimensions aren't the same, but its the same image for sure. I cut out a tiny portion of the larger image, a section which showed the most distortion.<br><br>@Beaker: Look at the face and you can see where its a lot more blocky. I saved as png so that what you see is exactly what im getting.<br><pre class=code>
Graphics 800, 600, 32, 2
SetBuffer BackBuffer()

Img = LoadImage("gfx/11.jpg")

While Not KeyDown(1)

DrawBlock Img, 0, 0

Flip: Cls
Wend: End
</pre>Heres the images at 2x to magnify the differences.<br><img src="http://legion.gibbering.net/eik/jpg1r.png"> <img src="http://legion.gibbering.net/eik/jpg2r.png"><br><br>Just tested some more and it looks like every version of Blitz is modifying it in the same way. Full screen also makes no difference. If someone would be kind enough to load a large jpeg on their side and scour it, you may find the same problem as me. <br><br></td></tr></table><br>
<a name="384818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like the Blitz one isn't filtering or something.  It does look like the one on the left is being blur filtered or something.  Does the JPEG format contain a blur option?  I know you can choose the blur amount on export from photoshop. <br><br></td></tr></table><br>
<a name="384828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I save with Irfanview and these are the settings I use:<br><img src="http://legion.gibbering.net/eik/settings.png"><br><br>Just strange that everything besides Blitz shows the image fine. VB, MSPaint, etc. Guess i'll have to figure out something else. <br><br></td></tr></table><br>
<a name="384855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kanati</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> load the picture into another viewer...  Could be blitz is the one showing it "correctly" and your viewer is smoothing out the artifacting a bit. <br><br></td></tr></table><br>
<a name="384870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kanati: Its the other way around. Every language, viewer, etc. I have loaded it in displays it as on the left. Blitz is the odd man out.<br><br>Programs that i've tried:<br>MSPaint<br>Irfanview<br>Adobe Photoshop 7<br>Visual Basic Picture and Image box controls<br>Windows Picture and Fax Viewer<br>FireFox 0.9<br>IE 6<br>Mozilla 1.7 <br><br></td></tr></table><br>
<a name="384879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The one on the right actually has more head room on the top. The picture is not being stretched, nor is it being copied, it is as if Blitz is showing part of the picture that normal graphics packages aren't supposed to be showing. Perhaps the JPEG file itself is corrupt, something to do with the layout of the file and the dimensions specified in the file header. It could be that normal graphics deal with the problem one way, but Blitz's image-loading system deals with it another way.<br><br>Whatever the reason, Blitz is actually showing MORE of the picture than your graphics packages are. The extra section at the top proves it wasn't resized, and the gradient of the light in the top-right shows that it wasn't merely copied to increase the size, it's simply showing more of the picture. <br><br></td></tr></table><br>
<a name="384882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eikon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thx for the input CS but you missed a crucial piece of info:<br><div class="quote"> <br>Eikon:<br>The pics were taken from screen grabs so the dimensions aren't the same, but its the same image for sure. I cut out a tiny portion of the larger image, a section which showed the most distortion.<br> <br></div><br>Heres the <a href="http://www.2112.net/powerwindows/wallpaper/HEMposter.jpg" target="_blank">image</a> if anyone wants to try it out. I resize it to something around 640x480, resave as jpg, and load it in Blitz to see the problem. <br><br></td></tr></table><br>
<a name="385042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have good eyesight.  I would not have noticed.  But when I examine the two using magnifier the blitz one is clearly more blocky. So maybe there is a slight problem with the jpg loader blitz uses or maybe it just does not do any fancy post processing. <br><br></td></tr></table><br>
<a name="385127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz uses the 'FreeImage' library, doesn't it? Perhaps that's why it's free ;)<br><br>Seriously, though, I wonder if every function that displays jpegs in every program uses the same code, or do they follow a standardized guideline that results in slight differences between different programs?<br><br>Just a thought.<br><br>Russell <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
