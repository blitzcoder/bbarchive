<!DOCTYPE html><html lang="en" ><head ><title >detecting a keystroke in console?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >detecting a keystroke in console?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >detecting a keystroke in console?</a><br><br>
<a name="193298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rodvik</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> UPDATE: <br><br>Well it appears that console does not support any commands other than print or input. <br>From the manual :<br>"The following program demonstrates the use of the two BlitzPlus console commands Print and Input."<br><br>I will leave this message here in case others run into the same issue.<br><br><br>old message--------------------------------------<br><br><br>Any help would be appreciated. I am working on a text game which I would like to be console rather than printing text to a window. <br><br>However I have been unable to get getkey() to work using console.<br><br>In the following example if the graphics mode line is commented out then a keystroke is never detected. If it remains the keystroke is only ever detected if the blank graphics window is selected rather than the console window.<br><br>Any advice would be welcomed.<br><br>Thanks in adavnce<br><br><br>;***********************START CODE**************************<br>Graphics 800,600,16,2 ; set resolution, if this is removed, console displays but keys never detected.<br><br><br><br>;***********************MAIN MENU********************************<br>.mainmenu ; start of main menu loop<br><br>.statusreturn <br>FlushKeys<br>Print seasonname$<br>Print "1 status"<br>Print "2 recruit"<br>Print "3 war"<br>Print "4 peace"<br>Print "5 trade"<br>Print "6 revelry"<br>Print "9 quit"<br><br><br>;.waitforkey<br>WaitKey()<br>If KeyDown(2) Then Print "status";if key detected then print selected option<br>If KeyDown(3) Then Print "recruit"<br>If KeyDown(4) Then Print "who_attack"<br>If KeyDown(5) Then Print "peace"<br>If KeyDown(6) Then Print "trade"<br>If KeyDown(7) Then Print "revelry"<br>If KeyDown(10) Then End<br>Goto statusreturn<br><br>End <br><br></td></tr></table><br>
<a name="193305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> quick idea: find a similar function to KeyDown in the Windows API and use it via a userlib?<br><br>(I seem to remember seeing something like that... maybe it would work.  I can't check right now though.) <br><br></td></tr></table><br>
<a name="193377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Na, nevermind.  I tried it with GetKeyboardState (user32) and it didn't work.  (Likely, Blitz detects keystrokes with a similar function.)<br><br>I think the only way to do it would be to write a dll yourself that sets s system-wide keyboard hook with a callback function and monitors what keys get hit while the console is in the foreground and returns the results to your program.<br><br>But that would be a big pain. <br><br></td></tr></table><br>
<a name="193381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rodvik</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Soja<br><br>Yeah I spoke with a freind about hit. He expalined that the reason it works with another window open is its using the windows keyboard que but in theory you can pull the ketstrokes as well in C++ at least.<br><br>Anyhow I am going to make my own life easier and just convert the whole thing to a windows app with B+ running in a fancy windows window instead of console. <br><br></td></tr></table><br>
<a name="193382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use make your own console, using a text area ? <br><br></td></tr></table><br>
<a name="193464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rodvik</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> skn3:<br><br>Thats probably what I will end up doing.<br><br>Somewhat bizzarely I wanted a really "old school" feel to the text display and console fitted the bill really well. <br><br>Ah well I'll just get the feeling another way. <br><br></td></tr></table><br>
<a name="237530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CdrJameson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoops, I've just run into this too. Again, it'd be nice to point out in the man page for waitkey that it doesn't work for console apps <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
