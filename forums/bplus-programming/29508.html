<!DOCTYPE html><html lang="en" ><head ><title >Object movement question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Object movement question</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Object movement question</a><br><br>
<a name="312535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi to all.<br>I'm making some movement function (i call them when i whant the alien in my game move...);now i have some basic movement (like straight direction[easy to code],zig-zag[easy to code,it's basically two straight direction at once :P] but if i want to implement some complex movement (like clockwise move)or some path movement.....what's the best way to do this?<br>I ear of precalculated table and so on....but i don't figured out how to do it yet :(<br>Is also difficult to make some sort of line movement like this?(in precalculated path,like i draw a line and they follow that line)<br>Example:follow this path from O to X<br><br>O------------<br>             \           |---------|<br>              \          |         |<br>               \         |         |<br>                ----------         |<br>                                   |<br>                                   |<br>                                   |<br>                  |----------------|<br>                  |<br>                  |<br>                  X<br><br>Thanks <br><br></td></tr></table><br>
<a name="312611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Brine</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>To move something in a circular motion, try somat like this:<br><br>; ----------------------------------------------------------<br><br>Graphics 640, 480, 32, 2<br><br>Global x#, y#, t#<br><br>Repeat<br><br>	Cls<br>	x = 100 * Sin(t)<br>	y = 100 * Cos(t)<br>	Text 320 + x, 240 + y, "@"<br>	Flip <br>	t = t + 1<br>	<br>Until MouseHit(1) = True<br><br>; ----------------------------------------------------------<br><br>to change the direction and speed of the rotation adjust the code:<br><br>t = t + 1 <br><br><br>to change the shape of the circle motion  adjust the '100 *' bit of code:<br><br>x = 100 * Sin(t)<br>y = 100 * Cos(t)<br><br><br>Hope this helps<br><br>Mr Brine <br><br></td></tr></table><br>
<a name="312624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Brine</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Again<br><br>this code moves things along a line, click any where in the window and the "@" symbol will move their. escape quits<br><br>Notes:<br><br>- SQR function is pretty processor intensive.<br>- to change the speed of the movement alter the speed parameter of the calcgradient function, in the program loop.<br><br><br>;---------------------------------------------------------------------<br><br>Graphics 640, 480, 32, 2<br><br><br>Type gradient<br><br>	Field	sx#, sy#<br>	Field	fx#, fy#<br>	Field	xg#, yg#<br><br>End Type<br><br><br><br>Global g.Gradient = New Gradient<br><br><br><br>Function CalcGradient(fx, fy, speed#)<br><br>	Local xd#, yd#<br>	Local length#<br>	<br>	g\fx = fx<br>	g\fy = fy<br>	<br>	xd = fx - g\sx<br>	yd = fy - g\sy<br>	<br>	length = Sqr(Float(xd * xd + yd * yd))<br>	<br>	g\xg = xd / length * speed<br>	g\yg = yd / length * speed<br>	<br>End Function <br><br><br><br>Function AddGradient()<br><br>	g\sx = g\sx + g\xg<br>	g\sy = g\sy + g\yg<br><br>End Function <br><br><br><br>Repeat<br><br>	Cls<br>	<br>	If(MouseHit(1) = True)<br>	<br>		CalcGradient(MouseX(), MouseY(), 1)<br>	<br>	Else<br>	<br>		Text g\sx, g\sy, "@"<br>		AddGradient()<br>		<br>	End If <br><br>	Flip<br>	<br>Until KeyHit(1) = True<br><br><br><br>;---------------------------------------------------------------------<br><br><br>hope this helps also<br><br>Mr Brine <br><br></td></tr></table><br>
<a name="312643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks<br><br>Yes,for circular movements only works(but i see that flicker too much....the object make jump instead of pixel movement..)<br>Here's the code of your suggestion:<br><br>Graphics 640, 480, 32, 2 <br>player=LoadImage("jet6.TGA")<br>Global x#, y#, t# <br><br>Repeat <br><br>Cls <br>x = 100 * Sin(t) <br>y = 100 * Cos(t) <br>DrawImage player,50+x,200+y<br>Flip <br>t = t + 1<br><br>Until MouseHit(1) = True <br><br><br>if you run it do you understand what i'm saying (sorry for bad translation) <br><br></td></tr></table><br>
<a name="312655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made this code copying the Krylar code in tutorials...but don't work!<br>And i think it's related to types...and types variables but i don't know why,what and where :)<br>Here's the code:<br><br>(\code)<br>Graphics 640,480,32,1<br>SetBuffer BackBuffer()<br><br>giocatore=LoadImage("jet6.TGA")<br>Global nemico=LoadImage("alien1.TGA")<br>Global missile=LoadImage("missile.BMP")<br><br>frametimer=CreateTimer(60)<br> <br>;inizio codice rotazione<br> Const iNumRotations=36            <br><br>  ; next we need an array to hold the images<br>  Dim ObjectFrames(iNumRotations)     <br><br>  ; now we need two arrays so we can pre-computed our<br>  ; Sin/Cos tables...helps speed things up<br>  Dim XSinTable#(iNumRotations)<br>  Dim YCosTable#(iNumRotations)<br><br>  ; now actually call the function that pre-computes<br>  PrecomputeSinCosTables()<br><br>  ; Load the Object and do the rotations<br>  LoadObject("alien1.tga", iNumRotations)<br><br>  ; initialize the Object to point north<br>Global  ObjectDir = 0            <br><br>  ; This controls the Object so it doesn't shake about<br>  ; when it gets close to the target.  You can adjust<br>  ; this, but it seems that .01 is working well.<br>Global Smoothness# = .02 <br><br>  ; initialize the X,Y locations of the Object<br>Global  X# = 400<br>Global  Y# = 300<br><br>  ; initialize the Speed# used<br>Global  Speed# = 4<br><br>Global  XTarget# = 500<br>Global  YTarget# = 450<br>;fine codice rotazione<br><br>MidHandle giocatore<br>MidHandle nemico<br>MidHandle missile<br>Global jetx,jety<br><br>Global nem.nemico<br><br>Type proiettile<br>	Field posizioneX<br>	Field posizioneY<br>	Field durata<br>	Field velocita<br>	Field aspetto<br>	Field potenza<br>End Type<br><br><br>Type nemico<br>	Field movimento<br>	Field velocita<br>	Field vitalita<br>	Field aspetto<br>	Field potenza<br>	Field esplosione<br>	Field punteggio<br>	Field posizioneX<br>	Field posizioneY<br>	Field utile<br>	Field negativo<br>	Field positivo<br>	;aggiunte al type<br>	Field XTarget#<br>	Field YTarget#<br>	Field ObjectDir<br>	Field X#<br>	Field Y#<br>	;Field Speed#<br>	;fine aggiunte al type<br>End Type<br><br>;main<br><br>Repeat<br>Cls<br>WaitTimer(frametimer)<br><br><br>If MouseHit(2)<br>	crea_nemico(2,300,50,3,nemico,100)<br>EndIf<br>muovi_nemico()<br><br>jetx=MouseX()<br>jety=MouseY()<br><br>DrawImage giocatore,jetx,jety<br><br>If MouseHit(1) Then crea_proiettile()<br><br>muovi_proiettile()<br><br>VWait<br><br>Flip<br><br>Until KeyHit(1)=1<br><br>End<br><br>;end main<br><br><br><br><br>Function crea_proiettile() <br>	bullet.proiettile=New proiettile<br>	bullet\posizioneX=MouseX() ;the x position of missile creation is the mouse coords(the same coords of my jet of course) <br>	bullet\posizioneY=bullet\posizioneY+MouseY()-45 ;the missile creation start a bit up to the jet(for simulating the launch-bay hehe) <br>	bullet\velocita=5 ;the speed of the missile <br>	bullet\durata=300 ;the starting value of the animation <br>End Function <br><br>Function muovi_proiettile() <br>	For bullet.proiettile=Each proiettile<br>		DrawImage missile,bullet\posizioneX,bullet\posizioneY<br>		bullet\posizioneY=bullet\posizioneY-bullet\velocita ;this move the missile up <br>		bullet\durata=bullet\durata-bullet\velocita ;this start the counter of the missile course <br>		If bullet\durata=&lt;0 Then Delete bullet<br>	Next<br>End Function <br><br>Function crea_nemico(moto,partenzaX,partenzaY,velocita,immagine,vita)<br>	nem.nemico=New nemico<br>	nem\movimento=moto<br>	nem\velocita=velocita<br>	nem\vitalita=vita<br>	nem\aspetto=immagine<br>	nem\potenza=nem\potenza		;da aggiungere in seguito<br>	nem\esplosione=nem\esplosione		;da aggiungere in seguito<br>	nem\punteggio=nem\punteggio		;da aggiungere in seguito<br>	nem\posizioneX=x#<br>	nem\posizioneY=y#<br>	nem\utile=partenzaX<br>	nem\negativo=-velocita<br>	nem\positivo=+velocita	<br>;inizializzazione del nemico	<br><br>	nem\XTarget# = MouseX()	;quello che puntera il nemico<br>	nem\YTarget# = MouseY()	;quello che puntera il nemico<br>	nem\ObjectDir = AngleToTarget(nem\X#,nem\Y#,nem\XTarget#,nem\YTarget#, Speed#,CurrentObjectDir, iNumRotations,Smoothness#)<br>	nem\X# = nem\X# + (xSinTable#(ObjectDir) * Speed#)<br>	nem\Y# = nem\Y# + (yCosTable#(ObjectDir) * Speed#)<br> <br>;fine inizializzazione<br>	<br>	<br>End Function<br><br>Function muovi_nemico()<br>	For nem.nemico=Each nemico<br>	<br>		CurrentDistance# = GetDistance#(X,Y,XTarget,YTarget)<br>    	If CurrentDistance &lt; 1<br>       		nem\X# = nem\X# - (xSinTable#(ObjectDir) * Speed#)<br>       		nem\Y# = nem\Y# - (yCosTable#(ObjectDir) * Speed#)<br>       		Speed# = 0<br>        	nem\ObjectDir = CurrentObjectDir<br>        	Text 0,84,"Hit Target!"<br>    		Else<br>        	Speed# = 2<br>    	EndIf<br><br>	    DrawImage(ObjectFrames(ObjectDir),nem\X#,nem\Y#)<br>		;DrawImage nem\aspetto,nem\posizioneX,nem\posizioneY<br>		;If nem\movimento=1 Then moto_verticale()<br>		;If nem\movimento=2 Then moto_sindes()<br>		;If nem\movimento=3 Then moto_centrato()<br>		If nem\vitalita=&lt;0<br>			Delete nem<br>			Exit<br>		EndIf<br>		;If nem\posizioneY=&gt;500<br>		;	Delete nem<br>		;	Exit<br>		;EndIf<br>	Next<br>End Function<br><br>Function moto_verticale()<br>		 nem\posizioneX=nem\posizioneX<br>		nem\posizioneY=nem\posizioneY + nem\velocita<br>End Function<br><br>Function moto_sindes()<br>		nem\posizioneY=nem\posizioneY + (nem\positivo / 2)	;movimento verso il basso a meta velocita<br>		nem\posizioneX=nem\posizioneX+nem\velocita			;movimento verso destra inizio<br>		If nem\posizioneX =&gt; nem\utile+100 					;se fa cento passi a sin cambia direzione<br>			nem\posizioneX = nem\posizioneX - nem\velocita	;e va verso destra<br>			nem\velocita = nem\negativo						;il movimento sara ora negativo!!!<br>		EndIf<br>		<br>		If nem\posizioneX &lt;= nem\utile -100 				;se fa cento passi a destra cambia direzione<br>			nem\posizioneX = nem\posizioneX + nem\velocita	;e va verso destra come all'inizio<br>			nem\velocita = nem\positivo						;il movimento ora ritorna positivo!!!<br>		EndIf<br>End Function<br><br>Function PrecomputeSinCosTables()<br>   Local iAngle# = 0<br><br>   ; run through the full rotation cycle, and use Sin and Cos<br>   ; at 10-degree increments<br>   Multiplyer = 360/iNumRotations<br>   For iAngle = 0 To iNumRotations-1<br>         xSinTable#(iAngle) = Sin(iAngle*Multiplyer)<br>         yCosTable#(iAngle) = -Cos(iAngle*Multiplyer)<br>   Next<br>End Function<br><br>Function AngleToTarget(X#, Y#, XTarget#, YTarget#,Speed#, ShipDir, Rotations,Smoothness#)<br><br>    ; Calculate what the next x,y position of the ship would be <br>    ; if it kept moving in its current direction  <br>    StraightX# = nem\X# + (xSinTable#(ShipDir) * Speed#)<br>    StraightY# = nem\Y# + (yCosTable#(ShipDir) * Speed#)<br><br>    ; Calculate what the next x,y position of the ship would be <br>    ; if it turned one unit left and moved forward from there<br>    LeftShipDir = ShipDir - 1<br>    If LeftShipDir &lt; 0<br>        LeftShipDir = Rotations - 1<br>    EndIf<br>    LeftX# = nem\X# + (xSinTable#(LeftShipDir) * Speed#)<br>    LeftY# = nem\Y# + (yCosTable#(LeftShipDir) * Speed#)<br><br>    ; Calculate what the next x,y position of the ship would be <br>    ; if it turned one unit right and moved forward from there<br>    RightShipDir = ShipDir + 1<br>    If RightShipDir &gt; Rotations - 1<br>        RightShipDir = 1 <br>    EndIf<br>    RightX# = nem\X# + (xSinTable#(RightShipDir) * Speed#)<br>    RightY# = nem\Y# + (yCosTable#(RightShipDir) * Speed#)<br><br>    ; using our above calculated projections, let's see what<br>    ; the distance is between the target and each projection<br>    StraightDist# = GetDistance#(StraightX,StraightY,nem\XTarget,nem\YTarget)<br>    LeftDist# = GetDistance#(LeftX,LeftY,nem\XTarget,nem\YTarget)<br>    RightDist# = GetDistance#(RightX,RightY,XTarget,nem\YTarget)<br><br>    ; if the Left distance is less than the Straight and the<br>    ; Right distances, the the best direction to turn would<br>    ; be left.  That will bring us closer to the target.<br>    If LeftDist &lt; StraightDist And LeftDist &lt; RightDist<br>        ; see if there is enough of an angle to warrant <br>        ; changing the dir...if this was left out the ship<br>        ; will shake madly when it gets close to the target<br>        If StraightDist - LeftDist &gt; Smoothness<br>           ; change the ship dir accordingly<br>           ShipDir = LeftShipDir<br>        EndIf<br>    EndIf<br><br>    ; if the Right distance is less than the Straight and the<br>    ; Left distances, the the best direction to turn would<br>    ; be Right.<br>    If RightDist &lt; StraightDist And RightDist &lt; LeftDist<br>        ; see if there is enough of an angle to warrant <br>        ; changing the dir...if this was left out the ship<br>        ; will shake madly when it gets close to the target<br>        If StraightDist - RightDist &gt; Smoothness<br>            ; change the ship dir accordingly<br>            ShipDir = RightShipDir<br>        EndIf<br>    EndIf<br><br>    ; return the appropriate direction<br>    Return(ShipDir)<br>End Function<br><br>Function GetDistance#(XSource#,YSource#,XTarget#,YTarget#)   ; find the difference between the source and target<br>    XDist# = nem\XTarget - XSource<br>    YDist#= nem\YTarget - YSource<br><br>    ; use a little math<br>    TotalDist# = Sqr#((XDist * XDist) + (YDist * YDist))<br><br>    ; return the value<br>    Return (TotalDist)<br>End Function	<br>	<br>Function LoadObject(ObjectName$,Rotations) <br>  ; tell BB to handle the centering of our images<br>  AutoMidHandle True<br><br>  ; Load the player image and point to it with "imgTemp"<br>  imgTemp = LoadImage(ObjectName$)<br><br>  ; see if the image was loaded successfully<br>  If imgTemp = 0<br>     Text 100,100,"Invalid Image!"    <br>  Else<br>     ; set it's mask (transparent color)<br>     MaskImage imgTemp,0,0,0<br><br>     ; now run through the loop and rotate the image<br>     For iLoop=0 To Rotations-1<br><br>           ; first copy the original image into the current frame<br>      	 ObjectFrames(iLoop)=CopyImage( imgTemp )<br><br>           ; rotate the frame the appropriate number of degrees<br>           RotateImage ObjectFrames(iLoop), iLoop*360/Rotations<br>     Next<br>  EndIf<br>End Function<br><br>(\endcode)<br>Thanks. <br><br></td></tr></table><br>
<a name="312656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ps:your last example is what i'm thinking [but has the same jump movement of the previous example...sorry but don't know how to improve it!] <br><br></td></tr></table><br>
<a name="312695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ARGHHHHHHHHHHHH what an idiot that i'm!<br>I forgot to digit "setbuffer backbuffer()" so it's why your examples flicker!<br>Excuse for my hemm.....newbie error.<br>But i'm not able to understand why my code doesn't work... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
