<!DOCTYPE html><html lang="en" ><head ><title >adding curved movement</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >adding curved movement</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >adding curved movement</a><br><br>
<a name="204206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have made this intro effect that takes a picture and cut it in boxes 16x16 pixels. And then it places these boxes randomly on the screen and moves them back to their original place. But the thing is, that it moves the boxes straight to their place and I would like to add a curved movement or something to make it look a little more interesting. If you have any ideas please feel free to comment. Here is the code:<br><br>;// FULL SCREEN PICTURE EFFECT<br><br>; SET GRAPHICS MODE <br>Graphics 640,480<br><br>; LOAD STUFF<br>picture = LoadImage("das3.jpg")	;change filename to any 640x480 picture<br><br>;// SETUP VARIABLES<br><br>Dim expos(1200),eypos(1200)<br>Dim cxpos(1200),cypos(1200)<br><br>x=0<br>y=0<br>For a=0 To 1199<br>expos(a)=x<br>eypos(a)=y<br>x=x+16<br>If x&gt;624 Then<br>	x=0<br>	y=y+16<br>	End If<br>cxpos(a)=Rnd(623)<br>cypos(a)=Rnd(463)<br>Next<br><br>;// SETUP MOUSE CHECK <br><br>mx1=0 <br>mx2=MouseX() <br><br>; Go double buffering <br>SetBuffer BackBuffer() <br><br>While Not KeyHit(1) <br><br>mx1=MouseX() : If mx1&lt;&gt;mx2 Then End 	; if mouse is moved then end program<br><br>For a=0 To 1199<br>CopyRect expos(a),eypos(a),16,16,cxpos(a),cypos(a),ImageBuffer(picture),BackBuffer()<br>If cxpos(a) &lt;&gt; expos(a) Then<br>	If cxpos(a) &lt; expos(a) Then cxpos(a) = cxpos(a) + 1<br>	If cxpos(a) &gt; expos(a) Then cxpos(a) = cxpos(a) - 1<br>	End If<br>If cypos(a) &lt;&gt; eypos(a) Then<br>	If cypos(a) &lt; eypos(a) Then cypos(a) = cypos(a) + 1<br>	If cypos(a) &gt; eypos(a) Then cypos(a) = cypos(a) - 1<br>	End If<br>Next<br><br>Flip ; show backbuffer<br>Cls ; Clear screen<br><br>Wend <br><br>End<br><br>;// END OF CODE <br><br></td></tr></table><br>
<a name="204390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MuffinRemnant</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zawran<br><br>You could accomplish this in many ways- it depends on the speed required, the type of path required etc.<br><br>You could do some grunt-work and calculate a curved path between two random points but it's probably overkill for a transition effect.<br><br>An easier way would be to start with (but not necessarily show) the block in its target position and move it along a curved path some number of times. Then to get the desired effect simply replay the movement.<br><br>In this example i've used rectangles instead of images for simplicity. The end position and current position start off the same. The current position is then shifted on a circular path 100 steps. When you press a key the path is 'replayed' giving you the desired effect.<br><br>You could modify the example by changing the amount the angle (a) increases/decreases or the transcendental functions used to give some interesting curves!<br><br>Hope this gives you some ideas :)<br><br><br>Graphics 800,600,16,1<br>SetBuffer BackBuffer()<br><br>Global cur_x#, cur_y#, end_x#, end_y#<br><br><br><br><br>;position object and destination<br>cur_x=400<br>cur_y=300<br><br>end_x=400<br>end_y=300<br><br><br><br>a=0<br>For loop=0 To 100<br><br>	cur_x=cur_x+2*Cos(a)<br>	cur_y=cur_y+2*Sin(a)<br>	a=a+1<br><br>Next<br><br>Rect end_x-4, end_y-4, 8, 8, 0<br>Rect cur_x-4, cur_y-4, 8, 8, 1<br><br>Text 0,0, "Pres a key"<br>Flip<br>WaitKey()<br>Cls<br><br>For loop=0 To 100<br><br>	Cls<br>	<br>	Rect end_x-4, end_y-4, 8, 8, 0<br>	Rect cur_x-4, cur_y-4, 8, 8, 1<br><br>	Flip<br><br>	cur_x=cur_x-2*Cos(a)<br>	cur_y=cur_y-2*Sin(a)<br>	a=a-1<br><br>Next<br><br><br>End <br><br></td></tr></table><br>
<a name="204565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres another method:<br><br><pre class=code>; Chaser

Const sw=640,sh=480

Const sz=25 ; size of square/oval

Graphics sw,sh,0,2
SetBuffer BackBuffer()

x#=Rand(20,sw-20) : y#=Rand(20,sh-20)
destx#=x : desty#=y
speed#=0.05

Repeat
	Cls
	Color 100,100,100
	Text 10,10,"Click LMB to position RED square"
	Text 10,40,"Speed = "+speed
	Text 140,40,"&lt;- Change with Cursor keys LEFT /RIGHT"
	
	If MouseHit(1) Then destx=MouseX() : desty=MouseY()
	speed=speed+Float(KeyDown(205)-KeyDown(203))*0.001
		
	x=x+(destx-x)*speed : y=y+(desty-y)*speed
	
	Color 200,20,20 : Rect destx-sz/2,desty-sz/2,sz,sz
	Color 20,230,20 : Oval x-sz/2,y-sz/2,sz,sz
	
	Flip
Until KeyHit(1)

End
</pre> <br><br></td></tr></table><br>
<a name="204677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MuffinRemnant</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Syntax<br><br>That's pretty good but I don't see any curved paths there :) <br><br></td></tr></table><br>
<a name="204685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I would like to add a curved movement or something to make it look a little more interesting <br></div><br>@MuffinRemnant,<br>No curved paths there.  Just another method for Zawran to play with.<br>The code moves the object at a slower rate the nearer it gets to its destination. <br><br></td></tr></table><br>
<a name="204704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MuffinRemnant</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok - try this Zawran - 640x480 into 32x32 tiles moving to their detination in curved paths (sorry it's a bit rough but it's a 15 minute knock up)...<br><br>Graphics 640,480,16,1<br>SetBuffer BackBuffer()<br><br>Global cur_x#, cur_y#, end_x#, end_y#<br><br><br>Dim grbimg%(300)<br><br>Dim cx#(300)<br>Dim cy#(300)<br><br>Dim q#(300)<br><br>bigimg=LoadImage("Image1.jpg")<br><br><br>DrawImage bigimg,0,0<br><br><br><br><br><br><br><br><br>; grab the bits<br><br>count=0<br>For y=0 To 448 Step 32<br>	For x=0 To 608 Step 32<br><br>		grbimg(count)=CreateImage(32,32)<br><br>		GrabImage grbimg(count), x, y<br>		count=count+1<br>	Next<br>Next<br><br><br><br><br><br><br><br>; position at start<br>count=0<br>For y=0 To 448 Step 32<br>	For x=0 To 608 Step 32<br>	<br>		cx(count)=x<br>		cy(count)=y<br><br>		count=count+1<br>	Next<br>Next<br><br><br><br><br><br>; do 1000 steps for each grabbed image<br><br><br>For loop=0 To 299<br>	<br>	a=0<br><br>	q(loop)= Rnd(-4,4)<br>	<br>	For steps = 0 To 99<br><br>		<br>		cx(loop)=cx(loop)+q(loop)*Cos(a)<br>		cy(loop)=cy(loop)+q(loop)*Sin(a)		<br>		a=a+2		<br><br>	Next<br>	<br><br>	<br>Next<br><br><br><br>a=a-2<br><br><br>; playback time<br>; repeat 100 steps<br>For steps=0 To 100<br><br><br>	Cls<br>	<br>	; draw all grabbed images<br><br>	For loop=0 To 299<br><br>	<br>		DrawImage grbimg(loop), cx(loop), cy(loop)<br><br>		; update<br>		cx(loop)=cx(loop)-q(loop)*Cos(a)<br>		cy(loop)=cy(loop)-q(loop)*Sin(a)<br><br>	Next<br>	<br>	;show<br>	Flip<br><br><br><br><br><br>	a=a-2<br>Next<br><br><br>; wait for key<br>WaitKey()<br>End <br><br></td></tr></table><br>
<a name="227280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oldefoxx</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might suggest that you search the forums for some code related to bezier curves.  These are a class of cubic spline curves that were adopted because they are simple to implement and lead to some very smooth curves that are easy to deflect and control.  You now find them in most drawing packages.  They were initially developed to aid in finding the most visually satisfying curve functions for shaping automobile parts.  I already found two programs out there, and once you understand the principles of the code, I believe you can come with some excellent results that will fit your needs. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
