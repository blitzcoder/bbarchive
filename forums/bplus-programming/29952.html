<!DOCTYPE html><html lang="en" ><head ><title >Use desktop under a window?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Use desktop under a window?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Use desktop under a window?</a><br><br>
<a name="318306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I may be dreaming here, but is there any way to keep the desktop active (clickable, etc) underneath the active window?<br><br>I really want a magnifying glass window that is full screen, so you can still open programs and stuff, but all you see is the magnified desktop centered on the mouse pointer.<br><br>The process would be:<br>1)Capture area of desktop around mouse<br>2)Draw to canvas for zoom effect (like Mark's demo) only full screen &amp; allowing you to see and click the desktop under it<br>3)????<br>4)Profit<br><br>Any chance this can be done? <br><br></td></tr></table><br>
<a name="318425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dan_upright</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> there's probably an api call you can use to simulate a mouseclick at certain coordinates - try google <br><br></td></tr></table><br>
<a name="318490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantsonhead.com</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it will do something like magnify.exe on WinXP?<br><br>Steps 3 and 4 of your process look the trickiest. <br><br></td></tr></table><br>
<a name="318744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This sort-of sounds like my "Dream" of having graphics draw directly to the desktop. See this:<br><br><a href="http://www.geisswerks.com/drempels/index.html" target="_blank">http://www.geisswerks.com/drempels/index.html</a><br><br>I know I made a request for it... Let's hope:)<br><br>L8r, <br><br></td></tr></table><br>
<a name="319043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> pantsonhead.com:<br>Magnify that comes with windows is utter crap, Mark's sample program is friendlier and I could add to it easily.  But What I really want is something that works full screen.<br><br>dan_upright:<br>I don't know anything about API calls or how they work, but this sounds like the way it would have to be done.<br><br>If I could grab the desktop at specific coordinates, zoom and center that where the simulated mouse was, and send clicks to the desktop when the user clicks, it would be perfect.  Right now, I can do everything but send clicks to the desktop. <br><br></td></tr></table><br>
<a name="319069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I did some more research on API calls and came up with these two:<br>mouse_event<br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/userinput/mouseinput/mouseinputreference/mouseinputfunctions/mouse_event.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/userinput/mouseinput/mouseinputreference/mouseinputfunctions/mouse_event.asp</a><br><br>and<br>SendInput<br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/UserInput/KeyboardInput/KeyboardInputReference/KeyboardInputFunctions/SendInput.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/WinUI/WindowsUserInterface/UserInput/KeyboardInput/KeyboardInputReference/KeyboardInputFunctions/SendInput.asp</a><br><br>They say about mouse_event in Windows NT/2000/XP: This function has been superseded by SendInput. Which is unfortunate because I don't get what all you're supposed to give SendInput.  Supposing mouse_event still works, what are the values for the flags they list?  Are they listed in 0,1,2,4,8...etc order?  Or should I just start guessing :S<br><br>Also, it wants DWORDs and a ULONG_PTR, can Blitz handle that?  SetWindowPos looks like it was a lot easier! <br><br></td></tr></table><br>
<a name="319077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> whew... well, mouse_event works to simulate mouse clicks, but unfortunately I don't think you can specify where it's clicking.  So I don't think you can't have it click the window behind it.<br><br>If you're interested anyway:<br><br>in the .decls file<br><pre class=code>
.lib "user32.dll"
mouse_event(dwFlags%,dx%,dy%,dwData%,dwExtraInfo%):"mouse_event"
</pre> <br><br>And be careful hacking with this, you can hose yourself if you can't click back on the window to end the program!  It simulates a mouse click once a second.  You can see it plot on the little window when you click.  You can also end up clicking around your desktop so BE CAREFUL!  I assume no responsibility for your own goofery.<br><br><pre class=code>
title$="mouse test!" 
W=200
H=200
winX=(GadgetWidth(Desktop())/2)-(W/2)
winY=(GadgetHeight(Desktop()) /2)-(H/2)
Global window=CreateWindow(title$, winX, winY, W, H, 0, 0)
Global canvas=CreateCanvas(0,0,W,H,window)

SetBuffer CanvasBuffer(canvas)

timer=CreateTimer(20)
Color 255,255,255
Repeat 
	
	e=PeekEvent()

	If MilliSecs()-countdown&gt;1000
		ok=True
		
		countdown=MilliSecs()
		count=0
	EndIf
	If ok
		If count=0 Then mouse_event(2,MouseX(),MouseY(),0,0)

		count=count+1
		
		If count&gt;1
			mouse_event(4,MouseX(),MouseY(),0,0)
			count=0
			ok=False
		EndIf	
	EndIf
	
	If MouseDown(1)
		Plot MouseX()-winX,MouseY()-winY
	EndIf
	
	FlipCanvas canvas
	WaitTimer(timer)

	If e=$803 Or KeyDown(1) Or Then quit=True
Until quit=True
</pre> <br><br></td></tr></table><br>
<a name="319135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This sort-of sounds like my "Dream" of having graphics draw directly to the desktop <br></div><br><br>setbuffer desktopbuffer() <br><br></td></tr></table><br>
<a name="319171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Idiot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, neato.  I didn't know you could do that either!<br><br><pre class=code>
w=GadgetWidth(Desktop())
h=GadgetHeight(Desktop())
SetBuffer DesktopBuffer()
timer=CreateTimer(15)

window=CreateWindow("EYES:Esc to quit",0,0,200,20,0,13)

Repeat
	e=PeekEvent()
	drawEye(w-110,10,90)
	drawEye(w-210,10,90)
	WaitTimer(timer)
Until KeyDown(1)

SetGadgetShape(window,0,0,w,h)
FreeGadget(window)
End

Function drawEye(x,y,s)
	Color 0,0,0
	Oval x,y,s,s
	Color 255,255,255
	Oval x+5,y+5,s-10,s-10
	
	mx=x+(s/2)
	my=y+(s/2)
	
	dx=MouseX()-mx
	dy=MouseY()-my
	
	angle=ATan2(dy,dx)
	
	s=s/4
	o=s*Sin(angle)
	a=s*Cos(angle)
		
	Color 0,0,0
	Oval a+mx-(s/2),o+my-(s/2),s,s
End Function
</pre> <br><br></td></tr></table><br>
<a name="319310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting... by the way, the right eye has a noticable refresh bar going across it... changing the timer to 50 instead made it run smoother, without the visible refresh.<br><br>(Win2000, 1.2 GHz Athlon, voodoo3 3000) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
