<!DOCTYPE html><html lang="en" ><head ><title >Unwanted transparency in 16-bit color</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unwanted transparency in 16-bit color</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Unwanted transparency in 16-bit color</a><br><br>
<a name="282187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrMartin</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>When I run my (windowed) game on a computer with 16-bit color some black things get transparent. I've picked 255,0,255 as transparent color on the graphics in question and it works fine in 24 or 32 bit. Any ideas? <br><br></td></tr></table><br>
<a name="282192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 16 bit color only allows 5 bits per color.  5 bits only allows 32 shades per color.  So your min and max colors would be 0, 0, 0 (black) and 31, 31, 31 (white).<br><br>My guess would be that 31, 0, 31 doesn't equal 255, 0, 255 because its just not the same value (31 is not 255) OR the shade that 31 represents is not exactly equivalent to the shade that 255 represents (could be 255, 254, 253, 252, 251, 250, 249, or 248).<br><br>Why black areas (0, 0, 0) would become transparent if the mask color is set to 255, 0, 255 is beyond me.<br><br>Whats the work around?  I don't know.  You could prevent the user from running your application in 16-bit color though. <br><br></td></tr></table><br>
<a name="282203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy_A</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding to what WolRon mentioned, scaling 31 to 255 would most likely be 248 (8  x 31 = 248). The reasoning is that there are 3 bits difference and the largest number different values represented by 3 bits is 8. So, multiplying by 8 would scale rgb values from 5 bit to 8 bit, dividing by 8 would scale rgb values from 8 bit to 5 bit. The best way to do this is to SHL 3 for 5 to 8 bit conversion and SHR 3 for 8 to 5 bit conversion.<br><br>My guess as to why black becomes transparent is that the routine that evaluates the rgb values passed to the masking function returns a zero when the rgb evaluation fails. So when you specify 255 for red and blue color values instead of 248, it returns a zero instead of 255 which outside the range of numbers represented by 5 bits, hence black.<br><br>If all of the above is correct, just make sure that the rgb values for 24/32 bit colors are even multiples of 8.<br><br>Of course the '5-6-5' 16 bit color scheme is different, the scaling value for green is 4 instead of 8, but should still work since all multiples of 8 are also multiples of 4. You are just omitting some of the range of valid values available for green. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
