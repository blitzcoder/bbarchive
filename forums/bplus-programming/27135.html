<!DOCTYPE html><html lang="en" ><head ><title >has math precision improved yet?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >has math precision improved yet?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >has math precision improved yet?</a><br><br>
<a name="284040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm back. <br><br>Not been here for a long time. <br><br>Last time I was was here floating point values <br>were allocated only 32 bits space for <br>both the mantisa and the exponant. <br><br>This made high precision math impossible. <br><br>Has anything changed?<br><br>In C, a double is allotted 64 bits, <br>a long double gets 80 bits. Can BlitzPlus do this yet?<br><br>Ever hopefull, <br><br></td></tr></table><br>
<a name="284046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Todd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, Welcome back!<br><br>Nope, there's still no native support for bigger floats, but you could always find or write a userlib to do it for <br>you. In fact, I'm thinking of doing this myself. <br><br></td></tr></table><br>
<a name="284139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In C, a double is allotted 64 bits, a long double gets 80 bits. Can BlitzPlus do this yet? <br></div>Nope. Incidently, what do you need it for? Writing betatron control software in BlitzPlus? :o&gt; <br><br></td></tr></table><br>
<a name="284240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm really wondering at this point what you need that sort of precision for ... <br><br></td></tr></table><br>
<a name="284297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi FlameDuck :-)<br><br>I want to write a scientific calculator to work planitary orbital predictions. <br><br>I need to be able to input real distances in meters and velocities in fractions of a meter per second. <br><br>Results are required to be extremely accurate at each step to avoid errors accumulating. <br><br>Cosines must be correct to millionths of a degree. <br><br>I can't afford Mathmatica so I want to write my own. <br><br>The great thing about blitz is that it makes application creation quick and easy. <br><br>The drawback is that it can't do two mission-critcal things: <br><br>detect all keypresses in text gadgets and do accurate numbers. <br><br></td></tr></table><br>
<a name="284301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Todd :-)<br><div class="quote"> you could always find or write a userlib <br></div><br><br>I have never written a userlib. How do you do it? <br><br></td></tr></table><br>
<a name="285846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
; set float variable to 0
a#=0

; add 0.1 three times to make it 0.3
a#=a#+0.1
a#=a#+0.1
a#=a#+0.1

; subtract 0.1 three times to make it 0
a#=a#-0.1
a#=a#-0.1
a#=a#-0.1

; is the result 0?
Print a#
Delay 2000
</pre> <br><br></td></tr></table><br>
<a name="285851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If Blitz had double precision floats the result would be -2.77555756e-017.<br><br>It's interesting that single precision gives a positive number and double precision gives negative.<br>But the important lesson is that you will never get exactly zero.<br>That's life in the approximate world of floating point arithmetic. <br><br></td></tr></table><br>
<a name="285854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, something I didn't consider until today.<br><br>I will have to review my code to ensure that I don't rely on something being exactly 0. Who knows, maybe I'll find some bugs =D <br><br></td></tr></table><br>
<a name="285898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, now I'm even more convinced of the nessecity of making a DLL with a C compiler. <br><br>The more bits you have to hold your number, the nearer you can get to the true value. <br><br>It's a bit like approaching the speed of light - the faster you go, the heavier you become and more energy it takes to maintain your acceleration. <br><br>I would love to be able to calculate and store and use a 3070 place value of PI :-D <br><br>That would yield some might fine cosines! <br><br>A long double is all I'm hoping for, really. An 80bit value should be good enough until I graduate to the Q Continuum. <br><br></td></tr></table><br>
<a name="285919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use strings and roll your own math functions on them?...tis what FORTRAN basicly used for decades on Cray super computers and such....it wouldn't be fast, but you could use PI out to however far you need it. <br><br></td></tr></table><br>
<a name="285927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy_A</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about Binary Coded Decimal (BCD)? It uses 4bits per digit for 20 digits of precision you need 80 bits, but is much more precise than 80 bit floats (no dec2bin rounding errors). It seems that a BCD library would suit your needs much better. It's not as fast as double floats but faster than strings. Just a thought. <br><br></td></tr></table><br>
<a name="285929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is all fantasy. <br><br>Nothing about this 'orbital simulator' really needs more than double precision.<br><br>The higher precision, and very slow, math packages are typically used for a reality check.<br>You run your algorithm in double precision. Then try again with very high precision.<br><br>If the results are significantly different then you know your algorithm needs work. <br><br></td></tr></table><br>
<a name="286100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The higher precision, and very slow, math packages are typically used for a reality check. <br></div><br>EXACTLY! Speed is not an issue, ACCURACY is. <br><br>None of this is getting A DLL made. <br><br>Does anybody have GCC code for a DLL? <br><br></td></tr></table><br>
<a name="286122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BHoltzman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you can afford Mathmatica, student edition? I think it goes for $150. I've got it and it certainly can do what you're asking.<br><br>Also, I'll look at ibasic for you to see what percision it works in. Ok, ibasic uses 8 bytes for it's double percision variable. <br><br>Maybe you can download one of the free learning edition compilers out there. <br><br></td></tr></table><br>
<a name="286282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might also look at PowerBasic (www.Powerbasic.com  IIRC) <br><br></td></tr></table><br>
<a name="286306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's a bit like approaching the speed of light - the faster you go, the heavier you become and more energy it takes to maintain your acceleration.  <br></div><br>Good God man, don't mention that around here! <br><br></td></tr></table><br>
<a name="286526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see why BCD shouldn't be plenty fast enough for a calculator. It doesn't matter if it takes 100 milliseconds to get your an answer, right?<br><br>Can't be that hard to write a BCD library in Blitz.<br><br>Should be almost as fast as getting doubles via DLL-call anyway. <br><br></td></tr></table><br>
<a name="286604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Todd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi julianbury,<br><br>I'm working on writing a 64bit floating point Dll, and it's almost ready for the first version. The downside to using it, of course, is that you don't get to use operators (+,-,/,*) anymore, you're stuck with using functions to add, subtract, multiply and divide. As soon as I work out a couple little bugs, I'll post it here. It should be a little later today. Also, it's written in pure assembler, so it should be plenty fast. I'm also planning on converting it to 80-bit floats, and maybe even BCD. <br><br></td></tr></table><br>
<a name="286773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Guys (^_^)<br><br>BHoltzman: "Mathmatica, student edition? I think it goes for $150"<br>I suppose I could. But - well I wanted to do my own - for fun! Strange, I know :-]<br>iBasic, I'll check that that out. Thanks for the suggestion!<br><br>MSW: PowerBasic another to check out. Thanks<br><br>Michael Reitzenstein: "Good God man, don't mention that around here!"<br>C'mon, Man - we're at least partially adult round here - are we not?<br><br>Rottbott: I'm not sure what you mean by binary coded decimal - is using that anything like doing it all in text? <br>How would you go about finding the square root for a 3D distance to find a gravitational influence?<br><br>Todd: "Also, it's written in pure assembler"<br>Now I'm really impressed! Intel processors have a HORRIBLE instruction set - well, they are compared with ARM processors. <br>If you are considering doing a 10 byte long float (2.5 registers), <br>why not consider keeping to register-sized 4 byte chunks <br>and go for the full bollocks and do a 3 register 96 bit float for that all important reality check? <br>Perhaps you could christen it a "reality float"?<br><br>Just a thort!   ^@@^ <br><br></td></tr></table><br>
<a name="286780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Todd</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here's the first version of the 64-bit float lib. Just unzip the files into a folder, and put the .decls and .dll in your Blitz+ or B3D folder. It also includes a help file that explains each of the commands. It's pretty limited right now, but I'll be improving on it.<br><br><a href="http://s87359783.onlinehome.us/download/float64_100a.zip" target="_blank">Download Float64 Userlib</a> (37.3kb) <br><br></td></tr></table><br>
<a name="286790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >julianbury</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Todd, I've just been looking at it. <br><br>It occured to me to wonder how to keep an array of double. <br>Could your DLL be pursuaded to look after 64bit number arrays?<br>Could you also make 64bit signed and unsigned integers available?<br>Stella distances in meters can be bulky. <br><br>I ask a lot, I know. Blitz is so good at other things that I want to use it for everything. <br><br>(I use it now for stuff more appropriate scripting like automatically creating HTML files for my website or to rename bunches of files.)<br><br>Anyway, your DLL could fill in some of the holes in Blitz. <br><br>BlitzPlus's other major problem is not being able to detect the full suite of keypresses while in a string or text gadget - that has been such a pain! This is probably an inapropriate problem for a DLL to solve - but, you're a real programmer and might know better! <br><br>Well, it's not illegal to hope. <br><br>In principle, could a DLL actually allocate RAM for arrays, should it be required?<br><br>Jeez, I've just gotta find out how to write a DLL!<br><br>^eo^ <br><br></td></tr></table><br>
<a name="286801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Jeez, I've just gotta find out how to write a DLL! <br> <br></div><br>If it's only for personal use, you could download the personal edition of delphi or c++ builder (www.borland.com).<br><br>Alternatively there's something like free pascal ( www.freepascal.org )<br><br>I know Delphi supports the Int64 variable which is a signed 64bit value with the range: -2^63..2^63-1<br><br>freepascal also has int64 support <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
