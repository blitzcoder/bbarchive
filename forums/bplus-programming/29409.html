<!DOCTYPE html><html lang="en" ><head ><title >Wav files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Wav files</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Wav files</a><br><br>
<a name="311157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Coops</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there.<br><br>I wonder if anybody can help...<br><br>Using Blitz+, I want to be able to write a .WAV file from scratch, with all relevant headers and chunks etc.. Which can be read by any Windows program that plays Wav files. (i.e. Soundforge)<br><br>But what I need to know is...<br><br>What format should I write the file?  I mean, should I write the file as 1's and 0's entirely?  Or should there be Hex and ASCI?<br><br>You see, I am programming a physical model of a string, which is easy enough, but being able to compile the data into a listenable form seems much more difficult.  (if not, impossible in Blitz+)<br><br>Could anybody help me please?  I found this site which explains how the structure of a WAV file is organised...<br><a href="http://www.sonicspot.com/guide/wavefiles.html" target="_blank">http://www.sonicspot.com/guide/wavefiles.html</a><br><br>Please Help!!<br>Chris <br><br></td></tr></table><br>
<a name="311192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> www.wotsit.org<br><br>For my own softsynth-stuff I do in blitz, what I usually do is just write it all raw, and alt-tab to soundforge where I load the file as raw.<br><br>Once it's loaded, (and closed), you can load the file again with alt-f 1 (the first file in the filehistory).<br><br>this alt-tabbing works for me.. prolly not much slower than loading the wave file again in blitz. <br><br></td></tr></table><br>
<a name="311202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Coops</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> what do you mean by 'RAW'? <br><br></td></tr></table><br>
<a name="311206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> a raw waveform is uh .. just 'raw' :) without a header..<br><br>Like .txt is raw, because there's no header (like .doc).<br><br>So, just write your sample to a file, and use the raw-converter from soundforge to specify what is what.<br><br>However, I doubt you want to do heavyweight DSP's such as reverb in Blitz, so I assume you write a mono sound to a file. In that case, if your waveform is 16 bit unsigned mono (values between 0..65535), simply choose 16 bit unsigned mono in the raw converter from soundforge (which will show up when you select 'raw' in the filetypes pulldown menu) <br><br></td></tr></table><br>
<a name="311233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Coops</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds ok, and I'm sure you know what you are talking about!<br><br>But is there a way to create a free-standing program in Blitz capable of physical models sounding as they might in virtual reality... ?<br><br>It's important to have the whole program play the sounds<br>cheers <br><br></td></tr></table><br>
<a name="311237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wedoe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did some stuff on this a while back.<br>I post some here when I get home tomorrow (At work now).<br><br>To write a wav-file you just have to write the<br>wav-headers to the file (stereo/mono/hz/etc) and<br>in my case (mono) i just made the wav out of bytes<br>varying from 0-255. Worked a charm.<br><br>Since BB doesn't offer wave-modelling the sound must be<br>written to a file and loaded back with the loadsound command.<br>I'm sure there are DLL's or userlibs out there that can sculpt a sound on the fly tho. <br><br></td></tr></table><br>
<a name="311736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wedoe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The wav-header writer was written by someone else I think, doesn't look like my style, <br>well here it is, set up like a function. Play around with it and see what you get:<br><br><pre class=code>
Function WriteWavHeader(File%, Channels%, Frequency%, Bits%, Samples%)

	Local SampleSize% = Channels% * (Bits% / 8)
	Local WavSize%    = (Samples% * SampleSize%) + 52 ; Size of the wave file - include room for headers
	
	; "RIFF" header text
	WriteByte File%, 82
	WriteByte File%, 73
	WriteByte File%, 70
	WriteByte File%, 70
	
	; Size of the wav file not including the "RIFF" header and this 4-byte file size
	WriteInt File%, WavSize% - 8
	
	; "WAVE" header text
	WriteByte File%, 87
	WriteByte File%, 65
	WriteByte File%, 86
	WriteByte File%, 69
	
	; "fmt " header text
	WriteByte File%, 102
	WriteByte File%, 109
	WriteByte File%, 116
	WriteByte File%, 32
	
	 ; Size of the "fmt " section
	WriteInt File%, 18
	
	; Format - PCM
	WriteByte File%, $01
	WriteByte File%, $00
	
	; Channels
	WriteByte File%,  Channels% And $FF
	WriteByte File%, (Channels% And $FF00) Shr 8
	
	; Samples per second
	WriteInt File%, Frequency%
	
	; Average bytes per second
	WriteInt File%, Frequency% * SampleSize%
	
	; Block align
	WriteByte File%,  SampleSize% And $FF
	WriteByte File%, (SampleSize% And $FF00) Shr 8
	
	; Bits per sample
	WriteByte File%,  Bits% And $FF
	WriteByte File%, (Bits% And $FF00) Shr 8
	
	; Amount of extra information bytes
	WriteByte File%, $00
	WriteByte File%, $00
	
	; "data" header text
	WriteByte File%, 100
	WriteByte File%, 97
	WriteByte File%, 116
	WriteByte File%, 97
	
	; Size of the data section
	WriteInt File%, WavSize% - 52

End Function
</pre><br><br>After you written the wav-header just fill inn the wav-data.<br>Use some sine-curves to get you started. <br><br></td></tr></table><br>
<a name="312138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Coops</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are an absolute star!<br><br>Thankyou so much.<br><br>Is there any tips you can give as to what numbers to use as the data?<br><br>Coops <br><br></td></tr></table><br>
<a name="312191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wedoe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not really, just play around with it, short sine-curves are a good start.<br><br>Like: 0,1,3,10,20,30,40,50,60,70,80,90,100,107,109,110,109,107,100,90,80,70,60,50,40,30,20,10,3,1,0<br>(Not actually a sine, just from the top of my head as a start.)<br>The curve should vary from -127 to + 127 IFAI can remember. <br><br></td></tr></table><br>
<a name="312278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look in that "cool demos in blitz" thread in the general forum.  My pong example near the bottom of the thread uses this function to write a wave file header and then fills the file with a 16 bit 44khz sound effect which I generate dynamically.<br><br>The file shows how to make a ping noise with a sine wave, and static, both of which fade out over time.  The code is kinda messy though.  And I'm not entirely positive I wrote the sine wave out to the file properly.  Sounds kinda harsh.  But it's a start. :-)<br><br>Oh and 8 bit sounds vary from -127 to 128.  16 bit goes from -32767 to 32768. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
