<!DOCTYPE html><html lang="en" ><head ><title >Why Flip for Frontbuffer()?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why Flip for Frontbuffer()?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Why Flip for Frontbuffer()?</a><br><br>
<a name="285884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In B+ you now require a flip command after drawing to the frontbuffer, any idea why?<br><br>Edit:<br>Ah, after reading more carefully in the docs it's only there for compatibility and returns the same reference as backbuffer(). Hm, Can't say I understand why you would remove frontbuffer? I use it to update a progress bar when loading to save myself from flipping and keeping track of two buffers. It also killed my pixel screenfades that were writing black pixels to the frontbuffer to blank out.<br>I'll rethink. <br><br></td></tr></table><br>
<a name="285922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seldon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can agree with you, to draw directly to FrontBuffer() is something should be still allowed to programmers. Anyway, I tried the demo and there are still 2 buffers there. For the progress bar, you can use a splash window on desktop and then you open the full screen. <br><br></td></tr></table><br>
<a name="286236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I remember right Mark told me that B+ can not write to the FrontBuffer() the same as Blitz 2D/3D do to MS's DX. Apparently DX does not actually support it. :)<br><br>L8r, <br><br></td></tr></table><br>
<a name="286239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, fair enough if it's not actually DC supported =)<br><br>I worked around it with<br><br><pre class=code>
VWait
Flip False
setbuffer backbuffer()
&lt;do changes here&gt;
Flip False
</pre> <br><br></td></tr></table><br>
<a name="286244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you are going to do vwait and then flip false you might as well just do a flip true<br><br>Skully <br><br></td></tr></table><br>
<a name="286299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed that "Flip [True]" doesn't actually wait for the VSync if graphics cards are configured to High performance. In the DX setup on my Radeon card I set my settings slider to high performance to test and it doesn't wait for the VSync with Flip True =(<br><br>By writing:<br> VWait<br> Flip False<br>...instead of "Flip True" it will wait for the VSync despite any graphic card settings.<br><br>Stefan <br><br></td></tr></table><br>
<a name="286317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by doesn't actually wait, are you referring to the GPU or the CPU? <br><br>The True in Flip True tells the GPU to wait for vsync b4 flipping.<br><br>Vwait on the other hand commands the CPU to busy wait for vblank.<br><br>I wouldn't recomend VWait:Flip False, from my experience low end cards such as Matrox Milleniums will tear easily due to rendering still being performed by the GPU. <br><br></td></tr></table><br>
<a name="286325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, not sure how to get the best result then.<br><br>If I have a loop, like:<br><pre class=code>
   Setbuffer backbuffer()
   &lt;do stuff here that is required once per screen refresh&gt;
   Flip True
</pre><br><br>..and my Direct3D settings have been configured for  performance before quality (Radeon 9700), the "Wait for Vertical VSync" option is changed to "Always off" instead of "Application Preference". Unfortunately the 2D routine I make relies on the screen only being updated once per sync.<br><br>I suppose what I could do is to implement something that detects this. In a split second a loop can determine whether it's running much faster than the refresh rate and "VWait: Flip False" is used, but under normal circumstances "Flip True" is used.<br><br>Thanks for the info on VWait by the way. <br><br></td></tr></table><br>
<a name="286345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2D over different refresh rates and different VSync modes is probably one of the toughest problems to crack. How can you have the game the same speed on 60hz as 85hz without it jerking everywhere?<br><br>With my engine (you can read about it in the worklogs), I have simply copied the 3D tweening system, updating the game at only 58.82fps (17 millisecs exactly), and then tweening object positions between that. It looks quite good on 60hz, and ok on 85hz (and anything else), and will run the same speed even if you are only getting 15fps. <br><br></td></tr></table><br>
<a name="286351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Michael &gt;&gt; I agree, these problems are really bugging me but I realise that a good compromise has to be found. I am quite happy with the smoothness of my game now, it updates on every screen sync but the game also runs at the same rate as the frequency. I solve it by using a multiplier that will scale the movements appropriately with floats, it is not 100% perfect as some things may slightly differ in 60Hz vs 120Hz. I'd be interested to have a look at your engine anyway, just in case. How would your engine cope if vsync is forced off and the game effectively runs at something like 300fps?<br><br>So, at the moment, I think I can accept the smoothness vs different refreshrates... and I'll have to use that checker whether vsync is forced off or not on graphics cards.<br><br>Stefan <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
