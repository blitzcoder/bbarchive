<!DOCTYPE html><html lang="en" ><head ><title >Fastest way to add a lot of data... adding wavs</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fastest way to add a lot of data... adding wavs</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Fastest way to add a lot of data... adding wavs</a><br><br>
<a name="340926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to add a whole lot of data together. Specificly, I am rendering songs by combining individual wav files. Right now I am storing the wav files in a bank, and I am going to each two byte block and adding them in a for next loop. <br><br>This is EXTREMLY SLOW. What takes about 30 seconds to render in fruityloops with effects takes about a day and a half to be rendered with my blitz program. <br><br>I am assuming that for-next loops are just extremly slow, but is there some other way in blitz to add banks (or arrays) together. Is there some mass bank adding function? <br><br></td></tr></table><br>
<a name="340991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> not that I know of ..<br><br>..but MY GOD, what are your intentions? making a tracker or what? :) <br><br></td></tr></table><br>
<a name="341005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ..but MY GOD, what are your intentions? making a tracker or what? :)  <br></div><br>Kind of. My intention is to create a program that generates music, so that that huge music files do not need to be downloaded.<br><br>Your game program would generate audio files on install, and you would have full quality CD sound music files in a 1.5 meg download (I would also convert them to .ogg with an included external program).<br><br>The problem is that it is just TOO SLOW! I mean, it is insanely slow. I have tried everything I know in order to speed it up, but I cannot speed it up. This is definitly some flaw in Blitz, because, like I said, I have other programs that can do the exact same thing in less than 30 seconds. <br><br></td></tr></table><br>
<a name="341014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're sure debug mode isn't enabled?  ;)<br><br>Do you have to worry about overflow when working with the bytes? <br><br></td></tr></table><br>
<a name="341021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Debug definitly isn't enabled!!! :) First thing to check!<br><br>I don't have to worry about overflow, or at least not now. I AM checking for overflow and limiting that, but that isn't the slow part (I tried removing it, and it was still slow). <br><br></td></tr></table><br>
<a name="341026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Kind of. My intention is to create a program that generates music, so that that huge music files do not need to be downloaded.  <br></div><br><br>kinda like I did -years ago- for Gizmozone inc .. but then with downloadfiles of 1..20kb :) (www.gizmozone.com .. search the ixs player and the ixs files)<br><br>I might even do some music-generating things (conventional music, not art-stuff :), but I'd just generate the notes then. I would write the notes to some format (like a trackerformat) so that all notes appear in my pattern editor, and then I'll add the instruments myself .. but I guess this is not exactly what you wish :) <br><br></td></tr></table><br>
<a name="341094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oso</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of curiosity I just tried looping through two banks of 1,000,000 bytes each and doing a few additions and a division with them. (Using peek and poke) It takes about 60 milliseconds on this fairly old computer here at work where I am now. Do you do a tremendous heap of interpolation using polynomials or something similar ? There must be more to it than adding two banks together. <br><br></td></tr></table><br>
<a name="341110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... Maybe I am doing something wrong. The files I am using would be a lot bigger...<br><br>44100(samples per second) * 5(minutes per song) * 60(seconds per minute) * 2(channels) * 2(2 bytes per 16 bit word) * 10(tracks per song) =  529200000<br><br>So it would be 529 times as long as your 1,000,000 iterations... but still 529 at 60 milliseconds would be about 31740 milliseconds (or about 30 seconds, same as it takes with fruityloops)...<br><br>I guess there is something I am not catching in my code! <br><br></td></tr></table><br>
<a name="341112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doing all 10 tracks in parallel will put a lot more strain on virtual memory than allocating just two banks accumulating each track sequentially. <br><br></td></tr></table><br>
<a name="341115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I solved the problem (thanks you guys for the help)!!!<br><br>Here is the problem:<br>I was calling a function to do the addition, which was calling several other functions, which was calling several other functions...<br><br>I simply copied and pasted the code from those other functions into the loop (so it wasn't making any function calls in the loop), and low and behold, it is rendering the sound in about 30 seconds!!!<br><br>I didn't know that all those function calls really slowed things down so much! <br><br></td></tr></table><br>
<a name="341135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oso</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think we've all done that, Rex. Using functions recursively is no doubt very structurally elegant, but get one variable wrong and it can produce a hell of a mess. In the old days of IBM34 at work (not at IBM itself, I hasten to add)I wrote a procedure which called itself twice from each parent. The whole system ground to a halt in a few seconds and had to be switched off and on to make it work. Funny how the ones most interested in getting a copy of it were the IBM engineers themselves.<br><br>I'm pleased you solved everything. <br><br></td></tr></table><br>
<a name="341145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehehehehe at 600,00,000 calls to a function, you tend to get slow down aye ^_^ ?<br><br>your system sounds like a clever idea. Somone from Acoders wrote a mod file format similar, that packs all the samples from your whole soundtrack into 1 data file. Then your music files will be a 1k music sheet that tells the engine how to play.<br><br><a href="http://syntesis.ath.cx/docs/wsf/html/" target="_blank">http://syntesis.ath.cx/docs/wsf/html/</a><br><br>Theres a library + dll that can be used (with userlib) in blitz. Just goto the download page :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
