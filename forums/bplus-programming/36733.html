<!DOCTYPE html><html lang="en" ><head ><title >Saving Types</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Saving Types</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Saving Types</a><br><br>
<a name="402513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm Trying to save types, and when  loading, replace the values in each of the types with the ones that had been saved, eg:<br>;---------<br>(saving preperation etc)<br>for d.door=each door<br>    d\open=writeint(save, d\open)<br>next<br>(loadingpreperation etc)<br>for d.door=each door<br>    d\open=readint(load, d\open)<br>next<br>;---------<br>It works. It reads the variable correctly, but when i for example open a locked door, and then load from the last saved file, that door will now be open, not locked.<br>any ideas on why?<br>Could it be anything to do with locked doors having 'd\open'=0 (as default)? <br><br></td></tr></table><br>
<a name="402520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> So either the save file is being changed from what you expect, or it's not loading it right, or the door is being changed after you reload.  Can you figure out which one? <br><br></td></tr></table><br>
<a name="402530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> if i load the doors open value(=0)and its currently=1, then it remains=1, <br>but when i load it(=1) and its currently=0, it works and loads it=1<br><br>load(0): if 1 remains 1<br>load(1): if 0 becomes 1 <br><br></td></tr></table><br>
<a name="402598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If this were C I'd say you could be getting == and = mixed up... =)<br><br>Could you post some more code? <br><br></td></tr></table><br>
<a name="402607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> d\open=writeint(save, d\open) <br></div>Why would you change the variable as you save it?  Shouldn't this just be:<pre class=code>writeint(save, d\open)</pre> <br><br></td></tr></table><br>
<a name="402615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, duh. sharp eye, wolron!  since writeint returns true, open=1!<br><br>pblt[pth <br><br></td></tr></table><br>
<a name="403232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops, thats just me remmembering my code wrongly: Heres the actual code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
      (saving prep etc)
		For d.door=Each door
			WriteInt( savestate,d\open)
		Next
      (loading prep etc)
                For d.door=Each door
	                d\open=ReadInt(loadstate)
                Next


</textarea> <br><br></td></tr></table><br>
<a name="408555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump: <br><br></td></tr></table><br>
<a name="408603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's nothing wrong with that code; the problem is elsewhere. <br><br></td></tr></table><br>
<a name="408613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming the doors are in the same order in memory that they were when they were saved... <br><br></td></tr></table><br>
<a name="409107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep: All created when the program begins in the exact same order every time. <br><br></td></tr></table><br>
<a name="409141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So if the guesses we've already made aren't enough for you, we'll need more information (i.e. code) <br><br></td></tr></table><br>
<a name="409175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tiger</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you load your doors, have you create them with new??<br><pre class=code>
Repeat
D.Door=New Door
D\Door=ReadInt(Loadstate)
Until Eof(Loadstate)
</pre> <br><br></td></tr></table><br>
<a name="409250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, i just declare the variable equal to read integer like so:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
for d.door=each door 
d\open=readint(load, d\open) 
next
</textarea><br>i'll try that if all else fails, but it i'd like to get it working the way it is <br><br></td></tr></table><br>
<a name="409447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ryan Moody</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>What I suggest is that when you load a saved game, you delete all the level's current info and then recreate the level using the saved info. That way, you eliminate 'update' errors and could then see if all the data is actually being saved correctly.<br><br>Example Code:<br>Delete Each Door<br>LevelFile=ReadFile("Level.dat")<br>No_Of_Doors = ReadInt(LevelFile) <br>;Doors in the level is the first thing saved in the datafile<br>For N=1 to No_Of_Doors<br>     doors.Door = New Door<br>     doors\open = ReadInt(LevelFile)<br>     .<br>     . (Other Data)<br>     .<br>Next<br>CloseFile(LevelFile)<br><br>Another cause of your problem might be to do with what your saving - Be careful if you're saving loads of variable length strings as they could be overwriting the data which concerns the doors' open/closed status.<br><br>Hope this helps!<br><br>Ryan<br><br>P.S. How do you insert code into a forum post with the black background and green text format? <br><br></td></tr></table><br>
<a name="409620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> {codebox} code goes here {/codebox}<br><br>Like that, only with square brackets<br><br>I do reload the level, its just that doors and treasure chests are not reloaded, as wether the have been opened or not, is constant throughout the game (rpg)<br>i dont want to read a file for each area because then i'd have to have one, for each area, for each savestate.<br>It could be done (eg: readfile(savestatename$+"a_1")<br>but with several hundred areas id prefer having one savestate file for each game user.<br>i could of course opt to go to a particular line to read, but that would end up getting really messy.<br>I geuss i'll just have to try deleting all the doors themselves, then recreating them with the read integer (like tiger said:thanks)<br>Thanks 4 everyones help. strangely though the treasure chests work fine.. yet the same way.<br>This battle may not be won yet!<br><br>ps:i,ve not quite got to the place of saving strings, but when i do that'll come in handy, thanks Ryan.<br>(i'm leaving the main game menu till last, so i can test things really quickly)<br><br>Edit: Thanks, Its working now!------------------------&gt;&gt;:) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
