<!DOCTYPE html><html lang="en" ><head ><title >Creating Scanlines</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating Scanlines</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Creating Scanlines</a><br><br>
<a name="484559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm affraid I allready know the answer, but is it possible to<br>create a scanline filter? (see picture below).<br>This is a 50% opaque filter done in Photoshop.<br>This filter is probably even harder to realize than an<br>odd/even scanline.<br><br>I'm trying to simulate an arcade screen/tv set feeling for my<br>new game Sokorat. This way it looks way better than a<br>sharp monitor in my opinion.<br><br>I found a topic on this subject before but maybe someone<br>did figuere it out by now.<br>Otherwise. Blitz team... plase make a plug-in/dll for this in<br>one of the next B+ versions. Is shouldn't be that hard I<br>guess.<br><br>Regards, Randy<br><br><img src="http://www.opslag.tmfweb.nl/sokorat.jpg"> <br><br></td></tr></table><br>
<a name="484620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean something global you can apply to a whole screen buffer, or some pre-calcing to your tiles? The latter one shouldn't be that hard I think.. <br><br></td></tr></table><br>
<a name="484694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I prefer a global filter. In that way I am much more flexible. <br><br></td></tr></table><br>
<a name="484715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GitTech</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you create a white image, with black lines and set the transparency color for that image to white? And then draw that image over the screen? <br><br></td></tr></table><br>
<a name="484721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In his example image the scanlines aren't full black tho.. :) <br><br></td></tr></table><br>
<a name="484745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed GitTech. If I'm not be able to make half-transparant<br>scanlines, I stick with that option. IMO also way better than<br>no scanlines at all. <br><br></td></tr></table><br>
<a name="485305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> two really bad methods in Blitz:<br><br>writpixelfast the scanlines as half the (r g and b) of the read values underneath (BAD)<br><br>line a black line where the scanlines are every second frame (ALSO BAD) <br><br></td></tr></table><br>
<a name="485322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is speed an issue?<br><br>What about stretching the picture to twice the real size, then draw almost black scanlines to every second line, then stretch the picture back to original size. Could result in interesting effect, especially if you'd give scanlines some randomness.<br><br>Don't know if stretching in B+ is up to the task, though. <br><br></td></tr></table><br>
<a name="486278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about that Arctic fox. However. This game must be<br>flexible for graphic artists because I want to add an import<br>tileset function into the game. The tiles are 17*21px original<br>size. The gfx procedure must be simple so everyone can<br>make tilesets without stretching and adding a scanline filter<br>to it.<br><br>So what I have done is: I made a bitmap with black lines<br>and purple lines (purple=transparent)<br>Unfortunally it is not half-transparent.<br>The tiles are stretched within the game to double sized<br>tiles. On top of that there is the scanline image. Works<br>pretty fast though. but I need it to be tested on a<br>moderate system.So any volenteers in the near future?<br><br>You can get a free full version ;) <br><br></td></tr></table><br>
<a name="486289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually I ment it the very same way you ended up doing it. :) <br><br>Though I had in mind that you would have stretched the image back to normal at the end, thus making the scanlines a bit blurry and more random. <br><br></td></tr></table><br>
<a name="486500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your right Arctic Fox :) But my main issue was that graphic designing should be easy for third party graphic artists without<br>adding filters themself. <br><br></td></tr></table><br>
<a name="486573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lattyware</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'but I need it to be tested on a<br>moderate system.So any volenteers in the near future? '<br><br>I'll do it. E-mail me. <br><br></td></tr></table><br>
<a name="486574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might not be an option, but couldn't you use a quad over the screen in 3d, to get the alphaness? <br><br></td></tr></table><br>
<a name="487372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I thought that, Ross. It'd probably need to be the right size, and disable antialiasing on the sprite to avoid it blurring out between the lines. <br><br></td></tr></table><br>
<a name="487440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C,<br><br>How do you achieve "a quad over the screen in 3d" in BlitzPlus?<br><br><br>Koekebakker,<br><br>Are you sure you couldn't do scanlines with the alphablending codes of the Code archives? I did some experimenting with them and it was faster than I thought it would be. I think alphablended scanlines are doable. <br><br></td></tr></table><br>
<a name="487454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL - y'know for some reason I thought this was in "B3D programming".... oops!<br><br><br><div class="quote"> <br>How do you achieve "a quad over the screen in 3d" in BlitzPlus? <br> <br></div><br><br>That IS a tough one, heh! <br><br></td></tr></table><br>
<a name="487457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can only think of 2 solutions..<br><br>- create the scanlines in the actual tiles<br>- grab the output screen, manually color-dim each odd line<br><br>that last one does cook a bit eh ^____^ <br><br></td></tr></table><br>
<a name="487462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> and option 3<br><br>Create 2 sets of the same tiles! But one set has 50% darker tiles!<br><br>Now, build your map with the light ones in imagebuffer 1, build the map with the dark ones in imagebuffer 2, add purple scanlines over the dark one, and DrawImage the dark buffer on the light buffer using maskcolor for purple ..<br><br>didn't check or test it tho .. <br><br></td></tr></table><br>
<a name="487473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> woiks!<br><br>Here you are :)<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; scanlines

window=CreateWindow("5c4nl1n35 - CS_TBL",0,0,640,480)

Global canvas=CreateCanvas(8,8,512,256,window)

; tilesets

Global tilesmain=CreateImage(64,64)

; create the light tiles
SetBuffer ImageBuffer(tilesmain)
	For t=0 To 99 ; random puke
		r=Rnd(255):g=Rnd(255):b=Rnd(255)
		x=Rnd(32):y=Rnd(32)
		f=Rnd(2)
		Color r,g,b
		Rect x,y,32,32,f&gt;1
	Next
SetBuffer DesktopBuffer()

; create the dark tiles
Global tilesdark=CopyImage(tilesmain)
DarkenImage(tilesdark,50) ; 50% dark


; make 2 gamebuffers
Global gamebuffer1=CreateImage(512,256)
Global gamebuffer2=CreateImage(512,256)
MaskImage gamebuffer2,255,0,255



Repeat
	WaitEvent()
	If EventID()=$803 quit=True
	Main()
Until quit
End

Function Main()

	SetBuffer ImageBuffer(gamebuffer1)
		Cls
		; draw your game here
		DrawImage tilesmain,EventX(),EventY()

	SetBuffer ImageBuffer(gamebuffer2)
		Cls
		; and here too, but now the dark tiles
		DrawImage tilesdark,EventX(),EventY()

		; add purple scanlines
		For t=0 To ImageHeight(gamebuffer2)-1 Step 2
			Color 255,0,255
			Line 0,t,ImageWidth(gamebuffer2)-1,t
		Next
		
	SetBuffer CanvasBuffer(canvas)
		; and add the whole lot together..!
		DrawBlock gamebuffer1,0,0
		DrawImage gamebuffer2,0,0
	FlipCanvas canvas
	
End Function

Function DarkenImage(img,percent)
	If percent&lt;0 percent=0
	If img
		SetBuffer ImageBuffer(img)
			For y=0 To ImageHeight(img)-1
				For x=0 To ImageWidth(img)-1
					GetColor x,y
					r=ColorRed()*percent/100
					g=ColorGreen()*percent/100
					b=ColorBlue()*percent/100
					If r&gt;255 r=255
					If g&gt;255 g=255
					If b&gt;255 b=255
					Color r,g,b
					Plot x,y
				Next
			Next
		SetBuffer DesktopBuffer()
	EndIf
End Function
</textarea> <br><br></td></tr></table><br>
<a name="487718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow CS_TBL, this rocks! thanks a lot.<br>Reasonably fast and easy to work with.<br>I was affraid that processes like this will slow down but I'm happely suprised it did'nt.<br><br>P.S. Lattyware, I'll mail you in one of the next days.<br>Back to coding again. <br><br></td></tr></table><br>
<a name="487839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Once you have a 'running' game with this 'filter', can you post a link then? I'd prefer to see this method running with an actual game to ensure the performance holds :)<br><br>(tho it did run with the same performance in debugmode here :) <br><br></td></tr></table><br>
<a name="487911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem :) <br><br></td></tr></table><br>
<a name="487944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekebakker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> At second thought I'm not fully satisfied with the speed<br>though. So I pre filter the tiles with a small routine.<br><br>since the game act like it is a low res game the smallest step<br>in graphic movement is 2 pixels means the scanlines align<br>every time without any problems.<br><br>Problem solved! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
