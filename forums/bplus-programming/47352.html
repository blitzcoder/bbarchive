<!DOCTYPE html><html lang="en" ><head ><title >Does 'keydown' work in B+ alongside Waitevent()?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Does 'keydown' work in B+ alongside Waitevent()?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Does 'keydown' work in B+ alongside Waitevent()?</a><br><br>
<a name="526306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll post some code later today (when I'm at my dev PC) but I have been having trouble detecting keyboard input using keyhit/keydown while in a loop "while waitevent()...stuff goes here... wend".  The window I have has a canvas and some buttons.  What I am trying to do is move the cursor over the canvas with the mouse and use the keyboard at the same time.  <br><br>from memory the code, is something like:<br><br><pre class=code>
timer=createtimer(60)
while waitevent()

select eventid()

;a few events are checked for here like $401, $803 
case $803
end ;for example

case $4001 ;the timer event, although this problem occurs even if I have the keydown statement outside of the select statement.
if keydown(203) then notify("Yes I did push the left cursor key so why doesn't this message appear")
flushevents $4001

end select

wend

</pre> <br><br></td></tr></table><br>
<a name="526381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you use GetASyncKeyState? <br><br></td></tr></table><br>
<a name="526399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't see that command in the docs.  It's not in the downloadable documentation or the online one - what does it do? <br><br></td></tr></table><br>
<a name="526470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's in some standard DLL (dunno which one), it's basically an advanced keyboard reader.. I don't use anything else anymore, like keydown, hotkeyevent etc. etc.<br>- it keeps the focus (yay!)<br>- it also works when you switch to another app (like mIRC .. highly inconvenient as you can imagine, but ofcourse you can code that the keyboardroutines don't work when you switch app)<br>- it features key-repeat<br><br>I made (and published) some nice standard routines a few months ago.. I'll try  to dig them up.<br><br>'ere: <a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=44780" target="_blank">http://www.blitzbasic.co.nz/Community/posts.php?topic=44780</a> <br><br></td></tr></table><br>
<a name="526493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need to use GetASyncKeyState for that, the window is still in focus is it not?<br><br>You should be detecting it like this...<br>If EventID()=$101 and EventData()=203 Then Notify ("Left Key Pressed")<br><br>or using Select/Case...<br>Select EventID()<br>Case $101<br>If EventData()=203 Then Notify ("Left Key Pressed")<br>End Select<br><br>GetASyncKeyState is a function in the User32.dll lib btw. <br><br></td></tr></table><br>
<a name="526499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nicstt</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> keyhit stops working once most gadgets have been clicked, the exception ive noticed so far is slider controls <br><br></td></tr></table><br>
<a name="526500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You shouldn't be using KeyHit or KeyDown with WaitEvent() or windowed apps, they are meant for full screen use.<br><br>Why do you think there are specific events allocated for detecting keys?<br><br>KeyDown = EventID() $101<br>KeyUp = EventID() $102<br>KeyStroke = EventID() $103 <br><br></td></tr></table><br>
<a name="526631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> How then do you detect two or more events that happens simultaneously though?  If I have multiple keys being pressed then normally  (in blitzbasic and blitz3d) I can simply check various scancodes with keydown.  There doesn't seem to be a 'queue' of events that I can iterate through to do this with events $101/$102/$103.  Same goes for both mouse and keyboard input at same time. <br><br></td></tr></table><br>
<a name="526634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There doesn't seem to be a 'queue' of events that I can iterate through  <br></div><br>Yes there is.  Try PeekEvent. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
