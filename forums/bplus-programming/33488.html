<!DOCTYPE html><html lang="en" ><head ><title >Moving object from point to point...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Moving object from point to point...</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Moving object from point to point...</a><br><br>
<a name="361147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo to all.<br>I'm writing a couple of function for moving object across the screen;the difficult (for me) is that i don't know how to moving an object from poin A to point B.<br>If i decide that point a is (example) 200,100 and point b is the player position (example) 400,400 , how can i tell my enemy the direction that is going to follow?(all in pixel unit)<br>Example: enemy x100 y200<br>         player x400 y400<br>enemy must go from x 100 y 200  to  x400 y400  of one pixel at a time.<br><br>I think that math is involved (very very bad at that....) something like calculation of the angle of the distance ecc ecc is right?<br>If not there are other simplier method of doing this?<br>Thanks in advance. <br><br></td></tr></table><br>
<a name="361232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've also read of look-up table....what are these for? <br><br></td></tr></table><br>
<a name="361240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have searched forr look-up tables and found this piece of code....<br>But if you cut&amp;paste and execute....when those object have made a movement...i have "array out of bounds" error.....<br>Here's the code:(don't remember how to paste correctly in the forum...)<br><br><br>;SIN/COS Lookup Table<br>Dim Sin2#(360)<br>Dim Cos2#(360)<br>For loop=0 To 359<br>	Sin2#(loop)=Sin(loop)<br>	Cos2#(loop)=Cos(loop)<br>Next<br><br><br><br><br><br><br><br><br><br><br>Const scrX=320,scrY=240<br>;------------------------------------<br>Global r1#,r2#,r3#<br>;------------------------------------<br>;setup<br>Graphics scrX,scrY,32,2<br>SetBuffer BackBuffer()<br>;------------------------------------<br>;loadgrafx<br>Global backGnd=LoadImage("go.bmp")<br>Global enemys=LoadImage("enemy.bmp")<br>;------------------------------------<br>;loop<br>While Not KeyDown(1)<br>Cls<br>TileImage backGnd,ixTim,iyTim <br>circleMov()<br>strightMov()<br>updownMov()<br><br>Flip<br>Wend<br>End<br>;Circle Motion<br>Function circleMov()<br>	x1=160+Sin2#(r1)*32<br>	y1=64+Cos2#(r1)*32<br>	DrawImage enemys,x1,y1<br>	r1=r1+2.5<br>End Function<br>;------------------------------------<br>;Forward &amp; Backward Motion<br>Function strightMov()<br>	x2=144+Sin2#(r2)*32<br>	y2=192<br>	DrawImage enemys,x2,y2+2<br>	r2=r2+2.5<br>End Function<br>;------------------------------------<br>;Up &amp; Down Motion<br>Function updownMov()<br>	x3=144<br>	y3=124+Cos2#(r3)*32<br>	DrawImage enemys,x3,y3+2<br>	r3=r3+2.5<br>End Function<br><br><br>I think i have this error because when i reach 360 degrees the lookup table must be reset to o.....don't know how!<br>Thanks. <br><br></td></tr></table><br>
<a name="361245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you dont care about the angle but just want to know how much the object has to move in the x and y directions each frame to move at a speed of 1 pixel then you could just do the following ( using the example you gave for the values:<br><br>1. Find the total distance in the x and y directions.<br><br>   xmove = 400 - 200 = 200<br>   ymove = 400 - 100 = 300<br><br>2. If you treat this as 2 lines of a right angled triangle then you can find the straight line distance between the start and end position.<br><br>   distance = SQRT(200 * 200 + 300 * 300 ) = 360.5551<br><br>So in a straight line the distance is 360.5551 pixels.<br><br>3. If you divide the xmove and ymove by the total distance you will get the distance you have to move in the x and y directions to move 1 pixel distance.<br><br>   xmove = 200 / 360.5551 = 0.5547<br>   ymove = 300 / 360.5551 = 0.8320<br><br>There you have it. If every frame you add xmove and ymove to your sprite x and y position it will move towards your target at a speed of 1 pixel.<br><br>I hope that makes sense and is actually correct. Im not at my machine so I cant prove it but Im sure I will be corrected if this is wrong. <br><br></td></tr></table><br>
<a name="361254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very very thanks!!!<br>Yes that make sense at all :P<br>I don't know very well this sort of math things (even if they interest me a lot...i think i can buy some math books)<br>Your piece of information has give me a great boost.<br>I have corrected the code above (i have reach discovered the error!it was't in the look-up table but in the function determining the angle!).<br>I have another question:i have read to use sin-cos table to give some speed boost to my code,the function that you tell me "SQRT" is cpu intensive?<br>Because i use these function to move a lot of object onscreen at the same time.<br>Here's the correct code:<br><br>Dim Sin2#(360)<br>Dim Cos2#(360)<br>For loop=0 To 359<br>	Sin2#(loop)=Sin(loop)<br>	Cos2#(loop)=Cos(loop)<br>Next<br><br><br><br><br><br><br><br><br><br><br>Const scrX=320,scrY=240<br>;------------------------------------<br>Global r1#,r2#,r3#<br>;------------------------------------<br>;setup<br>Graphics scrX,scrY,32,2<br>SetBuffer BackBuffer()<br>;------------------------------------<br>;loadgrafx<br>Global backGnd=LoadImage("go.bmp")<br>Global enemys=LoadImage("enemy.bmp")<br>;------------------------------------<br>;loop<br>While Not KeyDown(1)<br>Cls<br>TileImage backGnd,ixTim,iyTim <br>circleMov()<br>strightMov()<br>updownMov()<br><br>Flip<br>Wend<br>End<br>;Circle Motion<br>Function circleMov()<br>	x1=160+Sin2#(r1)*32<br>	y1=64+Cos2#(r1)*32<br>	DrawImage enemys,x1,y1<br>	r1=r1+2.5<br>	If r1=&gt;359 Then r1=0<br>End Function<br>;------------------------------------<br>;Forward &amp; Backward Motion<br>Function strightMov()<br>	x2=144+Sin2#(r2)*32<br>	y2=192<br>	DrawImage enemys,x2,y2+2<br>	r2=r2+2.5<br>	If r2=&gt;359 Then r2=0<br>End Function<br>;------------------------------------<br>;Up &amp; Down Motion<br>Function updownMov()<br>	x3=144<br>	y3=124+Cos2#(r3)*32<br>	DrawImage enemys,x3,y3+2<br>	r3=r3+2.5<br>	If r3=&gt;359 Then r3=0<br>End Function <br><br></td></tr></table><br>
<a name="361299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK.. I think I understand what you are after now. The solution I gave would be good if you wanted to move objects along straight lines or where you only need to make the calculation whenever the object target has changed.<br><br>If your objects are moving in a circular motion then I think your method is probably the way to go. <br><br>Are all your objects going to be using a radius of 32 ?<br>If they are then you can create your lookup tables to store the values multiplied by 32 and your main code doesnt need to do a multiply for each object. <br><br></td></tr></table><br>
<a name="361319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made 32 only accidental....<br>If i make "*32" after "sin(loop)" in the upper portion of the code...my lookup table is going right?<br>Or i'm making errors??? <br><br></td></tr></table><br>
<a name="361385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here i have modified my code to see if it move straight like you tell me...<br>But the object don't move at all O_O'<br><br>Here's the code:<br><br>Graphics 800,600,32,2<br>SetBuffer BackBuffer()<br><br>Global go=LoadImage("go.bmp")<br>Global enemy=LoadImage("enemy.bmp")<br>MidHandle go<br>MidHandle enemy<br>Global xmove2<br>Global ymove2<br>Global velocita=1		<br>xpart=100<br>ypart=100<br>xdest=600<br>ydest=300<br>x=xpart<br>y=ypart<br>xmove=xdest-xpart	<br>ymove=ydest-ypart	<br>distance=Sqr(500*500+200*200)						<br><br><br>;MAIN<br>While Not KeyDown(1)<br>xmove=500/distance<br>ymove=200/distance<br>Cls<br>DrawImage go,xdest,ydest<br>DrawImage enemy,x,y<br>x=x+xmove<br>y=y+ymove<br>Print distance<br>Flip<br>Wend<br>;END<br><br>Don't know where i make errors. <br><br></td></tr></table><br>
<a name="361694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry about the slow reply I didnt get time last night to check the forums.<br><br>Once again Im at work so I cannot test this but I think I can see the problem. <br>You need to change the code after your ;Main comment to be:<br><br>While Not KeyDown(1) <br>x=x+ xmove <br>y=y+ymove <br>Cls <br>DrawImage go,xdest,ydest <br>DrawImage enemy,x,y <br>x=x+xmove <br>y=y+ymove <br>Flip <br>Wend <br>;END <br><br>I hope that fixes it for you :) <br><br></td></tr></table><br>
<a name="361699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for bothering you,but i already tryiedn to change into what you tell me but don't work....<br>And if i never used the distance between object i don't know where to go. <br><br></td></tr></table><br>
<a name="361760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Réno</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;taget A to B<br><br>x1#=300.0;A position X<br>y1#=300.0;A position Y<br><br>x2#=0.0;B position X<br>y2#=0.0;B position Y<br><br>x#=0.0;bullet position X<br>y#=0.0;bullet position Y<br>speed#=1.0;bullet speed<br><br>angle#=0.0;angle<br><br><br>;game loop<br><br>angle=ATan2((y2 - y1),((x2 - x1));do it just one time<br><br>x=(x+Cos( angle ))*speed)<br>y=(y+Sin( angle ))*speed)<br><br>drawblock yourimage,x,y <br><br></td></tr></table><br>
<a name="361795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok this works,but i notice that when the object is near the end accelerate itself O_O' <br><br></td></tr></table><br>
<a name="362294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Réno</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You must use floats !! <br><br></td></tr></table><br>
<a name="362387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes i have used float.<br>But it seems to me that accelerate itself near the end....maybe it's my impression. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
