<!DOCTYPE html><html lang="en" ><head ><title >Of saving, passwords, and Nintendo...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Of saving, passwords, and Nintendo...</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Of saving, passwords, and Nintendo...</a><br><br>
<a name="923727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's seemed to me that, even back in the days of the Nintendo Entertainment System, a lot of the bigger adventure games -- The Legend of Zelda, Kid Icarus, Metroid, Kirby's Adventure -- used either a password or saving system. The trouble is, I don't know exactly how one would go about implementing either in less than a hundred or so lines -- or even if it would be possible. (Not that I'm anywhere close to having a game big enough to need a password system, just I'm interested in the idea and any shortcuts relating to it.)<br><br>I would imagine that a password system would be the simpler one, as it would exist entirely in the game instead of having to save data elsewhere. However, I don't understand exactly how one could set up an efficient password system (or at least one as big as the ones in Kid Icarus and Metroid), especially with that many possibilities. I suppose it would be possible to take a few keys and take their scan codes to test, something like this:<br><br>If KeyHit(M)<br>     For space.space = Each space<br>          If space\active = 1<br>               space\no = M ;As M is now the variable for M's scan code<br>          EndIf<br>     Next<br>EndIf<br><br>However, I haven't tried that yet, I don't know it would work, and I only have really small games to try it with right now anyway. If you know about this kind of thing, could you please explain it to me?<br><br>Thank you!<br>Tomas Khan <br><br></td></tr></table><br>
<a name="923751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well for saving, you do have to use some form of data file, but a password system (like you said) can be entirely self contained.<br><br>I've never tried this but I would imagine that when a password is generated it is simply a list of variables thrown together in a string to represent certain aspects of the game.  The string is just a set of values, encrypted, and then parsed out when the game is 'loaded' through the password.<br><br>For example, if you needed to store your gold, level, and position, you could do something like this;<br>gold=24<br>level=10<br>x= 10<br>y=20<br><br>Convert it to;<br>gold=48 ;gold *2<br>level=I ;10th letter of alphabet (starting at 0 of course)<br>x=BA ; digits represented by letters<br>y=CA; digits represented by letters<br><br>Then mix it up and put it into a string, then have the program evaluate it later:<br>CA48IBA<br><br>For more advanced games this does lead to extremely long passwords, which is why the password system is pretty much extinct... BattleMaster for the Sega Genesis requires 60 character passwords. <br><br></td></tr></table><br>
<a name="923763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> For more advanced games this does lead to extremely long passwords, which is why the password system is pretty much extinct... <br></div><br>And, if anybody ends up caring about a game with passwords, they could easily just give out the passwords to anybody and everybody... Still, it's better than having to start over from the very beginning every time you open the program (which sure doesn't help with playtesting any).<br><br>In my most adventury adventure game as of yet, the values would generally be whether you have an item (or beat a boss) or not, which could be more complex. I suppose it would end up being, say, two characters, with each character combination indicating a different combination of max hp/items/bosses/cleared rooms/whatever.<br><br>Well, now I think we're getting somewhere. Thank you! <br><br></td></tr></table><br>
<a name="923880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Password codes isn't that complicated, if you ask me.<br><br>Let's say I'm on level 5, with 32 out of 100 health points. I have the magic sword, but not the magic shield. Got 25 coins (999 is the maximum) and is infected with the horribly disease that makes NPCs run away from me.<br><br>5 ' my level<br>032 ' health out of 100<br>1 ' got the sword<br>0 ' I dont have the shield<br>025 ' 25 gold coins<br>1 ' I'm infected<br><br>Add them, as strings, together and we get this:<br><br>5032100251<br><br>Slap a "magic header to it" so we can easily check that it's not some madeup value. I use "42" in this example, since it's the meaning of life, the universe and everything:<br><br>425032100251<br><br>Now we have a nice little string there that is easily dividable by two, so let's group them into two and two, and calculate a simple check on each pair<br><br>42: 4+2 = 6<br>50: 5+0 = 5<br>32: 3+2 = 5<br>10: 1+0 = 1<br>02: 0+2 = 2<br>51: 5+1 = 6<br><br>Add these into a new string:<br><br>655126<br><br>Then append it to the string we had earlier:<br><br>425032100251655126<br><br>There's your magical password!<br><br>Want to parse it?<br>It got "42" at the beginning, so we can assume it's a valid password.<br>Cut out the last 6 numbers at the end, since it's our control number:<br><br>425032100251<br>655126<br><br>Now, calculate the pairs in the first string and check them against the control number:<br>42: 4+2 = 6<br>50: 5+0 = 5<br>32: 3+2 = 5<br>10: 1+0 = 1<br>02: 0+2 = 2<br>51: 5+1 = 6<br><br>That looks to be in order, so place the player on the beginning of level 5, with 32 as health, with the might sword, but not the shield, and make npcs run away from him/her.<br><br>Now, There's ways to improve on this:<br><br>1) Add some "magic numbers" in the first string (425032100251 -&gt; 42503200100251 for example. There's a "00" in there now, after the health (032))<br>These should not change and as long as only you know about them it will be harder to break the algorithm and cheat.<br>2) Replace each number with a letter, we only have 10 (0-9) numbers, so select 10 letters to use in their place. Might be easier for the players to remember them.<br>3) You could slap a crc16/32 or MDA5 checksum at the end instead of my little control string. But the passwords will be a lot bigger.<br>4) Don't overdo it. (forget about md5 for example) I feel that my little way might feel a bit complicated, but the result isn't that bad. (feel free to show me how bad it is, if you think it's worth it) It's ok a player breaks it and cheat.  It's not the end of the world.<br><br><br>Hope my little rant was of any use. I have never done it myself in a game, but I like to think about problems and how I would solve them. :) <br><br></td></tr></table><br>
<a name="923884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem is your level. When it goes to 10, you introduce another digit to the passcode. Most games will have an inventory as well, which is even more items. Quest's progress too. You'd best off just saving it to disk i reckon. <br><br></td></tr></table><br>
<a name="923900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> A password is only useful for simplier games, sure. <br>If the password is getting too big, a switch to savefiles is the only useful solution.<br>Thankfuly, that's not that difficult. A quick hack would be to save the password in the file, and show a list of found savefiles for the user. (add a string, that the user enters when saving, in the savefile that you display to the user instead of displaying the filenames, of course)<br><br>If in doubt, use savefiles. <br><br></td></tr></table><br>
<a name="923983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh... Wow. (That's how fast my mind is going right now. Slow. I definitely need food.) How exactly would save files work, if you did it that way?<br><br>[EDIT] I have a six-digit password system going right now, with six variables called space[]$ that store characters, that looks like it'll work with all the things I need, but it's not the least unwieldy of code. How would one go about parsing the saved variables (and how would one go about saving the passwords in the first place)? <br><br></td></tr></table><br>
<a name="923996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't save the passwords but the variables themselves in a text file.  You do this by using ReadFile and WriteFile. <br><br></td></tr></table><br>
<a name="924004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> And you'd do that with WriteFile, then WriteInt/WriteFloat/WriteString/WriteByte, then, to load a game, you'd use ReadFile, then ReadInt/ReadFloat/ReadString/ReadByte, and they'd all come out in order?<br><br>This is starting to get very deep. Much deeper than we ever went with Maneesh, certainly. <br><br></td></tr></table><br>
<a name="924008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is what I do...<br><br>say I have values like this<br><br>phealth = 78<br>px = 10<br>py = 21<br><br>just some random values...<br><br>so I make a saved file called savedgame1 or somethin similar to that and I have it make a random number between 1 and 100 like 24<br><br>when I do this I use a method where I take the integer value of each digit of the square root like this<br><br>sqr(24) = 4.898979<br><br>it is split up into 4, 8, 9, 8, 9, 7, 9<br> for the next set of scramble numbers I add one to 24 and get 25 and 26 after that and so on until I have enough encrypting numbers when we squareroot 25 we get 5.000000 I program it to ignor zeros so it adds a 5 to the end of the list... our list is now 4, 8, 9, 8, 9, 7, 9, 5 (this is a bad example due to all of the nines but it still serves its purpose...) now that you have the numbers you add a "magic" header to it just to throw people off... so we get the numbers we want to save in order...<br><br>42 (magic header number), 24 (original encrypting number), 82 (the players health: 78 plus the first number in the list 4 ), 18 (player x: 10 + 8 the second number on the list), 30 (player y: 21 + 9 the third number on the list) this continues until there are no more numbers to be saved... and then you repeat the process this time multiplying rather than adding...<br><br>our final file would look like this<br><br>42, 24, 82, 18, 30, 312, 80, 189<br><br>to open the file you do the reverse and check it by making sure the numbers you get from the first half of the data match the numbers you get from the second half of the data... this system is very hard to temper with as it requires so much math that is easy and simple for the computer<br><br>I know this is long and complicated but I like coming up with tricks like this in my free time especially if it has to do with encrypting or cracking codes (my favorite subject)... you also may say this method has flaws because you can simply copy and paste the files to your friend's computer however I have a way of preventing this but it is off-topic so I wont mention it <br><br></td></tr></table><br>
<a name="924017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know, I think I kinda like my little, simple, clunky password system -- as far as password systems go. These other password systems probably work better if you really, really know what you're doing, but as I don't really, I think I'll just stick with what I have.<br><br>Thank you all for your suggestions regarding to password systems; they got me as far as I got, and they might get someone else farther later on.<br><br><b>Now about these save systems... From my experience, you guys explain commands I haven't used a fair bit better than the Command Reference does, so could you please try it with these ReadWhatever and WriteWhatever things? (Or, if they're not the most reasonably simple and effective tools for saving, could you please explain whatever it is that is?)</b><br><br>Thank you!<br>Tomas Khan <br><br></td></tr></table><br>
<a name="924019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok... so here are some basic commands to know for open/saving files<br><br>file = writefile("myfile.fil") ; creates a new file or overwrites an old one<br><br>writeint(file,10) ; writes an intiger to the file<br><br>closefile(file) ; closes the file you write<br><br>file = openfile("myfile.fil") ;opens file<br><br>x = readint(file) ; returns the next intiger in that file<br><br>:) hope this helped <br><br></td></tr></table><br>
<a name="924032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So WriteFile can create a new file? Excellent. And the ReadWhatevers reliably read in order, starting from the beginning? Also excellent. Now, what would one do about the names? They'd have to be named and then recalled in a list for the player to select, I imagine? Unless you made only one save file, in which case you could merely Start/Continue... is that simpler? <b>Or I mean, would it work that way?</b> I suppose you'd only need one (or two, if there are two player characters to choose from). Is that how it works?<br><br><b>Also, what file format do you suggest to store a save in?</b> For example, you won't be able to read strings from a bitmap, right?<br><br>In case it matters, I don't use many floating-point numbers, and my strings are only a little more and closer between. <br><br></td></tr></table><br>
<a name="924059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok... ill try to answer all of those tell me if I miss one :)<br><br>so you should only create one file per saved game or possibly one master file with all saved games<br><br>yes blitz is very reliable at reading files in the correct order<br><br>you can name it anything you want except with a file extension .exe for some reason it gives me a MAV error when I try this<br><br>you can save it in any format... one you make up or one that exists however if you make it in a format that already exists such as bmp it will treat it like an image but it will error out when you try to open it... I suggest making your own format or using a common one for random data storage, .dat<br><br>to answer your last question, you can save any type of variable in any file type except .exe <br><br></td></tr></table><br>
<a name="924062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay. I just tried it with .dat, and it worked! Thank you! <br><br></td></tr></table><br>
<a name="924092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of curiosity... Why would it crash when you try to write an .exe file? It should not matter what file extension you give the files. <br><br></td></tr></table><br>
<a name="924228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> im not sure... it just does... it may be my computer maybe someone else could try it? <br><br></td></tr></table><br>
<a name="924231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm... it seems to make exe's now haha I guess it was cuz of my old computer... when I try to run them they crash my comp so dont try this at home! <br><br></td></tr></table><br>
<a name="924560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> When saving a file, you should probably write a backup file first, then overwrite the save file, just incase the computer crashes.<br><br>And an easy way of encrypting your data, is just to invert every bit, or byte. Then save. Upon reading, invert again to read the correct data. It's never going to be uncrackable and anyone wanting to enjoy a game would really crack the save file. <br><br></td></tr></table><br>
<a name="925878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> In case the computer crashes? In what way? From the code?<br><br>And what about when you save multiple times during one run of the code? (In other words, when you save after every time the game ends -- either you lose, you win, or you quit -- and you can play/quit more than once.) Do you just WriteFile before putting in more data, or do you have to do something special first? <br><br></td></tr></table><br>
<a name="925896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> you just call writefile to overwrite the old file... nothing special required :) <br><br></td></tr></table><br>
<a name="925908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tomas Khan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you! <br><br></td></tr></table><br>
<a name="1026656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stamm</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> i am making a game too with save possibilities of course as its a long and 'linear' one and i solved it mentally like this: the whole game data is stored in a bank while playing and when saving, i just use writebytes to copy the whole bank into a save file<br>when loading a game i do the inverse: i copy the game data from the selected savefile to the bank using readbytes <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
