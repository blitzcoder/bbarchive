<!DOCTYPE html><html lang="en" ><head ><title >We need more mouse commands/events!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >We need more mouse commands/events!</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >We need more mouse commands/events!</a><br><br>
<a name="489081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a panel, and I want to know if the mouse enters it.  <br><br>I thought I had a clever solution for this... <br><br>MouseX(Panel) would be less than 0 if the mouse was to the left of the panel, and greater than the width of the panel if it was to the right of it.<br><br>But Blitz won't allow me to use a Panel with MouseX.  It will only allow me to use a Canvas, or nothing, which basically leaves me with screen coordinates.<br><br>Now, my panel has a canvas INSIDE it, but the canvas can scroll around, and change scale.  Oy, would it be a pain to try to base my mouse being in my panel on that.  Especially if I decided to do something crazy like use more than one canvas in my panel and scrolling them all around together.<br><br>So I can get the mouse position on the screen.  Okay, that's not so bad.  I'll just get the position of the panel on the screem and it's width and... CRAP!  <br><br>Why is there no way to get the position of a panel on the screen?<br><br>Oh sure, there's a way to get the position of a panel inside the client space of it's parent gadget.  But what have I got to do here, step back through all the parents of each gadget calculating its position in the client area of its parent, and take into account the size of the parent, minus the size of the client area of the parent to calculate the correct coordinates...<br><br>HEADACHE!<br><br>All I want to do is know if my mouse is in a certain region!  A region which resizes automatically with the window.  <br><br>I could create a canvas, but the draw order of gadgets if I can even control it seems backward (Gadgets created last are drawn first?  Huh?) and it would probably slow my app down.<br><br>So what option do I have left?  Creating a simple MouseOver(Gadget) function seems out of the question what with all the recursion crap.  Too much trouble.  So I am left with one option, and that is to try to manually code this for this one specific case taking into account the parents I know the panel has.<br><br>Maybe I should check the code archives first though and see if someone else has solved this. <br><br></td></tr></table><br>
<a name="489082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and something I forgot to mention... No mouse events for mouse entering/exiting a gadget?  That would have solved my whole problem right there in one fell swoop. <br><br></td></tr></table><br>
<a name="489085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kuron</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to ask Halo.  Josh has probably done more "app wise" with B+ than anybody else and has managed to find ways to get around many of B+s shortcomings. <br><br></td></tr></table><br>
<a name="489095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ask Halo for help?  Are you serious?! <br>I suppose he might help, but then I'd have to listen to him say "Who's your daddy, b*tch!" <br>Though I have to admit, I think he did help me once only a few days ago.  He must be going soft. :-)<br><br>Anyway, I don't need help with it anymore... I found a solution, and I added a code archive entry for it:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1290" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1290</a> <br><br></td></tr></table><br>
<a name="489113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this doesn't help, but there is no reason why the panel shouldn't report these messages. They are sent by windows, it is just b+ that decides to ignore them. *pimp* My bmax module can do it :P *pimp* <br><br></td></tr></table><br>
<a name="489137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Halo did create a MouseX and MouseY command using the SendMessage API command so you can check if the mouse is over any gadget. I use it to great effect in my GUI editor. Do a search for it in the b+ forums. There is no code archive entry of it. <br><br></td></tr></table><br>
<a name="489268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cold Harbour</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> JimB wrote this magic little bit of code.  Might be a good starting point.  But I agree we need events on gadgets other then canvases.<br><br>Oh, it lets you query what gadget you're currently over:<br><br><pre class=code>
.lib "user32.dll"

api_GetCursorPos% (lpPoint*) : "GetCursorPos" 
api_ClientToScreen% (hWnd%,lpPoint*) : "ClientToScreen" 


</pre><br><br><pre class=code>
Type POINTTYPE
	Field x%,y%
End Type
Global point.POINTTYPE=New POINTTYPE

Function MouseOverGadget(gad)

         point\x=0 : point\y=0
	 api_ClientToScreen(QueryObject(gad,1),point)
	 Local gadX%=point\x , gadY%=point\y
	 api_GetCursorPos(point)
	 Local mX%=point\x , mY%=point\y
	 If mX&gt;=gadX And mX&lt;gadX+GadgetWidth(gad)
	         If mY&gt;=gadY And mY&lt;gadY+GadgetHeight(gad)
			 Return True
		 EndIf
	 EndIf

End Function


</pre> <br><br></td></tr></table><br>
<a name="489278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Cold, but I already solved the problem, and JimB's snippet is what I based the function I put in the code archives on. :-)<br><br>www.blitzbasic.com/codearcs/codearcs.php?code=1290 <br><br></td></tr></table><br>
<a name="489302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>temp=CreateBank(8)
GetCursorPos(temp)
ScreenToClient(QueryObject(gadget,1),temp)
x=PeekInt(temp,0)
y=PeekInt(temp,4)
FreeBank temp</pre> <br><br></td></tr></table><br>
<a name="489326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I figured you could probably replace the type with a bank... But since the type is in an include file anyway, it's not really going to improve the appearance of the code, and peeks and pokes actually serve to make the code uglier.<br><br>But thank you for your suggestion anyway Halo. :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
