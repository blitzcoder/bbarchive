<!DOCTYPE html><html lang="en" ><head ><title >Drawing program</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Drawing program</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Drawing program</a><br><br>
<a name="679252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been curious about drawing programs like Photoshop and how they're used to apply changes to an onscreen bitmap.  I've been doing a few experiments using drawing directly to the front buffer as well as trying it with page flipping.<br>It appears that by using page flipping updates don't happen often enough to get a smooth drawing feel.  <br>I was wondering if anyone here has tried to create a drawing program and discovered a technique that works well.<br>With writing everything to the front buffer I get great speed, but when drawing the brush you have to constantly capture and redraw areas of the onscreen bitmap where the brush last was.  This just seems a little awkward to me and I was wondering if there is an easier technique that I'm just not seeing.<br>Using page flipping its pretty easy, when I'm ready to draw I just set an image buffer and draw on that, then set the buffer back to the back buffer and draw the image, then draw the brush shape and flip.  It just doesn't update fast enough and seems very redundant.<br>If you need me to explain better or provide code examples let me know. <br><br></td></tr></table><br>
<a name="680165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Drawing on to an imagebuffer can be slow in BlitzPlus. Try getting more advanced (but hopefully faster) by locking the imagebuffer and using the PixelFast commands (ReadPixelFast, WritePixelFast). You will have to consider being more careful not to write out of bounds on the image, etc.  Also, you will need a pixel creation function if you want to draw an arbitrary color to certain pixels. Also having a custom color extract function for each Red, Green, and Blue will be helpful. Each of these four functions don't need to be more than one line of code.<br><br>As for drawing, I have always found best performance with double-buffering. Drawing to the back buffer then flipping can reduce artifacts and tearing. Probably, the actual image manipulation is what is slowing down your program instead of a buffer choice. <br><br></td></tr></table><br>
<a name="681326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm actually using Blitz3D but not using a 3D graphics mode or related functions so I posted here instead.<br>I wouldn't think it handled 2D differently than BlitzPlus but you never know.<br>Check out a test program I wrote called "Sand Painter".   The painting effects I'm doing seemed impossible with page flipping so it's all done by writing to the front buffer directly.  <br><br>Here's the link:<br><a href="http://www.doresoftware.com/misc/sandpainter.zip" target="_blank">http://www.doresoftware.com/misc/sandpainter.zip</a><br><br>There are several source files in the folder, but just open and run sandpainter.bb  <br>I think I did a decent job of commenting the code.<br><br>Once you run it you can quickly get a feel for the different effects by tapping the space bar to select a random brush and then trying it out. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
