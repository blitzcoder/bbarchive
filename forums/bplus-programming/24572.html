<!DOCTYPE html><html lang="en" ><head ><title >Type Functionality</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Type Functionality</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Type Functionality</a><br><br>
<a name="255051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Telemental</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way of 'remembering' which object in a type array I'm currently working on? Currently, I'm using a boolean flag within the array, but I'm dealing with something a bit more complex - here goes:<br><br>I've got an array of units, and I'm increasing an initiative number on each of these units until it matches a target number, after which that unit's "selected" variable is toggled 'on'. If I run my NextActiveUnit function again afterwards, it starts with the first unit in the list- meaning that units near the end of the list might rarely or never see an increment.<br><br>I can think of a lot of workarounds (storing the unit's ID in a function, or searching through until I find the selected unit and then starting my search from there) but these seem to be wasteful of processor cycles/memory. Is there a way to store the direct pointer/index of an object in a type array so that I don't have to do this?<br><br>Thanks,<br>Telemental <br><br></td></tr></table><br>
<a name="255067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've read it multiple times, but I guess I still don't quite understand what you're asking.  Do you have an array of custom type instances?  Do you have an array inside a type instance?  One reason I don't understand is because whether it's an array element or a type you want direct access to, both are possible:<br>1) Arrays are indexed (by definition)<br>2) Types can be assigned to regular old % variables<br><br>So, if you had an array of types, you might access it like this:<br>array(3)\importantfield<br><br>At any rate, would you mind describing your data structures a bit more?  Or on the other hand, maybe someone else will understand better than me.  =) <br><br></td></tr></table><br>
<a name="255640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Telemental</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem:<br><br>I'm just using the generic TYPE data type, cycling through with a For...Each loop. (I didn't even realize you could create an array containing TYPEs). The link to my project is<br><br><a href="http://www.slackify.com/Downloads/Op%20Firefly/PC-Game/ds002/ds002.zip" target="_blank">http://www.slackify.com/Downloads/Op%20Firefly/PC-Game/ds002/ds002.zip</a><br><br>In this source code, the UNIT.BB file defines the unit TYPE. Currently, the code selects a unit when you click on it, then allows you to perform actions; I'm trying to find out a way of forcing an initiative system and am running into difficulty keeping track of which unit TYPE object I'm referring to. (The array thing might be the answer.)<br><br>If any of you hackish types find anything else I could have trimmed down in this code, all opinions are welcome.<br><br>Thanks,<br>Telemental <br><br></td></tr></table><br>
<a name="255709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Say, that's pretty good.  Organized and logical.<br><br>Anyway, (ah!) I understand your issue now.  No, you do not have to cycle through the Type list each time you want to find a specific type.  Remember, you can make yourself a Type pointer (a variable that represents one of the Type instances), like this, for example:<br><pre class=code>
Global CurrentUnit.unit = Null
</pre><br>This is just a pointer that is pointing to nothing.  It is ready to be assigned to any new instance that you create.  Of course you can also do something like this:<br><pre class=code>
Local Enemy.unit = New unit
</pre><br>This creates a new Type instance, automatically inserts it at the end of the internal Type list (as you know), and assigns the variable 'Enemy' to that single instance.<br><br>Remember that once you define a custom type, you can declare it and use it just like you would any other variable type, e.g. VariableName[type], where [type] is '%', '#', '$', or '.unit'.<br><br>So now, in your Clicked() function, where you are selecting the unit, you might say this:<br><pre class=code>
	UnitSelected = True
	For Soldier.unit = Each unit
		If Soldier\x = CursorX And Soldier\y = CursorY Then
			Soldier\Selected = True
			CurrentUnit = Soldier ; &lt;-- new line
			Movement(Soldier\x,Soldier\y,Soldier\move) ;remove later
		End If
	Next
</pre><br><br>...and in your Movement routine, you won't have to cycle through each Unit instance.  You just say Soldier = CurrentUnit.<br><br>As a side effect, you don't need UnitSelected.  You can test that like this: if (CurrentUnit &lt;&gt; Null) then ...<br><br>And if you really wanted, when you create each Unit instance, you could put each one in an indexed array, just like this:<br><br><pre class=code>
Dim Units.unit(NUMUNITS)
For i = 0 to NUMUNITS
     Units(i) = new unit
     Units(i)\x = ...
     Units(i)\y = ...
Next
</pre><br><br>Then you can access any one you want, directly.<br><br>Anyway, I hope this helps.  Ask if you have any questions. <br><br></td></tr></table><br>
<a name="255844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Darkuni</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember talking about this in the past ... not specifically for your example, but it never hurts to mention this stuff again ...<br><br>A lot of folks worry that iterating through an ENTIRE type list is "too time consuming" so they end up being more worried about trying to track types individually instead of the full iteration of the type collection.<br><br>I've actually run some benchmarks (might even have the code around here somewhere) where I threw a couple thousand animated items on the screen and did mouse collision detection doing full iterations as well as type-specific coding.  The difference was honestly negligible.<br><br>I'd say unless your types list gets WAY out of control (like 5-6 digits) you may not see the difference. <br><br></td></tr></table><br>
<a name="255854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd say unless your types list gets WAY out of control (like 5-6 digits) you may not see the difference. <br></div><br>Interesting.  This goes against the usual understanding (i.e. Order(1) is always significantly faster than Order(n), especially when performed multiple times).<br><br>It makes me wonder why the difference was only negligible. <br><br></td></tr></table><br>
<a name="255866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Telemental</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good deal. I sense another code revision coming up... <br><br></td></tr></table><br>
<a name="255869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Telemental</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all the help. With the ability to maintain pointers, I should be able to get around some tough obstacles. <br><br></td></tr></table><br>
<a name="255877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Darkuni</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> soja - Yeah, I thought it seemed odd too - just a testiment to how damn fast Blitz is :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
