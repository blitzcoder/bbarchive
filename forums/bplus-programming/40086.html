<!DOCTYPE html><html lang="en" ><head ><title >Why is attached code so slow?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Why is attached code so slow?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Why is attached code so slow?</a><br><br>
<a name="449023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Markh999</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The attached is a simple space invader type game (not complete !!) based on the SPIDER example that comes with BB.  None of the spiders move or shoot and I limit it to 3 bullets from my ship maximum on the screen at a time.  So WHY is it so slow - the ship crawls along the bottom , the bullets are slow and none os the spiders disappear when hit?  I think the problem may be in the checkcollision routine but not sure.  Can anyone point me in the right direction?  Thanks in advance<br><br>Graphics 640,480,0,1<br>SetBuffer BackBuffer()<br><br>Type AlienData<br>	Field xpos, ypos<br>End Type<br><br>Type BulletData<br>	Field xpos,ypos<br>End Type<br><br>Const  Alien_ypos_Start = 460<br>Const  Alien_Anim_Pause = 4<br>Global Aliens          = LoadImage("c:/Program Files/BlitzPlus/COURSE/AlienShapes.bmp")<br>Global Player          = LoadImage("c:/Program Files/BlitzPlus/COURSE/Player.bmp")<br>Global Bullets         = LoadImage("c:/Program Files/BlitzPlus/COURSE/Bullet.bmp")<br>Global shotgun         = LoadSound("c:/Program Files/BlitzPlus/COURSE/shotgun.wav")<br>Global Alienhit        = LoadSound("c:/Program Files/BlitzPlus/COURSE/toyduck.wav")<br>Global logo            = LoadImage("c:/Program Files/BlitzPlus/COURSE/Alienlogo_small.bmp")<br>Global theend          = LoadImage("c:/Program Files/BlitzPlus/COURSE/game_over.bmp")<br>Global score           = 0<br>Global Alien.AlienData<br>Global Bullet.BulletData<br>Global GameOver        = False<br>Global Playerxpos		= 320<br>Global Playerypos		= 360	<br>Global livebullets		=0<br><br>SoundPan Alienhit,-1<br>SoundPan shotgun,1<br><br>;IntroScreen()<br>InitAlien()<br><br>Repeat<br>	If GameOver = True Then<br>		GameoverScreen()<br>		InitAlien()<br>		GameOver = False<br>		score = 0<br>	Else	<br>		DrawScreen()<br>		DrawEnemies()<br>		DrawShip()<br>		DrawBullets()<br>		checkcollision()		<br>		Flip<br>	EndIf<br>Until KeyDown(1)<br>TerminateProgram()<br><br>Function InitAlien()	<br>	For tempy=1 To 3<br>		For tempx=1 To 10<br>			Alien.AlienData	= New AlienData	<br>		    Alien\xpos      = 40+tempx*50<br>			Alien\ypos      = tempy*40<br>		Next<br>	Next	<br>End Function<br><br>Function GameoverScreen()<br>	ClearScreens()<br>	SetBuffer FrontBuffer()<br>	DrawImage theend,50,80<br>	Color 255,255,255<br>	Text 200,200,"You reached a score of "+score<br>	Text 300,310,"Press spacebar to continue",1,1<br>	Repeat<br>	Until KeyDown(57)<br>	ClearScreens()<br>End Function<br><br>Function DrawScreen()<br>	Viewport 0,0,640,480<br>	Cls<br>	Color 255,255,255<br>	Text 0,0,"Score "+score<br>	Color 0,255,0<br>	Line 0,399,640,399<br>	Line 0,15,640,15<br>	Viewport 0,15,640,385<br>End Function<br><br>Function TerminateProgram()<br>	FreeSound shotgun<br>	FreeSound Alienhit<br>	FreeImage Aliens<br>	FreeImage logo<br>	FreeImage theend<br>	End<br>End Function<br><br>Function DrawEnemies()<br>	For Alien = Each AlienData<br>		DrawImage Aliens,Alien\xpos,Alien\ypos<br>	Next<br>End Function<br><br>Function CheckCollision()<br>	For bullet = Each bulletdata<br>	  	For alien = Each aliendata<br>			If ImagesOverlap(bullets,bullet\xpos,bullet\ypos,Aliens,Alien\xpos,Alien\ypos) Then<br>				PlaySound Alienhit<br>				score = score + 1000<br>				Delete Alien<br>			EndIf	<br>		Next	<br>	Next<br>	If score Mod 10 = 0 Then InitAlien()<br>End Function<br><br>Function DrawShip()<br><br>	DrawImage Player, Playerxpos, Playerypos<br>	If KeyDown(205) Then playerxpos=playerxpos+1<br>	If KeyDown(203) Then playerxpos=playerxpos-1<br><br>End Function<br><br>Function DrawBullets()<br>	If KeyHit(57) And livebullets&lt;3 Then<br>	 	livebullets=livebullets+1<br>		Bullet.BulletData	= New BulletData	<br>		Bullet\xpos      = playerxpos+10<br>		Bullet\ypos      = 350<br>		PlaySound shotgun<br>	EndIf<br>	For Bullet = Each BulletData<br>		DrawImage Bullets, Bullet\xpos, Bullet\ypos<br>		Bullet\ypos=bullet\ypos-8<br>		If bullet\ypos&lt;0 Then<br>		   livebullets=livebullets-1 <br>		   Delete bullet<br>		EndIf		<br>	Next<br><br>End Function<br><br>Function ClearScreens()<br>	Viewport 0,0,640,480<br>	SetBuffer FrontBuffer()<br>	Cls<br>	SetBuffer BackBuffer()<br>	Cls<br>End Function <br><br></td></tr></table><br>
<a name="449143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, i have no idea why it would be as slow as you describe, but as for the disappearing:<br>When i use types i dont do it like this:<br>[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[<br>For bullet = Each bulletdata <br>For alien = Each aliendata <br>If ImagesOverlap(bullets,bullet\xpos,bullet\ypos,Aliens,Alien\xpos,Alien\ypos) Then <br>PlaySound Alienhit <br>score = score + 1000 <br>Delete Alien <br>EndIf <br>Next <br>Next <br>[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[<br>instead, i do this:<br>[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[<br>For bullet.bulletdata  = Each bulletdata <br>For alien.aliendata  = Each aliendata <br>If ImagesOverlap(bullets,bullet\xpos,bullet\ypos,Aliens,Alien\xpos,Alien\ypos) Then <br>PlaySound Alienhit <br>score = score + 1000 <br>Delete alien.aliendata <br>EndIf <br>Next <br>Next <br>]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]<br>and well, things work.... IF thats a problem...<br><br>sorry if im not helping, but i try.. <br><br></td></tr></table><br>
<a name="449257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> aab and Markh999<br>Use the [code][/code[ or [codebox][/codebox[ tags for your codes. <br><br></td></tr></table><br>
<a name="449495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Code Box would be too big: too many times have i made a code box with a big black space inbetween the base of the code and the next line <br><br></td></tr></table><br>
<a name="449551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> use codebox instead.  This has scrolly widgets on the sides and is a fixed size. <br><br></td></tr></table><br>
<a name="452558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >keyboard</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> the code is slow because you are making 30 instances of the type AlienData every loop through this function.<br><br>the line "If score Mod 10 = 0 Then InitAlien()" is 0 all the time, so although the aliens get killed, instantaneously new ones appear. Comment out the line and try it.<br><br><br><pre class=code>
Function CheckCollision()
	For Bullet.BulletData = Each BulletData
		For Alien.AlienData = Each AlienData
			If ImagesOverlap(bullets,Bullet\xpos,Bullet\ypos,Aliens,Alien\xpos,Alien\ypos) Then
				PlaySound Alienhit
				score = score + 1000
				Delete Alien
			EndIf
		Next
	Next
	If score Mod 10 = 0 Then InitAlien()
End Function
</pre><br><br>and Mark, look for some nice code examples and check out the formatting, makes it so much easier to decipher if it is nicely formatted. And also, it is maybe better too, if you have a variable "Aliens" not to call it "aliens", and having a variable "Aliens" and another one "Alien" is OK, but kinda confusing too :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
