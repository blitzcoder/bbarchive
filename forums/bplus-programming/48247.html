<!DOCTYPE html><html lang="en" ><head ><title >How to get valid Window Gadget handle?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to get valid Window Gadget handle?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >How to get valid Window Gadget handle?</a><br><br>
<a name="536461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a game that works in full-screen or windowed mode but when it is in windowed mode I am deliberately using Graphics with the Mode flag set to 2 instead of using Create Window.  This all works fine and I have managed to put a system menu, minimise and close button on the graphics window with various user32.dll calls.<br><br>My problem is I want to detect when the windowed mode has been minimised so that I can stop the music and restart it on restore (is this the same as maximise?).<br><br>I tried WindowMinimized(TheWindow) where TheWindow is a handle of the graphics window obtained with a User32.dll call to FindWindowA("",AppName).  The handle returned works fine for other user32 calls BUT not for WindowMinimized which errors with "Invalid Windows Gadget handle".  I guess that the Blitz command doesn't want the raw windows handle, it wants something else.<br><br>So the crunch .. does anyone know how to convert a windows window handle to a blitz window handle or how to get the blitz window handle for the graphics window?  I don't want to use CreateWindow as Graphics lets me make proper games with flip, keydown etc.<br>		<br>P.S. sorry for the long explanation, hope you get it. <br><br></td></tr></table><br>
<a name="536897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can make games with a window that use keydown, flip etc.<br>Just dont set up and event loop <br>All you have to do is set the canvasbuffer as the current drawing buffer, and you can still add the gadgets you want through user32, and handle them yourself.<br><br>As for Converting the Windows Handle to a Blitz Window Handle :: WindowMinimized() etc, probobly use Blitz C++ Classes so it would involve knowing that class, and creating an instance of one, registering it with blitz etc..<br><br>However, According to its state ie: a window may have WS_MINIMIZE show state flag if it is minimized, so use <br>(GetWindowLong(HWND,GWL_STYLE) AND WS_MINIMIZE)<br>=&gt;<br>(GetWindowLong(HWND,-16) AND $20000000L) <br><br></td></tr></table><br>
<a name="537203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks aab, I'll try that to check the window state. <br><br></td></tr></table><br>
<a name="540804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm.  Unfortunately your code only tells me if I have a minimize button on the title bar, which I do.  I need to detect if the windows IS CURRENTLY minimised or HAS BEEN minimised recently.  Any clues? <br><br></td></tr></table><br>
<a name="540936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look it up at msdn. <br><br></td></tr></table><br>
<a name="541104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the end I got the answer as posted in this thread: <a href="http://www.blitzbasic.com/Community/posts.php?topic=48628" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=48628</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
