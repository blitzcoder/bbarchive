<!DOCTYPE html><html lang="en" ><head ><title >How can I change the scale mode for a canvas ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How can I change the scale mode for a canvas ?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >How can I change the scale mode for a canvas ?</a><br><br>
<a name="360479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Currently when you resize a canvas, it will scale the contents. This is good, but I need a way to change the way it scales. What I mean is, currently it will scale and apply a really nasty blurr. I know it is possible to do a simple resize as shown below.<br><br>I have a dual monitor setup. When the canvas is on the primary monitor, it does the nasty blurr effect<br><br><img src="http://skn3.acsv.net/images/before.png"><br><br>When I move the window over to my secondary monitor, it disables the blurr.<br><br><img src="http://skn3.acsv.net/images/after.png"><br><br>So it is possible, but does anyone know how to switch it to the simple pixel resize, perminantly ?<br><br>I know you can't in blitz, but surely there most be a way to do it with a userlib / dll. I have looked hard on the msdn site, but could not find anything. <br><br></td></tr></table><br>
<a name="360614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting.  When you move it back, does it revert to how it was? <br><br></td></tr></table><br>
<a name="360689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It does yes. when the canvas next redraws (ie resized etc) <br><br></td></tr></table><br>
<a name="360896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >soja</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So if you resize it in one display, move it the the other, and resize it again, it will be blurry in both displays no matter how many times you move it back and forth again?<br><br>It sounds like it's being controlled by the display driver, not necessarily Windows.  Does that seem right?<br><br>And to qualify -- you DO want the canvas scaled, but you DON'T want it blurry.  Is that right?  Or do you just want a bigger canvas but the same-sized images? <br><br></td></tr></table><br>
<a name="360899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the canvas is on the primary display, and it has been scaled. If I draw to it then flip, it will be blurred.<br><br>If I moved it over to the secondary display, draw, flip.. then it is not blurred.<br><br>I (topic title) want to be able to set it to none blur scale mode, perminantly. (or optionally) <br><br></td></tr></table><br>
<a name="360958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orca</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed this awhile back. It suxx0r the big c0xx0r...I think style settings should be added to canvas's for this.<br><br>I'm thinkin something like:<br><br>0 - default<br>1 - no filtering/blur<br>2 - noscale ( so we dont have to recreate the canvas during a resize, to keep our graphics the same size)<br><br>I think I'm gonna add this to the long "coming soon!" thread. <br><br></td></tr></table><br>
<a name="361177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Deffinatly.. this would be great. (not so worried about option 2, as you can do it easily with a canvas &amp; panel)<br><br>but options 1 and 0 are a must! <br><br></td></tr></table><br>
<a name="361259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found a "thread" about this from a mame emulator. It had a -sharp flag, which set the stretch to non blurr.<br><br>Which lead me too a page about DD caps, which lead me to a page describing them.<br><br>Here is a possible solution (not sure it is what we are after):<br><div class="quote"> DDSCAPS_OFFSCREENPLAIN <br>Indicates that this surface is any off-screen surface that is not an overlay, texture, z-buffer, front-buffer, back-buffer, or alpha surface. It is used to identify plain surfaces. <br></div> <br><br></td></tr></table><br>
<a name="361393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orca</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (not so worried about option 2, as you can do it easily with a canvas &amp; panel) <br></div><br><br>What I meant was, allowing the canvas to grow, yet keeping the same pixel size of everything....<br><br>ie, say you have a canvas that grows with the parent window. Currently, blitz scales the pixels on that canvas. It would be nice to have the option to keep the pixel aspect the same, and just have the canvas grow/shrink....its really annoying to have to free, and then recreate the canvas and then redraw everything to it. <br><br></td></tr></table><br>
<a name="361422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What I meant was, allowing the canvas to grow, yet keeping the same pixel size of everything.... <br></div><br><br><pre class=code>
Const maximumcanvassize = 2048

Global window = CreateWindow("Test window - resize me",(ClientWidth(Desktop())/2)-250,(ClientHeight(Desktop())/2)-210,500,420,0,1+2)
Global panel  = CreatePanel(0,0,ClientWidth(window),ClientHeight(window),window,True)
	SetGadgetLayout(panel,1,1,1,1)
Global canvas = CreateCanvas(0,0,maximumcanvassize,maximumcanvassize,panel)
	SetGadgetLayout(canvas,1,0,1,0)

Repeat
	Select WaitEvent()
		Case $203
			SetBuffer CanvasBuffer(canvas)
			Color Rand(0,255),Rand(0,255),Rand(0,255)
			w = Rand(0,100)
			h = Rand(0,100)
			Oval EventX()-(w/2),EventY()-(h/2),w,h,1
			FlipCanvas(canvas)
		Case $803 : Exit
	End Select
Forever
</pre><br><br>You can, like I said ;) <br><br></td></tr></table><br>
<a name="361547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orca</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, all your doing is creating a giant canvas :)<br><br>What if I have an application with multiple canvas'd windows? Think of something like photoshop.... I don't see creating giant canvas's as being a good solution to this.<br><br>I still think that the style/option I mentioned is a worthwhile tidbit for the blitzgods to look into... <br><br></td></tr></table><br>
<a name="361563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not sensible to constantly re-allocate large chunks of memoery like this. Creating the maximum space you want a chunk of memoery to be able to take up, is standerd practice. It applies in exactly the same manner to a graphics buffer.<br><br>All that a canvas in the way you suggest would do, is constantly create new, copy bits from old to new, destroy old.<br><br>Although! a ResizeCanvas(canvas,w,h)  that copies the existing data intao resized canvas.. would be good :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
