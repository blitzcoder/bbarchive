<!DOCTYPE html><html lang="en" ><head ><title >Loading png vs bmp</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loading png vs bmp</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Loading png vs bmp</a><br><br>
<a name="211991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a differnce in the speed of loading these different types of graphics.<br><br>I know png's are smaller, but they may have to be reformatted (decompressed) into bmps for Direct X.. I'm not sure.  Anyone know off hand?<br><br>Thanks <br><br></td></tr></table><br>
<a name="212008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Valgar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the second page of this forum there's a post like this one ,i think it's called"Witch format .bmp .jpg. .png?".<br>Do you see many interesting arguments. <br><br></td></tr></table><br>
<a name="212021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Binary_Moon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't seen the other thread but I use png's for everything and have no problems with speed <br><br></td></tr></table><br>
<a name="212036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I saw that other post, but it doesn't really answer the question.  I guess I could do the experiment myself, but I figured I'd ask before I went to the trouble.<br><br>fyi:  I'm loading ten 800x600x8 bmps and it takes 12-15 seconds.  Not long, I know, but I'd like to speed it up if I could.  .. yeah I could load them as I need them but then I end up with 1 second load times at 12-15 places.. and that's much more distracting I think. <br><br></td></tr></table><br>
<a name="212132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I would EXPECT that providing your PC wasn't too old and clunky, the extra time taken to load a png would be more than made up for by the less time it took to read it off the HDD, and the faster the PC was, the bigger the difference you'd see. <br><br></td></tr></table><br>
<a name="212221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Réno</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ten 800x600x8... try to use tiles.<br><br>It seems that if you load an image (PNG, BMP, etc), Blitz will convert it in the game resolution ; if you run 16bits, the image will be 16bits into the memory card.<br><br>So, if your 800x600 (Gloups !!!) is 15kb and run your game in 32bits, the image will be a true 800x600x32 into the memory card. <br><br></td></tr></table><br>
<a name="212318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SDF_of_BC</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always use PNG format, saves on disk space and I don't think the speed affected to much, so I don't anyone will notice. :) <br><br></td></tr></table><br>
<a name="212327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> These are hand drawn 800x600 fullscreen backgrounds, and 800x600 graphics that are collections of buttons, graphical fonts, and other misc. in-game graphics.  There are no tiles or tileing in my game.  And most of them need to be loaded at all times. I know how to do tiles, see the link in my signature for evidence of that.  <br><br>I suspect that Anthony Flack is right, but I'm curious to see actual results.  If I do this test, I'll post the results here. <br><br></td></tr></table><br>
<a name="212349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yikes..<br><br>I'm a good programmer.  You'll notice me pimping my game in my signature, but I'm new to blitz.<br><br>I say this because my results were pretty startling and I'm not going to be surprised if one of you more experiecenced blitzers tells me that I did something wrong.<br><br>My test code is this<br>;---<br>Graphics 800, 600<br>DebugLog MilliSecs()<br>For i = 0 To 100<br>	imgtemp = LoadImage("C:\slug.bmp") ; or slug.png<br><br>Next<br>DebugLog MilliSecs()<br>;-------<br><br>I used the same 800x600 image saved as png, and as 24-bit bitmap.  the bmp was 1.34MB, and the png was 500K.<br><br>When I did the loop 100 times.  The bmp took approx 80 seconds (just less than one second per image, this is what I see in my game too).  The png took only 500ms, or 1/2 second.  The png was 160 times faster!?!  Is that possible?<br><br>When I did the test for only 10 iterations.  The bmp took approx 8 seconds and the png took 5 milliseconds.<br><br>These results seem pretty unbelivable to me.  But I did it several times.  Am I somehow using Millisecs() incorrectly? (I subtracted start time from end time).  Or are there other blitz factors I'm unaware of.  There's got to be something fishy going on because the png is 1/3 the size of the bmp, you'd think it would take at least 1/3 of the time (just to read the disk!).  Perhaps blitz checks the contents of a imgVariable before loading in a new image or something?<br><br>Anyone want to use this code and verify my resluts?  Is there a flaw in my reasoning? <br><br></td></tr></table><br>
<a name="212353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chaos51</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I am not so sure about your result..<br><br>I use loads of images in my latest project.. (728 to be exact), and I had to convert them all back to bmp,<br>since it was taking forever to load in all the imagesequences in png format.<br><br>Are you using 256 color images, or 24/16 bit? Maybe there is a difference?<br><br>Cheers<br>/.D <br><br></td></tr></table><br>
<a name="212398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Loading .bmp is always faster than .png in all cases, as it must be decoded.<br>But the difference is less noticable, the faster your PC is. It's not significant anyway unless you're planning to load images in real time during your main game loop.<br>Loading things like big .ogg files is where loading times increase substantially. <br><br></td></tr></table><br>
<a name="212413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can some one explain the flaw in my test code or my analysis of its results? <br><br></td></tr></table><br>
<a name="212445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi APE<br><br>I'de say that the png is small enough to loaded into the windows disk cash so it only loads once from the hard drive and 99 times from memory. The BMP is probabaly being loaded from the hard drive every time.<br><br>Or<br><br>The file loading routines for Png and BMP are different. To isolate the hard drive time try creating a ram disk to store the image.<br><br>Ps in real world PNG will be faster as the hard drive is far more of a bottle neck than the CPU having to process the PNG.<br><br>Thats my bit <br><br></td></tr></table><br>
<a name="212504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't forget you can use PNGcrush to get the PNG files even smaller. <br><br></td></tr></table><br>
<a name="212540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I just wrote a simple benchmarking program to find out the answer here. I'm using a 2.4GHz P4 with 512MB RAM with a 7200 RPM hard disk so bear in mind that PNGs and JPEGs are relatively less disk intensive and more CPU intensive.<br><br>I started with four high resolution digital photographs 1800x1350 or so (they started as JPEGs) and exported them to PNG and BMP.  The JPEGs ended up being roughly 1.5MB, the PNGs 4-5MB, and the BMPs 11MB each.<br><br>Total load times were:<br>BMPs 1.1s<br>JPEGs 1.79s<br>PNGs 3.215s<br><br>Note that since these were photographs, this is a considerable disadvantage for the PNG file format (which does not do a great job compressing photographs). However, it's interesting to note that a 2.4GHz processor doing the crunching does not help the JPEGs to load faster than the far larger BMPs.<br><br>Edit:<br><br>I got 7 PNG files from an old multimedia project. These vary in size (they're pretty "realistic" kinds of images since they combine photographs with computer graphics and are reasonably small).<br><br>BMPs 0.038s<br>JPEGs 0.061s<br>PNGs 0.103s<br><br>Note that these PNGs have alpha channels, so loading the JPEGs and BMPs is less work to begin with -- but here we see PNGs falling further behind.<br><br>So -- my immediate inclination would be to always use PNGs and JPEGs, but if performance is an issue it looks like BMPs win hands down. <br><br></td></tr></table><br>
<a name="213712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't have thought that PNG would take that much longer, as I'd have figured that the processing time for decompressing a PNG would be much faster than the time taken to access the hard disk space for a much larger file (BMP) than a PNG. <br><br></td></tr></table><br>
<a name="213776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> "So, if your 800x600 is 15kb"<br>"These are hand drawn 800x600 fullscreen backgrounds... There are no tiles or tileing in my game... most of them need to be loaded at all times."<br><br>Where did you get 15kb?  Even at 1bit (ie. 2 colors) an 800x600 image is 60kb.  At 32bit color depth it is 1.8MB.  Multiplied by 10 is 18MB.  Add the front and back buffers (assuming the game itself is 800x600) and you're looking at around 20MB.  APE, barely anyone has enough memory for that.  You are going to have to redesign your game so that it uses less video memory.  Yes that mean compromising your vision but design is compromise.  Frankly I think you will need to just accept the 1 second load times here and there because having all those background images loaded in all the time is a killer.  1 second is really not all that long; even without the load time you'ld want to give your players a little time to rest between levels.<br><br>******<br><br>OT, was "Once Twice Thrice" developed in Blitz?  If so I didn't realize that.  Up until they stopped taking outside submissions I was at Dexterity.com a lot so I am familiar with your game. <br><br></td></tr></table><br>
<a name="213896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >APE</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think I said that my 800x600's were 15K, that was Reno.  My dev machine has a half-gig of ram and 64MB video so I know I'm pretty top-of-the-line, but time to negotiate for low end machines hasn't come quite yet.  I'm actually curious to see how Blitz handles swithcing between video memory and system memory.  DX does this pretty transparently and I want to see how blitz compares.  I'll have all those surfaces in memory but I'll only be drawing from two or three of them at a time, so I'm hoping blitz will keep the ones I need at hand and let the rest live in system memory so that I don't have to stop and load between screens so much.<br><br>OTT was done in VB6 with DX7.  I've only been in Blitz for a couple months now.  The debugging is more trouble than it is in VB, but the other advantages are very good.  So far, I'm very happy to have made the switch.  I'm curious to know how different the products will be to support.  I'm starting to believe that BB will be easier than VB, but the true test of that will come after finishing the current project. <br><br></td></tr></table><br>
<a name="213987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seth: I totally agree. Before I did the test I was ready to say use PNGs or JPEGs and leave BMPs well and truly alone. Now I am rethinking my position...<br><br>I might add that whoever was doing hundreds of loads in a loop was really benchmarking disk caching and not useful performance. Heck, if the decompression is being done in a well-written library, the decompressed images may well be being cached too (consider that a typical decompression task involves reassembling small GIFs and JPEGs for a web page, which are frequently re-used in a design). <br><br></td></tr></table><br>
<a name="214021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oi, benchmarking the cache.  I used to work with moron website developers who would benchmark pages they were designing without clearing the cache first. <br><br></td></tr></table><br>
<a name="214090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh.<br><br>APE, I think you may be right. Blitz should transfer those images between VidRAM and sysRAM without problems. I think. <br><br></td></tr></table><br>
<a name="218025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seldon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @APE&amp;Anthony : are you sure Blitz transfer images from VidRAM to SysRAM by itself ? I don't think so. I guess you must create a bank, store your data from image (ReadPixelFast) into the bank and then free the image. Maybe using B+ with LoadImage "SysRAM flag", you store images in normal memory, but you lack a lot of speed when blitting. <br><br></td></tr></table><br>
<a name="218154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Believe it or not... In my latest production I used .PCX files... The most popular picture format in the MS-DOS era... I was surprised Blitz supports it, but since the programs I prefer to use are DOS-apps and thus writing in .PCX, it saved me a lot of trouble...<br><br>By the way, I don't even have a way to write .PNG files... Which util can do that?<br><br>Oh wth... I think I'm about to use my own format one of these days... <br><br></td></tr></table><br>
<a name="219390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >explosive</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> To load a PNG you need more time. I've tested it. It's not so much. I think bmp was about 30% faster.<br>In the graphics-memory every graphic, eqal to bmp, jpg, png or CreateImage :D) needs the same memory (=size of bmp). It is only a difference on the disk. <br><br></td></tr></table><br>
<a name="219769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> That can be true.... Bmp contains no form of compression... This can speed up the process since decompression can eat up more time when your processor is slow... Alas when you create a BIG production, working with BMP is hell since they eat us so many diskspace....<br><br>All true is that when Blitz loads such pictures it's all converted into the same formal that Blitz uses for its memory maintanance, so once the file has been loaded, there's no diffrence at all in these pictures... Not even if you create your own picture format... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
