<!DOCTYPE html><html lang="en" ><head ><title >Relative... mouse... stuff...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Relative... mouse... stuff...</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Relative... mouse... stuff...</a><br><br>
<a name="1051763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> (breaking one of the cardinal rules of coding, programming tired...)<br><br>I have a little gamey thing that moves stuff around. It makes the stuff move by adding an X or Y value to the XY values of every object, giving the illusion that the viewpoint is moving. This is just fine, but now I need to figure out if the mouse cursor is one one of these things.<br><br>I'm using this code to get the "relative mouse position", relative to the viewpoint.<br><br><pre class=code>
adjMouseX=x+MouseX()
adjMouseY=y+MouseY()
</pre><br><br>I've also got a little square that gets drawn at these coordinates. The problem is, while the screen is fixated on 0,0 it works fine, but once I move the screen it desyncs and stays at where the cursor would be if I was focused on 0,0.<br><br>I basically need a way to translate the screen coordinates of the mouse into the game coordinates of my objects. <br><br></td></tr></table><br>
<a name="1052714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ermm... Hello? <br><br></td></tr></table><br>
<a name="1054032"></a>

<a name="1054033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ford escort</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> to be sure, you move all the objects by the same value ? <br><br>do you do something like that ? <br><br>xbase=50<br>ybase=50<br><br>coord of obj1=xbase+obj1x , ybase+obj1y<br>coord of obj2=xbase+obj2x , ybase+obj2y<br>coord of obj3=xbase+obj3x , ybase+obj3y<br><br>so <br><br>mouse coords = xbase+mousex,ybase+mousey<br> <br><br>is this correct ? or i misunderstood something?<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1054200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Err, no. I'm ALLREADY doing that, I just seem to be having trouble making the mouse cursor sync up with the rest if the game.<br><br>There's more game than can be displayed on one screen, so I have a system set up so that when the player presses the left arrow key the entire game moves right and due to relativity it looks like the player has moved left. The drawing routines figure this stuff out, the main game just needs to tell them where the player is supposed to be.<br><br>I just can't figure out how to translate the mouse cursor's position on the screen to the mouse cursor's position in the game relative to the player's current position so that the player can click on things. <br><br></td></tr></table><br>
<a name="1054226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MCP</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you've written your code as above then you will have problems.<br>You need to add any offsets to your mouse's screen position to find the mouse's virtual game world position.<br>You need to subtract any offsets from each of your world objects ONLY when wishing to convert to screen coordinates for drawing (assuming you're using traditional 2D sprites.) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
