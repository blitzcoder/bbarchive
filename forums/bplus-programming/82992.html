<!DOCTYPE html><html lang="en" ><head ><title >A 'standard' FPS?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A 'standard' FPS?</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >A 'standard' FPS?</a><br><br>
<a name="936448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on two games right now, both have fairly low FPS rates.<br><br>The one is getting a steady 30 FPS, which is a standard according to Wikipedia, and although I would like it to go a bit faster (for particle effects and such) could I be happy with 30?<br><br>The other is coming in at 4-5 no my Win98 and 14-15 on my modern machine.  The game runs great on both machines, so I'm thinking cap the FPS at 15, and anything slower will be fine as well (my Win98 computer is about the slowest it gets anyway), but this isn't even close to the standard 30-60.<br><br>Wikipedia also said that there have been games that ran on 6 FPS and were quality games.<br><br>I guess my question is, even if the game runs fine at 15 or fewer FPS should I strive for optimization? <br><br></td></tr></table><br>
<a name="936465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David Boudreau</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm curious, can you send the wikipedia link where it says 30?  I thought most games run at 60fps by now but it's not really something I have followed closely so I have no idea.  Maybe it depends on the genre too... but lower than 30 fps?  Is it a puzzle game or a text adventure? :)<br><br>I kind of worry about this kind of thing in the back of mind, in the sense that the rapid advancement of PC hardware outpaces our abilities to harness it and take advantage of it (and we get away with writing inefficient code in some basic ways?). <br><br></td></tr></table><br>
<a name="936514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://en.wikipedia.org/wiki/Frame_rate" target="_blank">http://en.wikipedia.org/wiki/Frame_rate</a><br>(under the Video Games section)<br><br>Halo 3 runs at thirty, but Call of Duty 4 runs sixty.<br><br>GTA: San Andreas runs only 25.<br><br>And the game that runs six is an early FPS. <br><br></td></tr></table><br>
<a name="936525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gladclef - Ben B</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The most you can really get away with is 20 (and only with animations). Lower than that and the eye can start to see the glitches. <br><br></td></tr></table><br>
<a name="936528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;Lower than that and the eye can start to see the glitches. <br><br>Are you talking about refresh rates or graphical oddities?  I'm doing text based stuff, and 15 and 6 are both factors of 60, which is the refresh rate for most monitors if I'm not mistaken?  Or does that even matter? <br><br></td></tr></table><br>
<a name="936578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Movies (as in DVDs &amp; theater films) run at 24 FPS. It's pretty much the lowest you can go for smooth-seeming animation. 30 FPS is generally alright, and will seem smooth. HOWEVER, if you watch a game running at 30 FPS for a while, then switch to 60 FPS, there will be a noticeable difference, and 30 FPS suddenly won't seem so smooth. I say go for 60 FPS, but if you stick to 30 FPS and don't go over at any time, then that should work fine. <br><br></td></tr></table><br>
<a name="936587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Film only 'gets away' with 24 fps because it has so much motion blur filling in the movement for you. Computer games don't usually have this luxury. 60 is a good rate to aim for if you really want smoothness, but 30 or even lower can be fine depending on the [type of] game. Traditional cel animation used '2s' whereby you only changed the image every other frame so that it ran at 12 fps, but again you had the luxury of implying movement using lines and puffs of smoke etc. <br><br></td></tr></table><br>
<a name="936648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something to bear in mind is that the term 'frame rate' doesn't necessarily refer to the graphics frame rate. The term may be used to refer to the main game logic update rate, or to the update rate of a variety of sub-systems in your game.<br><br>Most good game timing regulation systems will allow the graphics frame rate to run as fast as the refresh rate of the monitor and the capabilities of the graphics card will allow. The frame rate of the game logic generally needs to be firmly regulated, however, so that changes occur at a predictable rate. <br><br></td></tr></table><br>
<a name="939667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a simple text tile world:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
AppTitle "Text Tile World"
Graphics 800,600,32,2

;--------------------------------
; INITIALIZATION
;--------------------------------
Global px=115,py=0,hp=100
Global frametimer=CreateTimer(15)
Global starttime=MilliSecs(),elapsedtime,fpscounter,curfps

Global levelimg=CreateImage(600,400,1)

Dim map$(40,20)
Dim des$(5)

Type enemy
	Field startx,starty,x,y,u,d,l,r,dir
End Type

;--------------------------------
; MAIN LOOP
;--------------------------------

updatelevel()

While Not KeyHit(1)
	WaitTimer(frametimer)
	Text 620,20,FPS()
	Color 0,100,0
	displaylevel()
	updateplayer()
	Flip
	Cls
Wend 

;--------------------------------
; FUNCTIONS 
;--------------------------------

Function FPS()
	elapsedtime=MilliSecs()-starttime
	If elapsedtime&gt;=1000
		curfps=fpscounter
		fpscounter=0
		starttime=MilliSecs()
	Else
		fpscounter=fpscounter+1
	EndIf
	Return curfps
End Function 
			
		
Function updateplayer()
	;displays player and updates movement/checks ground
	Text px,py,"O",True,True
	opx=px
	opy=py
	If KeyDown(205)
		If px+10&lt;16*40
			px=px+10
		Else
			px=16*40
		EndIf 
	EndIf
	If KeyDown(203)
		If px-10&gt;0
			px=px-10
		Else
			px=0
		EndIf
	EndIf
	If KeyDown(208)
		If py+10&lt;16*20
			py=py+10
		Else
			py=16*20
		EndIf
	EndIf
	If KeyDown(200)
		If py-10&gt;0
			py=py-10
		Else
			py=0
		EndIf
	EndIf
	
	mx=px Shr 4
	my=py Shr 4
	
	on$=map$(mx,my)
	If on$="#"
		px=opx
		py=opy
	EndIf
	If on$="_"
		hp=0
	EndIf
	If on$="^"
		hp=hp-1
	EndIf  
	
	Text 0,450,map$(mx,my)
	
End Function 


Function displaylevel()
	;displays the level and other crucial information
	DrawImage levelimg,0,0
	
	For x=0 To 4
		Text 0,420+x*20,des$(x)
	Next
	Text 610,0,"HP: "+hp
	updateenemy()
End Function


Function updatelevel()
	;on level change, updates/resets all aspects of level
	For m.enemy=Each enemy
		Delete m
	Next
	Restore leveldata
	For x=0 To 4
		Read d$
		des$(x)=d$
	Next
	For y=0 To 19
		For x=0 To 39
			Read num
			If num=1
				map$(x,y)="#" ;wall
			ElseIf num=0
				map$(x,y)=" " ;floor
			ElseIf num=2
				map$(x,y)="_" ;hole
			ElseIf num=3
				map$(x,y)="^" ;spikes
			EndIf  
		Next
	Next
	Read ennum
	For z=1 To ennum
		Read x
		Read y
		Read u
		Read d
		Read l
		Read r
		makenemy(x,y,u,d,l,r)
	Next
	
	SetBuffer ImageBuffer(levelimg) 
	Color 0,100,0
	For y=0 To 19
		For x=0 To 39
			Text x*16,y*16,map$(x,y)
		Next
	Next
	
	SetBuffer BackBuffer()
End Function


Function makenemy(x,y,u,d,l,r)
	;creates a new enemy instance from data strip
	m.enemy=New enemy
	m\startx=x
	m\starty=y
	m\x=x
	m\y=y
	m\u=u
	m\d=d
	m\l=l
	m\r=r
	m\dir=1
End Function


Function updateenemy()
	;controls enemy movement and display
	For m.enemy=Each enemy
		If m\dir&gt;3
			m\dir=0
		EndIf 
		Select m\dir
			Case 1
				nextstep=m\x+10
				on$=map$(nextstep Shr 4,m\y Shr 4)
				If on$="#" Or nextstep&gt;m\startx+m\r
					m\dir=m\dir+1
				Else
					m\x=nextstep
				EndIf
			Case 2
				nextstep=m\y+10
				on$=map$(m\x Shr 4,nextstep Shr 4)
				If on$="#" Or nextstep&gt;m\starty+m\d
					m\dir=m\dir+1
				Else
					m\y=nextstep
				EndIf
			Case 3
				nextstep=m\x-10
				on$=map$(nextstep Shr 4,m\y Shr 4)
				If on$="#" Or nextstep&lt;m\startx-m\l
					m\dir=m\dir+1
				Else
					m\x=nextstep
				EndIf 
			Case 0
				nextstep=m\y-10
				on$=map$(m\x Shr 4,nextstep Shr 4)
				If on$="#" Or nextstep&lt;m\starty-m\u
					m\dir=m\dir+1
				Else
					m\y=nextstep
				EndIf
		End Select 
		
		Text m\x,m\y,"?"
	Next
	
End Function 
		
;-----------------------------------------------------
; DATA
;-----------------------------------------------------

.leveldata ;5 lines of text, 40x20 num block, enemy line
Data "YOU BEGIN YOUR JOURNEY IN THE DARK DUNGEON, THERE ARE TWO EXITS.  IT IS"
Data "QUIET AND DANK.  THERE IS A HOLE IN THE FLOOR, AND IT IS VERY DEEP..."
Data "f"
Data "e"
Data "g"
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,1,3,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,1,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,2,2,2,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0
Data 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
Data 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
Data 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0
Data 0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0
Data 1 ;num enemys
Data 200,200,50,50,0,0 ; enemy attributes (x,y,u,d,l,r)
</textarea><br><br>I only get 15 FPS.  What optimization techniques should I use to improve it?  I already used binary shifts instead of division, but it didn't help much. <br><br></td></tr></table><br>
<a name="940045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> After reading Bill Stanbrook's post again I've decided that since I'm not seeing flicker or graphical oddities, I'm most likely looking at the logic update.  If the game plays fine on a decade old machine as well as modern computers, I'd say compatibility is just fine.<br><br>Now the other game running at 30 FPS I'd like to bump up to 60, but that's another day.<br><br>EDIT: Wow stupid me, just realized that I had capped the FPS to only 15 <i>before</i> I transferred it to my modern computer, that explains why its only running 15 FPS :)  Regardless I'm still going to leave it at that, because I like how it runs at that speed. <br><br></td></tr></table><br>
<a name="940270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok well I found the issue, solving both FPS problems for both my games on both machines as well (although I still have the tile game running at 15 by preference).<br><br>Windowed mode cuts the FPS in half on both my machines.  I got my tile game running up to 30 on my ancient machine, and my other game at a solid 60 on my modern computer.  Also, setting the bit depth to 32 may have been causing issues too.<br><br>Just in case anyone cared ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
