<!DOCTYPE html><html lang="en" ><head ><title >Swinging Rope help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Swinging Rope help</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Swinging Rope help</a><br><br>
<a name="527387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nicstt</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone out there got any suggestions for making a rope swing realistically.<br><br>I thought of making it up from very small image sections.<br><br>However, if there is a formula to calculate this effect i would be very happy(maybe) <br><br></td></tr></table><br>
<a name="527394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now this depends on how realistic you want it...<br><br>What's it for? A pitfall type rope?<br><br>If so you probably don't want it that realistic.<br><br>An easy way to make something that 'looks about right' is:<br><br>Draw a bunch of arcs from the pivot point for your segments.<br><img src="http://www.mentalillusion.co.uk/tmp/rope.png"><br><br>Now as you move to the lower segments you move along the arc faster than the higher ones, this will give the impression of the end flailing. You'd move them using a sine wave so they slow at the ends and reach full speed in the middle.<br><br>This is not accurate at all, this is not realistic at all, but it looks about right for a game. <br><br></td></tr></table><br>
<a name="527395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could that swings be done using 1 bezier-curve while changing the end point and the end-control-point btw? <br><br></td></tr></table><br>
<a name="527411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not a bad idea CS_TBL, you could use the following spline code using two points and modify it so that the end point moves back and forth...<br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1100" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1100</a><br><br>Might be a bit overcomplicated for a rope but it's worth trying. <br><br></td></tr></table><br>
<a name="527413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nicstt</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  What's it for? A pitfall type rope?<br> <br></div><br><br>yup<br><br>thanks some great ideas there, sine - yuck<br><br>guess ill start working on it, thanks again <br><br></td></tr></table><br>
<a name="527414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're looking for a pitfall type rope then this code will be of interest to you as well :)<br><br>Pitfall II remake source by WolRon...<br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1224" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1224</a> <br><br></td></tr></table><br>
<a name="527431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of boredom I made a few rope-functions, bankbased, but no user should be bothered with that.. (I think) it's also based on those circles btw..<br><br>The example app says it all .. The rope-swing could be a bit better.. the upper-part of the ropes ain't swinging at all. Ahwell, someone who wants to improve it, within the current structure? :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
app=CreateWindow("rope - CS_TBL",0,0,640,480)

canvas=CreateCanvas(0,0,640,480,app)

timer=CreateTimer(25)

; make a bunch o' ropes ...  schoolgym-trauma :(  *sigh*

Dim MyRope(15)
For t=0 To 15
	MyRope(t)=CreateRope(48,3,128-Rnd(80),4+Rnd(8)) ; CreateRope(segments, segmentlength, swingamplitude, swingspeed)
Next

Repeat
	WaitEvent()
	If EventID()=$4001

		SetBuffer CanvasBuffer(canvas)
			Cls

			For ropes=0 To 15 ; all ropes
				UpdateRope(MyRope(ropes)) ; update the phases
				
				; readout the x/y coords for each segment, for each rope
				For t=0 To RopeMaxsegments(MyRope(ropes))-1
					x=RopeX(t,MyRope(ropes))
					y=RopeY(t,MyRope(ropes))
					Plot 64+(ropes*32)+x,128+y
				Next
			Next
		FlipCanvas canvas
	EndIf
	If EventID()=$803 quit=True
Until quit
End

Function CreateRope(segments,segmentlength,swing,speed)
	bank=CreateBank(1+1+1+1 + 2) ; functionarguments + 1 (swingphase)

	If speed&gt;360 speed=360

	PokeByte bank,0,segments
	PokeByte bank,1,segmentlength
	PokeByte bank,2,swing
	PokeByte bank,3,speed

	PokeShort bank,4,0
	Return bank
End Function

Function UpdateRope(bank)
	If Not bank End

	speed=PeekByte(bank,3)
	phase=PeekShort(bank,4)
	phase=(phase+speed) Mod 360
	PokeShort bank,4,phase
	
End Function

Function RopeX(segment,bank)
	If Not bank End

	maxsegments=PeekByte(bank,0)
	If segment&gt;=maxsegments End

	phase=PeekShort(bank,4)
	swing=PeekByte(bank,2)
	segmentlength=PeekByte(bank,1)

	angle=Sin(phase)*swing*segment/128
	angle=angle*segment/maxsegments

	x=Sin(angle)*segment*segmentlength
	Return x
End Function

Function RopeY(segment,bank)
	If Not bank End

	maxsegments=PeekByte(bank,0)
	If segment&gt;=maxsegments End

	phase=PeekShort(bank,4)
	swing=PeekByte(bank,2)
	segmentlength=PeekByte(bank,1)

	angle=Sin(phase)*swing*segment/128
	angle=angle*segment/maxsegments

	y=Cos(angle)*segment*segmentlength
	Return y
End Function

Function RopeMaxsegments(bank)
	If Not bank End
	Return PeekByte(bank,0)
End Function
</textarea> <br><br></td></tr></table><br>
<a name="527433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ps. no doubt it isn't fool-proof ^_^ <br><br></td></tr></table><br>
<a name="527466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> here you go<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Const EVENT_None		= $0		; No event (eg. a WaitEvent timeout)
Const EVENT_KeyDown		= $101		; Key pressed
Const EVENT_KeyUp		= $102		; Key released
Const EVENT_ASCII		= $103		; ASCII key pressed
Const EVENT_MouseDown	= $201		; Mouse button pressed
Const EVENT_MouseUp		= $202		; Mouse button released
Const EVENT_MouseMove	= $203		; Mouse moved
Const EVENT_Gadget		= $401		; Gadget clicked
Const EVENT_Move		= $801		; Window moved
Const EVENT_Size		= $802		; Window resized
Const EVENT_Close		= $803		; Window closed
Const EVENT_Front		= $804		; Window brought to front
Const EVENT_Menu		= $1001		; Menu item selected
Const EVENT_LostFocus	= $2001		; App lost focus
Const EVENT_GotFocus	= $2002		; App got focus
Const EVENT_Timer		= $4001		; Timer event occurred


vecchiotempo=0
cycles=0
r=10

raggiofalso=r

numballs=40

iteraz=50

g#=0.3

Dim angle#(numballs)
Dim rv# (numballs)
Dim x# (numballs)
Dim y# (numballs)
Dim z# (numballs)
Dim xv#(numballs)
Dim yv#(numballs)
Dim oldx# (numballs)
Dim oldy#(numballs)
Dim yspeed#(numballs)
Dim xspeed#(numballs)
Dim unicol(3)
Dim col(numballs,3)
Dim adder(3)


Dim forzax1#(numballs)
Dim forzay1#(numballs)
Dim forzax0#(numballs)
Dim forzay0#(numballs)

Dim dist#(numballs)

Dim m#(numballs)




;m(10)=100

;m(20)=100

For i=1 To 3
adder(i)=1
Next

For i=1To numballs

x(i)=i

For j=1 To 3
col(i,j)=Rnd(255)

Next
Next

grabbed=0
grabx#=0
graby#=0

x(1)=400
y(1)=300

xwin=1000
ywin=700

window = CreateWindow ("Game Window (use cursors)...", 0, 0, xwin, ywin+80,0,15)



canvas = CreateCanvas (0, 0, ClientWidth (window), ClientHeight (window), window)
SetGadgetLayout canvas , 1, 1, 1, 1 ; Use zero to leave an edge 'unpinned'...

SetBuffer CanvasBuffer (canvas)

fps = CreateTimer (280)

Repeat

Repeat
	
		e = WaitEvent (1)
		
		If e= EVENT_Close Then End
		


Until e = EVENT_Timer

Cls

For i=1 To numballs
oldx(i)=x(i)
oldy(i)=y(i)
Next 




If Not  MouseDown(1)

grabbed=0
End If

If grabbed=0 And MouseDown(1)

For i=1 To numballs

 If MouseX(canvas)&gt;x(i) And MouseX(canvas)&lt;x(i)+2*r  And MouseY(canvas)&gt;y(i) And MouseY(canvas)&lt;y(i)+2*r Then
grabbed=i

grabx=MouseX(canvas)-x(i)
graby=MouseY(canvas)-y(i)


End If

Next

End If

;grabbed=1


For i=1To numballs

m(i)=1
Next

;m(numballs)=10

;m(1)=10


If grabbed&gt;0

m(grabbed)=1000000000


x(grabbed)=MouseX(canvas)-grabx
y(grabbed)=-graby+MouseY(canvas)
xv(grabbed)=0
yv(grabbed)=0
End If





;applica le forze alla velocita' vecchia



For i=1 To numballs


yv(i)=yv(i)+g

x(i)=x(i)+xv(i)
y(i)=y(i)+yv(i)





Next



For l=1 To iteraz;!!!!!

For i=2 To numballs



dist(i)=((x(i)-x(i-1))^2+(y(i)-y(i-1))^2)^0.5-2*r

If (1=2)
angle(i)=ATan2(-y(i)+y(i-1),x(i)-x(i-1))
forzax1(i-1)=dist(i)/(1+m(i-1)/m(i))*Cos(angle(i))
forzay1(i-1)=-dist(i)/(1+m(i-1)/m(i))*Sin(angle(i))


forzax0(i)=-dist(i)/(1+m(i)/m(i-1))*Cos(angle(i))
forzay0(i)=dist(i)/(1+m(i)/m(i-1))*Sin(angle(i))
End If

If (1=1)
forzax1(i-1)=dist(i)/(1+m(i-1)/m(i))* ( (x(i)-x(i-1) )/ ( dist(i)+2*r ) )

forzay1(i-1)=dist(i)/(1+m(i-1)/m(i))*( (y(i)-y(i-1) )/ ( dist(i)+2*r ) )


forzax0(i)=-dist(i)/(1+m(i)/m(i-1))*( (x(i)-x(i-1) )/ ( dist(i)+2*r ) )
forzay0(i)=-dist(i)/(1+m(i)/m(i-1))*( (y(i)-y(i-1) )/ ( dist(i)+2*r ) )
End If

Next


For i=1 To numballs

x(i)=x(i)+forzax0(i)+forzax1(i)
y(i)=y(i)+forzay0(i)+forzay1(i)

Next

Next



For i=1 To numballs




xv(i)=x(i)-oldx(i)
yv(i)=y(i)-oldy(i)

If x(i)&gt;xwin -2*r
x(i)=xwin-2*r
xv(i)=-xv(i)
End If
If x(i)&lt;0 
x(i)=0
xv(i)=-xv(i)
End If
If y(i)&gt;ywin-2*r 
y(i)=ywin-2*r
yv(i)=-yv(i)
xv(i)=0.9*xv(i)
End If
If y(i)&lt;0 
y(i)=0
yv(i)=-yv(i)
End If


Next





For i=1 To 3
If Rnd(0,1000)&gt;990 Then
adder(i)=-adder(i)
End If

unicol(i)=unicol(i)+adder(i)
If unicol(i)&gt;254 Then adder(i)=-1
If unicol(i)&lt;1 Then adder(i)=1

Next

If (1=1)

For i=1 To numballs

Color unicol(1),unicol(2),unicol(3)

;Color col(i,1),col(i,2),col(i,3)

Oval x(i),y(i),2*raggiofalso,2*raggiofalso
Next

End If

If (1=2)
For i=1 To numballs-1

Color  unicol(1),unicol(2),unicol(3)

;Color col(i,1),col(i,2),col(i,3)

Line x(i),y(i),x(i+1),y(i+1)
Next
End If

	Text  20, 40,fps

cycles=cycles+1
If MilliSecs()-vecchiotempo&gt;1000
vecchiotempo=MilliSecs()
fps=cycles
cycles=0
End If

	FlipCanvas canvas
	
	Until (KeyHit (1))
	
End

</textarea> <br><br></td></tr></table><br>
<a name="527498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The effect looks great! But the source looks a bit painful to read, for me :\  doesn't look much stand-alone, or self-contained.. it's simply 'the routine', everywhere.<br><br>Would it be possible to<br>- get rid of *all* globals and dims<br>- make stand-alone selfcontained 'blackbox' functions<br>? <br><br></td></tr></table><br>
<a name="527507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, I'll explain you the algorithm in words: at each frame you move the balls as there was no link between them. Then, every frame, you try to get the balls back linked: to do this you (*) use an algorithm that for every couple of linked balls, shifts them closer by an amount proportional to their distance. You need to calculate all the shifts for all couples before you apply them. Moreover, all this must be repeated for 30-40 times every frame(i.e.goto *).  then you update the speed of of each ball according to the movement it did in the last frame<br><br>sorry I'm not good at modular design, try to see if you can get it a "black box"<br><br>hey, I remember I clallenged people here to do it, and botbuilder came up with a solution that is probably coded much better than mine: check it out!<br><br><a href="http://blitzmax.com/Community/posts.php?topic=43242&amp;hl=chain" target="_blank">http://blitzmax.com/Community/posts.php?topic=43242&amp;hl=chain</a> <br><br></td></tr></table><br>
<a name="527601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nicstt</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again for all the input.<br><br>Working on rope atm:) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
