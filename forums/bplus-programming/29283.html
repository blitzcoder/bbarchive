<!DOCTYPE html><html lang="en" ><head ><title >Font Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Font Problem</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Font Problem</a><br><br>
<a name="309708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a rehash of the problem I posted in the BlitzPlus Bugs group a couple of days ago, but unfortunately so far nothing I tried has made the issue go away.<br><br>Anyway: I downloaded a truetype font online ( www.aenigmafonts.com/fonts/fonts/op/plasdrip.zip ), which works just fine in BlitzPlus when I actually install the font. That is nice, but inconvenient since I would prefer to keep my game 'self-contained' in a single directory without dumping anything in the windows fonts/system directories.<br><br>I use the following code:<br><br><pre class=code>
Graphics 640,480,0,2
FreeFont fnt1
fnt1=LoadFont("Plasma Drip BRK",60,False,False,False)

SetFont fnt1
Text 100,100,"This is a test!"
Flip
WaitKey()
</pre><br><br>The internal font name is "Plasma Drip BRK", and when the font is actually 'installed' it renders just fine when called by that name... When it is in the game directory instead, however, it reverts to Arial instead.<br><br>Since supposedly the font filename and the fonts internal name are supposed to match, I tried renaming the font file to the following:<br><br>- 'Plasma Drip BRK.ttf' <br>- 'Plasma Drip BRK.fon' <br>- 'Plasma Drip BRK' <br>- 'PlasmaDripBRK.ttf' <br><br>as well as trying LoadFont("PlasDrip.ttf"60,False,False,False)<br><br>Unfortunately none of these tries work. When the font is 'installed' it works fine, but when it merely resides in the game folder all I get is Arial.<br><br>This is just one of many fonts I tried recently, and all appear to have the same problem.<br><br>I'm starting to pull my hair out now. :-)<br>Does anyone here have any suggestions? <br><br></td></tr></table><br>
<a name="309727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Brine</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a suggestion, but I dont know wether it'll work or not... could you use either the systemproperty or the getenv command to retreive the font's directory location??<br><br>Mr Brine <br><br></td></tr></table><br>
<a name="309730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean?<br><br>The font is stored in the same directory as the example program, plus in addition to that I've also tried a changedir("d:\myfolder") to absolutely force it to that folder, where the font resides as well.<br><br>I see the exact same issue whether I'm running it in the IDE or in compiled form, from the command line. Just really weird. :-/ <br><br></td></tr></table><br>
<a name="309752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried something that worked.<br>Put the font in the game folder, do NOT change the name, then use:<br>fnt1=LoadFont("Plasma Drip BRK.ttf",60,False,False,False)<br><br>...worked here on Windows 98. <br><br></td></tr></table><br>
<a name="309758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> YES!!!<br><br>That did the trick, thank you <b>SO</b> much!<br>(Can't believe I missed that iteration) <br><br></td></tr></table><br>
<a name="311998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> This doesn't work on WinXP.... <br><br></td></tr></table><br>
<a name="312048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> And the XP solution doesn't work on Windows98. :/ <br><br></td></tr></table><br>
<a name="312445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So... What -is- the Fix for XP?<br><br>The example mentioned above works without problems on windows 2000, but I currently don't have access to either Win98 or XP.<br><br>However, if there is a definite way to make it work under Win98 as well as XP, at least it won't be the end of the world: I don't remember who wrote it, but I ran across the following code a while ago:<br><br><pre class=code>
; Userlib declaration 
;.lib "Kernel32.dll" 
;GetVersionEx%(VersionInfo*):"GetVersionExA" 

; Blitz code for querying platform
Version = CreateBank(148)
PokeInt(Version, 0, BankSize(Version))

If GetVersionEx(Version) Then
	Select PeekInt(Version, 16)
		Case 0 : Notify "You are running Windows 3.1"
		Case 1 : Notify "You are running on the Windows 9x kernel"
		Case 2 : Notify "You are running on the Windows NT kernel"
		Default : Notify "Unexpected value for Platform ID.", True
	End Select
Else
	Notify "There was an error querying version info.", True

EndIf
</pre><br><br>Or more detailed, without userlibs:<br><br><pre class=code>
OS$=GetEnv("OS")
root$=GetEnv("systemroot")
appdata$=GetEnv("AppData")
If OS$="Windows_NT" then print "You are running the Windows NT kernel"

If OS$="Windows_NT" And (Instr(root$,"WINNT")&lt;&gt;0) And AppData$&lt;&gt;"" Then Print "Probably Windows 2000"
If OS$="Windows_NT" And (Instr(root$,"WINDOWS")&lt;&gt;0) And AppData&lt;&gt;"" Then Print "Probably Windows XP or Windows 2003"
If OS$="Windows_NT" And AppData$="" Then Print "Probably Windows NT"
If OS$="" Then Print "Windows 9x"
</pre> <br><br></td></tr></table><br>
<a name="313220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantsonhead.com</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this a simpler way:<br><br><pre class=code>
FreeFont fnt1
fnt1=LoadFont("Plasma Drip BRK",60,False,False,False)
if fnt1=0 then 
    fnt1=LoadFont("Plasma Drip BRK.ttf",60,False,False,False)
endif
SetFont fnt1
</pre><br><br><br><br>PS: I just posted this related code that deals with TTF fontnames...<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=893" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=893</a> <br><br></td></tr></table><br>
<a name="313701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br><br>That other code looks like it may come in handy too... <br><br></td></tr></table><br>
<a name="314174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, this STILL doesn't work for me under B+.<br><br>I have a font file (font1.fon), it's in the directory with the Blitz+ exe .. and no matter WHAT i do.. it doesn't load it.<br><br>[EDIT]<br>Hmm.. i think i see the problem.. There's like 8 fonts called Terminal in the XP fonts directory! Blitz don't LIKE that at ALL...<br><br>[EDIT2]<br><br>Gets odder..<br><br>There's also a bunch of "FixedSys" fonts in the XP fonts dir.. if i LoadFont that.. it works.. if i load "Terminal" it doesn't .. 8514OEM.FON doesn't work either... There's something REAL screwed with Blitz' font system.<br><br>Tracer <br><br></td></tr></table><br>
<a name="314244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't blitz supposed to just handle True Type fonts (TTF?)<br><br>If not: Tracer, did you make sure to match the internal font name to the filename, including any spaces and such? <br><br></td></tr></table><br>
<a name="314261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> everything matches.. i have tried over 90 .FON files .. 4% works, the rest doesn't ..<br><br>Tracer <br><br></td></tr></table><br>
<a name="314290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pantsonhead.com</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> After I wrote the code to look up TTF fontnames from the file (http://www.blitzbasic.com/codearcs/codearcs.php?code=893 <br>) I tried to do the same for .FON files. I couldn't find any file layout info or even a DLL that BB can use. (let me know if you can find something)<br><br>In the end I decided to forget about .FON fonts because TTFs often render much nicer than raster/vector fonts anyway.<br><br>I was still frustrated that I couldn't determine if a TTF file was a Symbol font or not since BB doesn't support them (like wingdings etc). <br><br>NB: There's a lot more font info available via the GDI32 api but it's not available to BB because it requires callbacks. :-( <br><br></td></tr></table><br>
<a name="314313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's kinda odd tho .. i'd expect Mark to use the API commands for fonts.. which supports a whole host of font formats.<br><br>Oh, and i don't want to use TTF in this case.<br><br>Tracer <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
