<!DOCTYPE html><html lang="en" ><head ><title >Need help with game engine</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Need help with game engine</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >Need help with game engine</a><br><br>
<a name="935493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I was aboout six, I coded up a simple game engine which uses ASCII and ANSI graphics to allow playing of a game which would be coded in an extended version of blitz basic. Recently, I saw my project page on sourceforge, and decided to continue work on it. Does anybody want to help me? I need a little help finishing and polishing the engine, and I need a lot of help making a game for it. Any takers? <br><br></td></tr></table><br>
<a name="935513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd consider it, but I'd prefer to see what you have thus far, and more details of what your goal is before I get involved. <br><br></td></tr></table><br>
<a name="935605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gladclef - Ben B</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, yeah, I have no leads to your code and your homepage link leads nowhere as well. Give us more contact info. <br><br></td></tr></table><br>
<a name="935634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I just wanted to make sure pepole were interested before I wasted my precious time uploading the code to HotLinkFiles.<br><br>[url=http://www.hotlinkfiles.com/files/2244045_uyisj/XYEngine.zip]XYEngine.zip[/url]<br><br>My goal is to create a simple yet powerfull framework for game makers who are new to B+. With this as a base, they simply need to code Map.bb and compile. <br><br></td></tr></table><br>
<a name="935722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I compiled, it said I ran into a wall once, then apparently the wall was nonexistent...  frankly I'm rather confused as to what its supposed to do. <br><br>I think it would be wise to either provide better documentation or a sample game.<br><br>I was doing a ASCII adventure game in December, and I believe it's similar to what you are trying to accomplish.  If you have any questions I can probably help. <br><br></td></tr></table><br>
<a name="935846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You asked for code, you didn't specify that it had to work. :) This code was originally made for B2D, so there's going to be some problems to get it working in a B+ enviroment. I think I'll have to do something special with ANSI escape codes to get the graphics right. I'll write some docs too. As I said in the OP, I need somebody to help me with the sample game. I have a weekend coming up, so I should be able to work on it some more. A note though, this might not even be possible with the limitations of B+. Not being able to display ANSI characters in graphics mode with Text is a large setback. <br><br></td></tr></table><br>
<a name="935856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well before your engine can be used to make a sample game, it has to work properly :)<br><br>And about the ANSI characters, you should be able to make a game fine with the 200+ ASCII characters.  If you really need the ANSI graphics, AFTER you get it working with ASCII you can find a creative method to get those characters.  That is only if you decide you absolutely need them. <br><br></td></tr></table><br>
<a name="936113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having some trouble with Types (I've never used them before) but I should have a working engine in a little while. Here's the code that's causing the problem.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;NPCFunction.bb
;Contains the NPC function
;I anticipate that this function will be huge, so I've put it into its own file.

Type NPC
Field x
Field y
Field health
Field friendly
Field icon$
End Type

;The NPC function
;Use in Map.bb to create an NPC that can talk, ask questions, and move around.
Function NPC(CallType=0,name$="",startingX=0,startingY=0,friendly=0,health=0,icon$="")

Select CallType


Case 0
If name Then

DebugLog="Creating NPC named "+name$+" at "+x+","+y+" with health "+health+", icon "+icon$+" , and a freindly value of "+friendly+"."

NPC.name$ = New NPC
NPC\x=startingX
NPC\y=startingY
NPC\health=Health
NPC\friendly=friendly
NPC\icon$=icon$

Else
DebugLog "ERROR: Tried to create an NPC without a name!"
EndIf

Case 1
If Not name="" Then
DebugLog "Moving an NPC "+name$+" to "+x+","+y+"."

npc.name$\x=x
npc.name$\y=y

Else
DebugLog "ERROR: Tried to move an NPC without a name!"
EndIf

End Select
</textarea><br><br>It says it expects an EndIf right before the $ in Name$ in case 0. I can't see why.<br><br>EDIT: Oh wait, I see now. Debuglog=? Why did I type that?<br><br>Okay, I fixed that, but it didn's solve the problem. <br><br></td></tr></table><br>
<a name="936166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>NPC.name$ = New NPC</pre><br><br>I think you're going to have issues with this line.   You can't make string values (like a name like "Fred" or "Gorgoth") to become variables inside the program. <br><br></td></tr></table><br>
<a name="936174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I found that out with a little research. I think I've got it working. I'll scribble up some documentation and let you look at it.<br><br>EDIT: Unfortunately, my trial copy of word has expired...<br><br>EDIT:<br>Okay, here it is. You might have to comment out the NPC example in Map.bb, it doesn't seem to like my variables.<br><br><a href="http://www.hotlinkfiles.com/files/2252462_cpdix/XYEngine_061913.zip" target="_blank">http://www.hotlinkfiles.com/files/2252462_cpdix/XYEngine_061913.zip</a> <br><br></td></tr></table><br>
<a name="936223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't work at all.  Got an error, fixed it, tried again, repeat.<br><br>May I suggest doing a total tear down and rebuild?  The second time around always produces better results... also, with such a small engine perhaps it would be wise to not use multiple sources.  It's more coherent for a smaller project and will be easier for others to understand.<br><br>When I get back to my Win98 machine with my engine source on it, I'll comment it and post it up for you to use as a reference.  I'll make a sample game too.<br><br>Good luck! <br><br></td></tr></table><br>
<a name="943537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I'll keep going with my orignal code, the core of it works well. <br><br>Also, the multiple source thing is organised like it is for a reason: I have 4 source files, two of engine code, two of game code. The XY.bb file contains the raw essence of the engine, the code I wrote way-back-when. Then, there's Includes.bb, which contains functions and things that shouldn't be hidden in XY.bb. Then, you have Map.bb, which contains map objects, and Draw.bb, which contains graphics objects.<br><br>My current problem is, every time I try to write a NPC engine, it fails epicly. It should work this time (it's a good bit less ambitious than the NPC engine I had before) but, when I try to compile with a little talking smiley in the map code, it complains of incompatible variable types.<br><br>I should set up an SVN or something.<br>Here's the code:<br><a href="http://www.mediafire.com/file/ymlmmoukgzy/XY" target="_blank">http://www.mediafire.com/file/ymlmmoukgzy/XY</a> Engine.zip <br><br></td></tr></table><br>
<a name="943556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't get it to work.<br><br>Does this even run on your machine?  I'm getting variable mismatches, non Type errors, among others. <br><br></td></tr></table><br>
<a name="943670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >schilcote</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it dosn't. I've tried debugging it, but I can't seem to find the problem. I'm new to types, and the variables it says are mismatching are both integers. I can't find the problem. The code that is causing the problem is in the "NPC section" of includes.bb and the "NPC example" of map.bb. I'll take a fresh look at the code later, maybe I'll have an insight. <br><br></td></tr></table><br>
<a name="943687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sauer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ohhh ok I thought it was finished and working or something, which confused me because it wasn't.  <br><br>And I tried looking at it, but it has so many issues I think your best bet is a complete tear down and rebuild. The four source codes do not integrate well together.  Rather than build the game between four sources, a better strategy is to start with one.  Then, when a certain function of collection of functions (like moving, collisions, npc, whatever) work perfectly the way you want them to, move them to an include file and forget about them.  But working between four sources that are all implemented at different times is confusing and extremely difficult to debug.<br><br>From what I could tell though I believe a lot of your problems are resulting from confusion between the NPC type name and the NPCs instance name.  Also, your NPC code needs to be wrapped in a For-Each-Next loop so that it cycles through all the NPCs instances. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
