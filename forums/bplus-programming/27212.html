<!DOCTYPE html><html lang="en" ><head ><title >B+, Emulators, and ALPHA Sprites!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B+, Emulators, and ALPHA Sprites!</h1><a href="forums.php" >BlitzPlus Forums</a>/<a href="topics.php?forum=81" >BlitzPlus Programming</a>/<a href="#bottom" >B+, Emulators, and ALPHA Sprites!</a><br><br>
<a name="284942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, that's a weird topic I know..lol<br><br>Anyway, here is my thinking and please correct me if I am wrong. (only in theory now)<br><br>We all know that B3D (or 3D hardware in general) is much faster at creating transparencies, rotation, scaling, etc than 2D/software.<br><br>However, is 2D/software fast enough anyway for smaller sprites?<br><br>Let me back up, the other day I was playing Super Metroid on my laptop via the ZSNES emulator (don't worry, I own the game so my rom is legal).  I was amazed at how SMOOTH the scrolling was!  Even full screen!  Also, in the game, there are sections where there appears to be clouds floating around and anything under the clouds is slightly altered in color.  Transparency at its greatest.<br><br>Then, I got to thinking.  ZSNES more than likely just uses Direct Draw.  I don't think it uses any 3D.  My laptop is only 800Mhz P3 with a crappy 32mb video card (not meant for gaming).  Yet, everything was so smooth and nice!  I was getting full screen scrolling, great sound, SMOOTH graphics (WITH ALPHA) on a "crappy" laptop using 2D???  So, why can't B+ (or BB) do some of the ALPHA tricks in 2D??  I realize you will never get 60,000 sprites at 500 FPS but come on.  Why couldn't I make a game that was 640x480 (same res as the ZSNES) with maybe a layer with transparency? Or maybe a dozen small sprites with transparency?<br><br>Does this seem reasonable?  I know there are some ALPHA commands out there for Blitz but are any of them any good?  Has anyone done anything like this in 2D?  Bottom line is this.  My goal is to have maybe 4 layers scrolling (platform game) with maybe one of those layers a simple "transparent" layer.  Or, have 3 layers with about 10 sprites that appear to be transparent all using B+.<br><br>I think it should be possible.  I could maybe even include a "Turn ALPHA OFF" command for really slow computers.<br><br>What do you programmers think?<br><br>Thanks<br><br>cb <br><br></td></tr></table><br>
<a name="284944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wish this was possible too... Alpha transparency in BB is beyond reach for real time use at the moment =( <br><br></td></tr></table><br>
<a name="284949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the Extended BB .dll allows for alpha transparency, etc. I'll dig out the thread...hang on...<a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=21685" target="_blank">Here you go :)</a> <br><br></td></tr></table><br>
<a name="285109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's possible. Especially if you just want to use transparency on 10-12 sprites every now and then. In my demo vectorized2 I have a big 3D cube done in Blitz+ that rotates and is twisted and transparent at the same time. And when you consider how much the calculations and drawing of the cube itself takes, then you would see that if you were doing something like just drawing a screen full of squares you will have amble time to have a good amount of smaller images moving around on the screen transparent without too many problems. Everything must be done on a locked buffer with writepixelfast, but it can be done. Here is a link to that demo:<br><br><a href="http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=zawran10302003103604&amp;comments=no" target="_blank">http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=zawran10302003103604&amp;comments=no</a><br><br>Or you can check my demos at zac-interactive.com<br><br>To get the best result have a rutine that takes the sprite and puts into an array and then as you move the sprite around read from the array so that you only have to do one readpixelfast for each pixel, because the biggest slowdown is with the readpixel, not as much with the writepixel. <br><br></td></tr></table><br>
<a name="285218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's the thing - DON'T use readpixel. Reads from video memory are slow. It's perfectly possible to get nice full-screen alpha stuff in software, but programs that achieve this do so by keeping everything in system memory, and then dumping the entire buffer into screen memory when it's done.<br><br><div class="quote"> <br>(don't worry, I own the game so my rom is legal).<br> <br></div><br>Yeah I was so worried. Can't have people admitting to having an illegal copy of something they stopped selling years ago... <br><br></td></tr></table><br>
<a name="285241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I think you two are correct.  Reading pixels is SLOOW.  Hmmm...what do you guys think about doing everything in an array or bank?  This would be like using system memory to do complex blits and then copying that to the backbuffer??<br><br>I may experiment with that.  What do you guys think?<br><br>Listen, here is what I think...back years and years ago, I could take my 7.14Mhz Amiga 500, read from video memory, and plot sprites at 60 fps.  SURELY our 500+ MHz machines nowadays can do it....lol<br><br>cb<br><br><br>********** EDIT ****************<br><br>Ok, I just coded a short example for array blitting.  I am not too impressed.  I haven't tried hard but I don't think it could get much faster.  Normally, I get 100 FPS (vsync) with a standard cls/flip loop but using this code, I only get 47 fps.   Jeesh.<br><br>I might forget the alpha blitting for a while.  Or just stick with other people's code for the handful of sprites that I will need alpha-blitted.<br><br>-cb<br><br><pre class=code>
;This is a test of advance blits using system memory
;cbmeeks


Const SCR_WIDTH = 640
Const SCR_HEIGHT = 480
Global Timer, FPS_Real, FPS_Temp,FPS


;screen array
Dim Screen(SCR_WIDTH,SCR_HEIGHT)

;graphics
Graphics SCR_WIDTH,SCR_HEIGHT,16,1
SetBuffer BackBuffer()

;clear arrays
Clear(0,128,0)


;main loop
Repeat

	;copy arrays to backbuffer
	LockBuffer
	For y=0 To SCR_HEIGHT-1
		For x=0 To SCR_WIDTH-1
			WritePixelFast x,y,Screen(x,y)
		Next
	Next
	UnlockBuffer
	
	DisplayFPS(0,0)
	
	Flip
	
Until KeyDown(1)



Function Clear(r,g,b)
	Local x,y
	For y=0 To SCR_HEIGHT-1
		For x=0 To SCR_WIDTH-1
			Screen(x,y)=GetRGB(r,g,b)
		Next
	Next
End Function


Function GetRGB% ( Red% , Green% , Blue% )  ; Combines Red, Green and Blue values into one RGB value
	Return Red Shl 16 + Green Shl 8 + Blue
End Function


Function DisplayFPS(x#,y#)
	Color 255,255,255
	If Timer + 1000 &lt;= MilliSecs() Timer = MilliSecs() : FPS_Real = FPS_Temp : FPS_Temp = 0
	FPS_Temp = FPS_Temp + 1 : Text x#,y#,"FPS: " + FPS_Real
End Function

</pre> <br><br></td></tr></table><br>
<a name="285284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are only doing a few sprites here and there, you don't have to wpf the entire screen. Just put the color values of the sprites into arrays and then only read the pixels that are in the actual location you are drawing to. If you are drawing a 32x32 pixel sprite then that is only 1024 rpf plus another 1024 wpf to write it back. If you have some kind of masking color you might even avoid a bunch of those as well with an if-check. A fullscreen in the above is 307,200 rpf+wpf's which ofcause is somewhat on the slow side. But you can have plenty of smaller sprites moving around no problem.<br><br>You could do something like this:<br><br><pre class=code>
Function drawTransp(x,y,transp)
transpn = 1-transp
LockBuffer BackBuffer()
For yy=0 To 39
	For xx=0 To 39
		mask = spritemaskdata(xx,yy)
		If mask &lt;&gt;$ff0000 Then
		rgbs = spritedata(xx,yy)
		rgbd = ReadPixelFast(x+xx,y+yy,BackBuffer())
		r = (((rgbs Shr 16) And $ff) * transp) + (((rgbd Shr 16) And $ff) * transpn)
		g = (((rgbs Shr 8) And $ff) * transp) + (((rgbd Shr 8) And $ff) * transpn)
		b = ((rgbs And $ff) * transp) + ((rgbd And $ff) * transpn)
		If r &gt; 255 Then r = 255
		If g &gt; 255 Then g = 255
		If b &gt; 255 Then b = 255
		If r &lt; 0 Then r = 0
		If g &lt; 0 Then g = 0
		If b &lt; 0 Then b = 0
		rgbf = r Shl 16 + g Shl 8 + b
		If x+xx &gt; -1 And x+xx &lt; 640 And y+yy &gt; -1 And y+yy &lt; 480 Then WritePixelFast x+xx,y+yy,rgbf
		End If
	Next
Next 
UnlockBuffer BackBuffer() 
End Function
</pre><br><br>And before you use it put the rgb values of the sprite and mask into the arrays set up for it. <br><br></td></tr></table><br>
<a name="285285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phil Newton</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If this is B+, try using the new lockedpixel etc commands.<br><br>I'll try and knock up an exampe to see if it's faster. <br><br></td></tr></table><br>
<a name="285290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried to poke the R G B data into three different memory banks, then I peeked the values out of the banks and used writepixelfast to blit them with alpha alteration to the screen. This worked quite good.<br><br>I achieved around 30'000-35'000 alpha shaded pixels plus the drawing of the background in 640x480x32 per frame at 85Hz. That's around 2.7 million alpha pixels per second running on a 2.6GHz P4 with Radeon 9700 pro.<br><br>It could probably be tweaked however.<br><br>Downsides:<br>&gt; Uses a lot of memory<br>&gt; only allows alpha shading of background and not sprites ontop.<br>&gt; takes time to create the memory banks<br>&gt; probably more downsides too =) <br><br></td></tr></table><br>
<a name="285297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>If this is B+, try using the new lockedpixel etc commands. <br> <br></div><br><br>I saw that command but don't quite understand it.  What's it for?<br><br>cb <br><br></td></tr></table><br>
<a name="285322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AndyBoy_UK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does that extended library (or any other for that matter) allow me to have a 2d image and then apply an alpha mask to it (so some parts of the image are more transparent than other sections) - for 2d shadow effects, etc?<br><br>Cheers,<br>A <br><br></td></tr></table><br>
<a name="285329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it does but I could be wrong.<br><br>Oh, and I found out what the lockedpixels do.  In fact, I converted it to use lockedpixels and it almost doubled in speed!  However, still too slow for full screen.<br><br>But, I think I will write a version for drawing sprites.<br><br>I really want to use it to create a "cloud" layer over my maps.  That is going to be difficult.<br><br>-cb<br><br><pre class=code>
;This is a test of advance blits using system memory
;cbmeeks


Const SCR_WIDTH = 640
Const SCR_HEIGHT = 480
Global Timer, FPS_Real, FPS_Temp,FPS
Global bank
Const FORMAT_RGB565=1
Const FORMAT_XRGB1555=2
Const FORMAT_RGB888=3
Const FORMAT_XRGB8888=4



;graphics
Graphics SCR_WIDTH,SCR_HEIGHT,16,1
SetBuffer BackBuffer()


;timer

;main loop
Repeat


	LockBuffer
	bank = LockedPixels()

	For y=0 To SCR_HEIGHT-1
		offset=y*LockedPitch()
	
		Select LockedFormat()
		Case FORMAT_RGB565
			For x=0 To 319
				PokeInt bank,offset+x*4,$f800f800
			Next
		Case FORMAT_XRGB1555
			For x=0 To 319
				PokeInt bank,offset+x*4,$7c007c00
			Next
		Case FORMAT_RGB888
			For x=0 To 639
				PokeInt bank,offset+x*4,$00ff0000
			Next
		Case FORMAT_XRGB8888
			For x=0 To 639
				PokeInt bank,offset+x*4,$00ff0000
			Next
		End Select
	Next

	UnlockBuffer

	DisplayFPS(0,0)
	
	Flip
	
Until KeyDown(1)



Function GetRGB% ( Red% , Green% , Blue% )  ; Combines Red, Green and Blue values into one RGB value
	Return Red Shl 16 + Green Shl 8 + Blue
End Function


Function DisplayFPS(x#,y#)
	Color 255,255,255
	If Timer + 1000 &lt;= MilliSecs() Timer = MilliSecs() : FPS_Real = FPS_Temp : FPS_Temp = 0
	FPS_Temp = FPS_Temp + 1 : Text x#,y#,"FPS: " + FPS_Real
End Function
</pre> <br><br></td></tr></table><br>
<a name="285361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> cb, what FPS do you get on your machine? Your first example runs at 10FPS on mine, the second one at 4FPS??<br>(P4 2.6GHz, Radeon 9700)<br><br>I suspect it may have something to do with the version of B+? I'm using a quite old one, 1.34, that I received for testing CTCC in. <br><br></td></tr></table><br>
<a name="285380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Andyboy - the dlls in that link do indeed allow you to have alpha maps. Download it and take a look at the demos. <br><br></td></tr></table><br>
<a name="285392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> [reply]<br>cb, what FPS do you get on your machine? Your first example runs at 10FPS on mine, the second one at 4FPS?? <br>(P4 2.6GHz, Radeon 9700) <br>[/reply]<br><br>What??  If anything the second should be faster...<br><br>Using VSYNC, I get 47 fps on the first and 95 on the second.  WHen I turn VSYNC off, I get over 200 on the second one.<br><br>When I do a:<br><br><pre class=code>
repeat
    cls
    flip false
until keydown(1)
</pre><br><br>I get almost 1000 fps!<br><br>Clearly, plotting the screen pixel by pixel is much slower.  Normally, you would never do this anyway.  Much faster to copy rows of pixels or lines.<br><br>cb <br><br></td></tr></table><br>
<a name="285440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> cbmeeks &gt;&gt; I am extremely interested in where things are going wrong on my machine! I can't get any performance out of B+ and writepixelfast at all. What version are you using??<br><br>Edit:<br>Hmm, I switched off debug mode and it went from 4FPS to 550 FPS ?!? I didn't know the debug mode made THAT much difference?? <br><br></td></tr></table><br>
<a name="285457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cbmeeks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using 1.37 the newest.<br><br>Hey, try this code out.  I am curious what FPS you get.<br><br><pre class=code>
Global Timer, FPS_Real, FPS_Temp,FPS

Graphics 640,480,16,1
SetBuffer BackBuffer()

Repeat
	Cls
	DisplayFPS(0,0)
	Flip False
Until KeyDown(1)

Function DisplayFPS(x#,y#)
	Color 255,255,255
	If Timer + 1000 &lt;= MilliSecs() Timer = MilliSecs() : FPS_Real = FPS_Temp : FPS_Temp = 0
	FPS_Temp = FPS_Temp + 1 : Text x#,y#,"FPS: " + FPS_Real
End Function
</pre><br><br>I get about 1000 FPS on my P3 800 laptop.<br><br>cb <br><br></td></tr></table><br>
<a name="285470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 3820 FPS in BlitzPlus<br>5200 FPS in Blitz2D <br><br></td></tr></table><br>
<a name="285549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paradox7</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> 8070 FPS in Blitz2D<br><br>Athlon 2000+<br><br>Which is a 1.67ghz<br><br>... although maybe a pointless test :P <br><br></td></tr></table><br>
<a name="285551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paradox7</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't see why Blitz can't have fast enough methods to atleast do alpha at a good speed, you shouldn't need a 3D Card for that.<br><br>I know the Main killer is ReadPixelFast, i've done many test with alpha, and the less ReadPixelFasts you do, the faster it runs, No matter if you have double the WritePixelFast, so the wpf is really Fast, but the rpf is really slow :( But as its stated, reading from video memory is slow. If only we could create a Buffer in System Memory, that we do all our drawing commands to just as easliy as we do the backbuffer<br><br>maybe instead of SetBuffer Backbuffer()<br>it can be, SetBuffer SysMemoryBuffer()<br><br>but after that, you use it just exactly the same as you would any other buffer, just drawimage's to it, writepixels, what not, and the flip still flips that sysmemorybuffer to the front screen, basically nothing would change, all the changes would be just internal that mark would have to setup, that all draw to system memory, instead of video memory.<br><br>The only thing is I don't know how fast it would be for the FLIP to take the image in System Memory, and Put it in The FrontBuffer()<br><br>If its fast, then all would be great! Then you could do really fast readpixels from system memory, do alphas, do all kinda magical pixel stuff now its all in sys memory :D<br><br>Although if the flip from System Memory to Front Buffer is slow, then its pointless :( <br><br></td></tr></table><br>
<a name="285565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoah...hang on guys, think this through....the SNES was only capable of displaying something like 64 colors at one time...meaning it's a paletted basied graphics system with each pixel being only 4-bits in length (which the GPU then uses the current palette as a look up table to define the color visable on screen)<br><br>You arn't seeing true alpha blitting of sprites and such...it's a simple hack like trick of setting up the color palette in such a way as to use logical operators (OR, AND, XOR) when blitting the sprite to the background...say the background pixel is 0010 (or palette index 2) then you use the OR operator with a sprite pixel value of 0001...the result (0010 combined with 0001 useing OR) is 0011 (value of 3) and the color of palette index value 1 (the sprite) is bright red, index 2 (the background) is black...if you had made the color of palette index 3 as a dark red color (3 is the result of the OR operation on both background and sprite) then it would seem that the sprite was alpha blitted onto the background.<br><br>When you get into "true" color modes (16-bit, 24-bit, 32-bit, etc..) these sorts of palette tricks don't work the same way...however you can do a "virtual" palette type thing by createing an array to hold the palette values and doing all your blitting in software...then instead of transfering this one software blitted pixel at a time, you use the value of the software pixel as an index into the palette array, and write that color value to the screen buffer...this can increase the speed of your software blitting because you don't need to have each pixel be a direct 16-bit or 32-bit color value. <br><br></td></tr></table><br>
<a name="285570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paradox7</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I do miss OR, AND, XOR, including cool stuff like palette rotations, ect ect, if only blitz could do 8bit, and load palettes, and or,and,xor image commands. that alone would speed up such graphics that don't require 16bit colors.<br><br>But, as is, would a system like i discribed above work? Would flipping from a system memory buffer, to the front buffer be fast enough? Because if so, doing all graphics in a system memory with pixel commands would be much faster. <br><br></td></tr></table><br>
<a name="285572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depends on a number of factors...color depth and image resolution being the keys (a 800 by 600 32-bit color buffer uses approx 1.83MB...thats per full update of the frame, a whole lot of data to transverse from system to video memory...trying to do that at 60 frames per second requires about 110MB of data to transfer from system to video memory each second...not really possable even on modern hardware sense the system to video memory pathway lacks the bandwidth to do this...<br><br>However a 320 by 200 16-bit image transfered 60 times a second requires something like 7MB of bandwidth per second which is more reasonable. <br><br></td></tr></table><br>
<a name="285576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm...what about createimage()?<br><br>Instead of useing a "true" system memory buffer...use a system memory "image" that you draw to then when finnished use the Blitz copyrect to transfer it to the video buffer? <br><br></td></tr></table><br>
<a name="285757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just read that BlitzGL can also do 2D alpha sprites.... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
