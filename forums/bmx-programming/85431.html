<!DOCTYPE html><html lang="en" ><head ><title >2d polygon collisions maths... headache</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2d polygon collisions maths... headache</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >2d polygon collisions maths... headache</a><br><br>
<a name="966391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br><br>so I have been working on my verlet-based physics engine verlet max for quite some time now and the entire project has reached a standstill because of this one problem.  I keep trying to implement some sort of polygon-polygon collisions but it never seems to work right.  I was thinking about giving up but I decided to post here first.<br><br>I have looked at engines like farseer and box2d and nonophysics to see how they do it but the maths in those are uncommented and too spread out to understand.  So does anyone know any good fast solid methods for polygon-polygon collision response... <br><br>btw I am not interested in Seperating axis theorom as I need this to work with all shapes convex and concave. <br><br></td></tr></table><br>
<a name="966398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I' not a grand magician in physics, but can't this be solved by testing each point of one poly against the other poly, and then viceversa (to avoid possible errors)? (using that function in the code archives :-) )<br><br>If they intersect, (here's where my physics knowledge lacks) just push the intersecting points behind? <br><br></td></tr></table><br>
<a name="966399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> agree with Jim; test each point of TriA whether it is inside TriB, at least that would provide some basic collision checking..<br>PLUS this could be performed with any complex concave/convex shapes, when using a raycast inside/outside checking..<br>However, still got no idea how to perform the velocity/angle calculations on this.. you would have to know abou the points movement, and which particular line of TriB it intersected, but how to find out..? <br><br></td></tr></table><br>
<a name="966481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah I think I have the actual collision detection down... its just the response thats getting me... I can detect if physics objects are colliding, I just cant figure out the maths to get the physics objects out of eachother with the proper velocities etc.<br><br>I will describe it in a bit more detail I guess.<br><br>I figured every frame I should do a check to see if the verlets had gone over a constraint using a lines intersect function between the constraint and the x,y to the ox,oy of the verlet... Then I figured out I must also detect whether a constraint passes over a verlet for which I use the pointinpoly routine.  These work fine for collision detection but I cant figure out the response. <br><br></td></tr></table><br>
<a name="966542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> These old articles are good, I don't know if you've seen them before...<br><br><a href="http://chrishecker.com/Rigid_Body_Dynamics" target="_blank">http://chrishecker.com/Rigid_Body_Dynamics</a> <br><br></td></tr></table><br>
<a name="966544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Figure out how far the point moved over the line, in a direction normal to the line, and move it back in the same direction by the distance it moved. That should stop things overlapping at least. How are you handling velocity after collision for collisions (say circle-circle) that you already have covered? I need to know so I can suggest a method to work with polys. <br><br></td></tr></table><br>
<a name="966573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @john Galt<br><br>that isnt the only possible way objects can overlap<br><br>suppose you have a point that has no velocity whatsoever then the constraint passes over it... then no collision is detected. so that is mainly what I am struggling with. <br><br></td></tr></table><br>
<a name="966587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good point... now you've got me scratching my head. Are these points always connected to lines? <br><br></td></tr></table><br>
<a name="966589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> not always...  I mean this is a general purpose physics engine so I have to prepare it for any situation like this... <br><br></td></tr></table><br>
<a name="966670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's what I think you should be doing, although I've never coded a physics engine so.. ;)<br><br>Even if your vertlet has no velocity, you should be checking for penetration/overlaps with every vertlet that's close (your spacial partitioning should decide) to your polygon.  Then I assume you'd rewind the time-step to the point at which the penetration occured and exchange the necessary forces between poly and vertlet.<br><br>This is no different to any other primitive-primitive collision where an edge hits a corner or vice-versa.<br><br>Also, perhaps you'll have to be careful how far you go with vertlets as once they're above a small point size they should be treated as circlular primitives(?)<br><br>Nice work on the demo's, makes me want to do 2d physics again :) <br><br></td></tr></table><br>
<a name="966695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks that is kinda what I was thinking earlier but I thought it may be a bit slow... so your suggesting like I move the objects half a time step back then if they are still colliding, I move it another half of a half of a timestep back but if they are not colliding, I would move it half of a half of a timestep forward...<br><br><div class="quote"> Nice work on the demo's, makes me want to do 2d physics again :) <br></div><br><br>demos?<br><br>edit: oh are you talking about the ones in my sig link? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
