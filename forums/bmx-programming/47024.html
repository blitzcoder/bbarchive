<!DOCTYPE html><html lang="en" ><head ><title >formulas for "lightblend and alphablend</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >formulas for "lightblend and alphablend</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >formulas for "lightblend and alphablend</a><br><br>
<a name="523074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you know exactly the formulas used to calculate the color of pixels resulting? here are my guesses:<br><br>Bacground color: (r1,g1,b1)<br>Object color: (r2,g2,b2)<br>Object alpha=a<br><br>resulting object color in alphablend=( (1-a)*r1+a*r2, (1-a)*g1+a*g2, (1-a)*b1+a*b2)<br><br>resulting object color in lightblend=( r1+a*r2, g1+a*g2, b1+a*b2)<br><br>Are these correct?<br><br><br>Another question: how do you make so that, when compiling, blitz inserts the pictures in the exe? <br><br></td></tr></table><br>
<a name="523077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertex</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.mevis.de/~uwe/opengl/glAlphaFunc.html" target="_blank">http://www.mevis.de/~uwe/opengl/glAlphaFunc.html</a><br><a href="http://www.mevis.de/~uwe/opengl/glBlendFunc.html" target="_blank">http://www.mevis.de/~uwe/opengl/glBlendFunc.html</a><br><br><pre class=code>	Method SetBlend( blend )
		If blend=state_blend Return
		state_blend=blend
		Select blend
		Case MASKBLEND
			glDisable GL_BLEND
			glEnable GL_ALPHA_TEST
			glAlphaFunc GL_GEQUAL,.5
		Case SOLIDBLEND
			glDisable GL_BLEND
			glDisable GL_ALPHA_TEST
		Case ALPHABLEND
			glEnable GL_BLEND
			glBlendFunc GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA
			glDisable GL_ALPHA_TEST
		Case LIGHTBLEND
			glEnable GL_BLEND
			glBlendFunc GL_SRC_ALPHA,GL_ONE
			glDisable GL_ALPHA_TEST
		Case SHADEBLEND
			glEnable GL_BLEND
			glBlendFunc GL_DST_COLOR,GL_ZERO
			glDisable GL_ALPHA_TEST
		Default
			glDisable GL_BLEND
			glDisable GL_ALPHA_TEST
		End Select
	End Method</pre><br><br>cu olli <br><br></td></tr></table><br>
<a name="523081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Another question: how do you make so that, when compiling, blitz inserts the pictures in the exe? <br></div><br><br>You use Incbin "ImageFolder/Filename.png" at the start of your file. Do this for every picture, sound, map, whatever.<br><br>Then when you load the images/whatever,<br>Car:TImage = Loadimage("incbin::ImageFolder/Filename.png") <br><br></td></tr></table><br>
<a name="523171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx <br><br></td></tr></table><br>
<a name="523176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lightblend has a couple of steps involved. For each pixel of the source image, the value of the pixel is scaled according to the alpha value which can be from 0.0 to 1.0. The pixel color is multiplied by the alpha value, from 0.0 to 1.0. So when the alpha is $FF (which is 1.0 in floating point), you see the image `as is`. When the alpha is less than 1.0, the image gets progressively darker down towards black, which you can interpret to mean it gets progressively fainter and more transparent. Usually you will have an alpha of 1.0 which I think BlitzMax sets up behind the scenes by default. The destination pixel value is then multiplied by 1.0 because of the GL_ONE mode, so it stays as is. Then, after these scaled source and destination values have been calculated, the source value is added to the value of the destination with a simple addition ie source+dest. If that final value is more than 1.0 it gets cropped at 1.0, so in other words it maxes out at white where the two pixels combine to make a value that is too high to be stored. So the overall formulae should be Min(1.0,(Source*Alpha)+Dest).<br><br>With alphablend a similar thing happens except that rather than keep the destination `as is` before the addition, it is multiplied by a value which is derived from the simple sum 1.0-SourceAlphaValue. This is done before the source and destination values are added together. The effect is that as the source image becomes progressively more transparent, the destination image contributes more and more to the overall color. And vice versa, as the source value becomes more solid, there is less of the destination color contributed. It is inversely proportional. Again, after the addition, if the value is greater than 1.0 it is cropped to 1.0, but it shouldn't because both source and destination colors are scaled so you only ever get a 100% shared color.<br>The formulae should be Min(1.0,(Source*Alpha)+(Dest*(1.0-Alpha))).<br><br>I hope I got that right.<br><br>GL_SRC_ALPHA means that the source pixel value is multiplied, per component individually, by the value of the source alpha.<br><br>GL_ONE means keep the value of the destination pixel.<br><br>GL_ONE_MINUS_SRC_ALPHA means that the destination pixel is multiplied by the inversed source alpha value.<br><br>So Lightblend is basically an `add the two pixels together` mode, and alphablend is an `add the two pixels together after changing how much each pixel contributes to the overall total by multiplying them by alpha and inverted alpha values.<br><br>I hope that helps. <br><br></td></tr></table><br>
<a name="523198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey thx! So I forgot the Min stuff in my formulas.<br><br>when one sees a transparency for the first time, it really looks magic and one wonders how the hell that works. Then one discovers that there is just simple pixel math behind it ;-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
