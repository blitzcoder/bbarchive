<!DOCTYPE html><html lang="en" ><head ><title >BMax1.44 fails on WinXP SP1?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BMax1.44 fails on WinXP SP1?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BMax1.44 fails on WinXP SP1?</a><br><br>
<a name="1116716"></a>

<a name="1116718"></a>

<a name="1116719"></a>

<a name="1116720"></a>

<a name="1116721"></a>

<a name="1116723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have just installed Windows XP SP1 on an old PC as I wanted to test some graphics code with the DirectX7 driver.<br><br>I tried my program, it didn't even start!!!<br><br>So I install Blitzmax and coded this:<br><br><pre class=code>
Graphics 800,600

Repeat
  For Local I=0 To 100
    Plot Rnd(800),Rnd(600)
  Next
  Flip
Until AppTerminate()
</pre><br><br>I then get this error:<br>Unhanded Exception: Attempt to call uninitialized function pointer<br><br>This is on line 239 of d3d9max2d.bmx:<br><pre class=code>
		If Not D3D9GraphicsDriver() Return Null
</pre><br><br>WinXP SP1 comes with DX8.1<br><br>Even if I try to set the graphics driver with:<br><pre class=code>SetGraphicsDriver D3D7Max2DDriver()</pre><br>I get the error !?<br><br>Any ideas?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116722"></a>

<a name="1116725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay...... I've just downloaded every version of BlitzMax I can and found that 1.34 works but any later version fails... so it started when DX9 was offically added.<br><br><br>BTW It works fine with WinXP SP3, but that comes with DirectX9c installed :/<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use the framework command to prevent the D3D9 driver to be part of the game? <br><br></td></tr></table><br>
<a name="1116733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep! That works... if I use: <pre class=code>Framework BRL.GLMax2d</pre><br>or <pre class=code>Framework BRL.D3D7Max2d</pre> it works fine...<br><br>But what if I want my game to run in both DirectXs based on the user's system?<br><br>:( <br><br></td></tr></table><br>
<a name="1116734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see... I think DX9 should not be maling the program to fail if it's not selected, so it looks like a bug to me. <br><br></td></tr></table><br>
<a name="1116737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Ziggy :) Just raised a bug report. <br><br></td></tr></table><br>
<a name="1116738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any reason not to upgrade to SP3? Microsoft doesn't support previous service packs, why should BRL? <br><br></td></tr></table><br>
<a name="1116742"></a>

<a name="1116743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills Good job testing the backwards compat!  That's something I didn't do since adding DX9 support with fallback to DX7.  In fact my specs probably still say DX7 so it's a bummer to realise that my games probably crash for some slow upgraders...<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116798"></a>

<a name="1116799"></a>

<a name="1116800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Htbaa... true, but BlitzMax has supported DX7 for ages and if you check the products page: <a href="http://www.blitzbasic.com/Products/_index_.php" target="_blank">http://www.blitzbasic.com/Products/_index_.php</a> it says this:<br><br><div class="quote"> Windows Requirements: Windows 2000/XP/Vista/7; Hardware OpenGL support recommended; <b><i>DirectX7</i></b> or greater recommended. <br></div><br><br>@Jake (GA) - I just wanted to make sure it would still work and I did see that the min specs of Spring Bonus still said DX7 so I thought I had done something wrong and spent hours trying to get this to work - lol!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> BlitzMax has supported DX7 for ages <br></div><br><br>Fine distinction: BlitzMax should support DX7 for people who want or need it. There's no reason whatsoever to give any thought to XP SP1 specifically though, and in fact going out of the way to do so would be socially irresponsible. <br><br></td></tr></table><br>
<a name="1116805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I only mention XP SP1 as that was the system I was testing with ;) <br><br></td></tr></table><br>
<a name="1116810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, as long as there's a DX7 driver, it shouldn't be dependent on a DX9 test working out... that would obviously defeat the point. <br><br></td></tr></table><br>
<a name="1116815"></a>

<a name="1116816"></a>

<a name="1116817"></a>

<a name="1116818"></a>

<a name="1116820"></a>

<a name="1116821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>To fix it :-<br><br>In file<br>/BlitzMax/mod/brl.mod/dxgraphics.mod/d3d9graphics.bmx<br>Line 298<br><br>You could it change it to :=<br><pre class=code>
'create d3d9
If Not d3d9Lib Return Null      '&lt;-------ADDED

_d3d=Direct3DCreate9( $900 ) '&lt;- Officially this should be _d3d=Direct3DCreate9( 32 )
If Not _d3d Return Null
</pre><br><br>This will stop the call if d3d9 isnt installed.<br>EDIT:- This should work but I dont have the same spec machine to test it. If you could give it a go though....<br><br>Don't forget to 'Build Modules' ( CTRL + D ).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> If this works, it would be great if BRL would make it an official fix. <br><br></td></tr></table><br>
<a name="1116827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool - I'll test it tonight, Thanks! :)<br><br><pre class=code>'&lt;- Officially this should be _d3d=Direct3DCreate9( 32 )</pre><br><br>Why officially should it be 32 instead of $900? I've got no idea about this stuff ;) <br><br></td></tr></table><br>
<a name="1116832"></a>

<a name="1116836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Why officially should it be 32 instead of $900? I've got no idea about this stuff ;)<br> <br></div><br><br>The DirectX SDK says thats what it should be :P<br><br>When using third party debugging software it will complain that the app has been built against a different version of Dx9 to the version installed on your pc. In the SDK files its a value of 'D3D_SDK_VERSION' which is defined as '32'. It doesn't really affect anything until you get deep into it, so there's no need to worry :D<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tested col's on Windows XP SP1 running DirectX8.1 works fine :)<br><br>Thanks a lot col. <br><br></td></tr></table><br>
<a name="1116934"></a>

<a name="1116935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks a lot col. <br></div><br>That's cool. Glad its fixed.<br><br>@Jake - We can assume Mark's going to include the fix(es) in the next update by the what he says in the post in the bug forum.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116936"></a>

<a name="1116937"></a>

<a name="1116938"></a>

<a name="1116939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was just thinking, because of this bug all games released with any version BlitzMax greater than 1.34 requires the user to have DX9 installed... I'm surprised this hasn't occurred earlier as 1.35 was released two years ago (20-11-2009)!<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=87819#996218" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=87819#996218</a><br><br>Maybe this is good news after all and the world has moved forward ;)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1116942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow !!!<br>It is a long time for something like this to creep out of the woodwork! I can only imagine Marks surprise to see it :D I had visions of him holding his head thinking wtf?!?!?! hehe<br><br>Only thing I can think of for this to go un-noticed before is that people do actually keep their pcs up to date with the service packs etc :-) as there's been a fair amount of games released out there that carry this bug. <br><br></td></tr></table><br>
<a name="1116950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep in mind that many commercial games include the DX9 installer, so the vast majority of gamers will already have DX9 on their machine, even if they never run a windows update. <br><br></td></tr></table><br>
<a name="1117002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> @col: Ah good to know.  You know I was still using the DX7 driver (setting it myself) even after DX9 was in BMax, it was only in April I switched to DX9 so no one reported any problems to me before the switch (or after).<br><br>Now if only Mark, or some other expert could apply their talents to fixing the BMax not compiling on Mac with Lion/XCode 4.2 on it (required for iOS releases): <a href="http://www.blitzbasic.com/Community/posts.php?topic=96127" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=96127</a> that would be awesome! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
