<!DOCTYPE html><html lang="en" ><head ><title >DeleteFile.. doesn't</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DeleteFile.. doesn't</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >DeleteFile.. doesn't</a><br><br>
<a name="716379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not suggesting this is a bug, I'm quite sure it's not, but I do need to find a way around this. This goes back to my thread about zlib and passwords. Since there is apparently no way to zip a bank with a password, I'm having to write temp files to disk, archive them and delete the archives. Doesn't really matter, since the end user won't have any of my tools and I can read them straight into memory without unpacking to disk.<br><br>However, I can't get the files to delete when I'm finished with them. I've closed the streams, closed the archives, everything is finished with, but deletefile doesn't delete them.<br><br>I don't know why this is happening, but I'm guessing it might be because the program is trying to delete too quickly after closing the stream and the file is not available for deletion for a few milliseconds. It's a long export process so I don't really care about waiting a few millisecs until the file is ready for deletion, but is there a proper way to do this? ( Other than trying over and over and seeing if it worked with filetype. )<br><br>Failing that, is there a more powerful way to delete a file? I recall that there was a little program you could download which had shell integration, and you could delete any file by selecting this program on the right click menu. Files that normally would refuse to delete with some kind of "this file cannot be renamed or deleted as it is currently being used by a program" just went bye-bye. Any idea how they work?<br><br>Is there any way of detecting when they are suitable <br><br></td></tr></table><br>
<a name="716380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I don't want to sound boring but it took me less time to test the following than to read your post:<br><pre class=code>
f=WriteFile("test.txt")
WriteLine f,"hello"
CloseFile f
DeleteFile "test.txt"
</pre> <br><br></td></tr></table><br>
<a name="716382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, it's a bit more complicated than that though. I'm using GMan's ZipEngine and writing some pretty big files. I write several big files ( 4-5MB ) and then archive them into one big zip. Then I delete the files, except that I don't.<br><br>There's no possibility of user error, I've stepped through the code, I've got debuglog calls, and I don't even begin to delete the first file until I've archived the final file and closed the archive.<br><br>So, not sure what it is, but maybe it's because ZLib isn't finished with the file even when BlitzMax has control again. <br><br></td></tr></table><br>
<a name="716557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PantsOn</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've had a problem when even after closing a file off. it still takes time for windows to "create" the file. <br>In the meantime you already deleted a file thats not there, and then the file gets created.<br><br>try something like<br>while not deletefile(tempfile)<br>delay 100<br>wend <br><br></td></tr></table><br>
<a name="716593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, that's pretty much what I'm doing at the moment. Just wondered if there was a better way, but I guess that's good enough, particularly since I'm the only person using the program. <br><br></td></tr></table><br>
<a name="716597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> A few things to try, comment out the chmod fix for deleting readonly files pub.mod/stdc.mod/stdc.c[46]. If that doesn't help try changing line 48 to _unlink( path );<br><br>This sounds a lot like a virus checker or search tool (google desktop?) messing with files externally, are you using the proper windows user temp folder? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
