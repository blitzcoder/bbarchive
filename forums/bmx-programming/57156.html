<!DOCTYPE html><html lang="en" ><head ><title >Memory Leaks?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory Leaks?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Memory Leaks?</a><br><br>
<a name="635354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I trying to figure out if I have a memory leak.  Below shows the build from one level to the next.  Does anyone know if this is normal.  It seems like memory build a bit when there nothing really going on?  Does it just increment slowly.  Also, when the memory is freed by the garbage collector, does it happen immediately?<br><br>Start Game (B):=92374<br>Start Game (E):=120225<br>Weapons Menu Initialize (B):=128613<br>Weapons Menu Initialize (E):=140377<br>OGG (B):=157767<br>OGG (E):=157833<br>Start Next Level (B):=226649<br>Start Next Level (E):=236723<br>Weapons Menu Initialize (B):=240113<br>Weapons Menu Initialize (E):=254679<br>OGG (B):=257673<br>OGG (E):=257739<br><br>Thanks <br><br></td></tr></table><br>
<a name="635363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No memory is not freed immediately. It is repooled and freed if not used for quite some time and there is still a remaining pool the GC can create new objects from.<br><br>What das B / E mean? <br><br></td></tr></table><br>
<a name="635365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> B - Begining <br>E - Ending<br><br>Some Process above allacate memory as they go.  When should I be concerned that the memory is growing evreytime I restart the game or start a new level? <br><br></td></tr></table><br>
<a name="635376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Normally it isn't a problem.<br>But with cyclic object linking (so an object is linked to itself over a few other), you must be very carefull as those are not freed even if the reference to such a structure is null-ed (BM does not keep root reference so it can't see that the whole cyclic thing is no where used anymore).<br><br>One thing that can temporaly raise the memory usage is when you do a lot of string operations, as they always create a temp string. But this should only go up to a given point where it will stay afterwards (the freeing and creation of new strings keeps each other balanced)<br><br>Restarting should not be a problem, nor should a new level, as long as you make sure that you null-ify everything you do not need (I always use TList and TMap to take care of existance handling for my object so I normally do not need global nor manual null-ifying. I remove them from the list and thats it) <br><br></td></tr></table><br>
<a name="635384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what about in the following example:<br><br>[Creating a Ninja]<br>Create Sword<br>Create Ninja and pass Sword as a parameter<br>Attach Nija to the World in TLIST<br><br>[When Ninja Dies]<br>Remove Ninja from TLIST<br><br>Also, I assume GCCollect() will not fix this?<br><br>What is still in memory?<br>Both Sword and Nija? <br><br></td></tr></table><br>
<a name="635401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you have no other references to Ninja but in the World list, everything should be gone. When ninja is removed from the list, there are no remaining handles, so ninja is removed. Because sword's handle was in the memory that's just been freed, it should be gone too.<br><br>I *believe* what Dreamora means is if your Sword had a handle to Ninja ( perhaps an owner field ) then this would cause problems because they both have references to each other and could never be freed without specifically clearning the owner reference as well. <br><br></td></tr></table><br>
<a name="635410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, thats what I meant.<br><br>Or if you have something like GrandParents, Parents and Childs where all of them know their parents, grandparents and childs, then it would not help to free the family, as they are all linked within the family as well so the whole family would still exist within the active data (as each object has at least one reference pointing to it) but it would not be accessable anymore to you. <br><br></td></tr></table><br>
<a name="635420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, memory not being freed is a lot of work.  Is there anyway to determine which objects are not cleared? <br><br></td></tr></table><br>
<a name="635434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simple one: If a reference to this object exists, it is not freed.<br>You only have to have a clear structure for handling references, so you can easily say how many references exist to an object. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
