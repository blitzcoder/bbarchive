<!DOCTYPE html><html lang="en" ><head ><title >Tiled maps DRAWIMAGE and 3D? whats best?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tiled maps DRAWIMAGE and 3D? whats best?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Tiled maps DRAWIMAGE and 3D? whats best?</a><br><br>
<a name="924893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This might be "yet another" of those topics but what ever i found over the search doesnt entirely awnser my question, i think.<br><br>Im working on a 800x600 RPG game with scrolling. I currently have all 32x32 tiles rendered on the screen (includes animated water and such) and a player, and speech bubbles, and basicly the game runs at 45 fps. I think this should have been 50+<br>I mean, what i want todo is add HUE and HSL effects and als particle effects like fire, and that is where blending and coloring and everything kicks in. <br>Not to mention i still have to implament a GUI. So im sort of a afraid that its gonne do a drop to 30FPS, which in my opinion, is a bit bad.<br>Altough, that only is because the "jittering" is what bothers me. E.g. if for some reason 1 frame takes longer to render than the other, you would notice that.<br>But ive seen some games and demo's that demonstrate like TONS of tiles, and full FPS. i assume that can only be because these engines use Hardware Acceleration?<br>If so, that maybe i could consider using that? and if it is possible to make a full 2D RPG about the same way as in 2D, but then using a 3D in BlitzMax, without tile bleeding and such... than that might be a good way to gain FPS?<br>Also, the game is suppose to be cross-platform. <br><br></td></tr></table><br>
<a name="924901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitzmax is 3d. It renders all of the 2d graphics using the 3d hardware pipleline.<br><br>You would be surprised at the frame rate of some of those rpg games. A stable consistant 30fps is better than a jittery 45-60fps. So sometimes they slow it down to a constant 30 or even 20fps if needed. Nothing worse than a heaby gui oriented game with a choppy, stuttering frame rate.<br><br>And yes, adding particles and a gui, etc, will probably slow your game down even more. Have you looked into some kind of fixed logic handling so your game plays at the same logic rate even if render speed slows or speeds up?<br><br>Tile Bleeding: Make sure you put at least 1 empty pixel border around your tiles. This will stop the artifacting.<br><br>What are your specs btw? And if possible upload a demo so we can evaluate your frame rate, etc. <br><br></td></tr></table><br>
<a name="924910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> have you profiled it?<br><br>I don't consider myself as a good programmer but I know that most of the fpu are used in graphics. In games nothing is what it seems and as long as something looks good then it's valid. There are alot of tricks used by the pros that make something look impresive even if it's something simple.<br><br>Some obvious hints:<br><br>Don't draw outsied the view area more than necessary(very important).<br>Don't draw tiles on top of tiles that are not transparent.<br>Don't use intense calculations for each tile(figure out the first and sequentially put the rest where possible).<br>Don't exagerated the amount of animation(animation for realistic look is a frame rate killer).<br>Limit particles from decent to barely acceptable numbers( as your game permits).<br>Study other tile engines see what they did. and how the did it. learn from them.<br><br>look at this tile engine:<br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1999" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1999</a><br><br>it's 800x600 has zooming to where you can see the whole map and baddies, alot of enemies, a basic AI(really basic but none the less), different tile levels and transcitions(land, sand and water), and bonuses. keeps water creatures in water, land creatures in land. it is a self generated tile map and has smart map movement. <br>The frame rate on my machine goes from 300 fpus(at small section view) to 30fps(at full map view) while not looking choppy or pausing.<br><br>I believe that is the same basic engine from where Crimsomland was created:<br><a href="http://www.crimsonland.com/" target="_blank">http://www.crimsonland.com/</a><br>I am not saying it's a great game, just that if it is goond enough to make money, it should be be good enough to learn from.<br><br>conclusion:<br><br>BE CREATIVE <br><br></td></tr></table><br>
<a name="924951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What timing method do you use and what profiling have you done? <br><br></td></tr></table><br>
<a name="924953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitzmax's drawing commands are very generic.<br>Most things can be done much more efficiently, like using a single-surface for tiles, etc.<br><br>However, I have a game here of 24x24 sized-tiles at 71 by 44, with AI running on 100+ tiles and running on "bots", with particle effects etc, and it all easily runs in the default 60fps.<br><br>I would guess that you have other issues not directly associated with rendering. Perhaps your design could be improved ? <br><br></td></tr></table><br>
<a name="924969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, sounds like you got a solution.<br><br>Let me post the code guys, i hope this clarifies things.<br><br><pre class=code>	'main loop
	Local execution_time:Float = 0
	Local t:Int = MilliSecs() 
	While Not (KeyHit(KEY_ESCAPE) Or AppTerminate() Or cancel) 
		execution_time:+(MilliSecs() - t) 
	 	t = MilliSecs() 
		console.Listen() 
		
	    While execution_time &gt;= update_time
			_Update() 
			UPS.Update() 
			execution_time:- update_time
		Wend
	
		_Render(execution_time / update_time) 
		FPS.Update() 
	Wend</pre><br><br>and for tweening<br><br><br><pre class=code>Function _Update()
	player.vx = player.x + Cos(player.angle) * (player.speed * 32) / (1000.0 / Float(update_time)) 
	player.vy = player.y - Sin(player.angle) * (player.speed * 32) / (1000.0 / Float(update_time)) </pre><br><br><br><pre class=code>Function _Render(tween:Float) 
	Local tx:Int = Int(player.x * tween + player.oldx * (1.0 - tween)) 
	Local ty:Int = Int(player.y * tween + player.oldy * (1.0 - tween)) 
</pre><br><br>here is the ticker class<br><br><pre class=code>
Type TTicker
	Field count:Int
	Field timeout:Float = 1
	Field timer:Float
	Field counter:Int
		 
	Method update() 
		If Self.timer &lt; MilliSecs() 
			Self.timer = MilliSecs() + (Self.timeout * 1000) 
			Self.count = Self.counter
			Self.counter = 0
		Else
			Self.counter:+1
		End If
	End Method
End Type</pre> <br><br></td></tr></table><br>
<a name="924975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might just be me but the code doesn't help show how you're doing you tile drawing, how your profiling or much of anything else. <br><br></td></tr></table><br>
<a name="925006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. Then what do i do? Post the entire game code? thats quite a lot... hehe.<br><br>? <br><br></td></tr></table><br>
<a name="925009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Philip7</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is just a hunch but i think you're double-tweening. <br>Try removing:<br><br>/ (1000.0 / Float(update_time)) <br><br>From Update<br><br>Disclaimer: I may very well be very very wrong. <br><br></td></tr></table><br>
<a name="925016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol @ disclaimer.. <br><br><img src="http://www.weijtenburg.nl/elitelawenforcer.gif"> (i will cut you in half!)<br><a href="http://www.medievalmmog.com" target="_blank">http://www.medievalmmog.com</a> <br><br></td></tr></table><br>
<a name="925026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are drawing your player only once per  cycle so I doubt that is your problem but the tiles are drawn in the hundreds. The problem might be the way you are processing them. Although, If you are processing your tiles the same way you are processing your player, I can see why that might be a problem. If you don't mind posting the tile code, maybe someone here can help you. <br><br></td></tr></table><br>
<a name="925031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dont mind pasting the code, its just huge alltogether. I have no idea how to strip it down as its a whole integrated packes with binary loaders and stuff. <br><br></td></tr></table><br>
<a name="925046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to post it(just the tile section) or send it to me, maybe I can help you but the more heads to help you the more solutions you will have. Oher than that, you are on your own. <br><br></td></tr></table><br>
<a name="925105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ok. Then what do i do? Post the entire game code? thats quite a lot... hehe.   <br></div><br>... or zip it up and make it available as a link?<br>I still think the best way to go is do some profiling. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
