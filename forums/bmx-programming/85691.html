<!DOCTYPE html><html lang="en" ><head ><title >Converting an object to a float array?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Converting an object to a float array?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Converting an object to a float array?</a><br><br>
<a name="969904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I set up an array like:<br><br>Local MyFloatArray:Float[100]<br><br>Then I want to store this in memory, like so:<br><br>MyMemoryLocation[0]=HandleFromObject(MyFloatArray)<br><br>This works fine. I want to then retrieve the float array, and the only way I could figure to do this is with this:<br><br>Local Array:Float[]=Float[](HandleToObject(MyMemoryLocation[0]))<br><br>This seemed to allow the compiler to get past this problem, but I really kind of just guessed at the =Float[] part ... is this the correct way to convert back to a float array? <br><br></td></tr></table><br>
<a name="969908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks right to me, and a quick test program confirms it.<br><br><pre class=code>
SuperStrict

Local MyFloatArray:Float[100]

MyFloatArray[50]=167

Local MyMemoryLocation:Int[]=New Int[1]
MyMemoryLocation[0]=HandleFromObject(MyFloatArray)

Local Array:Float[]=Float[](HandleToObject(MyMemoryLocation[0]))

Print Array[50]
</pre> <br><br></td></tr></table><br>
<a name="969913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also note, that if MyFloatArray goes out of scope, it is liable for garbage collection. <br><br></td></tr></table><br>
<a name="969922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool.<br><br>Regarding garbage, do you mean that if I store the float array as an object handle, and free the object, it will remove the object entirely from memory and won't be able to get it back from the handle? Or does the garbage collector keep track of handles as reference counts etc? <br><br></td></tr></table><br>
<a name="969926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also note, that if MyFloatArray goes out of scope, it is liable for garbage collection.  <br></div><br>It shouldn't be liable for collection unless you call Release on the handle, surely? HandleFromObject - according to the documentation, which I know isn't 100% reliable - manually increases the reference count when it gets called and must correspond with a release statement to lower the reference count.<br><br>Or is this changed because of the new, threaded GC in the latest version? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
