<!DOCTYPE html><html lang="en" ><head ><title >leadwerks.audio</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >leadwerks.audio</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >leadwerks.audio</a><br><br>
<a name="900764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been messing around with audio, and I wrote a new sound API that bypasses the BRL audio driver class.  This is a compact API that is very close to OpenAL, but it is much easier to use, with automatic initialization and hardware checks.<br><br>Features:<br>-3D spatialization<br>-Doppler effect<br>-EAX hardware effects that are easy to use<br><br><a href="http://leadwerks.com/mod/leadwerks.mod/audio.mod" target="_blank">http://leadwerks.com/mod/leadwerks.mod/audio.mod</a><br><br>The position, velocity, and matrix commands accept a byte pointer, so you can pass a float array, float pointer, or an object and it will all work.<br><br>Usage:<br><pre class=code>Local sound:TSound
Local source:TSource
sound=TSound.Load("FlashlightSwitch.wav")

source=TSource.Create(sound,1)
source.play()

SetListenerMatrix([1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0])

Delay 2000

source.pause()
source.play()</pre><br><br>To turn on EAX, do this:<br><pre class=code>EAXEffect EAX_SEWERPIPE</pre><br><br>You can check to see if EAX is supported with EAXSupported(). <br><br></td></tr></table><br>
<a name="900769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, <br><br>I managed to download the individual files and create the directories myself..but out of curiosity how do you download directories? <br><br></td></tr></table><br>
<a name="900773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't via a browser, unless they're compressed.  If you can connect via FTP then you can easily. <br><br></td></tr></table><br>
<a name="900774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this URL instead<br><br><a href="http://leadwerks.com/mod/leadwerks.mod/audio.mod/" target="_blank">http://leadwerks.com/mod/leadwerks.mod/audio.mod/</a> <br><br></td></tr></table><br>
<a name="900776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks interesting.<br><br>Sorry for my ignorance, but what exactly is wrong with the BRL audio driver?<br>Are you going to make this cross-platform?<br>And shouldn't you call it something other than audio.mod?<br><br>Btw, <a href="http://code.google.com/" target="_blank">Google Code</a> hosts open source code for free and provides subversion and wiki, it's in their faq <a href="http://code.google.com/p/support/wiki/FAQ" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="900792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is cross-platform.<br><br>The problem with BRL's audio driver is it isn't written with 3D in mind, and it is rather bulky.  It also does annoying things like attach the loop mode to the LoadSound command.<br><br>I also really like EAX. <br><br></td></tr></table><br>
<a name="900794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any support for streaming ogg sounds from disk or even better streaming oggs from memory without unpacking?<br><br><div class="quote"> And shouldn't you call it something other than audio.mod? <br></div><br>Why? It's in the Leadwerks namespace, so what does it matter what the module is called? <br><br></td></tr></table><br>
<a name="900795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> *shakes head*  Somebody takes the time to write a module and is nice enough to release it for free and their thanks is being kicked in the teeth because somebody feels the name isn't up to perceived standards.<br><br>I effing love this community. <br><br></td></tr></table><br>
<a name="900798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; what does it matter what the module is called? <br><br>Because it can be confused with BRL's audio.mod.<br><br>GaryV, it's got nothing to do with 'perceived standards' and I don't consider it a 'kick in the teeth' by any stretch of the imagination.<br><br>No further comment here. <br><br></td></tr></table><br>
<a name="900837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, having a look at this now.<br><br>Also, I don't see how leadworks.audio could possibly be confused with brl.audio.  It's an entirely different namespace! <br><br></td></tr></table><br>
<a name="900838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what exactly is wrong with the BRL audio driver? <br></div><br>Nothing at all. <br><br></td></tr></table><br>
<a name="900850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Nothing at all." Well.. when I first used Blitzmax a year ago, the sound fx were out of sync, stuttered, etc. On ALL of my test machines, so I wrote my own Bass wrapper. Has things changed that the audio drivers are much more stable? <br><br></td></tr></table><br>
<a name="900853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Has things changed that the audio drivers are much more stable?  <br></div><br>BRL.Audio is a generic module. It doesn't do anything apart from hand off to a particular audio driver, through a standard interface. So you use whichever audio driver suits you, and your own code doesn't have to change. There are audio drivers for openAL, whatever the Win32 DX audio thing is called, FreeAudio, FMOD, irrKlang, and I think MaxMod works as a driver too(?).<br><br>Each to their own, of course. That's why we have a choice :-) <br><br></td></tr></table><br>
<a name="900865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Abrexxes</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the next months we can still wait for a LINUX port of the bass.dll. So, not really free..but perfekt (as win32 and mac are supported). What Leadwerks is going to share is very nice, why not include that in the bm modules?<br><br>jm2c <br><br></td></tr></table><br>
<a name="900908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for this Josh :) <br><br></td></tr></table><br>
<a name="902755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The module underwent some heavy revision and is now ready for game use.<br><br>I just finished up a pretty big lesson on the sound system in our engine.  It's in C++, but it's basically the same as BMX, and it is mostly just an explanation of this audio module.  In BMX you don't need to free the sources, as they will be managed automatically.<br><br>Article:<br><a href="http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound.pdf" target="_blank">http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound.pdf</a><br><br>Video:<br><a href="http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound.wmv" target="_blank">http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound.wmv</a><br><br>Files:<br><a href="http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound_Files.zip" target="_blank">http://www.leadwerks.com/files/Tutorials/CPP/Introduction_To_Sound_Files.zip</a> <br><br></td></tr></table><br>
<a name="915041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks for this josh.<br><br>Don't want to lower the tone, but my brain's taking another day off.<br><br>How on earth do you set the listener position? In the docs it says...<br>-------------------------<br>TListener listener=CreateListener();<br>PositionEntity(listener,Vec3(0,0,-2));<br>-------------------------<br><br>Which is fine, but there's no TListener type in the mod.<br><br>Would I be right in thinking it has to be set with the listener matrix? if so, what are the settings for rotate and positione within that matrix?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="915092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> The SetListenerMatrix() does this.  Whatever 3D engine you are using should have 4x4 matrices stored for objects. <br><br></td></tr></table><br>
<a name="915094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Josh, thanks for replying.<br><br>I'm not using a 3d engine for this, I'm just evaluating the audio mods avaliable for Max.<br><br>I'm generating a grid (800*600) with some random sound files loaded at various locations. I use keys to walk a player position around the grid.<br><br>To set the listener position and rotation in your old engine (openalex) this was the code...<br>-----------------<br>PositionListener x, 0, z<br>RotateListener xrot, yrot, zrot<br>-----------------<br>I can't find any equavalent commands in the new leadwerks.mod posted at the beginning of this thread. I did notice someone mention on the leadwerks site they had a problem in createlistener(camera) in audio.mod. The problem was solved but it made me think that the version of audio.mod they have is different to the one posted above. <br><br>There's no 'CreateListener' or 'Entity' commands in the audio.mod posted above, should there be? <br><br></td></tr></table><br>
<a name="915111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those are engine commands.<br><br>You will need to figure out the 4x4 matrix yourself.  There is code on this forum to do this. <br><br></td></tr></table><br>
<a name="915182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK I'm with you. The problem for me stemmed from this.<br><br>Set a sounds position in 3d space (easy)<br>MySound.setposition([x, y, z])<br><br>Set the sounds range (easy)<br>MySound.setrange 50<br><br>Play the sound (easy)<br>MySound.Play()<br><br>Set the listener position and rotation (wt*!!!)<br>SetListenerMatrix([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0])<br><br><br>:D<br>Just presumed from your older code (OpenAlEX) there would be an easier way of doing this. Fair enough.<br><br>(heads off looking forward to an afternoon of reading matrix code and banging head off wall) <br><br></td></tr></table><br>
<a name="1009862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Download link is broken! <br><br></td></tr></table><br>
<a name="1009873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Download link is broken! <br></div>You sound surprised.  The last post in the thread is over a year old. <br><br></td></tr></table><br>
<a name="1009923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nevertheless, that module sounds great, and I wanna have it! <br><br></td></tr></table><br>
<a name="1009947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a copy of it -- you can get it for (for the time being)<br><br><a href="http://www.xlsior.org/temp/leadwerks.audio.mod.zip" target="_blank">http://www.xlsior.org/temp/leadwerks.audio.mod.zip</a><br><br>(Note that that one is compiled with GCC 4.4.1, which is a different version than used by stock Blitzmax -- you may need to recompile the mod on your own computer for it to work properly for you) <br><br></td></tr></table><br>
<a name="1010167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> You do rule, thanks!!! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
