<!DOCTYPE html><html lang="en" ><head ><title >rounding to nearest number question?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >rounding to nearest number question?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >rounding to nearest number question?</a><br><br>
<a name="1048065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always thought that int would round to the nearest number (like it used to do in all other basics I used) but in BlitzMax its basically the same as Floor so<br><br><pre class=code>
Print Int( 40.5 )
Print Int( 40.6 )
</pre><br><br>both prints 40 which to me is strange. Anyone have any ideas as to why this is? <br><br></td></tr></table><br>
<a name="1048066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's the way float to int conversions work.  Use "int = (float + 0.5)" instead. <br><br></td></tr></table><br>
<a name="1048068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> blitzmax truncates. you can use what Matibee said or you can use "Ceil" or "Floor" depending on your needs.<br>[edit]<br>oops! I missed the part where you mention Floor. yes Matebee solution is most appropriate. <br><br></td></tr></table><br>
<a name="1048070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floor rounds to the nearest lowest number, whereas Int deletes the decimal. Floor(-4.5) = -5 and Int(-4.5) = -4. This is standard behavior. Try matibee's suggestion. <br><br></td></tr></table><br>
<a name="1048075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok just I thought it might have been an oversight as loads of other basic dialects have a int function that rounds the number to the nearest whole number. <br><br></td></tr></table><br>
<a name="1048087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matibee's jugestions works great except for negative numbers.<br>use int = float + 0,5 * sgn(float) if you want to make it compatible with negative float values.<br>code:<br><div class="quote"> Function round:Int(f:Float)<br>	Return f + 0.5 * Sgn(f)<br>End Function <br></div> <br><br></td></tr></table><br>
<a name="1048160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe Ziggy is correct.  INT(-0.9) = 0 and INT(+0.9) = 0 in BMax. <br><br></td></tr></table><br>
<a name="1048170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought Matibee's made sense, since rounding up is actually increasing. <br><br></td></tr></table><br>
<a name="1048224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John G</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you just add half (+0.5) to all floats before converting to INT, then f = -1.4 converts to zero (0).  There is still a Dead-space 1.999999 wide near zero. <br><br></td></tr></table><br>
<a name="1048233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> so neither one is accurate? (for the sake of rounding up) <br><br></td></tr></table><br>
<a name="1048242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, the code I posted is accurate because on negative numbers it substracts 0.5 so: -1.4 - 0.5 = -1.9 that rounds to -1, while if you round -1.6 and substract 0.5 it is: -1.6 -0.5 = -2.1 wich is truncated to -2. When te number is possitive, instead of substract, it adds, so it works ok too.<br><br>Give it a try yourself.<br><pre class=code>SuperStrict
Repeat
    Local a:Float = Float(Input("Number to round&gt;"))
    Print "Rounded: " + round(a)
Forever
Function round:Int(f:Float)
    Return f + 0.5 * Sgn(f)
End Function </pre> <br><br></td></tr></table><br>
<a name="1048248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=62410#697453" target="_blank"><b><u>http://blitzbasic.com/Community/posts.php?topic=62410#697453</u></b></a> <br><br></td></tr></table><br>
<a name="1048315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yan: I get 'Error:Internal error' with that link :s <br><br></td></tr></table><br>
<a name="1048324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> It says<pre class=code>Function Round(value!)
  Return value! + (0.5 * Sgn(value!))
End Function</pre> <br><br></td></tr></table><br>
<a name="1048379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> my definition of rounding up means rounding to the next highest value not the absolute number value. and I believe it's called Symmetrical Arithmetic rounding<br><a href="http://www.diycalculator.com/sp-round.shtml" target="_blank"> now I am more confused than ever.</a> which one should I use? <br><br></td></tr></table><br>
<a name="1048381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> which one should I use? <br></div><br>Whichever one is appropriate for your needs. We don't know what those are.<br><br>The original question was about rounding to the nearest integer. Ideally that would be the method called "Banker's rounding" or "round to even". That's what Blitz3D uses. But the simpler method given by Ziggy is good enough for most uses. <br><br></td></tr></table><br>
<a name="1048394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> my fault. It was supposed to be rhetorical. <br><br></td></tr></table><br>
<a name="1048484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> wrong post. forget it! <br><br></td></tr></table><br>
<a name="1048494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> how about c-round function?<br><br>round.bmx:<br><pre class=code>
SuperStrict

Import "round.c"

Extern "c"
	Function round_:Int(value:Float)
End Extern

Print round_(0.5)
Print round_(-0.5)
Print round_(1.4)
Print round_(-1.4)
Print round_(1.6)
Print round_(-1.6)
</pre><br><br>round.c:<br><pre class=code>
//round.c

int round_(float value) {
	return round(value);
}
</pre> <br><br></td></tr></table><br>
<a name="1048549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Zeke: Good point, maybe this is simpler:<br><pre class=code>Extern "c"
    Function Round:Double(value:Double) = "round"
End Extern
Print Round(0.6)
Print Round(0.4)
Print Round(1.6)
Print Round(2.6)
Print Round(3.6)
</pre><br>No need a single line of C code for rounding, and a s single BMX file. <br><br></td></tr></table><br>
<a name="1048552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's interesting that round, ceil and floor return floats. I guess a car with a wheel missing is still not a trike. <br><br></td></tr></table><br>
<a name="1048553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> They return floating point values so they don't fail miserably with very large numbers.<br><br>You might want a floating point value which happens to be a whole number or you might want an integer value, i.e. the languages integer data type. <br><br>With RoundingFunction:Double( value:Double ) you can do both. Use the returned value directly as a double or assign it to an integer variable. If the function returned an integer then the first scenario would not work properly with doubles which are too large to fit into an integer. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
