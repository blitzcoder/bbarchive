<!DOCTYPE html><html lang="en" ><head ><title >How to scale and rotate the "camera" ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to scale and rotate the "camera" ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to scale and rotate the "camera" ?</a><br><br>
<a name="885544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Blitzmax one of the main missing features in the 2D library is to scale and rotate the entire screen reliably in all the drawing drivers, such as ogl dx7 and dx9 etc.<br><br>I would like a module which allows me to affect the screen or "camera" scale, position and rotation without messing with my existing game...<br><br>Please tell me it can be done simply and reliably, or if it has already been done! <br><br></td></tr></table><br>
<a name="885546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Digital Anime</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are some examples in a previous topic:<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=78579" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=78579</a><br><br>hope it helps. <br><br></td></tr></table><br>
<a name="885684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks but there were absolutely no driver independant solutions there. I am hoping at minimum for a usable DX+OGL technique which would not call for an entire rewrite of my games graphics, but work regardless of driver used...<br><br>I only want to rotate, shake and zoom the camera if possible... one would assume it was built in. <br><br></td></tr></table><br>
<a name="885824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> no ideas? <br><br></td></tr></table><br>
<a name="885827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can we have a scale and rotate viewport command? would make max games look a lot more dynamic. <br><br></td></tr></table><br>
<a name="885829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll have to recode part of your game. If you derived every graphic object from a base class (this is highly recommended on every game), it should be as easy as adding this feature to the base class. <br><br></td></tr></table><br>
<a name="885918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is still using the wrong tool for the job.<br><br>What I am looking for is the guts of the projection matrix, or some better ideas. Transforming every single object by hand is needlessly computatively expensive for such a simple task, no? <br><br></td></tr></table><br>
<a name="885926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is some GL stuff here to get you started ..<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Rem
	bbdoc: Set the rotation of the viewport
	about: SetViewRotation allows you to rotate the entire viewport, so that all
	drawing is rotated according to the @angle parameter.
EndRem
Function SetViewRotation(angle:Float)
	Global o_angle:Float
	glMatrixMode GL_PROJECTION
	glRotatef angle-o_angle,0,0,1
	o_angle=angle
	glMatrixMode GL_MODELVIEW
	glLoadIdentity
End Function

Rem
	bbdoc: Set the offset of the viewport
	about: SetViewOffset allows you to offset the entire viewport, so that all
	drawing is offset according to the @offsetx and @offsety parameters.
EndRem
Function SetViewOffset(offsetx:Float,offsety:Float)
	Global o_offsetx:Float
	Global o_offsety:Float
	glMatrixMode GL_PROJECTION
	glTranslatef offsetx-o_offsetx,offsety-o_offsety,0
	o_offsetx = offsetx
	o_offsety = offsety
	glMatrixMode GL_MODELVIEW
	glLoadIdentity
End Function

Rem 
	bbdoc: Set the zoom factor of the viewport
	about: SetViewZoom allows you to zoom all drawn elements at once, instead
	of scaling each individual element. Use the @zoom parameter to define the
	level of zoom, a value of 0 is the default zoom, &gt;0 zooms in, &lt;0 zooms out.
EndRem
Function SetViewZoom(zoom:Float)
	Global o_zoom:Float
	glMatrixMode GL_PROJECTION
	glScalef 1.0+(zoom-o_zoom),1.0+(zoom-o_zoom),1.0+(zoom-o_zoom)
	o_zoom = zoom
	glMatrixMode GL_MODELVIEW
	glLoadIdentity
End Function

Rem
	bbdoc: Flip the screen horizontally
EndRem
Function FlipScreenX()
	glMatrixMode GL_PROJECTION
	glScalef -1.0 , 1.0 , 1.0
	glTranslatef -GraphicsWidth(),0,0
	glMatrixMode GL_MODELVIEW
	glLoadIdentity
End Function

Rem
	bbdoc: Flip the screen vertically
EndRem
Function FlipScreenY()
	glMatrixMode GL_PROJECTION
	glScalef 1.0 , -1.0 , 1.0
	glTranslatef 0,-GraphicsHeight(),0
	glMatrixMode GL_MODELVIEW
	glLoadIdentity
End Function
</textarea> <br><br></td></tr></table><br>
<a name="885945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats fantastic thanks jim, but my problem is that DX must be used on windows. <br><br></td></tr></table><br>
<a name="886021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone got a DX driver version? <br><br></td></tr></table><br>
<a name="886042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=72268" target="_blank"><b><u>http://www.blitzbasic.com/Community/posts.php?topic=72268</u></b></a><br><br>?? <br><br></td></tr></table><br>
<a name="886173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that but apparently it "warps" and stretches. I have decided to abandon the idea of rotating the screen until its a feature. I still don't understand why the developer didn't make it a command. <br><br></td></tr></table><br>
<a name="886225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >christian223</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could take screenshots and move that. <br><br></td></tr></table><br>
<a name="886248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Digital Anime</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks but there were absolutely no driver independant solutions there. I am hoping at minimum for a usable DX+OGL technique which would not call for an entire rewrite of my games graphics, but work regardless of driver used... <br></div><br><br>I didn't use any drivers in my version in that post<br><br>Try the following example with code included<br><br><a href="http://server.dedicatedservices.org/upload/zip/retro.zip" target="_blank">http://server.dedicatedservices.org/upload/zip/retro.zip</a><br><br>I first wrote a game and after that I wanted to rotate and shake and zoom everything also when needed. What I did was create a load of new functions. After that I replaced all draw commands which are affected by zoom, rotate or movement by my own functions. And after that I just tell how much it must be zoomed in or rotated or moved.<br><br>You are free to use my example, but you might want to change stuff to make it easier to add to your game. At least try it to get the idea. <br><br></td></tr></table><br>
<a name="886304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried out your retro zip and I'm very impressed. It wasn't what I was looking for as it requires calculating absolutely everything thats being drawn on screen so its processor intensive....<br><br>however I liked it so much and there seems to be no alternative so I may verywell give it a try<br><br>Thank you for your patience and contribution Mark G . :) <br><br></td></tr></table><br>
<a name="886346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Lowcs. This needs to be a built in language independant feature. Why isn't it? Having to rotate all objects one at a time is not good. <br><br></td></tr></table><br>
<a name="886433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Digital Anime</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> When using MiniB3D or Blitz3D you work with a camera view and you could move or rotate that, so using MiniB3d with flat 3D objects which look 2D will take the load away from the CPU and let the GPU do all the work.<br><br>I'm a bit new to MiniB3D, so I have no examples on how to do that yet...<br><br>But for BlitzMax calculating every tiles position is the fastest way I can come up with. <br><br></td></tr></table><br>
<a name="886705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Changing the projection matrix is the fastest way to rotate all on screen, I'm not sure why max2d never bothered. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
