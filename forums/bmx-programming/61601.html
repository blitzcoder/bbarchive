<!DOCTYPE html><html lang="en" ><head ><title >weird code generation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >weird code generation</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >weird code generation</a><br><br>
<a name="688555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok heres the deal,<br> bmax allows you make assignments like this..<br><br> matrix[0]=matrix[1]=matrix[2]=matrix[3]= ..<br> matrix[4]=matrix[5]=0<br><br>i expected this to be equivalent to the following..<br><br> matrix[0]=0<br> matrix[1]=0<br> matrix[2]=0 .......<br><br>i use both approaches to create a unit matrix - but having<br>looked at the assembly code generated for the first<br>version..its ugly as hell - and im not convinced its even<br>behaving correctly...i dont know my 8086..but it jst<br>doesnt look ok...<br>The second version produces very clean, simple assembly<br>output...<br><br>i would have expected the first version to help the compiler optimise the code..setting the float const once +<br>writing to the memory addresses..this is not the case<br><br>perhaps someone can tell me why the first<br>version is such an distaster? - perhaps its cuz it doesnt<br>work like it does in c/c++ ... anyway, jst thought it was<br>interesting.. <br><br></td></tr></table><br>
<a name="688560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The following:<br><br>a=b=c<br><br>will set a to the result of the comparison between b and c.  Presumably that is why the assembly output is so horrible, as the first version is a series of comparisons, not just assignments. <br><br></td></tr></table><br>
<a name="688562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm...that seems counter intuitive - im going to have<br>another look at the assmebly ouput later + see if can<br>figure out exactly whats happening..<br><br>thanks for that ;) <br><br></td></tr></table><br>
<a name="688566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its not counter intuitive. Just not the way many might be used from C where such assignement chains work like assignements, not like "comparision assignement"<br>Due to the (thankfully) missing = == === stuff, it can be misinterpreted.<br><br>What happens is:<br><br>a=b=c=d -&gt; a=(b=(c=d)) <br><br></td></tr></table><br>
<a name="688571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> well if thats how it..i guess ill jst have to get used to it,<br>as for the (thankfully) part of your post - i actually prefer<br>explicit operators for this...but thats personal opinion...<br><br>if nothing else, this post has highlighted a potential problem,<br>that silly people like me might encounter.. <br><br></td></tr></table><br>
<a name="688790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe we should have a 'your code is illegible' error message ;)<br><br>As for the code it would be easier to do a for..next loop for that. <br><br></td></tr></table><br>
<a name="688799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im well aware that for/next is simpler - but was looking<br>at code generation for this particular method. I imagine that<br>optimised unrolled assignment would result in slightly<br>quicker intialisation of an array - thats why i was trying this<br>out - whether or not this is true..im not sure, i dont know<br>enough about 8086 assembly language coding..i am reading<br>up on it though..its interesting..<br><br>anyway i dont want to start some kind pointless argument<br>about optimisation and programming methods...<br>it would seem that this post was of no interest to anyone,<br>and should perhaps be removed..sorry <br><br></td></tr></table><br>
<a name="688815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dont dry. I found it interesting. <br><br></td></tr></table><br>
<a name="688832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> dont get me wrong, I didnt mean the post isnt interesting. If there is a way to make Max faster im all for it :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
