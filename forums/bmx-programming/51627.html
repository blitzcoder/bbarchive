<!DOCTYPE html><html lang="en" ><head ><title >Hashtables?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Hashtables?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Hashtables?</a><br><br>
<a name="576333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was told to use Hashtables, Can anyone give me a quick explination? Are they faster than TLists/Arrays? What's are the + and - ? I think I've seen this for Blitzmax, but I coudn't find it in the archives or in the tweak forum.. <br><br></td></tr></table><br>
<a name="576404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you're referring to B+ TMap, right?<br><br>Gman posted a code sample using them here:<br>[url]http://blitzbasic.com/Community/posts.php?topic=49028&amp;hl=TMap[/url]<br><br>However info on this TMap is extremely rare, some official help / doc about this would be great. <br><br></td></tr></table><br>
<a name="576475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea perhaps, but I need to know the pros and cons with TMap's compared to TList and Arrays.<br><br>And the reason they are not in the docs might mean they are not tested properly. In other words, use them at your own risk, but I don't know.. <br><br></td></tr></table><br>
<a name="576483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cajun17</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The TMap is a implemented using a binary search tree.  I'll refer to the TMap it as a tree because a map just implies that there's a key,value pair for every entry in the container.<br><br>Compared to a list it's much easier and faster to keep a sorted collection of data.  Inserting and finding in a tree happens exponentially faster than in a list.  Deleting is about the same because even though the element can be found much faster keeping the shape of the tree can sometimes be a little costly.<br><br>Compared to an array it's faster to insert and delete items , but finding can be dome at the same speed using binary search.  Of course with the tree there's no notion of indexes so it is faster to index and array then search the tree.<br><br>Also because of the nature of the tree the order of insertion matters.  If you have a sorted array and insert them in order the tree will not be any faster then a list.<br><br>If you want a fairly static collection of data to refrence specific elements quickly it's a good thing to use.  If you want to loop through all the elements often or every game loop I'd stick to a simple array.<br><br>I got more if you want more, but that's the jist of the TMap/BSTree.  Hash tables are different and I don't know as much about them, but I'll tell you what I know if  you'd like. <br><br></td></tr></table><br>
<a name="576517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main advantage of the TMap type is that it functions as a dictionary, with only one key to each value.<br><br>There is no native Hashmap in BlitzMAX, but for most of the things you would use a hashmap or hashtable for, the TMap tree works just as elegantly (if slightly slower, but using less memory).<br><br>Generally TMaps are faster for random access than lists. TMaps (like lists) grow automatically as new space is needed. However a TMap can only hold a single value of a given key. A Hashmap requires an ammount of memory greater than twice the ammount of total objects you want to store, and this ammount must be a prime number, to avoid hash collisions. It cannot easillly grow, nor can objects be easilly deleted. The TMap only uses as much memory as the number of elements it holds, grows as needed, and objects are easilly deleted.<br><br>Choosing the right datastructure is a matter of knowing the problem you're trying to solve. <br><br></td></tr></table><br>
<a name="576699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't really see how Bmax creates a tree from the "keys" I supply. I mean how do I add branches to the tree, can I search just once branch then? Also TMap uses a string as a key or an object? Can you use ints too?<br><br>And if you know more about how "real" hashtables work I'll like to know, just out of curiosity. TMaps seems to fit my needs much better. It's just that this "key" system I don't get. Because when do you have the key, but not the object (the object handle that it). It seems to me this adds to the complexity, yet it is somehow faster =) <br><br></td></tr></table><br>
<a name="576707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I mean how do I add branches to the tree, can I search just once branch then? <br></div>You don't. Blitz does this for you automatically, and a Binary Search Tree, is sorted in such a way that you always only search one branch at a time. It's kinda like one of those "Guees a number between 1 and 100" puzzles which you could always guess in 7 steps or less, by starting in the middle, and then halving the value each time you "missed" and going higher or lower.<br><br><div class="quote"> Also TMap uses a string as a key or an object? Can you use ints too? <br></div>TMap uses objects for keys, so you can use strings (which are also objects) but not ints. It is however a trivial matter to write an int wrapper Type.<br><br><div class="quote"> And if you know more about how "real" hashtables work I'll like to know, just out of curiosity. <br></div>A real Hashtable works in much the same way, except the key is typically the hash of the object in question, retrieved by some sort of hashing algorythm. This hash is then used as an index in an array.<br><br>For more information I recommend reading one of <a href="http://www.cs.fiu.edu/~weiss/" target="_blank">Mark Allen Weiss</a>' books on Data Structures and Algorithm Analysis. <br><br></td></tr></table><br>
<a name="577105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. How can TMaps be faster than TLists or Arrays? <br><br><div class="quote"> except the key is typically the hash of the object  <br></div> 2. so if I put the object handle as the key and the value I have a real hashtable? Seems like a practical thing to do anyway, good or bad? <br><br></td></tr></table><br>
<a name="577176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  1. How can TMaps be faster than TLists or Arrays?  <br></div>They aren't - at least not generally speaking. They're slower to insert, for starters. They grow as fast as TLists (constant time), but faster than arrays (linear time). Random access is slower than Arrays (constant), but faster than Lists (Linear). Sequential access is indifferent.<br><br>One unique property of TMaps is that each Key can only exist once.<br><br><div class="quote">  2. so if I put the object handle as the key and the value I have a real hashtable? <br></div>Not really. A HashTable lookup is in constant time, a TMap in logarythmic. Also two different objects (in memory) which have the same values in their fields, will have the same hash value, so will appear identical as far as a Hashmap is concerned. The handle won't.<br><br><div class="quote"> Seems like a practical thing to do anyway, good or bad?  <br></div>I'd go for "bad" since it's unlikely you'll use the exact same object. Probably better to use a descriptive string or something for the key. <br><br></td></tr></table><br>
<a name="577271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kyoryu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> They aren't - at least not generally speaking. <br></div><br><br>Depends on what you're trying to access by.  If you need to index by anything other than an int, they're much faster since you don't have to search every single element to find the right one.<br><br><div class="quote"> A Hashmap requires an ammount of memory greater than twice the ammount of total objects you want to store, and this ammount must be a prime number, to avoid hash collisions <br></div><br><br>Huh?<br><br>Hash collisions aren't a big deal in any decently-written hash map (and I'd argue that one that DOESN'T deal with that is written by a complete amateur).  The hashed value of the key just specified which bucket to look int... buckets can then be pretty much whatever data structure you want, though lists of some type are probably most common.<br><br>Wave:<br><div class="quote">  1. How can TMaps be faster than TLists or Arrays?  <br></div><br><br>They're faster if you need to index by something other than an int.  They can be more memory efficient than a straight array if you're populating a sparse array.<br><br>A good example:  If you have an image manager that keeps track of images are loaded, you may need to grab an image by file name.  A Map of some sort (be it hash or tree or whatever) is the best data structure to use in this case for anything more than ultra-trivial cases, as it does not require that you go through the whole collection of items one at a time, doing a string comp on each one.<br><br>I also think you're getting hung up on the word 'hash'.  All a 'hash' is, is a hash function.  That's just a function that takes in some data, and spits out a number.  Good hash functions have some things that they do to minimize collisions and increase the distribution of the results, but that's all a hash function really is.<br><br>You could 'hash' a string by adding all of its ascii codes together.  That wouldn't be a very good hash function, but it'd be a hash function. <br><br></td></tr></table><br>
<a name="577282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all replies everyone!<br><br>I think I'll go with TMaps as they seem to fit best.<br><pre class=code>
Requirements = New Tree 
Requirements.Add( TEngine.Name ,"" )
Requirements.Add( TModulator.Name ,"")	

Later:
For Equip:TEquipment = Eachin Shop.Equipments 
    If Equipment.Find( Equip.Name ) 'Then all is ok!
        Tank.Install( Equip )
    Endif
next
</pre> <br><br></td></tr></table><br>
<a name="577369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Depends on what you're trying to access by. <br></div>Hence the "not generally speaking" comment. <br><br><div class="quote"> Hash collisions aren't a big deal in any decently-written hash map <br></div>Yes they are. Once nk (number of keys) exceeds nb (number of "buckets") by more than a factor .5, hash collisions will occur. Once this happens, the hash map is no longer constant time lookups, but can in a worse case scenario be as slow as lists (linear time), depending on how you handle hash collisions (re-hashing or chaining).<br><br><div class="quote"> though lists of some type are probably most common. <br></div>No. That's why you've got a Hashing function in the first place. To convert arbitrary data to an index value you can use for O(1) lookups. <br><br></td></tr></table><br>
<a name="577590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kyoryu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Once this happens, the hash map is no longer constant time lookups <br></div><br><br>Well, yeah.  But the tone of your post made it seem like the hashmap itself would fail and start losing data.<br><br><div class="quote"> No. That's why you've got a Hashing function in the first place <br></div><br><br>I thought it was pretty clear I was talking about the implementations of the buckets, NOT the main hash table?  Especially since I seem to have a decent knowledge of what a hash table is, what a hash function is, and why you'd use it? <br><br></td></tr></table><br>
<a name="577598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> In case anybody is interested...<br><a href="http://ciips.ee.uwa.edu.au/~morris/Year2/PLDS210/ds_ToC.html" target="_blank"> Data Structures </a><br>and pdf java version...<br><a href="http://www.csse.uwa.edu.au/teaching/units/230.223.1/main.pdf" target="_blank"> Problem Solving </a><br>and sortsearch with C and VB source...<br><a href="http://epaperpress.com/sortsearch/index.html" target="_blank"> Sortsearch </a><br>plus allsorts...<br><a href="http://www.softpanorama.org/Algorithms/algorithms.shtml" target="_blank"> allsorts </a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
