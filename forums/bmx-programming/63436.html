<!DOCTYPE html><html lang="en" ><head ><title >Dx9 Max2d(Please Test)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Dx9 Max2d(Please Test)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Dx9 Max2d(Please Test)</a><br><br>
<a name="708240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> After a few months of off and on work, I think I finally have a stable Dx9 Max2d driver.  Unfortunately I don’t have much access to various graphic cards and although I coded carefully I am sure there might be some bugs, as I had to read/reverse engineer the BRL code to determine what it what it was doing in many cases.<br><br>The driver as tested by me is a 100% complete implementation and works under MAXGUI as well as BMAX graphics commands.  Depending on coding style I am seeing performance on par and better than OpenGL.  Now be sure to test with DEBUG off when quoting performance differences.<br><br>What I am looking for is definitive rendering differences between opengl and directx7 so simple samples that demonstrate any problems is greatly appreciated and will make improving of this driver much easier.  Issues such as tearing in window mode and driver lag hacks that have been used with DX7 driver should not be necessary.  The driver uses a fixed pipeline and was designed to be compatible with DirectX7 device drivers.  What this means is if your video card supports DirectX7 you just need to install the DirectX 9 interfaces and it will work correctly.  You don’t need to have a Dx9 card to use DirectX9 API.<br><br><a href="http://smokenmirrors.com/Downloads/Dx9Max2d.zip" target="_blank">http://smokenmirrors.com/Downloads/Dx9Max2d.zip</a><br><br>Contains the driver and some simple programs to demonstrate usage.<br><br>Note the driver is not currently a Mod as I had to implement additional parts of the DX9 interfaces and that would require rebuild of pub.directx.<br><br>I am eager to see how this goes so thanks for any feedback in advance.  <br><br>The code is provided as is and subject to appropriate license of BRL since it is derived work of there rendering API<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="708259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bah, I need to install one of those stupid DX9 runtimes - to me, and to my potential customers, that means it's completely useless. <br><br></td></tr></table><br>
<a name="708274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damn Indiepath. That's some nice and constructive criticism right there :) <br><br></td></tr></table><br>
<a name="708279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Indiepath: I would say its just one more option to you customers.<br><br>@Budman: Very, Very nice. it works very well. Just tested the demos, but will test it with some of my projects as soon as possibly. The demos runs really smooth and without errors. <br><br></td></tr></table><br>
<a name="708280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> HAHAHAHA @ indiepath,<br><br>its an option. For example I use the GL driver all the time. It doesnt really mean that the dx7 drivers are useless. Well I suppose it does really, but it still made me laugh. <br><br></td></tr></table><br>
<a name="708283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here my result:<br>Example: CLOCK<br>Driver DX9: 11958-11988<br>OpenGL    : 9254-9259<br>BufferedDX: 6733-6789<br><br>Example: MaxApplication<br><br>Fullscreen:<br>DirectX 9<br>static (no particle emitted) 2934<br>0 free particle 548-586<br><br>OpenGL<br>static: 1138-1139<br>0 free particle: 541-586<br><br>System: Athlon64 3500+ 1gb Ram nvidia Ge6600gt <br><br></td></tr></table><br>
<a name="708290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Clock<br><br>DX9 - 11820<br>OGL - 9140<br>DX7 - 3880<br><br>Very nice stuff. <br><br></td></tr></table><br>
<a name="708295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um yeah - sorry really nice stuff, I did not mean to be so negative - apologies :) <br><br></td></tr></table><br>
<a name="708310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Budman, why don't you submit your d3d9 modification to the module tweaks forum...maybe mark will update pub.directx <br><br></td></tr></table><br>
<a name="708313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Khomy, maybe he wants to charge for it <br><br></td></tr></table><br>
<a name="708315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe...but from what i see this is complety done and he's releasing for free. I may be wrong though. <br><br></td></tr></table><br>
<a name="708322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice indeed :-)<br><br>Similar results as above with OpenGL en par with DX9.<br>System: Core Duo T2500 with GeForce 7600Go <br><br></td></tr></table><br>
<a name="708345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the feedback so far.  <br><br>Just to be clear its free.  Although the license is I believe subject to BRL license since the code is my code, it is derivative work of BRL's driver.<br><br>I had done it about 5 months ago but never quite finished it,  real job, family and stuff got in way.  Spent a couple of days debugging little issues with boring stuff like the way BMX uses the FPU and minor memory leak as well as implementing support of MAXGUI.<br><br>I did as mostly as "fun" project.<br><br>@Khomy - I intend to post the extended DX9 interfaces however there are a couple more I still need to do,  I want it as complete as possible for what I am planning next.<br><br>Thanks to everyone for feedback.  Even you Inide :)<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="708380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work Budman! Little bug report...<br><br>After flipping back and forth (average about 8-10 times) between windowed and full-screen, I get a crash, with "Unhandled Exception:Unhandled Memory Exception Error" (even in Debug, I'm afraid). This only happens when going back into full-screen mode. I'm also getting some corruption in the System Tray when going into windowed mode from full-screen (all black around the icons).<br><br>I've found a Null 'paste' Pixmap, which I see is used in TDx9DeviceTexture.OnDeviceReset -- could this be relevant? See contents of <a href="http://www.hi-toro.com/blitz/dx9null.jpg" target="_blank">IDE Debug tab</a>. (I've no idea, since this is all too low-level for my tiny brain.)<br><br>However, a quick test showed RockOut (in BlitzMax samples) ran with no changes other than adding this to the top:<br><br><pre class=code>
Import "Maxapplication.bmx"
Import "Dx9Max2dDriver\Dx9Max2dGraphicsDriver.bmx"
SetGraphicsDriver D3D9Max2DDriver()
</pre><br><br>Very impressive! <br><br></td></tr></table><br>
<a name="708439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one James!<br><br>The null field is the source field thats ok. However I was able to duplicate and find the problem.  Seems i got bit by the Garbage Collector causing a nice little problem destroying a texture from the devicelist while I was reseting the texture.<br><br>Should have fix in place tommorrow, found a couple other issues to address with resetting of device, while using the DirectX debug library.  <br><br>Oh FYI to use in any program you only need these two lines<br><pre class=code>
Import "Dx9Max2dDriver\Dx9Max2dGraphicsDriver.bmx"
SetGraphicsDriver D3D9Max2DDriver()
</pre><br><br>The other maxapplication.bmx is my framework :)<br><br>Thanks<br>Doug Stastny <br><br></td></tr></table><br>
<a name="708470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The other maxapplication.bmx is my framework :)<br> <br></div><br>Oops! I just copied and pasted for a quick test... <br><br></td></tr></table><br>
<a name="708478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Clock:<br>DX9 - 13000<br>OGL - 17000<br>DX7 -  8000<br><br>x24600+ and x850xt-pe <br><br></td></tr></table><br>
<a name="741402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gweedo767</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should we expect to see an update to work with 1.24? <br><br></td></tr></table><br>
<a name="741435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes,  Mark changed some of the underlying Max2d. To better work with Dx7, so i needed to handle those changes I also reworked the Dx9 interface to better handle the intgration with MaxGUI as well as provide a simlar interface to the raw DirectX9 interfaces.<br><br>I have it working but want to complete a couple of tests and add some CAPs checking to fail more gracefully on unsupported cards. Should be next day or so I will post up a newer version.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="741442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow this sounds excellent, Budman. The free release is very much appreciated. <br><br></td></tr></table><br>
<a name="741503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds excellent. Thanks for letting us know about that. <br><br></td></tr></table><br>
<a name="741508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Old version:<br><br>DX9 - 6500<br>OGL - 5000<br>DX7 - 6000 <br><br></td></tr></table><br>
<a name="742458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using DX9 made my game not to draw vertical lines <br><br>my command:<br>DrawLine(x+i*2,y+18+18*(Genres),x+i*2,y+32+18*(Genres)) <br><br><br>In DX7 and OGL there's no problem, but with DX9 only one pixel is drawn (   the last one - so the one at y+32+18*(Genres)  ).<br><br><br><br>Also if used in fullscreen, one of my test-pcs with an old sis651 (dx7 hardware) had problems with grabpixmap - it colorized everything in purple. On my Radeon 9600Pro the command works without garbaged colors.<br><br>Another thing is that on the old sis651 one of my sprites has a graphics distortion from frame-top-left to frame-top-right for an height of 2 pixels (also only with DX9). <br><br>Both - DX9 (last edition from november or so) and driver are as up-to-date as possible.<br><br><br><br>bye<br>MB <br><br></td></tr></table><br>
<a name="742468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @MichaelB,<br><br>Thanks,  The next release probably wont fix it however I am adding a utility to dump the CAPs of the cards so I can see what I might be able to change.<br><br>Thanks<br>Doug <br><br></td></tr></table><br>
<a name="742832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, your DX9-mod seems to have also problems with rectangles... some rectangles like<br><br>  DrawRect(10,15,100,70)<br><br>are not drawn <br><br>but from the rectangles below (there's no code left out between the drawrects...), only the first is not drawn, the other three ones are drawn the way I excepted it:<br>		DrawRect(20,10,380-(20-fadecount)*19,190-(20-fadecount)*19)<br>		DrawRect(400+(20-fadecount)*19,10,380-(20-fadecount)*19,190-(20-fadecount)*19)<br>		DrawRect(20,195+(20-fadecount)*19,380-(20-fadecount)*19,190-(20-fadecount)*19)<br>		DrawRect(400+(20-fadecount)*19,195+(20-fadecount)*19,380-(20-fadecount)*19,190-(20-fadecount)*19)<br><br><br><br>I don't know why this happens, but it shouldn't...<br><br><br>bye<br>MB <br><br></td></tr></table><br>
<a name="743481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @MichaelB,  sorry for delay in reply I have been sick last few days.<br><br><pre class=code>
SuperStrict
Import "Dx9Max2dDriver\Dx9Max2dGraphicsDriver.bmx"
SetGraphicsDriver D3D9Max2DDriver()
Graphics 800,600
Cls
DrawRect(10,15,100,70)
Flip
WaitKey
EndGraphics
</pre><br><br>Seems to work fine on my ATI and Nvidia Cards,  is this specific to the Sis Card?<br><br>Other example fragment is not really testable by me as I cant determine what fadecount is doing in your logic.<br><br>There might be possiblility that I am overrunning vertexbuffer which could cause first rect to fail,  although I tested the heck out that possibility.<br><br>If you could get smallest working example that causes render anomaliy that would be easist to locate a problem.<br><br>Thanks for feedback.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="743750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> hope you got well Budman.<br><br><br>I tried to reproduce the bug within a small example... no success. I removed everything from my draw and update-routine except the drawrect-commands and the bug still exists.<br><br>So I think the problem has to do something with other things happening before (loading routines etc.). I hope to find the time to make some additional tests to find the bug.<br><br><br>bye<br>MB <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
