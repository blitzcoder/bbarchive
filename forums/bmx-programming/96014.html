<!DOCTYPE html><html lang="en" ><head ><title >D3D11Max2DDriver()</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >D3D11Max2DDriver()</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >D3D11Max2DDriver()</a><br><br>
<a name="1109359"></a>

<a name="1109416"></a>

<a name="1109428"></a>

<a name="1109430"></a>

<a name="1111509"></a>

<a name="1111510"></a>

<a name="1111511"></a>

<a name="1111512"></a>

<a name="1111523"></a>

<a name="1111524"></a>

<a name="1111580"></a>

<a name="1111833"></a>

<a name="1111834"></a>

<a name="1112632"></a>

<a name="1125333"></a>

<a name="1125478"></a>

<a name="1125489"></a>

<a name="1125551"></a>

<a name="1125553"></a>

<a name="1125657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've uploaded the latest version to GitHub at :-<br><a href="https://github.com/SRSSoftware/d3d11max2d.mod" target="_blank">https://github.com/SRSSoftware/d3d11max2d.mod</a><br><br><br><br><br><br><br><br><br><br><br><a href="http://www.datafilehost.com/download-e8c9365b.html" target="_blank"><b><strike>DOWNLOAD HERE</strike></b></a><br><br><a href="http://www.datafilehost.com/download-f5332cfc.html" target="_blank"><b><strike>LATEST VERSION HERE</strike></b></a> featuring TBatchImage ( Please make sure you read Post#28 in this thread. )<br><br>Presenting a Direct3D11 driver for Max2D.<br><br><strike>There are some install instructions in the archive to help get things going. Seasoned 'mod'ders will know exactly what/how to do it.<br>I'd much prefer to integrate this as I originally planned, but BRL aren't replying to 3 attempts to contact them. I need more patience I guess :D</strike><br><br>*deep breathe*<br>There may be some issues with some gpu cards.<br>If you do have any problems/issues, post some source and any media that would help isolate it and I'll get it fixed, IF i can :p<br><br><b>KNOWN ISSUES</b><br>07.02.2011 - In fullscreen only, something isn't released properly and can cause a crash when changing to other Max2D DirectX drivers. - <b>08.02.2012 - Fixed but not uploaded</b><br><b>/KNOWN ISSUES</b><br><br>There are a couple of extra commands in there:-<br><br><b>DrawLines(LineArray#[],Separate=False)</b><br><br>DrawLines with draw a series of lines.<br>LineArray will be an array of points as X,Y. You can specify points in a 'daisy-chain' fashion to simply link the points, one after the after. Or you can specify 'True' for 'Separate' to specify that the data in the array is treated as sets of separate lines. Selecting 'True' for 'separate' will require a StartX,StartY and an EndX,EndY for EACH line that you want to draw.<br><br><b>PlotPoints[PointArray#[])</b><br><br>PlotPoints will allow you to pass a whole array of points, as X,Y, to be plotted in one go.<br><br><b>DrawImageTiled(Image:TImage,x#,y#)</b><br><br>This is the exact same command as TileImage, it's just it can a little more efficient when tiling a small image to the screen, which would normally result in lots of draw calls. If you want to tile a large image to the screen, then you may not see any benefit in using this command.<br><br>Any problems/queries, please use this thread to post.<br><br>EDIT :- During extracting this back out of BRL tree, if the file DXGI.bmx doesnt build it's because I've left a line out that should been included. LOL.<br><br>In DXGI.bmx, after<br><pre class=code>
Import Pub.Win32
</pre><br><br>add this line<br><pre class=code>
Import BRL.System
</pre><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1109367"></a>

<a name="1109368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found a bug already :D<br>In d3d11graphics.bmx<br><br>Change the little nested loop at line 64 from<br><pre class=code>
If depth
	For Local i = 0 Until modes.length
		If width = modes[i].Width
			If height = modes[i].Height
				numerator = modes[i].RefreshRate_Numerator
				denominator = modes[i].RefreshRate_Denominator
				target = modes[i]
			EndIf
		EndIf
	Next
EndIf
</pre><br><br>to<br><br><pre class=code>
If depth
	For Local i = 0 Until modes.length
		If width = modes[i].Width
			If height = modes[i].Height
				If hz = (modes[i].RefreshRate_Numerator/modes[i].RefreshRate_Denominator)
					numerator = modes[i].RefreshRate_Numerator
					denominator = modes[i].RefreshRate_Denominator
					target = modes[i]
				EndIf
			EndIf
		EndIf
	Next
EndIf

</pre><br><br>What would happen is that when going full screen, it would select the first valid entry when matching the desired width and height regardless of the refresh rate requested.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why all those changes into the pub folder? <br><br>Couldn't you just write the driver in it's own mod (as it was done some time ago by <a href="/posts.php?topic=84089" target="_blank">DStatny with his DX9 module</a>)? <br><br></td></tr></table><br>
<a name="1109370"></a>

<a name="1109412"></a>

<a name="1109413"></a>

<a name="1109414"></a>

<a name="1109415"></a>

<a name="1109431"></a>

<a name="1109433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was going to release this as integrated directly into BMax, so I just moved the files from what would have gone into the BRL mod folder into the SRS mod folder.<br><br>EDIT :- I also have my own 3D engine tied in to using this same approach. It keeps everything clean and tidy on my machine instead of having various 'global' files all over the place in different folders. There's nothing wrong in adding the Dx11 files into the pub.directx mod folder as that's where they should be, no? Correct me if I'm wrong and I'll look into it.<br><br>Cheers.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it!<br><br>I'll test this out later today. :) <br><br></td></tr></table><br>
<a name="1109437"></a>

<a name="1109445"></a>

<a name="1109460"></a>

<a name="1109461"></a>

<a name="1109467"></a>

<a name="1109479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are a couple of issues that I've fixed already.<br>Its amazing no matter how many times you test something there's always issues :P<br><br>2 of which are rectified above.<br><br>Some more:-<br>:All drawing is 1 pixel out! - Fixed for next release.<br>:'SetAlpha' not working correctly when 'AlphaBlend' ISN'T selected as a BlendMode  for non-textured drawing ( I actually removed the code thinking its not needed for some reason! DOH! ) - Fixed for next release.<br>:When minimizing the window and focusing back to it, the display is lost - Fixed for next release.<br><br>When drawing a line, It looks as though I'm getting a 1.5 pixel line being drawn instead of a single pixel width. This is a similar effect to the older DirectX versions in drawing texels to pixels which needed an adjustment to correct it. According to the MSDN docs this problem has supposed to be rectified in Dx10 and Dx11 so there isn't any need to add the offset. I'll look further into this. Is anyone else getting this issue too?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109473"></a>

<a name="1109477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I have got the module compiled but, I get an error that I need "d3dcompiler_43.dll". So my version of DX11 is out of date?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Yep, you can download from MS. The link is in the 'Install' guide. <br><br></td></tr></table><br>
<a name="1109552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EDIT :- I also have my own 3D engine tied in to using this same approach. It keeps everything clean and tidy on my machine instead of having various 'global' files all over the place in different folders. There's nothing wrong in adding the Dx11 files into the pub.directx mod folder as that's where they should be, no? Correct me if I'm wrong and I'll look into it <br></div><br>The Pub-scope suffers the same restrictions as BRL does.<br>BRL are modules by BRL, PUB are open source, 3rd Party things. They all get wiped out with every new install.<br>It would be best if you'd use your one scope, lets say COL.mod. <br><br></td></tr></table><br>
<a name="1109564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree; giving your own namespace to the module doesn't make it less official :)<br><br>(Not to mention more important reasons, like it's easier to mantain and update.) <br><br></td></tr></table><br>
<a name="1109586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh. I totally understand now and I agree. It does make a lot of sense. I knew that the BRL files get overwritten with updates but I thought the PUB modules were untouched! Live and learn :)<br><br>With the next update I'll keep everything for this totally within its own module folder, which will mean you initially delete a couple of files from the pub folder that I asked you to move in there, but it is better in the long run.<br><br>Thankyou all for that insight :P<br><br><br>I'm currently working on a method for batching the DrawImage call with different scales and  rotations as that is the slowest and, more than likely, the most used command. This should bring a wealthy increase in speed in particular when using particle systems.<br><br>Cya. <br><br></td></tr></table><br>
<a name="1109587"></a>

<a name="1109588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't comment on here earlier as I am on a mac and really can't try it. I have it dual booting but the windows setup is crashing giving me the blue screen randomly. so I don't even have BMax installed on it.<br><br>based on my readings, it sounds really good. I wish there was an update to the GLmax2d with similar functionality.<br><br>Great job on this Col!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109919"></a>

<a name="1109939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sadly my video card is not DX10/11. But your driver did detect it, which is great. I'll be upgrading my system here soon (just went to the computer store), but in the meantime I would like to include this driver as a 'test driver' in the next release of my project. Is this driver going to be public domain? <br><br>Keep up the good work. :) Would love to see screen rotation. ;)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109971"></a>

<a name="1109972"></a>

<a name="1109973"></a>

<a name="1109974"></a>

<a name="1109975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Double post! Sorry.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1109976"></a>

<a name="1109979"></a>

<a name="1109980"></a>

<a name="1109981"></a>

<a name="1109982"></a>

<a name="1109983"></a>

<a name="1109997"></a>

<a name="1109998"></a>

<a name="1110010"></a>

<a name="1110019"></a>

<a name="1110020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jesse<br>Thanks for the good words and encouragement :-)<br><br>@Richard<br>Thankyou too for good words and encouragement. The driver is still in testing phases :-) but I see no reason not to use it. The posted source at the 1st post has some issues that are noted above and all of those issues are now fixed, just not released. There will be some license restrictions in place to basically prevent anyone to modifying the source and claiming it as their own etc, so I'll draw that up before I release it. We can work together if you have any issues etc, thats not a problem at all.<br>Screen rotation eh :) Sounds great and not too difficult to do. What kind of commands and how do you propose we would use them for this feature? I'm open to suggestions :P<br><br>@All<br>Can I assume this driver is relatively stable as no one has posted any unknown issues so far ? :D<br><br>Update:<br>EDIT:-Theres no reason to restrict TBatchImage to use the same image that was used during the CreateBatchImage call. I'll change the DrawBatchImage call to include an extra optional image parameter so you can pass in another image. There will be restrictions in that any 'newer' image passed in during the DrawBatchImage call will take the initial size and handle of the image that is used during the CreateBatchImage call and of course it will still be that one image used to render to all the other instances in the data.<br><br>I've been really busy working hard deciding how to get the DrawBatchImage working efficiently. The only way I could get it work in a respectable fashion was to create a new TBatchImage type and use arrays containing the data that goes in. You can now batch call using different positions,colors,rotations and scales for EACH image within the batch list, although with 1 image texture per TBatchImage :P<br><br>This means there will be 4 new commands for batching images:<br><b><br>CreateBatchImage:TBatchImage(image:TImage,data#[]=Null,color#[]=Null,rotation#[]=Null,scale#[]=Null,frame=0)<br>UpdateBatchImage(batchimage:TBatchImage,data#[]=Null,color#[]=Null,rotation#[]=Null,scale#[]=Null)<br>DrawBatchImage(batchimage:TBatchImage)<br>DestroyBatchImage(batchimage:TBatchImage)<br></b><br><br>I've made TBatchImage use the instancing features in the GPU, and I have to say that I am completely shocked at how great it's performing :D I'm thinking of seeing where else I can use it within the driver :P<br>I've still not even starting to make use of the geometry shader pipeline yet :-), so god knows how many polys this will manage to get onscreen :D<br><br>As the driver needs a little tidying before I release it for testing again, I've put together a little demo that uses the original source from the fireworks demo by simonh which is in the examples folder but takes advantage of the DrawBatchImage functionality.<br>EDIT:-As a comparison, using simonh original source code as is, my little laptop manages to push about 15 fireworks before dropping below 60fps. Using DrawBatchImage I can push well over 200 before it slows down to ( but still above ) 60fps.<br><br><a href="http://www.datafilehost.com/download-8b377f23.html" target="_blank"><b>D3D11Max2D Firework Demo</b></a> is available for testing.<br><br>I couldn't believe what my little laptop was actually doing in this demo. The only difference between the pic and the demo is that I put instructions to Press 'R' on the screen :D<br><br>Some facts about the demo:-<br>Each firework creates 500 sparks, which are basically little billboard images made of 2 triangles each. I can get over 200 fireworks on screen at just over 60fps ( 800x600 Fullscreen, DebugOff ). This equates to 100,000 ( 200,000 polys ) individually positioned,coloured,rotated and scaled 'sprites' on screen at one time! The only restriction using a single image for each TBatchImage, but you can have as many batches as you want, with any number of items under individual control in that batch. Perfect for particle effects :D<br>I was so sure something was wrong with my calculations so I posted the source and the exe for the you all to try.<br><br><img src="http://i1176.photobucket.com/albums/x339/automagician01/D3D11Fireworks.jpg"><br><br>This is the EXACT source code for the Fireworks.exe in the demo.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict
AppTitle = "D3D11Max2DDriver : DrawBatchImage"

' Fireworks originally coded by simonh (si@...)
' Adapted to use BatchImage rendering coded by DaveC aka Col ( auto.magician@... )

Type TSpark
	Field x#,y#,z#,vy#,xd#,yd#,zd#,r#,g#,b#,alpha#	
EndType

Type TSparkBatch
	Field Batch:TBatchImage
	Field SparkList:TList
	
	Field Vert#[]
	Field Col#[]
	Field Rot#[]
	Field Sca#[]
	
	Method Create:TSparkBatch(Image:TImage)		
		'Create New BatchImage and associated data structure
		Vert = Vert[..NumSparks*2]	'X,Y
		Col = Col[..NumSparks*4]	'R,G,B,A
		Rot = Rot[..NumSparks]		'Angle in Radians!!
		Sca = Sca[..NumSparks*2]	'X Scale,Y Scale
		
		Batch = CreateBatchImage(Image)
		'Batch = CreateBatchImage(Image,Vert,Col,Rot,Sca)		
	
		Local x#=Rand(-100,100)
		Local y#=Rand(-100,100)
		Local z#=200

		Local r#=Rand(255)
		Local g#=Rand(255)
		Local b#=Rand(255)
		
		SparkList = New TList
		
		For Local i=0 Until NumSparks

			Local speed# = 0.1

			Local ang1# = Rnd!(360)
			Local ang2# = Rnd!(360)

			Local sp:TSpark=New TSpark
			SparkList.AddLast sp

			sp.x=x#
			sp.y=y#
			sp.z=z#

			sp.xd=Cos(ang1#)*Cos(ang2#)*speed#
			sp.yd=Cos(ang1#)*Sin(ang2#)*speed#
			sp.zd=Sin(ang1#)*speed#
	
			sp.r=r
			sp.g=g
			sp.b=b
	
			sp.alpha=1
		Next

		Return Self
	EndMethod
	
	Method Update()
		Local index
		For Local sp:TSpark=EachIn SparkList
		
			' If spark alpha is above 0 then draw it...
			If sp.alpha&gt;0

				sp.x=sp.x+sp.xd*10.0
				sp.y=sp.y+sp.yd*10.0
				sp.z=sp.z+sp.zd*10.0
				sp.y=sp.y+sp.vy#
				sp.vy=sp.vy+0.02

				' Calculate x and y draw values based on x,y,z co-ordinates
				Local x#=(width/2.0)+((sp.x/sp.z)*500)
				Local y#=(height/2.0)+((sp.y/sp.z)*500)

				sp.alpha=sp.alpha-0.01
			
				'Store spark data into the batch data
				Vert[index*2+0] = x
				Vert[index*2+1] = y
				
				Col[index*4+0] = sp.r
				Col[index*4+1] = sp.g
				Col[index*4+2] = sp.b
				Col[index*4+3] = sp.alpha
				
				If RotateSparks
					Rot[index] = Rnd(0,2*Pi)	'In Radians!!!
				EndIf
			
				Sca[index*2+0] = 20.0/sp.z
				Sca[index*2+1] = 20.0/sp.z
				
			'...else remove spark from spark list
			Else
				'As spark alpha becomes 0 we wont see it even if it goes through the render pipeline!
				'Sorry, but thats the joys of batching ;-)
				SparkList.Remove sp
			EndIf
			
			index :+ 1
		Next
		
		UpdateBatchImage(Batch,Vert,Col,Rot,Sca)
	EndMethod
	
	Method Draw()
		SetBlend LIGHTBLEND
		DrawBatchImage(Batch)
	EndMethod
	
	Method ActiveSparks()
		Return SparkList.Count()
	EndMethod
	
	Method Destroy()
		DestroyBatchImage(Batch)
		SparkList.Clear
		Vert = Null
		Col = Null
		Rot = Null
		Sca = Null
	EndMethod
EndType

''''''''''''''''''''''''''''''''''''''''''''''''''''''''
SetGraphicsDriver D3D11Max2DDriver()
Global Width = 800
Global Height = 600
Graphics Width,Height

Global NumSparks = 500
Global RotateSparks

Global SparkImage:TImage = LoadImage("spark.png")
Global SparkBatchList:TList = New TList

While Not ( KeyDown(KEY_ESCAPE) Or AppTerminate() )	
	Cls
	Local time = MilliSecs()
	If KeyHit(KEY_R)
		RotateSparks = 1 - RotateSparks
	EndIf

	If KeyDown(KEY_SPACE) And SparkBatchList.Count() &lt; 200
		For Local i=0 To 3
			Local SPB:TSparkBatch = New TSparkBatch.Create(SparkImage)
			SparkBatchList.AddLast SPB
		Next
	EndIf
	
	For Local SPB:TSparkBatch = EachIn SparkBatchList
		SPB.Update
		SPB.Draw
		
		If SPB.ActiveSparks() = 0
			SPB.Destroy
			SparkBatchList.Remove SPB
		EndIf
	Next
	
	DrawText "Hold space to ignite fireworks",0,0
	DrawText "Number of fireworks : "+SparkBatchList.Count(),0,16
	DrawText "Press R to rotate the sparks",0,32
	Flip
Wend

'MUST clean up properly when batching data!!!
For Local SPB:TSparkBatch = EachIn SparkBatchList
	SPB.Destroy
Next
</textarea><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, do you happen to have an scope-updated version of your driver. I'D really like to test it :)<br>Ah, one more thing: Would it be possible to make this batchimage with frames, i Mean, adding an extra array which contains the info which part of the texture should be drawn? <br><br></td></tr></table><br>
<a name="1110097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> col,<br><br>I can wait until you have everything together. An option to change the uv coordinates for an image would be cool if possible. I do like the batch functions and I would like to see what the batch plot does for speed.<br><br>Upgrading my system in 2 weeks and can't wait. ;)<br><br>L8r, <br><br></td></tr></table><br>
<a name="1110112"></a>

<a name="1110113"></a>

<a name="1110114"></a>

<a name="1110117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>I guess I got so excited with the speed increase, that I posted a little early with respect to the syntax used in the commands :D<br>I've made some major changes to the commands. Sending initial data into the CreateBatchImage command seemed a bit pointless and didn't really seem to fit correctly. I've changed that command to use flags and depending on those flags is what data you then send into UpdateBatchImage command. No doubt this may change again before release :o<br><br>For eg.. The commands will now be...<br><br><b><br>CreateBatchImage:TBatchImage(Image:TImage,Color=False,Rotation=False,Scale=False)<br>UpdateBatchImage(BImage:TBatchImage,Position#[],Color#[]=Null,Rotation#[]=Null,Scale#[]=Null)<br>DrawBatchImage(BImage:TBatchImage,frame=0)<br></b><br><br>So if you use..<br><br>BImage = CreateBatchImage(MyImage,True,False,True)<br><br>will require that you call UpdateBatchImage in this way:<br><br>UpdateBatchImage(BImage,Pos[],Col[],Null,Sca[])<br>or<br>UpdateBatchImage(BImage,Pos[],Col[],,Sca[])<br><br>Position data is now required in UpdateBatchImage. If the array size changes during runtime of using the same TBatchImage, the data is rejected and nothing will be rendered. This is to help prevent GPU resource thrashing which 'could' break your GPU. Different TBatchImages can have different sized arrays.<br>This also allows you to omit any data arrays that you don't want to include. Which wasn't the case before due to the shader setup.<br>And if you send in arrays that arent setup as True in CreateBatchImage, it will just exit without rendering anything.<br>To get it working efficiently I have to be a little strict on the setup, but I've also tried to keep it as flexible as possible.<br><br>@BladeRunner<br>I'll look into the array of frame data, I'm not sure if this will work as the image/frame selection is setup on the CPU rather GPU where the batching actually takes place. You can select a frame to use already, just not an array of frames.<br><br>@Richard<br><div class="quote"> <br>An option to change the uv coordinates for an image would be cool if possible<br> <br></div><br>Hmm, do you mean an array of uv coords to send in?<br><br>Thinking about those questions...<br>If I get it working to use uv array data, then with some cleverness on your side, you could use an image as a texture atlas which would also overcome the frame array problem.<br><br>I'll see what I can do here as I'd also like the feature of being able to show different images throughout the same batch.<br>Batched animations :-)<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  An option to change the uv coordinates for an image would be cool if possible  <br></div><br><br>Yes. I would like to emulate the TextureCoordinates() command in Blitz3D or the OpenGl equivalent glTexCoord2f(). I am assuming that images are textured quads. <br><br>I can certainly live with the batchimages changes. ;)<br><br>Rock on, <br><br></td></tr></table><br>
<a name="1110149"></a>

<a name="1110151"></a>

<a name="1110154"></a>

<a name="1110323"></a>

<a name="1110324"></a>

<a name="1110349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> It just so happens, I think can do both, uvs and a 'live' frame change.<br>Watch this space.<br><br>I'm looking forward to seeing what you have planned :P<br><br>:-)<br><br>UPDATE :- UVs are in...<br>UPDATE2 :- Frames are in now too...<br><br><b><br>CreateBatchImage:TBatchImage(Image:TImage,Colors=False,Rotations=False,Scales=False,UVs=False,Frames=False)<br>UpdateBatchImage(BImage:TBatchImage,Position#[],Color#[]=Null,Rotation#[]=Null,Scale#[]=Null,UV#[]=Null,Frame[]=Null)<br>DrawBatchImage(BImage:TBatchImage,Frame=0)<br></b><br><br>Notice that the frame array is an integer array and rotations are now in degrees to fit with BMax existing angle setup.<br><br>If you pass a value for Frame into DrawBatchImage that value will override any Frame[] data.<br><br>I should sell this ;-)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110364"></a>

<a name="1110365"></a>

<a name="1110366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I'd like to do some diffusion type effects that would allow a diffusion effect much in the way Window Media player does with the cool effects that play to music. I would also like to do the same effect for a single image so that I could have some cool effects in my game project maybe something like smoke or fire coming of an object.<br><br>Here is a link of an OpenGL example. <a href="http://www.blitzbasic.com/Community/posts.php?topic=96014" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=96014</a><br><br>I have not looked over yet but from memory it basically sets up a grid of quads, draws on them and then changes the UV for each vertices. I'm going to read it over again to see if my feature request is  valid. :) <br><br>Screen rotation though is one feature that I would really need.<br><br>I am very happy with your driver project and believe it will have a very positive influence on BlitzMax. Keep up the good work.<br><br>L8r,<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1110538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Richard, that links back to this page :p <br><br></td></tr></table><br>
<a name="1110586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dag-Nabit! Late night coding sessions, uhg. :P<br><br><a href="http://sylefeb.aracknea-core.net/gltut/diffusion/" target="_blank">http://sylefeb.aracknea-core.net/gltut/diffusion/</a><br><br>LOL! <br><br></td></tr></table><br>
<a name="1110850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice effect.<br>That is now more than achievable with the new batch array capabilities.<br>I'm working on a 2d dynamic shadow system at the mo. Should be interesting as you can as many lights as you want and any shape shadow casters which can all move and update dynamically. <br><br></td></tr></table><br>
<a name="1111077"></a>

<a name="1111078"></a>

<a name="1111079"></a>

<a name="1111083"></a>

<a name="1111085"></a>

<a name="1111086"></a>

<a name="1111087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome. Wow, lights and shadows. Can't wait to see it. It would be of great to include that in my project.<br><br>Now if this could all be compatible with DX-9 (wink, nudge). :p<br><br>This is what I am working on and its all Max2D so a driver like yours gives it more longevity and features. The demo is rotation mode the first half and fixed mode in the 2nd.<br><br><a href="http://www.youtube.com/watch?v=AhObNL5dkW4" target="_blank">http://www.youtube.com/watch?v=AhObNL5dkW4</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1111149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Col,<br>do you think there will be a new release for testing soon? I'd really like to test your stuff :) <br><br></td></tr></table><br>
<a name="1111204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Richard<br>That looks to be a smart little game base there :)<br><br>@BladeRunner<br>Yeah sure. The next couple of days. I've been too busy with work, 16 to 18 hours a day.<br><br>I've fixed multiple windows. Still need to fix some alt-tab issues. It works just not correctly.<br><br>With respect to line widths, are people getting more than a single pixel line width when expecting it, using the above driver code? <br><br></td></tr></table><br>
<a name="1111514"></a>

<a name="1111515"></a>

<a name="1111579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all,<br><br>The latest scope version is available is the 1st thread.<br>Its also available <a href="http://www.datafilehost.com/download-f5332cfc.html" target="_blank"><b>HERE</b></a><br><br>I was going to sell this driver as its been quite time consuming to build, but I may sell additions to it.<br><br>Any problems let me know :D<br><br>I'd like to see some creations that people will make that take advantage of the extra features :P<br><br>EDIT:- VERY IMPORTANT :-<br>Delete the existing installation and any files associated with the first driver. Then copy this srs.mod folder into the BlitzMax/mod/ folder. 'Build Modules' as usual, then use<br><br><b><br>Import SRS.D3D11Max2D<br>SetGraphicsDriver D3D11Max2DDriver()<br></b><br><br>to use it as you normally would any other driver.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1111520"></a>

<a name="1111522"></a>

<a name="1111593"></a>

<a name="1111714"></a>

<a name="1114713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>TBatchImage</b> is the latest feature in this release apart from a huge tidy up in the code.<br><br>There are several restrictions in using these commands :-<br><br><b><br>CreateBatchImage:TBatchImage(Image:TImage,Colors=False,Rotations=False,Scales=False,UVs=False,Frames=False)<br></b><br>Image is a usual TImage loaded or created in the usual way. It now supports frames too for animated images. Handles are taken into consideration as is the origin. These need to be BEFORE you create the TBatchImage. The other parameters are flags and should be set to True or False in you intend to pass the associated data into the UpdateBatchImage command. Pay attention to what you set up and the data passed in as it will simply reject ALL data if its incorrect.<br><br><b>UpdateBatchImage(BImage:TBatchImage,Position#[],Color#[]=Null,Rotation#[]=Null,Scale#[]=Null,UV#[]=Null,Frame[]=Null)</b><br>BImage is a TBatchImage instance handle returned by CreateBatchImage.<br>The data:-<br><b>Position</b> is to be X,Y screen coord pairs for EACH instance.<br><b>Colors</b> are to be Red,Green,Blue,Alpha for EACH instance. RGB ranges are 0 to 255 inclusive. Alpha is 0 to 1 inclusive.<br><b>Rotation</b> is 1 single angle of rotation in degrees for EACH instance. Rotations are treated in the same way as the usual BMax rotations.<br><b>Scale</b> is to be X,Y scale pairs for EACH instance.<br><b>UV</b> is very advanced and should only be used if you know what UVs are. This is to be in 4 x U,V pairs for EACH instance. This means 8 bits of data for each instance. The order of UV data pairs is TopLeft, TopRight, BottomLeft, BottomRight. UVs are in the range 0 to 1 inclusive.<br><b>Frame</b> This is a single INTEGER value PER INSTANCE to index into the frame data.<br><br><b>DrawBatchImage(BImage:TBatchImage,Frame=0)</b><br>This will draw the TBatchImage. The Frame parameter will override any data in the Frames[] array that may be passed into the UpdateBatchImage command.<br><br>The UpdateBatchImage command data NEEDS to be accurate. If it isn't accurate and any data items are missing, or the arrays are the incorrect length then the whole data will be rejected and NOTHING will be rendered. This is prevent GPU resource thrashing which can lock up or even break your graphics card.<br><br>The Positions[] array is the defining array to define the number of instances. Once you submit data into the UpdateBatchImage command, then it will expect the EXACT same number of instances in further calls when using the same TBatchImage.<br><br>EDIT:- Also VERY IMPORTANT is that you call DestroyBatchImage when you are finished with it. If you don't call it then you'll end with a CPU memory leak and a GPU memory leak.<br><br>Have fun!<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1111702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got a copy. I should have my new hardware next Friday. I'll give it a thrashing then. The 'TBatchImage' funtcion looks great and the modifiable UV is just an awesome feature. In the mean time I'll see if it compiles here.<br><br>Can't wait to test it. Great work <br><br></td></tr></table><br>
<a name="1112222"></a>

<a name="1112224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @col<br><br>"I was going to sell this driver as its been quite time consuming to build, but I may sell additions to it."<br><br>Why not package this with an updated DX9 driver. If you could add some basic draw mesh and draw poly (for example) it would be something worth paying for IMHO. But even now as it is, having DX10/11 is awesome. It's looking as if 1/2 of the user base I'm aiming at has a DX10 or better video card. It's a good indication that a DX10/11 driver is not only needed but necessary.<br><br>L8r,<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1112228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br><div class="quote"> <br>If you could add some basic draw mesh and draw poly<br> <br></div><br><br>Can you elaborate a little on what you mean, as Max2D does already have a basic DrawPoly. Are you referring to 3D meshes?<br><br>As a teaser:-<br>I've written a complete lighting system. It works in the same way as regular 3D lighting works, in that everything is black and you have to add lights and ambient lighting to your liking. It uses a 3D spatial system although everything is 2D :P <br><br></td></tr></table><br>
<a name="1112550"></a>

<a name="1112564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Col,<br><br>Ya, I mean 3D meshes, not necessary but would be neat. <br><br>The lighting sounds like a winner. :) Shadows to follow?<br><br><br><br>L8r,<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1112592"></a>

<a name="1112593"></a>

<a name="1112594"></a>

<a name="1112636"></a>

<a name="1112724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, working on the shadows :-) This will probably slow things up on the lesser powered gpus but then thats always been the way. I'm trying to make it scalable so the under powered gpus can make things 'acceptable'. We'll see how this pans out :-) I'm trying to implement a relatively new idea that I don't think anyone else has used so far. I'm not even sure how it will be perform, but it's all hardware processed :)<br><br>I'm polishing up the lighting system, so I'll post some commands and pics when they are complete.<br><br>While I was at it, I've also made a SetBuffer command similar to B3Ds SetBuffer. It was so easy, I'm surprised I didn't do it already. I've added an additional option to the flags parameter when creating or loading a texture :- RENDERIMAGE. Unfortunately a MIPMAPPEDIMAGE cannot be used withh RENDERIMAGE due to DirectX not supporting such a thing. Makes sense really.<br><br>These commands are :-<br><b>ImageBuffer(Image:TImage,frame=0)</b> for use with the SetBuffer command.<br><b>BackBuffer()</b> will return the back buffer for the current back buffer for use with the SetBuffer command.<br><b>SetBuffer(..)</b> will take either ImageBuffer(...) or BackBuffer() as a parameter to set where to render to.<br><br>@Richard<br>Hehe, I guess you can easily do fullscreen rotation now by creating a TImage to the same size as the screen or bigger, render into it and then use the SetRotation commands to rotate :D<br>I was going to introduce a TBuffer type but there's no need to complicate things :D<br><br>So now it will also be possible to render straight into an image with almost zero loss of speed, like so -<br><br><pre class=code>
Strict

Import SRS.D3D11Max2D
AppTitle = "D3D11 SetBuffer Example"

SetGraphicsDriver D3D11Max2DDriver()

Graphics 800,600

Local RenderImage:TImage = CreateImage(400,400,1,RENDERIMAGE)
Local BMaxLogo:TImage = LoadImage("Bmax400x400_logo.png")

While Not KeyDown(KEY_ESCAPE)
	
	'All drawing goes straight into the TImage
	SetBuffer ImageBuffer(RenderImage)
	Cls
	
	DrawImage BmaxLogo,0,0
	DrawText "BMax Rulez!",0,0
	
	'All drawing now goes to the regular back buffer
	SetBuffer BackBuffer()
	Cls
	DrawImage RenderImage,0,0,0
	
	Flip
Wend
End
</pre><br><br>Dx9 eh ? It already has a driver by BRL :-) To get the batching features means modifying a couple of lines in the driver to expose the hardware handles. As I've already learned, people don't like modifying the BRL and PUB files and folders. It's easily done but you get frowned upon :D And a re-write of the existing driver wasn't in my plans, although it could do with it because of a couple of bugs in there with regards to memory leaks when closing.<br><br>As far as 3D meshes go, that should really fall into a Max3DDriver ;-)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1113969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Col,<br><br>"Hehe, I guess you can easily do fullscreen rotation now by creating a TImage to the same size as the screen or bigger, render into it and then use the SetRotation commands to rotate :D"<br><br>Yup. OddMod2 uses such a scheme to do rotation. It looks like this.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SetScreenFocus(x,y) 'Set origin point for rotation axis
SetScreenRotation(angle) 'Set Rotation angle
</textarea><br><br>I do indeed draw a bit outside the display, but it works great.<br><br>DX9<br>I really was musing on how it would be great to update the DX9 driver. It is something I can live without, but it would be cool to get some of your features in DX9.<br><br>Can't wait for the update. Do you have a web home for this project or others you may be working on?<br><br>GG! <br><br></td></tr></table><br>
<a name="1113996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey,<br>I just took a look at the OddMod2 files. It's a great addition to Max2D for sure.<br><br><div class="quote"> <br>Do you have a web home for this project or others you may be working on?<br> <br></div><br>No, but I really should get something sorted in that department. I.T. isn't ( currently ) my trade that pays the bills, but I'm seriously looking to get into the industry, so I should have a website which would be a great place to show of some of the projects I'm worked on and currently working on.<br><br>Did you get your new Dx11 GPU card? How is it? <br><br></td></tr></table><br>
<a name="1114357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Col<br><br>"Did you get your new Dx11 GPU card? How is it?"<br><br>The power supply in the new case had the wrong connectors for my motherboard but a new one is coming soon. I should be driving down to the computer store tomorrow.<br><br>:p <br><br></td></tr></table><br>
<a name="1114710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=96337" target="_blank"><b>1st version of some dynamic 2d shadows is here</b></a> <br><br></td></tr></table><br>
<a name="1114888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome!<br><br>Shadows look cool in the image.<br><br>I had to go a different route on upgrading my system. I have a flex (mini) ATX case and I was going to pull the motherboard and put it in a larger standard size ATX case but it proving to be to difficult. So, I am ordering a new power supply for the case it currently has. I found a 300w (just big enough) but I'm waiting to hear from the retailer (http://www.atxpowersupplies.com/300-Watt-Flex-ATX-Power-Supply-Sparkle-SPI300F4BB.php) to see if they have a 350w. I should hear from them tomorrow.<br><br>I so can't wait to try your driver (and demos) and am upgrading just to use it :) <br><br></td></tr></table><br>
<a name="1114910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I so can't wait to try your driver (and demos) and am upgrading just to use it :)<br> <br></div><br><br>Oh my god, the pressure on me if there are issues ;)<br><br>Seriously though, if there are issues, I'll correct them. I'm pleasantly surprised that no-one has posted bugs already. Either no-one is using it or it works ok. <br><br></td></tr></table><br>
<a name="1114913"></a>

<a name="1114914"></a>

<a name="1114915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I am missing something here with the DX11 driver.<br>Sample Code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict
Import SRS.D3D11Max2D 'dx11
SetGraphicsDriver D3D11Max2DDriver() 'dx11
'SetGraphicsDriver D3D9Max2DDriver() 'dx9

Graphics 640,320

Local Image:TImage = LoadAnimImage("TestDX11.png",32,32,0,4)
Local BImage:TBatchImage = CreateBatchImage(Image,False,False,False,False,True) 'dx11

Local MapArray:Int[20,10]
Local Position:Float[400] 'dx11
Local Frame:Int[200] 'dx11


For Local y:Int = 0 To 9
	For Local x:Int = 0 To 19
		ReadData MapArray[x,y]
	Next
Next

DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,2,1,1,3,3,3,3,3,1,1,1,1,2,1,2,1,1,1
DefData 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

Local Timer:Int = MilliSecs()+1000
Local Frames:Int = 0
Local FPS:Int = 0

While Not KeyHit(KEY_ESCAPE) And Not AppTerminate()
	Cls
	For Local y:Int = 0 To 9
		For Local x:Int = 0 To 19
			Position[(y*10+x)*2] = x*32 'dx11
			Position[(y*10+x)*2+1] = y*32 'dx11
			Frame[y*10+x] = MapArray[x,y] 'dx11
			'DrawImage Image,x*32,y*32,MapArray[x,y] 'dx9
		Next
	Next
	updatebatchimage(BImage,Position,Null,Null,Null,Null,Frame) 'dx11
	drawbatchimage(BImage) 'dx11
	
	SetColor 0,0,0
	DrawRect 0,0,80,20
	SetColor 255,255,255
	DrawText FPS,2,2
	Flip False
	
	Frames :+ 1
	If MilliSecs() &gt;= Timer
		FPS = Frames
		Frames = 0
		Timer :+ 1000
	End If
Wend

</textarea><br><br>When I comment out all the DX11 lines and uncomment all the DX9 lines, I get what I expect;<br><br><img src="http://i194.photobucket.com/albums/z157/TomToad_bucket/dx9display.jpg"><br><br>But when I uncomment the dx11 lines and comment the DX9 lines, I get only half the display drawn, plus there is a stray tile at 0,0 (kinda hard to see, it is behind the fps counter)<br><br><img src="http://i194.photobucket.com/albums/z157/TomToad_bucket/dx11display.jpg"><br><br>Also notice that the DX11 version is slower than the DX9 version.  The fps on DX11 is even worse when I just use the regular DrawImage command instead of the DrawBatchImage command<br><br>Windows 7 Home Premium SP1 64 bit<br>NVidia GeForce 9100<br>AMD Phenom 9550 Quad-Core 2.2 GHZ<br><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114926"></a>

<a name="1114928"></a>

<a name="1114929"></a>

<a name="1114930"></a>

<a name="1114931"></a>

<a name="1114932"></a>

<a name="1114933"></a>

<a name="1114934"></a>

<a name="1114935"></a>

<a name="1114936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya TomToad.<br>Thanks for using the driver.<br>Don't forget to use 'DestoryBatchImage(...)' to avoid any cpu and gpu memory leaks.<br><br>In your code the array locations are being calculated wrong. You should be multiplying by the width of the map and not the height - ie:<br><br>Position[(y*20+x)*2] = x*32<br><br>as opposed to<br><br>Position[(y*10+x)*2] = x*32<br><br>Try this:-<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict
Import SRS.D3D11Max2D 'dx11
SetGraphicsDriver D3D11Max2DDriver() 'dx11
'SetGraphicsDriver D3D9Max2DDriver() 'dx9

Graphics 640,320

Local Image:TImage = LoadAnimImage("TestDX11.png",32,32,0,4)
Local BImage:TBatchImage = CreateBatchImage(Image,False,False,False,False,True) 'dx11

Local MapArray:Int[20,10]
Local Position:Float[400] 'dx11
Local Frame:Int[200] 'dx11


For Local y:Int = 0 To 9
	For Local x:Int = 0 To 19
		ReadData MapArray[x,y]
	Next
Next

DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1
DefData 1,1,2,1,1,3,3,3,3,3,1,1,1,1,2,1,2,1,1,1
DefData 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

Local Timer:Int = MilliSecs()+1000
Local Frames:Int = 0
Local FPS:Int = 0

While Not KeyHit(KEY_ESCAPE) And Not AppTerminate()
	Cls
	
	For Local y:Int = 0 To 9
		For Local x:Int = 0 To 19
			Position[(y*20+x)*2] = x*32 'dx11
			Position[(y*20+x)*2+1] = y*32 'dx11
			Frame[y*20+x] = MapArray[x,y] 'dx11
			
			'DrawImage Image,x*32,y*32,MapArray[x,y] 'dx9
		Next
	Next
	updatebatchimage(BImage,Position,Null,Null,Null,Null,Frame) 'dx11
	drawbatchimage(BImage) 'dx11
	
	SetColor 0,0,0
	DrawRect 0,0,80,20
	SetColor 255,255,255
	DrawText FPS,2,2
	Flip False
	
	Frames :+ 1
	If MilliSecs() &gt;= Timer
		FPS = Frames
		Frames = 0
		Timer :+ 1000
	End If
Wend
</textarea><br><br>I was concerned with the speed of the regular DrawImage command when I was developing the driver, which initially inspired me to make the batching commands. The more work you give the DrawBatchImage command, the greater the benefit will be over using the Dx9 or Dx11 DrawImage. Its designed to replace thousands of draw calls. There is plenty of room for improvements in the standard Dx11 DrawImage command, but they will require drastic changes.<br>You're the first person to report back any issues, and as I thought it was just my machine I thought it was ok on other peoples machines. Now I know that you have the same issue too, I'll work on optimising it.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ack!  How can I make such a newbie mistake?  Works now, thanks.  Still slower than DX9.  Faster than DX7 and about the same as OpenGL on my system. <br><br></td></tr></table><br>
<a name="1114976"></a>

<a name="1114977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Ack! How can I make such a newbie mistake?<br> <br></div><br>We all have it from time to time :D<br><br><div class="quote"> <br>Still slower than DX9.<br> <br></div><br>EDIT:- Just to be clear-<br>Is the BatchImage slower than using Dx9?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1114984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, batchImage is slower. At least it is in the way I'm using it in that example. <br><br></td></tr></table><br>
<a name="1114988"></a>

<a name="1115006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> I imagine its like everything else graphics related, in that the performance is machine independent and needs experimenting to find a good balance. You need to take into consideration the cost of actually setting up the batch call, which is why there is more of a gain with 'the more drawing you do with the batch image the better'.<br><br>Thanks for the feedback.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1115024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> TomToad- I wonder if your gfx-card is even able to run dx11? GF9100- isn't this a DX10 card?<br>Maybe this is resulting in problems too. <br><br></td></tr></table><br>
<a name="1115027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> The next release will return the feature level its using from GetGraphicsDriver().String() to help with identification.<br><br>so if the gpu is only Dx10.1 compatible the function will return<br><br>DirectX11 - Using DirectX10.1<br><br>Compatible versions are Dx10.0,Dx10.1 and Dx11.0. When Windows 8 comes along it will be 11.1. <br><br></td></tr></table><br>
<a name="1117180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Dave, do you have an update on the license situation?<br><br>I want to implement a D3D11 driver for <a href="https://github.com/kfprimm/maxb3d" target="_blank">MaxB3D</a> and would like to use your modules so that I do not have to roll my own. <br><br>Thanks! <br><br></td></tr></table><br>
<a name="1117275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya kfprimm.<br><br>I'll email you at the address in your profile.... <br><br></td></tr></table><br>
<a name="1117342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. <br><br></td></tr></table><br>
<a name="1118971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hey Dave, do you have an update on the license situation? <br></div><br><br>Also interested in licensing for my game project. I sent an email to the address listed here in your user profile. <br><br>L8r <br><br></td></tr></table><br>
<a name="1119238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Richard.<br><br>Sorry,<br>I didn't check my emails for a couple of days!<br><br>Cya. <br><br></td></tr></table><br>
<a name="1125552"></a>

<a name="1125658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> After messing with GitHub, getting things right and wrong... :D<br><br>All future updates will now be available at :-<br><a href="https://github.com/SRSSoftware/d3d11max2d.mod" target="_blank">https://github.com/SRSSoftware/d3d11max2d.mod</a><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1125664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note: The URL you posted gives a 404 error, probably should be:<br><a href="https://github.com/SRSSoftware/d3d11max2d.mod" target="_blank">https://github.com/SRSSoftware/d3d11max2d.mod</a> <br><br></td></tr></table><br>
<a name="1125668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats correct.<br>You must have looked as I changed the URL on Github but before I updated it here :)<br>I'm a real newbie to GitHub and still learning its little intricacies.<br><br>Cheers :P <br><br></td></tr></table><br>
<a name="1127794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>I am about to implement this driver into my Phoenix SS project. I have a copy of the current driver from github. Does it do screen (display) rotation and if so how do I use it. If it does not could you get it to?<br><br>Here is what it looks like.<br>Client Collision video (shows rotation using Oddmod driver) - <a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=L5tlwyQru-w" target="_blank">http://www.youtube.com/watch?feature=player_detailpage&amp;v=L5tlwyQru-w</a><br><br>Phoenix SS - <a href="http://redeyeware.uphero.com/phoenix_ss/main.html" target="_blank">http://redeyeware.uphero.com/phoenix_ss/main.html</a><br><br>Thanks. <br><br></td></tr></table><br>
<a name="1127839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Richard.<br><br>The code is already in there to do it. In the file d3d11max2d.mod/TBuffer.bmx.<br>It's not had much testing so there may be bugs in there. Let me know and I'll correct them.<br><br>Thanks.<br><br>Here's a simple example usage...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Import SRS.D3D11Max2D
AppTitle = "D3D11 SetBuffer Example"

SetGraphicsDriver D3D11Max2DDriver()

Graphics 800,600

Local RenderImage:TImage = CreateImage(800,600,1,RENDERIMAGE) 'Use the Flag RENDERIMAGE to create an image that can be used with ImageBuffer
Local BMaxLogo:TImage = LoadImage("Bmax512.tga")
MidHandleImage RenderImage
MidHandleImage BMaxLogo

Global ang

While Not KeyDown(KEY_ESCAPE)
	'All rendering/drawing goes straight into the TImage
	SetBuffer ImageBuffer(RenderImage,0)
	SetClsColor 60,120,180
	Cls

	DrawImage BmaxLogo,400,300
	DrawText "BMax Rulez!",400,200

	SetClsColor 0,0,0
		
	'All drawing now goes to the regular back buffer
	SetBuffer BackBuffer()
	Cls
	
	SetRotation ang
	ang:+1
	DrawImage RenderImage,400,300
	SetRotation 0

	Flip
Wend
End
</textarea> <br><br></td></tr></table><br>
<a name="1127884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave, Awesome!<br><br>I will let you know how it goes. It should get a fair bit of testing on many different systems so hoping for the best. <br><br>Again, Thanks! You Rock. <br><br></td></tr></table><br>
<a name="1127894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> On second glance at the code posted, I am not sure it does anything to rotate the 'display area' which is what I need to do. But I may be wrong. It looks like the image is being rotated and not the display.<br><br>Just to be clear what I am doing now with Odd.mod is drawing all the images to the display (backbuffer) and then using a command, in odd.mod's case its SetScreenRotation(), and rotating the whole screen/display.<br><br>I will try to isolate the code that does screen rotation in odd.mod's driver for DX9 so I can have a better reference for you.<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1127924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>You can switch to a texture and render directly into it then switch back, similar to Blitz3D style.<br>I imagine its possible to oversize the texture, render your screen into it then display it as a texture, then render your static graphics after switching back to the backbuffer. I'm not sure how that would pan out in practice just yet as I havent tried it.<br><br>Would that then give you the effect of rotating the screen? If not, I'll look into it some more as I'd like that feature available. <br><br></td></tr></table><br>
<a name="1127977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> I emailed oddball (author of odd.mod) for some guidance on his technique. I'm looking through his code now. <br><br></td></tr></table><br>
<a name="1127984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave,<br><br>Check your email. I forwarded a copy of David Williamson (odd.mod author). Interesting. :)<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1127986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Richard,<br><br>Thanks for that. I see the difference and I understand what he's doing in there.<br>I'll incorporate a similar technique for D3D11Max2D driver.<br><br>Give me a day or two as I'm busy with other things and I'll have it done :) <br><br></td></tr></table><br>
<a name="1128051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>COOL!<br><br>Looking forward to it. :D<br><br>Thanks,<br>Richard <br><br></td></tr></table><br>
<a name="1128360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, great to see this is on GitHub. I've begun merging it with my own Max2D work, so I'll be able to use it as a base for a D3D11 MaxB3D driver.<br><br>One thing I've done in my fork is to remove all the calls Notify and End. Instead, I've inserted throws. <br><br>I suggest you do the same as it will allow the end user (the coder using your driver) to wrap Graphics in a Try/End Try block and handle the failure in their own way, instead of forcibly ending the program. <br><br></td></tr></table><br>
<a name="1128779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> @kfprimm,<br><br>Hiya,<br><br>Yes, I agree about the Notifys and I'll change them over to Throws. Good suggestion! Thanks.<br><br>Apologies as it was a week ago that I said I'd update this. I've finished what I was doing over the passed days so I'm back on to this, so expect an update within the week... including screen rotation for you Richard :D<br><br>Cya <br><br></td></tr></table><br>
<a name="1128793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave,<br><br>You so rock. :D <br><br></td></tr></table><br>
<a name="1128885"></a>

<a name="1128886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Dave, You so rock. :D  <br></div><br><br>+1<br><br>:D<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aww cheers guys!!!<br><br>*group hug* :D<br>lol<br><br>Screen rotation is now in.<br><br>As per kfprimm's advice - all critical errors are now handled with a Throw to allow you to manage any errors yourself.<br><br>Just in case you're using odd2d.mod for the same effect for the other drivers and so as not to cause a confliction with duplicate function names, I've named the functions the same but with D3D11 on the end...<br><br><b>SetScreenRotationD3D11( ang# )</b> Set the angle of rotation<br><b>SetScreenZoomD3D11( zoom# )</b> Set the zoom factor <br><b>SetScreenFocusD3D11( x#, y# )</b> Set the center point of rotation<br><br>Thanks go to <b>oddball</b> for making his code pd as I've ripped his algos.<br><br>Have fun :-) <br><br></td></tr></table><br>
<a name="1128913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> After receiving the update through git, I'm getting a compile error on the module at the moment:<br><br><pre class=code>
Compiling:d3d11max2d.bmx
Compile Error: Identifier 'VerifyDX11Max2DDriver' not found
[C:/Code/BlitzMax/mod/srs.mod/d3d11max2d.mod/TBatchimage.bmx;366;2]
Build Error: failed to compile C:/Code/BlitzMax/mod/srs.mod/d3d11max2d.mod/d3d11
max2d.bmx
</pre><br><br>I tried to delete and re-sync the folders, but am still getting the same error afterwards. <br><br></td></tr></table><br>
<a name="1128914"></a>

<a name="1128915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <strike>Not sure how that crept back in as I renamed it as D3D11 and not DX11, but all the code was working before I updated it. Rather strange!<br><br>I just checked and it is as it should be, that is it should be referencing 'VerifyD3D11Max2DDriver'.</strike><br><br>Sorry Xlsior!!<br>I read your post wrong and that file was indeed referencing the wrong function name. Updated.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, compiled without errors now. <br><br></td></tr></table><br>
<a name="1128921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look like it compiled fine. :) <br><br>I will post a version of the client (game - Phoenix SS see above) I'm working on for testing as I am not near a DX10/11 system at the moment. The client will use the newly added screen rotation. I will also release the client for testing on DX10/11 systems this weekend if all goes right.<br><br>Back in a bit.. Te-hee-hee, happy, joy, joy :D <br><br></td></tr></table><br>
<a name="1129136"></a>

<a name="1129137"></a>

<a name="1129138"></a>

<a name="1129142"></a>

<a name="1129143"></a>

<a name="1129146"></a>

<a name="1129147"></a>

<a name="1129152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK. Here is a version of my project with a DX11 option and using the D3D11Max2DDriver() and screen rotation. Someone will have to let me know if it works (I have no DX10/11 here). <br><br><a href="http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a82.zip" target="_blank">http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a82.zip</a><br><br>Hit 'F1' for help<br>Hit "F10" for screen rotation. Escape to exit.<br>Number pad ' + ' and  ' - ' to zoom in and out. <br>Hit 'F12' to change resolutions.<br>Arrow Keys: Arrow left/right=steer Arrow up/down= thrust <br>Hit 'Z' to fire<br><br>Thanks:)<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129139"></a>

<a name="1129140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hit "F10" for screen rotation. Escape to exit. <br></div><br><br>Seems to work IN DX10/11 mode for me.<br><br>Before F10, the side cursor keys rotate the ship.<br>After F10, the screen flips instantly to make the ship face upwards, and then the side cursor keys smoothly rotate the screen instead of the ship when you steer.<br><br>Although one inconsistency: I have a 24" LCD screen, native resolution of 1920x1200.<br><br>In 1366x768, openGL mode shows me the entire screen centered, with black bars on top, bottom, left and right sides of the screen. The planet image in the center looks round.<br><br>In DX10/11 mode, there are NO black bars at the top and bottom of the screen, only on the left and right. The screen gets stretched vertically, with the planet in the center appearing as a very obvious oval.<br><br>(Update: DX7 and DX9 have black bars on all sides too, with a round planet)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior<br><br>Cool, right on. :)<br><br>I will change the setup options to support more resolutions which should fix the above. But it is great to know it is all working aside form that. Thanks for testing it. I think you can set your monitor to correct the aspect and it might look OK that way.<br><br><br>@ Dave<br>Great job. I'll be posting a new client for testing this weekend and I'll let you know what reports I get back. As far as zoom goes I have not tested it. I use my own zoom technique in the above client, but I will try to get it tested and the rest of the features included in this awesome driver. <br><br></td></tr></table><br>
<a name="1129187"></a>

<a name="1129192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Richard,<br><br>The rotation looks and works great :D<br><br>I can see a couple of possibly minor issues:-<br>The background of the help text in the OpenGL driver is black instead of transparent, the other drivers are OK:-<br><br><img src="http://i1176.photobucket.com/albums/x339/automagician01/PhoenixSS-OpenGL.jpg"><br><br>Using the Dx10/11 driver, when I zoom in the parts move apart, as if they are in the correct position but not actually being scaled. Zooming back out the parts move together, and once they are together and I keep zooming out then the foreground graphics and the ship completely disappear. Zooming back in they reappear :-<br><br><img src="http://i1176.photobucket.com/albums/x339/automagician01/PhoenixSS-DX10-DX11-zoomedin.jpg"><br><br>Thing is, I'm not sure if this would be your code or mine?!?!<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129195"></a>

<a name="1129199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also when zooming in, I mentioned that the parts moved apart... that is until it reaches what seems like a maximum zoom, and they are back together as you'd expect in the maximum zoomed size.<br><br><br>EDIT:- If you are using the same exact same code path but simply swapping out the driver then this is a problem with the driver :/ If that is the case, I understand this is a closed source project, so if you wouldn't mind to either post here or mail me some code that you're using so I nail this down.<br><br>Cheers.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129200"></a>

<a name="1129201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks go to oddball for making his code pd as I've ripped his algos. <br></div>You're welcome.<br><br>That zooming bug above looks like an Int is being used in some part of the scale/zooming process instead of a Float/Double.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That zooming bug above looks like an Int  <br></div><br>Hiya,<br><br>Yeah, I imagine that is more than likely the case, but if Richard is using the exact same code path and simply swapping out the driver then it would be nice to know what/where is causing it as in that case it may well be the driver itself. <br><br></td></tr></table><br>
<a name="1129254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dave<br><br>I will have to double check, but I am pretty sure all I did was enable the driver. Let me check first though. I will have to get back to you tonight.<br><br>- Rich - <br><br></td></tr></table><br>
<a name="1129257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note that my monitor IS set to keep the original aspect ratio, that is why it surprised me that the screen was stretched. <br><br></td></tr></table><br>
<a name="1129294"></a>

<a name="1129295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>In 1366x768, openGL mode shows me the entire screen centered, with black bars on top, bottom, left and right sides of the screen. The planet image in the center looks round.<br><br>In DX10/11 mode, there are NO black bars at the top and bottom of the screen, only on the left and right. The screen gets stretched vertically, with the planet in the center appearing as a very obvious oval.<br> <br></div><br><br>This happens just at 1366x768 ?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129309"></a>

<a name="1129329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Edit- The text should be black background. That is how I have it set.<br><br>Dave looking over my code now. <br><br>I wonder if there might be a scaling issue. A simple test would rule that out like maybe this:<br><br>This code will scale an image to a given pixel size.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'Scale to Pixel Function
'Written by Richard R Betson
'www.redeyeware.50megs.com
'Scales an image to a given pixel width and height. The source image can be any size.

'9/12/04

'As of this date BMAX will not CreateImage and creating images beyond the viewport.

'So keep in the ViewPort while creating images.
'===========================

Graphics 800,600,16,0

'DrawRect/ScaleToPixel width and height for actual pixel comparison
Local rect_w=400
Local rect_h=400

'Image  pixel width and height for Scale to pixel function. It can be any size.
Local source_w=700
Local source_h=100

'for function
Global w#
Global h#


Global imga:TImage=CreateImage(source_w,source_h)



SetColor 255,255,0
DrawRect 0,0,source_w,source_h
SetColor 255,255,255
GrabImage (imga,0,0)


ScaleToPixel(rect_w,rect_h,source_w,source_h)



While Not KeyHit(KEY_ESCAPE)

	SetBlend SOLID
	SetColor 0,0,255
	SetScale (1,1)
	DrawRect 0,0,rect_w,rect_h
	SetColor 255,255,0
	
	
	DrawText "WidthScale:"+w#+"  HeightScale:"+h#,10,10
	SetScale(w#,h#)	
	SetBlend LIGHTBLEND

	DrawImage imga,MouseX(),MouseY()
	Flip
	Cls


Wend


Function ScaleToPixel(rect_w,rect_h,source_w,source_h)

	w#=( Float(rect_w)/Float(source_w) )
	h#=( Float(rect_h)/Float(source_h) )

End Function
</textarea><br><br>l8r,<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> This happens just at 1366x768 ? <br></div><br><br>Yes -- the other resolutions look OK in DX11, it's just stretched in 1366x768.<br><br>In DX7/9/OpenGL mode the 1366x768 looks fine, though, so I doubt the monitor is the issue. <br><br></td></tr></table><br>
<a name="1129333"></a>

<a name="1129337"></a>

<a name="1129339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>The only thing I have changed in my code is the way I use screen rotation. Using SetScreenRotationD3D11() and SetScreenFocusD3D11( x#, y# ) instead of odd.mod's SetScreenRotation() and SetScreenFocus() when your driver is enabled.<br><br>I did enable the D3D11Max2DDriver() this way. Problem?<br><pre class=code>
SetGraphicsDriver (D3D11Max2DDriver(), GRAPHICS_BACKBUFFER | GRAPHICS_ALPHABUFFER | GRAPHICS_ACCUMBUFFER )
</pre><br><br>I'm still looking for a problem on my end but have not found any yet and all the other driver seem to scale images OK. I am 'NOT' using SetScreenZoomD3D11( zoom# ) to do the zooming but instead scaling images in my own algorithm. The only other problem I have noticed ( reaching... ) is some missing parentheses in the SetScale() commands in my code.<br><br>One other thing I noticed is GetGraphicsDriver() does not seem to report the D3D11Max2DDriver() as "not" active ie: this does not work<br><br><pre class=code>
If GetGraphicsDriver()=D3D11Max2DDriver()
	'Driver Enabled
Else
	'Driver Not Enabled
EndIf

'in my case I get driver enabled when it was not
</pre><br><br>In this case it may not be your drivers fault as my video card is DX9 on a Win7 DX11 system.<br><br><br>Anyway still on the case. :)<br><br>Rich<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> FWIW, I'm seeing the same breaking apart of the image when I zoom in in DX11 mode. Windows 7 x64, Radeon HD 6750 which is a DX11 card. <br><br></td></tr></table><br>
<a name="1129354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xisior<br><br>Maybe you could compile this code and see if it scales the image in DX11. If it works right you will get a blue box that expands in height and width then cycles.<br><br>If it does work could you try it in full screen.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import SRS.D3D11Max2D

SetGraphicsDriver (D3D11Max2DDriver())

Graphics(800,600,0)'Windowed
'Graphics(800,600,32)'Full screen

Global image:TImage=CreateImage(200,200)

SetColor(0,0,255)
DrawRect(0,0,200,200)
Flip
GrabImage(image,0,0)
Global w:Float,h:Float

While Not KeyHit(KEY_escape) 

If w&lt;1
	w=w+.01
Else
	w=0
EndIf

If h&lt;1
	h=h+.01
Else
	h=0
EndIf


SetScale(1+w,1+h)
DrawImage(image,0,0)
Flip
Cls

Wend
</textarea> <br><br></td></tr></table><br>
<a name="1129417"></a>

<a name="1129418"></a>

<a name="1129422"></a>

<a name="1129424"></a>

<a name="1129426"></a>

<a name="1129438"></a>

<a name="1129441"></a>

<a name="1129443"></a>

<a name="1129445"></a>

<a name="1129446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>The image scaling bug is fixed.<br><br>@Richard<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Import SRS.D3D11Max2D

SetGraphicsDriver D3D9Max2DDriver()

If GetGraphicsDriver() = D3D11Max2DDriver()
	Print "D3D11Max2D is Set"
Else
	Print "D3D11Max2D is Not Set"
EndIf
</textarea><br><br>This returns 'D3D11Max2D is Set' ?<br>Or are you referring to that you don't have a Dx11 card but the D3D11Max2D is available?<br><br>The latter is the same behaviour will the other drivers. For eg, if you have Dx9 installed on a system which has a Dx8 only card you can still use SetGraphicsDriver D3D9Max2DDriver(), its not until you try to use the graphics commands that you get an error, for eg you'd get an error on Graphics 800,600.<br><br>This next part was actually missing from D3D11Max2D so I've added it in. To check the graphics card against the Max2D driver version you want to use :-<br><pre class=code>
If D3D9GraphicsDriver() Print "D3D9Max2D compatible"
If D3D11GraphicsDriver() Print "D3D11Max2D compatible"
</pre><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm currently looking into the monitor/full screen resolution scaling issue. <br><br></td></tr></table><br>
<a name="1129498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave,<br><br>Right on. :) I will get a copy of the update and recompile and post my client.<br><br><div class="quote"> Or are you referring to that you don't have a Dx11 card but the D3D11Max2D is available? <br></div><br><br>Yes, It would fail on say 1366 x 768 (no gmode) but other resolutions like 800 x 600 would allow the client to run and then crash with no gmode failure.  <br><br>Off to to recompute:)<br><br>Rich <br><br></td></tr></table><br>
<a name="1129511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to clarify for yourself and for others...<br><br>There are a couple of things to think about here :-<br>1. The end user pc <b>doesnt</b> have Dx11 installed.<br>2. The end user <b>does</b> have Dx11 installed but the gpu <b>isnt</b> Dx10/Dx11 compatible.<br><br>It doesn't matter if 1. and/or 2. are True, Max2D will still make a D3D11Max2DDriver().<br>However if 1. and/or 2. are true then D3D11GraphicsDriver() will be invalid - Null.<br><br>So if you are doing a check against D3D11Max2DDriver() in your code to check if you have a valid Dx11 gpu then your code will fail when it comes to actually using the graphics commands. This is the way BRL has made Max2D work and D3D11Max2D follows the same setup configuration.<br><br>If you want to know if the end user pc can handle the D3D11Max2DDriver(), you can check if D3D11GraphicsDriver() is True or Null, or use a Try/Catch which may/may not make for easy code reading. Personal preference really :P<br><br>And also, now with the latest changes, you shouldn't get any graphics modes returned unless the pc does have a Dx10/Dx11 gpu, it will leave the GraphicsModes() as null, so be sure to check that before trying to look at graphics modes parameters via TGraphicsMode ;-)<br><br>Have fun :D <br><br></td></tr></table><br>
<a name="1129569"></a>

<a name="1129570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave,<br><br>I have posted patches to GitHub that change the behavior to what I believe is correct. Take a look at them if you have the time.<br><br>I agree with your above points except for one. D3D11Max2DDriver should return Null if D3D11 is not present. This is the behavior of TD3D9Max2DDriver.Create:<br><pre class=code>
	Method Create:TD3D9Max2DDriver()
		If Not D3D9GraphicsDriver() Return Null
		
		Local d3d:IDirect3D9=D3D9GraphicsDriver().GetDirect3D()

		If d3d.CheckDeviceFormat( D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL,D3DFMT_X8R8G8B8,0,D3DRTYPE_TEXTURE,D3DFMT_A8R8G8B8 )&lt;0
			Return Null
		EndIf
		
		Return Self
	End Method
</pre><br><br><br>By the way, I believe you left out the new GUIDs you are using in TD3D11GraphicsDriver.Create. I have included them as well.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129617"></a>

<a name="1129618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>D3D11Max2DDriver should return Null if D3D11 is not present.<br> <br></div><br>Hiya Kev,<br><br>Yeah, you're right, and it does.<br>I don't know what I'm waffling on about there!!! :/ LOL.<br><br><div class="quote"> <br>By the way, I believe you left out the new GUIDs you are using in TD3D11GraphicsDriver.Create<br> <br></div><br><br>Yep I did :/<br>Thanks for the heads up LOL.<br>I didn't upload the file to GitHub.<br>I still can't get used to GitHub for some reason. We just don't 'dance' in time. I'll stick with it though for the meantime and see how I get on with some usage, so people please be patience with my inadequacies with github.<br><br>I'd made a couple more changes to it. I was going to incorporate 16bit fullscreen, but there doesnt seem to be any widespread valid back buffer format for that depth. Maybe I'm missing something? <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff471325(v=vs.85).aspx" target="_blank">Direct3D11 Formats</a> The only 'seemingly' valid option is only valid on Dx11.1<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1129634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow. You're right, it doesn't and my pull request doesn't even address that issue. I don't what I was thinking. Keeping all this stuff straight is difficult!<br><br>And don't worry about. I think the issue is that you're looking at it as 'GitHub' and not 'git.' Git is where all the real functionality is. GitHub just makes it easy to use in teams and gives you a nice interface to browse the repos.<br><br>Look at this <a href="https://github.com/SRSSoftware/d3d11max2d.mod/pull/2" target="_blank">pull request</a>, it adds a .gitignore file. If you merge that into your branch, then all those pesky .a and .i files will not longer appear as untracked files, they will simply be ignored. In addition, it adds the .bmx folders and doc/commands.html. <br><br></td></tr></table><br>
<a name="1129645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Maybe you could compile this code and see if it scales the image in DX11. If it works right you will get a blue box that expands in height and width then cycles. <br></div><br><br>...It doesn't.<br><br>The box stays small, and every three seconds or so I see a short blue flash of a large box, then immediately goes back to the small box.<br><br>--Nevermind, just downloaded the latest update, and now it does indeed scale the box smoothly. <br><br></td></tr></table><br>
<a name="1130071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dave,<br><br>Still getting a new client ready to test. I had to isolate some other issues. Should have something out shortly and significantly faster in DX. :)<br><br>- Rich - <br><br></td></tr></table><br>
<a name="1130153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> @kfprimm<br><br>Thanks for the info, I definitely need to look into more. I kind of just jumped in and started uploading files without giving real thought for the underlying processes. As usual I should RTFM :D<br><br>@Richard<br><br>Looking forward to it :-) <br><br></td></tr></table><br>
<a name="1130834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>Here is the latest copy of Phoenix SS. IT should run great in DX11 now. Let me know. :)<br><br><a href="http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a83.zip" target="_blank">http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a83.zip</a><br><br>Thanks, <br><br></td></tr></table><br>
<a name="1130864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Richard,<br><br>Works great and looks really cool :P<br><br>Only one thing... the available graphics modes dont show up in Dx11 for my laptop, are you locking to a specific hz?<br>My laptop returns hz of 59 and 60 for OpenGL/DX7/DX9 but for DirectX11 the laptop driver reports available fullscreen modes as 59 only ( which comes from the ropey graphics drivers installed ), so if you are doing a search for specifically 60hz then this would be something that could trip up.<br><br>It does look cool :D <br><br></td></tr></table><br>
<a name="1130905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>Here is a recompile to catch 59hrz as a valid mode. It's these little things I need to know about so thanks. :D<br><br>Let me know if the graphic modes show up.<br><br><a href="http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a83b.zip" target="_blank">http://redeyeware.uphero.com/phoenix_ss/phoenix_ss_client_a83b.zip</a><br><br>As a reminder use number pad ' - ' and ' + ' to zoom in and out. Hit ' F10' to toggle screen rotation on/off.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="1130924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everything worked great in 'a83.zip' except for the odd fullscreen frequencies which are now working ok in 'a83b.zip'.<br><br>Sweet :D <br><br></td></tr></table><br>
<a name="1130940"></a>

<a name="1130941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> YAY!<br><br>Your driver so rocks it. :D So far other users testing Phoenix report no problems in DX10/11 so it is looking good. :)<br><br>I will be exploiting shadows and the rest very soon. Keep an eye out for it.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133502"></a>

<a name="1133503"></a>

<a name="1133504"></a>

<a name="1133505"></a>

<a name="1133506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>I was wondering if you could have your driver check the current DirectX installed before the driver attempts to initialize. On my Win-XP DirectX 9 system the driver throws an error just being an 'imported mod'. Perhaps checking the DX version installed similar to this method :<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=74071#827657" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=74071#827657</a><br><br>This may not be workable and I may have to do this kind of setup on my own, but I thought I would see what you think about it. <br><br>- Rich -<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133527"></a>

<a name="1133530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Richard,<br><br>What error are you getting? Without looking ( at work at mo ), there shouldn't be any code 'running' until you set the driver using SetGraphicsDriver, but I will check when I get home later. From memory... I'm sure only function pointers and constants are initialized during module loading and only used if valid during execution, but again I will check this.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133538"></a>

<a name="1133539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>The error is "Cannot find 'dxgi.dll. Please Install DirectX11 from Microsoft Exiting". <br><br>I'm just running and compiling 'Import SRS.D3D11Max2D' as the code on my DX9 XP system.<br><br>It does this or something similar on DX-10/11 systems as well asking for a file but I'm not sure its same one as above. Updating DX11 will fix the problem but some newer out of the box systems seem not to include it. I will try to get the file name by looking over your driver code late tonight.<br><br>I guess what I am getting at is it failing and requesting a driver when DX-10/11 is installed is good but when DX 9 or less is installed it would be great if the driver did not initialize at all and pass a 'null' value to SetGraphicsDriver().<br><br>I will be back late tonight. :)<br><br>Thanks,<br>- Rich -<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133569"></a>

<a name="1133570"></a>

<a name="1133571"></a>

<a name="1133572"></a>

<a name="1133574"></a>

<a name="1133575"></a>

<a name="1133576"></a>

<a name="1133577"></a>

<a name="1133580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Richard,<br><br>UPDATED...<br><br><div class="quote"> <br>It does this or something similar on DX-10/11 systems as well asking for a file but I'm not sure its same one as above.<br> <br></div><br>If it happened on a system with Dx11 already installed then its probably 'd3dcompiler.dll' thats behind the times. This won't happen now, although the driver will still fail.<br><br>I thought I'd got rid of all those messages, never mind, they are gone now. It will fail silently and the driver will be null if either D3D11 isnt installed or if it is installed and not up to date.<br><br>This means its up to you to deal with this in your own code which you can now do silently in a variety of ways whichever you choose :-<br><pre class=code>
'Silent fallback to D3D9 if no D3D11
Strict

Import SRS.D3D11Max2D

'Is D3D11 installed??
Global D3DDriver:TGraphicsDriver
D3DDriver = D3D11Max2DDriver()

If Not D3DDriver D3DDriver = D3D9Max2DDriver()

SetGraphicsDriver D3DDriver
Graphics 800,600

While Not KeyDown(KEY_ESCAPE) And Not AppTerminate()
	Cls
	
	DrawText "Current GraphicsDriver() is "+GetGraphicsDriver().ToString(),0,0

	Flip
Wend
End
</pre><br><br>Remember that MS suggest to include the correct run-time install package that your code needs alongside your own game. Doing things the way we are at the moment is a bit 'hacky' although it kindof works to a degree. MS do have a nice install package thats only really suitable when you want to install your game say via InstallShield or simliar.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133595"></a>

<a name="1133596"></a>

<a name="1133597"></a>

<a name="1133598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>Right on, that is great. :) I can provide a link to the installer for DX11 and all should be good.<br><br>Thanks for the update Dave.<br><br>*Edit- removed<br><br>- Rich -<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1133989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>I am not sure GetGraphicDriver() is correctly returning the D3D11Max2DDriver(). I will have an opportunity to test this tomorrow but a test with the updated driver failed to recognize the D3D11Max2DDriver() driver on a qualified DX10 system (within my game). It could be something I have done but I will know tomorrow.<br><br>I guess this is a 'has anyone had a problem with the updated driver' moment. :)<br><br>Thanks,<br>- Rich - <br><br></td></tr></table><br>
<a name="1133996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Rich,<br><br>For testing - there are 3 exposed variables that you could check manually if you wanted to...<br><br><b>_d3d11</b> : If this is non-zero then the driver has found <b>d3d11.dll</b><br><b>_d3dcompiler</b> : If this is non-zero then the driver has found <b>D3DCompiler_43.dll</b><br><b>_dxgi</b> : If this is non-zero then the driver has found <b>dxgi.dll</b><br><br>If any one of them is zero then the driver will be Null. Also if any one of them is non-zero while any other one is zero its an indication that DirectX needs the latest update - Typically _d3dcompiler could be zero while the others will be ok on a pre-installed system.<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="1134131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, that is very useful to know. :)<br><br>I'll be busy the next day or so but will post my results soon. Thursday'ish.<br><br>Thanks,<br>- Rich - <br><br></td></tr></table><br>
<a name="1135007"></a>

<a name="1135008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>It's a bit past Thursday:)  <br><br>It appears that the latest version of the driver is not working. I a used the previous version of the driver and it works all right. The constants you listed above all reported greater then null(very useful BTW). <br><br>I am looking over what might be the problem, but no luck yet. GetGraphicsDriver() returns null and using SetGraphics(D3D11Max2DDriver()) and drawing to display will fail as well. It is, as if the driver is not initializing. <br><br>- Rich -<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1135010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rich,<br><br>So  there are 2 issues<br><br>1. GetGraphicsDriver() - not working<br>2. SetGraphics([..]) - not working<br><br>Issue 1 - Ive fixed - not uploaded just yet.<br>Issue 2 - Are you using SetGraphics or SetGraphicsDriver ? with D3D11Max2DDriver().<br><br>Only reason I ask is that if you try to use SetGraphics(D3D11Max2DDriver()) the compiler should complain about D3D11Max2DDriver not being a TGraphics type, So I assume you mean SetGraphicsDriver ?? I've just tested on a Dx10.1 system and it works ok. Can you give a code example please.<br><br>Cheers <br><br></td></tr></table><br>
<a name="1135011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also were you using GetGraphicsDriver().ToString() at all? <br><br></td></tr></table><br>
<a name="1135018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>Ya,I am using SetGraphicsDriver(D3D11Max2DDriver()).<br><br>I don't use GetGraphicsDriver().ToString() but instead do something like this:<br><br><pre class=code>

SetGraphicsDriver(D3D11Max2DDriver())
Local t:TGraphicsDriver=GetGraphicsDriver()

Select GetGraphicsDriver()
     Case D3D11Max2DDriver()	
          If t&lt;&gt;Null
               'driver looks good.
          EndIf
     Case D3D9Odd2DDriver()
          If t&lt;&gt;Null
               'driver looks good.
          EndIf

End Select
</pre><br><br>In my case the GetGraphicsDriver() reports as null on the DX10 system I used today (previous versions worked on this system). Bypassing the above code and just using SetGraphicsDriver(D3D11Max2DDriver()) fails to work as well on the same DX10 qualified system.<br><br>Let me recompile with the new version and see what happens tomorrow. I'll also check compiler output, I may have missed something the driver reported.<br><br>Thanks. :)<br>- Rich - <br><br></td></tr></table><br>
<a name="1135198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>I just tested the the version of your driver I was having trouble with (not this last update) and it worked fine on DX10.1 Ati v-card. The last system I ran it on was a laptop with a DX10.1 Intel v-card which failed.<br><br>I am going to try the new version of your driver on this Ati system and I bet it works. There must have been something wrong with my friends laptop setup, I bet a v-card driver update will fix the problem.<br><br>Back soon,<br>- Rich - <br><br></td></tr></table><br>
<a name="1135499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>You've not up'ed the latest changes GitHub, right? <br><br>I will probably release a new version of my software (server/client, yea:) ) this weekend and the driver will get a good testing. <br><br>Thanks,<br>- Rich - <br><br></td></tr></table><br>
<a name="1135531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Rich,<br><br>Sorry for the delay.<br><br>I've been busy pulling my hair out as to get to grips with some unrelated code trying to understand Microsofts coding conventions :/ I'll never understand how they can actually take a simple task and bastardize it beyond belief?!?!? But still... I digress.<br><br>On topic...<br><br>It may be a quirk with Intel cards being really fussy with Dx initialisation. In this update I've also exposed a new function for testing only that should not be NULL after SetGraphicsDriver command even if the driver isn't initialised you should still get some value returned...<br><br>D3D11GetFeatureLevel()<br><br>If you have problems the values return by that command relate to consts defined in d3dcommon.bmx :-<br><br>Const D3D_FEATURE_LEVEL_9_1	= $9100<br>Const D3D_FEATURE_LEVEL_9_2	= $9200<br>Const D3D_FEATURE_LEVEL_9_3	= $9300<br>Const D3D_FEATURE_LEVEL_10_0	= $a000<br>Const D3D_FEATURE_LEVEL_10_1	= $a100<br>Const D3D_FEATURE_LEVEL_11_0	= $b000<br><br>The driver will only initialise if the value of D3D11FeatureLevel() is the value of D3D_FEATURE_LEVEL_10_0 or greater. The same process was used in previous versions except I've just exposed this function to help bug hunting.<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="1135713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Richard Betson</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave,<br><br>That is very cool and should help figure out whats going on. I love the fact that there is now some level of error checking. Good job. As an extra it looks that if the D3D11Max2DDriver() fails for a valid reason I can see what DX version is actually installed.<br><br>I will give it a test on the the system that was in question and see what happens.<br><br>- Rich - <br><br></td></tr></table><br>
<a name="1135786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to interrupt, chaps (keep going!), but the thread was getting a bit long. Continued <a href="/posts.php?topic=97645" target="_blank">here</a>... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
