<!DOCTYPE html><html lang="en" ><head ><title >Mac Steamworks wrapper</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mac Steamworks wrapper</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Mac Steamworks wrapper</a><br><br>
<a name="1123445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I seem to remember reading there was a mac steamworks wrapper? is this the case? if so, who wrote it? I'd like to get in touch with them pretty soon!<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1123506"></a>

<a name="1123568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> - Skidracer: <a href="http://blitzbasic.com/Community/posts.php?topic=84183" target="_blank">http://blitzbasic.com/Community/posts.php?topic=84183</a><br><br>- I think Hujiklo hired <a href="/Account/showuser.php?id=8077" target="_blank">Brucey</a> to write a custom steamworks wrapper for his game, so go talk to Brucey as well.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1123665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got skids wrapper, but it's windows only.<br><br>I'll send Brucey an email and see what he says.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1123713"></a>

<a name="1123714"></a>

<a name="1123715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Charlie,<br><br>Sorry about failing to reply again to your emails.<br><br>I have done some testing with steamstub on osx:<br><br>Unlike windows the C++ stub should be able to be embedded directly in BlitzMax, so you won't need to ship extra glue dll. <br><br>I'm not sure about the particulars linking to the steam dylib am testing now...<br><br>steamtest.bmx<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' steam demo has appid 480

'Import "steamstub.lib"
Import "steamstub.cpp"

Extern "C"

Function OpenSteam%(gameid%)
Function ReadSteam$z()
Function GetSteamStat%(id$z)
Function SetSteamStat(id$z,value%)
Function GetSteamAchievement%(id$z)
Function SetSteamAchievement(id$z)
Function StoreSteamStats()
Function FindNumberOfCurrentPlayers()
Function FindOrCreateLeaderboard( name$z, sortmethod%, displaytype% )
Function FindLeaderboard( name$z )
Function UploadLeaderboardScore( sendmethod%, score%, details$z )
Function DownloadLeaderboardEntries( request%, start%, finish% )

End Extern

' ELeaderboardDataRequest
' type of data request, when downloading leaderboard entries

Const k_ELeaderboardDataRequestGlobal = 0
Const k_ELeaderboardDataRequestGlobalAroundUser = 1
Const k_ELeaderboardDataRequestFriends = 2

' ELeaderboardSortMethod
' the sort order of a leaderboard

Const k_ELeaderboardSortMethodNone = 0
Const k_ELeaderboardSortMethodAscending = 1	' top-score is lowest number
Const k_ELeaderboardSortMethodDescending = 2	' top-score is highest number

' ELeaderboardDisplayType
' the display type (used by the Steam Community web site) For a leaderboard

Const k_ELeaderboardDisplayTypeNone = 0 
Const k_ELeaderboardDisplayTypeNumeric = 1			' simple numerical score
Const k_ELeaderboardDisplayTypeTimeSeconds = 2		' the score represents a time, in seconds
Const k_ELeaderboardDisplayTypeTimeMilliSeconds = 3	' the score represents a time, in milliseconds

' ELeaderboardUploadScoreMethod

Const k_ELeaderboardUploadScoreMethodNone = 0
Const k_ELeaderboardUploadScoreMethodKeepBest = 1
Const k_ELeaderboardUploadScoreMethodForceUpdate = 2

Global needscores=True

Function steamtest()

	steamstate=OpenSteam(44100)
	
	If steamstate=-1
	
		Print "Steam must be running to play this game."
		Print "OpenSteam() failed."

		Return
	
	EndIf
	
	If steamstate=1 
		Print "Steam is online, getting stats"

'		SetSteamStat "bogeys",0
'		GetSteamStat "bogeys"
		
'		FindNumberOfCurrentPlayers()

		FindOrCreateLeaderboard("Lead1",1,k_ELeaderboardDisplayTypeNumeric)
		FindLeaderboard("Lead1")

'		FindOrCreateLeaderboard("Track01",k_ELeaderboardSortMethodAscending,k_ELeaderboardDisplayTypeTimeSeconds)
'		DownloadLeaderboardEntries(k_ELeaderboardDataRequestGlobal,0,1024 )

	EndIf

	If steamstate=0
		Print "Steam is offline"
	EndIf
	
	Print "steamstate="+steamstate

	
	While Not KeyHit(1)
	
		a$=ReadSteam()
		
		Print "&lt;steam&gt;:"+a$
				
		If a="stats received!"
		
			games_played2=GetSteamStat("games_played2")
						
			games_played2=games_played2+1
			
'			SetSteamStat( "games_played2",games_played2 )			
'			StoreSteamStats()

			Print "recv: Game counter incremented to "+games_played2
		
		EndIf
		
		If a="stats stored!"
			
			games_played2=GetSteamStat("games_played2")
						
			games_played2=games_played2+1
			
			SetSteamStat( "games_played2",games_played2 )
			
			StoreSteamStats()

			Print "store: Game counter incremented to "+games_played2
			
		EndIf
	
		Delay (1000)
	
	Wend
	

End Function

Print "steam stub 1.7"

steamtest()

Print "finished, hit Return To finish"

WaitKey

</textarea><br><br>steamstub.cpp (latest?)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
#define _CRT_SECURE_NO_WARNINGS

//#include &lt;windows.h&gt;
#include &lt;string&gt;

#include "include/steam_api.h"

#define BBDECL extern "C" //_declspec(dllexport)

SteamLeaderboard_t handle=0;
std::string steamlog;


class CStatsAndAchievements
{
public:
	CGameID m_GameID;

	CStatsAndAchievements( void *pGameEngine,int gameID );
	STEAM_CALLBACK( CStatsAndAchievements, OnUserStatsReceived, UserStatsReceived_t, m_CallbackUserStatsReceived );
	STEAM_CALLBACK( CStatsAndAchievements, OnUserStatsStored, UserStatsStored_t, m_CallbackUserStatsStored );
	STEAM_CALLBACK( CStatsAndAchievements, OnAchievementStored, UserAchievementStored_t, m_CallbackAchievementStored );
	STEAM_CALLBACK( CStatsAndAchievements, OnFindScores, LeaderboardFindResult_t, m_CallbackFindScores );
	STEAM_CALLBACK( CStatsAndAchievements, OnDownload, LeaderboardScoresDownloaded_t, m_CallbackDownloaded );
	STEAM_CALLBACK( CStatsAndAchievements, OnUpload, LeaderboardScoreUploaded_t, m_CallbackUploaded );
	STEAM_CALLBACK( CStatsAndAchievements, OnCount, NumberOfCurrentPlayers_t, m_CallbackCount );
};

CStatsAndAchievements::CStatsAndAchievements( void *pGameEngine ,int gameID ):
	m_CallbackUserStatsReceived( this, &amp;CStatsAndAchievements::OnUserStatsReceived ),
	m_CallbackUserStatsStored( this, &amp;CStatsAndAchievements::OnUserStatsStored ),
	m_CallbackAchievementStored( this, &amp;CStatsAndAchievements::OnAchievementStored ),
	m_CallbackFindScores( this, &amp;CStatsAndAchievements::OnFindScores ),
	m_CallbackDownloaded( this, &amp;CStatsAndAchievements::OnDownload ),
	m_CallbackUploaded( this, &amp;CStatsAndAchievements::OnUpload ),
	m_CallbackCount( this, &amp;CStatsAndAchievements::OnCount ),
	m_GameID( gameID )
{
//	m_GameID..Set( uint32 unAccountID, EUniverse eUniverse, EAccountType eAccountType )

}


void CStatsAndAchievements::OnDownload( LeaderboardScoresDownloaded_t *download ){

	LeaderboardEntry_t entry;
	int32 details[256];
	char buffer[128];
	int n;

	_snprintf( buffer, 128, "download=%d!", download-&gt;m_cEntryCount );
	steamlog.append(buffer);
	for ( int index = 0; index &lt; download-&gt;m_cEntryCount; index++ ){
		SteamUserStats()-&gt;GetDownloadedLeaderboardEntry( 
			download-&gt;m_hSteamLeaderboardEntries, 
			index, 
			&amp;entry, 
			details,
			256
		);
		n=_snprintf( buffer, 128, "%d:%d:%d:", entry.m_nScore,entry.m_nGlobalRank,entry.m_steamIDUser);
		steamlog.append(buffer);
		for( int i=0;i&lt;entry.m_cDetails;i++){
			steamlog.push_back((char)details[i]);
		}
		steamlog.append("!");
	}
}

void CStatsAndAchievements::OnUpload( LeaderboardScoreUploaded_t *up ){
	char buffer[128];
	if(up-&gt;m_bSuccess &amp;&amp; up-&gt;m_bScoreChanged){
		_snprintf( buffer, 128, "upload=%d:%d:%d!", up-&gt;m_nScore,up-&gt;m_nGlobalRankNew,up-&gt;m_nGlobalRankPrevious );
		steamlog.append(buffer);
	}
}

void CStatsAndAchievements::OnFindScores( LeaderboardFindResult_t *t ){
	char buffer[128];
	if(t-&gt;m_bLeaderboardFound){
		handle=t-&gt;m_hSteamLeaderboard;
		_snprintf( buffer, 128, "found=%s:%d!", 
			SteamUserStats()-&gt;GetLeaderboardName(t-&gt;m_hSteamLeaderboard),
			SteamUserStats()-&gt;GetLeaderboardEntryCount(t-&gt;m_hSteamLeaderboard));
		steamlog.append(buffer);
	}
}

void CStatsAndAchievements::OnCount(NumberOfCurrentPlayers_t *n){
	char buffer[128];
	_snprintf( buffer, 128, "playercount=%d!", n-&gt;m_cPlayers);
	steamlog.append(buffer);
}

void CStatsAndAchievements::OnUserStatsReceived( UserStatsReceived_t *pCallback )
{
	// we may get callbacks for other games' stats arriving, ignore them
	if ( m_GameID.ToUint64() == pCallback-&gt;m_nGameID )
	{
		if ( k_EResultOK == pCallback-&gt;m_eResult )
		{
			steamlog.append("stats received!");
		}
		else
		{
			char buffer[128];
			_snprintf( buffer, 128, "stats failed %d!", pCallback-&gt;m_eResult );
			steamlog.append( buffer );
		}
	}
}


void CStatsAndAchievements::OnUserStatsStored( UserStatsStored_t *pCallback )
{
	// we may get callbacks for other games' stats arriving, ignore them
	if ( m_GameID.ToUint64() == pCallback-&gt;m_nGameID )
	{
		if ( k_EResultOK == pCallback-&gt;m_eResult )
		{
			steamlog.append("stats stored!");
		}
		else
		{
			char buffer[128];
			_snprintf( buffer, 128, "stats stored failed %d!", pCallback-&gt;m_eResult );
			steamlog.append( buffer );
		}
	}
}
void CStatsAndAchievements::OnAchievementStored( UserAchievementStored_t *pCallback )
{
	// we may get callbacks for other games' stats arriving, ignore them
	if ( m_GameID.ToUint64() == pCallback-&gt;m_nGameID )
	{
		if ( 0 == pCallback-&gt;m_nMaxProgress )
		{
			char buffer[128];
			_snprintf( buffer, 128, "Achievement '%s' unlocked!", pCallback-&gt;m_rgchAchievementName );
			steamlog.append(buffer);
		}
		else
		{
			char buffer[128];
			_snprintf( buffer, 128, "Achievement '%s' progress %d:%d!", 
				pCallback-&gt;m_rgchAchievementName, pCallback-&gt;m_nCurProgress, pCallback-&gt;m_nMaxProgress );
			steamlog.append( buffer );
		}
	}
}





#define MAXPLAYERFETCH 256
#define BUFFERSIZE 4096+MAXPLAYERFETCH*512

char rbuffer[BUFFERSIZE];

BBDECL char *ReadSteam(){
	SteamAPI_RunCallbacks();
	_snprintf(rbuffer,BUFFERSIZE,"%s",steamlog.c_str());
	steamlog="";
	return rbuffer;
}

CStatsAndAchievements *stats;

BBDECL void StoreSteamStats(){
  SteamUserStats()-&gt;StoreStats();
}

// stats 

BBDECL int GetSteamStat(const char *id){
  int32 res;
  if (!SteamUserStats()-&gt;GetStat(id,&amp;res )){
	  return -1;
  }
  return res;
}

BBDECL void SetSteamStat(const char *id,int32 value){
	SteamUserStats()-&gt;SetStat(id,value);
}

// achieves

BBDECL int GetSteamAchievement(char *id){
  bool res;
  SteamUserStats()-&gt;GetAchievement(id,&amp;res );
  return res?1:0;
}

BBDECL void SetSteamAchievement(const char *id){
  SteamUserStats()-&gt;SetAchievement(id);
}

BBDECL void ClearSteamAchievement(const char *id){
  SteamUserStats()-&gt;ClearAchievement(id);
}

BBDECL int GetSteamAchievementIcon(const char *pchName){
  return SteamUserStats()-&gt;GetAchievementIcon( pchName );
}
	// Get general attributes (display name / text, etc) for an Achievement
BBDECL const char *GetAchievementDisplayAttribute( const char *pchName, const char *pchKey ){
	return SteamUserStats()-&gt;GetAchievementDisplayAttribute( pchName, pchKey );
}

	// Achievement progress - triggers an AchievementProgress callback, that is all.
	// Calling this w/ N out of N progress will NOT set the achievement, the game must still do that.
BBDECL int IndicateAchievementProgress( const char *pchName, uint32 nCurProgress, uint32 nMaxProgress ){
	return SteamUserStats()-&gt;IndicateAchievementProgress( pchName, nCurProgress, nMaxProgress )?1:0;
}

char leadname[256];

BBDECL void FindOrCreateLeaderboard( char *name, ELeaderboardSortMethod sortmethod, ELeaderboardDisplayType displaytype ){
	handle=0;
	sprintf(leadname,name);
	SteamUserStats()-&gt;FindOrCreateLeaderboard(leadname,sortmethod,displaytype);
}

BBDECL void FindLeaderboard( char *name ){
	handle=0;
	sprintf(leadname,name);
	SteamUserStats()-&gt;FindLeaderboard(leadname);
}

BBDECL void UploadLeaderboardScore( ELeaderboardUploadScoreMethod method, int32 score, char *details ) {
	int data[256];
	int i;
	if(handle==0){
		steamlog.append( "no leaderboard open!" );
		return;
	}

	for(i=0;i&lt;255;i++){
		if ((data[i]=details[i])==0){
			break;
		}
	}

	data[i++]=0;
	SteamUserStats()-&gt;UploadLeaderboardScore(handle,method,score,data,i);
}

BBDECL void FindNumberOfCurrentPlayers() {
	SteamUserStats()-&gt;GetNumberOfCurrentPlayers();
}

BBDECL void DownloadLeaderboardEntries( ELeaderboardDataRequest request, int start, int end ) {
	if(handle==0){
		steamlog.append( "no leaderboard open!" );
		return;
	}
	if(end-start&gt;MAXPLAYERFETCH){
		end=start+MAXPLAYERFETCH;
	}
	SteamUserStats()-&gt;DownloadLeaderboardEntries(handle,request,start,end);
}


BBDECL void CloseSteam(){
	SteamAPI_Shutdown();
}

BBDECL int OpenSteam(int gameID){
	if(!SteamAPI_Init()){
		return -1;
	}

	CSteamID steamid;
	bool loggedon;
	steamid=SteamUser()-&gt;GetSteamID();
	loggedon=SteamUser()-&gt;BLoggedOn();
	int res=1;

//	engine=new CGameEngine( hInstance, nCmdShow, 1024, 768 );

	stats=new CStatsAndAchievements(&amp;res,gameID);

	SteamUserStats()-&gt;RequestCurrentStats();
//	SteamUserStats()-&gt;SetStat("Player hatched",50);
//	SteamUserStats()-&gt;StoreStats();

	return loggedon?1:0;
}
</textarea><br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1123753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh! Thanks! I'll take a look at this in the morning :)<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1123788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried to compile the example. getting lots of undefined symbols followed by an ld error, so presumably it's not finding the .dylib, right? or i've done something wrong.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Building macsteamtest
Linking:macsteamtest.debug
Undefined symbols:
  "_SteamUser", referenced from:
      _OpenSteam in steamstub.cpp.debug.macos.x86.o
      _OpenSteam in steamstub.cpp.debug.macos.x86.o
  "_SteamAPI_Shutdown", referenced from:
      _CloseSteam in steamstub.cpp.debug.macos.x86.o
  "_SteamAPI_UnregisterCallback", referenced from:
      CCallback&lt;CStatsAndAchievements, UserStatsReceived_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, UserStatsStored_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, UserAchievementStored_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardFindResult_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardScoresDownloaded_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardScoreUploaded_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, NumberOfCurrentPlayers_t, false&gt;::Unregister()     in steamstub.cpp.debug.macos.x86.o
  "_SteamAPI_Init", referenced from:
      _OpenSteam in steamstub.cpp.debug.macos.x86.o
  "_SteamUserStats", referenced from:
      _DownloadLeaderboardEntries in steamstub.cpp.debug.macos.x86.o
      _FindNumberOfCurrentPlayers in steamstub.cpp.debug.macos.x86.o
      _UploadLeaderboardScore in steamstub.cpp.debug.macos.x86.o
      _IndicateAchievementProgress in steamstub.cpp.debug.macos.x86.o
      _GetAchievementDisplayAttribute in steamstub.cpp.debug.macos.x86.o
      _GetSteamAchievementIcon in steamstub.cpp.debug.macos.x86.o
      _ClearSteamAchievement in steamstub.cpp.debug.macos.x86.o
      _SetSteamAchievement in steamstub.cpp.debug.macos.x86.o
      _GetSteamAchievement in steamstub.cpp.debug.macos.x86.o
      _SetSteamStat in steamstub.cpp.debug.macos.x86.o
      _GetSteamStat in steamstub.cpp.debug.macos.x86.o
      _StoreSteamStats in steamstub.cpp.debug.macos.x86.o
      _FindLeaderboard in steamstub.cpp.debug.macos.x86.o
      _FindOrCreateLeaderboard in steamstub.cpp.debug.macos.x86.o
      CStatsAndAchievements::OnFindScores(LeaderboardFindResult_t*)        in steamstub.cpp.debug.macos.x86.o
      CStatsAndAchievements::OnFindScores(LeaderboardFindResult_t*)        in steamstub.cpp.debug.macos.x86.o
      CStatsAndAchievements::OnDownload(LeaderboardScoresDownloaded_t*)        in steamstub.cpp.debug.macos.x86.o
      _OpenSteam in steamstub.cpp.debug.macos.x86.o
  "_SteamAPI_RegisterCallback", referenced from:
      CCallback&lt;CStatsAndAchievements, UserStatsReceived_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(UserStatsReceived_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, UserStatsStored_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(UserStatsStored_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, UserAchievementStored_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(UserAchievementStored_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardFindResult_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(LeaderboardFindResult_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardScoresDownloaded_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(LeaderboardScoresDownloaded_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, LeaderboardScoreUploaded_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(LeaderboardScoreUploaded_t*))in steamstub.cpp.debug.macos.x86.o
      CCallback&lt;CStatsAndAchievements, NumberOfCurrentPlayers_t, false&gt;::Register(CStatsAndAchievements*, void (CStatsAndAchievements::*)(NumberOfCurrentPlayers_t*))in steamstub.cpp.debug.macos.x86.o
  "_SteamAPI_RunCallbacks", referenced from:
      _ReadSteam in steamstub.cpp.debug.macos.x86.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
Build Error: Failed to link /Users/c-knight/Desktop/programming stuff/macsteamtest.debug.app/Contents/MacOS/macsteamtest.debug
Process complete
</textarea><br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1123790"></a>

<a name="1123792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, i'm using max 1.43 on snow leopard if that makes any difference.<br><br>EDIT happens on 1.45 too.<br><br>Cheers<br>Charlie<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1123866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am experiencing similar errors with my own Xcode static library. <br><br></td></tr></table><br>
<a name="1124409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried compiling on the new 1.46 on the off chance it might make a difference but no dice unfortunately.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1124482"></a>

<a name="1124484"></a>

<a name="1124485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry about posting that code and then abandoning this thread. I was sure I had the linking under control with my last tests, but I think I am mistaken.<br><br>Brucey has done a version of bmk that I think may allow the easy linking of dylibs with BlitzMax.<br><br>The other option for a Mac steamstub is to build a static glue library (.a) in xCode. I did this for Josh on another project that linked to BlitzMax so know that it is possible.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1128387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, sorry for delay.<br><br><br>To build for Mac the following imports are needed, (subsitute path to steam sdk lib path)<br><br><pre class=code>
Import "-L/Users/simon/steamsdk/lib"
Import "-lsteam_api"
Import "steamstub.cpp"
</pre><br><br>This will allow the demo to build.<br><br>For it to run you need to copy the dylib files from lib to your executable packages MacOS folder (don't forget to do for both debug and release) and voila steamstub should be alive. <br><br></td></tr></table><br>
<a name="1128417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Simon,<br><br>It links! and appears to work correctly for opening and checking the steam state as well as getting and setting achievements. However, I notice that when setting the achievement you don't get a little popup window ala windows steam, and that the steam overlay doesn't appear when you hit shift+tab. I checked another game to see if it appears and it does.<br><br>Also, i'm getting this unlike on windows:<br><pre class=code>
Setting breakpad minidump AppID = 202410
Steam_SetMinidumpSteamID:  Caching Steam ID:  ************** [API loaded no]
</pre><br><br>I've starred out my account number there, but the 'API loaded no' bit, is that me not setting the right path or something? i links and builds, so i'm assuming it's not.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1128418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, it appears that for the overlay to appear it needs to be run from steam itself. I'll try that as soon as i can.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1129631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Success! <a href="http://store.steampowered.com/app/202410/" target="_blank">http://store.steampowered.com/app/202410/</a><br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1130013"></a>

<a name="1130014"></a>

<a name="1130015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Simon thanks for your help on this, and I see Charlie has it working but I still can't get it to work. Here's where I'm up to. I have it working for Windows using the redistributable you included with the steamstub, but I get a memory exception when using the redist from my SDK, v1.18. I'm not to bothered about that as long as I have something that is working. For Mac I get a 'file not found' error and it highlights '#include "include/steam_api.h"' in steamstub.cpp. The output window contains the following errors.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Building steamtest
Compiling:steamstub.cpp
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:6:31: error: include/steam_api.h: No such file or directory
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:10: error: 'SteamLeaderboard_t' does not name a type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:17: error: 'CGameID' does not name a type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: 'OnUserStatsReceived' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: 'UserStatsReceived_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: 'm_CallbackUserStatsReceived' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:21: error: 'OnUserStatsStored' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:21: error: 'UserStatsStored_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:21: error: 'm_CallbackUserStatsStored' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:21: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:21: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:22: error: 'OnAchievementStored' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:22: error: 'UserAchievementStored_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:22: error: 'm_CallbackAchievementStored' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:22: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:22: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:23: error: 'OnFindScores' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:23: error: 'LeaderboardFindResult_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:23: error: 'm_CallbackFindScores' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:23: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:23: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:24: error: 'OnDownload' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:24: error: 'LeaderboardScoresDownloaded_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:24: error: 'm_CallbackDownloaded' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:24: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:24: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:25: error: 'OnUpload' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:25: error: 'LeaderboardScoreUploaded_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:25: error: 'm_CallbackUploaded' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:25: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:25: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:26: error: 'OnCount' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:26: error: 'NumberOfCurrentPlayers_t' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:26: error: 'm_CallbackCount' has not been declared
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:26: error: ISO C++ forbids declaration of 'STEAM_CALLBACK' with no type
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:26: error: 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)' cannot be overloaded
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:20: error: with 'int CStatsAndAchievements::STEAM_CALLBACK(CStatsAndAchievements, int, int, int)'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp: In constructor 'CStatsAndAchievements::CStatsAndAchievements(void*, int)':
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:30: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackUserStatsReceived'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:30: error: 'OnUserStatsReceived' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:31: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackUserStatsStored'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:31: error: 'OnUserStatsStored' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:32: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackAchievementStored'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:32: error: 'OnAchievementStored' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:33: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackFindScores'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:33: error: 'OnFindScores' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:34: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackDownloaded'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:34: error: 'OnDownload' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:35: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackUploaded'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:35: error: 'OnUpload' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:36: error: class 'CStatsAndAchievements' does not have any field named 'm_CallbackCount'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:36: error: 'OnCount' is not a member of 'CStatsAndAchievements'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:37: error: class 'CStatsAndAchievements' does not have any field named 'm_GameID'
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp: At global scope:
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:44: error: variable or field 'OnDownload' declared void
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:44: error: 'LeaderboardScoresDownloaded_t' was not declared in this scope
/Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp:44: error: 'download' was not declared in this scope
Build Error: failed to compile /Users/Dave/Documents/Blitz Projects/steamstub4a/steamstub.cpp
Process complete</textarea><br>Last week I had one of those 'I want to launch my computer out of the window' weeks, but this week I'm feeling more positive so I'm determined to get this up and running.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1130029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> My new found positivity did the trick. After a bit of fiddling I now have it compiling. Steam_api.h isn't in the folder include. I found which folder it was in and renamed the folder. A bit more fiddling and I was compiling. Now I'm off to put achievements into my game. I will report back if I am successful. <br><br></td></tr></table><br>
<a name="1130106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, i probably should have mentioned i had to rename some folders! Oh well, glad you've got it working :)<br><br>If you need any help with setting up achievements let me know, although i imagine you'll have no problems there.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1130146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You've been a great help Charlie, as has Simon. I also found that the path on this line [<i>Import "-L/Users/simon/steamsdk/lib"</i>] can't have any spaces in it. Might save someone a few headaches if they're trying to figure it out in the future. <br><br></td></tr></table><br>
<a name="1130484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just reporting that I have achievements working for Mac and Windows, although I do have separate problem regarding Mac/Steam but nothing to do with the wrapper. Now I'm just waiting for the Steam bods to get everything set up.<br><br>Another note, but not a big issue. There is a function called ResetAllStats in Steamworks, but not in steamstub, which is useful during testing. Like I say, not a biggie as I have it all working and tested. <br><br></td></tr></table><br>
<a name="1141945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone been able to successfully submit leaderboard data with this? <br><br></td></tr></table><br>
<a name="1141948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> not me, but i didn't try with this newer version.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1141949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had trouble with an earlier steamstub and it seems to be an issue still.  It can create leaderboards but doesn't ever submit. Ah well, I'll just stick with achievements. <br><br></td></tr></table><br>
<a name="1142000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> After a quick look at the SDK example, I think I have found where I have gone wrong. Will post a new version for testing this weekend. <br><br></td></tr></table><br>
<a name="1142095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one Skid! <br><br></td></tr></table><br>
<a name="1142655"></a>

<a name="1142656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trying to build the test on Mac with the latest steam sdk but running into problems. I have the imports set up like this:<br><br>Import "-L/Users/simonread/Dropbox/Steam/sdk/public/steam"<br>Import "-lsteam_api"<br>Import "steamstub.cpp"<br><br>In steamstub.cpp I have changed this line:<br><br>#include "/Users/simonread/Dropbox/Steam/sdk/public/steam/steam_api.h"<br><br>But when building I get this:<br><br>ld: library not found for -lsteam_api<br><br>Where should it be looking for this api?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1142724"></a>

<a name="1142725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Simon, the file it is looking for is libsteam_api.dylib, and the location it is looking for is that listed in the Import "-L" line. This is the same file you also need copy to the MacOS dir of your app package once you have things linking ok.<br><br>Sorry for delay in new release, I'm having some mingw issues getting Windows version building correctly, possibly be another few days before I nut things out.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143191"></a>

<a name="1143196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, I've got it building and linking thanks!<br><br>When running it says:<br><pre class=code>Building NSS5
Executing:NSS5
Setting breakpad minidump AppID = 212780
Steam_SetMinidumpSteamID:  Caching Steam ID:  76561197970303243 [API loaded no]</pre><br>And the steam overlay does not appear. Any idea?<br><br>Edit: It seems that achievements are updating so that's great! Is the overlay supposed to work during development?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to be running the game on contentserver for the overlay to appear on mac. You have to be running content server on a windows machine too, and point the mac steam client at it.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1143233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah right. Btw, have you used the new steampipe? <br><br></td></tr></table><br>
<a name="1143309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. Not heard of it actually.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1143322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> They seem to be ditching the old system and everything is uploaded and handled via the Steamworks site now. Great in theory but I can't get the blooming thing to install via my Steam client. <br><br></td></tr></table><br>
<a name="1143339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, that does sound better! Faffing around with local servers isn't super fun. have you got the steam.cfg set up properly? that's usually the cause of connection/install bothers.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="1156950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still having steam issues! I'm sure I had it running fine but since updating the game I can't get it to run after applying Steam's ContentPrep tool. Anyone else had to use it? <br><br></td></tr></table><br>
<a name="1156951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a similar problem. I had to completely uninstall all versions of Xcode, I found a helpfully guide online somewhere, then re-install the very latest Xcode only. Once I'd done that I recompiled the app, and ContentPrep-ed it without the DRM wrapper, to do that I had to run the ContentPrep app from the Terminal.<br><br>Hope that helps. <br><br></td></tr></table><br>
<a name="1156959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> That did the trick! Thanks Dave. :) <br><br></td></tr></table><br>
<a name="1157614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skid, did you manage to fix the Leaderboards? <br><br></td></tr></table><br>
<a name="1255008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got this too:<br><pre class=code>
ld: library not found for -lsteam_api
</pre><br><br>then, i copy libsteam_api.dylib to my app packages dir.<br>but, still same error? <br><br>thanks :) <br><br></td></tr></table><br>
<a name="1255099"></a>

<a name="1255100"></a>

<a name="1255101"></a>

<a name="1255102"></a>

<a name="1255103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Godra, please post some code, specifically your imports. <br><br></td></tr></table><br>
<a name="1255528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arska</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any way to get players SteamID with current functions? <br><br></td></tr></table><br>
<a name="1256828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer: problem solved.. just my mistake.. wrong place to put libsteam_api.dylib file <br><br></td></tr></table><br>
<a name="1256948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> first, sorry if this wrong place to asked about linux.<br><br>i use steamstub.cpp above in linux (ubuntu 14.04).. and got this error<br><br><pre class=code>
Segmentation fault (core dumped)
</pre><br><br>anyone can help me? <br><br>thanks <br><br></td></tr></table><br>
<a name="1256961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Segfaults usually mean you try to access a null-object.<br><br>You might be able to track it down when using a debug-build in your MaxIDE.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1256963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... and a backtrace from gdb (to show if the error occurred in the library or your code). <br><br></td></tr></table><br>
<a name="1256980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arska</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Asking again.. Any way to get steamID with current functions? I have no knowledge about .dll and C++. Also can i test achievements without my own AppID?<br><br>When i tested this i see in steam that i am playing "Spacewar", but Steam overlay always tells me that i have 0 minute game time.<br><br>I am running Windows and hopefully getting my project ready for Greenlight soon. <br><br></td></tr></table><br>
<a name="1256990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arska, the stub is only for people who have been given an AppID and are legally entitled to be using the steam SDK. <br><br></td></tr></table><br>
<a name="1256999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Steam SDK is publicly available to all now, but it's of very little practical use until you're greenlit. You can do little more than just initialize and shutdown the sdk without your own AppID. It's annoying, because naturally, you want to get the code done in advance to avoid problems later, but that's how it is. (That's nothing to do with the wrapper. That's the way the SDK is.)<br><br>And no, you definitely cannot test achievements without your own AppID. Achievements have to be added through the Steamworks control panel and that is not possible until the game has been Greenlit. <br><br></td></tr></table><br>
<a name="1257007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, good to know. Signing up now. <br><br></td></tr></table><br>
<a name="1257044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Derron: my MaxIDE debug window is empty (blank), nothing info in there<br><br>@Brucey: i try to use gdb, here the result:<br><br>for run my program:<br><pre class=code>
(gdb) run
The program being debugged has been started already.
Start it from the beginning? (y or n) y

Starting program: /home/godra25/Documents/LatihanLinux/TestLinux/steamtest.debug 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
steam stub 1.7

Program received signal SIGSEGV, Segmentation fault.
0xb67db824 in ?? ()
   from /home/godra25/.local/share/Steam/linux32/steamclient.so
</pre><br><br>for backtrace my program:<br><pre class=code>
(gdb) backtrace
#0  0xb67db824 in ?? ()
   from /home/godra25/.local/share/Steam/linux32/steamclient.so
#1  0xb69bae86 in ?? ()
   from /home/godra25/.local/share/Steam/linux32/steamclient.so
#2  0xb685d47b in ?? ()
   from /home/godra25/.local/share/Steam/linux32/steamclient.so
#3  0xb6860a11 in ?? ()
   from /home/godra25/.local/share/Steam/linux32/steamclient.so
#4  0xb7d75587 in ?? () from /usr/lib/libsteam_api.so
#5  0x08051843 in ?? ()
#6  0x0810d11b in ?? ()
#7  0x0810d095 in ?? ()
#8  0x0810b4ce in ?? ()
#9  0x08050ba1 in ?? ()
#10 0xb7a6ea83 in __libc_start_main (main=0x8050b5d, argc=1, argv=0xbffff024, 
    init=0x810b3b0, fini=0x810b420, rtld_fini=0xb7fed180 &lt;_dl_fini&gt;, 
    stack_end=0xbffff01c) at libc-start.c:287
#11 0x08050a81 in ?? ()
</pre><br><br><br>so, the problem is 'libsteam_api.so' right?<br>anyone know the solution? <br><br></td></tr></table><br>
<a name="1257048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> that explains why maxide does not display debug info ... it segfaults in the external lib (the .so file).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1257049"></a>

<a name="1257092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> so, the problem is 'libsteam_api.so' right? <br></div><br>Well, the problem could be that you are passing bad data to the library, or there is a bug in the wrapper...<br><br>Very hard to tell from here what may be going wrong. <br><br></td></tr></table><br>
<a name="1257073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, i think the problem is in SteamAPI_Init()<br>but, i don't know how to fix it.. because, i'm not that good in C :(<br><br>i hope anyone can help me <br><br></td></tr></table><br>
<a name="1257100"></a>

<a name="1257101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Godra25, are you on linux32 or 64?<br><br>Are you using latest steam sdk?<br><br>Which .so are you using, where are you putting it and what does the relevant .bmx source look like that you are using to test?<br><br>I assume you have Steam installed and other steam games are running fine on your rig? <br><br></td></tr></table><br>
<a name="1257102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Godra25, are you on linux32 or 64?<br><br>Are you using latest steam sdk?<br><br>Which .so are you using, where are you putting it and what does the relevant .bmx source look like that you are using to test?<br><br>I assume you have Steam installed and other steam games are running fine on your rig? <br><br></td></tr></table><br>
<a name="1257178"></a>

<a name="1257180"></a>

<a name="1257184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer:<br><br>i on linux 32-bit<br><br>yes, i get libsteam_api.so from here /sdk/redistributable_bin/linux32/<br>then i put ini /sdk/public/steam/<br><br>i also make soft link for that .so to /usr/lib/<br><br>i used .bmx (and also .cpp) from your post <a href="/post.php?topic=96950&amp;post=1123715" target="_blank">here</a><br><br>hmmm.. i never test other steam games.. ok, i will do it first. and report the result here soon<br><br>EDIT:<br>i've tested other steam game.. it is fine.. work perfectly <br><br></td></tr></table><br>
<a name="1257204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,<br><br>OK, will be back on Linux this week, will let you know how I get on. <br><br></td></tr></table><br>
<a name="1257232"></a>

<a name="1257234"></a>

<a name="1257235"></a>

<a name="1257236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer: thanks, you are so nice :)<br><br><br>and for additional information, maybe this is helping.<br><br>now for windows i use steam_api.dll version 7.9.87.40 (from <a href="https://code.google.com/p/max-edit/downloads/list" target="_blank">steamstub4a</a>) . my game work good.<br><br>then i try to use steam_api.dll version 2.37.91.26 (from the latest SDK, <a href="https://partner.steamgames.com/downloads/steamworks_sdk_131.zip" target="_blank">Steamworks SDK v1.31</a>). my game not work. <br><br></td></tr></table><br>
<a name="1260837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello skidracer, how about the linux version, have you check it ? :) <br><br></td></tr></table><br>
<a name="1260845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was able to reproduce the problem but was unable to fix it.<br><br>I'm currently busy on a monkey project but when I get some time I will have another look. <br><br></td></tr></table><br>
<a name="1263345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Godra25</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer: ok, thank you for check it.. hope you can finish your monkey project soon :D <br><br></td></tr></table><br>
<a name="1271807"></a>

<a name="1271808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wanted to add that I got it working on Mac today, thanks Skid!<br><br>I had to comment out this line from the .cpp file:<br><pre class=code>n=_snprintf( buffer, 128, "%d:%d:%d:",entry.m_nScore,entry.m_nGlobalRank,entry.m_steamIDUser);</pre><br><br>The compiler is expecting and int but isn't getting one, so probably m_steamIDUser is struct or something? It's in the leaderboard section which I'm not using but it's probably worth getting fixed (if the rest of leaderboards works too) <br><br></td></tr></table><br>
<a name="1306611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Devlin</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got this working on linux(i know this is the Mac thread yada but whatevs) by doing the following:<br><br>Copied the headers in the Steamworks SDK (/sdk/public/steam) to a folder called "include"<br><br>Copying libsteam_api.so to /usr/lib (a symlink might work?) once you're done building you should make sure libsteam_api.so is actually in your game folder because Steam will look there to find libsteam_api.so when launching from Steam (this has been confirmed by testing)<br><br>Adding the following Imports to the test code up above in <a href="http://www.blitzbasic.com/Community/post.php?topic=96950&amp;post=1123715" target="_blank">http://www.blitzbasic.com/Community/post.php?topic=96950&amp;post=1123715</a> that post<br><br><pre class=code>
?Linux
Import "-lsteam_api"
Import "steamstub.cpp"
?
</pre><br><br>This is a lazy ass hack job of a way of doing it but it worked in my Linux Mint installation so hopefully folks can extrapolate and make it work a bit more globally. I don't think I can offer any additional help but I imagine that skid can. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
