<!DOCTYPE html><html lang="en" ><head ><title >static/dynamic libraries</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >static/dynamic libraries</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >static/dynamic libraries</a><br><br>
<a name="467347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to import static/dynamic libraries, (when all you get are headers with it)?<br><br>Ie:<br><br>Import "MYLIB.a" (or .lib) (or .dll!)<br>or<br>Import "-l MYLIB" (if its in the lib folder)<br><br>While I'm asking, Mark, any chance that you will someday work on an inteligent linker that only links modules that are used? <br><br></td></tr></table><br>
<a name="467351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drago</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was just about to ask a question about the lib folder if it was posible to add our own libs.<br><br>btw if anyone wants to kbow .libs made with MSVS are the same format as .a files for GCC. <br><br></td></tr></table><br>
<a name="467374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> btw if anyone wants to kbow .libs made with MSVS are the same format as .a files for GCC. <br></div><br><br>If only that were true.<br><br>As for only linking modules that were used this is currently possible albeit manually using the Framework command, see the firepaint sample for an example. <br><br></td></tr></table><br>
<a name="467375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TommyBear</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I would like to know too actually. <br><br></td></tr></table><br>
<a name="467378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, what is the basis of getting a module into place, I have source code of a library -- I figure basically I just need to get everything the main header file is doing into a module.bmx? :)<br><br><a href="http://enet.cubik.org/" target="_blank">http://enet.cubik.org/</a><br>(Quick and dirty UDP Connection'ed with optional reliable/in order packets) <br><br></td></tr></table><br>
<a name="467382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> btw if anyone wants to kbow .libs made with MSVS are the same format as .a files for GCC. <br></div>I am not 100% sure, but AFAIK, only C VC++ .lib files are compatible with GCC linker. VC++ does some dirty things to C++ .lib files, and they do not work with GCC. At least thats what was said in the times of Visual Studio 6. There have been many changes in VC++7 and 8, maybe now they are compatible, but let me doubt it. <br><br></td></tr></table><br>
<a name="467390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. create a myname.mod/mymod.mod folder in your blitzmax/mod folder<br><br>2. copy your c source and headers into that folder retaining their folder structure<br><br>3. create a mymod.bmx file in the mymod.mod folder and add the following:<br><pre class=code>
Module myname.mymod

Strict

Import "mycfile1.c"
Import "mycfile2.c"
</pre><br>4. Makemods and make sure GCC can build the C files OK, the path to myname.mod/mymod.mod is added to the include path so any #include &lt;file.h&gt;'s can be found, if you get this far, cool, thats the traditional makefile script side of things done.<br><br>5. Add an Extern block to your mymod.bmx, and place any functions you want to call from BlitzMax here, start with one, and if the functions are defined in C++ make sure they are declared in an Extern "C" {} block in the header file.<br><br>If you get stuck you may want to study the modules in pub to see how we do things. <br><br></td></tr></table><br>
<a name="467394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks! I just about went this far!<br><br>Getting to work.. <br><br></td></tr></table><br>
<a name="467507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I figured I better not post a new thread, so I'll ask more here. (Sorry!)<br>I can't figure out a good way to implement C structures that need to be used in order to return/push some functions.<br><br>Now I guess I could do it with a bank like we used to, but I think we're beyond that stage. :)<br><br>These are important C structures that must be created in order to create a host etc.<br><br><a href="http://enet.cubik.org/Tutorial.html" target="_blank">http://enet.cubik.org/Tutorial.html</a><br><br>Examples there. (Look at the Creating an ENet Server or Client)<br>For instance the ENetAddress structure, I ended up having to write a blitz type for it, but for ENetHost, it's not as easy, it's full of other object types and such within it.<br><br>Any chance of something like this:<br>Import "enet/enet.h"<br>Extern<br>type ENetAddress<br>type ENetHost<br>end extern<br><br>And so forth? Any ideas? That would be a ton of work in my oppinion, and I understand if it won't be included at this time (please consider it!). But could it be possible? I see that as the only way to really get alot of C libraries to work.. :)<br><br>Oh, and sorry if this has been discussed before -- which I hope it has. ;) <br><br></td></tr></table><br>
<a name="467509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >{cYan|de}</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i agree:P <br><br></td></tr></table><br>
<a name="467510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drago</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, being able to use Structures from C would be good. <br><br></td></tr></table><br>
<a name="467532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It does look like a nice idea to me. <br><br></td></tr></table><br>
<a name="467533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, after Zenith continually pestering me to reply and state my opinion on this subject, and after reading the entire thread, I do think this is actually a good idea.  Being able to import C/C++ classes and structures is crucial to having a sort of plug-and-play development environment.<br><br>Seeing as how BlitzMax is still in the works, I'll give Blitz Research their time to work on it, but I would like to see this in at some point in time. <br><br></td></tr></table><br>
<a name="467534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> It wasn't THAT constant. &lt;_&lt; &gt;_&gt;<br><br>And uhh, an enum of sorts (or a constant array, lol!) would be cool ;) <br><br></td></tr></table><br>
<a name="467551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TommyBear</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer<br><br>That only works if you actually have the files.  Zenith's original question was more interesting.  Can BMX import libraries to link against?<br><br><div class="quote"> <br> yeah, being able to use Structures from C would be good. <br> <br></div><br><br>In some cases you'll need to write a support c file which implements functions that use these structures and extern them to BMX.  I did this for the zip/unzip functionality tweaks to the ZLib library. <br><br></td></tr></table><br>
<a name="467781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't think of that, nice!<br><br>Notice there is a lib folder, which is exactly like GCC/MINGW's. If you look into the opengl bmx code, you'll see that they use:<pre class=code>Import "-lopengl32" </pre>Also notice there inside the lib folder, it's named "libopengl32.a"<br>If I can remember correctly this is exactly how I used to do it in GCC. So when I was working on the enet code, it needs the 32-bit version of the winsock2 lib. I did infact add the lib, Blitzmax doesn't have it in its lib folder.(which was libws2_32.a) -- which I got from MinGW's lib folder. (But if you think about it, I probally wouldn't need to copy this to Blitzmax's lib folder, considering MinGW probally uses it's lib folder also.)<br><br>So yeah, it does include it. :)<br>But I guess it's just adding it to the command line, like other import's<br><br><pre class=code>Import "-l ws2_32"</pre> Is how I put it<br><br>So yes it is possible to include libs, -- but it used them in the C code, and I didn't try anything from within blitz. :) <br><br></td></tr></table><br>
<a name="467818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would be sensible if structs could be imported, Id like to see this happen :) <br><br>Also an automated module check, so we dont have to hassle with which modules are used. <br><br></td></tr></table><br>
<a name="467865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ya know, all I really need is to be able to take a header file, send it through gcc, and get it to spit out parsed structures and such that it found. Haha, then I could write a converter that converts them to types. I wonder if GCC has an arg for it.. Looking anyway. :) <br><br></td></tr></table><br>
<a name="468122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TommyBear</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So yeah, it does include it. :)<br>But I guess it's just adding it to the command line, like other import's <br> <br></div><br><br>nice! <br><br></td></tr></table><br>
<a name="468167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drago</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> you also might want to look at the reimp command that comes with minGW, it lets you ,sometimes, make VS .libs to compatable .a files. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
