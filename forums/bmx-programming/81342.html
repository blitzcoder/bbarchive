<!DOCTYPE html><html lang="en" ><head ><title >MaxMod2 beta</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MaxMod2 beta</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >MaxMod2 beta</a><br><br>
<a name="916386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The beta download of MaxMod2 is now up on the google code page!<br><br>Audio output is currently handled by RtAudio, I've decided to drop the seperate audio drivers in favour of a single cross platform library,  it uses DirectSound on Windows, ALSA on Linux and CoreAudio on Mac.<br><br>I've not been able to test the Mac side of things at all, so dont be suprised if somethings dont work ;)<br><br>Currently the following formats/libs are included (as seperate modules)...<br><br>Ogg (seekable)<br>Mod/Xm (seekable)<br>Mp3 (not seekable) *EDIT* Is now!<br>GME (track seekable)<br><br>Check the 'examples' folder for some test code.<br><br>SetChannelRate/Depth and Pan functions are not supported at this time, I may add them later if the RtAudio streams preform well on each platform.<br><br>*Crosses fingers* ;) <br><br></td></tr></table><br>
<a name="916393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting... Is it at all possible to use OpenAL on Windows, or is it completely bound to DirectSound?<br><br>(Doesn't Vista have a delay using DirectSound on some computers?) <br><br></td></tr></table><br>
<a name="916400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got an OpenAL stream module pretty much done, but I'm hoping it wont be needed, isn't it WMM that has the delay problems?<br><br>I'd prefer that the thing "just works" on all platforms rather than having to have lots of different stream modules, but  hey whatever's needed. <br><br></td></tr></table><br>
<a name="916405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome module, thanks REDi...<br><br>I’ve been testing the examples using numerous music files and have noticed the following:<br><br>Test system: Windows XP, Onboard sound (SoundMax HD audio drivers)<br><br>All examples compile okay under BlitzMax 1.30. However, <br><br>LoadMusic.bmx<br><br>seems to play Ogg files much faster than it should (though the other examples play the same ogg files normally). And other formats play normally.<br><br>Also, I have encountered problems when compiling under the latest BlitzMax SVN version (non-threaded).<br><br>BlitzMax SVN (6-Nov-08) <b>DEBUG</b> compile only, (NON-DEBUG runs without error)<br><br>GME_Test.bmx<br><pre class=code>
Building GME_Test
Compiling:GME_Test.bmx
flat assembler  version 1.67.26  (969915 kilobytes memory)
3 passes, 7441 bytes.
Linking:GME_Test.debug.exe
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0x32a): undefined reference to `gme_identify_file'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0x3fb): undefined reference to `gme_track_info'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0xbc): undefined reference to `gme_delete'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0xd4): undefined reference to `gme_delete'
Build Error: Failed to link C:/temp/maxmod2_beta1/maxmod2.mod/examples/GME_Test.debug.exe
Process complete
</pre><br><br>BlitzMax SVN (6-Nov-08) <b>DEBUG</b> compile only, (NON-DEBUG runs without error)<br><br>MiniPlayer.bmx<br><br><pre class=code>
Building MiniPlayer
Compiling:MiniPlayer.bmx
flat assembler  version 1.67.26  (970305 kilobytes memory)
4 passes, 21022 bytes.
Linking:MiniPlayer.debug.exe
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0x32a): undefined reference to `gme_identify_file'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0x3fb): undefined reference to `gme_track_info'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0xbc): undefined reference to `gme_delete'
C:/blitzmax/mod/maxmod2.mod/gme.mod/gme.debug.win32.x86.a(gme.cpp.debug.win32.x86.o):gme.cpp:(.text+0xd4): undefined reference to `gme_delete'
Build Error: Failed to link C:/temp/maxmod2_beta1/maxmod2.mod/examples/MiniPlayer.debug.exe
Process complete
</pre><br><br><br>Intel MacBook Pro OSX results to follow… <br><br></td></tr></table><br>
<a name="916406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @impixi: Be sure to disable quickbuild when you have updated max. This is reporting a link-time bug wich usually means a problem with .o files created with a different max compiler or mods version. <br><br></td></tr></table><br>
<a name="916407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> And don't forget, if you use the GME module, you'll need to release your app/game as GPL (i.e. open-sourced) :-) <br><br></td></tr></table><br>
<a name="916410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi impixi<br><br><div class="quote"> seems to play Ogg files much faster than it should <br></div><br>It doesnt seem to even load oggs for me with the LoadMusic test :/ I'll have a look into that tonight. Thanks. <br><br></td></tr></table><br>
<a name="916414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Intel Macbook Pro, OS 10.5.5 results:<br><br>BlitzMax 1.30<br><br>The LoadMusic.bmx and Stream2Mem.bmx examples compile and load music files (LoadMusic playback suffers from the same speed issues for Ogg files)<br><br>The other examples fail with errors like:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Building Custom
Compiling:Custom.bmx
Linking:Custom.debug
Undefined symbols:
  "_AudioDeviceStop", referenced from:
      RtApiCore::stopStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::stopStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::closeStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::closeStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceAddIOProc", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceStart", referenced from:
      RtApiCore::startStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::startStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioHardwareSetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioHardwareGetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDefaultOutputDevice()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDefaultOutputDevice()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDefaultInputDevice()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDefaultInputDevice()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceGetPropertyInfo", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceRemoveIOProc", referenced from:
      RtApiCore::closeStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::closeStream()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceAddPropertyListener", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioStreamSetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioStreamGetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceSetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioDeviceGetProperty", referenced from:
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::probeDeviceOpen(unsigned int, RtApi::StreamMode, unsigned int, unsigned int, unsigned int, unsigned long, unsigned int*, RtAudio::StreamOptions*)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
      RtApiCore::getDeviceInfo(unsigned int)in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
  "_AudioHardwareGetPropertyInfo", referenced from:
      RtApiCore::getDeviceCount()      in rtaudiostream.debug.macos.x86.a(RtAudio.cpp.debug.macos.x86.o)
ld: symbol(s) not found
collect2: ld returned 1 exit status
Build Error: Failed to link /Applications/BlitzMax/mod/maxmod2.mod/examples/Custom.debug.app/Contents/MacOS/Custom.debug
Process complete
</textarea><br><br>@ziggy:<br><div class="quote"> <br>Be sure to disable quickbuild when you have updated max. This is reporting a link-time bug wich usually means a problem with .o files created with a different max compiler or mods version. <br></div><br><br>Yep, I'll check this when I get back on my PC shortly...<br><br>EDIT: No, my quickbuild was definitely disabled (it usually is). I also tried recompiling all the modules without the -h option and still get the same errors as stated above. <br><br></td></tr></table><br>
<a name="916416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm interesting, I have the following imports for rtaudio on mac...<br><pre class=code>
?Mac
Import "-framework CoreAudio"
Import "-framework AudioToolbox"
?
</pre><br>Anybody know if there is anything else I need to link with for CoreAudio?<br><br>*EDIT*<br>Gotta go out now, I'll have a play with it latter tonight, but in the mean time if any mac bods fancy's having a go at fixing it, feel free ;)<br><br>Thanks again impixi! <br><br></td></tr></table><br>
<a name="916421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi REDi<br><br>It looks very interesting. As you know I'm interested in the realtime sample manipulation potential of it.<br><br>The test below errors out in debugmode with : "Debugger Error:scope stack underflow"<br><br>I seem to have narrowed it down to "ChannelPlaying(Chn)". Rem that out in the main loop, and the error goes away.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Import MaxMod2.RtAudioStream

Local Chn:TChannel = CreateAudioCallbackStream(New TAudio)


Global volume:Float = 1.0


Graphics 500,400

ChannelPlaying(Chn)

While Not KeyHit(KEY_ESCAPE)

	volume = MouseY() /400.0

	Delay 10
ChannelPlaying(Chn)
Wend

Type TAudio Extends TCustomMusic

	Field p!, p1!

	Method New()
		SampleRate = 11025							' set required samplerate
		Channels   = 1								' set the number of channels
		Bits       = 16							' set bits per channel
	EndMethod

	Method FillBuffer:Int(output:Byte Ptr,size:Int)

		Local AudioPtr:Short Ptr = Short Ptr(output)		' get out pointer to the output
		Local n:Int,av!	
										' make some local variables

		For n=0 Until size/2						' loop to process the output buffer
			AudioPtr[n] = Rand(0,65000)*volume			' apply audio value to output
		Next
		
		
		Return n*2								' return number a bytes written to output.
												' a return value less than 'size' 
												' causes the stream to stop
	EndMethod

EndType
</textarea> <br><br></td></tr></table><br>
<a name="916424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would guess it's probably a threading issue, with ChannelPlaying() and FillBuffer() being in use at the same time.<br>The standard GC doesn't play well in those circumstances. <br><br></td></tr></table><br>
<a name="916442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like the MP3 part is GPL code as well, so using that would require you to GPL whatever you use it in.<br><br>Streaming OGGs is good enough for my requirements though, so I'll give the ogg part a good thrash around.<br><br>Cheers for this REDi.  :) <br><br></td></tr></table><br>
<a name="916597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Peter Scheutz, I should have deleted that example until the official release of the threaded version of BlitzMax really, but if you'd like to have a go with it you could download the SVN version, works well here.<br><br>@Muttley, Hopefully I'll eventually release versions that dynamically link to the library's so you wont need to go GPL, but for now this is a quick and easy way of getting it all tested and working (plus I already have a commercial license for libmad so for me this is the way I'll use it).  I'm pretty much a noob at all this C++ stuff, and getting them all built for each platform will be a bit of a mission for me, but thats the plan (offers out to anyone who fancies a job ;) )<br><br>@Brucey/other Mac legends, any idea why its not linking to CoreAudio? any help greatly appreciated, I'm at a complete loss on this one atm.<br><br>@Linux guys, anyone able to test on non ubuntu distros?<br><br>Again, Thanks for all your help/testing everyone. <br><br></td></tr></table><br>
<a name="916607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="916650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I've put up beta 2,  Hopefully fixes most of the above problems. <br><br></td></tr></table><br>
<a name="916651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mac version is now working fine :-) <br><br></td></tr></table><br>
<a name="916652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> YAY! Thanks Brucey <br><br></td></tr></table><br>
<a name="916657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent work ! <br><br>My vote is for "SetChannelRate" so i can replace my current MaxMod setup :) <br><br></td></tr></table><br>
<a name="916664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately  RtAudio doesn't handle things like volume, pan and frequency it just pumps stuff to the soundcard, so I'll have to write a resampler for it, should be easy enough though, and the modplayer manages it for each sample playing so the performance hit should be pretty small compared to that.<br><br>Saying that, I'm thinking there might be problems on Mac/Linux when it comes to playing more than one stream at a time, so I may end up having to write a mixer for it and have multiple streams through one output.<br><br>excuse the rambling :) <br><br></td></tr></table><br>
<a name="916726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think any music/sound system used for games really needs the ability to:<br><br>a) Analyze/access to the audio output stream per-channel so you can display things based on the current sound<br><br>b) Get beat timing/position information, perhaps triggering a call-back or something, for mod files, so that you can synchronize graphics with sound <br><br></td></tr></table><br>
<a name="916730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I think any music/sound system used for games really needs the ability to:<br><br>a) Analyze/access to the audio output stream per-channel so you can display things based on the current sound<br><br>b) Get beat timing/position information, perhaps triggering a call-back or something, for mod files, so that you can synchronize graphics with sound <br> <br></div><br>Surely thats either a gross over-generalisation or only true if those are required features/functions of the game. <br><br></td></tr></table><br>
<a name="916801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well of course but it'd sure be useful. <br><br></td></tr></table><br>
<a name="916809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman, its all on my to do list mate, as well as being able to chain audio through VST's and more, but it all takes time and I don't have a lot of that, but first things first the beta is mainly about making sure the output is stable and formats are working across all platforms, and cleaning up my usually shabby coding ;) <br><br></td></tr></table><br>
<a name="917119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks quite useful.<br><br>Can your mod stream internet radio stations and get the meta data / tag id that is send with (such as name and current title playing) it? <br><br></td></tr></table><br>
<a name="917179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using beta 2 download (svn seems gone for now?), but I get different crashes when trying to write to the stream. "scope stack underflow" and some "GC write to zero mem" or something (can't reproduce right now)... <br><br></td></tr></table><br>
<a name="917180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> scoep stack underflow and some "GC write to zero mem"  <br></div><br>Usually means two threads are calling BlitzMax code at the same time (using the standard GC), which isn't good. <br><br></td></tr></table><br>
<a name="917256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Grisu, Streaming internet radio shouldn't be to hard, I'll see if I can knock something up for you when I've got some time.<br>*EDIT* Second thoughts, this may take some time, can anyone recommend a good open source cross platform tcp library?<br><br>@Peter Scheutz<br><div class="quote"> svn seems gone for now? <br></div><br>Sorry mate I didnt mean MaxMod2 SVN, but BlitzMax1.30 SVN.<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=74439" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=74439</a> <br><br></td></tr></table><br>
<a name="917273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sorry mate I didnt mean MaxMod2 SVN, but BlitzMax1.30 SVN. <br></div><br>I am already on the lastest BlitzMax1.30 svn version. so I don't think that's the problem. <br><br></td></tr></table><br>
<a name="917296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh I see, do you have threading enabled in the IDE?<br><br>*EDIT* ooo, I've just had the same problem but it took a long time to happen, I'll look into it. <br><br></td></tr></table><br>
<a name="917313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Oh I see, do you have threading enabled in the IDE? <br></div><br>If he did, he wouldn't have the problem :-) <br><br></td></tr></table><br>
<a name="917317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's what I thought, but I've just had it bomb out on me and I had it set to threaded, something dodgy going on somewhere. (I had no problem until I added a graphics screen) <br><br></td></tr></table><br>
<a name="917322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems the RtAudio library is using _beginthreadex instead of CreateThread, maybe the new GC isnt picking up on it, every now and then it throws a "collecting from unknown thread" error.<br><br>I'll look into it more later, gotta go to work now :( <br><br></td></tr></table><br>
<a name="917796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Beta test 3 is up on the google code page!<br><br>This revision adds MP3 seeking and hopefully fixes the GC problem with threaded callback streams, I haven't had a chance to check it on linux (and of course Mac because I dont have one), but it should be ok.<br><br>All feedback/bug reports appreciated, thanks.<br><br>*EDIT*<br><br>Quick poll, I'm not sure if I'm happy about the way callback streams work ATM, do you think it'd be better (and more standard) to just supply the CreateAudioCallbackStream function with a function pointer,  object pointer and sample rate etc? ie like you do with threads. <br><br></td></tr></table><br>
<a name="917931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm afraid it still crashes for me in debugmode, this example just by moving the mouse:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Import MaxMod2.RtAudioStream

Local Chn:TChannel = CreateAudioCallbackStream(New TAudio)

Global volume:Float = 1.0

Graphics 500,400

ChannelPlaying(Chn)

While Not KeyHit(KEY_ESCAPE)

	'volume = MouseY() /400.0

	Delay 10
	ChannelPlaying(Chn)
Wend

Type TAudio Extends TCustomMusic

	Field p!, p1!

	Method New()
		SampleRate = 11025*4						
		Channels   = 1								
		Bits       = 16							
	EndMethod

	Method FillBuffer:Int(output:Byte Ptr,size:Int)

		Local AudioPtr:Short Ptr = Short Ptr(output)		' get out pointer to the output
	
			
		For Local n:Int=0 Until size/2		
			AudioPtr[n] = Rand(0,65000)*1 'volume			
		Next
		
		' DebugLog size 'makes it worse
		Return size								
	EndMethod

EndType</textarea> <br><br></td></tr></table><br>
<a name="917934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, works fine here with your example.<br><br>Have you rebuilt the modules (bmk makemods -h) from the command line and checked "Threaded Build" in the build options of the svn IDE?<br><br>Apologies if you have, I'm just trying to cover all possibilities.<br><br>I've had your example running for about 10mins in debug mode, no problems so far.<br><br>*EDIT* BTW what OS/Platform are you on? (still going @20 mins) <br><br></td></tr></table><br>
<a name="917985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Beta 3) I'm noticing 'recoverable frame level errors' when playing back MP3s using the examples LoadMusic.bmx and MiniPlayer.bmx. Example:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Linking:MiniPlayer.debug.exe
Executing:MiniPlayer.debug.exe
MaxMod2: OGG Loader...
MaxMod2: ~OggPlayer
MaxMod2: MOD Loader...
MaxMod2: Tracker= ID3
MaxMod2: ID= hc:ì
MaxMod2: ~ModPlayer
MaxMod2: XM Loader...
MaxMod2: GME Loader...
MaxMod2: GME - Unsupported music type
MaxMod2: MP3 Loader...
MaxMod2: Calculating MP3 length ... 
MaxMod2: end of stream detected
MaxMod2: pcm length=57176002
MaxMod2: MP3 Accepted!
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  reserved header layer value
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  reserved sample frequency value
MaxMod2: recoverable frame level error  reserved header layer value
MaxMod2: recoverable frame level error  reserved sample frequency value
MaxMod2: recoverable frame level error  reserved sample frequency value
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  reserved header layer value
MaxMod2: recoverable frame level error  lost synchronization
MaxMod2: recoverable frame level error  reserved sample frequency value
MaxMod2: RtAudioStream create
MaxMod2: Audio drivers available=4
seekable
DebugLog:27917
</textarea><br><br>Windows XP, BlitzMax SVN (13-Nov-08), threaded build.<br><br>Other formats playback fine.<br><br>Will try on OSX soon...<br><br>EDIT:<br><br>(Beta 3) Things are not so good in OS X. This is the first time I've used BlitzMax SVN threaded version (updated 13-Nov-08) on OSX for a while so it may be something at my end, but my own programs seem to compile and run okay.<br><br>StreamToMem.bmx compiles and runs without errors.<br><br>The other examples do not compile. <br><br>Custom.bmx, ModSeeking.bmx, GME_Test.bmx:<br>Identifier 'Graphics' not found.<br><br>MiniPlayer.bmx:<br>Unhandled Exception:Attempt to access field or method of Null object <br>line:<br> Local App:TApp = New Tapp<br><br>LoadMusic.bmx:<br>Identifier 'PollEvent' not found.<br><br>I've run out of time for today else I'd investigate further... <br><br></td></tr></table><br>
<a name="918032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Have you rebuilt the modules (bmk makemods -h) from the command line and checked "Threaded Build" in the build options of the svn IDE? <br></div><br><br>I did not have "Threaded Build" enabled, because I did not know that I had to! :-)<br><br>With "Threaded Build" enabled it seems to work great.<br><br>Is it all of Maxmod2 that requires "Threaded Build" or only when writing to the stream myself ?<br><br>In anycase this means that if I want to use maxmod2 for my realtime sound, I'll have to use the new garbage system right? <br><br></td></tr></table><br>
<a name="918093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> @impixi<br><br>Are you getting that amount of recoverable frame level errors with every MP3?  Its normal to get one or two as the stream seeks back to the beginning and recovers after calculating the pcm length, but that amount of errors seems odd especially as it didn't pick up any on the first pass.<br>Does it miss any audio from the first few frames?<br><br>As for the problems on OSX, I dont know what to suggest really, they don't seem to be related to the MaxMod2 modules and the demos don't use framework so all BRL functions should be available. :/<br><br>@Peter, My apologies for not making it more clear that threaded build is required,  the next release will throw an error if threading isn't enabled.<br><br><div class="quote"> Is it all of Maxmod2 that requires "Threaded Build" or only when writing to the stream myself ? <br></div><br>Threaded build is only needed if your using the callback streams.<br><br><div class="quote"> In anycase this means that if I want to use maxmod2 for my realtime sound, I'll have to use the new garbage system right? <br></div><br>I'm afraid so, but I think its safe to say that if you want low latency real time sound, you'll need threading enabled with any sound lib (FMOD etc).<br>It is possible to do event driven sound streams (no threads), but the latency will go through the roof. (the first version of maxmod does it this way if you'd like to look into that approach) <br><br></td></tr></table><br>
<a name="918217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DannyD</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> I moved the mod to the mod folder. Then did a rebuild all modules and get this:<br>......<br>Compiling:file.cpp<br>Compiling:threads.cpp<br>/Applications/BlitzMax/mod/maxmod2.mod/music.mod/code/threads.cpp:1:70: error: brl.mod/blitz.mod/bdwgc/libatomic_ops-1.2/src/atomic_ops.h: No such file or directory<br>Build Error: failed to compile /Applications/BlitzMax/mod/maxmod2.mod/music.mod/code/threads.cpp<br>Process complete<br><br>Any ideas? Mac  Os X 10.5.5 <br><br></td></tr></table><br>
<a name="918219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any ideas? <br></div><br>You need the "threaded" BlitzMax, which is available via the SVN repository. <br><br></td></tr></table><br>
<a name="918222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, I suppose I should put an #ifndef around them imports, thanks for the heads up DannyD!<br>*EDIT* I spoke to soon :) looks like it will have to remain SVN only for now. <br><br></td></tr></table><br>
<a name="918227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DannyD</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry If I'm going off topic here.<br>I did a svn checkout --username dannyd http://blitzbasic.com:81/svn/blitzmax/dev/macos_x86/ which worked fine.<br><br>It leaves me with a macos_x86 folder with a bin and lib subfolder. So I overwrote my old bcc file and recompiled, same error. <br><br></td></tr></table><br>
<a name="918229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll need to SVN the whole lot mate...<br><br>svn checkout --username dannyd http://blitzbasic.com:81/svn/blitzmax/dev/<br><br>And make a working copy of blitzmax in the "main" directory.<br>You'll also need to build the IDE from the "src" folder. <br><br></td></tr></table><br>
<a name="918230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll also need the modules from SVN... the bit you have is just binaries. <br><br></td></tr></table><br>
<a name="918233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Are you getting that amount of recoverable frame level errors with every MP3?  <br></div><br>I downloaded a couple of random albums from <a href="http://www.jamendo.com" target="_blank">Jamendo.com</a> and all the songs in both albums throw that many errors. Yet I tried a single mp3 from a different source and only saw one error. In any case, they sound fine. Possibly not worth worrying about…<br><br>OSX:<br>I can’t figure out what’s going on. I’ve tried a couple of simple threaded programs and they compile and run okay. Only MaxMod2 seems to be causing problems at the moment.<br><br>@Brucey:<br>Have you tried Beta 3 on OSX yet? If so, do the examples run? What version of XCode are you compiling with? <br><br></td></tr></table><br>
<a name="918236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tried some of the MP3's from that site and get the same errors, probably just to do with the encoding, I don't think its much of a problem, libmad seems to play them okay.<br><br>eventually I'll remove them 'recoverable' error messages, but for now they may be useful at some point. <br><br></td></tr></table><br>
<a name="918239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Brucey:<br>Have you tried Beta 3 on OSX yet? If so, do the examples run? What version of XCode are you compiling with?  <br></div><br>Interesting. The Jamendo tracks do indeed seem to have issues with those recoverable frames. My other tracks might have one of those messages at most. Also, one Jamendo track started playing at half-speed !!<br><br>On the latest OSX and XCode here (That's the XCode with iPhone compilation support)<br><br>Also, not running the "threaded" code, just the LoadMusic example. <br><br></td></tr></table><br>
<a name="918242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, did they run with beta 2? <br><br></td></tr></table><br>
<a name="918243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.jamendo.com/en/album/19927" target="_blank">Track one</a> plays at half speed :-p <br><br></td></tr></table><br>
<a name="918244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Brucey, did they run with beta 2? <br></div><br>They play fine... (apart from the one mentioned), just lots of "errors/warnings". <br><br></td></tr></table><br>
<a name="918245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, libmad is responsible for detecting sample rate etc, not much I can do about that... but I'll have a play ;) <br><br></td></tr></table><br>
<a name="918247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, Do you get the same error messages as impixi? ie with Graphics etc <br><br></td></tr></table><br>
<a name="918250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do you get the same error messages as impixi <br></div><br>Nope. But I'm guessing, since they don't use Framework, there's a module of his which needs rebuilding. (since it includes all BRL/Pub mods otherwise, so who knows what he's got in there ;-) <br><br></td></tr></table><br>
<a name="918256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey, do you get any debug verbose about why streaming isn't working?<br><br>Sorry to be a pain mate ;)<br><br>@impixi, could you try a build of all modules, both threaded and non-threaded. <br><br></td></tr></table><br>
<a name="918258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've rebuilt everything numerous times using the -a -h switches (will try a non-threaded build shortly). And like I mentioned, other threaded programs are compiling fine without explicitly requiring frameworks or imports... <br><br>If I specifically add imports (eg BRL.GLMax2D) to the MaxMod2 examples then I can get them compiling, but encounter other problems (that I suspect are also related to not having imported other required modules). But like REDi says, these explicit imports should not be necessary...<br><br>But it's also true even I don't know what I've got in there. ;) <br><br></td></tr></table><br>
<a name="918261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, now I'm confused. I rebuilt everything NON-threaded. The examples worked (except Custom.bmx, (and MiniPlayer which I haven't tried yet because MaxGUI isn't currently installed)). Then  I rebuilt everything in threaded mode, and now the examples compile okay.<br><br>This is Custom.bmx error:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Building Custom
Compiling:Custom.bmx
Linking:Custom.debug
Executing:Custom.debug
Custom...
terminate called after throwing an instance of 'RtError'
  what():  RtApiCore::probeDeviceOpen: system error (kAudioDeviceUnsupportedFormatError) setting sample rate or data format for device (2).

Process complete
</textarea><br><br>This is on a MacBook Pro, btw, so it's only simple onboard sound, so it might not support some advanced audio features.<br><br>What I'm going to do is delete BlitzMax SVN entirely and reinstall it from scratch again, because I swear there's something fishy going on. But it will have to wait until later because I have to go out for a few hours. <br><br></td></tr></table><br>
<a name="918262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> The threaded module build is only required for the 'custom' demo, all the others can use the non-threaded modules.<br><br>Maybe worth trying a few different tracks, the song Brucey pointed out reports to be 16000 sample rate, and I think CoreAudio might well refuse to create an output in that format.<br><br>It looks like the tracks on that site have some dodgy frame headers. <br><br></td></tr></table><br>
<a name="918267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> It turned out them dodgy frame headers were actually ID3 tags :)<br><br>Should be fixed now, beta 4 is on the download page. <br><br></td></tr></table><br>
<a name="918272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also, not running the "threaded" code, just the LoadMusic example. <br></div><br><div class="quote"> @Brucey, do you get any debug verbose about why streaming isn't working?<br><br>Sorry to be a pain mate ;) <br></div><br>Did I get the wrong end of the stick? I thought you meant the streaming examples don't work, or was it that you hadn't tried them?<br><br>(I'm having a brain fart day ;) ) <br><br></td></tr></table><br>
<a name="918300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have reinstalled my OSX system from scratch and patched it to version 10.5.5. Installed the latest XCode version (includes iphone support).<br><br>Downloaded the latest SVN versions of BlitzMax and MaxGUI. Installed MaxMod2 Beta 4.<br><br><br>Seems like the modules must be built non-threaded as well as threaded before code compiles in threaded mode. Not sure if this is normal behavior or not.<br><br>I've not been able to get Custom.bmx to run (it terminates with the error mentioned in my previous post). <br><br>Also, MiniPlayer.bmx doesn't compile. It terminates with 'Unhandled Exception:Attempt to access field or method of Null object' on:<br><br><pre class=code>Local App:TApp = New TApp </pre><br><br>Other MaxGUI code compiles without problems (including the SVN MaxIDE source).<br><br>The other MaxMod2 examples seem to run okay. <br><br></td></tr></table><br>
<a name="918324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi impixi<br><br>I've just noticed in "MiniPlayer.bmx", could you try changing the ?Mac to ?MacOS (DOH! stupid mistake)<br><br>and in "Custom.bmx",  could you have a play around the sample format, maybe try something like...<br><br><pre class=code>
	Method New()
		SampleRate = 44100							' set required samplerate
		Channels   = 1								' set the number of channels
		Bits       = 16							' set bits per channel
	EndMethod
</pre><br><br>Thanks for your efforts in sorting this out! <br><br></td></tr></table><br>
<a name="918464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, that fixed both problems. <br><br></td></tr></table><br>
<a name="918472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> phew! :) <br><br></td></tr></table><br>
<a name="925753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it still under development?<br><br>Dunno is it stable for production yet, I tried beta4 and it worked actually very well. <br><br></td></tr></table><br>
<a name="925887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi yoko!<br><br>Yeah, it's still in development mate but I've got hardly any free time ATM :(<br><br>The next beta release takes over all sample playing and streaming through a single audio output, I've just got to figure out a couple of garbage collection issues first.<br><br>New commands so far: (work with both samples and music)<br><br>CueMusic<br>PlayMusic<br>GetChannelLength<br>ChannelSeek<br>GetChannelPosition<br>GetChannelLoop<br>SetChannelLoop<br>SetChannelLoopPoints<br>GetChannelLevels<br>SetGlobalVolume <br><br></td></tr></table><br>
<a name="925918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> MaxMod is very cool, the new commands sounds sounds pretty useful.<br><br>Please keep the great work going. <br><br></td></tr></table><br>
<a name="937211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yet another maxmod2 test, for those who have the time and the stomach... <br><a href="http://maxmod.googlecode.com/files/MiniPlayerEx.zip" target="_blank">http://maxmod.googlecode.com/files/MiniPlayerEx.zip</a><br><br>This is mainly to test the new channel effect processing, the test app will apply a Sound Touch effect to the channel allowing for time stretching and pitch shifting.<br><br>Please also let me know if you find any problems with output quality or problems opening/playing certain audio formats etc.<br><br>Thanks in advance!<br><br>*EDIT* Test application is for Windows only<br><br>Simple example of how channel effects are added and used...<br><pre class=code>
SuperStrict
Framework MaxMod2.RtAudio
Import MaxMod2.SoundTouch
Import MaxMod2.MP3

SetAudioDriver "MaxMod RtAudio"

Local Channel:TChannel = CueMusic(RequestFile("",MusicExtensions()))
Local SoundTouch:TSoundTouch = New TSoundTouch
AddChannelEffect Channel,SoundTouch
SoundTouch.SetTempo 1.25
ResumeChannel Channel

While ChannelPlaying(Channel)
	Delay 10
Wend</pre> <br><br></td></tr></table><br>
<a name="937235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tested in Vista - works [almost] perfectly (See below).<br><br>Love the Tempo/Pitch stuff.  Much more useful to be able to adjust the playback speed and pitch independently.<br><br>The loop option doesn't work in your test app, though.  Don't know if its a problem with the module or you just didn't implement it yet so I thought it was worth mentioning.<br><br>I'd love to see this implemented as an official music module for Blitzmax. <br><br></td></tr></table><br>
<a name="937329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, Thanks GfK!<br><br>I hadn't noticed the looping problem, seems to only happen with some file formats, I'll look into it, Thanks. <br><br></td></tr></table><br>
<a name="937330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I hadn't noticed the looping problem, seems to only happen with some file formats, I'll look into it, Thanks.  <br></div>Oh... I was using an OGG file.  Might have been variable bitrate, too, if it matters? <br><br></td></tr></table><br>
<a name="938855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm surprised there hasn't been more replies about this.  Do people not realise how important streaming audio is?  Do they just not realise what MaxMod is?<br><br>Anyhoo... any ETA on a final release yet? <br><br></td></tr></table><br>
<a name="938966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm surprised there hasn't been more replies about this. <br></div><br>I'll just take the lack of moans as a good sign ;)<br><br><div class="quote"> Anyhoo... any ETA on a final release yet? <br></div><br>Probably wont release anything until the threaded version of BlitzMax is officially out I'm afraid. <br><br></td></tr></table><br>
<a name="938974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Probably wont release anything until the threaded version of BlitzMax is officially out I'm afraid.<br> <br></div>No probs, but I hope that's soon too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
