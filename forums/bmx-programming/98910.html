<!DOCTYPE html><html lang="en" ><head ><title >Gadget event invisibility.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Gadget event invisibility.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Gadget event invisibility.</a><br><br>
<a name="1158769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mk2y10</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have recently been working on a new project that works much like a screensaver, but for the desktop background. I have already been able to access the wallpaper gadgets, hide the list item view and set the window's parent as the Window's shell gadget. All this allows flawless work. The object stays in the background, and all events go to the window's shell gadget. (Right-clicking does the same as on the regular desktop.)<br><br>Now, the problem I have is the fact that a window, and only a window, placed as a child in my application window will stop events from reaching the desktop itself. I have looked for the past few days trying to find a way make a gadget 'invisible' to mouse input. I have also found a method that causes a false mouse event on any window you specify. This works fine for all gadgets, except for the desktop. (of course.) This is where I need some advice on where to look, as this project is going to have user made IAds (InterActive Desktops.)<br><br>In short, I need to make my window either be 'invisible' to mouse events, or relay a mouse event to the desktop correctly when my window receives one. The goal is to display the pop-up menu you get when you right-click on the wallpaper.<br><br>Anyone have any ideas? <br><br></td></tr></table><br>
<a name="1158788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya<br><br>Assuming you're using MaxGUI, have you tried using the PostEvent command to redirect messages from your window to the desktop? <br><br></td></tr></table><br>
<a name="1158802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mk2y10</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey col, i'm sorry my post was a little specific, I need to adapt it using windows API so I can use it in C++, Blitz3D, BlitzPlus and some java applets as well, i have to make it bilingual in a way lol <br><br></td></tr></table><br>
<a name="1158824"></a>

<a name="1158833"></a>

<a name="1158834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh huh. I understand.<br><br>What language do you have your 'working' code in so far? BMax? How are you handling the messages so far? I would think if you have the underlying hWnd handle then you can simply pass the message along using SendMessageW.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1158927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mk2y10</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried the SendMessage command, but with no luck, either i have the wrong window handle (the gadget that takes in the keystrokes) or the desktop is not able to accept program generated message commands (which it should.) I found the desktop is layered like this:<br><br>Desktop Gadget<br>-Program Manager Window<br>---Shell Window<br>-----List View Window<br><br>As for gadgets and windows below that, I can not get the handles. When I send a message to the List View Window, it reacts as if I am selecting something. A message to the shell and program manager does nothing. There is either a gadget that I am not getting, or something else completely keeps track of mouse input.<br><br>I will deepen my search online, I hope a day of rest from the project will help me look at it with fresh eyes. Let's see what I can dig up. <br><br></td></tr></table><br>
<a name="1158944"></a>

<a name="1158945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mk2y10</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was able to find a collection of pages and put together a working solution. By using the following:<br><br>PostMessage (hWND , WM_RBUTTONDOWN , 0x02 , lParam)<br>PostMessage (hWND , WM_RBUTTONUP , 0x00 , lParam)<br><br>where:<br><br>&gt;&gt;hWND is the List View Item's handle (Not the Desktop window's handle)<br>&gt;&gt;WM Style is the second parameter.<br>&gt;&gt;A hex value for the key states. (0x02 is rightdown, 0x01 is leftdown, 0x00 is none)<br>&gt;&gt;lParam is a Int like so:<br><br>The integer is the same as as a memory structure of:<br><br>Short[0] = X value<br>Short[1] = Y value<br>(as) Int<br><br>This seems to work with any object, gadget or not, and generates a true windows event without moving the pointer and such. All the window needs to do is forward the event to the desktop. I already have a working example, and it is running right now on my laptop :)<br><br>Thanks for the help col!<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
