<!DOCTYPE html><html lang="en" ><head ><title >Game media and TMaps</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Game media and TMaps</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Game media and TMaps</a><br><br>
<a name="835957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do people manage their game resources?<br>I was thinking of using a TMap loaded from an external file (maybe .xml).<br>Anybody doing something similar?<br>What problems might there be doing that?<br>It might be considered overkill but I could soon be using hundreds of sounds, songs and images so a 'Resource Controller' seems like a good idea.<br>What do you think? <br><br></td></tr></table><br>
<a name="835960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using TMaps for my media handling as well.<br>This is needed as I am using several XMLs (with per level stuff, general setups for enemy, projectiles and the like etc) and "by name" handling seems to be the most appropriate and error free approach ...<br><br>and just to mention that: it works great as well :) <br><br></td></tr></table><br>
<a name="835964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds interesting Dreamora.<br>Care to post a simple example? (the xml file and "by name" handling) <br><br></td></tr></table><br>
<a name="835966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats for example the XML.<br><pre class=code>
&lt;root&gt;
	&lt;enemy name="Drone" image="ufo" imgexplosion="explosion_32" size="16"&gt;
		&lt;stats health="3" speed="0.5" armor="0" points="2" credits="1" /&gt;
		&lt;sounds die="explosion" hit="playerhit" step="alienfire" /&gt;
		&lt;/enemy&gt;
	
	&lt;enemy name="Scout" image="ufo" imgexplosion="explosion_64" size="64"&gt;
		&lt;stats health="7" speed="1" armor="0" points="10" credits="2" /&gt;
		&lt;sounds die="explosion" hit="playerhit" step="alienfire" /&gt;
		&lt;/enemy&gt;

	&lt;/root&gt;</pre><br><br>the images and sounds directly refer to the names of the media they use. the names are without extensions as they are stored without it in the tmap. (I only use 1 type of media, not a mix of several. This means OGG, PNG)<br><br>the parsing of that xml actually is quite simple if you use maxml.<br>Even the enemies are stored in a tmap by their names and when I need one of them, I use valueforkey, cast it to TEnemy and call its clone method and place it in the world.<br><br><br>I should be more specific: The class that handles the media does this itself, its extended from TMap and automatically clones the output when I ask it for a specific enemy etc.<br><br>The basics of this idea came from Grey Aliens framework which already offers such media storing capability out of the box. Extended that idea for my own storages. <br><br></td></tr></table><br>
<a name="836179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I create my own world type and use streams to create my own media packages (LOVE STREAMS!) since I didn't have flexible access to it in my previous language.<br><br>I created a method of format on files to write their name, id, length in bytes, and position in the file, so streaming a file from a package containing hundreds of files is surprisingly easy.<br>Easy to create your own encryption methods, extract single resources, update game files (if the game is online), and hard for people to extract your media.<br><br>It probobly isn't the best way, but it's the method I use. <br><br></td></tr></table><br>
<a name="836182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an abstract file system somewhere in this forum that does just that.<br><br>You can go:<br>LoadTexture("brickwall")<br><br>And the texture is either loaded or returned (if it already exists). <br><br></td></tr></table><br>
<a name="836183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> All my data is stored in a map.  When the engine is loaded, the game is then loaded and all files from the game directory (there is a difference between application directory and game directory) are indexed and these become the only files accessible to the game.  You cannot read files above the game directory (e.g., application directory, C:\WINDOWS, C:\TMP, etc.).  All files can be searched for glob-style, extensions aren't necessary to load media (e.g., models and textures- the best format is chosen when there are multiple choices).  If the game writes data, the file must be in a directory that is considered writable (for example, saves/).<br><br>I was originally using a hash table but decided to go for a TMap instead just because 1) it's already there and 2) collisions won't occur in most situations.  It took me a long time to come up with something that could get a collision, but that I could do it means anyone could have, and that just wasn't good enough.  Plus I didn't feel like writing a new hash function.<br><br>All data is kept in a package that is more or less a modified .PAK format.  Each file is individually compressed (I'm thinking about changing this such that each file is made up of small, compressed chunks to make reading/decompression easier for larger files that would be processed over time.<br><br>Shaders, materials, etc. are done using my SParse format, which is more or less a complete ripoff of Quake 3's shader format in terms of syntax.  I'd considered using XML, but honestly, that's just bloated and ugly.  Neat toy back when I was playing with it, but it slowly becomes more and more obvious that it's really, really stupid to use most of the time.<br><br>Doubt any of that made sense. <br><br></td></tr></table><br>
<a name="837086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> RE:Dreamora<br><br>I have a similar technique with lua..<br><pre class=code>
--the data
ball={
  ["image"]="images/ball.png"
  ["static"]=0,
  ["solid"]=1,
  ["mass"]=600,
  ["inertia"]=1000
}

--link the data to string "ball"
class("ball",ball)

put("ball",200,200)
</pre><br><br>my images are stored in a collection type which extends map.  This collection will first look in a buffer to see if it has loaded the image or will otherwise get it from the file system. <br><br></td></tr></table><br>
<a name="837091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice :-)<br><br>I would be happy if my skills with using LUA were better but I am looking at TinyCC which was wrapped by Noel as a "scripting extension" as it seems to be far simpler to get it in than LUA (and I definitely have more experience with it) <br><br></td></tr></table><br>
<a name="837253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> lua's not so bad once you get used to working with the stack. That can be a deal breaker for some people although I kind of enjoyed looking at the gory underbelly of a script language. I love writing with it though.  It's a fantastic loosey runtime language. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
