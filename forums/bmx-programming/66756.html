<!DOCTYPE html><html lang="en" ><head ><title >Can I "cut-out" a polygon shape from an image?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can I "cut-out" a polygon shape from an image?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Can I "cut-out" a polygon shape from an image?</a><br><br>
<a name="745550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm creating a Worms / Scorched Earth clone and I'm creating my landscape outline by generating a bunch of points and then creating a spline (eg. curve).<br><br>Now I have the outline of my landscape on my screen (it's basically a polygon shape).<br><br>Let's say I have a huge texture image (2000x1500 pixels), and I'd like to paste this image INSIDE of my polygon landscape.  The effect would be I would have a nice 2D landscape filled with an image (as opposed to just the polygon outline).<br><br>Thanks,<br>John <br><br></td></tr></table><br>
<a name="745578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couldn't you adjust the UV coords of the polygon at the same time as you alter the spline? <br><br></td></tr></table><br>
<a name="745579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> To be honest I'm not sure what you mean... (I'm using pre-written code that generates the splines from a bunch of points).<br><br>However, the spline drawing function uses DrawLine so I don't have any coordinates.<br><br>I was hoping that I could somehow just use the polygon shape (eg. the spline) to cut-out a part from another image.<br><br>Also, on a related question, can I draw holes onto an image?  (eg. if a tank shoots my terrain I want to darken a part of it or perhaps remove that section)<br><br>Thanks for your help! <br><br></td></tr></table><br>
<a name="745589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Draw holes into the image: Yes, if you use MaskBlend, just draw them black.<br><br>Otherwise: No you can not cut out anything. You would need to do as perturbatio mentioned and combine the images quad and the spline to form a new geometrical object with the needed UVs. <br><br></td></tr></table><br>
<a name="745606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, what objects or functions do I need to use to perform what you're saying?<br><br>I think I understand the general idea:<br><br>1) Create a geometrical object with UVs<br><br>When I generate my spline I can create UVs, but I do not know what they are.<br><br>Do I need to create a "TPolygon" object or some such thing?<br><br>How do I then use that object to extract the specified region from my texture?<br><br>Thanks!<br><br>- John <br><br></td></tr></table><br>
<a name="745608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do I need to use some kind of Render-To-Texture mod?  (so I can render my terrain to a texture?)<br><br>As I mentioned, I'm planning to modify my terrain (and thus, the texture) with holes and other stuff....<br><br>Thanks,<br>John <br><br></td></tr></table><br>
<a name="745717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >North</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wouldn't it be easier to work purely with images and masks?<br>Sorry i didn't spend much time tinkering but i'd imagine altering the mask when the terrain changes would work.<br><br>Dito Dreamora ^^ <br><br></td></tr></table><br>
<a name="745807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are a few solutions, most of which will require some lower level coding such as in OpenGL.<br><br>You could render the polygon outline to the destination alpha channel, then render the RGB texture only to the RGB channels. Then grab the RGBA texture back. Then draw the texture with alpha blending.<br><br>You could use the stencil buffer and set it up so that when you draw the polygon it creates a stencil in that shape in the stencil buffer, and then use the stencil test to draw the texture so it only draws pixels that are in the stencil.<br><br>You could draw the entire texture over all of the screen and then `cut out` the sky by drawing a polygon that is the inverse of the land polygon where the sky is.<br><br>One question - how are you dealing with the possibility that the graphics hardware has a limit to the maximum texture size, which may not support such a large texture? What if the max texture size is 64x64?<br><br>As to cutting holes in the land you'd have to either render them directly into the texture which might require using OpenGL extensions or other technical stuff, or render the texture to the screen and then draw the cutout and then re-grab the texture or portion theoreof. Or you could keep track of a list of all the holes, draw the unexploded landscape and then draw all the holes, per frame. <br><br></td></tr></table><br>
<a name="745845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply...<br><br>It sounds like rendering to a texture may or may not work because of the size of my terrain (eg. 2000x1000 pixels or whatever it is).<br><br>Drawing the landscape and then each hole wouldn't really work because then I wouldn't be able to use the built-in image collision detection (which is what I think I want to use).<br><br>So what option(s) do I have that will work on generally every machine?  Something with the stencil buffer?  (I don't even know what that is...)<br><br>It seems like it wouldn't be too hard to simply draw an image and then deform it by drawing circles and other shapes onto it.... =(<br><br>*sigh*<br><br>I thought BlitzMax handled this kind of stuff with ease and is mostly why I purchased it =( <br><br></td></tr></table><br>
<a name="745875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It sounds like rendering to a texture may or may not work because of the size of my terrain (eg. 2000x1000 pixels or whatever it is). <br></div><br><br>If you use this technique, you could split the texture up into smaller sections. <br><br></td></tr></table><br>
<a name="745962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just use a bunch of smaller textures.<br><br>The graphics interface in BlitzMax is not very well suited to doing things where you want to READ the contents of the buffer. It's good at drawing stuff, mostly. When you want to keep permanent changes to landscape images and stuff like that, or handle huge bitmaps, then you have to get more clever about how you use what's available. <br><br></td></tr></table><br>
<a name="746004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MattVonFat</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I may not understand exactly what SofaKing is asking but if you have the coordinates that make up the polygon you could make a polygon fill algorithm like MS paint can do.<br><br>This site has a tutorial which deals with the theory side of it: <a href="http://www.cs.rit.edu/~icss571/filling/index.html" target="_blank">http://www.cs.rit.edu/~icss571/filling/index.html</a><br><br>Sorry though if I've misunderstood, it's late :) <br><br></td></tr></table><br>
<a name="751269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It seems like it wouldn't be too hard to simply draw an image and then deform it by drawing circles and other shapes onto it.... =(<br><br>*sigh*<br><br>I thought BlitzMax handled this kind of stuff with ease and is mostly why I purchased it =(<br> <br></div><br>Me too, man.  I used to do this sort of thing with mindless <br>ease in Qbasic, but for some reason, we have a much harder <br>time making this work in the (much more advanced!) Blitzmax.<br><br>I really, <i>really</i> want to be able to edit images on <br>the fly.  It seems Max's OpenGL access might be a solution.<br>I've got to look into it though. <br><br></td></tr></table><br>
<a name="751423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> See my response to your thread, drew. Indeed you need to get into writing your own OpenGL if you want to get this working at a good speed.<br><br>Blitzmax is more advanced and OpenGL is much more advanced that the bitmap-oriented pixel manipulation that you used to do in the old days. But at the same time, these new benefits come with the side effect that a great emphasis has been placed on drawing stuff and much less on reading stuff. It would've been really nice if basic OpenGL had a non-trashed backbuffer, direct access to reading the backbuffer yourself, etc, but it's taken until later versions to get that kind of functionality.<br><br>You just have to rethink how you go about achieving the results you want. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
