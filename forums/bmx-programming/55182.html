<!DOCTYPE html><html lang="en" ><head ><title >CPU-light collision detection!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CPU-light collision detection!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >CPU-light collision detection!</a><br><br>
<a name="614413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I'm currently using a rect collision detection system which doesnt really work to well considering the shapes of the objects involved!  <br><br>Is the standard blitzmax collision system (Imagecollide) CPU intensive?  <br><br>Would it be better to use an oval collision detection system?<br><br>I'm sorta lost atm, not sure which to use best. <br><br></td></tr></table><br>
<a name="614426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is the standard blitzmax collision system (Imagecollide) CPU intensive? <br></div>Compared to what? It more intensive than overlapping rectanges, but also more accurate. Unless you absolutely must check collisions between thousands of objects at once, I wouldn't sweat it.<br><br><div class="quote"> Would it be better to use an oval collision detection system? <br></div>That depends on whether the shapes of the objects involved are mostly oval or not.<br><br>BlitzMAX's built-in collision system is pixel accurate. <br><br></td></tr></table><br>
<a name="614467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> pixel accurate with loads of cpu usage in comparison to oval or rect right? <br><br></td></tr></table><br>
<a name="614492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a lot flying around on screen, use a rect collision system first and then use pixel perfect collision detection methods when there is a rect collision. <br><br></td></tr></table><br>
<a name="614520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might consider breaking the rectangle for a given image down into a grid of smaller rectangles, then you can do away with any rectangles that don't contain pixels. The smaller the grid the better. Then you can use the simple rectangular collision checks. ... maybe keep a large one for a bounding box, then if something is inside it check for more detail. <br><br></td></tr></table><br>
<a name="614526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrHanson</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a method I use in my gameobject class:<br>I first do a radius collision first (without using square roots of course) then use the CollideImage function.  Seems to work pretty well.  Even runs smoothly on a PII 400 Mhz without slowdown.  I have about 20-30 objects on screen at one time.<br><br><br><br>  <br>   Method hasCollided(obj:gameobject)<br>      Local xdiff:Float=Abs(worldx-obj.worldx)<br>      Local ydiff:Float=Abs(worldy-obj.worldy)<br>      If ((xdiff*xdiff)+(ydiff*ydiff)) &gt; ((radius*radius)+  (obj.radius*obj.radius))<br>         Return 0<br>      EndIf<br>      SetRotation(angle)<br>      CollideImage (getImage(),worldx,worldy,0,0,1)<br>      SetRotation(obj.angle)<br>      If CollideImage(obj.getImage(),obj.worldx,obj.worldy,0,1,0)<br>         Return 1<br>      EndIf<br>      Return 0<br>   EndMethod <br><br></td></tr></table><br>
<a name="614552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> loads of cpu usage <br></div>Define "loads of CPU usage"? You're not very specific. If you have <b>less than 1000</b> colliding objects on screen at any given time, then built-in collision detection is fine, even on the TabletPC. Don't optimize unless you have to, you'll put yourself in an early grave. <br><br></td></tr></table><br>
<a name="614586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why don't you construct a convex hull. Check for collisions against that rather than doing pixel stuff.<br><br><img src="http://indiepath.com/tim/editor001.jpg"><br><img src="http://indiepath.com/tim/hulltest.jpg"> <br><br></td></tr></table><br>
<a name="614662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some of those look like concave hulls!! <br><br></td></tr></table><br>
<a name="614731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i was just about to say that. haha <br><br></td></tr></table><br>
<a name="614810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> First I'd like to thank those who have replied tot his post! <br>Well, common sense seems to tell me that checking per-pixel collisions would be CPU intensive, especially on a P2 or P3.  I'm trying to make sure my game will play well on slower machines (because its shareware) and I really want to make sure that I dont do anything too CPU intensive.<br><br>@ FlameDuck: I'm leary of your judgement when you say 1000's of objects, because really, your evidence is only in existance on your uber machine.  Even your tablet PC seems pretty powerful in comparison to people that purchase casual games' PCs.<br><br>@ IndiePath, that looks harder than what I'm already doing!  Would be pretty difficult (for me atleast) to implement a vector library just for collision checks.  Although the Vectors look really cool, I just dont think that would really "fit"  - Thanks though!<br><br>@ MrHanson that looks like a solid plan!  I think I'll give that one a try. Thanks! <br><br></td></tr></table><br>
<a name="614833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom Darby</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matt, FlameDuck didn't say that BMX's built-in collision detection system would handle "thousands of objects"--quite the opposite.  He said "under 1000 objects" (in bold, no less) and while I haven't tested his assertion, I'm inclined to believe it is accurate.  Assuming you're using decent algorithms, under 1000 seems pretty reasonable.<br><br>If you're looking for a simple system, then I strongly recommend JazzieB's earlier recommendation of using a bounding box/pixel perfect combination system.<br><br>Your typical PII system is going to be 6-8 years old at this point--beyond ancient.  While there are still some alive and kicking out there, it's going to be a pretty small percentage of total systems available, and those that do still run will be running on hardware that is well past the typical MTBF for consumer-grade stuff.  You may want to consider setting your base expectations a little higher, for your own sake... <br><br></td></tr></table><br>
<a name="614841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a HUGE number of images  you might want to port this...<br><a href="/codearcs.php?code=1065" target="_blank"> shifted grid </a> <br><br></td></tr></table><br>
<a name="614881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive found the bmax collision system peforms very badly once youre over about 30-40 objects. <br><br></td></tr></table><br>
<a name="614956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you John Devoy, I was really thinking that would make a little more sense..  Anyways, I think I'm going to use the standard rect collision detection and then once that happens I'll do the bmax collision detection.   Thanks everyone!!! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
