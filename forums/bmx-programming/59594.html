<!DOCTYPE html><html lang="en" ><head ><title >Porting blitzplus programs to blitzmax: advice?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Porting blitzplus programs to blitzmax: advice?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Porting blitzplus programs to blitzmax: advice?</a><br><br>
<a name="664253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >salric</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>So I've got a 10,000+ line game I need to port from Blitzplus to BMax. While the beach-ball was spinning &amp; the .bb source file was being imported into max I had dreams about clicking compile &amp; experiencing instant gratification. <br><br>Needless to say it didn't work out that way. <br><br>Specifically, the following issues occurred:<br><br>- Lines that contained more than one statement had their colons replaced by a semi-colon. Is there some magic here or do I need to separate these into their own lines?<br>- Several errors occurred: Booleans can only be used on integers, putting a % following the variable does not solve this issue... what does this mean?<br>- Commands such as color etc., are not recognised, does this mean I need to either write functions for the majority of blitzplus graphics commands or search-replace them out?<br>- I've learned to hate search and replace as it searches and replaces within words, is there anyway to change this behaviour in the default ide (hope springs eternal) ?<br><br>In summary, has anyone had any practical experience in porting a blitzplus (or 2d blitz3d) program across to blitzmax that could give me some advice on shortcuts, best practices etc.?<br><br>In addition, I'm wondering if there is a smart way to replace the setbuffer commands (draw to a number of different buffers) with the pixmap equivalents (i.e. a neat little function that emulates setbuffer perhaps?)<br><br>Anyhow, I look forward to your responses; I figured that I'd check with the community before embarking on this task.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="664258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Semi-colons are the new colons, I'm embarassed to say I can't actually see where this is documented in the BlitzMax help.<br><br>You now need to test objects against null as in if object then -&gt; if object&lt;&gt;null then for boolean purposes.<br><br>Color should have been converted to SetColor by the converter... Also it's behavior has changed as it affects drawing of images.<br><br>I never got round to adding setbuffer style function helpers, this might be a good initial project to get your feet wet with BlitzMax rather than diving directly to 200 ft with out oxygen...<br><br>A second task may be to fix up the .bb code converter a little, BlitzMax has come a long way since it was written so it is in need of some attention, will post the source soon. <br><br></td></tr></table><br>
<a name="664265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So I've got a 10,000+ line game I need to port from Blitzplus to BMax. <br></div>Rewrite it properly in BlitzMAX. I know that's not the answer you where looking for, but it really is the best solution.<br><br>On the upside, you can probably dramatically reduce the ammount of lines and convoluted logic needed, by using a more object oriented approach. <br><br></td></tr></table><br>
<a name="664313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have tried converting my cardwar game to bmx. <br>Around 15.000 lines of code and I failed.<br><br>Rewrite it from scratch is my advise as well. <br><br></td></tr></table><br>
<a name="664318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also say rewrite.  You can make it much better with objects. <br><br></td></tr></table><br>
<a name="664356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Murilo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here. I've taken the porting route with my current game (Archon Evolution), and I wish I'd just rewritten it from scratch.<br><br>Rewrite and take full advantage of Max's lovliness... <br><br></td></tr></table><br>
<a name="664637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I converted a 2000 line B3D program by hand and it took me over an hour (with only 2D commands used)...<br><br>Strangely, File/Import BB Project misses a couple of obvious things like converting Color to SetColor, Line to DrawLine, etc. I found that I was manually going in there and fixing things. Text -&gt; DrawText (and the params are in a different order, and there's no 'Center X' or 'Center Y' flags) etc.<br><br>Speaking of Center X and Center Y: B3D's docs say <br>"center x = optional; true = center horizontally <br>center y = optional; true = center vertically"<br><br>This is kind of misleading. What it actually does is place the <b>HANDLE</b> of the text in the center horizontally or vertically, respectively, instead of in the upper left corner. Screen width and height are not taken into account as one might expect.<br><br>A little late to be posting this complaint, I know. ;)<br><br>Russell <br><br></td></tr></table><br>
<a name="664664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Leigh: <br>Why are the Archon Forums down? <br><br></td></tr></table><br>
<a name="664675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> File Import is no solution at all. It will handle the data the B3D / BB+ way which means 10-40 times slower than if you wrote it in BM from scratch <br><br></td></tr></table><br>
<a name="664865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark1nc</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I do is throw in some helper functions at first to get it to compile.  Later you can go through and convert to the new/replacement function calls.<br><br><pre class=code>
Function Rect(x:Int,y:Int,w:Int,h:Int,f:Int=0)
	If f
		'solid
		DrawRect x,y,w,h
	Else
		'outline
		Local x1:Int = x + w
		Local y1:Int = y + h
		DrawLine x,y,x,y1
		DrawLine x,y1,x1,y1
		DrawLine x1,y1,x1,y
		DrawLine x1,y,x,y
	EndIf
End Function


Function Color(r:Int,g:Int,b:Int)

	SetColor r,g,b

End Function

Function Text(x:Int,y:Int,tx:String)

	DrawText tx$,x,y

End Function


</pre> <br><br></td></tr></table><br>
<a name="665036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Function Text(x:Int,y:Int,tx:String,centerx:Int=False,centery:Int=False)
	DrawText tx$,x+((TextWidth(tx)/2)*-centerx),+((TextHeight(tx)/2)*-centery)
End Function</pre><br>Here's a little addition to Mark1nc's helper functions <br><br></td></tr></table><br>
<a name="665442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AlexO</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'ved attempted a straight port also and I soon realized it's not worth it and I can get a much better result by rewriting the whole thing with Bmax's new features in mind, especially the object-oriented aspect. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
