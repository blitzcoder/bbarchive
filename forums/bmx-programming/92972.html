<!DOCTYPE html><html lang="en" ><head ><title >Make an enemy 'track' the player through rotation.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Make an enemy 'track' the player through rotation.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Make an enemy 'track' the player through rotation.</a><br><br>
<a name="1061374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey folks!<br><br>I need to make an enemy gun turret 'track' the player, and turn to always be<br>facing him(Although preferably at an adjustable speed, so I can slow his turn rate if need be).<br><br>So how might I do this?<br>I've made it so the Gun turret can <i> fire </i> in the right direction, but not actually<br>be pointing the right way.<br><br>I'm using a variable to determine rotation, called Enemy.r, and need to use<br>this if that is at all doable with any suggestions you might have.<br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="1061427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Polan</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> count angle between player and turrent, you can use atan2(turrenty-playery,turrentx-playerx) function. Then interpolate missing angle :). <br><br></td></tr></table><br>
<a name="1061428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  count angle between player and turrent, you can use atan2(turrenty-playery,turrentx-playerx) function. Then interpolate missing angle :).  <br></div><br>The only problem with that Polan. Is I've never used atan2, I'm not sure how it works,<br>and I'm not very good with angles ;)<br><br>If you could clarify that in a code example that would be great.<br>Sorry for my noobishness, but there are parts of Blitzmax that I don't know, and angles<br>is one of em :)<br><br>Thanks! <br><br></td></tr></table><br>
<a name="1061431"></a>

<a name="1061437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> atan2 returns the destination angle:<br><pre class=code>
destinationAngle = atan2(destinationY-sourceY,destinationX-sourceX)
</pre><br>that will give you the direction that your bullet got to trable or the direction the turret has to be facing.<br> To get your bullet to travel in the direction of the obtained:<br><pre class=code>
dx = cos(destinationAngle)
dy = sin(destinationangle)
</pre><br>all you are going to have to do from here is add that to the x and the y of the object you want o move and it's going to move in the correct direction.<br><pre class=code>
x = x+dx
y = y+dy
</pre><br>now to change the speed of the object all you have to do is this<br><pre class=code>
x = x+dx*speed
y = y+dy*speed
</pre><br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1061432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol, thanks Jesse!<br><br>You always seem to be the one to give me a hand ;)<br><br><div class="quote">  destinationAngle = (destinationY-sourceY,destinationX-sourceX)  <br></div><br>This 'should' be all that I need. I already have the bullets traveling the way I want.<br><br>I'll post back though letting you know the outcome.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="1061438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry Werdna. I don't know How I forgot the most important part the atan2. fixed now.<br><br><div class="quote"> <br>You always seem to be the one to give me a hand ;)<br> <br></div><br>I take a glance at the boards every now and then and if there is someone I can help with something I do. there are some topics that I haven't gotten into which I should and those are usually the ones stay away most of the time. If you need help with something and you think I can help you just let me know and I will. No strings attached. <br><br></td></tr></table><br>
<a name="1061479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">   I don't know How I forgot the most important part the atan2.  <br></div><br>Np, I kind of guessed that was supposed to be in there ;)<br><br>That single line of code worked out just fine, my Gun Turrets now act how I want them<br>to, and I'll have a new test build(And youtube video) of my current game ready in<br>1 or 2 days.<br><br>Cheers! <br><br></td></tr></table><br>
<a name="1061491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are a whole bunch of samples of this throughout the forums, just search for atan2. <br><br></td></tr></table><br>
<a name="1061493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Asource is your current angle, Adest is the angle the other object is and smooth is how quickly you want it to turn.. add the return value to the current angle<br><br><pre class=code>
Function Rotarydir:Float(Asource:Float,Adest:Float,smooth:Float)
	Local dir:Float=0
	If Asource&gt;Adest
		Local Diff1:Float=Asource-Adest
		Local diff2:Float=(360.0-Asource)+Adest
		If diff2&lt;Diff1
			dir=diff2/smooth
		Else
			dir=Diff1/smooth*-1
		EndIf
	Else
		If Asource&lt;Adest
			Local diff1:Float=Adest-Asource
			Local diff2:Float=(360.0-Adest)+Asource
			If diff2&lt;diff1
				dir=diff2/smooth*-1
			Else
				dir=Diff1/smooth
			EndIf
		Else
			dir=0
		EndIf
	EndIf
	Return dir
End Function
</pre> <br><br></td></tr></table><br>
<a name="1061494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> really handy tools to have around, thanks for the clean info all, much appreciated. <br><br></td></tr></table><br>
<a name="1061502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the example Skully :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
