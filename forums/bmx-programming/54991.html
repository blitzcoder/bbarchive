<!DOCTYPE html><html lang="en" ><head ><title >Multithreading</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Multithreading</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Multithreading</a><br><br>
<a name="612472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >King Dave</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, I was doing some searches to see if multithreading is possible in BlitzMax. I found a couple of references to a unofficial module that adds support for it on Win32 but can't find this module.<br><br>If you know where I could find it could you point me in the right direction please.<br><br><br>Also, is there any chance there will be an official module for multithreading? (even if its not available on all platforms). <br><br></td></tr></table><br>
<a name="612501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not yet.  Although someone did get a Win32 only version working - Antony?  or skn3ac? <br><br></td></tr></table><br>
<a name="612518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >King Dave</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I saw the name Antony on another thread. I have used multithreading in C++ before, but I'm not familiar enough with BlitzMax yet to get it working as a module. <br><br></td></tr></table><br>
<a name="612538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also, is there any chance there will be an official module for multithreading? <br></div>Well there's always a chance. Whether it'll be before or after the 3D module is anyones guess.<br><br>The main probelm I see with using BlitzMAX in a multithreaded environment is that it's not thread safe, and some of the more advanced features (like garbage collection, and the GUI) are going to have you pulling your hair wondering why things just crash at random (if you're lucky). <br><br></td></tr></table><br>
<a name="612550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe in one of Mark's worklogs that he has had a bit of a look at this already. <br><br></td></tr></table><br>
<a name="613357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the link for the threading module.<br><br><a href="http://www.blitzwiki.org/images/b/b4/Grb.threads.mod.zip" target="_blank">http://www.blitzwiki.org/images/b/b4/Grb.threads.mod.zip</a><br><br>Here's a link to some info about it on the wiki.<br><br><a href="http://www.blitzwiki.org/index.php/Threads_(Module)" target="_blank">http://www.blitzwiki.org/index.php/Threads_(Module)</a> <br><br></td></tr></table><br>
<a name="613398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >King Dave</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! Thanks for the link! <br><br></td></tr></table><br>
<a name="613442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know Drago has also written such a module.<br>Though I don't know if his is for public use.<br><br>Do you plan to port freeworld to bmx? :) <br><br></td></tr></table><br>
<a name="613516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >King Dave</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I plan to at least port the server to bmx. Main reason I need multithreading is to ensure a client can't lock up the server by not reading its incoming data.<br><br>This has been a nightmare for me with blitz3D and there is no guaranteed way to avoid it. However with multithreading I can do it :)<br><br><br>Once the official 3D module is released I will consider porting freeworld itself across to bmx... however I fear too many differences will exist. <br><br></td></tr></table><br>
<a name="613644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> however I fear too many differences will exist. <br></div>You should probably hold off on the angst for now. How is freeworld doing BTW? Can't seem to find mention of it on MMORPG.com anymore. <br><br></td></tr></table><br>
<a name="613729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @King Dave: To convert the whole FW project to BMX will be pure pain! It might get a bit easier when the official 3D module comes out, but still a huge task with no visual progress at all. <br><br></td></tr></table><br>
<a name="613886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> with no visual progress at all. <br></div>a) You don't know that for a fact.<br>b) A massive speed increase is visual. <br><br></td></tr></table><br>
<a name="818356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any chance to get a link with this ? Can find him.<br>Grb.threads.mod.zip <br><br></td></tr></table><br>
<a name="818370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Threads don't work stable on multicore systems as the GC is not threadsafe.<br>The GC does not even work with external processes stable like the ones in DLLs if you have callbacks, it will take a few seconds at maximum until BM does with a GC C code error. <br><br></td></tr></table><br>
<a name="818421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hum ok, thanks for reply. <br><br></td></tr></table><br>
<a name="818455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Threads don't work stable on multicore systems as the GC is not threadsafe. <br></div>Or on singlecore systems, although the risk of running into concurrency issues is greatly reduced, particularly if you have a slow processor. <br><br></td></tr></table><br>
<a name="898535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need your code to be threadsafe.  You should use thread-unsafe code whenever you can.  You just need a way to lock the threads when a global variable is being written to.  That is the only time the threads can affect one another, so you do something like this:<br><br>If SomethingSomething<br>LockThreads()<br>myvar=1<br>UnLockThreads()<br>EndIf<br><br>Locking threads slows the application because all threads must momentarily pause.  A better way to handle this is to use arrays, with one value for each thread:<br><br>If SomethingSomething<br>myvar[ ThreadID() ]=1<br>EndIf<br><br>Calling GCSuspend() before a multi-threaded section might help.<br><br>However, my tests using BlitzMax callbacks with a multithreaded Newton simulation have always crashed unless I lock the threads. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
