<!DOCTYPE html><html lang="en" ><head ><title >How to handle playfield larger than screen?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to handle playfield larger than screen?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to handle playfield larger than screen?</a><br><br>
<a name="836591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sokurah</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been experimenting with this but can't seem to find a good way to do it.<br><br>Imagine a playfield 2000*2000 pixels in size, but with a window onto that playfield being only the size of the screen - eg. 640*480 pixels in size - but not by using tiles or scrolling.<br><br>Is there some easy way to handle the complete 2000*2000 playfield as a kind of backbuffer, redraw it all each frame (would be wasteful but this is just an example) and then flip only a 640*480 section of it to the screen - something like (pseudocode);<br>"FlipRect backbuffer,500,500,640,480"?<br><br>This would be for a game so the framerate should be 60fps which makes speedy code essential. <br><br></td></tr></table><br>
<a name="836592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the graphics hardware is fairly recent it will support textures up to 2048x2048 so you could have a single large image. But it may not be backward compatible with some older cards. <br><br></td></tr></table><br>
<a name="836659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sokurah</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeeees...that may very well be, but it didn't really answer the question. ;) <br><br></td></tr></table><br>
<a name="836671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The answer is yes and no, you can easily create a 2048x2048 as mentioned above...but you cant just flip part of it, and with 3d acceleration theres no need to. <br><br></td></tr></table><br>
<a name="836678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qube</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Split it into tiles of 32x32 and just draw the ones you need :) - Best not to mess with one massive image alone. <br><br></td></tr></table><br>
<a name="836679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Big&amp;</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Like Qube said, cut it up into tiles and just draw the ones you need. <br><br>You should really make your playfield out of a tileset with something like Mappy as having one big texture in memory is truly wasteful. <br><br></td></tr></table><br>
<a name="836692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a drawrect command. Just draw the part of the image that is on screen. <br><br></td></tr></table><br>
<a name="836779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couldn't you just load the image and draw it at offsets. I have tried loading a 1680x1050 pixel image and draw it to a 640x480 pixel window and on my gfx card it does it almost 1700 times per second, so its not slow at all. But as ImaginaryHuman points out, some old gfx cards might not support images that large, so if you plan on supporting old hardware, you might be better off just doing it as tiles.<br><br>When doing it as a big image, you don't have to use the CLS to clear the screen since the image will cover it all anyways.<br><br>Here is a quick test code:<br><br><pre class=code>
Graphics 640,480

tmp:TImage = LoadImage("test.png")
MidHandleImage tmp

sinus:Int = 0
fps:Int = 0
fps_cnt:Int = 0
updateSinus:Int = MilliSecs()
updateFps:Int = MilliSecs()

While Not KeyHit(KEY_ESCAPE)

DrawImage tmp,320+Sin(sinus)*520,240
DrawText "FPS: "+fps,8,8
Flip 0
fps_cnt :+ 1

If MilliSecs() &gt; updateSinus+25 Then
	updateSinus = MilliSecs()
	sinus :+ 1
	If sinus &gt; 359 Then sinus :- 360
End If

If MilliSecs() &gt; updateFps+1000 Then
	updateFps = MilliSecs()
	fps = fps_cnt
	fps_cnt = 0
End If

Wend
End
</pre> <br><br></td></tr></table><br>
<a name="836814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> He specifically said he didn't want to use tiles. <br><br></td></tr></table><br>
<a name="836821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qube</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>He specifically said he didn't want to use tiles. <br> <br></div><br>Well tough!, lol. There is no better way to handle large maps. No point in hoping there is :) <br><br></td></tr></table><br>
<a name="836829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't want tiles then you really can only do it with a single image/texture. Either you break up the image or you don't.<br><br>Drawing the entire image at the appropriate location and letting the graphics hardware clip the parts that are offscreen is probably not too bad for performance. <br><br></td></tr></table><br>
<a name="836835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> cant you just take an image shot of the entire playfield, then shrink it to the appropriate size, then take a shot of the shrunk version and draw the final smaller version? <br><br></td></tr></table><br>
<a name="836836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe i misunderstood was the entire playfield suppose to fit into the screen or are parts suppose to be offscreen? <br><br>if thats the case i would take a snapshot of the entire playfield as cache. then simply copy a section of the image as needed and display it. <br><br></td></tr></table><br>
<a name="836859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sokurah</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all.<br><br>&gt;ImaginaryHuman <br>&gt;Drawing the entire image at the appropriate location and letting the graphics hardware clip the parts that are offscreen is probably not too bad for performance. <br><br>This is actually what I'm after, but I have no idea how to draw directly to a large image as if it's a "backbuffer"<br><br>Actually, the entire playfield would be about 800x600 (just under actually) in size and the screenmode 640x480, so it's not like I would actually have a single 2048x2048 texture - that was just an example.<br><br>So, since there's not that much overhead, it wouldn't be much of a performance hit to just draw everything to a backbuffer and just show the part of it that's needed.<br><br>It would simplify the calculations needed a lot.<br><br>Perhaps I'll have to redo the code I've already done - I don't know yet...I'll need to think about that. <br><br></td></tr></table><br>
<a name="836925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >altitudems</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... I have some thoughts, but what kind of game is it going to be?<br>And why don't you want tiles?<br>What about non-uniform tiles?<br>Search the forums for Render to Texture if you want some kind of backbuffer functionality.<br><br>If your trying to avoid a blocky look, just create an array/list of scenery objects or images and draw them at there individual world positions.<br><br>I like the flexability of having "tile" images any size or position, but I use a grid that they can snap to as well.<br><br>Maybe use some kind of a camera or viewport system to determine what gets rendered.<br><br>I run several cameras here for hot seat games with many scenery/game entities in the world, only drawing them if they are visible to each camera. With even 8 cameras its almost the same FPS as just 1.<br><br>And most definatly seperate logic from rendering. <br><br></td></tr></table><br>
<a name="836956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what you're asking for is an image buffer like blitz3d where you can draw to an area larger than the screen. <br><br></td></tr></table><br>
<a name="837203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sokurah</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;So what you're asking for is an image buffer like blitz3d where you can draw to an area larger than the screen. <br><br>Exactly!<br><br>It's going to be for a 2D arena-shooter type game.<br><br>I've solved the initial problem, so I have something that works, but the way I'm doing it is not as easy to handle as a B3D imagebuffer type solution, and the more simple the code, the less chance there is that the code will become an unreadable mess when I get further along with the project.<br><br>...so I'm still interersted if anyone has an idea. :) <br><br></td></tr></table><br>
<a name="837214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Drawing the entire image at the appropriate location and letting the graphics hardware clip the parts that are offscreen is probably not too bad for performance.
</pre><br>With a 2048x2048 texture? It probably will be bad for performance. Just because most videocards support 4096x4096 textures doesn't mean that they handle them speedily. A lot of onboard cards and probably even a few others will make you pay a high price for anything over 1024x1024. <br><br></td></tr></table><br>
<a name="837215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scaremonger</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did one with a large 2000x2000 image that is used as the "world" in the background. <br><br>I redraw the image each frame using TileImage(). This automatically wraps your image at the screen/window edges.<br><br>All you need to do is draw it at X,Y calculated from the location of the player. <br><br></td></tr></table><br>
<a name="837217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing to keep in mind is that a 2000x2000 = 2048x2048 = 20 MB of VRAM with mipmapping.<br><br>while subimages would only waste as much VRAM as needed to fill the screen.<br><br>And this kind of images are far slower to handle on low bandwidth cards (ie casual user systems!) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
