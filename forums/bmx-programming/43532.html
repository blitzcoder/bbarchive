<!DOCTYPE html><html lang="en" ><head ><title >Vector math problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vector math problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Vector math problem</a><br><br>
<a name="486109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have implended vectors for movement and such, but I found a problem in my way of setting the speed limit. Each Tank in my game has a force which makes it accelerate. Right now I limit this force to only apply If Tank.Speed.Length() &lt; Tank.MaxSpeed. But the tank could in an explosion be thrown much faster than it's max speed. The side effect is that when the tank goes faster than MaxSpeed because of "outside" factors, it can't break or use it's thrusters/engine force. I need a way to handle this but I'm unsure how to attack the problem. Somehow I would want to project the speed vector on the tank's thruster vector and check if the speed forward is greater than the maxspeed. Does anyone know how to solve this? <br><br></td></tr></table><br>
<a name="486112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about instead of just keeping track of the total speed, keep track of the actual propulsion speed 'generated' by the the tank itself?<br><br>In real life a car can also go faster downhill than it can on a flat surface... When going down hill, you will hit your normal 'maximum' speed and still be able to accelerate more. <br><br></td></tr></table><br>
<a name="486145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can MaxSpeed only be checked while accelerating while, when being 'exploded' the maxspeed is not checked? <br><br></td></tr></table><br>
<a name="486339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea but thats where the problem lies. There is no difference on force from the explosion or the thruster/engine or from another tank colliding. The force from the engine is generated by a vector which points in the direction of the tank. This thruster-force is added to the total force. The total force is calculated to acceleration, acc = Force/mass. Speed.Add(Acceleration) then Location.Add(Speed). And if I'm going downhill I would have a "gravity"force acting on the tank also, this would give a total speed which is higher than the tanks maxspeed. But If I don't limit the engine force by maxspeed then the tank will accelerate forever as long as the thruster is on. <br><br>Should I use one extra force,acceleration and Speed vector for the tank-movment perhaps like marc suggested? And then add that speed to the speed that comes from explosions/collisions. <br><br></td></tr></table><br>
<a name="486450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rather than manually capping the top speed you could have a drag force that gets applied to the tank. The drag force is applid in the oppositie direction to the tank velocity vector and is based on the speed of the tank. At top speed this drag force is equal to your acceleration force. <br><br>Then you dont have to worry about explosions / collisions / slopes. Just apply the total force at any moment in time and let the drag force do its thing.<br><br>Did that make sense ? <br><br></td></tr></table><br>
<a name="486531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> After you said that I first thougth that was the solution. But how do I calculate this dragForce? <br><br>if Speed.Length() &gt; MaxSpeed<br>   DragForce.SetDir(Dir+180)<br>   DragForce.SetLength(EngineForce)'<br>endif<br><br>This would result in that the engine force gives no effect to the tanks movement if it goes faster than MaxSpeed.<br><br>I have to somehow calculate the speed in the direction of the tank. If tank is thrown to the side by a force which accelerates the tank to 200pix/sec to left (seen from the tank itself). If then the MaxSpeed is 50pix/sec the tank should still be able to continue forward at this speed while it is pushed to the left at 200pix/sec resulting in a mix of the two. This works until I reach the maxspeed, whereas the tank just get's pushed away until the friction from the ground makes it go slower than maxspeed. I need a way of keeping track of the speed forward, or the speed that originates from the engineforce. So that I can cap that speed and not just see to the total. <br><br></td></tr></table><br>
<a name="486654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Game Physics really isnt something Ive done much in so hopefully someone else here will be able to point you in the right direction for something a bit more realistic.<br><br>If I had to have a stab at a simple simulation Id probably try something like this.<br><br>1. If accelerating then apply an acceleration force to the tank.<br><br>2. The tank naturally wants to stop so every frame apply a friction force to the velocity.<br><br>I guess the friction force should increase with speed. In order to cap the total speed of the tank you want the friction force to be equal to the acceleration force when the velocity is the top speed.<br><br>so.. a simple first stab if the acceleration is 10 and max speed is 50 then friction could be velocity / 10.<br><br>so each frame you have the current velocity vector. You add the acceleration vector to it then reduce the length of the veolcity vector by the friction.<br><br>Hopefully this would mean the tank would accelerate fast at first and slow down as it approaches the max speed. <br>If a force of 200 hits the side of the tank when it is moving at max then you can carry on applying the acceleration vector to the velocity vector but the friction would ensure the total velocity would keep dropping until you reach normal forward motion.<br><br>Of course the above friction formulae is not very good so youd have to come up with something better.. maybe something like <br>1. If velocity &lt; 50 then friction = 5<br>2. if velocity &gt;= 50 then friction = 5+(velocity-50)*(velocity-50)<br><br>I dunno Id keep playing around till the results looked pleasing to the eye.<br><br>Anyway.. thats my mindless thoughts.. hopefully soon someone else who knows about these things will give you a better solution. <br>Good luck with it. <br><br></td></tr></table><br>
<a name="486876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xi! = Xi! * Friction = drag.<br><br>Xi=Xi*0.95 = low friction. X=xi*1 = no friction. <br>Xi=xi*0.5 = Lots of friction.<br><br>(Xi being x inertia. repeat for all axis)<br><br>simple stuff but it works. <br><br></td></tr></table><br>
<a name="486885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simple dragforce could be calculated like this...<br><br>force = force - Dampingconstant * Velocity<br>[Basically the same damping often applied to springs]<br><br>There force is the current force acting on the tank and velocity of course is the speed of the tank.<br><br>So all in all it could look like this...<br><br>TotalForce = 0<br>TotalForce = TotalForce + ThrusterForce<br>DragForce = AirFrictionConstant * TankVelocity<br>TotalForce = TotalForce - DragForce<br><br>TankAcceleration = TotalForce/TankMass<br>TankVelocity = TankVelocity + TankAcceleration<br>TankPosition = TankPosition + TankVelocity<br><br>Depending on the AirFrictionConstant, the Dragforce will eventually cancel out the Thrusterforce when the velocity gets high enough.<br><br>A more correct dragforce calculation would also consider the area of the object but that is another story. <br><br></td></tr></table><br>
<a name="487007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>velocity :- (drag_constant * (velocity * velocity)) + friction_constant</pre> <br><br></td></tr></table><br>
<a name="487083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all replies! and Special Thanks to QuiteBloke which really nailed it for me and my game =)<br><br>So I solved the problem and..<br><br>This is what I did:<br>This was perset set before the game "starts"<br><pre class=code>Global k#=Friction/MaxSpeed</pre><br><br>This in the main-loop<br><pre class=code>Friction=Speed.Length()*k</pre><br><br><br>I didn't need to change anything else to make it work, except to comment out If Speed.Length() &lt; MaxSpeed.<br><br>I'm really impressed that a simple solution like that was what I was looking for lol.<br><br>Now I'm up for the task to actually make the tank act like a tank and not a spaceship =) <br><br></td></tr></table><br>
<a name="487135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im glad to have been of some help.. I never seem to get round to writing anything myself other than experimental code and the physics stuff I mentioned was just random rambling but as usual ( and thats what I like about this community ) others with actual knowledge filled the gaps.<br><br>Good luck with the coding :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
