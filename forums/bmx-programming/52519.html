<!DOCTYPE html><html lang="en" ><head ><title >So, to clarify...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >So, to clarify...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >So, to clarify...</a><br><br>
<a name="586526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've heard that short(16 bit) or byte(8 bit) variables offer no <br>speed advantages over int(32 bit).<br><br>This is because most processors only take data in 32-bit <br>chunks, right? <br><br>Now I wonder, is this blitz-specific?  For instance, in C, I'm <br>pretty sure you can have four seperate variables processed <br>in one 'pass' by a 32-bit processor if the variables are all <br>8-bit.  Does anyone here know about this?<br><br>I know there have been many times I wish I could declare <br>smaller-capacity variables as a tradeoff for increased speed <br>(up to 4x, theoretically).<br><br><br>ie  <br>array1:byte[800,600]<br>array2:int[800,600]<br><br>Array1 should run 4x as fast through the processor. <br><br></td></tr></table><br>
<a name="586528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You really shouldn't worry about this kind of thing.  If you want your applications to perform better, messing around with variable types is not the way to go.  The same goes for unrolling loops or using gotos and labels instead of functions.<br><br>If my memory serves me correctly, all byte values are converted to 32bit integers before operations are performed on them, at least for x86 processors, so there would be a very small speed penalty for using bytes instead of ints.<br><br>For all languages, choosing a better algorithm to perform a calculation and removing redundant calculations will always have a far greater effect than these minor changes.  In the current version of BlitzMAX, using FlushMem in the right place will also make a big difference (although the next update should improve the memory management side of things). <br><br></td></tr></table><br>
<a name="586534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recently converted all the Bytes used in my project to Ints (where I could) and I got 3-4% increase in speed, with a similar increase in memory usage.  I originally assumed using Bytes for any variable that would not be less than 0 or above 255 would be faster. <br><br></td></tr></table><br>
<a name="586536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I see, Robert.<br><br>I can't remember where I read this article, but I could swear <br>that it said some C programmers designed their functions so<br>that their variable sizes would add up to be multiples of 32 <br>so that they were fed to the processor more efficiently.<br><br>Am I mis-informed? <br><br></td></tr></table><br>
<a name="586544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Processors are so darn fast these days the performance difference wouldn't be worth 1/100th the effort to change all the variables. I would assume having the variables multiples of 32 would probably decrease fragmentation in the processor pipeline a little, but its not really gonna make any difference. <br><br></td></tr></table><br>
<a name="586559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It all depends on what you are doing.<br><br>In C++ when doing per pixel operations any speed increase was welcome and making a routine work with int instead of long or float sometimes gave a massive performance increase.<br><br>These days however we don't work at the per pixel level as a rule, so any speed gains tend to be minimal.<br><br>I would just use the variable type that is enough to hold your data ( so as not to be wasteful of memory ) and concentrate on honing your algorithms for any required speed increase.<br><br>Program it first and if it is fast enough all well and good, but if your routine is too slow only then consider optimisations. <br><br></td></tr></table><br>
<a name="586564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I once optimised the variable usage of a processor intensive func and sucesffully changed 5000ms calc time to 7700 ms calc time. I call it the bizarro optimization. and I wouldn't reccomend trying it, whatever the arctile says. <br><br></td></tr></table><br>
<a name="586569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I normally use bytes/shorts only for arrays and of course storing in disk. Maybe the speed penalty for one conversion byte-&gt;int is minor, but when you do that hundred times per sec, it's a lot of minor penalties you could avoid. <br>I always choose speed prior to memory usage (with limits of course). <br><br></td></tr></table><br>
<a name="586573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> With 64 bit processing, I'm sure the same question will arise once again.<br><br>They are valid points. <br><br></td></tr></table><br>
<a name="586590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> the best optimiser of code is often not the programmer but the compiler... <br><br></td></tr></table><br>
<a name="586596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bytes and shorts may actually be slower since they are not nessecarilly word aligned in memory (dunno if BlitzMAX pads them for you tho', I'm guessing not). <br><br></td></tr></table><br>
<a name="586681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can't remember where I read this article, but I could swear <br>that it said some C programmers designed their functions so<br>that their variable sizes would add up to be multiples of 32 <br>so that they were fed to the processor more efficiently. <br></div><br><br>I'd have to see the original article to be able to make any comment.  All I will say is to re-state my earlier point that low-level optimisations should really be left to the compiler. <br><br></td></tr></table><br>
<a name="586732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom Darby</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The best way to optimize your code is to pick the proper algorithms for the task at hand.  The vast majority of the time, an inefficient algorithm is to blame for poor performance... <br><br></td></tr></table><br>
<a name="586736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dubious Drewski</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Robert, I read that article a long while ago, and I'm pretty <br>sure it was on the internet, so it's probably gone.  You all <br>make good points.<br>I dunno.  I guess I was naively hoping there was some <br>hidden method to programming that was rarely shared and <br>taken advantage of.  (Something that would make my water <br>simulations go faster!)<br><br>(these: )<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=52378" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=52378</a> <br><br></td></tr></table><br>
<a name="586766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nelvin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was an article series at CUJ (or was it DrDobbs?) some months ago from Michael Abrash about optimizations these days. He wrote about simple (easy to follow) realworld examples where a linear search was faster than a binary serach until the searchspace was 64 elements - this was just because mispredicted branches are dead slow compared to braindead linear number/memorycrunching.<br><br>It's a pretty simple example why it depends very much on the situation, optimize an algorithm may be an option, optimize memorysize, memoryaccess, datatypes, whatever too - but the most important thing is - get used to profile your optimizations *and* understand what/why you optimize something in the way you do it.<br><br>Just turn ints into bytes won't work - chances are high that as soon as you don't know why and in which situation one or the other may be faster you won't get it right.<br>Finally keep in mind that most of your code doesn't need to be the most effective, hundrets, even thousands of simple operations aren't worth any effeorts if they only need 0.5% of your cpu time - double their speed will boost your app by only 0.25% - hardly worth anything. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
