<!DOCTYPE html><html lang="en" ><head ><title >Non-GCed types</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Non-GCed types</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Non-GCed types</a><br><br>
<a name="966243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since more than 75% of my types have to be manually freed due to circular references, why not allow an option for types to not use GC?  It would lighten the load of the garbage collector and give more control to the programmer.  Then you could use the garbage collector for types it was appropriate for, like vectors and small structures, and you wouldn't waste the cycles on types the programmer will have to manually free anyways.  It would give the best of both worlds. <br><br></td></tr></table><br>
<a name="966265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> +1 for that. It's a thing I like about C++, to have total control over your objects. <br><br>Would be nice if it could be added. Not sure if it's possible though. <br><br></td></tr></table><br>
<a name="966272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not sure if it's possible though.  <br></div><br>There's already a NoDebug option on functions isn't there?  So a NoGC should go along similar lines, and sounds like a sensible idea to me... <br><br></td></tr></table><br>
<a name="966282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As in a conditional compiler flag? That would work well for the programmer... <br><br></td></tr></table><br>
<a name="966300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds like asking for trouble. <br><br></td></tr></table><br>
<a name="966304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am suggesting something like this:<br><br>Type foo {nogc=1}<br>EndType<br><br>This type would not get managed by the garbage collector.  To delete a "foo":<br><br>foo.Delete() <br><br></td></tr></table><br>
<a name="966306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ambiguity and unnecessary trouble this would introduce isn't worth it. <br><br></td></tr></table><br>
<a name="966311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The ambiguity and unnecessary trouble this would introduce isn't worth it.  <br></div><br>The (standard) GC is never going to free these objects as they are self-referencing.  Being able to tell the GC to just not bother might conceivably yield some (small) performance improvement.  Now if that performance improvement is insignificant (it may be as standard GC is just a bean counter), then you're right.  But there could be mileage here.<br><br>Any potential inconvenience is on the head of the person that uses it, and that inconvenience will be memory leaks, that if they have an ounce of sense they will start looking at the memory they are managing themselves! <br><br></td></tr></table><br>
<a name="966312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The (standard) GC is never going to free these objects as they are self-referencing. Being able to tell the GC to just not bother might conceivably yield some (small) performance improvement. <br></div>It would be better if BMax had weak references to handle scenarios where cyclic references could occur (or if BMax just handled cyclic references correctly). <br><br></td></tr></table><br>
<a name="966313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see how it would be any more difficult if the type already has to be manually freed.  Almost all my types have a Free() method where they unlink all their references.  The question is whether relieving the garbage collector of 75% of the objects would make any difference. <br><br></td></tr></table><br>
<a name="966317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because you're mixing garbage collection with regular memory management.  It becomes much more confusing when you have to continually check which objects you have to free manually and which you have to disconnect for the GC. <br><br></td></tr></table><br>
<a name="966319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I already have to do that in every application I write.  Circular references are impossible to avoid except in very simple programs. <br><br></td></tr></table><br>
<a name="966321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Circular references are impossible to avoid except in very simple programs.  <br></div><br>Well, that's certainly not true.<br><br>This is mostly down to "bad design". <br><br></td></tr></table><br>
<a name="966326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is not so.  Show me how to make an entity class where the children can return the parent, the world can access every entity, and the parent can access the children.  All of these linkages are necessary. <br><br></td></tr></table><br>
<a name="966333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ideally, the reference the children have of the parent would be a weak reference.  I could probably do this using the threaded GC (it has a fairly simple way to designate a pointer as weak), but I don't think it's possible to do it with the regular GC without going in and storing a list of weak references to nullify when an object is collected, and even then it would have to have a weak reference assigned in the constructor of the object, so it wouldn't be automatic. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
