<!DOCTYPE html><html lang="en" ><head ><title >Calling C++ / external stuff via MAX</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Calling C++ / external stuff via MAX</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Calling C++ / external stuff via MAX</a><br><br>
<a name="760810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an external library; like an SDK. It has a C++ API and an interface DLL. I also have some header files typically used in C / C++. How can I, if at all, from BlitzMAX, interface with this external library and call those functions it has from Blitz? <br><br></td></tr></table><br>
<a name="760855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends very much on the origin. If it is specifically for C++ developers it will need a C glue layer, if it's for both C and C++ I tend to import the C api example from blitzmax to start with to make sure I can build/run the test code from mingw/blitzmax:<br><br>Import "apiexample.c"<br><br>I then rename the main() function in the example code to apimain() and then call it from blitzmax after declaring apimain an external "C" function in blitzmax:<br><br>Extern "C"<br>Function apimain(args...)<br>End Extern<br><br>There are several million problems you may need to deal with so unless you are a skilled C/C++ programmer you may want to divulge ALL information in your posts, when it comes to C/C++ the important details will always be in the specifics. Every API is going to be different and unless they specifically mention MingW compatability you are possibly going to meet a lot of resistance. <br><br></td></tr></table><br>
<a name="760866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just double checked; the origin is all C++ stuff. I have a bunch of header (.h files) and a DLL. + a doc describing the C++ functions. Thats about it ... <br><br></td></tr></table><br>
<a name="760869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the headers feature some type of <br><pre class=code>
extern "C"{
</pre><br>notation it may well be designed for C interfaces. If not and the C++ objects defined are not com based extending IUnknown/IDispatch then I would guess a BlitzMax interface is going to need a rather large amount of glue code.<br><br>Does the DLL in question have to be such a big secret? <br><br></td></tr></table><br>
<a name="760887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> None of the .h files has the extern "C" ... guess I am screwed then <br><br></td></tr></table><br>
<a name="760965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> guess I am screwed then <br></div><br>That's a bit defeatist, don't ya think?<br><br>I had thought wrapping a C++ library (with no C++ experience) was going to be a show-stopper for me too... but after hacking a couple of C libraries (which don't require much glue), it turned out that it wasn't so hard after all.<br><br>I ended up using both the tiny documented example in the Blitz help, and browsing through Skid's FLTK glue to give me a guide as to what I could do. (Thanks Skid! :-)<br><br>Essentially, I end up with a .cpp file of my own which I use Extern "C" to expose some of my own functions which can call into C++ objects etc.<br>Of course, you need to know a bit of C/C++, but if you intend wrapping an external library, it's to be expected (I usually learn what I need to know as I go :-p )<br><br>I would suggest taking a look at some of the already-wrapped libraries that people have done to point you in the right direction. <br><br></td></tr></table><br>
<a name="761048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like a plan! I will see if I can find Skid's FTLK glue ... <br><br></td></tr></table><br>
<a name="761171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer<br><br>Can i email you the .h files and you could "possibly" show me how I would do it, if its "doable"? <br><br></td></tr></table><br>
<a name="761180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not just say what it is you are trying to wrap? There are some things that we know can be wrapped and in fact ppl have wrapped. And some things that we already know cannot be wrapped. <br><br></td></tr></table><br>
<a name="761182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can i email you the .h files and you could "possibly" show me how I would do it, if its "doable"?  <br></div><br><br>sure, email address is in my user info <br><br></td></tr></table><br>
<a name="761217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skid<br><br>I sent you a personal email including some highly confidential information and files.<br><br>Thanks!!!! <br><br></td></tr></table><br>
<a name="761720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skid<br>did you receive the files I sent? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
