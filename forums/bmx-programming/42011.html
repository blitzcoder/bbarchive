<!DOCTYPE html><html lang="en" ><head ><title >Extern, how to import a function and rename it ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extern, how to import a function and rename it ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Extern, how to import a function and rename it ?</a><br><br>
<a name="471143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> With userlibs you could do:<br>DesiredName():"realname"<br><br>I have noticed in various mods that in bmax you can do:<br>function Desiredname()="realname"<br><br>...but I can't get it to work. Help anyone ? <br><br></td></tr></table><br>
<a name="471169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is only allowed within the "extern - endextern" part.<br><br>the name you have within "" must be a function that can be found in the imported C ( C++, ObjC, ASM ) sourcecode. <br><br></td></tr></table><br>
<a name="471177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  That is only allowed within the "extern - endextern" part. <br></div><br><br>Please read my topic title. I am using the "Extern" tags, but it doesn't think the function exists. <br><br></td></tr></table><br>
<a name="471193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> is the functionname within "" written right and with the right amount of parameters for input and output? ( don't know if input and output types need to be the same as well )<br><br>the 'Import "somesource.c"' (.c or what ever type of source you have ) is before extern - endextern, right?<br><br>perhaps you might want to post the source of the declaration of extern and C / C++ of the function which the compiler does not like as well. <br><br></td></tr></table><br>
<a name="471224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
module blah.blah
Extern "win32"
	Function RegisterClassLALALALALALAL(lpWndClass:Byte Ptr) = "RegisterClassExA"
end extern
</pre><br><br>Win I try and build this module I will get the following error:<br><div class="quote"> Compile Error:Identifier 'RegisterClassExA' not found <br></div> <br><br></td></tr></table><br>
<a name="471247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah you use some of the predefined things.<br><br>I'm sorry in that case I think it is predefined in the Win32 compiler directive, so you can just do<br><br> Function RegisterClassExA(pcWndClassEx:Byte Ptr)<br><br>The '= "..."' is not needed in this case.<br>I don't know if you can rename it somehow ...<br><br>Problem is there is no description on the 'extern "OS directive"' stuff in the help, so only mark might give you a answer. <br><br></td></tr></table><br>
<a name="471277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I was already doing it without renaming. I'll wait and see what mark/skid's answer is. If they give one. <br><br></td></tr></table><br>
<a name="471328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Compile Error:Identifier 'RegisterClassExA' not found
</pre><br><br>This should work. Can you post runnable code? <br><br></td></tr></table><br>
<a name="471394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This works:<br><pre class=code>
extern "Win32"
 Function RegisterClassExA(pcWndClassEx:Byte Ptr) 
endextern</pre><br><br><br>This does not work and results in the compile error above:<br><pre class=code>
Extern "win32"
 Function RegisterClassLALALALALALAL(lpWndClass:Byte Ptr) = "RegisterClassExA"
end extern</pre><br><br>( renaming the somewhere predefined RegistarClassExA from user32.dll is not possible, at least not on this way ) <br><br></td></tr></table><br>
<a name="471440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora is correct, renaming in that example does not work. <br><br></td></tr></table><br>
<a name="471464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could keep the externs private and then make your own function that calls them with your new name. Sure, ugly, but it works. <br><br></td></tr></table><br>
<a name="471529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the trouble was coming when I wanted to do just that. But trouble is when it comes to seperating an api func that has the name of the blitz function already in use. In that situation it is desirable to append "api" "_" or some other token on the end of the api function call. <br><br></td></tr></table><br>
<a name="471537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Extern "win32"
 Function RegisterClassLALALALALALAL(lpWndClass:Byte Ptr) = "RegisterClassExA"
end extern
</pre><br><br>This works here - ie: no error.<br><br>However, actually calling RegisterClassLALALALALALAL results in:<br><br>F:/blitzmax/tmp/.bmx/untitled1.bmx.d.o(code+0x1e1): undefined reference to `RegisterClassExA'<br><br>Not the error above, so not sure what's happening there.<br><br>To fix the link error, you need to manually mung the symbol, ie:<br><br><pre class=code>
'This works on my machine!
Extern "win32"
 Function RegisterClassLALALALALALAL(lpWndClass:Byte Ptr) = "_RegisterClassExA@4"
End Extern

RegisterClassLALALALALALAL Null 'just testin'
</pre><br><br>If you've got mingw installed (and mingw/bin in your path), you can use the 'nm' utility to look at symbols in an object or archive file, eg:<br><br>cd \blitzmax\lib<br>nm libuser32.a <br><br></td></tr></table><br>
<a name="471549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, the decorated function name has to be used *learned something again ...* <br><br></td></tr></table><br>
<a name="471670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah that answers it X) Thanx! <br><br></td></tr></table><br>
<a name="471697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ziltch</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good if to know .  Thanks !<br><br>It would be good if the error used the decorated function name. <br><br></td></tr></table><br>
<a name="471711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's a bug of sorts, as I Imported some ASE loader C++ code, wrote a wrapper function, then compiled it(Without error, gcc tools, using bmk)<br>And no amount of externing let me link to it..same error as above. "TLoadASE" not defined. (But it was...clearly. With or without redefining it's name.)<br><br>-Edit Just saw mark's post about the symbolising gcc does..could be that. <br><br></td></tr></table><br>
<a name="471837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate to say this, but it still doesn't work. Even after getting the nm output and correcting the ="_function name@paramsize"<br><br>This is a bug me thinks. <br><br></td></tr></table><br>
<a name="471845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you will need to remove the "win32" declaration if you are declaring fully decorated names. <br><br></td></tr></table><br>
<a name="471852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> not really ... at least compared to marks posting above <br><br></td></tr></table><br>
<a name="471892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> What would I put instead of "win32" .. ?<br><br>I have tried "", or just extern. Both give errors when trying to makemods. If I put an import "win32" and then extern (with nothing else) after, it has the same errors. If  I import the individual library files using import "-luser32.a" and then a blank extern, yes thats right, same errors.<br><div class="quote"> <br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(kernel32.bmx.o)(code+0x48): undefined reference to `_GetModuleHandleA@4'<br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(kernel32.bmx.o)(code+0x5c): undefined reference to `_GetModuleHandleA@4'<br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(user32.bmx.o)(code+0xda): undefined reference to `_GetClassInfoExA@12'<br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(user32.bmx.o)(code+0x164): undefined reference to `_RegisterClassExA@4'<br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(user32.bmx.o)(code+0x185): undefined reference to `_UnregisterClassA@8'<br>[ERROR]: e:/creation/tools/blitzmax/mod/skn3.mod/win32.mod/win32.a(user32.bmx.o)(code+0x1dc): undefined reference to `_CreateWindowExA@48'<br> <br></div><br><br>This is really frustrating me now, and I have run out of ideas. <br><br></td></tr></table><br>
<a name="472013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> did you check if this actually is really the decoration function name?<br><br>This decoration might vary from compiler to compiler ( as users of visual C++ know with its cryptic decoration ;) ) <br><br></td></tr></table><br>
<a name="472014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I checked as suggested by mark using the nm commandline tool that comes with minGW <br><br></td></tr></table><br>
<a name="472019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> the win32.i file says "GetModuleHandleA@4" without the _ in front of it ...<br>perhaps different mingw / gcc versions behavior?<br><br>*note: I replaced the original BM pub.win32 with birdies from the sample because it better covers the winapi* <br><br></td></tr></table><br>
<a name="472020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skn3</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was looking at the library files in the libs folder. I'll give it a try..<br><br>Your kidding me.. it actualy feckin worked !!<br><br>Thank - you :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
