<!DOCTYPE html><html lang="en" ><head ><title >Is BMax fast enough for realtime sound synthesis?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is BMax fast enough for realtime sound synthesis?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Is BMax fast enough for realtime sound synthesis?</a><br><br>
<a name="794233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..like FM, with filters, some DSP's like delay/reverb/chorus etc, at least at 44.1MHz *err* Khz ^_^ /16bit/stereo, and then some channels.. <br><br></td></tr></table><br>
<a name="794280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >errno!</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> we do real time image processing in our apps, so audio shouldn't be a problem if you have a decent cpu. <br><br></td></tr></table><br>
<a name="794518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can never be sure until you actually try it :) <br><br></td></tr></table><br>
<a name="794549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess you have to figure out how many Shorts of memory space is required per second to play 44.1MHz audio. That's 44.1 million samples per second. I think you're mistaken that it's actually KHz not MHz, which is 44100 samples per second which is not a whole lot. So you need to generate 44k of data every second, which is less than 1k per frame at 60fps. Then double that for stereo. Then add some time for adding effects it, it is very doable. If the old Amiga 500 could do 8 channels of 8-bit mixed audio in OctaMED with a lowly 7Mhz 68000 cpu I think you can do far more with greater ease these days. <br><br></td></tr></table><br>
<a name="794552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Err right, KHz .. Freudian slip I guess ^_^<br><br>But those A500 were doing the stuff in native ASM I guess? I actually don't know how VSTi's are doing their native stuff, C++ or ASM. Even so, Is C++ without inline asm comparible with BMax' performance? <br><br></td></tr></table><br>
<a name="794565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes +- as most of the underlaying libraries are GCC (3.3 - 3.4) compiled unless you are on OSX where it is XCode 2.2 <br><br></td></tr></table><br>
<a name="794568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Canardian</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the A500 CPU was 7MHz, but it had also Co-CPUs like Denise, Agnus, Copper, etc...<br>And the 680x0 Assembler is almost like writing in Basic, the x86 Assembler is just hell with all those stupid segment pointers and useless crap. <br><br></td></tr></table><br>
<a name="794600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well the A500 CPU was 7MHz, but it also Co-CPUs like Denise, Agnus, Copper, etc... <br></div><br><br>The Amiga's sound coprocessor, Paula, would only do hardware level mixing of four 8-bit channels. Octamed faked 8 distinct channels using real-time CPU level mixing, so the original statement above still stands...<br><br>(BTW: The copper was a sub compoment within Agnus, not a seperate chip) <br><br></td></tr></table><br>
<a name="794625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> so euhm, I figure one needs some sorta buffer one updates with new data once the buffer is empty, meanwhile the system plays what's in the buffer .. ?<br><br>How would one do this in BMax - if it's natively possible at all! - ? <br><br></td></tr></table><br>
<a name="794630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps you could use CreateStaticAudioSample and pass your buffer as the first parameter, and then create a TSound object from that using LoadSound( myStaticAudioSample ).<br><br>However, I'm assuming LoadSound will load the whole of the audio sample into memory when it is called instead of creating a TSound that is streaming the data in from the audio sample you created, and if that is the case it won't work at all.<br><br>Looking at the code doesn't reveal much info, sadly. <br><br></td></tr></table><br>
<a name="794639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did realtime synthesis in B3D, I thought you had too. Fair enough I had to write a WAV for each section of sound to play and play it a little laggy, but itworked.<br><br><br>Max should be able to do this easily. I was actually thinking of converting the max sound system to use realtime synth instead of samples due to how borked max default sound system is when used on my system. <br><br></td></tr></table><br>
<a name="794641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did synthesis indeed, but only by writing raw data to a file, and loading it back into soundforge orso, to check .. :P<br><br>Obviously I'm not really interested in this non-realtime method. <br><br></td></tr></table><br>
<a name="794654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
SuperStrict
Graphics 1024,768,0,0

Global Quit:Int = False

Global sample:TAudioSample = TAudioSample.Create(100000, 22050, SF_STEREO16BE)
Global sampleData:Byte[100000] 

	Print sample.length

Function getSampleLength:Float(sample:TAudioSample)
	Return Float( (sample.length / Float( (sample.hertz * 60) ) ) * 60)
End Function



Function drawWave(sample:TAudioSample)
	Local x:Int, y:Int
	Local xscale:Double = sample.length/GraphicsWidth()
	For x = 0 Until sample.length Step 2
		y = sample.samples[x]
		If (y &gt; 0) Then
			SetColor(255,y,y)
			DrawLine((x/xscale)-1, sample.samples[x-1], x/xscale, y)
			'DrawLine((x/xscale)-1, Abs(sample.samples[x-1]-255)+255, x/xscale, Abs(y-255)+255)
		End If
	Next
End Function

For Local m:Int = 0 Until 100000
	sample.samples[m] = Sin(m)*100
Next

Local sound:TSound = LoadSound(sample)
Local channel:TChannel = PlaySound(sound)

While Not Quit
	Cls
	drawWave(sample)
	Flip

	If KeyDown(KEY_ESCAPE) Then quit = True
Wend
End
</pre><br><br>My first attempt at sound synthesis... <br><br></td></tr></table><br>
<a name="794655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's predefined synthesis, not realtime. (actually, it's just a sample player, without filters I highly doubt it's to be called 'synthesis' at all)<br><br>I highly wonder whether BMax can do realtime synthesis at all, not in terms of performance power, but pure in terms of functionality. <br><br></td></tr></table><br>
<a name="794657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about using something like <a href="http://www.portaudio.com/" target="_blank">PortAudio</a>? <br>The API looks straight forward enough, and its cross-platform.<br><br>EDIT: i was poking around the mods dir, and saw <b>axe.portaudio</b> =)<br>      there is even an example that apears do to realtime synthesis. <br><br></td></tr></table><br>
<a name="794658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not seeing any way to do it, of course I'm still a relative BMax noob. It doesn't look like there's any direct way to get at the audio driver though. <br><br></td></tr></table><br>
<a name="794699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see why Perturbatio's code is not considered relevant. If this is how you have to do it in BlitzMax then what's the issue? <br><br>You have to create a dummy sound bank of some kind, then it has to be passed to the sound system which is what LoadSound does, then played.<br><br>I think what I would do, though, is create a larger sound and make sure it is looping. Then it's a matter of modifying the part that is not playing (kind of like a double buffer) so that when it loops around it plays the other part.<br><br>But I'm not sure if THAT is possible. <br><br></td></tr></table><br>
<a name="794706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> what I had in mind:<br><br>loop<br>  fill buffer1 (generate sound)<br>  play buffer2 once/no loop<br><br>  fill buffer2 (generate sound)<br>  play buffer1 once/no loop<br>forever<br><br>Thing of attention: is the transition between playing buffer1 and buffer2 seamless and inaudible? <br><br></td></tr></table><br>
<a name="794709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ask REDi, the author of MaxMod (a music module playing, um, module for BMax), as it (probably) has to create the waveform in realtime based on the  music mod data and have it played by Bmax somehow.<br><br>CS_TBL: Since the playback rate is far slower than the speed at which the buffers can be switched, I don't think the transition would be noticeable. Now, this is assuming that the data can be *written* to the audio 'backbuffer' in a timely manner (complete before the 'frontbuffer' has reached the end). If the buffer(s) are too small, then there may not be enough time, etc. Lots of testing would need to be done on different systems to find a good average buffer size, I guess.<br><br>Russell <br><br></td></tr></table><br>
<a name="794722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> CS_TBL, I did it by way of using the WAV file as the current buffer, then loading and playing it when "full". Blitzmax is plenty fast enough, really.<br>ONe thing the buffer switch thing- it CAN be audible. I wonder how the large projects do it.<br><br>Would the code I used in a QBASIC game to directly proram the SB card be of use here? (to see how it was done..) if so, i can go find the source. <br><br></td></tr></table><br>
<a name="794726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus: but that's 'one whole sample', right? What I'm referring to is non-stop processing. For instance, playback of a sawtooth with a lowpass filter, with the filterfreq being controlled by the mouse. Or uhm.. 6-op FM synthesis, where one can change operator ratios, levels, envelopes, shapes, scales etc. in real time.<br><br>So, the whole generate non-realtime, save as wave, load &amp; play wav, is completely not what I'm wondering about. <br><br></td></tr></table><br>
<a name="794757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> You arent really going to be able to generate one sample at a time and play it, ie making thousands of calls to `play one sample`. Good luck. But you can pre-generate some sound and then apply a filter to it. If you have a small enough buffer the user will experience it as responsive. <br><br></td></tr></table><br>
<a name="794762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course the intention was not to generate one sample at a time, rather I'd fill a buffer of -say- 1024 samples, play it, while I continue calculating in the other buffer. The filter was a mere example, what I'm opting for is advanced FM. <br><br></td></tr></table><br>
<a name="794838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'ere be a test.<br><br>2 issues:<br>- obvious stutter, is this all BMax can do, or am I coding p00?<br>- What's up with that sample format? I clearly chose a 16bit signed format, and yet the result seems to be 8bit unsigned. o_O (move mouse below 127)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Const freq:Int=44100
Const updatespeed:Int=10
Const buffersize:Int=freq/updatespeed

Global my:Int ' mouse y position

Local buffer:TAudioSample[2]
	buffer[0]=CreateAudioSample(buffersize,freq,SF_STEREO16BE)
	buffer[1]=CreateAudioSample(buffersize,freq,SF_STEREO16BE)
	
Local channel:TChannel[2]
	channel[0]=AllocChannel()
	channel[1]=AllocChannel()
	

Local sound:TSound[2]
	sound[0]=LoadSound(buffer[0])
	sound[1]=LoadSound(buffer[1])

Local timer:TTimer=CreateTimer(updatespeed)

Graphics 640,480

Local currentbuffer:Int
Local t:Int


Repeat
	WaitEvent()
	
	If EventID()=EVENT_TIMERTICK
	
		PlaySound sound[currentbuffer],channel[currentbuffer]
		
		currentbuffer=1-currentbuffer
		
		Cls				
		
		calcnew buffer,currentbuffer
		sound[currentbuffer]=LoadSound(buffer[currentbuffer])
		
		SetColor 255,255,255
		For t=0 Until Min(buffersize,640)
			Plot t,240+buffer[currentbuffer].samples[t]
		Next
		DrawText my,0,0
		Flip
	EndIf
	
	my=MouseY()
	
	If KeyDown(KEY_ESCAPE) End
Forever


Function calcnew(buffer:TAudioSample[],index:Int)
	Local ratio:Int=Rnd(15)
	Cls
	Local a:Int
	For Local t:Int=0 Until buffersize
		a=Sin((t*ratio))*my
		buffer[index].samples[t]=a
		SetColor 255,128,64
		Plot t,240+a
	Next
End Function
</textarea> <br><br></td></tr></table><br>
<a name="794871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been playing around a bit with your code and it seems to work reasonably well like this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Const freq:Int=11025
Const updatespeed:Int=10
Const buffersize:Int=(freq/updatespeed) * 32
Print "Buffer Size: "+buffersize
Const numBuffers:Int = 2
Const numChannels:Int = 40
Const numSounds:Int = numChannels'20

Global my:Int ' mouse y position

Local iterator:Int
Local currentbuffer:Int
Local currentChannel:Int
Local t:Int

Graphics 640 , 480

Global buffer:TAudioSample[numBuffers]
	For iterator = 0 Until numBuffers
		buffer[iterator]=CreateAudioSample(buffersize,freq,SF_STEREO16BE)
	Next
	
Global channel:TChannel[numChannels]
	For iterator = 0 Until numChannels
		channel[iterator]=AllocChannel()
	Next
	

Global sound:TSound[numSounds]
	For iterator = 0 Until numSounds
		sound[iterator] = LoadSound(buffer[0])
	Next

Local timer:TTimer=CreateTimer(updatespeed)
calcnew buffer,currentbuffer

Repeat
	WaitEvent()
	
	If EventID() = EVENT_TIMERTICK
	
			currentChannel = getAvailableChannel()
			
			PlaySound sound[currentbuffer],channel[currentChannel]
			currentbuffer = currentbuffer Mod numBuffers
			Cls
			calcnew buffer,currentbuffer
			sound[currentChannel]=LoadSound(buffer[currentbuffer])
	
		

		SetColor 255,255,255
		For t=0 Until Min(buffersize,640)
			Plot t,240+buffer[currentbuffer].samples[t]
			'DrawLine t-1, 240+buffer[currentBuffer].samples[t-1], t,240+buffer[currentbuffer].samples[t]
		Next
		DrawText my,0,0
		Flip
	EndIf
	
	my=MouseY()
	
	If KeyDown(KEY_ESCAPE) End
Forever


Function calcnew(buffer:TAudioSample[] Var,index:Int)
	Local ratio:Int=8'Rnd(15)+1
	Cls
	Local a:Int
	For Local t:Int=0 Until buffersize
		a=Sin((t*ratio))*my
		buffer[index].samples[t]=a
		SetColor 255,128,64
		Plot t,240+a
	Next
End Function

Function getAvailableChannel:Int()
	For Local i:Int = 0 Until numChannels
		If Not ChannelPlaying(channel[i]) Then Return i
	Next
	Print "no channel available"
	Return 0
End Function
</textarea><br><br>Part of the stuttering problem appears to be that the buffersize is incorrect.  I discovered this with my sound generation code above, in that the produced sample played for about half the calculated buffer duration.<br><br>Also added channel switching, the numbers need tweaking, but it's going somewhere... <br><br></td></tr></table><br>
<a name="794877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> hm.. sofar it looks like overkill to me. Does it really have to be this complex? One would estimate that 2 channels would be plenty for "double-buffering", as they're not, I wonder how suitable BMax' sound/audio commands are. They're perfect for games I guess, but for sound generation like this I think one needs a whole different approach. See, playing audio like this is quite a lowlevel job I think, and currently we're trying to do the same using high-level game-oriented commands. -I think-<br><br>I propose an TAudiostream class, low-level, which doesn't bother the user with details that could be filled-in by the class itself (sounds, channels, buffers), just some methods to put a user array onto a queue, and meanwhile a playback method just plays what's in the queue! :-) <br><br></td></tr></table><br>
<a name="794880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of a user array on the queue, wouldn't you be better off with a circular/ring buffer? <br><br></td></tr></table><br>
<a name="794884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess those circular buffers are practical when playback runs in sync with cycling/generating, e.g. as it happens with delay lines. I assume the circular buffering you refer to also implicates per-sample processing..? But what if playback is faster or slower than generating? <br><br></td></tr></table><br>
<a name="794896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you know how fast the sample is playing you can regulate the generation of new samples. Not a big deal. <br><br></td></tr></table><br>
<a name="794906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So, the whole generate non-realtime, save as wave, load &amp; play wav, is completely not what I'm wondering about. <br> <br></div><br><br>No, im not generating te whole sample, i'm using the wav as a sound buffer. In max the code could be converted to do things properly. Maybe I'm generating 20ms of audio, saving,playing back. there are snaps but thats because generating a wav and plaing it back instead of feeding the data to a sound buffer is very inefficient.<br><br><br>But, if this technique works, Max is going to be capable of sound synthesis, thats pretty much what I was saying ;)<br><br>Hey, How does one usa a "circular" buffer eh? thatd be piss easy to work with :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
