<!DOCTYPE html><html lang="en" ><head ><title >Incbin and Framework</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Incbin and Framework</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Incbin and Framework</a><br><br>
<a name="1095280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hacing a small problem here. Incbin is not working if I use a framework.<br><br>Code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

SuperStrict

Framework brl.max2d
Import brl.d3d7max2d
Import brl.standardio
Import brl.System
Import brl.event
Import brl.eventqueue
Import brl.Blitz
Import brl.basic

SetGraphicsDriver D3D7Max2DDriver()
'SetGraphicsDriver GLMax2DDriver()
Graphics( 640,480 )

Incbin "test2.png"

Local p1:TPixmap = LoadPixmap("incbin::test2.png")
'Local p1:TImage = LoadImage("incbin::icon_folder_sm.jpg")

Print p1.width
Repeat
	Cls
	SetColor 255,255,255
	'DrawImage p1,10,10
	DrawPixmap p1,10,10
	
	DrawRect 50,50,5,5
	
	Flip
	
	WaitEvent()
	If AppTerminate() Then End
Forever
</textarea><br><br>I may be missing some Mod to import, but not sure which one since brl.blitz is where Incbin resides.<br><br>Ideas? I've tried upgrading Blitzmax 1.42, and tried switching the driver (which led to me finding a bug), and tried to test if the image was corrupt (its not). <br><br></td></tr></table><br>
<a name="1095281"></a>

<a name="1095282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pengwin</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When using the max2d framework, you also need to import brl.pngloader to be able to use png images.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1095286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> THanks, i knew it was something my half-brain was missing. <br><br></td></tr></table><br>
<a name="1095316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pengwin</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to clarify, when not using a framework, I believe BlitzMax imports all modules, or at least all the brl modules. However, when you do use a framework, it only loads the modules specified by that framework, so anything else must be imported. <br><br></td></tr></table><br>
<a name="1095335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I figured, thanks, but am actually having a major problem with incbin in a larger program, so am at my wits end.<br><br>Is there another way to include binary files other than incbin? <br><br></td></tr></table><br>
<a name="1095372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pengwin</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you post some code so we could see the problem? <br><br></td></tr></table><br>
<a name="1095383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can now, as I've finally replicated the problem in a smaller set of code.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

SuperStrict

Framework brl.blitz
Import maxgui.win32maxguiex
Import brl.pngloader

'Import MaxGUI.maxgui
'Import brl.Max2d
'Import pub.openGL
'Import BRL.D3D7Max2D
Import BRL.GLMax2D
Import BRL.EventQueue
Import BRL.Event
Import BRL.Timer
Import brl.threads
Import brl.math
Import brl.blitz
'Import bah.freeimage 
'Import brl.jpgloader

'Import brl.bmploader
Import brl.Pixmap

'SetGraphicsDriver D3D7Max2DDriver()
SetGraphicsDriver GLMax2DDriver()
Graphics( 640,480 )

Incbin "test2.png"

'Local p1:TPixmap = LoadPixmapPNG("incbin::test2.png")
Local p1:TPixmap = LoadPixmap("incbin::test2.png")
'Local p1:TImage = LoadImage("incbin::icon_folder_sm.jpg")

'Print Long( IncbinPtr("incbin::test2.png"))
Print p1.width
Repeat
	Cls
	SetColor 255,255,255
	'DrawImage p1,10,10
	DrawPixmap p1,10,10
	
	DrawRect 50,50,5,5
	
	Flip
	
	WaitEvent()
	If AppTerminate() Then End
Forever
</textarea><br><br>The original code was using bah.freeimage, but it seems I've managed to replicate the problem:<br>It's the order of the imports/framework.<br><br>Very strange, and it's taken quite a while to isolate the problem. <br><br></td></tr></table><br>
<a name="1095384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> AHA! got it, I needed to import max2d BEFORE the png or freeimage modules....<br><br>wow, took a couple days.... ugh<br><br>thanks for your encouragement. <br><br></td></tr></table><br>
<a name="1095537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pengwin</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad you got it sorted. <br><br></td></tr></table><br>
<a name="1095670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may want to try Framework Assistant, it's pretty good at auto-generating the list of imports necessary for your program. <br><br></td></tr></table><br>
<a name="1144618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> How on earth do you determin which part of Blitz you need to Import?<br><br>i like the idea of beig able to shrink the file <br><br></td></tr></table><br>
<a name="1144620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How on earth do you determin which part of Blitz you need to Import?<br><br>i like the idea of beig able to shrink the file  <br></div><br><br><div class="quote"> ou may want to try Framework Assistant, it's pretty good at auto-generating the list of imports necessary for your program.  <br></div> <br><br></td></tr></table><br>
<a name="1144684"></a>

<a name="1144687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol i didn't see that. <br><br>Cant believe i missed it! was working at the time of reading<br>(im a new buyer of BlitzMax)<br><br>Where is this tool?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1144692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://homepage.ntlworld.com/config/fa/index.htm" target="_blank">http://homepage.ntlworld.com/config/fa/index.htm</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
