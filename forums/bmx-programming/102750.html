<!DOCTYPE html><html lang="en" ><head ><title >LoadDir/ReadDir not working</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >LoadDir/ReadDir not working</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >LoadDir/ReadDir not working</a><br><br>
<a name="1231201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadDir always returns null, no matter what path it's given. The LoadDir example code does this, too. ReadDir returns a valid handle, but NextFile always returns a blank string. This is on Windows 8 and using BlitzMax 1.50. Is there something I might be doing wrong? <br><br></td></tr></table><br>
<a name="1231213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you install BlitzMax to C:/BlitzMax?<br><br>Certain folders in Windows since Vista get a bit picky about user permissions which may be the cause of the example code not working. <br><br></td></tr></table><br>
<a name="1231228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both examples work fine for me.  Using Windows 8.1 64bit and BMax 1.50 <br><br></td></tr></table><br>
<a name="1231260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Goober</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive had this problem as well. LoadDir will return an array of 0 strings. There dossnt seem to be any reason for this behavior. Ive constructed a workaround as the files were of images. I use tilesets and LoadAnimImage () to store them in a TImage object. <br><br></td></tr></table><br>
<a name="1233805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wickworks</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using it in my project for the last year and it's been fine but it just suddenly stopped working for me.<br><br>I can run an archived exe but if I recompile the same code it now crashes since ReadDir is returning a directory with no files in it. The example snippet also returns nothing.<br><br>Windows 8 64bit BMax 1.48.<br><br> --&gt; <b>FIX</b> : I just uninstalled / installed BMax 1.50 and it functions correctly. So I dunno if it was the reinstall or the upgrade, but I'm relieved that it works. <br><br></td></tr></table><br>
<a name="1233808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you been making a module at all?<br><br>If so, then choose 'Rebuild all modules'.<br>Thats the first thing I would do. <br><br></td></tr></table><br>
<a name="1234937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also have this problem... what you can do is build all modules first.... then reinstall bmax 1.50 and it works...<br><br>For every time you build modules you have to reinstall bmax 1.50 to make it work again... :| <br><br></td></tr></table><br>
<a name="1236144"></a>

<a name="1236145"></a>

<a name="1236146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still no solution or workaround? I really need this functionality. <br><br></td></tr></table><br>
<a name="1236150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Did you try 'rebuilding all modules'? <br><br></td></tr></table><br>
<a name="1236162"></a>

<a name="1236163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here are two example exe's and the source : <b><a href="http://brucey.net/programming/blitz/misc/stuff/list_test.zip" target="_blank">list_test.zip</a></b> 100kb<br><br>You can run them from the command line. Without any args it lists the current directory, or you can pass a path in and it will list that.<br><br>list.exe is built with BlitzMax 1.50 and TDM MinGW 4.8.1<br>list_ng.exe is built with a c-based version of BlitzMax on slightly modified 1.50 modules, and TDM MinGW 4.8.1<br>Built on Windows 7 Pro, 64-bit.<br><br>Source is provided so you can build it yourself too.<br><br>Example output:<br><pre class=code>
C:\Users\brucey\000_programming\BlitzMax_NG\src&gt;list_ng
List : C:/Users/brucey/000_programming/BlitzMax_NG/src
.
..
.bmx
flag.png
gfx1.bmx
gfx1.exe
helloworld.bmx
helloworld.exe
list
list.bmx
list.bmx.bak
list.debug.exe
list_ng.exe
list_test.zip
pngload.bmx
pngload.bmx.bak
pngload.exe
</pre> <br><br></td></tr></table><br>
<a name="1236268"></a>

<a name="1236270"></a>

<a name="1236271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Running the application lists the files like it should. Building on Windows 8 64-bit using Blitzmax 1.50, no files are listed. Strangely, it seems to work fine using Blitzmax 1.40. <br><br></td></tr></table><br>
<a name="1236283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great.<br><br>Would you be so kind as to send me the exe's (for both debug and release), as well as the .bmx folder (which contains the generated assembler).<br><br>And perhaps also your brl.filesystem folder (mod/brl.mod/filesystem.mod) (including its .bmx folder).<br><br>And some other useful information, like what (if any) MinGW version you have installed.<br><br>Thanks!<br><br>:-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
