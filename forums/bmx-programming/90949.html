<!DOCTYPE html><html lang="en" ><head ><title >Mutex</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mutex</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Mutex</a><br><br>
<a name="1034980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not getting this Mutex &amp; LockMutex thing.<br><br>How many Mutexes can be created?<br><br>Does one LockMutex lock all the variables a thread is using?<br><br>Jim <br><br></td></tr></table><br>
<a name="1034982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does one LockMutex lock all the variables a thread is using? <br></div><br>As I understand it, a mutex doesn't actually "lock" anything.<br><br>You would normally manually set/check the status of a mutex before executing threaded code.  See TryLockMutex(). <br><br></td></tr></table><br>
<a name="1034987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can create as many Mutexes as you need. They actually block entire thread execution if another thread has a lock. For example:<br>-If you have thread "A" that writes the value of a variable, and<br>-you have thread "B" that reads the value of a variable,<br>-then you don't want thread "A" writing to that variable while thread "B" was reading from it (the read may happen while the individual bits are being changed at a low level)<br>So, if thread "A" were to lock before writing, and unlock after writing, then when the lock were called from Thread "B", execution would halt until thread "B" received its lock (locks happen in-turn).<br><br>The reason why you can have multiple Mutexes is that if you only had one, and you used it for 2 variables, then there would be times that execution could be blocked while thread "A" was writing to variable 1, and thread "B" was reading/writing to variable 2. So essentially, the Mutex its self doesn't lock any specific block of memory or resource.. Its in how you use the mutex (where yo ucall lock and unlock in all threads) that determines what area of memory is protected.  For example... If you have a variable called speed:int, and you make a mutex called lockSpeed:TMutex...  You could technically lock and unlock lockSpeed:TMutex anywhere in the program, but in actuallity what you would want to do is call LockMutex(lockSpeed) in any thread before reading/writing to speed:int, then call UnlockMutex(lockSpeed) when finished. This will ensure all threads respect eachother when reading or writing to speed:int <br><br></td></tr></table><br>
<a name="1034996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Concept Example that isn't really applicable to the real world but might give you an idea.<br><br>I have a mutex for moving the leader of the bad guys in my game.<br>I lock it before I move the leader and unlock it when he's done moving.<br><br>All of the lower level bad guys Check to see if the leader is locked before they move. This prevents them from moving at the same time and being stepped on by the leader.<br><br><br>A more real world example is when modifying a TList<br>You lock a mutex associated with the Tlist when you interact with it in any way (add/remove/iterate through).<br>This prevents something from being removed from the list in 1 thread at the same time that the list is being looped through in another thread. Since the both lock before they start their task, and unlock when they're done the first thread to get there gets to do it's thing and finnish it up safely before the next thread has a go.<br><br>It's a safety catch to keep threads from stumbling over each other. <br><br></td></tr></table><br>
<a name="1035008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys, I hopefully understand better now!<br>Jim <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
