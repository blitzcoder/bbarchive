<!DOCTYPE html><html lang="en" ><head ><title >Variable to Irrlicht shader?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Variable to Irrlicht shader?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Variable to Irrlicht shader?</a><br><br>
<a name="576914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jan_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiho, how can i send a variable to a Shader in Irrlicht,<br>at Time I use Hlsl shader, but i don't found out, how i can send a variable to them, without a variable, shaders are not so powerfull. <br><br></td></tr></table><br>
<a name="576966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> greetings Jan_ :)  im far from an expert but check out the Shaders demo if you havent already.  i believe you need to extend the T_irrIShaderConstantSetCallback type and implement the OnSetConstants() method.  i think the command to set the variables you are looking for is setVertexShaderConstant().  in gg.IrrBMAX this translates into setVertexShaderConstantFromName() and setVertexShaderConstant() and they reside in T_irrIMaterialRendererServices.  here is the section from the Irrlicht manual under IMaterialRendererServices.setVertexShaderConstant() (this is C++ code):<br><br><div class="quote"> <br>Sets a constant for the vertex shader based on a name. This can be used if you used a high level shader language like CG or HLSL to create a shader. Example: If you created a shader which has variables named 'mWorldViewProj' (containing the WorldViewProjection matrix) and another one named 'fTime' containing one float, you can set them in your IShaderConstantSetCallBack derived class like this: <br><pre class=code>
            virtual void OnSetConstants(video::IMaterialRendererServices* services)
            {
                video::IVideoDriver* driver = services-&gt;getVideoDriver();
            
                float time = (float)os::Timer::getTime()/100000.0f;
                services-&gt;setVertexShaderConstant("fTime", &amp;time, 1);
            
                core::matrix4 worldViewProj;
                worldViewProj = driver-&gt;getTransform(video::ETS_PROJECTION);                    
                worldViewProj *= driver-&gt;getTransform(video::ETS_VIEW);
                worldViewProj *= driver-&gt;getTransform(video::ETS_WORLD);
                services-&gt;setVertexShaderConstant("mWorldViewProj", worldViewProj.M, 16);
            }
</pre><br>Parameters:<br> name,:  Name of the variable  <br> floats,:  Pointer to array of floats  <br> count,:  Amount of floats in array.  <br><br>Returns:<br>: Returns true if successful.  <br> <br></div><br><br>hope i gave a direction to persue.  the Shaders sample (available for download from my worklog) shows a gg.IrrBMAX implementation including the extended type and use of the setVertexShaderConstantFromName() method. <br><br></td></tr></table><br>
<a name="577405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jan_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, it function 100 thx,<br><br>my first Watershader is now done :-) <br><br></td></tr></table><br>
<a name="577430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> glad i could give you a direction :) <br><br></td></tr></table><br>
<a name="577720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> can we see it J...<br><br>--Mike <br><br></td></tr></table><br>
<a name="577746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah Jan! Show us! Its always good to see success stories! <br><br></td></tr></table><br>
<a name="578756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jan_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> jep, sure,<br><br>It's nothing greate,<br>it looks like water in Unreal1 :-)<br><br><a href="http://www.blitz-pasting.net/uploads/useruploads/LZKoJ17181605548567_water1.zip" target="_blank">http://www.blitz-pasting.net/uploads/useruploads/LZKoJ17181605548567_water1.zip</a><br><br>it's 2.3 MB,<br>with Irrlciht Dll's &amp; source <br><br></td></tr></table><br>
<a name="578820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>It's nothing greate,<br>it looks like water in Unreal1 :-)<br> <br></div><br>great job!  thx for sharing :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
