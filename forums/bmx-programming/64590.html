<!DOCTYPE html><html lang="en" ><head ><title >external library @ symbol</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >external library @ symbol</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >external library @ symbol</a><br><br>
<a name="721048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Im trying to import functions from the BASSmod sound system using the static library, bassmod.lib. As just a test I have defined :-<br><br>&lt;CODE&gt;<br>Import "bassmod.lib"<br><br>Extern<br>    Function BASSMOD_GetVersion:Short( ) = "BASSMOD_GetVersion@0"<br>End Extern<br><br>DebugLog BASSMOD_GetVersion( )<br>&lt;/CODE&gt;<br><br>Now... This returns 2 and im quite content to belive that this is correct. So my question is what does the @ symbol is needed for? I had a look at the FMod topic and thats where I got it from.<br><br>Im sure that I could have found this out in the documents but I was also quite keen to make my first post here.<br><br>Also are there any guides on how to format posts in the forums? I dont have a clue how to get thoes code boxes.<br><br>Thanks <br><br></td></tr></table><br>
<a name="721053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> For code boxed use the square brackets [ ] for your markup tags (checkout the FAQ located in the Home section of this site).<br><br>As for the name mangling, this is due to the library being compiled in C++ rather than plain C. I think it has something to do with that language supporting multiple functions that have the same name but different parameter lists. <br><br></td></tr></table><br>
<a name="721054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nm.. Skidracer already told you. <br><br></td></tr></table><br>
<a name="721058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rite ok,<br>So it stems from overidden functions. So for the most part I should just set it to @0 ?<br><br>I also have one more dilema, a function BASSMOD_SetVolume:bool( volume:short ) needs to be implemented, however bMax doest support a boolean. Can I just let it be cast safely into a byte or will the data overrun?<br><br>Cool, thanks. <br><br></td></tr></table><br>
<a name="721060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> A bool is equvalent to an Int.<br><br>The @0 decoration is inication of amount of stack space required for paramaters and usually indication of a stdcall calling conventions when exported by DLL or LIB.<br><br>The "C" calling convention does not decorate.<br><br>So...<br><pre class=code>
Extern
Function BASSMOD_GetVersion:Short( ) = "BASSMOD_GetVersion@0"
End Extern
</pre><br>Should probably be<br><pre class=code>
Extern
Function BASSMOD_GetVersion:Short( ) "win32" = "BASSMOD_GetVersion@0"
End Extern
</pre><br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="721063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick replies, its much appreciated.<br><br>@Budman:<br>So, if I use ( Extern "C" ) then I should not need to include the "win32"?<br><br>Im now getting the compilation error :-<br>undefined reference to `BASSMOD_Init@16'<br><br>with my extern code :-<br><br>Extern "C"<br>Function BASSMOD_Init:Byte( device:Int, freq:Short, flags:Short ) = "BASSMOD_Init@16"<br>End Extern<br><br>and runcode :-<br>DebugLog BASSMOD_Init( -1, 44100, 16 )<br><br>So, im sure that it cant locate that function within the library when it is called.<br><br>If anyone could advise farther that would be great. <br><br></td></tr></table><br>
<a name="721069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, its getting late and im writing buggy code. I just made 2 buggs in succession with strange consequences.<br><br>The problem is in (= "BASSMOD_Init@16"). The @16 seems like it should be 8 because int+2*short = 8 bytes. This infact doesnt compile, giving the same error as before.<br><br>In my error I wrote @12 and it magicaly compiled and ran successfully.<br><br>When they get pushed onto the stack are they padded to integer positions for that SIMM memory thing? Thats all I could think it could be. <br><br></td></tr></table><br>
<a name="721079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you seen the post by sucoX at the bottom of <br><a href="/posts.php?topic=46059" target="_blank">this thread</a>?<br><br>Also dword=32bitint, what shorts are you referring to? <br><br></td></tr></table><br>
<a name="721137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Pantheon<br><br>You are confusing what Extern "C" vs Extern "Win32".<br><br>The "C" or "Win32" is the calling convention of the function.  You cant mix them its one or other. Based upon your symbol problems its clear this is a Stdcall =&gt; "Win32" calling convention.  Just wrap all your functions your are attempting to access in <br><pre class=code>
Extern "Win32"
..
End Extern
</pre><br><br>Although you might just want to use what skid linked to.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="721248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes,<br>these two points raised (skidracer &amp; Budman) were the problems I was encountering. When I got home, I realised both of them and changed to using "win32" thus correcting a problem with pointer handling. Also I stupidly got confused and let dword = short. When I changed this I solved my compilation errors.<br>The Bass port by sucoX looks realy well writen. I myself was just trying this to learn how to program with external C files in BMX. It now fully works, so thanks guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
