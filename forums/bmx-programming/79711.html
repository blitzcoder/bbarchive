<!DOCTYPE html><html lang="en" ><head ><title >TMaps</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TMaps</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >TMaps</a><br><br>
<a name="894986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can somebody explain these in simple, understandable detail?<br><br>Just having a conversation with a couple of people on IRC about TMaps, and we're all agreed that the documentation for TMaps is rubbish, and yet TMaps seem to be the be-all and end-all to some people.<br><br>What are they?<br>How and when are they used?<br>Any real-world examples of use? <br><br></td></tr></table><br>
<a name="894988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> They're like a dictionary. They're a collection of objects indexed with a key. The key can - like a dictionary - be a string, but it can also be any object. Keys must be unique though. In other words, if you add a definition for "milk" and then add another definition for "milk" the first defintion is replaced with the second. They're used any time you want to store things and retrieve them with any kind of 1 to 1 relationship. By 1 to 1 relationship, I mean that you are only ever going to retrieve one object for any given key. So it wouldn't be any good for grouping objects together and giving them a group name. The indexed objects are kept sorted, as you insert new objects they are placed into the correct slot, so you never need to manually sort things as you do with lists and arrays.<br><br>Following the dictionary analogy again - when you want the definition of a word, but all you have is the word, you can look them up that way. Because the index is always updated, it's much faster to retrieve it than looking through a huge array or list.<br><br>I use them for all my game entities. Every game entity has a name, and when I want to find an object by name, I look it up in the TMap. Actually, I used it for dozens of things, but that's one of the first things I did with them. <br><br></td></tr></table><br>
<a name="894989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think we all understand that. It's like a hash in Perl or a std::map in C++. The thing is... <b>documentation</b><br><br>Earlier today I gave them a try and I couldn't make out of the documentation on how to use them. <br><br></td></tr></table><br>
<a name="894990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, understand the one-to-one thing.  I've just never really understood what use that is. <br><br></td></tr></table><br>
<a name="894991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found <a href="/posts.php?topic=49028" target="_blank">this thread</a> handy for grokking TMaps. <br><br></td></tr></table><br>
<a name="894993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> As in that topic I used the Insert() method as well but it started complaining at me. All I did was something like this:<br><br><pre class=code>
Local map:TMap = New TMap
map.Insert("use_vsync", -1)
</pre> <br><br></td></tr></table><br>
<a name="894995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As in that topic I used the Insert() method as well but it started complaining at me. <br></div><br>Isn't the idea that you insert objects rather than, say, the int in your example there? That's what I was doing and it seemed to work fine.<br><br>eg<br><pre class=code>myTmap.Insert(key:string,instance:whateverType)</pre> <br><br></td></tr></table><br>
<a name="894996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> GfK: how about this for a purpose:<br><br>You want to count the number of times a certain color is present in a 24bit image, to draw a histogram or something. How would you do that without maps:<br><br>Define an array of 256*256*256 elements (representing r,g and b) and then for each pixel in the image, simply: mycolorarray[foundR,foundG,foundB]:+1<br><br>You can see that predefining a 256^3 array is quite something for your memory, and most of it is not being used, ever.<br><br>One-on-one into a tmap would be like simply storing a color <i>as you find it</i>. The key would be the rgb combi, and the value you store for that key is the amount of times you found that color in your image. This means you never have wasted memory! <br><br></td></tr></table><br>
<a name="894998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Sledge: I expected it to be like std::map from C++, in which is possible. I had hoped to use the TMap as a place to store some configuration data. <br><br></td></tr></table><br>
<a name="895001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Htbaa: You should be fine to do that as long as you wrap your values in a type. Actually, you could probably get away with storing your value as a string (as strings are already a kind of object) then casting to int upon retrieval. <br><br></td></tr></table><br>
<a name="895055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use it to store key strings and keycode pairs for keyboard configurations. <br><br></td></tr></table><br>
<a name="895078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The good thing about them is, that the hashs are automaticly sorted.<br>I use them in my level editor as some kind of temporary map storage system, where the key is something like "x,y,layer" and the object is a TTile instance. When I write the data-file it is sorted and could be loaded faster into the maparray (not benchmarked, just feeled speed). Also it is easier to handle for an editor, where you have to set tons of tiles and don't want to slice the array over and over again. <br><br></td></tr></table><br>
<a name="895097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used something similar in a game where you had a 2D playing field that wasn't a fixed size but could potentially be something like 10,000 x 10,000. The contents of the map were created dynamically (like a trail) where the player had been. There wasn't any point using an array, but I did need the quick access to each map 'slot' that an array gave you. So I used a Tmap like data structure, and used a key that was calculated like this:<br>myKey$ = playerx+"_"+playery<br><br>Then it was simple to check if a map place/slot existed like this:<br>myMap.Contains(somex+"_"+somey)<br><br>and then check what it contained like this:<br>myMap.ValueForKey(somex+"_"+somey)<br><br>This system saved a lot of memory, as there were always very large areas of slots with nothing in them. But also had a lot of the structure, flexibility and usefulness of a real array. <br><br></td></tr></table><br>
<a name="895127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use it for many things. sorting, making sure aone object is only in a list one time, and well z-sorting for graphics. <br><br></td></tr></table><br>
<a name="896620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds a lot like a TList.  I use Tlist to store lists of a certain type, like TParticle for example.  Each type instance can have a name field if I want and I can iterate though the list checking the name field on each type to find the one I want.  However, I never actually do this as I just use pointers to the type instances I'm interested in and iterate though the list and look for those instead.<br><br>So, in the scenario above, a TMap would just contain the names and a link to the type instead so it's a bit faster right?  Does it use Binary Searches (or similar) on the name index to speed up access?<br><br>How does a TMap automatically sort itself when new items are added?  Don't you have to specify your own Sort function like for TLists?  Sorting numbers is obvious, but not strings as you could choose to do it case insensitive, and as for objects, you might want to sort on a field or something... I have my own insert functions for TList that look for the right place to add new items to avoid having to waste time sorting the whole list which may already be sorted.<br><br>Anyway, it sounds like I'm either already using TLists like they were TMaps or I'm missing something... <br><br></td></tr></table><br>
<a name="896629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it uses a binary search. It isn't really designed for sorting altho of course it does do that as a by product. It's mostly for quick access when you have large amounts of data. I wouldn't describe it as being like a TList. A TList is a linked list, a TMap is a binary tree. :)<br><br>You might be using TLists like they are TMaps, but unless you have items which share the same name then you probably should be using TMaps (even items with the same name could be easily worked into TMaps tho). Might work out quite a bit faster. <br><br></td></tr></table><br>
<a name="896638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks.  So it's all about the indexing I guess. <br><br></td></tr></table><br>
<a name="896666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> GA, your file resource system would benefit from a TMAP I think as you wouldn't have to iterate the list checking the string ID against the object name. <br><br></td></tr></table><br>
<a name="896672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> tonyg: Yes agreed that the TImageBank and TSoundBank should be TMaps.  Interestingly, paranoid as I am about code performance, I normally set up a load of variables which I assign from Image/Sound banks when a screen is first shown so that I don't have to repeat the TList iteration on the fly later on. <br><br></td></tr></table><br>
<a name="896677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought TMap's are basically hash tables which use a hash function to map a key to each slot, so kind of like a TList with direct access jumping to a specific type instance. Not sure where a binary search comes into play, if at all. <br><br></td></tr></table><br>
<a name="896697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> The keys are stored in a tree to make them quicker to find or else you'd be iterating through a list of keys to find a pointer to an object. <br><br></td></tr></table><br>
<a name="896706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> What if your keys are objects not strings?  How can you store them in trees as how can you sort them? <br><br></td></tr></table><br>
<a name="896735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> It creates a tree of TNode objects to which your key is attached and doesn't so much sort them as adjust the parent/child relationships to put them in the best place.<br>I believe Bmax uses a <a href="http://en.wikipedia.org/wiki/Red-black_tree" target="_blank"> red/black tree </a> <br><br></td></tr></table><br>
<a name="896737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redspark</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe it is a Red/Black balanced tree.  Each object that you store as a key has a compare method, I believe.  The algorithm doesn't care as long as the object knows how to compare itself to another of its type and returns 1,0,-1.<br><br>I'm using TMaps for having coversation topics associated with script objects in my conversation system.  Also, I'm using it to store player variables that might grow over time.  Thus my player save algorithm does not need to change as I expand the player object to include new variables and old and new save files are always compatible with each other.<br><br>I'm also going to use TMaps or a similar tree structure as a game event queue. <br><br></td></tr></table><br>
<a name="896749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use TList to manage sprite names, animation names. Like Grey I iterate when needed, havn't experienced any speed problems. <br><br></td></tr></table><br>
<a name="896761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I use TList to manage sprite names, animation names. Like Grey I iterate when needed, haven't experienced any speed problems <br></div> What made you use TLists in the first place rather than TMaps? I always try to use the best available method from the start to cut-down on refactoring which has caught me out before. I know if it does the job its good enough but better to design rather than refactor. <br><br></td></tr></table><br>
<a name="896768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because I've learned to program Blitzmax without any documentation at all. The only thing I had to go on was this forum (which luckily has some of the best member content I've ever seen) and one of the worst limited, documented help files I've ever seen. I've just recently found out that TLists can store different object types. Yes, I realize there are better ways to do things. Hell I thought for months that TMap was a tile map engine. :) lol... <br><br></td></tr></table><br>
<a name="896772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Because I've learned to program Blitzmax without any documentation at all. <br></div><br>And you never even considered to check the module sources?<br>Seriously, reading the source will give you way more knowledge about how things work than reading the docs. <br><br></td></tr></table><br>
<a name="896787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks Tonyg and redspark.  I thought there must be a compare method for objects, like with TList.<br><br>MGE: Yeah used TList because I understood it and didn't know what a TMap was.   I did read the Bmax docs occasionally and I asked lots of forum questions and learn like that.  I've never looked at the source either, I don't like fiddling with the modules.  I'm glad that some people do though as they often help me out ;-) <br><br></td></tr></table><br>
<a name="896796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it's not just a hash table then. Because a hash table would automatically jump straight to an array index based on the hash function applied that created the key... so it's more of a combination of a linked list with a hash function, which really largely defeats the whole point of having a key in the first place, you might as well just have a binary search in an array - although I suppose you get less wasted memory that way. <br><br></td></tr></table><br>
<a name="896813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... and it's easy to insert and remove objects. <br><br></td></tr></table><br>
<a name="896966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everyone always brings this up, but no one ever posts example code.. well then, hand it over? <br><br></td></tr></table><br>
<a name="896969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Example code for what? <br><br></td></tr></table><br>
<a name="896976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict
Type TPerson
    Global person_map:tmap=CreateMap()   ' This is our map

	Field name:String
	Field age:Int
	Field ice_cream:String
	
	Function Create(name:String, age:Int, ice_cream:String)
		Local temp:TPerson=New TPerson
		temp.name=Upper(name)   ' Convert to uppercase to make it easier to match
		temp.age=age
		temp.ice_cream=ice_cream
		MapInsert(person_map,temp.name,temp)   ' We create a key using the name and associate it to the TPerson we created
	End Function
	
	Function listdetails(name:String)
	    Local name_to_check:String=Upper(name)
	    ' Using the key we retrieve the object details from the map and cast it to our TPerson.
		Local temp:TPerson=TPerson(MapValueForKey(person_map,name_to_check))
		temp.list
	End Function
	
	Method list()
		Print "Name      : " + name
		Print "Age       : " + age
		Print "Ice_cream : " + ice_cream
	End Method
	
	
End Type

Tperson.Create("Tom",12,"Strawberry")
TPerson.Create("Dick", 14,"Chocolate")
Tperson.Create("Harry",16,"Vanilla")

TPerson.listdetails("Dick")
</textarea> <br><br></td></tr></table><br>
<a name="896993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah this is straightfoward, thanks. <br><br></td></tr></table><br>
<a name="897016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh... so basically it's TList iteration without need for iteration! :) <br><br></td></tr></table><br>
<a name="897098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kewl, thanks tonyg. <br><br></td></tr></table><br>
<a name="897106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redspark</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because it is a balanced tree it always has the same order of magnitude for insert, search and delete operations. (log(n), I believe) <br><br></td></tr></table><br>
<a name="897109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ahh... so basically it's TList iteration without need for iteration! :)  <br></div><br>More or less, I guess, but it's important to remember that inserting a key a second time will replace the first value with the second.  Usually you use TMaps in a situation where this is desirable - it may well be the reason you're using them - but if you need multiple entries for the same key ( eg: in a dictionary you might want multiple definitions for a word with the same spelling ) you should not be using TMap's.<br><br>Otherwise, it's about the same. You can even iterate through the contents of a Map when you need to, because it has methods called Values() and Keys() which give you an enumerator object, which is what EachIn uses. So in the same way that you can say For A=EachIn MyList you can say For A=EachIn MyList.Values() or For A=EachIn MyList.Keys() depending on whether you want key or value. <br><br></td></tr></table><br>
<a name="897195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Redspark helped me to convert my Framework's TImageBank, TSoundBank and TGameText (for localisation) to TMap, thanks dude! <br><br></td></tr></table><br>
<a name="897217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Macguffin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick tangent question - what are the ramifications of declaring a global inside a type?  I'm assuming, looking at that code, that it will instance the map if it isn't already declared? <br><br></td></tr></table><br>
<a name="897219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the same as creating  static variable. It will exist globally within that type only, defined once and available within the type for the programs duration. <br><br></td></tr></table><br>
<a name="897233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I do it all the time, it's handy. <br><br></td></tr></table><br>
<a name="897242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Macguffin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hells, yeah.<br><br>*tries to upmod this thread* <br><br></td></tr></table><br>
<a name="898062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kurator</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> To iterate through a map, you have to use a special enumerator:<br><br>lets assume myTMap is your TMap and you want to iterate through all elements in it, like in a TList<br><br>myTmap contains some Elements of the Type "elementType" and contains at least one Field "myElementDataField"<br><br><br><pre class=code>
temp:TMapEnumerator = MapValues(myTMap)

For Local element:elementType = EachIn temp

	DebugLog(" Value: "+element.myElementDataField)
Next
</pre> <br><br></td></tr></table><br>
<a name="898125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ahh... so basically it's TList iteration without need for iteration! :)  <br></div> technically it does iterate through the map.. actually, it may iterate more elements that's why it is a poor choice for sequential access to data.  it's a fantastic choice when searching by value though because it will tend to iterate through less elements (when I say elements, I don't mean stored objects) to find your object.  It really shines with searching large data sets.  so a map is certainly not a replacement for a list. <br><br></td></tr></table><br>
<a name="898349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a way to visualise the data stored in your TMap:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

Graphics 800,600
Global scrolly% = 20

Global myMap:TMap = New TMap

Global animal$,noise$
ReadData animal,noise
While animal &lt;&gt; "[end]"
	myMap.insert(animal,noise)
	main()
	ReadData animal,noise
	WaitKey
Wend

While Not KeyDown(KEY_ESCAPE)
	main()
Wend

End



Function main()
	Cls

	Local start:Tnode = myMap._root
	
	SetColor 100,100,100
	drawMapLines(start,scrolly,300, 400)
	SetColor 255,255,255
	drawMapText(start,scrolly,300, 400)
	
	If animal = "[end]"
		DrawText "Escape to exit",5,5
	Else
		DrawText "Any key to insert new item",5,5
		DrawText "Added "+animal+": "+noise,5,35
	EndIf

	Flip
	
	scrolly:+(KeyDown(KEY_LEFT)-KeyDown(KEY_RIGHT))*5
End Function



Function drawMapText(node:Tnode,x%,y%,space%)
	DrawText String(node.key()),x,y
	Local newspace% = space/3
	If node._left._parent = node
		drawMapText(node._left,x+100,y-newspace,space/2)
	EndIf
	If node._right._parent = node
		drawMapText(node._right,x+100,y+newspace,space/2)
	EndIf
End Function

Function drawMapLines(node:Tnode,x%,y%,space%)
	DrawOval x-2,y-2,5,5
	Local newspace% = space/3
	If node._left._parent = node
		SetColor 50,200,50
		DrawLine x,y,x+100,y-newspace
		drawMapLines(node._left,x+100,y-newspace,space/2)
	EndIf
	If node._right._parent = node
		SetColor 200,50,50
		DrawLine x,y,x+100,y+newspace
		drawMapLines(node._right,x+100,y+newspace,space/2)
	EndIf

End Function



#animals
DefData "dog","bark"
DefData "cat","meiow"
DefData "sheep","baah"
DefData "cow","moo"
DefData "wolf","howl"
DefData "nightingale","sing"
DefData "squid","squirt"
DefData "sloth","snore"
DefData "haggis","och"
DefData "fish","gulp"
DefData "mouse","squeek"
DefData "hyena","cackle"
DefData "chicken","cluck"
DefData "dolphin","click"
DefData "human","talk"
DefData "klingon","klingon"
DefData "banshee","howl"
DefData "whale","moan"
DefData "lamb","bleet"
DefData "cock","cockadoodle"
DefData "horse","nay"
DefData "donkey","eeyore"
DefData "cuckoo","cuckoo"
DefData "slug",".."
DefData "lion","roar"
DefData "pig","oink"
DefData "boar","grunt"
DefData "[end]","[end]"</textarea><br><br>I've also placed it in the Code Archive. :) <br><br></td></tr></table><br>
<a name="898404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> TMaps are one of the greatest features of the BlitzMax language. <br><br></td></tr></table><br>
<a name="898436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> There just Hash tables? Is there a difference I'm missing? <br><br></td></tr></table><br>
<a name="898437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> TMaps don't use a hash though. <br><br></td></tr></table><br>
<a name="898447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are not hash tables! They are binary trees. Huge difference.<br><br>Hash tables create a (non unique) index from the key (using a mathematical algorithm) and then insert the data into a bucket (often with other items). <br>Binary trees search for an appropriate place to put the data in a tree structure, using a non-mathematical, simple comparison algorithm. <br><br></td></tr></table><br>
<a name="898479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Thompson</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I see('looks at mod'), it is a binary tree using string comparison for branch selection.<br><br>Not the fastest for all occasions but it is a very good general purpose solution. <br><br></td></tr></table><br>
<a name="904246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hash tables create a (non unique) index from the key (using a mathematical algorithm) and then insert the data into a bucket (often with other items).  <br></div><br><br>This isn't necessarily true [edit: ah, misread - yeah, technically the index isn't guaranteed to be unique, and often isn't, but that's not really important as long as appropriate hash collision code is in place]<br><br> My hash table code in the archive allows you to selectively overwrite any entries in a bucket with a matching key, if you so choose, make sure you don't have two keys that are referencing the same object, remove any entries with a given key, remove only entries with a given key and a given object, or search the whole hash table for an object (when the key is unknown, for some reason) and remove any entry that matches the object. <br><br>The only thing not implemented there is that the table will not automatically grow. I should really tidy up the code and add a few more utility functions and get the auto-growth parameters and functions implemented. As it is though, it's quite fast - in my tests it was regularly faster than Lua table lookups (which are essentially hash table lookups, coded in C). <br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1907" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=1907</a><br><br>It also allows you to write an overloaded Compare method for you objects that can be called on any entry results you have - so you could store multiple items with the same key, assign them each some priority value, and then using a custom Compare() method retrieve only the highest priority entry for that given key, for example. <br><br></td></tr></table><br>
<a name="913803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess its stuff like this that is making people move to unity3d.<br><br>Most people not already in a pro development job wants to just make games without spending a week working out why they even need TMaps.<br><br>Its ironic blitz started out as being as easy as possible to use and morphed into something that might as well be C++. <br><br></td></tr></table><br>
<a name="914990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't *have* to use it. I think for most purposes you can perfectly go without them. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
