<!DOCTYPE html><html lang="en" ><head ><title >How to assess frames per second?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to assess frames per second?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to assess frames per second?</a><br><br>
<a name="467485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder if someone(s) can confirm whether this following program is correct to assess the frames-per-second framerate of a given loop (heavily commented for your delectation)..... I used to go by knowing what the refresh rate of the display is (e.g. 50Hz and doing the math in comparison to that benchmark, but this needs to be htz independent). Millisecs() is 1000ths of a second right?<br><br>'Is this a correct program to read the frames per second? ..........:<br><br>Local counter:Int=MilliSecs() 'Store current MilliSecs() reading<br>Local passage:Int=0 'Initialize passage of time since last frame<br>Local m:Int=0 'Initialize temporary variable for math<br>Local fps:Int=0 'Initialize frames per sercond result variable<br>Repeat 'keep going<br>   '<br>   'do Max2D graphics processing stuff here<br>   '<br>   m=MilliSecs() ' Get the current MilliSecs() so that the number is consistent<br>   passage=m-counter 'Passage of time since the last iteration of the loop<br>   fps=1000/passage 'Fps is 1000 (millisecs) / millisecs since last loop?<br>   counter=m ' Store current reading for next time<br>   SetRotation 0 'Undo rotation settings from earlier in the graphics stuff<br>   SetScale 1,1 'Undo scale from earlier too<br>   DrawText fps+"fps",0,0 'So that this text draws right - the framerate<br>   Flip ' Flip the backbuffer into view<br>Until KeyHit(KEY_ESCAPE) 'keep going until escape key hit <br><br></td></tr></table><br>
<a name="467504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zeedoktor</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks about right. What gets me tho is the int being used for millisecs. shouldn't that be a long? <br><br></td></tr></table><br>
<a name="467523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought Int's were 32bit, same thing? otherwise it would be a double? <br><br></td></tr></table><br>
<a name="467647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zeedoktor</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> woops. wrong basic. i was assuming int (as in C and powerbasic) is 16bit. but you're right, it's 32bit. <br><br></td></tr></table><br>
<a name="467655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have always found this more stable and exact. I pasted yours into the fireworks demo and it changes way to much (unreadable for me).<br><br><pre class=code>
'FPS_Counter    &lt;&gt; Runs And displays the FPS
'--------------------------------------------
  SetRotation 0 'Undo rotation 
  SetScale 1,1 'Undo scale
		
  FPS_Counter=FPS_Counter+1
			
  If FPS_Counter_time+1000 =&lt; MilliSecs()
        FPS=FPS_Counter' &lt;- Frames/Sec
        FPS_Counter=0
        FPS_Counter_time=MilliSecs()	
  EndIf
					
  DrawText "Current FPS: "+FPS,20,20
'--------------------------------------------

</pre> This is porbably not optimal, but it gives a accurate FPS for tweaking <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
