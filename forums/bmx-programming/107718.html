<!DOCTYPE html><html lang="en" ><head ><title >Blitzmax on Mac troubles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitzmax on Mac troubles</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Blitzmax on Mac troubles</a><br><br>
<a name="1335560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tifu</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, having some weird troubles with a game I am trying to convert for Mac using Blitzmax. It's possible this is more an issue with me never having used a Mac before, but I managed to convert a Unity game without this problem occurring, I've had no luck searching for a solution.<br><br>I made a game on PC a while ago using Blitzmax, and recently got hold of a mini-mac, so I went through the process of making the game run on a Mac and testing it. Had to make a few changes to some code, but I got it working. Compiled it, it ran fine, great. <br><br>But when I uploaded it, then downloaded again, the downloaded version wouldn't work.<br><br>I get the initial "[game] is an application downloaded from the internet. Are you sure you want to open it?" as expected, and I say yes, but then it just has the "[game] quit unexpectedly" message every time I try to run it. Doesn't seem to launch at all, just quits before it starts.<br><br>It should be the exact same files, I have a folder with the app and data files, it runs fine, I zip it up and upload it, download it, doesn't run.<br><br>I have done basically the same thing with a Unity game, and it was no problem downloading and running it.<br>The PC version of the game is fine when I download it. It is only the Mac version, but only after downloaded.<br><br>Does anyone have any idea because I am stumped and whenever I google it I just get the same answers regarding the "this app was downloaded from the internet" which isn't the issue, I am getting past that error message. I would assume it's some kind of security thing as it is only happening when I download it, but getting past that first message should solve that issue. I got that same message with the Unity game, but approving the app made it work as expected.<br><br><br>While typing I tried downloading the Mac version onto my PC, then transferring it to the Mac via USB. That worked and it ran fine on the Mac! So... I am not sure what is going on. That makes me think this is some download security setting on the Mac, but I go through the procedure of allowing the program to run, so that shouldn't be an issue.<br><br>Does anyone know what I am doing wrong? :S<br><br><br><br>The game is located here if anyone on Mac can let me know if it works for them :<br>www.black-moth.net/games/ANamelessInheritanceMac.zip <br><br></td></tr></table><br>
<a name="1335563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have a real answer but this does sound familiar. Many years ago when Mark Sibly was regularly uploading new Mac versions of BlitzMax they failed for some reason. I think it had something to with files being zipped on the Mac. I don't remember exactly what he did but I believe he gave up on that method and created the archive by some other means. <br><br></td></tr></table><br>
<a name="1335572"></a>

<a name="1335573"></a>

<a name="1335574"></a>

<a name="1335575"></a>

<a name="1335576"></a>

<a name="1335578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzMax by itself is not suitable for publishing apps for public MacOS consumption.<br><br>You will need to <a href="/posts.php?topic=93636" target="_blank">sign </a>your work.<br><br>If Unity works it is because Unity has some self signing trickery which BlitzMax does not include.<br><br>In future it is likely no unsigned binaries will be trusted on any operating system and it is a small miracle your game can be freely distributed for Windows using anonymous / unregistered mingw toolchains.<br><br>or you include the standard control click open menu requirement clause... <br><br></td></tr></table><br>
<a name="1335583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo.<br><br>It's crashing on a call to brl_stream_WriteInt - TStream.WriteInt() - which implies the TStream that you attempted to open for writing, didn't work, and may be Null at the point you try to use it.<br><br>A couple of things to look into :<br><br> * Improve handling of failures, such as your TStream being null because you weren't granted permission to open is - something like a user notification to say there was an error and you can't continue, or run without saving?<br><br> * It's likely that your App is being "sandboxed" which would prevent it writing into unauthorised locations. There are standard locations on OS X (and other platforms) that your app has write access to. You should be using those, instead of assuming you can write to the local folder.<br><br>For accessing standard locations, I have a module (<a href="https://github.com/maxmods/bah.mod" target="_blank">BaH.Volumes</a>) which will get the correct paths for you to use with your app. <br><br></td></tr></table><br>
<a name="1335584"></a>

<a name="1335586"></a>

<a name="1335587"></a>

<a name="1335588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ skidracer<br>Signing ? Why should one sign it? I accept sign-requirements if you want to publish it in a store, but for "hobbyist/selfmade-binaries" I think this should  be made voluntary.<br><br>@ Access rights<br>Linux and Mac systems store their owner rights in zip files. So when extracting a linux binary you are able to "run" a binary because it got it's executable bit set. Now archive it via 7z and this will remove the file access bitmask.<br>If I need that functionality, then I 7z-archive my folder with a "123"-password and the 7z setting to even password-encrypt the file list of the archive. That way Windows OS does no longer want admin access when executing an previously unpacked the archive ("downloaded program").<br><br>Mac has a similar security mechanic - and it might kick in here. So while the game is run in a download-folder it might not have the required rights to modify files in its "own" folder (which for a "portable game" is something I dislike very much). And even if it has access to its own folder: if the parental folder disallows changes for itself and the children, then it will be prohibited too (this is the reason for many "amateurs" to chmod777 their apache-htdocs folders).<br><br><br>@ Brucey<br>BaH.Volumes allows access to $home$ and so on - but does not help a portable app to be able to write in the folder of the binary. So you can only do as you already suggested: inform the user about the problem your app is confronted with, it is his computer so it is his task to "repair" it.<br>You could offer your user a "fallback" (I cannot write to my directory, so I could use a non-portable directory in your home folder...). Remember to not rely on "notify()" but use a ingame-window. On Linux notify() and confirm() only print to the console (it only uses "WriteStdout" in the system.linux.bmx) so I wanted to note it down as you might run into that problem when doing "cross platform" programming with BlitzMax.<br><br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1335592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tifu</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies! That's a good few things I can spend some time looking into. <br><br></td></tr></table><br>
<a name="1335594"></a>

<a name="1335595"></a>

<a name="1335599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br> I accept sign-requirements if you want to publish it in a store, but for "hobbyist/selfmade-binaries" <br> <br></div><br><br>Expecting the user to both unlock and then change security permissions and then use a control click open sequence to run your app is expecting a lot.<br><br>I admit that Tifu's issue is more likely file permissions so my remarks are perhaps OT. <br><br></td></tr></table><br>
<a name="1335654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tifu</td><td align="right"><font class=tiny>(Posted February)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok! Success I think!<br><br>I seem to have gotten it working thanks to Brucey's volume module, saving settings and progress to a folder in the App Data folder that I created seems to work so far. I had to change a lot of code though (using incbin for a lot of data I used to just have in a textdata folder) so I'll have to test through the game a few times to be certain I've fixed everything, but this has solved my saving problem it seems, thanks so much! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
