<!DOCTYPE html><html lang="en" ><head ><title >BRL: BMax IDE icon support request</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BRL: BMax IDE icon support request</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BRL: BMax IDE icon support request</a><br><br>
<a name="948638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi BRL, the last BMax update was a really great one and the only thing that was disappointingly missing for me was the ability to add your own icons to your .exe`s. Most other small problems were nicely fixed so firstly, a big thank you for that.<br><br>What I would like to ask (without meaning to nag) is do you ever see this feature being added in a future version so that it is officially supported in the default IDE? Much like in the Pure Basic IDE.<br><br>I know that there are other ways to change my icons, BlIde, Resource Hacker and GreyAliens FrameWork to name a few, but it would be nice to know if there is a reason as to why this feature is still missing. If an IDE option is not a choice then how about a simple AppIcon command?<br><br>Thanks for reading,<br>Jason. <br><br></td></tr></table><br>
<a name="948675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seeing that this, alongside with automatically centered window is being requested from the start (also, icon support being requested for B3D, and never implemented) - I unfortunately don't  see that happen anytime soon.<br><br>That's why I implemented the AppIcon command, hacking the official modules; but it's win32 only, so I doubt it will be ever incorporated into the official modules :P <br><br></td></tr></table><br>
<a name="948678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I`m not so sure, I think that BRL will add it in a future update at least I hope that they will see that there is plenty of demand for what seems like a relatively small addition that would make everyones life a little easier.<br><br>Jason. <br><br></td></tr></table><br>
<a name="948749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Seeing that this, alongside with automatically centered window is being requested from the start (also, icon support being requested for B3D, and never implemented) - I unfortunately don't see that happen anytime soon. <br></div>Windows are automatically centered in 1.32. <br><br></td></tr></table><br>
<a name="948761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but it would be nice to know if there is a reason as to why this feature is still missing. <br></div>Because icons are supported very differently between the supported platforms.  How big do you make an icon on Windows?  It's certainly not as big as you make them on Mac OS.  How about Linux?  They're all different, and in this regard handling them in a generic way is rather impractical without imposing some unusual restrictions or having severely reduced quality on all but one platform.<br><br>You're better off making your icons and attaching them using tools specific to that platform. <br><br></td></tr></table><br>
<a name="948769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> +1 for icon support <br><br></td></tr></table><br>
<a name="948772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Windows are automatically centered in 1.32. <br></div>Never let facts get in the way of a good whine ;)<br><br><div class="quote"> How big do you make an icon on Windows?  <br></div>256x256 for program icons (as PNGs) unless Windows 7 requires something larger? <br><br></td></tr></table><br>
<a name="948775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 256x256 for program icons (as PNGs) unless Windows 7 requires something larger?  <br></div>That's too small for it to work between Windows and Mac OS (Mac OS requires a maximum of 512x512).  The max is probably different for Linux as well. <br><br></td></tr></table><br>
<a name="948776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats why I answered Windows only ;) <br><br></td></tr></table><br>
<a name="948784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> At any rate, you're still better off using a tool specific to your platform for the icons, rather than trying to cram the same feature into the IDE across platforms where the means of using icons is not very similar at all. <br><br></td></tr></table><br>
<a name="948786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you've got Blide pro, this feature is built in. You can copy and paste icons in the apps get info window on Macs, so that's no biggie.<br><br>cheers<br>Charlie <br><br></td></tr></table><br>
<a name="948796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can copy and paste icons in the apps get info window on Macs, so that's no biggie. <br></div>That's actually not how you do it.  That works for user customization, but is definitely not how you should be distributing applications. <br><br></td></tr></table><br>
<a name="948858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>&gt;&gt; Windows are automatically centered in 1.32.<br>Never let facts get in the way of a good whine ;)<br> <br></div><br>Not whining... I just didn't install 1.32 seeing the compiling problems it has with always building all modules. And since there was nothing on the release text, I didn't know about it.<br><br>And I stand on my AppIcon. It's not to put an ICON on the EXE, but in the Window. As Brucey informed me in the <a href="/posts.php?topic=83559" target="_blank">thread where I posted my AppIcon "hack"</a>, MacOS don't have windows icons (the little ones, on the top left of the window), so it's only a matter of implementing the Linux version for it.<br><br>So you just have to point AppIcon$ to the path of the icon you want to be loaded when your window is created. Or set it to "", so it won't load anything. No size/format restriction, since you can set AppIcon to anything in runtime or compile time. <br><br></td></tr></table><br>
<a name="948942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And I stand on my AppIcon. It's not to put an ICON on the EXE, but in the Window. As Brucey informed me in the thread where I posted my AppIcon "hack", MacOS don't have windows icons (the little ones, on the top left of the window), so it's only a matter of implementing the Linux version for it. <br></div>AppIcon for Mac OS would most likely change the dock icon at runtime. <br><br></td></tr></table><br>
<a name="948949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br><br>That's actually not how you do it. That works for user customization, but is definitely not how you should be distributing applications.<br> <br></div><br><br>Why is that then? i could edit the .plist file i know, but i've never had any problems distributing stuff that i've pasted the icon into.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="948964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why is that then? i could edit the .plist file i know, but i've never had any problems distributing stuff that i've pasted the icon into. <br></div>What happens if a user over-writes your icon?  There's no default for it to go back to, so you've then got a situation where the icon cannot be reset.<br><br>On another note, I'm fiddling with writing some code to set the dock icon at runtime (AppIcon for Mac OS, basically). <br><br></td></tr></table><br>
<a name="948976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a quick example of how to set the image for a dock tile under MacOS:<br><br><b>AppIcon.bmx</b><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Rem:license
Copyright (c) 2009 Noel R. Cower

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
EndRem

SuperStrict

?MacOS
Import "appicon.macos.m"
?

Private

?MacOS
Extern "C"
	Function bbSetAppIcon(bytes:Byte Ptr, length:Int)
End Extern
?

Public
Rem:doc
	Set an application's icon.
	
	E.g., under Windows, set the taskbar/window icon.  Under Mac OS, set the
	dock icon.
	@todo Write Windows code.
EndRem
Function AppIcon( url:Object=Null )
	?MacOS
	
	Local stream:TStream = TStream(url)
	Local data@ Ptr = Null
	Local size% = 0
	
	If stream = Null Then
		stream = OpenStream(url)
		If stream = Null Then
			Throw "AppIcon: Could not open stream for URL"
		EndIf
	EndIf
	
	Try
		size = stream.Size()
		If size &lt;= 0 Then
			Throw "AppIcon: Size of stream zero or indeterminable: "+size
		EndIf
	Catch ex:Object
		stream.Close()
		stream = Null
		Throw ex
	End Try
	
	data = malloc_(size)	' using malloc so NSData can free the memory when it's done
	
	stream.ReadBytes(data, size)
	stream.Close()
	stream = Null
	
	If data &lt;&gt; Null And size &gt; 0 Then
		bbSetAppIcon(data, size)
	Else
		Throw "AppIcon: Unable to set dock icon"
	EndIf
	
	?Win32
	
	?Linux
	
	?
End Function
</textarea><br><br><b>appicon.macos.m</b><br><pre class=code>#import &lt;Cocoa/Cocoa.h&gt;

void bbSetAppIcon( void* bytes, int len )
{
	NSData* imageData = [NSData dataWithBytesNoCopy:bytes length:len freeWhenDone:YES];
	NSImage* image = [[[NSImage alloc] initWithData:imageData] autorelease];
	[[NSApplication sharedApplication] setApplicationIconImage:image];
}
</pre><br><br>It's depressingly simple.  If you want badges, that's a little more involved, but not hard.  <a href="http://developer.apple.com/DOCUMENTATION/Carbon/Conceptual/customizing_docktile/docktasks_cocoa/docktasks_cocoa.html" target="_blank">Refer to this for more.</a> <br><br></td></tr></table><br>
<a name="949046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the reason it is not included is because of the icon file size/bit depth, etc.  The simplest thing is to require a windows.ico, mac.ico, and a linux.ico (or whatever the proper extension is).  Then whichever you compile, it could grab the appropriate icon file. <br><br></td></tr></table><br>
<a name="949058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Nillium: Nice code but I'm a little confused.  Why is that code needed when you can just put an icon in the resources folder of the game.app folder and that icon will automatically show on the dock bar?  Of course every time you compile BMax overwrites that icon, but you have to set the icon in the final version for release anyway. <br><br></td></tr></table><br>
<a name="949084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Nillium: Nice code but I'm a little confused. Why is that code needed when you can just put an icon in the resources folder of the game.app folder and that icon will automatically show on the dock bar? Of course every time you compile BMax overwrites that icon, but you have to set the icon in the final version for release anyway.  <br></div>That lets you set it at runtime (without overwriting the original icon).  So, say, you want to change the icon to something that shows something other than the default icon.<br><br>The more interesting thing to do would be to set a custom view so you can use badges, really. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
