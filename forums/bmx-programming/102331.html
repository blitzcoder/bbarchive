<!DOCTYPE html><html lang="en" ><head ><title >Collision Detection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision Detection</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Collision Detection</a><br><br>
<a name="1221813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tomhillmeyer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sort of new here, but I can't get my images to collide. Any help?!<br><br><br><br>'shoot'<br><br>AutoMidHandle True<br><br>Graphics 640, 480<br>SetMaskColor 255, 255, 255<br>SetClsColor 158, 158, 158<br>Type Bullet<br>     Field x, y<br>	Field image<br>End Type<br><br>Type Ship<br>     Field x, y<br>	Field image<br>End Type<br><br>Type Asteroid<br>	Field x, y<br>	Field image<br>End Type<br><br>'Const BULLETSTRING:String = "|"<br>'Const SHIPSTRING:String = "&lt;{A}&gt;"<br>'Const ASTEROIDSTRING:String = "#"<br><br>'Global BULLETHEIGHT = TextHeight(BULLETSTRING)<br>'Global BULLETWIDTH = TextWidth(SHIPSTRING)<br>'Global ASTEROIDHEIGHT = TextHeight(ASTEROIDSTRING)<br>'Global ASTEROIDWIDTH = TextWidth(ASTEROIDSTRING)<br><br><br>SeedRnd MilliSecs()<br><br>Global Bullet1:Bullet = New Bullet<br>Global Ship1:Ship = New Ship<br>Global Asteroid1:Asteroid = New Asteroid<br><br>Ship1.y = 450<br>Ship1.x = 320<br><br>Bullet1.y = 470<br><br>Asteroid1.x = Rand(0,640)<br>Asteroid1.y = Rand(0,470)<br><br><br>Global xChange = 1<br>Global yChange = 1<br><br>Global bulletPic = LoadImage("bullet.bmp")<br><br>Global shipPic = LoadImage("ship.bmp")<br><br>Global invaderPic = LoadImage("invader.bmp")<br><br><br><br>Global lives = 10<br>Global score = 0<br><br><br><br>While Not KeyDown(KEY_ESCAPE)<br>Cls<br>	Draw()<br>	HUD()<br>	TestInput()<br>	AsteroidGo()<br>	If KeyHit(KEY_SPACE)<br>     	Shoot()<br>	EndIf<br>	<br>	<br>	<br>	<br>	If ImagesCollide(bulletPic, Bullet1.x, Bullet1.y, 0, invaderPic, Asteroid1.x, Asteroid1.y, 0)<br>	Cls<br>	lives = lives - 1<br>	HUD()<br>	DrawImage(ShipPic, Ship1.x, Ship1.y)<br>	Asteroid1.x = Rand(0,640)<br>	Asteroid1.y = Rand(0,470)<br>	Flip<br>EndIf<br><br>If ImagesCollide(invaderPic, Asteroid1.x, Asteroid1.y, 0, shipPic, Ship1.x, Ship1.y, 0)<br>	Cls<br>	score = score + 1<br>	HUD()<br>	DrawImage(ShipPic, Ship1.x, Ship1.y)<br>	Asteroid1.x = Rand(0,640)<br>	Asteroid1.y = Rand(0,470)<br>	Flip<br>EndIf<br>	<br>	<br>	<br>	<br>	<br>	<br>Flip<br>Wend<br><br><br><br><br>Function Draw()<br><br>DrawImage shipPic, Ship1.x, Ship1.y<br><br>EndFunction<br><br><br>Function TestInput()<br><br>If KeyDown(KEY_RIGHT) And Ship1.x &lt; 639<br>Ship1.x = Ship1.x + 5<br>EndIf<br><br>If KeyDown(KEY_LEFT) And Ship1.x &gt; 0<br>Ship1.x = Ship1.x - 5<br>EndIf<br><br>EndFunction<br><br><br><br>Function Shoot()<br><br><br>While Bullet1.y &gt; 1					<br>Bullet1.y = Bullet1.y - 10<br>Bullet1.x = Ship1.x<br>DrawImage(bulletPic, Bullet1.x, Bullet1.y)<br>DrawImage(shipPic, Ship1.x, Ship1.y)<br>Wend<br><br>Bullet1.y = 470<br><br><br><br><br><br>EndFunction<br><br><br><br><br>Function AsteroidGo()<br><br>	<br>	Asteroid1.x = Asteroid1.x + xChange<br>     <br>     Asteroid1.y = Asteroid1.y + yChange<br><br>	 If (Asteroid1.x &lt; 0 Or Asteroid1.x &gt; 640)<br>          xChange = xChange * -1<br>     EndIf<br><br>     If (Asteroid1.y &lt; 0 Or Asteroid1.y &gt; 460)<br>          yChange = yChange * -1<br>     EndIf<br><br>	<br>	DrawImage(invaderPic, Asteroid1.x, Asteroid1.y)<br>	<br>	<br>End Function<br><br>Function HUD()<br>DrawText "Lives: " + lives, 0, 440 <br>DrawText "Score: " + score, 0, 450<br>End Function<br><br>Function CollideDetect()<br>If ImagesCollide(bulletPic, Bullet1.x, Bullet1.y, 0, invaderPic, Asteroid1.x, Asteroid1.y, 0)<br>	Cls<br>	lives = lives - 1<br>	HUD()<br>	DrawImage(ShipPic, Ship1.x, Ship1.y)<br>	Asteroid1.x = Rand(0,640)<br>	Asteroid1.y = Rand(0,470)<br>	Flip<br>EndIf<br><br>If ImagesCollide(invaderPic, Asteroid1.x, Asteroid1.y, 0, shipPic, Ship1.x, Ship1.y, 0)<br>	Cls<br>	score = score + 1<br>	HUD()<br>	DrawImage(ShipPic, Ship1.x, Ship1.y)<br>	Asteroid1.x = Rand(0,640)<br>	Asteroid1.y = Rand(0,470)<br>	Flip<br>EndIf<br><br>EndFunction <br><br></td></tr></table><br>
<a name="1221884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your Shoot()-function is the problem....<br><pre class=code>

Function Shoot()
     While Bullet1.y &gt; 1
          Bullet1.y = Bullet1.y - 10
          Bullet1.x = Ship1.x
          DrawImage(bulletPic, Bullet1.x, Bullet1.y)
          DrawImage(shipPic, Ship1.x, Ship1.y)
     Wend
     Bullet1.y = 470
EndFunction
</pre><br><br>You need to divide it into two parts "Shoot()", "Move()".<br><br>The "Shoot()" only starts the bullet and is called once by SPACE key.<br>The "Move()" cares about moving it some pixels until it reaches the screen top border and is called every While/Wend once. <br><br><pre class=code>Function Shoot()
     If Bullet1.y &lt; 1
          Bullet1.y = 470
          Bullet1.x = Ship1.x
     Endif
EndFunction

Function Move()
     If Bullet1.y &gt; 1
          Bullet1.y = Bullet1.y - 10
           DrawImage(bulletPic, Bullet1.x, Bullet1.y)
     Endif
EndFunction
</pre><br><br>Never do a second WHILE/WEND loop during the main WHILE/WEND loop! In your case the bullet will be finished within the first moment after fired: SPACE key starts the function Shoot(), inside the function the WHILE/WEND loop works until Bullet1.y reaches the screen top border. At the end of the function the bullet is already gone. No chance for testing any collision in the main loop anymore... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
