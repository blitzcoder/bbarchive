<!DOCTYPE html><html lang="en" ><head ><title >applying xoffset to player causing funky results</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >applying xoffset to player causing funky results</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >applying xoffset to player causing funky results</a><br><br>
<a name="625344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
player.max_x = 584-player.xoffset
player.min_x = 16-player.xoffset

If MouseX()+player.xoffset &lt; player.min_x Then MoveMouse(player.min_x,MouseY())

If MouseX()+player.xoffset &gt; player.max_x Then MoveMouse(player.max_x,MouseY())
</pre><br><br>As you can see, I'm using mouse control...  The control works fine itself.  But when I have 2 playerships you're controlling, I need to add an xoffset to one of the ships so they dont overlap each other.  The problem is, one of the ships will go off screen.  To fix this I figured I'd apply the xoffset on the mouseX if check.  But it's not working.  <br><br>Symptoms:<br>Ship with offset applied to it still goes too far right. <br><br></td></tr></table><br>
<a name="625524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> the first thing I would do is apply the offset to both. The one on the left gets -(offsetx/2) and the one on the right gets (offsetx/2) this should put the mouse between them. then your movement limits become <br><br>&gt;(MouseX-offsetx/2-shipwidth/2) and &lt;(MouseX+offsetx/2+shipwidth/2)<br><br><br><br><img src="http://www.scottshaver2000.com/tmp/mouseloc.png"> <br><br></td></tr></table><br>
<a name="625546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Scott,<br><br>You have an interesting Idea here.  The problem is that this is a quite dynamic Object.   Here are some obstacles I have about this.<br><br>Everytime you collect a new ship, you're adding a new ship to your fleet at the bottom (I'll say we'll cap it at 4 max ships you can control)  Of course, tlike galaga they all follow your ship.<br><br>Now if you have 4 ships spread like this:<br><br>ship1 ship2 ship3 ship4<br><br>Obviously the center location has to be configured to be inbetween all the ships?  What would be the most effective way to do that?<br><br>Also, if you have just 3 ships, what to do then? <br><br>and if you have just one ship..  I suppose you focus it at the ship itself.<br><br>My problem is you're going through the playerlist and updating all of them at the same time.<br><br>So would it be better to creaqte a completely new object, called "player center" then when you go through the player list you place them all around it?<br><br>Just an idea, trying to see if it's any good or if its too much work.<br><br>Each playership has its own values, you know, like whaty weapon it's using, etc.   So this is going to be like GALAGA (when you capture your ship back) but with an edge.<br><br>Any additional thoughts and input is greatly appreciated! I do love your idea and I think I'll use it with the tweaks I described above. <br><br></td></tr></table><br>
<a name="625565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I would have a method that positions them. Take the number of ships minus 1, times the number of pixels of separation, plus the width in pixels of the ship. That gives you the total width. Now start positioning them at the MouseX()-totalWidth from left to right.<br><br>totalWidth = ((shipCount-1)*sepWidth)+(shipCount*shipWidth)<br>for i=0 until shipCount<br>ships[i].x = MouseX()-(totalWidth/2)+(shipWidth/2)+(i*sepWidth)<br>next<br><br>something like that should do it for any number of ships 1 to n. The above assumes you are using midhandle for the ship images <br><br></td></tr></table><br>
<a name="625578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom Darby</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of linking the x position of your original ship to the mouseX, you should create some simple mouse movement and positioning routines and use those to modify the position of your ship.<br><br>This is useful should you ever want to limit the speed with which your ship can move, or do other things to your ship that don't necessarily play nice with whatever the mouse is doing at a particular moment.  (For example, if you wanted to have a power-down that halved the speed of the ship, you'd have a hard time implementing this while ship position was tied to the MouseX.)<br><br>Check out my code example over here.  It's a good starting point:<br><br><a href="http://blitzmax.com/Community/posts.php?topic=42355#601350" target="_blank">http://blitzmax.com/Community/posts.php?topic=42355#601350</a> <br><br></td></tr></table><br>
<a name="625604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Tom:  Actually that is great importance as you have pointed out! I'm doing exactly that actually already.  the player.x speed goes + or - depending on how far away the mouse cursor is from the ship itself..    The greater the distance, the more the ships are 'swayed' in that direction..<br><br>Instead I could create the 'ship-fleet center' object that behaves like the player does and have the playerships surrounding it.  <br><br>@ Scott: I am going to do just that!  Thank you :)  I believe I'll have this solved thanks to you.  However, changing the ship image in relative to how far it is swayed may be difficult with this but I'm sure I can put that in somehow. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
