<!DOCTYPE html><html lang="en" ><head ><title >PNG transparent colour</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PNG transparent colour</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >PNG transparent colour</a><br><br>
<a name="645551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so you know you can nominate a colour as transparent in clutted PNGs in art packages? How can I find out what that colour is so I can set it as the maskimage value? <br><br></td></tr></table><br>
<a name="645555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you need to.  You load in the PNG that you saved with the transparent colour; make sure you use MASKEDIMAGE with LoadImage and it should just work (well it does for me but I could be wrong). <br><br></td></tr></table><br>
<a name="645566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Punksmurf</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably you need to start the graphics mode with an alpha buffer too, but I'm not sure. <br><br></td></tr></table><br>
<a name="645570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Righty, ta'. Also, I just realised I should have posted this in the BlitzPlus part. Dammit dammit dammit! <br><br></td></tr></table><br>
<a name="645578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Haramanai</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit.Sorry I hasetated and posted. <br><br></td></tr></table><br>
<a name="645597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> well everything I said is invalid then, cos it doesn't apply to BlitzPlus.  In Blitplus, use the art package "dropper" over a background pixel, it should say 0,0,0 if black or 255,0,255 if magenta whatever, set this as the MaskImage value in BlitzPlus and it will work fine. <br><br></td></tr></table><br>
<a name="645605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's no use to me, though, because BlitzPlus messes up the colours when it loads a PNG with transparency, setting the transparent colour pixels to white. Also I think loading each image into an art package to determine the background colour isn't really a viable option either, is it? PNGs have transparency information for a good reason. <br><br></td></tr></table><br>
<a name="645614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use PNG with transparency channel, make sure you set the blendmode to alphablend before drawing.<br><br>If you want to use masking, I would suggest using the pixel at 0,0 as "mask reference pixel". Load it as pixmap, read the pixel value, use setmaskcolor with that value and then load an image from the previously loaded pixmap with the above stated MASKEDIMAGE flag (loading image from file would not be faster as it does internally load a pixmap first as well) <br><br></td></tr></table><br>
<a name="645615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> B+ can't handle transparency. Instead you can specify a colour (default black) to act as transparent. <br>If you do not intend to use black as the transparent colour you need to use maskimage and specify the RGB values. <br>If you don't know the transparent colour how can B+?<br>That's why you either...<br>a) Need to provide the RGB if you know it<br>b) Open the image into a paint package and find the RGB to give to B+. <br><br></td></tr></table><br>
<a name="645621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's no use to me, though, because BlitzPlus messes up the colours when it loads a PNG with transparency, setting the transparent colour pixels to white. <br></div>Actually, that would be Photoshop. <br><br></td></tr></table><br>
<a name="645666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, I already told him what to do on my second post in a concise manner, oh well.  I guess having it said different ways can only help :-) except for the BlitzMax advice haha.<br><br>DrDerekDoctors: If it sets the pixels to white, make your mask colour 255,255,255.  Better still switch off the transparency and just fill your background with a colour that's not in use in the main graphic (such as magenta 255,0,255) and set this to the mask colour in your game.  It's what I do (did) in BlitzPlus. <br><br></td></tr></table><br>
<a name="645698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) If it's something caused by the art package then I can't guarantee it'll always be white. Also, the images aren't from Photoshop, they're from a variety of packages.<br><br>2) If there's real white in the image, that'll get messed up by the tranparency being set to white, wouldn't it? <br><br>I'm talking about PNGs which I haven't created, ones which could come from anywhere which don't all have the same mask colour set as the transparent one in their palette. All I want to do is for Blitz to actually do it's job properly. <br><br></td></tr></table><br>
<a name="645728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> B+ (in this case) *is* doing it's job properly.<br>It does not do transparency (think it's because DX1 doesn't do it) so needs you tell it which colour to ignore.<br>If an image is loaded WITH a transparent colour it will be replaced by white (255,255,255). <br>I'm sorry if you've got a load of downloaded images with transparency but you'll have to bite the bullet and change them. <br><br></td></tr></table><br>
<a name="646022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> or just save them all as bitmaps, thus forcing a background colour, then resave as png without transparency info.  Maybe just resave as png without transparency info and see what the background colour turns out to be. <br><br></td></tr></table><br>
<a name="646033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The images aren't mine, this is for a program which'll be used by other people so I don't think it's reasonable to ask them to change all their stuff. Also asking them to change them to bitmaps isn't really an option, either. <br><br></td></tr></table><br>
<a name="646045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... then B+ is probably not the tool for the job.<br>You're trying to provide a program to read images with transparency written in a language that doesn't allow transparency.<br>B3D could handle it and so can BlitzMax. <br><br></td></tr></table><br>
<a name="646050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayward</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could write a function to import PNGs with alpha as PNGs with a predictable mask colour. I use something similar to convert 'white-alphas' (thanks, PhotoShop) into 'black-alphas'. The function loads a PNG as a pixmap, scans it for pixels with an alpha of zero, and sets those pixels to the mask colour.<br><pre class=code>' Process image to turn transparent pixels black so sprites don't display a white fringe when filtered.

Global CrescentPixmap:TPixmap = LoadPixmap( "incbin::Resources\Graphics\Crescent.png" )

For Local yi = 0 To CrescentPixmap.height  - 1
	For Local xi = 0 To CrescentPixmap.width - 1
		Local p = ReadPixel( CrescentPixmap, xi, yi )
		If p &amp; $FF000000 = 0
			WritePixel( CrescentPixmap, xi, yi, 0 )
		EndIf
	Next
Next

Global CrescentImage:TImage = LoadImage( CrescentPixmap, FILTEREDIMAGE )</pre> <br><br></td></tr></table><br>
<a name="646063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, it might be slow but you could set any 0,0,0 pixels to 5,5,5 before changing zero alpha pixels to black. <br><br></td></tr></table><br>
<a name="646064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The images aren't mine, this is for a program which'll be used by other people <br></div>gosh you are a little spartan with this vital info.  Yeah as TonyG said, get blitzMax and be done with it.  Or if you are feeling brave, do what Wayward said haha. <br><br></td></tr></table><br>
<a name="646072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trust me, as soon as someone else posts a solution, I'm gonna' invent another spanner to throw into the works. ;)<br><br>I think I need to get Bmax and the GUI plugin I suppose. Ah well. <br><br></td></tr></table><br>
<a name="646084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>If people are going to be loading their own images why not provide the functionality within the program for them to choose the transparent colour themselves?<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="646091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm gonna' have to do that, but really it's something they shouldn't have to do. <br><br></td></tr></table><br>
<a name="646103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... that's right. Somebody should be doing it for them by using a product which allows for transparency. <br><br></td></tr></table><br>
<a name="646105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean like Gimp, PhotoShop, PaintShopPro, Pixia ( the first and the last are free) <br><br></td></tr></table><br>
<a name="646106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... no like BlitzMax. <br><br></td></tr></table><br>
<a name="646162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Given that part of PNGs spec is that you can nominate a transparent colour I'd say that Blitz+'s PNG loading is incomplete and broken if it doesn't use that information in the proper manner, surely? Anyhoo, looks like my company is gonna' spring for BMAX - I assume that with applications I can use nice variable transparency levels in the windows (ie, see-through stuff, nothing to do with the image's alpha channel)? <br><br></td></tr></table><br>
<a name="646170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep<br>P.S. Don't think it is B+ fault but DirectDraw. Obviously the decisions to use DX1 might be questioned.<br>Does B+ really use DX1? <br><br></td></tr></table><br>
<a name="646175"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> But as a mather of fact, you don't have alpha in 2D so it makes no sense in loading those information.<br>BM on the other side is full 3D and in 3D, alpha exists, so it makes sense to load the data. <br><br></td></tr></table><br>
<a name="646229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDerekDoctors</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> B+ does support nominating a mask colour, though, so it makes sense if there's information available in a file pertaining to that to actually use it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
