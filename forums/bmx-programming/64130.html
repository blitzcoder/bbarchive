<!DOCTYPE html><html lang="en" ><head ><title >How can I show a Runtime error?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How can I show a Runtime error?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How can I show a Runtime error?</a><br><br>
<a name="715650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>If I run this code in the IDE:<br><br><pre class=code>
runtimeerror("testing")
</pre><br><br>in debug mode, a dialog appears saying unhandled exception: 2 but in non-debug mode it just shows 2 on the IDE output window.<br><br>However, when running the actual .exes generated by the IDE, no dialog appears at all.<br><br>So how can I make a simple windows style error dialog show for when errors occur and I haven't yet initialised the graphics.  Do I need a simple windows libary call as nothing seems to do it in BMax?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="715757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK sorted it, just before I call runtimeerror I have to call Notify("error message") to see it. <br><br></td></tr></table><br>
<a name="715765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is correct way.  It has to do with catching exceptions.<br><br><pre class=code>
Type  TApplication
	Method Run()
        Graphics 640,480,0
		While Not KeyHit(KEY_ESCAPE)
			Cls
			If KeyHit (KEY_F1)
				RuntimeError "Poop"			
			End If	
			Flip
		Wend
	End Method
End Type


' Main code notice the try catch that whats important

Try
   (New TApplication).Run
Catch  Text:TRuntimeException  
   Notify Text.ToString()
End Try

</pre><br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="715766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks budman, I'll try that out. <br><br></td></tr></table><br>
<a name="715818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Budman: hmm, well I use Try Except all the time in Delphi as that catches anything, not just stuff that is Raised (Thrown).  However BMax only seems to catch runtime errors that are created with runtimeerror, not just ones that occur due to bugged code for example:<br><br><pre class=code>
Type  TApplication
	Method Run()
        Graphics 640,480,0
		While Not KeyHit(KEY_ESCAPE)
			Cls
			If KeyHit (KEY_F1)
				Local image=Null
				DrawImage image,0,0
			End If	
			Flip
		Wend
	End Method
End Type


' Main code notice the try catch that whats important

Try
   (New TApplication).Run
Catch  Text:TRuntimeException  
   Notify Text.ToString()
End Try
</pre><br><br>I've made F1 create a null image then try to draw it.  I was hoping that program flow would jump to the catch and return the error but it won't so Try Catch is not a good general protection, it's only good for errors raised by the programmer.  But thanks anyway.  Any other ideas how I can make a "general" error trap? <br><br></td></tr></table><br>
<a name="715928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am delphi programmer as well.  In delphi all exceptions derive from Exception so  typicall you might write<br><br><pre class=code>
try
..
..
except
 on e:exception do ...
end;
[code]

MAX isnt much differnt and you can catch different types of exceptions.  All exceptions in MAX are objects.

You asked how to catch a runtime error :)

To catch all exceptions
[code]
' Here is one i made up
Type EMyException
	Method ToString:String()
		Return "EMyException- Poopie"	
	End Method
End Type
Type  TApplication
	Method Run()
        Graphics 640,480,0
		While Not KeyHit(KEY_ESCAPE)
			Cls
			If KeyHit (KEY_F1)
				RuntimeError "Poop" ' this throws TBlitzException
			End If				
			If KeyHit (KEY_F2)
				Throw "Poopie"	' This throws a string object						
			End If	
			If KeyHit (KEY_F3)
				Throw (New EMyException)	' This throws EMyException						
			End If	
			
			Flip
		Wend
	End Method
End Type


' Main code notice the try catch that whats important

Try
   (New TApplication).Run
Catch  r:TRuntimeException
	Notify "Runtime "+r.ToString()
Catch  e:String
    Notify "Unhandled"+e.ToString()
Catch  d:EMyException
    Notify "Unhandled"+d.ToString()
End Try
</pre><br><br>You notice it is very similar.  Now you can just catch o:Object and attempt to figure out what it is if you need general handler<br><br>Hope this helps.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="716043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm interesting, so for my example above if I change the bottom bit to:<br><br><pre class=code>
Try
   (New TApplication).Run
Catch  o:Object
   Notify "o dear"
End Try
</pre><br>it works!  But I've no idea what the object is so I can get the error string...any ideas?  Thanks very much for all your help. <br><br></td></tr></table><br>
<a name="716048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha, it's OK I searched the modules and found TBlitzException which al the other are derived from and so made this code:<br><br><pre class=code>
Try
   (New TApplication).Run
Catch  o:Object
   If TBlitzException(o) Then Notify TBlitzException(o).ToString()
End Try
</pre><br><br>This works well.  In debug mode I get a proper error message but in non-debug mode it just says "unhandled memory exception" which is a bit of a shame, but better than just bombing.<br><br>This is good because I'm having an issue with OpenGL just bombing on another PC and so now I can wrap all the code with this general catch all, compile a debug version, and then see what's going on (I hope).<br><br>[edit]OK, tried this line after the notify line:<br><pre class=code>
If TNullObjectException(o) Then Notify("Null Object")
</pre><br>In debug mode, the second notify is shown, but not in non-debug mode.  I assume that debug mode must basically be able to show more detailed error messages due to the way the .exe is compiled - oh well. <br><br></td></tr></table><br>
<a name="716081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just so you know,  all blitzexceptions devrive from TBlitzexcetpions but....<br><br>Throw "Error" is just a string object.  So you may want to<br>have a else condition else Notify o.Tostring.<br><br>Glad to have helped.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="716126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK good idea.  Of course it still won't trap user-defined error types unless they inherit from TBlitzException. <br><br></td></tr></table><br>
<a name="716147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great. I've made a global var called DebugInt that you can set anywhere in your code so that if it crashes unexpectedly, the number is shown so you at least have an idea where it went wrong.  We did this for our Client/Server Delphi database application Merlio32 and it was really useful.<br><br><pre class=code>
' -----------------------------------------------------------------------------
'General error handling
' -----------------------------------------------------------------------------
Function HandleGeneralError(o:Object)
	'This should be called inside the Catch section of a Try/Catch/End Try like this:
	'Try
	'  'some code
	'Catch o:Object
	'  HandleGeneralError(o)
	'  Shutdown()
	'End Try
	
	EndGraphics 'safety to ensure desktop isn't messed up
	ShowMouse() 'make sure user can click on dialog.
	
	'In debug mode, this will display a valid error message.
	'In non-debug mode (final release), this will show a dialog saying "memory execption error"
	'which is better than nothing.
	'In full-screen mode, this will still show a dialog on the desktop after the graphics mode
	'is ended, and when the dialog is clicked, the game will shutdown.
	If TBlitzException(o) Then
		Local Prefix$ = ""
		If DebugInt&lt;&gt; 0 Then Prefix = "("+DebugInt+") "
		Notify Prefix + TBlitzException(o).ToString()
	Else
		'Perhaps a string has been raised? If so, show it.
		Notify o.Tostring()
	EndIf
End Function
</pre><br><br>Thanks again Budman.  Now my framework will be able to give really good debug info back in the event of a crash. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
