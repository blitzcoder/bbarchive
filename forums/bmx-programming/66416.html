<!DOCTYPE html><html lang="en" ><head ><title >Sprite path movement</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sprite path movement</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Sprite path movement</a><br><br>
<a name="742059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizenick</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I've got a sprite that contains a list of move points to travel to. I want it to move from point to point at a set speed. I've got it moving toward the point, but I need a way to track how many frames will it take to get to the next point, before switching to the next one.<br><br>Any help would be appreciated. Thanks. <br><br></td></tr></table><br>
<a name="742068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Move it as if you are moving it in one dimension, on a straight line which starts at 0, then calculate each frame where along the line it should be when at that 1D position.<br><br>In other words, move it at a speed of 100 uniers per second.  Or 5 units per frame, or however you want to move it.  Then, each frame, take that distance, and loop through your list of points, subtracting the distance between each set of points, until you exceed the desired distance.  Then calculate using the remainder, where the sprite lies in that segment.<br><br>This is what my sprite system does in it's path system, except that in my games I needed to allow hundreds of sprites to move along multiple paths, each with thousands of points and line segments.  So I optimized it by precalculating the length of each segment when the path is created, as well as the distance each point is at along the line, and storing these in an array.  Then I do a binary search of the points until I know the particular segment the sprite lies on.  Using a binary search means that even with thousands of line segments, each sprite only has to look at about 8 points on the line to determine which segment it is on.  And that means that even with thousands of points on multiple paths with hundreds of sprites moving along them, my framerate doesn't drop.<br><br>But you don't need to go that far if you just want to move a few sprites along paths with only a few points.  The paths in my game have thousnads of points because I build them using a bitmap, so each pixel bascially becomes a point on the path.  (The sprite system just takes whatever paths you give it and uses the optimized code on those paths, they don't have to have thousands of points or be built from a bitmap.) <br><br></td></tr></table><br>
<a name="742244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> take a look at this code <a href="http://www.blitzbasic.com/Community/posts.php?topic=55711" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=55711</a><br><br>it has some path following logic in it <br><br></td></tr></table><br>
<a name="742295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizenick</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I'm doing is that every sprite has a move amount variable that decreases by the speed of the sprite every frame. So when the amount is negative, the sprite switches to the next point in the list. So what I'm really asking for is the calculation to use that will set the move amount to the distance between the two points. Thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
