<!DOCTYPE html><html lang="en" ><head ><title >Is were anything like ToBytes in Type String?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is were anything like ToBytes in Type String?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Is were anything like ToBytes in Type String?</a><br><br>
<a name="608487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Type String there's a function FromBytes:String( bytes:Byte Ptr,length ) which creates a string from bytes.<br>But there's no method like ToBytes( bytes:Byte Ptr, length ) which copys a string to bytes in memory.<br>Is there another way? <br><br></td></tr></table><br>
<a name="608571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ToCString() <br><br></td></tr></table><br>
<a name="608576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> whats wrong with StringVar[index] ? <br><br></td></tr></table><br>
<a name="608603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't help you if you have to pass the string to a function that expects a byte pointer. <br><br></td></tr></table><br>
<a name="608634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I'm using ToCString(), can I be sure that every char is copied to returned memory, or will it stop after the first null char?<br>(I want to create a byte or short array, so I don't really know whether I really should use To<i>CString</i>())<br><br>Thanks for help! <br><br></td></tr></table><br>
<a name="608705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> CreateRamStream and then WriteString to that? <br><br></td></tr></table><br>
<a name="608713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> C strings always end with a null char, even other languages do this too. <br><br></td></tr></table><br>
<a name="608720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know what happens when you make .toCString<br><br>there are two possible ways to implement toCString:<br><br>1.- Making a copy of the string contents with a null char added at the end and returning a byte pointer to this ram bank. In  this case, you should use banks instead of strings.<br><br>2.- returning a byte pointer to the bank where the BlitzMax string is already allocated. In this case you could pass also the lenght of the string, and you would have your problem solved. <br><br></td></tr></table><br>
<a name="608721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember somewhere you have to free the memory returned by .ToCString() as its not handled by the gc. <br><br></td></tr></table><br>
<a name="609530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> C strings always end with a null char, even other languages do this too. <br></div>And exactly this is my problem - I don't want to have a C string, I want to have a byte or short array. Something like this would help me:<pre class=code>Strict

Function StringToShortArray:Short [] ( S$ )
  Local Shorts:Short [ Len S ]
  MemCopy Shorts , 4 + Byte Ptr Object S , 2 * Len Shorts
  Return Shorts
EndFunction

Function StringToShorts ( S$ , Shorts:Short Ptr )
  MemCopy Shorts , 4 + Byte Ptr Object S , 2 * Len S
EndFunction

Function StringToByteArray:Byte [] ( S$ )
  Local Bytes:Byte [ Len S ]
  For Local I = 0 Until Len S
    Bytes [ I ] = S [ I ]
  Next
  Return Bytes
EndFunction

Function StringToBytes ( S$ , Bytes:Byte Ptr )
  For Local I = 0 Until Len S
    Bytes [ I ] = S [ I ]
  Next
EndFunction</pre>I could write a module for this.<br>But I don't really want to write a module for only four functions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
