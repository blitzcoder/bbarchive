<!DOCTYPE html><html lang="en" ><head ><title >How to add c++ files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to add c++ files</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to add c++ files</a><br><br>
<a name="1157283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Twinprogrammer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>    I've been trying to add a c++ header file to my game, but I don't know how. Could you guys show me how to successfully add a c++ header and source file ? <br><br></td></tr></table><br>
<a name="1157288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> this can be a complicated topic. the best way to learn is to look at brucey's modules.<br><br>generally, c++ headers and source are imported via<br><pre class=code>
Import "header.h"
Import "source.cpp"
</pre><br><br>then, depending on if you are using cpp classes, you need to write "glue" code, which creates a managed blitzmax class that calls the original cpp class.<br><br>the bridge between cpp and bmax are variable pointers.<br><br>generally, the cpp glue maintains the class constructor, destructor, and pointers to the original class's information. sometimes you need class methods to pass data as well. it can get complicated and lengthy when trying to port a large API. <br><br></td></tr></table><br>
<a name="1157345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Twinprogrammer</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I add my header file, I get an error saying a .h is a illegal file type. <br><br></td></tr></table><br>
<a name="1157366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not something I've done myself, but I was under the impression that you <i>don't</i> add header files: instead, you import only the .cpp, and put the declarations in the BlitzMax code using "Extern". The BlitzMax compiler has no use for declarations written in a foreign language to it. <br><br></td></tr></table><br>
<a name="1157401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> if on Windows, make sure mingw is installed. on mac, xcode. <br><br></td></tr></table><br>
<a name="1157537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>From my own experiences...<br><br>Don't worry about importing the .h header files into BMax. There's no need, just #include the headers from within the appropriate c++ file that needs the declarations and Import the .cpp file.<br><br>If you need the values from the .h inside BMax for whatever reason then you'll need to write them out manually in BMax.<br>Structs are simple Types and can be passed into and out of the c++ using a Byte Ptr, but you need to make sure that the size of the whole Type in BMax is the same size as the Struct in C. This includes the size of any of structs that the c++ struct uses as a parameter.<br>Non virtual Classes are different but not difficult and will need wrapping with a pointer to the Class that's passed in to the glue code. There are different ways to wrap them, and can depend  on whether the c++ methods are virtual or not as to what method you use.<br><br>I've found it easier to just wrap everything in a BMax Type thats will call a C style 'accessing' API of your own which will call the c++ class code ( if ALL of the C++ methods are virtual then you'll only need to write the c++ constructor and destructor in C and use the returned pointer directly as an extern'd BMax Type to access the C++, as in the docs.) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
