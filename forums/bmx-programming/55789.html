<!DOCTYPE html><html lang="en" ><head ><title >Array.Sort() problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Array.Sort() problem</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Array.Sort() problem</a><br><br>
<a name="620852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Suco-X</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br>This small code shows you the problem. I need an array that can have "null" fields.  I get an error with Array.Sort().<br>What can I do?<br>Thanks.<br><br><pre class=code>
Strict 

Type TTemp
End Type

Local Temp:TTemp[10]
Temp.Sort()
</pre><br><br>Dont forget, I need an Array, no Lists.<br>Mfg Suco <br><br></td></tr></table><br>
<a name="620872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What can I do? <br></div>Implement your own sorting algorithm. Since Null objects cannot sensibly be said to be less than or greater than any 'other' objects, sorting them is meaningless. <br><br></td></tr></table><br>
<a name="620877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to nitpick, I have to disagree. What if two instances compare equal? Then they will just be side by side once sorted. Sort could very well do the same for Null references: they could end up side by side in the final sorted array (say at the start or end. It just *happens* that it's not done like that. <br><br></td></tr></table><br>
<a name="620893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sort could very well do the same for Null references: they could end up side by side in the final sorted array <br></div>Yes, you could in theory make a sort routine that would sort an entire array of Null objects. But there would be little point as the array would already, by definition, be sorted.<br><br><div class="quote"> (say at the start or end. <br></div>So which is it, and what mathematical basis do you have for putting "Null" as the absolute highest value possible, or the absolute lowest value possible?<br><br><div class="quote"> It just *happens* that it's not done like that. <br></div>Yes, but it happens for a reason. That reason happens to be because Null is undefined, and thus ordering it in relation to defined objects is meaningless. Kind of like how you can't tell if sqrt(-1) (or <b><i>i</i></b> or <b><i>j</i></b> depeding on which notation you prefer) is higher than 0 or lower than 0. It simply isn't meaningful to compare imaginary, and non-imaginary numbers. <br><br></td></tr></table><br>
<a name="621151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;super nitpick mode on&gt;<br><div class="quote"> Yes, you could in theory make a sort routine that would sort an entire array of Null objects. But there would be little point as the array would already, by definition, be sorted. <br></div>I will pretend I really think you just misunderstood. I wasn't talking about sorting an array with only null references. I was talking about the orginal poster's issue : an array which *can* contain null references.<br><br><div class="quote"> So which is it, and what mathematical basis do you have for putting "Null" as the absolute highest value possible, or the absolute lowest value possible? <br></div>This would obviously be arbitrary (but to answer I'd put it at the end). In any case that would rarely be worse than a null pointer exception don't you think?<br><br><div class="quote"> Yes, but it happens for a reason. <br></div>Indeed. And I do think it's good as it is.<br><div class="quote"> That reason happens to be because Null is undefined,  <br></div>Undefined? Explain me that.<br><div class="quote"> It simply isn't meaningful to compare imaginary, and non-imaginary numbers.  <br></div>Totally true. But to come back to the null reference issue, when do you need to compare a null value to a real instance when sorting an array that may contain null refernces? Never. So that's not an issue.<br>Really, the only issues are that not treating null values as an error when sorting an array could potentially delay the detection of a program error, and that it would add some (though negligible) overhead.<br><br>Just as a record, my nitpick was about that sentence:<div class="quote"> Since Null objects cannot sensibly be said to be less than or greater than any 'other' objects, sorting them is meaningless. <br></div>There is placce for nitpicking because what is actually sorted is an array of *references* to objects. Not an array of objects. That's some subtle difference. It just happens that (quite logically) the references to real objects (ie non null) is done based on the object's value.<br><br>The problem is the language/compiler (as it is) cannot possibly know if a given references is supposed to always point to a real object, or could if it is semantically correct for it be Null. This knowledge is all in the programmer's head and nowhere else.<br>Same for an array of references, which means that Sort cannot possibly "guess" what to do with null references.<br><br>Now let's be clear, the real intent of Sort (from mark's point of view) is certainly to only sort containers of non null references. That's Mark's design choice, that would also probalby be my design choice, and the one of most sensible people (as there are pretty few uses of keeping null values). But the other choice is not totally stupid/unsensible either.<br>&lt;/super nitpick mode on&gt;<br>I probably beaten my own nitpick record here. <br><br></td></tr></table><br>
<a name="621184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem with your thinking how it should work: It is simply not OO.<br><br>In OO the sorting is done using a compare method and the problem is that a NULL object can't be used to call its NULL method.<br><br>In theory you could work around that by simply bubblesort NULL objects up until the next non-NULL appears ... but thats quite ineffective if half of the array is NULL<br><br>If you want something like this with NULLs you better use TList ... there no NULLs exist and for sorting you can get an array from it, sort this and make a TList out of it again (there are given functions within TList for both conversion steps) <br><br></td></tr></table><br>
<a name="621193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In theory you could work around that by simply bubblesort <br></div><br><br>You sicken me...<br><br>On another note: <a href="http://blitzbasic.com/codearcs/codearcs.php?code=1601" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1601</a> <br><br></td></tr></table><br>
<a name="621195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this take user defined compare methods into account? (don't think as it is a c wrapper and thus sorts the pointer values instead of the actual objects or am I wrong?) <br><br></td></tr></table><br>
<a name="621198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why would your array have null objects and some non-null objects? Maybe you can extra the non-null objects to a second array and sort that? <br><br></td></tr></table><br>
<a name="621203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does this take user defined compare methods into account? (don't think as it is a c wrapper and thus sorts the pointer values instead of the actual objects or am I wrong?) <br></div><br><br>If you'd actually looked you'd see that it did. <br><br></td></tr></table><br>
<a name="621225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> And if he had read anything he wouldn't even have posted that first reply. "It's simply not OO" *sigh*<br>Well we all post without really thinking at one moment or another. <br><br></td></tr></table><br>
<a name="621226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I checked the link Noel.<br>But the code there does not show the implementation and I don't download modules I don't need so the next time you want to show something show it or let it ... links to links to downloads are not really that usefull for showing how something could be done! <br><br></td></tr></table><br>
<a name="621230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well maybe you should have a new look at it. You have the source code.<br>Hint: "cmpObj".<br><br>EDIT: I see where this is going, it's going toward the harsher side and I don't quite like that. I think I'll move on and leave this thread.<br>Then again, phrases like "problem with your thinking..." followed by nonsense are quite amusing.<br>EDIT2: @ Noel: in cmpObj you probably meant to do  "If Not c And Not d" rather than  "If Not (c And d)". <br><br></td></tr></table><br>
<a name="621256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Undefined? Explain me that. <br></div>An object is defined by three things. Identity, State, and Behavior. Null objects have neither of these, thus from an OO perspective they are undefined.<br><br><div class="quote"> In OO the sorting is done using a compare method and the problem is that a NULL object can't be used to call its NULL method. <br></div>That's just a matter of language syntax. You could have a rule that stated that the default way of comparing objects was by comparing addresses. Thus any Null objects would have the value '0'. Ofcourse this would mean that all Null objects would get sorted to the front of the array, and since I generally agree with Koriolis' assertion that it's more useful to have Null objects at the end of the array, well that's hardly ideal either.<br><br><div class="quote"> But the other choice is not totally stupid/unsensible either. <br></div>I didn't mean it in that way. I meant that comparing Null objects to real objects is meaningless (and thus has to be defined by an arbitrary rule), not that there wheren't valid reasons for hanging on to Null objects. <br><br></td></tr></table><br>
<a name="621305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @ Noel: in cmpObj you probably meant to do "If Not c And Not d" rather than "If Not (c And d)". <br></div><br><br>Woops, yeah.  That's what I get for posting code at 1am.  Thanks :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
