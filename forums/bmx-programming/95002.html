<!DOCTYPE html><html lang="en" ><head ><title >type symbols</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >type symbols</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >type symbols</a><br><br>
<a name="1092533"></a>

<a name="1092534"></a>

<a name="1092535"></a>

<a name="1092536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Should be a simple one but I dont recall anything like this...<br><br>I want to make an array of bytes using :-<br><br>Local Array:Byte[] = [ 1 , 2 , 3 , 4 , 5 ]<br><br>but this creates an error during compilation as the numbers are recognised as integers.<br>My question is is there a type symbol for bytes?? The same as in a float is #, double is !, hex is $ etc<br><br>cheers.<br><br>Just trying to create a byte array without first knowing its size. I have done it converting from an int to byte array, but its a long way round.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1092537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This seems to work:<br><pre class=code>Local Array:Byte[] = [ Byte(1) , Byte(2) , Byte(3) , Byte(4) , Byte(5)]</pre> <br><br></td></tr></table><br>
<a name="1092539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya Gfk,<br><br>Yes it does, and its a lot of typing when inputting say 40 bytes, and it also looks unsitely...<br>Is there a byte symbol to make it soo much easier ? I've scanned the docs and can't it? <br><br></td></tr></table><br>
<a name="1092540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't believe so, and even if there was you'd use a symbol to define a variable type rather than using it alongside the value itself. <br><br></td></tr></table><br>
<a name="1092541"></a>

<a name="1092542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, OK.<br><br>I have another idea then.<br><br>Thankyou for the fast replies.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1092543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I stand corrected - you can use @ to specify a byte, however it doesn't seem to work in this case.  The nearest I can get it by defining each number as a byte (i.e. 1:Byte), or casting to a byte as in the previous example. <br><br></td></tr></table><br>
<a name="1092546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was using the :Byte method, but its very long winded when more than a couple of bytes to use.<br><br>Like you say...it doesnt work in that scenario.<br><br>It only seems to work on 'stand-alone' variables. ie<br>Local b@ = 5<br><br>Local b@[10] :- doesnt work too.<br><br>Never mind. The idea I have is wrap it in a Type and send in an integer array and convert it. I can make it really easy to use and the external code will look a whole neater.<br><br>Thanks again :-) <br><br></td></tr></table><br>
<a name="1092569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could do this if you were desperate to get your array declaration shorter:<br><pre class=code>Local Array:Byte[] = [ b(1) , b(2) , b(3) , b(4) , b(5) ]

Function b:Byte(val:Int)
  Return Byte(val)
End Function</pre><br><br>...IF you were desperate. :D <br><br></td></tr></table><br>
<a name="1092594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It indeed doesn't seem to work.<br><pre class=code>
Local Array1:Float[] = [1#, 2#, 3#] 'fine
Local Array2:Int[] = [1%, 2%, 3%] 'also fine
Local Array3:String[] = ["1", "2", "3"] 'somewhat different, but works
'Local Array4:Byte[] = [1@, 2@, 3@] 'nope ..
</pre><br><br>To elaborate a bit on Gfk's example:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

'out of range values are delib. to see if it is really a byte array
Local b:Byte[] = CreateByteArray( [1,2,3,4,255,256,-10] )

For Local bb:Byte = EachIn b
	Print bb
Next

Function CreateByteArray:Byte[](in:Int[])
	Local ret:Byte[in.length]
	Local p% = 0
	For Local i% = EachIn in
	 	ret[p] = Byte(i)
		p:+1
	Next
	Return ret
End Function</textarea><br>Maybe instead, you could better look into incbin byte data instead, using LoadByteArray and IncBin. <br><br></td></tr></table><br>
<a name="1092620"></a>

<a name="1092621"></a>

<a name="1092624"></a>

<a name="1092625"></a>

<a name="1092626"></a>

<a name="1092630"></a>

<a name="1092631"></a>

<a name="1092632"></a>

<a name="1092633"></a>

<a name="1092634"></a>

<a name="1092635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> A little snippet :-<br><br><pre class=code>
Type SRSVertexDeclaration
	Field Declaration:Byte[]
		
	Method AddElement( In:Int[] )
		Declaration = Declaration[ ..Len( Declaration ) + 8 ]
		Local Offset:Int = Len( Declaration ) - 8
		
		Declaration[ OffSet + 0 ] = In[ 0 ]
		Declaration[ OffSet + 1 ] = ( In[ 0 ] &amp; $FF00 ) Shr 16
		Declaration[ OffSet + 2 ] = In[ 1 ]
		Declaration[ OffSet + 3 ] = ( In[ 1 ] &amp; $FF00 ) Shr 16
		Declaration[ OffSet + 4 ] = In[ 2 ]
		Declaration[ OffSet + 5 ] = In[ 3 ]
		Declaration[ OffSet + 6 ] = In[ 4 ] 
		Declaration[ OffSet + 7 ] = In[ 5 ]
	EndMethod
	
	Method GetDeclaration:Byte[]()
		Return Declaration
	EndMethod
EndType
</pre><br><br>An example of using it :-<br><br><pre class=code>
Global VertexDecl:SRSVertexDeclaration = CreateVertexDeclaration()
VertexDecl.AddElement( [ 0 , 0 , D3DDECLTYPE_FLOAT3 , D3DDECLMETHOD_DEFAULT , D3DDECLUSAGE_POSITION , 0 ] )
VertexDecl.AddElement( [ 0 , 12, D3DDECLTYPE_FLOAT3 , D3DDECLMETHOD_DEFAULT , D3DDECLUSAGE_NORMAL   , 0 ] )
VertexDecl.AddElement( [ 0 , 24, D3DDECLTYPE_FLOAT2 , D3DDECLMETHOD_DEFAULT , D3DDECLUSAGE_TEXCOORD , 0 ] )
VertexDecl.AddElement( D3DDECL_END() )
</pre><br><br>I was using the older FVF method, which still sets up the programmable shader declarations correctly strangely enough, and I also wanted to make it compatible with Dx10 and Dx11 should I want to update the engine to those versions, which to be honest wouldn't be that difficult.<br><br>As you can see, by wrapping it in a TYPE, the actual code is nice and neat to use. Imagine all those ':Byte' or  Byte(int) in the code?!?! that would be so ugly.<br><br>I know it doesnt have to be an array passed in in that example but the array is also used elsewhere. Just keeps things simple and fluid to use, like using D3DDECL_END() for eg which is itself an array too. And it could easily be an array of shorts instead of integers, but I'm sure you get the idea.<br><br>Thanks all,<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1093155"></a>

<a name="1093156"></a>

<a name="1093158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens if you just use an array of Ints? I know it's not solving the problem but if you are using bytes to save memory or something, I really wouldn't bother.<br><br>You could also try this (not tested)<br><br><pre class=code>Global intarr:Int[] = [1, 2, 3]
Global bytearr:Byte[] = Byte[](intarr)</pre><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1093181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br>I'm using this directly with DirectX.<br>The correct format to setup and use a D3DVertexDeclaration* in c++ is to use a<br><br>Short , Short , Byte , Byte , Byte , Byte.<br><br>to describe a singe D3DVertexElement*. The vertex declaration is then made up of any number of these elements.<br><br>Anything else and it doesn't work.<br>I've seen other engines written in BMax that palm out to c/c++ for this, but there's no need when you can do it this way inside of BMax.<br><br>The example code that uses it is practically identical to how the D3D* manuals tell you to use it in c++. I'm keeping things as close to the manual as possible for intuitiveness.<br><br>I didn't want to mess with fudge code and 32bit integer.<br><br>My code above solves the problem and is very intuitive to other programmers used to DirectX.<br><br>* = 9/10/11.<br><br>Cheers <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
