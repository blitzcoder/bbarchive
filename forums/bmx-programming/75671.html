<!DOCTYPE html><html lang="en" ><head ><title >Sockets, pull the plug</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sockets, pull the plug</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Sockets, pull the plug</a><br><br>
<a name="845588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guys (and girls :P)<br><br>I wonder... i setup a stream for a socket and found it is blocking. Isn't that so?<br>How did i find out? Count the game loops and it just stopped counting.<br><br>Then i found another way using socket.Recv() which runs perfectly and the loop keeps counting. However if i keep flooding it with 4000 in lenght, text strings (=big packets) it seems to freeze at some point.<br><br>Are there any alternatives besides these 2? I found there is as well only 2 options for sending bytes, that is using the either a stream, or the send() command. Am i right?<br><br>I know whats arround in lib form, but im asking here for TCP using RAW sockets. Thanks. <br><br></td></tr></table><br>
<a name="845592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your probably overloading the buffer, using strings for packets isn't very efficient. <br><br></td></tr></table><br>
<a name="845593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> using strings for packets isn't very efficient <br></div><br>your kidding? :P<br><br>ye, so what i really want to find out what is blocking and what is non-blocking. Basicly by keeping it busy processing packets. <br><br></td></tr></table><br>
<a name="845595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How many times per second do you send that ... don't forget, regular connections only have something between 12 kbyte and 50kbyte per second upstream ... this would mean 12.5 packets of that size per second, not per 50 milliseconds ^^<br><br>ie I would bet you just flood your whole buffer as already mentioned above. <br><br></td></tr></table><br>
<a name="845605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol, i was actualy just holding my send key down and.<br><br>ok,so when a buffer gets flood it crashes? cant we resize the buffer? if its set to 4096 and we need lets say 5000? <br><br></td></tr></table><br>
<a name="845635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The buffer is a hardware thing, not a software.<br>And actually, a message can not be larger than 1492 / 1500 anyway ...<br><br>I would suggest getting some "basic" documentation on TCP and UDP if you still are after the idea creating a networking layer that is capable of more than killing apps ^^ <br><br></td></tr></table><br>
<a name="845641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ok,so when a buffer gets flood it crashes? cant we resize the buffer? if its set to 4096 and we need lets say 5000?  <br></div><br><br>you'll need to split it into multiple packets -- even if your test works with &gt;1500 bytes, most switches and routers won't, so it has few real-world applications.<br><br>Search for 'MTU' for more info (maximum transmission unit) <br><br></td></tr></table><br>
<a name="845689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, well for my game i will not exceed that. I was just doing that on purpose. Nonetheless i will checkout that buffer limit anyway. Thanks <br><br></td></tr></table><br>
<a name="845691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats why I suggested having a look at Vertex' BNetEx module. he put a lot of time in research this kind of information for all 3 plattforms. <br><br></td></tr></table><br>
<a name="845729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, thank you, where can i find BNetEx? <br><br></td></tr></table><br>
<a name="845731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://vertex.dreamfall.at/bnet/bnetex170beta2.zip" target="_blank">http://vertex.dreamfall.at/bnet/bnetex170beta2.zip</a><br><br>There you will find the current version.<br><br>Alternatively, the current version can always be found on the blitzhelp.net modserver at www.blitzhelp.net/modserver but you will need to manually call bmk (or use an ide that supports it) to check out modules from there <br><br></td></tr></table><br>
<a name="845733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you! <br><br></td></tr></table><br>
<a name="845844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vertex.BNetEx v1.70 Beta 2<br>Thats AWESOME! i check it out. Hey, do you know if this is blocking? Where can i find more info on this lib? I scrap my own, this one is really good. Is it still supported? <br><br></td></tr></table><br>
<a name="845845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, as far as I know vertex still is working on it.<br>Don't know if it is blocking, you could have a simple look at the tcpstream implementation to see thought :)<br><br><br>There is a thread on it but it won't help you much as it is in german.<br>But if you build the documentations this should be more than enough I think. its quite simple and is wrapped into TStream extends so simple to handle. <br><br></td></tr></table><br>
<a name="845846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> vertex should really put a page up and add a donation button. <br><br></td></tr></table><br>
<a name="846161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am considering maybe using BNetEx except it could really do with English documentation and I'm not too sure I'm happy with the idea of a UDP `stream`. <br><br></td></tr></table><br>
<a name="846170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see how UDP can be reliable with a network game.<br><br>I have used BNetEx for a chat client before, it's reliable (never done any stress tests though). <br><br></td></tr></table><br>
<a name="846353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> UDP alone obviously isn't reliable but you can add reliability by adding acknowledgments or something. <br><br></td></tr></table><br>
<a name="846391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> correct ... by readding the stuff the TCP protocol does on its own. But it is optional so you can selectively apply it to messages where you need it to have, not on stuff where it is not worth it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
