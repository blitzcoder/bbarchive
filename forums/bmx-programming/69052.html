<!DOCTYPE html><html lang="en" ><head ><title >UDP gurus? Trying to figure out total packet size.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >UDP gurus? Trying to figure out total packet size.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >UDP gurus? Trying to figure out total packet size.</a><br><br>
<a name="771854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So let's assume I'm sending packets back and forth between a server and client, and they only contain 1 byte of data. Obviously the packet size is not 1byte, because there's header information etc. on the packet.<br><br>Is there somekind of way to calculate or see what the total packet size is, or a way to predict it?<br><br>I have been scratching my head at the packets I've captured with Ethereal. They are anything from 40 to 63 byte, but still only contain 1 byte of data, and the source/remote ip addresses in the header are the same. So it's not as straightforward as I had hoped, to predict what any given packet's size is.<br><br>Reason I want this precize packet size number is to have both server and client display the exact amount of data being sent and received by the game.<br><br>Anyone? :D <br><br></td></tr></table><br>
<a name="771929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> DISCLAIMER: It's been many many moons since CCNA and this kinda stuff is easily forgotten (by me at least ;o)), so it'd probably be best to google for 'udp encapsulation overhead' or something.<br><br>I seem to recall the overhead being 28 (20 + 8) bytes for UDP and 40 (20 + 20) bytes for TCP. Remember that transport mechanisms will add their own encapsulation.<br><br>Probably best to not rely on my flakey memory thought. Do a google! ;o) <br><br></td></tr></table><br>
<a name="771938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there somekind of way to calculate or see what the total packet size is, or a way to predict it? <br></div>Yes. Look at the <a href="http://en.wikipedia.org/wiki/OSI_model" target="_blank">OSI</a> / <a href="http://en.wikipedia.org/wiki/TCP/IP_model" target="_blank">TCP</a> model. Each layer adds its own header and trailer. Also it's important to remember that the data-link layer, in the case of Ethernet, will extend the frame size to 512 bits, to ensure proper collision detection, regardless of previous size. So if your packet is being sent over Ethernet, it's always going to use at least 64 bytes. <br><br></td></tr></table><br>
<a name="771998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> UDP headers are 8 bytes. <br>UDP headers contain 4 fields:<br>1) source port number = 2 bytes<br> 2) destination port number = 2 bytes<br> 3) length of data portion = 2 bytes (Length: The length of the entire UDP datagram, including both header and Data fields.)<br>4) UDP checksum. = 2 bytes<br><br>the packet size = the 8 byte header + the size of your DATA.<br><br>keep in mind that as your packet snakes it's way across the internets, it may change size due to the transport mechanism being used.<br><br>It could get encapsulated into another packet or frame, etc but when the UDP packet gets to the destination, it will be the same size as it was at the source.<br><br>hope this helps. <br><br></td></tr></table><br>
<a name="772006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In short: no, there's no (reasonable) way to know the exact amount of data. But you can make educated guesses. Like FlameDuck mentions, have a look at the OSI model.<br><br>Example: UDP over IPv4 over Ethernet<br>Total packet size &gt;= UDP data + UDP header + IPv4 header + MAC frame header<br><br>Why &gt;=? Because the headers contain optional fields; for example, IP can have DiffServ fields as well, which will increase the size.<br><br>Also, to complicate things further, you can never just assume that a typical set of stacked protocols are being used; UDP with IPv4 and Ethernet is probably most common, but things change depending on the uplink. For example, a WLAN uplink would have additional headers. DSL would also introduce additional layer 2 protocols. (Although that's not visible for client computers connecting to a modem.)<br><br>If you want to know the exact amount of data you -can- add a traffic sniffer to analyze the traffic and match incoming/outgoing data (and its complete frame sizes) with your known received data. But that's not reasonable. Instead, you can make a rough estimate since you know that each packet must -at least- have an IPv4 header and a MAC frame header. You can safely add that static number, and get a sliightly better number. <br><br></td></tr></table><br>
<a name="772012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you all so much! Very informative, sure as hell got my answer :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
