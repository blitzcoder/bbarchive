<!DOCTYPE html><html lang="en" ><head ><title >Fullscreen single buffer graphics</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fullscreen single buffer graphics</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Fullscreen single buffer graphics</a><br><br>
<a name="953996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zolyx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've searched and read a couple of topics about people who seem to have got single-buffer graphics working to their satisfaction, but for whatever reason, I'm still having trouble in getting it to work for me. All I'm after is a fullscreen, single buffered graphics canvas.<br><br>Test code:<br><pre class=code>SetGraphicsDriver(D3D7Max2DDriver(), 0)

Graphics 800, 600, 32, 60, 0

Repeat
	DrawText "Hello single-buffered world!", 10, 10
Until KeyDown(KEY_ESCAPE) Or AppTerminate()

End</pre><br><br>The lack of both Cls and Flip in the main loop is deliberate. If there truly was just a single graphics buffer, surely neither of them should be required? I would expect to see the text printed. But... I see nothing except a black screen :(<br><br>Adding a Flip makes it work fine.<br><br>Am I doing something horribly wrong to get a single-buffered graphics canvas set up? <br><br></td></tr></table><br>
<a name="954019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought Graphics (or the driver) uses double buffering? <br><br></td></tr></table><br>
<a name="954024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There isn't any single buffer option, from what I remember. <br><br></td></tr></table><br>
<a name="954026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The CreateGraphics function allows you (according to the documentation) to create a graphics object without a backbuffer.  Can't say I've ever had any joy in getting any of that stuff to do what I assumed it would do.  That said, I haven't spent a vast amount of time on it. <br><br></td></tr></table><br>
<a name="954079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> try adding a flip, i dont think youre going to see much without it...even if you dont want it. <br><br></td></tr></table><br>
<a name="954141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The default is a double buffered display. Add a flip(1) and all is well. <br><br></td></tr></table><br>
<a name="954201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have no idea if DirectX supports it, but you CAN do single-buffered with OpenGL.<br><br>From the docs:<br><br>Function SetGraphicsDriver( driver:TGraphicsDriver,defaultFlags=GRAPHICS_BACKBUFFER )<br><br>You must set the `default flags` to the buffers that you want, when you define what driver you're using. Then when you use Graphics, or GLGraphics, or CreateGraphics, it should give you only those buffers.<br><br>Note that the SetGraphicsDriver function has a default value for the defaultFlags parameter - that means that if you do not provide a parameter it will default to GRAPHICS_BACKBUFFER. I think that possibly passing a 0 as your parameter might make it think you're not passing any flags, and thus will use a backbuffer?<br><br>Either way, what I do is ask for some other specific buffer but not a backbuffer - e.g.<br><br>SetGraphicsDriver GLGraphicsDriver(),GRAPHICS_ALPHABUFFER<br><br>or you could do<br><br>SetGraphicsDriver GLGraphicsDriver(),GRAPHICS_DEPTHBUFFER<br><br>since even 24-bit (non-alpha-channel) screens can have a depth buffer even if you don't use it.<br><br>Since you're specifying a requested buffer, but that doesn't include GRAPHICS_BACKBUFFER, it should NOT create a backbuffer. Then everything that you draw should be drawn immediately to the visible front buffer and you will NOT need to use Flip at all.<br><br>Good luck enjoying the fact that the user will be able to see every drawing operation as you issue it (or as the graphics card performs it), but also the total removal of the overhead of performing a Flip (which typically copies the entire buffer to the screen). <br><br></td></tr></table><br>
<a name="954220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know, if you can begin drawing at the moment the last vsync finishes, and get all of your drawing done before the next vsync, it would work fine.  :) <br><br></td></tr></table><br>
<a name="954239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zolyx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all of the replies :) After some experimentation, a friend and I managed to get it working with OpenGL-based graphics thanks to ImaginaryHuman's suggestion. For anyone else looking to do the same thing, the minimal code to get the job done is:<br><pre class=code>SetGraphicsDriver GLMax2DDriver(), GRAPHICS_DEPTHBUFFER
Graphics 800, 600, 32, 60, GRAPHICS_DEPTHBUFFER

Repeat
	DrawText "Hello single-buffered world!", 10, 10
	glFlush
Until KeyDown(KEY_ESCAPE) Or AppTerminate()

End</pre><br>Cheers! :) <br><br></td></tr></table><br>
<a name="954442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your Graphics call does not need the GRAPHICS_DEPTHBUFFER, you've already made that a default buffer to be requested by putting it in the driver defaults. When you omit the `flags` from Graphics(), it should pull them from what you set in the SetGraphicsDriver line.<br><br>As to what TaskMaster said, it's not quite that simple. The vertical refresh is occuring kind of `all the time` from the top of the screen down. So right after the vertical blank you could start drawing stuff and it won't be `torn` by the refresh point. But as time passes the `beam` (or whatever) will proceed down the screen and eventually it's going to run into the area that you're drawing to, creating a tear. That's the problem with single-buffered displays. If you can sort your drawing so that you start drawing stuff from the top of the screen down, you can always be ahead of the refresh and get no tearing, but that is highly impractical for most graphics. <br><br></td></tr></table><br>
<a name="954623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "If you can sort your drawing so that you start drawing stuff from the top of the screen down, you can always be ahead of the refresh and get no tearing, but that is highly impractical for most graphics. "<br><br>Not to mention totally sporadic behavior depending on cpu/gpu configs. ;)<br><br>But still.... why the need for this??? <br><br></td></tr></table><br>
<a name="954659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would be okay for some applications where you don't care about stuff being seen being drawn? ie not too graphically dynamic? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
