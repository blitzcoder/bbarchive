<!DOCTYPE html><html lang="en" ><head ><title >Sockets</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sockets</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Sockets</a><br><br>
<a name="573362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>How can I retrieve my external IP address in Blitzmax? I found some posts on this, but this was before Mark released the socket library.<br><br><pre class=code>
sock=CreateTCPSocket()
Print SocketRemoteIP(sock)
</pre><br><br>Nothing is returned. I assume I have to do a dottedIP$ in the end for sake of readability. <br><br></td></tr></table><br>
<a name="573485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about<br><br><a href="http://www.tomspeed.com/myip.php" target="_blank">http://www.tomspeed.com/myip.php</a><br><pre class=code>
&lt;?php
echo $_SERVER["REMOTE_ADDR"];
?&gt;</pre> <br><br></td></tr></table><br>
<a name="573504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>As far as I know, there is no bullet-proof way to get your 'real/public/WAN' IP address without connecting to something else external that echoes it back to you, ala the PHP code above.<br><br>I would love to be proved wrong on this one though... <br><br></td></tr></table><br>
<a name="573509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I would love to be proved wrong on this one though... <br></div>Don't hold your breath. The problem is that NAT routers, invisible proxies and all manner of wonderful technology your ISP may be using, will pretty much ruin that. You could find the IP of the next link at the router after yours, but there's no guarantee that'll actually work.<br><br>You could use <a href="http://www.myip.dk" target="_blank">http://www.myip.dk</a> and just parse the output from that. <br><br></td></tr></table><br>
<a name="573572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay thanks! I had used the PHP solution already, but I was wondering how games like Quake and Half-Life do this when you connect to a multiplayer game. <br><br>Another question: what is the best way to get the LAN address (not WAN)? <br><br></td></tr></table><br>
<a name="573575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> mIRC somehow finds out the external IP address even though Im behind both a hardware firewall (nForce one) and the Windows XP firewall plus a NAT server on another computer somehwhere else in the house).<br><br>Using something similar to GNet would it be possible to set up some kind of External IP finding thing on BlitzBasic which echo's the IP back to the computer using port 80 or something (http port). Not exactly a ideal solution but It would sort of work. <br><br></td></tr></table><br>
<a name="573632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> mIRC somehow finds out the external IP address even though Im behind both a hardware firewall (nForce one) and the Windows XP firewall plus a NAT server on another computer somehwhere else in the house). <br></div><br><br>That's probably because  mirc connects you to a remote server, which in return will be able to see and report your IP back to you.<br><br>If you are running a server locally, it wouldn't be able to see its own remote IP without querying some remote server either. <br><br></td></tr></table><br>
<a name="573655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isnt the external IP address of a computer stored somewhere in the registry? I remember a while back a utility that found my external IP address from a registry file, this of course, would only work if you had a dailup or fixed ip connection to the internet, if your behind a router then your probably screwed like FlameDuck mentioned. <br><br></td></tr></table><br>
<a name="573714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could go to <a href="http://www.whatismyip.com/" target="_blank">http://www.whatismyip.com/</a> to get your IP.  Not sure how to do this in Blitz except to maybe have the program parse the web page and extract the IP, but I'd think you'd need permission from the web host to do that. <br><br></td></tr></table><br>
<a name="573736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's what my PHP example above does TomToad :)<br><br>For obvious reasons though, I wouldn't rely on any 3rd party 'get-my-ip' resources. <br><br></td></tr></table><br>
<a name="573770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzforum.de/viewtopic.php?t=13284" target="_blank">http://www.blitzforum.de/viewtopic.php?t=13284</a> ? <br><br></td></tr></table><br>
<a name="573929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Isnt the external IP address of a computer stored somewhere in the registry? I remember a while back a utility that found my external IP address from a registry file, this of course, would only work if you had a dailup or fixed ip connection to the internet, if your behind a router then your probably screwed like FlameDuck mentioned.  <br></div><br><br>Exactly -- and those routers are *very* common nowadays, with the large # of people using DSL or cable connection... If there's a router involved, the PC has no way of finding out what the external IP is other than bounce it of a remote server and ask what it thinks the source address is. <br><br></td></tr></table><br>
<a name="573964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @xlsior: even then sometimes you cant be certain as alot of ISP's have their own weird ways of handling high speed connection IP hand outs. A friend from school has a high speed connection, he cant host games unless he contacts the ISP and tells them he's hosting on port blah blah. His external IP comes up the same as the ISP's DNS servers IP. Very weird. <br><br></td></tr></table><br>
<a name="574142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could try creating a STUN client, although I wouldn't know how myself!<br><br><a href="http://www.ietf.org/rfc/rfc3489.txt" target="_blank">http://www.ietf.org/rfc/rfc3489.txt</a><br><br><a href="http://en.wikipedia.org/wiki/STUN" target="_blank">http://en.wikipedia.org/wiki/STUN</a> <br><br></td></tr></table><br>
<a name="574426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @xlsior: even then sometimes you cant be certain as alot of ISP's have their own weird ways of handling high speed connection IP hand outs. A friend from school has a high speed connection, he cant host games unless he contacts the ISP and tells them he's hosting on port blah blah. His external IP comes up the same as the ISP's DNS servers IP. Very weird.  <br></div><br><br>Sounds like they're running everything through a firewall on their end then... Probably a fairly small outfit, it would become unmanagable really fast. <br><br></td></tr></table><br>
<a name="817489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another method, i hope that usefull...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function GetInternetIp:String()
	WebSite=ReadFile("http::www.whatismyip.com/automation/n09230945.asp")
	
	While Not Eof(WebSite)
		Print ReadLine(WebSite)
	Wend
	
	CloseFile WebSite
EndFunction

GetInternetIp()

Or more short method but carrefull... :
	' ---------------------------
	' Function to get internet IP
	' ---------------------------
	Function GetInternetIp:String()
		Return ReadLine(ReadFile("http::www.whatismyip.com/automation/n09230945.asp"))
	EndFunction

</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
