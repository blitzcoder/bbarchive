<!DOCTYPE html><html lang="en" ><head ><title >A/B testing functions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A/B testing functions</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >A/B testing functions</a><br><br>
<a name="858300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just did some good optimisation by having two copies of a function which I could test 100,000 times via two different key presses.  Then I optimised one of them and got the time down.<br><br>However, one of the optimisations I tried didn't work, it was slower in fact.  In this thread: <a href="http://www.blitzbasic.com/Community/posts.php?topic=76454" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=76454</a> I talked about having a method with 10 params that I call in a  loop from another method and if it would be quicker to have no params and use Global variables (well actually fields on the type that the method is part of) instead.  Well I tried it out and the fields method was slightly slower!  I conclude this is because fields/globals are basically in "slow memory" i.e not the CPU registers or stack or cache or something and so it's actually faster to pass tons of local variables into a method instead of using globals.  Worth knowing that this is a false optimisation as I won't bother in the future. <br><br></td></tr></table><br>
<a name="858307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well to look up a field you have to follow a pointer or two to get to the actual memory. Parameters are on the stack. So fields on an object vs true globals are not the same thing at all.<br><br>You could try embedded functions, and use function "globals" (actually, statics) to pass the values to the function. Don't know this technique would apply to your situation.<br><br>I'm not sure where static variables are actually stored. Probably on the heap since the stack would be unwound and they preserve their values between calls. I would expect it might be faster than pushing / popping params onto the stack on every call though.<br><br><pre class=code>
Method A()
   Global ParamA:int
   ParamA = 100
   Funcion F()
     Print ParamA
   EndFunction

   For i:int = 1 to 100
     F()
   Next
EndMethod
</pre><br><br><br>I guess if you're really this worried about it you might want to write this bit as a C module. <br><br></td></tr></table><br>
<a name="858314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't actually testing fields on an object vs true globals.  I was testing locals in a method passed into another method vs fields on an object (and I also tried globals on an object).  passing locals in was fastest.<br><br>I tried embedded functions before but it crashes big time.  It's not supported apparently, wish it was as that's what I tried first.  I posted about it around a year and a bit ago. <br><br></td></tr></table><br>
<a name="858319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I wasn't actually testing fields on an object vs true globals. I was testing locals in a method passed into another method vs fields on an object (and I also tried globals on an object). passing locals in was fastest.<br> <br></div><br><br>I understand that but it sounded like the suggestion was to use globals to increase speed. My point was that might actually be faster, and there is no reason to believe that fields on an object would be any faster than passing parameters to a function.<br><br><div class="quote"> I tried embedded functions before but it crashes big time. It's not supported apparently, wish it was as that's what I tried first. I posted about it around a year and a bit ago. <br></div><br><br>Embedded functions are not only supported, they are used in BRL's own module code (for instance, see CopyDir in BRL.FileSystem). I've also used them in a parser to hide each predicate handling function from the global namespace. There are some things you can't do with embedded functions, but they are supported. <br><br></td></tr></table><br>
<a name="858341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> My point was that might actually be faster, and there is no reason to believe that fields on an object would be any faster than passing parameters to a function. <br></div>Ah OK, I didn't try with PURE globals as opposed to globals in a type.  The thing is the method I was testing was part of the same type so I assumed it would be easy for the compiler to reference the type's globals.<br><br><div class="quote"> There are some things you can't do with embedded functions, but they are supported <br></div>I'm 100% sure it didn't work before.  I ought to find my bug report/post via a search.  I was probably doing something that isn't supported.  I think you are not allowed to have a sub-function in a method of a type something like that.<br><br>OK found it:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=63020#704731" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=63020#704731</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
