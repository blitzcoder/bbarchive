<!DOCTYPE html><html lang="en" ><head ><title >inaccurate floats?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >inaccurate floats?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >inaccurate floats?</a><br><br>
<a name="494363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NeuralizR</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
x:Float = 34
Print x
34.0000000

x:Float = 34.1
Print x
34.0999985

x:Float = 34.0999921
Print x
34.0999908
</pre><br><br>So umm, anybody care to explain this?<br><br>I've been looking around through the forums (searching and browsing) and maybe I'm missing it, but the only topics I can find related to this are about the problems with x:Float = (1310/100) for example not being equal to 13.1, which I can understand, no problem.<br><br>I'm sure there's some reason why when I say I want my float to be 34.0999921 it's returned as 34.0999908, I'd just like to actually understand it, not just know "that's the way it is".  :)<br><br>Thanks,<br>Dave Mauldin (NeuralizR) <br><br></td></tr></table><br>
<a name="494365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrahamK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's called internal representation and is common to all languages, it's just how it's represented. Most language apply some form of rounding to x digits, which resolves it. <br><br>If you do some searches on google for IEEE float representation, things should become clearer. <br><br></td></tr></table><br>
<a name="494369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's some confusion about BlitzMax versus Blitz3D and BlitzPlus. They have different ways of displaying numbers. The actual numbers are the same, but Print shows different values.<br><br>In the case of x# = 34.1 the single precision representation is 4469555 / (2^17).<br>In decimal this is 34.09999847412109375, exactly.<br><br>Older versions of Blitz rounded the display to six digits, producing 34.1000, and then trimmed off the extra zeroes.<br><br>BlitzMax always rounds the display to nine digits, so 34.0999985 is displayed.<br><br>Note that x# is not exactly equal to 34.1, nor is it equal to any of the displayed values. <br><br></td></tr></table><br>
<a name="494370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NeuralizR</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> From <a href="http://stevehollasch.com/cgindex/coding/ieeefloat.html" target="_blank">http://stevehollasch.com/cgindex/coding/ieeefloat.html</a> :<br><br>"Floating-point representation - the most common solution - basically represents reals in scientific notation. Scientific notation represents numbers as a base number and an exponent. For example, 123.456 could be represented as 1.23456 × 102. In hexadecimal, the number 123.abc might be represented as 1.23abc × 162."<br><br>Best overall resource I found was:<br><a href="http://en.wikipedia.org/wiki/Floating_point" target="_blank">http://en.wikipedia.org/wiki/Floating_point</a><br><br>Thanks for the tip Graham!  :)<br><br>(((  Floyd made his post while I was researching and writing up mine.  Thanks for yours as well.  :))) <br><br></td></tr></table><br>
<a name="494469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It basically comes down to the idea that you use a floating point number to represent, digitally, a fractional amount of any precision. The problem is that there are only so many bits in which to represent the number and some numbers would need to be longer than others. So the numbers stored are more or less approximate - there isn't enough resolution in the storage of the number.<br><br>That's why you have the Double data type - so that it can represent bigger numbers and with more accuracy. I always figured it is totally normal to see slightly `off` values stored in the Float. Usually it doesn't matter, I guess it depends on your application. Drawing an object at 10.934828348 instead of 10.934828349 isn't a big deal. <br><br></td></tr></table><br>
<a name="494495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some languages, such as PowerBasic, have a variable type called "currency" which doesn't seem to have this problem, although it's a bit slower than floats I hear. Using currency variables, 34.1 does, indeed, equal 34.1.<br><br>For those that are interested, the currency type actually represents the defined float with binary coded decimal internally. It uses 10 bytes internally to do this...<br><br>Russell <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
