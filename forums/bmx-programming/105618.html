<!DOCTYPE html><html lang="en" ><head ><title >Being Totally Dim</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Being Totally Dim</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Being Totally Dim</a><br><br>
<a name="1289338"></a>

<a name="1289339"></a>

<a name="1289340"></a>

<a name="1289341"></a>

<a name="1289345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello:<br><br>Some of the more interesting features I had seen in programs past was the ability to plot colors on the screen, leave a trail, and the trail would erase itself over time.<br><br>They did this by taking every pixel on the screen and DIMMING it, the whole screen by one brightness level. Now, you would think with code like:<pre class=code>SetColor 0,0,0
SetAlpha .05
DrawRect 0,0,768,576</pre>That this would work.<br><br>Unfortunately it does not. It leaves behind a gray trail that does not erase at all.<br><br>So how can I modify or rewrite this code entirely so the screen is darkened slightly, say by 1-level of brightness) each drawing cycle ?<br><br>I'd like to avoid reading and writing every pixel on the screen with readpixel() and writepixel() if at all possible. And also avoid just plotting a black circle behind the plotted ones. No, I am looking for code that truly darkens the screen just a little bit each time so you can have a nice trail effect where the colors darken most at the oldest drawn and least at the earliest drawn.<br><br>Here is the code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Simple kaleidoscope with circles
Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend alphablend ' set for transparency if needed

Local i,x,y,ax,ay,r,g,b,r2,g2,b2

x=Rand(0,575) ' pick random place to start
y=Rand(0,767)

Repeat
  ax=Rand(-2,2)
  ay=Rand(-2,2)
Until ax&lt;&gt;0 And ay&lt;&gt;0 ' must be diagonal acceleration

Repeat
  r2=Rand(0,255)
  g2=Rand(0,255)
  b2=Rand(0,255)
Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color

Repeat ' (* MAIN *)

SetColor r,g,b
DrawOval x-64,y-64,128,128 ' draw 4-circles mirroring on screen
DrawOval 704-x,y-64,128,128
DrawOval x-64,512-y,128,128
DrawOval 704-x,512-y,128,128
Flip
x:+ax
y:+ay
If x&gt;767 Then ax=-Rand(1,2) ' if out of bounds, send back
If x&lt;0 Then ax=Rand(1,2)
If y&gt;575 Then ay=-Rand(1,2)
If y&lt;0 Then ay=Rand(1,2)
If r&lt;r2 Then r:+1 ' work one color value at a time to reach goal
If r&gt;r2 Then r:-1 ' color
If g&lt;g2 Then g:+1
If g&gt;g2 Then g:-1
If b&lt;b2 Then b:+1
If b&gt;b2 Then b:-1
If r=r2 And g=g2 And b=b2 ' color matches
  Repeat ' pick new color destination now
    r2=Rand(0,255)
    g2=Rand(0,255)
    b2=Rand(0,255)
  Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color
EndIf
SetColor 0,0,0
SetAlpha .05
DrawRect 0,0,768,576 ' darken screen, this is not working
SetAlpha 1 ' it leaves a gray trail
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever
</textarea> <br><br></td></tr></table><br>
<a name="1289348"></a>

<a name="1289349"></a>

<a name="1289350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GreenVertical</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> can't you just do it with setclscolor like below  in which you reduce the set value each iteration or am I misunderstanding what you are trying to achieve?<br><br><br>Repeat<br>  r2=Rand(0,255)<br>  g2=Rand(0,255)<br>  b2=Rand(0,255)<br>Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color<br>Local c:Int=255<br>Repeat ' (* MAIN *)<br>SetClsColor(c,c,c)<br>c=c-1<br>Cls<br><br>SetColor r,g,b<br>DrawOval x-64,y-64,128,128 ' draw 4-circles mirroring on screen<br>DrawOval 704-x,y-64,128,128<br>DrawOval x-64,512-y,128,128<br>DrawOval 704-x,512-y,128,128<br>Flip <br><br></td></tr></table><br>
<a name="1289351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi GV, thanks for the reply - but no, that doesn't work. The circles need to leave a trail behind them and only when the trail is long (say 128 iterations) will it turn completely black, not gray as it is now. <br><br></td></tr></table><br>
<a name="1289355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> An Alpha of 0.05 is probably not suitable.<br>It might be a float, it is used as a byte and when multiplied by the color, it loses so many precision that it can't really clear the screen<br><br>Try with something like 0.1<br><br>or use a shader, it will do the job pretty well.<br>You don't want to peek/poke on the screen for each pixel, but in the end, it's what your doing -&gt; when you draw your rectangle, it's what the CG will do.<br>At least with a shader it won't consume more time and it will give you a better result. <br><br></td></tr></table><br>
<a name="1289356"></a>

<a name="1289357"></a>

<a name="1289358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are only two options (imho):<br><br>a) manipulate the backbuffer/texture/"screen-graphic|pixmap|..."/ with software-rendering or a shader<br>b) render the "dots" as objects<br><br><br>re a)<br>as you cannot rely on existing pixels, you need to have them stored somewhere (texture) - then you could draw on them to darken them "dot by dot".<br>Dunno how it would have to be done with shaders.<br><br><br>re b)<br>Each "trail-dot" is an simple object (x,y,color:int, maybe "age:int"). When updating the "trail-dot" you darken its color and render it on the screen (SetColor color;Plot(x,y)). Instead of darkening you could "fade" (adjust alpha). In both cases you could remove the trail-dot when reaching alpha&lt;=minAlpha or color = screenBackgroundColor.<br><br>minAlpha because you might decrease alpha in a non-linear-way (alpha :* 0.9) and you want to avoid endlessly small alphas still leading to rendered "trail-dots".<br><br>The more dots you want to render, the more "cpu hungry" it gets. If you would use some kind of pixmap, I assume you would have to send it to the GPU each time you modify it (which happens a lot then) - not the best idea.<br>Dunno what would happen with shaders (upload the new data, recompile?...).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289376"></a>

<a name="1289377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Bobysait:<br><br>No, 0.5 gives even worse and brighter gray trail results.<br><br>How do I use a shader ? I don't think I've ever used one of those before.<br><br>Derron:<br><br>How would I make it a texture ? I've never written code like that before.<br><br>You have an idea of a method where I erase behind the circles, I'm trying to avoid that, but let's see how THIS looks just of curiosity:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Simple kaleidoscope with circles
Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend alphablend

Local i,x,y,x2,y2,ax,ay,ax2,ay2,r,g,b,r2,g2,b2,r3,g3,b3

x2=Rand(0,575) ' pick random place to start
y2=Rand(0,767)
ax2=2 ' because we are leaving a trail, the direction
ay2=1 ' and acceleration must be constant

Repeat
  r3=Rand(0,255)
  g3=Rand(0,255)
  b3=Rand(0,255)
Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color

Repeat ' (* MAIN *)

r=r2; g=g2; b=b2
x=x2; y=y2
ax=ax2; ay=ay2
SetColor r,g,b
For i=0 To 127
  DrawOval x-64,y-64,128,128 ' draw 4-circles mirroring on screen
  DrawOval 704-x,y-64,128,128
  DrawOval x-64,512-y,128,128
  DrawOval 704-x,512-y,128,128
  If x&lt;0 Or x&gt;767 Then ax=-ax ' if out of bounds, send back
  If y&lt;0 Or y&gt;575 Then ay=-ay
  x:-ax
  y:-ay
  r:-1 ; If r&lt;0 Then r=0
  g:-1 ; If g&lt;0 Then g=0
  b:-1 ; If b&lt;0 Then b=0
Next
If r2&lt;r3 Then r2:+1
If r2&gt;r3 Then r2:-1
If g2&lt;g3 Then g2:+1
If g2&gt;g3 Then g2:-1
If b2&lt;b3 Then b2:+1
If b2&gt;b3 Then b2:-1
If r2=r3 And g2=g3 And b2=b3
  Repeat
    r3=Rand(0,255)
    g3=Rand(0,255)
    b3=Rand(0,255)
  Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color
EndIf
If x2&lt;0 Or x2&gt;767 Then ax2=-ax2
If y2&lt;0 Or y2&gt;575 Then ay2=-ay2
x2:+ax2
y2:+ay2
Flip
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever
</textarea><br><br>Well now you get FLICKER. Very strange indeed. <br><br></td></tr></table><br>
<a name="1289398"></a>

<a name="1289399"></a>

<a name="1289400"></a>

<a name="1289401"></a>

<a name="1289403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="1289409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is flickering because you do not clear your screen - read: you are relying on the backbuffer staying valid between your flip()-calls.<br><br>Like I told you already: this is not the case. Which is why you need to redraw everything again, each time you render a frame, you have to draw all these ovals.<br><br><br>@render to texture<br>I think casaber already copied you the code available in the forums ... there is one for DX and one for GL.<br><br>You bind the texture then as render target ... render your ovals on it and afterwards render that texture to the screen.<br><br><br>Like said I do not know much GPU power it takes as as you of course then have to send a full-screen-sized texture to the gpu each draw call.<br>Assumingly this will still work.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289418"></a>

<a name="1289419"></a>

<a name="1289420"></a>

<a name="1289421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I copied Casaber's code, which was copy-pasted of <a href="/codearcs.php?code=2222" target="_blank">klepto2's code</a>.<br><br>I then added a "flipped y"-fix to the bind/unbind. Adjusted the initialization (dunno why you should init the graphics in the ImageBuffer - what happens, if you do not use the buffer prior a specific state of the game/app...).<br><br>important: <br>- the created "render to"-texture must be power-of-2, else (try to remove the pow2-calls) some stretching will happen.<br>- instead of "LockImage(renderToTextureImage).ClearPixels(0)" you do "renderToTextureBuffer.Cls()"<br>- made the code superstrict<br>- your code has some flaws regarding the "out of bounds"<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Simple kaleidoscope with circles
SuperStrict

'only works with OGL (needs r2t for DX...)
SetGraphicsDriver(GLMax2DDriver())
Graphics(768 , 576)
SetBlend alphablend
HideMouse()

SeedRnd MilliSecs() ' random results each time


'create our render target
'important: create a power-of-2 texture (to avoid scaling/stretching)
Global renderTargetImg:TImage = CreateImage(Pow2Size(GraphicsWidth()), Pow2Size(GraphicsHeight()), 1)
Global renderTargetBuffer:TImageBuffer = new TImageBuffer.Init(renderTargetImg)
print "texture size: " + renderTargetBuffer.Width() + " x " + renderTargetBuffer.Height()


Local i:int,x:int,y:int,x2:int,y2:int
local ax:int,ay:int,ax2:int,ay2:int
local r:int,g:int,b:int,r2:int,g2:int,b2:int,r3:int,g3:int,b3:int


x2=Rand(0,GraphicsWidth() - 1) ' pick random place to start
y2=Rand(0,GraphicsHeight() - 1)
ax2=2 ' because we are leaving a trail, the direction
ay2=1 ' and acceleration must be constant

Repeat
  r3=Rand(0,255)
  g3=Rand(0,255)
  b3=Rand(0,255)
Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color

Repeat ' (* MAIN *)

r=r2; g=g2; b=b2
x=x2; y=y2
ax=ax2; ay=ay2


'clear the previous image content?
renderTargetBuffer.Cls()

'=== RENDER TO renderTargetBuffer FROM NOW ON ===
renderTargetBuffer.Bind()

SetColor r,g,b
For i=0 To 127
  DrawOval x-64,y-64,128,128 ' draw 4-circles mirroring on screen
  DrawOval 704-x,y-64,128,128
  DrawOval x-64,512-y,128,128
  DrawOval 704-x,512-y,128,128
  If x&lt;0 Or x&gt;(GraphicsWidth() - 1) Then ax=-ax ' if out of bounds, send back
  If y&lt;0 Or y&gt;(GraphicsHeight() - 1) Then ay=-ay
  x:-ax
  y:-ay
  r:-1 ; If r&lt;0 Then r=0
  g:-1 ; If g&lt;0 Then g=0
  b:-1 ; If b&lt;0 Then b=0
Next
If r2&lt;r3 Then r2:+1
If r2&gt;r3 Then r2:-1
If g2&lt;g3 Then g2:+1
If g2&gt;g3 Then g2:-1
If b2&lt;b3 Then b2:+1
If b2&gt;b3 Then b2:-1
If r2=r3 And g2=g3 And b2=b3
  Repeat
    r3=Rand(0,255)
    g3=Rand(0,255)
    b3=Rand(0,255)
  Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color
EndIf
If x2&lt;0 Or x2&gt;767 Then ax2=-ax2
If y2&lt;0 Or y2&gt;575 Then ay2=-ay2
x2:+ax2
y2:+ay2


renderTargetBuffer.UnBind() 
'=== DO NO LONGER RENDER TO renderTargetBuffer FROM NOW ON ===

'draw the render image
cls 'could be removed as you render a texture to the whole buffer
DrawImage(renderTargetImg, 0, 0)

Flip
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever













'=== IMAGEBUFFER (Render2Texture OGL) ===

Type TImageBuffer
	Field Image:TImage
	Field rb:Int[1]
	Field fb:Int[1]
	Field Imageframe:TGLImageframe
	Field Frame:Int = 0
	Field OrigX:Int
	Field OrigY:Int
	Field OrigW:Int
	Field OrigH:Int
	Global _initDone:int = False

	Method New()
		if not _initDone
			glewInit()

			_initDone = True
		endif
	End Method


	Method Init:TImageBuffer(Image:TImage, Frame:Int = 0)
		self.Image = Image
		self.Frame = Frame
		GenerateFBO()
		return self
	End Method

	

	Method GenerateFBO()
		ImageFrame = TGLImageFrame(Image.frame(Frame) )

		imageframe.v0 = imageframe.v1
		imageframe.v1 = 0.0

		Local W:Int = Image.width
		Local H:Int = Image.Height

		AdjustTexSize(W , H) 

		glGenFramebuffersEXT(1, fb )
	    glGenRenderbuffersEXT(1, rb) 
	    glBindTexture(GL_TEXTURE_2D, Imageframe.name);
	    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , fb[0]) ; 
	 	glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D,  Imageframe.name, 0);
	    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rb[0]);
	    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, W, H);
	    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT , GL_DEPTH_ATTACHMENT_EXT , GL_RENDERBUFFER_EXT , rb[0])

	    Local status:Int = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)
	   
	    Select status
	       Case GL_FRAMEBUFFER_COMPLETE_EXT 
	          Print "all right" + " : " + Status
	       Case GL_FRAMEBUFFER_UNSUPPORTED_EXT
	          Print "choose different formats"
	       Default
	          End 
	    EndSelect 
   
	End Method


	Method Bind() 
		GetViewport(OrigX,OrigY,OrigW,OrigH) 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , fb[0]) 
		glMatrixMode GL_PROJECTION 
		glLoadIdentity 
		'Ronny: flip y
		glScalef(1,-1,1)

		glOrtho 0,Image.Width,Image.Width,0,-1,1 
		glMatrixMode GL_MODELVIEW 
		glViewport(0 , 0 , Image.Width , Image.Height) 
		glScissor 0,0, Image.Width , Image.Height 
	End Method 
    
	Method UnBind() 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , 0) 
		glMatrixMode GL_PROJECTION 
		glLoadIdentity 
		'Ronny: un-flip y again
		glScalef(1,1,1)

		glOrtho 0,OrigW ,Origh,0,-1,1 
		glMatrixMode GL_MODELVIEW 
		glViewport(0 , 0 , OrigW, OrigH) 
		glScissor 0,0, OrigW ,OrigH 
	End Method
   
	
	Method Cls(r#=0.0,g#=0.0,b#=0.0,a#=1.0)
		glClearColor r,g,b,a
		glClear GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT
	End Method
	
	Method Width:Int()
		Return Image.Width
	End Method
	
	Method Height:Int()
		Return Image.Height
	End Method
End Type


Function AdjustTexSize( width:Int Var,height:Int Var )
	width = Pow2Size( width ) ; height=Pow2Size( height )
	Repeat
		Local t:Int
		glTexImage2D( GL_PROXY_TEXTURE_2D,0,4,width,height,0,GL_RGBA,GL_UNSIGNED_BYTE,Null )
		glGetTexLevelParameteriv( GL_PROXY_TEXTURE_2D,0,GL_TEXTURE_WIDTH,Varptr t )
		If t then Return
		If width=1 And height=1 then RuntimeError "Unable to calculate tex size"
		If width&gt;1 then width:/2
		If height&gt;1 then height:/2
	Forever
End Function


'only used here
Function Pow2Size:Int( n:Int )
	Local t:Int=1
	While t&lt;n
		t:*2
	Wend
	Return t
End Function
</textarea><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289425"></a>

<a name="1289426"></a>

<a name="1289430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this the effect you want:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SuperStrict

AppTitle = "Particles"
Const SCREENWIDTH:Int = 800, SCREENHEIGHT:Int = 600

Global game:TGame = New TGame

game.Init()
game.MainLoop()

End

Type TGame
	Method Init()
		SeedRnd(MilliSecs())
		Graphics(SCREENWIDTH, SCREENHEIGHT)
	EndMethod
	
	Method MainLoop()
		While (Not AppTerminate() And Not KeyHit( KEY_ESCAPE ))
			Update()
			Render()
			Delay(1)
		Wend
	EndMethod
	
	Method Update()
		TParticle.Create(MouseX(), MouseY())
		TParticle.UpdateAll()
	EndMethod
	
	Method Render()
		Cls
		DrawText("Move the mouse around", 0, 0)
		SetBlend(ALPHABLEND)
		TParticle.RenderAll()
		Flip(1)
	EndMethod	
EndType

Type TParticle
	Field x:Float, y:Float
	Field color:TColor
	Field alpha:Float
	Field timer:Int
	Global list:TList = New TList
	
	Function Create:TParticle(x:Float, y:Float)
		Local p:TParticle= New TParticle
		list.AddLast(p)
		p.x = x
		p.y = y
		p.alpha = 1
		p.color = TColor.Create(Rand(100,255), Rand(100,255), Rand(100,255))
		p.timer = MilliSecs()
		Return p
	EndFunction 
	
	Function UpdateAll()
		For Local p:TParticle = EachIn list
			p.Update()
		Next
	EndFunction
	
	Method Update()
		If MilliSecs() - Timer &gt; 50
			alpha :- 0.1
			If alpha &lt;= 0
				list.Remove(Self)
			EndIf
			timer = MilliSecs()
		EndIf
	EndMethod
		
	Function RenderAll()
		For Local p:TParticle = EachIn list
			p.Render()
		Next
	EndFunction
	
	Method Render()
		SetAlpha(alpha)
		SetColor(color.red, color.green, color.blue)
		DrawRect(x - 5, y - 5, 10, 10)
		SetColor(255, 255, 255)
		SetAlpha(1)
	EndMethod
EndType

Type TColor
	Field red:Int, green:Int, blue:Int
	Function Create:TColor(r:Int, g:Int, b:Int)
		Local c:TColor = New TColor
		c.red = r
		c.green = g
		c.blue = b
		Return c
	EndFunction 
EndType</textarea><br><br>(Edit: Misread the post... sorry) <br><br></td></tr></table><br>
<a name="1289443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @therevills<br><br>This is exactly what I thought was intented  ... before having a look at the sample he posted (which I had today, when writing my code above).<br><br>BTW I like this a bit more:<br><pre class=code>
		'DrawRect(x - 5, y - 5, 10, 10)
		local radius:int = alpha * 5
		DrawOval(x - radius, y - radius, radius*2, radius*2)
</pre><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>No, 0.5 gives even worse and brighter gray trail results.<br> <br></div><br>You'd better read it twice. I said 0.05 ;) <br><br></td></tr></table><br>
<a name="1289457"></a>

<a name="1289458"></a>

<a name="1289459"></a>

<a name="1289469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bobysait, .05 is perfect. Results accomplished by using 'memory pieces' thus:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'     __________________________________________
'    //                                       //
'   //  "Circular Kaleidoscope" v0.3         //
'  //  ("Happy Trails" Edition)             //
' // Written by David W (dw817) 01/13/16   //
'//_______________________________________//

Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend lightblend ' all effects are now LIGHT

Local i,x,y,x2,y2,ax,ay,ax2,ay2,r,g,b,r2,g2,b2,r3,g3,b3

x2=Rand(0,575) ' pick random place to start
y2=Rand(0,767)
ax2=-2 ' because we are leaving a trail, the direction
ay2=-1 ay2=-1 ' and acceleration must be constant to do
'memory' plotting correctly

Repeat
  r3=Rand(0,255)
  g3=Rand(0,255)
  b3=Rand(0,255)
Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color

Repeat ' (* MAIN *)

r=r2; g=g2; b=b2 ' backup all items as what we draw next will
x=x2; y=y2 ' not be recorded on final plot
ax=ax2; ay=ay2
Cls
SetAlpha .05
For i=0 To 255
  SetColor r,g,b
  DrawOval x-64,y-64,128,128 ' draw 4-circles mirroring on screen
  DrawOval 704-x,y-64,128,128
  DrawOval x-64,512-y,128,128
  DrawOval 704-x,512-y,128,128
  x:+ax
  y:+ay
  If x&lt;0 Then ax=2 ' out of bounds ? Bounce back
  If x&gt;767 Then ax=-2
  If y&lt;0 Then ay=1
  If y&gt;575 Then ay=-1
  r:-1 ; If r&lt;0 Then r=0 ' decrease color by 1 each iteration
  g:-1 ; If g&lt;0 Then g=0
  b:-1 ; If b&lt;0 Then b=0
Next
Flip -1
If r2&lt;r3 Then r2:+1 ' work towards target
If r2&gt;r3 Then r2:-1 ' color
If g2&lt;g3 Then g2:+1
If g2&gt;g3 Then g2:-1
If b2&lt;b3 Then b2:+1
If b2&gt;b3 Then b2:-1
If r2=r3 And g2=g3 And b2=b3 ' if color matches chosen
  Repeat ' pick new color
    r3=Rand(0,255)
    g3=Rand(0,255)
    b3=Rand(0,255)
  Until Abs(r3-g3)&gt;64 Or Abs(g3-b3)&gt;64 Or Abs(r3-b3)&gt;64 ' must be radical color
EndIf
x2:-ax2 ' Move true plotter in opposite direction
y2:-ay2
If x2&lt;0 Then ax2=-2 ' out of bounds ? Bounce back
If x2&gt;767 Then ax2=2
If y2&lt;0 Then ay2=-1
If y2&gt;575 Then ay2=1
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever
</textarea><br><br>Kind of an interesting Fireball effect, with no flicker either.<br><br>Derron, nothing is getting any darker though.<br><br>Therevills, yes that effect. Trying to understand your code and I am not.<br><br>I think I have it here though. Hmm ... I see what you are doing. Perhaps by using an array of all linked pieces and automatically decrease the colors for those. A TMAP might nail it. I need to make sure the circles appear in the correct order.<br><br>I still think it would be easier if somehow the entire screen could be quickly darkened by 1 color (R-1, G-1, B-1). <br><br></td></tr></table><br>
<a name="1289466"></a>

<a name="1289467"></a>

<a name="1289468"></a>

<a name="1289470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, here it is using TMAP. I'm not very good with this type of variable storage (only found out about 4-months ago), so this code might seem a little tedious to you veterans:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'     __________________________________________
'    //                                       //
'   //  "Circular Kaleidoscope" v0.4         //
'  //  ("Bring Your Map" Edition)           //
' // Written by David W (dw817) 01/13/16   //
'//_______________________________________//

Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend lightblend ' all effects are now LIGHT

Global yankch$
Local a$,c$,i,x,y,x2,y2,ax,ay,r,g,b,r2,g2,b2,r3,g3,b3,n,al#
Local ci:tmap=New tmap

x=Rand(0,767) ' pick random place to start
y=Rand(0,577)
Repeat
  ax=Rand(-2,2)
  ay=Rand(-2,2)
Until ax&lt;&gt;0 And ay&lt;&gt;0 ' loop until direction is diagonal

Repeat
  r2=Rand(0,255)
  g2=Rand(0,255)
  b2=Rand(0,255)
Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color

n=255 ' It's gotta be in backwards order or it won't work

Repeat ' (* MAIN *)

MapInsert ci,dec$(n,3),str$(x)+","+str$(y)+","+str$(r)+","+str$(g)+","+str$(b)
Cls
al#=.02
For a$=EachIn ci.keys()
  c$=String(ci.valueforkey(a$))
  x2=yank(c$) ; y2=yank(c$) ' pull out location and color
  r3=yank(c$) ; g3=yank(c$) ; b3=yank(c$)
  SetColor r3,g3,b3
  SetAlpha al# ' decreases with each iteration
  DrawOval x2-64,y2-64,128,128 ' draw 4-circles mirroring on screen
  DrawOval 704-x2,y2-64,128,128
  DrawOval x2-64,512-y2,128,128
  DrawOval 704-x2,512-y2,128,128
  al#:-.00003 ' decrease ALPHA a tiny bit
  If al#&lt;=0 ' if it's completely transparent (BLACK)
    al#=0 ' then remove associated MAP coordinates
    MapRemove ci,a$ ' and color too
  EndIf
Next
x:+ax
y:+ay
If x&lt;0 Then ax=Rand(1,2) ' out of bounds ? Bounce back
If x&gt;767 Then ax=-Rand(1,2)
If y&lt;0 Then ay=Rand(1,2)
If y&gt;575 Then ay=-Rand(1,2)
If r&lt;r2 Then r:+1 ' work towards target color
If r&gt;r2 Then r:-1
If g&lt;g2 Then g:+1
If g&gt;g2 Then g:-1
If b&lt;b2 Then b:+1
If b&gt;b2 Then b:-1
If r=r2 And g=g2 And b=b2 ' if color matches target color
  Repeat ' pick new color
    r2=Rand(0,255)
    g2=Rand(0,255)
    b2=Rand(0,255)
  Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color
EndIf
n:-1 ' decrease our TMAP pointer
If n&lt;0 Then n=255 ' bounce it back to 255 if at end
Flip
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever

' &gt;&gt; YANK COMMA DELIMITED TEXT CONVERTED TO NUMBER
Function yank(a$ Var)
  Local b$
  If yankch$=""
    yankch$=","
  EndIf
  If fnz$(a$)&lt;&gt;yankch$
    a$:+yankch$
  EndIf
  b$=Left$(a$,Instr(a$,yankch$)-1)
  a$=Mid$(a$,Instr(a$,yankch$)+ 1)
  If fnz$(a$)=yankch$ Or fnz$(a$)=","
    a$=fnd$(a$)
  EndIf
  yankch$=","
  Return val(b$)
EndFunction

' &gt;&gt; RETURN STRING FROM NUMBER
Function str$(n)
  Return Int(n)
EndFunction

' &gt;&gt; RETRIEVE VALUE FROM STRING
Function val(t$)
  Return t$.toint()
EndFunction

' &gt;&gt; RETRIEVE ALL BUT LAST CHARACTER FROM STRING
Function fnd$(a$)
  Return Left$(a$,Len(a$)-1)
EndFunction

' &gt;&gt; RETRIEVE LAST CHARACTER FROM STRING
Function fnz$(a$)
  Return Right$(a$,1)
EndFunction

' &gt;&gt; RETURN ZERO PADDED NUMBER N WITH L DIGITS
Function dec$(n,l)
Local r$,i
  For i=Len(str$(n))+1 To l
    r$=r$+"0"
  Next
  r$=r$+str$(n)
  Return Right$(r$,l)
EndFunction
</textarea><br><br>Any ideas on shortcuts would be greatly appreciated as I think this kind of program is a good learning experience for me. <br><br></td></tr></table><br>
<a name="1289478"></a>

<a name="1289567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> yes that effect. Trying to understand your code and I am not. <br></div><br><br>What parts dont you understand? I tried to make it pretty straight forward. I've noticed in a lot of your code you dont use objects - have you done object-oriented programming before? <br><br></td></tr></table><br>
<a name="1289480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Derron, nothing is getting any darker though. <br></div><br><br>It is doing the same as you posted in #6 ... I just replaced "drawing to buffer" with "drawing to texture".<br><br>It is up to you to have it drawn darker and darker (eg. instead of Cls() the canvas, you could draw a rectangle with 0.01 alpha on it...)<br><br><br>To darken it up (so it is more like a fading-out-snake):<br><br>replace the "bind"-part with:<br><pre class=code>
'clear the previous image content?
'renderTargetBuffer.Cls()

'=== RENDER TO renderTargetBuffer FROM NOW ON ===
renderTargetBuffer.Bind()

SetAlpha(0.005)
SetColor(0,0,0)
DrawRect(0, 0, GraphicsWidth(), GraphicsHeight())
SetAlpha(1.0)
SetColor(255,255,255)
</pre><br><br>and the drawing of the texture with:<br><pre class=code>
'draw the render image
SetColor(255,255,255)
cls 'could be removed as you render a texture to the whole buffer
DrawImage(renderTargetImg, 0, 0)
</pre><br><br>Nonetheless it is _no_ final solution (as I did not know what you want to reach).<br><br><br>What my sample should have shown to you:<br>- how to use Render2Texture with OpenGL (so you can keep your "backbuffer" by just not calling renderTextureBuffer.Cls())<br>- how the render2texture functionality had to get adjusted to make the "flipped y" go away (klepto2 never adjusted its code there ... or did he somewhen?) <br><br>What I did not:<br>- code your idea (as it was not clear wat you wanted to do)<br>- I did not include  the objects approach (like I described in #5)<br>- I did not fix your logic flaw (that odd movement when it hits the borders) - but you did it on your own in your other example<br><br><br>Render2Texture is useful if you want to manipulate the "last rendered screen" (eg darkening, desaturating, ...).<br><br><br>@TMap<br>TMap sorts by KEY ... it is good if you want some kind of "auto sort".<br>Use a TList if you just want to iterate over it.<br><br><pre class=code>
list = CreateList()
list.AddLast(myobject) 'add at the end

'iterate over every object
for local o:myobject = EachIn list
  o.Update()
  if o.a &gt; 0 then o.Draw()
next
 
'remove dead objects by iterating over a copied list
'to avoid concurrent list modification
for local o:myobject = EachIn list.Copy()
  if o.a &lt;= 0 then list.Remove(o)
next
</pre><br><br><br>@Object orientation<br>instead of storing everything in a string, you would then have an object<br><br><br>I setup'd your example with some OO ... and small adjustments (got a bit slow on my computer with your very low alpha-decrease)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'     __________________________________________
'    //                                       //
'   //  "Circular Kaleidoscope" v0.4         //
'  //  ("Bring Your Map" Edition)           //
' // Written by David W (dw817) 01/13/16   //
'//_______________________________________//

Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend lightblend ' all effects are now LIGHT

Local i,x,y,x2,y2,ax,ay,r,g,b,r2,g2,b2,al#

local entities:TList = CreateList()

'create startup values
x=Rand(0,767) ' pick random place to start
y=Rand(0,577)
Repeat
  ax=Rand(-2,2)
  ay=Rand(-2,2)
Until ax&lt;&gt;0 And ay&lt;&gt;0 ' loop until direction is diagonal

Repeat
  r2=Rand(0,255)
  g2=Rand(0,255)
  b2=Rand(0,255)
Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color




Repeat ' (* MAIN *)
	Cls

	'create and add a new entity each run
	entities.AddLast( new TEntity.Init(x,y,r,g,b) )

	'update and draw all entities
	local deadEntity:int = False
	For local entity:TEntity=EachIn entities
		entity.Update()
		if entity.a &lt;= 0
			deadEntity = True
		else
			entity.Draw()
		endif
	Next

	'remove dead objects by iterating over a copied list
	'to avoid concurrent list modification
	if deadEntity
		For local entity:TEntity = EachIn entities.Copy()
			if entity.a &lt;= 0.01 then entities.Remove(entity)
		Next
	endif

	'move starting point for upcoming new entity
	x:+ax
	y:+ay

	' out of bounds ? Bounce back
	If x&lt;0 Then ax=Rand(1,2)
	If x&gt;767 Then ax=-Rand(1,2)
	If y&lt;0 Then ay=Rand(1,2)
	If y&gt;575 Then ay=-Rand(1,2)

	If r&lt;r2 Then r:+1 ' work towards target color
	If r&gt;r2 Then r:-1
	If g&lt;g2 Then g:+1
	If g&gt;g2 Then g:-1
	If b&lt;b2 Then b:+1
	If b&gt;b2 Then b:-1
	If r=r2 And g=g2 And b=b2 ' if color matches target color
		Repeat ' pick new color
			r2=Rand(0,255)
			g2=Rand(0,255)
			b2=Rand(0,255)
		Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color
	EndIf
	DrawText(entities.Count()+" entities alive", 0,0)

	Flip

' exit when ESCAPE key is pressed
Until KeyDown(KEY_ESCAPE)
End




Type TEntity
	Field x:int, y:Float, gravityInfluenceY:int
	Field r:int, g:int, b:int, a:Float
	Field lifetime:int, lastCall:int = -1

	Method Init:TEntity(x:int, y:int, r:int, g:int, b:int, a:Float = 0.05)
		self.x = x
		self.y = y
		self.r = r
		self.g = g
		self.b = b
		'start with alpha + alphaDecrease so we start with 1.0
		self.a = a + 0.0001
		return self
	End Method


	Method Update()
		a :- 0.0001 ' decrease ALPHA a tiny bit
		'if you would want to move each entity (eg "gravity")
		'you would update it's coordinates here
		if lastCall = -1 then lastCall = Millisecs()
		lifetime :+ (Millisecs() - lastCall)

		gravityInfluenceY = 0.02 * 9.81 * ((0.005 *(lifetime/1000.0)^2)+ 0.995 * (lifetime/1000.0))
	End Method


	Method Draw()
		SetColor r,g,b
		SetAlpha a
		DrawOval x-64,y-64 + gravityInfluenceY,128,128 ' draw 4-circles mirroring on screen
		DrawOval 704-x,y-64 + gravityInfluenceY,128,128
		DrawOval x-64,512-y + gravityInfluenceY,128,128
		DrawOval 704-x,512-y + gravityInfluenceY,128,128
		'reset alpha/color so other objects do not need to know about the
		'previous adjustments
		SetAlpha 1.0
		SetColor 255,255,255
	End Method
End Type
</textarea><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> One very minor point is that you are not interpolating smoothly between target colors.  The way you are using is obviously a different way of interpolating, one rgb component at a time, but is harder to control if you want to use a specific palette. <br><br></td></tr></table><br>
<a name="1289535"></a>

<a name="1289536"></a>

<a name="1289538"></a>

<a name="1289539"></a>

<a name="1289541"></a>

<a name="1289542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Therevills:<br><br><img src="http://www.writerscafe.org/uploads/rte/969bfd211265776dfaa16633d9e4df00.png"><br><br>Confession ... No, I've never done object-oriented programming before, it sticks out that much ? Yeah, and - that is one main reason why I do not understand your code.<br><br>I know my Dad tried to teach me years ago, but I just wasn't - getting it. Like 3D graphics and programming them today. Sure I can toss out an effective and animated 3D star field, maybe a static picture of a 3D rectangle or girder for a logo or something, but no - I have no idea how to actually code 3D or object-oriented programming.<br><br>The closest I ever came was a routine I always called Nano, a term used in Mork &amp; Mindy for meeting someone. Silly I know. But some of my 'Nano' routines have gotten quite powerful.<br><br>Not just updating every single thing on the screen but includes comprehensive code for reading keys, mouse, and, back on the Commodore Amiga, Joystick.<br><br>Back in S2 alone, it's a little over 3,000 lines of code.<br><br>I imagine I could learn a bit if I understood object-oriented programming, and yet at times my code seems considerably smaller and more accurate than people who code 1,000 lines of something I can easily do in 20.<br><br>Still, would there by a way to make this code SMALLER by using object-oriented programming ? That might be interesting to see.<br><br>. . .<br><br>Derron, Render2Texture is not a command of BlitzMAX. Could you please explain to me what this is - and how to use it ?<br><br>Reading your code ... I'm barely understanding it. I'm trying though because it looks to me like you've got an interesting type of TLIST in there.<br><br>I'm wondering why the circles are curving, however, as my code doesn't.<br><br>. . .<br><br>Endive, can you elaborate on what you saying to me please ?<br><br>The code the way I have it is pretty close to what I wanted (or wanted to learn).  I think if I can learn Render2Texture and if it does what I hope it does, rapidly effect the entire screen, it might be something worth learning.<br><br>Still trying to get out of drawing all elements and only drawing 4 circles per cycle with an auto background dimmer. <br><br></td></tr></table><br>
<a name="1289549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> curving: I added a bit of "gravity" (see the update()-method of TEntity)<br><br>@Render2Texture<br>This is what Casaber copied you for the "worms"-code.<br><br>Basically you tell OpenGL to do all graphic commands to a texture instead of the backbuffer. So after you set the buffer as target, a "DrawImage()" will draw the image to be texture.<br><br>At the end of everything, you have your images, lines, ovals ... on the texture. When you then draw the texture  and call "flip()" your whole images, lines, ovals are visible.<br><br>BUT ... on the next cycle you still have your texture with all that images, lines ... and this allows you to reuse "previous" drawings without the need to re-draw them again and again each frame.<br><br>In this example it is similar to skipping "cls" (and without the "flicker" because of garbaged backbuffer memory stuff).<br><br>Advanced usage is eg:<br>- render your GUI-popup-window with caption, texts, buttons ... into one single texture<br>- now you could "scale" the texture when drawing and you will see that nifty "popup-effect" you might know from various casual games.<br><br>Without r2t you will have to simulate the effect (give the scale information to every child object) but certain things wont work that well (scaling text on a background is a bit jiggery, alpha'd/layers fade-effects wont work).<br><br>Also it makes it more trivial to create component based images (figures with weapons attached, colorized ...). You wont need to write you own software-render-functions (like I did for my colorize-sprites-functionality).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> So - what I am calling Virtual Screens is actually Render2Texture. Yeah, I wish there was a way to make that code smaller, I.E.:<pre class=code>Global hscrn:Texture=InitTexture(0,0,maxwidth,maxheight) ' create hscrn as new texture
SetDraw hscrn ' set all drawing to go to it
DrawLine 50,50,200,200 ' draw a simple line
SetDraw NULL ' set all drawing to go back to NORMAL
DrawTexture hscrn,0,0 ' Draw the texture straight to the screen</pre><br><br>Instead of the monster it is ATM.<br><br>I'm also reading your new code. Why the gravity ? Is that required if it's an object ? <br><br></td></tr></table><br>
<a name="1289569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is not required...nothing is required.<br>I just added it - to create something "different".<br><br><br><br>global hscrn... this is exactly how it is done currently:<br><br><br><pre class=code>
Global renderTargetImg:TImage = CreateImage(Pow2Size(GraphicsWidth()), Pow2Size(GraphicsHeight()), 1)
Global renderTargetBuffer:TImageBuffer = new TImageBuffer.Init(renderTargetImg)
</pre><br><br>We create an image-object (to work with the image, instead of something unknown, in this case the "TImageBuffer"). We could abstract it to have a "TImageBuffer.Draw()" but for now this should be enough.<br><br>So we create an image which we want to use as a "render-to-image-target".<br>Next we create that special TImageBuffer-object and initialize it with the given image. This is doing some stuff with OpenGL ... <br><br>When "binding" we actually say: ok computer, instead of drawing to the (opengl'd) screen, draw to this image/pixmap.<br>When "unbinding" we say, that the screen is the new target again.<br><br><br>So after "creating" the buffer, the code is the same as what you want:<br><br>SetBuffer renderBuffer<br>Draw<br>SetBuffer null<br><br>DrawImage(renderBufferImage)<br><br>We just call it with other method names - it is up to you to adopt the code and adjust naming conventions until it fits your desires.<br><br><br>And if you coded this whole render2texture-"TImageBuffer" in a module, that code would of course be hidden within a "import bla.imagebuffer" or so.<br><br>If ... and I say _if_ to make you want to explore that subject, so if you want to understand a bit of OO ... you try some small samples with simple objects - a "TEntity" type, storing "X,Y" when drawing stars (compared to having 2 arrays for X and Y's of all the stars) might be a good start. Then advance to introduce colors, lifetime ...<br><br>Then change from "TStar" to "TSkyEntity" ...and learn "extends" (TMoon extends TSkyEntity, TStar extends TSkyEntity).<br><br><br>OO makes codes a bit more versatile - you want a moon to be drawn differently to a star, so extend the object and override your "Draw()" (or how you called it) method and use a "DrawOval()" instead of "Plot()".<br><br>While it makes your code a bit _longer_ it surely increases readability.<br><br>Why? _I_ did not know what you meant with your "yank" function.<br><br>Keeping things _short_ is in no way a guarantee of being an effective/useful piece of code.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ron:<br><br>YANK is a routine I wrote years ago that hearkens all the way back to QBasic 1.0 with me. It's pretty straight-forward and an integral part of S2 to rapidly retrieve data that has different sizes of elements.<br><br>You have a single string, let's say, Fruit$.<br><br>Now let Fruit$="Apple,small,red"<br><br>if you call yank$ the return result is "Apple" =AND= Fruit$ changes as well, it is now, "small,red"<br><br>If you call yank$ again from here the result is "small" and Fruit$ changes to "red"<br><br>Call yank$ one more time and the result is "red" and Fruit$ is now an empty string.<br><br>Kind of like pulling a plastic tray out of a metal container, there is a spring on the bottom to push the next item up.<br><br>I understand what you are saying about image objects. Now here is something I was experimenting with, can this be made into something - and perhaps used in the code you wrote above ?<pre class=code>Strict

Graphics 640,480

Global scrn:tgraphics=CreateGraphics(640,480,0,0,0)
Global i

SetGraphics scrn
For i=0 To 639
  Plot i,240+Sin(i)*120 ' plot some thread
Next
' It's plotted to this hidden page, now how do you retrieve it to view on the regular screen ?
Flip
WaitKey

End</pre> <br><br></td></tr></table><br>
<a name="1289608"></a>

<a name="1289610"></a>

<a name="1289613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

'only works with OGL for now (needs r2t for DX...)
SetGraphicsDriver(GLMax2DDriver())
Graphics(640 , 480)


'create our render target
Global renderBuffer:TRenderBuffer = new TImageRenderBuffer.InitWithScreen()

'FILL BUFFER WITH CONTENT:
'-------------------------
'renderBuffer.Bind() - or:
SetRenderBuffer(renderBuffer) 'render to the buffer from now on

For local i:int = 0 To 639
  Plot (i,240+Sin(i)*120) ' plot some thread
Next

'renderBuffer.UnBind() - or:
UnsetRenderBuffer() 'render to screen from now on
'-------------------------



Repeat
'cls '(skippable when imagesize &gt;= screensize)
SetColor(255,255,255) 'draw image untinted
DrawImage(renderBuffer.GetImage(), 0, 0)
DrawText(Millisecs(), 0,0)

Flip 0
Until KeyDown(key_escape)










'=== TRENDERBUFFER TYPES ===
Type TRenderBuffer
	Global _currentBuffer:TRenderBuffer
	Global _defaultBuffer:TRenderBuffer

	Function GetDefault:TRenderBuffer()
		if not _defaultBuffer then _defaultBuffer = new TScreenBuffer
		return _defaultBuffer
	End Function


	Function GetCurrent:TRenderBuffer()
		return _currentBuffer
	End Function


	Function _BindCurrent(buffer:TRenderBuffer)
		if _currentBuffer &lt;&gt; buffer
			if _currentBuffer then _UnbindCurrent()
			_currentBuffer = buffer

			if buffer then buffer._Bind()
		endif
	End Function


	Function _UnbindCurrent()
		if _currentBuffer &lt;&gt; GetDefault()
			if _currentBuffer then _currentBuffer._Unbind()

			'set default buffer again
			_currentBuffer = GetDefault()
		endif
	End Function


	Method _Bind() abstract
	Method _Unbind() abstract


	'helper / convenience function
	Method Bind()
		_BindCurrent(self)
	End Method

	Method Unbind()
		_UnbindCurrent()
	End Method
	
	Method Width:int() abstract
	Method Height:int() abstract
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0) abstract
	Method GetImage:TImage() abstract
End Type


'set to desired buffer
Function SetRenderBuffer(buffer:TRenderBuffer)
	TRenderBuffer._BindCurrent(buffer)
End Function

'set to default screen buffer again
Function UnsetRenderBuffer()
	TRenderBuffer._UnbindCurrent()
End Function

Function GetRenderBuffer:TRenderBuffer()
	return TRenderBuffer.GetCurrent()
End Function

Function ClearRenderBuffer:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
	return TRenderBuffer.GetCurrent().Cls(r,g,b,a)
End Function



Type TScreenBuffer extends TRenderBuffer
	Method Width:int()
		return GraphicsWidth()
	End Method

	Method Height:int()
		return GraphicsHeight()
	End Method

	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		SetClsColor(r,g,b)
		SetAlpha(a)
		return Cls()
	End Method

	Method GetImage:TImage()
		return LoadImage(GrabPixmap(0,0, GraphicsWidth(), GraphicsHeight()))
	End Method

	Method _Bind()
		'
	End Method

	Method _Unbind()
		'
	End Method
End Type



Type TImageRenderBuffer extends TRenderBuffer
	Field Image:TImage
	Field rb:Int[1]
	Field fb:Int[1]
	Field Imageframe:TGLImageframe
	Field Frame:Int = 0
	Field OrigX:Int
	Field OrigY:Int
	Field OrigW:Int
	Field OrigH:Int
	Global _initDone:int = False
	

	Method New()
		if not _initDone
			glewInit()

			_initDone = True
		endif
	End Method


	Method Init:TImageRenderBuffer(width:int, height:int)
		local img:TImage = CreateImage(width, height, 1)
		InitWithImage(img)
		return self
	End Method


	Method InitWithScreen:TImageRenderBuffer()
		return Init(GraphicsWidth(), GraphicsHeight())
	End Method
	

	Method InitWithImage:TImageRenderBuffer(Image:TImage, Frame:Int = 0)
		self.Image = Image
		self.Frame = Frame
		GenerateFBO()
		return self
	End Method
	

	Method GenerateFBO()
		ImageFrame = TGLImageFrame(Image.frame(Frame) )

		imageframe.v0 = imageframe.v1
		imageframe.v1 = 0.0

		Local W:Int = Image.width
		Local H:Int = Image.Height

		AdjustTexSize(W , H) 

		glGenFramebuffersEXT(1, fb )
	    glGenRenderbuffersEXT(1, rb) 
	    glBindTexture(GL_TEXTURE_2D, Imageframe.name);
	    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , fb[0]) ; 
	 	glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D,  Imageframe.name, 0);
	    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rb[0]);
	    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, W, H);
	    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT , GL_DEPTH_ATTACHMENT_EXT , GL_RENDERBUFFER_EXT , rb[0])

	    Local status:Int = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)
	   
	    Select status
	       Case GL_FRAMEBUFFER_COMPLETE_EXT 
	          Print "all right" + " : " + Status
	       Case GL_FRAMEBUFFER_UNSUPPORTED_EXT
	          Print "choose different formats"
	       Default
	          End 
	    EndSelect 
   
	End Method


	'override
	Method _Bind()
		GetViewport(OrigX,OrigY,OrigW,OrigH) 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , fb[0]) 
		glMatrixMode GL_PROJECTION 
		glLoadIdentity 
		'Ronny: flip y
		glScalef(1,-1,1)

		glOrtho 0,Image.Width,Image.Height,0,-1,1 
		glMatrixMode GL_MODELVIEW 
		glViewport(0 , 0 , Image.Width , Image.Height) 
		glScissor 0,0, Image.Width , Image.Height 
	End Method 

	'override
	Method _Unbind() 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT , 0) 
		glMatrixMode GL_PROJECTION 
		glLoadIdentity 
		'Ronny: un-flip y again
		glScalef(1,1,1)

		glOrtho 0,OrigW ,Origh,0,-1,1 
		glMatrixMode GL_MODELVIEW 
		glViewport(0 , 0 , OrigW, OrigH) 
		glScissor 0,0, OrigW ,OrigH 
	End Method
   
	
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		glClearColor r/255.0,g/255.0,b/255.0,a
		glClear GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT
	End Method
	
	Method Width:Int()
		Return Image.Width
	End Method
	
	Method Height:Int()
		Return Image.Height
	End Method

	Method GetImage:TImage()
		return image
	End Method


	Function AdjustTexSize( width:Int Var,height:Int Var )
		width = Pow2Size( width ) ; height=Pow2Size( height )
		Repeat
			Local t:Int
			glTexImage2D( GL_PROXY_TEXTURE_2D,0,4,width,height,0,GL_RGBA,GL_UNSIGNED_BYTE,Null )
			glGetTexLevelParameteriv( GL_PROXY_TEXTURE_2D,0,GL_TEXTURE_WIDTH,Varptr t )
			If t then Return
			If width=1 And height=1 then RuntimeError "Unable to calculate tex size"
			If width&gt;1 then width:/2
			If height&gt;1 then height:/2
		Forever
	End Function

	Function Pow2Size:Int( n:Int )
		Local t:Int=1
		While t&lt;n
			t:*2
		Wend
		Return t
	End Function
End Type
</textarea><br><br>Everything after<br>'=== TRENDERBUFFER TYPES ===<br>is similar to "imports" - if it were a module, you would "import bla.renderbuffer" and then just use that non-oop-convenience functions (SetRenderBuffer(bla) and UnsetRenderBuffer())<br><br><br>So what is else needed:<br>- you need to create a renderbuffer (else you render to the faked "screenbuffer")<br>- activate the created renderbuffer<br>- draw things on this buffer<br>- deactivate the renderbuffer<br>- draw things on the screen (eg the image of this buffer, some extras like FPS, ...)<br><br><br>Edit: adjusted the "bind"-glOrtho-Call, as it contained two times image.Width, which was incorrect. Removing this, also removed the need to create the buffer with power-of-2 images (textures are pow2'd already)<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289625"></a>

<a name="1289627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is another sample - showing how we generate and manipulate an image texture and render it a dozen times then without really affecting the performance.<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

'only works with OGL for now (needs r2t for DX...)
SetGraphicsDriver(GLMax2DDriver())
Graphics(640 , 480)


'render a complete GUI window in an image...
'create our render target, a 200x100 sized image
Global renderBuffer:TRenderBuffer = CreateImageRenderBuffer( 200, 100 )
SetRenderBuffer(renderBuffer) 'render to the buffer from now on

SetColor(50,50,150); DrawRect(0,0,200,100)
SetColor(50,50,250); DrawRect(2,2,200-4,20)
SetColor(220,220,220); DrawRect(2,24,200-4,100-26)
SetColor(0,0,0); DrawText("My Dialogue", 2 + 5, 2 + 5)
SetColor(180,180,200); DrawText("My Dialogue", 2 + 4, 2 + 4)
SetColor(255,255,255)
'renderBuffer.UnBind() - or:
UnsetRenderBuffer() 'render to screen from now on
'-------------------------
Global dialogueImage:TImage = renderBuffer.GetImage()
Global scanLine:int = 0
'center image instead of topleft
MidHandleImage(dialogueImage)

SetBlend AlphaBlend
Repeat
'adjust content of the dialogue portion
SetRenderBuffer(renderBuffer)
For local i:int = 0 to 100
	SetColor(Rand(0,255),Rand(0,255),Rand(0,255))
	Plot(rand(2,198), rand(24,97))
Next
SetColor(200, 200, 200); DrawLine(2,22 + scanLine,196,22 + scanLine)
scanLine = (scanLine + 1) mod 76
UnsetRenderBuffer()

cls
SetColor(255, 255, 255)
'scale the images a bit
SetScale(0.9 + 0.2*sin(0.1*Millisecs()), 0.9 + 0.2*sin(0.1*Millisecs()))

'draw some moving dialogues !
SetAlpha 0.5
For local i:int = 0 to 10
	DrawImage(dialogueImage, Graphicswidth()*0.5 * (1 + sin(0.01*(i+1) * Millisecs())), i * 50)
Next
SetScale(1,1)

'draw the mouse controlled dialogue
SetAlpha 1.0 
DrawImage(dialogueImage, MouseX(),  MouseY())



Flip 1
Until KeyDown(key_escape)










'=== TRENDERBUFFER TYPES ===
Type TRenderBuffer
	Global _currentBuffer:TRenderBuffer
	Global _defaultBuffer:TRenderBuffer

	Function GetDefault:TRenderBuffer()
		if not _defaultBuffer then _defaultBuffer = new TScreenBuffer
		return _defaultBuffer
	End Function


	Function GetCurrent:TRenderBuffer()
		return _currentBuffer
	End Function


	Function _BindCurrent(buffer:TRenderBuffer)
		if _currentBuffer &lt;&gt; buffer
			if _currentBuffer then _UnbindCurrent()
			_currentBuffer = buffer

			if buffer then buffer._Bind()
		endif
	End Function


	Function _UnbindCurrent()
		if _currentBuffer &lt;&gt; GetDefault()
			if _currentBuffer then _currentBuffer._Unbind()

			'set default buffer again
			_currentBuffer = GetDefault()
		endif
	End Function


	Method _Bind() abstract
	Method _Unbind() abstract


	'helper / convenience function
	Method Bind()
		_BindCurrent(self)
	End Method

	Method Unbind()
		_UnbindCurrent()
	End Method
	
	Method Width:int() abstract
	Method Height:int() abstract
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0) abstract
	Method GetImage:TImage() abstract
End Type


'set to desired buffer
Function SetRenderBuffer(buffer:TRenderBuffer)
	TRenderBuffer._BindCurrent(buffer)
End Function

'set to default screen buffer again
Function UnsetRenderBuffer()
	TRenderBuffer._UnbindCurrent()
End Function

Function GetRenderBuffer:TRenderBuffer()
	return TRenderBuffer.GetCurrent()
End Function

Function CreateImageRenderBuffer:TRenderBuffer(width:int, height:int)
	return new TOpenGLImageRenderBuffer.Init(width, height)
End Function




Type TScreenBuffer extends TRenderBuffer
	Method Width:int()
		return GraphicsWidth()
	End Method

	Method Height:int()
		return GraphicsHeight()
	End Method

	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		SetClsColor(r,g,b)
		SetAlpha(a)
		return Cls()
	End Method

	Method GetImage:TImage()
		return LoadImage(GrabPixmap(0,0, GraphicsWidth(), GraphicsHeight()))
	End Method

	Method _Bind()
		'
	End Method

	Method _Unbind()
		'
	End Method
End Type


Type TImageRenderBuffer extends TRenderBuffer
	Field Image:TImage
	Field Frame:Int = 0
	

	Method Init:TImageRenderBuffer(width:int, height:int)
		local img:TImage = CreateImage(width, height, 1)
		InitWithImage(img)
		return self
	End Method


	Method InitWithScreen:TImageRenderBuffer()
		return Init(GraphicsWidth(), GraphicsHeight())
	End Method
	

	Method InitWithImage:TImageRenderBuffer(Image:TImage, Frame:Int = 0)
		self.Image = Image
		self.Frame = Frame
		return self
	End Method
	

	Method Width:Int()
		Return Image.Width
	End Method

	
	Method Height:Int()
		Return Image.Height
	End Method


	Method GetImage:TImage()
		return image
	End Method
End Type




Type TOpenGLImageRenderBuffer extends TImageRenderBuffer
	Field rb:Int[1]
	Field fb:Int[1]
	Field Imageframe:TGLImageframe
	Field OrigX:Int
	Field OrigY:Int
	Field OrigW:Int
	Field OrigH:Int
	Global _initDone:int = False


	Method New()
		if not _initDone
			glewInit()

			_initDone = True
		endif
	End Method


	Method InitWithImage:TOpenGLImageRenderBuffer(Image:TImage, Frame:Int = 0)
		Super.InitWithImage(Image, Frame)
		GenerateFBO()
		return self
	End Method


	Method GenerateFBO()
		ImageFrame = TGLImageFrame(Image.frame(Frame) )

		imageframe.v0 = imageframe.v1
		imageframe.v1 = 0.0

		Local W:Int = Image.width
		Local H:Int = Image.Height
		AdjustTexSize(W, H) 

		glGenFramebuffersEXT(1, fb)
	    glGenRenderbuffersEXT(1, rb) 
	    glBindTexture(GL_TEXTURE_2D, Imageframe.name)
	    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0]) 
	 	glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, Imageframe.name, 0)
	    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rb[0])
	    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, W, H)
	    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, rb[0])

   
	    Select glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)
	       Case GL_FRAMEBUFFER_COMPLETE_EXT 
	          Print "all right" + " : " + GL_FRAMEBUFFER_COMPLETE_EXT
	       Case GL_FRAMEBUFFER_UNSUPPORTED_EXT
	          Print "choose different formats"
	       Default
	          End 
	    EndSelect 
	End Method


	'override
	Method _Bind()
		GetViewport(OrigX, OrigY, OrigW, OrigH)
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0]) 
		glMatrixMode(GL_PROJECTION) 
		glLoadIdentity()
		'Ronny: flip y
		glScalef(1,-1,1)

		glOrtho(0, Image.Width, Image.Height, 0, -1, 1) 
		glMatrixMode(GL_MODELVIEW) 
		glViewport(0, 0 ,Image.Width, Image.Height) 
		glScissor(0, 0, Image.Width, Image.Height)
	End Method
	

	'override
	Method _Unbind() 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0) 
		glMatrixMode(GL_PROJECTION) 
		glLoadIdentity()
		'Ronny: un-flip y again
		glScalef(1, 1, 1)

		glOrtho(0, OrigW, Origh, 0, -1, 1) 
		glMatrixMode(GL_MODELVIEW) 
		glViewport(0, 0 ,OrigW, OrigH) 
		glScissor(0, 0 ,OrigW, OrigH)
	End Method
   
	
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		glClearColor(r/255.0, g/255.0, b/255.0, a)
		glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
	End Method	


	Function AdjustTexSize(width:Int Var, height:Int Var)
		width = Pow2Size(width)
		height = Pow2Size(height)

		Repeat
			Local t:Int
			glTexImage2D(GL_PROXY_TEXTURE_2D, 0, 4, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, Null)
			glGetTexLevelParameteriv(GL_PROXY_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, Varptr t)
			If t then Return
			If width=1 And height=1 then RuntimeError "Unable to calculate tex size"
			If width&gt;1 then width:/2
			If height&gt;1 then height:/2
		Forever
	End Function


	Function Pow2Size:Int( n:Int )
		Local t:Int=1
		While t&lt;n
			t:*2
		Wend
		Return t
	End Function
End Type

</textarea><br><br>I also prepared some convenience functions - maybe someone writes a kind of "driver system" so it would automatically use "TOpenGLImageRenderBuffer" when OpenGL is used, and a "TDirectXxImageRenderBuffer" for the various DX engines. Easiest would be the integration in the modules so it gets auto loaded then, else we would need to use Reflection to find out which GraphicsEngine is running (as "_driver" is a private property of brl.graphics).<br><br><br>One usage for such a Render2Texture is eg a interface texture ... things rarely change on the interface but it might consist of 200 different objects (active unit portrait, money, time, healthbar).<br><br>If you change one of these values, mark the interface object "dirty" and it recreates the texture, else it just renders the cached interface texture and saves a lot of draw calls.<br>Of course this could be done again with software-rendering, but sooner or later you will reach some troubles (in my case this were alpha-issues and shining-through elements of combined sprites).<br><br><br>To repeat myself: the biggest benefit is that you draw on your already existing image ... so you only draw the "deltas", the "changed content". This is then similar to "DirtyRects"-approaches.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an absolutely excellent introduction to OO, in Blitzmax.  Once you learn it you will never want to go back to procedural code.<br><br><a href="http://brucey.net/programming/blitz/misc/library/BlitzMax_OOP_Tutorial.pdf" target="_blank">http://brucey.net/programming/blitz/misc/library/BlitzMax_OOP_Tutorial.pdf</a> <br><br></td></tr></table><br>
<a name="1289638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Derron. I'm looking at your code. This is using Casaber's technique, which I'm trying to avoid. Surely there must be a way to plot to a hidden page and recall it in less than 300 lines of source.<br><br>In my code:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Graphics 640,480

Global scrn:tgraphics=CreateGraphics(640,480,0,0,0)
Global i

SetGraphics scrn
For i=0 To 639
  Plot i,240+Sin(i)*120 ' plot some thread
Next
' It's plotted to this hidden page, now how do you retrieve it to view on the regular screen ?
Flip
WaitKey

End
</textarea><br><br>I am apparently plotting to a hidden page, I just don't know how to retrieve it. If that can be solved in less than 300-lines of code, that would be wonderful !<br><br>Endive, I will look at the documentation. Wish me luck, this will definitely be a first in coding for me, and thanks. :) <br><br></td></tr></table><br>
<a name="1289647"></a>

<a name="1289649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> It uses so much lines of code because it tries to be versatile (extendable - so it could be used with OpenGL and DirectX or something else).<br><br>Your "draw + flip" is sending the data to the GPU ... and you need to retrieve it from there, which makes it using the same technique than "grabpixmap" - aka "slow".<br><br><br><br>Regardless of this: it does not matter if you see the 300 lines of code there. If it really matters, you should avoid importing brl.graphics as this imports some hundred lines of code too. Same for a PNG-Loader, input handling ...<br><br><br>Just because you are not using the "framework command" you are including thousands of LOCs. Do you blame that? no? So you shouldn't blame 300 LOCs helping you with a render-2-texture-feature.<br><br><br>once you copied that "'=== bla" portion into another file it is just<br><br><pre class=code>
Import "renderbuffer.bmx"
Global buffer:TRenderBuffer = CreateImageRenderBuffer(w,h)
SetRenderBuffer(buffer)
'draw to that buffer
UnsetRenderBuffer()

DrawImage(buffer.GetImage(),x,y)
Flip
</pre><br><br>Is this still too much code for something versatile?<br>I just start to think you do not want to understand it. Just think again what you will have to do if "DrawImage()" (coming from an imported module ...) wasnt available, if you would have to "glTextureBLA" your own things.<br><br><br>@Casaber's technique<br>No, he just copied the code, Klepto2 posted somewhen in the forums - including the whitespace - so a straight copy-paste.<br><br><br><br>Edit - your "plot"-code would then be<br><pre class=code>
SuperStrict
Import "renderbuffer_or_how_you_call_it.bmx"

SetGraphicsDriver(GLMax2DDriver())
Graphics(640 , 480)

Global renderBuffer:TRenderBuffer = CreateImageRenderBuffer(GraphicsWidth(), GraphicsHeight()) 

SetRenderBuffer(renderBuffer)
For local i:int = 0 To 639
  Plot (i,240+Sin(i)*120) ' plot some thread
Next
UnsetRenderBuffer() 

Repeat
'do something with the image
DrawImage(renderBuffer.GetImage(), 0,0)
Flip
Until KeyHit(KEY_ESCAPE)
</pre><br><br>Which looks - compared to your code, not very longer (5 lines of code more)<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Derron, thanks for the code - but no, I was wondering if there was a way to do it without any IMPORTs. So it used only BlitzMAX's own command set.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Graphics 640,480

Global scrn:tgraphics=CreateGraphics(640,480,0,0,0)
Global i

SetGraphics scrn
For i=0 To 639
  Plot i,240+Sin(i)*120 ' plot some thread
Next
' It's plotted to this hidden page, now how do you retrieve it to view on the regular screen ?
Flip
WaitKey

End
</textarea> <br><br></td></tr></table><br>
<a name="1289669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do not want to repeat it over and over...<br><br>if you do _not_ use the framework command, you are already importing all modules available.<br><br>Without these modules, "plot" wont exist, or "CreateGraphics()".<br><br><br>So if you put the renderbuffer-part in a module like brl.mod/graphics.mod, then you would autoimport it too.<br><br>In your case (your above's sample) you are at least importing the modules:<br>brl.graphics<br>brl.max2d<br>brl.polledinput<br><br>You are not believing me? disable "import all modules" by doing the following:<br><br><pre class=code>
SuperStrict
Framework Brl.Blitz
</pre><br><br>Now up to no "additional command" is available (and the filesize is way lower than without the framework command...).<br><br>Feel free to read about framework in the various threads available on the forums.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I understand I can cripple the compiler (or language) from its default libraries.<br><br>I was just trying to find a nice small code to the solution. I have Casaber's code in place and will use it - I guess developing a hidden page from the code I used below is beyond everyone's understanding to try and get working - it's beyond me anyways. :)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Graphics 640,480

Global scrn:tgraphics=CreateGraphics(640,480,0,0,0)
Global i

SetGraphics scrn
For i=0 To 639
  Plot i,240+Sin(i)*120 ' plot some thread
Next
' It's plotted to this hidden page, now how do you retrieve it to view on the regular screen ?
Flip
WaitKey

End
</textarea> <br><br></td></tr></table><br>
<a name="1289676"></a>

<a name="1289685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are able to retrieve it with adding a grabimage after you flipped the buffers. This is how you do it with blitzmax.<br><br>Keep in mind that Casabers Code flips y-axis and contains a bug using image.width instead of image.height in one line.<br><br>I will stop replying to that thread as I told you already that drawimage() etc are doing multiple things in the background too (so I cannot add "new things" to this question). R2t is just not provided by blitzmax'  provided modules. As a plot() might immediately be send to the gpu you have to fetch the results from there...which is done by these grab-commands. R2t avoids this by redirecting plot/drawimage/drawoval... to a texture instead of the gpu.<br><br>Bye<br>Ron <br><br></td></tr></table><br>
<a name="1289686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to avoid grabimage or grabpixmap. That's fine - I have the tools necessary to work, I was just hoping to cull it down a little. As mentioned, in GFA to create a virtual screen, it's:<pre class=code>
dim newdc,bmpdc
newdc=memdc(_dc(1))
bmpdc=createbmp(640,480)
setbmp newdc,bmpdc

setdc newdc ' can now draw to this hidden page

' to copy to main screen use:
~bitblt(newdc,0,0,640,480,_dc(1),0,0,SRCCOPY)</pre>_dc(1) is a handle to accessing the main display screen.<br><br>Now I will tell you, Ron, bitblt() is not part of GFA but of Windows own internal routines, so technically, you should be able to call the same command as BlitzMAX has full access to windows libraries and routines.<br><br>If that's not a clue to solving the hidden page, I toss my hat to the affair and will use Casaber's routine. <br><br></td></tr></table><br>
<a name="1289692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Again: it is _not_ Casaber's routine. It was written by Klepto2<br>-&gt; [a codearcs/codearcs.php?code=2222]Code Archive Entry[/a]<br><br><br>@windows libraries<br>This does not matter, as you are not doing software rendering (manually setting bytes of a memory block / pixmap).<br><br>I will try to explain (hopefully I am not wrong there):<br>As soon as you call "DrawImage" the corresponding internal commands are used to inform the GPU of what to do (position a quad at XY and use the following texture data).  Depending on whether you use OpenGL or DX this is done when doing the "DrawImage" - or when doing the final "Flip" (you could measure it by timing the commands and check which one takes the big time.<br><br>So instead of drawing the image on a big "screenbuffer-image" and at the end sending this image to the GPU, each of the small drawn images is send on their own to the GPU.<br>THIS effectively avoids a fast "grab screenbuffer"-command.<br><br><br>That R2T-Code now does introduce something similar to what "GFA/windows commands" do: it tells eg. OpenGL to target all commands to a texture instead of some gpu memory (I assume _this_ is not working exactly this way ;-)).<br>So it is some kind of "re-routing" the draw-commands.<br><br>I do not know if this somehow uses the GPU (potential limits regarding max image size) or is CPU only (no limit except memory/RAM). Maybe someone with more knowledge can shed some light on this subject.<br><br>"Shaders" and other things are there, to instruct the GPU how to manipulate data which is already in the GPU memory (so the "slow" transfer could be skipped). Nonetheless: as soon as you want the data back from the GPU, you will end up with some slowdown (as you need to copy the data from GPU to CPU ..which takes some time).<br><br><br>Conclusion: I do not know another way of getting an image as render target (except using software rendering - similar to how I am doing it in my DIG-Framework).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Software rendering is also not the worst thing in the world, it can go pretty fast these days. <br><br></td></tr></table><br>
<a name="1289708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> But this means, you have to code it on your own (multiplication of colors, blend modes, ...) while the OGL-path does this for you already.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Klepto2's routine then. In any case, it works and is good - and was definitely one of the main things I missed from GFA.<br><br>Reading your description ... yes, I'm going to need another cup of coffee for this.<br><br>I think Mike Meyers said it best in the live-action movie, "Cat In The Hat,"<br><br><img src="http://media.agonybooth.com/images/articles/Cartoon_Palooza/Cat_in_the_Hat/articlelist.jpg"><br><br><b>How did you get so smart ?</b><br><br>I am barely understanding this. Endive mentioned software rendering.<br><br>I know I use software rendering on the PSX emulator and it runs pretty fast - and better than the alternative DirectX library.<br><br>Let me ask this, when you use DrawImage() or GrabImage() or DrawPixMap() or GrabPixMap(), is that compiled C++ code or compiled machine-language code ?<br><br>Is BlitzMAX final compilation, Build Option, Minus Debug, about the same speed or slower than C++ ?<br><br>Is Klepto's routine using the shader method you are talking about, or is there some shader method I haven't seen the source to yet that runs faster than Klepto's ?<br><br>Still want to thank Casaber for introducing me to the marvel code. I'll credit Klepto when I finish this crazy engine - and everyone else who introduced new code to me that I'll use. :)<br><br>I'm still not very happy with the massive code I wrote HERE:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=105561" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=105561</a><br><br>Got to be an easier way to write a keyboard reader in BlitzMAX that operated with MaxGui.Drivers.<br><br>Also - reading several posts in here (from other people) there is a lot of talk of trying to maintain compatibility.<br><br>I know now that BlitzMAX can run on the Macintosh, does it also run on cellphones ? <br><br></td></tr></table><br>
<a name="1289746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I know now that BlitzMAX can run on the Macintosh, does it also run on cellphones ?  <br></div><br>No... but Brucey's BlitzMAX NG does. <br><br></td></tr></table><br>
<a name="1289761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzMax NG ? This sounds pretty interesting, Therevills. I'm seeing sources, has someone compiled the latest version and/or link to support page so it can be explored ?<br><br>Does it compile to HTML5 or some other format ? <br><br></td></tr></table><br>
<a name="1289766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> The easiest version of BMX-NG is on here:<br><br><a href="http://www.bmx-ng.com/main/downloads/" target="_blank">http://www.bmx-ng.com/main/downloads/</a><br><br>I do remember Brucey showing off some Emscripten.... <br><br></td></tr></table><br>
<a name="1289778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm seeing two versions. To which media does this port ?<br><br>Windows EXE, Flash, HTML5, or ... ?<br><br><a href="https://github.com/bmx-ng/bmx-ng/releases/download/v0.70.3.09.win32/BlitzMax_win32_0.70.3.09.7z" target="_blank">https://github.com/bmx-ng/bmx-ng/releases/download/v0.70.3.09.win32/BlitzMax_win32_0.70.3.09.7z</a><br><br><a href="https://github.com/bmx-ng/bmx-ng/releases/download/v0.66.3.06.osx/BlitzMax_osx_0.66.3.06.zip" target="_blank">https://github.com/bmx-ng/bmx-ng/releases/download/v0.66.3.06.osx/BlitzMax_osx_0.66.3.06.zip</a><br><br>I appreciate these links ! Something new to explore.<br><br>I have the Win32 ver up and running. Tried code: Print"hello world"<br>Set Platform for WEB, Compiled.<br><br>It crashes ... :(<br><br><b>Build Error: failed to compile (2) C:/David/DLs/BlitzMax_win32_</b><br><br>BTW, I may have something you would be interested in. My (hopefully) final version of "Serious Key Reader" it's very configurable now. You can specify timers for key repeat and everything.<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=105561" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=105561</a> <br><br></td></tr></table><br>
<a name="1289807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> These download describes on which OS they run. For what they compile is written on an other sheet of paper (keyword: "cross-compiling").<br>On Windows you might be able to compile to: Windows, Android and Raspberry PI (because there are SDKs for last two targets - and they are available cross-platform).<br><br>From Linux/Mac-Variants of BMX-NG you will be able to compile to: Linux respective Mac + Windows,Android,PI.<br><br><br>@Build Error<br>Emscripten ("WEB") is currently not working (GC issues).<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I couldn't get "Hello World" to compile to ANY platform in that 32-bit Windows edition, including .<br><br>I know that's getting to be a pattern with me, where things aren't working right I'm downloading - but that's the importance of testing on all computer platforms. I currently have Windows 8.1 64-bit edition.<br><br>Fortunately good ol' BlitzMAX does work, and well, so - I'm going back to it and finish writing this graphic editor to replace my earlier one from 5-years ago. <br><br></td></tr></table><br>
<a name="1289870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please rename your BlitzMax-Folder to something simple ("C:/David/DLs/BlitzMaxNG") - maybe something did not like the underscores.<br><br>(at least it looks odd, as your path is truncated (_win32_ [...?])<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289878"></a>

<a name="1289879"></a>

<a name="1289881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabhand</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I couldn't get "Hello World" to compile to ANY platform in that 32-bit Windows edition, including .<br> <br></div><br><br><a href="http://www.blitzbasic.com/Community/post.php?topic=105123&amp;post=1289767" target="_blank">http://www.blitzbasic.com/Community/post.php?topic=105123&amp;post=1289767</a><br><br>Read that, and if it sounds familiar, go here: <a href="http://www.bmx-ng.com/main/downloads/" target="_blank">http://www.bmx-ng.com/main/downloads/</a><br><br>:)<br> <br>Dabz <br><br></td></tr></table><br>
<a name="1289890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I appreciate the update, Dabz, unfortunately even this newer version crashes on the simple:<pre class=code>Print "Hello World."</pre><br><br>And - can I ask why it takes SO long to compile ? It's still at 6% as I write this.<br>Now, 12%. That's horrendously slow compared to default BlitzMAX speed of compilation. <br><br></td></tr></table><br>
<a name="1289901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Probably depends how old your hardware is... on my computer, a clean build of the brl modules takes 8.5 seconds...<br>A basic app (1 file using framework) compiles in &lt; 1 second.<br><br><br>Better to stick with the official BlitzMax. :-) <br><br></td></tr></table><br>
<a name="1289922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Compilation might take some time:<br>Use quick compile if possible (official maxide does not offer the -quick compilation flag).<br><br>Once all modules are compiled it will just compile your code...which is faster (obviously). Nonetheless...without -quick the new bmk checks modules whether they are changed and need recompilation.<br><br>Bye<br>Ron <br><br></td></tr></table><br>
<a name="1289940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey. I'm using a quad-core pentium 64-bit Windows 8.1<br><br>Once it did the initial long compilation, it's fairly fast on all programs now. Brucey, this is your brainchild, how do I get it to compile to a web executable without crashing ?<br><br>And ... doesn't your free program defeat the purpose of Monkey-X ? I mean Blitzmax's own MaxIDE is far superior than Monkey-X's own IDE.<br><br><img src="http://s2.dmcdn.net/JDuJQ/280x157-5-2.jpg"><br><br>As Ed from his garage would say, <b>"I'm not complaining, just reporting."</b> <br><br></td></tr></table><br>
<a name="1289941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And ... doesn't your free program defeat the purpose of Monkey-X ? I mean Blitzmax's own MaxIDE is far superior than Monkey-X's own IDE. <br></div><br><br>Blitzmax-NG is in part based on Monkey's open-sources translate utility, so without Monkey NG wouldn't have existed in its current form either.<br><br>All in all, Monkey and Blitzmax both have their own strengths and weaknesses. Monkey is supposedly more advanced with regards to its implementation of object oriented programming, while blitzmax has a larger command set especially factoring in the tons of 3rd party modules written for it...<br><br>But all the additional platforms that were added to Blitzmax NG definitely give it a significant functional overlap with Monkey. <br><br></td></tr></table><br>
<a name="1289943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> how do I get it to compile to a web executable without crashing ? <br></div><br><br>You would need to fix the issues with BCC-NG and the emscripten target (for now this are issues with the GC ... If ...and only if ... am to trust Brucey on this topic :-)).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1289967"></a>

<a name="1289968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xlsior &amp; Ron:<br><br>I'll definitely wait for Brucey to update then. Way out of my hands - oh, and some bad news about Klepto2's routine. You =CAN'T= use GrabImage() or GrabPixmap() when you are working on a virtual page.<br><br>Yes, you can draw lines, circles, pixels, and so forth to the virtual pages as Casaber showed, but no grabbing of images AT ALL - I've tried many MANY different ways.<br><br>Unfortunately that just about shoots my entire use for the whole routine right down the drain.<br><br>I can write code to prove this problem happens if someone wants to see it - but it's really depressing to look at - so close and yet so far.<br><br>But I'm not sunk entirely. I can still work with pixmaps that only appear invisibly when something needs to be read out of or written to them.<br><br>Heh - prior to that I was actually using actual normal arrays that covered the full screen:<br><br>Global Scrn:Byte[4,1024,768,3] ' page, x, y, color R G B<br><br>and redrew portions of them depending upon what got changed. My programming is DIM indeed ! :)<br><br>Fortunately I can program better than that today. <br><br></td></tr></table><br>
<a name="1289987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no need to grabimage/grabpixmap... the image used for the buffer already contains the content you have drawn before. Like I have told you multiple times: that r2t redirects your draw commands to an image/texture instead of the backbuffer on the GPU.<br><br>Bye<br>Ron <br><br></td></tr></table><br>
<a name="1290090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let's say for a minute I'm a beginner to modern graphics - because in many ways I think I am.<br><br>How would I change this program to give the correct results, where it first shows corners (2 blocks apart from each other), then shows what was written and captured from (one bigger block).<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Proof Virtual Screen Code does not allow for grabpixmap() or grabimage()
Strict

SetGraphicsDriver(GLMax2DDriver())
Graphics 640,480
glewinit
SetBlend(alphablend)

Local scrn:TImage=CreateImage(640,480) ' virtual page
Local scrnb:timagebuffer=timagebuffer.setbuffer(scrn)
scrnb.bindbuffer ' write to scrn, virtual page
'scrnb.unbindbuffer ' UNREM me to see grabbing is working
DrawRect 0,0,50,50 ' simple rectangle
Local pic:TPixmap=GrabPixmap(0,0,25,25) ' grab corner
Local img:TImage=CreateImage(25,25)
GrabImage img,25,0 ' grab another piece, different format
scrnb.unbindbuffer ' write to normal display
Cls ' clear screen so no previous images appear
DrawPixmap pic,0,0 ' draw corner piece of pixmap
DrawImage img,50,0 ' draw next piece of IMAGE
Flip ' view both ? they are not there ?
WaitKey ' hit a key
Cls ' clear screen again, no previous images appear
DrawImage scrn,0,0 ' proof screen was drawn to originally, yes
Flip
WaitKey ' hit a key to exit

' CRAZY VIRTUAL SCREEN CODE BEGINS HERE -----------------------

Type TImageBuffer
Field Image:TImage ; Field rb:Int[1] ; Field fb:Int[1] ; Field Imageframe:TGLImageframe
Field Frame:Int = 0 ; Field OrigX:Int ; Field OrigY:Int ; Field OrigW:Int ; Field OrigH:Int

Function SetBuffer:TImageBuffer(Image:TImage,Frame:Int = 0)
Local IB:TImageBuffer = New TImageBuffer ; IB.Image = Image ; IB.Frame = Frame ; IB.GenerateFBO() ; IB.BindBuffer() ; Return IB
End Function
	
Method GenerateFBO()
ImageFrame = TGLImageFrame(Image.frame(Frame) ) ; imageframe.v0 = imageframe.v1 ; imageframe.v1 = 0.0
Local W:Int = Image.width ; Local H:Int = Image.Height ; AdjustTexSize(W, H) ; glGenFramebuffersEXT(1, fb)
glGenRenderbuffersEXT(1, rb) ; glBindTexture(GL_TEXTURE_2D, Imageframe.name) ; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0])
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, Imageframe.name, 0)
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rb[0]) ; glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, W, H) 
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, rb[0])
Local status:Int = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)
End Method
	
Method BindBuffer()
GetViewport(OrigX,OrigY,OrigW,OrigH) ; glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0])
glMatrixMode GL_PROJECTION ; glLoadIdentity ; glscalef 1.0, -1.0, 1.0 ; glOrtho 0, Image.Width,Image.Height, 0, -1, 1 ; glMatrixMode GL_MODELVIEW
glViewport(0, 0, Image.Width, Image.Height) ; glScissor 0, 0, Image.Width, Image.Height
End Method
	
Method UnBindBuffer()
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0) ; glMatrixMode GL_PROJECTION ; glLoadIdentity ; glOrtho 0,OrigW, Origh, 0, -1, 1
glMatrixMode GL_MODELVIEW ; glViewport(0, 0, OrigW, OrigH) ; glScissor 0, 0, OrigW, OrigH
End Method

End Type

Function AdjustTexSize(width:Int Var,height:Int Var)
width=Pow2Size(width) ; height=Pow2Size(height)
Repeat
Local t:Int ; glTexImage2D GL_PROXY_TEXTURE_2D,0,4,width,height,0,GL_RGBA,GL_UNSIGNED_BYTE,Null
glGetTexLevelParameteriv GL_PROXY_TEXTURE_2D,0,GL_TEXTURE_WIDTH,Varptr t
If t Return
If width&gt;1 width:/2
If height&gt;1 height:/2
Forever
End Function

Function Pow2Size:Int(n:Int)
Local t:Int=1 ; While t&lt;n ; t:*2; Wend ; Return t
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1290091"></a>

<a name="1290092"></a>

<a name="1290093"></a>

<a name="1290094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.amazon.com/OpenGL-Programming-Guide-Official-Learning/dp/0321773039" target="_blank">http://www.amazon.com/OpenGL-Programming-Guide-Official-Learning/dp/0321773039</a><br><br><a href="http://www.amazon.com/OpenGL-SuperBible-Comprehensive-Tutorial-Reference/dp/0321902947/" target="_blank">http://www.amazon.com/OpenGL-SuperBible-Comprehensive-Tutorial-Reference/dp/0321902947/</a><br><br>Also I think you should start considering whether there's some more productive use of your programming time.  It seems like you've been spinning your wheels for a while now.  What exactly are you trying to accomplish with this piece of code? <br><br></td></tr></table><br>
<a name="1290111"></a>

<a name="1290112"></a>

<a name="1290113"></a>

<a name="1290115"></a>

<a name="1290120"></a>

<a name="1290122"></a>

<a name="1290127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it worked correctly, it would be perfect for a graphic editor (what I'm working on now and thinking of sharing with everyone else when it's done).<br><br><img src="http://www.writerscafe.org/uploads/rte/4ef9e2f6aa9333128ad5e48126988a57.png"><br><br>For instance, I am at the part where you press "7" on a field and it scrolls that field with arrow keys using wrap-around pixels. Without this code I have no free "workspace."<br><br>Instead I must create a new image that displays 2x2 repeat fields, use a fixed field of view, and scrolls and captures accordingly to give the effect of scrolling wrapped pixels for the area you've selected.<br><br>The virtual code would give me the ability to glide from one hidden page to another, speeding up complex changes throughout all pages overall.<br><br>For games, you could build 4 or more layers to produce truly impressive parallax scrolling effects as well as multi-layer graphic panes that can bleed images through each other.<br><br>I'm seeing this code for the BIG picture, and that is definitely for a game programmer, and it would help as once I finish this code, I wanted to make my own IDE.<br><br>Tossing a 'book' at someone is something I would never do to a fellow programmer - <b><u>EVER</u></b> - under any circumstances. You are essentially telling me to frock off and go somewhere else simply because you don't know the answer.<br><br>When is the last time you told someone, "I don't know ?"<br><br>As for spinning my wheels, you'd be surprised the amount of code I have archived, a little over 700 individual *.bmx code I've written entirely for myself, many of which manipulate HTML files, generate graphic effects for my art (yes, I'm an artist too), and are toys essentially separate for game and RPG development.<br><br>In addition that I have a little over 170 *.bmx culled from other members.<br><br>GFA (which you remember does not work past Windows XP), I have a little over 2,700 programs I've written with less than 80 from other members. Upstairs I use 3 of my GFA programs every day that run in the background to help me with downloads and sort through my writings and other backed up files from 6-different terabyte drives.<br><br>I'm here to stay.<br><br>. . .<br><br>I'm sorry if this comes across as heavy handed. But seriously, how many OTHER people have you told to just go read a book on programming ? That many ? Yeah, just me. That's what I thought. <br><br></td></tr></table><br>
<a name="1290173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>' Proof Virtual Screen Code does not allow for grabpixmap() or grabimage()</pre><br><br>Above is more or less a proof, that you seem to have problems with reading other's posts....<br><br>Please read <b>Post #52</b> again.<br>There is _NO_ need to do grabPixmap/grabImage as you do not want to grab something from the GPU/screen. Also you could only grab something which is already on the "visible buffer". So it needs a "flip" before you can grab something.<br> <br>If you use that r2t then then everything drawn on it, is already available in the image right after you drew it. But it is not drawn on the "visible buffer" on its own, you need to draw your "scrn" to the screen first. After this, you could even use grabPixmap/grabImage but this is _not_ needed.<br><br>in your case "scrn" contains the rectangles already.<br><br><br><br>I most likely wont tell you this another time, I get tired of you (implicitely) asking the same question over and over - ignoring what others (in this case - my person) write. It just cuts spare time of other users if you ignore them (assumingly unintended) that way.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1290177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But seriously, how many OTHER people have you told to just go read a book on programming ? <br></div><br>What's wrong with reading books? I have a bookcase full of software development books... <br><br></td></tr></table><br>
<a name="1290229"></a>

<a name="1290231"></a>

<a name="1290233"></a>

<a name="1290236"></a>

<a name="1290238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Tossing a 'book' at someone is something I would never do to a fellow programmer - EVER - under any circumstances. You are essentially telling me to frock off and go somewhere else simply because you don't know the answer. <br></div><br>The problem is not on our end, the problem is on your end, and it is not a technical problem but a personal problem that has damaged you incalculably in ways you are not even aware of.<br><br>What you're interpreting as not knowing (and I for one didn't know the answer right off the bat) is in fact the growing desire not to do someone else's work for him.  Derron and others have told you the answer repeatedly and you not only seem to be unwilling to listen, you are now getting astoundingly rude again.  Believe it or not, we have our own crap to do, and while I am very interested in having really fast accelerated grabimage your attitude is so abominable that I don't want to help.<br><br>You said that you aren't familiar with modern graphics programming.  You are not going to learn opengl or modern graphics programming in general without reading books, and if it's OpenGL you're interested in, it will basically have to be those specific books if you expect to get any sort of real footing in it.<br><br>I would be pissed off by your attitude but it's frankly just pitiable and pathetic because the reason for it is blindingly obvious.  This is at least the third time we've all been through this (requests for help that you turned into fights when you were not spoonfed enough), fourth if we count the insane asterisks thing, and it's quite clear that your attitude is not going to improve.<br><br>How long ago was it that you were telling us DrawPoly was broken, for crying out loud?  Has it even been a week?  You didn't want to listen about that either, you wanted to argue and argue, despite having had the answer explained repeatedly.<br><br>Your response when confronted about your childish behavior was to post pictures of admonishing anime girls.<br><br>Anybody, please feel free to "toss books" at me at any time.  Right now I'm working through the books I recommended, yet again but for the first time in over ten years.  I'm also reading Principles of Computer Graphics.<br><br>Why am I doing this?  Because I want to learn and I don't want to have to ask people about everything! <br><br></td></tr></table><br>
<a name="1290249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Endive, to take someone's request for help and instead to point out personal characteristics of them and to show how 'uneducated' or in an attempt at defamation - is not to be applauded. You already shut down one thread for derailing it in this manner by insulting other users - and now you are doing it again.<br><br><b>"desire not to do someone else's work"</b> That is a very poor way of saying you just don't know. I'm glad I'm not you. I'm glad when someone asks for help I am straight, up forward, and honest with them.<br><br>I will tell them, "I don't know," or, "I know a little and may be able to help," or, "I definitely know this and can help you with it."<br><br>And no code is too sacred or too 'it's mine and I don't want to share it.' We're in this helping game to LEARN and teach others, not to withhold. Someone can withhold answers from others and may even brag that THEY know and others don't - but what does that say about the person ?<br><br>Please don't bother to write me in the future if you are merely going to derail the subject and instead point out personal characteristics of other users in the mere sake and attempt of demeaning them. That is so petty - so unlike a helpful person would be.<br><br>Brucey, it's not the fact he asked me to read a book, it's the WAY he asked. I have never had any problems when you help me. You are right on the mark - and I appreciate that.<br><br>It should be patently obvious that Endive and me have what we call in the business world a personality conflict. I won't abide by others going out of their way to insult me, and he won't abide by helping others at the level of which THEY (not him) understand.<br><br>He's not always this way, he can be helpful, but when he is like this, it's difficult to understand the 'answer' he gives and then he can get angry when asked about it further.<br><br>I know years ago I was ahead of everyone regarding knowledge of computers, and it did make me smug, jealous, and stingy. Today, I'm the opposite, and it's that much better as people I am open and honest with have always managed to teach me something in return.<br><br>As I have tutored professionally in the past in college (TCJC NW), I know the importance of talking and teaching at the same programming level my students are understanding. I don't take a BASIC programmer and suddenly try to teach them C++ and then get angry when they don't get it.<br><br>Many times the answers I have received - I feel like this, and it can be frustrating.<br><br>Derron, I'm not understanding R2T. I even googled it:<br>https://www.google.com/?gws_rd=ssl#newwindow=1&amp;q=define+r2t+graphics<br><br>Could you please post an example of R2T in work ? Thanks. <br><br></td></tr></table><br>
<a name="1290251"></a>

<a name="1290252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck with ALL that.<br><br>I'm actually not angry at you, I'm highly amused and again your behavior is pitiable.  The above is just another example. <br><br></td></tr></table><br>
<a name="1290254"></a>

<a name="1290255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I appreciate the fact you are no longer taking personal jabs at me and can laugh at yourself, Endive. That is a step in the right direction of getting along with others.<br><br>Back on subject, there were many ways proposed to 'darken' the full screen.<br><br>While I'm certain computers are fast enough to darken the entire screen in one pass by modifying every pixel on the screen, it was shown even using ALPHA at a low transparency plotted with a black rectangle over the entire area did not darken all elements, not really - and unusual graphic artefacts were introduced.<br><br>The last solution to use a TLIST to keep track of all the elements, display them, and darken them over time chronologically by oldest first, I believe was the chosen answer to this particular question.<br><br>Thanks to everyone who contributed towards this.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
'     __________________________________________
'    //                                       //
'   //  "Circular Kaleidoscope" v0.5         //
'  //  ("Bring Your Map" Edition)           //
' // Written by David W (dw817) 01/14/16   //
'//_______________________________________//

Strict
SeedRnd MilliSecs() ' random results each time
SetGraphicsDriver(GLMax2DDriver()) ' no problem pixels
Graphics 768,576
SetBlend lightblend ' all effects are now LIGHT

Global yankch$
Local a$,c$,i,x,y,x2,y2,ax,ay,r,g,b,r2,g2,b2,r3,g3,b3,n,al#
Local ci:tmap=New tmap

x=Rand(0,767) ' pick random place to start
y=Rand(0,577)
Repeat
  ax=Rand(-2,2)
  ay=Rand(-2,2)
Until ax&lt;&gt;0 And ay&lt;&gt;0 ' loop until direction is diagonal

n=255 ' It's gotta be in backwards order or it won't work

Repeat ' (* MAIN *)

MapInsert ci,dec$(n,3),str$(x)+","+str$(y)+","+str$(r)+","+str$(g)+","+str$(b)
Cls
al#=.02
For a$=EachIn ci.keys() ' loop through all items in our MAP
  c$=String(ci.valueforkey(a$)) ' contains all values x,y,r,g,b
  x2=yank(c$) ; y2=yank(c$) ' pull out location and color
  r3=yank(c$) ; g3=yank(c$) ; b3=yank(c$)
  SetColor r3,g3,b3
  SetAlpha al# ' decreases with each iteration
  DrawOval x2-64,y2-64,128,128 ' draw 4-circles mirroring on screen
  DrawOval 704-x2,y2-64,128,128
  DrawOval x2-64,512-y2,128,128
  DrawOval 704-x2,512-y2,128,128
  al#:-.00003 ' decrease ALPHA a tiny bit
  If al#&lt;=0 ' if it's completely transparent (BLACK)
    al#=0 ' then remove associated MAP coordinates
    MapRemove ci,a$ ' and color too
  EndIf
Next
x:+ax ' outside loop, we move actual 'paint' position
y:+ay ' based on direction moving
If x&lt;0 Then ax=Rand(1,2) ' out of bounds ? Bounce back
If x&gt;767 Then ax=-Rand(1,2)
If y&lt;0 Then ay=Rand(1,2)
If y&gt;575 Then ay=-Rand(1,2)
If r&lt;r2 Then r:+1 ' work towards target color
If r&gt;r2 Then r:-1
If g&lt;g2 Then g:+1
If g&gt;g2 Then g:-1
If b&lt;b2 Then b:+1
If b&gt;b2 Then b:-1
If r=r2 And g=g2 And b=b2 ' if color matches target color
  Repeat ' pick new color
    r2=Rand(0,255)
    g2=Rand(0,255)
    b2=Rand(0,255)
  Until Abs(r2-g2)&gt;64 Or Abs(g2-b2)&gt;64 Or Abs(r2-b2)&gt;64 ' must be radical color
EndIf
n:-1 ' decrease our TMAP pointer
If n&lt;0 Then n=255 ' bounce it back to 255 if at end
Flip
If KeyDown(key_escape)Then End ' exit when ESCAPE key is pressed

Forever

' &gt;&gt; YANK COMMA DELIMITED TEXT CONVERTED TO NUMBER
Function yank(a$ Var)
  Local b$
  If yankch$=""
    yankch$=","
  EndIf
  If fnz$(a$)&lt;&gt;yankch$
    a$:+yankch$
  EndIf
  b$=Left$(a$,Instr(a$,yankch$)-1)
  a$=Mid$(a$,Instr(a$,yankch$)+ 1)
  If fnz$(a$)=yankch$ Or fnz$(a$)=","
    a$=fnd$(a$)
  EndIf
  yankch$=","
  Return val(b$)
EndFunction

' &gt;&gt; RETURN STRING FROM NUMBER
Function str$(n)
  Return Int(n)
EndFunction

' &gt;&gt; RETRIEVE VALUE FROM STRING
Function val(t$)
  Return t$.toint()
EndFunction

' &gt;&gt; RETRIEVE ALL BUT LAST CHARACTER FROM STRING
Function fnd$(a$)
  Return Left$(a$,Len(a$)-1)
EndFunction

' &gt;&gt; RETRIEVE LAST CHARACTER FROM STRING
Function fnz$(a$)
  Return Right$(a$,1)
EndFunction

' &gt;&gt; RETURN ZERO PADDED NUMBER N WITH L DIGITS
Function dec$(n,l)
Local r$,i
  For i=Len(str$(n))+1 To l
    r$=r$+"0"
  Next
  r$=r$+str$(n)
  Return Right$(r$,l)
EndFunction
</textarea> <br><br></td></tr></table><br>
<a name="1290256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Brucey, it's not the fact he asked me to read a book, it's the WAY he asked.  <br></div><br><br>You: "I'm a beginner to modern graphics."<br><br>Me: "Here are two books."  Both the absolute canonical references on modern accelerated graphics, bar none.<br><br>And you are offended by that.  You would rather ask other people to do your work for you, and then get offended at them for not spoonfeeding you enough.<br><br>The problem is not on our end.  It is on your end. <br><br></td></tr></table><br>
<a name="1290259"></a>

<a name="1290260"></a>

<a name="1290261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Endive, I'M =TRYING= to go back to topic. Will you do the same, please ?<br><br>... I will look over one of your books but I suspect strongly it is over my head. <br><br>Why am I not surprised ? This is the very first example code they have in the book to introduce you to GL - the essential equivalence of, "Hello World." And the code is actually longer then I captured here.<br><br><img src="http://www.writerscafe.org/uploads/rte/f3d2453f103a365307bc681c9f91cbf8.png"><br><br>Now for someone who has only used pixels all his life - what did you manage to accomplish for me by sending me this book ? Yes, I have programmed in C++ (the code above), and you could not have known this, but certainly not at that advanced a level.<br><br>And - more importantly, DON'T they have a forum to talk about this particular subject, OpenGL, which you notice I have NOT been in yet ?<br><br><a href="http://www.blitzbasic.com/Community/topics.php?forum=103" target="_blank">http://www.blitzbasic.com/Community/topics.php?forum=103</a><br><br>How does listing books that are over my head and in a foreign language (not BlitzMAX code) - how specifically does that help me ?<br><br>Remember the story I wrote about people helping each other ? (In my signature line), you are wanting me to chart the stars in the sky in order to teach me how to catch fish - instead of just - FISHING.<br><br>And you are also handing me a book on Everything You Ever Wanted To Know About Fishing - except that it's written in Chinese. I know you can see this.<br><br>If and when I enter the OpenGL forum, then you can berate me on how little I know if and when I ask for help in there, fair enough ? <br><br></td></tr></table><br>
<a name="1290270"></a>

<a name="1290271"></a>

<a name="1290272"></a>

<a name="1290274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> r2t:<br><br>google: render 2 texture<br>first hit: <a href="http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/" target="_blank">http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/</a><br><br>---<br><br>You asked for another approach to your sample - I wont recode it again (or similar). You asked for an approach to darken an area and to draw new things on it.<br><br><br>Code that darkens "previously drawn ovals" (including some comments):<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

'only works with OGL (needs r2t for DX...)
SetGraphicsDriver(GLMax2DDriver())
Graphics(768 , 576)
'set alphablend so "SetAlpha()" does work as we expect it
SetBlend AlphaBlend

'create our render target
Global renderBuffer:TRenderBuffer = CreateImageRenderBuffer( GraphicsWidth(), GraphicsHeight() )

global drawRenderImage:int = True
global frameNumber:int = 0
Repeat
	'render to the buffer from now on
	SetRenderBuffer(renderBuffer)

	'darken the buffer by drawing a slightly visible rect on it
	SetAlpha(0.01); SetColor(0,0,0)
	DrawRect(0, 0, GraphicsWidth(), GraphicsHeight())
	SetAlpha(1.0); SetColor(255,255,255)

	'draw a random colored and positioned oval somewhere
	'draw it every 3rd call
	if frameNumber mod 3 = 0
		SetColor(Rand(255),Rand(255),Rand(255))
		DrawOval(Rand(GraphicsWidth()-1 - 50), Rand(GraphicsHeight()-1 - 50), 50,50)
		SetColor(255,255,255)
	endif

	'set screen as render target again
	UnsetRenderBuffer()

	'reset color (imagine we do not know the previously set color)
	SetColor(255,255,255)
	'could be removed as you render a texture to the whole buffer
	cls
	'draw the image we have drawn onto
	if drawRenderImage then DrawImage(renderBuffer.GetImage(), 0, 0)

	'disable buffer drawing
	if KeyHit(KEY_SPACE) then drawRenderImage = not drawRenderImage

	DrawText(Millisecs(),0,0)

	frameNumber :+ 1

	Flip 1

' exit when ESCAPE key is pressed
Until KeyDown(key_escape)
End













'=== TRENDERBUFFER TYPES ===
Type TRenderBuffer
	Global _currentBuffer:TRenderBuffer
	Global _defaultBuffer:TRenderBuffer

	Function GetDefault:TRenderBuffer()
		if not _defaultBuffer then _defaultBuffer = new TScreenBuffer
		return _defaultBuffer
	End Function


	Function GetCurrent:TRenderBuffer()
		return _currentBuffer
	End Function


	Function _BindCurrent(buffer:TRenderBuffer)
		if _currentBuffer &lt;&gt; buffer
			if _currentBuffer then _UnbindCurrent()
			_currentBuffer = buffer

			if buffer then buffer._Bind()
		endif
	End Function


	Function _UnbindCurrent()
		if _currentBuffer &lt;&gt; GetDefault()
			if _currentBuffer then _currentBuffer._Unbind()

			'set default buffer again
			_currentBuffer = GetDefault()
		endif
	End Function


	Method _Bind() abstract
	Method _Unbind() abstract


	'helper / convenience function
	Method Bind()
		_BindCurrent(self)
	End Method

	Method Unbind()
		_UnbindCurrent()
	End Method
	
	Method Width:int() abstract
	Method Height:int() abstract
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0) abstract
	Method GetImage:TImage() abstract
End Type


'set to desired buffer
Function SetRenderBuffer(buffer:TRenderBuffer)
	TRenderBuffer._BindCurrent(buffer)
End Function

'set to default screen buffer again
Function UnsetRenderBuffer()
	TRenderBuffer._UnbindCurrent()
End Function

Function GetRenderBuffer:TRenderBuffer()
	return TRenderBuffer.GetCurrent()
End Function

Function CreateImageRenderBuffer:TRenderBuffer(width:int, height:int)
	return new TOpenGLImageRenderBuffer.Init(width, height)
End Function




Type TScreenBuffer extends TRenderBuffer
	Method Width:int()
		return GraphicsWidth()
	End Method

	Method Height:int()
		return GraphicsHeight()
	End Method

	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		SetClsColor(r,g,b)
		SetAlpha(a)
		return Cls()
	End Method

	Method GetImage:TImage()
		return LoadImage(GrabPixmap(0,0, GraphicsWidth(), GraphicsHeight()))
	End Method

	Method _Bind()
		'
	End Method

	Method _Unbind()
		'
	End Method
End Type


Type TImageRenderBuffer extends TRenderBuffer
	Field Image:TImage
	Field Frame:Int = 0
	

	Method Init:TImageRenderBuffer(width:int, height:int)
		local img:TImage = CreateImage(width, height, 1)
		InitWithImage(img)
		return self
	End Method


	Method InitWithScreen:TImageRenderBuffer()
		return Init(GraphicsWidth(), GraphicsHeight())
	End Method
	

	Method InitWithImage:TImageRenderBuffer(Image:TImage, Frame:Int = 0)
		self.Image = Image
		self.Frame = Frame
		return self
	End Method
	

	Method Width:Int()
		Return Image.Width
	End Method

	
	Method Height:Int()
		Return Image.Height
	End Method


	Method GetImage:TImage()
		return image
	End Method
End Type




Type TOpenGLImageRenderBuffer extends TImageRenderBuffer
	Field rb:Int[1]
	Field fb:Int[1]
	Field Imageframe:TGLImageframe
	Field OrigX:Int
	Field OrigY:Int
	Field OrigW:Int
	Field OrigH:Int
	Global _initDone:int = False


	Method New()
		if not _initDone
			glewInit()

			_initDone = True
		endif
	End Method


	Method InitWithImage:TOpenGLImageRenderBuffer(Image:TImage, Frame:Int = 0)
		Super.InitWithImage(Image, Frame)
		GenerateFBO()
		return self
	End Method


	Method GenerateFBO()
		ImageFrame = TGLImageFrame(Image.frame(Frame) )

		imageframe.v0 = imageframe.v1
		imageframe.v1 = 0.0

		Local W:Int = Image.width
		Local H:Int = Image.Height
		AdjustTexSize(W, H) 

		glGenFramebuffersEXT(1, fb)
	    glGenRenderbuffersEXT(1, rb) 
	    glBindTexture(GL_TEXTURE_2D, Imageframe.name)
	    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0]) 
	 	glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, Imageframe.name, 0)
	    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rb[0])
	    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, W, H)
	    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, rb[0])

   
	    Select glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT)
	       Case GL_FRAMEBUFFER_COMPLETE_EXT 
	          Print "all right" + " : " + GL_FRAMEBUFFER_COMPLETE_EXT
	       Case GL_FRAMEBUFFER_UNSUPPORTED_EXT
	          Print "choose different formats"
	       Default
	          End 
	    EndSelect 
	End Method


	'override
	Method _Bind()
		GetViewport(OrigX, OrigY, OrigW, OrigH)
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb[0]) 
		glMatrixMode(GL_PROJECTION) 
		glLoadIdentity()
		'Ronny: flip y
		glScalef(1,-1,1)

		glOrtho(0, Image.Width, Image.Height, 0, -1, 1) 
		glMatrixMode(GL_MODELVIEW) 
		glViewport(0, 0 ,Image.Width, Image.Height) 
		glScissor(0, 0, Image.Width, Image.Height)
	End Method
	

	'override
	Method _Unbind() 
		glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0) 
		glMatrixMode(GL_PROJECTION) 
		glLoadIdentity()
		'Ronny: un-flip y again
		glScalef(1, 1, 1)

		glOrtho(0, OrigW, Origh, 0, -1, 1) 
		glMatrixMode(GL_MODELVIEW) 
		glViewport(0, 0 ,OrigW, OrigH) 
		glScissor(0, 0 ,OrigW, OrigH)
	End Method
   
	
	Method Cls:int(r:int=0,g:int=0,b:int=0,a:Float=1.0)
		glClearColor(r/255.0, g/255.0, b/255.0, a)
		glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
	End Method	


	Function AdjustTexSize(width:Int Var, height:Int Var)
		width = Pow2Size(width)
		height = Pow2Size(height)

		Repeat
			Local t:Int
			glTexImage2D(GL_PROXY_TEXTURE_2D, 0, 4, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, Null)
			glGetTexLevelParameteriv(GL_PROXY_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, Varptr t)
			If t then Return
			If width=1 And height=1 then RuntimeError "Unable to calculate tex size"
			If width&gt;1 then width:/2
			If height&gt;1 then height:/2
		Forever
	End Function


	Function Pow2Size:Int( n:Int )
		Local t:Int=1
		While t&lt;n
			t:*2
		Wend
		Return t
	End Function
End Type
</textarea> <br>(hit "SPACE" to disable drawing the renderbuffer - if you hit "SPACE" again, you might notice that the drawing to the buffer continued meanwhile...)<br><br>What it does is - what all other samples above did:<br>- it sets an renderbuffer as render target<br>- draws something on it (in this case a slightly visible black rectangle - to darken the canvas / previous image content)<br>- draws ovals at random positions (every 3rd frame - to see the effect a bit better)<br>- removes the screen as render target (rendering to screen again)<br>- draw the renderbuffer to the screeen<br>- flip (-&gt; show on screen what we have drawn to the screen since last flip - in our case this is just the "renderbuffer image")<br><br><br>_Your_ logic has to get placed in points 2 and 3.<br>For moving dots you just move your "current position" and draw it with the most current color. Every "fading action" is done through the "drawRect()" which lowers brightness of the canvas.<br><br>As long as we do not clear the pixels, the canvas keeps what we have drawn on it (this is _not_ the way with the normal screen target... which is why we introduced that render2texture).<br><br><br>If you wouldn't try to justify yourself, you would search a bit more smart than just for "r2t". The principle is the same: instead of the GPU you want to render everything to an image or texture.<br><br><br>@"yank()"<br>I already understood what it did when reading the function's content - I just was not aware of it when reading "bla = yank(blubb)". I think a "value = popValue(commaSeparatedValues)" is easier to understand (and "push" / "pop" are common commands in programming - think of stacks).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1290286"></a>

<a name="1290287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How does listing books that are over my head and in a foreign language (not BlitzMAX code) - how specifically does that help me ? <br></div><br>The question you are asking has to do directly with OpenGL.  Also you had stated that modern graphics was new to you.  This is the second question you are asking in which you are accusing the underlying libraries and blitzmax code of being flawed when the problem stems from your personal misunderstanding of OpenGL.<br><br><div class="quote"> Remember the story I wrote about people helping each other ? (In my signature line), you are wanting me to chart the stars in the sky in order to teach me how to catch fish - instead of just - FISHING.<br><br>And you are also handing me a book on Everything You Ever Wanted To Know About Fishing - except that it's written in Chinese. I know you can see this. <br></div><br>And what you're doing is biting the hand that feeds.<br><br>Also I disagree-- the book is written not in Chinese but the language you need to understand in order to understand the answers to your own questions.  It's an instructional manual on the language.<br><br>Maybe not now but sooner or later you are going to need to read them if you want to understand.  Sooner is better.  I suggest you start with the chapters that cover polygon winding order though that is back to the other thread.<br><br>And that's not giving a man a fish, it's teaching a man to learn how to fish.  Don't look a gift horse in the mouth, and don't be the one that is led to water but refuses to drink. <br><br></td></tr></table><br>
<a name="1290289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will examine Polygon winding, Endive.<br><br>Derron, your code does not make the circles go away completely. That is what I was trying to achieve (from the first post in the thread). Your code visually can be recreated thus:<pre class=code>Strict
Graphics 768,576
SetBlend alphablend
Repeat
  SetColor Rand(255),Rand(255),Rand(255)
  DrawOval Rand(768-50),Rand(576-50),50,50
  SetAlpha .01
  SetColor 0,0,0
  DrawRect 0,0,768,576
  SetAlpha 1
  Flip 1
Until KeyDown(27)</pre>I will investigate this portion you typed of:<pre class=code>Global renderBuffer:TRenderBuffer = CreateImageRenderBuffer( GraphicsWidth(), GraphicsHeight() )
</pre>As your definitions appear to be something useful to learn, thank you.<br><br>@Yank, this is the name I've used for the function since I first started programming. Your name is more accurate admittedly.<br><br>As you are saying Push and Pop are common in programming, there is then a way to increase clarity and decrease code size for my routine but maintain the same results - using some PUSH or POP commands ?<pre class=code>' &gt;&gt; RETURN COMMA DELIMITED TEXT FROM A$
Function yank$(a$ Var)
Local b=Instr(a$+",",","),c$=Left$(a$,b-1)
  a$=Mid$(a$,b+1) ' also remove it from input string
  Return c$
EndFunction</pre> <br><br></td></tr></table><br>
<a name="1290300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> We all know it's an immensely complex subject but if you want to learn it there is no other way than to do the same thing you did in 1981 when there was no net and there was nobody to ask and there were no good learning materials.  There is still no easy answer but the way to get there is lit so much more brightly now that it's not even funny.  I am having some trouble going from 2005 OpenGL to modern OpenGL, it is that different.  But at least there is good learning material. <br><br></td></tr></table><br>
<a name="1290305"></a>

<a name="1290306"></a>

<a name="1290307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I posted in #5 you cannot rely on the screen buffer contain valid data. That is why leaving out "cls" does not work on all computer setups.<br><br>So your examples are all flawed on these computers ...<br><br><br>Why are my circles never completely vanished? Because we only darken them by 10% on each DrawRectangle (Setalpha 0.1 -&gt; keep 90% of the old content).<br>As you might know infinitesimal calculations, we will have "oldColor * 0.9^amountOfTimesDrawn" - leading to a value never reaching 0.<br>So the end result is, that it is never cleared completely, but somewhen it should vanish into "&lt; 1" (of 255) which means "0".<br>  <br>Another option is, that "SetAlpha 0.01" is already that low, that during blend options calculations (whatever OpenGL is doing then...) run into problems.<br>If you adjust that "SetAlpha 0.01" to "SetAlpha 0.05" the effect will be different (the ovals are fading way faster ... but this time completely).<br><br>The problem is: my approach seems to be valid, but "somewhere else" it is doing some bugged math. <br>I think the problem is this: <br>ContentPixel is eg. rgb=2,2,2. We now draw on top of this with 1% opaque color rgb 0,0,0. So the mixture is this: (100-1)%*2 + 1%*0 = 1,98. The resulting rgb is rounded - and it becomes... 2.<br>What is the effect then? the ContentPixel will never go below 2.<br><br><br>--------<br><br><br>BUT ... What I absolutely do not get is: why you are blaming the circles not going away completely - instead of accepting: hey, they fade, but they just do not go completely, so is there a step missing?<br>Such a phrase would let me feel as if my examples are not staying unread. Without this, it sounds similar to:<br>- copy paste code to maxide, compile and run<br>- does not work perfect<br>- post reply on forum that it does not work similar to what was wanted<br>- do not tinker with the code, adjusting values, see what it does<br><br>-----<br><br>Repeating myself: your code does not work on many computers (especially when graphic contexts get destroyed - alt+tab with other graphical apps).<br><br>ELSE we all would have come with better / shorter code blocks.<br><br><br><br>The only valid option to really "fade out" the whole dots is - like I have described in Post #5 - using objects (and TLists or Arrays/Pools for storing them).<br>Once you run into performance trouble, you could "cheat"  by using both approaches:<br>- use the "quick n dirty" render2texture<br>- store objects (but do not draw them directly to the screen)<br>- every X frames you clear the renderbuffer-image and redraw the alive objects on it<br><br>The interval defines the performance hit.<br><br><br>@Push/Pop<br>It is just _me_ who does not understand the word "yank". So for _me_ "pushToCSV(csv:string, value:string)" or "popFromCSV:string(csv:string)" would make more sense.<br>As you mentioned simple code (you present to others...) I thought "readability" should be of concern.<br>Whacky "magic calculations" are not really readable.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1290308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yank is supposed to refer to pulling something out from the middle of a stack if I remember right.  It's an ancient idiom that dates from the stack-based computing days (1960s?)  I had no idea what he meant either at first, it wasn't just you. <br><br></td></tr></table><br>
<a name="1290311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> dict.cc just told me that its meaning is similar to "pull". So it is surely something people are used to say ... but _I_ was not aware of this.<br><br>Especially with variable names like "a$" it makes it just a bit hard to read (short but less "self explaining").<br><br><br>Thanks for the explanation.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1290313"></a>

<a name="1290314"></a>

<a name="1290315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> dw is really a very competent and knowledgeable programmer from 1983 who has been mysteriously transported from 1983 in a puff of that 1980s new motherboard smell and a swirl of pages from Incider! Magazine. <br><br></td></tr></table><br>
<a name="1290317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Endive, now you're just being facetious. :)<br><br>At least I don't critique and insult others' coding, I could start - but I really don't want to lower myself to your level, at ANY cost. So - no, that's not going to happen, applicable though it may be.<br><br>When you two can stop hosing each other down with cerebral testosterone, and actually decide to HELP people, I may return later. <br><br></td></tr></table><br>
<a name="1290322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Endive</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool!<br><br>In the meantime, read those books and the excellent OO guide. <br><br></td></tr></table><br>
<a name="1290428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Re: Push/Pop.  When I see push and pop in code, I think more of a LIFO structure, whereas it appears that dw is using a FIFO.  So if I were to see Pop("Cat, Dog, Chicken"), I would expect "Chicken" to be returned.<br><br>Of course, I really can't tell by looking at the string as to which order everything was added.  Was it "Cat" "Cat, Dog" "Cat, Dog, Chicken"? or "Chicken" "Dog, Chicken" "Cat, Dog, Chicken"? (I'm assuming the first).<br><br>Honestly didn't know the terms used for adding and removing from a FIFO stack, so I did a bit of Googling.  Turns out, it is Enqueue and Dequeue.  Thinking I'd might prefer Yank. :) <br><br></td></tr></table><br>
<a name="1290440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this is why Mark used "AddLast" and "AddFirst" in TList - instead of "pull/yank/push/pop/...".<br><br><br>@Lifo<br><a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)" target="_blank">https://en.wikipedia.org/wiki/Stack_(abstract_data_type)</a><br><br>Seems you are right, for me it is translated to German similar as "give" and "take" - which does not indicate a LIFO/FIFO-approach.<br><br><br>Seems I learned something new today, thanks.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1290449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dw817</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you guys can finally get over the single word I chose for a function(), I think you'll see I have already started to learn CreateList() and ListAddFirst() earlier today.<br><br>Yank() may not be needed, we'll see. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
