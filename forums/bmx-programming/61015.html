<!DOCTYPE html><html lang="en" ><head ><title >Getting image size before loading</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Getting image size before loading</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Getting image size before loading</a><br><br>
<a name="681148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sin of Nature</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>I think the answer is no, but I want to check.  Is there away of getting the size of the image before it it loading into memory using blitz commands (or possible anyone coded a API mod)?  I know you can code the reading of the image header, but I'd need to do it for all  image formats (BMP, JPG, PNG... etc) which would take ages.<br><br>Has anyone got a trick for doing this?  At the moment I'm loading them into memory, getting the banksize, then using the automatic garbage collection to delete them straight afterwards.  I'm a little jumpy about doing that way, especially as some of the images could be large.<br><br>Ideas?<br><br>Sin <br><br></td></tr></table><br>
<a name="681154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dunno, if you already know what images you want to load (e.g. sprites for a game), then you could preprocess those images in some seperate tool: load image, observe size, rename file as filename+"_"+width+"x"+height.<br>Then it's a matter of extracting this info from the filename..<br><br>Other than that, I'll pass. :) <br><br></td></tr></table><br>
<a name="681170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possible without loading: NO<br>But you can use pixmaps which loads it to ram and if you want to make an image out of it, just use the reference to the pixmap :-) <br><br></td></tr></table><br>
<a name="681174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont know at all. So no one shout @ me if this is a stupid question.<br><br>But could you just ask the operating system how large the images are? (And I do mean dimentions and not just bytes) <br><br></td></tr></table><br>
<a name="681190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No<br>You would need to use the BM image loaders and add the functionality (if it isn't present) <br><br></td></tr></table><br>
<a name="681262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sin of Nature</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>CS_TBL:  The image sizes are unknown size as the program is a graphical tool, so unfortunately its not possible.<br><br>Thanks all, I thought that was the case.  I was just making sure. :)<br><br>Sin <br><br></td></tr></table><br>
<a name="681264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yah, if it's just a randon selection of images and you don't really know what they contain, then you'll have to open each file one by one as a stream, read in some bytes, figure out what file type it is (maybe a clue from the file extension), then read some chunks based on the file formats themselves till you get to the part that defines the dimensions, then close the file. You have to do that for each file. That's what the O/S has to do if it did it.<br><br>If the files are known, ie your own media, then you should know the dimensions already.<br><br>Having said that, BMax should already have code somewhere within its modules that finds the dimensions of each of these image types  - maybe you could take that code and modify it to stop loading after it finds the dimensions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
