<!DOCTYPE html><html lang="en" ><head ><title >Separate mask and texture: Blit AND / OR effect?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Separate mask and texture: Blit AND / OR effect?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Separate mask and texture: Blit AND / OR effect?</a><br><br>
<a name="743787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am sleepy and I must be missing something, but this problem puzzles me.<br><br>I have three images that are masks. First is a circle, second a triangle and third a star.<br><br>I also have five other images that are different textures. Wood, sand, silver, gold and snow.<br><br>I want to be able to draw the texture images by using the mask images for mask definition. For example draw a silver star or snow triangle.<br><br>In the old days this was easy to achieve with classical blitting operators AND and OR. You first blitted the mask with AND operation, which resulted in a black area the shape of the mask drawn on the background. Then you blitted the texture image with OR operation, which resulted in the texture image being draw on the background just on the black area created by the AND operation. <br><br>How do I achieve the same result with standard BlitzMax functionality, without doing it by creating pixmaps of all the possible combinations "by hand"?<br><br>I want to avoid using pixmaps because of memory and speed issues: in reality I have a great number of different masks and textures.<br><br>-AF <br><br></td></tr></table><br>
<a name="743795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can't do it with standard BlitzMax, without resorting to making direct calls to DirectX or OpenGL, because there is no `and` and `or` graphics operations in Max2D.<br><br>In modern graphics api's these days you have to think in terms of using an alpha channel as a mask, using 8-bit data to decide at greater than what value the channel represents draw and below what value it represents no draw, as in SetBlend MaskBlend. But the alpha channel has to be `attached to` (ie embedded within) the RGB color data all as one stream of data (ie an RGBA-like format). Since you want the mask to be selectable separate from the color data, it would entail drawing the mask to the backbuffer to the destination alpha channel only (meaning 32-bit color modes only), draw the RGB color image to the RGB channels only (alpha off) and then grabbing the backbuffer back into a texture. Alternatively you'd need to play with something like glEnable(gl_Color_Logic_Op) in OpenGL to draw using AND and OR modes. Again this is not standard Max2D stuff. Things have moved on since the `old days` and the api does not do things in the same mindset. Since alpha channels are much more modern and advanced the idea of doing cookie-cutter and's and or's is `not how it's meant to work`.<br><br>Another method is to think of stencils, ala the old BlitzBasic on the Amiga, whereby you could use OpenGL's stencil buffer to mask off an area of the screen using your `alpha` or `luminosity` image, and then set things up to draw only to those pixels when you draw your RGB image over the top. Again that requires extra custom GL code since Max2D doesn't include any kind of stencilling.<br><br>There are ways to do what you want but you have to get into writing your own OpenGL or DirectX code. <br><br></td></tr></table><br>
<a name="744024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your response Daniel, even if it confirmed my fears that I wasn't just sleepy. I don't like the idea of writing my own OpenGL and DirectX code to get AND and OR fuctionality, so I'll do some tests with pixmaps. Hopefully speed and memory issues are manageable.<br><br>-AF <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
