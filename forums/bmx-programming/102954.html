<!DOCTYPE html><html lang="en" ><head ><title >In game\engine scripting?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >In game\engine scripting?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >In game\engine scripting?</a><br><br>
<a name="1236229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >coffeedotbean</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am looking for some pointers around in game\engine scripting specificity with conversation tree's. Think NPC's in RPG games where their text and player reply options change depending on other factors such as what items the player is carrying or other quests completed.<br><br>I am not making an RPG but the same kind of system I'll be looking to implement, for example I might script up the following in an editor.<br><br><pre class=code>
If player.inventory.contains(23)
   showDialog(78)
Else
   If npc.hostile
       showDialog(12)
   Else
       showDialog(173)
   End
End
</pre><br><br>I am already thinking I'd need a Dialog Object that holds the main text and the possible replies.  And ofc an Inventory object that hold s the list of items the player is holding.   Each having a unique ID value.<br><br>The issue I have is visualising how to get all this to work in game, I guess I'd need some kind of interpretor to read the script, and then call internal functions created in the game using the arguments supplied in the script.<br><br>If any one has any links to some resources or discussions on this kind of system please post them.  I am travelling until the weekend so unable to sit down and test out any of my thoughts but have all the time in the world to read up on this kind of thing. <br><br></td></tr></table><br>
<a name="1236705"></a>

<a name="1236706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> One way of solving this problem would be to write a small assembly language that runs in a virtual machine, along with extension commands for dialog-related functions.  This might sound difficult to implement but it's really not.  If you are thinking of writing an interpreter, this way might actually be easier.  It's basically the simplest of all possible interpreters. <br><br></td></tr></table><br>
<a name="1236744"></a>

<a name="1236745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if you really want to write "code-like" scripts as in post #1, you may as well use an existing full programming language like Lua. No need to reinvent that particular wheel.<br><br>However, conversation trees are a very constrained form of program so you should probably devise a much more restricted flow-based language (you <i>really</i> don't want or need those If statements clogging up your tree with unnecessary cruft when all the language does is branch).<br><br>A potential good base is the conversation/quest script system used by the Elder Scrolls/Fallout games (<a href="http://goo.gl/Ax34Ar" target="_blank">example</a>). In this model, a quest is a numbered, linear sequence of states that you can advance through by meeting conditions; small branches and alternate endings are handled by goto-ing ahead over certain numbers. The system doesn't allow you to go backwards. More complex branching or looping quest structures are created by threading these sequences together so that the last event in one triggers the start of another.<br><br>(How the game actually checks conditions or applies effects is not part of the model... hook a secondary scripting system in to handle these things, maybe with some inline Lua code.) <br><br></td></tr></table><br>
<a name="1237508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I liked the way that Ultima IV handled it.  You could actually type english sentences and it would look for various keywords.  And that ran on the Apple II!<br><br>My current system has one million times as much RAM space as the first Apple did. <br><br></td></tr></table><br>
<a name="1237529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Calibrator</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I remember correctly Ultima IV only recognized four letter words (or rather: The first four letters of a word), not complete sentences. It just would discard the rest.<br><br>AFAIK there are no real conversation trees in Ultima IV. I'm not even sure that the game checks if keywords can be already known by the gamer.<br><br>The first Ultima that included conversation trees with a mouse-driven dialog system was Ultima VII.<br>Ultima VII also uses a complex scripting language called "AGIL" ("A Goofy Interpreted Language" ;)) and they describe it as a "use-code and conversation language".<br><br>The "complete edition" version of U7 available for $2,39 on GOG.com includes about 30 design documents as "bonus materials" (including descriptions of AGIL, conversation functions and a conversation "style book") and I think they alone might be worth the humble price...<br><a href="http://www.gog.com/game/ultima_7_complete" target="_blank">http://www.gog.com/game/ultima_7_complete</a> <br><br></td></tr></table><br>
<a name="1237546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had one a while back i wrote, i posted it on the code archives but i didn't realize some of it got cut off. i'll see if i can find it. <br><br>There is a MiniC module on monkey-x that could probably be ported to blitzmax <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
