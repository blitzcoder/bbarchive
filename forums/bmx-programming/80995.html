<!DOCTYPE html><html lang="en" ><head ><title >Looking for a solution to a drawing dilemma</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Looking for a solution to a drawing dilemma</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Looking for a solution to a drawing dilemma</a><br><br>
<a name="911896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceAce</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm fiddling around with a program to interpret and display graphics that come packaged in a kind of funny format. All drawing is done using 6x12 tiles, each tile consisting of two colors. Each pixel inside the tile can be either set to 0 or 1, each number corresponding to one of the tile's colors.<br><br>The data comes in packets of 24 bytes, some packets contain drawing instructions, others do not. The packets that contain drawing information look like this:<br><br>Byte 1-8: Not important, here.<br>Byte 9: Color 0<br>Byte 10: Color 1<br>Byte 11: Row (all positioning is done by row/column multiplied by six or twelve to get screen coordinates.)<br>Byte 12: Column<br>Bytes 13-24: Graphics data using only the bottom six bits of each byte. 0 bits = color 0, 1 bits = color 1. So, this byte:<br>00010110<br>would be masked off to 010110, corresponding to three color 0 pixels and three color 1 pixels.<br><br>The drawing area is 300x216, broken up into 6x12 rows and columns. Each drawing instruction can contain a maximum of 6x12 pixels, but a series of instructions one after the other could potentially force the redrawing of the entire 300x216 area.<br><br>Still with me? OK. Plot() is way, way, way too slow as far as I can tell. Speed is important for this application. I've been fiddling around with Pixmaps (and the DrawPixmapFast function that's been floating around these forums forever), but even that seems to be a little on the slow side if a lot of drawing gets done.<br><br>So, are Pixmaps by best bet, here? One problem is that the drawing instructions can call for the use of a transparent color. I haven't used BlitzMax much, lately, but isn't that a no-go with Pixmaps? Can I gain any speed by breaking the drawing area into multiple pixmaps and only redrawing "dirty" pixmaps each frame? If all the pixmaps become dirty at once, or one right after the other, will I be facing a big speed penalty if I need to draw and show several pixmaps at once? Finally, the drawing instructions can call for shifting or scrolling of the tiles, where pixels shifted off one side appear on the other. This is pretty easy (and quick enough) with regular images and a DrawImageRect() function, but how should I approach the problem when using Pixmaps?<br><br>Thanks,<br>SpaceAce <br><br></td></tr></table><br>
<a name="911961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suggest creating an image for each tile, then using LockImage and UnlockImage to make them as pixmaps. You can then do scrolling and whatever very easily using DrawImage. <br><br></td></tr></table><br>
<a name="912028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceAce</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting, I considered that but I thought all the locking and unlocking would be slow. Thanks for the suggestion, I'll play around with it and see what I come up with.<br><br>In the meantime, I am open to more suggestions.<br><br>SpaceAce <br><br></td></tr></table><br>
<a name="912044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will be slow, but you should only need to do it once, when you load the image. <br><br></td></tr></table><br>
<a name="912052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There shouldn't be a problem with the transparency as the pixmap format supports an alpha channel (PF_RGBA8888 or PF_BGRA8888). <br><br></td></tr></table><br>
<a name="912092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SpaceAce</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Marx,<br>  I realized that after I typed the original post. I think I was confused by a problem I remember having with MaxGUI, involving transparency and pixmaps.<br><br>SpaceAce <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
