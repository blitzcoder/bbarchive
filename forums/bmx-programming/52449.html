<!DOCTYPE html><html lang="en" ><head ><title >Problem with 2d Terrain Rendere</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problem with 2d Terrain Rendere</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Problem with 2d Terrain Rendere</a><br><br>
<a name="585483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a small problem with a 2d terrain Creator I'm currently writing. <br><br>Here is a pic of the problem :<br><br><img src="http://i2.photobucket.com/albums/y48/klepto2/Test.png"><br><br>And here is a small exe to play with:<br><br><a href="http://www.blitz-pasting.net/index.php?content=bp_showupload&amp;id=559" target="_blank">http://www.blitz-pasting.net/index.php?content=bp_showupload&amp;id=559</a><br><br>Any ideas how to get rid of the wrong coloerd areas?<br><br>I have tried to get rid of this by check every Pixel and their Neibours if their is the right Color but that doesn't work and currently I'm out of ideas what i could try.<br><br>Thx. <br><br></td></tr></table><br>
<a name="585502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's very little information to try to help, but well, why don't you try to draw the borders, then fill in the space? <br><br></td></tr></table><br>
<a name="585553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am guessing that you are using a `scanline` fill system where you fill one column at a time from left to right? I only say that because it looks like the kind of error that you get when you try to draw a filled polygon with a scanline technique, usually horizontally, where the polygon has an `edge` where the defining pixels will start, continue, and then stop, without having any gap inbetween to be filled. Your routine will think that as soon as it gets into an open gap area, that is what has to be filled, rather than realizing that this is a `special case` and has to be handled differently.<br><br>It's also apparently related to the presence of the green parts because the error is occuring only where there is some green to be drawn but no yellow, for that column.<br><br>You see, you probably have an algorithm which says that you search for the edge of a piece of land starting at the top of the screen, when you find some land, draw a few pixels of green,  then start drawing yellow pixels until you hit another edge of landscape, draw some more green, then draw empty until you find more landscape.<br><br>The problem is happening only on those parts of the landscape where the green is followed by an empty area but it's an area that shouldn't be filled.<br><br>I am guessing therefore that you first of all draw the edges of the landscape with your curve drawing, and THEN you try to fill it. That will make it harder for you and produce this kind of result - you should Google for scanline fill algorithms or look on these forums, it's been discussed before.<br><br>Otherwise, a better solution is if you can be calculating where the edges of the landscape are at the same time as filling it, so that you have the extra `information` on hand to know when you are at one of those special cases, where exactly things should be drawn and when an area has gaps in it.<br><br>You just need to solve the case where you have pixels defining the edge of the landscape, but they're on such an angle that they aren't followed by yellow space before the land ends again. ... so you've got a run of several edge pixels but no gap in the middle. It's just confusing your rendering algorithm. <br><br></td></tr></table><br>
<a name="585606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much, AngelDaniel.<br><br>I have tried it from Up and Down, so I know why these Columns comes, but I hadn't an Idea on how to solve it. Many thanks to show me the right way. <br><br>I'm triing out now. <br><br></td></tr></table><br>
<a name="585818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Certainly.<br><br>If you wanted to have things simplified, or to make sure that the thickness of the green line is consistent at all angles ... instead of drawing several vertical pixels, draw a small circle. You could perhaps draw and fill the yellow landscape in its entirity, first, then go back on a second `pass` and draw circles whenever you encounter an edge. <br><br></td></tr></table><br>
<a name="585880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Solved, I have now used a non - recursive Flood-Fill Function, that does the job very well. I will post it in the Codearchives as soon as possible.<br><br>Thx again .<br><br>[edit]<br>So here is the Flood Fill Function:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1509" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1509</a> <br><br></td></tr></table><br>
<a name="585908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferminho</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good you solved it, thanks for sharing the floodfill! <br><br></td></tr></table><br>
<a name="586068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also instead of doing a floodfill you could just create your own polygons which OpenGL or whatever will automatically fill for you - which could also be textured. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
