<!DOCTYPE html><html lang="en" ><head ><title >2D collisions, passing through</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D collisions, passing through</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >2D collisions, passing through</a><br><br>
<a name="847880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've done a search but with no results so I'll start a new topic on it, has anyone solved the fast moving objects passing through another object problem, as in if it's moving at 5 pixels per loop it may skip straight through another object.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="847884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no solution for that in pixel perfect collision other than doing swept collision (in between collision checks on fast movement).<br><br>Only polygon collisions can "easily" be fixed in that scenario. <br><br></td></tr></table><br>
<a name="847889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ofcorse there is. i also applied this in my RPG. WHEREVER, at somepoint, you move the object. It is here where you instead of appling 5px, you run a loop from 1 to 5. In which you keep checking for collisions. or am i missing something? it works for me. <br><br></td></tr></table><br>
<a name="847890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which is what Dream said :-)<br><br>Of course, you only want to use swept collision detection on the bare minimum of your objects given that it has to do much more work (and hence slower!). Things like bullets, since they are small and fast, are prime candidates. But generally, anything that moves faster in one cycle than it is large. ie. the number of pixel movement is greater than the size of that object in pixels. <br><br></td></tr></table><br>
<a name="847898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a slight difference between checking the moment every 1 pixel and doing a swept polygon collision. A swept collision means you have a very smooth and possibly curved path that the object will move through and you turn that path into a polygon, like a bendy tube, and then you test against the tube. That's different to just testing every 1 pixel of movement as you may have less overall tests to do.<br><br>Another solution is to use fixed rate timing logic and increase your hz rate so that you are checking all objects with a finer resolution.<br><br>I actually do like the idea of checking further-moving objects with more detail dynamically, though. <br><br></td></tr></table><br>
<a name="847930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The simplest would be storing a factor in your "sprite" class that defines how complex it is which directly influences how many pixels it can maximally move without inbetween collision test. <br><br></td></tr></table><br>
<a name="848009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never let your sprites move that large at a time. Seriously, limit the maximum distance a sprite can move. Also your bullets should never move any great distance than they are wide. A 1 pixel width bullet should never move 2 pixels for instance. You need a faster moving bullet, make a wider bullet. <br><br></td></tr></table><br>
<a name="848180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Another solution is to use fixed rate timing logic and increase your hz rate so that you are checking all objects with a finer resolution.<br> <br></div><br><br>One common way of implementing this is to pass a float to your update function so you can set the size of the step it should take.  Then loop through as many of those as you need to complete one full step.  <br><br>something like:<br><br><pre class=code>
Type Tgame Extends TList
Method update(timestep) 
	Local n:Int
	While n&lt;1
		For Local t:Tthing = Each in Self
			thing.move(thing.angel, thing.speed * timestep)
		Next
	Wend
EndMethod
EndType

While Not AppTerminate() 
	game.update(.2)
Wend
</pre><br><br>there is a slightly more complex version of this where it takes into account the frame rate when calculating the number of loops to update through which keeps the update speed steady when the frame rate drops.  you can read about here <a href="http://www.gaffer.org/game-physics/fix-your-timestep/" target="_blank">http://www.gaffer.org/game-physics/fix-your-timestep/</a> <br><br></td></tr></table><br>
<a name="848191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vilu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> A method I'm planning to use in my current 2d project is a kind of a mixture of swept collision detection and pixel perfect collision detection with sprites. <br><br>A fast preliminary check is made by imagining two (or more, depending on the width of the moving object) lines between the current and last known coordinates of the object, and checking if any of those lines intersect a circle (or rectangle) representing the object we are checking collisions against. If they do, we'll do a pixel perfect collision check in the intersecting area.<br><br>That way I can minimize the amount of slow pixel perfect checks using a fast line-to-circle or line-to-rectangle approximation method.<br><br>This trick is still sitting unimplemented on the drawing board, so I'm not yet 100% sure if it'll actually work. ;) <br><br></td></tr></table><br>
<a name="848197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Another solution is to use fixed rate timing logic and increase your hz rate so that you are checking all objects with a finer resolution. <br></div>I do this. <br><br></td></tr></table><br>
<a name="848200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vilu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would too if my logic calculations wouldn't take more time than rendering. There's a complex physics simulation under the hood that requires some out-of-the-box thinking. <br><br></td></tr></table><br>
<a name="848215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I would too if my logic calculations wouldn't take more time than rendering." Yikes, that is bad. I would take a serious look at my logic requirements/needs in that scenario. <br><br></td></tr></table><br>
<a name="848220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vilu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the requirements come from the fact that the game is a newtonian space flight simulation with all the bodies gravitationally bound to each other, including a few hundred AI pilots tracked across the entire universe. This is all running on top of a dynamic supply/demand -based economics simulation for more than 500 worlds. The intention is to do an immersive living universe, so the routines will consume CPU cycles for sure.<br><br>As a side note, at the moment I'm doing development with an older 1.5GHz Pentium M laptop, which will not be the kind of hardware the target audience is likely to play the game on. <br><br></td></tr></table><br>
<a name="848224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The intention is to do an immersive living universe, so the routines will consume CPU cycles for sure. <br></div><br>Then don't use fixed rate logic with a very high frame rate. It's a very brute-force solution to your problem. Your problem definitely sounds like something which wants swept collisions, or possibly even a third party physics/collision engine which already does this. <br><br></td></tr></table><br>
<a name="848240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vilu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let the thread hijacking continue... ;)<br><br><div class="quote"> Then don't use fixed rate logic with a very high frame rate. It's a very brute-force solution to your problem. <br></div><br>I figured that much. I'm still sticking with a simple delta timer with a capped frame rate.<br><br><div class="quote"> Your problem definitely sounds like something which wants swept collisions, or possibly even a third party physics/collision engine which already does this. <br></div><br>Unfortunately commercial 3rd party engines are out of the question, as my game will be free and is open source. Besides, the engine is pretty much finished already and I think swept collision detection will not be a problem either. <br><br></td></tr></table><br>
<a name="848372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Chipmunk physics module?<br><br>Simplest thing would be decouple rendering and logic, that gives you more freedom on the collision end or the whole "physics" end if you let it tick on a different frequency than input handling, rendering etc <br><br></td></tr></table><br>
<a name="848401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vilu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I keep forgetting that most of the developers here are aiming for commercial market and prefer rapid application development over do-it-yourself mentality. I'm doing this just for kicks and think game projects as learning experiences. Nothing beats the joy of real achievement when you put small pieces together yourself instead of using ready-made building blocks. Implementing advanced rotational kinetic simulation using only my old physics books as reference felt really good compared to few simple cuts &amp; pastes.<br><br><br><div class="quote"> Simplest thing would be decouple rendering and logic, that gives you more freedom on the collision end or the whole "physics" end if you let it tick on a different frequency than input handling, rendering etc <br></div><br>I've been thinking a lot about using a fixed logic timestep and visual tweening, but so far have opted against it because the logic part is so heavy on the CPU resouces. I'm implementing a time slicing method for some heavy background calculations which - at least in my mind - shouts for a dt for simplicity. <br><br>I know the physics will behave a bit differently depending on the FPS, but in a single player game it's really not a big deal. <br><br></td></tr></table><br>
<a name="848777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>few simple cuts &amp; pastes.<br> <br></div><br><br>oh if only this were the case..<br><br>hats off to you for rolling from scratch though.  I got about 1/3 of the way through a physics engine when I realized how long it would take to actually get to the place where I wanted to be - making games.  One thing Ive learned though - it's a lot easier to understand your own code than someone else's. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
