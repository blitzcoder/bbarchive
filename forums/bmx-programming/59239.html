<!DOCTYPE html><html lang="en" ><head ><title >Video Memory Paging Questions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Video Memory Paging Questions</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Video Memory Paging Questions</a><br><br>
<a name="659874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Please could you clarify some misconceptions I may have?<br><br>* Blitzmax keeps a copy of all textures (images) in system ram as pixmaps<br><br>* Blitzmax sends the texture to the video card when it is required so an 8 meg video card would simply discard textures it does not render and page the ones in it does render?<br><br>* Images are loaded with a video ram flag so they prefer to be in video ram where possible?<br><br>* Images not being drawn can be flushed out of video ram to make room for new images to be drawn, and if this is the case, I can load 100 megs of textures and provided I am drawing less than 8 meg of textures, it will be smooth on the 8 meg card?<br><br>The last question is the most important one for me, thanks! <br><br></td></tr></table><br>
<a name="659934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenGL too, keeps a system memory copy on top of that, if it's so ;) <br><br></td></tr></table><br>
<a name="659936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) True<br><br>2) Things like that are handled through drivers and hardware, not the software. But yes, thats how it should work.<br><br>3) No. Its commented out in DX for example. If you try to add it, it will end with many MAVs.<br>OpenGL has no such flagging (the program has to manage that) and on DX side, its better in most cases to let DX manage where the texture is.<br><br>4) No it will not be smooth as 8meg cards most likely, as those cards have a far too low bandwidth to send all those data up again and again. As well, those systems will most likely not have 100mb free ram for your textures as well and when they need to go to conventional ram, you could load them from disk nearly as fast as well.<br>For such systems, creating lower res texture versions (by hijacking BMs own mipmapping code) on startup would definitely be a good idea. <br><br></td></tr></table><br>
<a name="659940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Thank you for your reply, the last question was more of a what if question<br><br>I just wanted to know if I load all the textures I need in my game at startup, they will be intelligently paged to and from the card automatically? <br><br></td></tr></table><br>
<a name="659948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Theoretically yes.<br>Practically such system that have that less VRAM will most likely not be able to hold the textures in SystemRAM (they exist twice so they need 200MB RAM) so I wouldn't try it ... <br><br></td></tr></table><br>
<a name="660057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzMax doesn't necessarily KEEP copies of your images as pixmaps. When you load images from an image file it has to put it into a pixmap first, then it uploads it into an image, then it gets rid of the pixmap.<br><br>If you want to you can load into a pixmap yourself and then convert the pixmap into an image - which means, taking the pixmap data and placing a copy of it in video ram as an image, so then you have two copies.<br><br>Blitzmax does not manage when the textures are kept in video ram or when they get spooled out to main memory or anything else. That is handled by the OpenGL driver or probably by DirectX also. In OpenGL, which requires the images be in video ram for it to work on them, will probably keep the `most used` or `most recently used` images in video ram and put the rest out to main memory if there is no enough vram to hold them all. Then when you use an image, and it's not in video memory, it will spool it back in from main memory and probably swap something else out. That's all managed by the OpenGL driver, for example, not by blitzmax. In OpenGL you can prioritize certain textures or say that some should remain resident in video memory and not be spooled out, but that's not something that I think blitzmax makes use of it addresses or gives you commands for. You'd have to do your own OpenGl programming. No idea about dx.<br><br>There is a `prioritize this and keep it in video ram is possible` thing in OpenGL but I don't think max makes use of it at all. I think it just leaves it up to the driver to determing where it keeps the data that it works on.<br><br>In order for OpenGL to work on an image or use it as a texture it HAS to be in video ram, or at least has to have been uploaded as a texture/image and spooled off to memory somehow - but all within OpenGL's realm of control. Max does not manage whether or not to transfer pixmaps to video ram based on ram availability or anything like that. You either have a pixmap, or an image, there is no relationship between them. Images are in video ram, pixmaps are in main memory.<br><br>As to your last question I think you can just load 100 megs worth and the driver will sort out where to put the various texture data. Then if you use certain textures I presume those will be kept in video ram and others will be shuffled off elsewhere. You'd be better off looking at the Opengl/dx documentation/manuals to be sure of how it is going to do it. If you want CONTROL over that, to prioritize certain textures, then you need to get into doing your own dx/gl programming.<br><br>I would hazard a guess that if you only have 8 megs video ram, (not forgetting some of that is taken up with your display and the backbuffer), and you only used a small range of textures, they would just stay in video ram and others would be shuffled off to main memory by the driver. You could just test it and see. If it gets horrendous slowdown you know it's using textures that are spooled to memory rather than in video ram. <br><br></td></tr></table><br>
<a name="660073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not do this: Have 8 textures/images/ whatever they are, in systemRAM. Keep them there and have everything else loaded in. When you wish to load a new texture/image in, copy the texture/image over the one in VRAM. It would be one way to override dx's system of swapping textures, so you only swap when you need to.<br><br>I don't know the real practicalities of this though. Copyrect in blitz3d was fairly quick at doing this. You could even do it in smaller chunks i suppose.<br><br>EDIT[ sorry the above was went to mean 8 meg of texture/image. Why not set a limit of textures/aimges, based on the 8 MB divided by the max-size of texture/image.] <br><br></td></tr></table><br>
<a name="660678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenGL's internal texture manager actually does a fine job at this. It usually runs quite smooth, even on lowmem cards :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
