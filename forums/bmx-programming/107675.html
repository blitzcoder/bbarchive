<!DOCTYPE html><html lang="en" ><head ><title >Sound + channel management</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sound + channel management</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Sound + channel management</a><br><br>
<a name="1334706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'd like to have several dozens up to maybe a few hundred of enemies on screen at any given time. What would be the standard/best way to manage their sounds (attacking, getting hit, dying etc)?<br><br>Would you give each enemy its own channel, or even make one enemy able to make more than 1 sound simultaneously, or have a channel per each enemy type, or per each type of sound... I have no experience with this.<br>What would be common to do here so there's a balance between the "illusion of many enemies" and "just a lot of noise"?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="1334731"></a>

<a name="1334734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe have a look <a href="/posts.php?topic=104066" target="_blank">at this thread</a>.<br><br><br>On a request posted some time before that thread I created this:<br><a href="https://github.com/GWRon/Dig/blob/master/base.sfx.channelpool.bmx" target="_blank">https://github.com/GWRon/Dig/blob/master/base.sfx.channelpool.bmx</a><br>sample:<br><a href="https://github.com/GWRon/Dig/blob/master/samples/channelpool/channelpool.bmx" target="_blank">https://github.com/GWRon/Dig/blob/master/samples/channelpool/channelpool.bmx</a><br><br>The idea is to have a pool of channel objects which you can fetch by "keys".<br>For things like "music" or "speech over"-effects you use "protected channels". All other channels could get reused if a limit is reached.<br><br>So you could use these protected channels for all the important stuff:<br>- background music<br>- alert sounds ("you are under attack")<br>- voices of a selected unit on getting a new command ("on your command, sir!", "as you wish")<br>- gui clicks<br><br>and use x-y channels for all the fight-noises (swords crashing, trees falling after lumber jack did the last hit).<br><br><br><br><br>The approach to have 1 channel per enemy wont work if it can get attacked, play attack sounds - and then they have to play a voice when getting user-selected.<br><br>But maybe use a mix of it - special channels for "active unit reaction sounds" + an unit-individual channel for effects (attack sounds, die sound ...).<br><br><br>With FreeAudio the mixing of the channel is done in software, so there is no limit except "CPU+RAM" (I think so - but one better has a look at the module's source). Dunno how it is done with OpenAL and other engines.<br>So a "pool" might help.<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1334777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the example!<br><br>While it doesn't do what I was looking for exactly, it did give me a new idea about my plan of attack: for the not-so-important sounds I'll create a list/array of channels, and iterate through them to find a free one. If no free channel exists, the sound just won't get played.<br><br>This way I can easily limit or enlarge the number of sounds playing simultaneously. <br><br></td></tr></table><br>
<a name="1334780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using a channel pool you could give channels a "priority". So the lower the priority, the more likely it gets chosen for a "reuse" (stopping the old sound, playing a new one).<br><br>It also depends on the "volume" of a sound. So a up-to-not-noticeable sound of some birds chirping in the wood (with 10 different birds chirping on 10 different channels) could get stopped without "disturbing" the user.<br><br>Not playing a sound seems to be better (as no sound gets stopped out of the sudden) but you then need - what you already indirectly proposed - an "important sound" list.<br><br>Also do not forget about looping sounds (fight sounds, background noise) - they will be "active" the whole time (so you might end up not having a "free channel").<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1334783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cocopino</td><td align="right"><font class=tiny>(Posted 2017)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I already had some reserved separate channels like BGM, which waits until the song is done to then start another (or restart the same, as a loop). And a "GUI channel" that just waits for input and indeed will cut off a previous sound, but no other (non-gui) sounds will ever be played through that channel.<br><br>But some audio just sounds weird when suddenly stopped. I'll see if I run into a "free channel problem" before trying to tackle it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
