<!DOCTYPE html><html lang="en" ><head ><title >object VS unknown type</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >object VS unknown type</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >object VS unknown type</a><br><br>
<a name="506389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KamaShin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damn, I'm about to explode:<br>what's wrong with the following code? :<br>In my module:<br><pre class=code>Function Append(t:Object[] Var,o:Object)
	Local size:Int = Len(t)
	
	t = t[..size+1]
	t[size] = o
End Function</pre><br>In my TestMyModuleFile:<br><pre class=code>Type MyType
	Field s:String
End Type

Global t:MyType[]
Global m:MyType

Print "Append firsttry:"+Chr(13)
m = New MyType
m.s = "firsttry"
t = Append(t,m)</pre><br><br>I just tried making a general Append procedure that receive an array that can be modified (var) and add it something of the same type... The compiler compiles my mod, no prob here, but my test returns an error like:<br>"Unable to convert from MyType Array to Object Array Var"<br><br>How could I make this fu..... function that is REALLY beginning to piss me off?????<br>(KamaShin on a rampage, ready to kill everything that moves) <br><br></td></tr></table><br>
<a name="506400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can remove the Var specifier from the Append function since objects and arrays are always passed by reference. <br><br></td></tr></table><br>
<a name="506409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KamaShin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm yep I ve tested that but then the Append function wouldn't do what it's supposed to (though indeed without the "var" everything compiles fine)... the array though doesn't seem to be modified the slightest... <br><br></td></tr></table><br>
<a name="506468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>That really should work.<br><br>I'll sort this out soon, but in the meantime you could just pass the modified array back, eg:<br><br><div class="quote"> <br>Function Append:Object[]( t:Object[],o:Object )<br>	Local size:Int = Len(t)<br>	t=t[..size+1]<br>	t[size] = o<br>	Return t<br>End Function<br><br>Type MyType<br>        Field s:String<br>End Type<br><br>Global t:MyType[]<br>Global m:MyType<br><br>Print "Append firsttry:"+Chr(13)<br>m = New MyType<br>m.s = "firsttry"<br>t = MyType[]( Append(t,m) )  'have to convert returned Object[] to MyType[].<br><br>Print t[0].s<br> <br></div> <br><br></td></tr></table><br>
<a name="506556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KamaShin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> YEAAAAAYYY... it works... It's a bit annoying to have to write MyType[]( OneOfTheFunctions) but at least it work... I ll use that while waiting for you to fix the fact that an array isn't modified when passed as argument...<br>Thanks a lot fo the answer :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
