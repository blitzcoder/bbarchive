<!DOCTYPE html><html lang="en" ><head ><title >Png-Alphachannel does not work.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Png-Alphachannel does not work.</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Png-Alphachannel does not work.</a><br><br>
<a name="565997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DocFritz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I don't know, why, but all my Png's, I save with Photoshop, won't work in Blitzmax. They use the Alpha-Channel for transparency, of course. Here is an Example:<br><img src="http://www.fetzenet.de/hammer.png"><br><br>Well, the strange thing is, that it isn't displayed correct when rotated or drawn at float-positions. Take a look at this:<br><br><br>Graphics 800, 600, 0<br><br>test=LoadImage("hammer.png")<br>SetBlend ALPHABLEND<br>MidHandleImage test<br><br>While Not KeyHit(KEY_ESCAPE)<br>        Cls<br>       <br>        angle:+1<br>        SetRotation angle<br>        DrawImage test, 100, 100<br>       <br>        Flip<br>Wend <br><br><br><br>Why the hell doesn't the Alpha-Channel work properly? It's a regular, Non-Interlanced Image, I saved with photoshop, there shouldn't be any problem. <br><br></td></tr></table><br>
<a name="566005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this isn't what you want to hear, but it works perfectly here. Your example, your image, no problem.<br><br>What kind of graphics card / OS / driver combination do you have? <br><br></td></tr></table><br>
<a name="566013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DocFritz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ....don't you see the white border? o_O<br><br>Nvidea Geforce 6800 GT, newest official Driver, Windows XP SP2 <br><br></td></tr></table><br>
<a name="566025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope - works fine here.  You could try reverting to a previous driver (newer ones are not always the best) and perhaps adjusting some driver options in Windows. <br><br></td></tr></table><br>
<a name="566027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your test works fine on my XP SP2, Radeon 9600 Pro PC: no white area, just the ship.  I've been using alpha-transparent PNGs in my current Max game, too, and they all work.<br><br>I also tried your test on my Mac and it works fine with its GeForce4 MX. <br><br></td></tr></table><br>
<a name="566029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve Elliott</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I've been using alpha-transparent PNGs in my current Max game, too, and they all work.<br> <br></div><br><br>Same here. <br><br></td></tr></table><br>
<a name="566033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DocFritz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm.... I'll report this as a bug since we don't know, if it's a Nvidia- or a BlitzMax-Problem. Thanks for testing. <br><br></td></tr></table><br>
<a name="566036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ....don't you see the white border? o_O <br></div>No. It looks exactly the same as the image you posted in the thread (except rotating, obviously). In Firefox, as I'm aware IE doesn't do PNG (particularly not transparent ones) too well.<br><br><div class="quote"> You could try reverting to a previous driver (newer ones are not always the best) <br></div>Or in the case of nVidia, newest drivers are almost always the worst. I recommend you get the second latest WHQL certified drivers.<br><br>Still don't regret getting an ATi this time around, sure it doesn't have shader model 3, but at least alpha channel transparency actually works. *Sigh*<br><br><div class="quote"> I've been using alpha-transparent PNGs in my current Max game, too, and they all work. <br></div>Same here. Much better than a single color mask, soft edges are SO sexy! :o&gt;<br><br>Alernatively you could try switching to the OpenGL renderer, like so:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">SetGraphicsDriver GLMax2DDriver()
Graphics 800, 600, 0

test=LoadImage("hammer.png")
SetBlend ALPHABLEND
MidHandleImage test

While Not KeyHit(KEY_ESCAPE)
Cls

angle:+1
SetRotation angle
DrawImage test, 100, 100

Flip
Wend</textarea><div class="quote"> I'll report this as a bug since we don't know, if it's a Nvidia- or a BlitzMax-Problem. <br></div>Well it could be argued that the fact that you're the only one having this issue, narrows down the likelyhood of it being a BlitzMAX bug. I'm sure someone with a 6K8 will be along shortly to tell you which driver actually works. <br><br></td></tr></table><br>
<a name="566037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mr.keks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've also got a white border. But I can solve the problem by resaving the image with thegimp2.0... <br><br></td></tr></table><br>
<a name="566039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DocFritz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... someone with a Geforce 6800GT? Would be nice to hear, if it works. <br><br></td></tr></table><br>
<a name="566042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mr.keks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I can't fix the file again ^^. lol. Whatever.<br><br>P.S. I've got a GeforceFX 5700.. <br><br></td></tr></table><br>
<a name="566062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's neither a BMax or an Nvidia problem.<br><br>It's because Photoshop makes transparent pixels white when it exports them. This doesn't normally matter as they're, well, transparent. When such images are filtered, however, the edge pixels are averaged with the white (transparent) pixels and you get the ghostly white glow.<br><br>Try using this...<br><img src="http://xs45.xs.to/pics/05362/hammer_cnvt.png"> <br><br></td></tr></table><br>
<a name="566066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DocFritz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> great, it works =)<br><br>How did you save it? I tried with Gimp some hours ago, same problem. <br><br></td></tr></table><br>
<a name="566071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I use Fireworks - it never does that, but I have exported from Photoshop Elements and kept the transparency so it should be possible.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="566077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you're saving from The GIMP, make sure that 'Save background colour' and 'Save colour values from transparent pixels' are <b>unchecked</b> in the PNG save dialogue.<br><br>Funnily enough, I've got a half written tool that'll scan a directory tree and convert any PNGs it comes across. I've been awaiting MaxGUI so I can give it a decent front end. <br><br></td></tr></table><br>
<a name="566102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jay Kyburz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> convert any PNG's to what?<br><br>I've been using tga's because of this problem. (stupid photoshop) <br><br></td></tr></table><br>
<a name="566104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> From Photoshop save as... a copy (not in layers) as a .png and ensure if you have a white layer at the bottom of your layers, turn it off.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="566114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> convert any PNG's to what? <br></div>To PNGs, of course. ;o)<br><br>Here's a simplified version, it'll only convert (maybe 'convert' is the wrong word to use) single images and it appends '_cnvt' onto the output...<br><br><a href="http://homepage.ntlworld.com/mollymole/storage/DeFringe.exe" target="_blank">DeFringe.exe</a> ~75KB<br><br><br>@IPete2 - That's how I save PNGs anyway and it still produces the fringe I'm afraid, in version 6 at least. <br><br></td></tr></table><br>
<a name="566161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> TwoEyedPete,<br><br>Have you tried saving as a 32 bit *.Tga file?  Does that keep the transparency?<br><br>Also when you save the PSD and the PNG out and load them back in again how do they load back in?<br><br>IPete2. <br><br></td></tr></table><br>
<a name="566193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RiK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Also when you save the PSD and the PNG out and load them back in again how do they load back in? <br></div><br><br>I always save my Photoshop (.PSD) masters in a seperate location and work from them, just export what I need for the game and save them locally. <br><br></td></tr></table><br>
<a name="566226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ipete2, I think you're misunderstanding the problem. The problem isn't a lack of transparency on the exported PNGs.<br><br>Look at these grabs from B3D (click on the thumbnails)...<br><a href="http://xs45.xs.to/pics/05362/fringe.jpg" target="_blank"><img src="http://xs45.xs.to/pics/05362/fringe.jpg.xs.jpg"></a><br>Notice the white fringing around the inside edge of the reticule.<br><br><a href="http://xs45.xs.to/pics/05362/nofringe.jpg" target="_blank"><img src="http://xs45.xs.to/pics/05362/nofringe.jpg.xs.jpg"></a><br>This is how is should look.<br><br>The fringing is the problem and is happening because of Photoshop forcing transparent pixels to white, as described above. It's a well known problem and there isn't a way to fix it from within Photoshop. <br><br></td></tr></table><br>
<a name="566237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. ensure there is a clear layer at the bottom of your layers palette and that you can see the checker pattern. It pays to have the clear layer at the bottom on some versions of photoshop.<br><br>2. use save for web then choose png with transparency. Simple.<br><br>3. use png crush to reduce the size of your photoshop exported pngs as photoshop still makes a poor job of sizes. <br><br></td></tr></table><br>
<a name="566278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I think we got mixed up in the thread somehow.  I see you are talking about a white fringe appearing. I was still on the get it out of Photoshop with a transparent bgd - as per the thread title - sorry.<br><br>If I post 2 images for you tell me if this has the same problem or if the hard one is ok.<br><br>www.smartscreenuk.com/sight001_hard.png<br><br>www.smartscreenuk.com/sight001_soft.png<br><br><br>IPete2. <br><br></td></tr></table><br>
<a name="566289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Better still, try it for yourself...<br><br><a href="http://homepage.ntlworld.com/mollymole/storage/fringingexample.zip" target="_blank">fringingexample.zip</a> ~450KB<br><br>You should see something like this...<br><a href="http://xs45.xs.to/pics/05362/output.jpg" target="_blank"><img src="http://xs45.xs.to/pics/05362/output.jpg.xs.jpg"></a><br><br>It may not be as pronounced on ATI cards, but it's still there.<br><br>Try replacing 'img.png' with your own. Make the image about 64x64 and make sure it has a dark/black edge. <br><br></td></tr></table><br>
<a name="566291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> As you went to all the trouble of creating and uploading the images, I tried them anyway, with the following results...<br><br><a href="http://xs45.xs.to/pics/05362/ipetesoft.jpg" target="_blank"><img src="http://xs45.xs.to/pics/05362/ipetesoft.jpg.xs.jpg"></a><br>soft edge<br><br><a href="http://xs45.xs.to/pics/05362/ipetehard.jpg" target="_blank"><img src="http://xs45.xs.to/pics/05362/ipetehard.jpg.xs.jpg"></a><br>hard edge<br><br><br>[edit]The image server seems to be playing up today. Please be patient, the images will load eventually[/edit] <br><br></td></tr></table><br>
<a name="566306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You should see something like this... <br></div>I don't see anything at all in the "corrected texture" half. <br><br></td></tr></table><br>
<a name="566317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't worry about that too much, I'm copying directly from one texture to another which is a no go with some hardware. ;o)<br>It's just a quick demo to highlight the problem.<br><br>The important thing is whether you see the fringing in the left window or not.<br><br>Thanks for trying it, BTW. <br><br></td></tr></table><br>
<a name="743889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sonic</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting this problem and it's driving me mad!<br><br>Any solutions?  Can't seem to get defringe.exe, and I'm on OSX anyway.  Some of my photoshop png's appear to have black backgrounds when viewed in the Finder's preview, and they render ok, but others have white backgrounds and come up with the dreaded white halo.<br><br>Help! <br><br></td></tr></table><br>
<a name="743911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any solutions? <br></div>Save from the GIMP (or get a newer version of Photoshop). You can get it <a href="http://www.gimp.org/macintosh/" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
