<!DOCTYPE html><html lang="en" ><head ><title >Waitevent() error?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Waitevent() error?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Waitevent() error?</a><br><br>
<a name="849035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't explain it as I haven't changed anything in my app. It worked fine last time I ran it, and now when I try to run it I get an error with <b>waitevent()</b><br><br>"Unhandled Memory Exception Error"<br><br>What can cause this? (i'm using maxgui btw) <br><br></td></tr></table><br>
<a name="849037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> tried restart/reboot yet? <br><br></td></tr></table><br>
<a name="849038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yip. Did a microsoft update as well, which lead to a blue screen error on startup and had to fix a bunch of drivers rofl.<br><br>Recompiled the modules as well. <br><br></td></tr></table><br>
<a name="849063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you use any hook functions? If yes may check your parameters... <br><br></td></tr></table><br>
<a name="849098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> nope, no event hooks =( <br><br></td></tr></table><br>
<a name="849112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What does your code do?<br>That error normally can not happen with WaitEvent unless one of your memory blocks is burnt! <br><br></td></tr></table><br>
<a name="849195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Networking before waitevent call. After the waitevent call it draws some stars in event_gadgetpaint to a canvas.<br><br><div class="quote"> <br>unless one of your memory blocks is burnt!<br> <br></div><br><br>What exactly does that mean? Hardware issue? <br><br></td></tr></table><br>
<a name="849206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jsp</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> By chance, do you emit your own events to steer some actions inside the event loop?<br>For example an extra event_gadgetpaint to have another redraw when needed. <br><br></td></tr></table><br>
<a name="849209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm what do you mean by "networking before waitevent call"<br><br>There is nothing before it.<br><br>In an event driven mainloop everything is controlled through an event, there is nothing "outside" of it as the amount of times the stuff outside would be run is totally out of control as any mousemove would cause it to run again.<br><br>Networking normally would be done in TimerEvent for example.<br><br>And "After the waitevent call it draws some stars in event_gadgetpaint to a canvas" sounds quite strange as well.<br><br>Does your code structure look like:<br><pre class=code>
local id:int
Repeat
  id = waitevent()
  select id
    case EVENT_GADGETREPAINT
      ' Do the repaint stuff here
    
    case EVENT_TIMERTICK
      ' Do the networking here

    ...
  end select
Forever
</pre><br><br>and the event_gadgetrepaint has logically the regular routine to set the canvas to which it is rendered etc, otherwise you try to draw to NULL which will bomb <br><br></td></tr></table><br>
<a name="849314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, my code has networking checks above the waitevent since I can't produce an event for when data is available, nor do I want it only checked after a timertick is sent, but i've just tried some example files, and peoples submitted code on the forum and i'm getting error heaven with everything. I dont think this is a Blitz/code issue. And come to think about it; i've installed a couple compilers recently that also deal with mingw, which might make sense to cause some of these issues (different compiler versions?)<br><br>Will try a reinstall.<br><br><div class="quote"> <br>In an event driven mainloop everything is controlled through an event, there is nothing "outside" of it as the amount of times the stuff outside would be run is totally out of control as any mousemove would cause it to run again.<br> <br></div><br><br>That can also be useful for quite a few non-event based things that you want processed as often as possible while leaving the app responsive. In a couple of my bm tests i've used it successfully as a simple priority system. But I do understand what you're getting at with the event-based coding with redraw. It has never caused a problem with the networking above the waitevent though (at least I never had a problem until this issue came up). <br><br></td></tr></table><br>
<a name="849338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure you can have it responsive.<br>The question is why you would destruct a working and powerfull system done by timertick for something thats worthless? Reason is simple: networking has no 0ms response time, so checking it at 0.001 ms is totally worthless kiddie  style (same as "render as fast as you can" even thought the screen can't handle more than &lt;= 100 FPS, just at the cost of usefully used CPU time for AI and/or physics). But as you use events you definitely seem to be a few levels above the pure beginner level of programming, same is shown in your postings. But its your decision, its you who will most likely rewrite it at a later date to be on a usefull performance level. (this does not meant that tcp polling is bad. But then use sockets and a TCPConnect class that creates an event hook on generation and use the polling check to fire events for those connection objects so they can work on event base)<br><br>Would it be possible to show the gadget repaint part? Currently I would guess that you are mainly not setting a correct drawing target or messing with it (like having 2 canvas) so instead of repainting it your are killing the app.<br>MAVs, in 99.9% are directly related to media. Either graphical or sound <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
