<!DOCTYPE html><html lang="en" ><head ><title >Max IDE - Window Icon</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Max IDE - Window Icon</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Max IDE - Window Icon</a><br><br>
<a name="595882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> [EDIT] New guide here:<br><br><a href="http://homepage.ntlworld.com/config/max/appiconguide.htm" target="_blank">Adding icons to BlitzMax Win32 executables</a><br><br><br><br>I re-compiled the IDE with some of the tweaks available from Perty etc..<br>What I noticed to my suprise is the exe still retains it's program icon in both the exe file and the IDE window.<br><br>Anyone know how this occurs? I see the following in the source:<br><pre class=code>?win32
Import "maxicons.o"
Import "-luser32"
?</pre>Is this the 'magic' part which attaches the icons?<br>Anyone clued up on how I can create my own "icon.o" file? <br><br></td></tr></table><br>
<a name="595900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> it looks like it's using a precompiled resource file. <br><br></td></tr></table><br>
<a name="595901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the code I've got to get the icon from the exe (insert with reshacker) to be used by a window:<br><pre class=code>?Win32

Import BRL.MaxGUI
Import "-lshell32"

Extern "Win32"
	Function LoadIcon:Int(hWnd:Int, file$z, index:Int) = "ExtractIconA@12"
	Function SetClassLong:Int(hWnd:Int, nIndex:Int, dwNewLong:Int) = "SetClassLongA@12"
End Extern

?

Function Win32_WindowIconFromExe(Window:TGadget)
?Win32
	Local hWnd:Int = Query(Window, 1)
	Local icon:Int = LoadIcon(hWnd,AppFile,0)
	SetClassLong(hWnd,-14,icon)
?
End Function</pre><br>Is this not necessary with the .o file then? <br><br></td></tr></table><br>
<a name="595903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is this not necessary with the .o file then?  <br></div><br>MaxIDE certainly doesn't do that. <br><br></td></tr></table><br>
<a name="596064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Anyone clued up on how I can create my own "icon.o" file? <br></div>There is a resource compiler that comes with MinGW. If you have your own .ico files and a suitable .rc file it will generate the .o file for you. <br><br></td></tr></table><br>
<a name="596394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> FD,<br>Ok, I have got the following 2 files by mucking around with ResHack:<br><br><pre class=code>
&gt; file: resfile.rc

which contains this entry:
1 ICON "Icon_1.ico"

&gt; file: Icon_1.ico
the icon I want to import
</pre>Any chance of a quick tutorial detailing how I generate the *.o file? <br><br></td></tr></table><br>
<a name="596408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create a text file containing the following...<br>&lt;the resource name you want for the icon&gt; ICON &lt;full path of icon file (use forward slashes)&gt;<br><br>save this as resourcefile.rc file.<br><br>From the command console...<br>&lt;MinGW path&gt;\bin\windres -i &lt;full path&gt;/resourcefile.rc -o &lt;ouput path&gt;/mycoff.o<br><br>That should work, but you'll have to make sure there are no spaces in the filepaths. <br><br></td></tr></table><br>
<a name="596423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> YanCanCode,<br><br>It works.<br>Just had to strip out double-quotes and add in the full path to the icon in the *.rc file.<br><br>Great help. Thank you. <br><br></td></tr></table><br>
<a name="596434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops...Sorry, you have to use forward slashes in the file paths (in the .rc file too).<br><br>Oh, and you can use '1' as the resource name.<br><br>[edit]<br>Ahhh...Okay, glad you got it working.<br><br>(and corrected previous post)<br>[/edit] <br><br></td></tr></table><br>
<a name="596574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to set one window to one icon and another window to another, in the same app, but it never works properly - either they both get set to the same icon, or it's correct in the windows but wrong in the start bar and alt-tab bar, or there's no icons at all. Is this something that can be fixed or is it an inevitable consequence of how MaxGUI works, or what? <br><br></td></tr></table><br>
<a name="596613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, what denzilquixode said.<br><br>By the way, appreciate that these window icons don't/won't can't show up in other os's outside of windows, but I really thought we'd have some way of including icons for our own code directly within max.<br><br>Is this due out in an update? You can't really release a GUI app with a blank box for an icon, it would look amateurish. <br><br></td></tr></table><br>
<a name="599541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've managed to get a .o working so that I can have a 32x32 icon. But I don't know how to combine both the 32x32 and the 16x16 icons together in one icon group(like the blitzide has it set up). Any help would be great. <br><br></td></tr></table><br>
<a name="599547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use Microangelo, but I'm sure any similar icon editor will do the same. <br><br></td></tr></table><br>
<a name="599558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I'm sure there is a way of doing it in the .rc file. I don't mind using MinGW, reshacker, command prompt, and Irfanview to get the job done. <br><br>The BlitzIDE one has it set up so that there are 2 icons, both the 32x32 executable one (which I can do) and the 16x16 one. In reshacker they are both under seperate folders under 'Icons'. I can get this far by making my .rc file like so: <pre class=code>1 ICON C:/icons/fonteye.ico
2 ICON C:/icons/fonteyemini.ico</pre><br>But the BMX one also has one folder under 'Icon Groups' with one file that is a combination of the two different icons. This is the part I am having trouble with. When I use the .rc file above, it makes two different folders under 'Icon Groups' with two different files, rather than one icon group with one combination file. So I think it is just a question of putting the right stuff in my .rc file. I tried looking up .rc files but no luck. Anybody know?<br><br>Did that make sense or...?<br><br>I currently have one 32x32 .ico and one 16x16 .ico <br><br></td></tr></table><br>
<a name="599591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> A single .ico file can contain icons of varying colours depths and sizes.<br><br>There are a few free icon editors about (google for 'snidesoft') that will help you put the icons into one .ico file. <br><br></td></tr></table><br>
<a name="599768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah, ok, thanks. <br><br></td></tr></table><br>
<a name="600407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to be a bother, but I still can't get it to work. :(<br>I used SnIcon to make an icon with both the images combined, made it into a .o file, then tried it in blitz, but the 16x16 icon still didn't work(the 32x32 one did). Well, it did sorta work, because you see the little icon when the exe is displayed in list form in explorer. But I still can't see the icon in the title bar of my blitzGUI app. I compared both my .exe and the BlitzIDE .exe in ResHack:<br><img src="http://paulleduc.com/images/junk/reshack.jpg"><br>They are almost identical except for the actual names of the icons. Any ideas? <br><br></td></tr></table><br>
<a name="600448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You must use the same group name (101). <br><br></td></tr></table><br>
<a name="600496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Errmm... How do I do that? I tried putting it in the .rc file: <pre class=code>101 ICON C:/icons/icon.ico</pre> but it doesn't change a thing. <br><br></td></tr></table><br>
<a name="601345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone help here please, we can't get this working! <br><br></td></tr></table><br>
<a name="601792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >po</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> *bump* <br><br></td></tr></table><br>
<a name="636474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jay Kyburz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey, ive just beeing trying to do this for my app. Anybody found a nice neat way of setting the windows icons for the app. <br><br>Sounds like this would make a good mod for somebody. hint hint. <br><br></td></tr></table><br>
<a name="636562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this tutorial from Eikon <a href="http://www.2dgamecreators.com/blitzmax/resources#Adding_icons_to_BlitzMax_Win32" target="_blank"> Adding icons to BlitzMax Win32 executables</a> <br><br></td></tr></table><br>
<a name="636833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jay Kyburz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> thansk <br><br></td></tr></table><br>
<a name="638084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moogles</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> still didnt work. the one that did was a post which told me to edit line 49 of d3d7graphics.bmx and after that it all worked. Just so people know. :)<br><a href="http://blitzmax.com/Community/posts.php?topic=53816" target="_blank">http://blitzmax.com/Community/posts.php?topic=53816</a><br>Theres teh link. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
