<!DOCTYPE html><html lang="en" ><head ><title >Game Timing</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Game Timing</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Game Timing</a><br><br>
<a name="590058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The following article talks about time steping:<br><br><a href="http://www.gaffer.org/articles/Timestep.html" target="_blank">http://www.gaffer.org/articles/Timestep.html</a><br><br>Also, I noticed that many people prefer delta time.  However, I lot of people reference code by mark that I can't seem to find?  Anyone have the link to this post?<br><br>Also, for Delta Time do you multiple everything by the Delta Time or just the final result? <br><br></td></tr></table><br>
<a name="590061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> For Delta timing you multiply all movement my the delta time, that way it can pump out Max FPS but the movement (and logic?) will only tick along at the delta time. Say:<br><br>B3D Example:<br><pre class=code>
MoveEntity Player, 0, 0, 10 * DeltaTime
</pre><br><br>I think alot of the reference to Mark's timing is actually from the Mak Castle Demo in the Blitz3D Samples Folder.<br><br>Timing code:<br><pre class=code>
Const FPS=30
period=1000/FPS
time=MilliSecs()-period

While not keydown(001) ; Main Loop

Repeat
		elapsed=MilliSecs()-time
	Until elapsed

	;how many 'frames' have elapsed	
	ticks=elapsed/period
	
	;fractional remainder
	tween#=Float(elapsed Mod period)/Float(period)
	
	For k=1 To ticks
		time=time+period
		If k=ticks Then CaptureWorld
		
		UpdateGame()
		UpdateWorld
	Next
Renderworld tween#
</pre><br><br>Its pretty easy to follow. Hope it helps :) <br><br></td></tr></table><br>
<a name="590152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That deltatime example wastes a millisecond per frame, does it crash if elapsed = 0? <br><br></td></tr></table><br>
<a name="590155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats not deltatiming thats the rendertween code from the castle demo. But looking at it now I would guess it would end up giving a divide by zero error. I didnt bother to run it as I dont have my B3D copy at hand. <br><br></td></tr></table><br>
<a name="590157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh OK, actually elapsed isn't used on the end of a divide statement so it wouldn't divide by zero.  It's alright on the start of a divide statement as 0/10 = 0 for example. <br><br></td></tr></table><br>
<a name="590160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh I see, my mistake. One day I'll actually nuckle down and try to understand mathematical concepts :S <br><br></td></tr></table><br>
<a name="590196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This might help:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

' /  /  /  /  /  /  /  /  /  /  /  /  /  /  /  /

'		 D E L T A  T I M E

'------------------------------------------------------------------------
	Type Delta 
	'		
	'-----------------------------------------------------
	' This type is Fully global. Which means you'll always 
	' refere to it as Delta.Start() , Delta.Time(),
	' Delta.Update() 
	'
	' You shouldn't create instances of this type!
	' DeltaTime is same for all your objects!
	'
	Global DeltaTime!
	Global TimeDelay%
	
	'Run this once before your main loop
	'If you don't there will be a jump in deltatime
	Function Start()
		TimeDelay = MilliSecs()
	End Function
	
	'Everytime where you want to get the deltatime
	'call this: Delta.Time
	'You should multiply this to every place which 
	'adds to you position/speed/acceleration
	'
	' The basic rule is to add deltatime to all
	' things which gets added to every frame
	' Like Speed:+ 10*Delta.Time
	'
	' If you use the Vector Library simply use 
	' AddDelta() instead of Add()
	' And
	' AddDeltaNew() Instead of AddNew()
	
	Function Time!()
	
		Return DeltaTime!
	
	End Function
	
	'Put this once in your main loop
	'it calculates the current deltatime
	'depeding on your framerate or more exact
	'the time between each/the last frame.
	Function Update()
	'_____________________________________________________ 
	'Purpose: Calculates DeltaTime , put it in mainloop			
	'-----------------------------------------------------	
			DeltaTime = ( MilliSecs()- TimeDelay )*0.001
			TimeDelay  = MilliSecs()			
		
	EndFunction
		
End Type	' /  /  /  /  /  /  /  /  /  /  /  /  /  /  /  /
'----------------------------------------------------------------------------------------	
</textarea><br><br>I hope the comments are still valid. I like having a Delta Type, it really makes it cleaner. <br><br></td></tr></table><br>
<a name="590422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where do I apply the Delta Time multiplier:<br><br><br><pre class=code>
'Calculate the length of the Speed Vector
		Local SpeedVectorLength# = sqr(m_fSpeedX*m_fSpeedX + m_fSpeedY*m_fSpeedY)
		
		If SpeedVectorLength &gt; 0
			'Decrease Speed with Friction if we are moving
			m_fSpeedX:- (m_fSpeedX/SpeedVectorLength) * m_pTEngine.GetFriction() * TDelta.GetTime()
			m_fSpeedY:- (m_fSpeedY/SpeedVectorLength) * m_pTEngine.GetFriction() * TDelta.GetTime()
		Else
			m_fSpeedX=0
			m_fSpeedY=0
		EndIf
		
		Print TDelta.GetTime()
		
		If SpeedVectorLength &gt; m_pTEngine.GetMaximumVelocity()
			'If we are going beyond the speed barrier then reduce our speed
			'with the amount in which it surpases TopSpeed
			m_fSpeedX:+ (m_fSpeedX/SpeedVectorLength)*(m_pTEngine.GetMaximumVelocity() - SpeedVectorLength) * TDelta.GetTime()
			m_fSpeedY:+ (m_fSpeedY/SpeedVectorLength)*(m_pTEngine.GetMaximumVelocity() - SpeedVectorLength) * TDelta.GetTime()
		EndIf
		
		If SpeedVectorLength &gt; 0  
			m_fX:+ m_fSpeedX 
			m_fY:+ m_fSpeedY
		End If
</pre><br><br><pre class=code>
	Method IncreaseVelocity()
		'Create a Acceleration Vector and
		'add it to the Speed Vector
		m_fSpeedX:+ Cos(m_fAngle) * m_pTEngine.GetAcceleration() * TDelta.GetTime()
		m_fSpeedY:+ Sin(m_fAngle) * m_pTEngine.GetAcceleration()  * TDelta.GetTime()			
	End Method

</pre> <br><br></td></tr></table><br>
<a name="590442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That look about right <br><br></td></tr></table><br>
<a name="590446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It doesn't seem right?<br><br><pre class=code>
DefData 0.75, 200.0, 4.00     'fFriction, fMaximumVelocity, fAcceleration
</pre><br><br>My time is around .01 so I multiplied all the settings above by 10 but the top speed is to high and the friction doesn't seem right? <br><br></td></tr></table><br>
<a name="590498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I can see why people don't like delta time.  I changed my FPS from 85 to 30 and all the colision detection went nuts? <br><br></td></tr></table><br>
<a name="590511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You just need to set it up properly. It can be tricky but the outcome is well worth it. Basically anywhere where something is moved should be multiplied by the delta. Double check your code :) <br><br></td></tr></table><br>
<a name="590516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I also noticed that my program is locking with the delta and the framerate set to 30 fps.  I have a try and catch with a end but nothing seems to be happening?  <br><br>Anyway I can dubug the crash? <br><br></td></tr></table><br>
<a name="590743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't set the FPS to 30! With delta time you can as well have it at 200 or something..<br><br>I think that the point you have missed is that when you use delta time, your velocity will be measured in pixels per second. <br><br>For example,<br><br>Before you had:<br>Speed:+ 5<br>@60 FPS that would mean you add 300 to speed every second!<br>@75 FPS it would be 375. <br>@200 FPS it would be 1000!<br><br>If you have three people playing with these framerates they would all have a very different playing experience (if none at all). <br><br>With Delta time you do:<br>Speed:+ 5 * TDelta.GetTime()<br><br>That means you add 5 every second. See in the above example, that would refer to playing the game at 1 FPS, compared to your previous standard.<br><br>Speed:+ 5 * TDelta.GetTime() with 30FPS would mean that you add 5 every second.<br>Speed:+ 5 * TDelta.GetTime() with 75FPS would mean that you add 5 every second.<br>Speed:+ 5 * TDelta.GetTime() with 300FPS would mean that you add 5 every second.<br><br>In other words you have a FPS in-dependant game and your speed is measured in pixels/sec<br><br>If your screen is 600 wide and you want to travel it in 5 seconds you speed would be 600/5 = 120pixles/sec. (Quite slow)<br><br>You need to change your speeds to something like 200pixels/sec or 500pixels/sec.<br><br>This does not only apply to speed but to anything you would normally add:+ <br><br></td></tr></table><br>
<a name="590996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wave,<br><br>I uderstand the concept and what you provided was a good summary.  I only set the framerate at 30 so I could debug an issue that was occuring at a slow framerate.  <br><br>However, when I changed the framerate to 30 I discovered a possible bug is ImageCollide2 and of course a number of problems being caused by collision detection.<br><br>Here is a question:<br><br>How do you deal with object colision where the object bounce off one and another?  For example. if an object moves right four pixels and there is a collision you can move the object left 4 pixels.  However, if you throw delta time into the picture it now becomes a problem since the speed at collision may not be the same as the speed of the frame during the collision. <br><br></td></tr></table><br>
<a name="591033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fail to see the problem. <br><br>Imagine your ship traveling at 200pixels/sec. Boom, it hits a wall. Not good. We are now 34 pixels into the wall. This can't be allowed so we move 34 pixels back. The result is that we never pass through the wall - we slide against it.<br><br>If you would move us back 34*2 pixels instead you would bounce of the wall. When you bounce you also need to reverse your velocity. Same thing - we never passed through the wall, we bounced off it.<br><br><div class="quote">  the speed at collision may not be the same as the speed of the frame during the collision.  <br></div><br>What does the FPS has to do with our object's speed if you use delta time?<br><br>I guess I missunderstand you somehow. Unforunatly I'm going away over the weekend, back monday. I hope you solve it and perhaps someone else can help you til then, good luck! <br><br></td></tr></table><br>
<a name="591537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seem to fix the collision detection and everything is working fine with one exception.  There seems to be a difference in the rotation velocity when I set the game to 30 FPS and 85 FPS.  I must not have the delta time in the right place?<br><br>Have a look at the code and see if you have any advide:<br><br><pre class=code>

TurnSpeed:-TurnAcceleration * TDelta.GetTime()
		
'Limit TurnSpeed
If TurnSpeed &lt; -TurnMax TurnSpeed = -TurnMax

'Apply Friction To Rotation
If TurnSpeed &gt;  TurnFriction   
TurnSpeed:- TurnFriction * TDelta.GetTime() 
End If           
		
If TurnSpeed &lt; -TurnFriction
TurnSpeed:+ TurnFriction * TDelta.GetTime()
End If
		
'If Friction is Greater than Speed Then Stop
If TurnSpeed &lt; TurnFriction and TurnSpeed &gt; -TurnFriction TurnSpeed = 0
</pre><br><br>Thanks <br><br></td></tr></table><br>
<a name="591600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> your limits i.e. TurnMax and TurnFriction have to take the Deltatime into account, they can't be constant at different frame rates. <br><br></td></tr></table><br>
<a name="591660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I do that?  I tried? <br><br></td></tr></table><br>
<a name="592226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks correct to me. You can try to make a simpler demo of your game/engine and test only rotation, perhaps you have some other variable affecting the rotation that you haven't considered? <br><br>Can you post some runnable code/demo?<br><br><div class="quote"> your limits i.e. TurnMax and TurnFriction have to take the Deltatime into account, they can't be constant nomatter the current frame rate. <br></div> I can't agree. Max values and Friction Max/Min should be constant over framerates and measured in pixels/second. Ex your engine's topspeed is = 400 (pix/sec). No delta here. <br><br></td></tr></table><br>
<a name="592229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> when you do<br>TurnSpeed:-TurnAcceleration * TDelta.GetTime()<br><br>do the same for TurnFriction and other movement defining things "constants"<br><br>You do it after the &gt; check which is useless as TurnAceleration was already far to large because of the missing delta time correction. <br><br></td></tr></table><br>
<a name="592278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can TDelta.GetTime() ever return 1 or greater?  If so the line "TurnSpeed:- TurnFriction * TDelta.GetTime()" could reduce turnspeed to 0 or less in a single calc which is surely not the desired effect? <br><br></td></tr></table><br>
<a name="592567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this module :- <br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=49306" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=49306</a><br><br>Also has examples to limit the render speed. <br><br></td></tr></table><br>
<a name="592736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sean Doherty: A similar problem cropped up to this a while ago with someone implementing gravity, they found that it was different when running at different FPS and it shouldn't be.  Be interested to see your final solution and what the problem was. <br><br></td></tr></table><br>
<a name="592822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Everyone,<br><br>I am out of town this week and don't have access to my source code.  I try to post some code when I get home on Friday. <br><br></td></tr></table><br>
<a name="592984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Change this following line of code if you think the FPS is going to get lower than you set it. Example : If you set the FPS at 35 then change this to "2" then the FPS can go as low as 17.5 and things will run okay.<br><br>If Delta &gt; 1 Then Delta = 1 ' Delta should never be bigger than 1.<br> <br></div><br><br>Tim,<br><br>I don't understand the above line?  If this boundry is hit the game will be running at a different speed than intended? <br><br></td></tr></table><br>
<a name="593039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah thats old code sorry, delta can be bigger than 1 but you want to cap it at say 4 just in case you get a glitch and everything then flies off the screen at a million miles an hour. <br><br></td></tr></table><br>
<a name="595318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> The following url is a sample program that can be used to look at delta time:<br><br>www.FreelanceGames.com/Files/Spin.zip<br><br>Just change swap lines to go between 85 frames per second and 30 frames per second.<br><br><br><pre class=code>
'Graphics kScreenWidth,kScreenHeight,32, 85
Graphics kScreenWidth,kScreenHeight,32, 30
</pre><br><br>Generally, the 30 PFS prgram seems to spin the object faster.  When the object spins 270 degrees the time will be printed in the ide.<br><br>Thanks <br><br></td></tr></table><br>
<a name="595417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> marginally faster and I think I know why.<br><br>Did you notice that when the program started the object rotated quickly and then slowed down? that's because when you initialised delta time the very first couple of readings you get will be off the scale due to other things getting intialised.<br><br>I put this in the loop and all is fine :D<br><pre class=code>If pTDelta.DeltaTime &gt; 1 Then pTDelta.DeltaTime :- 1</pre> <br><br></td></tr></table><br>
<a name="595499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I just reliezed that there was a problem with the program.  The framerate was not being constranded by the Graphics command.  I modified the flip parameters and it is working now.<br><br>As you can see there is a hugh differenence in the rotation speed of 30 and 85.<br><br>www.FreelanceGames.com/Files/Spin.zip<br><br>Also, Tim I added you code to the main loop. <br><br></td></tr></table><br>
<a name="595507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually that code I posted is wrong.<br><pre class=code>If pTDelta.DeltaTime &gt; 4 Then pTDelta.DeltaTime = 4 'Just caps the stuff</pre><br><br>You must have some issues with your timing code. Did you try my delta code at all? <br><br></td></tr></table><br>
<a name="595513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I took at look at your code, I'm sorry I coudn't figure out the reason. Tough with rotaion_friction = 0 it works. Somehow when you add friction something goes wrong?! Try to set friction = 0 and see. Of course that is not a final solution but it might help you find out whats wrong. <br><br></td></tr></table><br>
<a name="595662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please test this for me:<br><br>www.FreelanceGames.com/Files/Spin.zip <br><br></td></tr></table><br>
<a name="607357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't seem to get Delta working.  When I added Wave's code, and put * Delta.Time() in front of things everything runs very very slow.  I must be missing something that sets the update frequency? <br><br></td></tr></table><br>
<a name="607359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why is Sean's Delta.Time (DeltaTime * 10 * 10) and Wave's is not? <br><br></td></tr></table><br>
<a name="607360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I do  * 10 * 10 it works fast but it doesn't seem to really be going by any framerate what-so-ever. <br><br></td></tr></table><br>
<a name="607361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok it is affected by the framerate.. I get it now, but do game timers need to be * Deltatime too? <br><br></td></tr></table><br>
<a name="607362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, but it depends what you are doing.  If you want something to happen every 10 seconds you do not need delta time.<br><br>PS: I never really found delta time to be that smooth.  In the end I went with "Fixed Variable Delta Time Stepping". <br><br></td></tr></table><br>
<a name="607363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I have a warp part that is totally screwed up.<br><br>At the beginning of a level WarpTimer goes up by 1 every refresh<br><br>when warptimer = 100 then it stops warping<br><br>when I did delta timing it totally screwed up the way it looks and it warps for a lot longer. <br><br></td></tr></table><br>
<a name="607365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, I have timed events but they're timed on how many refreshes occur. <br><br></td></tr></table><br>
<a name="607366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need delta time for that kind of timer,<br><br>warptimer :+ 1 * dDeltaTime<br>if warptimer &gt;= 100<br>   'do something<br>end if <br><br></td></tr></table><br>
<a name="607367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok so not<br><br>if warptierm &gt;=100*dDeltaTime ?? <br><br></td></tr></table><br>
<a name="607368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I think your good without delta time on the condition. <br><br></td></tr></table><br>
<a name="607369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function DoLevel1()
		CreationTimer:+1
		If CreationTimer &gt; CreateMarker+20
			CreateCounter:+1    'Increase Counter to know which enemies to make
			CreateMarker:+20    'Increase Marker by 10		
	
			If CreateCounter =&gt; 10 and CreateCounter &lt; 22 
				TEnemy.Create(32*(3+CreateSubCounter)+16,32*2,3,0,1)
	            CreateSubCounter:+1		
			EndIf
			If CreateCounter =60 CreateSubCounter = 0
			If CreateCounter =&gt; 60 and CreateCounter &lt; 72 
				TEnemy.Create(32*(3+CreateSubCounter)+16,32*3,4,0,1)
	            CreateSubCounter:+1		
			EndIf
			If CreateCounter &gt; 90 CreateSubCounter = 0
			If CreateCounter =&gt; 90 and CreateCounter &lt; 96
				TEnemy.Create(544-(32*(6+CreateSubCounter))+16,32,3,2,1)
	            CreateSubCounter:+1		
			EndIf
			If CreateCounter &gt; 122 Then CreatePhase = 5
    		
		End If
	
End Function
</pre><br><br>That is Count sensetive, but its NOT time sensetive, meaning its important the numbers are integers and not floats.  This creates the enemies and it also does use the creationtimer INT to determine when to create each batch so therefore would I need to delta-time it and if so how????? <br><br></td></tr></table><br>
<a name="607371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok BASICALLY<br><br>Once I add DELTATIMING into all the Movements, bullets, etc the other parts have to be TIME based and NOT Refresh based? <br><br></td></tr></table><br>
<a name="607372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes,<br><br>You need to add delta time to anywhere you use counters, acceleration, movement, friction. and more.  You do NOT need delta time if you have a timer.  For example, every 2 seconds you print "Hello World". <br><br></td></tr></table><br>
<a name="607373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delta time converts "flip" or "step" counters into Time based units, but the results are strange, because when the counter reaches 600 on a flip based method it is fast, but when I apply delta timing it is slow, which changes the way the game behaves. <br><br></td></tr></table><br>
<a name="607374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats why you multiply by 100 (10 *10) or what ever factor you need to make the game run at the correct game play speed.  Basically, if you were moving one pixel per update before, you still want to move 1 pixel per update.<br><br>So basically, you multiple your delta time by whatever it takes to get that close to one.  It will be different every update, but you want it close to 1 as possible most of the time. <br><br></td></tr></table><br>
<a name="607375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I make my game creation timner (which is based on flips) based on delta time and if it results in taking 10 seconds to create the level will it take 10 seconds on every computer? <br><br></td></tr></table><br>
<a name="607376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> And what about having objects follow a bezier curve?  How do you apply Delta Timing to that? <br><br></td></tr></table><br>
<a name="607377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am not sure what your asking but you can test it on you machine with the following changes:<br><br>Graphics kScreenWidth,kScreenHeight,24, 85<br>Graphics kScreenWidth,kScreenHeight,24, 60<br>Graphics kScreenWidth,kScreenHeight,24, 30<br>Graphics kScreenWidth,kScreenHeight,24, 12<br><br>Flip<br><br>By using different graphic modes and flip not bound to the VSync you agem will run at different speeds depending on which line you run when you create the graphics mode <br><br></td></tr></table><br>
<a name="607381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok now if I set it at 30 and the bullet doesnt move smoothly (because its at a low frame rate) is collision detection not going to work because I have it set "if bullet x is enemy x and bullet y is enemy y blow up enemy" now that idealism wont work with delta timing will it?  (because the jerkiness can cause the image to not be drawn near the enemy therefore x and y is different?) <br><br></td></tr></table><br>
<a name="607382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> The slower the framer ate the larger the delta time and therefore the larger the jump per update.   If the jump is to great your collision detection will fail because it will jump right over the object it was going to hit!  <br><br>Also, I just found it ws to jerky so I implemented "Fixed Variable Delta Time Stepping". <br><br></td></tr></table><br>
<a name="607384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, that sounds even harder than what I'm doing!!!  Please, tell me what I should do.. I am wondering if I should use your "Fixed Var Delta Time Stepping" if that will prevent that... Because at 30fps the game would be unplayable.<br><br>Delta time is not same as "Frame Skipping" is in Emulators. <br><br></td></tr></table><br>
<a name="607385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matt McFarland</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> How many milliseconds are in a second? 1 million? <br><br></td></tr></table><br>
<a name="607386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> See if this makes any sense:<br><br><pre class=code>
Const kDeltaTime:Double = 0.01 

Repeat' - - - - - - - - - - - - - - - - - 

	Try	  
	
		Local dNewTime:Double = MilliSecs() * 0.001
		Local dDeltaTime:Double = dNewTime - dCurrentTime
		If dDeltaTime &gt; .25
			dDeltaTime = .25
		End If
		dCurrentTime = dNewTime

		dTimeAccumulator :+ dDeltaTime	
	    lFrameAccumulator :+ 1
	    
	    If (lFrameAccumulator = 20)
	    	
			dSmothDeltaTime = dTimeAccumulator / lFrameAccumulator	    	    
	        dTimeAccumulator = 0
	    	lFrameAccumulator = 0
	    End If
	    
        
	    dDeltaTime = dSmothDeltaTime
	    
		While (dDeltaTime &gt; 0)
	        
	        dTimeStep = dDeltaTime   
	        If (dTimeStep &gt; kDeltaTime)  
	        	dTimeStep = kDeltaTime	 
	        End If 
	        	        
			'Process a Game Turn
			pTReferee.ProcessTurn(dTimeStep*100)
		    
			dDeltaTime :- dTimeStep
			
		End While    

		'Render the Turn.
		pTReferee.RenderTurn()
	
	Catch ex:Object
		Print ex.ToString()
		End
	End Try

	'Flip 
	Flip 1
	Cls 
	
	
Until KeyHit(Key_Q)
</pre> <br><br></td></tr></table><br>
<a name="607625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> The prefix milli( m ) is equal to 1/1000<br><br>So ONE Milli second = 1/1000 Seconds<br>1000 Milliseconds is = 1 Second<br><br>And if you add delta time, and notice your games runs slower, it is most likley to have something to do with the speed of your objects.<br><br>For example,<br><br>Before DeltaTime :<br>ShipSpeed = 5<br>This means: Move 5 pixels every frame, if your FPS is 60 then, the actuall pixels/sec that you move is = 5*60 = 300pixels/sec.<br><br>After DeltaTime (no change to the ShipSpeed Variable )<br>ShipSpeed = 5<br>This means: Move 5 pixels every SECOND, if your FPS is 60 then, the actuall pixels/sec that you move is = 5pixels/sec. Much slower than 300pixels/sec. If however your FPS is 30, and you use delta time, your actuall  Movement will still be 5pixels/sec. (still very slow)<br><br>So you take and change your ShipSpeed to 300 pixels/sec and your game speed should be the same as before you added delta-time. (Of course this should be analogus to all speeds and accelerations ;) )<br><br>However if you have problem with delta-speed not being the same at different FPS then that is a bug/error. <br><br>And jerkyness should only be visable if your FPS is very low. 30 FPS should work, Though if your computer is so slow you need to run the game in 30fps, isn't it better to simply increase the Min-Req (run at 60 as min) or try to optimize the code to make the game run faster?<br><br>And the reason I do not multiply my delta time with x100 or something is because I want the speed in pixles/seconds, not 100pixles/second - where a speed of 5 would really mean a speed of 500. That seems only to bring more confusion into the mix to me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
