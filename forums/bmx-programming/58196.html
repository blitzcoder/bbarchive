<!DOCTYPE html><html lang="en" ><head ><title >Many Bullets, Many Enemies (Collision Help)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Many Bullets, Many Enemies (Collision Help)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Many Bullets, Many Enemies (Collision Help)</a><br><br>
<a name="647146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>I need advice on how to solve a problem I am having.<br><br>I am having problems getting correct collision info using CollideImage<br><br>I am returning an array of all objects on the same layer/<br> <br>So for all bullets I am calling collideimage to test if they collide with any enemies.<br><br>My code is shaky at best and when I start adding tests for other objects, results get worse.<br><br>Would you suggest I try another method ? <br><br>The reason I chose CollideImage and returning the array of objects hit, is that I wouldn't have to check for every enemy for every bullet. CollideImage does that for me.<br><br>I didnt want to have to do this: pseudo<br><br>for each bullet<br>  for each enemy<br>    checkcollision<br>  next<br>next<br><br>here is my collision code<br><br>both bullet and enemy are on layer1.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

ResetCollisions(1)
colList:Object[] = CollideImage(bulletImg,xpos,ypos,0,ENEMY_LAYER,0)

For Local i:Int=1 To colList.length
    If(TEnemy(colList[i-1]))
         DrawText "Collision!",10,10
    end if
Next


</textarea> <br><br></td></tr></table><br>
<a name="647239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check if their radius intersect, 95% will fail this test, the 5% or so that pass can then use their own single collideimage test.<br><br>something like,<br><br>local radius# = sqr( ImageWidth(img)*ImageWidth+ImageHeight(Img)*Imageheight) <br><br>if radius1+radius2&lt;distance<br> check more accurately<br>else<br> discard<br>endif <br><br></td></tr></table><br>
<a name="647242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are other ways:<br><br>1. Write all your the actors to the collision layer. If they can only shoot each other, they don't need to read collisions (unless you do movement collision checks in the same step)<br><br>2. For all bullets, only read the collision. As bullets most likely can't collide with others, writing them to collision layer will only make collision slower. Now with the read collisions, you can do whatever you want.<br><br><br>3. I would use 2 layers. 1 for enemy and one for you. This way, your bullets only check with enemies and enemy bullets only check with your player. Will greatly speed up the collisions for all enemies (especially if you have situations where you go against enemy masses) <br><br></td></tr></table><br>
<a name="647380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks so much for your help :)<br><br>It is all working now :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
