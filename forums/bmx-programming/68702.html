<!DOCTYPE html><html lang="en" ><head ><title >How to get small fonts looking good</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to get small fonts looking good</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to get small fonts looking good</a><br><br>
<a name="767820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was encountering a problem today with drawing a font at 15 point. The font has sort of jagged edges as its cartoony.  Problem is when I loaded it in at 15 point with SMOOTHFONT and drew it with ALPHABLEND, it looked rubbish.  It was all lumpy and had jagged edges (yes they were anti-aliased it just looped crap).<br><br>So I had a brainwave.  I loaded the font in at 75 point then when I drew it I used SetScale 0.2,0.2.  And it works brilliantly, much better smoothing and the fonts retain their shape better because the graphics card is using all that detail to scale down.  Possibly it looks a little bit too anti-aliased but I'm not sure what to do about that.  I guess the perfect solution would be to make a bitmapfont anim strip in a paint program and use that.<br><br>[edit] Found a way to reduce the blur.  I used a copy of the DrawText function and forced each letter to draw at an integer X coordinate with Floor().  Works well.<br><br>I posted this because it's not obvious that loading a font in at 15 point will yield such rubbish results.  To be honest I'm still a bit confused as to why the BlitzMax code doesn't "sample" the characters at 15 point using a better algorithm or am I missing something?<br><br>Also can anyone see any problems with the method I'm using (apart from memory consumption) e.g. could results vary on different PCs? (I doubt it) <br><br></td></tr></table><br>
<a name="767844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I guess the perfect solution would be to make a bitmapfont anim strip in a paint program and use that. <br></div>Alternatively, use a font that was designed to look good in small print? <br><br></td></tr></table><br>
<a name="767852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep valid but this font looks good in small print in a paint package, just not in BlitzMax... <br><br></td></tr></table><br>
<a name="767856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Couldn't you load the font in at 75 point, scale it down and draw it on your screen or what have you, grab that as a bitmap (the scaled one) to blit when you want and then free the original font? It would take slightly longer to do it this way initially (and take more memory), but the result would probably be worth it.<br><br>Russell <br><br></td></tr></table><br>
<a name="768019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> An interesting idea.  As long as you can grab with the alpha channel intact, which I'm pretty sure you can - I've just never done it. <br><br></td></tr></table><br>
<a name="768022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Loading a font at 75pt when you only intend on ever drawing it at 15pt is a waste.  It will use approximately 25x the resources of a 15pt equivalent. <br><br></td></tr></table><br>
<a name="768040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah but the 15pt looks like CRAP.  I could load it at any multiple but I found 5x to be pretty good. It's really not that much memory anyway and it draws very quickly. <br><br></td></tr></table><br>
<a name="768062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> reduced blur, see edit at top of post. <br><br></td></tr></table><br>
<a name="768115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grey Alien I'll post later tonight about this, I've encountered something like this but it was only happening on an ATI card for me. <br><br></td></tr></table><br>
<a name="768122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an ATI card.   What was happening, the small fonts looking crap or the scaling down resulting in blurry text?  The blurry text should occur on all cards as it's just due to text being drawn at floating point coords. <br><br></td></tr></table><br>
<a name="768194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's what I mean Grey Alien, I spent a lot of time trying to figure out what was wrong but never found anything conclusive. Just that the fonts aren't at all blurry on my newer nvidia gfx card, and they're blurry on my old ATI 9700 pro mobility card.<br><br>.exe is here if you wanna test it: <a href="http://kronholm.org/games/arkanoid_v0.66_win32.rar" target="_blank">http://kronholm.org/games/arkanoid_v0.66_win32.rar</a><br><br><img src="http://kronholm.org/wip/fontproblem.jpg"> <br><br></td></tr></table><br>
<a name="768226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kronholm, I would look for a Texel Alignment or Texel offset setting which for some insane reason drivers let you modify / break in the dx/gl section of the video card Display Settings. <br><br></td></tr></table><br>
<a name="768227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow that's bad, worse than mine but similar.  Are you drawing that font at it's normal size or are you scaling it down? <br><br></td></tr></table><br>
<a name="768251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skidracer, I'm not really sure what you mean? Do you mean like the drawtext is having float coordinates?<br><br>Grey Alien, several fonts are loaded and stored in types, and switched between for different sizes, so it's the normal size. (Custom setfontsize function) <br><br></td></tr></table><br>
<a name="768311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Justus</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That a font loaded with SMOOTHFONT and ALPHABLEND looks 	<br>sharp-edged seems confusing to me...<br>But I recommend this way to get rid of this unnecessary problem:<br>Download the BitmapFont module by ChaosInteractive here: <a href="http://www.chaos-interactive.de/index.php?show=13&amp;lang=eng" target="_blank">http://www.chaos-interactive.de/index.php?show=13&amp;lang=eng</a><br>and then get "Suco's FontExtractor" here: <a href="http://www.suco.colorflow.de/tools/SucosFontextractor2.0_Win.zip" target="_blank">http://www.suco.colorflow.de/tools/SucosFontextractor2.0_Win.zip</a><br>There's also a project page about it, but unfortunately only in german: <a href="http://www.blitzforum.de/forum/viewtopic.php?p=232382#232382" target="_blank">http://www.blitzforum.de/forum/viewtopic.php?p=232382#232382</a><br><br>Now follow these steps: As you open the FontExtractor, it will search all the fonts you have installed on your system and display them in the list. Select the one you want to use.<br>Then click on "Speichern" (save) and select a path by clicking on "Auswählen" (browse) in the window that has just shown up. You can change the font size of the exported bitmap font by changing the "Fontgröße".<br>In the folder you have saved your font in, you will now find a .png and a .suc file which contain the information about the bitmap font and the image itself. If you want to, you can add shadow effects or other eye candy in GIMP or PS by working on the .png file.<br><br>Then just put both files into your project folder and load your font like this:<br><br>Local DummyFont:TImageFont = LoadSucoFont:TImageFont ("MyFont.png")<br><br>(after you have imported the BitmapFont module)<br><br>You will be able to handle the font just like a normal TImageFont.<br><br>Have fun. <br><br></td></tr></table><br>
<a name="768312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow OK so normal fonts look rubbish.  Well actually they looked poor on mine too, but more jagged.  Only the scaled down ones (using Setscale 0.2,0.2 for example) looked blurry. <br><br></td></tr></table><br>
<a name="812793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >knightofni</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I faced the same problem (blurry fonts with ATI card) until today. I could remove it by changing the following option of the video drivers :<br><br>&gt;&gt; Put the MipMap detail level at maximum.<br><br>For me, totally solved the problem<br><br><br>Hope it helps <br><br></td></tr></table><br>
<a name="812842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Had a similar problem, solution was like another use said, just resample in a paint program to the size you need and use that in a bitmap font handler. Why rely on internal/external methods that don't provide 100% solution? <br><br></td></tr></table><br>
<a name="812880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think it's much of a waste loading a font at a higher resolution and drawing it scaled. However, you might try experimenting with getting the original size to be a multiple of the size you're scaling to, e.g. to get down to 15pt you might start with 60pt rather than 75 because then you're dealing with scaling the whole thing down by quartering the dimensions, rather than dividing by 5.<br><br>Also whenever you scale something down, it has the effect of introducing a certain degree of blur due to approximation of pixels. After you scale you should apply a `sharpen` image-processing pass to crispen it back up again. <br><br></td></tr></table><br>
<a name="813115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use bitmap fonts now.  They are preprepared in a paint program and also I don't draw them scaled. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
