<!DOCTYPE html><html lang="en" ><head ><title >Any way to hide/disable the 'close' gadget?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Any way to hide/disable the 'close' gadget?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Any way to hide/disable the 'close' gadget?</a><br><br>
<a name="753123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>When my game is running in a window, I don't want players to be able to click the "X" to close the window.<br><br>The user clicking it and nothing happening feels a little odd, yet I don't *want* anything to happen!  The player needs to close the game through the game's GUI.<br><br>Any way to disable it?  Or hide it completely? <br><br></td></tr></table><br>
<a name="753151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jake L.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm interested in this as well. I guess messing with MaxGUI's CreateWindow and creating a window without a close-button is easier than to remove it from an existing window. <br><br></td></tr></table><br>
<a name="753163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the code I use in BlitzPlus, should get you started :)<br><br><pre class=code>Function RemoveClose(Window)

	Local hwnd=QueryObject(Window,1)
	SetWindowLong hwnd,GWL_STYLE,GetWindowLong(hwnd,GWL_STYLE)-WS_SYSMENU
	RedrawGadget Window

End Function</pre> <br><br></td></tr></table><br>
<a name="753261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems a little backwards, why not allow them to close it on the X instead of force them to go through a menu system.  You can still clean up and even save once the event is detected. <br><br></td></tr></table><br>
<a name="753330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because I want to avoid closing the game via an accidental click.  My game is completely mouse controlled, so accidentally jabbing the close button is always a possibility.<br><br>Anyhoo, I've made it so that the user needs to click the close button, then click again to confirm.  Far less chance of accidentally clicking it twice, I think! <br><br></td></tr></table><br>
<a name="753331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah that's a good idea, best of both worlds. <br><br></td></tr></table><br>
<a name="753354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, Im glad you dropped the idea of getting rid of the X,<br>too be honest even on bourderless window game/apps I put a fake graphic one there, because its standard now.<br>People like my mum (for example), wouldnt know how to close the thing otherwise. (And no esc isnt enough) <br><br></td></tr></table><br>
<a name="767818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> GfK: how are you capturing a user click on the 'X' to determine that the player is trying to exit? You don't have to give away proprietary code or anything, but perhaps you could point to source code or examples you used?<br><br>Snarty's code means little to me. I've never used BlitzPlus and I know even less about Windows' system stuff. I am not sure where to start to get it to work with my game.<br><br>Thanks in advance for help! <br><br></td></tr></table><br>
<a name="767828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If AppTerminated() I think? <br><br></td></tr></table><br>
<a name="767838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do what GFK describes with something like...<pre class=code>Graphics 400, 300, 0

Repeat
	cls
	DrawText MilliSecs(), 170, 144
	Flip	
Until AppTerminate() And Confirm("Really Quit?")

End</pre> <br><br></td></tr></table><br>
<a name="767859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or through MaxGUI events<br><br>Russell <br><br></td></tr></table><br>
<a name="767892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no point importing the entire MaxGUI mod just to do this. <br><br></td></tr></table><br>
<a name="767947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There's no point importing the entire MaxGUI mod just to do this <br></div>Isnt this one of the reasons that the event queue (brl.eventqueue) is now seperate from MaxGui? <br><br></td></tr></table><br>
<a name="768012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The event system has *always* been separate from MaxGUI.<br><br>I think the confusion comes from the fact that the event system was added to BMax at the same time MaxGUI was released.<br><pre class=code>Framework BRL.Basic 
Import BRL.D3D7Max2D
Import BRL.EventQueue

Graphics 400, 300, 0

Repeat
	cls
	DrawText MilliSecs(), 170, 144
	Flip	
Until (PollEvent() = EVENT_APPTERMINATE) And Confirm("Really Quit?")

End</pre>Unless you're gonna be using other events, it's easier (and probably a little quicker?) to just use AppTerminate().<br><br><br>AFAICT, MaxGUI no longer imports 'brl.eventqueque' so Fabian's apps are ~5KB smaller. ;o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
