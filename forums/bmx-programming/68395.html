<!DOCTYPE html><html lang="en" ><head ><title >Zombieblast - Failed to assemble</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Zombieblast - Failed to assemble</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Zombieblast - Failed to assemble</a><br><br>
<a name="764229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tried to convert the Zombieblast Games sample over to SuperStrict, you only need to convert some variables over from none assigned to &lt;variable&gt;% or &lt;variable&gt;:Int then it builds but gets the following error...<br><br>Build Error: Failed to assemble C:/Program Files/BlitzMax/samples/birdie/games/zombieblast/.bmx/game.bmx.gui.debug.win32.x86.s<br><br>I'm going to try and pinpoint the change that caused the error but wondering if anyone has had a similar problem? <br><br></td></tr></table><br>
<a name="764230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have tried building turning quickbuild off? <br><br></td></tr></table><br>
<a name="764236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No effect tried quickbuild off and on! ? <br><br></td></tr></table><br>
<a name="764254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's OK for me. I'm guessing other stuff builds OK. I would also expect a few more error messages output.<br>You might want to try deleting the .bmx directory.<br>What happens when you turn off Build GUI App? <br><br></td></tr></table><br>
<a name="764258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the code if you want to give it a go...<br><br>[code\]<br>SuperStrict<br>'<br>' Game Demo Coded By David Bird (Birdie)<br>'<br>Incbin "media/sand.png"<br>Incbin "media/ship1.png"<br>Incbin "media/cloud.png"<br>Incbin "media/shot.png"<br>Incbin "media/shot2.PNG"<br>Incbin "media/mud.png"<br>Incbin "media/smoke.png"<br>Incbin "media/scan.png"<br>Incbin "media/zombie_0.png"<br>Incbin "media/zombie_1.png"<br>Incbin "media/zombie_2.PNG"<br>Incbin "media/zombie_3.PNG"<br>Incbin "media/zombie_4.PNG"<br>Incbin "media/zombie_5.PNG"<br>Incbin "media/zombie_6.png"<br>Incbin "media/zombie_7.PNG"<br>Incbin "media/Title.png"<br>Incbin "media/HitSpace.png"<br><br>Global C_ScreenWidth# = 640, C_ScreenHeight# = 480<br>Global C_ScreenMidX# =C_ScreenWidth/2<br>Global C_ScreenMidY# =C_ScreenHeight/2<br>Global MapPosition_X#=400, MapPosition_Y#=400<br>Global WorldSize% = 8192<br>Global Scanner_Rot#<br>Global Scanner_X#= C_ScreenWidth - 80<br>Global Scanner_Y#= 80<br>Global Scanner_Scale# = 0.5<br>Global ObjectList:TList = New TList<br>Global DetailList:TList = New TList<br>Global CloudList:TList  = New TList<br>Global ScanList:TList   = New TList<br><br>Global TitleWidth#,TitleHeight#<br>Graphics C_ScreenWidth, C_ScreenHeight ,32<br>HideMouse<br>AutoImageFlags MASKEDIMAGE|FILTEREDIMAGE|MIPMAPPEDIMAGE<br><br>'media globals<br>Global media_sand:TImage<br>Global media_ship1:TImage<br>Global media_cloud:TImage<br>Global media_shots:TImage<br>Global media_shot2:TImage<br>Global media_mud:TImage<br>Global media_smoke:TImage<br>Global Media_scan:TImage<br>Global media_Title:TImage<br>Global media_HitSP:TImage<br><br>Global Media_zombie:TImage[8]<br>LoadMedia()<br><br>Local P1:Player = New Player<br>ObjectList.AddLast p1<br><br>'title screen<br><br>While Not KeyDown(KEY_SPACE)<br>  Cls<br>  SetBlend SOLIDBLEND<br>  SetColor 255,255,255<br>  TileImage Media_sand,MapPosition_X,MapPosition_Y<br>  MapPosition_X:+1<br>  SetRotation 0<br>  SetBlend ALPHABLEND<br>  SetColor 255,255,255<br>  SetAlpha 1<br>  SetScale TitleWidth,TitleHeight<br>  DrawImage Media_Title,C_ScreenMidX,C_ScreenMidY-24<br>  SetScale 1,1<br>  SetAlpha 0.5<br>  DrawImage media_HitSP, C_ScreenMidX, C_ScreenHeight - media_HitSP.height<br>  Flip<br>Wend<br><br>Local a%<br>For a=0 Until 100<br>  cloud.Create( Rnd(-WorldSize,WorldSize), Rnd(-WorldSize,WorldSize) )<br>Next<br>For a=0 Until 250<br>  Baddie.Create(Rnd(-1000,1000), Rnd(-1000,1000), 0)<br>Next<br><br>While Not KeyDown(KEY_ESCAPE)<br>  Cls<br>  UpdateObjects()<br><br>  DrawLevel(p1)<br>  DrawObjects()<br>  DrawScanner( P1 )<br><br>  Flip<br>Wend<br>End<br><br>Function LoadMedia()<br>  SetHandle 0.5,0.5<br>  AutoMidHandle True<br>  media_sand  = LoadImage("incbin::media/sand.png")<br>  media_ship1 = LoadImage("incbin::media/ship1.png")<br>  media_cloud = LoadImage("incbin::media/cloud.png")<br>  media_shots = LoadImage("incbin::media/shot.png")<br>  media_shot2 = LoadImage("incbin::media/shot2.PNG")<br>  media_scan  = LoadImage("incbin::media/scan.png")<br>  media_mud   = LoadImage("incbin::media/mud.png")<br>  media_smoke = LoadImage("incbin::media/smoke.png")<br>  media_Title = LoadImage("incbin::media/Title.png")<br>  media_HitSP = LoadImage("incbin::media/HitSpace.png")<br>  <br>  'scale to fullscreen<br><br>  TitleWidth = media_title.width / C_ScreenWidth<br>  TitleHeight= media_title.height / (C_ScreenHeight+48)<br>  Media_zombie[0] = LoadAnimImage("incbin::media/zombie_0.png",32,64,0,17)<br>  Media_zombie[1] = LoadAnimImage("incbin::media/zombie_1.png",32,64,0,17)<br>  Media_zombie[2] = LoadAnimImage("incbin::media/zombie_2.PNG",32,64,0,17)<br>  Media_zombie[3] = LoadAnimImage("incbin::media/zombie_3.PNG",32,64,0,17)<br>  Media_zombie[4] = LoadAnimImage("incbin::media/zombie_4.PNG",32,64,0,17)<br>  Media_zombie[5] = LoadAnimImage("incbin::media/zombie_5.PNG",32,64,0,17)<br>  Media_zombie[6] = LoadAnimImage("incbin::media/zombie_6.png",32,64,0,17)<br>  Media_zombie[7] = LoadAnimImage("incbin::media/zombie_7.PNG",32,64,0,17)<br><br>EndFunction<br><br>Function DrawLevel(o:Entity)<br>  'using the object{o} position and direction to draw the map<br>'  MapPosition_X = MapPosition_X + ((o.x - MapPosition_X)*0.25)<br>'  MapPosition_Y = MapPosition_Y + ((o.y - MapPosition_Y)*0.25)<br>  MapPosition_X = o.x<br>  MapPosition_Y = o.y<br>  SetBlend SOLIDBLEND<br>  SetColor 255,255,255<br>  SetScale 1,1<br>  TileImage Media_sand,MapPosition_X,MapPosition_Y<br><br>EndFunction<br><br>Function UpdateObjects()<br>  Local e:Entity<br>  For e=EachIn ObjectList<br>    e.Update()<br>  Next<br>EndFunction<br><br>Function DrawObjects()<br>  Local e:Entity<br>  Local c:Cloud<br>  For c=EachIn CloudList<br>    c.Update()<br>  Next<br><br>  'Draw Shadows<br>  For e=EachIn ObjectList<br>    e.DrawShadow()<br>  Next<br>  'Draw Details<br>  Local d:Detail<br>  For d=EachIn DetailList<br>    d.Update(MapPosition_X, MapPosition_Y)<br>  Next<br><br><br>  'Draw objects without shadows<br>  For e=EachIn ObjectList<br>    e.DrawBody()<br>  Next<br><br>  'DrawClouds<br><br>  For c=EachIn CloudList<br>    c.DrawShadow()<br>  Next<br>  For c=EachIn CloudList<br>    c.DrawBody()<br>  Next<br><br>EndFunction<br><br>Type Entity<br>  Field x#,y#<br>  Field height#<br>  Field rotation#<br>  Field spd#=1<br><br>  Method Update() Abstract<br><br>  Method DrawBody() Abstract<br>  Method DrawShadow() Abstract<br>EndType<br><br>Type Player Extends Entity<br>  Field RotationSpd#<br>  Field liftSpd#<br>  Field thrust#<br>  Field osc#<br><br>  Method Update()<br>    If KeyDown(KEY_UP)<br>      thrust:+0.01<br>      If thrust&gt;0.5<br>        thrust = 0.5<br>      EndIf<br>    EndIf<br>    If KeyDown(KEY_DOWN)<br>      thrust:-0.05<br>    EndIf<br>    spd:+thrust<br><br>    If thrust&lt;0<br>      thrust = 0<br>    EndIf<br><br>    If spd&gt;8<br>      spd=8<br>    EndIf<br>    If spd&lt;0.5 spd = 0.5<br><br>    If KeyHit(KEY_SPACE)<br>      Local a%,thei#<br>      thei = height +(3.5*Cos(osc) )<br><br>      Shots.Create x, y, spd+5, thei, rotation<br>      For a=0 Until 3<br>        Shots.Create x, y, spd+5, thei, rotation+Rnd(-1.75,1.75)<br>      Next<br>    EndIf<br>    Local sz#=14*(1+(height/140.0))<br>    Local sd#=16<br>    Local cs#= Cos(rotation-90)<br>    Local sn#= Sin(rotation-90)<br>    Local ddx# = sz<br>    Local ddy# = 9<br><br>    Local tx1# = ddx*cs + ddy*sn<br>    Local ty1# = ddx*sn - ddy*cs<br>    ddx=-ddx<br>    Local tx2# = ddx*cs + ddy*sn<br>    Local ty2# = ddx*sn - ddy*cs<br><br>    Local thei#<br>    thei = height +(3.5*Cos(osc) )<br>    Local deltasm#= ( 0.5 * (spd/8.0))<br>    Trail.Create( x+tx1, y+ty1, thei, deltasm, rotation )<br>    Trail.Create( x+tx2, y+ty2, thei, deltasm, rotation )<br><br>    Local tx#= 20 * Cos(rotation)<br>    Local ty#= 20 * Sin(rotation)<br>    Local rd#= 255*thrust*2<br>    Local gn#= rd*0.7<br>    Local bl#= gn*0.5<br>    ColTrail.Create( x-tx, y-ty, thei, 0.3, rotation, [rd, gn, bl] ,2.0)<br><br>    ColTrail.Create( x-tx, y-ty, thei, 0.3, rotation, [rd*2.0, 0.0, 0.0] ,1.0)<br><br>    If KeyDown(KEY_RIGHT)<br>      rotationSpd:+0.25<br>      If rotationSpd&gt;2<br>        rotationSpd=2<br>      EndIf<br>    EndIf<br>    If KeyDown(KEY_LEFT)<br>      rotationSpd:-0.25<br>      If rotationSpd&lt;-2<br>        rotationSpd=-2<br>      EndIf<br>    EndIf<br>    rotation:+rotationSpd<br>    rotationSpd:*0.95<br><br>    If KeyDown(KEY_A)<br>      liftSpd:-0.02<br>      If liftSpd&lt;-1<br>        liftSpd=-1<br>      EndIf<br>    EndIf<br>    If KeyDown(KEY_Z)<br>      liftSpd:+0.02<br>      If liftSpd&gt;1<br>        liftSpd=1<br>      EndIf<br>    EndIf<br>    height:+liftSpd<br><br>    liftspd:*0.985<br><br>    If height&lt;4<br>      height = 4<br>      liftspd = 0<br>    EndIf<br>    If height&gt;50<br>      height = 50<br>      liftspd=0<br>    EndIf<br>    x=x+(spd*Cos(rotation))<br>    y=y+(spd*Sin(rotation))<br>    If x&gt;WorldSize x=-WorldSize<br>    If x&lt;-WorldSize x=WorldSize<br>    If y&gt;WorldSize y=-WorldSize<br>    If y&lt;-WorldSize y=WorldSize<br>    osc:+1<br>  EndMethod<br><br>  Method DrawShadow()<br>    Local dx#,dy#,sz#,thei#<br>    thei = height +(3.5*Cos(osc) )<br>    sz =(0.002*thei)<br>    SetRotation rotation+90<br>    SetBlend ALPHABLEND<br>    SetScale 0.25+sz,0.25+sz<br>    SetColor 0,0,0<br>    SetAlpha 0.5<br>    DrawImage media_ship1,C_ScreenMidX + (x-MapPosition_X), C_ScreenMidY + ( y - MapPosition_Y )<br>  EndMethod<br><br>  Method DrawBody()<br>    Local dx#,dy#,sz#,thei#<br>    thei = height +(3.5*Cos(osc) )<br>    sz =(0.002*thei)<br>    SetAlpha 1<br>    SetRotation rotation+90<br>    SetBlend MASKBLEND<br>    SetColor 255,255,255<br>    dx=thei/3.0<br>    dy=thei<br>    SetScale 0.25+sz, 0.25+sz<br>    DrawImage media_ship1,(x-MapPosition_X+dx) + C_ScreenMidX,(y-MapPosition_Y+dy) + C_ScreenMidY<br>  EndMethod<br>  Function Create:Player(x#,y#)<br>    Local p:Player = New Player<br>    p.x=x<br>    p.y=y<br>    p.height = 4<br>    p.spd=1<br>    ObjectList.AddFirst p<br>    Return p<br>  EndFunction<br>EndType<br><br>Type Cloud<br>  Field x#,y#,height#, rotation%<br><br>  Method Update()<br>    x:+1<br>    y:+0.1<br>    If x&gt;WorldSize x=-WorldSize<br>    If x&lt;-WorldSize x=WorldSize<br>    If y&gt;WorldSize y=-WorldSize<br>    If y&lt;-WorldSize y=WorldSize<br>  EndMethod<br><br>  Method DrawBody()<br>    Local dx#,dy#<br>    dx=height/2.0<br>    dy=height<br>    SetBlend LIGHTBLEND<br>    SetAlpha 1<br>    SetScale 2.4,2.4<br>    SetRotation rotation<br>    SetColor 255,255,255<br>    DrawImage media_cloud,(MapPosition_X+dx-x) + C_ScreenMidX,(MapPosition_Y+dy-y) + C_ScreenMidY<br>  EndMethod<br><br>  Method DrawShadow()<br>    SetBlend ALPHABLEND<br>    SetColor 0,0,0<br>    SetAlpha 0.2<br>    SetScale 4, 4<br>    SetRotation rotation<br>    DrawImage media_cloud,(MapPosition_X-x) + C_ScreenMidX,(MapPosition_Y-y) + C_ScreenMidY<br>  EndMethod<br><br>  Function Create:Cloud( x#, y# )<br>    Local c:Cloud = New Cloud<br>    c.x= x<br>    c.y= y<br>    c.rotation = Rnd(360)<br>    c.height = 75<br>    CloudList.AddLast c<br>    Return c<br>  EndFunction<br>EndType<br><br>Type Shots Extends Entity<br>  Field life%<br>  Method DrawBody()<br>    Local dx#,dy#<br>    dx=height/3.0<br>    dy=height<br>    SetBlend MASKBLEND<br>    SetColor 255,255,255<br>    SetAlpha 1<br>    SetScale 1, 1<br>    SetRotation rotation + 90<br>    DrawImage media_shots,(MapPosition_X+dx-x) + C_ScreenMidX,(MapPosition_Y+dy-y) + C_ScreenMidY<br>  EndMethod<br><br>  Method DrawShadow()<br>    SetBlend ALPHABLEND<br>    SetColor 0,0,0<br>    SetAlpha 0.2<br>    SetScale 1, 1<br>    SetRotation rotation + 90<br>    DrawImage media_shots,(MapPosition_X-x) + C_ScreenMidX,(MapPosition_Y-y) + C_ScreenMidY<br>  EndMethod<br>  Method Update()<br>    x=x+(spd*Cos(rotation))<br>    y=y+(spd*Sin(rotation))<br>    If x&gt;WorldSize x=-WorldSize<br>    If x&lt;-WorldSize x=WorldSize<br>    If y&gt;WorldSize y=-WorldSize<br>    If y&lt;-WorldSize y=WorldSize<br>    If life&lt;80<br>      height:-0.75<br>    EndIf<br>    Trail.Create( x, y, height, 0.3, rotation )<br>    If height&lt;0<br>      ObjectList.Remove Self<br>      Mud.Create(x, y, rotation)<br>      Local ee#<br>      ee=1<br>      SmokeEmitter.create( x#,y#, 0,ee, ee, ee )<br>    Else<br>      life:-1<br>      If life&lt;0<br>        ObjectList.Remove Self<br>      EndIf<br>    EndIf<br>  EndMethod<br><br>  Function Create:Shots(x#,y#,spd#,hei#,rot#)<br>    Local s:Shots = New Shots<br>    s.x=x<br>    s.y=y<br>    s.rotation = rot<br>    s.spd = spd<br>    s.height = hei<br>    s.life = 100<br>    ObjectList.AddFirst s<br>    Return s<br>  EndFunction<br>EndType<br><br>Type Detail<br>  Field life%<br>  Field x#,y#,rot#,alp#<br>  Field col#[3]<br><br>  Method Update( wx#, wy# ) Abstract<br>EndType<br><br>Type Trail Extends Detail<br>  Field height#<br>  Field size#<br><br>  Method Update( wx#, wy# )<br>    Local dx#, dy#<br>    alp:-0.005<br>    If alp&lt;0<br>      life = 0<br>    EndIf<br><br>    life:-1<br>    If life&lt;0<br>      DetailList.Remove Self<br>    Else<br>      dx=height/3.0<br>      dy=height<br>      SetAlpha alp<br>      SetBlend alphablend<br>      SetRotation rot<br>      SetColor 255,255,255<br>      size:+0.05<br>      SetScale 1,size<br>      DrawRect (wx-x+dx)+C_ScreenMidX,(wy-y+dy)+C_ScreenMidY,10,1<br>    EndIf<br>  EndMethod<br><br>  Function Create:Trail(x#,y#,hei#,alp#,rot#)<br>    Local t:Trail = New Trail<br>    t.x=x<br>    t.y=y<br>    t.height= hei<br>    t.alp = alp<br>    t.rot = rot<br>    t.life= 100<br>    t.size= 1<br>    DetailList.AddLast t<br>  EndFunction<br>EndType<br><br>Type ColTrail Extends Detail<br>  Field height#,size#<br><br>  Method Update( wx#, wy# )<br>    Local dx#, dy#<br>    alp:-0.01<br>    size:*0.9<br>    If alp&lt;0<br>      life = 0<br>    EndIf<br><br>    life:-1<br>    If life&lt;0<br>      DetailList.Remove Self<br>    Else<br>      dx=height/3.0<br>      dy=height<br>      SetAlpha alp<br>      SetBlend LIGHTBLEND<br>      SetRotation rot<br>      SetColor Col[0],Col[1],Col[2]<br>      SetScale size,size<br>      DrawRect (wx-x+dx)+C_ScreenMidX,(wy-y+dy)+C_ScreenMidY,10,4<br>    EndIf<br>  EndMethod<br><br>  Function Create:ColTrail(x#,y#,hei#,alp#,rot#,col#[],size#)<br>    Local t:ColTrail = New ColTrail<br>    t.x=x<br>    t.y=y<br>    t.height= hei<br>    t.alp = alp<br>    t.rot = rot<br>    t.life= 100<br>    t.size=size<br>    t.col = col<br>    DetailList.AddLast t<br>  EndFunction<br>EndType<br><br>Type Mud Extends Detail<br><br>  Method Update( wx#, wy# )<br>    SetRotation rot<br>    SetBlend ALPHABLEND<br>    If life&lt;50<br>      alp = Float(life)/100.0<br>    EndIf<br>    SetAlpha alp<br>    SetColor 0,0,0<br>    SetScale 0.5,0.5<br><br>    DrawImage media_mud,(wx-x)+C_ScreenMidX,(wy-y)+C_ScreenMidY<br>    life:-1<br>    If life&lt;0<br>      DetailList.Remove Self<br>    EndIf<br>  EndMethod<br><br>  Function Create:Mud(x#,y#, rot#)<br>    Local m:Mud = New Mud<br>    m.x = x<br>    m.y = y<br>    m.rot = rot<br>    m.alp = 0.5<br>    m.life = 200<br>    DetailList.AddLast M<br>  EndFunction<br>EndType<br><br>Type smoke_prt<br>  Field x#,y#,height#  'local to emitter<br>  Field scl#<br>  Field alp#<br>  Field dx#,dy#<br>  Field life%<br>  Field rot#, rotdir#<br><br>  Method Draw( tx#, ty# )<br>    y:-dy<br>    x:+dx<br>    life:-1<br>    alp:-0.005<br>    scl:+0.017<br>    If alp&lt;=0<br>      life =0<br>      Return<br>    EndIf<br>    SetBlend LightBlend<br>    SetAlpha alp<br>    SetScale scl,scl<br>    SetRotation rot<br>    rot:+rotdir<br>    DrawImage media_smoke, tx+x, ty+y<br>  EndMethod<br><br>  Function Create:smoke_prt(scl#,alp#,x#,y#,dx#,dy#,life%)<br>    Local s:Smoke_prt = New Smoke_prt<br>    s.x=x<br>    s.y=y<br>    s.dx=dx<br>    s.dy=dy<br>    s.life=life<br>    s.alp=alp<br>    s.scl=scl<br>    s.rotdir = Rnd(-4,4)<br>    s.rot = Rnd(360)<br>    Return s<br>  EndFunction<br>EndType<br><br>Type SmokeEmitter Extends Detail<br>  Field smlist:TList = New TList<br><br>  Field rd#,gn#,bl#, max_cnt%=50, cur_cnt%<br><br>  Method Update( wx#, wy# )<br>    Local sp:smoke_prt<br>    SetColor 255*rd,255*gn,255*bl<br>    For sp=EachIn smlist<br>      sp.Draw((wx-x)+C_ScreenMidX, (wy-y)+C_ScreenMidY)<br>      If sp.life&lt;0<br>        'remove it and add another<br>        smlist.remove sp<br>        cur_cnt:-1<br>      EndIf<br>    Next<br>    If cur_cnt&lt;max_cnt<br>      smlist.addfirst( smoke_prt.Create( 0.2, 0.3, 0, 0, Rnd( -0.1, 0.1 ), Rnd(0.1,1), 40 ) )<br>      cur_cnt:+1<br>    EndIf<br>    life:-1<br>    If life&lt;0<br>      DetailList.Remove Self<br>      smlist.clear()<br>    EndIf<br>  EndMethod<br><br>  Function Create:SmokeEmitter(x#,y#, rot#,cr#,cg#,cb#)<br>    Local sm:SmokeEmitter = New SmokeEmitter<br>    sm.x = x<br>    sm.y = y<br>    sm.rot = rot<br>    sm.alp = 0.20<br>    sm.life = 50<br>    sm.rd=cr<br>    sm.gn=cg<br>    sm.bl=cb<br><br>    DetailList.AddLast sm<br>  EndFunction<br>EndType<br><br>Type Baddie Extends Entity<br>  Field frame% = 0<br>  Field frm_p% = 2<br>  Field frm_t% = 0<br>  Field direct%= 0<br>  Field life%<br><br>  Method Update()<br>    frm_t:+1<br>    If frm_t&gt;frm_p<br>      frm_t= 0<br>      frame:+1<br>      If frame = 17 frame = 0<br>    EndIf<br>    x=x+(spd*Cos(rotation-90))<br>    y=y+(spd*Sin(rotation-90))<br>    If x&gt;WorldSize x=-WorldSize<br>    If x&lt;-WorldSize x=WorldSize<br>    If y&gt;WorldSize y=-WorldSize<br>    If y&lt;-WorldSize y=WorldSize<br><br>    spd=0.3<br>    rotation:+1<br>    If rotation&lt;0 rotation:+360<br>    If rotation&gt;=360 rotation:-360<br>    direct = rotation / 45<br>  EndMethod<br>  Method DrawShadow()<br>    Local dx% = -12<br>    Local dy% = -4<br>    SetBlend alphaBlend<br>    SetColor 0,0,0<br>    SetAlpha 0.3<br>    SetRotation -30<br>    SetScale 0.43,0.47<br>    DrawImage Media_zombie[direct],(MapPosition_X-x) + C_ScreenMidX+dx,(MapPosition_Y-y) + C_ScreenMidY+dy, frame<br><br>  EndMethod<br>  Method DrawBody()<br>    SetBlend alphaBlend<br>    SetColor 255,255,255<br>    SetAlpha 1<br>    SetRotation 0<br>    SetScale 0.4,0.4<br>    DrawImage Media_zombie[direct],(MapPosition_X-x) + C_ScreenMidX,(MapPosition_Y-y) + C_ScreenMidY, frame<br><br>  EndMethod<br><br>  Function Create:Baddie(x#,y#,spd#)<br>    Local s:Baddie = New Baddie<br>    s.x=x<br>    s.y=y<br>    s.rotation = Rand(350)<br>    s.spd = Rnd(1,2)<br>    s.height = 0<br>    s.life = 100<br>    ObjectList.AddFirst s<br>    Return s<br>  EndFunction<br><br>EndType<br><br>Type Scan_Object<br>  Field alp#,x#,y#,typ%<br>  Method Update(cx#, cy#)<br>    alp:-0.01<br>    If alp&lt;0<br>      ScanList.Remove Self<br>    Else<br>      SetAlpha alp<br>      DrawRect cx+x,cy+y,5,5<br>    EndIf<br>  EndMethod<br>  Function Create:Scan_Object(x#, y#, typ% )<br>    Local so:Scan_Object = New Scan_Object<br>    so.x=x<br>    so.y=y<br>    so.typ=typ<br>    so.alp=0.4<br>    ScanList.AddLast so<br>  EndFunction<br>EndType<br><br>Function DrawScanner(p:Player) 'according to a certain player<br>  SetBlend LightBlend<br>  SetColor 255,255,255<br>  SetAlpha 0.5<br>  SetRotation Scanner_Rot+90<br>  Scanner_rot:-5<br>  If scanner_rot&lt;0 scanner_rot:+360<br><br>  SetScale Scanner_Scale,Scanner_Scale<br>  DrawImage media_scan,Scanner_X,Scanner_Y<br>  Local b:Baddie<br>  Local so:Scan_Object<br>  Local dx#,dy#,ang#,ln#<br><br>  For b=EachIn ObjectList<br>    'get angle to object<br>    dx=p.x-b.x<br>    dy=p.y-b.y<br>    ln=Sqr(dx*dx+dy*dy)<br>    If ln&lt;1200<br>      ang = ATan2(dx,dy)<br>      If ang&lt;0 ang=360+ang<br>      If Abs(ang-(Scanner_rot))&lt;2<br>        'add a new dot on the scanner<br>        Scan_Object.Create(dx/20.0, dy/20.0, 0 )<br>      EndIf<br>    EndIf<br>  Next<br>  SetBlend LightBlend<br>  SetAlpha 0.25<br>  SetColor 48,64,48<br>  SetRotation 0<br>  DrawRect Scanner_X-64,Scanner_Y-64,256,256<br>  SetColor 0,255,0<br>  For so=EachIn ScanList<br>    so.Update(scanner_x,Scanner_Y)<br>  Next<br>EndFunction<br>[\code] <br><br></td></tr></table><br>
<a name="764264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Runs fine. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
