<!DOCTYPE html><html lang="en" ><head ><title >BMX 1.26: Center graphics window  by default?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BMX 1.26: Center graphics window  by default?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BMX 1.26: Center graphics window  by default?</a><br><br>
<a name="827043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>"Graphics 800,600,0" still doesn't center the window on the desktop by default. What changes do I have to make to the dx and opengl mods in order to enable that? <br><br>I really hoped bmx 1.26 would finally do that "out of the box".<br><br>Grisu <br><br></td></tr></table><br>
<a name="827056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty sure these mods are lurking somewhere on the forum, we've both been there before ;-) (google search may reveral all).  But the are mod tweaks which I don't like as I'd rather this stuff was standard.  Be nice to have this in V1.28 (hint hint), although it's not need for Macs as Macs seem to do it automatically. <br><br></td></tr></table><br>
<a name="827067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not mod tweaks at all, but API calls.  The following links should help for Windows.  As GA says, no need on Mac.<br><br>Link 1: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1318" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1318</a><br><br>Link 2: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1345" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1345</a><br><br>I think they're basically the same, but do other things you may find useful. <br><br></td></tr></table><br>
<a name="827088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help.<br><br>API calls are too slow and ugly. You'll see the window moving on screen when using them. Also you'll have to use the calls over and over -&gt; each time when switching between screenmodes.<br><br>@Alien: <br>Yes, it's the same old story. :/ <br><br></td></tr></table><br>
<a name="827096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> API calls are too slow and ugly. You'll see the window moving on screen when using them. Also you'll have to use the calls over and over -&gt; each time when switching between screenmodes. <br></div><br>True, but how many times does one switch between modes?  I'd imagine most people switch once to their preferred mode and leave it there.<br><br>The only time I switch a game I would normally play full-screen to windowed is when I'm running something in the background and want to keep an eye on it's progress.  But that's just me.<br><br>Still, it would be nice if BlitzMax did this automatically.  After all, Blitz3D did. <br><br></td></tr></table><br>
<a name="827171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> API calls are too slow and ugly. <br></div>YEah I used these instead of a mod fix BUT I don't like them as the window is first drawn in the top left for a fraction of a second, then redraws in the middle.  It looks bad.  Players who ALWAYS start in wondowed mode would see this EVERY time. <br><br></td></tr></table><br>
<a name="886701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is retarded behaviour and windows should be centered by default. <br><br></td></tr></table><br>
<a name="886711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surely it's not *that* hard to fix it?<br><br>Here's one for glgraphics.win32.c, in bbGLGraphicsCreateGraphics() method :<br><pre class=code>
	if( depth ){
		mode=MODE_DISPLAY;
		hwnd_style=WS_POPUP;
	}else{
		HWND desktop = GetDesktopWindow();
		RECT desktopRect;
		GetWindowRect(desktop, &amp;desktopRect);

		rect.left = desktopRect.right / 2 - width / 2;		
		rect.top = desktopRect.bottom / 2 - height / 2;		
		rect.right = rect.left + width;
		rect.bottom = rect.top + height;
		
		mode=MODE_WINDOW;
		hwnd_style=WS_CAPTION|WS_SYSMENU;
	}
</pre><br><br>It's not rocket science... <br><br></td></tr></table><br>
<a name="886714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> And for dx...<br><br>In d3d7graphics.bmx, TD3D7Graphics.Create() :<br><br><pre class=code>
		If depth
			hwnd=CreateWindowExA( 0,_wndClass,title,WS_VISIBLE|WS_POPUP,0,0,width,height,0,0,hinst,Null )
		Else
			Local style=WS_VISIBLE|WS_CAPTION|WS_SYSMENU
			Local rect[]=[32,32,width+32,height+32]

			Local desktopHWND:Int = GetDesktopWindow()
			Local desktopRect:Int[] = New Int[4]
			GetWindowRect(desktopHWND, desktopRect)
			
			rect[0] = desktopRect[2] / 2 - width / 2;		
			rect[1] = desktopRect[3] / 2 - height / 2;		
			rect[2] = rect[0] + width;
			rect[3] = rect[1] + height;
			
			AdjustWindowRect rect,style,0
			hwnd=CreateWindowExA( 0,_wndClass,title,style,rect[0],rect[1],rect[2]-rect[0],rect[3]-rect[1],0,0,hinst,Null )
			GetClientRect hwnd,rect
			width=rect[2]-rect[0]
			height=rect[3]-rect[1]
		EndIf
</pre><br><br>Now ask BRL nicely for implementation...  :-p <br><br></td></tr></table><br>
<a name="886716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just didn't want to manually modify my modules after every release so I'd prefer a BRL solution, although I have a workaround for now. <br><br></td></tr></table><br>
<a name="886719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I just didn't want to manually modify my modules after every release so I'd prefer a BRL solution <br></div><br><br>Because releases come so often :-) <br><br></td></tr></table><br>
<a name="886940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> well they used too... <br><br></td></tr></table><br>
<a name="886950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol. Yea, we just got one this past week-ish ;). <br><br></td></tr></table><br>
<a name="887010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eikon hooked everyone up.  Where'd he go anyways!? <br><br></td></tr></table><br>
<a name="887011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey - how do your solutions work on dual monitor displays?  Are they centred horizontally on the width of the primary display, or across the width of the two? <br><br></td></tr></table><br>
<a name="887019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have a dual monitor to try it out on.  It depends what GetDesktopWindow() returns, probably.<br><br>This is a nice example of multiple display position code : <a href="http://msdn.microsoft.com/en-us/library/ms534817.aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ms534817.aspx</a><br><br><br>Here's an exe of the following code using the modified BRL code : <a href="http://brucey.net/programming/blitz/misc/stuff/centered_dx.zip" target="_blank">centered_dx.zip</a> (75kb)<br><br><pre class=code>
SuperStrict

Framework brl.d3d7max2d

Graphics 640, 480, 0

While Not KeyDown(KEY_ESCAPE)

	Cls
	
	Flip

Wend
</pre><br><br>If anyone with dual setup wants to try it and see where it goes... :-) <br><br></td></tr></table><br>
<a name="887033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> it centres itself in the middle of my left hand monitor for me, but it might not be the same for each graphics card and OS.<br><br>(WinXP, Radeon X1300 Pro) <br><br></td></tr></table><br>
<a name="887040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, works fine for me using two monitors.  I didn't think it would.<br><br>Wonder if this could be shoehorned into 1.30 as a permanent fixture before release? <br><br></td></tr></table><br>
<a name="892567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can anybody else with a dual monitor setup try this please?  <a href="http://www.desktopgaming.net/downloads/test.rar" target="_blank">DirectX EXE built with Blitzmax 1.30</a> (tiny 64k download). <br><br></td></tr></table><br>
<a name="892804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems to work fine here, it centered itself in the middle of my primary display in Windows, and when I switched my secondary screen to be my primary, it then centered itself in that :)<br><br>I got a dual monitor setup, one 4:3 and one 16:10 (primary). <br><br></td></tr></table><br>
<a name="892868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works okay here too... one 19" and one 17"... both set to 12x10 res. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
