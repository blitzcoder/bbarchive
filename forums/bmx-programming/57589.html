<!DOCTYPE html><html lang="en" ><head ><title >Audio Import</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Audio Import</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Audio Import</a><br><br>
<a name="640538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I try using framework, my fps drops from 380 to 1fps... what am I missing here for ogg import?!?<br><br>I'm using ogg files and im importing the following:<br><br>Framework BRL.Basic <br>Import BRL.Max2D     <br><br>Import BRL.D3D7Max2D<br>Import BRL.MaxUtil <br>Import BRL.Audio<br>Import BRL.PNGloader<br>Import BRL.Retro      <br>Import BRL.KeyCodes<br>Import BRL.BmpLoader<br>Import BRL.timer<br>Import BRL.MaxGUI	<br>Import BRL.Win32MaxGUI<br>Import BRL.OGGLoader    <br>Import Pub.Win32<br>Import Pub.DirectX<br>  <br><br>What could cause the program to crawl now? <br><br></td></tr></table><br>
<a name="640547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this the only thing you changed when the FPS dropped? Or did you perhaps activate debug <br><br></td></tr></table><br>
<a name="640556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> when I comment out the audio part, it runs fine, when i add in the following (audio part) it drops to 1fps. However if I remove the framework/imports, it runs fine :S<br><br><pre class=code>

	If Not ChannelPlaying(channel)  
		Local done= False, n  
		While Not done 
			Local n = Rand(0,totalSongs)
			If n &lt;&gt; currentSong 
				done = True   
				currentSong = n 
			EndIf            
		Wend
		
		music = LoadSound(musicPath[currentSong])  
		If Not music Then RuntimeError("Unable to load the song '"+musicPath[currentSong]+"'")
		PlaySound music, channel 	
	End If  

	End If
</pre><br><br>ps. ive tried debug on off as well and it doesn't help. I must be forgetting an audio import? <br><br></td></tr></table><br>
<a name="640557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps its a broken ogg?<br>There have been issues because of that (oggs with incorrect header or incompatible) that cause problems<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=49567&amp;hl=ogg" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=49567&amp;hl=ogg</a> <br><br></td></tr></table><br>
<a name="640558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the quick response Dreamora, I'll go through that post more thoroughly tommorrow.<br><br><br>Why would everything work fine if ALL of the framework is included? It seems to only drop the fps to 1 (from 380ish) whenever I specify the framework above. <br><br></td></tr></table><br>
<a name="640568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> doh. thats why I asked if that was changed. So it does not drop if the framework part is not in (but the sound part is)?<br>ie the rem - end rem of the framework part makes all the difference? <br><br></td></tr></table><br>
<a name="640570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> doh. thats why I asked if that was changed. So it does not drop if the framework part is not in (but the sound part is)?<br>ie the rem - end rem of the framework part makes all the difference?<br><br>btw: you miss the pub.freeaudio module there. <br><br></td></tr></table><br>
<a name="640688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> right, I added in the pub.freeaudio,  If I do this<br><br><pre class=code>
rem
Framework BRL.Basic
Import BRL.Max2D

Import BRL.D3D7Max2D
Import BRL.MaxUtil
Import BRL.Audio
Import BRL.PNGloader
Import BRL.Retro
Import BRL.KeyCodes
Import BRL.BmpLoader
Import BRL.timer
Import BRL.MaxGUI
Import BRL.Win32MaxGUI
Import BRL.OGGLoader
Import Pub.Win32
Import Pub.DirectX
import Pub.freeaudio
endrem 
</pre><br><br>It works fine. In other words, The frame rate only drops when I have the framework in and the audio code. If I comment out the audio code, the fps is 380ish, if i remove the framework, the fps is 380ish. <br><br></td></tr></table><br>
<a name="640696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Regular K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Run through all the modules you need to import again, make sure you have them ALL.<br><br>Import a bunch of modules your not sure you need, but you might (like all of the sound modules).<br><br>Worth a shot? <br><br></td></tr></table><br>
<a name="640756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> just realized that there is even a brl.freeaudioaudio module *waiting for axe.freeaudioaudioaudio ;-)* ... perhaps that helps out?<br><br>As this imports pub.freeaudio, you don't need to import that manually anymore after importing brl.freeaudioaudio<br><br>there is as well a BRL.AudioSample<br><br>*somehow there came some new mods in the last versions I start to think and some disappeared or were molded into different ones* <br><br></td></tr></table><br>
<a name="640761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks dreamora for continuing to look into this. Is the brl.freeaudioaudio part of the latest release? I haven't upgraded to 1.18 because I read that ETNA was broken with the latest version and I need ETNA for high scores. <br><br></td></tr></table><br>
<a name="640929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know if you have tried my <a href="http://homepage.ntlworld.com/config/fa/index.htm" target="_blank">Framework Assistant</a> ?<br>It might help here. <br><br></td></tr></table><br>
<a name="640932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> gellyware: Have no idea if it was added with the newest but as you don't seem to have it, I assume so. In that case something else would be needed, but as mentioned by Jim Brown, the Framework Assistant theoretically should help. <br><br></td></tr></table><br>
<a name="641061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Dreamora and Jim Brown!<br><br>The framework assistant is a wonderful tool, great job on that on Jim. The only two imports that it missed were<br><br>Import Pub.Win32 'ETNA required this<br>Import BRL.Retro 'needed for the mid command<br><br>It seems the problem was that I was trying to import Pub.freeaudioaudio instead of BRL.freeaudioaudio<br><br>Way to be confusing BRL!!!! Seriously, that needs some attention.<br><br>The framework assistant should be an integral part of the bmax ide. <br><br>Would it be too dificult for the compiler to intelligently slim and trim the program by having an auto-framework option? (if command isn't working, search mods and insert an import??) <br><br></td></tr></table><br>
<a name="641063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Auto framework is *long* overdue! I cant off hand think of a compiler that automatically includes all libs it can possibly find...! <br><br></td></tr></table><br>
<a name="641066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Autoframework has a problem with the media part. On auto, it would include all image type loaders as well as all audio type loaders, no mather if you only use PNG, as the media is not known by the compiler (or better linker, the compiler does not know of anything actually) <br><br></td></tr></table><br>
<a name="641087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why couldn't the linker then look at any commands that load media and search backwards from from the string until a valid media type is found.  g....n....p  ok, png found. if not already imported, Import BRL.PNGloader <br><br></td></tr></table><br>
<a name="641089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because you can load files from a file with strings in. There is no possibility to do that effectively on buildtime, which is why media imports need to be done manually.<br>I'm not even mentioning user modules. There any automatic would definitely break ... the precompiler would be needed to be tought for any module existing in your installation and thats definitely more work that use.<br><br>And just to mentioned: C / C++ / C# etc do not do it automatically as well, so no real problem with that.<br><br>PB and some others might do it, but they have no fully module based approach, they have their core modules that have their predefined build.<br><br>But I agree, the Framework Assistant should become a default tool attached or integrated to the BM IDE at best.<br>How about getting it into the community build of the IDE? (its superior anyway) <br><br></td></tr></table><br>
<a name="641097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> The compiler could just do what framework assistant already does...  FA can pickup custom mods no problem<br><br>then its just up to the user to manually whatever imports they need for the media they are using.<br><br>To be honest what we have currently just looks like a cludge and one I'd kinda assumed BRL would resolve... <br><br></td></tr></table><br>
<a name="641134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moogles</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes. jim should get in and help with the max community ide and help perturbatio and others implement this. :) <br><br></td></tr></table><br>
<a name="641235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gellyware</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've upgraded to the latest version of bmax after hearing a few people tell me that the music is cutting in and out on their system. The cutting in and out is still an issue... is anyone else having problems with ogg's??<br><br><br>Hm... maybe this is what you were talking about earlier Dreamora with the ogg headers. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
