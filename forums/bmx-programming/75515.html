<!DOCTYPE html><html lang="en" ><head ><title >MMORPG</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MMORPG</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >MMORPG</a><br><br>
<a name="843774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i may not be the first to start a topic on MMORPG, but im not going to ask you to make one for me :P (would be nice tough, hah)<br><br>Ive done a little game with +-50 players, using a ClickTeam product called MultiMedia Fusion, based on TCP/IP. Ye, it lagged my socks off if lots of stuff was happening but i spend a year at least trying to master some dead-reckoning techniques and packet filtering and stuff.. so i pushed it far. But im not happy. I want to support at least 250 playes on 1 server. That is the reason i plan to switch all to BlitzMax.<br>However, What i miss here is a server/client framework that handles connections and all that. Basicly, i have my sockets in blitzmax and need to setup a good mangement arround that.<br>Does anyone know a good and if possible, up-to-date library that can help me get this done?<br>Your input is very much apriciated. Thanks. <br><br></td></tr></table><br>
<a name="843781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm thinking of porting my BlitzMax stuff to Python on the server side. Many modules for every case. Speed can be handled by integrating C parts where needed. Threading included. I have nearly finished my proxy simulation with BlitzMax now. A soon as I have gathered enough information I will decide what to use. Seems that I can get away without Java, which I find to be too scary due to its complexity. <br><br></td></tr></table><br>
<a name="843782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ye, i heard Python is like a no#1 to build servers in. <br><br></td></tr></table><br>
<a name="843791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That is the reason i plan to switch all to BlitzMax. <br></div>That's a rather poor choice considering BlitzMAX doesn't support (and likely isn't ever going to) multithreading.<br><br><div class="quote"> I can get away without Java, which I find to be too scary due to its complexity. <br></div>You won't be liking Python much then. Python is at least an order of magnitude more complex than Java.<br><br><div class="quote"> i heard Python is like a no#1 to build servers in. <br></div>You heard wrong. Erlang is by far the best language for server applications. Java and C# are distant seconds. Python is not even on the list. <br><br></td></tr></table><br>
<a name="843796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Python is at least an order of magnitude more complex than Java. <br></div><br>explain please...<br><br><div class="quote"> Erlang is by far the best language for server applications. Java and C# are distant seconds <br></div><br>Erlang I belive, Java too, but C#?? Considering that most servers run under some sort of Unix or Linux how can C# be? <br><br></td></tr></table><br>
<a name="843808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a rather poor choice considering BlitzMAX doesn't support (and likely isn't ever going to) multithreading.<br><br>You serious?! man, that sux. But wouldnt it still work for 250?! its only an RPG, no FPS or something fancy... hmmm... <br><br></td></tr></table><br>
<a name="843813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, RealmCrafter (the old standard version) is built with BlitzPlus and Blitz3D and it works, so 250 shouldn't be any problems IMO. <br><br></td></tr></table><br>
<a name="843818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> explain please... <br></div>It has more features and a different philosophy than Java. Duck typing vs. inheritance, late binding vs. early binding, lambda calculus vs. nothing, the list goes on.<br><br><div class="quote"> Considering that most servers run under some sort of Unix or Linux how can C# be? <br></div>There are plenty of C# compilers for Unix/Linux. Besides most MMORPG servers most certainly do not run Linux.<br><br><div class="quote"> But wouldnt it still work for 250?! <br></div>Well that depends on quite a few factors, including but not limited to the hardware and amount of data involved. The main problem here is that as the numbers of players increase linearly, the amount of data and traffic increases exponentially. Solving this issue is an NP-complete problem. <br><br></td></tr></table><br>
<a name="843827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well Python doesn't seem to be this bad...<a href="http://www.stackless.com/wiki/Applications" target="_blank">Stackless Python</a><br>I think Python as Server and BMax as Client seems quite nice.<br>But I have some time to decide yet... <br><br></td></tr></table><br>
<a name="843832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well Python doesn't seem to be this bad. <br></div>Stackless Python is not Python. And I never said it was bad. I'm saying it's nowhere near as good as Erlang, and if you're going to learn a new language anyway, you might as well go with one that was designed for scalability and concurrency from the beginning, rather than one that has been hacked on top of an existing language.<br><br><div class="quote"> I think Python as Server and BMax as Client seems quite nice. <br></div>Well, don't let me stand in the way of your happiness. <br><br></td></tr></table><br>
<a name="843834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I want to support at least 250 playes on 1 server. That is the reason i plan to switch all to BlitzMax. <br></div><br><br>That seems a bit hasty, considering that network calls in BlitzMax block your program execution while it's waiting to receive the results.<br><br>If you're running into socket lag issues already, then I doubt that Blitzmax is going to be the answer here... (Not without using some external DLL's or something for network handling, at least... The built-in functionality probably won't be sufficient for what you are trying to accomplish.) <br><br></td></tr></table><br>
<a name="843865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raph</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> All major MMORPGs are written in C++, afaik. <br><br></td></tr></table><br>
<a name="843870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> considering that network calls in BlitzMax block your program execution while it's waiting to receive the results <br></div>So what you're saying is that multiplayer in BMax will always suck? <br><br></td></tr></table><br>
<a name="843886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does Blitzplus work differently or why is it that a server coded in Blitzplus actually works (RC)? <br><br></td></tr></table><br>
<a name="843887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> "BlitzMax block your program execution"<br>I must have not noticed.. but if that is true, that indeed could be a problem... aww. I so liked BlitzMax. I already have my RPG loader, that read from the oldgame mapstructure. So i render now in BlitzMax what used to be rendered in MMF. Its lots faster in BlitzMax.<br>How come tough, that RealCrafter was working out so  well? <br><br></td></tr></table><br>
<a name="843955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> All major MMORPGs are written in C++, afaik. <br></div>Puzzle Pirates is written in Java.<br><br><div class="quote"> So what you're saying is that multiplayer in BMax will always suck? <br></div>No. Clever level design and/or beefy hardware will be able to compensate somewhat. Also there are certain software architectural choices you can take to work around this issue.<br><br><div class="quote"> Does Blitzplus work differently or why is it that a server coded in Blitzplus actually works (RC)? <br></div>Without actually seeing the RealmCrafter source code, there is no way to tell for sure. I'm guessing that either a) It doesn't scale as well as you assume, or b) That some workaround is being used.<br><br><div class="quote"> How come tough, that RealCrafter was working out so well? <br></div>Just how well? Has anyone actually tried running an RC game with 250 consecutive players? <br><br></td></tr></table><br>
<a name="843957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barbapapa</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I emailed them  a short time ago.<br><br><div class="quote"> <br>3) How many clients can I have at one time in a zone?<br> <br>A-3: The answer is that it depends on the individual connection quality. Upload speed is more important than download. It also depends on the distribution of players and of NPCs, and the Server machines RAM. Here are some estimates based on our testing.<br><br>512k cable: 15 players<br>2 Mb cable: 40 players<br>10 Mb cable: 400 players<br>100 Mb cable: 3000 players<br> <br></div><br><br>If you buy RC now, you get the source-code for the standard version and the pro version (c++) free when it comes out but without the source code.<br><br>So, it seems to work well enough with Blitzplus... <br><br></td></tr></table><br>
<a name="843966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would go with something that uses UDP not TCP and make your data really compact and design your own networking system.<br><br>I was reading the x-wing vs tie fighter networking article where they had like 8 players with only 28k bandwidth, so you should be able to get more than 15 from 512k. <br><br></td></tr></table><br>
<a name="843984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> 100 Mb cable: 3000 players, thats cool. I got one of those. Seems 250 aint a problem then :P<br>Now all i need todo is have a Linux compatible serverside. <br><br></td></tr></table><br>
<a name="844017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Here are some estimates based on our testing. <br></div>That sounds somewhat dubious. If we accept that 15 players on a half-megabit is the base line, a quadrupling of bandwidth only allows for 2.5 times as many users (which seems accurate, considering the exponential nature of bandwidth requirements as mentioned before). However then a factor 5 increase in bandwidth allows for a factor 10 increase in players, which seems implausible at best. Lastly the idea that an order of magnitude increase in bandwidth allows more than a factor seven increase in players is unrealistic. This is not even close to an exponential function (which is what you would expect, in fact in some places it's the exact opposite) which can only lead to one of two possible conclusions. a) RealmCrafters heuristic network algorithm is better than any professionally developed MMO currently in existence (Blizzard can't even run 3000 consecutive players on one of their servers) b) the numbers in the higher end of the scale could charitably be described as extrapolated incorrectly, or uncharitably be described as lies.<br><br><div class="quote"> I would go with something that uses UDP not TCP and make your data really compact and design your own networking system. <br></div>Making your data really compact is not necessarily your best option.<br><br><div class="quote"> 100 Mb cable: 3000 players, thats cool. I got one of those. <br></div>Nice! We can't get more than 25Mb in our country. Unless you want to pay entirely too much for your Internet connection.<br><br><div class="quote"> Seems 250 aint a problem then :P <br></div>Hahah. Famous last words. <br><br></td></tr></table><br>
<a name="844021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> A big portion of it doesn't have to deal with just the network speed, but the way things are processed and ofcourse, the hardware.<br><br>Saying that the bandwidth increases by an exponential factor for every player added I would think is only true if your application is extremely unoptimized. For 3d games, you're not going to send movement and action packets from a player at coord [x,y]:  0,0,0 to a player at coordinate 10000,10000...hiding behind a wall with a fog-view distance of 1000.<br><br>And in 2d games, you're only sending actions done by players within the screen region....why would you update every player in a 200x200 map when the screen is only 30x20?. I don't recall games where every player decides to join the exact same map in the exact same location for 'playing' (maybe pvp...so have another server host that map).<br><br>Optimize the packets...make the clients do the dirty work. Dont send packets like: <br><br><b>"Position,115,36,"</b><br><br>Although it's pretty and easy to understand the packets that way....its horrible.<br>Const PositionPacket:byte = 1<br><b><br>writebyte(PositionPacket)<br>writebyte(115)<br>WriteByte(36)<br></b><br>turns out like : "<b>s$</b>"<br><br>Even that can be optimized better.<br>I wish I didn't have to agree with FlameDuck that I really doubt the single server can run for 3000 players simultaneously. Unlimited bandwidth doesn't mean unlimited users. It just doesnt work that way. It's also pretty doubtful that you'll ever really need 250 people in a single area. If you have a community where you have &gt;250 players on at once...i'm sure you can add some effort into coding for interacting servers (that each run a seperate area/map) and afford them to say the least. <br><br>Blitzmax can definitely do the job. Just work around things. <br><br></td></tr></table><br>
<a name="844028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> You shouldn't send those bytes one by one, use writebytes (or equivalent). <br><br></td></tr></table><br>
<a name="844034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also I read that ideally you should make reasonable sized packets so you need to join several pieces of information together into one packet if possible rather than get all the extra packet overhead.<br><br>Also are you going with a single server for all users or are you making some users offload some of the server work? Or peer-to-peer even? <br><br></td></tr></table><br>
<a name="844038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Best way to send packets is using SSPP<br>Basicly that meens ending a short with the lengt of the packet. The packet is send in bytes. Done. <br><br></td></tr></table><br>
<a name="844071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Saying that the bandwidth increases by an exponential factor for every player added I would think is only true if your application is extremely unoptimized. <br></div>Optimized for what? Which is faster, just sending all the data, or figuring out which objects can see other objects? Traversing a dense graph, is very time consuming (at best polynomial time, most likely factorial time).<br><br><div class="quote"> why would you update every player in a 200x200 map when the screen is only 30x20? <br></div>Because doing the math to figure out, for each player, which other player is within their "area" is an NP-complete problem, not solvable in polynomial time? Sure it works well for small amounts of players, but 3000! is a HUGE number. Even if checking every object in the game world only took 1 CPU cycle, calculating the exact solution, would take forever.<br><br><div class="quote"> Best way to send packets is using SSPP <br></div>A what?<br><br><div class="quote"> Basicly that meens ending a short with the lengt of the packet. The packet is send in bytes. Done.  <br></div>The UDP header already contains the size of the packet. Adding redundant data doesn't seem like it's an efficient thing to do. <br><br></td></tr></table><br>
<a name="844089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Optimized for what? Which is faster, just sending all the data, or figuring out which objects can see other objects? Traversing a dense graph, is very time consuming (at best polynomial time, most likely factorial time).<br> <br></div><br><br>Optimized for bandwidth. I personally don't want applications sending me all kinds of useless information. When i'm alone on the screen/large area, I don't think I should be recieving 50 packets/s of the 15 players moving on the other side of the map. If the extremely minor delay of doing some checks is caused, it would make up for the client-side not having to process all the useless packets. <br><div class="quote"> <br>Sure it works well for small amounts of players, but 3000! <br> <br></div><br>And continuing what I said, what game have you ever seen with 3000 people in the same area? I have gone through so many stages of online mmo's that I get no enjoyment from gameplay anymore and I still have not seen more than a couple hundred in a single map/large scaled area.<br><br>Doesn't Eve Online use a single server? And it's complete crap from what i've heard....the lag. A server might be able to handle a couple thousand players, by spamming packets without checks but wouldn't the client just lag over completely defeating the purpose? I only have some experience in hosting game servers, and certainly not thousands of players simultaneously. But I think it's the wrong approach to even plot the idea.<br><br>All the professional games I have come by used seperate servers for every area. Not seamless...but even that could be achieved with seperate servers. Everquest, Anarchy online, Project Entropia [Seamless I believe], WoW (as much as I despise blizzard), etc. <br><br>It would be cheaper to rent several servers that can host several different maps/areas rather than a single server and line that is truly capable of hosting it all. Initial load times would be ridiculous, server restarts &amp; crashes would require the entire game go down, rather than zones at a time which can be extremely advantageous for updating small parts of the game, only nudging a small portion of the community for a short while.<br><br>I'm thinking for the customers|player-base. Not what's easier for me. <br><br></td></tr></table><br>
<a name="844111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tab</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> FlameDuck allways says the same things without concrete bases. <br><br></td></tr></table><br>
<a name="844129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> FlameDuck, it is just stupid to send every coordinate of every player to every other player. If you have 3000 players your internet connection will explode. Just use an array to save the positions of characters, which makes it super fast to check whether there are other players nearby. <br><br></td></tr></table><br>
<a name="844144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the RC stuff: RC uses UDP. UDP is not blocking, its only TCP that uses blocking calls ... although it does not use blocking calls ... its just how TCP works: It sends till it gets the acknowledge that the message was received ... and as Blitz does not handle TCP connections in their own thread as any "modern" language, which BM still wants to be called, TCP is a no go for realtime, still nice for meta server handling, login, update downloads etc etc where a real stream is needed, especially everything on the HTTP and FTP protocol. <br><br></td></tr></table><br>
<a name="844219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I love FlameDuck. <br><br></td></tr></table><br>
<a name="844237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, Seems FlameDuck is legendary. Both hated and loved. <br><br></td></tr></table><br>
<a name="844275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad to hear that UDP doesn't wait. When you are trying to read the port to see if there is UDP data arrived, does that wait for something to arrive or just return an error if empty? <br><br></td></tr></table><br>
<a name="844284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there actualy a way to send over TCP without stream? <br>On the serverside you can instead read the received bytes. <br>In my experiance, If you open a stream its going to block the main loop.<br><br>Here is the servercode i wrote, maybe it is usefull to anyone:<br>(Do not that i got lost trying to receive the bytes _without_ stream, so it still needs some work. Basicly this demonstrates the basics of connecting and storing clientconnections.)<br><pre class=code>
Graphics 320, 480, 0

Local My_server:TSocket=CreateTCPSocket()
BindSocket My_server,1233
SocketListen My_server

Type TClient
	Field sock:TSocket
	Field stream:Tsocketstream
	Field buffer:TBank
	Field data:TList
	Field lastmsg:String
End Type

clients:TList = CreateList()

While Not KeyDown(KEY_ESCAPE)
	'New connection?
	Local sock:TSocket=SocketAccept(My_server)
	If sock
		c:TClient=New TClient
		c.sock = sock
		c.buffer = CreateBank()
		c.data = CreateList()
		ListAddLast clients, c
	EndIf
	'Show connections
	DrawText "&gt;Loops: "+l,10,10
	DrawText "&gt;Connected: "+CountList(clients),10,20
	l:+1
	offset=30
	For c:TClient = EachIn clients
		'Connected?
		If SocketConnected(c.sock) Then
			clientname$ = DottedIP(SocketRemoteIP(c.sock))
			
			'New data/packets?
			buf=SocketReadAvail(c.sock)
			Rem
			bufsize=SizeOf(buf)
			size=BankSize(c.buffer)
			ResizeBank(c.buffer,1000)
			For p=0 To bufsize-1
				b:Byte=Byte(Mid(buf,p,1))
				If b=Null Then
					'Que packets
					ListAddLast c.data, c.buffer
					c.buffer = CreateBank()
				Else
					Print size
					Print bufsize
					Print p
					PokeByte(c.buffer,size+p,b)
				End If
			Next
			
			'Prossess packets
			For d:TBank = EachIn c.data
				data$=""
				For p=0 To BankSize(d)-1
					data=data+Chr(PeekByte(d,p))
				Next
				c.lastmsg=data
			Next
			EndRem
			For p=0 To SizeOf(buf)-1
				c.lastmsg=c.lastmsg+Chr(Int(Mid(buf,p,1)))
			Next
				
			DrawText clientname$+": "+c.lastmsg,10,offset
			offset:+10
		Else
		'Disconnect?
			CloseSocket(c.sock)
			ListRemove clients, c
		End If
	Next
	Flip
	Cls
Wend

For c:TClient = EachIn clients
	'CloseStream(c.stream)
	CloseSocket(c.sock)
	ListRemove clients, c
Next
</pre> <br><br></td></tr></table><br>
<a name="844296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> no TCP is a stream bound format.<br>If you don't want a stream -&gt; UDP<br>If you want reliable UDP and ordered -&gt; Pub.ENet <br><br></td></tr></table><br>
<a name="844299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do server/client stuff in BlitzMax, im using it for Elite Multiplayer. It is true the more players you have the more bandwidth you require for example 64bytes per packet for one player (say 10 packets a second is 640bytes). Now if you have ten players thats 6400bytes so the more you add the more bandwidth you need to keep it flowing properly.<br><br>Yes it doesnt have multithreading but not all server stuff requires it, yes TBH its down to the programmer not the language. Hell I wrote a game with a mate back in 1990 using Turbo Pascal and that handled 128 players over IPX. <br><br></td></tr></table><br>
<a name="844348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the difference between using ENet and using standard socket commands? Is ENet any faster? <br><br></td></tr></table><br>
<a name="844362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> When i'm alone on the screen/large area, I don't think I should be recieving 50 packets/s of the 15 players moving on the other side of the map. <br></div>That's really clever. How does the computer determine that you're alone in an area?<br><br><div class="quote"> If the extremely minor delay of doing some checks is caused <br></div>A algorithm running in non-polynomial time is NOT a minor delay for any non-trivial amounts of clients.<br><br><div class="quote"> And continuing what I said, what game have you ever seen with 3000 people in the same area? <br></div>Plenty of times. If you want a list, Eve Online, City of Heroes, World of Warcraft, and Tabula Rasa.<br><br><div class="quote"> And it's complete crap from what i've heard....the lag. <br></div>Well I don't find it particularly enjoyable, but the lag is fairly reasonable. Certainly compared to games like Tabula Rasa.<br><br><div class="quote"> But I think it's the wrong approach to even plot the idea. <br></div>I didn't say it was the right idea. I'm advocating a heuristic approach, where you send some superfluous data, potentially avoiding the factorial time complexity of traversing a dense graph.<br><br><div class="quote"> FlameDuck allways says the same things without concrete bases. <br></div>While I appreciate your ad hominem argument, it doesn't exactly contribute constructively to the debate. Think I'm wrong? Prove it. As it happens I have plenty of concrete experience in this area. Developing distributed systems is what I do for a living.<br><br><div class="quote"> Just use an array to save the positions of characters, which makes it super fast to check whether there are other players nearby. <br></div>How? How do you not have to visit n! (factorial) amount of entries in the array in order to determine how many players are nearby? If you have an actual solution for how you can solve an NP complete problem like the traveling salesman problem (which is the closest analog to this problem) step forward and claim your turing award young man, you'll be famous! <br><br></td></tr></table><br>
<a name="844370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whats a "___NP____ complete problem"?<br><br>So, what is wrong with:<br><br>'clients:Tlist<br>for c:TClient = EachIn clients <br>c.x&lt;&gt; etc..<br>c.y 'compare positions?<br>next <br><br></td></tr></table><br>
<a name="844374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Because doing the math to figure out, for each player, which other player is within their "area" is an NP-complete problem, not solvable in polynomial time? Sure it works well for small amounts of players, but 3000! is a HUGE number. Even if checking every object in the game world only took 1 CPU cycle, calculating the exact solution, would take forever. <br></div><br><br>Umm... no it's not. It's roughly linear to the number of zones you have, depending on how you do it. Just insert the players into buckets, and have a worst case list of what zones can see each other.<br><br>This of course neglects that player in zone a can see player in zone b can see player in zone c. That's a reasonable tradeoff. But even if you don't do that, it's just a mark and sweep per player, which is O( n^2 ) not O( n! ). Which is an unpleasant growth when you're trying to deal with 3000 players on a single server, but you should be using buckets anyway and if you don't packet growth will also be O( n^2 ).<br><br>I'm not 100% convinced Erlang is a sensible choice for an MMO server. I mean it blows away C++, Java, Python (GIL). But you could probably use a commercial lisp implementation (like Franz) and achieve most of the benefit. That's more of a language preference on my part though, I guess.<br><br>I will probably write my games server in Python, but that's only because I'm going to be using it on a single threaded EC2 instance anyway. <br><br></td></tr></table><br>
<a name="844376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ive been thinking about the buckets idea of Michael. What about when players move zones, you remove them from the zone bucket, and put them in another bucket?<br>meens each zone has a bucket.  using a TList in a TBank, would work rather quick and efficient i think asuming your banks are named like "x0y0z0", etc.. <br><br></td></tr></table><br>
<a name="844382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd use a TMap, that way you're not doing unsafe casting to/from an int. You can probably clear the TMap each frame, I mean it's not exactly a taxing operation rebuilding it (n inserts per player, where n is the number of zones that can possibly see each other - probably 9 in a 2D game). Keep in mind that you have to keep the player in all zones that can see the player, not just the one he's currently in (think of a border case).<br><br>The zones also have to be bigger than the players sight range, otherwise you can 'skip' a zone and it will be able to see more than its neighbours. <br><br></td></tr></table><br>
<a name="844391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> *ugh*, i dont know why i wrote TBank, i ment to say a TMap haha. ofcorse. :P <br><br></td></tr></table><br>
<a name="844396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to just use a 3D array if the memory required is reasonable. So if you've got 40x40 zones, I'd just create a TList[,] and eat the (minimal) allocation cost. If you've got 1000x1000x1000 zones, then you're better off using a TMap. Of course, if you've got a billion zones you've probably got a really clever algorithm for generating/packing them, so... <br><br></td></tr></table><br>
<a name="844407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tab</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> @FlameDuck<br>Sorry, but... I don't need probe anything, your words prove the wrong way in terms of how a MMO server work. <br><br></td></tr></table><br>
<a name="844421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Like I said, I've never hosted a 3000 player server, but I have hosted very large world content and what I did was create an array for every position.<br><br>A Map of 100x100x1[levels in map] had a [100,100] array, and when a player moves into a position, that arrayed integer would be changed to the index of the player. This kind of checking is trivial and very minimal in costs.<br><br>About your "NP-complete system". I have seen many games run several hundred players via TCP and using this by-view checking (Either that or worse: distance checking). The title is MMORPG, not MMOFPS. <br><br>I have no problems at all with you flameduck, as these spit-backs are a good way to open up new questions, theories and answer uncertainty. I am very impressed though that you have seen 3000 user models (players) in a single scene, and recieving updates for each one in every one of those games. I've just asked several people I know that are heavily retarded in WoW who claim to never have seen anything like that, even during events.<br><br>It seems most of us think that you're wheel is square. Can you completely elaborate your method?<br>For example:<br><div class="quote"> <br>Which is faster, just sending all the data, or figuring out which objects can see other objects<br> <br></div><br><br>Can you explain how sending all the data to all the players (even if they will never have use of that data) is helpful for running a multi-thousand populated server? How all those packets to each of the 3000 players would not lock up both the clients AND the server?<br>If you can give us an elaborate answer to that, I think you'll have presented us a breakthrough in our primative design.<br><br>Time <br><br></td></tr></table><br>
<a name="844426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No. Clever level design and/or beefy hardware will be able to compensate somewhat. Also there are certain software architectural choices you can take to work around this issue.<br> <br></div>So basically then, multiplayer in bmax will always suck...  <br><br>I thought someone came up with a way to make the sockets non-blocking?  Or maybe it was Blitz3D.  Either way I'm sure with the ingenuity around here it can be overcame eh? <br><br></td></tr></table><br>
<a name="844492"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shouldn't this be quite fast?<br><br><pre class=code>
Const Width=2000,Height=2000
Const ScreenWidth=20,ScreenHeight=20
Type Player
	Field ID
	Field X,Y
	Global List:TList
	Global Map:Player[Width,Height]

	Method New()
		X = Rand(0,Width-1)
		Y = Rand(0,Height-1)
		ID = Player.List.count()
		ListAddLast(Player.List,Self)
		Player.Map[X,Y] = Self
	End Method
End Type
Player.List = CreateList()

For t=0 To 3000
	Local p:Player = New Player
Next

'Loop players
For p:Player = EachIn Player.List
	For i=-ScreenWidth*0.5 To ScreenWidth*0.5-1
		For j=-ScreeHeight*0.5 To ScreenHeight*0.5-1
			If i+p.X&gt;=0 And j+p.Y&gt;=0 And i+p.X&lt;Width And j+p.Y&lt;Height Then
				Local p2:Player = Player.Map[i+p.X,j+p.Y]
				If p2 &lt;&gt; Null And p &lt;&gt; p2 Then
					Print p.ID+" sees "+Player.Map[i+p.X,j+p.Y].ID
				EndIf
			EndIf
		Next
	Next
Next
</pre> <br><br></td></tr></table><br>
<a name="844502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Chroma: UDP is not locking<br>You can do that with BM. But most here already strugle with using pure sockets, so they definitely will struggle with stuff thats 2 level of that complexity wise. <br><br></td></tr></table><br>
<a name="844552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there actualy any UDP server + client demo's?<br>I found many libraries tough.... <br><br></td></tr></table><br>
<a name="844559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> with the old bnet there was the 2 player jump'n'run tutorial.<br>For the new BNetEx versions there isn't any but you still could use that tutorial as base (its linked on assaris 2dgamecreator.com page).<br><br>If you want to go pure UDP, I would suggest using BNetEx <br><br></td></tr></table><br>
<a name="844574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well am i the only one that dosent have problem blitzbasic tcpip :D<br><br>my engine aim is 1000 users.<br>at 50 users i have no lag at all.<br><br>My engine written in blitz pluyss is tested this wia millisecs() command from 50 clients connected over 3g network) <br><br></td></tr></table><br>
<a name="844577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> test the game in reality ie with internet latency. network straight within a LAN is not realistic nor will it show the least problems. <br><br></td></tr></table><br>
<a name="844609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora is correct. I have used tcp + blitzmax for one of my projects. It's basically a project that allows multiple users to create maps, item databases, animations, etc. With only 2 people (pinging 90 from eachother, and 70 from the master server) setting tiles, there was very odd response times in setting the tiles. The opposite user was able to send me messages via aim sometimes before tiles he set would show on my screen. <br>I was hoping dreamora was exagerating, but I made another similar test in VB6 using TCP with virtually no latency. I also tried this in blitzmax by myself, running multiple clients and ofcourse there was no latency. But testing with players &amp; latency &amp; master server = caka.<br><br>TCP+BM might be usable for things like multiplayer texas holdem, but I just lost all enthusiasm with BM + tcp for an online game to host 10+ players.<br>Wings, can I suggest to you what i'm suggesting to myself? Create a reliable udp method or use one of the available libraries that support it. It will improve response times for non-congested networks anyways.<br><br>I hope no one here is getting discouraged by blitzmax. It's still a great language that makes up for its flaws. And i'm sure one day mark will fix this issue in BM (when he stops itching at max3d and scratches a couple older issues), even though it's not worth waiting for because there are other options, all of which Dreamora has posted many times in topics that relate to this. <br><br></td></tr></table><br>
<a name="844611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> My suggestion would be a Pub.ENet wrapper.<br>Its simple, lightweight and has Reliable as well as ordered support so you could even replicate TCP behavior. <br><br></td></tr></table><br>
<a name="844622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly, what is the difference between ENet and blitzmax raw sockets?<br><br>And why isn't blitzmax sockets the same as visualbasic sockets? Isnt a socket a socket?<br>(sorry for my lag of understanding here)<br><br>You should know i moved from one thing to the other, that is to blitzmax, for its online support. Am i doing something wrong here?<br>If i hear that BMax TCP can only support arround 10+ players im concerned, either about the skill level on MMO games, or BlitzMax. Having seen whos posting here and what they came up with, i rather doubt BlitzMax and rest assured there is nothing wrong with the  skills.<br>But to let you know, i accomplished writing an 2D RPG engine on TCP for arround 50 players. Yes, we had lag, and sometimes a player would warp all around the map or run from one point to another. But it was acceptable. The packets send where like on average only 1 each second. Basicly i send only when the direction or speed changed. It is, as if you are controlling (remotely) a robot/ball that goes ahead without new orders. That also explains why players where wrapping crazy sometimes.<br>I find sending X,Y positions over either TCP or UDP rather primitive. Its really not nessesary to just boom out the positions in every loop. For security reasons you can do it like once every 5 sec so the ball keeps on track.<br>On the other end you have a delayed interpolation to catch up the flaws. Result is tough, that there is a few sec delay always between A and B. <br>Having interpolation without delay would be pointless.... I hope im making sense :P <br><br></td></tr></table><br>
<a name="844635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> I personally don't understand the difference between the two, I only tested with my projects and relayed the problematic results here. I was going to use raknet instead, but Enet is free and open source it seems. <br><br>As for the difference...I think ENet is more sophisticated and includes much of which will just take you more time to develop (such as reliability, and a few other features). <br><br></td></tr></table><br>
<a name="844661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, a lot of bad information floating around this thread...  :) <br><br></td></tr></table><br>
<a name="844665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> You meen different options are discussed? i cannot see what is bad about it :) <br><br></td></tr></table><br>
<a name="844671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Enet offers reliable and ordered packet sent. A raw socket is just that ... UDP is not reliable nor ordered, so packet order can change during its travel or they can get lost.<br>thats it. <br><br></td></tr></table><br>
<a name="844793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I don't need probe anything, your words prove the wrong way in terms of how a MMO server work. <br></div>My MMO server works just fine thanks.<br><br><div class="quote"> I've just asked several people I know that are heavily retarded in WoW who claim to never have seen anything like that, even during events. <br></div>That's because WoW doesn't support that many concurrent players. However player positions are not the only things you need to send information about. You don't really need 3000 players to have 3000 game objects that need data sent through the pipe. One example of a game like this is City of Heroes were they have a pop-up that reads something to the effect of "You have been hit by more than 1000 particle effects - performance may suffer as a result".<br><br><div class="quote"> Can you explain how sending all the data to all the players (even if they will never have use of that data) is helpful for running a multi-thousand populated server? <br></div>It's not a matter of being helpful. It's a matter of which is faster. Sending all the data requires some fairly decent pipes - determining which objects are visible to EVERY PLAYER IN THE GAME requires ridiculous amounts of processing power. My solution is a heuristic algorithm that determines when further calculations on the data set are to "expensive" in terms of lag, and just sends the result. It works reasonably well, but still has room for optimization.<br><br><div class="quote"> Shouldn't this be quite fast? <br></div>Compared to what? From what i can see you've got 3 levels of nested loops, and are possibly missing one. Both Michaels method and mine should give better on average results. Michaels will give better best case results, mine better worse case results.<br><br><div class="quote"> Exactly, what is the difference between ENet and blitzmax raw sockets? <br></div>ENet is much more abstract. <br><br></td></tr></table><br>
<a name="844800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> A quick question about something, in all this talk of figuring out what players are visible, you are referring to the server determining this and only sending to clients information about visible players, correct?  Sorry for such a dumb question, but nobody has said this explicitly and I want to make sure people aren't referring to something else that I'm missing.<br><br>Also, dreamora made reference to bnet/BNetEx.  What's that?  Is that related to the GNet module that comes with BlitzMax? <br><br></td></tr></table><br>
<a name="844968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simple way to determine who can be seen and what data to be sent can be done by using an overlapping grid.<br><br>If someone is in your grid area or any of the overlapping grids, then send their data because they may be visible.  This is similar to the way EQ originally used zones.  But you don't have to load from zone to zone.  And the overlapping areas makes it so that you don't have to worry about two people being at the edge of two separate areas but being right next to each other and not able to see one another.  Each area just needs to be a bit large than how far a player can see or be affected by another player.<br><br>I hope this makes sense.  Needs a picture to illustrate it I think.<br><br>A server is not just one machine in a big MMO like WoW.  Every WoW server is actually a farm of MANY computers.  No way one machine is going to handle 3000 players.  Hell, probably not even 1000.<br><br>You need a very fast backend database for storage, which should be a separate machine as well.  You can't just keep it all on the one machine in memory, because a server failure will lose all the data.  You would then have to go to your last backup, which could be hours or days.  No players are going to want to lose hours or days of progress in the game.<br><br>A server in an MMORPG does a LOT more than just send data to players.  It has to verify that everything the player wants to do is possible to keep players from cheating.  It has to manage the actions of ALL NPCs and other objects.  There is a lot going on in the background other than forwarding info from one player to another.<br><br>And as for Puzzle Pirates being written in Java.  I have no doubt the client is Java.  The server, that is probably C++ . <br><br></td></tr></table><br>
<a name="845759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paposo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look to quadtree struct for make a grid.<br><br>Ahhh! Java is very eficient making servers and run as -server flag. The speed is like C++ using NIO.<br><br>Bye,<br>    Paposo <br><br></td></tr></table><br>
<a name="845764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could keep a sorted list of all players coordinates and whenever two players swap positions you swap their positions in the sorted list (ie don't have to sort the whole lot every time), and then you can figure out what range of players are within a given zone or grid cell and only include those players. This way you are not necessarily restricted to grid-cell-resolution. <br><br></td></tr></table><br>
<a name="845781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> FlameDuck, are you on crack? I'm not missing a loop, and I'm just scanning all the tiles nearby the player. You could optimize that by using another array which tells whether a nXn rectangle from the map contains a player, but I just made up a simple example to show the idea. <br><br></td></tr></table><br>
<a name="845811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> What if it were not a tile-based game? <br><br></td></tr></table><br>
<a name="845833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> make it virtual grid based by dividing it into AxB sized areas.<br><br>"non tile based" is an approach that only works if you write a 3D engine highly opted for different pick and check operations so AI can be world aware ... but thats a highly complex tasks so normally virtual grids are far simpler. Or potential fields <br><br></td></tr></table><br>
<a name="845852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What if it were not a tile-based game? <br></div><br><br>Whether the game is tile based or not, you would be sorting the mobile game objects into a grid or something similar, to optimize object interactions.<br><br>---<br><br>Regarding discussions about how many concurrent players a single conventional server can handle, I recommend reading this blog <a href="http://eternal-lands.blogspot.com/" target="_blank">http://eternal-lands.blogspot.com/</a> by Radu Privantu, the guy who runs the Eternal Lands mmo. Theory and discussion are all well and good, but hearing about the experiences of someone who has had a working game running 'in the wild' for several years is more useful. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
