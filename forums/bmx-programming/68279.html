<!DOCTYPE html><html lang="en" ><head ><title >Oops! Dodgy Random Numbers with Deltatime</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Oops! Dodgy Random Numbers with Deltatime</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Oops! Dodgy Random Numbers with Deltatime</a><br><br>
<a name="762817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I just found that I had a bad random numbers bug to do with making something occur randomly a certain percent of the time that was linked to delta time (well lack of correct application).<br><br>You can find out more about what it was and how to avoid it yourself here:<br><br><a href="http://greyaliengames.com/blog/oops-dodgy-random-numbers-with-deltatime/" target="_blank">http://greyaliengames.com/blog/oops-dodgy-random-numbers-with-deltatime/</a><br><br>Hope that you find it useful and thus know what to avoid in the future! <br><br></td></tr></table><br>
<a name="762910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my games, what I do is rather than have at all times some percentage chance of an action occuring, each time the action occurs, I calculate right then the next time it will occur and then just wait for that time to come around.<br><br>So let's say I have my aliens dive at the player.  When that occurs, I just store NextDiveTime = Time + Rand(5000, 10000) and then I simply check each frame to see if Time &gt;= NextDiveTime. <br><br></td></tr></table><br>
<a name="762979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey that's an interesting approach + avoids calling random number generator each logic iteration. <br><br></td></tr></table><br>
<a name="763056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The probability approach is interesting too though.  <br><br>If you use that method, you don't need to create extra variables, except maybe a single constant to define the probability.  My method would require a timekeeper variable and up to two constants if you want to store the min and max times somewhere obvious so they can be easily changed.  <br><br>That's a big upside, not needing that timer variable.  Not only does it make the code cleaner, but you also will never need to initialize it.  Or reset it.  In my game, if an alien is offscreen and it has to fire, I have to store a new next fire time, or else it will fire immediately when it comes back on the screen.  And, if I don't want enemies to fire immediately, I have to calculate the first fire time when they spawn.  And that means I have to have the calculation code in two places.<br><br>There is a downside to your method though.  It's not instantly obvious how often an event will occur.  And since the event occurring is truly random, it is possible it will NEVER occur.  Also, it is possible an event could occur twice within mere milliseconds. <br><br>With my method on the other hand, you have precise control over the minimum time between events, and the maximum time between events.<br><br>So while your method is the more beautiful one, mine is more practical. :-) <br><br></td></tr></table><br>
<a name="763129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you use that method, you don't need to create extra variables, except maybe a single constant to define the probability <br></div>Yes that's how I do it.  True it may never occur or may occur twice in a row, but hey, that's random numbers for you :-).  Actually with something like If rand(1,100) &lt; 10*Delta we know it occurs randomly 10% of the time (tested each logic iteration), so for a 200 frames per second logic loop we can say that it occurs 20 times per second.  That's nice and easy to work out. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
