<!DOCTYPE html><html lang="en" ><head ><title >Properties on classes...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Properties on classes...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Properties on classes...</a><br><br>
<a name="983042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this has been requested some times before but... Don't you think it would be ultra sexy to have them on BlitzMax? <br><br></td></tr></table><br>
<a name="983046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean like reflection? <br><br></td></tr></table><br>
<a name="983051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, like reflection (that finally was implemented) and threading (wich was finally implemented too). Properties in classes is mostly the only thing I'm missing in BlitzMax.<br>EDIT: Now I remember reflection was not requested by the community, but added by Mark becouse of he wanted to add this feature to the language. <br><br></td></tr></table><br>
<a name="983052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, what is a class property exactly? <br><br></td></tr></table><br>
<a name="983054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This are properties: <a href="http://en.wikipedia.org/wiki/Property_%28programming%29" target="_blank">http://en.wikipedia.org/wiki/Property_%28programming%29</a><br>and can make code much more readable, and makes the data validation a lot easier IMHO.<br><br>This vb.net example makes it very easy to understand:<br><pre class=code>Public Class Pen
 
    Dim m_Color As Integer 
 
    Public Property Color As Integer ' Public property
        Get
            Return m_Color
        End Get
        Set(ByVal Value As Integer)
            m_Color = Value
        End Set
    End Property
 
End Class</pre><br><br>In BlitzMax could look something like:<br><pre class=code> Type Pen
 
    Field _Color:Int
 
    Property Color:Int ' Public property
        Get
            Return _Color
        End Get
        Set(Value:Int)
            m_Color = Value
        End Set
    End Property
 
End Type</pre> <br><br></td></tr></table><br>
<a name="983056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not just create your own and link to them through a TList rather that adding a bunch of overhead to types as they are... I'd rather see private/public implemented personally <br><br></td></tr></table><br>
<a name="983057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd also like Private/Protected/Public fields. I think that would be far more useful as an overall language enhancement.<br><br><div class="quote">  In BlitzMax could look something like <br></div><br>Well, I don't like the example ;-)<br>It is not at all easy to read! <br><br></td></tr></table><br>
<a name="983058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Except that Getters/Setters are evil!<br><br><a href="http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html" target="_blank">http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html</a> <br><br></td></tr></table><br>
<a name="983059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Public / Private / Protected is a must when using Properties. In fact, properties are the way to add validations when a class user is accesing a field!<br><br>Maybe you will like more a C# example?<br><pre class=code>class Pen
{
    private int m_Color; // private field
 
    public int Color   // public property
    {
        get
        {
            return m_Color;
        }
        set 
        {
            m_Color = value;
        }
    }
}

// accessing:
Pen pen = new Pen();
// ...
pen.Color = ~pen.Color; // bitwise complement ...
 
// another silly example:
pen.Color += 1; // a lot clearer than "pen.set_Color(pen.get_Color() + 1)"!

</pre><br><br>usually c++ coders don't see the benefits of properties becouse c++ does not have them... Anyway, I can't be the only one used to them (or liking them here??can't believe it!) This is a brief list of languages that support them: Delphi/Free Pascal, Visual Basic, C#, D, eC, Objective C 2.0, Python and Vala <br><br></td></tr></table><br>
<a name="983060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... I think :<br><br>VB<br><pre class=code>
        Get
            Return m_Color
</pre><br><br>C#<br><pre class=code>
        get
        {
</pre><br><br>max<br><pre class=code>
        Get
            Return _Color
</pre><br>...all look terrible, syntax wise... <br><br>But I do agree that being able to do something like this :<br><pre class=code>
pen.Color += 1
</pre><br>would be very cool indeed. :-) <br><br></td></tr></table><br>
<a name="983065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> you mean like<br><br><pre class=code>
pen.color:+1
</pre><br><br>? <br><br></td></tr></table><br>
<a name="983066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, just think also on the data control this could introduce:<br><pre class=code>
Type MyClass
   Field _Mof2Value:int 'private
   Property MultipleOf2Value:Int()
      Set(Value:int)
         ?debug
            if value mod 2 &lt;&gt;0 then throw "Error in game logic, value has to be a multiply of 2!!"
         ?
         _Mof2 = Value
      EndSet
      Get:int()
         Return _Mof2
      EndGet
   EndProperty
End Type
</pre> <br><br></td></tr></table><br>
<a name="983068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you just want to be able to go:<br><br><pre class=code>
a:MyClass=new MyClass
a.MultipleOf2Value.Set(2)
Print a.MultipleOf2Value.Get()
</pre><br><br>Rather than having separate methods for them such as<br><pre class=code>
Method MultipleOf2Value_Set(val:int)
   _Mof2Value=int
End Method

Method MultipleOf2Value_Get()
   return _Mof2Value
End Method
</pre> <br><br></td></tr></table><br>
<a name="983070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So you just want to be able to go: <br></div><br>Except you would be able to write :<br><pre class=code>
a:MyClass=new MyClass
a.MultipleOf2Value = 2
Print a.MultipleOf2Value
</pre><br>and internally those property methods would be called. <br><br></td></tr></table><br>
<a name="983071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  So you just want to be able to go<br><i>...</i><br>Rather than having separate methods for them such as <br></div>In a class you might have field names that aren't exactly logical, or might not make sense to the person using it.<br><br>Also, what your code proposes is that each field is actually an object instance, that of which numbers are not.<br><br>EDIT: While we're on the subject, inline operators would be awesome too :)<br><pre class=code>SuperStrict

Framework brl.blitz
Import brl.standardio

Type TVec2
	Field m_x:Float, m_y:Float
	
	Method Create:TVec2(x:Float, y:Float)
		m_x = x
		m_y = y
		Return Self
	End Method
	
	Inline +:TVec2(vec:TVec2)
		Return New TVec2.Create(m_x + vec.m_x, m_y + vec.m_y)
	End Inline
End Type

Local vector:TVec2 = New TVec2.Create(10.0, 10.0)
Local vector2:TVec2 = New TVec2.Create(32.0, 1.0)

Local vector3:TVec2 = vector + vector2
</pre><br><br>EDIT2: To me Get..End Get and Set..End Set are both ugly. <br><br></td></tr></table><br>
<a name="983077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> EDIT2: To me Get..End Get and Set..End Set are both ugly.  <br></div>Apart from the look of the get/set syntax, that can be designed to look better (I agree to this point). I *think* Mark is not a big fan of Properties (otherwise he would have implemented them) but I still would love to see this implemented some day.<br><br>A old vb-like implementation may look better to you?<br><pre class=code>
Type MyClass
   Property Get Name:String()
      ...
   End Property
   Property Set Name(Vale:String)
      ...
   End Property
End Type
Local Item:MyClass = New MyClass
'Usage example:
Item.Name = "My Name"
Print Item.Name
</pre><br>Implemeting only one of them (only one set or only one get) makes a readonly/writeonly property. I preffer this syntax. It looks much more basic-like. <br><br>Anyway, that's only a mixture of a wish and a feature request. <br><br></td></tr></table><br>
<a name="983164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems this has been requested long time ago in <a href="/posts.php?topic=56644#629676" target="_blank">this other thread</a> <br><br></td></tr></table><br>
<a name="983271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about...<br><br><pre class=code>
Type MyClass
   Field Name:string
       Set(val:string)
          if len(val)&gt;0 Name=Val
       Get()
          return name
   End Field

   Field X
   Field Y
End Type
</pre><br><br>so Field with nothing is standard... but if you add Set()... the instructions are executed below until Get() is encountered.. Get should automatically return the value if excluded<br><br>so...<br><pre class=code>
Type MyClass
   Field Name:string
       Set(val:string)
          if len(val)&gt;0 Name=Val
   End Field

   Field X
   Field Y
End Type
</pre><br><br>Would also be valid... how 'basic' is that :) <br><br></td></tr></table><br>
<a name="983274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> As a professional C# developer I'm using properties a lot and it would be really nice to see them in Blitzmax.<br>Unfortunatly, properties makes no sense in the current reincarnation of Blitzmax.<br>Properties are there to give an interface to private fields. As long as Blitzmax<br>just provides full private/full open definition of types there is no need of properties.<br><br>So as Brucey already suggested, a better access system should be implemented first and then properties are a good addition. <br><br></td></tr></table><br>
<a name="983275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with that as well... in a sense.  The two are not mutually exclusive since the Set code could still be valid even if the field itself is not private... if there is an associated Set for a field... throw an error if someone tries to set it manually... in other words, by adding a Set() you automatically make put the field behind bars <br><br></td></tr></table><br>
<a name="983283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> better access system should be implemented first and then properties are a good addition. <br></div>Well I think they are two faces of the same coin. I would love to see this implemented at the same time, if it is ever done. <br><br></td></tr></table><br>
<a name="983285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like BlitzMax because it's compiled and fast.<br><br>When I look at an equals sign in C# I expect it to take 30 cycles and have side effects.<br><br>All the examples above illustrate is how BlitzMax could be modified to run slower with the additional benefit that you have completely obfuscated the meaning and performance of the = symbol in BASIC. <br><br></td></tr></table><br>
<a name="983287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd also like Private/Protected/Public fields. I think that would be far more useful as an overall language enhancement. <br></div><br>Just this! :)<br>Without a proper scope management, the Properties feature would be an useless addition.<br>In the current scenario, even the getter/setter stuff has no much sense, except for the thread-safe benefits and coding style.<br>With members scope implementation, this nice language would step a little more in the OOP philosophy direction. <br><br></td></tr></table><br>
<a name="983301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skidracer:<br><div class="quote"> <br>All the examples above illustrate is how BlitzMax could be modified to run slower with the additional benefit that you have completely obfuscated the meaning and performance of the = symbol in BASIC.<br> <br></div><br><br>From an OOP standpoint I don't agree with you. Properties and data protection/hiding provide lots of benefits too:<br><br>Example: The possibility to make true immutable instances: If you make a class-function factory (like: Create&lt;typename&gt;(all, init, params, go, here)) and then only provide public read properties, you get an class whos instances are immutable (internal values cannot be changed, once created) and can thus be passed between threads without synchronization. This is a nice design pattern used often in Java (probably .NET too)<br><br>Since the only field-accessors are read properties, the compiler will protect you (or anybody else using your class too(!)) from making the mistake  of modifying an created instance.<br><br><br>The idea of modern statically typed OOP as found in Java and .NET (and others) today is that the programmer can design classes that are self-providing and by their own definition can guide other programmers how to use them in a correct way.<br><br>Another example borrowed from delphi:<br><br>The TDatabase (old BDE component) has methods called Open() and Close(). It also has a property called Connected so you can always check if the TDatabase instance is connected to a db like this:<br><br><pre class=code>
if (db.connected) then
begin
  //whatever
end;
</pre><br><br>But to simplify matters they also made the same property a replacement for Open() and Close() if you use it as a write-property.<br><br>Thus this is perfectly valid:<br><br><pre class=code>
  db.connected := True; //same as db.Open();

  //or

  db.connected := false; //same as db.Close();

</pre><br><br>Depending on how it's used this can be used for very readable code.<br><br>If you want top-notch performance you usually don't go OOP in the first place. (in the critical parts)<br><br>Most developers today settle for an compromise (since the complexity of programs today is, on average, much higher than programs from decades ago): They use OOP to make a general structure of an app, to keep it manageable and get the help of the compiler to enforce object-model policies, and then they add a few optimized functions for the real time critical stuff.<br><br>edit: clarifications <br><br></td></tr></table><br>
<a name="983302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> All the examples above illustrate is how BlitzMax could be modified to run slower with the additional benefit that you have completely obfuscated the meaning and performance of the = symbol in BASIC. <br></div><br>With all my respects, no ofense intended, but this is plain not true! The compiler should execute the Get and Set methods of a property in the same speed as any other method. There's no reason for the compiler generating slower code there! The same for the = operator. Why should BlitzMax be slower when assigning the result of a GetValue() method than when assigning the same, using a much more readable and user friendly syntax, that lots of languages (also compiled ones) are already implementing? This is not just a .net jit compied thing! <br><br></td></tr></table><br>
<a name="983303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ziggy:<br><div class="quote"> <br>With all my respects, no ofense intended, but this is plain not true! The compiler should execute the Get and Set methods of a property in the same speed as any other method. There's no reason for the compiler generating slower code there!<br> <br></div><br><br>I'm pretty sure he means that if you hide functionality behind a setter you can get the side-effect that instead of a simple assignment a whole lot is done "behind the scenes".<br><br>Consider an the delphi example I provided in my <u><a href="/posts.php?topic=86714#983301" target="_blank">last post</a></u>:<br><br>The "db.connected := true;" - statement will actually attach the component to a DB (which often is through a network), thus this "simple assignment" can take several seconds to complete.<br><br>I however agree with you that if you just got a normal setter that just passes the value to an internal field in the class/type this should be very similar in speed to assigning the field-value directly in an optimized compiler. <br><br></td></tr></table><br>
<a name="983307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Mahan: I agree with you 100%. Obviously it is always the users responsibility to make a wise and balanced use of properties when coding. (in the same way as any other implementation on a class!).<br>I repeat, no ofense was intended, just a way to show why I don't agree with Skid. After being several years coding in modern OO languages, I can't see a reason to not have this on BlitzMax, unless it is too hard to implement or too complex in the compiler side. <br><br></td></tr></table><br>
<a name="983331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I repeat, no ofense was intended, just a way to show why I don't agree with Skid. <br> <br></div><br><br>I don't think you have to be to scared about offending anyone. Most ppl here are quite professional in that hard evidence is king. If needed we can easily make some good timing examples to show how much time we might loose if we use properties.<br><br>We could for example use <u><a href="http://www.freepascal.org/" target="_blank">FreePascal</a></u> which is a good and free static compiler (without any JiT functionality), which supports Delphi style properties, to make a valid timing example. <br><br></td></tr></table><br>
<a name="983335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i wrote a test program in fpc to check this and i got some results:<br><br>First run (o1 default low optimizations):<br><pre class=code>
Timing test. Comparission between different field assignment techniques in fpc.
First out : Direct assignment to field. Loop from 0 to 2147483647
Time: 5858

Next out : Assignment through Object Pascal direct-property (no real setter but
reference to field). Loop from 0 to 2147483647
Time: 5952

Finally : Assignment through Object Pascal direct-property through setter method
. Loop from 0 to 2147483647
Time: 20485

Press [enter] to end.
</pre><br><br>Second run (O3 highest optimizations):<br><pre class=code>
Timing test. Comparission between different field assignment techniques in fpc.
First out : Direct assignment to field. Loop from 0 to 2147483647
Time: 1812

Next out : Assignment through Object Pascal direct-property (no real setter but
reference to field). Loop from 0 to 2147483647
Time: 1686

Finally : Assignment through Object Pascal direct-property through setter method
. Loop from 0 to 2147483647
Time: 5922

Press [enter] to end.
</pre><br><br><br>Here is the testprogram code (compiles in Lazarus 0.9.26.2):<br>prop_speedtest.lpr:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
program prop_speedtest;

{$mode objfpc}{$H+}

uses
  {$IFDEF UNIX}{$IFDEF UseCThreads}
  cthreads,
  {$ENDIF}{$ENDIF}
  Classes, SysUtils, CustApp
  { you can add units after this }
  , dateutils;

type

  { TMyTimingTest }

  TMyTimingTest = class(TCustomApplication)
  protected
    procedure DoRun; override;
  public
    constructor Create(TheOwner: TComponent); override;
    destructor Destroy; override;
    procedure WriteHelp; virtual;
  end;

  TDirectAssignment = class
  public
    FValue: integer;
  end;

  TDirectProperty = class
  private
    FValue: integer;
  public
    property value: integer read FValue write FValue;
  end;

  TGetSetProperty = class
  private
    FValue: integer;
    function GetValue: integer;
    procedure SetValue(value: integer);
  public
    property value: integer read GetValue write SetValue;
  end;

{ TGetSetProperty }

function TGetSetProperty.GetValue: integer;
begin
  result:=FValue;
end;

procedure TGetSetProperty.SetValue(value: integer);
begin
  FValue:=value;
end;



{ TMyTimingTest }

procedure TMyTimingTest.DoRun;
var
  ErrorMsg: String;
  i: integer;
  DirectAssignment: TDirectAssignment;
  DirectProperty: TDirectProperty;
  GetSetProperty: TGetSetProperty;
  timeStamp: TDateTime;
begin
  DirectAssignment := TDirectAssignment.Create;
  DirectProperty := TDirectProperty.Create;
  GetSetProperty := TGetSetProperty.Create;
  writeln('Timing test. Comparission between different field assignment techniques in fpc.');

  writeln('First out : Direct assignment to field. Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    DirectAssignment.FValue:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Next out : Assignment through Object Pascal direct-property (no real setter but reference to field). Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    DirectProperty.value:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Finally : Assignment through Object Pascal direct-property through setter method. Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    GetSetProperty.value:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Press [enter] to end.');
  readln();


  DirectAssignment.free;
  DirectProperty.free;
  GetSetProperty.free;
  // stop program loop
  Terminate;
end;

constructor TMyTimingTest.Create(TheOwner: TComponent);
begin
  inherited Create(TheOwner);
  StopOnException:=True;
end;

destructor TMyTimingTest.Destroy;
begin
  inherited Destroy;
end;

procedure TMyTimingTest.WriteHelp;
begin
  { add your help code here }
  writeln('Usage: ',ExeName,' -h');
end;

var
  Application: TMyTimingTest;

//{$IFDEF WINDOWS}{$R project1.rc}{$ENDIF}

begin
  Application:=TMyTimingTest.Create(nil);
  Application.Title:='My Timing Test';
  Application.Run;
  Application.Free;
end.

</textarea><br><br>This example goes to show how fantastic properties are in ObjectPascal.<br><br>If BlitzMax goes the property road i strongly recommend trying to mimic the ObjectPascal technique since it provides the encapsulation power without almost any penalty in the "direct case" while at the same time allows for getter/setter extensions afterwards without even altering the classes interface to the rest of the program (Note how TDirectProperty and TGetSetProperty has the same exact access syntax).<br><br>my two cents. :-) <br><br></td></tr></table><br>
<a name="983336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Mahan: Thanks for this sample. Anyway, don't you think it would be also interesting to compare a method call with a property get or set? Just a suggestion, I don't have free pascal here. <br><br></td></tr></table><br>
<a name="983340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok ziggy, I added the direct-through-setter assignment but as I suspected it's almost identical to the setter-through-property timing.<br><br>Anyways here it goes:<br><br>O1 (default) version<br><pre class=code>
Timing test. Comparission between different field assignment techniques in fpc.
First out : Direct assignment to field. Loop from 0 to 2147483647
Time: 5781

Next out : Assignment through Object Pascal direct-property (no real setter but
reference to field). Loop from 0 to 2147483647
Time: 5937

Third run : Assignment directly through Setter. Loop from 0 to 2147483647
Time: 20500

Finally : Assignment through Object Pascal direct-property through setter method
. Loop from 0 to 2147483647
Time: 20483

Press [enter] to end.
</pre><br><br><br>O3 max optimization version:<br><pre class=code>
Timing test. Comparission between different field assignment techniques in fpc.
First out : Direct assignment to field. Loop from 0 to 2147483647
Time: 1796

Next out : Assignment through Object Pascal direct-property (no real setter but
reference to field). Loop from 0 to 2147483647
Time: 1686

Third run : Assignment directly through Setter. Loop from 0 to 2147483647
Time: 5922

Finally : Assignment through Object Pascal direct-property through setter method
. Loop from 0 to 2147483647
Time: 5062

Press [enter] to end.
</pre><br><br>Code for new version:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
program prop_speedtest;

{$mode objfpc}{$H+}

uses
  {$IFDEF UNIX}{$IFDEF UseCThreads}
  cthreads,
  {$ENDIF}{$ENDIF}
  Classes, SysUtils, CustApp
  { you can add units after this }
  , dateutils;

type

  { TMyTimingTest }

  TMyTimingTest = class(TCustomApplication)
  protected
    procedure DoRun; override;
  public
    constructor Create(TheOwner: TComponent); override;
    destructor Destroy; override;
    procedure WriteHelp; virtual;
  end;

  TDirectAssignment = class
  public
    FValue: integer;
  end;

  TDirectProperty = class
  private
    FValue: integer;
  public
    property value: integer read FValue write FValue;
  end;

  TGetSetProperty = class
  private
    FValue: integer;
    function GetValue: integer;
  protected
    procedure SetValue(value: integer);
  public
    property value: integer read GetValue write SetValue;
  end;

{ TGetSetProperty }

function TGetSetProperty.GetValue: integer;
begin
  result:=FValue;
end;

procedure TGetSetProperty.SetValue(value: integer);
begin
  FValue:=value;
end;



{ TMyTimingTest }

procedure TMyTimingTest.DoRun;
var
  ErrorMsg: String;
  i: integer;
  DirectAssignment: TDirectAssignment;
  DirectProperty: TDirectProperty;
  GetSetProperty: TGetSetProperty;
  timeStamp: TDateTime;
begin
  DirectAssignment := TDirectAssignment.Create;
  DirectProperty := TDirectProperty.Create;
  GetSetProperty := TGetSetProperty.Create;
  writeln('Timing test. Comparission between different field assignment techniques in fpc.');

  writeln('First out : Direct assignment to field. Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    DirectAssignment.FValue:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Next out : Assignment through Object Pascal direct-property (no real setter but reference to field). Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    DirectProperty.value:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Third run : Assignment directly through Setter. Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    GetSetProperty.SetValue(i);
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');


  writeln('Finally : Assignment through Object Pascal direct-property through setter method. Loop from 0 to ' + IntToSTr(MaxInt));
  timeStamp:=now();
  for i := 0 to MaxInt do
    GetSetProperty.value:=i;
  writeln('Time: ' + IntToStr(MilliSecondsBetween(now(), timeStamp)));
  writeln('');

  writeln('Press [enter] to end.');
  readln();


  DirectAssignment.free;
  DirectProperty.free;
  GetSetProperty.free;
  // stop program loop
  Terminate;
end;

constructor TMyTimingTest.Create(TheOwner: TComponent);
begin
  inherited Create(TheOwner);
  StopOnException:=True;
end;

destructor TMyTimingTest.Destroy;
begin
  inherited Destroy;
end;

procedure TMyTimingTest.WriteHelp;
begin
  { add your help code here }
  writeln('Usage: ',ExeName,' -h');
end;

var
  Application: TMyTimingTest;

//{$IFDEF WINDOWS}{$R project1.rc}{$ENDIF}

begin
  Application:=TMyTimingTest.Create(nil);
  Application.Title:='My Timing Test';
  Application.Run;
  Application.Free;
end.

</textarea> <br><br></td></tr></table><br>
<a name="983344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> All the examples above illustrate is how BlitzMax could be modified to run slower with the additional benefit that you have completely obfuscated the meaning and performance of the = symbol in BASIC.<br> <br></div><br>You forgot the additional benefit that - when debugging a project with 300,000 lines - you don't spend two days searching around to see which one of the numerous times you access a particular variable (across numerous namespaces, types and include files) is the needle in a haystack that's actually breaking your application. Instead of just dropping a couple of debug lines into the setter and spotting it immediately.<br><br>It's not as though any of this is mandatory. If you don't overload operators, and you don't write setters and getters, everything is as fast and bug-friendly as you want it to be. As Ziggy points out, it's up to the user to use the tools available wisely. <br><br></td></tr></table><br>
<a name="983347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is also a point of compiler optimization here that would take into account fields with and without getter/setters... Mark is all about optimization so I doubt any impact would be felt at all... just different code to handle getter/setter fields vs standard public fields <br><br></td></tr></table><br>
<a name="983352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mahan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Skully: That was more or less my most important point in my timing examples - FreePascal has shown how you can have direct properties that are the same speed as going directly to the field. <br><br>Observe how this is still a fully valid property with all the same compile-time checking that all properties in Pascal get.<br><br>Using this technique you can (just like FreePascal) have properties that don't affect the speed of the runtime at all. <br><br></td></tr></table><br>
<a name="983357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm so tired of GetValue() SetValue() and also having a visible public _Value field (tree class items for a single task). This does not look very elegant, and makes the code a bit harder to mantain. If classes do expose a real collection of functions, methods, properties and fields, hiding anything that should not be modified from outside the class, you know you can use all the functionality freely, modify the values freely, and this makes coding much more elegant, easier and more reliable IMHO. Encapsulation is your friend! :D<br><br>@Mahan: Great demo. :D <br><br></td></tr></table><br>
<a name="983363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think everyone agrees that public/private would be sweet in types... #1 in my books... <br><br>Honestly I don't care that much about Getters and Setters... I just create Methods to do that<br><br><pre class=code>
Type This
field that:int

   Method Set_That(val:int)
      ...
   end Method
end type
</pre><br>But I do appreciate the elegance gained by them from other languages <br><br></td></tr></table><br>
<a name="983373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree that this automatic getter setter thing would be great.<br><br>Here is the issue as I see it.<br><br>You make a type and in the first couple of version, you do not have to protect the x field, so you just allow it to be directly accessed.  But then, later, you make a change that makes a change in x affect a new field y.  Now, you have to create a SetX and every piece of code you have written that directly accesses x is now broken.<br><br>So, your choice is either to make this change and let everybody who uses your type deal with fixing it, or you can make Getter and Setters from the very beginning, even though you don't need them yet.<br><br>But, with the change as ziggy suggests it, then you always have a hidden getter and setter.  The great thing is the compiler can do some good work for you.  If you do not create a getter, the compile can make it a direct assignment and you lose no speed.  But, if later you need a getter, then the compiler takes care of that for you as well.  It takes no change in syntax on the users part, but now you can make y rely on changes of x.  So, you only get the slowdown when necessary and you do not screw with your users making them change their program. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
