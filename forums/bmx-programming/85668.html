<!DOCTYPE html><html lang="en" ><head ><title >GLSL effects on 2D?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >GLSL effects on 2D?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >GLSL effects on 2D?</a><br><br>
<a name="969685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brazilian Joe</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to (using the GLMax2D driver) apply GLSL shader effects on a 2D game? To do things like simulating heat haze on the background behind the sprites on a 2D platformer, or doing a vortex effect when the player character enters a teleporting portal at the end of the level? <br><br></td></tr></table><br>
<a name="969688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be possible, depends on exactly what the shader needs access to (you'd probably end up modifying the GLMax2D driver).<br><br>I'm currently writing an OpenGL 2D engine similar to Max3D. <br><br></td></tr></table><br>
<a name="969690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's something I'm very interested too but unfortunately I dig many topics on this forum about that feature and always left the idea behind...<br><br>If someone has a real simple and practical example I would love to learn that too !<br><br>Hey Plash, is your 2D OGL engine will surpass the graphic capabilities and performances of the GLMax2D Driver ?<br><br>EDIT<br>Oh, following your research Joe I found this example which is probably a good starting point for others searching on this : <a href="http://www.blitzbasic.com/Community/posts.php?topic=85263" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=85263</a><br><br>Looking very doable after all but tricky and the example are abnormally slow :) <br><br></td></tr></table><br>
<a name="969694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Joe,<br><br>brl.GLMax2D uses brl.GLGraphics which in turn uses pub.OpenGL which only uses version 1.1. So since GLSL only starts at version 2.0 no, it isn't possible. <br><br>For cross-platform GLSL in BMax there is <a href="http://code.google.com/p/bmx3d/" target="_blank">Max3D</a> or <a href="http://www.minib3d.com/" target="_blank">miniB3D Extended</a>. <br><br></td></tr></table><br>
<a name="969695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hey Plash, is your 2D OGL engine will surpass the graphic capabilities and performances of the GLMax2D Driver ?  <br></div>Most certainly. I intend to setup an single-surface animated textures, an entity system and materials for create-once, update and forget styled rendering.<br><br><div class="quote"> If someone has a real simple and practical example I would love to learn that too ! <br></div><a href="/posts.php?topic=85263" target="_blank">Here</a> is a decent example using shaders, and <a href="/posts.php?topic=85608" target="_blank">my FBO test</a>. <br><br></td></tr></table><br>
<a name="969706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Plash<br><br>I will learn a bit from these examples : very interesting :)<br><br>But I'm wondering seing all these "simple" shaders code floating around BlitzMax if game effects like water, fire, heat, glow, etc. is possible on 2D games with the example system ?<br><br>Is this normal that activating more pass on this tiny example slow down a lot ? I tough it was using the GPU to overcome this problem ? <br><br></td></tr></table><br>
<a name="969716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I'm wondering seing all these "simple" shaders code floating around BlitzMax if game effects like water, fire, heat, glow, etc. is possible on 2D games with the example system ? <br></div>Yes, it is possible. You'd have to setup the context with glOrtho and such (I don't know the whole procedure, but that's what brl.glgraphics uses).<br>In fact.. you can probably easily use GLGraphics to do some 2d stuff without much fuss.<br><br><div class="quote"> Is this normal that activating more pass on this tiny example slow down a lot ? I tough it was using the GPU to overcome this problem ?  <br></div>Well, shaders still take up time to execute operations (even though it should take less time when compared to an in-code version of the same effect), and adding more passes just doubles the required time for the operations to execute.<br><br>What is the speed difference per pass? Also, what graphics card are you testing it on? <br><br></td></tr></table><br>
<a name="969824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brazilian Joe</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I am too green on OpenGL and BlitzMax to code this. I am thinking would be the way to go...<br>It seems to me that one of the possible ways to accomplish it would be to:<br><br>1)Fork GLGraphics, GLMax2D<br>2)Add glew as a dependency and tweak them to use a programmable pipeline with deferred rendering, capable of plugging shader effects, which will probably involve FBOs to load and manipulate the game images. <br><br>Wow, that sounds so simple! Bet it's easier said than done... <br><br></td></tr></table><br>
<a name="969838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since shaders require the use of extensions and features that Max2D doesn't even use, I don't really see any reason off-hand why you couldn't use shaders right alongside Max2D without even having to preserve any GL state. <br><br></td></tr></table><br>
<a name="995310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having looked around a bit about use of shaders in 2d games (which seems very uncommon), it seems that most effects you can do could also be done without shaders. When people talk about like heat shimmer, screen warping, lighting and shadows, etc, these can often all be done using regular 2d effects/commands without a shader. Sometimes it seems like people are using shaders `just because` you can do something in a shader. Like a rippling water which reflects the graphics above it - you can do most of that with regular 2d commands. Is it just that people don't have experience with trying to pull off these effects in clever ways using traditional techniques? <br><br></td></tr></table><br>
<a name="995333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.komiga.com/?q=node/25" target="_blank">Shablam</a>. <br><br></td></tr></table><br>
<a name="995336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ?! Erm, what? <br><br></td></tr></table><br>
<a name="995351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ?! Erm, what? <br></div>What?<br>That is a link, you know.. <br><br></td></tr></table><br>
<a name="995353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What? <br></div><br><br>Huh? <br><br></td></tr></table><br>
<a name="995417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok so blur is one that's a bit tricky to do with older methods, but still possible. What would you use blur for in a 2d game? <br><br></td></tr></table><br>
<a name="995419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would use it to blur out all my bad graphics. <br><br></td></tr></table><br>
<a name="995435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>What would you use blur for in a 2d game?<br> <br></div><br>Moving depth of field effects (with parallax layers or scaled sprites moving into or out of the screen), 'bad health' effects, end of scene blur/fade-outs... all sorts of possibilities. <br><br></td></tr></table><br>
<a name="995516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'd want to apply *realtime* blur on a parallax layer which doesn't move in the Z direction? Sounds like a waste.<br><br>The end of scene blur I could see doing, and maybe stuff that helps to provide new animation capabilities. <br><br></td></tr></table><br>
<a name="995530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, IH, think of FF3 poison effect when you walk!<br>Looks neat!  Good work Plash. <br><br></td></tr></table><br>
<a name="995534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep in mind you <i>can</i> change the Z-range for the graphics buffer. I have not tested access to the z-position of a rendered pixel on the shader side, but I was thinking it may be possible to do pseudo-dof in 2D. <br><br></td></tr></table><br>
<a name="995540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>You'd want to apply *realtime* blur on a parallax layer which doesn't move in the Z direction? Sounds like a waste.<br> <br></div><br>If you were to blur layers in and out according to their depth you'd get a very cool depth of field effect, adjusting the focus to suit the situation. The 'current focus' layer would be non-blurred, while layers both closer and further away would be blurred more depending on their distance from the focus layer.<br><br>In this dodgy example, the focus is shifting from later 3 (middle) to layer 1 (closest):<br><br><pre class=code>

Key:

--- No blur
=== Blur
+++ More blur
*** Even more blur
OOO Total blur-fest




Parallax layers from above:




5) Further still +++++++++++++++++++++++++++++++++++++++++++++++++++

4) Further =========================================================

3) FOCUS -----------------------------------------------------------

2) Nearer ==========================================================

1) Nearer still ++++++++++++++++++++++++++++++++++++++++++++++++++++

                               ^
                               |
                             Viewer



Adjusting depth of field to nearest layer:




5) Further than even further OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO

4) Even further ****************************************************

3) Further still +++++++++++++++++++++++++++++++++++++++++++++++++++

2) Further =========================================================

1) FOCUS -----------------------------------------------------------

                               ^
                               |
                             Viewer
</pre><br><br>(And with shaders it wouldn't be a waste at all.) <br><br></td></tr></table><br>
<a name="995552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm yah ok. I will admit that new technology makes new things possible. :-) <br><br></td></tr></table><br>
<a name="995614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> So why has hardly anyone used shaders in a 2D game so far? It's very hard to find examples of any games using it. Maybe just the technology is too advanced for most 2D developers? <br><br></td></tr></table><br>
<a name="995661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at <a href="http://www.facewound.com/" target="_blank">Facewound</a>, by the guy that did Garry's Mod for HL2. The link is a bit mangled, but <a href="http://www.facewound.com/dl/fw_secret_dl.zip" target="_blank">this</a> works.<br><br>He even did a nice little tutorial where you can load up the shader files and play with them in the game:<br><br><a href="http://www.facewound.com/tutorials/shader1/" target="_blank">http://www.facewound.com/tutorials/shader1/</a><br><br><div class="quote"> <br>Maybe just the technology is too advanced for most 2D developers?<br> <br></div><br><br>Funnily enough, simple pixel shaders are very easy and loads of fun to play around with. Look at my Max3D hacks, based on almost no knowledge whatsoever...<br><br>Crude depth of field, simply applying blur based on how far away each pixel is:<br><br><a href="http://img26.imageshack.us/img26/1/mydofij3.jpg" target="_blank">Big image here for sake of thread</a>.<br><br>Speccy shader:<br><br><img src="http://img156.imageshack.us/img156/2976/speccycastleap2.gif"> <br><br></td></tr></table><br>
<a name="995750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes cool but that's 3D. ;-P <br><br></td></tr></table><br>
<a name="995784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> The pixel shader effects are strictly 2D though, just modifying the pixel colour in each case -- no 3D geometry is being fiddled with. (OK, the castle DOF thing uses the depth buffer, but it's still a 2D buffer you're working with.) They're just examples of cool things you can do with very little shader knowledge indeed. <br><br></td></tr></table><br>
<a name="995855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um... doing a full screen quad to draw pixel shader effects over a *3D* image does not make them a 2D effect ;-D<br><br>by 2D I mean you use them in a typical 2D game - platformer, shootemup etc, where there is no 3D. <br><br></td></tr></table><br>
<a name="995924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImaginaryHuman: Whether it's a 2D or 3D game is irrelevant, shaders are incredibly fast ways of processing graphics as they are compiled an run directly on the graphics card as part of the render pipeline. <br><br></td></tr></table><br>
<a name="995936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brazilian Joe</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hummm, 2D is just a special case of 3D. <br><br>I have to find some time to get back to coding my project. ;-)<br><br>Risking hijacking my own thread, I have bought a WII and found Super Paper Mario a very original game mechanic for a 2D+3D game. <br><br></td></tr></table><br>
<a name="995949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yah I know what shaders are and how they work. My point was just that so far hardly anyone has used them for 2D, hardly anyone knows how to or wants to, and even if they did it can be difficult to come up with ways to use a shader in a strictly 2D game. 2D games don't typically have or need things like normal mapping, shadows, ambient occlusion, etc--stuff that helps in 3D worlds of realism and polygon objects. <br><br></td></tr></table><br>
<a name="995955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are dozens of applications for 2D shaders;<br><br>* Depth of field (blur the background or foreground layers in real time)<br>* Bloom<br>* Full screen distortion effects<br>* Localised distortion effects (think sound waves around explosions)<br>* Various lighting and shadow effects<br><br>Yes some of these can be done in pure 2D, but doing them with shaders would make them both look better and run faster.<br><br>I am hoping someone can add a simple way to use shaders on Blitzmax, perhaps with a modified DirectX module (or openGL even) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
