<!DOCTYPE html><html lang="en" ><head ><title >Resource manager module (threaded as well!)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Resource manager module (threaded as well!)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Resource manager module (threaded as well!)</a><br><br>
<a name="926764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>Don't know if this is the right section, but here's something for the community :)<br><br>I noticed I haven't seen a resource manager around (maybe there is, but I haven't seen it) so I thought of writing one. Also, I remembered about the multi-threading in the SVN version, so I wanted to give it a try.<br><br>This is what I came up with:<br><br><a href="http://jim.ro/jim.mod.zip" target="_blank">*** Click here to download ***</a><br><br>Features:<br><br>- Loads a configuration file that contains paths categorized in groups<br>- Loads all resources in a folder (no subfolders yet)<br>- (Nice one) It's threaded!!! You can display a nice animation, mesage, video or whatever while loading your resources in a different thread.<br><br>Well, that's pretty cool, but not awesome... This should fix it:<br><br>- Custom resource loading: you define your own file extensions and your loading function for it. The manager handles the rest.<br><br>It's still in "beta" if I can say so (started working on it yesterday morning) so there might be a few bugs in there to squish.<br><br><br>I did this for my own use, so I may have missed some important features. If so, please point them out and I'll see what I can do :)<br><br>If you like this and you use it, some credits would be nice.<br><br>Edit:<br><br>test file:<br><br><pre class=code>
Import jim.resman

Graphics 640,480

Global RM:RMResourceManager = New RMResourceManager
RM.Init("Data\resources.cfg")
RM.AddCustomType("txt,text",CustomLoad)

Global RL:RMResourceLoader = RM.CreateLoader("main",1,1)

RL.LoadAll()

Repeat
	Cls
	DrawText "Loaded: " + ((RL.Loaded() / Float(RL.Total())) * 100) + "%",0,0
	Flip
Until RL.IsLoaded()

Cls
Local img:TImage = RM.GetImage("test1")
DrawImage img,0,0
DrawText "Loaded!",0,0
Flip
WaitKey()

Function CustomLoad:Object(pth:String)
	Print "I am a custom loading function!"
	Return Null
EndFunction
</pre><br><br>resources.cfg<br><pre class=code>
[main]
Data\Images\
</pre><br><br>I'm affraid you'll have to use your own bunch of images :) You can read the comments in the .bmx file for more info. <br><br></td></tr></table><br>
<a name="926782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm turning to the darkside and storing all my data in an MSAccess database and using SQL to load it into Blitzmax. Muwahaha! I got so tired of editing millions of text files in notepad. Now I have nice easy GUI forms for me to use to add new data. <br><br></td></tr></table><br>
<a name="926788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope you are not serious about this MSAccess thing.<br><br>You do realize that anyone running your program will need Access installed. <br><br></td></tr></table><br>
<a name="926892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even with the database modules? I thought the whole point of them was you can access ODBC databases independently??<br><br>Please reply, I may have wasted my life.<br><br><a href="http://code.google.com/p/maxmods/" target="_blank">http://code.google.com/p/maxmods/</a> <br><br></td></tr></table><br>
<a name="926896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> On windows you should be fine (built-in library for odbc comes with windows), for Mac and Linux you'll need to include a library with your project. <br><br></td></tr></table><br>
<a name="926906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe...  Access?<br><br>For ODBC, you need an ODBC driver for the particular database you wish to converse with.<br><br><br>Although I've found this : <a href="http://sourceforge.net/projects/mdbtools" target="_blank">http://sourceforge.net/projects/mdbtools</a><br>Might be worth playing with - well, if it was for anything other than Access :-p <br><br></td></tr></table><br>
<a name="926970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't wanna disturb too much, but any comments about my module? So far it looks like a hijack to me. <br><br></td></tr></table><br>
<a name="926973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Don't wanna disturb too much, but any comments about my module? So far it looks like a hijack to me.  <br></div>The threaded part of it makes sense, being able to render some sort of progress display to the user, but other than that it doesn't seem like its worth it.<br><br>And threading is not official/integrated into Max yet, so I won't even try it (I'm not in the mood to be setting up SVN BlitzMax.. ugh, module compiling). <br><br></td></tr></table><br>
<a name="926974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The threaded part of it makes sense, being able to render some sort of progress display to the user, but other than that it doesn't seem like its worth it.<br><br>And threading is not official/integrated into Max yet, so I won't even try it (I'm not in the mood to be setting up SVN BlitzMax.. ugh, module compiling).<br> <br></div><br><br>Well, it's probably not wort it for a project with 2 images and 1 background sound, as it actually takes 4 function calls to get an image loaded. However, it may be of use for larger projects as it does most of the stuff for you, and with the custom loading types you can use it for the loading of levels for example. Then it's down to a function call to load everything.<br><br>I know about the svn part and compiling modules, but I thought maybe someone did this already :) <br><br>I could make a version without threads, but that strips away half of the fun. <br><br></td></tr></table><br>
<a name="926977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Well, it's probably not wort it for a project with 2 images and 1 background sound, as it actually takes 4 function calls to get an image loaded. <br></div>Of course not. I was not implying that.<br><br><div class="quote"> I could make a version without threads, but that strips away half of the fun. <br></div>I was not recommending it. <br><br></td></tr></table><br>
<a name="927088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Even with the database modules? I thought the whole point of them was you can access ODBC databases independently??<br><br>Please reply, I may have wasted my life. <br></div><br><br>If I were you, I would try running it on a PC without Access and see what happens.  As long as you are only accessing the data in the mdb file and not expecting the user to be able to use any of the forms in the file, I think you should be alright on a Windows box, since they usually have the dlls for access databases already.  But you may also need to have them upgrade their dll as well.<br><br>I think it is called the MS Jet Database Engine or something of that nature.  And Microsoft is always upgrading it.  This could be a hairy path to travel with users needing to update odbc drivers. <br><br></td></tr></table><br>
<a name="927159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm OK thankyou. The forms are just for people who want to edit the data it's not needed for anyone who just wants to play. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
