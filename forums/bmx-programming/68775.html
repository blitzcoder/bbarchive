<!DOCTYPE html><html lang="en" ><head ><title >Request : imports allowed anywhere</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Request : imports allowed anywhere</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Request : imports allowed anywhere</a><br><br>
<a name="768663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT: This can be considered solved. Or rather, change that to a request for a documentation update.<br><br>Is there a good reason why imports have to be done at the very beginning of the program?<br>I mean it's not like BlitzMax compiler is done in one pass or anything.<br>I can reference in my code functions or types declared later on, but I can't add an import at the point where I actually need it???<br>Quite frankly this is getting on my nerves.<br><br>This is all the more annoying that building modules has been regarded as something for "advanced" programmers (even if there's not much to it), in that it doesn't come out of the box (requires to install MINGW on windows). <br>Those that want to code out of the box and not bother with building modules just use includes instead.<br>But these includes *cannot* do the import they require, or else the compiler complains that an import must be done at the start of the program. You'll then have to let the main program do the import for you (oh god, that's modular programming...) or make it a module just to satisfy the compiler.<br>And let's be clear, even "advanced" programmers are not always willing to make a module out of a twenty lines long code snippet, seriously.<br><br>So the question is:<br>is there any rationale behind this?<br>Given that even a stupid preprocessor could do the trick (moving all the imports at the very beginning), I doubt it, but I may be biased.<br><br>Can we remotely hope a change in this behaviour?<br><br>As a bonus question : am I alone worrying about this?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="768674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a good reason why imports have to be done at the very beginning of the program? <br></div>Yep, so you can see faster which ones are used.<br><br>NOt the same question, but similar<br><a href="http://www.blitzmax.com/Community/posts.php?topic=59760#666272" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=59760#666272</a> <br><br></td></tr></table><br>
<a name="768686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's not a good reason. This kind of things are best to be left to the discretion of the programmer.<br>By the same reasoning we should only be able to declare local variables at the start of a function. But that's not the case. That's the very same issue, I don't see why a different rationale should apply.<br><br>In the early days, a lot of programming languages mandated to have local variables all declared at the start of a function. And a lot of people thought it was better that way, more "organized". Until finally most people realized the benefits of locality: a local variable, used locally (doh) should be declared as close as possible to its use. Hence the change regarding this rule from C to C++.<br><br>And my question is more about a good "technical" reason. <br><br></td></tr></table><br>
<a name="768689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where does "import" imply "module" ?<br><br>I have no problems importing .bmx files in a program that are not modules.<br><br>minGW is only required because WINDOWS doesn't have gcc compiling "out of the box".<br>If you want to look at it that way, both Mac and Linux require   you have a development environment installed too - for *any* compiling.<br><br>It would have been better had Include not been available at all - but I see how BRL used it so that Blitz3D coders etc wouldn't have to learn something "new"... ;-)<br><br>You should also have a word with Sun, while you are at it, and tell them that Java should allow imports anywhere in the code too. Damn those Sun people - they think they know everything... tsk.. pah...<br><br>If you insist on using Includes, which seems lazy to me (although others seem to swear by it), then you need to live by the consequences.<br>Why anyone would want to Include all the .bmx files and recompile all 15,000 lines of their app everytime they change a character in one of the files, is beyond me.<br>It seems silly that rather by using Import, one can cut compile times down to almost nothing, don't you think?<br><br>But then, if your .bmx files are only 20 lines of code, using Include shouldn't take too long to compile....<br><br>You can please some of the people some of the time....<br><br>;-) <br><br></td></tr></table><br>
<a name="768691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because the compiler needs to know the entire interface topography before it can parse the source code? <br><br></td></tr></table><br>
<a name="768694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's not a good reason <br></div>I know. ;)<br>If you read the thread I linked to you will see I gave the same arguments as you 10mths ago, and it was promised that some change to import/include would be looked into.<br><br>What I wanted, was either a way for Superstrict to be ignored in includes, or imports to be placed Anywhere. <br><br></td></tr></table><br>
<a name="768696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> which seems lazy to me <br></div>OK, then I'm lazy. That's fine to me. Lazy bones make good programmers. They're better at factorization.<br><br><div class="quote"> I have no problems importing .bmx files in a program that are not modules. <br></div>You missed the point I'm afraid. I want to be able to include files that do imports (whatever it imports). I just can't.<br><br>But hey, I don't care if anyone finds it usefull ot not, I just don't get the point of explicitely forbidding it.<br><br>If you say why should I be able to do it, I'd like to say: why not? And in front of that I see good reasons to *allow* it. I'm not saying it will change the face of programming in BlitzMAx, it will just make my life easier from time to time.<br><br><div class="quote"> You should also have a word with Sun, while you are at it, and tell them that Java should allow imports anywhere in the code too. Damn those Sun people - they think they know everything... tsk.. pah... <br></div>Except I can actually import at the start of every java file...<br>And it wouldn't make sense to import inside a class, right? ebcause every pice of code in java is inside a class, which isn't the case at all in BlitzMax. So maybe I'd need a better phrasing: I want to be able to put an import everywhere at the global scope.<br>In addition, making a module requires to have it in the mod directory. That's annoying enough that I don't want to do it for little code snippets. That's my main concern personnaly. If I could have modules in my own project's folder then that would be all fine.<br><br><div class="quote"> Why anyone would want to Include all the .bmx files and recompile all 15,000 lines  <br></div>And you missed one thing again: the "20 lines" part. I make modules when it makes sence, but for little code snippets I'd rather not. Is it SO much beyond you?<br><br><div class="quote"> Because the compiler needs to know the entire interface topography before it can parse the source code?  <br></div>Nope. How the hell can I call a function defined later on then? <br><br></td></tr></table><br>
<a name="768709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And you missed one thing again: the "20 lines" part. I make modules when it makes sence, but for little code snippets I'd rather not. Is it SO much beyond you? <br></div><br>Apparently..<br>I just don't understand what the obsession with making modules and using Imports is all about.<br>If you want to Import some code, it doesn't need to be in a module.<br>afile.bmx<br><pre class=code>
SuperStrict

Import "mystuff.bmx"
</pre><br>mystuff.bmx<br><pre class=code>
SuperStrict

' ... some stuff
</pre><br><br>Modules are only useful if you want to package up some library or such... otherwise you can get by fine with simply Importing a .bmx when you need it. <br><br></td></tr></table><br>
<a name="768712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As a bonus question : am I alone worrying about this?  <br></div> Possibly or there's a lot of confusion.<br>What is the actual problem/question you're asking?<br>If you import a module/file it might contain 20 functions which you use in 20 different places. Where would you want to put the import statement in that case? <br><br></td></tr></table><br>
<a name="768717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you want to Import some code, it doesn't need to be in a module. <br></div>The import statement needs to be at the very start of the program. If I include a file which does an import, obviously there's a syntax error in the present state of the compiler.<br>The problem is with "mystuff.bmx" here. You need an example, so here it is:<br><pre class=code>'Main program
Import bla.bla
Import bla.bla2
Include "mystuff.bmx"</pre><br><pre class=code>'Mystuff.bmx
Import some.module.mystuff.really.needs
Function MyFunction()
End Function
...</pre><br><br>OK, right now this can't work because "Import some.module.mystuff.really.needs" doesn't end up at the start of the program when the code gets expanded in the include statement.<br><br>If I want i to work, solution 1 is:<br><br><pre class=code>'Main program
Import bla.bla
Import bla.bla2
Import some.module.mystuff.really.needs
Include "blabla.bmx"
Include "mystuff.bmx"</pre><br><pre class=code>'Mystuff.bmx
Function MyFunction()
End Function
...</pre><br>That is, move the import in the main program. Ugly.<br><br>Solution 2 is:<br><br><pre class=code>'Main program
Import bla.bla
Import bla.bla2
Import some.module.mystuff.really.needs
Import "me.mystuff"
Include "blabla.bmx"</pre><br><pre class=code>'Mystuff.bmx
Module me.mysuff
Function MyFunction()
End Function
...</pre><br>That is, make it a *module*.<br>It solves the problem because then both files  are compiled separately, with in both cases no more import statement that appears in the "wrong" place.<br><br><br>Of course here a simpler solution is to simply move the include up, like this:<br><pre class=code>'Main program
Import bla.bla
Import bla.bla2
Import some.module.mystuff.really.needs
Include "mystuff.bmx"
Include "blabla.bmx"</pre><br><pre class=code>'Mystuff.bmx
Module me.mystuff
Function MyFunction()
End Function
...</pre><br>But obviously that won't work for more than 1 single include file. <br><br></td></tr></table><br>
<a name="768796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> But why can't you use :<br><pre class=code>
'Main program
Import bla.bla
Import bla.bla2
Import "mystuff.bmx"   ' Import instead of Include
</pre><br><pre class=code>
'Mystuff.bmx
Import some.module.mystuff.really.needs
Function MyFunction()
End Function
</pre><br>is what I don't understand... because that will compile without issue as far as I can see.<br><br>I guess I don't see what the fascination is with using "Include"... <br><br></td></tr></table><br>
<a name="768800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just post it as bug and Mark will response. <br><br></td></tr></table><br>
<a name="768814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... <br><br></td></tr></table><br>
<a name="768816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually Brucey, you're right. Totally right. I didn't really got the<br><pre class=code>Import "mystuff.bmx"</pre> part until just now.<br>That's right, I only just realized you can do that and it will really work just like a module import.<br>As the fact of not being able to keep my source files in my own directory was my inly personal concern (I'm not concerned by the out of the box thing), it perfectly solves my problem. And actually it solves the out of the box thing too.<br>So, sorry for the fuss. <br>For what it's worth, I had done a test to check if the Import "bla.bmx" made any change, and it failed. Obviously I must have done something really stupid. And the uncommon idea of "importing a source file" didn't help to realize that.<br><br>I just wished the docs were anywhere close to explicit about this. It would have required a single line in the docs to save me from the trouble.<br><br>And I don't even know if the code will actually be recompiled everythime. I'll have to test for curiosity sake (though I don't care).<br><br><div class="quote"> I guess I don't see what the fascination is with using "Include"...  <br></div>There has never been any fascination. Give me the ability to remove the syntax error on the import statement AND to keep my files in my own folder and I'm happy. That's precisely what I got, so everything's fine. <br><br></td></tr></table><br>
<a name="768828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And I don't even know if the code will actually be recompiled everythime. <br></div><br><br>Using Import, only the files that you change will be recompiled. Everything else will only be linked into the app, saving you lots of time if there is a large amount of code in separate .bmx's.<br><br><br>Glad you solved your problem.<br><br>:-) <br><br></td></tr></table><br>
<a name="768998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately, it seems that it IS actually recompiled everytime.<br>Apparently when importing raw .bmx files, each one is recompiled everytime I compile the top file, even with no code modification. That was more or less what I expected (or feared).<br>Too bad, but I can easily live with it. Though the net compile time seems to be worse now, which seems quite logical actually : the total amount of source code to compile is the same but with the uncompressible processing (process creation, initialization etc) being multiplied several times and additional linking required.<br><br>Maybe I have some weird setup problem that prevents the normal behaviour to work correctly. Please let me know if you can confirm that the imported raw .bmx files are not recompiled everytime. Thanks. <br><br></td></tr></table><br>
<a name="769005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Unfortunately, it seems that it IS actually recompiled everytime. <br></div><br>Not if you have quick build turned on.<br><br>And if it did, when you use BLIde you loadin the import once, tell it to be built, and then it wont be rebuilt if quick build is on <br><br></td></tr></table><br>
<a name="769013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Import is basically a compiler directive to link object files in to the main file. That's why it works with either BMX files, modules, C, whatever. It just adds a file to the link step. You're lucky you don't have to specify them in a command line configuration like in VC++. <br><br></td></tr></table><br>
<a name="769024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahem, I know what an import is. But you actually import  compiled code, not source files. That's what seemed disturbing about the idea of "importing a .bmx file". Though I now like the way it's done in BlitzMax.<br>But thank you. And yes, I am indeed glad not to have to specify it on a command line.<br><br>@H&amp;K: Thanks, I knew it was probably a stupid thing. It was bound to happen, until recently I had not done any real coding in BlitzMax since the day I bought it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
