<!DOCTYPE html><html lang="en" ><head ><title >Fastest Resize Image?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fastest Resize Image?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Fastest Resize Image?</a><br><br>
<a name="645071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>Is there a faster imageresize function than this?<br><br><pre class=code>
Function ResizeImage:TImage(image:TImage,width,height)
	Local pix:TPixmap=LockImage(image)
	pix=ResizePixmap(pix,width,height)
	UnlockImage(image)	
	Return LoadImage(pix)
End Function
</pre><br><br>I just want to be sure there isn't as I need every millisecond.... :)<br><br>Grisu <br><br></td></tr></table><br>
<a name="645084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Every millisecond?  That's a lot of resizing.  I don't think any function could resize an image that fast.  Or if it could resize one, I don't think it would be able to do two. Unless it was a very small image you were trying to resize.<br><br>Just tried an experiment using BMax120.png file.  Resize at fastest was 2 milliseconds.  Slowest was 15, probably during garbage collection.  This is on a 2 Ghz system.<br><br>Any reason you couldn't use SetScale? <br><br></td></tr></table><br>
<a name="645089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you need the image physically resized? <br>Setscale is quicker than resizepixmap. <br><br></td></tr></table><br>
<a name="645095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe he's looking out for ram. <br><br></td></tr></table><br>
<a name="645096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blimey, how did TomToad get in front of me by 9 mins? I am sure there wasn't a response when I responded.<br>Anyway, think Grisu is saying that every ms is precious rather than wants to resize every ms. <br><br></td></tr></table><br>
<a name="645105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> My problem is I'm writing a fully resizeable windows gui app.<br>In this app I have a native 340x340 pixel image displayed in a  canvas. <br>As soon as I resize the window you can see how each element is changed in shape. This looks a bit ugly. So I'm searching for a way to speed this up.<br><br><pre class=code>
' Done on EVENT_WINDOWSIZE
ClientW=ClientWidth(MyWindow)  
ClientH=ClientHeight(MyWindow)
CanW=(ClientW-800)/2  
CanH=(ClientH-401)/2
' ^^these vars are used more than one time, so I store them in vars

CoverIMG=ResizeImage:TImage(CoverIMG,(340+CanW),(340+CanH))   
SetGadgetShape(MyCanvas:TGadget,ClientW-345-CanW,5,(340+CanW),(340+CanH))
(...setting other shapes...) 

</pre><br>I have uploaded an alpha app, so you can see for yourself.<br>I'm not that good at explaining.<br><br><a href="http://grisu.roxr.com/dfa.zip" target="_blank">http://grisu.roxr.com/dfa.zip</a> (2.4 MB)<br><br><br>If it is possible to use setscale for this I'm not sure how to calculate the new image scalefactor so that it fits the canvas size. <br><br></td></tr></table><br>
<a name="645124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't need it to be bigger than the backbuffer once resized, you can just use DrawImage using SetScale and then GrabImage, it might be faster than doing the pixmap resize. <br><br></td></tr></table><br>
<a name="645128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha, think I have it<br>Drawimagerect? <br>If you use the canvas sizes it should do the trick. <br><br></td></tr></table><br>
<a name="645157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Setscale... the problem is how do I calculate the percentage?<br><br>      sx#=((100/340)*(340+CanW))/100<br>      sy#=((100/340)*(340+CanH))/100<br><br>It seems to be faster though I can't calculate the values right. I don't need to grab and create a new image. I think its fast enough to simply scale it every frame.<br><br><br>Drawimagerect won't do. The original size is 340x340, so I could include bigger covers. But 1. that would bloat the exe and 2. the images wound't look any better as they are scaled up. <br><br></td></tr></table><br>
<a name="645176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tonyg is correct, you should use DrawImageRect() for this.<br><br>Bmax's DrawImageRect() works differently to the other BB versions. It scales the image up or down to fit into the defined rectangle. <br><br></td></tr></table><br>
<a name="645184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, well, stupid me. I thought DrawImageRect was like it was in the "old days" with BP.<br><br>I simply changed one line of code and it now scales as smooth as silk.<br><br>THANKS A LOT EVERYONE! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
