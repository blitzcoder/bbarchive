<!DOCTYPE html><html lang="en" ><head ><title >pixel perfect collision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >pixel perfect collision</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >pixel perfect collision</a><br><br>
<a name="1172108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey there, anyone ever had trouble with pixel perfect collision?<br><br>I've used imagescollide2, where you specify the rotation and scale of your images to the function, so no matter what they are the function knows. Rather than having to have all your images synchronized in rotation/scale with using imagescollide.<br><br>Trouble is when I zoom out, its off a bit. I scale out to about 0.3 and the projectiles miss like tips of the object, have to aim more for the centre. fully zoomed in to scale 2.0 and the projectiles collide slightly off from the target.<br><br>I then tried collideimage, since when its written to the mask, it is written at its current transform, scale/zoom etc. Same exact result as imagescollide.<br><br>So two different ways and the same result, any idea on what I could be doing wrong? <br><br></td></tr></table><br>
<a name="1172112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure. Can you post a simple code example? <br><br></td></tr></table><br>
<a name="1172113"></a>

<a name="1172114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	If ImagesCollide2(missile.image, missile.x, missile.y,missile.frame,missile.angle, viewfactor, viewfactor, eachEnemyShip.image,eachEnemyShip.x,eachEnemyShip.y,0, eachenemyship.angle, viewfactor,viewfactor)


</textarea><br><br>the collision is fine by default and pixel perfect. the execution starts with everything at scale 1.0<br><br>the scale is set according to the viewfactor. There are no errors with the scaling as everything scales in/out based on viewfactor, so it's not seeing different scales for the different images.<br><br>the missiles are scaled according to viewfactor and so is the ships.<br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="1172142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe I'm wrong, but wasn't it like that:<br><br>If the scaling code line is inside your graphic creation function and the collision function is not... you have to repeat the SCALE command before testing the collision.<br><br>or you have to test collision even in the moment when you draw the objects. <br><br></td></tr></table><br>
<a name="1172169"></a>

<a name="1172171"></a>

<a name="1172177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> at the moment I have removed all scale commands from before drawing graphics. All scaling is done from the main loop.<br><br>setscale viewfactor, viewfactor<br><br>which scales everything.<br><br>outside the loop i have globaled viewfactor to be 1, so eevrything starts off normal size.<br><br>I did a test whereby i set the scale of the projectile to be .3 from before its draw in the draw method, and the scale of the ship graphic to be .3 in its draw method, then set the imagescollide function parameter to check at scale .3<br><br>still slightly awry. could my actual graphic be the problem?<br><br><font class="tiny">Last edited 2013</font><br><br><br>After these tests, this led me to believe imagescollide wasn't the issue, nor the use of it perse. the transforms were all correct.<br><br>I'm drawing my stuff based on the scale, so even though there world coordinates do not change when zooming in/out (scaling up/down)... the drawing coordinates of the image themsevles change because they are taking in the *viewfactor into account. And I had the imagescollide checking for the world coordinates only not the drawing coordinates. Before I added zooming the drawing coordinates used to be only x,y so the collision test was written for x,y. But now I am drawing the images at an offset and had not taken that into account.<br><br>So I created a field for each offset, offsetx and offsety and stored all the offset data into the fields of each object, and draw at the offset instead of just x,y and check the collision at the offsets and voila. Since my collision function is separate, it has to be able to see the fields of the object.<br><br>my offset is this:<br><br>offset = ship.x + ( (x - ship.x) *viewfactor<br><br>where x is the object, and you are offsetting that object in relation to where ship.x is (which is the player) since everything is being draw and offset according to the player who is drawn fixed at the centre of the screen.<br><br>thanks for your help!<br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="1172392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alberto-Diablo</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> publish a small example of the problem. <br><br></td></tr></table><br>
<a name="1172696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got it fixed thanks. I had edited my post, to show where I went wrong! Thanks.<br><br>Last edited 3 days ago <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
