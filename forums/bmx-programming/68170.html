<!DOCTYPE html><html lang="en" ><head ><title >TCP Sockets</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TCP Sockets</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >TCP Sockets</a><br><br>
<a name="761582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a good tutorial on how to use them or a good module to make my life easyer?<br>I need to learn how to make a Server to wich more clients can connect.<br>I tryed to learn it myself looking on some examples but I can't manage to get them connected. <br><br></td></tr></table><br>
<a name="761851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertex</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the old lyre, but:<br><a href="http://vertex.dreamfall.at/bnet/bnetex166.zip" target="_blank">http://vertex.dreamfall.at/bnet/bnetex166.zip</a><br><br>On the server side:<br>- Server = New TTCPStream<br>- Server.Init()<br>- Server.SetLocalPort(Port) &lt;- the Port that have the clients to connect<br>- Server.SetTimeouts(Receive, Send, Accept) &lt;- timeouts for receiving, sending and accepting(new clients)<br>- Server.Listen() &lt;- now, the server is listen for new clients<br><br>- NewClient = Server.Accept() &lt;- if there is a new client connected, NewClient is a new TTCPStream<br>- The IP and Port you can get via NewClient.GetLocalIP() and NewClinet.GetLocalPort()<br>- Save the NewClient in a list or array<br><br>- In a For Each Loop(in the list or array) you check the connection with Client.GetState() &lt;&gt; 1<br>- If the state &lt;&gt; 1, then the client has disconnected. So the client must remove from the list/array<br>- If the client have data sended, you can check it with Client.RecvAvail<br>- When receiving available, so you receive all messages from it with While Client.RecvMsg() ; Wend. All packages stored in an internal buffer of the stream<br>- Now you can readout the packages with While Not Client.EoF() and Client.ReadLine(), Client.ReadInt() or so on.<br><br>- If you want to send the client any data, you have to Client.WriteLine("Hello, world"), Client.WriteInt(123) or so on and than finaly While Client.SendMsg() ; Wend<br><br>On the client side:<br>- Client = New TTCPStream<br>- Client.Init()<br>- Client.SetLocalPort() &lt;- you can set here a port, or let the OS search for a free port<br>- Client.SetRemotePort(1234) &lt;- the remote port you have set on the server side(80 = HTTP for example)<br>- Client.SetRemoteIP(TNetwork.IntIP("127.0.0.1")) &lt;- set the remote ip e.g. the server ip<br>- Client.SetTimeouts(Receive, Send) &lt;- set the timeouts for receiving and sending(accept is ignored for clients)<br>- Client.Connect() &lt;- connect to the server<br><br>- You can check the connection to the server with Client.GetState() &lt;&gt; 1 too<br>- Check for new packages from the server with Client.RecvAvail()<br>- When packages available then you receive it with While Client.RecvMsg() ; Wend<br>- And read the content with While Not Client.EoF() and Client.ReadLine() or so on<br><br>- If you want to send data to the server, you have to do it with Client.WriteLine("Hello, world") or so and send it with While Client.SendMsg()<br><br>I hope, this will help you.<br><br>cu olli <br><br></td></tr></table><br>
<a name="762100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Putting send/receive stuff in while loops, won't that make the game hang until it's completed? <br><br></td></tr></table><br>
<a name="762114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I allready found out about Bnetex and I allready made a working server and client but thx anyway.<br>The documentation you posted shure makes it easyer :)<br>Thanx! :) <br><br></td></tr></table><br>
<a name="762153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertex</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> kronholm: Becouse this, you have to set the timeouts. But with Stream.RecvAvail() you can check faster for new packages. Normaly, the networkstuff have to put in a parallel thread to the game/server, but this is actually not possible with BMax I've heard.<br><br>Synctus: hehe, ok, have fun :)<br><br>cu olli <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
