<!DOCTYPE html><html lang="en" ><head ><title >Cyclic Prevention...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Cyclic Prevention...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Cyclic Prevention...</a><br><br>
<a name="940578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK so you need your code to create possibly complex object 'graphs', objects linked to other objects.<br><br>That's fine for linear or even basic branched structures, but how do you prevent it from going round in circles with cyclic links e.g.<br><br>ObjectA -&gt; ObjectB -&gt; ObjectA<br><br>Regards<br><br>Allan <br><br></td></tr></table><br>
<a name="940581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Design your logic to avoid this. There's not any fixed rule that fixes the issue automagically. <br>There's one possibility:<br><pre class=code>Method SecurePointTo(MyObj:TMyClass)
?debug
    Local Obj:TMyClass = MyObj
    Local Cycles:int = 0
    While Obj.Pointer&lt;&gt;null then
        If Obj.Pointer = self then
            throw "cycle found"
        End if
        Obj = Obj.Pointer
        Cycles:+1
        if cycles &gt;=100000 then
            throw "too many branches. Process stoped for security"
        end if
    Wend
?
    self.Pointer = MyObj
End method</pre><br>This is a security code that could work, for a certain type, suposing that the field Pointer is used to create the potentially cyclic dependencie.<br>Not the best code in the world, but it could be usefull while designing the object for a given application.<br>Not tested, as I'm not on my code machine right now. Just to give an idea! <br><br></td></tr></table><br>
<a name="940593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey cheers ziggy, so in my case if I just have a root Object and test to ensure I'm not continually cycling past it! <br><br></td></tr></table><br>
<a name="940602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you avoiding this because of memory-leak concerns or program logic concerns? <br><br></td></tr></table><br>
<a name="940621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Design your logic to avoid this. <br></div><br>That is the key.<br><br>If you feel you must build cyclic relationships then you will need to ensure you can trap infinite recursions. <br><br></td></tr></table><br>
<a name="940623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> A graph with no cycles in it is a tree. So, you need to make sure you're making a tree.<br><br>If you're joining "free" objects together, that is, objects that are not already linked to something else, there's no chance of a cycle occurring, clearly. This is also true if you're joining one linked object to a free object.<br><br>If you're joining two linked objects to each other, you need to check if they belong to the same tree. If they do belong to the same tree, a cycle will always arise, but if they do not belong to the same tree, a cycle will never arise.<br><br><br>I had this problem when I made my game "penpals". What I did was add a "root object" field, a "parent object" field, and a list of "children" for each object. <br>When an object is created, its root is itself and its parent is null. <br>When a free object O1 is linked to another object O2, its root is set to O2's root, O2 becomes O1's parent, and O1 is added to O2's list of children.<br><br>When an object which already has a parent is joined to another object which already has a parent, things get trickier. The first object's tree must be "reversed" by adding its old parent to its list of children, then recursively performing this operation on the old parent until you get to a parentless object. The object you want to join is now parentless and can be linked as before.<br><br>You can check out my code if you want at <a href="http://somethingorotherwhatever.com/penpals.zip" target="_blank">somethingorotherwhatever.com</a>. In fact, this has inspired me to make a more simple example for you. I'll see if I can get that done tonight. <br><br></td></tr></table><br>
<a name="940625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> PS by the way, if you need to check for cycles while traversing a graph you've already constructed, one method is to keep a list of all the nodes you've already been to. If you get to a node which is already on the list, you've got a cycle. <br><br></td></tr></table><br>
<a name="940629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers everyone got it sorted!<br><br>@Warpy ended up using a record of the traversed object 'graph' using a map for quick lookup access!<br><br>My database reflector now works with Tlist and  TMap as well as ObjectA -&gt; ObjectB -&gt; ObjectA cyclic objects!<br><br>Next it's off to tackle mister BLOBy!<br><br>@Brucey: Any progress or helpful insights into BLOB's and Sqlite thinking of using Banks but as it's a reflector not sure how that's going to pan out? <br><br></td></tr></table><br>
<a name="940741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any progress or helpful insights into BLOB's and Sqlite <br></div><br>I'll have a look at implementing blobs tonight - it's the only data type that I've yet to do - which should be easy enough given that it's just raw data. <br><br></td></tr></table><br>
<a name="940750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Brucey Excellent I've got to make lots more tests up and setup the framework to handle BLOB's!<br><br>I'm keen to share this with the community once it's at Beta and I have tidied up the code a bit, which is the best way to do that svn/googlecode? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
