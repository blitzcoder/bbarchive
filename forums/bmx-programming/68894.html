<!DOCTYPE html><html lang="en" ><head ><title >Game structure</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Game structure</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Game structure</a><br><br>
<a name="770040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Iv been thinking about how I structure my games, and how I lay out everything and felt like sharing for that all important suggestion and critic that these forums are so good for.<br><br><b>Main.file</b> - sets GFX mode, loads ini files, and includes all includes, also calls the intro<br><b>Media.file</b> - holds all my loading stuff.<br><b>Intro.file</b> - handles the fade/in-out of all the intro gfx.<br><b>Gui.file</b> - Holds main GUI loop, an all functions used by the gui.<br><b>Game.file</b> - Holds main game loop, and all funciton dealing with the game in general.<br><b>Player.file</b> - all player type's and functions / methods<br><b>Bullet.file</b> - all player and alien bullets and functions / methods<br><b>Enemy.file</b> - all enemy functions, methods , types etc.<br><b>Powerups.file</b> - all game powerups, functions etc..<br><br>thats the basic sorta structure of my projects, I know a few people who put all types, regardless of their content into a type.bb, all functions into functions.bb etx.. Iv not tried that because I am unsure of how clean it would be.<br><br>Anyway just wondering which route you guys take. do you split your files to make your project easier to manage or do you just lump it all in one big file. <br><br></td></tr></table><br>
<a name="770044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're gonna need to spread it out WAY more than that if you're dealing with even a small simple game, unless you like having 20+ pages to browse through.<br><br>That's just my opinion anyway. <br><br></td></tr></table><br>
<a name="770048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I work with one main file at first.<br><br>As it grows, and I'm done editing specific bits, I chop them out and put them in an include file out of the way.<br><br>I don't think you can realistically plan exactly what include files you're going to have from the outset. <br><br></td></tr></table><br>
<a name="770052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you need tons of files, it's a pain in the arse too.  Find is pretty useful so is the function listing window at the side of the IDE.<br><br>Anyway Yavin I can see some stuff missing for a "finished" game e.g. Title screen, loading screen, options screen, high scores screen, credits screen, end game animation, map screen, meta game screen, mini game screen, other sub-screens ;-)<br><br>That's why I have a ScreenTypes.bmx which is separate from where I write my actual game screen code. <br><br></td></tr></table><br>
<a name="770057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can only comment on that from an app point of view. I spend some time just thinking about what all the smallest parts are. And then I just start creating those, as neutral and independent as possible (makes for good reuse).<br><br>I've also decided that I'm lazy and that I'm bad in reading back my own code after a while, so I basically invent a way in which I don't have to read back code in order to understand the whole shebang. The lazy bit refers to designing the code so that I really don't have to think about it anymore after it's completed.<br><br>Let's grab your list. I'll add just what I think about it, sometimes not with the indication that something's wrong, just what I would've done.<br><br><br><b>Main.file</b> no comments<br><b>Media.file</b><br>What about having all media in an XML file and simply load/process that XML file in the Main file? This way you get rid of zillions of seperate LoadImage and LoadSound commands, makes it less hardwired so to say..<br><b>Intro.file</b><br>What about making a small movie scripting engine, gfx of course come from that XML file. The only thing this Intro.file could contain is a large Type that plays back a movie, based on a script which is located somewhere in the XML file.<br><b>Gui.file</b> I assume this refers to a non-MAXGUI gui then.. no further comments.<br><b>Game.file</b> no comments<br><b>Player.file</b> no comments<br><b>Bullet.file &amp; Powerups.file</b> I combined them as I estimated that these could actually be the same. I'm not sure tho, heck I don't even know what kinda game it is. But I'd consider something like a particle system (ONE particle system) of which the particles can act as bullets or as powerups, this is assuming this powerup is some 'thing' floating in space which you can pickup.. here I assume you're making a shmup :P<br><b>Enemy.file</b> Actually I wonder whether I should've combined this one with the previous one. Again depending on the gametime I'd estimate that every 'thing' in your universe is nearly the same:<br>- a bullet has xyz coords and can hit enemies<br>- a powerup has xyz coords and you can pick it up<br>- an enemy as xyz coords and it can kill you<br>I'd go as far as saying that -detals aside- you could create one big particle system where each particle can fulfill a major role in your game. So rather than 3x some code, perhaps 1x a major lot of code pays of more. The advantage is that you can share some stuff: an enemy that explodes shows some explosion animation. But bullets hitting a wall could also show some (smaller) explosion. So having the same functionality in one major object could have its advantages.<br><br>*if* I'd be doing a game I'd prolly spend most of the time on these complex objects in order to make life simpler for me once that object is done. Having less different objects would imply that you'd be using less different parts perhaps.<br><br>Until that moment, I sign off with my 2 cents.. :P <br><br></td></tr></table><br>
<a name="770115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use Blide for editing, and make full use of the folding feature for types/functions/loops etc.<br><br>Bullet Candy has a setup.bmx file, a types file, a menu file and a main file.<br><br>I've tried separating things into smaller chunks before, but i end up forgetting where things are.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="770138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow, didnt realise as many of you keep things in so few files.<br><br>One of my projects PDS :: <a href="http://www.youtube.com/watch?v=JteXMpZ-Xf0" target="_blank">http://www.youtube.com/watch?v=JteXMpZ-Xf0</a><br><br>Has about 12 includes.<br><pre class=code>
Include "bmpfont3d.bb"	
Include "hud.bb"
Include "gui.bb"
Include "game.bb"
Include "player.bb"
Include "bullet.bb"
Include "roid.bb"
Include "particle.bb"
Include "keycodes.bb"
Include "gama_flash.bb"
Include "power.bb"
Include "levelout.bb"
</pre><br><br>Each include only has code relevant to that file for example all asteroids are dealt with in roid.bb, all game bullets are handled in bullet, you get the idea with the rest.<br><br>I find it really easy to find stuff like this, it also means I dont need to have like 50 thousand line long project open at one time, I can just open to relevant files for the parts of the game I am working on.<br><br>I also like it like that because I try an make my code as reusable as possible, so I can almost just grab bullets.bb and drop it into any project that uses bullets.<br><br>Anyone else do it any other ways ? I love finding out what other people do helps improve the way I do things. <br><br></td></tr></table><br>
<a name="770261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> For once, I agree with CS_TBL.<br><br>I generally try to have one file per class (unless it's a small helper class). Why? For starters it means that we don't get many conflicts when trying to commit code into our repository. It's also much cleaner to read, and easier to find what you're looking for.<br><br><div class="quote"> I don't think you need tons of files, it's a pain in the arse too. Find is pretty useful so is the function listing window at the side of the IDE. <br></div>I don't see how the shortcomings of the Blitz IDE, is a good reason to advocate werewolf code. Rather matter-of-factly I see it the opposite way around. The implied necessity of writing unmaintainable code in order for the IDE to be marginally useful, should be an indication that the IDE needs to be replaced / upgraded. <br><br></td></tr></table><br>
<a name="770264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> whooo! FD agrees with me! 'Today' will now end up in my portfolio.. :P <br><br></td></tr></table><br>
<a name="770308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> FD: Make this letter with both hands using your index fingers ad thumbs: "W" <br><br></td></tr></table><br>
<a name="770915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >computercoder</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with CS_TBL and FlameDuck. I break everything down into files. I may have end up with loads of files, but you will know what you did. Granted the IDE is capable of providing a way or two to find your code, but it also has a nifty feature called "Projects". If you "lost" where you put something, if you added a project for your app, then this will easly allow you to "locate" the code you are looking for. Also, I name the file to the name of the class. So, if i build Type MyType, then the file's name is MyType.bmx<br><br>In the end, its really up to what you are most comfortable with. I think in a team environment tho, you'd wanna break everything up for the reasons FlameDuck stated. <br><br></td></tr></table><br>
<a name="770926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like having my projects split over a lot of files that clearly define what's going to be inside of them.<br><br>Being a small indie developer, with limited resources, we don't all have access to filein/out systems and version tracking software so having say all functions/types dealing with a game object, like asteroids in my roids.bb file makes it really easy to give a team member 1 file with the relevant bits in it while i or others in the team work on the other files.<br><br>Anyway.. I will be sticking to the way I have been doing things for years thanks for all of the feedback. <br><br></td></tr></table><br>
<a name="770946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This was a very useful discussion for me.<br><br>I do both:<br>I start with a monolithic, monster file that has everything in it. all types, all functions, etc.<br><br>when I encounter my first bug (usually very fast), I split the proggie into files:<br><br>ThisType.bmx<br>ThatType.bmx<br>MathRoutines.bmx<br>Funcs.bmx<br><br>It does make things alot cleaner.<br><br>As for Versioning, I use a very sophisticated and complicated versioning system:<br><br>1. my files are named "filename-yymmdd-letter.bmx"<br>TVector-070421-a.bmx<br>Tvector-070421-b.bmx etc...<br><br>when I make a major change, I save-as to the next letter ("c" for instance) then i just change the import statement:<br>import "TVector-070421-c.bmx"<br><br>2. before I start a new programming day, I "roll-up" all import files to the current day's "a" file<br>Tvector-070421-g.bmx becomes Tvector-070422-a.bmx<br>(I never work directly on a. i test it then immedietly save-as "b" so I can easily roll-back to that days "a" file)<br>and change my import statements accordingly.<br>this only takes 3 mins.<br><br>It's no CVS but it works ok for me. call it "Ghetto-CVS"<br><br>EDIT: changed the date format (from Flameduck). <br><br></td></tr></table><br>
<a name="770949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Being a small indie developer, with limited resources, we don't all have access to filein/out systems and version tracking software <br></div>Why not? <a href="http://subversion.tigris.org/" target="_blank">It's free</a>.<br><br><div class="quote"> 1. my files are named "filename-mmddyy-letter.bmx" <br></div>Of course you realize the date format should be "yymmdd" so they get sorted correctly.<br><br><div class="quote"> this only takes 3 mins. <br></div>Your program must not have many imports/files. Updating from Subversion takes 15 seconds. Even checking out a fresh repository (98 Megs'ish in out case) doesn't take 3 minutes. <br><br></td></tr></table><br>
<a name="770951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> good point about the sorting. has never been an issue<br><br>also good point about the number of import files. also not an issue. maybe 10-12 files max. usually about 5.<br><br>like I said. it works for me. I will take your advice and swap the date format though. (could not hurt) <br><br></td></tr></table><br>
<a name="770964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> yah I sort all my photos folders and company invoices by yy-mm-dd filename. <br><br></td></tr></table><br>
<a name="770988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> When I rule the world, all other forms of representing time will be outlawed. :o&gt; <br><br></td></tr></table><br>
<a name="770989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have already prepared for that fateful day by changing my date format. <br><br></td></tr></table><br>
<a name="771156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Karja</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I find that keeping one class per file also helps with re-usability for new projects. I have a standard directory structure along these lines:<br><br>&lt;Game&gt;/game/<br>&lt;Game&gt;/framework/<br>&lt;Game&gt;/includes/<br>&lt;Game&gt;/main.bmx<br><br>The game-specific files are all placed...guess where. They, and the includes, need to be changed for a new project. But the "main loop" is essentially the same for all projects, and the framework contains support for generic things like audio/images/fonts/gui/logging/screen setup/particles/window handling/XML loading/etc. It's all re-usable with minimal fuss.<br><br>I've also found that it helps to split the game into clearly definable parts. I.e., "splash screen", "title screen", "minigame 1", "credits screen" and so on. I use nifty inheritance for easily plugging in new modules (that I - for some bloody reason - call Events):<br><br>Global CurrentEvent:Event<br><br>Type Event<br>	Method Update( frames# )<br>	End Method<br>	<br>	Method Draw()<br>	End Method<br>	<br>	Method Pause()<br>	End Method<br>	<br>	Method Resume()<br>	End Method<br>End Type<br><br>The game's main loop then only concerns itself with the CurrentEvent, and when you change module/Event, you simply change the global variable. Could use some better naming conventions, but it works pretty well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
