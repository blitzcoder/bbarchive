<!DOCTYPE html><html lang="en" ><head ><title >Extern?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extern?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Extern?</a><br><br>
<a name="630273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Extern <br>	Function puts( str$z )<br>	Function my_puts( str$z )="puts"<br>End Extern<br><br>puts "Using clib's put string!"<br>my_puts "Also using clib's put string!"<br> <br></div><br><br><br>What does extern do, and more importantly what the heck is with that variable name?  Why is there a $ in the middle? <br><br></td></tr></table><br>
<a name="630275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Extern is used to specify functions that are either in an imported library, non-BMax source file (Extern "C"), or specific to the OS API (Extern "Win32").<br><br>As far as I know, the part of Extern denoting 'source', sortof, is the calling convention used.  (Win32 is __stdcall, by the way)<br><br>$z denotes a CString (you can't specify :CString though -- it's wierd). <br><br></td></tr></table><br>
<a name="630282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Crow Leone" sounds familiar.  Something french I think.  Where have I heard that before?  It might be a single french word which has a similar sound.  And yes, I know that is an anagram. :-)<br><br>$z denotes a C string?  Well, I guess if you're going to make something nonsensical and against all the other conventions you might as well go all the way.  $c would have made much too much sense! :-)<br><br>[edit]<br>Maybe I am thinking of "o sole mio" which is italian.<br>crow sole leone?<br>[/edit] <br><br></td></tr></table><br>
<a name="630286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Maybe I am thinking of "o sole mio" which is italian.<br>crow sole leone? <br></div><br><br>No idea.  I just ran it through [a http://www.wordsmith.org/anagram/anagram.cgi?anagram=noel+cower&amp;include=&amp;exclude=&amp;d=2&amp;n=4&amp;m=5&amp;source=adv&amp;a=n&amp;l=n&amp;q=n&amp;language=english-obscure&amp;where=God+himself]http://www.wordsmith.org/anagram/[/a] <br><br></td></tr></table><br>
<a name="630382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift the reason it is $z is that c style strings are terminated with a null character, which is ascii 0. hint 'z' for zero. <br><br></td></tr></table><br>
<a name="630456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sushi:<br>See these are the kind of things that should be in the help file.  Now I might actually remember it. :-)<br><br>Where does the help file list this $z thing anyway? <br><br></td></tr></table><br>
<a name="630482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Think in the advanced topic section of the language description where it talks about extern usage in general <br><br></td></tr></table><br>
<a name="630487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> when you do a .ToCString() essentially there is memory allocated that must be freed.  if you pass in the direct result of ToCString() to an extern function you have lost the ability to free it causing a memory leak.  $z handles this for you.  so essentially these are equivelent (sp?):<br><pre class=code>
Extern 
	Function test1(c_str:Byte Ptr)
	Function test2(c_str$z)
EndExtern

Local mystr:String="the really cool test string"
Local strptr:Byte Ptr=mystr.ToCString()

test1(strptr)
test2(mystr) ' $z does the byte ptr conversion for you and cleans up afterwards
test1(mystr.ToCString()) ' this will cause a leak

MemFree(strptr) ' free up the memory ToCString() created
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
