<!DOCTYPE html><html lang="en" ><head ><title >Physics help!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Physics help!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Physics help!</a><br><br>
<a name="966396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> NOTE: It's kind of late, and I'm having trouble concentrating so stay with me. Sorry if some of this doesn't make sense.<br><br>How can I make particles bounce of walls in my 2D maps? Like a simple explosion. All, say, 20 particles start off at x and y. All particles are given an angle of Rnd(0,360). All particles are given an xspd and yspd of Rnd(1,5) and Rnd(1,5). Move particles with<br><pre class=code>x:+Sin(angle)*xspd
y:+Cos(angle)*yspd</pre><br>When a collision is made with the walls of the map, how can I make them "bounce" away?<br><br>Sorry, again, for what looks like a bunch of fragment sentences above. <br><br></td></tr></table><br>
<a name="966397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> HI,<br>Well I am not a pro at programming but the answer you seek is simple once broke down to theory:)  I check for collisions one plane at a time.<br>Say check for collision at the particles x location + xspd (problem with this if the particle is traveling faster than your blocks are wide it will go right though them).<br>If this comes back as a collision then make the xspd a negative value.<br>Same would be true if the xspd was negative, check collision then make a xspd positive value and would give the illusion of bouncing off walls n such.<br>When I program tile based games, I have a layer of solid colors)<br>I check pixels for color value then decide what action to take from there.  In a mario brother type game you just check to see if the particle is in the sector of a block.<br>You get the (x+xoffset_of_map)/width_of_block and this returns how many blocks over your x is. same is true for the y location of the map.<br><br>I hope this kind of helps you out. If not I can try to be more clear.  Happy Programming!! (don't hold me on the math above:) <br><br></td></tr></table><br>
<a name="966483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> what you need to do for the sake of making your physics 100 times easier is do the sin,cos stuff once and store that in a dx and dy value in the type.  then you just do<br><br><pre class=code>
x:+dx
y:+dy
</pre><br><br>this also allows you to do much simpler collision detection and response as well as gravity if needed<br><br>collision detection for left side of screen:<br><br><pre class=code>
If x &lt;= 0 Then
	x = 0
	dx = -dx
EndIf
</pre><br><br>see much easier :) <br><br></td></tr></table><br>
<a name="966626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> collision detection for left side of screen: <br></div><br>I have no way of telling which side of the wall (top, left, right, bottom) its hitting.<br><br>@DjBigWorm: Sadly, I did not understand any of that. :)<br><br>Some other stuff you may need to know about the maps:<br>1. The map has layers. (TILEMAP_WALL, TILEMAP_FLOOR, etc)<br>2. Each layer is one TImage. (all of the tiles are drawn on to the map layer[curlayer]) <br><br></td></tr></table><br>
<a name="966627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I have no way of telling which side of the wall (top, left, right, bottom) its hitting. <br></div><br><br>haha thats why you check for all of them ;) who would have thought <br><br></td></tr></table><br>
<a name="966629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> haha thats why you check for all of them ;) who would have thought <br></div><br>Alright, Nate the Great. I have no clue how to check which side (top, left, right, or bottom) of a wall thats being hit on one single TImage similar to this:<br><img src="http://i42.tinypic.com/35brqzp.png"><br>(white is the walls, black is the mask) <br><br></td></tr></table><br>
<a name="966799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DjBigWorm</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ked, <br><br>hmm, didn't understand.  I have blitzplus/blitzbasic code i can email you,<br>but has comments and what not maybe it will help you to understand what you are asking.<br>If that doesn't i can explain in more detail later on.<br>my profile has my email. let me know that way if you are interested!<br><br>Later and happy coding. <br><br></td></tr></table><br>
<a name="966803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh ok I was thinking you had a tilemap system or similar... in this case it may be best if you just make some sort of type for walls that would have the x,y coords of each end of the wall and simply loop through all of those and do basic collision checking for each one.<br><br>(hope that makes more sense) <br><br></td></tr></table><br>
<a name="966829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> My tilemap engine is a little different than others, because I have all of the tiles of each layer being drawn to one image of each layer. Drawing each tile separately will definitely slow the whole program down.<br><br>Anyway, I have decided not to do this because it's way too much trouble. I've been working at it all day today and yesterday, and nothing's coming up.<br><br>Thanks anyway to anyone that posted to help. <br><br></td></tr></table><br>
<a name="966863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> How are you managing to perform collisions then?  I'm also making a tilemap engine and i have a collision, background and foreground layer that the player can walk behind. <br><br></td></tr></table><br>
<a name="966864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> All of my tiles are on one TImage, so I'm just using ImagesCollide2() for standard collisions. I just didn't know how to make the objects bounce back after they made a collision with the wall layer. <br><br></td></tr></table><br>
<a name="966872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you pass the movement delta of the object to the collision routine you can scroll it back along the same path until it no longer collides.  You can pass a vector type back with how far back you had to move it to eliminate the collision, or use the Var (byref) parameter to pass it back through the same variables.<br><br>Cheers <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
