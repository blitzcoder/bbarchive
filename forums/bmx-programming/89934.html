<!DOCTYPE html><html lang="en" ><head ><title >does a single waiting thread degrade performance?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >does a single waiting thread degrade performance?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >does a single waiting thread degrade performance?</a><br><br>
<a name="1022030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rozek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange...<br><br>does the sheer presence of a separate thread (which does nothing but a "waitSemaphore") slow down the performance of a MT program?<br><br>I have two threads which communicate by sending each other some events - the event queues are protected using mutexes. The main thread also handles any GUI events (and thus periodically checks its reception queue) while the second thread simply uses "waitSemaphore" to wait until an event came in.<br><br>Mutex handling is independent of whether the second thread exists or not - but as soon as the second thread has been created (and just waits for its semaphore) the performance of the main thread goes down heavily(!). And this happens, although no events are currently transferred between the threads: the second thread just waits...<br><br>Just to make that clear again: there are only two threads (apart form those BMX creates itself) - one of them is waiting, and the other one (the main thread) handles GUI events. And it is this main thread, which seems to run only half as fast (roughly) when the second thread exists (and waits).<br><br>And that's bad...<br><br>Does anybody have similar experiences? <br><br></td></tr></table><br>
<a name="1022034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rozek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm,<br><br>I have to investigate that further, but it could be related to the debugger: when compiled without the "debug build" option, the performance does not seem to suffer so much after starting a second thread. Thus, be aware of performance problems when debugging multi-threaded applications! <br><br></td></tr></table><br>
<a name="1022036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rozek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well,<br><br>it does NOT only be related to the debugger, it might be something else...<br><br>A question: will a thread be "closed" after its "body" function has "return"ed? Or is it ALWAYS necessary to "waithread" or "detachthread"? <br><br></td></tr></table><br>
<a name="1022040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rozek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I got it!<br><br>It's IMPORTANT TO "detachThread" a thread even if it terminates itself by returning from the its "body" function! If you don't do that, you will soon run into trouble because your application will become veeeeeeeeerrrrrrrrrrrryyyyyyyyyy ssssllllllllllllllooooooooooooooooowwwwwwwwwwwwww!<br><br>Using the debugger also costs a lot of performance - but by far not as much as missing "detachThread" calls! <br><br></td></tr></table><br>
<a name="1022044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rozek I think you should write a tutorial some days - as there are no much documentation about threading in BlitzMax... and I think this will be very useful to many of us! <br><br></td></tr></table><br>
<a name="1022078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rozek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm,<br><br>I could try and add some documentation to the BlitzMAX modules, at least.<br><br>If others look into the built-in docs as I do, they will immediately benefit from more detailled information.<br><br>I will just have to negotiate with Mark Sibly et al what might be the best way to share my insight (because I may be wrong with my assumptions about how MT works in BlitzMAX) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
