<!DOCTYPE html><html lang="en" ><head ><title >Tile Map Transitions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tile Map Transitions</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Tile Map Transitions</a><br><br>
<a name="1075315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've come up with a cool tile system where I take a large seamless texture and split it up into 64x64 chunks to make the tiles. When painting the texture, it works out which frame to use on each tile so that you can intermix tiles of different kinds and each region of the same tile will always be seamless. It's a bit difficult to explain so here are some screenshots to show what I mean.<br><br><a href="http://www.shattered-design.com/forum/viewtopic.php?f=53&amp;t=116" target="_blank">http://www.shattered-design.com/forum/viewtopic.php?f=53&amp;t=116</a><br><br>The trouble I'm having, is how to make the transitions between tiles of different kinds. I undertand the standard way to do it is to make transition tiles for each direction, but as each kind of tile has several possibilities it would mean making a transition set for each unique tile and that is prohibitively excessive.<br><br>A transparent blend between the two could work, but I'm not sure how to do this dynamically. I'd like the effect not to be straight and regular if possible.<br><br>Any suggestions welcome. <br><br></td></tr></table><br>
<a name="1075324"></a>

<a name="1075325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> By googling around, I found this interesting method on tigsource forums:<br><a href="http://forums.tigsource.com/index.php?topic=9859.0" target="_blank">http://forums.tigsource.com/index.php?topic=9859.0</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi thanks.<br><br>The problem isn't deciding which corners to use, but because I have 64 possible middle tiles (as opposed to the normal 1 you get in tile games), it isn't practical to make that many sets of corner pieces which also tile seamlessly with that middle piece. <br><br></td></tr></table><br>
<a name="1075331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One possibility might be to use an alpha transparency tile as a fade out from certain tile types that could be overlayed on their neighbor.<br>e.g. grass next to sand, the first sand tile gets a tile drawn on top of it that's grass fading to transparent (the fade doesn't have to fill the whole tile, it could just be close to the edge). You would need to create 3 fade tiles for each base tile type (e.g. for grass you need side-&gt;transparent, inside corner-&gt;transparent and outside corner-&gt;transparent). You then have to determine what types draw on top of what other types (e.g. grass goes over everything, sand goes over metal but not grass, metal has no fades since everything else is higher up the list). When drawing, each tile calculates what should fade onto it if anything (e.g. sand in a corner determines that it should get corner crass drawn on it, sand with grass on the left gets side grass rotated left drawn on it, etc.)<br><br>That would be my approach anyway <br><br></td></tr></table><br>
<a name="1075333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's an interesting idea. Thanks.<br><br>On GameDev, this was suggested:<br><div class="quote"> You could use alpha-blending to smoothly transition between two different images. An alpha-mask image can make the transition prettier. For example for a transition between a grass tile and a rock tile, you can use a gray-scale mask where white areas are rock, black areas are grass, and 50% gray is halfways blended between rock and grass. That way you can blend several different grass tiles with different rock tiles using the same transition mask.  <br></div>http://www.gamedev.net/topic/595961-tile-transitions/<br><br>Can I do such a thing in Blitz? <br><br></td></tr></table><br>
<a name="1075334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you need to grasp the basics for texture-splatting with OpenGL (a technique for "applying" alpha values to a texture by using a different texture, a "mask" one):<br><a href="http://www.gamedev.net/topic/372568-multipass-texture-splatting/page__p__3456662#entry3456662" target="_blank">http://www.gamedev.net/topic/372568-multipass-texture-splatting/page__p__3456662#entry3456662</a><br>I think that in that code he assumed there was already a rendered quad with a ground texture.<br>In that code the 'baseTexture' would be modulated by the alpha values in 'alphaTexture', instead of its own.<br><br>This means that the same tile chunk painted along the map can have different alpha channels (by binding each tile to the alpha texture you want). To select which alpha texture to use you could resort to that bitwise tile sorting method. <br><br></td></tr></table><br>
<a name="1075335"></a>

<a name="1075336"></a>

<a name="1075337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> it would be easier to integrate this into my unofficial glmax2d<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2612" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2612</a><br><br>than to try to integrate it into the official one<br><br><font class="tiny">Last edited 2011</font><br><br><br>maybe you could access the texture matrix and turn it so you would only need 1 or 2 mask gradient textures<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1075338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm an alpha mask would save having to create those transition tiles. Using base bmx and not wanting to much about with too much directly I. OpenGL etc. (might want to stick with directxfor windows, etc.) I would probably still make the tiles. You just need the 3 alpha masks and then create those 3 transitions for each base type (from the screen shots and the description it sounds like 3 base types, sand, grass, and metal, but with many possible specific tiles in those base types) so. With photoshop or gimp it should be pretty easy to spit out those 9 transition overlays and the code to implement em should be fairly simple. Not the best, or most far reaching approach (better would be dynamically creating those transitions based and preferably do some texture trickery to save drawing time etc as well.) but it should get the job done for the least investment.<br><br>The only problem that could be significant might be if you have a convergence of 3+ textures. Depending on how you layout the fades (they could be larger than the tiles for example...) you could do it with just side fades that overlay their corners, but you have to tweak the fades a lot otherwise you get some parts too thick and some too thin etc. This tends to work well with very small fades since those wonky bits are harder to see, but if you want nice pretty fades it gets noticeable. <br><br></td></tr></table><br>
<a name="1075339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh dear, this looks complicated! I will look at it closer when I've had some sleep. Is there no DX/Opengl independant way of doing it? <br><br></td></tr></table><br>
<a name="1075341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> my suggestion is just bmax:<br>draw tile<br>determine what if any fade is needed based on neighbors<br>draw fade over tile<br><br>And thinking about it more you could auto generate the fades using an alpha mask image (or just in code if you want a simple cross fade) using pixmap manipulation...<br><br>Copy a tile of the fade type<br>alter it's alpha levels to either match your alpha mask image or however else you want (easy to generate an alpha fade in code)<br>loadimage from the pixmap, now you have a programmatically created fade tile you can overlay on other base tile types. Just need to make a set of fade alpha masks, or again, just have code create a smooth fade if you don't need precise control. This method could easily create the corner fades etc. as well.<br><br>This is going to take more memory than a raw opengl/directx implementation since you have to store those tiles. it also will take a little more processor time (since you have to draw the base tile, then the fade tile over it) but overall it should be trivial on your resources and far simpler to implement. <br><br></td></tr></table><br>
<a name="1075353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remember that I have 64 tiles per tile texture loaded (1MB), and there will be multiple tile textures, and each of those 64 tiles could be at the edge and could require a full set of fade tile each in the worst case. Would this use too much video memory? <br><br></td></tr></table><br>
<a name="1075372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Would this use too much video memory?  <br></div><br><br>How many "fade-into" materials are there?  ie Sand, grass, water? Each one requires just 8 pre-calculated tiles using ima747's method. <br><br></td></tr></table><br>
<a name="1075383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming that each "grass" tile can be out next to any other grass tile (not sure if this assumption is correct) then all the edges are the same (at least left/right and up/down). That means you only need one fade for each side, doesn't matter which tile it's fading from, and the fade is to transparent so whatever it fades too is irrelevant. You can also cut down on extra faders by flipping them (e.g. If left/right are the same then a right fade can be scaled horizontally by -1 to flip it horizontally). If all sides match you only need one.<br><br>If you have 64 different tiles, all with unique edges (first how are you meshing them if all the edges are different) you could still create dynamic edge fades, would double the memory (1 fade per tile). Depends on how much your memory usage is, and how much you feel you can afford if that's acceptable. If you're estimating 1mb per tile type,and you have say 5 types doubled that's still only 10mb, which is pretty trivial for base resources (obviously there are other graphics and sound, etc. but still starting from 10mb instead of 5 isn't too bad) <br><br></td></tr></table><br>
<a name="1075484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had a look at the module but I'm completely new to opengl stuff, will it be difficult to integrate? <br><br></td></tr></table><br>
<a name="1084371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate to zombify an old thread but did you find a resolution to this?<br>I'm in a similar situation and interested if anyone has dealt with it. <br><br></td></tr></table><br>
<a name="1084455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> No :(<br><br>I put it off to work on something else. The maps look blocky! <br><br></td></tr></table><br>
<a name="1084463"></a>

<a name="1084466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I came up with a working solution. basically you alphablend the borders of your tiles to 0 at the edges. Then you overdraw them. <br><br><a href="http://www.gutterbox.com/download/overdraw.jpg" target="_blank"> Here is a pic </a><br><br><a href="http://www.gutterbox.com/download/overdraw.exe" target="_blank"> Here</a> is the example program. <br>The arrow keys can scroll the map<br><br><br><br><br>.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1084635"></a>

<a name="1084636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool that's very much what I'm after, thank you!<br><br>Can it be modified so that the edges are less obviously square? Does it use opengl only?<br><br>Thank you very much!<br><br>Could you provide any source code?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1084637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> The edges should be square because rounded edges will look funny when the same type of tile lies next to each other on a border.<br>Imagine a north side border: 'EE' makes a better edge than 'OO'.<br><br>One way It could be improved is for the alphablend of the border to be jagged or wavy instead of smooth.<br><br>I'll clean up the source and post it. <br><br></td></tr></table><br>
<a name="1084642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> My idea is that on the border both tile types could be present but with a wavy alpha mask of some kind so they blend into each other in an irregular pattern. I look forward to the source code! <br><br></td></tr></table><br>
<a name="1084643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the <a href="http://www.gutterbox.com/download/Blendtile2.zip" target="_blank">source and updated executable</a> that creates a 76800 pixel map from a base mapfile. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
