<!DOCTYPE html><html lang="en" ><head ><title >Preferred Ellipse Radius (For Hit Detection)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Preferred Ellipse Radius (For Hit Detection)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Preferred Ellipse Radius (For Hit Detection)</a><br><br>
<a name="1069232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Johnsprogram</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a math-related crisis that one man (me) can not do alone. I'm trying to figure out a way to calculate the radius of the ellipse on the same angle as the light blue line; in other words, the length of the "mystery line."<br><br><img src="http://www.acoders.com/members/johnsprogram/ellipse%20problem.PNG"><br><br>Here's the situation, I was using trigonometry for locating the X and Y position on the circumference of the ellipse using sine and cosine. However, when I entered the same angle (in degrees), the line point towards point P instead of pointing towards point x. Why am I focusing on point x instead of point P? It's because that the angle is set to a certain point outside the ellipse.<br><br>I'm using the calculated radius to detect any targets that enters inside the area of the ellipse. In other words, this is for a hit detection. Unless if there's an efficient way to detecting hits on polygons and ignoring the transparent areas for BlitzMAX, feel free to share it with me. <br><br></td></tr></table><br>
<a name="1069236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> if dx,dy is distance of point from center of ellipse and r is ratio of ellipseheight/ellipsewidth then (dx*r)*(dx*r)+(dy*dy) will be less than ellipseheight*ellipseheight when point is inside ellipse <br><br></td></tr></table><br>
<a name="1069258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Johnsprogram</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> are both the ellipse height &amp; width the radius or the diameters that you mentioned, skidracer? <br><br></td></tr></table><br>
<a name="1069259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> radius <br><br></td></tr></table><br>
<a name="1069265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Johnsprogram</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> any chance that that formula would work for larger widths and smaller heights? Btw, the formula worked for circles and heightened ellipse. How were you able to find that formula? <br><br></td></tr></table><br>
<a name="1069267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should work - I made it up based on the fact that your ellipse is just a circle in a squeezed universe. <br><br></td></tr></table><br>
<a name="1069372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you use the parametric representation ( in this case with r1 = 40, r2 = 80 )<br><br>x = r1 * Cos( t )<br>y = r2 * Sin( t )<br><br>the value t is just a parameter. It is not the central angle, unless the ellipse is really a circle.<br><br>Conceptually, it is simpler to scale everything so the ellipse becomes a circle. From the example in the picture we take the center of the ellipse as the origin. Then multiply all x values by 2 so both radii are 80. Points are moved to new points, lines change to different lines and the ellipse becomes the much simpler circle. Whether or not a point is in the ellipse is unchanged by this transformation. Just imagine the entire picture made twice as wide, with the center of the ellipse not moving. <br><br></td></tr></table><br>
<a name="1069508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Johnsprogram</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's easy to figure out the radii when you are looking at 90 degree intervals. However, looking in between the two 90 degree intervals is not as clear. I don't know how the scaling works, but rest assure that I probably won't find it out by using Sine and Cosine.<br><br>The green line (the line from center to point P) is a result from using Sine and Cosine with THETA = 60. Thus, pin-pointing to point P on the ellipse's edge will end up being on the same horizontal line -- in this case -- as point A on the auxiliary circle's edge. Obviously, that is not what I want. For navigating purposes, I'm trying to find out the radius of the ellipse on the blue "mystery" line (from center to point X), just to be clear.<br><br>I believe, somewhere, that there is equation to determine how to scale the ellipse's radius between 80 and 40 accurately. Sine &amp; Cosine would not help in this case since it'll end up like the green line; which, in this example, will be too long. Maybe the change of the radius' scale is hyperbolic?<br><br>Now, in terms for detecting a point appearing inside the ellipse, the formula that skidracer gave me works. But, I'm still (very) curious for how to figure out that "mystery line" (center to point x). <br><br></td></tr></table><br>
<a name="1069509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The <a href="http://en.wikipedia.org/wiki/Locus_(mathematics)" target="_blank">locus</a> of the edge of the ellipse is,in this case,<br><br>(x/40)^2 + (y/80)^2 = 1<br><br>You want to know the length of the line heading at 60 degrees from the vertical to the edge of the ellipse. Call the length L, so the co-ordinates of the end are given by<br><br>x = L*sin(60)<br>y = L*cos(60)<br><br>Substitute those into the first equation<br><br>(L*sin(60)/40)^2 + (L*cos(60)/80)^2 = 1<br><br>Take a factor of L^2 out:<br><br>L^2*((sin(60)/40)^2 + (cos(60)/80)^2) = 1<br><br>And rearrange:<br><br>L = sqr( 1/( (sin(60)/40)^2 + (cos(60)/80)^2 ) )<br><br><br>Some code:<br><pre class=code>

Graphics 600,600,0

an = 60
While Not (KeyHit(KEY_ESCAPE) Or AppTerminate())

	ew# = MouseX()-300
	eh# = MouseY()-300
	
	SetColor 100,100,100
	DrawOval 300-ew,300-eh,ew*2,eh*2
	
	an:+1
	
	l# = Sqr( 1/( (Sin(an)/ew)^2 + (Cos(an)/eh)^2) )
	
	lx# = 300+l*Sin(an)
	ly# = 300-l*Cos(an)
	
	SetColor 0,0,255
	DrawLine 300,300,lx,ly
	
	Flip
	Cls
Wend
</pre> <br><br></td></tr></table><br>
<a name="1069530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Johnsprogram</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a million, warpy! That was exactly that I was looking for! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
