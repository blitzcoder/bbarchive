<!DOCTYPE html><html lang="en" ><head ><title >Wrapping RackNet in BlitzMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Wrapping RackNet in BlitzMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Wrapping RackNet in BlitzMax</a><br><br>
<a name="660809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kurix implemented a very nice wrapper of the RackNet library (http://www.rakkarsoft.com) for Blitz3D. It appeared to me that the wrapper he did could be also used for BlitzMax.<br><br>We discussed that in this thread: <a href="http://www.blitzmax.com/Community/posts.php?topic=50546" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=50546</a> , but since it's in the Blitz3D section, it's maybe a good idea to move the discussion here. You could see the 10-15 last posts of this thread to have an idea of the discussion. But here is my summary.<br><br>- RackNet is a library written in C++ and is cross-platform, and the source is available<br>- The idea would be to include directly the C/C++ source into BlitzMax, so that we keep the fact that it's cross-platform<br>(- Another solution would be to use a dll, but then it would be only for windows :-(  )<br>- It's not possible to include C++ source directly into BlitzMax, because BlitzMax needs virtual methods, and the methods in RackNet are not virtual.<br>- So the idea would be to write a wrapper in C, which wrap each C++ method and transform it into a C function<br>- This is were it's interesting since <b>Kurix already did such a wrapper for Blitz3D</b> (C++ -&gt; C conversion)<br>- It occurs to me (but I am not certain) that we could use the wrapper of Kurix, with no modification<br>- Then we will import this C code into BlitzMax, and create an "Extern .. End Extern" block with the function pointers into a racknet.bmx<br>- And that would be it!!<br><br>So, it seems to me that this work could be pretty simple, like a couple of hours...... But I am sure a lot of issues will arise, and that won't be so simple... I am really not an expert on C and interface with BlitzMax, so maybe some of my points are wrong??<br><br>In fact we could even go further: wrap in BlitzMax the C function to use BlitzMax type to have object orientation!! But that's another level of complexity, and I am not sure it would be useful!<br><br>Also you could check out the help file from BlitzMax: "Language -&gt; Advanced topics" to have some idea on the wrapping.<br><br>But there is maybe an issue with multithreading. RackNet use threads. There is an interesting quote from the RackNet site:<br><div class="quote"> <br>Use the source or a DLL?<br><br>RakNet includes the source and a pre-made DLL, along with sample projects to make a DLL, use a DLL, and use the source. You may use either in your game. During development, you will probably want to use the source so you can trace into the code for better control. During release, you will probably want to use a DLL so you don't have to make your game multithreaded, and for easier patching.<br> <br></div><br>But then I am worried by the fact that including the source means that the game will be multithreaded!! Is it compatible with BlitzMax?? If BlitzMax is not tread-safe, is it not a show-stopper?? <br><br>So now I need some input from you:<br>- do you think it's feasible as I described?<br>- do you think the multithread could be something really bad?<br>- is any C/C++ expert candidate to work on this? <br><br></td></tr></table><br>
<a name="660818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multithreading will only cause problems if the BM side and C++ side access the same data. As BM is not able to use the C++ objects, this shouldn't be a problem, as you will need to create a "procedural" layer in between to let them communicate.<br><br>This layer then could handle the syncronisation as well.<br>So this should be doable ...<br><br><br>PS: I know that you theoretically can use C++ objects, but this would mean a rewrite of all classes as BM only accepts virtual functions in types. As well you would need to create the constructor / destructor functions in non OO.<br>So in the end, you could as well create a whole procedural wrapper especially because of the threading. <br><br></td></tr></table><br>
<a name="660820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> tho be warned when I used portAudio (which is threaded) it can play merry hell with the max debugger!! <br><br></td></tr></table><br>
<a name="660830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where's this raknet wrapper for b3d you speak of?<br>I've been wanting to port raknet to max so I'll gladly take a look.<br><br>Might even release it for free.(grin) <br><br></td></tr></table><br>
<a name="660841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The racknet wrapper was done by Kurix. All details in this thread: www.blitzmax.com/Community/posts.php?topic=50546<br>As I said (but I am not sure), I think we can use the source of his wrapper with no modification, and no reprogramming. If I understand correctly, the only thing to do is to add an extern..End extern block with the function pointers (that you can copy from the Blitz3D decls).<br>If multithreading is not a problem, then this would be very cool!<br><br>Note: the source code of the wrapper of Kurix costs 20 Euros. <br><br></td></tr></table><br>
<a name="660843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah shame the source costs money, would have been much better to base a new wrapper for max and statically link to it for cross platform. Saying that is raknet even cross platform? <br><br></td></tr></table><br>
<a name="660846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, RackNet is cross platform for Win, Linux, Mac and even more!<br>The source costs money, but that would save lots of hours of work for the guy who will wrap RackNet for BlitzMax... <br><br></td></tr></table><br>
<a name="660926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you heard about TNet? It is a network library for both UDP and TCP for Blitzmax. I'm not sure if it can send 60,000 messages per second but I say that it is very easy to use, along with a very nice packing system. And it is free.<br><br>Read more <a href="http://www.truplo.com/TNet" target="_blank">here</a><br><br>Soon TNet-Advanced will come and then it will have reliabe UDP and more. <br><br></td></tr></table><br>
<a name="660940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenTNL is supposed to be a lot better than Raknet, but is quite costly. <br><br></td></tr></table><br>
<a name="661152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, OpenTNL is 295$ for indie and per programmer. Racknet is 100$ IF you release and sell your game.<br>But why do you say that openTnl is much better than RackNet. Do you know any limitation to Racknet.<br><br>Wave, I also recommend (and am a user) of TNet. Waiting desperately for TNet Advanced ;-) But having TNet and RackNet couldn't hurt... <br><br></td></tr></table><br>
<a name="661158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> perhaps because OpenTNL bases torque network library ... the only network library known so far supporting 256 Player shooter battles on regular connections with acceptable latency. (not even BF2 is capable of that) <br><br></td></tr></table><br>
<a name="661163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But having TNet and RackNet couldn't hurt... <br></div><br>Of course not ;)<br>And my replay was not to you in person, more in general to advertice some for TNet. <br><br><div class="quote"> the only network library known so far supporting 256 Player shooter battles on regular connections with acceptable latency <br></div><br>Where have you heard/know that from?<br>Do you perhaps refer to Tribes?<br>To me it appears that the most difficult thing with a lag-free 256 player shooter is to actually get 256 players to connect, all which have low latency to the server. And if a lot of security checks are made then the server can not be to bad either. <br>I might be missing the point but I fail to see how any network library could help with that? <br><br></td></tr></table><br>
<a name="716744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone a completed Wrapper for Racknet ?<br><br>Ive been using KNET - but random errors crashing the DLL are forcing me to look at alternatives.  (KNET no longer supported) <br><br></td></tr></table><br>
<a name="716748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am working on this right now, for 2 weeks. The RakNet wrapper is working in BlitzMax, but I have a few problems that you can see here and here:<br><a href="http://www.blitzmax.com/Community/posts.php?topic=64200#716746" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=64200#716746</a><br><a href="http://www.blitzmax.com/Community/posts.php?topic=64023#714864" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=64023#714864</a><br><br>Despite these problems, I will finish wrapping RakNet, especially because I need it for my game ;-)<br>I wanted to do it for multi-platforms, but due to the first problem, I will be probably obliged to do with a dll instead of source code, so if I have no more ideas/progress on this problem, the wrapper will be a DLL, and windows only :-(<br><br>Expect something in ~2 weeks... <br><br></td></tr></table><br>
<a name="716808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good stuff.   if you need a tester give me a shout. <br><br></td></tr></table><br>
<a name="716845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey RepeatUntil... you say you need to use a DLL for the wrapper, but can you use a lib in .a format? Perhaps we can make a lib instead of the dll, and this will work on every platform?.<br><br>If you use the DLL,do you have the same problems in debug mode???<br><br>EDITED: Mmm, i think i am in a mistake, in a lib we cannot wrap the functions... or can we? <br><br></td></tr></table><br>
<a name="716848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats not the problem.<br>Main reason he pointed out is the need for asynchron running code which might need a DLL (or not) <br><br></td></tr></table><br>
<a name="716875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to use a .a lib and include it directly but that fails miserably ;-)<br>In principle, if I understood correctly, the fact of using a DLL solve the problem of multithreading since complete different part of the memory are used for the 2 processes (DLL and main program). So that's why I am talking about using a DLL. However, I didn't do the test since I have to modify the .bmx file first (and this needs some work).<br><br>By the way, I want to thank <b>Kurix</b> because the wrapper is based on his work he did for Blitz3D!! So thanks Kurix. However, I will use the latest RakNet version with compatible commands with RakNet 3.0, so the commands will be slightly different from the Blitz3D wrapper... <br><br></td></tr></table><br>
<a name="716890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if i can help, please let me know ;) <br><br></td></tr></table><br>
<a name="717391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could a few of you test a simple example of the wrapper:<br><a href="http://repeatuntil.free.fr/RakNetWrapper.rar" target="_blank">http://repeatuntil.free.fr/RakNetWrapper.rar</a><br>Just run test.bmx in normal or debug mode.<br><br>I have <b>very</b> strange behaviour. This program is very instable and crash with no error message after 10-15 seconds (release or debug mode) if I press the space bar to send a message. I am not sure if this is my BlitzMax setup, or if this is general.<br>So could you try and report:<br>- if it crashes without message<br>- or if it runs normally<br><br>I really don't understand because I am using the dll of Kurix which is working perfectly in Blitz3D. So thanks for testing! <br><br></td></tr></table><br>
<a name="717396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Server crashes after 15 seconds without pressing the SPACE bar<br><br>Client crashes after entering the ip address <br><br></td></tr></table><br>
<a name="717398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Ovine!<br>One more person to confirm this, please, and I will send a bug report.<br>Please confirm also that this is silently crashing! <br><br></td></tr></table><br>
<a name="717402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Investigated a bit more.<br><br>Memory is being eaten up after <br><br>packet = RN_ServerReceive(Server)<br><br>and CPU usage is too.  Program crashes silently<br><br>StuC <br><br></td></tr></table><br>
<a name="717403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Silent crash here, but if I comment out (as server, and rem'd out client stuff)<br><pre class=code>packet = RN_ServerReceive(Server)</pre><br>then no crash happens.<br><br>BTW ID_CHAT isn't defined, so its sending the message starting with a null character.<br><br>*EDIT* beat me to it :) <br><br></td></tr></table><br>
<a name="717408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea but you formatted yours properly :)<br><br>StuC <br><br></td></tr></table><br>
<a name="717417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, thanks for testing!<br>I have added ID_CHAT (which was forgotten). <br>I have added a text to display the memory used, and the memory increase all the time, and the program crashes silently after 64000.<br>I have also extremly simplified the code to see only important things, and you are right, packet = RN_ServerReceive(Server) seems to be a culprit here!<br><br>But the SAME DLL is working perfectly in Blitz3D and was used in Blitz3D games (Granada racer). So there is something strange going on. I will have a closer look at the wrapper, and if I found nothing obvious, I post this bug...<br><br>Simplified code is here: <a href="http://repeatuntil.free.fr/RakNetWrapper.rar" target="_blank">http://repeatuntil.free.fr/RakNetWrapper.rar</a> <br><br></td></tr></table><br>
<a name="717420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you set  GCSetMode(2) and do a manual GCCollect(), crashes instantly- but with a unhandled memory exception. <br><br></td></tr></table><br>
<a name="717421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, either something is wrong with the wrapper (but works on Blitz3D), or something is wrong with BlitzMax. I will explore a wrapper failure first... <br><br></td></tr></table><br>
<a name="717422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strangely - if you take out all the Racknet calls but leave  RN_ServerReceive(Server) in - memory is still eaten up.<br><br>Strange you would think that RackNet would just return Null if the "server" var is not set. (and indeed the server not started)<br><br>Replace the RN_ServerReceive with ANY racknet call and the memory is easten.   Just try with "RN_GetTime()" <br><br></td></tr></table><br>
<a name="717484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would somehow bet that it has to do with the $z stuff. Sure that it needs ASCII Strings, not UTF?<br><br>(I wrapped the Client - Server example but it behaves exactly the same) <br><br></td></tr></table><br>
<a name="717580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> AH-HA, to stop the crashing and memory leak, add "win32" at the end of the functions, like this...<br><pre class=code>Global RN_ServerReceive%(rakServerInterface%)"win32" = GetProcAddress(lib, "_RN_ServerReceive@4")</pre>:D<br><br>Its not the first time this "win32" thing has done this to me, I cant believe I didnt think of it earlier. <br><br></td></tr></table><br>
<a name="717684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are my hero, REDi!!! Great, Thanks!!!! This is now working!! The wrapper will go forward now...<br><br>(I am impressed how awesome is this community!) <br><br></td></tr></table><br>
<a name="717780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> my pleasure RepeatUntil, looking forward to using it myself ;) <br><br></td></tr></table><br>
<a name="717781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora wrote:<br><div class="quote"> <br>I would somehow bet that it has to do with the $z stuff. Sure that it needs ASCII Strings, not UTF?<br> <br></div><br>I know how to get rid of the $z (using Byte Ptr and FromCString and such). But what is the difference between using $z and Byte Ptr? In which case I use which?? Thanks for the clarification, the documentation is pretty useless on that... <br><br></td></tr></table><br>
<a name="717797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think your right to use $z, IIRC its for external use, the ToCString is for internal bmax usage. <br><br></td></tr></table><br>
<a name="800334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any news on this? Also, is there something downloadable? <br><br></td></tr></table><br>
<a name="800633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to see Racknet working with Bmax too. Seems to be a really nice reasonably priced network library thats easy to use. <br><br></td></tr></table><br>
<a name="800635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know what games have used RakNet? <br><br></td></tr></table><br>
<a name="800706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> www.jsw.ovine.net<br><br><br>Id love to see a wrapper for the latest version of RakNet tho.  JSW online uses 2.x. <br><br></td></tr></table><br>
<a name="800762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ovine: could you provide a link to the wrapper? the link above doesn't work anymore. <br><br></td></tr></table><br>
<a name="800783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> The link works great for me. <br><br></td></tr></table><br>
<a name="800852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> The link to the games from ovine works great, yes. But not to the wrapper above:<br><br><a href="http://repeatuntil.free.fr/RakNetWrapper.rar" target="_blank">http://repeatuntil.free.fr/RakNetWrapper.rar</a><br><br>Or am I missing something? <br><br></td></tr></table><br>
<a name="802168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rene Albrecht</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Link is broken. <br><br></td></tr></table><br>
<a name="802432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm interested in this wrapper too.  Any news on it? <br><br></td></tr></table><br>
<a name="802611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can post the version I use,  its the wrapper by KURI for Blitz3d, but converted to use MAX.<br><br>Heres the link to the Blitz3D version :- <a href="http://www.lcuriel.arrakis.es/raknet/" target="_blank">http://www.lcuriel.arrakis.es/raknet/</a><br><br>I'll post once I get chance (no source here) <br><br></td></tr></table><br>
<a name="804440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> bump? <br><br></td></tr></table><br>
<a name="806340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys,<br><br>happy to see some interest in a RakNet wrapper! During this summer, I worked on the RakNet wrapper for a while and was able to wrap RakNet 3.0 within BlitzMax! However, this is not yet finished, it needs some more days of work. Since you give me some pressure, I can try to go a bit more quickly! I will report here as soon as possible.<br><br>This wrapper will be completely free of course (in fact I use a large part of the Kurix wrapper) and will be open source so that anyone could improve it (to add RakNet functions for example).l<br><br>Another thing: it uses a RakNet dll, so that it's only for windows :-( It is unfortunately not possible to wrap it directly with the source due to multithreading...<br><br>More news later (in one week?). <br><br></td></tr></table><br>
<a name="806388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >UnderwoodNullium</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> NOWAY!! I am going to die right here!! Omg!!<br><br>This is the s***! I love RakNet I am definitely downloading this! <br><br></td></tr></table><br>
<a name="806423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool, thanks! <br><br></td></tr></table><br>
<a name="807669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SofaKng</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm definitey looking forward to this!<br><br>Do you have any links to your old version so I can fool around with RakNet now? <br><br></td></tr></table><br>
<a name="808894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, no old link. But don't be too excited yet. I am programming less and less these days, and so the wrapper won't be 100% complete and tested. I am still doing a few tests right now, and will release this version as open source, so that anyone can improve it if needed.<br>I will try to have something in one or two weeks... <br><br></td></tr></table><br>
<a name="815756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please have a look <a href="/posts.php?topic=72982" target="_blank">here</a>. <br><br></td></tr></table><br>
<a name="815761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very good job!, and clear code! repeat :) <br><br></td></tr></table><br>
<a name="816582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dirk Krause</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> what Filax says! great and thank you! <br><br></td></tr></table><br>
<a name="819903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >watusimoto</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a quick question about the DLL wrapping.  I understand that will work in Windows only, but the wrapper itself is pretty simple.<br><br>Are there Linux/Mac equivalents of DLLs that could be used in a similar way with a similarly simple wrapper?  If so, perhaps we could distribute DLLs/equivalents for each platform, and use a compiler directive to compile in the appropriate wrapper.<br><br>Could this work? <br><br></td></tr></table><br>
<a name="819978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good question, although I think I know the (negative) answer.<br>I don't know if there are equivalents to dll on other platform, I don't think it works the same way... <br><br></td></tr></table><br>
<a name="820066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >watusimoto</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> RepeatUntil -- <br><br>you wrote earlier that he tried to use a linux .a file to include RakNet functionality on Linux,  but that it failed because of the common memory space.  Did you try a .so file?  <br><br>My very basic understanding of things is that the .so files are dynamically linked at runtime (like DLLs), rather than static linked at compile time (as .a files are).  It may well be that the dynamic linking will use a separate memory space as the DLLs do on windows.  <br><br>Read this for more info:<br><a href="http://www.ibm.com/developerworks/linux/library/l-dll.html" target="_blank">http://www.ibm.com/developerworks/linux/library/l-dll.html</a> <br><br></td></tr></table><br>
<a name="820426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I didn't try a .so file. I think I tried a .a file because I found somewhere that it could work in some occasions (although it was a long time ago, and my memory could fail!).<br><br>I read quickly your link, but I let other people try to do that in Linux!! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
