<!DOCTYPE html><html lang="en" ><head ><title >Where to store screensaver files on Windows?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Where to store screensaver files on Windows?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Where to store screensaver files on Windows?</a><br><br>
<a name="709918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a screensaver to run on Windows, initially. I am not familiar with programming on Windows as I'm regularly a Mac user. I'm having my cousin compile the window's version on his PC. I have a few questions.<br><br>1) What color depths must the screensaver be able to run in, 32-bit and 16-bit?<br><br>2) Does it matter if the screensaver only runs in 32-bit? If the desktop is in 16-bit and the blitzmax window is in 32-bit (or requested as such), will the preview window still show the correct graphics (albeit with less color depth)?<br><br>3) What folder does the screensaver executable need to be put in, in order for the Windows Display control panel to find it and make it selectable?<br><br>4) I need to store a config file, what folder does that need to live in, and does it have to be a sub-folder (or can it be?)<br><br>5) I need to be able to select graphics sets to load, from the config, and not load all of them - where can I store those graphics files for loading in?<br><br>6) When a screensaver is running, are there certain keyboard inputs that are not transmitted to BlitzMax e.g. Alt-Tab, Ctrl-Alt-Del, etc, which I would need to know had happened in order to stop the screensaver, how would I detect that?<br><br>Any answers or advice would be greatly appreciated. Thanks. <br><br></td></tr></table><br>
<a name="709919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 3) Nowhere, because it needs to be an .scr (renamed exe). If you search your system you will find out where the .scr are stored ^^<br><br>4) In the userfolder as any other is no accepted solution for WinXP / Vista<br><br>5) Same folder as the config, userfolder<br><br><br>But there is point 7 missing: How do you plan to make sure that not more than 1 instance is running? Because that will need some addition of non-BM commands to find that out! <br><br></td></tr></table><br>
<a name="709937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora,<br><br>3) Isn't it one folder, such as C:\Windows\System32\ for all pc's?<br><br>4) What is the user folder? The C:\Documents and Settings\All Users\ ???<br><br>7) Why and how would there ever be more than one instance of a screensaver running? <br><br></td></tr></table><br>
<a name="709973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been a while since I messed with this stuff, but AFAIR...<br><br>3) For W2K and up, it's getenv_("WINDIR") + "\system32\". For Win9x, I think it's just getenv_("WINDIR") and I'm not sure about NT. I've also got a vague recollection of being able to tell windows where the saver is through the registry, I could be mistaken about that though.<br><br>4) Use getenv_("USERPROFILE") or getenv_("ALLUSERSPROFILE").<br><br>7) W2K and up takes care of this for you. You have to manually check that an instance of the saver isn't already running with Win9x.<br><br><br>Take a look at <b><u><a href="/codearcs/codearcs.php?code=1677" >Windows Screen Saver Framework</a></u></b>. <br><br></td></tr></table><br>
<a name="710012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) This is dependent on the graphics card its running on 16bit is a safe bet.<br><br>2) If the card can support it then it should be ok<br><br>3) Windows directory or Windows\System<br><br>4) It can but it can also be stored with the screensaver<br><br>5) Where ever you want to as long as the program knows where they are, I would have the directory stored in the config file <br><br></td></tr></table><br>
<a name="710049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good, thanks. So I really don't have to do the whole getenv_("WINDIR") malarky, I can just put it all in Windows\System32\? <br><br></td></tr></table><br>
<a name="710086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 1) What color depths must the screensaver be able to run in, 32-bit and 16-bit? <br></div><br><br>Whatever depth the desktop runs in, I'd say...<br><br><div class="quote"> really don't have to do the whole getenv_("WINDIR") malarky, I can just put it all in Windows\System32\ <br></div><br><br>Yes and no -- you can put it there, but you really shouldn't use that as a hardcoded path. figure out through the environment variables what the local equivalent of 'c:\windows\system32\' happens to be.<br><br>1) While the majority of comptuers use indeed c:\windows\system32, there is a significant percentage (mainly windows 2000 machines), that use c:\winnt\system32 instead<br>2) Technically, you don't need to install windows on the C:\ drive. I've come across some systems that had windows on the D:\windows , and even one that used M:\windows. Especially in a multi-boot configuration, you really can't count on it being on the C:\ drive. <br><br></td></tr></table><br>
<a name="710140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So I really don't have to do the whole getenv_("WINDIR") malarky, I can just put it all in Windows\System32\? <br></div>I just posted that for my own amusement...Really...I did... ;op <br><br></td></tr></table><br>
<a name="710155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use Inno Setup installer, you can use the {sys} macro to indicate the system menu.  It'll locate the correct path on whichever machine it's being installed on.  Other installers should have there own version of {sys} as well. <br><br></td></tr></table><br>
<a name="710187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol ok, good stuff, thanks guys and girls.<br><br>so getenv_() is just a regular function, so I should do path$=getenv_() ? <br><br></td></tr></table><br>
<a name="710276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> What are the issues with opening a screen for the screensaver that is not the same color depth and/or resolution as the desktop? It seems in the screensaver frameworks floating around that it's thought to be problematic. Why should it be any different from a regular blitzmax app opening a given screen mode? <br><br></td></tr></table><br>
<a name="710295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've seen many a screensaver that switches screen modes, shouldn't be an issue really. <br><br></td></tr></table><br>
<a name="710309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your referring to the saver code I pointed to earlier, there's no problem with switching screen modes (apart from first checking the required mode is available, obviously). I just couldn't be arsed to add the screen mode selection code to the config window. ;o)<br><br>What gave you the impression that it'd be problematic?<br><br>Anyway, to answer your previous question. Yes, you can just use getenv_() like that. <br><br></td></tr></table><br>
<a name="710413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found an OpenGL saver framework thing which was suggesting it's preferably not to change resolution. *shrug* I would think it'd be okay, also. <br><br></td></tr></table><br>
<a name="710543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem with changing resolutions/bit depths is the fact that you don't always know what the user is running when the screen saver kicks in.  I have programs that hate resolution changes once they are running.  Everything gets corrupted when the resolution is changed and remains corrupted when the resolution is restored.  Now I realize that this is the fault of those particular programs and not the screen saver, but most users would blame the screen saver.  They'll think, "I never have any problems with this program until your screen saver kicks in!"<br>  So for that reason, I think it is best to detect the current resolution and bit depth and use that for running your screen saver. <br><br></td></tr></table><br>
<a name="710613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, good to know. Thanks.<br><br>I think I will offer mode selection as an option, so then the ball is back in their court if they decide to switch the resolution and cause themselves problems. <br><br></td></tr></table><br>
<a name="712033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm glad to report that I got a screensaver running on Windows :-) Totally basic visual effect of just some quads being drawn randomly, but the basic `framework` worked (after 2 small compile-time errors were fixed).<br><br>The config window works and fullscreen works but at the moment the preview window only seems to work after having run in fullscreen. I think I have to rearrange the code a bit to get the rectangle position of the preview window's preview area and open the window there before anything else, because otherwise you see a gray area in the middle of the screen because I open a window without positioning it at the same time. Easily fixed. Hopefully not having to move the window might have something to do with helping it to work more consistently.<br><br>Also I don't yet have code in place to read files from the proper locations, but that's not too difficult seeming.<br><br>Thanks for your help one and all.<br><br>Question.<br><br>Would you pay for a piece of software if it were a game, with a full editor, that could also run as a screensaver effect, and work as either an app or a screensaver? If so how much? <br><br></td></tr></table><br>
<a name="827119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the resurrection of this thread.<br><br>Does someone know how to write an ini file to the windows registry? This should work on all windows systems, right? <br><br></td></tr></table><br>
<a name="827199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> INI files have nothing to do with the registry other than that they were somewhat replaced by it ages ago.  You would have to translate them to whatever you want to put into the registry and modify it with the Windows API. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
