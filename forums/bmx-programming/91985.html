<!DOCTYPE html><html lang="en" ><head ><title >Old School Fractal Mountains?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Old School Fractal Mountains?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Old School Fractal Mountains?</a><br><br>
<a name="1047020"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone here remember such retro game classics like <a href="http://www.mobygames.com/game/rescue-on-fractalus" target="_blank">Rescue on Fractalus</a>, <a href="http://www.mobygames.com/game/koronis-rift" target="_blank">Koronis Rift</a>, <a href="http://www.mobygames.com/game/eidolon" target="_blank">The Eidolon</a> or <a href="http://www.mobygames.com/game/captain-blood" target="_blank">Captain Blood</a>? They all have in common to feature (pseudo?-)3D fractal mountains (or caves in the case of The Eidolon).<br><br>I'm looking for a way to create similar graphics, but I can't seem to find suitable algorithms for that. All that I come up with are true 3D fractal landscaping engines, and that's not quite what I need.<br><br>Has anyone stumbled upon such algorithms or a general idea how to these would work? <br><br></td></tr></table><br>
<a name="1047034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This site describes how to do both 2d and 3d mountains. <a href="http://www.gameprogrammer.com/fractal.html" target="_blank">http://www.gameprogrammer.com/fractal.html</a><br><br>Here's another one. <a href="http://www.bugfree.dk/blog/2009/02/23/generating-2d-random-fractal-terrains-with-c/" target="_blank">http://www.bugfree.dk/blog/2009/02/23/generating-2d-random-fractal-terrains-with-c/</a> <br><br></td></tr></table><br>
<a name="1047065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, thanks, but unfortunately, these methods don't really hit the nail on the head. I don't know in how far you are familiar with the games I mentioned (especially the ones from Lucasfilm Games), but (even if might not be that apparent by looking at the screenshots) the fractals there go a bit further than the randomised jiggly lines the examples you found provide.<br><br>Might still be a suitable starting point, though, since the midpoint displacement method appears to play a role in the Lucasfilm engine, but there's obviously more behind it – otherwise there wouldn't have been movement through consistent (pseudo-)3-dimensional space. <br><br></td></tr></table><br>
<a name="1047070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bremer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There seems to be a lot of algorithms on the web for making colorful fractals. Could you not use on of those, and then instead of using the values for colors, then use them for heights to generate a hightmap? <br><br></td></tr></table><br>
<a name="1047091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure I could. But that's really not what I'm looking for. ;) <br><br></td></tr></table><br>
<a name="1047097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There seems to be a lot of algorithms on the web for making colorful fractals <br></div><br><div class="quote"> Sure I could. But that's really not what I'm looking for. ;)  <br></div><br><br><div class="quote"> I'm looking for a way to create similar graphics, but I can't seem to find suitable algorithms for that. <br></div><br><br>Sounds like it to me. <br><br></td></tr></table><br>
<a name="1047173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sounds like it to me. <br></div><br>Okay, I should rephrase my original request: I'm not looking for a way to create just <b>any</b> fractal mountains. I know how to do that. I'm looking for a way to create the <b>very specific kind of fractal mountains (or caves)</b> like in RoF, KR, TE or CB. These aren't just random landscapes, you know? <br><br></td></tr></table><br>
<a name="1047277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shortwind</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.electriceggplant.com/media/RG44_RescueOnFractalus.pdf" target="_blank">http://www.electriceggplant.com/media/RG44_RescueOnFractalus.pdf</a> <br><br></td></tr></table><br>
<a name="1047329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Shortwind: I don't know if you have actually read that article, but apart from what boils down to "we had an awesome fractal engine running on a 6502", there's not that much information about the game engine. <br><br></td></tr></table><br>
<a name="1047345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe if you make a ingame video and put it on YouTube (or I could host it for you), people would understand what you're looking for and be able to give more relevant advice.<br>Or at least look on YouTube for videos that are already there.  You don't seem too enthusiastic about this.<br><br><a href="http://www.youtube.com/watch?v=8ONfFBMtYuQ" target="_blank">Captain Blood</a> at around 0:06<br><br><br><a href="http://www.youtube.com/watch?v=3tXGLvdA8a0" target="_blank">Rescue on Fractalus</a><br><a href="http://www.youtube.com/watch?v=xprgPaKRoi0" target="_blank">Koronis Rift</a><br><a href="http://www.youtube.com/watch?v=E9cTvuwYi3w" target="_blank">The Eidolon</a> <br><br></td></tr></table><br>
<a name="1047347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andy_mc</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Captain Blood was awesome, I used to play it on the Amstrad CPC <br><br></td></tr></table><br>
<a name="1047351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Off Topic: every time I cruise through the forum and notice this thread's title I start humming the tune to "Big Rock Candy Mountain" and my productivity plummets... apologies for infecting anyone else with this comment. <br><br></td></tr></table><br>
<a name="1047361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ theHand: Thanks. You're right, in videos it's more obvious what differentiates the fractal sceneries I talk about from the usually purely random mountains most algorithms produce. <br><br>When you look at these videos, note how there is a persistent landscape given by a predetermined map with the rocky bits (mountains or cave walls) at very specific positions. I can't seem to find any maps for TE or KR online with the usual search engines (I have them in some old magazines, though), but you would see that the levels had a non-random structure.<br><br>Coming to think of it, Captain Blood is probably not the best example of what I'd like to achieve, since the landscape there is only very rudimentary (basically only that valley with craggy mountains left and right). <br><br></td></tr></table><br>
<a name="1047471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> One way I'd might try is creating the landscape using an editor and a few rudimentary lines.  Then use the fractal algorithms already posted to make those lines more jaggy.  Might be the way it was done in the games. <br><br></td></tr></table><br>
<a name="1047486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Captain Blood and Koronis Rift had unbelievable landscapes considering they ran on the Spectrum -- and in real time in KR's case.<br><br>Other than commenting that I once typed in a brilliant fractal landscape routine from Amstrad Action magazine, I'm afraid I really can't help.<br><br>However, there was a book called 'Computers and Chaos' by Conrad Bessant (as found <a href="/codearcs.php?code=340" target="_blank">here</a>, aimed at the Amiga, that I still have, which has a really convincing landscape modelling routine (which invokes deliberate land 'faults') that would fit in nicely with Koronis Rift's landscapes, but I never really got around to trying to port it to Blitz.<br><br>If you can find it, or a digital copy, you would probably find it very relevant.<br><br>Quick Amazon search later... well, jeez, the Amiga version is "from £29.90" (mine was perhaps £3, car boot sale), while the Atari (boo) version, which must contain pretty much the same code, is "from £2.99"!<br><br>http://www.amazon.co.uk/Books/s?ie=UTF8&amp;rh=n:266239,p_27:Conrad%20Bessant&amp;field-author=Conrad%20Bessant&amp;page=1 <br><br></td></tr></table><br>
<a name="1047573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Here's a crap way of doing it, knocked up quickly and not particularly good but should give you a way to start.<br><br>Goodbye.<br><br><pre class=code>

Graphics 1024,768
Local pm:TPixmap = LoadPixmap("heightmap.jpg")

Local maxx = 64

Local tri#[maxx*2]

tri[0] = 0
tri[1] = 768
tri[maxx-2] = 1024
tri[maxx-1] = 768
Local y

Graphics 512,480
While Not KeyHit(KEY_ESCAPE)
		Cls
		
		sy = 0
		
		For iy = -15 To 0
			If y+iy &gt; 0  Then
				For i = 0 To maxx-1
					
					If (15+i+xp)&gt;0 And (15+i+xp)&lt;255 Then
						x = i*2
						tri[x] = Float(i*8)
						tri[x+1] = (ReadPixel(pm,8+i+xp,y+iy) &amp; $ff)*2
					End If
				Next				

				tri[0] = 0
				tri[1] = 768
				tri[maxx-2] = 1024
				tri[maxx-1] = 768

				sy = sy + 16
				
				SetOrigin 0,sy-64				
				SetColor 255,255,255
				DrawPoly tri

				SetOrigin 0,sy-64	+1			
				SetColor 64,255-sy,64
				DrawPoly tri
				
			EndIf
	
		Next
		
		SetOrigin 0,0
		SetColor 255,0,0
		DrawText "xp="+ xp,0,0
		DrawText "y="+ y,0,16
	
		If KeyDown(KEY_DOWN) Then y=y+1
		If KeyDown(Key_UP) Then y=y-1
		If KeyDown(Key_Right) Then xp=xp+1
		If KeyDown(Key_Left) Then xp=xp-1
		
		If y&gt;255 Then y = 255
		If y&lt;0 Then y = 0
		If xp&gt;255 Then xp = 255
		If xp&lt;0 Then xp = 0		

	Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="1047704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! Now we are getting somewhere. Heightmaps definitely seem to be involved in some way. <br><br></td></tr></table><br>
<a name="1047716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Another 1/2 hour, a bit of an improvement.<br><br><pre class=code>

Graphics 1024,768,32
Local pm:TPixmap = LoadPixmap("heightmap.jpg")

isx = PixmapWidth(pm)
isy = PixmapHeight(pm)

xp = isx/2
y = isy/2
Local maxx = 64

Local tri#[maxx*2]

tri[0] = 0
tri[1] = 768
tri[maxx-2] = 1024
tri[maxx-1] = 768

viewdistance = 8 ' number of mountains to draw
linestep = 64 'distance between mountain draw

xsize = maxx ' how many vertices to draw
startx = (xsize / 2) * -1
endx = (xsize / 2) -1

stepwidth = 1024/xsize
stepheight = 32

colstep = 256/viewdistance

Graphics 512,480
		sy = 0
While Not KeyHit(KEY_ESCAPE)
		Cls
		
		y_count = 0
		screen_x = 0
				
		sy = 0
		While y_count &lt; viewdistance
		
			' get y position of line
			inner_y = y - (y_count * viewdistance)
			If inner_y &gt; (isy-1) Then inner_y = inner_y - isy
			If inner_y &lt; 0 Then inner_y = inner_y + isy
			
			screen_x = 0		
			For xl = 0 To maxx-1
				
				inner_x = xp + xl
				
				If inner_x &lt; 0 Then inner_x =inner_x + isx
				If inner_x &gt; (isx-1) Then inner_x = inner_x - isx
				
				tripos = xl * 2
				
				tri[tripos] = Float(screen_x)
				my = (ReadPixel(pm,inner_x, inner_y) &amp; $ff)*2

				tri[tripos+1] = my
				screen_x = screen_x + stepwidth			
			Next

			tri[0] = 0
			tri[1] = 768
			tri[2] = 0
			tri[maxx-4]=1024	
			tri[maxx-2] = 1024
			tri[maxx-1] = 768

			
			SetOrigin 0,sy
			SetColor 255,255,255
			DrawPoly tri
			
			SetOrigin 0,sy+4
			SetColor 0,y_count * colstep,0
			DrawPoly tri

			y_count = y_count + 1
			
			sy = sy + 32
		Wend
				
		Flip

		
		If KeyDown(KEY_DOWN) Then y=y-1
		If KeyDown(Key_UP) Then y=y+1
		If KeyDown(Key_Right) Then xp=xp+1
		If KeyDown(Key_Left) Then xp=xp-1
	
		If y&gt;isy-1 Then y = isy-1
		If y&lt;0 Then y = 0
		If xp&gt;isx-1 Then xp = isx
		If xp&lt;0 Then xp = 0		

Wend
</pre><br><br>Goodbye. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
