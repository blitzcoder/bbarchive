<!DOCTYPE html><html lang="en" ><head ><title >More faster?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More faster?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >More faster?</a><br><br>
<a name="1039875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orgos</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks.<br><br>I have a question for the blitzmax professionals.<br><br>I want to get an element from a list, I have two ways <br><br>1- create a TMap and insert objects with respective name as param<br>2- have a tlist containing object with id field<br><br>What is more faster get the object from tmap or making an eachin cicle with tlist and compare the string param passed with the id field of the object? <br><br></td></tr></table><br>
<a name="1039878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> TMap <br><br></td></tr></table><br>
<a name="1039880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you need indexed acces and insertion of data, TMaps are your best option. If you fill in everything once, and then you just need indexed acces, then Arrays are your best option, but if you need realtime insertion and there's no need for indexed access, then TList are your best option:<br><br>I think this will clarify a bit the existing options:<br><pre class=code>
 -------------------------------------------------------------
| Method  |   Insertion  |  Indexed Access | Iteration EachIn |
|=============================================================|
| Arrays  |   very slow  |    Instant      |     Instant      |
|-------------------------------------------------------------|
| TLists  |    Instant   |   very slow     |       Fast       |
|-------------------------------------------------------------|
| TMaps   |     Fast     |      Fast       |    a bit slow    |
 -------------------------------------------------------------
</pre><br>Usually, the diferences are visible when using big amounts of data. <br><br></td></tr></table><br>
<a name="1039883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there some tutorials about tmap ? <br><br></td></tr></table><br>
<a name="1039890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orgos</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the full explanation ziggy. <br><br></td></tr></table><br>
<a name="1039891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ziggy <br>What makes you so sure that Tmap is that much faster than Tlist. From test I have done I can say that they are just as fast or that Tmap is even slower. They use the same priciple for search. Besides  if you use a link for direct access then Tlist is really fast "almost" as fast as arrays. adding objects to Tmap will be slower than adding objects To Tlist specially for large quantities of items. The problem with Tmaps is that it don't allow for duplicate keys so it will compare the key at hand for the keys stored and then either replace or insert it while Tlist will just insert it unless you want it on a certain position of course but then again if you are using links to do that then Tlist will still be faster. removing items should be the same speed sense in both cases it needs to search through the list and compare before removing but with direct link access Tlist will still be faster. <br>When you get a chance compare both modules source code and you will see what I am talking about. <br><br></td></tr></table><br>
<a name="1039892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> "eachin" on a tlist is far from instant. <br><br></td></tr></table><br>
<a name="1039893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jesse: <div class="quote"> They use the same priciple for search <br></div><br>No, they don't. TMaps uses a sort of key/value pair search algorithm, *similar* to what you may find on a Hash table algorithm. There's nothing near similar to this on the TList implementation. TList can only be searched sequentially. Obviously, once you have performed a search and already have a TLink, this helps avoiding the need to search again something, but this does not mean that searching is faster.<br><div class="quote"> When you get a chance compare both modules source code and you will see what I am talking about. <br></div>I've already done it, and wrote some alternatives to both of them. Even have done a key/value pair collection, wich is something missing in BlitzMax (but very similar to TMaps).<br><div class="quote"> "eachin" on a tlist is far from instant. <br></div>It's comparable to what you get on an array, as it is not using indexing, but the _pred and _succ pointers, so it is very near to the speed you get with arrays, in this respect. Obviously not as fast as arrays, maybe not instant, but it's usually fafst enough. <br><br></td></tr></table><br>
<a name="1039897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does the array compare if you predefine the size then just insert data into it? <br><br></td></tr></table><br>
<a name="1039898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are going to tell me that using this:<br><pre class=code>
	Method ValueForKey:Object( key:Object )
		Local node:TNode=_FindNode( key )
		If node&lt;&gt;nil Return node._value
	End Method
</pre><br>and this:<br><pre class=code>
	Method _FindNode:TNode( key:Object )
		Local node:TNode=_root
		While node&lt;&gt;nil
			Local cmp=key.Compare( node._key )
			If cmp&gt;0
				node=node._right
			Else If cmp&lt;0
				node=node._left
			Else
				Return node
			EndIf
		Wend
		Return node
	End Method
</pre><br>is just as fast as using Tlist with Tlink. I doubt it very much.<br><br>@GW <br>do you know exactly what does eachin does? I do.<br><br>@smilertoo<br>there is nothing faster, none that i know anyway. <br><br></td></tr></table><br>
<a name="1039899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's very diferent Jesse. Here you have a demonstration:<br><pre class=code>SuperStrict

'Create data in a string array:
Const DataVolume:Int = 1000000
Local MyArray:String[] = New String[DataVolume]
Local List:TList = New TList
Local Map:Tmap = New Tmap

'------------------------------------------------------
Print "Creating the array..."
For Local i:Int = 0 Until DataVolume
	MyArray[i] = Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) ;
Next

'Create a TList with the contents of the string array:

'------------------------------------------------------
Print "Filling the List..."
For Local i:Int = 0 Until DataVolume
	List.AddLast(MyArray[i])
Next

'------------------------------------------------------
Print "Filling the TMap. .."
For Local i:Int = 0 Until DataVolume
	Map.Insert(MyArray[i], MyArray[i])
Next

'------------------------------------------------------
Print "Now searching 1000 items on the Tlist"
Local M:Int = MilliSecs()
For Local i:Int = 1 To 1000
	Local Result:String = List.FindLink(MyArray[Rand(0, DataVolume - 1)]).Value().ToString()
Next
Print "Searching the TList took: " + (MilliSecs() - M)

'------------------------------------------------------
Print "Now searching 1000 items on the Map"
M:Int = MilliSecs()
For Local i:Int = 1 To 1000
	Local Result:String = Map.ValueForKey(MyArray[Rand(0, DataVolume - 1)]).ToString()
Next
Print "Searching the Map took: " + (MilliSecs() - M)

'------------------------------------------------------
Print "Performing Eachin on the Array"
M:Int = MilliSecs()
For Local i:Int = 0 To 10
	For Local S:String = EachIn MyArray
		Local Result:String = S
	Next
Next
Print "Eachin in the array took " + (MilliSecs() - M)

'------------------------------------------------------
Print "Performing Eachin on the TList"
M:Int = MilliSecs()
For Local i:Int = 0 To 10
	For Local S:String = EachIn List
		Local Result:String = S
	Next
Next
Print "Eachin in the List took " + (MilliSecs() - M)

'------------------------------------------------------
Print "Performing Eachin on the Map"
M:Int = MilliSecs()
For Local i:Int = 0 To 10
	For Local S:String = EachIn Map
		Local Result:String = S
	Next
Next
Print "Eachin in the Map took " + (MilliSecs() - M)

</pre><br>That's the output generated on my machine Debug OFF:<br><pre class=code>Creating the array...
Filling the List...
Filling the TMap. ..
Now searching 1000 items on the Tlist
Searching the TList took: 16310
Now searching 1000 items on the Map
Searching the Map took: 3
Performing Eachin on the Array
Eachin in the array took 12
Performing Eachin on the TList
Eachin in the List took 634
Performing Eachin on the Map
Eachin in the Map took 1795</pre><br>I supose you agree than 16,3 seconds is a lot more than 3 millisecs...<br><div class="quote"> is just as fast as using Tlist with Tlink. I doubt it very much. <br></div><br>No, TLink is the fastest way, but you need to search for the Tlink instance first, or iterate until you find it. Tlink lets you avoid the search sometimes but it does not make the search faster. That's my point. <br><br></td></tr></table><br>
<a name="1039901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is really no comparison ziggy.<br>tlist with tlink will automatically remove items from the list with out a search.<br><pre class=code>
SuperStrict

'Create data in a string array:
Const DataVolume:Int = 1000000
Type myTpe
	Field str:String
	Field link:TLink
End Type
Local MyArray:myTpe[] = New mytpe[DataVolume]

Print "Creating the array..."
For Local i:Int = 0 Until DataVolume
	myArray[i] = New myTpe
	MyArray[i].str = Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + ..
	Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164)) + Chr(Rand(32, 164))
Next

'Create a TList with the contents of the string array:

Print "Filling the List..."
Local List:TList = New TList
For Local i:Int = 0 Until DataVolume
	myArray[i].link = List.AddLast(MyArray[i])
Next

Print mytpe(myArray[3].link.value()).str 'this prints the string
myarray[3].link.remove() 'this remove the item from the list instantly with out a search.
</pre><br>you can also add them just as fast. can Tmaps do that? don't think so.<br><pre class=code>
nlink:tlink = list.insertAfterLink(myArray[3],myArray[4].link)
</pre><br>and access them just as fast<br><pre class=code>
print mytpe(nlink.value()).str
</pre> <br><br></td></tr></table><br>
<a name="1039918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jesse - if the user is looking for a specific item in the list, which is faster finding that item?  The tlist will have to iterate through the entire list sequentially while the tmap will do a boolean search.  Your example above does not work - you accessed the item since your code knew ahead of time exactly what element was needed. <br><br></td></tr></table><br>
<a name="1039921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> lets say your game has a for loop that iterates through all of the badies to collide with a bullet:<br><pre class=code>
for alien:Talien = eachin list
   if collision(alien,bullet)
      alien.link.remove() 'this is way faster than listRemove(list,alien)
      EXIT
   endif
next
</pre><br><br>in order for you to know which object needs to be romoved you must have the object at hand so if you are removing objects this would be the best solution.<br>when you add the object to the list you insert the link to the object then and there and there is no searching.<br>what do you think Tmap will do?<br>If anyone can prove me wrong, you will be my idol! <br><br></td></tr></table><br>
<a name="1039928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Orgos was asking about removing a specific item from the list, in which case using a tmap is faster since it can use a boolean search to find the item.  <br><br>If needing to iterate through in order to see if a bullet collided with ANY of the items is a different problem for which the tlist may indeed be faster (for that purpose I would use the tlist as well). <br><br></td></tr></table><br>
<a name="1039932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> all of the objects in the list have to go in at a certain point why not take care of it as such. there is really no reason to search the list. can you think of one example?<br>every game I have ever done, I have never had a reason to search the list for objects.<br>[edit]<br>note that Orgos wrote:<br><div class="quote"> <br>2- have a tlist containing object with id field<br> <br></div><br>why use an id to search when you can use a link:Tlink and have direct access? <br><br></td></tr></table><br>
<a name="1039946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ziggi<br>here is a better example of your code:<br><pre class=code>
SuperStrict
Global DataVolume:Int = 1000000
Global list:TList = New TList
Global map:Tmap = New Tmap
Global array:Talien[DataVolume]

Type Talien
	Field x:Int
	Field y:Int
	Field link:TLink
End Type

Print "Filling the Array"
Local M:Long = MilliSecs()
For Local i:Int =0 Until DataVolume
	array[i] = New Talien
	array[i].x = i+i
	array[i].y = i*2
Next
Print "it took "+(MilliSecs()-m)+" to fill it"
Print
Print"--------------------------------------"
Print "Filling the TList"
M = MilliSecs()
For Local i:Int = 0 Until DataVolume
	array[i].link = list.addlast(array[i])
Next
Print "it took "+(MilliSecs()-M)+" to fill it"
Print
Print "------------------------------------"
Print "Filling the TMap. .."
M = MilliSecs()
For Local i:Int = 0 Until DataVolume
	Map.Insert(Array[i], Array[i])
Next
Print "it took "+(MilliSecs()-m)+" to fill it"
Print
Print "--------------------------------------"
Print "Now searching 1000000 items on the Tlist"
M = MilliSecs()
For Local i:Int = 1 To DataVolume
	Local alien:Talien = Talien(array[Rand(0, DataVolume - 1)].link.value()) 'no need to search
Next
Print "Searching the TList took: " + (MilliSecs() - M)
Print
Print "-------------------------------------"
Print "Now searching 1000000 items on the Map"
M = MilliSecs()
For Local i:Int = 1 To DataVolume
	Local Result:Talien = Talien(Map.ValueForKey(Array[Rand(0, DataVolume - 1)]))
Next
Print "Searching the Map took: " + (MilliSecs() - M)
Print
Print "------------------------------------"
Print "Performing Eachin on the Array"
M = MilliSecs()
For Local i:Int = 0 To 1000
	For Local S:Talien = EachIn Array
		Local alien:Talien = S
	Next
Next
Print "Eachin in the array took " + (MilliSecs() - M)
Print 
Print "-------------------------------------"
Print "Performing Eachin on the TList"
M = MilliSecs()
For Local i:Int = 0 To 1000
	For Local S:Talien = EachIn List
		Local Result:Talien = S
	Next
Next
Print "Eachin in the List took " + (MilliSecs() - M)
Print
Print "--------------------------------------"
Print "Performing Eachin on the Map"
M = MilliSecs()
For Local i:Int = 0 To 1000
	For Local S:Talien = EachIn Map
		Local Result:Talien = S
	Next
Next
Print "Eachin in the Map took " + (MilliSecs() - M)
</pre><br>see if you still think Tmap is better. <br><br></td></tr></table><br>
<a name="1039951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> here is a better example of your code <br></div>That's not even close to the same. You're dealing with indexes here, which are obviously going to be faster with an array. Also, you're not actually searching the list, you're grabbing aliens from an array using an index.<br><br>Maps really useful only where items are identified and retrieved by some other object or string. In your example a Map would be really unnecessary. <br><br></td></tr></table><br>
<a name="1039952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> exactly. the whole argument was about Tlist, or tmap  as related to orgos post. I guarantee you that his code would be faster with Tlist using Tlink than using Tmap.<br>and no, I am not grabbing aliens from the list I am accessing the link value inside the list <br><br></td></tr></table><br>
<a name="1039953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jesse: This is a very good example that shows how to avoid a search on a list, but I was comparing search operations, so if you take out one of the searches, there's no comparison. Also, storing a Tlink into a field of a class that is already in the list is a way to add cyclic references, wich helps do things faster, but can be dangerous. I see what you're talkign about, I agree that using the tlink object usually avoids search operations on tlists, and this makes things a lot faster, nobody is telling this is not true, you're right at this respect but when you compare real search operations, TMaps are several orders of magnitude faster than a linked list. It's up to the coder to decide wich is best at every given situation.<br><pre class=code>see if you still think Tmap is better.</pre>I don't think it's better, I think it is more appropiate if you have to do search operations using given keys, and if you need a key/value pair like collection.<br>Thanks for your example, anyway ilustrates the usage of Tlinks in a way I hope will help other BlitzMax coders (as long as you avoid the cyclic reference in a real scenario). <br><br></td></tr></table><br>
<a name="1039954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the whole argument was about Tlist, or tmap as related to orgos post. <br></div>No it was not. <a href="/posts.php?topic=91394#1039899" target="_blank">ziggy</a> was <a href="/posts.php?topic=91394#1039893" target="_blank">responding</a> to <a href="/posts.php?topic=91394#1039891" target="_blank">your post</a> that stated TLists search in the same way that TMaps do (in fact, TLists don't search at all, they don't serve that purpose). <br><br></td></tr></table><br>
<a name="1039955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes it's really don't see any cyclic reference as there is no back and for linking. just one way reference. when the variable that access the type and removes it from the list and the local variable goes out of scope the object will be collected by the garbage collector. the problem would be if you put it in two list at the same time. but that would be a problem with any code.<br>I have been programming for ages like that and never ran in to that problem before.<br><br>@Plash<br>there is just no winning you wrong or wright. ;)<br>well you keep on using Tmap and I'll keep on using Tlist and well both be happy. <br><br></td></tr></table><br>
<a name="1039962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> in order for you to know which object needs to be romoved you must have the object at hand so if you are removing objects this would be the best solution.<br>when you add the object to the list you insert the link to the object then and there and there is no searching.<br>what do you think Tmap will do?<br>If anyone can prove me wrong, you will be my idol! <br></div><br><br>I am making a network strategy game, where orders for units needs to be sent across the network using streams. So each controllable object needs some kind of id which I have stored in a map. If you send a movement order to unit 57, then this id needs to be sent over the stream and then unit 57 found on the other computer. As you cannot transfer TLinks over a network, I use TMaps for this purpose!<br><br>I could also use large arrays whose size is carefully managed yada yada but game commands occur infrequently (compared to updating the game every frame) so TMap is good enough for me.<br><br>I await my shrine! <br><br></td></tr></table><br>
<a name="1039965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that is debatable. or at least I need to research that before I can make your "shrine".;) <br><br></td></tr></table><br>
<a name="1039972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cyclick reference: The TLink object has a Value field than points to a class instance with a field called Link that is the link itself:<br>Cycle: Object (link field) --&gt; Tlink (value field) --&gt; Object <br><br></td></tr></table><br>
<a name="1039974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> when you use link.remove() the method takes care of references. as I said, I never had problems with it. I have it working on this game:<br><a href="http://www.filefront.com/15098021/millenia.zip/" target="_blank">http://www.filefront.com/15098021/millenia.zip/</a><br>and is really fast but that is not the only thing is making it really fast. I have other optimizations at play.<br>as an alternative to doing in it in c which will be faster, challenging myself to make a shmup has really made me look for better ways to do stuff. I have been trying to make bullet hell type which would really make me look for ways to optimize my code even further.<br><br>[edit] <br>you know, just to agree with you ziggy and let you know that you are correct, this should work perfect:<br><pre class=code>
link.remove()
link = null
</pre><br>always have them together. <br><br></td></tr></table><br>
<a name="1040092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orgos</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, thanks for all comments.<br><br>This is the real problem.<br><br>I'm working on a game framework and I have a object called xScene, this object act like a parent entity, he must have a list of child objects, so when the draw method of xScene is called it must call all the draw method of hes child's, so i need to make eachin operation to draw all child objects.<br><br>Based on all the comments I guess that Tmap is more faster for it?<br><br>There is another way to make it more efficiently?<br><br>Note: The xScene behavior affect the behavior of hes child. <br><br></td></tr></table><br>
<a name="1040098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> ?! <br><br></td></tr></table><br>
<a name="1040105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you care about speed at all, use arrays. Otherwise maps and lists are a little easier. <br><br></td></tr></table><br>
<a name="1040106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you need to draw every child object at once, then a TList would be faster.<br><br>As for the TLink cyclic issue, is it a problem or not??? As I use this method in my game. <br><br></td></tr></table><br>
<a name="1040115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> it is! just make sure you null the link after using link.remove(). I did have the link = null in my game. I just forgot all about it(I don't know how). I finally remembered that from a previous post a while back. went back and looked at my code and there it was. it also didn't show up sense I am recycling objects.<br><br>I have a method something like this:<br><pre class=code>
method delete()
.
.
.
     link.remove()
     link = null
end method
</pre> <br><br></td></tr></table><br>
<a name="1040117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my honest opinion, and please don't take this wrong becouse this is absolutelly not personal, whenever a cyclic reference exists, you can be  sure you have a design flaw. It can work and be functional, but I would suggest to look for safer alternatives (just my opinion). The benefits of using a managed language is that you don't have to free things and you easilly avoid memory leaks. But a design with cross-referencing breaks this principle and adds no benefits.<br><br>That said, Orgos, if the number of childs is fixed, that is, if you don't add or remove childs to the parent entity, an Array is the faster option. If the number of childs is not fixed and childs are dynamically added and removed from the parent entity, then a TList is your best option. <br><br></td></tr></table><br>
<a name="1040122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont have a reason to get offended. I might agree with you mostly  but the fact is that even though blitzMax is good at what it does it's far from perfect. In my opinion it's missing a lot of functionality and if the options are there to do something more efficiently by circumventing some rules I will do it. After all, in this case, he lives the option of grabbing the link while adding the object to a list. what do you do with it?<br>it's there, use it. thats my opinion. <br><br></td></tr></table><br>
<a name="1040394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why does it cause cyclic reference? Because the TLink refers back to the object? When you call the remove method it seems to nullify the value of the link, which would break the cycle.<br><br><pre class=code>Local list:TList = New TList

Type t
	Field me:TLink
	Method test()
		Print "hi"
	End Method
End Type

Local a:t = New t
a.me = list.addlast(a)

t(a.me.value()).test() 'prints hi
a.me.remove()
t(a.me.value()).test() 'null object error</pre> <br><br></td></tr></table><br>
<a name="1040441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, the cycle is fixed when the remove method is called. That does not mean that the cycle does not exists, just that there's a way to fix it (and if you forget to use it... Leak!) That why I said it was dangerous, as it can be a source of problems, it's a bit like it's unmanaged, but each to their own! <br><br></td></tr></table><br>
<a name="1040811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> One more thing don't use Delete as a method name as it is reserved. <br><br></td></tr></table><br>
<a name="1040834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something else that may be worth considering, is the size overhead of the datastores.<br><br>For example I recently used a TList to store historic data and lots of it, now the problem here is every list element is stored as a link, taking up more memory.<br><br>In addition clearing a very long list (100k items) is very slow.<br><br>I ended up using an array, almost no overhead, fast as long as you don't have to re-dimension and quick to delete!<br><br>So if you are just storing log data and lots of it that you clear regularly you are probably better off using a simple array!<br><br>TIP, if your going to reuse it don't keep deleting and creating new data objects just zero them and reuse, it's faster still! <br><br></td></tr></table><br>
<a name="1048182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How does the array compare if you predefine the size then just insert data into it?  <br></div> Fast for everything. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
