<!DOCTYPE html><html lang="en" ><head ><title >Silly question for BMax and Wine</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Silly question for BMax and Wine</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Silly question for BMax and Wine</a><br><br>
<a name="1206900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I already wrote in the bug reports that a project of mine was in a standstill because I have some issues in Linux that are really unacceptable (keys and mouse buttons don't register well in Linux).<br>My primary system is MacOS, but as my iMac is broken at this moment, both MacOS *and* Windows were a bit beyond my reach. (and my cashflow is bad at this moment, so I cannot buy any new machine now of any kind).<br><br>Now I have a Linux box I use as an emergency system and I tried my game in Wine (compiled in Windows before my iMac broke) and it works. Well, some tiny issues as the background music stops where it shouldn't, and the game is a bit slower, but it works good enough to test things, and as my current work is sorting out game scripts and graphics, I can at least work a little further for the next couple of months.<br><br>Of course, as my main engine written in BMax isn't quite finished yet, I may need to modify it a bit more as time comes by requiring me to re-compile it. Now I think there was a topic about this before, but I can't find it anywhere so that's why I ask it again, does BlitzMax itself (most notably the compiler) work well in Wine? Or do I still need to borrow a Windows PC somewhere to get the compiling done. <br><br>What are your experiences on this? <br><br></td></tr></table><br>
<a name="1206901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Linux on its own is a complete ballache - never mind trying to get it to emulate Windows (or whatever it claims to be, if not an emulator).<br><br>Personally, I'd ditch Linux for the sack of crap that it is, and install Windows XP on whatever you're currently running Linux on.<br><br>Seriously. <br><br></td></tr></table><br>
<a name="1206903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Linux never lived up to my expectations either, and there's a long way to go for Linux to be a true acceptable OS indeed. <br>Point is (maybe I should have pointed that out in my first post), that this Linux machine was there to do the stuff for which I need Linux, so 'ditching' it, is (too bad) not an option :(<br><br>I agree emulators (or whatever they are called, before somebody jerks up about this) aren't the ideal way to go, but if they work I am saved for now so I have more time to get the cashflow in a way I can afford fixing/replacing my iMac :) <br><br></td></tr></table><br>
<a name="1206917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> sudo apt-get install virtualbox-4.0<br><br>then start virtualbox, create a new machine, create a new "hard disc" (an image file) with dynamical associated space.<br><br>Mount the .iso-image of your choice (eg. winxpsp3.iso - or how the image of your windows is named - downloadable legally, you have to provide the correct key...).<br><br>Now boot that virtual machine, install your windows... install blitzmax.<br><br>Create a network mapped drive (linux -&gt; samba -&gt;share your working directory) so at the end in windows your "z:\" is a mount to your working folder of the linux machine.<br>Alternatively you can use "shared folders" and other things..<br><br><br>Happy coding.<br><br><br>PS: I do not have "unrecognized keystrokes" in my linux apps.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1206921"></a>

<a name="1206922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks... I was hoping I wouldn't have to take the long way through a VM, but apparently it's the safest road to travel.<br><br><div class="quote"> PS: I do not have "unrecognized keystrokes" in my linux apps. <br></div><br><br>Odd... I do have them in ALL the apps I coded in BlitzMax. In an experimental project I made in Python (+PyGame) I don't have this issue in Linux (and in Windows it also works, so I found out when I could test things out on somebody else's machine). In my Linux builds of my BlitzMax code, however, I have to press every key around 6 times in succession before it's registered, and the WaitKey() command acts like WaitForever() if you get what I mean. (I use Mint btw). <br><br></td></tr></table><br>
<a name="1206923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have had the opposite tbh windows sometimes drops keys not linux, I do agree though that some distros are a pain which is why I always use Ubuntu as its the one that seems to have the most support ATM. <br><br></td></tr></table><br>
<a name="1206944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am on mint too ("15" atm).<br><br>Special keys like "alt" or "ö" are problematic: alt is a special key for the window manager (if not unset by the user) and the umlauts are not registered by the default PolledInput.<br><br>What method do you use to check for keypresses?<br><br>I use "KeyDown" here - together with a "keyTime" or "intervall". So If I keep the "A"-Key pressed, my "IsHit"-function just returns true one time. But I have an "IsHold" function which returns True after a certain delay...like you may know it from your normal OS-text-inputs.<br><br>So in short: instead of KeyHit I use:<br>if not myKeyHit[key_xyz] then myKeyHit[key_xyz]=KeyDown(key_xyz)<br>return myKeyHit[key_xyz]<br><br>But...both (KeyHit and KeyDown) react on received KEY_DOWN/KEY_UP-events (check polledInput.bmx).<br><br>But... KeyHit(key_xyz) gets 0ed on each call - so you cannot call it 2 times per "update", keyDown keeps set until the user releases the button.<br><br>I cannot imagine it happens to you but not that much others. So i just coded a simple test app now:<br><br><pre class=code>
Graphics 400,300

global lastKeys:string[10]
global lastKeyPos:int = 0
global inputMode:int = 0
global inputModeString:string = ""
repeat
	local char:int = 0
	local i:int = 0
	if inputMode = 0
		char = int(GetChar())
		inputModeString = "GetChar"
	elseif inputMode = 1
		For i = 0 to 255
			if KeyHit(i) then char = i
		Next
		inputModeString = "KeyHit"
	else
		For i = 0 to 255
			if KeyDown(i) then char = i
		Next
		inputModeString = "KeyDown"
	endif

	if char&lt;&gt;0
		lastKeys[lastKeyPos] = "input: "+char+" [time: "+Millisecs()+"]"
		lastKeyPos :+1
		if lastKeyPos = 10 then lastKeyPos = 0
	endif
	cls
	DrawText("Keypress-Demo", 0,0)
	DrawText("Press space to switch input mode. Current: "+inputModeString, 0,280)
	for i = 0 to 9
		DrawText(lastKeys[(lastKeyPos + i) mod 10], 10, 150-i*15)
	Next
	flip

	'change input mode
	if char = KEY_SPACE
		inputMode:+1
		if inputMode=3 then inputMode =0
		FlushKeys()
	endif
until KeyDown(KEY_ESCAPE)
</pre><br><br>Tested on: linux mint 15 64bit, windowsxp virtual, windowsxp real. Without flaws.<br><br>Does one of the modes not work for you (at the end they are just connected to the ondown and onup events... but maybe you just call some functions multiple times).<br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1207506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try your demo out when I have more time.... Anyway, thanks for thinking with me ;) <br><br></td></tr></table><br>
<a name="1207763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tricky</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> First result:<br><div class="quote"> Building LinKeyTest<br>Compiling:LinKeyTest.bmx<br>flat assembler  version 1.68  (32768 kilobytes memory)<br>3 passes, 4599 bytes.<br>Linking:LinKeyTest<br>/usr/bin/ld: /home/rachel/Apps/BlitzMax/mod/pub.mod/openal.mod/openal.release.linux.x86.a(openal.c.release.linux.x86.o): undefined reference to symbol 'dlopen@@...'<br>/usr/bin/ld: note: 'dlopen@@...' is defined in DSO /lib/i386-linux-gnu/libdl.so.2 so try adding it to the linker command line<br>/lib/i386-linux-gnu/libdl.so.2: could not read symbols: Invalid operation<br>collect2: error: ld returned 1 exit status<br>Build Error: Failed to link /media/rachel/Irravonia/Projects/Test/Linux Keyboard Test/LinKeyTest<br>Process complete <br></div><br><br>Right..... That's marvellous....<br><br><br>Okay, I added "Framework BRL.GLMax2D" and that problem was solved. Anyway, in this demo everything works perfectly. I don't know why, all I can think of is that this demo is less system demanding than a full game (as in my big project, entering the player's name works perfectly, but making a choice in the main menu does not).<br><br><br>Basically I just use KeyDown and KeyHit to do all this (and MouseHit and MouseDown, where I got the same trouble). My game Scyndi's Forest Quest (which can be downloaded <a href="https://sourceforge.net/projects/sfq/files/Beta%20Release/" target="_blank">here</a>. (best to leave the .deb file be. It doesn't work so well, the zip file for Linux is okay, and the source is also there) suffered from this issue big way. What I also saw, is the mouse pointer, in changes shape depending if the mouse button is being pressed or not (I mean after you are past the language selection which comes first). When I press the mousebutton it sometimes does not respond, and when I release the mouse button I often see the mouse pointer look like the button is still pressed.<br><br>When you want to try to compile the source yourself, you need first of all Brucey's Volumes module, and all other stuff that game uses is to be found here: <a href="http://tinyurl.com/trickymods" target="_blank">http://tinyurl.com/trickymods</a><br><br>(I had to note that, as the docs inside the game source itself, may be outdated). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
