<!DOCTYPE html><html lang="en" ><head ><title >problem compiling release code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >problem compiling release code</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=105" >BlitzMax Bug Reports</a>/<a href="#bottom" >problem compiling release code</a><br><br>
<a name="884186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>I have a program that compiles and runs fine in debug mode, however the bmk stalls when trying to compile in release mode.<br><br>In task manager, it shows the bcc running at full steam and the memory increasing and decreasing (mainly increasing).<br><br>I've removed a module called from my source to see if that was the problem but no luck, it's still stalling. within blide, it just states...<br><br>Building executable...<br>Compiling:myprog.bmx<br><br>and that's it.<br><br>I've ran the bmk from the command line with this line (verbose on to see if it will give me any more info)<br>bmk makeapp -a -v -r myprog.bmx<br><br>and it gets as far as this...<br>Parsing...<br>Resolving types...<br>Resolving decls...<br>Resolving blocks...<br>Evaluating fun blocks...<br>Generating assembly...<br><br>Are there any guidelines around here for what to look out for when comiling in release mode? orders of includes/modules etc?, this has me stumped.<br><br>Cheers,<br><br>Brent. <br><br></td></tr></table><br>
<a name="884188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ps <br><br>Can't post any code on this one I'm afraid. The main routine is several thousand lines long alone and there are many custom includes weighing in at least a couple of thousand lines each.<br><br>I'm not asking anyone to help me fix this per se, just point me in the direction of some classic compiler problems I might have overlooked.<br><br>Thankyou. :)<br><br>Windows Vista<br>UAC off<br>Intel core 2 duo 7200<br>2GB RAM<br>160GB HD (plenty of free space) <br><br></td></tr></table><br>
<a name="884191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried running the standard IDE and compiling in release mode from there?  Reason I ask is that it might just be a problem with Blide.  I switched from Blide to Project Studio because Blide always started playing silly buggers when trying to compile after running for several hours. <br><br></td></tr></table><br>
<a name="884192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same thing under the standard IDE<br>Building myprog<br>Compiling:myprog.bmx<br><br>Hangs...<br><br>Should have mentioned above, I'm running a fresh install of Vista the latest version of Max with the latest GUI. MinGW is installed and I can compile/build modules without any problems.<br><br>Thanks Gfk, Blide isn't the problem here I'm afraid :) <br><br></td></tr></table><br>
<a name="884198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try running BMax with the Win95 compatibility mode in Vista.  Sounds stupid, I know...<br><br>You could also try using the latest VirtualPC to compile under XP.   At least that way you know whether the problem is with Vista or BMax. <br><br></td></tr></table><br>
<a name="884199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think that messing about with XP and VirtualPC is the answer.  I run Blitzmax on two Vista systems and never had any compile problems.<br><br>Couple of things.  Are you trying to compile under a non-administrator account?  Don't know if that'd cause a problem anyway....<br><br>Other thing - are you trying to compile code which exists on a network drive? <br><br></td></tr></table><br>
<a name="884200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are new demos of BlitzMax available. These are version 1.30 and include MaxGUI. You could try the Windows demo, available from the <a href="/img/_index_.php" target="_blank">Products page</a>. <br><br>This should ensure you have the latest, compatible versions of BlitzMax and MaxGUI, with everything properly configured. <br><br></td></tr></table><br>
<a name="884202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've not had any major problems under Vista either, but I just noticed this:<br><div class="quote"> Should have mentioned above, I'm running a fresh install of Vista the latest version of Max with the latest GUI. <br></div>Seems to suggest that this problem started occurring after the re-install.<br><br>Another thing is that T-Light is using TV3D and there have been some recent minor problems with compiling stuff for that under Vista. <br><br></td></tr></table><br>
<a name="884205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I switched from Blide to Project Studio because Blide always started playing silly buggers when trying to compile after running for several hours. <br></div> that has no sense. Compilation is made outside from BLIde in a fresh and unique execution of the compiler on each compilation. Obviously, if the user also is not able to compile the source from the command line, it is obvious that it is not a BLIde issue... I would appreciate a lot if you read the thread carefully before stating that there may be a bug here or there. Additionaly, If any BLIde user reports a bug on BLIde, it is 99% of the time fixed in a maximum or a week or so... In the last few months the downloads of BLIde have grown a lot, and the bug reports are near 1 or 0 per release, and usually they are very minor things, so I'm sure BLIde is way stable. anyway, I supose you were refering to a personal liking or something like that, wich is ok for me. <br><br></td></tr></table><br>
<a name="884206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry guys, turned my back for acouple of minutes and there's a flurry of posts, thanks :)<br><br>kenshin...<br><div class="quote"> Another thing is that T-Light is using TV3D and there have been some recent minor problems with compiling stuff for that under Vista.  <br></div><br>Noooooooo, don't say it's TV, mind you, if it's only under Vista then worst comes to worst, I'll compile on the xp box.<br><br>Although I can't say for certain, I don't think this is a problem with the fresh install, the first time I saw the problem was when trying to compile a release version with the 'Tablet Module' several months ago ( I stuck with debug mode after that as I wasn't anywhere near completion and it wasn't a pressing issue). I didn't think much of it at the time as compiling anything at all on the old Vista install was a dodgy thing at best. The problems weren't confined to bmx but covered every language and compiler I had installed. Even microsofts own VC++ would crash out or compile fine depending on the OS's mood. <br><br>Should say I've had no such problems with the latest install (other than UAC issues which is why I've killed it).<br><br>I'm currently going through the main program function by function to see if I can isolate what's causing the assembly issue. Currently 2800 lines in and all is well. Here's hoping.<br><br>Thanks for your help on this guys. <br><br></td></tr></table><br>
<a name="884207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Ziggy.<br><br>Blide (and recently Blide+) makes my life 1000% easier, wouldn't be without it :) <br><br></td></tr></table><br>
<a name="884209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @T-Linght: Thanks for the feedback! I had some problems compiling code on Vista also untill I set the correct permissions on the BLIde and BlitzMax folders, disabled UAC and run everything from an administrator account. but obviously that would also aply to the debug-mode compilation so it sounds to me like a bcc bug. If you're mixing C or C++ code, be sure to have the right version of MinGW. Other than that, I don't know what can be causing this to your code.<br><br>EDIT: also disable quick build just in case any .o file is corrupted and causing this. <br><br></td></tr></table><br>
<a name="884211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Another thing is that T-Light is using TV3D and there have been some recent minor problems with compiling stuff for that under Vista. <br></div><br>That's news to me. I certainly don't have any problems compiling anything using TV3D on Vista, and no one has told me of any such problems, which I would have expected. <br><br></td></tr></table><br>
<a name="884218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right.  I have not had any actual hung compiles, but I have seen a problem with exe's on xp compared to those on vista.  I get crashes when there is no license installed, when I should get a watermark.  If I use Win95 compatibility mode then no crash. <br><br></td></tr></table><br>
<a name="884223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ziggy -<br><div class="quote"> If you're mixing C or C++ code, be sure to have the right version of MinGW.  <br></div><br>Nope, max only in this compile, I was hoping that the tablet module I'm using was causing a problem as it did months ago but unfortunately not, just ran a test and its fine.<br><br>Been transferring code bit by bit to a new file and running the bmk from the command line to see which bits are ok. Once it gets into my main functions, each function relies on several others to work. Unfortunately once I'd transferred all the neccessary functions over to the new file to stop the bmk from complaining about missing bits... it hangs.<br><br>This is going to be a long weekend. Wish the bmk or Bcc gave more information on what it was doing at the assembly stage, would make this a lot easier. <br><br></td></tr></table><br>
<a name="884231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, think I might have found the section responsible. It's somewhere within 500 lines of multidimensional loveliness. Once this functions blanked, everything seems to compile.<br><br>I'll go through it all and post what I find here.<br><br>Thanks again guys. <br><br></td></tr></table><br>
<a name="884295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone up for a puzzle?<br><br>I've thrown out everything that isn't needed to show the problem and narrowed it down to a few lines (enough to get the program to compile properly in debug mode, but fail in release mode).<br><br><div class="quote"> <br>SuperStrict<br><br>Local temparray:Int[512 * 512]<br>Local mycolour:Int<br>Local mya:Int<br>Local myr:Int<br>Local myg:Int<br>Local myb:Int<br>Local f:Int<br>Local g:Int<br><br>temparray = New Int[512 * 512]<br>Local newtemparray:Int[512 * 512]<br><br>	mya = (mycolour &amp; $ff000000) Shr 24<br>	myr = (mycolour &amp; $ff000000) Shr 16<br>	myg = (mycolour &amp; $ff000000) Shr 8<br>	myb = (mycolour &amp; $ff000000) <br><br>	mya = (mya &amp; $000000ff) Shl 24<br>	myr = (myr &amp; $000000ff) Shl 16<br>	myg = (myg &amp; $000000ff) Shl 8<br>	myb = (myb &amp; $000000ff) <br><br>	newtemparray[(f * 512) + g] = mya + myr + myg + myb<br>	temparray[(f * 512) + g] = mya + myr + myg + myb<br><br> <br></div><br><br>As I say, very little of the above code makes any sense without the rest of it, it's just to show the problem, if I try to compile the above lines in release mode the compiler will hang.<br><br>If I comment out either one of these two lines, it will compile in debug and release...<br><div class="quote"> <br>	newtemparray[(f * 512) + g] = mya + myr + myg + myb<br>	temparray[(f * 512) + g] = mya + myr + myg + myb<br> <br></div><br>Also, if I rem out these lines...<br>[QOUTE]<br>	mya = (mycolour &amp; $ff000000) Shr 24<br>	myr = (mycolour &amp; $ff000000) Shr 16<br>	myg = (mycolour &amp; $ff000000) Shr 8<br>	myb = (mycolour &amp; $ff000000) <br><br>	mya = (mya &amp; $000000ff) Shl 24<br>	myr = (myr &amp; $000000ff) Shl 16<br>	myg = (myg &amp; $000000ff) Shl 8<br>	myb = (myb &amp; $000000ff) <br>[/QOUTE]<br>It will also compile in debug and release, which is really strange.<br><br>None of this code is neccessary to my main routines anymore so this isn't an important issue, but does anyone have any ideas? <br><br></td></tr></table><br>
<a name="884321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ...does anyone have any ideas? <br></div><br>Not really, but that's a weird bug.<br><br>bcc is apparently caught in some kind of infinite loop. <br><br></td></tr></table><br>
<a name="884481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >T-Light</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Spooky isn't it.<br><br>I have code like this running throughout my prog and thankfully it's all fine, just something weird going on in the example above. Thought it might be down to the line<br><div class="quote"> temparray = New Int[512 * 512] <br></div><br>but I use that kind of code in quite a few places without problems, also thought  'temparray = new' followed by another array called 'newtemparray' could have been triggering something but I renamed them and still had the same problem.<br><br>I'll leave this one to Mark I think :) <br><br></td></tr></table><br>
<a name="983966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump - compiler still freaks out for me with T-Light's code example on  BlitzMax v1.34rc8 (Windows Vista x86). <br><br></td></tr></table><br>
<a name="984722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Nice find! In fact, worthy of a blog...<br><br>Fix will be in next update. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
