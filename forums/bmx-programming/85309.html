<!DOCTYPE html><html lang="en" ><head ><title >Optimized TList ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Optimized TList ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Optimized TList ?</a><br><br>
<a name="964717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I'm currently trying to optimize some part of my game.<br><br>I'm using a <b>Mother type</b> for every objects in my game, so I can manage them easily via a <b>Global TList</b>.<br><pre class=code>Type Mother
   global List:TList ' This List will receive Mother extended Type with the keyword Self
   ...'sub type management
End Type</pre><br>But in some cases (2 or 3 times per cycle) I need to access to only a certain type of <b>Extended Type</b>.<br><pre class=code>For Local player:Player = EachIn Player.List
...
next</pre><br>I suppose this kind of casting is cycling through each objects of the TList.<br>This global TList will probably receive between 100 and 400 objects.<br><br>Is including a TList inside the <b>Extended Type</b> and cycling without casting would represent an interesting gain in performance ?<br><pre class=code>Type Player
   global subList:TList ' This List will receive the Player object with the keyword Self
   ...'sub type management
End Type

For Local player:Player = EachIn Player.subList
...
next</pre><br><br>Thanks <br><br></td></tr></table><br>
<a name="964720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, depending on the size of the subList, this could be a great gain performance-wise. If your subList is 10-20 objects versus 100-400 in the global list, you are greatly reducing iterations.<br><br>However, maybe there's a way to iterate your global list only once and process each item differently based on its extended type? <br><br></td></tr></table><br>
<a name="964725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your answer another JIM<br><div class="quote"> However, maybe there's a way to iterate your global list only once and process each item differently based on its extended type? <br></div><br><br>That's what I do for the main processing but there is 2 specials cases were this is impossible.<br>My first subList would contain 1-4 objects only and my second more likely 1 but a few more is possible.<br>Let's resume this by 2 versus 100.<br>But since I don't know how fast is optimized TList I really wonder if this worth it.<br><br>I will probably realise a quick stress test and post the result here. <br><br></td></tr></table><br>
<a name="964729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I say its worth doing anyway, because the extra RAM usage is very small (2-4 objects) and the speed of iterating through 2 instead of 100 does make a difference.<br><br>Maybe you'll move on to 1000+ objects in the main list. You wouldn't want to iterate that whole list thrice :)<br><br>If you're thinking if time consumed to do this vs speed improvement is not worth it, I say it is. Just for the sake of a flexible design that would be optimized even when the numbers change. <br><br></td></tr></table><br>
<a name="964737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You right<br>Plus I did a quick test and that kind of iteration is taking more time because of the casting than cycling directly through the list.<br>By using a simplest sub list the gain is approximatively a millisecond every game second.<br>Worth it.<br><br>Thanks to share your advices on this ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
