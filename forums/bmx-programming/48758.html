<!DOCTYPE html><html lang="en" ><head ><title >TNet Multiplayer Release Update</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TNet Multiplayer Release Update</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >TNet Multiplayer Release Update</a><br><br>
<a name="542275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My Network Module is taking it's next step. The first real version is online. The site has been updated with various stuff. <br><br>TNet is now using BlitzMax sockets from scratch and should work on Mac and Linux aswell as PC. Overall the structure of TNet have been made more effective and modular so the next updates should take less time to complete (TCP, Reliable UDP, SyncObjects). <br><br>Hope this version is more stable than the last and not the opposite. TCP and reliabel UDP is the next step. They are both 70% done.<br><br>See the command section for an update list of all command with descriptions and examples.<br><br>Examples Updated to support TNet Pre-Release. <br><br></td></tr></table><br>
<a name="542870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Congratulation!! Very promising!! <br><br></td></tr></table><br>
<a name="543068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops, meant to try this last night! I'll try later on. <br><br></td></tr></table><br>
<a name="543117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll check it out, looks great. <br><br></td></tr></table><br>
<a name="543200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im curious how you are implementing sync objects.<br><br>Excuse my ignorance of how Max works but is there a way of interating through a type's structure or would the programmer have to create a function or method for this to occur? <br><br></td></tr></table><br>
<a name="543201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> will this  be competing with the "official" network modules (when/if they come out)? <br><br></td></tr></table><br>
<a name="543766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome Wave. Keep it up.<br>Good documentation too! <br><br></td></tr></table><br>
<a name="545969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks,<br>I was away last week so that's why I haven't replied.<br><br><div class="quote">  <br>will this be competing with the "official" network modules (when/if they come out)? <br></div> <br><br>The official network module called GNet is already out, as well as the sockets code, see the official documentation. It could need a little more work, but it's done. I would say TNet-BASIC is competing to GNet. TNet-Advanced will be aimed for more serious developers, it will not be harder to use it will only contain more features. And will be out of league with GNet. <br><br><div class="quote"> <br>Excuse my ignorance of how Max works but is there a way of interating through a type's structure or would the programmer have to create a function or method for this to occur?  <br></div><br><br>Direct answer would be: Programmer have to use functions and import a "unreal_network_module.bmk" file, which you can modifiy if you want to.<br><br>Syncobjects will be implemented into your game with the help of some functions. <br><br>Here is an example:<br><pre class=code>
'This is your create method for an object you want to sync.
	Function Create()
	
			Local P:Probe = New Probe
			P.Control = AI 'On this computer
			P.Local_ID = CreateSyncObject()'&lt;--- NETWORK CREATE SYNC OBJECT
			UpdateSyncObject( [ Int(P.X), Int(P.Y) ,P.Dir, P.Armor, P.Energy], P.Local_ID )	
	
	EndFunction
</pre><br><br>This is for sending actions, could be keypresses.<br><pre class=code>
If KeyDown(Key_Up) SetActionOn( 0,Local_ID ) Else SetActionOff( 0,Local_ID )
If KeyDown(Key_Down)  SetActionOn( 1,Local_ID ) Else SetActionOff( 1,Local_ID )
If KeyDown(Key_Left) SetActionOn( 2,Local_ID ) Else SetActionOff( 2,Local_ID )
If KeyDown(Key_Right) SetActionOn( 3,Local_ID ) Else SetActionOff( 3,Local_ID )
</pre><br><br>In your objects update method you would have this, decide which fields you want to send. These fields will be sent to the other clients and applied to their remote sync-objects. You can control the sending interval at which these updates are sent.<br><pre class=code>
UpdateSyncObject( [ Int(X), Int(Y) ,Dir, Armor, Energy] ,Local_ID )
</pre><br><br>This is how you receive the data from others. This should be run in objects that are remote controlled. Means If SyncUpdate Recieved then<br><pre class=code>
If SyncUpdate( Net_ID, Local_ID )	TNetApplyUpdate( X, Y, Dir, Armor, Energy )	

If TNetKeySync( Net_ID, Local_ID )	SetActions( Up, Down, TLeft, TRight)		
</pre> <br><br></td></tr></table><br>
<a name="546109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> May i ask something about sync.?<br><br>Does this SyncUpdate gets true if somewhere else a <br>UpdateSyncObject has been called or gets it true if all clients have received the (UpdateSyncObject) Fields?<br>Is there a command to check out if all clients have got the new data and are ready to update it? <br><br></td></tr></table><br>
<a name="546272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> SyncUpdate return true is the sync object from Net_ID which you are given when you join. Every connected Client have a unique Net_ID. Each Client may have any number of sync objects. To get a specific sync-object you check the Net_ID and then the Local_ID. A sync objects could be anything. A Ped, a Car, A Door, A Tree. If it moves it's data is packed into a "send this next update list". At the next update all syncobjects which have new and relevant data are sent, as one big packet. It's probably hard to get it without an real example. But all in all it is easier than building your own system. As everyone will need to modyfy small stuff of the imported module file so it's fits into their game, such as ApplyUpdate( X, Y ,Z , Pitch, Yaw, Roll ...) if your doing it in 3D.<br><br>The idea is that each object in your game have to know if it is remote or local. A remote object is updated with received packets at SyncUpdate( NetID , LocalID ), local objects are sent in updates at UpdateSyncObject( X,Y,Z.. ). This is controlled when you create the object. So check NewSyncObject() to get a remote object from another client or CreateSyncObject() to create a local one. Each sync object has a local ID and a Client_ID.<br><br>Did I answer your question? <br><br></td></tr></table><br>
<a name="546341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Wave,<br><br>I don't understand your syncobjects example, but I'll wait until there are some live examples :) <br><br></td></tr></table><br>
<a name="546344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess that's the best =) <br><br></td></tr></table><br>
<a name="546587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you, downloaded the pre release.<br>Please cry out loud if you got prediction in.<br>Looking forward to the release version:) <br><br></td></tr></table><br>
<a name="547237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mhh...strange.<br><br>'host<br>Graphics(1024,768,0,75)<br>HostUDP(8080)<br>While Not KeyDown(Key_Escape)<br>UpdateTNet()<br>Flip<br>Cls<br>Delay 20<br>FlushMem<br>Wend <br><br>'------------------------------<br><br>'Client<br>Graphics(1024,768,0,75)<br>JoinUDP("82.135.71.240",8080)<br>While Not KeyDown(Key_Escape)<br>DrawText "Testest",50,50<br>Flip<br>Cls<br>Delay 20<br>FlushMem<br>Wend <br><br><br>I am running 1 client and 1 host at one PC.<br><br>Sometimes the client gets ID 2 which is okay.<br>Sometimes host debug message says something like player joined..ID2, player joined...ID3, player joined..ID4 etc.<br><br>Why that? <br><br></td></tr></table><br>
<a name="547428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you got Pre Release 2?<br><br>I fixed some bugs which resulted it that behavior in the latest version. (or I'll try to figure it out) <br><br>Here is another simple example, yours should work fine. There is some new debugging too, more info under commands at the TNet site.<br><br>Host<br><pre class=code>
HostUDP(8080)
While Not KeyHit(KEY_ESCAPE)
   UpdateTNet()
Wend 
</pre><br><br>Client<br><pre class=code> 
Graphics 640,480,0
JoinUDP( 82.135.71.240", 8080 )
While Not KeyHit(KEY_ESCAPE)
 UpdateTNet()
 DrawListOfAllClients(0,0)
 Flip;Cls
Wend 
</pre> <br><br></td></tr></table><br>
<a name="547441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried your Pre Release 2.<br>Works fine now, nice job.<br>DrawListOfAllClients(0,0) behaves different if put in Hosts Code (message only several seconds visible).<br>If i am allowed to, i will write in your forum;-) <br><br></td></tr></table><br>
<a name="547574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> DrawListOfAllClients() only works in graphics mode but I guess that's not the problem. Explain more, perhaps post some code. It works for my host =)<br><br>Please use the TNet Forum for any Multiplayer Programming Questions, it's not for TNet-Only. <br><a href="http://s9.invisionfree.com/TNet/index.php?s=19465060d08aa3e2b54e9f068095a6ba&amp;showforum=1" target="_blank"> TNet Forum </a><br><br>( You do not have to create an accout to post but it's recommended ) <br><br></td></tr></table><br>
<a name="547582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takuan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do. <br><br></td></tr></table><br>
<a name="554711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Wave<br><br>I have tested a little bit you TNet library :) great job ! but i'm a little<br>bit lost with your command .... It's not very easy to see what <br>command is a TNet command. I think that you must rename them.<br><br>Example :<br><br>TNet_JoinUDP<br>TNet_NewClient()<br><br>etc...<br><br>Else , keep up good job :) and continue this lib for free :)<br><br>Last question : the command <br>TNetPack.WriteFlagsToByte%( Key1, Key2, Key3, Key4 )<br><br>How many value can be used ? example :<br>TNetPack.WriteFlagsToByte%( Key1, Key2, Key3, Key4,KeyJump,KeyShoot, etc etc) possible ? <br><br></td></tr></table><br>
<a name="554801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> that's a good idea... i second that...<br><br>--Mike <br><br></td></tr></table><br>
<a name="555359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the feedback. Ok that would be an easy fix to rename them, I'll see to that in the next release.<br><br>WriteFlagsToByte is the same as write bits to byte. You can write at max 8 bits or flags or keys to a byte. If you need more keys simply do the process two times for a total of 16 flags.<br><br>A little more on the packing commands can be found at:<br><a href="http://www.truplo.com/TNet/PackingCommands.html" target="_blank">Packing Commands</a> <br><br></td></tr></table><br>
<a name="555412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Wave :) keep up good job :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
