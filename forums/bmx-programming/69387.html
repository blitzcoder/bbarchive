<!DOCTYPE html><html lang="en" ><head ><title >BlitzMax Image load/save support</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzMax Image load/save support</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BlitzMax Image load/save support</a><br><br>
<a name="776176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Introducing a new cross-platform module that adds support for some more image formats (loading and saving).<br><br>Loading of : GIF, BMP, DDS, HDR, ICO, IFF, JNG, JPG, KOALA, LBM, Kodak, MNG, PCS, PBM, PGM, PNG, PPM, Photoshop (PSD), Fax G3, SGI, RAS, TARGA, TIFF, WBMP, XBM and XPM.<br><br>Saving of : BMP, GIF, HDR, ICO, JPEG, PBM, PGM, PNG, PPM, TARGA, TIFF, WBMP and XPM.<br><br>Uses the open source <a href="http://freeimage.sourceforge.net/" target="_blank">FreeImage</a> library.<br><br>Requires my "modified" BMK to build the module (due to compile/linking flags that the standard BMK doesn't support). Link to the zip is on my site.<br><br>For Windows, there's a freeimage.dll included, which you can ship with your app. I would have preferred to build the library statically, but I couldn't get it to work with MinGW.<br><br>For Linux and Mac, the library compiles into the module, so there are no external files required with deployment.<br><br>You can use the standard <b>LoadPixmap</b> if you only require load support. Just import the module and BlitzMax will pick the best loader for the image.<br><br>Loading and Saving have Stream support, so in theory you can even load/save in memory - something I haven't tried, but a RAMStream might work....<br><br><br>The module is available from <a href="http://brucey.net/programming/blitz/#bahfreeimage" target="_blank">http://brucey.net/programming/blitz/#bahfreeimage</a><br><br>Tested on Linux, Windows and Mac PPC (should work fine on Mac X86).<br><br><br><br>Any problems, comments, suggestions.... ;-) <br><br></td></tr></table><br>
<a name="776201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You, my friend, are a god. <br><br></td></tr></table><br>
<a name="776215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah. Do you have an army of clones working on these? How do you find the time? I really, desperately need to know! <br><br></td></tr></table><br>
<a name="776223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just like to keep myself busy, is all.<br><br>I should have an update for this tomorrow at some point... which will add a CreateFromPixmap function - which effectively lets you save any old pixmap to any of the supported file formats...  (got it working on Linux... need to test on the rest).<br><br>;-) <br><br></td></tr></table><br>
<a name="776251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tagging this so I can find it later, very nice work Brucey :) <br><br></td></tr></table><br>
<a name="776549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo,<br><br>Just to say there's an update which adds some nice functionality and improved documentation.<br><br>1.01<br><pre class=code>
* Added CreateFromPixmap() function.
* Added colorQuantize, dither, threshold, toneMapping, tmoDrago03 and tmoReinhard05 methods.
* Added convertTo 4, 8, 16 methods.
* Added more documentation.
</pre><br><br>With <b>CreateFromPixmap</b> you are now free to move image data back and forth between BlitzMax and the FreeImage library.<br><br>I've implemented two layers of imaging. The first holds the "real" image data, which you can manipulate, load, save etc.<br>The second resamples that image data for displaying in BlitzMax via Pixmaps - mapped to the nearest pixmap format.<br>This way, you don't have to mess about converting and reconverting....<br><br>Anyhoo... hope you find it useful<br><br>:-) <br><br></td></tr></table><br>
<a name="776566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, you're really great :)<br><br>A little whisper.. (ODE next please....),.... <br><br></td></tr></table><br>
<a name="776569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> aren't there several ODE wrappers out there already?? <br><br></td></tr></table><br>
<a name="776579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't make the old mak.ode working, JV-ODE is great but is limited to win32 yet....<br><br>I really hope it's possible to have an ODE module, and Brucey's modules have the highest quality/portability .<br><br>It's only a with but maybe some people have same wishes.<br><br>However I have to thanks your great libs first, they saves my day especially the database ones, thanks. <br><br></td></tr></table><br>
<a name="786565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CASO</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is a great module!<br><br>I had some problems though....<br>1.<strike>I can't get it to save .ico files (the file is there but it doesn't show like a regular icon and won't open in Photoshop)</strike>(Oops...I was trying to save a PNG format as a .ico)<br>2.The image is upside down when I save it (fyi .ico to .png)(It is easy to go around this but I'm just curious)<br><br>Those are my only problems. (I would really like to save icons)<br><br>Overall it is AWESOME. Thank You Brucey. <br><br></td></tr></table><br>
<a name="786573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Coordinate system of freeimage is bottom-left so I flip it on load... I wonder if I shouldn't flip it back before saving then...<br>Saving wasn't as fully tested as loading of formats, so perhaps this slipped by.<br><br>It's quite a feature-packed library. Glad you are finding it useful :-) <br><br></td></tr></table><br>
<a name="786594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CASO</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just curious... does Freeimage allow the saving of an icon with multiple formats/sizes? <br><br></td></tr></table><br>
<a name="786601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, apparently it does. There's a "Multipage" section in the documentation which says it can handle TIFF, ICO and GIF formats in a multipage way.<br><br>I guess this would be a reasonably useful feature to add to the module then? <br><br></td></tr></table><br>
<a name="786621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CASO</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am asking if it can create an icon file that contains any combination of sizes 16x16,24x24,32x32,48x48... and color depths 2 bit, 8bit, 24 bit, 32 bit. <br><br></td></tr></table><br>
<a name="786625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume that's what multipage implies, yes. <br><br></td></tr></table><br>
<a name="786628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CASO</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I almost feel guilty asking, but... could you explain how to use that feature? <br><br></td></tr></table><br>
<a name="786629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't implemented the multipage part of the library in the module yet, so it's not going to be easy to use that until it's in there...<br><br>I guess I should put it on my list of things to do ? <br><br></td></tr></table><br>
<a name="804190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the delay.... Seem to have got side-tracked somehow ;-)<br><br>Update of <b><a href="http://brucey.net/programming/blitz/index.php#bahfreeimage" target="_blank">BaH.FreeImage</a></b> module (1.02) :<br><br> *  Hacked MNG plugin to validate images using the .mng header.<br> * Re-applied internal LibPNG support. Do not Import Pub.Libpng<br> * Loaded TFreeImages bitmaps are now not y-flipped at load-time. Therefore when saving they should now be in the correct orientation.<br> * New TMultiFreeImage type for multi-page image support (gif, ico and tiff).<br> * New LoadAnimFreeImage() function to create a multi-frame TImage from a multi-page image.<br><br><div class="quote"> 2.The image is upside down when I save it <br></div><br>I was y-flipping the image at load-time, so that pixmaps displayed correctly. I've disabled that foolishness, and therefore loaded images are not changed at all internally. I moved the y-flip to the "display" pixmap, that you see when you use getPixmap() - which creates a new image of a viewable resolution.<br>Hopefully that solves the inadvertent flip problem when saving between formats. Sorry about that.<br><br>The multi-page handling appears to be working (on the anim gifs I've been playing with). Haven't tried loading icon files, but I'm supporting all the multi-page features of FreeImage now, so if it works in FreeImage, it should in theory work in the module.<br><br>btw, FreeImage does not support multi-page MNG images. It will only display the FIRST page of a multi-page MNG image. This is a problem with FreeImage itself :-)<br><br><br>Anyways... Enjoy.<br><br>:o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
