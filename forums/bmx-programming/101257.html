<!DOCTYPE html><html lang="en" ><head ><title >Audio: "pops" when playing many soundfiles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Audio: "pops" when playing many soundfiles</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Audio: "pops" when playing many soundfiles</a><br><br>
<a name="1201248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Capirola</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello!<br><br>I'm currently working on a relatively simple and straight-forward program which works a bit like a music box. The user enters little dots for notes and can play back the composition by pressing the space bar repeatedly for every bar. <br><br>For every note (C,C#,D, Eb etc...) I imported an .ogg-soundfile and play it over a channel (I allocated a channel for every pitch so that many notes can be played at once) when the keypress is done.<br><br>The problem is that especially when playing the same note in quick succession and several chords after one another the audio sort of "clicks" and "pops". It sounds like some kind of clipping.<br><br>Is there some kind of effective way to play many soundfiles in a Blitzmax-application simultaneously with a smooth sound and no "pops"?<br><br>Any Help is very much appreciated. :-) <br><br></td></tr></table><br>
<a name="1201274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you recycling the channels you play them over, or are you creating/destroying a new channel for each sample that you play? <br><br></td></tr></table><br>
<a name="1201424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Capirola</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried both:<br><br>first I tried to allocate Channels in an Array of TChannel-Objects with 1 channel assigned to every note pitch (A, B, C, D etc.) and then I would simply play the notes in the same channels over and over again but that would already create some unpleasent popping noises.<br><br>What I tried then, just for kicks, was to simply "PlaySound" a file everytime a note was played. The clicking seemed to be (hopefully) solved but I would still get unpleasant sounds when playing many notes together. But then I remembered that the sounds themselves were already relatively loud audio. They weren't clipping themselves but relatively close. So I exported all the sound files again, this time with some dB less and now it seems to sound quite good on the hand, but now there are two other problems:<br>1.) the individual notes are now pretty quiet. I have to turn up my speakers quite a bit and the whole audio of the program still seems too quiet. I could of course tell the program to play notes more quiet depending on how many notes are sounding.<br>2.) if I want to stop the playback of a particular sound, how do I do that? Doesn't BlitzMax allocate a new channel automatically when I simply play a sound? Is there a way of finding out the handle of that channel so I can manipulate it? <br><br>***the short version***:<br>Is there a way to find out the handle of a Channel that blitzmax automatically creates when I play a sound without assigning a channel? <br><br></td></tr></table><br>
<a name="1201429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> PlaySound() returns the channel it uses. <br><br></td></tr></table><br>
<a name="1201563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Capirola</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much, I think I can figure something out now!<br><br>Just one more question: is it generally a bad idea to not even bother much with allocating channels and just let the program create new channels all the time (so basically just using "PlaySound()")? Will this overly stress the Memory or anything like that? Or don't I really have to worry about that too much? <br><br></td></tr></table><br>
<a name="1201617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was having similar issues using OpenAL, so I switched to DirectSound and things seemed to be fine. <br><br></td></tr></table><br>
<a name="1201618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was having similar issues using OpenAL, so I switched to DirectSound and things seemed to be fine. <br><br></td></tr></table><br>
<a name="1208905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have written a SpecDrum clone (the old days of the spectrum 48k) using blitzmax and i use directsound in my program and i have upto 20 samples playing at once with no pop or click but i do suffer when it comes to windows 7 or windows 8 when i use directsound i get slight latency , but there again that could be the creative drivers for my audigy 4 platinum.<br><br>the one thing i would like to get into is using Asio sound drivers but maybe i am not looking in the right place but can't seem to find any in here <br><br>Lee <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
