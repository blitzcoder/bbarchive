<!DOCTYPE html><html lang="en" ><head ><title >Source code organization problems with BlitzMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Source code organization problems with BlitzMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Source code organization problems with BlitzMax</a><br><br>
<a name="498674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tiggertooth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like to separate my engine code from my game code.  So the code that handles general engine duties lives in a totally separate directory tree than all the code that is game specific.<br><br>I'm trying to get this set up with BlitzMax.  And I'm having a lot of trouble.  Really frustrating, because I felt as though a lot of what BlitzMax had to offer was improved environments for doing this sort of thing.  I'd like to find out how others are handling this issue, and I'd like to find out what Blitz Research believes the solution is.<br><br>One more note:  My engine code generally gets large (60,000 lines of Blitz3D code in my old engine) and as such I like to separate the engine code into multiple directories (graphics, sound, input, physics, entities, etc. etc.).<br><br>I first tried creating a public module for the engine.  This seems like it would be perfect because every one of my games can just "import" the engine and poof I'm off and running.  The module approach appeared to be working fine in that I could have complex directory hierarchies below the root of my module, with the top-level .bmx file importing in all the other code.  I got this all working finally.  The problem is, in the debugger, if I try to step into a function that is in the Engine, the debugger cannot step into it (cannot load source code).  That's understandable, but it kills the module approach--there is no way for me to execute the bmx source and debug it.  This is a show-stopper for me.<br><br>Then I switched to just having the bmx code live in its own tree, and just import it into one of my game projects.  The problem here is that Blitz cannot handle the sub-directories of the engine code.  It is as if Blitz requires all imported code to live in the same directory as the original file doing the importer.  This again is a show-stopper for me.<br><br>Anyone else trying to do what I'm doing and having any luck?  I'll post (in a follow posting) the exact directory structure I'm using and the compiler errors I'm getting.<br><br>Driving me nuts.  I think this is a serious issue for any serious engine development.  Hopefully someone has found a solution to the problems.<br><br>Ken <br><br></td></tr></table><br>
<a name="498679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Importing seems to be pretty broken. It worked fine for a while for me, bet eventually i started getting strange and incomprehensable error messages. I had to resort to "Include"ing everything. This works fine and actually makes my project compile about 3X faster. <br><br></td></tr></table><br>
<a name="498866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br><div class="quote"> <br>The problem is, in the debugger, if I try to step into a function that is in the Engine, the debugger cannot step into it (cannot load source code).<br> <br></div><br><br>This sounds like a debugger bug.<br><br><div class="quote"> <br>The problem here is that Blitz cannot handle the sub-directories of the engine code<br> <br></div><br><br>How do you mean 'cannot handle'? What are the symptoms?<br><br><div class="quote"> <br>I'll post (in a follow posting) the exact directory structure I'm using and the compiler errors I'm getting.<br> <br></div><br><br>Please do!<br><br>I've had no problems with Import for a while now. However, I don't generally use complex source code directory trees so I may have missed something.<br><br>The biggest restriction on Import is that it cannot be cyclic...ie: a file cannot directly, or indirectly, end up importing itself.<br><br>Some see this as a bad thing, but I have ended up really liking how it forces you to structure your files. In C/C++, you can all too easily end up with a 'rats nest' of cyclic #INCLUDEs, often resulting in a big, painful refactoring of files further down the track. <br><br></td></tr></table><br>
<a name="498984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is also an issue of debugging where the call stack is inside a method, but the debugger will only show the type instance name and address. So you cant see local values of the method. ditching import entirely was my workaround. <br><br></td></tr></table><br>
<a name="499014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, without some kind of example there's not much I can do!<br><br>I just had a quick play around (on the Mac) and can step into methods in imported files just fine.<br><br>Ditto stepping into stuff like the guts of TStream.Write()... <br><br></td></tr></table><br>
<a name="500202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tiggertooth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark,<br><br>Thanks for the reply.  I upgraded to v1.05, and now I can step into my engine code in the module tree.  So I can return to using the paradigm of my engine code being a module unto itself, and the games simply importing my engine as a framework.<br><br>I think that fixes things for me.  If I have any additional problems, I'll post.  If anyone pushes the boundaries of complex directories, that will probably be me :-)<br><br>Thanks again,<br>Ken <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
