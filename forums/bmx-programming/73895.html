<!DOCTYPE html><html lang="en" ><head ><title >MacOS compile on Leopard not working on Tigers?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MacOS compile on Leopard not working on Tigers?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >MacOS compile on Leopard not working on Tigers?</a><br><br>
<a name="825540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi people,<br><br>I've just had a customer contact me regarding one of my games, Mahjong Epic, not working on his MacOS 10.4.10, Intel CPU.<br><br>I compiled that version using BlitzMax v1.26 on MacOS 10.5 Intel, and the PowerPC version on a BlitzMax v1.26 on MacOS 10.4.10, and bound them together to a universal build.<br><br>With this version, when starting the game the icon appears on the dock for a second then disappears, here's what the system log said:<br><br><pre class=code>
Link (dyld) error:

Symbol not found: _NSDefaultRunLoopMode
  Referenced from: /Users/Username/Desktop/Mahjong Epic/Play Mahjong Epic.app/Contents/MacOS/Game
  Expected in: /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
</pre><br><br>After googling I found this: <a href="http://www.cocoabuilder.com/archive/message/cocoa/2007/11/3/192145" target="_blank">http://www.cocoabuilder.com/archive/message/cocoa/2007/11/3/192145</a><br><br>I also tried to compile both Intel version and PowerPC version using BlitzMax v1.24 but got the same result.<br><br>I've now formatted my Intel Mac and installed Tiger (10.4.10) again, and compiled it with v1.24 just to be sure and sent it off, and this new version seems to work, which might make it sound like it wants a Tiger compile instead of a Leopard one (?).<br><br>The only problem now is when he is adjusting some sound and music options, which the game then quits and he receives this message:<br><br>2007-11-12 17:54:32.250 Game[5173] Cannot load Interface Builder file '/System/Library/Frameworks/AppKit.framework/Resources/English.lproj/NSAlertPanel.nib'<br><br>After googling this, it seems this error might happen when trying to open too many files or too many network connections, so I have no idea why this happens for him, as when he's adjusting the sound its all memory only...<br><br>This problem has only happened for this user so far, and it works perfectly fine on my two Macs and all the customers of all my BlitzMax games so far, so I'm wondering if it does has something todo with a Leopard compile VS Tiger compile, or if it's just this customer having a broken MacOS framework library install...<br><br>Thanks for your help! <br><br></td></tr></table><br>
<a name="825560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pls</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just found out about this 10 minutes ago... compiled a Intel version under leopard to see it crash on tiger machines with exactly the same error (Link (dyld) error: Symbol not found: _NSDefaultRunLoopMode)<br><br> PLS <br><br></td></tr></table><br>
<a name="825582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for testing pls!<br><br>I forgot to test the Leopard Intel compile under Tiger Intel earlier (I just tried it on Tiger PowerPC), but I can also confirm the error happens for me too, on my own Mac, but it just happens on Intel Tigers.<br><br>So seems this is a larger problem that affects more people than I thought. <br><br></td></tr></table><br>
<a name="825584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does Leopard have a new XCode Version or a new Cocoa Iteration? <br><br></td></tr></table><br>
<a name="825592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a bit worrying!  Guess I won't be upgrading to Leopard any time soon.  One question ... do programs compiled on Tiger work in Leopard? <br><br></td></tr></table><br>
<a name="825609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrTAToad</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It has new XCode (V3) and new GCC (V4).<br><br>Programs compiled with Tiger works fine in Leopard, but possibly not the other way around. <br><br></td></tr></table><br>
<a name="825612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora, Leopard comes with Xcode 3.0, Objective-C 2.0 and definitely a completely overhauled Cocoa framework. Since Leopard installs and runs as a true 64 bit system on compatible Macs, you can imagine that under the hood probably nothing stayed untouched and that they also had to break compatibility here and there. <br><br>However, the adoption rate of Leopard is even faster than Tiger's, so the question is if you need to worry that much about backwards compatibility. <br><br>Anyway. On the Apple Developer Connection you can download an Xcode 2.x version for Leopard to maintain backwards-compatibility. Either compile both the PPC and the x86/x64 binaries on Leopard (with Xcode 3) -- or -- compile them both on Tiger or give the Xcode 2.x thing for Leopard a shot.<br><br>Oh, and not everything written for Tiger works on Leopard. iCalamus is an example for a product that does not run on Leopard anymore, and some Adobe apps also have issues with Leopard. <br><br></td></tr></table><br>
<a name="825616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, good catch TMK.  I haven't got Leopard yet but this is well worth knowing.  Maybe this post should be sticky (in the MacOS) forum once the solution is tested? <br><br></td></tr></table><br>
<a name="825638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adobe is the master of getting into Apple Trouble as it seems ... I'm asking myself how long it takes until they see Linux as the more professional OS than OSX (thats the 2nd time within  5 years they destroy the compatibility between versions. Funny enough is that I won a bet with a friend. After the 10.2 -&gt; 10.3 fiasco I actually bet that apple will start doing this on every second major version and tada ... I won ^^) <br><br></td></tr></table><br>
<a name="825655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> JazzieB: It seems like Tiger compiles work fine under Leopard, at least on my Mac and for the users I've had test it :)<br><br>By the way, never mind the "Cannot load Interface Builder file" error I mentioned in the first post, I thought I had fixed that problem but I forgot to add it to this project :) It was just a simple problem of my music/sound slider saving the value to an INI file constantly as you were dragging the slider :) <br><br></td></tr></table><br>
<a name="825726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Winni<br><br><div class="quote"> On the Apple Developer Connection you can download an Xcode 2.x version for Leopard to maintain backwards-compatibility. Either compile both the PPC and the x86/x64 binaries on Leopard (with Xcode 3) -- or -- compile them both on Tiger or give the Xcode 2.x thing for Leopard a shot. <br></div><br><br>XCode Tools 2.5 will indeed allow you to build a backward compatible binary for Tiger under Leopard. As both 2.5 and 3.0 can co-exist, is unclear how you would instruct BlitzMAX which one to use? As indeed is how you would compile binaries for PPC/x86/x64 using XCode 3.<br><br>Apple documentation gives info about xcode-select to identify which xcode to use. ie: "xcode-select -print-path" would return /Developer for xcode 3.0 (default install) and /XCode2.5 for xcode 2.5 (default install)<br><br>You can also set this using "sudo xcode-select -switch xxx" where xxx is the path to the xcode to use. This does not however seem to change any binary output produced from BlitzMAX so I can only guess this is not being used to identify xcode location. <br><br></td></tr></table><br>
<a name="825746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pls</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora: evolution has a price, I actually enjoy the apple upgrades, and could not care less about "old unmaintained binaries"...for devs it's just a matter of compiling their code with the latest xcode every two years.<br><br>In blitmax all everyone needs is just the ___option___ (please don't hardcode this kind of stuff Mark, fix it to whatever you feel is the right option, write a small xcode.readme on it and let it out) to compile against the 10.4u sdk (instead of the 10.5) in xcode 3, something that you can do in xcode projects. <br><br> PLS <br><br></td></tr></table><br>
<a name="825750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> And for users it means beeing enforced to buy upgrades all 2 years as their old apps just could bomb out, are emulated or something else.<br>For the devs at the moment it means 4 versions of each binary, if they start to get funny, you will only be able to buy a 10.4 or 10.5 license, no combo license for both ... <br><br></td></tr></table><br>
<a name="825833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>This is a known issue and I've got a solution, just cleaning some related stuff up.<br><br>In the meantime, build your apps on Tiger and they will work OK on Leopard.<br><br>One other thing to note is that object/archive files built on Leopard are likely to *not* work on Tiger, ever.<br><br>This will only affect people distributing pre-built modules, as apps built on Leopard using archives built on Leopard *will* still work on Tiger! Go figure...<br><br>So if you are distributing pre-built modules, then you should build them on the 'lowest' OS version you want them to work on. <br><br></td></tr></table><br>
<a name="825938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TMK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mark,<br><br>Great to hear that!<br><br>Thank you so much for your great products and support! I love BlitzMax :) <br><br></td></tr></table><br>
<a name="827721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pls</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wish this leopard fixes also get things going regarding universal binaries... Mark once said in the foruns he would look into it by the time 10.5 was out, well it is out, hopefully he will get this hurdle behind.<br><br> PLS <br><br></td></tr></table><br>
<a name="827969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Mark once said in the foruns he would look into it by the time 10.5 was out, well it is out, hopefully he will get this hurdle behind. <br></div><br><br>Maybe he meant BMax 10.5 :) <br><br></td></tr></table><br>
<a name="828186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pls</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perturbatio: I hope not...<br><br> Really, risking presenting this in a over simplistic manner (which is rather unfair to blr/mark) seems to me like using the cross compiler is just a matter of adding the "-arch ppc" and/or "-arch i386" to gcc calls and building the libs/exe, linking them and using the lipo tool to make the universal binaries afterwards.<br><br> This is really important for mac users, as it is the capability of choosing the sdk we want to use (i.e. the logical choise of defaults should be MacOSX10.3.9.sdk for the powerpc versions and MacOSX10.4u.sdk for intel... but it gets a bit more complex than that. MacOSX10.3.9.sdk  does not come with xcode 3, so I believe it is better for brl to use acOSX10.4u.sdk as default for ppc and intel, making system requirements tiger / 10.4 version of OS X... with the option of letting us change that and install the older sdk to release panther apps... And MacOSX105.sdk makes sense if one is going to interface with 10.5 only frameworks and release a 10.5 app/game with exclusive stuff found on leopard). It all comes down to having a flag in bmk that would allow developers to choose the framework for each platform if building universal binaries or at the very least letting us produce the apps in two different/separate compiler runs (one for each architecture) and using lipo manually afterwards.<br><br> Anyway. Blitzmax is in my opinion the best high level option to write 2d games on a mac, followed closely by python+pyglet. I am not even considering things like unity / torque game builder since I _hate_ the interfaces (rather use a simple editor by far).<br> <br> It would become a nice 3d system also if support was added to in a cross platform way to something like ogre (or some other good crossplatform engine) and all binaries where included in the distribution wrapped and working out of the box. Pretty much what happens with all the other libs blitzmax uses, wrapps and distributes. Even minib3d is nice, very usable as long as you don't need to animate meshes, but is lacking a lot of stuff that other options offer like shaders, etc.<br><br> PLS <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
