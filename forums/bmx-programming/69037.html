<!DOCTYPE html><html lang="en" ><head ><title >Screen Shake effect</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Screen Shake effect</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Screen Shake effect</a><br><br>
<a name="771698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi has anyone ever tried to make a screen shake effect?  I can think of threww ways of doing this:<br><br>1) make sure that EVERYTHING you draw has offset x and y added on to their coordinates.  these are normally 0 but change when the screen is shaking.  Problem with this is it would slow down all drawing operations and be a pain to convert existing code.<br><br>2) Use some kinda DX or OpenGL calls to tell the videocard to start rendering at a different top left origin.<br><br>3) Use BMax to tell the video card to use a different top left origin, can this be done? <br><br>thanks! <br><br></td></tr></table><br>
<a name="771699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick example:<br><pre class=code>
MaxOffset:float = 10

Repeat
  SetOrigin Rnd(0-MaxOffset,MaxOffset)
  MaxOffset:-0.1
Until MaxOffset &lt;=0
</pre> <br><br></td></tr></table><br>
<a name="771710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> what and that works for all graphics drawn?  Cool, I'll try it out. <br><br></td></tr></table><br>
<a name="771713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >altitudems</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Changing the origin manually seems more like a hack to me. If this is for a specific project, this may end up being the easiest solution. However I'm guessing you want this to be usable for many types of games. Something even better is a Camera based rendering system.<br><br>Separate in your application World coordinates from Screen coordinates. Possibly handled by a camera type.<br><br>All game logic operates on the world coordinates.<br><br>When things are rendered their position and scale are translated into screen coordinates for the current view/camera.<br><br>The current view/camera can be positioned to point at either a static position in the world or a game entity/player.<br><br>Random velocities can then be given to the camera, which ease back to to the camera/views target position.<br><br>You should find that setting up a system like this enables many other very useful things as well.<br><br>I posted a demo of a very early version of my generic game engine a while back. <br><br></td></tr></table><br>
<a name="771714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> altitudems: Yeah that's basically my option 1.  Most of the things on my screen can do that as they use an additional coord call ScrollX and ScrollY, even the particles.  But a few things I've "manually" added on don't so for now the hack works great.  Thanks GfK <br><br></td></tr></table><br>
<a name="771717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Changing the origin manually seems more like a hack to me. <br></div>Why?  Its five lines of code that works perfectly.<br><br><div class="quote"> Something even better is a Camera based rendering system. &lt;snip&gt; <br></div>You forgot to mention 'unnecessarily over-complicated'. <br><br></td></tr></table><br>
<a name="771730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> make sure that EVERYTHING you draw has offset x and y added on to their coordinates. these are normally 0 but change when the screen is shaking. Problem with this is it would slow down all drawing operations and be a pain to convert existing code. <br></div>No.<br>But as I see that GFK has answsed better than I would have. <br>As to the "Hack" isuse, it depends on how you noramly draw things, I draw everything at/around origin, and simply move/rotate and scale as nessesary, so adding an "arbitary" wobble seems natral to me.<br>Snippit, just to show Im not making it up. (ie its of no value)<pre class=code>Method DM_Draw ()	
      SetOrigin (Self.F_Position.F_X*TLED.GF_ScreenMulti.F_X, Self.F_Position.F_Y*TLED.GF_ScreenMulti.F_Y)
      SetRotation (F_Rotation)
      SetScale (TLED.GF_ScreenMulti.F_X*Self.F_Size,TLED.GF_ScreenMulti.F_Y*Self.F_Size)</pre> <br><br></td></tr></table><br>
<a name="771733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >altitudems</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Essentially yes, it would be doing the same thing, except all you would have to change is the Render/Draw method of your entity/gameobject class. But yes sometimes it doesn't matter if its a hack or not. If it works, it works. Sounds like SetOrigin is easy solution to your problem. <br><br></td></tr></table><br>
<a name="771806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm currently using the offsetx and offsety method and it just works. How would it make all draw commands slower? <br><br></td></tr></table><br>
<a name="771814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> An extra couple of mem lookups/calculations per draw <br><br></td></tr></table><br>
<a name="771821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> But it's already being added, although at a value of zero to everything, so how will it make it slower when it changes value? <br><br></td></tr></table><br>
<a name="771822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the point is it will always make things slower by the same amount, whether it is 0 or not, compared to the same drawing instructions which do not perform this operation. After all how can the computer know the value to be added is 0, without reading the memory? <br><br></td></tr></table><br>
<a name="771827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Czar said. SetOrigin is the way forward for both speed and simplicity. <br><br></td></tr></table><br>
<a name="771899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Going like this:<br><br><pre class=code>Draw Alien,x+xoffset,y+yoffset</pre><br>is bound to be slower than:<br>[code]Draw Alien,x,y[code]<br><br>That's what I meant.  Calling SetOrigin is one call yet if you drew hundreds of particles using the xoffset method it would slow down the drawing due to all the additions. That's the way I viewed it anyway. <br><br></td></tr></table><br>
<a name="771927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use the projection matrix and offset that by a couple of pixels each time. In fact with the matrix you could scale and rotate. Since this is all done on the GFX card you don't get any slowdown.<br><br>The projection matrix works with OGL and DirectX so it'll be compat on all platforms also. <br><br></td></tr></table><br>
<a name="771943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> sounds great but it's too late for this project (probably). <br><br></td></tr></table><br>
<a name="771949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Put a rumble pack under the monitor?  Move to LA/Japan?<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="771956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Well done, you have activated a bonus, please pack your PC carefully, fly to San Andreas, plug the PC in (you may need to purchase a power adapter) and wait for the next earth quake.  When it occurs, press the space bar to resume play and to enjoy the special effect fully.  Thank you." <br><br></td></tr></table><br>
<a name="771959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the bonus pay the travel expenses? You may aswell just shake the moniter yourself. <br><br></td></tr></table><br>
<a name="772015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kronholm</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I could just see that, a bomb goes off in the game and a prompt appears: "Please shake your monitor, press OK when done". <br><br></td></tr></table><br>
<a name="772026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would recommend that you shake the object, and not the screen with an offset.<br><br>If your shaking the screen then everything rumbles, but what if you want to make your rumble more refined and only have objects say, within a blast range to shake, then you wouldnt be able to do it.<br><br>What I would recommend is to build an offset system for each object that's draw, make it a common type and then just extend it to all new types your game uses.<br><br>If your doing 3D, and want the full screen to shake then just shake the camera, if its 2D, just use the offset method.<br><br>I am not sure if having to offset say 1000 particles would be any slower than drawing them without the offset, they still have to be drawn at a given x,y position, the only change is that the x,y changes slightly each time during the rumble.<br><br>I might go test that. <br><br></td></tr></table><br>
<a name="772070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> trust me, arcade style screen shake is what I want :-)  Although interesting I will be using the shake on one game object only in a different scenario. <br><br></td></tr></table><br>
<a name="772083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does the bonus pay the travel expenses? You may aswell just shake the moniter yourself.  <br></div><br><div class="quote"> I could just see that, a bomb goes off in the game and a prompt appears: "Please shake your monitor, press OK when done".  <br></div><br>LOL, nice idea, what we need are some API like ShakeMonitor() or ShakeHouse() or ShakePlayer().<br><br>(If you're using methods like Shake.Monitor() would be nice and easy....) <br><br></td></tr></table><br>
<a name="876917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> how would achieve this if your using 2d, and setorigin is being called once already to distinguish world coords from screen coords and keep the "camera" focused on your entity. <br><br></td></tr></table><br>
<a name="876919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> By adding the values together before passing them to SetOrigin. <br><br></td></tr></table><br>
<a name="876921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DREAM</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> whatever you do not wish to be effected by the shake you could always just add or deduct the Maxoffset off/on too..You may need a flag to tell if shake is on or off to be able to tell when to do this... <br><br></td></tr></table><br>
<a name="876938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> question:<br>if you pass them to set origin, you;d have to have something to bring it back down to 0, so it doesnt keep shaking.<br><br>so if you add a bit of shaking like 0.5 on the x and y axis, to shake your viewable screen left/right up and down slightly, then it has to add subtract, add subtract to makethis happen.<br><br>so your view has to move to the right slightly and also back left again before shaking to the left first.<br><br>question2: is there any way like in my case, to keep your POV fixed on your entity in the centre of the screen? without using set original, but still have it move in "world" coordinates? <br><br></td></tr></table><br>
<a name="876941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't do much 3d, but I would assume theres a code archive for rotating around an object, you could just do random increment/decrement's with boundaries so the camera doesn't spin all the way around. <br><br></td></tr></table><br>
<a name="876954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use SetOrigin. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
