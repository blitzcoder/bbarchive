<!DOCTYPE html><html lang="en" ><head ><title >Memory Leaks - Causes?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory Leaks - Causes?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Memory Leaks - Causes?</a><br><br>
<a name="937206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >thalamus</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed in the Task Manager that my current app's memory requirement keeps trickling upwards, even when the program is idle.<br><br>What are common causes of memory leaks in Blitz? I've tried to use good housekeeping methods but I'm at a loss as to why it's such a memory hog... <br><br></td></tr></table><br>
<a name="937208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume you mean MaxGUI. I just fixed a memory leak in fltkmaxgui, almost to be expected in fltk except that this wasn't fltk code. So there may be some leaks on win/mac too.<br><br>I would suggest you try to track it down by building sample apps and seeing which ones leak, it may be specific to a gadget. <br><br></td></tr></table><br>
<a name="937225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So there may be some leaks on <strike>win/</strike>mac too. <br></div><br>I should hope not. I spent far too much time plugging them! :-p<br><br>Non-GUI related...  The default GC will appear to "leak" a certain amount of memory, when you run an app for a short time. But in reality this is more like having a bin which fills up and is then freed at some point during GC collection.<br>If you run the app for a longer time, you'll see that memory usage levels off.<br><br>Otherwise, you might have circular references in your code, which cause objects you think should be GC'd, to hang around for ever. That is a memory leak in the proper sense. <br><br></td></tr></table><br>
<a name="937293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Non-GUI related... The default GC will appear to "leak" a certain amount of memory, when you run an app for a short time. But in reality this is more like having a bin which fills up and is then freed at some point during GC collection.<br>If you run the app for a longer time, you'll see that memory usage levels off. <br></div> I don't think that should characterized as a "leak" even with quotes because it's really not. I think that just confuses people.<br><br>if your app keeps growing then like Brucey suggested, you most likely have a circular reference somewhere.  that happens when an object points to another object that points back to the first.  in such a case the object's reference count won't go to zero when it's out of scope until you break the chain.  you do that manually by nulling the pointer.<br><br>in my projects I watch for leaks all the time as I'm developing, with code similar to below.  it very simply prints the current allocated mem and the max allocated mem.  if the max continues to climb when I don't expect it to then I have a leak.  running the code below should allow you to see the GC's mem deallocation pattern and how it levels off after many iterations.<br><pre class=code>SuperStrict

Graphics 640,480

Global peakMem:Int
While Not KeyHit(KEY_ESCAPE)
	Cls
	
	Local currentMem:Int = GCMemAlloced()
	If currentMem &gt; peakMem Then peakMem = currentMem
	
	DrawText currentMem+" -&gt; "+peakMem,10,10
	
	Flip
Wend</pre><br>my machine levels off at 87202 <br><br></td></tr></table><br>
<a name="938507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe I may know what this is if a) you are using Vista and b) you are using OpenAL as your sound driver.  I'm just about to post a thread about it... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
