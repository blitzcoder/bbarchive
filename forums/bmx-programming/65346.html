<!DOCTYPE html><html lang="en" ><head ><title >Going through types..</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Going through types..</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Going through types..</a><br><br>
<a name="729582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a BASIC way of iterating through all the objects created into that type, or do I have to use TLists and create another object onto the list every time I create a new type object??<br><br>This is what I mean by BASIC:<br><pre class=code>
For t.type = each type
       ' stuff.
Next
</pre> <br><br></td></tr></table><br>
<a name="729587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In b3d thats the only way you could do it, but in max, you have to do it manually. <br><br></td></tr></table><br>
<a name="729589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
SuperStrict

Type TTest
 Field A:Int
End Type

GLobal MyTestList:TList = CreateList()

For Local I:Int = 0 to 99
  Local T:TTest = New TTest
  T.A = RND(1000)
  MyTestList.Addlast(T)
Next

For Local T:TTest = Eachin MyTestList
 Print T.A
Next
</pre><br><br>A Small Sample, you could more details if you check the tutorials section. <br><br></td></tr></table><br>
<a name="729591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In b3d thats the only way you could do it, but in max, you have to do it manually. <br></div>I know that is the only way you can do it in B3D (and all the earlier basic's).<br><br>Does anyone have an example of doing that in BlitzMax?<br><br>EDIT: Fast posters here :D <br><br></td></tr></table><br>
<a name="729593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know why they changed it? <br><br></td></tr></table><br>
<a name="729596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does anyone know why they changed it?<br> <br></div><br>Because the B3D way is horribly inflexible. You couldn't have multiple lists, you couldn't put different objects in the same list ( which would get a bit screwy with inheritance in BMax anyway. ) The BMax way is far more flexible and far more sensible. <br><br></td></tr></table><br>
<a name="729598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will it hurt to put Global MyTestList:TList = CreateList() inside of the type declaration?<br>Example:<br><pre class=code>
Type TMyType
	Global MyTestList:TList = New TList
	Field x:Int, y:Int, z:Int
End Type
</pre><br><br>And, can I get an example for removing an object from the list when the object is deleted? <br><br></td></tr></table><br>
<a name="729601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Will it hurt to put Global MyTestList:TList = CreateList() inside of the type declaration? <br></div><br>No. Lots of people do it that way. I don't do it because I find it more readable to do it elsewhere, but there's nothing wrong with your method. You can put a MyTestList.AddLast(Self) in the New() method so that it's called automatically on object creation if you like.<br><br><div class="quote"> And, can i get an example for removing the objects from the list when i delete the type?  <br></div><br>You can't delete objects. They are deleted automatically when they go out of scope, and they won't go out of scope all the time they're in the list.<br><br>To get something similar to B3D type usage, try something like this :<br><br><pre class=code>
Type MyType

   Global List:TList
   Field Link:TLink

   Method New()
      If List=Null
         List=New TList
      End If
      Link=List.AddLast(Self)
   End Method
   
   Method Destroy()
      Link.Remove()
   End Method
End Type
</pre><br><br>Keeping the TLink returned by the AddLast() method saves you looking through the list when you want to destroy it. Keep in mind, however, that your Destroy() method will only work if there are no other references to your object. If you add it to other lists, or put it in the fields of other objects ( parents/children for example ) then you will need to nullify those reference in your Destroy() method as well. <br><br></td></tr></table><br>
<a name="729602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try something like this<br><br><br>type mytype<br><br>   global list:TList = createlist()<br><br>   method new()<br>            list.addlast( self )<br>   end method<br>   method delete()<br>            list.remove( self )<br>   end method<br><br>end type<br><br><br>on each type<br><br>-Beaten by 4 seconds. <br><br></td></tr></table><br>
<a name="729609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you delete a type? (t.remove?)<br><br><br><div class="quote"> .. nullify those reference .. <br></div><br><br>If I null all the fields will it remove itself? <br><br></td></tr></table><br>
<a name="729616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh!! I get this error:<br><div class="quote"> Unable to convert from 'Type' to 'Object' <br></div>when I run this code:<br><pre class=code>
t.Link = List.AddLast(Self)
</pre><br><br>EDIT: I am using <br><pre class=code>
Global List:TList
Field Link:TLink
</pre><br>as my field declarations. <br><br></td></tr></table><br>
<a name="729617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> please post a runnable piece of code <br><br></td></tr></table><br>
<a name="729618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres the full type...<br><br>Edit: Problem Fixed. <br><br></td></tr></table><br>
<a name="729619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If I null all the fields will it remove itself?<br> <br></div><br>No, references to the object.<br><br>IE: <br><br><pre class=code>
A:MyType=New MyType '&lt;&lt; Now A has a reference to our object.
A=Null ' &lt;&lt; Now it doesn't. We've nulled it.
</pre><br><br><div class="quote"> Ahh!! i get this error: Unable to convert from 'Type' to 'Object', when i run this code: <br></div><br>Where did t come from? Where is it declared? If you're doing it in the New() method as I suggested, the variable you're assigning the object to has not yet been declared and does not have scope anyway. You only need Link=List.AddLast(Self) <br><br></td></tr></table><br>
<a name="729623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does anyone know why they changed it? <br></div>There is a very good reason: BlitzMax uses a garbage collector, and Delete doesn't exist anymore. If every object was implicitely added to a global list, they would always be reachable and thus never removed from memory.<br>Granted, such a global list could have been kept for convenience if the garbage collector simply ignored references in that global list, but that would introduce a serious indeterminism problem : you'd never know if an object in that list would still be there the next moment, as the garbage collector could collect it just about when it wants. <br><br></td></tr></table><br>
<a name="729627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You only need Link=List.AddLast(Self) <br></div>Ohh.. I was putting it in after I created the object. It is fixed now, I put Link = List.AddLast(Self) inside the New() method. <br><br></td></tr></table><br>
<a name="729665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can I remove an object within a type (like the Blitz command 'Delete')? <br><br></td></tr></table><br>
<a name="729688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remove it from any list it is on and then allow any (edited from 'the') pointer to go out of scope or 'null' it. <br><br></td></tr></table><br>
<a name="729690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Curtastic</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> To remove it from your list use:<br>List.Remove(object)<br><br>Object aren't within types in blitzmax. The type is just what kind of variable it is. Its like saying "local x:int" how can I remove x from within int? err you don't. Just remove it from any tlists that x is in. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
