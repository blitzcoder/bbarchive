<!DOCTYPE html><html lang="en" ><head ><title >Abuse of the TMap?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Abuse of the TMap?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Abuse of the TMap?</a><br><br>
<a name="1028451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >beanage</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey,<br><br>I recently discovered the use of the "Compare" Method, and had a brief view into the TMap code. I always noticed, that Objects in the Map are "sorted" in some obfuscating way. Until recently, when I, just for testing, overrided the "compare" Method with custom one of mine, and tadaaa!<br><br>Suddenly I could use the TMap not only to .. map stuff, but even to sort it! And since I just need a good sorting technique, where the sorting should ideally take place <i>alongside</i> with the inserting, I'd like to know, how much of a big deal would that "map sorting" be (regarding speed, mem etc)?<br><br>Here is my test:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Type value
	
	Field x:Double
	
	Function Create:value(x:Double)
		Local newv:value=New value
		newv.x = x
		Return newv
	End Function
	
	Method Compare:Int( b:Object )
		If value(b)
			If x&lt;value(b).x
				Return -1
			ElseIf x&gt;value(b).x
				Return 1
			End If
		
		End If
		Return 0
	End Method

End Type

Local Map:TMap = CreateMap()

For Local i_:Int = 0 To 10
	Local x:Int = Rand(0,10)
	MapInsert Map, value.Create(x), String(x)
Next

For Local s:String = EachIn MapValues(Map)
	Print s
Next
</textarea> <br><br></td></tr></table><br>
<a name="1028452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Abuse of the TMap? <br></div>Impossible. <br><br></td></tr></table><br>
<a name="1028458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I always noted, that Objects in the Map are "sorted" in some obfuscating way <br></div><br><br>Not really obfuscating. TMap uses a Red-black Tree IIRC: <a href="http://en.wikipedia.org/wiki/Red-black_tree" target="_blank">http://en.wikipedia.org/wiki/Red-black_tree</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
