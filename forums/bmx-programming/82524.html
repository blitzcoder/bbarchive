<!DOCTYPE html><html lang="en" ><head ><title >Unicode support arrives (in SVN)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unicode support arrives (in SVN)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Unicode support arrives (in SVN)</a><br><br>
<a name="930825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The SVN version of Blitzmax now supports Unicode filesystems.<br><br>If you have problems, <u>remembering that SVN is "in development"</u>, then feel free to shoot the messenger, as it is all my fault.<br><br>I'm 99% sure I've covered everything, but you know how it goes... so if stuff stops working, you should be vocal about it. (although verbal abuse should remain at your end of the keyboard) :-)<br><br>BlitzMax compiling is NOT Unicode friendly yet. So if you try to build something in a non-ASCII folder, don't expect to get very far ;-)<br>Hopefully, it'll all filter down into the toolset over time.<br><br>For pre Win2k/NT systems, you may need to include Unicows, but Seb knows more about that than me, so I think he should explain what that's all about. (Go Seb!)<br><br>Otherwise, everything should work as it did before. ie. you shouldn't notice any difference. Obviously if your app doesn't work at all now, then there's a bug somewhere :-)<br><br><br><br>Enjoy<br><br>:o) <br><br></td></tr></table><br>
<a name="930829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice!<br><br>I think it's time they issue you one of these:<br><br><img src="http://www.xlsior.org/temp/brucey.jpg"> <br><br></td></tr></table><br>
<a name="930833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> EDIT: Hmmmm... some problems with the new version.<br><br>The Threading version of MaxGUI fails now building with the following error:<br><br><div class="quote"> c:/code/blitzmax/mod/maxgui.mod/win32maxgui.mod/win32gui/win32button.cpp: In constructor `Win32Button::Win32Button(BBGroup*, int)':<br>c:/code/blitzmax/mod/maxgui.mod/win32maxgui.mod/win32gui/win32button.cpp:21: error: cannot convert `const wchar_t*' to `const CHAR*' for argument `2' to `HWND__* CreateWindowExA(DWORD, const CHAR*, const CHAR*, DWORD, int, int, int, int, HWND__*, HMENU__*, HINSTANCE__*, void*)'<br><br>Build Error: failed to compile c:/code/blitzmax/mod/maxgui.mod/win32maxgui.mod/win32gui/win32button.cpp<br> <br></div><br><br>I wiped the MaxGUI folder and re-downloaded it, but the build still fails with the same error.   Any ideas? :-? <br><br></td></tr></table><br>
<a name="930837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Any ideas? <br></div><br><br>in brl.mod/blitz.mod/blitz.h<br><br>try adding :<br><pre class=code>
#define UNICODE
</pre><br>before this<br><pre class=code>
#ifdef THREADED
#include "bdwgc/include/gc.h"
#endif
</pre><br><br>And let me know if that solves it. <br><br></td></tr></table><br>
<a name="930843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, that appears to have fixed it, with that addition it compiled without errors.<br><br>Thanks again! <br><br></td></tr></table><br>
<a name="930862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You sir, are my hero. <br><br></td></tr></table><br>
<a name="931072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://download.newstargames.com/misc/SuperBrucey.jpg"> <br><br></td></tr></table><br>
<a name="931140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hold on, Brucey can't be *both* Superman and Batman, that's just silly. <br><br></td></tr></table><br>
<a name="931142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...and anyways... I don't really have time to be saving the world. Got modules to work on!! :-p <br><br></td></tr></table><br>
<a name="931207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hold on, Brucey can't be *both* Superman and Batman, that's just silly.  <br></div><br><br>It's surprising what brucey can pull off =p <br><br></td></tr></table><br>
<a name="932473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kurator</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi,<br><br>unfortunately i got the same error, but bruceys solution did not fix the problem, bmk throws again the error<br><br>any suggestions? <br><br></td></tr></table><br>
<a name="932474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should solve the issue. Otherwise you must have a different error? <br><br></td></tr></table><br>
<a name="932488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kurator</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> D:/BlitzMaxSNV/dev/main/mod/maxgui.mod/win32maxgui.mod/win32gui/win32button.cpp:<br> In constructor `Win32Button::Win32Button(BBGroup*, int)':<br>D:/BlitzMaxSNV/dev/main/mod/maxgui.mod/win32maxgui.mod/win32gui/win32button.cpp:<br>21: error: cannot convert `const char*' to `const WCHAR*' for argument `2' to `H<br>WND__* CreateWindowExW(DWORD, const WCHAR*, const WCHAR*, DWORD, int, int, int,<br>int, HWND__*, HMENU__*, HINSTANCE__*, void*)'<br>Build Error: failed to compile D:/BlitzMaxSNV/dev/main/mod/maxgui.mod/win32maxgu<br>i.mod/win32gui/win32button.cpp<br>D:\BlitzMaxSNV\dev\main\bin&gt; <br></div><br><br>it happens both on building threaded or non threaded<br><br><br>This ist beginning of my modified blitz.h<br><pre class=code>
#ifndef BLITZ_H
#define BLITZ_H


#include &lt;pub.mod/stdc.mod/stdc.h&gt;

#define UNICODE
#ifdef THREADED
#include "bdwgc/include/gc.h"
#endif
</pre><br><br>MinGW Version<br><pre class=code>D:\BlitzMaxSNV\dev\main\bin&gt;gcc --version
gcc (GCC) 3.4.5 (mingw-vista special r3)</pre> <br><br></td></tr></table><br>
<a name="932491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you sync'd your MaxGUI with the latest in SVN? <br><br></td></tr></table><br>
<a name="932507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kurator</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, many thanks for the tipp - it is in the same dir, but has to be updated seperately<br><br>after syncing it worked flawlessy :) <br><br></td></tr></table><br>
<a name="935171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>Just noticed that, after a "Rebuild All Modules" on Windows, MaxIDE now chokes at start-up complaining about not being able to find the BlitzMax version which means that <b>CreateProcess()</b> is failing to start the 'bcc' process.<br><br>Looks like <b>Pub.FreeProcess</b> perhaps needs some Brucey-love. Replacing the fdProcess declaration in <i>freeprocess.bmx</i> with...<br><br><pre class=code>?Win32
Function fdProcess(exe$w,in_fd Ptr,out_fd Ptr,err_fd Ptr,flags)="fdProcess"
?Not Win32
Function fdProcess(exe$z,in_fd Ptr,out_fd Ptr,err_fd Ptr,flags)="fdProcess"
?</pre>...seems to fix this particular case, but the <b>fdRead()</b> and <b>fdWrite()</b> stuff probably needs some attention and the *nix declarations probably want UTF8'ing. ;-)<br><br>Any thoughts? <br><br></td></tr></table><br>
<a name="935189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh...  it's complicated..<br><br>ReadFile() - which is used internally, will be working on wchar_t, I guess... which complicates things somewhat probably.<br><br>Since <b>Skid</b> is the mastermind behind this, perhaps he has an idea of the best way to handle this.<br><br>I wouldn't want the API to be different (ie. Short Ptr instead of Byte Ptr) for Read() or Write().<br>Perhaps internally it wants to use a wchar_t buffer and copy the byte data??? <br><br></td></tr></table><br>
<a name="935191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unless we don't care what the bytes are - since it may well be binary data... and you don't want to mess with it.<br>Leave it up to the user to worry about the data stream?<br><br>fdProcess of course needs the fix. <br><br></td></tr></table><br>
<a name="935193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> After further review, I think we can get away with not changing fdread and fdwrite...  (heh.. at least until it doesn't work!) :-p <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
