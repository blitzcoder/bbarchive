<!DOCTYPE html><html lang="en" ><head ><title >Redi: OpenAL.mod</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Redi: OpenAL.mod</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Redi: OpenAL.mod</a><br><br>
<a name="714473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a request to make for your OpenAL module.  Currently, if OpenAL is not installed, the application crashes, even if no OpenAL commands are called.  Could you please add a check, so that the sounds just doesn't work if OpenAL is not found, instead of crashing? <br><br></td></tr></table><br>
<a name="714475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it crash or do you get a window saying it cant find the dll?<br><br>That window is generated by OpenAL32.lib, I dont see how to get around that one.<br><br>Thinking... <br><br></td></tr></table><br>
<a name="714478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get an error notification with the following message:<br><br>"This application has failed to start because openal32.dll was not found.  Re-installing the application may fix this problem." <br><br></td></tr></table><br>
<a name="714479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I think we're stuck with this one, even if I manage to get around the OpenAL error window (not that I know how), any calls to its functions will result in "undefined reference" errors.<br><br>But if anyone knows better... <br><br></td></tr></table><br>
<a name="714481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a directsound wrapper in maxmod, if thats any help, I take it your after 3D sound? <br><br></td></tr></table><br>
<a name="714482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there an OpenAL initialization function?<br><br>I use OpenAL because of the EAX effects. <br><br></td></tr></table><br>
<a name="714483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, only alcOpenDevice.<br><br>EDIT - EAX can be done with directsound, but I havent tried that yet<br><br>There is also built in effects... <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_c/Standard_Effects.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_c/Standard_Effects.asp</a> <br><br></td></tr></table><br>
<a name="714485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not add a check for the actual dll file before calling any OpenAL commands?:<br><pre class=code>openallibfile$=getenv_("WINDIR")+"\System32\OpenAL32.dll"
If FileType(openallibfile)=1
	Notify "OpenAL is installed."
Else
	Notify "OpenAL is not installed."
EndIf</pre> <br><br></td></tr></table><br>
<a name="714486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> AFAIK max wont allow us to check anything *before* an import :(<br><br>but that would still leave us with "undefined reference" error, and the only way around that would be to wrap every function with something like <br><pre class=code>
If dll Then CallFunction
</pre><br><br>*EDIT*<br><br>I think i've lost the plot... its good that max wont allow imports like that because it would make the app based on the machine its compiled on. <br><br></td></tr></table><br>
<a name="714493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cant you dynamicly load the Lib with LoadLibary and GetProcAddress.  The Lib is statically binding the DLL to your app thats gonna fail at load time.  Its not Open AL that gives the Error thats the OS unable to load the DLL when the DLL loads.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="714494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Budman, my mistake I thought it was AL lib producing that, I'll have a go. <br><br></td></tr></table><br>
<a name="714499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, I dont know, that would completely ruin it from a cross-platform point of view.<br><br>I think its probably better to just ship with an openal installer. <br><br></td></tr></table><br>
<a name="714501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you post the source? <br><br></td></tr></table><br>
<a name="714502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> click forum in my sig <br><br></td></tr></table><br>
<a name="714503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. <br><br></td></tr></table><br>
<a name="714510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> So here's what I did (not tested yet, but should be easy to implement:<br><pre class=code>Global AL_MAINCONTEXT
Global AL_MAINDEVICE

Const AL_INVALID                        :Int = -1
Const AL_NONE                           :Int = 0
Const AL_FALSE                          :Int = 0
Const AL_TRUE                           :Int = 1
Const AL_SOURCE_RELATIVE                :Int = $202
Const AL_CONE_INNER_ANGLE               :Int = $1001
Const AL_CONE_OUTER_ANGLE               :Int = $1002
Const AL_PITCH                          :Int = $1003
Const AL_POSITION                       :Int = $1004
Const AL_DIRECTION                      :Int = $1005
Const AL_VELOCITY                       :Int = $1006
Const AL_LOOPING                        :Int = $1007
Const AL_BUFFER                         :Int = $1009
Const AL_GAIN                           :Int = $100A
Const AL_MIN_GAIN                       :Int = $100D
Const AL_MAX_GAIN                       :Int = $100E
Const AL_ORIENTATION                    :Int = $100F
Const AL_CHANNEL_MASK                   :Int = $3000
Const AL_SOURCE_STATE                   :Int = $1010
Const AL_INITIAL                        :Int = $1011
Const AL_PLAYING                        :Int = $1012
Const AL_PAUSED                         :Int = $1013
Const AL_STOPPED                        :Int = $1014
Const AL_BUFFERS_QUEUED                 :Int = $1015
Const AL_BUFFERS_PROCESSED              :Int = $1016
Const AL_SEC_OFFSET                     :Int = $1024
Const AL_SAMPLE_OFFSET                  :Int = $1025
Const AL_BYTE_OFFSET                    :Int = $1026
Const AL_SOURCE_TYPE                    :Int = $1027
Const AL_STATIC                         :Int = $1028
Const AL_STREAMING                      :Int = $1029
Const AL_UNDETERMINED                   :Int = $1030
Const AL_FORMAT_MONO8                   :Int = $1100
Const AL_FORMAT_MONO16                  :Int = $1101
Const AL_FORMAT_STEREO8                 :Int = $1102
Const AL_FORMAT_STEREO16                :Int = $1103
Const AL_REFERENCE_DISTANCE             :Int = $1020
Const AL_ROLLOFF_FACTOR                 :Int = $1021
Const AL_CONE_OUTER_GAIN                :Int = $1022
Const AL_MAX_DISTANCE                   :Int = $1023
Const AL_FREQUENCY                      :Int = $2001
Const AL_BITS                           :Int = $2002
Const AL_CHANNELS                       :Int = $2003
Const AL_SIZE                           :Int = $2004
Const AL_UNUSED                         :Int = $2010
Const AL_PENDING                        :Int = $2011
Const AL_PROCESSED                      :Int = $2012
Const AL_NO_ERROR                       :Int = AL_FALSE
Const AL_INVALID_NAME                   :Int = $A001
Const AL_ILLEGAL_ENUM                   :Int = $A002
Const AL_INVALID_ENUM                   :Int = $A002
Const AL_INVALID_VALUE                  :Int = $A003
Const AL_ILLEGAL_COMMAND                :Int = $A004
Const AL_INVALID_OPERATION              :Int = $A004
Const AL_OUT_OF_MEMORY                  :Int = $A005
Const AL_VENDOR                         :Int = $B001
Const AL_VERSION                        :Int = $B002
Const AL_RENDERER                       :Int = $B003
Const AL_EXTENSIONS                     :Int = $B004
Const AL_DOPPLER_FACTOR                 :Int = $C000
Const AL_DOPPLER_VELOCITY               :Int = $C001
Const AL_SPEED_OF_SOUND                 :Int = $C003
Const AL_DISTANCE_MODEL                 :Int = $D000
Const AL_INVERSE_DISTANCE               :Int = $D001
Const AL_INVERSE_DISTANCE_CLAMPED       :Int = $D002
Const AL_LINEAR_DISTANCE                :Int = $D003
Const AL_LINEAR_DISTANCE_CLAMPED        :Int = $D004
Const AL_EXPONENT_DISTANCE              :Int = $D005
Const AL_EXPONENT_DISTANCE_CLAMPED      :Int = $D006

Const ALC_INVALID                       :Int = 0
Const ALC_FALSE                         :Int = 0
Const ALC_TRUE                          :Int = 1
Const ALC_FREQUENCY                     :Int = $1007
Const ALC_REFRESH                       :Int = $1008
Const ALC_SYNC                          :Int = $1009
Const ALC_NO_ERROR                      :Int = ALC_FALSE
Const ALC_INVALID_DEVICE                :Int = $A001
Const ALC_INVALID_CONTEXT               :Int = $A002
Const ALC_INVALID_ENUM                  :Int = $A003
Const ALC_INVALID_VALUE                 :Int = $A004
Const ALC_OUT_OF_MEMORY                 :Int = $A005
Const ALC_DEFAULT_DEVICE_SPECIFIER      :Int = $1004
Const ALC_DEVICE_SPECIFIER              :Int = $1005
Const ALC_EXTENSIONS                    :Int = $1006
Const ALC_MAJOR_VERSION                 :Int = $1000
Const ALC_MINOR_VERSION                 :Int = $1001
Const ALC_ATTRIBUTES_SIZE               :Int = $1002
Const ALC_ALL_ATTRIBUTES                :Int = $1003

Global alGenBuffers%(n,buffers:Int Ptr)
Global alBufferData(buffer:Int,format:Int,data:Int,size:Int,freq:Int)
Global alGenSources(n:Int,sources:Byte Ptr)
Global alSource3f(source:Int,pname:Int,v1:Float,v2:Float,v3:Float)
Global alSourcei(Source:Int,pname:Int,value:Int)
Global alSourcef(source:Int,pname:Int,value:Float)
Global alSourcePlay(source:Int)
Global alcCloseDevice (Dev:Int)
Global alcDestroyContext(alcHandle:Int)
Global alcCreateContext:Int(device:Int,attrlist:Byte Ptr)

OnEnd EndOpenAL

Function InitOpenAL:Int()
	Select OPENAL_HLIB
		Case -1
			Return False
		Default
			Return True
	EndSelect
	OPENAL_HLIB=loadlibrary("OpenAL32.dll")
	If Not OPENAL_HLIB
		OPENAL_HLIB=-1
		ProgramLog "Failed to load OpenAL32.dll.",1
		Return False
	EndIf
	
	alcCreateContext=getprocaddress(OPENAL_HLIB,"alcCreateContext")
	alGenBuffers=getprocaddress(OPENAL_HLIB,"alGenBuffers")
	alBufferData=getprocaddress(OPENAL_HLIB,"alBufferData")
	alGenSources=getprocaddress(OPENAL_HLIB,"alGenSources")
	alSourcei=getprocaddress(OPENAL_HLIB,"alSourcei")
	alSourcef=getprocaddress(OPENAL_HLIB,"alSourcef")
	alSource3f=getprocaddress(OPENAL_HLIB,"alSource3f")
	alSourcePlay=getprocaddress(OPENAL_HLIB,"alSourcePlay")	
	alcCloseDevice =getprocaddress(OPENAL_HLIB,"alcCloseDevice ")	
	alcDestroyContext=getprocaddress(OPENAL_HLIB,"alcDestroyContext")
	
	AL_MAINDEVICE=alcOpenDevice(Null)
	AL_MAINCONTEXT=alcCreateContext(ALDevice,AL_MAINDEVICE)
	
	Return True
EndFunction

Function EndOpenAL()
	If OPENAL_HLIB
		alcDestroyContext AL_MAINCONTEXT
		alcCloseDevice AL_MAINDEVICE
		freelibrary OPENAL_HLIB
		OPENAL_HLIB=0
	EndIf
EndFunction</pre> <br><br></td></tr></table><br>
<a name="714537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweet, should do the trick, but restricts it to windows.<br><br>Good luck mate. <br><br></td></tr></table><br>
<a name="714793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please see this forum thread:<br><a href="http://redi.me.uk/forum/viewtopic.php?p=28&amp;sid=d3b3845fd028e3ebbc22f1c06f770afe#28" target="_blank">http://redi.me.uk/forum/viewtopic.php?p=28&amp;sid=d3b3845fd028e3ebbc22f1c06f770afe#28</a> <br><br></td></tr></table><br>
<a name="714816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you still have questions after reading the sdk docs, I'll help out as much as I can, but as I said, I haven't played about with EAX much really. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
