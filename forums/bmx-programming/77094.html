<!DOCTYPE html><html lang="en" ><head ><title >Odd Keyboard/Mouse bug?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Odd Keyboard/Mouse bug?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Odd Keyboard/Mouse bug?</a><br><br>
<a name="862493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't want to post this in the Bug Reports section because it is impossible to duplicate, but I was hoping that someone else might be able to confirm this.<br><br>With my game, several people have reported that the mouse stops responding to clicks (MouseDown) and the keyboard stops responding to key presses (KeyDown) when their system has been up for a while- i.e. several days or weeks without rebooting.<br><br>I have dealt with this now on all 3 platforms (Windows, MacOS, Linux) where people have complained that their mouse/keyboard has stopped responding in the game, and so far <u>all</u> of them have reported not having rebooted their computer for a long period of time, and upon rebooting their problem is fixed. In fact, this was my very first support issue upon release back in November, and it's the only issue that repeatedly comes up every few weeks with new users.<br><br>Anyone else seen this? <br><br></td></tr></table><br>
<a name="862502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Fraid not but I would suggest it has something to do with the millisecs counter wrapping. <br>Is it possible you use millisecs() to slow-down or time user input? <br><br></td></tr></table><br>
<a name="862526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> tonyg: no, I don't use anything like that.<br><br>Also, I should clarify that it's not that they have <i>my</i> game up for days or weeks constantly, but rather they just haven't rebooted their computer for that amount of time, then when they start the game, the mouse and/or keyboard experiences this odd behavior. <br><br></td></tr></table><br>
<a name="862533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Millisecs() is taken from when the system is booted so is not dependant on your game. Because it is held in an int the value wraps after about 25 days (I think).<br>That's the only thing I can think of that is dependant on how long a machine has not been rebooted for (other than memory leaks) <br><br></td></tr></table><br>
<a name="862539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm...good point. I'll thoroughly review my code again. <br><br></td></tr></table><br>
<a name="862583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it means their computer has been on for more than 24 days (or something like that).  They will either need to reboot, or you will need to redo the way you are using millisecs() within your program. <br><br></td></tr></table><br>
<a name="864970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see a couple places where my use of millisecs() may be causing an issue. Will using a LONG overcome this quirk?<br><br>i.e. Global Time:Long = Millisecs() <br><br></td></tr></table><br>
<a name="864973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> No.<br><br>If Millisecs() returns a negative value, then that's what Time will contain.<br><br>Your best resolution is to use a timer for these calculations, instead of Millisecs().  You can reset the timer periodically to prevent it from going to stupidly high values, or set its frequency lower - there's no point having it ticking a thousand times a second if 5 ticks a second will do the same job. <br><br></td></tr></table><br>
<a name="872211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a similar problem, but rebooting did not help at all.<br><br>The game starts and runs just fine for a couple of seconds, then it behaves like my last keypress got stuck. <br>For example, I could press the right arrow to make the character go right, when I later release the key it still moves right. If I during this time press left, it continues to move right for several seconds. Then it starts to move left.<br>It's like it notices the keypresses, but keyhit/keydown isn't told about this for quite some time. It can literarly take about half a minute to close the game, since ESC is also affected by this.<br><br>I also noticed that while the game does this, every application ignores the mouse buttons or keys. I can't even click on the Start button.<br><br>Anyone got any ideas? Like I said, a reboot didn't cure this. :(<br>Thankful for any help! <br><br></td></tr></table><br>
<a name="872976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> removed everything related to timing and the keyboard still stops to responds properly.<br><br>No one have any idea? :P <br><br></td></tr></table><br>
<a name="872978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dunno.  Try adding FlushKeys() at the end of each loop? <br><br></td></tr></table><br>
<a name="872988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Added flushkeys to the end of the main loop and that made things worse.<br>I also tried to add a short delay (10 milliseconds) at that made it play as normal again, except that it's now quite jerky. <br><br>I also tried to add a pollsystem but that had no effect whatsoever. <br><br></td></tr></table><br>
<a name="872994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try <b>Delay 1</b>?<br><br>Are you using any form of timing at all in your code?  Code *can* run too fast for its own good. <br><br></td></tr></table><br>
<a name="873003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delay 1 worked a lot better, tried it as soon as I had posted my previous message.<br>But it feels so ugly. And why is it even needed? And why doesn't pollsystem work instead? Doesn't delay call it anyway?<br><br>I do have some timing code in there. Didn't write it myself but it looks to be based on the code found in many of the discussions found here. The issue I was having occurred both with and without the timing code. <br><br>But other projects not using any timing at all works just fine. And why was I'm not able to press ctrl+alt+del while the game was behaving like this?<br><br>Odd stuff. <br><br></td></tr></table><br>
<a name="873004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its impossible to say without seeing any code.<br><br>Have you tried it on a different PC to rule out any hardware issues? <br><br></td></tr></table><br>
<a name="873012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I havent tried it on another computer, but have ruled out hardware issues/buggy drivers because other games and apps runs just fine. Even when they aren't using any timing code. <br><br>Could show parts of the  code, but it's basically just a loop that calls an update function and a render function. The player input is done using keydown() in a TPlayer type, called by the update function. <br>That's why the problem was really irritating, nothing was notably different from other projects. :P<br><br><br>Anyway. Thanks for helping. It works and don't seem too jerky so I think it will have to do for the time being. Got a deadline and lots of graphics and levels to add. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
