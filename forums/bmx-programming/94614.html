<!DOCTYPE html><html lang="en" ><head ><title >saving image bigger than screen..</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >saving image bigger than screen..</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >saving image bigger than screen..</a><br><br>
<a name="1085912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing a program which makes it possible to generate playing card art from defined text &amp; image files. <br><br>I'd like to do the following:<br>- draw stuff on screen/buffer in bmax<br>- save all drawn stuff as png image (1050 x 1450 size)<br><br>I'm aware of the following:<br><pre class=code>
Local img:TPixmap = GrabPixmap(0, 0, Self._cardWidth, Self._cardHeight)
SavePixmapPNG(img, "../deck-processed/" + filename, Self._compression)
</pre><br><br>I have 1050 x 1450 card background image which I draw on screen, but part of it gets clipped off. When I save, all pixels under about 1080ish or so are black. My desktop resolution is 1920 x 1080. <br><br>I tried to set bigger viewport:<br><pre class=code>
Local resolutionY:Int = 1450
Local resolutionX:Int = 1050
Graphics(resolutionX, resolutionY)

SetViewport(0, 0, resolutionX * 2, resolutionY * 2)
</pre><br><br>But it didn't do anything good even though it says that setViewport defines what gets clipped.<br><br>Looks like for some reason everything bigger than my screen resolution gets clipped.<br><br><b>Any ideas for solutions on how to save bigger PNG than screen resolution allows?</b><br><br><i>(I already rendered my card art 90 degrees rotated, this way I got 1450x1050 images exported, which I can then rotate in Windows... but it's bit lame :))</i> <br><br></td></tr></table><br>
<a name="1085914"></a>

<a name="1085915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why can't you just create the images in a pixmap, avoiding the need to use GrabPixmap()?  Granted it won't be particularly fast, but it'll work and it'll be completely independent of any graphics object.<br><br>There is code in the code archives to draw one pixmap onto another while retaining alpha.  Other than that you can use pixmap.paste().<br><br>[edit] Also, why do they need to be so big?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1085917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> "create the images in a pixmap"... you mean, instead of "LoadImage" use "LoadPixmapPNG"? (+archive code, I guess it's this: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2658)" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2658)</a><br><br>I have existing "deck-background.png" which I need to load.<br><br>Then I also need font (using "loadImageFont("impact.ttf"....) which is needed to write stuff on cards. How could I do this with pixmap?<br><br>What pixmap.paste(source, x,y) does?<br><br>And cards need to be (at least) this big since they are used to print physical products. Smaller images would mean poorer quality on printed products. <br><br></td></tr></table><br>
<a name="1085923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Avoid doing it through the onscreen method (although you could use an FBO ), and work directly with Pixmaps.<br><br>1. If all you want is to paste new images onto a Pixmap, there's a simple way to do this if you search the code archives: PixmapOnPixmap.<br>There are several libraries, I'd use the one where they offer scaling and rotation built in. Since fonts are just images, this could be a solution.<br><a href="http://blitzmax.com/codearcs/codearcs.php?code=2411" target="_blank">http://blitzmax.com/codearcs/codearcs.php?code=2411</a><br><br>2. Creating graphics directly to Pixmaps is a bigger task. There are some libraries out there, but I would recommend learning how to work with Cairo, and use Brucey's Cairo wrapper. It'll take work, but not impossible. <br><br></td></tr></table><br>
<a name="1085925"></a>

<a name="1085926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/Account/showuser.php?id=4116" target="_blank">gameproducer</a> wrote:<div class="quote"> And cards need to be (at least) this big since they are used to print physical products. Smaller images would mean poorer quality on printed products. <br></div>Then why don't you just use Photoshop or equivalent?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1085972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br><br>@Adam: I try that #1.<br><br>@Oddball: I did that for the first run of the deck, it took quite a bit of time. Changing texts in one external file is easier/faster than going through 100-150 layers. <br><br></td></tr></table><br>
<a name="1085996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had to overcome this in TimelineFX because some people wanted to save animation frames larger then 512x512. My way round it was pretty simple, I just grabbed the visible screen into a pixmap and pasted that into the larger pixmap, then rendered the screen again but offset the image to draw the rest on the screen and grabbed the rest and pasted that into the larger pixmap and so on as many times as is necessary.<br><br>But if you don't need any of the opengl/directx drawing stuff, like alpha blending and what-not then it might just be easier for you to work directly with pixmaps as was mentioned. <br><br></td></tr></table><br>
<a name="1086023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need alpha, and Pete - I just got the same idea before reading your text. In my case, this will be the best way to do it.<br><br>Thanks everybody again. <br><br></td></tr></table><br>
<a name="1086058"></a>

<a name="1086059"></a>

<a name="1086060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> if they are just images why don't you paste directly to a pixmap?<br><pre class=code>
local destPixmap:Tpixmap = CreatePixmap(resolutionX,resolutiony,PF_RGBA8888)
local sourcePixmap:Tpixmap = LockImage(cardImg)
destpixmap.paste(sourcepixmap,x,y)
</pre><br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1086125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> because I need text as well, and pixmaps won't retain alpha. So, this is easiest &amp; bestest solution for me to draw few screens, grab pixmaps, combine grabbed to one big pixmap and save as png. <br><br></td></tr></table><br>
<a name="1086127"></a>

<a name="1086128"></a>

<a name="1086129"></a>

<a name="1086130"></a>

<a name="1086133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> acutally it's the other way around. GrabPixmap don't retain alpha. It's added to it as 255 regardless of what it used to be.<br>text can also be pasted to pixmap just not rotated. You just need to know how it works:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2736" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2736</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1086185"></a>

<a name="1086192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, well, not needing that anymore unless current method gets slow, but thanks for the link. Perhaps helps someone else. <br><br>This one is working perfectly now.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
