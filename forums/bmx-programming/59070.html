<!DOCTYPE html><html lang="en" ><head ><title >Do you know what a Binary Search is?  You should!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Do you know what a Binary Search is?  You should!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Do you know what a Binary Search is?  You should!</a><br><br>
<a name="657704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://en.wikipedia.org/wiki/Binary_search" target="_blank">http://en.wikipedia.org/wiki/Binary_search</a><br><br>I implemented a kind of binary search in the path portion of my sprite system today.  Binary searches are FAST!  You should know how they work in case you ever need to find a certain value, or the value closest to a certain value in a sorted list!<br><br>The way a binary search works is simple.  You look at the item in the middle of the list, and if your value is less than that, you continue your search on the right half of the remiaining list.  Otherwise you continue your search on the left half of the remaining list.<br><br>In my path system, I have a segmented line, with points at various X and Y positions.  In path space, each of these points is a certain distance from the start of the path, in increasing order.  My task was to find the point which is closest to a desired path space X position, without going over.<br><br>My first approach was to simply iterate through the list of points, incrementing a distance accumulator, until I went over my desired value.  At that point I knew I'd found the start of the segment in which the X position I'd specified lies.<br><br>This was however quite slow when dealing with paths with anywhere between 400-2000 points, while moving 50 spheres along it, and doing 20 physics steps each frame, each requiring each sphere's position in screen space to be calculated multiple times!  Ouch!<br><br>How slow?  Well let's say the framerate dropped to 30, just from all those path caclulations.<br><br>So I decided to optimize that code with a binary tree, and optimize it did!  Now I convert my path list to an array when I update the path, and then when I need to transform points from path space to global space I do a special binary search on that list, where at each step instead of simply checking to see if the value is less than or greater than the current value, I also check to see if the next value in the array is greater than the desired value if the current value is less than the desired value.  This is neccessary because I'm not looking for specific values that I know are in the array, I'm looking for the nearest value which is less than the desired value, because that indicates the point which is at the start of whichever segment of the path the desired point actually lies within.<br><br>Anyway, doing it this way, the speedup is tremendous.  According to my own calculations, the worst case search would have to look at just 8 points in a list of 256 points, and just 16 in a list of 65536 points!  But that's the worse case.  According to the Wikipedia article, the search takes O log N, and that means that searching a list of 256 points, in the average case, only 2 or 3 points will need to be examined to find the correct point on the path!  Because I'm looking at the next point in the path because I'm doing a "fuzzy" search my cost is probably 2x this, but still, that's incredibly fast, and you might find it heard to beleive until you try "dividing" the path in half and half again to find the worst case for a specific number of points yourself. :-)<br><br>The only drawback of this sort of search is the list bust be SORTED, and sorting a list every time you want to find a point, and converting it to an array every time you want to find a point is not going to give you any speed improvement.    So this algorithm works best on lists which don't change that often relative to the number of times you actually need to find point in the list.  In my case, you may never change the path once creating it once, and thousands of searches will be done on that list of points, so this algorithm is perfect for my needs.<br><br>You might also want to look up Binary Tree, which is a way of doing these sorts of searches directly on a linked list.  I didn't use the binary tree cause it is a lot more complicated to set up and to adjust on the fly and there would be no real increase in speed over the setup I'm using.<br><br>Btw, there are functions in the code archives for doing binary searches, though I didn't think to look there before coding my own and mine was a special "fuzzy" case anyway. :-) <br><br></td></tr></table><br>
<a name="657709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup these are fast. You should put this in the tutorials forum though. Thanks for sharing and thanks for the enthusiasm!<br><br>I lazily am using bubble sorts and searching through whole arrays to find stuff... but that's because I need to look at every item. Otherwise I'd use the binary search. <br><br></td></tr></table><br>
<a name="657713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know, I wrote one 9 years ago in Delphi to find a string in an alphabetical list.  Actually it was used for autotyping in a droplist component I made. <br><br></td></tr></table><br>
<a name="657718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You forgot to mention Tmaps (which use a binary tree):<br><pre class=code>sites:TMap = New TMap

sites.Insert("pf","www.playerfactory.co.uk")
sites.Insert("cw","www.codersworkshop.com")
sites.Insert("bb","www.blitzbasic.com")
sites.Insert("goo","www.google.com")

Print String(sites.ValueForKey("bb"))
Print "==============="

For mysite:TNode = EachIn sites
	Print String(mysite.Key())+"  "+String(mysite.Value())
Next</pre> <br><br></td></tr></table><br>
<a name="657732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The only drawback of this sort of search is the list bust be SORTED, and sorting a list every time you want to find a point, and converting it to an array every time you want to find a point is not going to give you any speed improvement. <br></div>Ofcourse, you could use a data structure which was always sorted. <br><br></td></tr></table><br>
<a name="657737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Such as? <br><br></td></tr></table><br>
<a name="657907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> one where you insert a new item into the correct order instead of just tacking it on at the end...<br><br>so in effect you would be sorting a list that just has one element out, but knowing that its only one element and it hasnt been added yet, you can optimise acordingly <br><br></td></tr></table><br>
<a name="657931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AlexO</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Binary Space Partitions for dealing with collisions checks are great too :), has a similar concept.<br><br>If you have static objects that do not move you can add it to a BSP tree. The simplistic explanation is in a sorted BSP tree when you want to check for collisions you take the root object of the bsp tree, ask are you to the left or right of it? Then go to the left or right side of the tree. Keep going until you hit a 'leaf' of the tree. THEN you can do your more complex collision check on any 'leaves' rather than the whole list. Same applies for above/below. Very fast rather doing a for loop through each object each game loop. <br><br></td></tr></table><br>
<a name="657932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> In that case, it may or may not be worthwhile to optimize, but you could use a binary search of the sort I used to figure out where to insert the value.  Just as I checked to see if the current index was less than, and the next index greater than to find out if my point lies in a particular segment, you could use that technique to determine where to insert a value into a list that is already sorted at the proper location.<br><br>Hm... I wonder if there's a name for that algorithm. <br><br></td></tr></table><br>
<a name="658087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MrCredo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt;&gt;You forgot to mention Tmaps (which use a binary tree):<br><br>strange... i tested a time ago - but they was much slower than bin search... i think they are not optimized in blitz... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
