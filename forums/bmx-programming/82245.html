<!DOCTYPE html><html lang="en" ><head ><title >Joystick disconected = huge slowdown !</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Joystick disconected = huge slowdown !</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Joystick disconected = huge slowdown !</a><br><br>
<a name="926907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Today I discovered a strange new bug.<br><br>My game use a joystick for additional player.<br>This is hard coded for the moment and only use <b>joyY</b>(), <b>joyX</b>() and <b>joyDown</b>() each frame<br><br>In order to try my game somewhere else I disconnected my serial gravis joypad.<br><br>Without this joypad plug into my computer my game run at 8fps while +100 when plugged-in !!<br><br>Don't know if it's a normal behaviour for blitzMax but it's not a good thing through... <br><br></td></tr></table><br>
<a name="926908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i had this problem when i had joycount() in the main loop. maybe you're doing the same?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="926913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks<br>Unfortunately I did not use joycount() at all :(<br>Only<br>2x JoyX()<br>2x joyY()<br>and 2x JoyDown() <br><br></td></tr></table><br>
<a name="926914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's probably the internal call to SampleJoy that is killing it.<br><br>Can't you rather use a flag instead to say whether a joystick is "live" or not? Then you can skip joystick checks when false... or something similar. <br><br></td></tr></table><br>
<a name="927053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've recently added joystick routines into my game without any obvious slowdown whether a pad is connected or not. And I haven't used a JoyCount() either, just Joyx(0) etc.<br><br>Can you post a bit of code? <br><br></td></tr></table><br>
<a name="927079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If there is no joystick connected, then don't make calls to the joystick. <br><br></td></tr></table><br>
<a name="927093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VicViper</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had the same problem. <br><br>Joycount returns the number of joysticks. If you test joystick input without joystics in your computer, sometimes slowdown.<br><br>I solved it put a if in the joysticks's actions:<br><br>if ( joycount()&gt;0 )<br>      'test joysticks inputs<br>endif<br><br>All the joysticks test input between this if conditional :<br>     if ( joycount() &gt; 0 )<br>            ......<br>            ......<br>            ......<br>     endif<br><br>Sorry for my bad english. <br><br></td></tr></table><br>
<a name="927096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Only check joycount() when the program starts.  Don't keep checking it over and over. <br><br></td></tr></table><br>
<a name="927098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VicViper</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do this :)<br><br>'Start program<br>  if joycount() &gt; 0 JoyExist = true<br><br><br>'loop game<br><br>if JoyExist<br>     'Test Joyinputs<br>endif <br><br></td></tr></table><br>
<a name="927737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't test joycount() on a regular basis, you can't test for the situation where the player disconnects the pad in the middle of a game.<br><br>Can't you just add some logic to test joycount() once a second, or does the call to joycount() give such a big hit that it will cause an immediate stutter when called? <br><br></td></tr></table><br>
<a name="927742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If calling commands that try to interact with a joystick that isn't plugged in is slowing you down you should use a timer of like 8 seconds to look for new joysticks (as the JoyExist variable). <br><br></td></tr></table><br>
<a name="927751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Clearly, it's a bit like pinging a website. If the answer is no, it can take a long time to get that answer, because you have to wait for it to timeout. Perhaps there is some way to adjust the timeout? I don't think I'd like that solution much, but maybe as a last resort.<br><br><div class="quote"> If you don't test joycount() on a regular basis, you can't test for the situation where the player disconnects the pad in the middle of a game. <br></div><br>Isn't there some kind of message from the operating system which would be thrown when you insert a joystick? I mean even if it's only generic, like some kind of input device or even a generic peripheral, it would be much better to only poll once after that even, rather than all the time. <br><br></td></tr></table><br>
<a name="927786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have to tell your user that he unplugged his joystick, he doesn't need to be playing.  :) <br><br></td></tr></table><br>
<a name="927877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you have to tell your user that he unplugged his joystick, he doesn't need to be playing. :) <br></div><br><br>break away cables and flat batteries? <br><br></td></tr></table><br>
<a name="927969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> And if the game quits responding, wouldn't you check your cable and batteries?  If your cable breaks away and you do not know it, then you are a knucklehead.<br><br>If you are just trying to be nice and have your program recognize it and pause, I guess that makes sense.  I hadn't thought about that. <br><br></td></tr></table><br>
<a name="928053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> what does the xbox say in each case?<br>ive not had my pc connected 360 wired pad yank out (yet) as its not had far to go, (and ive not used it in an age so its in my bag of bits) but if its plugged in at the back (bad idea for a pad) would you even see the end?<br><br>there should be an automatic game pause written in for such occurances and not let someone die cos they cant move <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
