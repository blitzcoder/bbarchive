<!DOCTYPE html><html lang="en" ><head ><title >What's the longest anim strip BMax can handle?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What's the longest anim strip BMax can handle?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >What's the longest anim strip BMax can handle?</a><br><br>
<a name="770360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just asking because I may have to load one which is 30000 pixels wide, 90 frames.  Has anyone tried loading an anim strip this big and did BMax handle it?  Just wanted to know in case the artist wastes ages.<br><br>I know that texture size doesn't matter as the anim strip will be split down by BlitzMax into individual frames. <br><br></td></tr></table><br>
<a name="770365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> might want to write a script that breaks it into more manageable chunks. say 16 frames each?<br>you could use Blitzmax or Python to do that.<br><br>anyway, why dont you post a sample app with the image and we can give it a try on our various setups. <br><br></td></tr></table><br>
<a name="770391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Loading could be a little critical. Assuming that it is 96px in height, this mean more than 112 MB RAM ... <br><br></td></tr></table><br>
<a name="770393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're using 90 334x334 images?<br><br>Won't they get resized up to 512x512?  Better to scale them down to 256x256.<br><br>If you insist on having 334x334 images, why don't you fit them into a, 3340x3006 image? <br><br></td></tr></table><br>
<a name="770427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> make your strips tall instead of wide.<br><br>I doubt max has an issue with that... any problems will most likely come from the DX and Opengl drivers.  there used to be limitations in many cards on the width of textures and buffers.  to support the largest number of cards, limit the width to the smallest resolution size.  but the height can be as big as you want.<br><br>so instead of making strips 40 tiles wide, make them either 40 tiles tall or a grid like 10x4. <br><br></td></tr></table><br>
<a name="770430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1990#comments" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1990#comments</a><br><br>run this and press space button after the explosion is performed. I have managed with tweaking the parameter to get an anim Strip of around 120 frames (512*512) and BMax loads the strip without any problem. <br><br></td></tr></table><br>
<a name="770431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> dmaz: But LoadAnimImage only works with horiztonal strips :-(<br><br>I can load in a 3000 pixel wide strip on my PC and Bmax splits it up properly where it fails to handle a 3000 pixel image if loaded as a normal image (&gt;2048 texture size I suspect).  So I was wondering if BMax can handle a really long texture...<br><br>Dreamora: How did you arrive at that figure?  If I do 30000 x 96 x 4(bytes per pixel) /1024 / 1024 = I get 11MB. Or were you scaling width/height up to next power of 2?<br><br>Gfk: Yeah 512x512 would be 90MB.  Thing is it may only be 100 pixels tall so will size up to 128.  There was that thing about some cards having to use a perfectly square texture but I think it was wrong and that each dimension can have different sizes as long as they are power of 2.<br><br>Maybe I'll just load it in from numbered files and try to get it less than 256 pixels wide, and maybe reduce the framecount by half... <br><br></td></tr></table><br>
<a name="770432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> klepto2: Aha so you managed to load in a 61440 x 512 png, wow. <br><br></td></tr></table><br>
<a name="770434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Dreamora: How did you arrive at that figure? If I do 30000 x 96 x 4(bytes per pixel) /1024 / 1024 = I get 11MB <br></div><br>I think he assumed 512x512, as GFK mentioned that. Assuming they scale up to 512x128, I think you're going to use 22.5MB with them, which is more or less a quarter of what Dreamora mentioned. <br><br></td></tr></table><br>
<a name="770435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm gonna try to get them in 256x128 then only 45 frames = 5.6MB. <br><br></td></tr></table><br>
<a name="770438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But LoadAnimImage only works with horiztonal strips  <br></div> Are you sure about that? It seems to work OK for me. <br><br></td></tr></table><br>
<a name="770442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But LoadAnimImage only works with horiztonal strips <br></div>What gave you that idea?<br><br><br>Loadanimimage loads the 'sprite sheet' as one large pixmap and chops it up into smaller pixmaps ready to be turned into image frames when needed. You need only worry about the vidmem required to hold the final textures, not the initial 'sprite sheet' size.<br><br>[edit]<br>Blimey...Was I really faffing around for 12 minutes? :o/<br>[/edit] <br><br></td></tr></table><br>
<a name="770454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> loadanimimage doesnt need a strip, just use a 2024x2024 or whatever, I always use a square source...stops bmax trying to scale it. <br><br></td></tr></table><br>
<a name="770460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> mydumb ... yeah its 11mb not 110.<br><br>And while you are able to load non square textures theoretically:<br><br>1. BM won't do it. OpenGL 1.2 forbids it. So BM will always black extend to the next square power of 2<br><br>2. even if it didn't, with lower end cards it makes a performance difference if it is square or not. thats something I learned on a project with B3D on Radeon 9200 cards where the difference makes a serious difference on particle textures for example. <br><br></td></tr></table><br>
<a name="770470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> And while you are able to load non square textures theoretically:<br><br>1. BM won't do it. OpenGL 1.2 forbids it. So BM will always black extend to the next square power of 2<br> <br></div><br>I might be wrong here but Bmax seems to run Pow2size for width and height seperately for both DX and OGL.<br>That suggests the textures will be translated to pow2 size but *not* necessarily square. <br><br></td></tr></table><br>
<a name="770473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with TonyG. <a href="/posts.php?topic=65143#727728" target="_blank"><b><u>This is how the image loaders work</b></u></a>.<br><br>[edit]<br>Did you edit your initial post, GA?<br>[/edit] <br><br></td></tr></table><br>
<a name="770570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I heard the same as TonyG.<br><br>Yan: no I didn't.<br><br><div class="quote"> But LoadAnimImage only works with horiztonal strips <br><br>What gave you that idea? <br></div>Oh I just assumed it used a long strip.  So I can do vertical columns and squares yes?  wow.<br><br>But are we in agreement that if you load in a 30000 pixel wide anim strip, the graphics card will never touch the original strip because BMax will cut it into pieces and it's those pieces that the power of 2 rules apply to, not the original massive strip, yes?<br><br>In fact is the massive 30000 strip discarded, or is it kept in memory in case the textures need to be created again? <br><br></td></tr></table><br>
<a name="770574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> The strip is split up into small pixmaps which are used by it. That are clones of the original strip but the original one is kicked unless you loaded the animimage from a previously loaded pixmap. <br><br></td></tr></table><br>
<a name="770588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm, it would be faster if bmax used the original texture and just used rect offsets...it would save a ton of texture changes. <br><br></td></tr></table><br>
<a name="770589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But are we in agreement that if you load in a 30000 pixel wide anim strip, the graphics card will never touch the original strip because BMax will cut it into pieces and it's those pieces that the power of 2 rules apply to, not the original massive strip, yes? <br></div>Yup. :o)<br><br><div class="quote"> In fact is the massive 30000 strip discarded, or is it kept in memory in case the textures need to be created again? <br></div>The 'sprite sheet' is discarded and the individual ('chopped up') pixmaps are retained for building the textures. <br><br></td></tr></table><br>
<a name="770593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> smilertoo: That would be a very bad idea.<br>For the reason mentioned above with max texture size etc.<br>Although, there are situations we agree with you, for that reason there are drawImageArea functions in the code archives that allow you to load an image and draw subareas of it quite like DrawImageRect worked in the old blitz (BM drawimagerect is something completely different) <br><br></td></tr></table><br>
<a name="770653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK thanks for the clarification people.  And yeah I agree, if it was retained it could have advantages but the I couldn't load in my 30000 pixel animstrip. <br><br></td></tr></table><br>
<a name="770698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/posts.php?topic=51647#578284" target="_blank"> this </a> might help for quicker anim drawings (and maybe tilesets). <br><br></td></tr></table><br>
<a name="770726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> dmaz: But LoadAnimImage only works with horiztonal strips :-( <br></div><br><br>It works with any shape -- if you have a multi-row, multi-column it should automatically fall over to the next row once it hits the end of a line.<br><br>Didn't BlitzPlus behave the same way? <br><br></td></tr></table><br>
<a name="770965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe BlitzPlus does too, I just totally assumed Bmax only handled a "strip" haha.  Of course in the past I've coded bitmap fonts and animations from square images myself so I guess there's no reason why BMax shouldn't support it :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
