<!DOCTYPE html><html lang="en" ><head ><title >Planetary Gravity Physics</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Planetary Gravity Physics</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Planetary Gravity Physics</a><br><br>
<a name="535023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I'm having trouble finding the formulas I need to make a solar system model (in 2d). I'm caught on the planetary gravity right now. ANybody have any helpful hints?<br><br>thanks,<br><br>Jon <br><br></td></tr></table><br>
<a name="535036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you need is the gravitation law ( F = (G * m1 * m2) / (Distance^2) where G is the gravitation constant ... similar formula to coulomb)<br><br>This holds for "human - earth" as well as for "earth - moon" or any other pair of masses. <br><br></td></tr></table><br>
<a name="535111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, thanks for the help..  I've ran across this formula doing some searches but what is the gravitational constant?<br><br>thanks <br><br></td></tr></table><br>
<a name="535115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depends on the measurements you are using - size/distances as well as mass.<br><br><a href="http://en.wikipedia.org/wiki/Gravitational_constant" target="_blank">http://en.wikipedia.org/wiki/Gravitational_constant</a> <br><br></td></tr></table><br>
<a name="535202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To model a solar system, I would just move the planes in circular or elliptical paths - no need to actally model gravity. If you want to see how to do a simple 2d simulation of gravity, search these forums - the question has been answered many times before. <br><br></td></tr></table><br>
<a name="535218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diordna</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, but if you're making a Gravity Wars game, the gravity equation is insanely important...and you use planets. Could this be what you're doing? I've always wanted to make a Gravity Wars game but never got around to it.<br><br>(To see what Gravity Wars is, just Google "death star battles" and play the Flash knock-off.) <br><br></td></tr></table><br>
<a name="535254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, exactly what i was wanting to do. Kind of like a Scorched Earth where the two  players are on different planets. To place their shots, they will have account for cravity effecting the projectile on its way.<br><br>thanks for the replies <br><br></td></tr></table><br>
<a name="535258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gravitational constant G = 6.67E-11 N m^2 kg^-2 (i.e. if your forces are measured in Newtons, mass in kilogrammes and distance in metres). Essentially it's a fiddle factor though - Start at G=1.0 and change it until it feels right, reducing it if the force is too strong and increasing it if it's too weak.<br><br>You'll probably want to use a = F/m to find the acceleration of each body. That is, a1=G*m2/(r*r) and a2=G*m1/(r*r). <br><br>And in 2D vector form,<br><pre class=code>
r = Sqr(r_x*r_x + r_y*r_y)
a1_x = G*m2*r_x/(r*r*r)
a1_y = G*m2*r_y/(r*r*r)
</pre><br>(I think :) ) Where &lt;r_x, r_y&gt; is the distance between objects in x and y directions, m2 is the mass that's attracting your object, &lt;a1_x,a1_y&gt; is the acceleration at that moment in time at that point in space.<br><br>A good resource that I use: <a href="http://scienceworld.wolfram.com/physics/Gravity.html" target="_blank">http://scienceworld.wolfram.com/physics/Gravity.html</a> <br><br></td></tr></table><br>
<a name="535284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jondecker76</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks a lot, lots of useful help on these boards <br><br></td></tr></table><br>
<a name="535808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lazze</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might want to use Keppler for the planets and Newton for your ships as it will keep the calculations down to a minimum.<br><br>Using Newton for the whole system gets quite heavy when the amount of bodies increase as you have to calculate the gravitational effect from all the bodies on each body. <br><br></td></tr></table><br>
<a name="535850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use an image which represents the gravitational field of each planet, pre-rendered from pre-calculating the gravity at each pixel. Several of these could easily be stamped down and referenced, or just looked up with an offset, when you want to know how much force to add to things that are moving around. It would be a bitmap of custom types, in a way. Quicker if you can precalc than doing it realtime. <br><br></td></tr></table><br>
<a name="535946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> A couple of tips:<br><br>- I'd certainly make all of the major masses like Stars, Planets and Moons affect each other and everything else.  Ships, Bullets and Missiles are negligible in comparison so they need to be affected by the major masses but not each other.<br><br>- There is no real performance problem doing n-body calculations in realtime for n up to 20, 30 or maybe 50.  By 100 it is definitely bogging down an average PC.  Much of the fun comes from the chaotic effects of masses on each other so I'd go with proper calculations rather than pre-determined elipses for orbits.<br><br>- You can combine the gravity calculations with collision detection since you need the distance in both cases.  You need objects to have an appreciable radius and to do collision detection.  Point masses can get too close to each other and exert enormous force.  By the next calculation step they have overstepped each other so don't 'feel' a corresponding pull back to slow them down.  Objects zoom out of your system from close encounters.  This does actually happen in reality as asteroids, comets and even stars can be 'ejected' by close encounters.  However if you don't mask the effect with a radius it is unrealistic. <br><br>- For n bodies, a simplistic approach is to calculate each body against each other body requiring n * (n-1) calculations.  A better approach is to consider them in pairs (A, B).  Once you have the distance of A from B, it is the same distance from B to A and there are common terms that can be found in the equations for the force of A on B and the force of B on A.  This leads to only n * (n - 1) / 2 calculations which is better.  Use somthing like:<br><br>For A = 1 to n<br>  For B = A + 1 to n<br>    CalcForce(A, B)  ' Accumulate components of force in both A and B<br>  Next B<br><br>  CalcNetEffect(A)   '  All forces applied to A.  Can now calculate its acceleration and new position.<br>Next A<br><br>This is just pseudocode.  You need to define what is in the objects and how to iterate through them.<br><br>For a real challenge:<br><br>BlitzMax is quite capable of doing realtime image scaling and rotation so you can get fancy by having spinning worlds and being able to zoom in and out.  Use real images.  Make the view track an object to see others whizzing past.  Leave object trails.  Draw vectors on objects showing their velocity and acceleration.<br><br>A very rich topic. <br><br></td></tr></table><br>
<a name="535975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a note from when I was working on something similiar... you are going to have to play with the equations a little bit.  I created what I thought was a reasonably accurate model of the solar system and a space ship... but the ship always flew out of the system too fast, or barely moved, or always was sucked up into planets. I never quite got it to work out. <br><br></td></tr></table><br>
<a name="535987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Najdorf</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> physical constants are useless in game developement. you just need the formula F = G * m1 * m2 / Distance^2 and you have to play with G in order to get the results you want.<br><br>so you have two bodies with masses m1,m2, velocity vx1,vx2,vy1,vy2, position x1,x2,y1,y2 then in the main loop to simulate the gravity  between them you do:<br><br>distance=sqr((x1-x2)*(x1-x2)+(y1-y2)+(y1-y2))<br>F= G * m1 * m2 / (Distance*distance)<br><br>xcomponent=(x1-x2)/distance<br>ycomponent=(y1-y2)/distance<br><br>deltav1=F/m1<br>deltav2=F/m2<br><br>then<br><br>vx2=vx2+deltav2*xcomponent<br>vx1=vx1-deltav1*xcomponent<br>vy2=vy2+deltav2*ycomponent<br>vy1=vy1-deltav1*ycomponent<br><br>and the usual<br><br>x1=x1+vx1<br>x2=x2+vx2<br>y1=y1+vy1<br>y2=y2+vy2<br><br>that's all <br><br></td></tr></table><br>
<a name="536216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am thinking that while accurate physics works in the real world with real-sized objects, if you are going to use the same physics to try to simulate abnormally proportioned objects then you aren't going to see the resutls that you imagine. If you are thinking of these relatively small spheres on the screen as having the gravitational pull of a planet, surely some adjustment is going to have to be made to scale that down given the size proportions, especially if there is an unrealistic or inconsistent sense of proportions between ships and planets. I'm guessing the planets would be more like small asteroids in comparison. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
