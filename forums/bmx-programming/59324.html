<!DOCTYPE html><html lang="en" ><head ><title >Libxml Module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Libxml Module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Libxml Module</a><br><br>
<a name="660803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thought I'd do something useful for a change, so am hereby announcing the release of my Libxml module.<br><br>You can download it <a href="http://brucey.net/programming/blitz/index.php" target="_blank">HERE</a>.<br><br>For more information on what libxml is, see <a href="http://xmlsoft.org/" target="_blank"> the libxml website</a>.<br><br>You might be wondering why we need yet another xml module?<br>Here are a few reasons why you might want to consider this one above the rest... ;-)<br>* It's really quick - no, really.<br>* Fully documented.<br>* Feature-rich API.<br>* Strong, validating parser.<br>* Support for namespaces, DTD, and a countless number of standards related to markup languages.<br>* Handles de/compression of xml files on the fly (using zlib)<br>...etc...<br><br>If you notice any issues, you can either email me directly (mail listed in my profile) or post questions / problems here on the forums. <br><br></td></tr></table><br>
<a name="660839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice work Brucey. <br><br></td></tr></table><br>
<a name="660849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >altitudems</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great work as usual,<br><br>Any progress on GED? Are you working with matt on Project Studio IDE?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="660879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! I'm using Libxml2 now through LoadLibraryA(), so I'm looking forward to testing this.<br><br>When using the "libxml2.dll", I also have to include "zlib1.dll" and "iconv.dll" with the app. Can I assume this is never needed with your module? ( "zlib1.dll" and "iconv.dll" seems to be on some Windows (XPPro? ) versions by default. <br><br></td></tr></table><br>
<a name="660893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice work, Brucey.  Will be nice to be able to use a tried and true library.<br><br>Thanks a lot :) <br><br></td></tr></table><br>
<a name="661040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wonderful work mate. Now about that Eclipse plug-in... <br><br></td></tr></table><br>
<a name="661136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Peter, it uses pub.zlib module for zlib support. There are no external requirements, so it should build *as is* on all platforms.<br><br>XPath isn't working quite right yet, but it is consistently not working on all platforms, so I'm assuming it's something I've done with the implementation of it...<br><br>I intend to pad out the support for the rest of libxml at some point. Currently, I've got nearly all of the Tree API working, and some basics of the parser API. But, if you've ever looked into it before, there is a *lot* in there that you can use.<br><br>Ducky... I was never quite happy with some of the engine for the plugin, and I've been wanting to rewrite it really, I suppose, perhaps, it wants to be hosted somewhere that others might be able to assist with it to...  know of any good team-type repositories? :-p <br><br></td></tr></table><br>
<a name="661154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Peter, it uses pub.zlib module for zlib support. There are no external requirements, so it should build *as is* on all platforms. <br></div>Well there goes MaXML.<br><br><div class="quote"> I suppose, perhaps, it wants to be hosted somewhere that others might be able to assist with it to... know of any good team-type repositories? :-p <br></div>Well there's always sourceforge ofcourse. If you're not quite happy with that, I could perhaps setup a subversion/trac combo somewhere you're more comfortable with. <br><br></td></tr></table><br>
<a name="661192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's really great that it's cross platform, and no externals are needed.<br><br>Adding the below functions to the "Extern" section of libxml.bmx, because they are the ones I seem to use the most, everything seems to work as with the dll version.<br><br><pre class=code>Function xmlReaderForFile:Int(filename:Byte Ptr,encoding:Byte Ptr,options:Int)
Function xmlFreeTextReader(reader:Int) 
Function xmlTextReaderRead(reader:Int) 
Function xmlTextReaderConstName:Byte Ptr(reader:Int)
Function xmlTextReaderConstValue:Byte Ptr(reader:Int)
Function xmlTextReaderAttributeCount(reader:Int)
Function xmlTextReaderGetAttribute:Byte Ptr(reader:Int,name:Byte Ptr)
Function xmlTextReaderNodeType(reader:Int)
Function xmlTextReaderHasValue(reader:Int)
Function xmlTextReaderReadInnerXml:Byte Ptr(reader:Int)
Function xmlTextReaderReadOuterXml:Byte Ptr(reader:Int)


Function UTF8Toisolat1(out:Byte Ptr,outlen:Int Var ,in:Byte Ptr,inlen:Int Var )
Function isolat1ToUTF8(out:Byte Ptr,outlen:Int Var ,in:Byte Ptr,inlen:Int Var )</pre> <br><br></td></tr></table><br>
<a name="661203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's cool...<br><br>I'll add a new type TxmlTextReader and implement all that functionality in it.<br><br>As I said already, there is so much in there that I think I've only touched the surface of its capabilities...<br><br>:-) <br><br></td></tr></table><br>
<a name="661204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Haramanai</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great!<br>Is this part of cairo wrapper? <br><br></td></tr></table><br>
<a name="661210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> heh... no.. I should have a version of that out in the next day or so... <br><br></td></tr></table><br>
<a name="661615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have updated the libxml module to 1.03 now.<br><br>This includes support for the Text Reader API (50+ specific methods) - a streaming XML reader (rather than the tree API which loads everything into RAM).<br>You can access it through the TxmlTextReader type. Fully documented as usual, with its own short introductory tutorial.<br><br>Enjoy :-) <br><br></td></tr></table><br>
<a name="661649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exellent! Seems to work flawlessly with 1.20, - still testing though.<br>Thanks a lot for putting in the Text Reader API. <br><br></td></tr></table><br>
<a name="668757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't cairo work under MacOS? It tested, but the graphics output is not correct. But win32 isn't a problem. <br><br></td></tr></table><br>
<a name="668807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't tracked down the display problem on Mac yet.<br><br>I think it must be something to do with the image data handling, since PDF export works flawlessly.<br>Perhaps it's an endian issue... :-( <br><br></td></tr></table><br>
<a name="668810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, have tested again. It's only a problem with the color: SetSourceRGB.<br><br>When set only Blue (1.0) or LightBlue(0.1), then is this correct.<br>When set only Green(1.0) or Red (1.0) or in Light(0.1), then is this incorrect, so nothing is indicated .<br><br>That's right, it's a probem of endian issue... <br><br></td></tr></table><br>
<a name="668836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br>I'll have a look into it :-) <br><br></td></tr></table><br>
<a name="669331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well. When your tested example clip_image.bmx with orginal PF_BGRA8888, then is the output-image ok. Only when work with SetSourceRGB(..) , then it's all broken.<br><br>But, i can't see behind. Have looking everywhere in the code of cairo...<br><br>It's very nice an cool, when cairo running on my mac. <br><br></td></tr></table><br>
<a name="669955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have tested again with setcolor:<br><br><pre class=code> 
SetSourceRGBA           ReadPixel
r   g   b   a           a   r   g   b
A0  00  00  FF          00  00  A0  FF
00  A0  00  FF          00  A0  00  FF
00  00  A0  FF          A0  00  00  FF
00  00  00  FF          00  00  00  FF
00  00  00  7F          00  00  00  7F
FF  FF  FF  FF          FF  FF  FF  FF
7F  7F  7F  7F          3F  3F  3F  7F
7F  7F  7F  FF          7F  7F  7F  FF
</pre><br><br><br>Here the code<br><br><pre class=code>
SuperStrict

Import BaH.Cairo

Local cairo:TCairo = TCairo.Create(TCairoImageSurface.CreateForPixmap(100,100,PF_BGRA8888))

cairo.setantialias( CAIRO_ANTIALIAS_NONE )

Local normalizeMat:TCairoMatrix = TCairoMatrix.CreateScale(100.0,100.0)
cairo.SetMatrix(normalizeMat)


Local f:Double = 1.0 / 255

Local r:Double = f * $A0
Local g:Double = f * $B0
Local b:Double = f * $C0
Local a:Double = f * $D0

cairo.SetLineWidth(0.05)
cairo.SetSourceRGBA( 0.5, 0.5, 0.5, 1.0 )
cairo.Arc(0.5, 0.5, 0.4, 0, 360)
cairo.Stroke()
cairo.Destroy()


Local pix:TPixmap = CreatePixmap( 100, 100, PF_BGRA8888 )
pix = TCairoImageSurface( cairo.getTarget() ).pixmap()


Graphics 640,480,0
SetBlend ALPHABLEND
SetClsColor 255,255,255


Cls
DrawPixmap  pix,  0, 0
Flip


For Local x:Int=0 To 99
	For Local y:Int=0 To 99
		Local i:Int = ReadPixel( pix, x, y )
		If i&lt;&gt;$00000000 Then Print x +"  "+ y +"  "+ Hex( i )
	Next
Next


WaitKey()
</pre> <br><br></td></tr></table><br>
<a name="670011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,  thanks for that.<br><br>The problem lies in the fact that Max has Alpha always at the same end, regardless, whereas, the Cairo image stuff switches around all four bytes on PPC...  eg..  RGBA to AGBR (where pixmap uses RGBA on intel and RGBA on ppc)...<br><br>Will see if there's anything I can do to fix it... <br><br></td></tr></table><br>
<a name="670504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey,<br><br>It is probably obvious?  But looking through the documentation that comes libxml_bin, I don't see how to deploy it to BlitzMax and start using it?  Can you point me in the right direction?<br><br>Thanks <br><br></td></tr></table><br>
<a name="670583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sean,<br><br>Here is an example i cooked up. give it a whirl:<br><br>This is the BlitzMax code:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict


Import BaH.Libxml


Graphics 800,600
SetBlend(ALPHABLEND)

Local xmldoc:TxmlDoc = TxmlDoc.parseFile("test.xml")

Print xmldoc.getURL()

Local game:TxmlNode = xmldoc.getRootElement()

Print game.getName()


Local children:TList = game.getChildren()
Global EntityList:TList = CreateList()

Print children.count()


	For Local node:TxmlNode = EachIn children
		Local name:String , xpos:Int , ypos:Int
		Local red:Int , green:Int , blue:Int 	
		Local angle:Float , scale:Float
		
		If node.getName() = "entity" Then
		
			  Local entitynodes:TList = node.getChildren()
			
			   name:String = node.getAttribute("name")
			   xpos:Int = Int(node.getAttribute("xpos"))
			   ypos:Int = Int(node.getAttribute("ypos"))
			
			For Local en:TxmlNode = EachIn entitynodes
				If en.getname() = "color" Then
					 red:Int = Int(en.getAttribute("red"))
					 green:Int = Int(en.getAttribute("green"))
					 blue:Int = Int(en.getAttribute("blue"))
				EndIf
				If en.getname() = "angle" Then
					angle:Float = Float(en.getcontent())
				EndIf
				If en.getname() = "scale" Then
					scale:Float = Float(en.getcontent())
				EndIf

			Next
			If scale = 0 Then scale = 1
			Local foo:Tentity = Tentity.create(name,xpos,ypos,angle,scale,red,green,blue)
			
		EndIf
	Next



For Local node:TxmlNode = EachIn children
	Print node.getName()
Next

'doc.setCompressMode(0)
'doc.saveFile("aaa.xml")


Type Tentity
	Field name:String
	Field xpos:Int
	Field ypos:Int
	Field red:Int
	Field green:Int
	Field blue:Int
	Field angle:Float
	Field scale:Float
	
	Method draw()
		SetAlpha 0.65
		SetRotation angle
		SetScale (scale,scale)
		Local w:Int = TextWidth(name)*1.1
		Local h:Int = TextHeight(name)*1.1
		SetColor red,green,blue
		DrawRect xpos,ypos,w,h
		SetColor Abs(red-128),Abs(green-128),Abs(blue-128)
		SetAlpha 1
		DrawText name,xpos,ypos
	End Method
	
	Function create:Tentity(n:String,xp:Int,yp:Int,an:Float,sc:Float=1.0,r:Int=255,g:Int=255,b:Int=255)
		Local temp:Tentity = New Tentity
		temp.name = n
		temp.scale = sc
		temp.xpos = xp
		temp.ypos = yp
		temp.angle = an
		temp.red = r
		temp.green = g
		temp.blue = b
	
		ListAddLast(EntityList,temp)
		Return temp
	End Function
End Type

Repeat

For Local e:Tentity = EachIn Entitylist
	e.draw()

Next
Flip
Cls
Until KeyDown(KEY_ESCAPE)


</textarea><br><br><br>Save this as "test.xml" in the same directory as above code snippet<br>This is the XML data:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

&lt;?xml version="1.0"?&gt;
&lt;Game&gt;
    &lt;!--This is a Comment--&gt;
    &lt;!--Comments are ignored--&gt;
    &lt;entity name="Eric" xpos="100" ypos="100"&gt;
        &lt;color blue="0" green="255" red="100"&gt;&lt;/color&gt;
        &lt;angle&gt;23&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="Bill" xpos="200" ypos="200"&gt;
        &lt;color blue="0" green="255" red="100"&gt;&lt;/color&gt;
        &lt;angle&gt;43&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="John Jacob Jingle Heimer Schmidt" xpos="300" ypos="200"&gt;
        &lt;color blue="255" green="255" red="100"&gt;&lt;/color&gt;
        &lt;angle&gt;-13&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="Carlos" xpos="20" ypos="20"&gt;
        &lt;color blue="25" green="5" red="5"&gt;&lt;/color&gt;
        &lt;angle&gt;30&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="BlitzMax rocks!" xpos="200" ypos="200"&gt;
        &lt;color blue="240" green="0" red="0"&gt;&lt;/color&gt;
        &lt;angle&gt;-15&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="Madison" xpos="10" ypos="400"&gt;
        &lt;color blue="200" green="0" red="0"&gt;&lt;/color&gt;
        &lt;angle&gt;-31&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="Helena" xpos="180" ypos="290"&gt;
        &lt;color blue="0" green="55" red="0"&gt;&lt;/color&gt;
        &lt;angle&gt;15&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="Error! Error Abort! A#$BorT.a" xpos="500" ypos="400"&gt;
        &lt;color blue="60" green="0" red="0"&gt;&lt;/color&gt;
        &lt;angle&gt;25&lt;/angle&gt;
    &lt;/entity&gt;
    &lt;entity name="LibXML is cool (thanks Brucey!)" xpos="260" ypos="200"&gt;
        &lt;color blue="5" green="10" red="10"&gt;&lt;/color&gt;
        &lt;angle&gt;12&lt;/angle&gt;
        &lt;scale&gt;2.0&lt;/scale&gt;
    &lt;/entity&gt;
&lt;/Game&gt;

</textarea> <br><br></td></tr></table><br>
<a name="670594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I will have a look at it.  I don't have to place anything in the mod folder? <br><br></td></tr></table><br>
<a name="670680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just place the Bah.mod folder (that contains everything in libxml) into the mod folder (not in the pub.mod folder, just the mod folder itself).<br><br>It'll work then. <br><br></td></tr></table><br>
<a name="670762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sean Doherty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way search for a node without creating a list of children and iterating through the list?  For example, from MaXml:<br><br>pSectorXmlNode.FindChild("Name").value <br><br></td></tr></table><br>
<a name="670765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can write a function for this. MaXml is not it different... Look in to the module from MaXml.<br><br>@Brucey, libxml it's very fast. Thanks for integrating of libxml2 in BlitzMax! <br><br></td></tr></table><br>
<a name="670807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is probably a much better way to accomplish what i did in the above example. That was my first shot a LibXML.<br><br>I am no XML wizard :) <br><br></td></tr></table><br>
<a name="670862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I should probably add a readme with the module to help people get started.<br><br>If you run docmods (it's in the BlitzMax/bin folder), it should integrate the libxml docs with BlitzMax. After restarting Max, you will be able to see it in the navigator pane in, Help -&gt; Modules -&gt; Libxml.<br><br>The libxml Help is fairly extensive, including two large tutorials (covering the Tree API and the Reader API) to help you get up an running.<br>Hopefully you will find it a little better documented than you are used to with Max ;-)<br><br>Any problems, lemme know... <br><br></td></tr></table><br>
<a name="670887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morszeck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> An question, then i which too stupid. How can created a new xml-document? More exactly: how do I create a root? <br><br><pre class=code>
bah.libxml

local doc:txmldoc
local root:txmlnode

doc = txmldoc.newdoc( "1.0" )

... and now?

doc.savefile( "myxml.xml" )
</pre> <br><br></td></tr></table><br>
<a name="671195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey,<br><br>Thanks for an awesome module.  I did a syncmods and there it is, all nicely organized in the the Max Doc pane. every example I have created has run flawlessly (except of course for 'user created' bugs)<br><br>I am going through your docs right now, the new ones are very good.<br><br>Morszek,<br><br>Here is a small example. You can read the output in an internet browser (Firefox, Opera, the Microsoft one...I forget the name of that one:) ):<br><br><pre class=code>
' create and save a new XML document


SuperStrict				' SuperFly!


Import BaH.Libxml

Local fileURL:String = "created.xml"
Local Compression:Int = 0 		'ZLIB compression ranges from 0(none...fast) to 9(Max...Slow)
Local doc:TxmlDoc 
Local root:TxmlNode
Local node:TxmlNode


doc = TxmlDoc.newDoc("1.0")

root = Txmlnode.NewNode("RootNode")


doc.setRootElement(root)
node = root.addtextchild("monster")
node.addattribute("Name","Cuddly Monster")
node.addattribute("HairColor","brown")
node.addattribute("Ferocity","Rather Mild")
node.addattribute("FavoriteFood","Ice Cream")

node = root.addtextchild("monster")
node.addattribute("Name","Growler")
node.addattribute("HairColor","Red")
node.addattribute("Ferocity","Severe")
node.addattribute("FavoriteFood","Toes")

doc.setCompressMode(Compression:Int)
doc.saveFormatFile(fileURL:String, True)


</pre> <br><br></td></tr></table><br>
<a name="671204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is another example of creating and saving a file:<br><br><pre class=code>
' create and save a new XML document
SuperStrict				' SuperFly!

Import BaH.Libxml

Local fileURL:String = "created2.xml"
Local Compression:Int = 0 		'ZLIB compression ranges from 0(none...fast) to 9(Max...Slow)
Local doc:TxmlDoc 
Local root:TxmlNode
Local node:TxmlNode

doc = TxmlDoc.newDoc("1.0")

root = Txmlnode.NewNode("Geography")


doc.setRootElement(root)
node = root.addchild("Country")
	node.addattribute("Name","USA")
	node.addattribute("population","Millions")

		node = node.addchild("State")
			node.setcontent("California")
			node = node.addchild("Governor")
				node.setcontent("Arnold Schwarzeneggar")
					node = node.addtextchild("PreviousJob")
						node.setcontent("Actor")
							node = node.addtextchild("BestMovie")
								node.setcontent("Terminator")


doc.setCompressMode(Compression:Int)
doc.saveFormatFile(fileURL:String, 1)

</pre> <br><br></td></tr></table><br>
<a name="674631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, libXml is VERY nice and very easy to use! I am using it now, and I am very happy with it! Thank you, Brucey!<br>Now I have a question/problem: I like to incbin all external files in my projects. And I don't want that my xml files are visible to everyone and I don't want that the user could modify the xml. So I tried using incbin on the xml files using libxml, but that does not work. So, does someone tried to incbin xml files with this lib? Is there some support for that?? Could it be added?? If not, what are the alternative solution??<br>Thanks! <br><br></td></tr></table><br>
<a name="674694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have not included access to ram-streams directly in the module, however, there is nothing stopping you loading the xml using a text stream (which I believe supports incbin) and then parsing that string using TxmlDoc.parseDoc(string).<br><br>I can also have a look at implementing access to incbin properly...<br><br>:-) <br><br></td></tr></table><br>
<a name="674838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean something like this:<br><br>Incbin "myXmlFile.txt"<br>doc = TxmlDoc.parseFile("incbin::myXmlFile.txt")<br><br>In that case, this is not working for me, I got an error when I run:<br>I/O warning : failed to load external entity "incbin::myXmlFile.txt"<br><br>How should I do??<br><br>Thanks! <br><br></td></tr></table><br>
<a name="675006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it doesn't yet support memory streams at all... Looking at the API, I think I can probably get it to at some point, but for now....<br><pre class=code>
SuperStrict

Import BaH.libxml
Import BRL.TextStream

Incbin "file.xml"

Local doc:TxmlDoc = TxmlDoc.parseDoc( LoadText("incbin::file.xml") )

' show the contents to stdout
doc.saveFormatFile("-", True)
</pre><br>I know it's not idea - to have to use LoadText() - but until I implement in-memory xml handling, it's the best there is... <br><br></td></tr></table><br>
<a name="678542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump. I don't really know much about XML yet, but I'm trying to learn. How do I apply a DTD validation on a TxmlDoc? I want to use a DTD that is "fixed" and applied by my Blitz program, not specified by the original XML document being parsed (that's what it means by "arbitrary DTD" I assume). I'm guessing it must have something to do with createExternalSubset and createInternalSubset but I don't see how to use them, and searching the Web isn't helping much. <br><br></td></tr></table><br>
<a name="679898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm looking for a way to be able to get all the attributes of an element/node, even ones I can't know the name of ahead of time, without using TxmlTextReader (which would use getAttributeByIndex). I thought the solution might be txmlnode.getChildren(XML_ATTRIBUTE_NODE), but that always just returns an empty set. <br><br></td></tr></table><br>
<a name="685294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Brucey,<br><br>I tried to use xpath with libxml2, but the example you are showing is not working at all!! I had a quick look, and I think you have a bug somewhere in your wrapper (no idea where).<br><br>Could you have a look at your example, and tell me if it works for you, and if not, could you try to debug it????<br><br>Many thanks! I am using your lib, and it is incredibly good!! <br><br></td></tr></table><br>
<a name="685581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had trouble with xpath too...<br><br>I think perhaps I need to go googling for some examples of usage to see where I've gone wrong. <br><br></td></tr></table><br>
<a name="685820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a nice page:<br><a href="http://www.w3schools.com/xpath/xpath_syntax.asp" target="_blank">http://www.w3schools.com/xpath/xpath_syntax.asp</a><br><br>Thanks! <br><br></td></tr></table><br>
<a name="685866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the link...<br><br>After much testing, I found out what I was doing wrong.<br>Seems that I should have been iterating through a pointer array, rather than retrieving the first pointer and stepping thru its nodes...<br><br>Anyway, I'll let you know when I post the updated module.<br><br>I'm also thinking that I might do libxsl while I'm at it... <br><br></td></tr></table><br>
<a name="685890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again Brucey<br>Getting libxslt would rock. :) <br><br></td></tr></table><br>
<a name="686185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, thanks, thanks for your debugging!! I really need xpath, so I appreciate your effort!<br>I have no idea of what is libxslt... I googled it,  but I still do not understand... Nevermind ;-) <br><br></td></tr></table><br>
<a name="686224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> libxslt lets you take an XML file and transform it using a XSL (xml stylesheet) and save the output. Some of the  expressions you write in your XSL file can be XPath expressions. Like this: <a href="http://www.w3schools.com/xsl/xsl_transformation.asp" target="_blank">http://www.w3schools.com/xsl/xsl_transformation.asp</a><br><br>On windows you can do the same with Microsofts msxslt.exe: <a href="http://www.w3schools.com/xsl/xsl_transformation.asp" target="_blank">http://www.w3schools.com/xsl/xsl_transformation.asp</a><br><br>Having it inside BlitzMax, means you can write a stylesheet (XSL file) to transform XML, very usefull for converters/loading or making reports in XML,HTML,SVG formats.<br>OpenOffice lets you write document converters this way. <br><br></td></tr></table><br>
<a name="686827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, good, but Brucey, please post your updated and debugged version of libxml (with xpath working) before working on libxslt... I need it;-)<br>Thanks again for your hard work! <br><br></td></tr></table><br>
<a name="686922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought that since I was fixing libxml I'd also work on adding more of the API to it.<br><br>As of last night, these are the current changes that will appear in the next release (which should be in a day or so) :<br><br>* Fixed TxmlNodeSet.getNodeList.<br>* API change - Added TxmlBase (for shared methods). Extended Node, Doc, Dtd, Attribute, Entity from it. Should be backwards compatible.<br>* Implemented debug-time assertion checking.<br>* Incbin support added for TxmlDoc and TxmlTextReader.<br>* Added more XPath functionality.<br>* Added libxml globals.<br>* Added Entities API.<br>* Added XML catalogs and SGML catalogs API.<br><br>For incbin support, you can now use :  TxmlDoc.parseFile("incbin::afile.xml"), and the same for the textreader.<br><br>Will let you know when the update is available.<br><br>:o) <br><br></td></tr></table><br>
<a name="687048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wahou!!! This is great!!!! I can't wait!! <br><br></td></tr></table><br>
<a name="687303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are on win32 or linux you can now do :<br><pre class=code>
syncmods -u &lt;user&gt; -p &lt;pass&gt; bah.libxml
</pre><br>(replacing &lt;user&gt; and &lt;pass&gt; appropriately)<br>to update the libxml module using syncmods :o)<br><br>(should make updating easier for everyone now...)<br><br>On top of the changes mentioned above :<br>* Added TxmlURI, TxmlCatalog, TxmlEntity, TxmlIncludeCtxt, TxmlLocationSet.<br>* Added XInclude API, XPointer API.<br>* misc doc/code fixes<br><br>Please let me know how you get on with it...<br><br>There's still plenty of API to include - it just takes so bloody long to get it coded / documented. Otherwise I'd have it all done by now.<br>The validation stuff will probably come next.<br>libxslt is well on the way<br><br><br>(many thanks to BRL for use of their modserver!) <br><br></td></tr></table><br>
<a name="687618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! It's now downloaded. Xpath seems to work now. I will try to use it in my program...<br>&lt;EDIT&gt; Fantastic! I used without problem in my program. This is working perfectly, and save me a lot of time! Thanks again for this library!<br><br>&lt;EDIT2&gt; And the incbin stuff is working also perfectly! I can now incbin properly the xml file <br><br></td></tr></table><br>
<a name="687892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to hear :-)<br><br>Good and constructive feedback helps to improve the code...  thanks for your comments. <br><br></td></tr></table><br>
<a name="774905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sören</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Bump*<br><br>Ahm, I don't see any method/function for removing a node from a document. Something like <a href="http://xmlsoft.org/html/libxml-tree.html#xmlUnlinkNode" target="_blank">xmlUnlinkNode</a>? Or am I just not looking hard enough? :\ <br><br></td></tr></table><br>
<a name="774923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good find :-)<br><br>Interestingly, I added the API function call, but didn't implement it.  Will fix. Thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
