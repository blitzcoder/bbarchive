<!DOCTYPE html><html lang="en" ><head ><title >MicroC module - runtime error line</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MicroC module - runtime error line</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >MicroC module - runtime error line</a><br><br>
<a name="863828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to get the line number that causes a runtime error from the binphx.microc module?<br><br>I'm getting this error "You cannot divide a string" and I have no idea where in my 80 line script it's coming from. Anyone figured out a way to do this? <br><br></td></tr></table><br>
<a name="863829"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two things. This script is actually about 400 lines. I was looking at the INI file for it somehow.<br><br>And I got it to work. Just added a Field to Type TScriptInstr to contain the Line that cause the instruction to be added, set this in AddInstr, and added it to the binary dump format. This makes the binary format quite a bit bigger, so it's only added if a switch DebugOn is true.<br><br>If anyone's using MicroC and would find this useful let me know. Too bad it isn't in a google code or sourceforge project or I could just apply for membership and check in my fixes. <br><br></td></tr></table><br>
<a name="863856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems you've fixed it yourself. However if you are actually intrested in this module, give me a few days and I'll rewrite it. I have some free time at the moment and its in bad need of it ;). <br><br></td></tr></table><br>
<a name="863992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am actually really interested in the module, I think it's pretty fantastic. If you have the time to rework it I would be very appreciative. As it stands it's meeting my needs but a new version would be welcome - I don't think there can be too many scripting languages for BlitzMax. <br><br></td></tr></table><br>
<a name="864130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alrighty. Well I rewrote a bunch of it today, in a couple of days I should be able to post a new version. <br><br></td></tr></table><br>
<a name="864365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well here you go, have fun with it. Its been entirely rewritten from scratch over the last few days. Works pretty well and is a lot cleaner than the first version.<br><br>Bunch of new feature now as well, including a runtime library containing common functions (data structures, math, .etc), eachin support, .etc.<br><br>The only real differences you may see, is that quite a few of the names of functions have changed, some types have been made static (you don't need to create TCompiler or TVirtualMachine instances any more, you just use the functions contained in them), and arrays have also been removed in preference to other data structures (lists, hashs, .etc). It overcomplicated the compiler code and had little benefit compared to other choices.<br><br>Anyhow, download here;<br><a href="http://www.binaryphoenix.com/index.php?action=download&amp;id=91" target="_blank">http://www.binaryphoenix.com/index.php?action=download&amp;id=91</a><br><br>If you find any bugs, make sure to send me an email. There are probably quite a few in the first release. <br><br></td></tr></table><br>
<a name="864470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweet! I'll take a look at it today.<br><br>One thing I wanted to mention before but I forgot to say was it would be really handy if command set functions could support object parameters and return values directly. I've had to resort to using Handles with all the obvious problems that will create as far as memory leaks go, etc. (script authors have to remember to call Release() all the time). And of course I see "GetParameterObject:Object(index:Int)", so you thought of the same thing. Awesome!<br><br>I've also got a command set generator that whips through a file and finds any lines that end in {Export} and creates a new command set class. Basically it looks at the function definition, then generates the calls needed to pop arguments off the stack, calls the real function, then push the return value of the real function on to the stack. Pretty handy since all you have to do is write regular BM functions, put ' {Export} at the end of the line for each function, then call csgen and it spits out the glue so the functions can be called in MC.<br><br>You can integrate this into the release if you like. It looks like the new version doesn't have TVMCommandSet anymore,  but that's no big deal since the class hardly did anything, just called the VM's RegisterFunction method.<br><br>csgen source: <a href="http://blueapples.org/twiki/pub/Main/BlitzMax/csgen.bmx" target="_blank">http://blueapples.org/twiki/pub/Main/BlitzMax/csgen.bmx</a> <br><br></td></tr></table><br>
<a name="864474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "And of course I see "GetParameterObject:Object(index:Int)", so you thought of the same thing. Awesome!"<br>- Yes not sure why I didn't include that in the first one.<br><br>"You can integrate this into the release if you like. It looks like the new version doesn't have TVMCommandSet anymore, but that's no big deal since the class hardly did anything, just called the VM's RegisterFunction method."<br>- What I really want to do is what I normally do when I design scripting languages, which is use reflection to register all functions within a class to the VM. Unfortunatly as far as I can see BMax can't get reflected details on static functions. Bit of a shame really :S.<br><br>Personally I think the best thing about this release, is the inclusion of type balancing, which caused some pretty odd errors in the first version (for instance int+string = int, when it should really be a string result).<br><br>I'm also considering to make this languaged typed rather than type-less, theres really only so many speed improvements you can make in a type-less language. I can usually make far faster VM's for typed languages.<br><br>I also wonder if I should post a topic about this module, or leave it in this one.<br><br>Anyhow should stop rambling now, I'll have a look at csgen. And if you have any suggestions on what else to put into the language I'll be happy to hear them :D.<br><br>Also do you think I should release the other language I made with this? I made two compilers for the VM, one with a basic syntax the other with this C syntax. <br><br></td></tr></table><br>
<a name="864480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> A basic syntax would be pretty nice, always good provide multiple options.<br><br>What do you think about supporting objects and method calls? That gets into a whole messy world. In my own scripting language I haven't even really looked at it - procedural APIs like what MaxGUI has work pretty well for scripting. Just wanted to see what you think about the topic if you've considered it for MicroC. <br><br></td></tr></table><br>
<a name="864483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've written a couple of OOP style scripting languages before, but to be honest I always felt it bloated the language a lot and generally was not of that much use in a scripting language. <br><br></td></tr></table><br>
<a name="864732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sent you a couple bug reports, but looking pretty good <br><br></td></tr></table><br>
<a name="864739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed the first one, the second one is because singe-quote  chracters are not supported for defining strings. I'll probably readadd this now though.<br><br>If you want to add support before I release the next version, just open the Lexer.bmx file and find the line;<br><br><pre class=code>
			Case "~q"
</pre><br><br>and change it to;<br><br><pre class=code>
			Case "~q", "'"
</pre> <br><br></td></tr></table><br>
<a name="864821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Man this is going to be so cool. I've been spamming Helios about bugs and stuff. If you're at all into scripting languages, you guys have got to download this and play with it once the new build is up. Esp with the BASIC syntax to compare/contrast with the C/javascript style syntax. <br><br></td></tr></table><br>
<a name="864850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> New version (goter sort out a version numbering system for this &gt;.&gt;);<br><a href="http://www.binaryphoenix.com/index.php?action=download&amp;id=92" target="_blank">http://www.binaryphoenix.com/index.php?action=download&amp;id=92</a><br><br>Tons of bugs have been fixed, and a few new features have been added (among which is a new compiler which uses a BASIC syntax). Theres also a new command-line compiler tool (called MCC), that can now generate glue-code from blitzmax source files, to make it even easier to export functions to MicroC.<br><br>I really should get around to writing a read-me.<br><br>I should probably post a proper topic for this as well. <br><br></td></tr></table><br>
<a name="864866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Helios</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=77298" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=77298</a><br><br>There is a topic there if you wish to continue this ;). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
