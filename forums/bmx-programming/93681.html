<!DOCTYPE html><html lang="en" ><head ><title >Timers and events with multithreading</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timers and events with multithreading</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Timers and events with multithreading</a><br><br>
<a name="1072278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elcoo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>is it even possible to use timers or events in a second thread, created using CreateThread()? Because when I create a timer inside the Thread and use WaitTimer(), the thread will just halt and never go on, as if the Timer wasn't ticking. Same is for WaitEvent. <br><br></td></tr></table><br>
<a name="1072286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure about how timers are structured, but I assume they are not thread safe. They likely are bound to the main thread, not the calling thread.<br><br>Events are definitely NOT thread safe. Events are pulled from, and push to a que, and that que is not handled in a thread safe manner. (even if you wrapped your polling commands to be thread safe when events are created they are not inserted safely so you could still "cross the beams").<br><br>It is possible to post events (and one could extrapolate polling as well) from a thread, but you have to wrap the action in a main thread handling routine. e.g.<br><br>Child thread wants to post an event. So it creates the event and, in a thread safe manner shoves it into a tlist.<br><br>The main loop every cycle examins the tlist (again in a thread safe manner) and if it finds anything it posts the event.<br><br>I use this method in one of my applications, however you have to let the main loop cycle and poll events yourself rather than waiting on them. OR you have to be confident that something will trigger you waitevent to process (such as moving the mouse) which gives you an opportunity to post those other events. This is preferable from a resources standpoint (much less processor time spent cycling) but obviously until one event happens, allowing the child created events to get posted, then they don't exist. <br><br></td></tr></table><br>
<a name="1072287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are other ways to do triggered sharing as well, such as with semaphores, but this becomes a LOT harder, especially with the poor documentation for semaphores and condvars etc. <br><br></td></tr></table><br>
<a name="1072291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elcoo</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi ima747,<br>thanks for the replies, it made things a bit clearer for me. I didn't find any good documentation about semaphores and mutexes yet. I'll try around a bit now to find out which is the best method to synchronize and run Threads at the same speed. <br><br></td></tr></table><br>
<a name="1072297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check out my guide in the tutorials section for getting your feet wet in multithreading. It's quite powerful but prone to catastrophic failure if you're not very careful :0) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
