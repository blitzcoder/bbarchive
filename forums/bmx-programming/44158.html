<!DOCTYPE html><html lang="en" ><head ><title >DECLS convertion ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DECLS convertion ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >DECLS convertion ?</a><br><br>
<a name="492098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :)<br><br>How i can convert this B3D DECLS entry =&gt; BMax ?<br><br>.lib "Kernel32.dll"<br>GetDriveType%(drivename$):"GetDriveTypeA"<br>GetVolumeInformation%(Path$,VolNameBuff*,VolLen%,Serial*,MaxComponentLen*,fsFlags*,fsNameBuff*,fsNameLen%):"GetVolumeInformationA"<br>GetLogicalDriveStrings%(bufflen%,buffer*):"GetLogicalDriveStringsA"<br>GetLogicalDrives%()<br><br>Cheers <br><br></td></tr></table><br>
<a name="492104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try:<br><pre class=code>
?Win32
Extern "Win32"
     Function GetDriveType:Int(DriveName:Byte Ptr)="GetDriveTypeA"
End Extern
?
</pre><br><br>And so on and so forth. <br><br></td></tr></table><br>
<a name="492148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> $z surely? <br><br></td></tr></table><br>
<a name="492219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks noel ! but i have a question ? how call this ?<br><br>i have try<br><br>GetDriveType("D:")<br><br>But the compiler say :<br><br>C:/BMax/sources/IGlass test/IGlass 1.5/.bmx/Example FileSelector.bmx.o(code+0x358): undefined reference to `GetDriveType@4' <br><br></td></tr></table><br>
<a name="492227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Print GetDriveType("D:\")
Extern "Win32"
	Function GetDriveType:Int(DrivePath$z) = "GetDriveTypeA@4"
End Extern</pre> <br><br></td></tr></table><br>
<a name="492230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many many thanks !!! <br><br>A last question :) why make :<br><br>DrivePath$z<br><br>Why the $z ??? <br><br></td></tr></table><br>
<a name="492233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> $z is a C-Style null-terminated string.<br><br>So if you have a normal blitz string (instead of a string literal), you will probably need to use ToCString to convert it.<br><br>*EDIT*<br>apparently not.  It seems to work with a normal Blitz String. <br><br></td></tr></table><br>
<a name="492236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> For future reference, point your command prompt to Bmax/lib and type:<br>nm [filename] &gt;[filename].txt<br>to get a listing of the functions available for that lib.<br><br>i.e.<br>nm libwinmm.a &gt;winmm.txt <br><br></td></tr></table><br>
<a name="492271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks ! it work ! <br><br></td></tr></table><br>
<a name="492467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forgive the stupid question(s), but:<br><br>- What is ?Win32 ... ? Is this a shortcut command of some kind? (I'm not up on all the lingo yet..)<br><br>- What does the '@4' at the end of 'GetDriveTypeA' mean?<br><br>Thanks,<br>Russell <br><br></td></tr></table><br>
<a name="492495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is ?Win32 ... ? Is this a shortcut command of some kind? (I'm not up on all the lingo yet..)  <br></div><br><br>From what I can tell (and I may be wrong), it is a directive telling the compiler that you are calling a win32 library.  It will still compile and run if you remove it, but you get an error when your program exits.<br><br><div class="quote"> What does the '@4' at the end of 'GetDriveTypeA' mean? <br></div><br><br>It means the return value is 4 bytes in size.  In other words a 32bit integer value. <br><br></td></tr></table><br>
<a name="492510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Perturbatio    (Posted 2005-02-24 02:05:19)<br>What is ?Win32 ... ? Is this a shortcut command of some kind? (I'm not up on all the lingo yet..)<br><br><br>From what I can tell (and I may be wrong), it is a directive telling the compiler that you are calling a win32 library. It will still compile and run if you remove it, but you get an error when your program exits. <br></div><br>The ?Win32...? just tells BMax to compile that bit only on a Windows system (compiler directive).<br><br>The bit that's telling BMax that you are calling a Windows library would be...Extern "Win32"<br><br>That's the way I understand it at least. I too could be wrong though ;o) <br><br></td></tr></table><br>
<a name="492525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops, stupid me, I was assuming he was referring to the win32 part in the extern command.  I never even paid attention to the question marks. <br><br></td></tr></table><br>
<a name="492780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well that's good to know that OS-specific compiler directives are available (as long as they're used with care to maintain portability...)<br><br>Thanks for the answers. I learn a little bit more each day...<br><br>Russell <br><br></td></tr></table><br>
<a name="510233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >StuC</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, the @4 is the size of the stack for all the pushed parameters, when calling the function. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
