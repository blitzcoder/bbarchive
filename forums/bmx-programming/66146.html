<!DOCTYPE html><html lang="en" ><head ><title >Checking the distance Between 2 points?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Checking the distance Between 2 points?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Checking the distance Between 2 points?</a><br><br>
<a name="739137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do i check the distance between 2 locations on the screen? <br><br></td></tr></table><br>
<a name="739139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming by locations on the screen, you mean in 2d only, like this :<br><br><pre class=code>
xd = x2-x1
yd = y2-y1
Distance = SquareRoot(xd*xd + yd*yd)
</pre> <br><br></td></tr></table><br>
<a name="739140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are just going to be compareing distances, you dont need the sqr <br><br></td></tr></table><br>
<a name="739141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's perfect, Thanks. :)<br><br>Any news on TV3D? Sorry to keep pestering. :) <br><br></td></tr></table><br>
<a name="739143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you are just going to be compareing distances, you dont need the sqr <br></div><br><br>How would you do it H&amp;K? <br><br>Just to give you an idea of what I'm doing, I want the distance between to pixels on screen (2D). If the distance is within a certain amount I want the 2 points deleted. <br><br></td></tr></table><br>
<a name="739144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> so you are just doing a comparison so from gabs<br><br>Comparitive = Comparative^2<br><br><br>then in all the compares<br>If (XD*XD+YD*YD)&lt;Comparitive<br><br>all you are doing is squareing the comparitive once, rather than finding the square root each time <br><br></td></tr></table><br>
<a name="739147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think i get it.<br><br>I have a Type with fields "XLoc &amp; YLoc". I have setup a method to check the distance.<br><br>Would I do this:<br><br>Mthod CheckDistance()<br>   DistanceBetween = DistanceBetween^2<br>   If (Xloc*Xloc + YLoc*YLoc) &lt;  DistanceBetween - 10<br>   DeleteStuff!!!<br>End Method.<br><br>Would that be right? <br><br></td></tr></table><br>
<a name="739148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the "certain amount" you're checking if the distance is within is constant then square that and do what H&amp;K suggests. Unless you're doing it a few thousand times a second, I'm not sure it'll notice, but it won't hurt.<br><br><div class="quote"> Any news on TV3D? Sorry to keep pestering. :)  <br></div><br>They originally said it would be fixed by the end of the week. They've marked it fixed on the bugtracker. I asked when we can expect a new build to be uploaded. I've received no response. New builds tend to be uploaded on a weekend, so I wouldn't expect anything before at least a week.<br><br>Which means another week I can't do any real work. No need to apologize for pestering. I only wish I could do something about it, but the GCC build seems to have a very low priority at the best of times. Heck perhaps it's me that's the problem. They didn't even acknowledge the bug report until someone else posted about it too. And even then they asked for a code sample which demonstrated it.. two days after I had sent them one.<br><br>Maybe you need to fire me and get someone the TV3D devs like to be in charge instead ;) <br><br></td></tr></table><br>
<a name="739151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't get it. :/ <br><br></td></tr></table><br>
<a name="739176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SculptureOfSoul</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>

TestDistance = 25 '&lt;---25 pixel test distance
TestDistance = TestDistance * TestDistance 'square the test difference since we *aren't* taking
                                           'the square root of the distance calculated below

xd = x2-x1
yd = y2-y1
Distance = xd*xd + yd*yd

'now, do your test
If (Distance &lt; TestDistance )
    dostuff
Endif
</pre> <br><br></td></tr></table><br>
<a name="739219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Amon - I think H&amp;K has confused you.<br><br>To get his 'addendum' out of the way first, he was basically saying this.  Imagine you have two ships, and a planet.  You want to find out which ship is nearest the planet, but you don't care how far away it actually is - all you need to know is which is nearest.  In that scenario you can dispense with Sqr().<br><br>In a situation where you simply want to know the precise distance between any two given points, I perform distance calculations like this (fleshed out a bit, for clarity):<br><pre class=code>
Function Distance(Point1X,Point1Y,Point2X,Point2Y)
  'calculate the x/y distances
  dX = Point1X - Point2X
  dY = Point1Y - Point2Y

  'calculate exact distance
  'Sqr() always returns an absolute value
  Return Sqr( (dx^2) + (dy^2) )
End Function</pre><br><br>...and a 3D version, if its ever needed:<br><pre class=code>Function Distance(Point1X,Point1Y,Point1Z,Point2X,Point2Y,Point2Z)
  'calculate the x/y/z distances
  dX = Point1X - Point2X
  dY = Point1Y - Point2Y
  dZ = Point1Z - Point2Z

  'calculate exact distance
  'Sqr() always returns an absolute value
  Return Sqr( (dx^2) + (dy^2) + (dz^2) )
End Function</pre><br><br>oh, and before everybody jumps in and tells me that dx^2 is slower than dx*dx (even though they do the same job) - the speed difference isn't worth arguing about unless you're doing thousands of calculations per cycle. <br><br></td></tr></table><br>
<a name="739280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh,<br><br>Sorry Amon, I went to bed, and didnt realise Id not explained.<br><br>As GFK has said there are two ways to look at your question<br>1) What is the Absolute distance between two points<br>2) Are two points further apart than two other points<br><br>Gabriel gave you the equation to find 1), and I asked if you needed the distance, or were just going to compare distances.<br>If you are just going to compare distances then if you look<br><pre class=code>SQR(X1*X1+Y1*Y1) &lt;&gt; Sqr (X2*X2+Y2*Y2)</pre> as you can see, from simple algebra the Sqr cancel each other, and so you dont need it.<br><br>@GFK,<br><br>Ok so as the CPU and FPU get better and better this little bit of performance gain is nothing, but if I am cheacking the distance between ... err 200 spaceships or the like it does make a differance.<br>Also, if I can drop the min from say 700Mz to 650Mz then its not a wasted effort is it? <br><br></td></tr></table><br>
<a name="739338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="739344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>  		DistanceX = Xloc - XLoc
  		DistanceY = YLoc - YLoc</pre><br>So.... What would you expect DistanceX or DistanceY to be? <br><br></td></tr></table><br>
<a name="739347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know. Lol. <br><br></td></tr></table><br>
<a name="739442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> oh, and before everybody jumps in and tells me that dx^2 is slower than dx*dx (even though they do the same job) - the speed difference isn't worth arguing about unless you're doing thousands of calculations per cycle. <br></div><br>They absolutely do not do the same job.  You can test this with this example:<br><pre class=code>For Local x:Int = 0 To 8
	Local y1:Int = x^2
	Local y2:Int = x*x
	Print y1 + " " + y2
Next</pre><br>results in<pre class=code>0 0
1 1
4 4
9 9
15 16
24 25
36 36
48 49
63 64</pre><br>As you can see, they both give different results, with x^2 being less accurate.  So if x*x is not only faster than x^2, but also more accurate, then why wouldn't you use it? <br><br></td></tr></table><br>
<a name="739604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eh?  that's a bug surely?  How the hell can 4^2 possibly be 15????  Its blatently wrong!<br><br>dX^2 and dX*dX *should* be the same.  In real world terms its the same calculation expressed differently. <br><br></td></tr></table><br>
<a name="739611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not a bug.  The ^ operator calls a function called bbFloatPow().  It takes floats as parameters and uses floating point math and returns floats.  There is no Int version.  The 4^2 doesn't return 15, but it returns something like 15.99999 and since I am storing it into an Int in my example, it gets truncated to 15.<br>There are more accurate ways to calculate ^, even with floats, but it seems Mark has chosen speed over accuracy, which in my opinion is stupid since even with the faster  implementation, X*X is still considerably faster than X^2. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
