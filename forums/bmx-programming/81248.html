<!DOCTYPE html><html lang="en" ><head ><title >How to read radio stream info?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to read radio stream info?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to read radio stream info?</a><br><br>
<a name="915195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello again!<br><br>I'm planing on an writing a simple internet radio player.<br>My problem is: How do I read the meta data that is included in the mp3-stream, such as "Station Name" and "Current Title"?<br><br>Example from Winamp:<br><img src="http://img55.imageshack.us/img55/171/bild2aa2.jpg"><br><br>Can I do this with MAXmod or FMOD?<br><br>Grisu <br><br></td></tr></table><br>
<a name="915221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got shoutcast working nicely with my BASS module, although I haven't tried retrieving the metadata from it as yet. I guess it's on there somewhere. <br><br></td></tr></table><br>
<a name="915223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh... seems it does work :<br><pre class=code>
DebugLog:ICY 200 OK
DebugLog:icy-notice1:&lt;BR&gt;This stream requires &lt;a href="http://www.winamp.com/"&gt;Winamp&lt;/a&gt;&lt;BR&gt;
DebugLog:icy-notice2:SHOUTcast Distributed Network Audio Server/Linux v1.9.8&lt;BR&gt;
DebugLog:icy-name:S K Y . F M - Simply Soundtracks - a wide variety of Soundtracks from Movies, show themes, &amp; more!
DebugLog:icy-genre:Film Classical Soundtracks
DebugLog:icy-url:http://www.sky.fm/soundtracks/
DebugLog:icy-pub:1
DebugLog:icy-metaint:8192
DebugLog:icy-br:96
</pre><br>:-)<br><br>FYI, this is what the code looks like :<br><pre class=code>
Local tags:String[] = channel.getTags(BASS_TAG_ICY)
</pre> <br><br></td></tr></table><br>
<a name="915224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Haven't even thought of the bass module. Thanks for the hint.<br>It's just that I don't want to reinvent the wheel here... <br><br></td></tr></table><br>
<a name="915229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just saw, you were faster... Looking great.<br><br>Is there a complete bass interface / module to download somewhere?<br>Haven't wörked with it yet at all. :/<br><br>Are there any license limitations? <br><br></td></tr></table><br>
<a name="915230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are around here somewhere.<br><br>Mine is still available only via SVN (until it's finished), from <a href="http://code.google.com/p/maxmods/" target="_blank">http://code.google.com/p/maxmods/</a><br>So, if you aren't up on SVN, you may wish to look elsewhere for now.<br><br>Example 6 would be of interest here, since it shows shoutcast usage. <br><br></td></tr></table><br>
<a name="915236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot Brucey!<br><br>Could you point me to the svn subdir as I'm using a plain batch file for checking?<br><br>http://blitzbasic.com:81/svn/blitzmax/dev/? <br><br></td></tr></table><br>
<a name="915246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's something like :<br><br><a href="http://maxmods.googlecode.com/svn/trunk/bass.mod" target="_blank">http://maxmods.googlecode.com/svn/trunk/bass.mod</a> <br><br></td></tr></table><br>
<a name="915317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers!<br><br><b>Edit:</b><br><br>1. Still getting some heavy crackeling background sounds out of nowhere.<br>On some channels they are very seldom on others like the example one there are insane.<br><br>2. Meta data "BASS_TAG_ICY"<br>Does it also give some like the current title. Couldn't find a name tag for this?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
' Play a shoutcast stream...
'
SuperStrict

Framework BaH.Bass
Import BRL.GLMax2D
Import BRL.StandardIO

If Not TBass.Init(-1,48000,0,Null,Null) Then
	DebugLog "Can't initialize device : " + TBass.ErrorGetCode()
	End
End If

BASS_SetConfig(BASS_CONFIG_NET_PLAYLIST,0) ' enable playlist processing
BASS_SetConfig(BASS_CONFIG_NET_PREBUF,0) ' minimize automatic pre-buffering, so we can do it (And display it) instead

Local isMod:Int = False

' rocking!
Global url:String = "http://194.158.114.68:5000"
'Global url:String = "http://scfire-nyk-aa02.stream.aol.com:80/stream/1074"
Global channel:TBassChannel = New TBassStream.StreamCreateURL(url, 0, BASS_SAMPLE_FLOAT|BASS_STREAM_STATUS|BASS_STREAM_AUTOFREE, Null, Null)

If channel Then
	Local length:Long = channel.GetLength(BASS_POS_BYTE)

	If Not channel.Play(False) Then
		DebugLog "can't play... : "  + TBass.ErrorGetCode()
		'Exit 
      End If 

	Graphics 640, 480, 0

	Local active:Int = channel.IsActive()
	
	While active And Not KeyDown(key_escape)
	
		Cls
		
		' display some stuff And wait a bit
		Local _left:Int, _right:Int

		channel.GetLevel(_left, _right)

		Local pos:Long = channel.GetPosition(BASS_POS_BYTE)
		Local time:Double = channel.Bytes2Seconds(pos)

		DrawText "position - " + pos, 20, 50
		DrawText "elapsed  - " + Int(time/60) + ":" + Int(time Mod 60), 20, 65

		If isMod Then
			Local low:Int, high:Int
			pos = channel.GetPositionLowHigh(BASS_POS_MUSIC_ORDER, low, high)
			DrawText "         - " + low + ":" + high, 50, 80
		End If
		
		If active = BASS_ACTIVE_STALLED And TBassStream(channel) Then  ' playback has stalled

			DrawText "-- Buffering : " + TBassStream(channel).GetFilePosition(BASS_FILEPOS_BUFFER) + " --", 20, 90

		Else
			Local lwidth:Int = _left / 410.0
			DrawRect 100 - lwidth, 100, lwidth, 20
			DrawRect 110, 100, _right / 410.0, 20
		End If

		DrawText "CPU - " + TBass.GetCPU(), 240, 50

		Get_StreamTagIDs()
		Delay 100

		Flip 1

		active = channel.IsActive()

	Wend

	'End If
'Else
'	DebugLog "didn't load : " + TBass.ErrorGetCode()
End If

TBass.Free()

End

Function Get_StreamTagIDs()
' output some stream information
If channel.Play(False) Then
	Local tags:String[] = channel.getTags(BASS_TAG_ICY)
      Local ypos:Int=150
	For Local s:String = EachIn tags
           If s &lt;&gt; Null Then 
                 DrawText s, 20, ypos                   
                 'DebugLog s
                 ypos=ypos+15
           EndIf 
               
     Next 
EndIf 
End Function
</textarea><br><br>Still experimenting around.... <br><br></td></tr></table><br>
<a name="915443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems like there's an extension for the bass.dll in order to display all sorts of fancy tags.<br><br>"Tags<br>An extension producing formatted text from the ID3v1/v2, OGG/FLAC, WMA, or APEv2 tags of a BASS stream. C/C++, Delphi, and Visual Basic APIs are included." - <a href="http://www.un4seen.com/" target="_blank">http://www.un4seen.com/</a><br><br>Though this stuff is far too high for me... :(<br><br>Could someone please test my example to verify the sound issues? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
