<!DOCTYPE html><html lang="en" ><head ><title >Passing a bank to a GL function</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Passing a bank to a GL function</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Passing a bank to a GL function</a><br><br>
<a name="624759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>	temp:tbank=CreateBank(Len(s$)+1)
	PokeString temp,0,s$
	glListBase listBase
	'glRasterPos2f x,y
	glCallLists BankSize(temp)-1,GL_UNSIGNED_BYTE,bank buf(temp)</pre><br><br>I get an error on the last line:<br>Unable to convert from 'Int' to 'Byte Ptr'. <br><br></td></tr></table><br>
<a name="624770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this.<br><br><pre class=code>
Local buffer@ Ptr = s.ToCString( ) ' Null-terminated
glListBase( listBase )
glCallLists( s.Length, GL_UNSIGNED_BYTE, buffer )
MemFree( buffer )
</pre> <br><br></td></tr></table><br>
<a name="624777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's because you put a space between the words `bank` and `buf`, it should be BankBuf(temp). <br><br></td></tr></table><br>
<a name="624790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I make this into a string?  How do I make it say "Hello"?<br><br>I just get an error saying "Identifier 'ToCString' not found".<br><pre class=code>Local buffer@ Ptr = s.ToCString( ) ' Null-terminated
glListBase( listBase )
glCallLists( s.Length, GL_UNSIGNED_BYTE, buffer )
MemFree( buffer )</pre> <br><br></td></tr></table><br>
<a name="624808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming s is a string, that will create a null-terminated C string (strings in BMax use UTF-16).<br><br>Aside from that, I'm not sure what you're asking now. <br><br></td></tr></table><br>
<a name="624895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> s has to be an already created string.<br><br>local s = "Test string"<br>Local buffer@ Ptr = s.ToCString( ) ' Null-terminated<br>glListBase( listBase )<br>glCallLists( s.Length, GL_UNSIGNED_BYTE, buffer )<br>MemFree( buffer )<br><br>or you could do it on a string constant,<br><br>local buffer:Byte ptr = "Test string.".toCstring() <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
