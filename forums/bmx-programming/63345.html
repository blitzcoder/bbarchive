<!DOCTYPE html><html lang="en" ><head ><title >Color cycling?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Color cycling?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Color cycling?</a><br><br>
<a name="707346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maverick69</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Who remember's the cool color cycling effects from the Amiga? You could cycle easily through the color palette and this way you could create cool animations of lava or waterfalls?<br><br>I'm currently thinking of how such an effect could be realized with Blitz.<br><br>Where are my retro freaks? ;-) <br><br></td></tr></table><br>
<a name="707348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it worth the trouble? Isn't brute-force copying/moving gfx way more practical?<br><br>I also have roots in colorcycling, but as far as I'm concerned this was just a trick to get things 'moving' on a system that's too slow for brute-force copying/moving. These days, we can even emulate those systems and their palette-modes.. so why bother. :P <br><br></td></tr></table><br>
<a name="707354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Potential "intelligenter" way than bruteforcing: multiple grayscale images you draw above each other, using SetColor to fake palettes :) <br><br></td></tr></table><br>
<a name="707399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or draw it pixel by pixel yourself. Prolly not a good idea with the 3D acceleration but I've gotten quite good speeds from straight pixmap modification/blitting :) <br><br></td></tr></table><br>
<a name="707408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Blitz plus you could redefine the pallet I believe and thus do colour cycling, but this can't be done in Max right? <br><br></td></tr></table><br>
<a name="707411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OO!?<br><br>w000t? palette in B+? how, for crikey's sake?? <br><br></td></tr></table><br>
<a name="707412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> B+ had a 256 colour mode didnt it? If so it had a palette <br><br></td></tr></table><br>
<a name="707413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wasn't that the slow mode GDI thing?<br><br>And BlitzPlus was 2D only, while BM is 3D only. <br><br></td></tr></table><br>
<a name="707425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> *never* heard/read of any palette-mode until just now :S<br><br>But I guess it wouldn't 've worked with canvases eh..<br><br>The only thing I'd like a palette for is for my retro-drawtools.. it's so much nicer to have audo-updates for a fullscreen pic when moving a colorslider, than to manually redraw it (=slow) .. <br><br></td></tr></table><br>
<a name="707471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah I nearly used the pallete thing to do a plasma effect, but I coded it a different way in the end.  Right just looked it up, it was the SetGamma command that looked like it could e used for that but I never used it... <br><br></td></tr></table><br>
<a name="707497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, question.<br><br>BMax works in 8bit mode yes? (Ok so non of the draw commands work, but Bmax can open an 8Bit screen, and then just sit there yes)<br><br>So it must have asked the operating system/the c+ dll, (I dont realy care, and its not important), either way its been given an 8bit screen. So what ever made the 8Bit screen, wouldnt that have made a pallette as well?<br><br>If so, you could have a go at finding a Ptr to the backbuffer, and then another to the Pallette and you <i>could</i> knock together a few drawing/pallette commands and have color cycleing. Or Not? <br><br></td></tr></table><br>
<a name="707631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sadly it's pretty much impossible to do this properly without an 8 bit palletted mode without wasting too many resources to emulate it. <br><br></td></tr></table><br>
<a name="707664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it would be too slow to grab the screen as a pixmap, o through every pixel and check it's colour and change it to a new one (based on a table I guess) and then draw the pixmap back.  I bet this would take quite a few ms and have a crap framework. Worth a try or not? <br><br></td></tr></table><br>
<a name="707741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you could change the color when you blit the sprites :) <br><br></td></tr></table><br>
<a name="707761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> or seperate the "paletted pixels" onto a grayscale image which you then draw in the desired tone using setcolor :) <br><br></td></tr></table><br>
<a name="707772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Youve said this greysacle thing twice now, and I dont understand what you mean, but anyway,<br><br>You are talking about a 32bit grey scale image or a 8bit?<br>do you have a link and/or spent a few minutes explaining it. <br>Thanks <br><br></td></tr></table><br>
<a name="707789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Color cycling is based on a paletted image whereby you are interpreting the value of each pixel as an index in a lookup table. Basically that is a `remap` function. As a display device, like on the Amiga, this lookup is performed in hardware and basically translates the pixel values into the values that are stored in a palette lookup-table, on the fly. TrueColor modes don't do that, they show you the actual pixel values in terms of how much of each color component to add, rather than use a lookup table, mainly because the lookup table would be much too big to be efficient.<br><br>So what you really need to be doing is a remap function, to simulate paletted images with TrueColor. You have to basically make a software remapper that works on the fly. Each pixel in a source image has to be looked at separately and then based on how much offset the cycle is at, add a value to that to get an index, and then look in a lookup table to find the color to draw, which you then output to a new image and render to the screen. It's not really something you can very quickly.<br><br>In OpenGL you can draw pixmaps and upload images with palette-based remapping on the fly. But it's not very fast and I found it doesn't seem to work or be supported on all systems.<br><br>In the early days of my blobby objects stuff I did a software remapper which basically rendered the blobby object fields based on a small palette using a different index for each threshold value. This was drawn to a pixmap and then DrawPixmap was used to render to the screen. Needless to say it's not exactly fast even if you set things up to be as efficient as possible.<br><br>If you have ranges of colors that basically increase in value for each component, like gradient, you can simply render a rectangle with LIGHTBLEND (add) operation and the value that you're adding should appear to shift the gradient as in color cycling, but it probably will not wrap around because (at least in GL) the values are clamped at white.<br><br>It would be a nice easy thing to do with a shader.<br><br>Depending on how much of your screen is going to cycle, you could put all the pixels of a given value in its own image as white pixels and draw that image with a given tint using SetColor. you'd have to draw as many images as you have colors in your cycle range and each would be drawn with mask color of black. For 256-color images you'd have to draw 256 images. Like dreamora said. <br><br></td></tr></table><br>
<a name="707800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> H&amp;K: What I mean is that you simply use a grayscale image (bitdepth does not mather, TImage will depend on graphics depth) and use the SetColor to colorize it in the desired color. As you used a grayscale, this grayscale will then modify the hue of your color as it is drawn. So you basically could do a whole water - lava thing just with 1 grayscale image.<br>It is not the same as paletting, but depending on what you actually want to achieve, it is a cheap way to do so.<br><br>But it won't be a full paletting replacement. As Angel said, even using it hardware side won't work, as modern hardware internally always work in 32bit and do not like nor really support 8bit anymore. <br><br></td></tr></table><br>
<a name="709248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> The loss of palette swapping is a tad annoying, for me.<br><br>Mainly because trying to write a football game without it just adds extra headaches. For every frame of animation I need:<br><br>a head<br>hair<br>limbs<br>two shirt images (shirts have two colours)<br>shorts<br>two sock images (socks, like shirts, have two colours)<br>boots<br><br>It's quicker than doing straight pixel swap with a single pixmap, I believe, but it's certainly more fiddly to work with.<br><br>With palette swapping, I'd just be altering a few values and running away laughing.<br><br>(on the bright side, shading is much easier with greyscale images). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
