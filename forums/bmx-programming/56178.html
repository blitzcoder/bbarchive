<!DOCTYPE html><html lang="en" ><head ><title >How do I release an object?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How do I release an object?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How do I release an object?</a><br><br>
<a name="624800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is the correct way to do this?:<br><pre class=code>bank:tbank=createbank()
release bank</pre> <br><br></td></tr></table><br>
<a name="624802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> bank = Null <br><br></td></tr></table><br>
<a name="624803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> bank=null<br><br>And I prefer to GCCollect() regulary, but esp. after null'ing things..<br><br>I'm still not sure whether I like all this high-level memory-management.. but alas.. <br><br></td></tr></table><br>
<a name="624805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Release is a command used only to release integer handles of objects.  If you're using Strict (and you should be, otherwise you're going to end up shooting yourself in the foot), it's useless.<br><br>The correct means of doing this is <i>bank = Null</i>, and if you want to force the immediate collection of the object, you call <i>GCCollect( )</i> (this is called automatically by BlitzMax during runtime, and since it's better to perform this stuff in batches, you're likely to be better off letting BlitzMax handle the management of object memory).<br><br>However, this rule does not apply to memory allocated with MemAlloc, MemExtend, etc. as that is outside the scope of the garbage collector.  Banks are basically managed wrappers of MemAlloc, so it's probably better to just stick with them.  However, it is worth mentioning.<br><br><i>Edit:</i> Some folks beat me to it, albeit with less helpful answers. <br><br></td></tr></table><br>
<a name="624816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Release goes hand-in-hand with HandleFromObject.  HandleFromObject increases the internal reference counter and returns an integer handle to an object.  you can use this integer handle with HandleToObject to convert it back into an object.  unlike HandleFromObject, HandleToObject does _not_ affect the reference counter.  if all object references to the object are set to null the object will still not be garbage collected until Release is called on the integer handle.  this works at all strict levels.<br><pre class=code>
SuperStrict
Framework BRL.Blitz

Type test
	Field i:Int=15
EndType

Local temp:test=New test ' reference count is 1
Local hTemp:Int=HandleFromObject(temp) ' reference count is now 2

temp=Null ' reference count is still 1
DebugLog(test(HandleToObject(hTemp)).i)
Release(hTemp) ' references are now 0
</pre> <br><br></td></tr></table><br>
<a name="624928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboommax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> you should probally read the docs... <br><br></td></tr></table><br>
<a name="624936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >maximo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> you just open your hand and drop it, simple as that.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
