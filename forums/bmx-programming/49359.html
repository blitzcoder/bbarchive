<!DOCTYPE html><html lang="en" ><head ><title >Calling an OS (Shell) command</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Calling an OS (Shell) command</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Calling an OS (Shell) command</a><br><br>
<a name="548777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Is there a way in BlitzMax to call an operating system (shell) command?  Such as opening Notepad/TextEdit, or running a BAT file or script?<br><br>I can' seem to find any Blitz command that does it.  I know we can probably import some system library, but I'd like to find something that is platform independant.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="548803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This should be considered unofficial, but there is a command in pub/stdc.mod called system_ which does work on Windows, and probably on the other OSes too (can't check right now):<br><br><pre class=code>
system_ "notepad.exe"
</pre><br><br>Should be easy enough to replace if Mark decides to add an official command of this nature. Something like the below would be even easier to replace, given that an official command may have separate executable path, parameters, launch flags, etc...<br><br><pre class=code>
' Quotes added automatically...

Function RunProgram (exe$, param$)
	Return system_ ("~q" + exe$ + "~q" + " " + "~q" + param$ + "~q")
End Function

' Assuming BlitzMax is in "C:\Program Files" here...

RunProgram "notepad.exe", "C:\Program Files\BlitzMax\versions.html"
</pre> <br><br></td></tr></table><br>
<a name="548804"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should work on Windows and Linux as system() is available on both (as far as I know, considering system() worked with my Linux setup I'm inclined to believe I'm right).  As for MacOS, that'll be up to someone who enjoys using a mac to find out. <br><br></td></tr></table><br>
<a name="548812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey thanks!  That does the trick.  The following works on my Mac:<br><br><pre class=code>
system_ "open /Applications/Calculator.app"
</pre> <br><br></td></tr></table><br>
<a name="548847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mirko</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> system_ does only work with about 95% of windows applications.<br><br>This is becaus it uses an infinite wait and does not handle windows messages while waiting.<br>There is an article about that topic on msdn.<br><br>If you for example try to start Travelbook5 using system_ both applications, the bm app and travelbook will hang after a few seconds.<br><br>I don't know if that can be considered to be a bug, its just not 100% correct ;-) <br><br></td></tr></table><br>
<a name="549212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gotcha.  Thanks for the warning.  I wonder if there is a similar problem on Mac OS X. <br><br></td></tr></table><br>
<a name="549251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rambo_Bill</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been doing this, don't know which is better.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Extern "Win32"
	Function _WinExec(lpCmdLine:Byte Ptr,nCmdShow:Int)="WinExec@8" 
End Extern

Shell("replacewithan.exe /yeppers")

Function Shell(sCMD:String)
	Local iShow:Int=3
	_WinExec(sCMD.ToCString(),iShow)
End Function
</textarea> <br><br></td></tr></table><br>
<a name="549281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AarbronBeast</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rambo_Bill, that's what I was referring to when I said "importing a library", but this is not platform independant (won't work on my Mac, for example).  It probably also hangs the way Mirko says it might.  By the way, which file do you import that your extern references? <br><br></td></tr></table><br>
<a name="549302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rambo_Bill</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uhm, that just works. I don't need to use any import. I have a WinAPI book and saw some other people who made API calls using the extern, so I tried it and it worked. I'm not sure how or why. It'd be great if I understood it better because I have some good stuff written using nothing but API calls that I could convert.<br><br>Alas, like most of Blitzmax stuff,it's undocumented. <br><br></td></tr></table><br>
<a name="549415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mirko</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is not how you call the program, it is how you wait for the programs end.<br><br>About 99% of all routines i found in the internet waited for the programs end with a infinite waitforsingleobject.<br>So about 99% of all routines do it like mark did it in his source.<br><br>I guess normally that is ok, as i really did find only one program (travelbook5) where it did not work.<br><br>I tried every possible solution to start an external programm using createprocess winexec, shellexecute, shellexecuteex etc.<br><br>Until i found out that the problem did not relay on the way you call the program but on the way you wait for it's end.<br><br>I finally wrote my own routine to call external programs which handles window messages and so it even works with travelbook5 ;-)<br><br>But as i don't care for multi-platform compatibility, as i use windows only, and have no intend to ever release one of my programs ;-), i did not make the code public, yet.<br><br>Mirko <br><br></td></tr></table><br>
<a name="549972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rambo_Bill</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, my preferred behavior for what I'm using it for would not wait. So I need to modify it to not wait. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
