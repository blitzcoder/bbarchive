<!DOCTYPE html><html lang="en" ><head ><title >audio equaliser</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >audio equaliser</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >audio equaliser</a><br><br>
<a name="925455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> what would be the best way of creating a graphic equalizer using Blitzmax? or at least get real time audio data for visualizations. there are quite a few audio libraries available for BM now, would one be better than another for this sort of thing?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most of them (well, all the ones I've done) give some kind of access to the live data. Perhaps just the current levels for L/R, or full access to the PCM data stream.<br><br>For example, BASS has BASS_ChannelGetLevel, which returns a 32bit number. The low and high words (16bits/0-32767) give the left and right levels.<br>I use that for the bouncy wotsit thing in my little net-radio app. <br><br></td></tr></table><br>
<a name="925464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean sound spectrum? FMOD supports this, give bruceys module a check on it - i've been successful in using it for visualizations based on target sound channels, as where BASS module doesn't (or didn't a few months ago) support sound spectrum for audio output...boo that.<br><br>Good luck. <br><br></td></tr></table><br>
<a name="925472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> where BASS module doesn't support sound spectrum <br></div><br>You mean like FFT data?<br><br>I'm sure that's what BASS_ChannelGetData() is for? <br><br></td></tr></table><br>
<a name="925478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll take a look at BASS then if it can do that (FFT spectrum stuff). i couldn't see it on your modules page though Brucey, where can i find it?<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i couldn't see it on your modules page though Brucey, where can i find it? <br></div><br>It's not "officially" released yet... :-)<br><br>But if you can figure out SVN, all mods, released and WIP, are to be found lurking around here : <a href="http://code.google.com/p/maxmods/source/checkout" target="_blank">http://code.google.com/p/maxmods/source/checkout</a><br><br>Note, you may <b>not</b> want to checkout all the modules, as there is a lot there. Pick and choose - unless you've plenty of bandwidth to waste :-)<br><br>If you aren't up on SVN, then you'll have to wait a bit longer for the release. Still some things to tidy up - although it's working rather well (at least for my uses). <br><br></td></tr></table><br>
<a name="925497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> BASS gives access to the FFT stuff :) <br><br>Pseudo code :- <br><br><pre class=code>
Global spectrum:TBank = CreateBank(2048)            ' bank for data transfer 

..
.
Function UpdateSpectrum()

' grab the FFT table
BASS_ChannelGetData(&lt;channel&gt;, spectrum.Buf(), BASS_DATA_FFT512)

' Step thru the 512
For Local i:Int = 0 To 512 Step 16 ' 
    Local val# = PeekFloat(spectrum, I) ' grab data in the range
Next

End Function

</pre><br><br>ChannelGetData can also grab the sample source too<br><br>Other options for getData<br>BASS_DATA_FFT256 = &amp;H80000000   ' 256 sample FFT<br>BASS_DATA_FFT512 = &amp;H80000001   ' 512 sample FFT<br>BASS_DATA_FFT1024 = &amp;H80000002  ' 1024 sample FFT<br>BASS_DATA_FFT2048 = &amp;H80000003  ' 2048 sample FFT<br>BASS_DATA_FFT4096 = &amp;H80000004  ' 4096 sample FFT<br>BASS_DATA_FFT8192 = &amp;H80000005  ' 8192 sample FFT<br><br>adjust your spectrum:Tbank size to accomodate the table size of course. <br><br></td></tr></table><br>
<a name="925509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i've downloaded and built the BASS module, however i can't get any of the examples to work because it can't find BASS.dll. Bass.dll is there in the lib/win32 folder, and i also copies it to the examples directroy to no avail. what am i missing?<br><br>and thanks stu, that looks like useful code :)<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Copy the BASS.DLL into the same folder that you compile and run your EXE from. <br><br></td></tr></table><br>
<a name="925537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Retimer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm sure that's what BASS_ChannelGetData() is for? <br></div><br><br>Hmm...when I was comparing bass and fmod looking to get this working the main dev of bass claimed it was only possible through recording devices and not sound output yet, maybe I misunderstood, or read an outdated post.<br><br>Bass is definitely a top choice then =p<br><br>edit: woops, i'm an idiot - I believe that was irrklang. <br><br></td></tr></table><br>
<a name="925538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> using Stus code, i get an error message (unable to convert bah.bass.tbasschannel to int on this line:<br><br>BASS_ChannelGetData(channel, spectrum.Buf(), BASS_DATA_FFT512)<br><br>the docs say i shouldbe sending a channel parameter, so i don't really understand what the problem is.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The module is wrapped in an OOP style - my preference, rather than a flat procedural style... although you can probably access most of it flat, if you really want to.<br><br>So, to use a channel, a TBassChannel, you would do something like :<br><pre class=code>
channel.GetData(bytearray, length)
</pre><br>which also returns number of bytes read.<br><br>Generally with all my mods, things like handles and pointers are hidden away, and you use Objects to access everything.<br><br>Anyhoo, that should work :-) <br><br></td></tr></table><br>
<a name="925614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your using Bruceys' OOP style and you want to call it direct use<br><br>BASS_ChannelGetData(channel.handle, spectrum.Buf(), BASS_DATA_FFT512)<br><br><br>I use Bruceys wrapper - but not the OOP stuff, as Im comfortable with the BASS raw calls.<br><br>If your just starting with BASS, then Id stick with Bruceys Objects. <br><br></td></tr></table><br>
<a name="925641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks guys :)<br><br>so far i've come up with this:<br><br><pre class=code>
Global spectrum:TBank = CreateBank(2048)   

...

channel.getdata(spectrum.Buf(),BASS_DATA_FFT512)
		For Local i:Int=0 To 512 
			Local h:Float=PeekFloat(spectrum,i)
			h=-Sqr((h))*3*100
			If h&lt;100 And h&gt;-100
				DrawRect i,300,1,h
			End If

		Next
</pre><br><br>added to the example6.bmx example that comes with the mod. some of the numbers that BASS produces are really big/small, so i'm having to cap the height quite a bit and not draw those. otherwise it looks ok.<br><br>i'm guessing there is a better way of using the data, but i can't figure out how to make those values it returns more usable.<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> throwing a step 4 at the for loop produces nicer results. It's really cool that this works with internet streams too. Awesome module Brucey :)<br><br>Cheers<br>Charlie <br><br></td></tr></table><br>
<a name="925762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> some pics of a day not doing what i should be doing...<br><br><img src="http://www.charliesgames.co.uk/visualiser.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser2.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser3.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser4.jpg"><br><br>having fun :) <br><br></td></tr></table><br>
<a name="925763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh. Pretty :-) <br><br></td></tr></table><br>
<a name="925865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jkrankie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> more pics, this time with an itunes-ey feel :)<br><br><img src="http://www.charliesgames.co.uk/visualiser5.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser6.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser7.jpg"><br><br><img src="http://www.charliesgames.co.uk/visualiser8.jpg"> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
