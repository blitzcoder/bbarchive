<!DOCTYPE html><html lang="en" ><head ><title >FBO to pixmap?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >FBO to pixmap?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >FBO to pixmap?</a><br><br>
<a name="1046604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to overcome some clipping issues with opengl drawing beyond the screen bounds on windows when using GrabImagePixmap()<br><br>I've got a render to texture example almost working but then I realized this is rendering directly to the openGL texture, and I don't know how to get that data back into a pixmap so I can save it...<br><br>Looks like FBO is what I need however I still don't know how to get the data back to a pixmap if I get this approach working either...<br><br>Can someone point me towards a complete example of how to perform drawing operations (drawimage, drawtext, drawline, etc.) and then capture the output to a pixmap without using GrabImage()? <br><br></td></tr></table><br>
<a name="1046627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe create an image with DYNAMIC_IMAGE flag and associate that pixmap to it? Worth a shot. <br><br></td></tr></table><br>
<a name="1046639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the texture is not bigger than the screen, draw it to the backbuffer and grabpixmap. <br><br></td></tr></table><br>
<a name="1046640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> the image IS bigger than the screen, and I'm experiencing clipping issues on windows (not mac interestingly), hence my need to avoid grabpixmap etc.<br><br>dynamic image flag does not work, as when you draw with open gl to a texture you're drawing directly to the texture, which skips the pixmap associated with the image. The pixmap comes out clear. <br><br></td></tr></table><br>
<a name="1046642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try setting up a bigger viewport and\or disabling the Scissor test, clipping etc.?<br><br><pre class=code>glDisable(GL_SCISSOR)</pre> <br><br></td></tr></table><br>
<a name="1046644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> viewport is set to the size I wish to grab off the backbuffer (larger than the screen)<br><br>glDisable(GL_SCISSOR) gives me an error saying it doesn't know what GL_SCISSOR is. Poked through some files and tried glDisable(GL_SCISSOR_TEST) instead, but no change, output is still clipped when I grab. <br><br></td></tr></table><br>
<a name="1046645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah dude I'm sorry. When I explained I messed up a bit. You need to use PBO (pixel buffer objects) not FBO. It's almost the same thing. The difference is that FBO's render to texture and thus can only be used later in the program from the video memory while you can use pixel buffer object to read the pixels with something like glReadPixels(you might want to pass the pixelmap.buffer or something like that).<br>And disabling the scissor won't work since this is a openGL issue (at least on windows). <br><br></td></tr></table><br>
<a name="1046646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> After much poking, and without knowing exactly what I've done it seems to be working now... I think the glDisable(GL_SCISSOR_TEST) combined with resizing some things got it up and going but it feels like a house of cards since I don't know quite which hammer swing made it work... I'm glad this isn't a key component of anything really big I'm working on :0)<br><br>Thanks for the help!<br><br>I think this topic is still worth keeping active to try to get a good render to target then target to pixmap feature flushed out... <br><br></td></tr></table><br>
<a name="1046652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually really need this and at one point I'll be writing one module myself if nobody else does. <br><br></td></tr></table><br>
<a name="1046667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If someone does create a render-to-target module, you absolutely must use FBOs. <br>They're fast (faster than glReadPixels and PBOs) and, nowadays, very supported. <br>Plus, their content does not (unwillingly) come back to the client (the CPU); part of the reason why they're fast.<br><br><div class="quote">  I think the glDisable(GL_SCISSOR_TEST) combined with resizing some things got it up and going but it feels like a house of cards since I don't know quite which hammer swing made it work... <br></div><br>Make sure to realize the order of the calls you're taking. Since OpenGL is a state-machine, the order in which the calls are made is very important.<br>I remembered the glOrtho() function (it's related to view clipping size), might be worth a look too - just be careful to set back the previous states when rendering regular things. <br><br></td></tr></table><br>
<a name="1046673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It had something to do with oversizing the canvas space and then not resizing it later, combined with disabling the scissor... I think...<br><br>as for rendering to texture there's some good code in the archives by klepto <a href="/codearcs.php?code=2222" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2222</a> that works when copy/pasted and I was making good progress integrating it with my existing code, but again, it doesn't render to a space you can get to without a grabpixmap so it's of no use for me at the moment... but a great starting point for render to texture for live use... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
