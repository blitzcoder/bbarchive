<!DOCTYPE html><html lang="en" ><head ><title >maxmod2 doesn't compile with MinGW GCC 4.4</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >maxmod2 doesn't compile with MinGW GCC 4.4</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >maxmod2 doesn't compile with MinGW GCC 4.4</a><br><br>
<a name="1003881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpavel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've submitted an issue on the Google Code page, but I'm cross posting here just in case REDi follows these forums, but doesn't check on the project page that much.<br><br>-------------<br>maxmod2 doesn't compile with MinGW GCC 4.4<br><br><b>What steps will reproduce the problem?</b><br>1. Use current MinGW GCC version, 4.4<br>2. Try to build maxmod2<br><br><br><b>What is the expected output? What do you see instead?</b><br><br>Expected a clean compile, got compile errors in file.cpp; once I added <br>stdio.h to maxmod2.h, it compiled, but later on caused various STL link<br>errors.<br><br><b>What version of the product are you using? On what operating system?</b><br><br>Maxmod2 1.07 on Windows <br><br></td></tr></table><br>
<a name="1003883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maxmod2 doesn't compile with MinGW GCC 4.4 <br></div><br>I'd beware using a version of MinGW that isn't yet officially supported by BlitzMax. <br><br></td></tr></table><br>
<a name="1003926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi jpavel<br><br>Interesting I'll take a look when I've got some time, but why do you need to use GCC 4.4? <br><br></td></tr></table><br>
<a name="1003928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  why do you need to use GCC 4.4?  <br></div><br>It's the current version of MinGW.<br><br>4.x is actually much better than the version we are using at the moment. <br><br></td></tr></table><br>
<a name="1003946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Last time I tried upgrading MingW I failed. You need to flush all the 3.x binaries and libs from the blitzmax folders, link with extra files which will compile blitzmax programs, that just segfault...<br><br><br>The topic title infers blitzmax runs with 4.4 just fine so maybe it is possible. <br><br></td></tr></table><br>
<a name="1003949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I just installed all the GCC 4.4 stuff (which was a pain in the arse) and all modules compiled fine and seem to be working here, including MaxMod2.<br><br>typing "gcc -v" in command prompt reveals this...<br><div class="quote"> <br>Using built-in specs.<br>Target: mingw32<br>Configured with: ../gcc-4.4.0/configure --enable-languages=c,ada,c++,fortran,jav<br>a,objc,obj-c++ --disable-sjlj-exceptions --enable-shared --enable-libgcj --enabl<br>e-libgomp --with-dwarf2 --disable-win32-registry --enable-libstdcxx-debug --enab<br>le-version-specific-runtime-libs --prefix=/mingw --with-gmp=/mingw/src/gmp/root<br>--with-mpfr=/mingw/src/mpfr/root --build=mingw32<br>Thread model: win32<br>gcc version 4.4.0 (GCC)<br> <br></div><br><br>So I assume it is actually using GCC 4.4<br><br>*EDIT* OSG seems to be linking a <i>bit</i> quicker now with GCC 4.4 and the latest ld and ar utils.<br><br>*EDIT AGAIN* Sorry my mistake, replacing the contents of the BlitzMax/libs folder with new libs breaks everything :( <br><br></td></tr></table><br>
<a name="1003956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpavel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for looking into it, REDi.<br><br>Hmm, on all the machines that I've tried with 4.4, I get the same errors. The standard BlitzMax modules rebuild fine.<br><br>Here's the result from my compile attempt:<br><br><pre class=code>
C:\&gt;echo %MINGW%
C:\MinGW

C:\&gt;C:\MinGW\bin\gcc -v
Using built-in specs. Target: mingw32
Configured with: ../gcc-4.4.0/configure --enable-languages=c,ada,c++,fortran,java,objc,obj-c++ 
--disable-sjlj-exceptions --enable-shared --enable-libgcj --enable-libgomp --with-dwarf2 --disable-win32-registry
 --enable-libstdcxx-debug --enable-version-specific-runtime-libs --prefix=/mingw --with-gmp=/mingw/src/gmp/root 
--with-mpfr=/mingw/src/mpfr/root --build=mingw32
Thread model: win32
gcc version 4.4.0 (GCC)

C:\&gt;bmk makemods -a maxmod2
Compiling:music.cpp
Compiling:file.cpp
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp: In member function 'virtual void cfile::Close()':
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp:6: error: 'fclose' was not declared in this scope
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp: In member function 'virtual int cfile::Eof()':
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp:7: error: 'feof' was not declared in this scope
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp: In member function 'virtual long int cfile::Position()':
C:/BlitzMax/mod/maxmod2.mod/maxmod2.mod/code/file.cpp:9: error: 'ftell' was not declared in this scope
etc...

</pre> <br><br></td></tr></table><br>
<a name="1003965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which BMK are you using?<br><br>The standard one, or Brucey's BMK NG?<br><br>When I try to recompile maxmod2 using Brucey's BMK NG, it errors out on me:<br><br><div class="quote"> <br>C:/Code/BlitzMax/mod/maxmod2.mod/dumb.mod/dumb/src/core/atexit.c:22:18: dumb.h: No such file or directory<br>C:/Code/BlitzMax/mod/maxmod2.mod/dumb.mod/dumb/src/core/atexit.c:23:27: internal/dumb.h: No such file or directory<br>Build Error: failed to compile (1) C:/Code/BlitzMax/mod/maxmod2.mod/dumb.mod/dum<br>b/src/core/atexit.c<br><br>Build Error: failed to compile (1) C:/Code/BlitzMax/mod/maxmod2.mod/dumb.mod/dumb/src/core/atexit.c<br> <br></div><br><br>Recompiling it with the standard BMK works OK. <br><br></td></tr></table><br>
<a name="1003966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yay, I've finally managed to reproduce your compile error, and fixed as you suggested with stdio and it does now compile.  But I'm getting loads of undefined reference to '_Unwind_*' linking errors for <i>everything</i> I build not just MaxMod2.<br><br>Is this the same linking problems you mentioned?<br><br>I'm thinking this might be a problem with libstdc++/libsupc++ or libgcc. <br><br></td></tr></table><br>
<a name="1003967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, I didn't know about that one xlsior <br><br></td></tr></table><br>
<a name="1003970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> xlsior, this <i>may</i> fix your BMK NG problem<br><br>dumb.bmx<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
SuperStrict

Rem  
bbdoc: MaxMod2.Dumb
about: This module provides cross platform module streaming, supported formats are MOD,XM,IT and S3M&lt;p&gt;
&lt;h2&gt;DUMB License&lt;/h2&gt;
&lt;table&gt;&lt;table width=100%&gt;&lt;td&gt;
Dynamic Universal Music Bibliotheque, Version 0.9.3&lt;p&gt;
Copyright (C) 2001-2005 Ben Davis, Robert J Ohannessian and Julien Cugniere&lt;p&gt;
This software is provided 'as-is', without any express or implied warranty.&lt;br&gt;
In no event shall the authors be held liable for any damages arising from the&lt;br&gt;
use of this software.&lt;p&gt;
Permission is granted to anyone to use this software for any purpose,&lt;br&gt;
including commercial applications, and to alter it and redistribute it&lt;br&gt;
freely, subject to the following restrictions:&lt;p&gt;
1. The origin of this software must not be misrepresented; you must not claim&lt;br&gt;
   that you wrote the original software. If you use this software in a&lt;br&gt;
   product, you are requested to acknowledge its use in the product&lt;br&gt;
   documentation, along with details on where to get an unmodified version of&lt;br&gt;
   this software, but this is not a strict requirement.&lt;p&gt;
   [Note that the above point asks for a link to DUMB, not just a mention.&lt;br&gt;
   Googling for DUMB doesn't help much! The URL is "http://dumb.sf.net/".]&lt;p&gt;
   [The link was originally strictly required. This was changed for two&lt;br&gt;
   reasons. Firstly, if many projects request an acknowledgement, the list of&lt;br&gt;
   acknowledgements can become quite unmanageable. Secondly, DUMB was placing&lt;br&gt;
   a restriction on the code using it, preventing people from using the GNU&lt;br&gt;
   General Public Licence which disallows any such restrictions. See&lt;br&gt;
   <a href="http://www.gnu.org/philosophy/bsd.html" target="_blank">http://www.gnu.org/philosophy/bsd.html</a> for more information on this&lt;br&gt;
   subject. However, if DUMB plays a significant part in your project, we do&lt;br&gt;
   urge you to acknowledge its use.]&lt;p&gt;
2. Altered source versions must be plainly marked as such, and must not be&lt;br&gt;
   misrepresented as being the original software.&lt;p&gt;
3. This notice may not be removed from or altered in any source distribution.&lt;p&gt;
4. If you are using the Program in someone else's bedroom on any Monday at&lt;br&gt;
   3:05 pm, you are not allowed to modify the Program for ten minutes. [This&lt;br&gt;
   clause provided by Inphernic; every licence should contain at least one&lt;br&gt;
   clause, the reasoning behind which is far from obvious.]&lt;p&gt;
5. Users who wish to use DUMB for the specific purpose of playing music are&lt;br&gt;
   required to feed their dog on every full moon (if deemed appropriate).&lt;br&gt;
   [This clause provided by Allefant, who couldn't remember what Inphernic's&lt;br&gt;
   clause was.]&lt;p&gt;
6. No clause in this licence shall prevent this software from being depended&lt;br&gt;
   upon by a product licensed under the GNU General Public Licence. If such a&lt;br&gt;
   clause is deemed to exist, Debian, then it shall be respected in spirit as&lt;br&gt;
   far as possible and all other clauses shall continue to apply in full&lt;br&gt;
   force.&lt;p&gt;
We regret that we cannot provide any warranty, not even the implied warranty&lt;br&gt;
of merchantability or fitness for a particular purpose.&lt;p&gt;
Some files generated or copied by automake, autoconf and friends are&lt;br&gt;
available in an extra download. These fall under separate licences but are&lt;br&gt;
all free to distribute. Please check their licences as necessary.&lt;p&gt;
&lt;/td&gt;&lt;/table&gt;
&lt;h2&gt;DUMB Information&lt;/h2&gt;
&lt;table&gt;&lt;table width=100%&gt;
&lt;tr&gt;&lt;th width=1%&gt;Author&lt;/th&gt;&lt;td&gt;Copyright (C) 2001-2005 Ben Davis, Robert J Ohannessian and Julien Cugniere&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;Website&lt;/th&gt;&lt;td&gt;http://dumb.sourceforge.net/index.php?page=about&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
End Rem
Module MaxMod2.Dumb
ModuleInfo "MaxMod: Dumb plugin module for MaxMod2"
ModuleInfo "Author: REDi - Cliff Harman"
ModuleInfo "CC_OPTS: -DDUMB_RQ_LINEAR"

Import MaxMod2.MaxMod2

import "dumb/include/*.h"
Import "dumb/src/core/atexit.c"
Import "dumb/src/core/duhlen.c"
Import "dumb/src/core/duhtag.c"
Import "dumb/src/core/dumbfile.c"
Import "dumb/src/core/loadduh.c"
Import "dumb/src/core/makeduh.c"
Import "dumb/src/core/rawsig.c"
Import "dumb/src/core/readduh.c"
Import "dumb/src/core/register.c"
Import "dumb/src/core/rendduh.c"
Import "dumb/src/core/rendsig.c"
Import "dumb/src/core/unload.c"

Import "dumb/src/helpers/clickrem.c"
Import "dumb/src/helpers/memfile.c"
Import "dumb/src/helpers/resample.c"
Import "dumb/src/helpers/sampbuf.c"
Import "dumb/src/helpers/silence.c"
Import "dumb/src/helpers/stdfile.c"

Import "dumb/src/it/itload2.c"
Import "dumb/src/it/itload.c"
Import "dumb/src/it/itmisc.c"
Import "dumb/src/it/itorder.c"
Import "dumb/src/it/itread2.c"
Import "dumb/src/it/itread.c"
Import "dumb/src/it/itrender.c"
Import "dumb/src/it/itunload.c"
Import "dumb/src/it/loadmod2.c"
Import "dumb/src/it/loadmod.c"
Import "dumb/src/it/loads3m2.c"
Import "dumb/src/it/loads3m.c"
Import "dumb/src/it/loadxm2.c"
Import "dumb/src/it/readmod2.c"
Import "dumb/src/it/readmod.c"
Import "dumb/src/it/reads3m2.c"
Import "dumb/src/it/reads3m.c"
Import "dumb/src/it/readxm2.c"
Import "dumb/src/it/readxm.c"
Import "dumb/src/it/xmeffect.c"

Import "glue.cpp"
Extern
	Function LoadMusic_Dumb:IMaxModMusic(Stream:IMaxModStream)
EndExtern

MaxModLoader.Create(TMusicDumb.Loader,"Tracker modules ~q.mod,.xm,.it,.s3m~q","mod,xm,it,s3m")
Type TMusicDumb Extends TMusic

	Function Loader:TMusic(Stream:IMaxModStream,Filename$)
		Select ExtractExt(filename).tolower()
			Case "mod","xm","it","s3m"
			Default Return Null
		EndSelect
		If Not Stream Return Null
		Local IMS:IMaxModMusic = LoadMusic_Dumb(Stream)
		If Not IMS Return Null
		IMS.AddRef()
		Local This:TMusicDumb = New TMusicDumb
		This.Music = IMS
		This.Stream = Stream
		Return This
	EndFunction

	Method Delete()
		If Music Music.RemoveRef()
	EndMethod

EndType
</textarea><br>I can't test ATM, because I've buggered up MinGW with GCC 4.4 ;) <br><br></td></tr></table><br>
<a name="1003971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jpavel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>But I'm getting loads of undefined reference to '_Unwind_*' linking errors for everything I build not just MaxMod2.<br><br>Is this the same linking problems you mentioned?<br> <br></div><br><br>Those are the errors I'm getting, but for me it was only for maxmod2... or it could be that the IDE was using the GCC 3.4.5 install that I had somewhere, and so built the BRL modules properly. <br><br></td></tr></table><br>
<a name="1003972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's what I get from building digesteroids (from the samples and doesn't use maxmod2)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Building digesteroids
Compiling:simplephysics.bmx
flat assembler  version 1.68  (914957 kilobytes memory)
3 passes, 26365 bytes.
Compiling:minitimer.bmx
flat assembler  version 1.68  (913961 kilobytes memory)
3 passes, 3426 bytes.
Compiling:dynamicgame.bmx
flat assembler  version 1.68  (913752 kilobytes memory)
3 passes, 5063 bytes.
Compiling:MathUtil.bmx
flat assembler  version 1.68  (913915 kilobytes memory)
3 passes, 3782 bytes.
Compiling:digesteroids.bmx
flat assembler  version 1.68  (913667 kilobytes memory)
3 passes, 65096 bytes.
Linking:digesteroids.exe
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(new_op.o): In function `Znwj':
C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/new_op.cc:58: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(new_opv.o): In function `Znaj':
C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/new_opv.cc:33: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o): In function `base_of_encoded_value':
/mingw/src/gcc-4.4.0/libstdc++-v3/../gcc/unwind-pe.h:118: undefined reference to `_Unwind_GetRegionStart'
/mingw/src/gcc-4.4.0/libstdc++-v3/../gcc/unwind-pe.h:114: undefined reference to `_Unwind_GetTextRelBase'
/mingw/src/gcc-4.4.0/libstdc++-v3/../gcc/unwind-pe.h:116: undefined reference to `_Unwind_GetDataRelBase'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o): In function `parse_lsda_header':
C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:59: undefined reference to `_Unwind_GetRegionStart'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o): In function `~end_catch_protect':
C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:736: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:436: undefined reference to `_Unwind_GetLanguageSpecificData'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:446: undefined reference to `_Unwind_GetIPInfo'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:707: undefined reference to `_Unwind_SetGR'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:709: undefined reference to `_Unwind_SetGR'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:710: undefined reference to `_Unwind_SetIP'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_personality.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_personality.cc:665: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_alloc.o): In function `_throw_concurrence_unlock_error':
/mingw/src/gccbf/mingw32/libstdc++-v3/include/ext/concurrence.h:110: undefined reference to `_Unwind_Resume'
/mingw/src/gccbf/mingw32/libstdc++-v3/include/ext/concurrence.h:110: undefined reference to `_Unwind_Resume'
/mingw/src/gccbf/mingw32/libstdc++-v3/include/ext/concurrence.h:110: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_alloc.o): In function `_throw_concurrence_lock_error':
/mingw/src/gccbf/mingw32/libstdc++-v3/include/ext/concurrence.h:100: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_alloc.o):/mingw/src/gccbf/mingw32/libstdc++-v3/include/ext/concurrence.h:100: more undefined references to `_Unwind_Resume' follow
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_throw.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_throw.cc:109: undefined reference to `_Unwind_Resume_or_Rethrow'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_throw.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_throw.cc:78: undefined reference to `_Unwind_RaiseException'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_globals.o): In function `get_global':
C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_globals.cc:51: undefined reference to `__emutls_get_address'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_globals.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_globals.cc:59: undefined reference to `__emutls_get_address'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_globals.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_globals.cc:63: undefined reference to `__emutls_get_address'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_catch.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_catch.cc:106: undefined reference to `_Unwind_DeleteException'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_catch.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_catch.cc:122: undefined reference to `_Unwind_DeleteException'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(eh_catch.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/eh_catch.cc:56: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libstdc++.a(vterminate.o):C:\MinGW\src\gccbf\mingw32\libstdc++-v3\libsupc++/../../../../gcc-4.4.0/libstdc++-v3/libsupc++/vterminate.cc:80: undefined reference to `_Unwind_Resume'
C:/BlitzMax/BlitzMax136/lib/libgcc.a(gthr-win32.o): In function `_gthr_win32_key_create':
C:\MinGW\src\gccbf\mingw32\libgcc/../../../gcc-4.4.0/libgcc/../gcc/config/i386/gthr-win32.c:112: undefined reference to `__mingwthr_key_dtor'
Build Error: Failed to link C:/BlitzMax/BlitzMax136/samples/digesteroids/digesteroids.exe
Process complete
</textarea><br><br>so it seems BlitzMax isn't ready for GCC 4.4, or maybe my GCC 4.4 is buggered :D <br><br></td></tr></table><br>
<a name="1003974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> xlsior, this may fix your BMK NG problem <br></div><br><br>Looks like it did -- thanks! <br><br></td></tr></table><br>
<a name="1004006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  so it seems BlitzMax isn't ready for GCC 4.4, or maybe GCC 4.4 is buggered <br></div><br>Well, to be honest, I've had BlitzMax running on MinGW with 4.x for a while now ;-)<br>But because some of the third-party libraries that I've modularised are quite old, not everything of mine will build - without fixing those libraries. So I've never really mentioned the whole 4.x thing here before...<br><br>:-) <br><br></td></tr></table><br>
<a name="1004234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I've had BlitzMax running on MinGW with 4.x for a while now ;-) <br></div><br>Cool! out of interest mate, what's the solution to these stdc/supc link errors?  Have you noticed much improvement using GCC 4.4? <br><br></td></tr></table><br>
<a name="1004383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, what version of MinGW is BlitzMax using anyway?<br><br>5.1.4 is the lowest version available atm, or what version should I use to avoid break the BlitzMax? <br><br></td></tr></table><br>
<a name="1004392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm also interested in upgrading from 3.4.5 to 4.4.x. Is there an automated installer for it? <br><br></td></tr></table><br>
<a name="1004452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there an automated installer for it? <br></div><br>Not officially AFAIK, but some unofficial...<br><br><a href="http://tdragon.net/recentgcc/" target="_blank">http://tdragon.net/recentgcc/</a><br><br>I haven't tried with this, but I think the SJLJ build would probably do it. <br><br></td></tr></table><br>
<a name="1004467"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried to install gcc 4.4.1, and had no problems recompiling maxmod2 using Brucey's bmk ng myself... Nor any of the other modules.<br><br>(When updating gcc, also make sure to copy ar.exe and ld.exe from the mingw\bin folder to blitzmax\bin) <br><br></td></tr></table><br>
<a name="1004485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="1004518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> What package do I need from the site? 4.4.1-tdm-2, SJLJ Unwinding, package "g++" and "core"? <br><br>Never installed that by hand. The exe installer doesn't let me continue. <br><br></td></tr></table><br>
<a name="1004527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 4.4.1-tdm-2, SJLJ Unwinding, package "g++" and "core"?  <br></div><br><br>I picked core, g++, objc and objc++, figured to add the last two just in case.<br><br>Ended up unzipping them into the existing MinGW directory structure (after backing it up), overwriting a ton of stuff in the process.<br><br>"gcc -v"  at the command line now returns this:<br><div class="quote"> gcc version 4.4.1 (TDM-2 mingw32) <br></div><br><br>Afterwards I was able to successfully re-compile all modules, including maxmod2, without errors. <br><br></td></tr></table><br>
<a name="1004533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the informations!<br><br>Can't recompile the modules (using normal bmx here.).<br>Any ideas?<br><br>"Compiling:blitz_app.c<br>gcc: CreateProcess: No such file or directory<br>Build Error: failed to compile C:/BlitzMax/mod/brl.mod/blitz.mod/blitz_app.c<br>Prozess abgeschlossen"<br><br>4.4.1 is installed. It is stated inside the ide and via gcc -v<br>Also I copied ar.exe and ld.exe from the mingw\bin folder to blitzmax\bin<br><img src="http://img96.imageshack.us/img96/4930/tempz.png"><br><br>I must have missed something on the way. :/<br><br>Apps compile fine though. - And much faster than before. <br><br></td></tr></table><br>
<a name="1004624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> For anyone interested, here is an archive of MinGW32 GCC 4.4.1 (from the TDM/MinGW Installer 1.908.0)<br><br><b>Rename your original MinGW and lib folders first, so you can retrieve them later.  I would also suggest using a separate install of blitzmax</b><br><br><a href="http://maxmod.googlecode.com/files/MinGW.rar" target="_blank">http://maxmod.googlecode.com/files/MinGW.rar</a><br><br>and the replacement lib folder for BlitzMax<br><br><a href="http://maxmod.googlecode.com/files/lib.rar" target="_blank">http://maxmod.googlecode.com/files/lib.rar</a><br><br>I also had to add<br><pre class=code>
Import "-lstdc++"
Import "-lgcc"
</pre><br>to brl.blitz.bmx for some reason.<br><br>Rebuild All Modules and that should be it! (you may want to rebuild bmk also)<br><br>*EDIT* oh, and don't forget to update ar and ld ;P <br><br></td></tr></table><br>
<a name="1004661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Redi. Did all steps and still get the strange error message:<br>"Compiling:blitz_app.c<br>gcc: CreateProcess: No such file or directory<br>Build Error: failed to compile C:/BlitzMax/mod/brl.mod/blitz.mod/blitz_app.c"<br><br>Do I need to use Brucey's bmk.exe or will the default one work? <br><br></td></tr></table><br>
<a name="1004663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I also had to add ... to brl.blitz.bmx for some reason. <br></div><br>The problem is due to the fact that libs need to be linked in a slightly different order for 4.x.<br>I had this problem when cross-compiling too, so my BMK should already be set up to handle this. <br><br></td></tr></table><br>
<a name="1004665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Bruce:<br>When using your bmk I get this error. Don't know if this helps...<br>"C:/BlitzMax/lib/libgcc.a(unwind-sjlj.o): In function `_gthread_key_create':<br>c:\crossdev\b4.4.1-tdm-1\build-sjlj\mingw32\libgcc/../../../../gcc-4.4.1/libgcc/../gcc/gthr-win32.h:585: undefined reference to `__mingwthr_key_dtor'<br>C:/BlitzMax/lib/libgcc.a(gthr-win32.o): In function `_gthr_win32_key_create':<br>c:\crossdev\b4.4.1-tdm-1\build-sjlj\mingw32\libgcc/../../../../gcc-4.4.1/libgcc/../gcc/config/i386/gthr-win32.c:112: undefined reference to `__mingwthr_key_dtor'" <br><br></td></tr></table><br>
<a name="1004836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Grisu<br><br>That's the error I get if I don't import libstdc++ and libgcc in blitz.bmx, I tried with BMK NG but that also gives me this problem, but adding the libs fixes it with both BMKs here.<br><br>You could try importing "-lgcc" at the top of the file you're trying to build. <br><br></td></tr></table><br>
<a name="1004920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any benefits to using gcc 4.4 over 3.x, e.g. optimisations, memory footprint, compile times?<br><br>Or is it worth spending a day on breaking my dev environment for, mid project? <br><br></td></tr></table><br>
<a name="1004940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> gcc 4.4 has a lot of internal optimizations which <i>may</i> result in speedups, but of course results will vary.<br><br>I'm seeing some slight differences in some of my programs, but nothing in others. <br><br></td></tr></table><br>
<a name="1010317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Finally got it working... :o)<br><br><img src="http://img36.imageshack.us/img36/1070/bild2b.png"><br><br>Hopefully GCC4 will be officially supported in the future. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
