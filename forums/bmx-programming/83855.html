<!DOCTYPE html><html lang="en" ><head ><title >long and integer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >long and integer</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >long and integer</a><br><br>
<a name="946660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a problem. I suspect it is a bug. it arouse from the need to find out if a long was also a negative. <br><br>this is the test:<br><br><pre class=code>

SuperStrict 
Local a:Int =  $7fffffff         '32 bit
Local b:Long = $7fffffff7fffffff '64 bit.

Print a
Print b

Print Hex(a)
Print Hex(b)

Print (long(a)&lt;b) ' this should print 1 but does not.

</pre><br><br>why is the long variable truncated into an integer?<br><br><br>****************sorrry about the edits I had to make it more clear ************ <br><br></td></tr></table><br>
<a name="946663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I'm not sure - but this looks OK to me.<br><br>a and b are both -1, since they are both settings all their bits to 1, which under the two's complement system is -1<br><br>The Hex() function takes an integer as an argument, so b is converted to an integer as it goes in.<br><br>a &gt; b is comparing apples with oranges unless they are converted to the same type at some stage. So you would expect the compiler to force b to an integer on the test. As things stand you really are asking if -1 &gt; -1 anyway?<br><br>But then again, I could be wrong by a country mile... <br><br></td></tr></table><br>
<a name="946664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry, wrong code. try it now.<br><br><div class="quote"> <br>a &gt; b is comparing apples with oranges unless they are converted to the same type at some stage<br> <br></div><br><br>to answer that, it should all  be converted to long according to the documentation. but I did an edit for that yust to show you. <br><br></td></tr></table><br>
<a name="946666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>SuperStrict 
Local a:Int =  $7fffffff         '32 bit
Local b:Long = $7fffffffffffffff:Long '64 bit.

Print a
Print b

Print Hex(a)
Print Hex(b)

Print (a&lt;b) ' this should print 1 but does not.
</pre><br><br>Fixed.  You forgot to specify that the number was a Long.  By default, numbers you specify are either integers or doubles (or floats, I can't remember what the rule is regarding floating point numbers). <br><br></td></tr></table><br>
<a name="946667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ha ha - your code switch sure baffled me. I posted and went "hang on"... I'm sure those numbers were different before!<br><br>Well it looks to me that it is converting b to integers at each level. To do so, it is just taking the leftmost bits.<br><br>If you change a to: $7effffff you'll see what I mean.<br><br>Whether this is the documented/intended behaviour I don't know - but it seems reasonable enough to me. I suppose the Print should ideally get it right though... <br><br></td></tr></table><br>
<a name="946668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or maybe I should just keep my mouth shut :-) Thanks for clearing that up Noel! <br><br></td></tr></table><br>
<a name="946670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nilium, thanks! flashback... Went down that road by myself before. can't believe I forgot. :) <br><br></td></tr></table><br>
<a name="946673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DavidDC</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Am I alone in thinking that it's a bit weird to have to tell the compiler twice you want a long? <br><br></td></tr></table><br>
<a name="946674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do too but I think it makes compiling faster while it don't have to figure out what you want sence it compiles from right to left. Don't quote me. I think I read that somewhere in the forums before. <br><br></td></tr></table><br>
<a name="946680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Am I alone in thinking that it's a bit weird to have to tell the compiler twice you want a long?  <br></div>I think this is mostly down to the most common number being an integer (and within the range of an integer), so it's probably faster in the long run; I don't know that that is the case though. The compiler might be able to be tweaked to recognize the context the number is in, but I'm not familiar with writing compilers and I won't try to claim that it's a good design decision, much less that it's easy to do. <br><br></td></tr></table><br>
<a name="946686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe that the new processors work with 64 bit registers but sence I have not looked at assembly language sence the 80586 processors I don't know anymore. if the language would take full advantage of that I would say that the 64 bit long would be fastest if the language would take advantage of that but that is just my opinion (full of ignorance now :)).<br><br>I guess backward compatability would make not so. <br><br></td></tr></table><br>
<a name="946688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Integers are by far the fastest. Even bytes are not usually faster despite being 1/4 the amount of memory access. I tested speeds of all types and Integer is fastest, and actually Longs are quite slow. I don't know if they would be any faster on a 64-bit system. <br><br></td></tr></table><br>
<a name="946691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> integers are placed in 32 bit registers as set by most computers except if it were to take advantage of the 64 bit registers if any. yes, I have read that the 64 bit architecture was not as fast as spected and that in "some" instances 32 bit is even faster but as I said, I am not up to date. So let me stop now. Don't hurt me please! :) <br><br></td></tr></table><br>
<a name="946696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> in assembly adding ebx(32 bit register) to eax(32 bit register)  is always faster than adding a memory address to a register respectively:<br>add eax,ebx<br>vs <br>add eax,[ebx]<br> the same goes for multiplication division and any comparison you can think of. and that is why they are faster but as I said. I am not familiar with the new architechture  so I can't quote on that. <br><br></td></tr></table><br>
<a name="946698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would assume that, for most scenarios, working with less data is always going to be faster than working with more data (in the case of 64-bit integers, twice as much data). <br><br></td></tr></table><br>
<a name="946700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes but how about in a multiplication when two 32 bit values return a 64 bit value:<br><br>mul eax,ebx<br>returns the result in two registers. I believe it to be in ecx and eax or is it edx. can't remember for shure correct my anybody if I am wrong.<br><br>and how about ax(16 bit register), al(8 bit register) ah(8 bit register) would you assume they are faster? they are not.<br><br>eax(32 bit register)  is faster than ax(16 bit register) and ax is faster than al(8 bit register) or ah(8 bit register) so why shouldn't a 64 bit register be any faster). That gentlemen is the problem.<br><br>I am almost shure that when Mark wrote his compiler he did it on the basis of a 32 bit arch which was the norm at the time and that is why integers are faster  for bmax and compilers previous to 64 bit arch.<br><br>although if bmax goes to 64 bit arch. and logic serves me wright then the current size of long would have to become integers????? :) <br><br></td></tr></table><br>
<a name="946798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> It USED to be the case that accessing bytes would be faster than accessing integers, but that was when a) there was much less cache, b) cpu speeds were really slow, and c) memory speeds were really slow. These days, architectures are designed to be specifically more optimized for a 32-bit operation and it takes `extra processing` to narrow it down to a byte. Like I said, accessing integers from memory is faster than bytes, despite being 1/4 the amount. It doesn't seem like it make sense but that's just how cpu's work nowadays.<br><br>And I agree, probably the Blitz compiler is just not a true 64-bit application and probably handles Longs as two separate integers glued together. I was hoping longs would be faster too, especially for moving large amounts of memory, but they're not. <br><br></td></tr></table><br>
<a name="946876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> probably the Blitz compiler is just not a true 64-bit application and probably handles Longs as two separate integers glued together <br></div><br><br>All of the blitz products are 32-bit -- no 64 bit versions, and they don't create 64-bit executables either.<br><br>Which is a bit unfortunate, since the market is slowly moving towards 64 bit operating systems now, being able to create native 64-bit executables (in addition to the current 32 bit versions) would be a major plus... :-? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
