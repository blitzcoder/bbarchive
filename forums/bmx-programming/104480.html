<!DOCTYPE html><html lang="en" ><head ><title >New and weird display bug on a few PCs</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >New and weird display bug on a few PCs</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >New and weird display bug on a few PCs</a><br><br>
<a name="1266238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, <br><br>Back in 2009 and in 2012 I made two games using BlitzMax. These games were made for French speech &amp; language pathologists and a few hundreds or thousands of each have been sold, and until a few weeks ago no one complained about them.<br><br>My second game is available for 2 years 1/2 and suddenly three new customers are reporting severe display bugs and can't use it at all. They all own not too old Win7 PCs. I've been trying to use OpenGL, DX7, DX9 and DX11 graphics drivers with no success. <br><br>Here's what the title screen should look like :<br><img src="http://pierrou.free.fr/mangemi_normal.png"><br>And here's what it looks like : <br><img src="http://pierrou.free.fr/bug_changemo.png"><br><br>I'm heavily using ViewPorts in my code and wonder if the trouble I'm in has anything to do with it. Other than that I have no clue at all.....<br><br>Do you have any idea??<br><br>If so, thanks in advance for your help! <br><br></td></tr></table><br>
<a name="1266264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Nothing obvious springs to mind as to why it would work for a couple of years and now there are issues but I've seen some strange bugs in my time that can stay hidden for no reason then become a show-stopper from a certain moment on.<br><br>As you can imagine, your description is a little vague, but you have start somewhere eh, so as a first stake in the ground to work from...<br><br><br>Looking at the two pics... the bottom window is wider and taller than the top, is that intentional or a side effect of the bug?<br>If its part of the bug, whats related to setting the size of the window? A graphic image? A windows API call?<br>Are all resources loading properly?<br>Are you using fixed file name paths?<br>Do you have error checks in place to check for resources loading correctly? An optional debugging log file is a MUST have when you have production code, and use it to dump megs of meaningful resource and data verfications - you can always set up your app to delete it afterwards when it next loads without the option of logging switched on.<br>It looks as though the background image ( the one with 'exposer' on it ) hasn't loaded properly. Are you taking any parameters from that image and doing anything with them? resizing maybe? Any TPixmap or TImage manipulations?<br>You say you're using SetViewport... Are you using CanvasGraphics and/or anything else tied to MaxGUI? SetViewport needs to be called after a window is resized? This still applies if the CanvasGraphics window size is changed without the main window being resized.<br><br>I'd also find out a bit more about the customer machine specifications too. CPU make and model, GPU make and model, memory, what version of the graphics driver they have etc. to see if there are similarities in machine spec. The info maybe be useless but you never know.<br><br>And to round off... I understand that you may not be able to do this but the best ( and usually most difficult ) thing  is to post a working example code that reproduces the bug. 'If' you can do that, it usually doesn't take long to find out where the error is. <br><br></td></tr></table><br>
<a name="1266266"></a>

<a name="1266267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for such a long answer! Yes the bottom window is indeed taller because the window size can be determined by the user in the prefs, to fit the screen size and the user's needs (it can't be resized during the game). It's somewhat silly but that's the way I designed it back then. If I were to start over I would use virtual resolution or something like that. <br><br>It does look as if the background image hasn't loaded properly, but in fact it has : the game just randomly displays words all over the title screen, it's intended to do so. The game never crashes nor asks for anything it can't find... <br><br>No pixmaps manipulations at all, no resizing either. No MaxGUI... I've asked about the specs and for myself couldn't find out similarities (don't have them with me right now)... <br><br>What I'm doing at startup is drawing and grabbing images of the sidebar's background, the title and things like that, and then display it as images. <br><br>The bug is there from the beginning of the game on three people's computers out of maybe 1000 people... I've never witnessed it myself. No particular part of the code goes wrong, the whole game does, from what users tell me... I have to add that the users are speech and language pathologists, not computer geeks, they don't answer my questions very accurately and sometimes do two or three weeks later. They are customers and just want it to work when they launch it... <br><br>I think I'm gonna try to make things more simple, and maybe stop using viewports, I can't see what else could lead to this... <br><br>I'm sorry not to be able to explain things more accurately, the game works absolutely flawlessly for years and suddenly it doesn't at all on just 3 machines... <br><br>Thanks very much again, I'll keep you informed... <br><br></td></tr></table><br>
<a name="1266268"></a>

<a name="1266269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats cool,<br><br>Just some ideas to look into...<br>Viewports could be the problem but its hard to say. They do work without error, but as per the ole cliche - never say never. It could also be a possible mathematical error ( viewport related or not ) that only shows up at certain resolutions and layout positions. Depending on how your calculate the positions of the borders etc its easy to over look a possible freak bug occuring under one off circumstances. Do you use a '9 patch' style to laying the frames? I'd triple check any math and triple check it again with different random settings and resolutions etc.<br><br>Do you know if the problem machines have similar but unusual resolutions set? <br><br></td></tr></table><br>
<a name="1266270"></a>

<a name="1266271"></a>

<a name="1266272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can see that some of the elements are correctly displayed (the shadows for example) and some get weirdly resized and duplicated. I'll try to watch it carefully. I can't get why texts look so bad neither, but I'll look at it closely too. You're absolutely right about checking the math and the screen resolutions, thanks again... Yes I think I'm using some kind of 9 patch routine for some of the display, I'll check it all. <br><br>The main problem is that I can't test anything myself and have to rely on a what a few busy and remote users can report... <br><br></td></tr></table><br>
<a name="1266288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seem to remember Grey Alien and GfK posting about viewport problems a number of years ago - supposedly (and this is going a long way back) there were known issues with the way viewports were implemented in blitzmax that were liable to cause problems in rare cases....I will look it up... <br><br></td></tr></table><br>
<a name="1266289"></a>

<a name="1266290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=62781#701838" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=62781#701838</a><br><br>Search under "viewport" by user Grey Alien....brings this up (see above)<br><br>And a host of others...<br><br><br>EDIT like this one:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=63264#706559" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=63264#706559</a> <br><br></td></tr></table><br>
<a name="1266327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also this thread: <a href="http://www.blitzbasic.com/Community/posts.php?topic=92585" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=92585</a> <br><br></td></tr></table><br>
<a name="1266333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pingus</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> From the screenshots (but more would be welcome to get a better idea), it looks like a code bug that would have hard time to adapt to a weird screen resolution rather than a video driver or bmax issue.<br>Do you know the screen resolution used by the customers ? Do they use multiple screen monitor system ? <br><br></td></tr></table><br>
<a name="1266334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanksto you all! I'm beginning to see what I have to do... Yes Pingus I've asked the users to try different window sizes and what their screen resolution they use, waiting for the answer right now. At first it really looked like a video driver issue, hence my message here, but now I think I must test my code bit by bit, it's very procedural and messy, no separated logic/display loops and things like that. I'll try to tidy it up a bit. I'm not proud of it but until now, it used to work...<br><br>Really thanks to  a lot for helping so quickly and efficiently... <br><br></td></tr></table><br>
<a name="1266337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pingus</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note that if your code rely on GraphicsModes() to get all the available resolutions, it may fail as this function return a limited number of possible res (32 ?). With nowadays screens/video cards, there are much more video mode available. <br><br></td></tr></table><br>
<a name="1266381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do yo use CreateCanvas() or MaxGui? <br><br></td></tr></table><br>
<a name="1266382"></a>

<a name="1266384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pierrou</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! No, I didn't. I'm not even scaling things neither. I see that some of the display problems occur when using ViewPort, but some other don't. I will probably take me a few hours but I guess I'll find out what's wrong with my code. What makes it difficult too is that the users don't have much time to test what I send them and sometimes reply one or two weeks later... Thanks, <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
