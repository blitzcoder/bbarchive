<!DOCTYPE html><html lang="en" ><head ><title >Saving Unicode Files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Saving Unicode Files</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Saving Unicode Files</a><br><br>
<a name="947849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, so I discovered that WriteSteam saves as ANSI by default and that I can do this to save in UTF-8:<br><br><pre class=code>
WriteStream("utf8::" + filename)
</pre><br><br>But how do I save as UTF-16?  If I do:<br><br><pre class=code>
WriteStream("utf16::" + filename)
</pre><br><br>I get an unhandled memory exception.<br><br>Thanks for any help.<br><br>I'm also about to encounter the issue where users can enter non-ASCII chars in their name and my game will crash when it tries to save their profile using those chars as the filename.  I was wondering if BMax V1.32 has Unicode IO support yet (Mark mentioned Unicode improvements)?  Anyone know?  Thanks. <br><br></td></tr></table><br>
<a name="947860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you had a look at the <b>SaveText$()</b> command? <br><br></td></tr></table><br>
<a name="947862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah just found it!  Thanks anyway.  What is particularly dumb is that I was using LoadText anyway! <br><br></td></tr></table><br>
<a name="948359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I was wondering if BMax V1.32 has Unicode IO support yet <br></div><br>I <a href="/posts.php?topic=82524" target="_blank">hope so</a>!! <br><br></td></tr></table><br>
<a name="948371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perfect timing as I'm about to release a Japanese version of Unwell Mel and the player names will contain Unicode chars and will need to write files containing those chars in the FILENAME (or was that supported already in V1.30?).<br><br>However, there may be some other issues with 1.32 to do with jerkiness in Windowed mode that may prevent me using this version (see the Fixed Rate Logic thread <a href="http://www.blitzbasic.com/Community/posts.php?topic=83511#948261" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=83511#948261</a> ).<br><br>But then again if the OpenAL memory leak has been fixed properly I'm tempted... <br><br></td></tr></table><br>
<a name="948375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> or was that supported already in V1.30? <br></div><br>No. 1.30 doesn't support non-ascii characters in filenames. <br><br></td></tr></table><br>
<a name="948429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Hi, so I discovered that WriteSteam saves as ANSI by default and that I can do this to save in UTF-8:<br><pre class=code>
WriteStream("utf8::" + filename)
</pre><br> <br></div><br>Interesting, where do you find this 'proto definition'?<br>I just opened TextStream.bmx and I found these one (nowhere in my documentation <strike>v1.32b</strike> v1.32 - I don't know if the latest release is updated...)<br><br><pre class=code>
		Case "latin1"
			encoding=TTextStream.LATIN1
		Case "utf8"
			encoding=TTextStream.UTF8
		Case "utf16be"
			encoding=TTextStream.UTF16BE
		Case "utf16le"
			encoding=TTextStream.UTF16LE
		End Select
</pre><br><br>So I suppose UFT16BE / LE must be used based on the platform (x86/PowerPC) - and are managed automatically by Blitmax?<br><br>Can SaveText use these proto (LATIN1:: UTF8:: UTF16:: )? LoadText should read it automatically? (Yes I know the answer - try it... but here is early morning and I'm still in Orfeo's world...) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
