<!DOCTYPE html><html lang="en" ><head ><title >Mouse Position with and without MaxGUI...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mouse Position with and without MaxGUI...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Mouse Position with and without MaxGUI...</a><br><br>
<a name="999791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would I get the mouse position if I do not know if the app is runnign MaxGUI or not?<br><br>If it is a graphics app, I can just use MouseX() and MouseY().  If I am using MaxGUI, the I can use the MouseMove event on the canvas.  But, what if I do not know of the program is using MaxGUI or not?<br><br>Is there a sure fire way to get the mouse position from the top left corner of the current graphics object whether it be a plain graphics window, or a MaxGUI canvas on a window? <br><br></td></tr></table><br>
<a name="999866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you add <b>EnablePolledInput()</b> to the top of your MaxGUI apps, <b>MouseX()</b> and <b>MouseY()</b> will work for MaxGUI canvases, just like with the Max2D graphics contexts. <br><br></td></tr></table><br>
<a name="999868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought there was a command that turned those functions on, I just couldn't remember it.<br><br>Thanks SebHoll. <br><br></td></tr></table><br>
<a name="1001048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This does not seem to return the correct coordinates.  It seems relative to the window, not the the active canvas. <br><br></td></tr></table><br>
<a name="1001051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tested it and even though my canvas is at 20, 20 in the window (not at 0,0), MouseX and MouseY are returning coords relative to the top left corner of the canvas, not the window. <br><br></td></tr></table><br>
<a name="1001123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Taskmaster: are you perhaps working on a canvas gadget for your GUI? :P <br><br></td></tr></table><br>
<a name="1001136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You keep asking that, but it makes no sense to me.  You can draw anywhere you want?!?!<br><br>Tell me exactly what you want it to do and how you would use it, and I will either make it for you or explain how you could do it with what is already there.<br><br>If you really want to draw to an image and have it displayed in a panel or a window, then just use a panel or a window, createan image and set it is the background of the panel/window.  Then if you want to draw on it, just draw to the pixmap of the image.  That functionality already exists in ifsoGUI.<br><br>If you need something more specific or something, you will have ot explain to me in a lot more detail what you are trying to do.<br><br>In your radar request, all you have to do is extend a panel gadget, then in the draw() method, call super.draw(), then draw your radar graphics.  Very easy to do. <br><br></td></tr></table><br>
<a name="1001137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about MoveMouse? <br><br></td></tr></table><br>
<a name="1001141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Leadwerks, MoveMouse...<br><br>Here is what i found and the fix I used.<br><br>The MoveMouse function does not send the event required for the Canvas, which causes the canvas to get screwy.  So, I sent the event myself.  Here is my MoveMouse function.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
	Rem
	bbdoc: Repositions the mouse cursor and emits a mouse move system event.
	about: This function exists because the MoveMouse/MoveVirtualMouse function does not cause an EVENT_MOUSEMOVE event to be emitted.
	End rem
	Function PositionMouse(X:Int, Y:Int)
		MoveVirtualMouse(X, Y)
		iMouseX = X
		iMouseY = Y
		Local e:TEvent = New TEvent
		e.id = EVENT_MOUSEMOVE
		e.x = X
		e.y = Y
		e.Emit()
	End Function
</textarea><br><br>Without the event being emitted, the Canvas does not know the mouse position has changed, which causes lots of weird things to happen. <br><br></td></tr></table><br>
<a name="1001157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I think this should be added internally.  If a hook was added inside the MoveMouse function, MaxGUI could access this and emit the event. <br><br></td></tr></table><br>
<a name="1001183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> In your radar request, all you have to do is extend a panel gadget, then in the draw() method, call super.draw(), then draw your radar graphics. Very easy to do. <br></div><br>100% agree with you. I have no doubts related to visualization part.<br>The "problem" is I need to catch an input too: relative mouse coordinates when a sort of MouseClick event occurs on the gadget. ;-)<br>Mouse coords data are used at internal library level: no related properties seem to be publically exposed to final user, if I don't get wrong.<br>I've no problems to extend the panel gadget, adding a MouseClick event, like button gadget has, but I'm opened to some hint for a clean management of mouse X and Y coords.<br>Thanks, and sorry for this boring OT. ;) <br><br></td></tr></table><br>
<a name="1001198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ifsoGUI Panels and Windows emit MouseMove and MouseDown/Up events. <br><br></td></tr></table><br>
<a name="1001203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks for this info. <br>I'm going to use a standard Panel and manually calculate the relative mouse position inside it. :-) <br><br></td></tr></table><br>
<a name="1001231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not hard to do, if you use GetAbsoluteXY, you will get the X,Y position of the panel, then you should be able to easily calculate the relative mouse position from there. <br><br></td></tr></table><br>
<a name="1001269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I did this way.<br>Thanks again! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
