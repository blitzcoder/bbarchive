<!DOCTYPE html><html lang="en" ><head ><title >floating point print function</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >floating point print function</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >floating point print function</a><br><br>
<a name="630402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im trying to create a function to print a floating point number with just as many decimal places as needed (ie. no trailing zeros at the end). This isn't specifically bmx related but in general i was wondering if there is an algorithm to do this. <br><br></td></tr></table><br>
<a name="630407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this:<br><br><pre class=code>
velocityDelta = (Double(SliderValue(vdStepper))/Double(200))-1
Local s:String = ""+velocityDelta
' truncate the string to include only 7 characters
s = s[..7]
print "Velocity Delta: "+s
</pre><br><br>only look for the decimal place and truncate based on it. <br><br></td></tr></table><br>
<a name="630409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The simpler version is a print with<br><br>left(string(float_number),instr(".",string(float_number)) + dec)<br><br>where dec is the amount of decimal places you want.<br><br>Cutting of all zeros is a little problem because in reality the computer will "never" have only zeros there ... (number representation can't be precise enough with float, not even double can ...) <br><br></td></tr></table><br>
<a name="630414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scott Shaver</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>

Print DecToString(5.635412512523)
Print DecToString(5.635412512523,2)
Print DecToString(5.635412512523,3)

Function DecToString:String(value:Double,places:Int=5)
	Return Left(String(value),Instr(String(value),".") + places)
End Function
</pre><br><br>5.63541<br>5.63<br>5.635 <br><br></td></tr></table><br>
<a name="630551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I knew I could just hack off some decimal  places like that, but you are losing some numbers in there. I want to get all the digits that are in the number, but the problem is if you just do something like Print 2.5 you get 2.50000000 or something. So i want Print 2.5 to be 2.5 and I think I've found a way but I still have to finalize it. <br><br></td></tr></table><br>
<a name="630558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is 2.4 for example does not exist as float and thus it can't work by definition of IEEE floating point ... <br><br></td></tr></table><br>
<a name="630566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean 2.4 isn't a float? <br><br></td></tr></table><br>
<a name="630576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> He means that the real number 2.4 cannot be expressed exactly as the value 2.4 when using the standard math (IEEE) routines available in blitz (and most other languages). 2.4 can only be approximated. <br><br></td></tr></table><br>
<a name="630581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom Darby</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sushimasta,<br><br>Probably not optimal, but fast enough:<br><br>1.  Convert the float to a string.<br>2.  Loop through the string character by character, starting at the "end" and working backwards:<br>2a. If the current character = "0" then continue;<br>2b. Else, this is your "trim point"; lop off everything after the current character and print what remains. <br><br></td></tr></table><br>
<a name="631216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rdodson41</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah tom I was thinking of doing something like that, but I didnt think of starting from the end so that might be what i need, thanks all <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
