<!DOCTYPE html><html lang="en" ><head ><title >which is faster using bytes or ints</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >which is faster using bytes or ints</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >which is faster using bytes or ints</a><br><br>
<a name="756557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is my interesting question since I am working on my emulator again!!!!!!, and want to optimize it to the "MAX" (No pun intended).<br><br>would the resulting assembler code from compiling be faster if 32 bit values are used or would smaller be faster?<br><br>If my PC is 32 bit, wouldnt 32bit "Fit" the CPU registers better and work faster? <br><br></td></tr></table><br>
<a name="756560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ints are faster (so sayeth the Sibly) <br><br></td></tr></table><br>
<a name="756581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depends on how you use the data that is stored in the Int, I think. If you store your data as bytes but you read a whole Int at a type and then use masking etc to isolate each part, that might well be faster than using all Int's since using all Int's is 4 times the amount of memory access. <br><br></td></tr></table><br>
<a name="756656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scaremonger</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you perform Int masking into Bytes? <br><br></td></tr></table><br>
<a name="756662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> out = ($44332211 shr 16) &amp; $ff will seperate $33 from the int.<br><br>shr 16 kicks the $2211 out (because that are 2 bytes (16 bits) which are moved away.<br>the remaining $00004433 gets masked by &amp; $ff, which blankens the $44. <br><br></td></tr></table><br>
<a name="756674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuietBloke</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know memory access is slow but I would have thought that modern CPU's with thier caching and looking ahead and whatever other 'magic' the Processor Pixies do that using ints would be faster then using ints and then shifting and masking them to get the data.<br><br>Of course I could be wrong.. Its something I do a lot. <br><br></td></tr></table><br>
<a name="756676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are storing the result of that in a byte you don't need the `&amp; $FF`. The byte automatically trims it. But you probably should use it anyway and store it in a Local Int variable, just because they're faster internally.<br><br>To get the first byte: out=$44332211 shr 24<br>To get the second byte: out=($44332211 shr 16) &amp; $FF<br>To get the third byte: out=($44332211 shr 8) &amp; $FF<br>To get the final byte: out=$44332211 &amp; $FF <br><br></td></tr></table><br>
<a name="756718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pantheon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can change the order as well:<br><br>out = (input &amp; $0000FF00 ) shr 08<br>out = (input &amp; $00FF0000 ) shr 16<br><br>ect...<br><br>This is the same method that im using for storing oppcodes in my emulator, and its realy fast. But then I can compare it to using entire ints. <br><br>Also as another speedup, avoid function calls. I have only two function calls and 3 masking operations for most instructions.<br>Also try and use the select statement, not successive Ifs because the compiler can them optimise more. <br><br></td></tr></table><br>
<a name="756730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a tip - Don't optimise it or worry about fiddly stuff like this until and unless you know that there is a problem.<br><br>Write it in the simplest and most generic way first.  Test it, then - if necessary - try out different optimisations.<br><br>It is a waste of time to over complicate something before you know that you need to. <br><br></td></tr></table><br>
<a name="756743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that's a matter of personal choice, some people like to make a general thing first and then optimize it while others like to get it right and finished with the first time. I tend to be the latter, unless I find after being satisfied with it, that it actually needs more improvement that I didn't expect. <br><br></td></tr></table><br>
<a name="756745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ints, Ints, Ints!<br><br><div class="quote"> <br>If you store your data as bytes but you read a whole Int at a type and then use masking etc to isolate each part<br> <br></div><br>This can be true - and it can be more convenient, eg: in the case of 'red shl 16 | green shl 8 | blue', but don't then go and do this:<br><br>Local red:Byte=color shr 16<br>Local green:Byte=color shr 8 &amp; 255<br>Local blue:Byte=color &amp; 255<br><br>...the vars won't be 'packed' in any way, and as soon as you need to do anything useful with them they'll have to be converted back to 32 bits (because we're using 32 bit CPUs!).<br><br>Instead, stick with Ints...<br><br>Local red:Int=color shr 16<br>Local green:Int=color shr 8 &amp; 255<br>Local blue:Int=color &amp; 255<br><br>So don't think of red, green and blue as 'bytes' packed into an Int, just think of them as compressed ints. <br><br></td></tr></table><br>
<a name="756746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallowed is the Sibly. <br><br></td></tr></table><br>
<a name="756792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes indeed. Your local variables that you use to read memory into, should be int's, even if you only are putting bytes in there.<br><br>Mark, how do Long's work? Are they just 2 int's? I think I found that copying Long's from memory to memory was a bit faster than copying Int's, maybe less loop overhead? Do Long's take any advantage of 64-bit buses or registers etc?<br><br>I agree you should use Int's for local variables, and then minimize memory usage using the smallest type possible, and move stuff to/from memory at least an int at a time.<br><br>Mark, is there any benefit to `pipelining` code, so you aren't waiting around for memory access to be finished from the previous instruction? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
