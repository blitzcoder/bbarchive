<!DOCTYPE html><html lang="en" ><head ><title >Tile Shading System -  Help please...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tile Shading System -  Help please...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Tile Shading System -  Help please...</a><br><br>
<a name="1124914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AvestheFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://dash.ponychan.net/chan/files/src/132822721164.png"><br><br>I have this system set up where each tile in my game has its own individual rgb value and that value allows me to apply shading on each of those tiles (and it effects any active object that might be overlapping that tile.<br><br>The system works perfectly but now I want to apply larger images as background objects (these images are larger than the 16 x 16 tile image. Example: houses, trees, wagons, large statues, etc) and I'd like to apply this shading system to those objects.<br><br>So I'm going to assume that in order to successfully do this I would have to take these larger images and somehow apply 16 x 16 sections and apply the shading system accordingly.<br><br>I dont want to have to throw these larger images into the tile image (that would take up some much needed room). so is there a way I can do this actively without risking massive memory abuse? <br><br></td></tr></table><br>
<a name="1124915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Going on this screen shot by Armitage 1982 for his MetaGolf game I would guess you could try the MOD2XBLEND mode:<br><br><img src="https://lh3.googleusercontent.com/-lV_OFDYzbYY/Ts5XLhtBa7I/AAAAAAAAA6c/0jL5xMMAmTU/s912/metagolfVortexNight.png"><br><br>Its pretty easy to add:<br><br>In mod\brl.mod\max2d.mod\driver.bmx add this line under SHADEBLEND:<br><pre class=code>Const MOD2XBLEND:Int=6</pre><br><br>In mod\brl.mod\d3d7max2d.mod\d3d7max2d.bmx add this:<br><pre class=code>		Case MOD2XBLEND
			device.SetRenderState D3DRS_ALPHATESTENABLE,False
			device.SetRenderState D3DRS_ALPHABLENDENABLE,True
			device.SetRenderState D3DRS_SRCBLEND,D3DBLEND_DESTCOLOR
			device.SetRenderState D3DRS_DESTBLEND,D3DBLEND_SRCCOLOR</pre><br>in the Select statement under the SetBlend Method.<br><br>In mod\brl.mod\d3d9max2d.mod\d3d9max2d.bmx<br><pre class=code>		Case MOD2XBLEND
			_d3dDev.SetRenderState D3DRS_ALPHATESTENABLE,False
			_d3dDev.SetRenderState D3DRS_ALPHABLENDENABLE,True
			_d3dDev.SetRenderState D3DRS_SRCBLEND,D3DBLEND_DESTCOLOR
			_d3dDev.SetRenderState D3DRS_DESTBLEND,D3DBLEND_SRCCOLOR</pre><br><br>In mod\brl.mod\glmax2d.mod add:<br><pre class=code>		Case MOD2XBLEND
			glEnable GL_BLEND
			glBlendFunc GL_DST_COLOR,GL_SRC_COLOR
			glDisable GL_ALPHA_TEST</pre><br><br>Then Build Modules...<br><br>In your own code, you can now call the blend by:<br><pre class=code>SetBlend MOD2XBLEND</pre><br><br>Any colour which is less than 128,128,128 will go darker, any colour higher will go brighter and if the colour is 128,128,128 it will be transparent... <br><br></td></tr></table><br>
<a name="1124918"></a>

<a name="1124919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AvestheFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> that looks pretty cool actually. but it also looks like it would effect everything on the screen. I'd like to apply shading to the foreground objects and not have it effect the background parallax gfx.<br><br>is there a way I can do that with this system?<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1124920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>I'd think the 'easiest' way would be to cut up the larger images into the smaller 16x16 sections.<br><br>I'd also imagine there is a more complicated approach that would mean using a large 'light image' blended over the tiles. TBH I think this would be even more wasteful.<br><br>As far as abusing memory goes, chopping up the larger images into smaller tiles probably won't waste much more than if you just use the larger image, I'd be more concerned with the cpu overhead ( speed, and memory usage if object oriented ), but I doubt that be noticeable unless its a real old system. <br><br></td></tr></table><br>
<a name="1124921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like your approach of having the tile as an RGB color instead of using a smooth light though :) <br><br></td></tr></table><br>
<a name="1124924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AvestheFox</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @col thanks :) took me a while to even come up with that system. Actually I think it was suggested to me months ago when I had created a topic about tile shading. If I could recall the person who suggested it I would credit him for it ;)<br><br>Anyway, I think I've got something figured out.<br><br>for each new image (and by that I mean the large background image) I would have the program read the images width and height and then divide it into 16x16 segments. and for each 16x16 segment it would create a new special tile with the image frame set to match that location<br><br>and all I'd have to do is set the rgb value of those special tiles.<br><br>I think that'll be my system of choice :) but I'm willing to hear other ideas on shading if anybody wants to contribute to the topic.<br><br>thanks!<br><br>oh lawdy, I just realized how much more work I just gave myself xD <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
