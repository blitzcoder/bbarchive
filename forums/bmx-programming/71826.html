<!DOCTYPE html><html lang="en" ><head ><title >OpenGL extension without using wglprocaddress?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >OpenGL extension without using wglprocaddress?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >OpenGL extension without using wglprocaddress?</a><br><br>
<a name="802709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to get the pointer to the extension function glDrawElementsInstancedEXT().  I used to use wglgetprocaddress() but then I started relying on Glew.  How do I do this in a way so that it works on all platforms?<br><br>I really need this answer.  For some reason retrieving the pointer to some functions corrupts some of my memory.  Something must be wrong:<br><br><pre class=code>Extern
	Function wglGetProcAddress:Byte Ptr(name$)="wglGetProcAddress@4"
EndExtern


SetGraphicsDriver GLGraphicsDriver(),GRAPHICS_BACKBUFFER|GRAPHICS_DEPTHBUFFER
Graphics 1024,768,0
glewInit()


Global glUniformBufferEXT(a%,b%,c%) "win32"
Global glDrawElementsInstancedEXT(mode_:Int,count_:Int,type_:Int,indices:Byte Ptr,primcount:Int) "win32"

glDrawElementsInstancedEXT=wglGetProcAddress("glDrawElementsInstancedEXT")
glUniformBufferEXT=wglGetProcAddress("glUniformBufferEXT")</pre> <br><br></td></tr></table><br>
<a name="802743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use glew.<br><pre class=code>
Import Pub.Glew

Function InitializeRenderer(..)
     glewInit()
End Function
</pre><br><br>glDrawElementsInstancedEXT will already be defined and will be loaded by glew after you call glewInit.  glewInit must be called <i>after</i> your context has been initialized.  That is, after GLGraphics or your preferred means of initializing the window. <br><br></td></tr></table><br>
<a name="802749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using new extensions that are not found in pub.glew. <br><br></td></tr></table><br>
<a name="802758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As long as you have "win32" it will never work, thats Windows COM call convention.<br><br>You need to get your stuff as "C" to use it outside the windows world.<br><br>Question is more if it is of use.<br>On the Linux side, definitely not, if you reside on stuff not even in the current glew version (might be that the one in BM is a little outdated), as the linux drivers are nowhere near the windows drivers.<br>On OSX, you might find answers on this topic on the Apple Dev page, where you will find other important informations (how to enable threaded opengl support which drastically raises the performance of your OGL apps for example) <br><br></td></tr></table><br>
<a name="802799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As long as you have "win32" it will never work, thats Windows COM call convention. <br></div>The function pointer returned by glgetprocaddress is a plain C function pointer. I can't find any connection with COM.<br><div class="quote"> On the Linux side, definitely not, <br></div><br>There is glXGetProcAddressARB  on Linux.<br><br>For the mac, check <a href="http://developer.apple.com/qa/qa2001/qa1188.html," target="_blank">http://developer.apple.com/qa/qa2001/qa1188.html,</a> they're talkinga bout aglGetProcAddress.<br><br>As far as I can tell it's just a matter of picking the right one depending on the platform.<br><br>EDIT:<br>In fact that's exactly what glew does. Lookup the definition of  glewGetProcAddress in glew.c.<br>It's a define so it can't be exported, but get inspiration from that to write a function that does just the same and you're basically done. <br><br></td></tr></table><br>
<a name="802903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I grabbed the latest version from Sourceforge and it compiled without a problem.<br><br>If anyone is interested, you just have to replace the old c files with the new ones from sourceforge (don't forget the includes), then add this to glew.bmx:<br><br><pre class=code>Global glUniformBufferEXT(a%,b%,c%)="__glewUniformBufferEXT"
Global glDrawElementsInstancedEXT(mode_:Int,count_:Int,type_:Int,indices:Byte Ptr,primcount:Int)="__glewDrawElementsInstancedEXT"</pre> <br><br></td></tr></table><br>
<a name="802936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis: yes it is plain C function pointer, but Leadwerks declared the function with "Win32" which is what I meant. <br><br></td></tr></table><br>
<a name="803072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "win32" has nothing to do with COM, if I'm not mistaken it makes your function pointer use the stdcall convention, rather than the cdecl convention. *This* is what I meant. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
