<!DOCTYPE html><html lang="en" ><head ><title >Extra window and Steam Overlay</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extra window and Steam Overlay</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Extra window and Steam Overlay</a><br><br>
<a name="1282499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting my game Platfinity ready for release on Steam, and noticed I am getting an extra window open in the background.  I got Steam achievements working via Skidracer's steamstub.dll, and the achievements are activating in my account, but there is no Shift-Tab notification in the corner, notifications don't pop up when an achievement is *ahem* achieved, and Shift-Tab does not bring up the Steam Overlay.  <br><br>I did some experiments with the code, seeing if I'm doing anything weird that's stopping the overlay, with no luck.  So I reduced the entire game to just setting the graphics and putting up a logo, and I still get a background window:<br><pre class=code>Graphics (1920, 1080) 

Incbin "IncludeAssets/Platform Logo Complete 004.png"
Global TextureTitleCompleted:TImage=LoadImage ("incbin::IncludeAssets/Platform Logo Complete 004.png", 0)

SetColor (255, 255, 255)
DrawImage (TextureTitleCompleted, 0, 0)
Flip

Delay (3000)

WaitKey</pre><br><br>I should note I do not get a background window when I compile and run in the IDE, only when I create the .exe and run the program from the .exe<br><br>Does anyone know why this background window opens up and is there any way to disable it or close it?<br><br>I know a few people have games on Steam, like Charlie (Scoregasm), therevills (Legends of Solitaire: Curse of the Dragons), and Grey Alien (Spooky Bonus).  I've tested Scoregasm and Legends and the Steam overlay works fine on my PC.  Maybe someone else has run into this problem?  And if so, how did you solve it?  Is this extra window blocking the overlay from hooking in?<br><br>Any help would be most appreciated! :) <br><br></td></tr></table><br>
<a name="1282501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In regards to the window, it sound like you are compiling your BlitzMax as a console app and not a gui app. <br><br></td></tr></table><br>
<a name="1282503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woah!  I think that worked.  <br>I'm not using any MaxGUI functions, so I must have unchecked that at some point thinking it had to do with those functions.  <br>I'm going to build through Steam again and see if the overlay comes up now :)<br><br>Thanks nitro! <br><br></td></tr></table><br>
<a name="1282507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, still no overlay.  The extra window is gone, but I'm still not getting the overlay and Shift-Tab doesn't do anything.  I must be doing something else wrong :/ <br><br></td></tr></table><br>
<a name="1282508"></a>

<a name="1282509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you running your game from within Steam itself?<br><br>Congrats on getting Greenlit - its a real PITA! ;) <br><br></td></tr></table><br>
<a name="1282510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I did the build through Steampipe, latest Steamworks SDK 1.35<br>I'm launching it through the Steam client.  <br>I have no idea why it isn't working. <br><br></td></tr></table><br>
<a name="1282511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!  Yeah, I was on Greenlight for six months or so.  It's getting easier now though I think :) <br><br></td></tr></table><br>
<a name="1282513"></a>

<a name="1282514"></a>

<a name="1282515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you try adding your game to your Steam client as a non-Steam game and see if that works?<br><br>Also try without the incbin. <br><br></td></tr></table><br>
<a name="1282516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, when I add it as a non steam game it works.  That is the shift tab popup comes up and the shift tab opens the overlay.  <br>I'll have to build something and upload it to avoid an incbin...all the assets are incbined except the game data.  You think the incbins might be a problem?<br>I don't think it matters, but my game is in the Software category not the Games category.  I have stuff in the Software category that the overlay works on though.  I wish it was easier to post images, heh <br><br></td></tr></table><br>
<a name="1282518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, uploaded just this as the .exe and still not getting an overlay:<br><pre class=code>Graphics (1920, 1080) 

Global TextureTitleCompleted=LoadImage ("IncludeAssets/Platform Logo Complete 004.png", 0)

Repeat 
	Cls
	DrawImage (TextureTitleCompleted, 0, 0)
	Flip
Until KeyHit (KEY_ESCAPE)


</pre><br>Starting to think maybe it's because it's in the Software category...maybe I should ask Valve in their forums if that's the case? <br><br></td></tr></table><br>
<a name="1282519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding that same .exe as a non-Steam game and I get the overlay and can do a screenshot:<br><a href="http://images.akamai.steamusercontent.com/ugc/405683244452444613/70C83EC6F84D998709DC4B9586628AA467633390/" target="_blank">http://images.akamai.steamusercontent.com/ugc/405683244452444613/70C83EC6F84D998709DC4B9586628AA467633390/</a> <br><br></td></tr></table><br>
<a name="1282520"></a>

<a name="1282521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats strange... I was hoping it would fail too.<br><br>Could you try setting the graphics driver:<br><pre class=code>
SetGraphicsDriver D3D9Max2DDriver()
Graphics (1920, 1080) 

Global TextureTitleCompleted=LoadImage ("IncludeAssets/Platform Logo Complete 004.png", 0)

Repeat 
	Cls
	DrawImage (TextureTitleCompleted, 0, 0)
	Flip
Until KeyHit (KEY_ESCAPE)
</pre><br><br>If that doesnt work try the OpenGL driver "SetGraphicsDriver GLMax2DDriver()"... and if that still doesnt work I would suggest posting on the Steam Developers Group forum and see if you need to do something special enabling Steam Overlay for Software category....<br><br>Also have you checked that the Overlay is enabled for your app? (Right click on the app and select properties. In there, one of the tabs says enable steam overlay for this game) <br><br></td></tr></table><br>
<a name="1282522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had tried setting different graphics drivers before...not since fixing the extra window problem...but before when I was looking for reasons why it wasn't hooking in...as Steam said you needed to create the graphics object before opening Steam.  Thanks for helping me with this! :D<br>I've posted on the Steam forum about it.  I'm now thinking it's the fact that it's in the Software category, as most of the Software I have on there does not use the overlay.  I'll post here if I get a reply there :) <br><br></td></tr></table><br>
<a name="1282523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you have Fraps or anything running in the background? <br><br></td></tr></table><br>
<a name="1282524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, forgot the second question.  Yes, the overlay is enabled, the box is checked in properties. <br><br></td></tr></table><br>
<a name="1282525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, no Fraps.  Disabled the nVidia control panel too, as I know that can do capture. <br><br></td></tr></table><br>
<a name="1282526"></a>

<a name="1282527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> G'ah! Thought it might be something like Fraps as I found this Steam thread, with this question:<br><br>"My steam overlay seems to refuse to work in the official steam version of the game, but the DRM-free version when added as a non steam game does work"<br><br><a href="https://steamcommunity.com/app/242920/discussions/0/540734168223520249/#p1" target="_blank">https://steamcommunity.com/app/242920/discussions/0/540734168223520249/#p1</a><br><br>So if you run any other game from your Steam client, the overlay currently works? <br><br></td></tr></table><br>
<a name="1282528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it works with the other games, including the Legends one from you and Scoregasm. <br><br></td></tr></table><br>
<a name="1282529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry I'm out of ideas :(<br><br>I didnt have to do anything special myself to get the overlay working. One final idea, could you create an app not using BlitzMax (MonkeyX, PureBasic etc) and see if that works?<br><br><br>Hopefully the Steam group helps... let us know if they have any other ideas... <br><br></td></tr></table><br>
<a name="1282530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, that's a good idea...didn't think of that.  I could try some Monkey code.  I could probably figure out how to draw a title screen in GameMaker too, heheh  If I don't get a better plan from Steam I'll try that.<br><br>I'll post here if I get something back from the Steam forums.  Thanks again for the help! <br><br></td></tr></table><br>
<a name="1282556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> The default spacewar game id may be useful for testing basic steam functions if you think it is an account issue. <br><br></td></tr></table><br>
<a name="1282576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm still waiting for a response on the Steamworks Development forum.  I'm thinking it's because it's listed in "Software" instead of "Games" since the overlay works fine when I add it as a non-Steam game which means the overlay can work over the code... if it wants to, heheh <br><br></td></tr></table><br>
<a name="1283383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> How did you go with this issue? <br><br></td></tr></table><br>
<a name="1283399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Almost two weeks and no response on the Steam group :/<br><br>I have another friend who has a Steam app in Software, just haven't had time to ask him about it yet.  I haven't touched the code either, been working all the time since I do retail and it's Christmas season.  Should get some time after Thanksgiving and black Friday :) <br><br></td></tr></table><br>
<a name="1283407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Call Steam_RunCallbacks() each loop. <br><br></td></tr></table><br>
<a name="1283409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Almost two weeks and no response on the Steam group :/ <br></div><br>Maybe try using a different tool (like GM...)<br><br><div class="quote"> Call Steam_RunCallbacks() each loop.  <br></div><br>In my main loop I have this:<br><pre class=code>
		If UsingSteam
			ReadSteamWrapper()
			StoreSteamStatsWrapper()
		End If
</pre><br><br>Those Wrapper functions are defined as follows:<br><pre class=code>
Function ReadSteamWrapper()
	Local read:String = ReadSteam()
	If Not SteamIsActive
		If read.ToLower() = "stats received!"
			SteamIsActive = True
			DebugLog "Steam: SteamIsActive = True"
		End If
	EndIf
End Function

Function SetSteamAchievementWrapper(name:String)
	'Do not call this until ReadSteam has returned "stats received"
	If Not SteamIsActive Then Return
	
	SetSteamAchievement(name)
	StoreStats = True
End Function</pre> <br><br></td></tr></table><br>
<a name="1283574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just now getting time to look at this...<br><br><div class="quote"> Call Steam_RunCallbacks() each loop. <br></div><br>I don't see that anywhere in the steamstub stuff.  Is there a function for that in steamstub?<br><br>@therevills: My code looks similar to what you're doing there. It checks to see if Steam is active, reads steam each loop, and stores stats when there are achievements unlocked.  <br><br>I tried making some code in Monkey, and uploaded it through steampipe as Platfinity.exe  Unfortunately, still no overlay.  <br><br>I also spoke to my friend who has an app in Software.  He said he didn't know why it didn't work, that it may be the same as Tools, i.e. no overlay by default.  He said Steam might have to do something on their end to make it work.  So I will ask them again once I have all the Trading Cards, backgrounds, etc. made.  They may be more responsive when they see it's about to go live.  I hope so anyway :P <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
