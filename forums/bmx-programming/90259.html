<!DOCTYPE html><html lang="en" ><head ><title >how good is SavePixmapPNG?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >how good is SavePixmapPNG?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >how good is SavePixmapPNG?</a><br><br>
<a name="1025747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was doing some testing to create a single file with compressed PNG files but the results I got were not what I expected.<br>My tests included loading a file into a bank to view the size, converting the bank file into an image, extracting the pixmap, compressing the pixmap file back into a PNG and storing the file in a bank.<br><br>the problem I am running into is that the newly created PNG is twice as large as the original.<br>this is the code:<br><pre class=code>
Local bank:TBank = TBank.Load("tileset.png")
Print  bank.size()
Local bank2:TBank = TBank.Create(0)
Local stream:TStream = TBankStream.Create(bank2)
If stream = Null End
Local im:TImage = LoadImage(bank)
Local pixmap:TPixmap = LockImage(im)
SavePixmapPNG( pixmap,stream,9)
Print bank2.size()
Local image:TImage = LoadImage(bank2) 
Graphics 800,600
DrawImage image,0,0
Flip()
WaitKey()
</pre><br><br>Im I doing something wrong? or is the PNG module a little bit outdated and not as efficient as the current PNG algorithm? the original file algorithm is from the Paint.Net program.<br><br>If that is the case, this is going to be useless to me for what I am doing. <br><br></td></tr></table><br>
<a name="1025761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are different sub-types of PNG compression, depending on the encoder and its settings.<br><br>Even though PNG is a lossless format, the resulting file size can differ based on whether an image is stored in interlaced mode, whether or not it DEFLATEs, whether or not any predictive filters are applied first, whether or not the Alpha channel is included, etc.<br><br>Some of those compression methods are more space-efficient, but are much more CPU intensive and will take longer to complete.<br><br>If your savepng files end up larger than the original, then it appears that the blitzmax implementation may favor speed over size... It doesn't appear that you can tweak any of the specific features for the output file. <br><br></td></tr></table><br>
<a name="1025857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks xlsior. I just thought the compression settings would take care of that. Anyway, I already figured out a way to get around it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
