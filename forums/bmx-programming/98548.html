<!DOCTYPE html><html lang="en" ><head ><title >BlitzMax Doxygen</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzMax Doxygen</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BlitzMax Doxygen</a><br><br>
<a name="1152048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SystemError51</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's been a while since I've been posting into this category, I also couldn't find anything on the subject.<br><br>Some of you may be familiar with a little something called <a href="http://www.stack.nl/~dimitri/doxygen/" target="_blank">Doxygen</a>. It is a very clever source code parsing tool that creates nicely designed documentation for you, in HTML and LaTeX. I'm sure some of you are using it as it is easy as pie to maintain documentation in large-scale projects.<br><br><div class="quote"> Doxygen is a documentation system for C++, C, Java, Objective-C, Python, IDL (Corba and Microsoft flavors), Fortran, VHDL, PHP, C#, and to some extent D. <br></div><br><br>Now the question is, if anyone has ever created something similar to that for BlitzMax, or if someone came across a tool like that? It would be very advantageous for a lot of people, I would say.<br><br>I'm wondering about this since I'm back on B/Max, so any insight is as always appreciated and taken on board. <br><br></td></tr></table><br>
<a name="1152053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a document generator built in to Blitzmax.  Can't recall the ins and outs at the minute though. <br><br></td></tr></table><br>
<a name="1152059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep. If you click on 'source' at the top of most of the Bmax help pages, you'll see the source for that particular module. Look for 'bbdoc:' inside rem/end comment blocks.<br><br>Russell <br><br></td></tr></table><br>
<a name="1152194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a simple php script which parses my bmx sources, handles globals, child variables/methods/functions, comments ...<br><br>Using your own parser is a nice way to allow custom documentations (I needed a documentation about lua-readable/writeable objects - so I also parse {metatags}). Also nice is the possibility to vary the documentation style (@param, ...). "Ignore patterns" are also nifty - if you don't like to document some external libs (bruceys mods, some other helper libs).<br><br>Parser and template filling took only some hours to code - and it fits 100% of your needs at the end - may be that is a possibility for you.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1152260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SystemError51</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would it be possible for you to share that little PHP gem with me? <br><br></td></tr></table><br>
<a name="1152458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some things could be improved but it does what it should for me.<br><br>It works for things like: <br><pre class=code>
'Summary: all kind of characters walking through the building (players, terrorists and so on)
Type TFigures {_exposeToLua="selected"}
	Field Name:String		= "unknown"
	Field pos:TPosition		= TPosition.Create(0.0,0.0) {_exposeToLua}		'pos.y is difference to y of building
	Field dx:Float			= 0.0 'pixels per second
	Field initialdx:Float	= 0.0
	field target:TPosition	= TPosition.Create(-1,-1) {_exposeToLua}
...
</pre><br><br><br>index.php<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?php  header("Content-Type: text/html; charset=utf-8"); ?&gt;
&lt;?
	$ignoreTypes = array("TxmlError", "TxmlXPathContext", "TTCPStream", "TSockAddr");
	$ignoreFiles = array(	"/source/external/libxml/libxml.bmx",
							"/source/external/persistence.mod/persistence.bmx",
							"/source/external/bnetex/bnetex.bmx",
							"/source/basefunctions_zip.bmx"
						);


	$action	= isset($_GET["action"]) ? $_GET["action"] : "index";
	$path	= isset($_GET["mainfile"]) ? $_GET["mainfile"] : "";

	switch($action) {
		case "build":
					BuildDoc($path);
					break;
		default:
					ShowIndex();
					break;
	}


	function BuildDoc($path) {
		global $ignoreTypes;
		global $ignoreFiles;
		require_once("includes/parser.class.php");

		$export = "ALL";
		if(isset($_GET["onlyLua"]) &amp;&amp; $_GET["onlyLua"] ==1)
			$export = "LUA";


		$result = "&lt;pre&gt;";
		$result.= parser::parse($path, dirname(parser::MyRealPath($path)), $ignoreFiles);
		$result.= "&lt;/pre&gt;";
		$template = file_get_contents("template.html");

		parser::$data["currentLines"] = null;

		$elementMethodsBox = "
			&lt;div id='element' class='even%even%'&gt;
				&lt;div id='header' class='even%even%'&gt;
					&lt;div id='wrapper' class='%LUA%'&gt;
						&lt;span id='typeString'&gt;%type%&lt;/span&gt;
						&lt;span id='name'&gt;%name%&lt;/span&gt;
						&lt;span id='returns'&gt;%returns%&lt;/span&gt;
						&lt;span id='params'&gt;( %params% )&lt;/span&gt;
						&lt;div class='clear'&gt;&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				%comment%
			&lt;/div&gt;
		";

		$elementVarsBox = "
			&lt;div id='element' class='even%even%'&gt;
				&lt;div id='header' class='even%even%'&gt;
					&lt;div id='wrapper' class='%LUA%'&gt;
						&lt;span id='typeString'&gt;%type%&lt;/span&gt;
						&lt;span id='name'&gt;%name%&lt;/span&gt;
						&lt;span id='varType'&gt;%varType%&lt;/span&gt;
						&lt;div class='clear'&gt;&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				%comment%
			&lt;/div&gt;
		";



// extends -&gt; funktion etc in grau anzeigen

		$result = "";
		foreach(parser::$data["foundTypes"] as $name=&gt;$type) {
			if(in_array($name, $ignoreTypes)) { continue; }

			$luaForType = "";
			if ($type-&gt;hasMetaKey("_exposetolua")) {
				//print $type-&gt;name." meta: ".$type-&gt;getMetaKey("_exposetolua")."&lt;br /&gt;";
				switch($type-&gt;getMetaKey("_exposetolua")) {
					case "" :			$luaForType = "LuaAll";break;
					case "selected" :	$luaForType = "LuaSelected";break;
					default:			$luaForType = "";break;
				}
			}

			if($export == "ALL" OR ($export=="LUA" AND $luaForType&lt;&gt;"")) {
				$result.="&lt;div id='type'&gt;";
				$result.="	&lt;div id='header'&gt;";
				$result.="		&lt;span id='name' class='$luaForType'&gt;$name&lt;/span&gt;";
				$result.="		&lt;span id='comment'&gt;{$type-&gt;comment}&lt;/span&gt;";
				$result.="	&lt;/div&gt;";
				$result.="	&lt;div id='elements'&gt;";
			}
			usort($type-&gt;children, 'compare_byName');

			$even = 0;
			foreach($type-&gt;children as $name=&gt;$func) {
				$even = 1-$even;
				$comment = $func-&gt;comment &lt;&gt; "" ? "&lt;div id='comment'&gt;".$func-&gt;comment."&lt;br /&gt;&lt;/div&gt;" : "";
				$meta = count($func-&gt;meta)&gt;0 ? "&lt;div id='meta'&gt;".$func-&gt;getMetaString()."&lt;br /&gt;&lt;/div&gt;" : "";

				$lua = "";
				if($luaForType &lt;&gt; "") {
					if ($luaForType == "LuaAll") {
						$lua = "LuaAll";
					}else{
						if ($func-&gt;hasMetaKey("_exposetolua")) {
							switch($func-&gt;getMetaKey("_exposetolua")) {
								case "" :			$lua = "LuaAll";break;
								case "selected" :	$lua = "LuaSelected";break;
								default:			$lua = "";break;
							}
						}
					}
				}

				//fill non-vars
				if(in_array($func-&gt;getType(), array("method", "function", "type"))) {
					$replaceA = array("%even%", "%type%","%name%","%returns%","%params%", "%comment%", "%meta%", "%LUA%");
					$replaceB = array($even, $func-&gt;getType(),$func-&gt;name,$func-&gt;returns &lt;&gt; "" ? ":".$func-&gt;returns : "",$func-&gt;params, $comment, $meta, $lua);
					if($export == "ALL" OR ($export=="LUA" AND $lua&lt;&gt;""))
						$result.= str_replace($replaceA, $replaceB, $elementMethodsBox);
				}else{
				//fill vars
					$replaceA = array("%even%", "%type%","%name%","%varType%","%comment%", "%meta%", "%LUA%");
					$replaceB = array($even, $func-&gt;getType(),$func-&gt;name,$func-&gt;varType &lt;&gt; "" ? ":".$func-&gt;varType : "",$comment, $meta, $lua);
					if($export == "ALL" OR ($export=="LUA" AND $lua&lt;&gt;""))
						$result.= str_replace($replaceA, $replaceB, $elementVarsBox);
				}
			}
			$result.="	&lt;/div&gt;";
			$result.="&lt;/div&gt;";
		}

		$template = str_ireplace("%content%", $result, $template);

		print $template;
	}

	function compare_byName($a, $b){
		return strnatcasecmp($a-&gt;name, $b-&gt;name);
	}

	function ShowIndex() {
		print getHtmlHeader("Index");

		print "		&lt;form method='get'&gt;\n";
		print "			&lt;label for='mainfile'&gt;Projektdatei&lt;/label&gt;\n";
		print "			&lt;input type='' name='mainfile' id='mainfile' value='/ABSOLUTEPATH/mainfile.bmx' style='width:400px;'/&gt;&lt;br /&gt;\n";
		print "			&lt;label for='onlyLua'&gt;Exportieren:&lt;/label&gt;\n&lt;select name='onlyLua'&gt;&lt;option value='1'&gt;Nur Lua&lt;/option&gt;&lt;option value='0'&gt;Alles&lt;/option&gt;&lt;/select&gt;&lt;br /&gt;\n";
		print "			&lt;label for='mainfile'&gt;Aktion&lt;/label&gt;\n";
		print "			&lt;input type='hidden' name='action' value='build' /&gt;\n";
		print "			&lt;input type='submit' value='abschicken' /&gt;\n";
		print "		&lt;/form&gt;\n";
		print getHtmlFooter();
	}



	function getHtmlHeader($title) {
		$result = '&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;'."\n";
		$result.= "&lt;html xmlns='http://www.w3.org/1999/xhtml'&gt;\n";
		$result.= "&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;\n";
		$result.= "	&lt;head&gt;";
		$result.= "		&lt;title&gt;$title&lt;/title&gt;";
		$result.= "	&lt;/head&gt;";
		$result.= "	&lt;body&gt;";
		return $result;
	}

	function getHtmlFooter() {
		$result = "	&lt;/body&gt;";
		$result.= "&lt;/html&gt;";
		return $result;
	}

?&gt;
</textarea><br><br><br>includes/parser.class.php<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?
require_once("dataobject.class.php");


class parser {
	static $patterns = array(
						'includes'			=&gt; "/\b(Import|Include).*?\"(?P&lt;name&gt;.*?).bmx\"/i",
						'typesSingle'		=&gt; "/type\b\s(?P&lt;name&gt;[a-zA-Z0-9_ \{\}]+)/i",
						'fieldAndConst'		=&gt; "/(field|global)\s+(?P&lt;name&gt;\w+)\s*:\s*(?P&lt;type&gt;\w*)/i",
						);
						/* unused
						'methods'			=&gt; "/(.*?Rem\b[?P&lt;doc&gt;.*?][EndRem|End Rem])?[\n|\r\n|\n\r]?[ \t]?\bmethod\s(?P&lt;name&gt;.*?)[\n|\r\n|\n\r](?P&lt;content&gt;.*?)end\s?method/si",
						'comments'			=&gt; "/.*?Rem(?P&lt;content&gt;.*?)End\s?Rem/si",
						'types'				=&gt; "/[ \t]?\btype\s(?P&lt;name&gt;[a-zA-Z0-9_ \{\}]+)[\n|\r\n|\n\r](?P&lt;content&gt;.*?)end\s?type/si",
						'functions'			=&gt; "/[ \t]?\bfunction\s(?P&lt;name&gt;.*?)[\n|\r\n|\n\r](?P&lt;content&gt;.*?)end\s?function/si",
						*/
	static $data = array();

	function MyRealPath($path) {
		$pattern = '/\w+\/\.\.\//';
		while(preg_match($pattern,$path)){
			$path = preg_replace($pattern, '', $path);
		}
		return $path;
	}

	public function parse($file,$baseUrl, $ignoreImports=null) {
//		print "parsing ... ".$file."&lt;br /&gt;";
		$result		= "";
		if(!file_exists($file))
			return $result."file not found.";

		$content = file_get_contents($file);
		$content = str_ireplace("..\n", "", $content);
		$content = str_ireplace("..\r\n", "", $content);
		//easy linebreak
		$content = str_ireplace("\r\n", "\n", $content);
		$content = str_ireplace("\n\r", "\n", $content);

		$lines = explode("\n", $content);
		foreach($lines as &amp;$line)
			$line = trim($line);

		self::$data["baseUrl"] = $baseUrl;
		self::$data["currentLines"] = $lines;
		self::$data["ignoreImports"] = is_array($ignoreImports) ? $ignoreImports : array();

		$fileObject = new fileObject($file);

		//find types/classes...
		$result.= self::findTypes($fileObject, $lines);


		//find imports/includes
		$result.= self::findImports($fileObject, $lines);
		return $result;
	}

	function findImports($fileObject, $lines) {
		$result = "";
		foreach($lines as $lineNum=&gt;$line) {
			if( self::isComment($line) )
				continue;

			preg_match_all(self::$patterns["includes"], $line, $foundItems);
			if( !isset($foundItems["name"]) OR count($foundItems["name"])&lt;=0 )
				continue;

			if( !array_key_exists("parsedFiles", self::$data) )
				self::$data["parsedFiles"] = array();

			$fileName = $foundItems["name"][0];
			$fileName.=".bmx";
			$filePath = str_ireplace(self::$data["baseUrl"], "", parser::MyRealPath(dirname($fileObject-&gt;uri)."/".$fileName));

			////////////////// remove AND ... for normal
			if(!in_array($filePath, self::$data["parsedFiles"]) ){ // AND count(self::$data["parsedFiles"]) &lt;3) {
				$result.= "import file: ".$filePath."\n";
				if(!in_array($filePath, self::$data["ignoreImports"])) {
					//print $filePath." - - ".print_r(self::$data["ignoreImports"],1)."&lt;br /&gt;";
					$obj = new fileObject($filePath);
					$obj-&gt;setFoundOnLine($lineNum);
					$obj-&gt;setParent($fileObject);
					self::$data["parsedFiles"][] = $obj;
					$result.= self::parse(self::$data["baseUrl"].$filePath, self::$data["baseUrl"], self::$data["ignoreImports"]);
				}
			}
		}
		return $result;
	}

	function findTypes($fileObject, $lines) {
		$inType		= false;
		$result		= "";
		foreach($lines as $lineNum=&gt;$line) {
			if( self::isComment($line) )
				continue;

			if($inType) {
				if(stripos($line, "endtype")===false AND stripos($line, "end type")===false )
					$typeLines[$lineNum] = $line;
				else {
					$inType = false;
					$result.= self::findChildElements($fileObject, $obj, $typeLines);
					$typeLines = array();
				}
			}else{
				$typeLines = array();
				preg_match_all(self::$patterns["typesSingle"], $line, $foundItems);
				if( !isset($foundItems["name"]) OR count($foundItems["name"])&lt;=0 )
					continue;

				$inType = true;

				$name = $foundItems["name"][0];
				$parts		= explode("{", $name);
				$meta		= isset($parts[1]) ? substr($parts[1],0, strpos($parts[1], "}")) : "";
				$parts		= explode(" ", trim($parts[0]));
				$name		= $parts[0];
				$extends	= isset($parts[1]) &amp;&amp; strtolower($parts[1]) == "extends" &amp;&amp; isset($parts[2]) ? $parts[2] : "";
				$abstract	= isset($parts[1]) &amp;&amp; strtolower($parts[1]) == "abstract" ? true : false;

				if( $name == "")
					continue;
				$obj = new typeObject($name);
				$obj-&gt;setComment(self::getCommentForLine($lineNum));
				$obj-&gt;setMeta(self::getMetaForLine($lineNum));
				$obj-&gt;setFoundOnLine($lineNum);
				$obj-&gt;setParent($fileObject);
				$obj-&gt;setMeta($meta);
				$obj-&gt;setExtends($extends);
				$obj-&gt;setAbstract($abstract);

				self::$data["foundTypes"][$name] = $obj;

				$result.= "  type: ".$name."&lt;br /&gt;";
			}
		}
		return $result;
	}

	function getLine($lineNum) {
		return isset(self::$data["currentLines"][$lineNum] ) ? self::$data["currentLines"][$lineNum] : "";
	}

	function getMetaForLine($lineNum) {
		$meta = self::getInLineMeta( self::getLine($lineNum) );
		$line = trim(self::getLine($lineNum-1));

		if( stripos($line, "{")===0 ) {
			$begin	= strpos($line, "{")+1;
			$end	= strpos($line, "{");
			$meta .= ",".substr($line, $begin, $end-$begin);
		}
		//print $meta."&lt;br /&gt;";
		return $meta;
	}

	function getCommentForLine($lineNum) {
		$comment = self::getInLineComment( self::getLine($lineNum) );

		$line = self::getLine($lineNum-1);

		if( stripos($line, "endrem")===0 OR stripos($line, "end rem")===0) {
			$commentEnd		= $lineNum-1;
			$commentStart	= $lineNum-1;
			$line			= self::getLine($commentEnd-1);
			while( stripos($line, "rem") !== 0 ) {
				$commentStart	= $commentStart -1;
				$line			= self::getLine($commentStart-1);
			}

			for($i=$commentStart;$i&lt;$commentEnd;$i++) {
				$comment.= self::getLine($i)." ";
			}
			$comment = rtrim($comment);
			//print "&lt;i&gt;".$comment."&lt;/i&gt; (".$commentStart."-".$commentEnd.")";
		}
		if( stripos($line, "'")===0) {
			$commentEnd		= $lineNum-1;
			$commentStart	= $lineNum-1;
			$line			= self::getLine($commentEnd-1);
			while( stripos($line, "'") === 0 ) {
				$commentStart	= $commentStart -1;
				$line			= self::getLine($commentStart-1);
			}

			for($i=$commentStart;$i&lt;=$commentEnd;$i++) {
				$comment.= substr(self::getLine($i), 1)." ";
			}
			$comment = rtrim($comment);
			//print "&lt;i&gt;".$comment."&lt;/i&gt; (".$commentStart."-".$commentEnd.")";
		}



		return $comment;
	}

	function getInLineComment($line) {
		$parts		= explode("'", $line);
		return isset($parts[1]) ? $parts[1] : "";
	}

	function getInLineMeta($line) {
		$parts		= explode("{", $line);
		return isset($parts[1]) ? substr($parts[1], 0, strpos($parts[1], "}")) : "";
	}

	function findChildElements($fileObject, $typeObject, $lines) {
		$result = "";
		foreach($lines as $lineNum=&gt;$line) {
			//find comments
			if( self::isComment($line) )
				continue;

			//find methods/functions
			if(stripos($line, "method")===0 OR stripos($line, "function")===0 ) {
				$parts		= explode("(", $line);
				$name		= explode(":", $parts[0]);
				$returns	= isset($name[1]) ? $name[1] : "";
				$name		= substr($name[0], strpos($name[0], " ")+1);

				$parts		= explode(")", $parts[1]);
				$params		= $parts[0];
				$meta		= isset($parts[1]) &amp;&amp; strpos($parts[1], "{") ? substr($parts[1],strpos($parts[1], "{"), strlen($parts[1])-strpos($parts[1], "}")) : "";


				$obj = new functionObject($name, stripos($line, "method")===0 ? 1 : 0);

				$obj-&gt;setReturns($returns);
				$obj-&gt;setParams($params);

				$result.= "    ".$name."\n";
			}

			//find variables/constants
			$foundField	= stripos($line, "field")===0 ? 1 : 0;
			$foundConst	= stripos($line, "const")===0 ? 1 : 0;

			if( $foundField OR $foundConst ) {
				preg_match_all(self::$patterns["fieldAndConst"], $line, $foundItems);
				if( !isset($foundItems["name"]) OR count($foundItems["name"])&lt;=0 )
					continue;

				$obj = new variableObject($foundItems["name"][0], $foundField ? 0 : 1, $foundItems["type"][0]);
				$result.= "    ".$foundItems["name"][0]."\n";
			}



			//common things (common for fields, const, types, methods, ...)
			if(isset($obj)) {
				$obj-&gt;setFoundOnLine($lineNum);
				if($typeObject) {
					$obj-&gt;setParent($typeObject);
					$typeObject-&gt;children[strtolower($obj-&gt;name)] = $obj;
				}else{
					$obj-&gt;setParent($fileObject);
					$fileObject-&gt;children[strtolower($obj-&gt;name)] = $obj;
				}

				$obj-&gt;setComment(self::getCommentForLine($lineNum));
				$obj-&gt;setMeta(self::getMetaForLine($lineNum));
			}
		}
		return $result;
	}


	function isComment($line) {
		if( stripos($line, "'") === 0 ) {
			return true;
		}
		if( stripos($line, "rem") === 0 ) {
			self::$data["inComment"] = true;
			return true;
		}
		if( stripos($line, "endrem") === 0 OR stripos($line, "end rem") === 0 ) {
			self::$data["inComment"] = false;
			return true;
		}
		if( !isset(self::$data["inComment"]) )
			self::$data["inComment"] = false;

		return self::$data["inComment"];
	}
}

?&gt;
</textarea><br><br>includes/dataobject.class.php<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;?

class dataObject {
	public $name			= "";
	public $data;
	private $_type			= "";
	private $_parentObject	= null;
	public $foundOnLine		= 0;
	public $meta			= array();
	public $comment			= "";
	public $children		= array();

	function __construct($name, $type="data") {
		$this-&gt;_baseInit($name, $type);
	}

	function setParent($parentObject) {
		$this-&gt;_parentObject = $parentObject;
	}

	function setFoundOnLine($line) {
		$this-&gt;foundOnLine = $line;
	}

	function setMeta($meta) {
		//$this-&gt;meta = array();

		$arr = explode(",", $meta);
		foreach($arr as $meta) {
			$meta = explode("=",$meta);
			$key  = $meta[0];
			$value= isset($meta[1]) ? str_replace("\"", "", $meta[1]) : "";
			//print $this-&gt;name." - ".$key."&lt;br /&gt;";
			if($key &lt;&gt; "")
				$this-&gt;meta[strtolower($key)] = $value;
		}
	}

	function getMetaString() {
		$res = "MetaString: ";
		foreach($this-&gt;meta as $key=&gt;$value) {
			$res.= $key;
			if($value &lt;&gt; "")
				$res." = ".$value;
			$res.= ", ";
		}
		return substr($res, 0, -2);
	}

	function hasMetaKey($key) {
		return array_key_exists(strtolower($key), $this-&gt;meta);
	}

	function getMetaKey($key) {
		return $this-&gt;meta[strtolower($key)];
	}


	function setComment($comment) {
		$this-&gt;comment = $comment;
	}

	function getType() {
		return $this-&gt;_type;
	}

	function _baseInit($name, $type) {
		$this-&gt;name = $name;
		$this-&gt;_type = $type;
	}
}


class fileObject extends dataObject {
	public $uri	= "";

	function __construct($file) {
		$this-&gt;_baseInit($file, "file");
		$this-&gt;setUri($file);
	}

	function setUri($uri) {
		$this-&gt;uri = $uri;
	}

}

class typeObject extends dataObject {
	public $extends = "";
	public $abstract= false;

	function __construct($name) {
		$this-&gt;_baseInit($name, "type");
	}

	function setExtends($extends) {
		$this-&gt;extends = $extends;
	}

	function setAbstract($abstract) {
		$this-&gt;abstract = $abstract;
	}

}

class functionObject extends dataObject {
	public $returns = "";
	public $params = array();

	function __construct($name, $type) {
		if($type == 0)
			$this-&gt;_baseInit($name, "function");
		if($type == 1)
			$this-&gt;_baseInit($name, "method");
	}

	function setReturns($val) {
		$this-&gt;returns = $val;
	}

	function setParams($val) {
		$this-&gt;params = $val;
	}

}

class variableObject extends dataObject {
	public $varType= "";

	function __construct($name, $type, $varType ) {
		if($type == 0)
			$this-&gt;_baseInit($name, "var");
		if($type == 1)
			$this-&gt;_baseInit($name, "const");

		$this-&gt;varType = $varType;
	}

}

?&gt;
</textarea><br><br>template.html<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
&lt;html&gt;
&lt;head&gt;
	&lt;style&gt;
		body					{ font-family: Sans-Serif; font-size:13px;}
		#type					{ border: 1px solid #ddf; margin-bottom:1.5em; }
		#type&gt;#header&gt;#name		{ display:block; background: #ccd; font-weight: bold; font-size:1.1em;}
		#comment				{ background: #f0f0f0; display:block; font-style: italic; color:#555;}
		#element				{ margin-bottom: 2px;}
		#element #header.even0	{ background: #e0e0f0;}
		#element #header.even1	{ background: #e5e5f5;}
		#type&gt;#header&gt;#name.LuaAll,
		.LuaAll					{ background: #ffeffa;}
		#type&gt;#header&gt;#name.LuaSelected,
		.LuaSelected			{ background: #ffe5f5;}
		#element span 			{ float:left; }
		#element #typeString	{ display:block; width:3.8em; color: #999;}
		#element #name			{ font-weight:bold; }
		.clear					{ clear:both; }
		#element&gt;#comment		{ padding-left: 3.8em; padding-bottom:1em;}
	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	%CONTENT%
&lt;/body&gt;
&lt;/html&gt;
</textarea><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1152470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SystemError51</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow - awesome Ron!<br><br>I shall try this out and report back :) <br><br></td></tr></table><br>
<a name="1152520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remember not to host it accessible from outside without adding further checks to the filename (I host it only in a internal-only-directory of my apache) else someone will be able to do bad things :D.<br><br>Best case here: prepend your Main-Working-directory (eg. "C:\ProgrammingMyWork") to the filename given in index.php and do some further checks...<br><br>replace<br><pre class=code>
$path	= isset($_GET["mainfile"]) ? $_GET["mainfile"] : "";
</pre><br><br>with<br><br><pre class=code>
$path	= isset($_GET["mainfile"]) ? $_GET["mainfile"] : "";
$path	= str_replace('\','/', $path); // win, unix... slash backslash
$path	= str_replace("../", "", $path); //some try to get out of directory bounds
$path	= "C:\Programming\MyWork".$path;

//finish if not a blitzmax file (disable the check if custom extensions are possible)
if( strtolower(pathinfo($path, PATHINFO_EXTENSION)) &lt;&gt; "bmx" )
	return;
</pre><br><br><br>There are other improvements possible (template files for methods, types, ... to make it easier for them to get collapseable ( [+] and [-] signs at the header ) and so on.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
