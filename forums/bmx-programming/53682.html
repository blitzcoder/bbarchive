<!DOCTYPE html><html lang="en" ><head ><title >How to toggle Fullscreen/Windowed</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to toggle Fullscreen/Windowed</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to toggle Fullscreen/Windowed</a><br><br>
<a name="599542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all,<br><br>Any one know how to do this properly?  If I just do EndGraphics and then Graphics(...) it works, but memory usage increases drastically.  Is ther a better way of doing this?<br><br>Thanks in advance,<br>Dima <br><br></td></tr></table><br>
<a name="599695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone do this successfully yet? Seems like a simple task, but for some reason I am not smart enough to figure it out. <br><br></td></tr></table><br>
<a name="599834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote this little test and the mem usage sure is increasing:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Strict

Print "memory usage: " + GCMemAlloced()

Graphics 640,480,0
Print "memory usage: " + GCMemAlloced()
Delay 500
EndGraphics()

Graphics 800,640,0
Print "memory usage: " + GCMemAlloced()
Delay 500
EndGraphics()

Graphics 1024,768,0
Print "memory usage: " + GCMemAlloced()
Delay 500
EndGraphics()

Graphics 320,240,0
Print "memory usage: " + GCMemAlloced()
Delay 500
EndGraphics()

Print "memory usage: " + GCMemAlloced()
</textarea><br>However, The memory is not really used, it just hangs around for a while in case the game needs to allocate more memory. When that happends the unused memory is going to be recycled. So I don't think you should worry about it. <br><br></td></tr></table><br>
<a name="599854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is much bigger when I have graphics loaded.  I also tried this game C'Bubble, which was developed in bmax, they have hte same problem. If you open task manager, and watch memory usage for the app, every time the graphics mode is changed it gains about 4-5MB, so after 5 times, a 10MB file becomes 35-40MB and it doesn't seem to free it up at all.<br><br>There must be a way to deal with this ...<br><br>Thanks for the help. <br><br></td></tr></table><br>
<a name="599891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have the same problem here and I did not have it when I was testing cbubble. <br><br></td></tr></table><br>
<a name="599916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very strange, I gain about 9MB every time I switch to full screen and back in c'bubble.  Happens with my own app as well, but less, probably because I have less gfx. <br><br></td></tr></table><br>
<a name="599922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although I've yet to implement this sort of thing in BlitzMax, I did notice it in my Blitz3D games where I allowed the user to set their display preferences.<br><br>Anyway, then I let the increase go because once a user has selected their preferred windowed or full-screen mode, which they will only do once most of the time, they will not change it again - especially during the same session.  When they next come to run the game, they won't change it - unless they upgrade their graphics card or something, so everything will be fine.<br><br>Having said that, I've seen a similar increase in my BlitzMax games on Windows when I allow the player to select which graphics drivers they want to use (OpenGL or DirectX).  I basically Null all the image handles, call FlushMem/GCCollect, call EndGraphics and then switch modes and reload the media.  Again, I've not worried about the increase because either a player won't bother changing it in this case (only one display size supported) or they will only change it once.<br><br>Apart from all that, it would be nice to know what we should be doing in these graphics mode changes, as I'm sure that some people would like to use different display settings for different parts of their programs.  Myself for one, would like to switch to a set resolution for the level editor and the user-defined resolution while playing the game (ok, not quite the same as full/windowed mode, but related nonetheless). <br><br></td></tr></table><br>
<a name="600027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There must be a way to deal with this ... <br></div>What is it exactly you want to "deal" with? This code is adapted from deps' code above:<pre class=code>Strict
'SetGraphicsDriver GLMax2DDriver()
Print "memory usage: " + GCMemAlloced()
For Local i = 0 To 25
Print i
Graphics 640,480,0
Print "memory usage: " + GCMemAlloced()
EndGraphics()

Graphics 800,640,0
Print "memory usage: " + GCMemAlloced()
EndGraphics()

Graphics 1024,768,0
Print "memory usage: " + GCMemAlloced()
EndGraphics()

Graphics 320,240,0
Print "memory usage: " + GCMemAlloced()
EndGraphics()

Print "memory usage: " + GCMemAlloced()
Next</pre>As you can see, memory will be reclaimed when nessecary. <br><br></td></tr></table><br>
<a name="600294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do call EndGraphics before calling Graphisc() again, but every time, my apps gains about 4-5 megs in size.  Don't know when will BMAX consider it 'necessary' to reclaim it, but it would be nice if it did, or if I could do it manually.<br><br>Am I supposed to unload all the graphics before I switch to full screen and versa?  The code that you guys posted here gains very minimal amount of memory, but running my small game, or c'bubble gets MUCH bigger mem usage with every switch.  Maybe the graphics NEED to be released and reloaded? that would be very unwanted ... <br><br></td></tr></table><br>
<a name="600305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please try C'Bubble and see if you get the same problem I am getting.  A few switches between fullscreen and window and the app gets much bigger in the task manager.  I tried this just now on my laptop and the same results. <br><br></td></tr></table><br>
<a name="600307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try it, I wrote it. I don't have your problems (oooerr), my memory gets freeeeeeeeed.<br><br>I don't reload the GFX after a change so I really do not know what the issue is.<br><br>PS. When you gonna buy it eh? <br><br></td></tr></table><br>
<a name="600318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would have thouhgt that this might be a problem with my system, but not.  My laptop has identical issues.  I would post screenshots, but don't have a place.<br><br>In short words; C'Bubble takes 100 MB of memory after startup.  After doing 10 consecutive mode changes, app becomes 150 MB.  That's 50 megs more than it started with.   Have you tried doing that many mode switches? I cannot believe that you aren't seeing this problem, and I get it on both my systems. <br><br></td></tr></table><br>
<a name="600374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried C'Bubble, very nice game well done Indie, but when I switched to windowed mode, it started leaking about 600K per refresh in task manager.<br><br><div class="quote"> C'Bubble takes 100 MB of memory after startup <br></div><br>It was more like 4MB on my machine. <br><br></td></tr></table><br>
<a name="600510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, try starting it in windowed mode.  In full screen, i see about 4 megs used, after switching to windowed, it becomes 25megs. If I start the game, and it's already in windowed mode, it takes about 107MB. <br><br></td></tr></table><br>
<a name="600517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah weird, I started it in fullscreen and it was around 100MB, but it didn't leak that time. And HrdNutz is correct, everytime I switch screen mode the memory usage goes up ~10MB. <br><br></td></tr></table><br>
<a name="600712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HrdNutz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> At least I feel better now that someone else is having the same problem, so I know now it's not me, but possibly a bug in bmax or there is something special that needs to be done in order to keep everything proper.<br><br>Anyone else have any thoughts or ideas?  I am also wondering if I should even bother worrying about this, but it seems like something not to ignore completely.<br><br>IndiePath, I am still shocked that you are not seeing this happening with C'Bubble. <br><br></td></tr></table><br>
<a name="601342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> And another bug for me.<br>If you click the close window button in window mode your app will still run in memory (check taskmanager)! BMX1.14.<br><br>Any fix for this? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
