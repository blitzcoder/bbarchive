<!DOCTYPE html><html lang="en" ><head ><title >Maps</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Maps</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Maps</a><br><br>
<a name="839250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> what do you use maps for and how do you use them? <br><br></td></tr></table><br>
<a name="839253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> TMaps are to store &lt;key,value&gt; pairs.<br>key as well as value are both objects.<br><br>They can be used to store anything you like in an efficient way (retrieve and add at log(n) where n is the number of elements in the map) <br><br></td></tr></table><br>
<a name="839255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> a better way to search through types without having to iterate through every one in a list? <br><br></td></tr></table><br>
<a name="839262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maps are a binary search.  Therefore, they can be used in real-time.  Iterations will eventually get too slow for real-time usage, as you add objects. <br><br></td></tr></table><br>
<a name="839264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't search through TMaps by using the iterator.<br>Use .valueforkey(key)<br><br>if there is an object with that key, the object will be returned, otherwise you get null <br><br></td></tr></table><br>
<a name="839268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what do you use maps for <br></div><br>Essentially for accessing type instances via a string handle.<br><br>Examples:<br>I'm starting to use them for 2D animation definitions: Let's say I have an animDef type with startFrame, endFrame and oneShot fields, well I then have a function/method (either will do depending on exactly what is to be achieved) -- AddAnimDef(name$,start%,end%,oneshot%) -- that creates a new animDef instance, gives its fields values and adds it to the appropriate TMap under its given name. So I end up with code like...<br><br>AddAnimDef("Running",  1,9,  False)<br>AddAnimDef("Die",  10,20,  True)<br><br>...which is very easy to read and if I set up the associated object with an AnimState field that is a string that I can set to "Running", "Die" or whatever then handling animation logic becomes possible in a highly readable (hence maintainable) fashion. (Note that having to cast-to-type to retrieve info from a TMap subject can introduce verbosity.)<br><br>I've also got a semi-complete multi-choice IF engine that uses TMaps to make executing objectified code blocks straightforward -- picked that trick up on here, it basically uses abstract methods in extended types to circumvent not being able to pass labels as arguments. EDIT: <a href="/posts.php?topic=42089#471839" target="_blank">See here</a> -- the example uses a list but I use a Map to retrieve 'page' instances directly by number (cast to a string to be a key) rather than iterating through all of them. <br><br></td></tr></table><br>
<a name="839462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use them to store arbitrary values on objects while scripting, essentially giving each object their own little scope to play with.<br><br><pre class=code>
Type TobjectState Extends Tmap
Method get:String(name:String)
	Local o:Object=MapValueForKey(Self,name)
	If String(o) Return String(o)
EndMethod
Method set(name:String, value:String)
	MapInsert(Self,name,value)
EndMethod
EndType

Function getstate:Int(p:Byte Ptr)
	Local id:Int=lua_tonumber(p,1)
	Local key:String=lua_tostring(p,2)
	Local value:String=space.get(id).objectState.get(key)
	If Float(value)
		lua_pushnumber(p, Float(value))
	Else
		lua_pushstring(p, value)
	EndIf
	Return 1
EndFunction

'etc....
</pre><br><br>somthing like that but checking for nulls and bad data <br><br></td></tr></table><br>
<a name="839483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> sledge -let me see if I get this:<br> If you are drawing these animations and you had like 100 it would be a lot faster to use maps than types,<br>because searching through a hundred types would be too slow for real-time graphical use<br><br>right? <br><br></td></tr></table><br>
<a name="839562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That may or may not be the case. The truth is that I don't really care which is faster -- as long as the implemented approach is fast <i>enough</i> it is the most readable (therefore the most maintainable) that gets selected.<br><br>If your code isn't fast enough then, well, wait a while and it soon will be, what with Moore's law 'n' all; If your code isn't maintainable then you don't have a project - full stop. So I'd really have to say that the best method is the one you are most comfortable with, whatever that happens to be. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
