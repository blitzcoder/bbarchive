<!DOCTYPE html><html lang="en" ><head ><title >Combining Graphics and GL context?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Combining Graphics and GL context?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Combining Graphics and GL context?</a><br><br>
<a name="472414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would you go about combining a normal bmax Graphics session with a GL drawn 2D quad?<br><br>Is this wise? <br><br></td></tr></table><br>
<a name="472466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should be able to do it without any problems at all.<br><br>Something like:<br><pre class=code>
Graphics 640,480,0

glBegin GL_QUADS
    glVertexf 100,100
    glVertexf 140,100
    glVertexf 140,140
    glVertexf 100,140
glEnd

WaitKey</pre> <br><br></td></tr></table><br>
<a name="472496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help, that doesnt compile, but this does:<br><pre class=code>Graphics 640,480,0

glBegin GL_QUADS
    glVertex2f 100,100
    glVertex2f 140,100
    glVertex2f 140,140
    glVertex2f 100,140
glEnd

Flip
WaitKey</pre> <br><br></td></tr></table><br>
<a name="472636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should be able to combine any Max2D stuff with direct OpenGL since Max2d is based on OpenGL. For example the Graphics command called bglCreateContext, which in turn calls the OpenGL glCreateContext (?) command.<br><br>Anything you do with OpenGL commands should show in the Graphics screen or window.<br><br>Also, the example above didn't compile? Or it did compile but it showed nothing because you didn't do a Flip?<br><br>One thing to note is that Max2D changes and tries to keep track of the state of some variables such as the TEXTURE2D status. I found that on my iBook I had to manually disable that flag before doing custom OpenGL, and enable it again at the end, whereas on an iMac it wasn't needed. I don't know why, but if you mess with the flags that Max2D is trying to maintain you might get into a mess. <br><br></td></tr></table><br>
<a name="472642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> One thing to note is that Max2D changes and tries to keep track of the state of some variables such as the TEXTURE2D status. I found that on my iBook I had to manually disable that flag before doing custom OpenGL, and enable it again at the end, whereas on an iMac it wasn't needed. I don't know why, but if you mess with the flags that Max2D is trying to maintain you might get into a mess. <br></div><br><br>Yeah - see my post here: <a href="http://www.blitzbasic.com/Community/posts.php?topic=41768" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=41768</a> <br><br></td></tr></table><br>
<a name="473466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> AngelDaniel - it didn't compile cos you spelt glVertex2f wrong. :D<br><br>Another question:<br>How can I control the drawing order of GL and Max2D stuff? <br><br></td></tr></table><br>
<a name="473482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You simply draw it in the order you want it drawn :)<br><br>And a happy New Year! <br><br></td></tr></table><br>
<a name="473523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the easiest way of setting the texture to be used from an image? Do you have to draw it? Surely there's a better way, SetTexture or something. <br><br></td></tr></table><br>
<a name="473526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, you can either sort everything into z order and draw in the right order, or, you can use OpenGL's depth buffer and make sure to position your objects with slightly different Z positions and use depth checking so that only the front most stuff is drawn. <br><br></td></tr></table><br>
<a name="473534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>How would you go about combining a normal bmax Graphics session with a GL drawn 2D quad? <br> <br></div><br><br>I don't really recommend this right now, as it could severely limit our ability to tinker with things - ie: people shouldn't really be depending on the way Max2D works internally.<br><br>But I can definitely see a use for it (fullscreen rotation effects etc) so perhaps Max2D should have a 'SaveState/RestoreState' type system?<br><br><div class="quote"> <br>Is this wise?<br> <br></div><br><br>Nope! <br><br></td></tr></table><br>
<a name="473540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I can definitely see a use for it (fullscreen rotation effects etc) so perhaps Max2D should have a 'SaveState/RestoreState' type system? <br></div><br><br>First of all, that would be a good idea.<br><br>Second of all, there are uses for it that I think you're overlooking, such as drawing HUDs/UIs/'2D' graphics for 3D games.  Or writing an application that needs a GUI and a 3D viewport (e.g., world editors such as Maplet or Radiant).<br><br>Perhaps a SetupMatrices() method for the GLMax2D driver would work for the drawing stuff.  Just an idea. <br><br></td></tr></table><br>
<a name="473585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think what mark was meaning is that it might be better to wait for GLMax3D before starting to bodge our own 3D stuff in 2D sorta thing.<br><br>I might be wrong though. <br><br></td></tr></table><br>
<a name="473599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> or simply not tinker around with a module that possibly could change that much that all your stuff you build in it is broken afterwards. <br><br></td></tr></table><br>
<a name="473646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am making a small FONText lib for BlitzMax 2D (I don't want it to rely on a 3D module for it to work).  Currently, I can't do what I want to do with Max2D alone.  It doesnt let me set UVs for quads etc.<br><br>'SaveState/RestoreState' sounds like a great idea.<br><br>When I asked about the drawing order I didn't mean within the GL stuff I'm drawing, but more between the GL stuff and Max2D stuff.  I ask cos DrawText() (and maybe others) always seem to draw on top of any of my custom GL drawings, regardless of what order I do them in code! <br><br></td></tr></table><br>
<a name="473653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> SaveState/RestoreState sounds good! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
