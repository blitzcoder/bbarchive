<!DOCTYPE html><html lang="en" ><head ><title >String or Object Keys for TMap?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >String or Object Keys for TMap?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >String or Object Keys for TMap?</a><br><br>
<a name="1005902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> TMaps can use either strings or object as keys, but which is best? So far I've been using mainly strings as it seemed simpler, but now I'm thinking that objects might be best. Strings can be of varying length, whereas I'd imagine objects are of constant size. Each newly created object would also be unique, so I wouldn't need to worry about that. At the moment I have a numeric counter which is incremented by one each time an object is made, and that number is stored as a string to give each object a unique id. Like this,<br><pre class=code>Method New()
	Global next_id:Long = 0
	id = String(next_id)
	next_id:+1
	i_am_a_map.Insert(o.id, o)
End Method</pre><br><br>But I could also do this?<br><br><pre class=code>..
Field id:Object = New Object
..
Method New()
	i_am_a_map.Insert(o.id, o)
End Method</pre><br><br>It's easy, it's a unique id, it's a constant size id... but it seems a rather hacky solution. Any ideas? <br><br></td></tr></table><br>
<a name="1005906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry if I'm missing something but I'm forced to ask why you're using a TMap at all. From what you've shown, I can't think of a good reason not to be using an array. <br><br></td></tr></table><br>
<a name="1005907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because objects will be created and destroyed at will, but will also needed to be accessed directly. <br><br></td></tr></table><br>
<a name="1005912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use something like <a href="/codearcs/codearcs.php?code=2503" >Number Class Cluster</a> instead of a string for the key. <br><br></td></tr></table><br>
<a name="1005917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Because objects will be created and destroyed at will, but will also needed to be accessed directly. <br></div><br>The key word in that sentence is "directly". You're using an associative container, so the objects are not being accessed directly, they're being accessed via tree traversal, based on a key that you don't seem to need or use. I don't doubt that moving from strings to objects will mitigate the performance cost, I'm just not clear on why you want a performance cost in the first place. <br><br></td></tr></table><br>
<a name="1005922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> strings are objects so there is no overhead or anything.<br>strings just might take a slight higher time to insert and be found due to the fact that string compare does a byte per byte compare to find the "larger / smaller" one for these operations.<br><br>should you only need a restricted compare depth because you know that only the first 3 are imported or something, an own comparision function would be an idea.<br><br>though I'm beeing forced to agree with Gabriel: You have an int id, so what is preventing you from using a structure thats better suited for this usage?<br>As you need to generate unique ids anyway in that case, a straight array would be the natural solution as you will need it to hold the "used ids" anyway, so you could just as well store objects instead of booleans in the array <br><br></td></tr></table><br>
<a name="1005974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> But if I use a straight array, when objects are deleted won't that leave big holes in the array?<br><br>I need to access objects directly by their id as it's a network game, so update packets will concern a particular object which they denote with an id (and something to change about it). For that reason I've realised using objects won't be useful for keys, as their memory addresses will be different on each computer. <br><br></td></tr></table><br>
<a name="1005977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes but you could have a list to store empty id's and use that to select the next new ID, this would help prevent you needing to resize the array. <br><br></td></tr></table><br>
<a name="1005981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a good idea. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
