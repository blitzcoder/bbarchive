<!DOCTYPE html><html lang="en" ><head ><title >A bit about LUA</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A bit about LUA</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >A bit about LUA</a><br><br>
<a name="995263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys.<br>I'm working on a space invaders type game right now and I want it to be very flexible so I was thinking about using lua for AI and for the weapons.<br>I've never done this before but I want to do it right from the start.<br>Is it wiser to create a lot of VM's for each entity or just one and set the variables before each entity?. <br><br></td></tr></table><br>
<a name="995269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Htbaa</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd say use 1 VM and just pass the <b>blocks</b> of code to it you want to execute. I say blocks because it's smart to keep the code you execute private and hidden from the rest of the Lua code you execute. That way you keep memory usage in your VM low and you can't accidentally set some property to an unwanted value because you forgot to set in your last call, but it was still available because of the last chunk of code that was executed. <br><br></td></tr></table><br>
<a name="995271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeke</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzmax.com/Community/posts.php?topic=85952" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=85952</a> <br><br></td></tr></table><br>
<a name="995276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sanctus</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why thank you.<br>That example will help me a lot tomorrow when I'll try to implement the AI. <br><br></td></tr></table><br>
<a name="995340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating a bunch of VMs is a waste.  Create a single VM and spawn multiple threads with separate environments if you want (same effect with better results since you don't have about 8,000 different garbage collectors running).<br><br>I'd take a look at Unity's model and try to emulate it, since it's fairly successful and I rather like the way that works. <br><br></td></tr></table><br>
<a name="995345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tommo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unity scripts are compiled into native mono DLL,  Even their "Javascripts" or "Booscripts" are both compiled into native, so they can easily run seamlessly with other "native" components.<br><br>I wrote something similar in Lua, with a slightly modified LuGI which uses seperated VMT for each bmxtype. The VMTs are wrapped as "lua class" during intialization(assign a lua-class-mt to VMT). After that, I use a "Virtual Reflection" for lua classes, with it I can copy/persist/edit lua objects, just like other bmx objects. <br><br></td></tr></table><br>
<a name="995364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I wrote something similar in Lua, with a slightly modified LuGI which uses seperated VMT for each bmxtype. The VMTs are wrapped as "lua class" during intialization(assign a lua-class-mt to VMT). After that, I use a "Virtual Reflection" for lua classes, with it I can copy/persist/edit lua objects, just like other bmx objects.  <br></div>I'd be interested in seeing that if you ever decide to release the source code. <br><br></td></tr></table><br>
<a name="995365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tommo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd be interested in seeing that if you ever decide to release the source code.  <br></div><br>When I'm ready to do so, I will let you know. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
