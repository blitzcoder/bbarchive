<!DOCTYPE html><html lang="en" ><head ><title >Recursive functions and program oddness</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Recursive functions and program oddness</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Recursive functions and program oddness</a><br><br>
<a name="800565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >peltazoid</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have written a program that will determine possible moves in a board style game. When I was testing on a small grid it works fine and solves the board. As soon as I upped the scale to a larger board (18x18) after a random amount of time I start to get some odd behavior.<br><br>i'm sorry I would rather not paste the source here, but when I get chance I will post a similar test rig as it were that mimics my program.<br><br>How my program works tho.<br><br>I have a list of unused pieces, this is a 4x4 array (each piece has 4 sides and 4 rotations)<br><br>I have the gameboard which is a 18x18 array holding a type which in turn holds the pieces and  what rotation they are played in.<br><br>There is also a node type, which holds piece and state data for the main function<br><br>A basenode is created and passed to the main function along with starting coords (0,0)<br><br>My main function does the following<br>Creates a list of possible pieces to fit in that square<br>if there was not fits then the function returns.<br>there was a ft, the first of these is used and played on the board and removed from the free list.<br>If there are no rotations left to use the piece is removed from the possible list.<br><br>a node is created <br>the coords are updated for the next cell<br>should the beyond the last element be reached then done is set and the program returns.<br>Otherwise the main function then calls it self with the new node and the next coords<br><br>a flag is set to say a return has occoured<br>when the function returns, the new_node is Nulled as it is no longer needed. <br><br>This continues until either the no fits are found at all and the program exits or the board is solved and the output displayed.<br><br>For testing and debugging, I placed graphical output commands in the main function to display what pieces had been played.<br><br>Also outputting the amount of ram used.<br><br>The odd behavior is that the the program uses 99% of cpu time and if the output window is minimised or has another window put over it, it no longer updates (flip is called in the main loop, straight after the drawing commands) but If i'm running with the debugger the debug output continues. <br><br>After around 30mins of execution the output also stops, if running in the ide, then that can stop responding as well.<br><br>Memory used is at around the same level, it does not run away, it peaks then falls always to the same values depending on how many nodes have been generated.<br><br>I have complied with blitz 1.24 and tried 1.22 to the same outcome. I have also tried it on two different machines same results.<br><br>Any suggestions as to why this is happening?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="800770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ninjarat</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't really know, but it sounds like you're either sticking yourself in an infinite loop, not handling events properly (that is if you're coding on system level,) or causing a memory exception which apparently doesn't crash.  I've had those, so I know they're real.  Sorry I couldn't be more helpful.  Maybe show us some source code? <br><br></td></tr></table><br>
<a name="800798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Minimizing a window will always stop the graphics to update as there is no gadget redraw done anymore.<br><br>Check for AppSuspended() AppResumed() to prevent running into this kind of problem.<br><br>99% of CPU used does sound like you tried to follow any acceptable program design. If you try to stick with the CPU time you need and give the rest back to the system, some of the problems will disappear as well.<br>The simplest way to do so is doing event based programming. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
