<!DOCTYPE html><html lang="en" ><head ><title >Please Test this</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Please Test this</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Please Test this</a><br><br>
<a name="540966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you have seen that I'm working on an Artillery Style game before. Now I have added a land-drop technique to it and <br>build a little test demo. <br><br>BTW : THX to AngelDaniel for his suggestion about land-drop<br><br>In this Demo you can control the players by using this:<br><br>Key 1\2 changes angle<br>Key 3\4 changes power<br>Enter  = Shoot<br>Space = next Player<br><br>(You can also 'draw' on the Map by pressing the left Mousebutton)<br><br>Currently there is no Gamplay in it and the Max Framerate is limited to 60 FPS. So I need to know what min Framerate you got when drawing on the Terrain or by doing an explosion.<br><br>Please download at: <a href="http://www.brsoftware.de.vu/DL/" target="_blank">http://www.brsoftware.de.vu/DL/</a><br><br>There are two Files to Test : <br>For OpenGL : Test.RAR<br>For DX     : TestDX.RAR<br><br>THX For your comments. <br><br></td></tr></table><br>
<a name="541025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good klepto2. I can't see it unless you put up another screenshot of the dropping/drawing in action, but glad you got it working.<br><br>I saw another of this type of game recently where they did away with land-drop altogether. But to avoid having bits of land floating in the air, they just totally delete all pixels above any explosion area. Those pieces of land simply vanish before your eyes. At least it keeps things consistent I guess.<br><br>What method did you decide to go with? <br><br></td></tr></table><br>
<a name="541030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The Method : <br><br>To save FPS I have decided to create a Type for each collision that happens with all the relavent Datas (X,Y,Radius)<br><br>In the Update Function I check the Area with in the Radius of each Explosion (only x Axis ,y is checked from 0 to Maxheight of the Terrain) if the below Pixel is Transparent or not. If it is the above Pixel is set to the below Pixel and the above Pixel is set to be Transparent. Also to Speed it up abit it checks if there are Transparent Pixels below others and if not the Type is deleted.<br><br>Here is the Method (for those who are interrested):<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Method Land_Drop()
	
	For local D1:TDrop = eachin Drop_list

	locaL IS:bYTE = false
		local land:Tpixmap = Lockimage(Tile[D1.Tile])
		
			For _x = D1.X - D1.R to D1.X + D1.R step 1
			 if _X &gt;-1 and _X &lt; Imagewidth(Tile[D1.Tile]) then
				For _y =  Imageheight(Tile[D1.Tile])-1 to Imageheight(Tile[D1.Tile])-(MaxH-1) step -1
				
			  
				_c1 = Readpixel(land,_x,_y)
				_c2 = Readpixel(land,_x,_y-1)
			
				if _c1 = $00000000 and _c2 &lt;&gt; $00000000 then
					WritePixel land,_x,_y-1, $00000000
					Is = true
					WritePixel land,_x,_y,_c2
					'Exit
				end if
				Flushmem()
				Next
			 endif
			Next
			if is = false then ListRemove(Drop_list,D1)
		Next

End Method
</textarea><br><br>BTW: I have gone away from the Scale Method and now I'm using a tile based Terrain.<br><br>Oh and some screenies for you AngelDaniel:<br><img src="http://i2.photobucket.com/albums/y48/klepto2/NewArtillery2005-06-3023-15-10-50.jpg"><br><img src="http://i2.photobucket.com/albums/y48/klepto2/NewArtillery2005-06-3023-15-08-62.jpg"><br><img src="http://i2.photobucket.com/albums/y48/klepto2/NewArtillery2005-06-3023-15-07-28.jpg"> <br><br></td></tr></table><br>
<a name="541179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looking good. Cool that you got the land to fall now.<br><br>How big is your play area? <br><br></td></tr></table><br>
<a name="541189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In both versions the rate doesn't seem to be locked for me.  I get just under 400 FPS in OpenGL and just over 500 in DirectX.<br><br>When dropping terrain with the left mouse button, the frame rate briefly drops to around 17 in the GL version and around 22 in the DX version.<br><br>Whenever I press Enter to fire, it crashes (no error message in DirectX, it just goes away; it pops up the "Send Error Report" dialog in OpenGL).  I've tried various settings with the 1-4 keys and it always crashes.<br><br>This is on a 1.4 GHz Athlon with 512 megs RAM, Win XP Pro SP 2, ATI Radeon 9600 Pro with 128 megs, DirectX 9.0c <br><br></td></tr></table><br>
<a name="541223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm simply an Idiot, It happened again. Damn.<br>To make it work, simply copy the 'rocket.bmp' of the root folder in the media folder.<br><br>It should work then.<br><br>BTW: Does anyone now a faster way then using the Writepixel and ReadPixel commands (maybe Raw OpenGL) <br><br></td></tr></table><br>
<a name="541303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Is your terrain a separate image to the background?  If so all you need to do is find the first solid ground above explosion crater and do a 1 pixelwide copyrect (or BM equivalent) from that point upwards and drop that to the first solid ground beneath your explosion crater.<br><br>Will that help?<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="541371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Moving the .bmp fixed it.  In DirectX, minimum FPS are 22 when rocket is in flight and 17 during explosion/ground-collapse.  In OpenGL they're 18 and 14.  <br><br>1.4 GHz Athlon with 512 megs RAM, Win XP Pro SP 2, ATI Radeon 9600 Pro with 128 megs and Catalyst 5.4, DirectX 9.0c <br><br></td></tr></table><br>
<a name="541380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >klepto2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for testing so far.<br><br>The results are helping alot.<br><br>@SoggyP: Sorry but that will not work in BM as far as I know.<br>         The only thing is i could let them set directly on the new height but that will corrupt the 'flowing sand' animation.<br><br>@Angeldaniel<br>Currently the size is about 2 tiles (I don't get my position formula working with more :( ) <br><br></td></tr></table><br>
<a name="541430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> 2 screens wide you mean?<br><br>I have seen an algorithm somewhere, not on Blitz I don't think, that described how to do a basic land-drop which involved some binary operations such as AND's and OR's, which would work on several pixels at once, but that was in the days of accessing the video memory directly with the CPU.<br><br>Like someone else said, it might be more efficient to grab verticle strips of land into images and then drop them. Bearing in mind that each image has to be minimally 64x64 pixels.<br><br>You could do better in Direct OpenGL, with a single texture for the area that is falling, and changing the texture coordinates for several vertical lines. That would be a lot faster. <br><br></td></tr></table><br>
<a name="541494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Klepto, check this link for BM equivalent:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=47526" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=47526</a><br><br>Goodbye. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
