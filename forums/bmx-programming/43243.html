<!DOCTYPE html><html lang="en" ><head ><title >How can I have an array of several unique types?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How can I have an array of several unique types?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How can I have an array of several unique types?</a><br><br>
<a name="483254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi folks. I have a scenario in my code where it looks like I may need to use a linked list *shock horror!*. I would, however, prefer to use an array. I can manage the adding and removal of items from the array myself. But what I want to do is be able to use the array to reference instances of several different object types.<br><br>Is it possible to make an array that can store any of several different types?<br><br>e.g<br><br><pre class=code>
Type mytype1
   a:int
End Type
Type mytype2
   b#:float
End Type
Type mytype3
   c:String
End Type
Type mytype4
   d:Int[]
End Type

Local myobjectarray=varioustypes[20]
myobjectarray[0]=New mytype3
myobjectarray[1]=New mytype4
myobjectarray[2]=New mytype1
myobjectarray[3]=New mytype2
</pre><br>Obviously the code to create the array the type instances there is bogus, but it sums up what I need to do. Of course BlitzMax won't accept this as is.<br><br>I know that each Type probably has a pointer to it - like an Int Ptr - but Blitz likes to know what type of object the pointer is pointing to - ie a mytype2 Ptr or a mytype4 Ptr. I thought perhaps I could get the pointer to a given type instance and force it into the array as an Int Ptr - and use an array of Int Ptr's?<br>But then it kind of has to be forced back out again. By forced I mean, type casting and all that or even having to read and write to the array memory directly with PokeInt and PeekInt.<br><br>How can I do this? Is there any way? At this time I don't want to resort to a linked list.<br><br>I really appreciate your feedback and suggestions.<br>Thanks <br><br></td></tr></table><br>
<a name="483255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Local MyObjectArray:Object[] = New Object[ 20 ]<br><br>MyObjectArray[ 0 ] = Object( New MyType1 )<br>MyObjectArray[ 1 ] = Object( New MyType2 )<br>MyObjectArray[ 2 ] = Object( New MyType3 )<br>MyObjectArray[ 3 ] = Object( New MyType4 )<br><br>If MyType1( MyObjectArray[ 0 ] )<br><br>	Local obj:MyType1 = MyType1( MyObjectArray[ 0 ] )<br>	<br>EndIf <br><br></td></tr></table><br>
<a name="483277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it possible to make an array that can store any of several different types? <br></div>Yes, but you will probably have to downcast them when you want them out. <br><br></td></tr></table><br>
<a name="483282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd have thought his question was answered? <br><br></td></tr></table><br>
<a name="483287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, thanks Michael and also Mikkel for the follow-up.<br><br>So it looks like all I need to do is use the `object` type and cast the types to/from as I store and retrieve.<br><br>Thanks. I actually thought maybe there wasn't a solution, so I'm glad.<br>Cheers. <br><br></td></tr></table><br>
<a name="483320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I eventually decided that although casting to/from an Object type is cool and useful (thanks again), I'm going to have several different arrays, one for each type, rather than a single array. Actually it was a design oversight on my part, I needed to have several arrays otherwise all the different objects are randomly mixed together.<br><br>:-) <br><br></td></tr></table><br>
<a name="483339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you actually need to cast the instances to an Object type when inserting them into the array.<br><br>Since Object is a superclass of all of your custom types, no casting is required.<br><br>However casting will be required to convert the Object back to its original type. <br><br></td></tr></table><br>
<a name="483343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can implicitly upcast, but I find that explicit casting makes things more clear. <br><br></td></tr></table><br>
<a name="483441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm ok good to know, thanks Rob. I guess I will be using this after all. <br><br></td></tr></table><br>
<a name="484583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can implicitly upcast, but I find that explicit casting makes things more clear. <br></div><br><br>Clearer, perhaps. But also slower. Boxing and Unboxing doesnt come free of cost :) <br><br>If all types share some properties or methods (template) that is the same ina ll types, use a baseclass and have all of them inherit from it. Then use the basetype is the working type when putting stuff into and out of the array. That way, no casting is needed when getting them  out of the array. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
