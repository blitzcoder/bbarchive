<!DOCTYPE html><html lang="en" ><head ><title >Changing Graphics mode in DX9</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Changing Graphics mode in DX9</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Changing Graphics mode in DX9</a><br><br>
<a name="1070469"></a>

<a name="1070470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had a search for this, but can't find much in the way of information about this particular issue.<br><br>I'm looking to implement the ability to change graphics modes whilst in the options screen of my game. My first port of call was to see if it's ending the current graphics and creating a new one had any effect, and that pretty much works.<br><br><pre class=code>If KeyHit(KEY_G) Then EndGraphics; GCCollect(); Graphics(800, 600)
If KeyHit(KEY_H) Then EndGraphics; GCCollect(); Graphics(1280, 720)</pre><br><br>In DX9, switching between modes (or setting the same mode over and over) results in the memory usage reported in TaskManager increasing with each step, seemingly never being restored. <br><br>In OpenGL and DX7, there is no such increase. In all three drivers, the memory reported by GCMemAlloced does not increase.<br><br>It's not ideal behaviour, although the limited frequency of resolution changing means it's also not a major problem for me just yet, but in the meantime I wonder if anyone else has seen the same issue and has any ideas about what's causing it and whether or not it can be easily avoided?<br><br>Cheers folks.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1070474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think this is the known memory leak in the DX 9 driver: <a href="http://www.blitzbasic.com/Community/posts.php?topic=91524" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=91524</a> <br><br></td></tr></table><br>
<a name="1070505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That'll be it, thanks!<br><br>Looks like to be on the safe side, I'll put a counter in to restrict graphics mode changes before prompting a restart. <br><br></td></tr></table><br>
<a name="1070547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Looks like to be on the safe side, I'll put a counter in to restrict graphics mode changes before prompting a restart. <br></div>That's a really ugly and unprofessional way of dealing with it.<br><br>I'd try Zeke's fix for the problem (although, I didn't have much luck with it myself - probably misunderstood the instructions). <br><br></td></tr></table><br>
<a name="1070591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's prompting as in suggesting that the user restarts the program for the change to take effect, not forcing the restart upon them for having the temerity to try a new resolution.<br><br>It's not ideal, it's still a little ugly, but it's not unprofessional. <br><br>This assumes, of course, that I can't get Zeke's fix or an alternative in place. :) <br><br></td></tr></table><br>
<a name="1070644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's not ideal, it's still a little ugly, but it's not unprofessional. <br></div>Sure its unprofessional: "we've got a memory leak that we don't know how to fix - to make sure the game doesn't fall flat on its arse we recommend you restart it now". <br><br></td></tr></table><br>
<a name="1070658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrDeath</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Sure its unprofessional: "we've got a memory leak that we don't know how to fix - to make sure the game doesn't fall flat on its arse we recommend you restart it now".  <br></div><br>There are quite a few triple-A titles that do exactly the same. <br><br></td></tr></table><br>
<a name="1070660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It'd be unprofessional if that's exactly how I put it to the user. :) <br><br></td></tr></table><br>
<a name="1070667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Corum</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember World of Warcraft used to ask me a game restart in order to apply graphics settings changes. :-) <br><br></td></tr></table><br>
<a name="1070711"></a>

<a name="1070712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> perhaps its a core DirectX issue that even M$ themselves aren't sure how to fix :o)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
