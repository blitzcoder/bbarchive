<!DOCTYPE html><html lang="en" ><head ><title >Bizarre question: emulating GOSUB</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bizarre question: emulating GOSUB</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Bizarre question: emulating GOSUB</a><br><br>
<a name="693221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ninjacrat</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a utility that automatically converts a simple scripting language into BMax and compiles it. It needs a 'gosub' sort of functionality: jump to a point in the code, execute whatever and then return.<br><br>It needs to be able to see every variable at all times, so functions are no good. And making every variable global is right out.<br><br>Is there a clever way of doing this, or have the program fallen at the silliest hurdle? <br><br></td></tr></table><br>
<a name="693223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Throw. Maybe, but Im not sure how that works.<br><br>The reason surly your "Fake" gosub needs access to all the viables, was because it from a "before" namespace programming style. I would find somthing that doesnt need this, and just accept that youve not got the right solution to the problem, from within the tools you are using <br><br></td></tr></table><br>
<a name="693225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dan_upright</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i don't know about a clever way, but you could always just inline all gosubs, ie every time you get "gosub dosomestuff" you replace it with the entire "dosomestuff" subroutine<br><br>might not be elegant but it'd work <br><br></td></tr></table><br>
<a name="693227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dan,<br><br>I dont think that would work would it? It wouldnt have access to any more of the variables than were you called it from. Where as<br><div class="quote"> It needs to be able to see every variable at all times, so functions are no good. And making every variable global is right out. <br></div>Is implying that it need accses to more variables than the place its being called from.<br>(Because if it only needed access to the same variables then a Function would be enough) <br><br></td></tr></table><br>
<a name="693239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dan_upright</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> since when do functions have the same scope as their calling code? <br><br></td></tr></table><br>
<a name="693242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you store all your variables in an array you can pass that to a function. It's not elegant, but it's one way of doing it.<br><br>But out of curiosity why would you need Gosub? I haven't used that since around 1994. <br><br></td></tr></table><br>
<a name="693249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dan,<br><br>My bag, Id assumed that the call would be from global scope. Youre right. <br><br></td></tr></table><br>
<a name="693293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Faking gosub:<br><br>Save the gosubed part as a "block" somewhere in memory. Everywhere it gosubs to that block, just paste the gosub block in and remove the "label" and gosub return statement.<br>Thats it, thats what gosub actually does. <br><br></td></tr></table><br>
<a name="693362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, if you really want to<br><br>blah<br>goto func1;#endfunc1<br>blah<br><br>end<br><br>#func1<br>blah<br>goto endfunc1 <br><br></td></tr></table><br>
<a name="693385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @dmaz, that only works if you want to "return" to same place. And so is infact just an inline to #endfunc1<br>A useful gosub implimantation would need to "return" to several different labals <br><br></td></tr></table><br>
<a name="693388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @dmaz, that only works if you want to "return" to same place. And so is infact just an inline to #endfunc1 <br></div><br>sure, that's what he asked for. <br><br></td></tr></table><br>
<a name="693391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> No it isnt. Youve just shown a goto functionality, not a gosub one<br><br>Each Gosub will "Goto" one specific place, but will return to different places, dependent on were its called from.<br><br>Yours will only return to the same place everytime.<br><br>Edit: All you need to do to make yours work, is also allocate a variable just before the first goto, then use a case/select to goto back <br><br></td></tr></table><br>
<a name="693393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> duh, I guess I wasn't thinking! <br><br></td></tr></table><br>
<a name="693424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> why case select to go back?<br>A gosub can only return to the point it came from as functions, so you can simply replace the gosub call by the content of the gosub block.<br><br>No need to make it more complicated than needed! (this replacement will take care that it uses the same variables as well, just to mention) <br><br></td></tr></table><br>
<a name="693425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes we know that he can just put the code where ever he wants the code to be run from. Thanks for that.<br><br>If on the other hand He still wants to gosub so as not to write the same code several times, the end of the gosub block would need <i>Some</i> selection system, and I chose Case. <br><br></td></tr></table><br>
<a name="693428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you explain why it would need selection?<br>There is exactly 1 point where a gosub can go, that is the gosub call which lead it into the block, so there is no usefull reason, wasting "scripting execution time" or parsing time by selecting the "return target" if it is exactly defined. (seeing it from the more precise point of view: GoSub has no target. A GoSub call is just replaced by the content of the sub by the parser / compiler)<br><br><br>And I did not say the scripter needs to write it several times, that would be quite stupid, there you are right :-)<br><br>But the parser would and should do this when converting to BlitzMax (which is why I wrote "save the code to memory"), in the preparsing step.<br>It makes the structure of the parser / converter lighter and cleaner.<br><br>But to show what I mean here a short example:<br><br><pre class=code>

Print "This is some text"
GoSub SubTest
Print "Now we are nearly done"
GoSub SubTest
Print "finished!"
End

.SubTest
Print "This is only a subtest"
ReturnSub
</pre><br><br>After preparsing, it will look like this<br><br><pre class=code>
Print "This is some text"
Print "This is only a subtest"
Print "Now we are nearly done"
Print "This is only a subtest"
Print "finished!"
End</pre><br><br>This would then be converted to BlitzMax code.<br><br>Hope this is clearer how my suggestion was meant. <br><br></td></tr></table><br>
<a name="693432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ninjacrat</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dreamora<br><br>Holy shit! Well, I'll just do it that way then. I knew there had to be some lateral-thinking trick to it... ^^;<br><br>Thanks for the fast answers, everyone! <br><br></td></tr></table><br>
<a name="693436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dream,<br><br>You are confusing "What you need for a solution" and "The solution we were talking about"<br><div class="quote"> Could you explain why it would need selection? <br></div><br>Yes I will. Because in the system that we were talking about, (Not the system you want to use, or the best system, or both of them if they are the same), specificaly Goto for the gosub, and goto for the return. The return would need to know which of the fake gosubs it came from.<br><br>Now this is true. Maybe it wasnt the best answer to the problem, but it was true. So in the future, say things like "Oh, but I wouldnt have been doing it that way at all, so I wouldnt need a selection system"<br><br>There is a major difference between a correct statment about an incorrect solution. And simply an incorrect statment <br><br></td></tr></table><br>
<a name="693447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right<br>My mistake. Although even then, a parser wouldn't need a select to jump in a goto. It would normally use TMap or similar to map the "goto Target" onto the line number it has to jump to. *how you would use a select which is a statically defined selection sheme with a dynamic amount of "jump targets"? Thats my major problem of understanding your select - case based solution for the goto - gotoback problem* <br><br></td></tr></table><br>
<a name="693449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Each case would be a goto back to a fixed label<br>Case 1<br>goto #labal1<br>case 2<br>goto #labal2<br><br>I admit it would need work to maintain it, cos every "gosub" to it would need its own case. But this was an edit statement about a solution that Dmaz sudjested, but which wouldnt work as originaly posted.<br><br>My entire take on this is that which I first posted, if you need a gosub (in a language that doesnt have gosub), its because youve designed your code badly. <br><br></td></tr></table><br>
<a name="693497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dan_upright</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Holy shit! Well, I'll just do it that way then. I knew there had to be some lateral-thinking trick to it... ^^; <br></div>tch, i told you to do it that way in the third post =p <br><br></td></tr></table><br>
<a name="693508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Strict

Main()

Function Main()
	Global a:Int = 5 'global to Add5, but not to Add10
	Global b:Int = 5
	
	Print a+" "+b
	
	Add5()
	Print a+" "+b
	Add5()
	Print a+" "+b
	Add10()
	Print a+" "+b
	Return
	
	Function Add5()
		a :+ 5
		b :+ 5
	End Function
End Function

Function Add10()
	'Local a:Int, b:Int 'Comment out to remove compiler error

	a :+ 10
	b :+ 10
End Function</pre> <br><br></td></tr></table><br>
<a name="693543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> interesting code..i didnt think you could even declare<br>globals within a function..or functions within functions..<br>all good to know - thanks ;) <br><br></td></tr></table><br>
<a name="693560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can't declare globals within functions<br><br>A global within a function is a static, this means that the variable will hold their current value between calls instead of beeing redeclared everytime again.<br><br>For that reason, the code above is quite pointless. As a = 5 on each call it could as well be declared as local.<br><br>On the other hand, both is the same, but you need to understand the "scope" behavior of BM that allows a lot especially quite some funny and chaotic stuff (function within function is the "least" chaotic thing you could do ;-) ) <br><br></td></tr></table><br>
<a name="693567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dreamora: The global value assignment only happens on the first call (or possibly at compile time), so there is nothing pointless about the code TomToad posted. <br><br></td></tr></table><br>
<a name="693571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Fred,<br><br>It is pointless, as the point of Toms code was to show how someting didnt work. <br><br></td></tr></table><br>
<a name="693576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does that make it pointless? <br><br></td></tr></table><br>
<a name="693598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well ok Yea. You pick a word then. (I admit that pointless is probably the wrong word in the sence that you or I would use it). But I think Dream was using pointless in the sence that it didnt solve the problem originaly posted. As appossed to it was illustrating a point about scope. <br><br></td></tr></table><br>
<a name="693723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, it does work.  It is static within the Main() function, but acts like a Global to all the functions within Main().  It is realy no different than decalring Globals in the main App.  As far as the app is conserned it is static, but functions within the App can still use it.  However, my way, the Globals are still hidden from the functions outside of Main().  If you don't believe that it works, try compiling it and see.  Firstly though, it will not compile "as-is" because the function Add10() cannot see the variables in Main()  if you uncomment the line that says to uncomment, then it will compile.  As you can see, 5 is added to a and b each time Add5() is called.<br>If they had been declared Local instead of Global, then the function Add5() would not be able to see them either. <br><br></td></tr></table><br>
<a name="693731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tom,<br><br><div class="quote"> the Globals are still hidden from the functions outside of Main().  <br></div><br>I thought that was the point for which you had originaly posted to HighLight. In that A Function outside main/namespace couldnt act as a focus for a gosub.<br><br>I can <i>see</i> what it would do, but thought that<br><pre class=code>'Local a:Int, b:Int 'Comment out to remove compiler error</pre>was the salent point. If you look back we had been talking about where a focus for Gosub would need to be, but kept hitting the namespace/scope problem, so I had just assumed you were Highlighting just what the fault was with this method<br><br>Sorry If I came across as a prat <br><br></td></tr></table><br>
<a name="693740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I was responding to the OP.  Trying to show a way of "emulating Gosub."  I put the commented out code to show that even though the variables within Main() were declared Global, they still acted like a Local as far as functions outside of Main() were concerned.  This is proven because the compiler complains of "undeclared variables."  To actually compile the code and see how the functions within main actually work, you would need to remove the comment or you could remove the Strict at the top.<br><br>If anyone is still confused to what I'm doing, I'm basically wrapping all the main code into a function called Main().  Then I'm declaring the variables as Global, but they will be Local to only Main() and any functions declared within Main().  All the functions within Main() are acting like a Gosub but you have a couple of advantages over normal Gosubs.  One is that you can declare variables that are actually local to only the subroutines/functions themselves, and if there is something you want to hide from them, you can declare them Local within Main()  So nothing except Main() can see them.  You can call functions outside of Main() like regular functions, and lastly anything you want global to the whole program can be declared outside of Main().<br>So for an example, I'm turning this:<br><pre class=code>Global a:Int
Local b:Int
Local c:Int

Gosub Add5ToB
Print b
Add5ToA()
Print a
c = AddBAndA(a,b)
Print c
End

#Add5ToB
  b :+ 5
  Return

Function Add5ToA()
  a :+ 5
End Function

Function AddBAndA:Int(a:int,b:int)
  Return a + b
End Function
</pre><br>Into this:<br><pre class=code>
Global a:Int

Main()
Function Main()
  Global b:Int
  Local c:int
  Add5ToB()
  Print b
  Add5ToA()
  Print a
  c = AddBAndA(a,b)
  Print c
  End

  Function Add5ToB()
    b :+ 5
  End Function
End Function

Function Add5ToA()
   a :+ 5
End Function

Function AddBAndA(a:int, b:int)
  Return a + b
End Function
</pre><br>Notice how the variables keep the same scope in both examples, except for c which is visible to the subroutine Add5ToB in the first example but hidden to the function in the second example, demonstrating more control over scope with functions within functions instead of normal subroutines. <br><br></td></tr></table><br>
<a name="693747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dreamora..<br><br>  i didnt mean the var was in global/file scope i simply didnt<br>realise you could have a function within a function and that the parent functions vars would be exposed to child <br>function..<br><br>they are declared using the global  specifier..so calling a var<br>global is not wrong in this context...it simply doesnt have<br>the same meaning as it would if defined elsewhere..<br><br>Another thing - a static within a function in C++, which<br>i assume is what your comparing this to..doesnt work<br>like this..as far as i know its simply preserved, whether<br>that means its stored on the heap instead of the stack<br>i dont know..but it cannot be accessed outside of the<br>function - and you cannot have functions within functions<br>in c++ as far as i know. <br><br>EDIT&gt;&gt; sorry, your explanation of static was correct..<br>             - my mistake..<br>             <br>anyway - your "know it all" mentality is very annoying..<br>  your nearly always impolite - words like "pointless"<br>  are offensive..your entitled to your opinion, but you<br>  could perhaps spend a little time thinking about<br>  how you present your opinion to others.<br><br>anyway - rant over with... <br><br></td></tr></table><br>
<a name="693851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> A global within a function is a static, this means that the variable will hold their current value between calls instead of beeing redeclared everytime again.<br>For that reason, the code above is quite pointless. As a = 5 on each call it could as well be declared as local.<br> <br></div><br>Wouldn't that reset the variable to 5 each time the function is called rather than add to it each time? <br><br></td></tr></table><br>
<a name="693872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tonyg,<br><br>You are right a local would just set it to 5 each time. <br>But its a singleton Function "Main", so its not going to be called again, so a local would be good enough.<br>Im not saying it should be a local, because a Static global was, (I think), The intention.<br><br>We do really need to put rem statments all over the code we post. My problem with Tom above was simply because I only focused on the Remed lines <br><br></td></tr></table><br>
<a name="693889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Wouldn't that reset the variable to 5 each time the function is called rather than add to it each time?  <br></div>No! As mentioned above a Global variable assignment only happens once, and therefore the value will not start out as 5 every time.<br><br><pre class=code>'
' This always returns 55
Function Hello()
  Global a:int
  a = 50
  a = a+5
  Return a
EndFunction

'
' This will return 55, 60, 65, 70, etc.
Function Hello2()
  Global a:int = 50
  a = a+5
  Return a
EndFunction</pre> <br><br></td></tr></table><br>
<a name="693920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Fred<br><div class="quote"> As a = 5 on each call it could as well be declared as local <br></div><br><div class="quote"> Wouldn't that reset the variable to 5 each time the function is called rather than add to it each time? <br></div><br><br>Yes. When it is a LOCAL. Tony wasnt saying anything about the original code, he was commenting on the statement about changing the Global to Local <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
