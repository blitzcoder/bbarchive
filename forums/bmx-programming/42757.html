<!DOCTYPE html><html lang="en" ><head ><title >FAO: Mark, rendertweening</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >FAO: Mark, rendertweening</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >FAO: Mark, rendertweening</a><br><br>
<a name="478589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>edit: After re-reading what I just wrote below, I think my Q. could be boiled down to: Do you accumulate transforms and apply at renderworld, or apply transforms immediately? :)<br><br><br>Got syrup? Good, coz here's my waffle.... :P<br><br>I'd like to use render tweening in my engine, can you give a brief insight as to how Blitz3Ds tweening works? Not the math, but the system behind it.<br><br>i.e, If I do turnentity() then immediately call entitypitch() I get the new pitch.<br><br>So does turnentity just accumulate rotation and apply it all at renderworld (tweening the accumulated rotation with the capture world rotation), and entitypitch in the meantime would temporarily apply the accumilated rotation of all entitys in a parent chain, so you can get the pitch?<br><br>Or, do you apply transformations immediately (do you store b3d entity info as matrices?), entitypitch() gets the rotation from the current matrix state.........and rendertweening &lt;&gt;1.0 would have to interpolate the matrices of each parent &gt; child chain .... with the capture world state?<br><br>I noticed render tweening &gt; 1.0 doubles the transform effect, so I suspect you're accumulating and applying at renderworld?<br><br>Cheers<br>Tom <br><br></td></tr></table><br>
<a name="478803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure he accumulates all the matrix transforms.  As for tweening, I'm going to guess the best way would be to split the start/end matrices for each entity into start/end quaternions and translation vectors.  Then the quaternions are interpolated with SLERP, and the translation vectors are intterpolated with linear interpolation.  Finally, the quaternions and translation vectors are converted into matrices. Basically just convert the quat to a matrix, and do a raw memory copy from the vector to the proper location inside the matrix if you're using opengl matrices. <br><br></td></tr></table><br>
<a name="479275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mat to quat &gt; slerp &gt; quat to mat, done the trick, although I'm getting some weird scaling when the angles to be tweened from/to are wide apart, hard to describe... almost like the interpolation takes the shortest route through 2 spherical surface points, rather than go across the surface. Might be some normalization anomaly. Other than that, it's working pretty good, very much like Blitz3Ds.<br><br>Tom <br><br></td></tr></table><br>
<a name="479394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Blitz3D's render tweening is pretty simple. It just interpolates between the last transform and the current transform (only if tween is non 0 (or 1: can't remember)).<br><br>It slerps the rot, and linear interpolates the pos/scale. <br><br></td></tr></table><br>
<a name="479406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> All sorted now, fredborg helped me with a missing quat normalize (doh!), and the scaling bug is fixed :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
