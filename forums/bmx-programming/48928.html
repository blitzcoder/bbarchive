<!DOCTYPE html><html lang="en" ><head ><title >Soft Shadows</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Soft Shadows</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Soft Shadows</a><br><br>
<a name="544384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anybody got the skill/time/inclination to port this...<br><a href="http://www.gamedev.net/reference/articles/article2032.asp" target="_blank"><br>softshadows</a><br>I'm giving it a go but lack the skill/time which is making very slow progress. <br><br></td></tr></table><br>
<a name="544417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool page, just what I was looking for. <br><br></td></tr></table><br>
<a name="544427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> man, I would also like to see a bmax solution. <br><br></td></tr></table><br>
<a name="544460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It looks like it is a little limited in that the objects that the light interacts with have to be convex polygon objects made of vertices. Most 2D stuff is not likely to be polygon based. <br><br></td></tr></table><br>
<a name="544466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about user defined points simulating the boundary of the 2D image? I know it might be a pain but built into a map/tile editor with the corners as default it might be workable.<br>I thinking something like the Sprite Candy Shape Editor...<br><a href="http://www.x-pressive.com/SpriteCandy/" target="_blank"> Sprite Candy </a><br><br>P.S. If anybody has other ideas on the best way and best features for a 2D Light/shadow system I'd be interested.<br>This impressed me (the gameplay is suspect though)...<br><a href="http://www.mechanicalcat.net/tech/ld48/6/bluescrn/diary" target="_blank"> 2D lights </a> <br><br></td></tr></table><br>
<a name="544506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrahamK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice Link Tony.<br><br>;) <br><br></td></tr></table><br>
<a name="544544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yah that's an interesting link although it looks more like a `light and shadows` demo than a game at the moment.<br><br>If you read some of the comments that follow that first article about the soft shadows, someone suggests putting vertices around the edge of irregularly shaped 2d objects and then using those as the `corners`, but I think if you do that you're going to have a lot of very thin polygons all over the place.<br><br>I guess it kind of depends on how your game environment is structures as to how you would think about doing lights and shadows.<br><br>Like I said before somewhere else, there is no such thing as shadows. Things begin with darkness and any light that you add creates areas that are lit  - any untouched areas remain dark - ie shadows. So you can either model the shadows, or you can model the light. Or both. It's kind of tied in.<br><br>Also, try casting shadows that are produced by a detailed particle system. Lots of work.<br><br>Shadow-casting is really about line-of-sight, whether the light is visible from a given pixel and if so how much of it. Soft shadows are just produced by the fact that the light source has some width, so certain amounts of it can be seen from different angles. It's not really any different than hard shadows being cast by pinprick light sources.<br><br>I think you probably will either way have to make your own OpenGL/DX engine in order to implement them well.<br><br>It looks like the Max3D module has an automated shadow-casting system using a similar technique to the above article - ie with shadow volumes. Seems like a lot of work though.<br><br>That second article that TonyG posted, looks like they use a raycasting technique where you shoot rays out from the light source in lots of directions and find what objects each of the rays hits, which forms surfaces to create shadow polygons. It's a lot like how game engines like Doom etc do raycasting ... tracing lines across a map until you hit surfaces, speeded up by using something like a Binary Space Partitioning tree or a quadtree/octree.<br><br>I'm planning to have lights/shadows in the game engine I'm working on and I was thinking to use the latter technique, but the softshadows technique suggests it could be done without needing to cast rays so blindly. I guess if you know which objects occupy what areas, though, you can just cast rays through those areas to find the perimeters.<br><br>*shrugs* <br><br></td></tr></table><br>
<a name="544560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really like Tea-Monkey's light/shadow process...<br><a href="/posts.php?topic=42339&amp;hl=light" target="_blank"> here </a><br>I also like the idea of the Soft Shadow process but I wonder whether it can be simplified (or done with native Bmax). Maybe...<br>Divide your objects into 'irregular' shadow casters , blocking objects and 'regular' shadow casters.<br>Irregular shadow casters cast a shadow similar to their own shape. See the ZombieBlast demo for an example.<br>Blocking Objects simply divide 2 areas so cast no shadow.<br>I.e. a wall to the ceiling with a light on one side.<br>Regular Shadow casters need to be calculated using a set of pre-defined boundary points. A ray is then cast to each point extended to meet the light radius mark.<br>Taking the 2 points furthest away from each other on the radius plus their connected predefined points creates your shadow area. In a B3D test I used floodfill within these boundaries. Awful B3D code with lots of errors but showing this near the end of this thread...<br><a href="/posts.php?topic=47907#532399" target="_blank"> Crapcode </a><br>With the drawpoly command or using OpenGL it's possible to shade or texture the resulting shape although I haven't accounted for the curve. Maybe use the same method to create the triangle_fan as the soft-shadows but only to get the edge points. Assuming you have the edge points the following methods could be used to create the shadow geometry.<br><a href="/posts.php?topic=48914#544422" target="_blank"> Drawpoly </a><br><a href="/posts.php?topic=48020#534261" target="_blank"> Texturepoly </a><br>leaving some way to 'add' the softshadow fins.<br>The draw order is going to be difficult without using OGL buffers but, possibly...<br>dark setclscolor (60,60,60)<br>'Floor' tiles with shadeblend<br>Lights with lightblend<br>shadows with shadeblend<br>Other objects with lightblend.<br>Personal aim is to have ambient light (time-of-day dependant), physical lights and shadow.<br>All speculation at the moment but any comments welcome. <br><br></td></tr></table><br>
<a name="544595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't really understand what you're visualising, not quite following it.<br><br>Maybe get it working and show us a pic? <br><br></td></tr></table><br>
<a name="544600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you manage to run the B3D code? <br>This shows my, very poor, method of calculating the shadow geometry. In the B3D code I used a floodfill algo but, with Bmax, you could use Drawpoly or bind a texture with GL_TRIANGLE_FAN which should be much quicker.<br>As yet there are no soft edges. <br>Anyway, I'm visualising something like this...<br><a href="http://legion.gibbering.net/golem/images/Cave2.jpg" target="_blank"> Golem </a> <br><a href="http://legion.gibbering.net/golem/images/Cave1.jpg" target="_blank"> Golem2 </a><br>but with the pillars casting a shadow from the lightsource. <br><br></td></tr></table><br>
<a name="544640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not on a PC here, no B3D.<br><br>The Golem thing is interesting, would be interesting to see light/shadows in isometric. Adds another element to it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
