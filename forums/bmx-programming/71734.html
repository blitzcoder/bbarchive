<!DOCTYPE html><html lang="en" ><head ><title >ZipStream module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ZipStream module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >ZipStream module</a><br><br>
<a name="801600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This module adds two new stream protocols for zip support in streams : "zip" and "zip?"<br>"zip" is for reading files that are in the specified zip.<br>"zip?" is for reading files that are in the specified zip OR (if not found in the zip) on the hard drive (or any other location supported by streams).<br><br>The zip stream works over another stream. This means that you can not only access zip files on the hard drive, but also zp files that are incbined, or even zip files within other zip files, and so on.<br><br>Example of valid urls: "zip::myGame/myZip.zip//someFile.txt", or even "zip::incbin::myGame/myZip.zip//someFile.txt" if the zip file is incbined.<br><br>So you could do by example: LoadText("zip::myGame/myZip.zip//someFile.txt")<br><br>Use as you please.<br><br>Grab it here (you need to be logged in the forum to see the download link):<br><br><a href="http://www.koriolis-fx.com/forum/index.php?topic=15.0" target="_blank">http://www.koriolis-fx.com/forum/index.php?topic=15.0</a> <br><br></td></tr></table><br>
<a name="801606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems it load directly into mem and won't generate temp file, nice.<br><br>Thanks for the handy module <br><br></td></tr></table><br>
<a name="801608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> MacOS and Linux compatible? <br><br></td></tr></table><br>
<a name="801612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Seems it load directly into mem and won't generate temp file, nice. <br></div>Yes. That's the whole point, the zip stream works over another stream, making it very versatile, and letting you access a zipped file wherever it's stored.<br><br><div class="quote"> MacOS and Linux compatible? <br></div>It's based solely on ZLib so it should definitely work on Mac and Linux. I just didn't bother to compile it on Mac or Linux yet. If anyone wants to compile it and check that it works OK for these platforms, I will happily include the resulting binaries. <br><br></td></tr></table><br>
<a name="801615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the mod but I have a problem, maybe you can explain me where is the error<br><br><pre class=code>
Local te:tstream = OpenStream("zip::test_bmax.zip//test_zip.txt")

If te
While Not Eof(te)
	Print ReadLine(te)
Wend
CloseStream(te)
Else
	Print "no stream found"
End If

Local testo:String=LoadText("zip::test_bmax.zip//test_zip.txt")

Print "Text: "+testo
</pre><br><br>I have created a .zip file (test_bmax.zip) that contains the file test_zip.txt.<br>I have the error 'No stream found' (te=NULL) but LoadText() works perfectly. What I miss? <br><br></td></tr></table><br>
<a name="801621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Silly question, but did you actually import koriolis.zipstream? <br><br></td></tr></table><br>
<a name="801713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> checking this one out now, sounds like it could definitely come in handy... <br><br></td></tr></table><br>
<a name="801717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it support password it'll become killer.<br><br>Can it add something like $zippass to specify password? <br><br></td></tr></table><br>
<a name="801718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great module Koriolis !! Many thanks :)<br><br>Good job :) <br><br></td></tr></table><br>
<a name="801721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Silly question, but did you actually import koriolis.zipstream? <br> <br></div><br>Of course, the second part of the program <br><pre class=code>
Local testo:String=LoadText("zip::test_bmax.zip//test_zip.txt")
Print "Text: "+testo
</pre><br>works perfectly: the 'zip::' protocol is recognized. but only for the LoadText command. <br><br></td></tr></table><br>
<a name="801723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "but only for the LoadText command" ???<br><br>I can't load an image from this zip ?? <br><br></td></tr></table><br>
<a name="801735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
If FileType("zipped_image.zip")
	Print "File exists"
End If
Local zimage:timage = LoadImage("zip::zipped_image.zip/back_muro_2.png")
If zimage
	Print "Image loaded"
	Else
	Print "Image NOT loaded"
End If
</pre><br>This is a test for loading an image from a file 'zipped_image.zip'. But - for me - it doesn't work. Can anyone else do some tests please? So only to understand if there is a problem with my configuration. <br><br></td></tr></table><br>
<a name="801748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If it support password it'll become killer. <br></div>Yes it does. You can register a zip password globally, using SetZipStreamPasssword. Once done you can access the passworded file just like a unpassworded file.<br><br>@degac: you need a double slash to separate the zip path from the file inside the zip.<br>With Local zimage:timage = LoadImage("zip::zipped_image.zip/back_muro_2.png") youare trying to load the zip file "zipped_image.zip/back_muro_2.png" but you want to access the zip file "zipped_image.zip" and get the file "back_muro_2.png" inside of it. You need to do:<br>Local zimage:timage = LoadImage("zip::zipped_image.zip//back_muro_2.png")<br><br>But as said below there is another problem then.<br><br><div class="quote"> I can't load an image from this zip ?? <br></div>I just tried with LoadPixmapPNG and it works. <br>I then tried with LoadImage and apparently it doesn't work because the ZipStream is not seekable. Is that the error you get ?<br>The problem is I don't know yet how to make the zip stream seekable, as I can't find any function in zlib that lets me do that. <br><br></td></tr></table><br>
<a name="801761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps you can try the loadimage(loadbank()) trick as when trying to loadimage from a http:: stream <br><br></td></tr></table><br>
<a name="801765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, actually I just made a simple fix: For the special case when Seek(0) or Seek( current pos ) is called, the seek now works. This is limited, but is enough to make LoadImage() work with the zip stream.<br><br>Please redownload the module and let me know if you still encounter problems. <br><br></td></tr></table><br>
<a name="801766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the difference to GMan's Zip module? <br><br></td></tr></table><br>
<a name="801769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> GMan's zip module provides everything you need to mainpulate zip files in pretty much every way you wish, BUT using a special dedicated API.<br>On the contrary, the zipstream module let's you read zipped files using the standard TStream interface. This means that any piece of code that works on a TStream can work on zipped files.<br>If you (or anyone) have written code that works on TStream, you don't have to write another version to handle zipped files: just use the "zip::" protocol and that's it.<br>By example you can already use the standard functions LoadText and LoadImage with zipped files. <br><br></td></tr></table><br>
<a name="801803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. New version works perfectly with LoadImage(zip::).<br>Thank you very much! <br><br></td></tr></table><br>
<a name="801832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the explanation. <br><br>Btw: Gman's version can also extract data directly into the ram and read it from threre. <br><br></td></tr></table><br>
<a name="801854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Gman's version can also extract data directly into the ram and read it from threre.  <br></div><br>Yes, but it's still not a stream protocol, and perhaps more important it requires to extract the whole file into memory. On the other hand, my zip stream extracts data on the fly.<br>I think both modules are very much complementary.<br>By example I personnaly use GMan's zipengine to create zip files, and my zip stream to read it back (from another program). <br><br></td></tr></table><br>
<a name="801876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> So your solution is faster in terms of extracting files? <br><br></td></tr></table><br>
<a name="801892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should overall be a bit faster, yes. To be clear, the raw extraction is probably slower, but there is no need for a second pass (reading from memory). More important, there is no need for a block of memory as big as the file itself. <br><br></td></tr></table><br>
<a name="801908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gavin Beard</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx, this works great, is very fast too, have used it today just to test storing images and loading, very good.<br><br>only issue i have is with passwords:<br><br><br>Graphics 640,480;<br>SetZipStreamPasssword("test.zip","gavsta")<br>Global testimg:timage =LoadImage("zip::test.zip//untitled-1.jpg");<br><br>While Not KeyHit(KEY_ESCAPE)<br>	Cls<br>	DrawImage(testimg,0,0)<br>	Flip<br>Wend<br><br>this always comes back with "Attempt to Access field or method of Null Object". if i turn off the password side it works fine?<br><br>**EDIT**<br>just ignore me, i'm having one of those days, would help if i had called the file test.zip and not test.zips <br><br></td></tr></table><br>
<a name="801912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Question: is it possible to *combine* two methods like incbin and zipstream, to add another layer of protection?<br><br>(e.g. resources inside of password-protected incbinned ZIP) <br><br></td></tr></table><br>
<a name="801915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an example with incbinned zip :)<br>Nice module ! really usefull !<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 1024,768 

Incbin "Ziptest.zip"

SetZipStreamPasssword("incbin::Ziptest.zip","popo")
Local zimage01:timage = LoadImage("zip::incbin::Ziptest.zip//Fond Deviant Art_00767.jpg")
Local zimage02:timage = LoadImage("zip::incbin::Ziptest.zip//Fond Deviant Art_00776.jpg")

While Not KeyHit(KEY_ESCAPE)
	Cls
	SetColor 255,255,255
	DrawImage zimage01,0,0
	DrawImage zimage02,80,80	
	Flip
Wend
</textarea> <br><br></td></tr></table><br>
<a name="802007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad you like it :) <br><br></td></tr></table><br>
<a name="804044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> As a temporary fix could you use replace the seek method with one that goes to the beginning and reads the offset number of bytes? <br><br></td></tr></table><br>
<a name="804087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll check that, *maybe* this week end. If I forget, remind me.<br>I had already thought of doing it that way, I just didn't bother. Howerver, to avoid being totally inefficient I'd need to make the stream buffered (or else, if it happens that you do something like seeking to N, N+1, N+2 etc, then it will totally ineffieicnt as for every single byte it will restart from the beginning). <br><br></td></tr></table><br>
<a name="804105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wicked, This is just what I need, If this can decompress Incbin'd Zips straight to RAM (Not Temp HDD file)<br><br>I dont have time to try this out right now but im definitely interested in using this in my software<br><br>Long Live BlitzMax and its Modules <br><br></td></tr></table><br>
<a name="804220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> it does'nt work: i get "Stream is not seekable" <br><br></td></tr></table><br>
<a name="804222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've found that the zipstream does'nt work with pantsons MPEG module:<br><br>Local movie:Tmpeg = OpenMPEG("zip::intro.zip//intro.ogg") <br><br></td></tr></table><br>
<a name="804224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, as stated earlier the stream is not seekable (yet) except for 2 special cases. I will do my best to fix that when I have time. <br><br></td></tr></table><br>
<a name="804398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i've found that the zipstream does'nt work with pantsons MPEG module: <br></div><br><br>Is there even any benefit doing so?<br><br>zip compression is negligible on an MPEG file, and I'd think that the added overhead of unzipping it would outweigh the minor size savings... <br><br></td></tr></table><br>
<a name="805139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a command for counting the total files inside a zip file? <br><br></td></tr></table><br>
<a name="805145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dabz</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, really handy! :)<br><br>Thanks for sharing such a great mod free! ;)<br><br>Dabz <br><br></td></tr></table><br>
<a name="805464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >seriouslee</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very handy tool! Really like the way it integrates into the commands.<br><br>degac:<br><br>I have created a .zip file (test_bmax.zip) that contains the file test_zip.txt.<br>I have the error 'No stream found' (te=NULL) but LoadText() works perfectly. What I miss?<br><br>I played with this because I need it too. I found I can open the stream with:<br><br>Local te:tstream = OpenStream("zip::test_bmax.zip//test_zip.txt", true, false) where false tells it the file is NOT writable.<br><br>Hope that helps.<br><br>Silly question: (I really new to posting) How do you format text in the reply window and add things like the scrolling text box? <br><br></td></tr></table><br>
<a name="805537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is perfectly normal, the stream is read only. The intent is really to use zip files as in Quake by example : as big "pak" data files. For *writing* into the stream, either simply create the zip files using Winzip or whatever, or use GMan's ZipEngine module.<br>Thus you should not try to open the stream in write mode.<br>ReadStream(...) will work, as well as<br>OpenStream(..., ..., false).<br>But WriteStream(...) or OpenStream(..., ..., true) won't. <br><br></td></tr></table><br>
<a name="805610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >seriouslee</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've run into a problem. I can open text files, image files, and font files in the zip with no problem, but when sound is introduced into the game (not in the zip, just using standard files) I get "Attempt to Access field or method of Null Object" from weird places in my code and the standard editor bombs if I try to access the debug info. If I take out the zip:: references the code runs clean. Any ideas? <br><br></td></tr></table><br>
<a name="805707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most probably, you tried to load the sound file using the ZipStream, the loading failed, you didn't check that the load was successfull or not and tried to play that Null audio sample.<br><br>As mentioned earlier, there is still an issue : the stream is not seekable. I will look at the the issue when I have more time.<br>So if you load a sound file that is loaded using TStream.Seek, then it won't work. I tried with Wav files and it works, but it all depends on the file format you're loading, and the way the loading code is written. <br><br></td></tr></table><br>
<a name="806286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Most probably, you tried to load the sound file using the ZipStream, the loading failed, you didn't check that the load was successfull or not and tried to play that Null audio sample. <br></div><br><br>workaround?<br><br>loadsound(loadbank("zip::mysound.zip//sound.ogg")) <br><br></td></tr></table><br>
<a name="806300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, this is the logical workaround, and will always work.<br>However I can't pretend it wouldn't be better to have it work without this workaround.<br>I *will* try to fix this, I just don't know when. <br><br></td></tr></table><br>
<a name="806629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have finally fixed the limitation concerning TZipStream : it is now entirely seekable. By example I can now load zipped ogg files (which require the stream to be seekable), it works perfectly (don't tell me zipping ogg files is stupid, it's just a test, and actually CAN make sense).<br>You can download the new version at the same place. <br><br></td></tr></table><br>
<a name="806653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I'm testing your last zipstream module, but I have 'Stream is not seekable' when I try to load a .ogg file.<br>I also have used the 'buf::' protocol, without success. Only with CreateBufferedStream() function it works.<br>(I'm using Import koriolis.bufferedstream)<br><br>Can you post a working example?<br><br>Thanks again <br><br></td></tr></table><br>
<a name="806662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Working example:<br><pre class=code>Import koriolis.zipstream
Local sound:TSound = LoadSound("zip::D:\BlitzMax\samples\digesteroids\sounds\menu.zip//menu.ogg")
PlaySound(sound)
While Not KeyHit(1)
Wend</pre><br>For your problem, it's likely that you're still using the old version. One reason might be that the zip files containing the modules will be extracted to zipstream.mod/zipstreamkoriolis.mod and bufferedstream.mod/bufferedstream.mod. But in the BlitzMax "mod" folder, you must have mod/koriolis.mod/zipstream.mod and mod/koriolis.mod/bufferedstream.mod. So be carefull to copy the zip content at the right place. <br><br></td></tr></table><br>
<a name="840989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi.  This module is great but I'm not getting the password feature.  Is it only meant for incbinned zip folders?  Is it supposed to actually set a password for a zip folder?  I can set a password then exit the program and open the zip folder normally using no password.<br><br><b>EDIT:</b> Nm I got it.  Create your zip folder.  Click file-&gt;add password.  Awesome! <br><br></td></tr></table><br>
<a name="841156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just few words to say that i'm using your module all the time! :)<br><br>Thanks Koriolis for this great piece of code :) <br><br></td></tr></table><br>
<a name="841158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thans for the thanks :) <br><br></td></tr></table><br>
<a name="846220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis: this is an awesome module! Thank you so much for sharing it.<br><br>Now I must ask: any possibility of getting zip writing added? This would make for a great save game function when there are many files generated: throw them all into a zip file to keep them organized, and then password lock it to prevent hacking!<br><br>Either way, thanks again for sharing! <br><br></td></tr></table><br>
<a name="846255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is certainly doable, however I do no have much time for this. In addition I believe write support is much less important here, and if you really need it I highly recommend using the ZipEngine module from GMan.<br><br>If anyone feels like adding write support, I will happily test that and incorporate it in the module. <br><br></td></tr></table><br>
<a name="860543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stu_ovine</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> An excellent addition, thanks for sharing the code.<br><br><br>For those wanting to use a subfolder witin the ZIP file replace your "\" with "/" before you open the file.<br><br><pre class=code>

filename = filename.Replace("\", "/")

</pre> <br><br></td></tr></table><br>
<a name="895488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Koriolis : Any chances to get it work with blitz3D Sdk ? <br><br></td></tr></table><br>
<a name="898127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not much.<br>The module is totally dependant on BlitzMax streams.<br>blitz3D Sdk is just an SDK, I don't believe they have included any kind of general stream system in it.<br>Now let's imagine you add a general stream framework on top of blitz3D Sdk, or use an existing one (say C++ stl streams if you're using C++) it will be mostly worthless as the SDK itself won't be using it and thus you have zero chance of having the sdk load a model from yor zip.<br>Plus I don't own blitz3D Sdk and have no interest in it.<br><br>The only possibility would be if you're using BlitzMax AND the BlitzMax version of blitz3D Sdk is based on BlitzMax streams (which basically requires that the sdk is written in BlitzMax). In this case, the zipstream module should work out of the box with the sdk. <br><br></td></tr></table><br>
<a name="898256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks :) <br><br></td></tr></table><br>
<a name="933207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to detect if a file stored inside a zip is present at all? <br><br></td></tr></table><br>
<a name="933209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> What happens when you try to read a file from the zip that does not exist? <br><br></td></tr></table><br>
<a name="933224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What happens when you try to read a file from the zip that does not exist? <br></div>I'm itching to say.. :P<br><br>Grisu: If you try to open a stream to a zip path (or any path, for that matter), and it does not exist, your stream should be Null. <br><br></td></tr></table><br>
<a name="933404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the app crashes completely which is not good.<br><br>I did check for the null stream but it doesn't help here. ;)<br><br>@Brucey: <br>See (TuneIn_Station)line:<br>Local zstation:String = LoadText("zip::"+fullzipdir)<br><br>Probably it's the loadtext function that has no fail check?! :D <br><br></td></tr></table><br>
<a name="933426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Probably it's the loadtext function that has no fail check <br></div><br>From memory... LoadText used to crash if given a Null filename - don't know if it was ever... fixed. <br><br></td></tr></table><br>
<a name="933451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> It wasn't... :D <br><br>So what to do? Blame the coders... ;) <br><br></td></tr></table><br>
<a name="933454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can always wrap the call in a Try Catch block...  :-) <br><br></td></tr></table><br>
<a name="1070074"></a>

<a name="1070076"></a>

<a name="1070077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nevermind... it was a filename capitalization error. thanks!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1135076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is very interesting.<br>Where do I download? <br><br></td></tr></table><br>
<a name="1135082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >matibee</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> The download instructions are here: <a href="http://www.blitzbasic.com/Community/posts.php?topic=71734#801600" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=71734#801600</a><br><br>Or are you having trouble? <br><br></td></tr></table><br>
<a name="1135088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't able to register in the forums so I wasn't able to download. <br><br></td></tr></table><br>
<a name="1135124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok now I downloaded the zipsteeam library.<br><br>I created one zip file with name "test.zip"<br>and I put one image .bmp with name "test_image.bmp"<br><br><br>[code]<br>global test_image:TImage<br>test_image = LoadImage("zip::test.zip//test_image.bmp", MASKEDIMAGE)<br>DrawImage(test_image, 0, 0, 0)<br>[/cod]<br><br>I have this error:<br><br>Unhandled Exception:Attempt to access field or method of Null object<br><br>What does this means? <br><br></td></tr></table><br>
<a name="1135125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> did you add this line to your code?<br><br><pre class=code>SuperStrict   
Import koriolis.zipstream
global test_image:TImage
test_image = LoadImage("zip::test.zip//test_image.bmp", MASKEDIMAGE)
DrawImage test_image, 0, 0, 0
</pre> <br><br></td></tr></table><br>
<a name="1135127"></a>

<a name="1135129"></a>

<a name="1135131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Takis76</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow , perfect the image loaded. :D<br><br>I wasn't loaded the library<br><br>If I my zip have password how to load the image with the zip password?<br><br>I found it<br><br>I put this code before load everything from zip<br><br><pre class=code>
SetZipStreamPassword("test.zip", "12345")
</pre><br><br>I think , this solve all my pack file problems.<br>Thank you very very much AGAIN :D<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1144365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pineapple</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible to get this to work together with LoadDir? <br><br></td></tr></table><br>
<a name="1211759"></a>

<a name="1211761"></a>

<a name="1211764"></a>

<a name="1211775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kippykip</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I get this now? Link is dead with that irritating robots.txt<br><br>EDIT:<br>Never mind found it <br><a href="http://retroremakes-framework.googlecode.com/svn/trunk/modules/koriolis.mod/" target="_blank">http://retroremakes-framework.googlecode.com/svn/trunk/modules/koriolis.mod/</a><br>EDIT 2: ZipStream appears not to work with minib3d when using loadMesh etc <br><br></td></tr></table><br>
<a name="1211842"></a>

<a name="1212412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> MiniB3D with Koriolis on PC and Mac?<br><br>I often did combinations of Koriolis Zipstream and MiniB3D and it works on PC. On the MAC I needed to copy the files to a temp dir first.<br><br><pre class=code>DatenPfad$="ZIP::Incbin::tt1.zip//"

Global ImagePfad$=DatenPfad
?MacOS
	Print "mac os "
	ImagePfad=AppleResourceDir()
	Local CopyListe:TStream, CopyDatei$
	CopyListe=OpenFile(DatenPfad + "MacCopy.lst")
		While Eof(CopyListe)=0
			CopyDatei=ReadLine(CopyListe)
			Print "copy now " + copydatei
			If FileType(ImagePfad+CopyDatei)=0
				Print "yes"
				CopyFile DatenPfad +CopyDatei, ImagePfad + CopyDatei
			EndIf
		Wend
	CloseFile CopyListe
?
</pre> <br><br></td></tr></table><br>
<a name="1212408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cruis.In</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> this comes in a module download with timeline as well. Plus I think the area which hosts all blitz modules has it. Do a search in google I don't have a bookmark. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
