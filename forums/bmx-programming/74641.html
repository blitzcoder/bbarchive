<!DOCTYPE html><html lang="en" ><head ><title >Detect Minimise on Mac - I've added a minimise btn</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Detect Minimise on Mac - I've added a minimise btn</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Detect Minimise on Mac - I've added a minimise btn</a><br><br>
<a name="834036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK I figured out how to add a minimise button to graphics windows created on Mac OSX with Graphics w,h,0.<br><br>A minimise button cannot be added once the window is created (according to the Mac Developer docs) only as the window is created.  So I had to modify glgraphics.macos.m by finding this line (990):<br><br><pre class=code>
style=NSTitledWindowMask|NSClosableWindowMask</pre><br><br>and changing it to:<br><br><pre class=code>
style=NSTitledWindowMask|NSClosableWindowMask|NSMiniaturizableWindowMask;
</pre><br><br>Then rebuild modules.<br><br>This works and when you click minimise it does minimise, woo!  However it not passing a suspended event into BMax so I can't stop the music and can't stop game logic which is naff.<br><br>However, I've no idea where to go from here.  I.e. how to detect the minimise.  Probably another module needs to be modified so that an AppSuspend event is fired off when the game is minimised.  Can anyone help with this as it would be great to get it sorted for the Mac!  Thanks in advance. <br><br></td></tr></table><br>
<a name="834042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look into the <b>windowDidMiniaturize</b> and <b>windowDidDeminiaturize</b> delegates.<br><br>Adding them to the <b>BBGLWindow</b> object and firing the aproproate events may work.<br><br>And check out the <b>isMiniaturized</b>, <b>miniaturize</b> and <b>deminiaturize</b> methods as well. <br><br></td></tr></table><br>
<a name="834047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> souunds good.  Anyone with good Objective C skills able to assist? thx <br><br></td></tr></table><br>
<a name="834051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Add these after windowShouldClose on line 39 and see what happens ;)<br><pre class=code>
-(void) windowDidMiniaturize:(NSNotification *) note {
	bbSystemEmitEvent( BBEVENT_APPSUSPEND,&amp;bbNullObject,0,0,0,0,&amp;bbNullObject );
}
-(void) windowDidDeminiaturize:(NSNotification *) note {
	bbSystemEmitEvent( BBEVENT_APPRESUME,&amp;bbNullObject,0,0,0,0,&amp;bbNullObject );
}
</pre> <br><br></td></tr></table><br>
<a name="834053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome, thanks, will try in about an hour! <br><br></td></tr></table><br>
<a name="834114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent it works thanks!  Really appreciated.  Shame it's a module tweak though, it would be great if BRL made this standard (or at least made the minimise icon optional.<br><br>Interestingly, because my game uses HideMouse so it can draw it's own mouse cursor, when the window is minimised, the Mac mouse cursor still disapears when it moves over where the window was, how freaky is that?  I fixed that with some code that called ShowMouse when suspended was detected and HideMouse when it resumes.<br><br>OK someting else related, if I press F11 to hide all windows to show the desktop, the game continues to run and also if you move the mouse where the window was, all the buttons make mouse over noises (although they can't be clicked as focus goes to the desktop).  Do you know how to detect the F11 event as I'd like to treat it like a normal suspend/resume via app lost focus or app was minimised. Thanks! <br><br></td></tr></table><br>
<a name="834139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Grey- I've been watching your Framework evolve for quite some time and I am pleased to see progress being made on cross-platform functionality. I'll be buying 1.05 for sure. <br><br></td></tr></table><br>
<a name="834142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This seems to be a common problem with cocoa (from what i could find with my limited searching anyway).<br>Does this happen without the minimize tweak as well?<br>And does it only happen when showing the desktop, and not when doing expose?<br><br>There are ways to not include the window in any expose action though, but thats probably not what you want. <br><br></td></tr></table><br>
<a name="834151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tachyon: Cool! Yeah the framework has compiled on the Mac for a long time but it's only recently that I've been looking into all the little OS-related quirks and getting them fixed (which  I did for Windows last year).  They are very nearly all done.  I'm finding the Mac ones hard to solve though because I can deal with Windows API but the Mac stuff is very new to me.  So I rely on the help of Mac experts like Grable, Brucey and others.<br><br>Grable: I can take the tweak out and see.  I had never tried to press F11 when one of my games was running before.  Ok just confirmed that it happens without the tweak.<br><br>What is expose?  Basically the problem is with F11, is there something else I should test?<br><br>Yeah I just need to receive a system message that F11 was pressed OR detect that the system is in the F11 state (whatever it's called) so I can take my own action.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="834159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is expose? Basically the problem is with F11, is there something else I should test? <br></div><br>Exposè (got the right letter this time ;) is all the fancy effects like F11 and the "show all windows" thingy.<br><br><div class="quote"> <br>Yeah I just need to receive a system message that F11 was pressed OR detect that the system is in the F11 state (whatever it's called) so I can take my own action. <br></div><br>you can remap them to any key or mouse button though, so calling it F11 can be a bit misleading. and whatever button it is assigned to is trapped by the os, so im not sure you can check for it.<br><br>I cant find any info on detecting expose actions, im not even sure its possible.<br>It seems the windows arent moved at all, only the graphic of them.<br><br>You could try the various mailing lists, google isnt much help today. <br><br></td></tr></table><br>
<a name="834161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm OK thx.  This may just have to be a "feature", much as I'd hate to leave it at that. <br><br></td></tr></table><br>
<a name="1093574"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> BUMP<br><br>I'm doing the Mac build of my game and this has had me stumped for nearly two bloody hours and I couldn't find a thread about it til now.  I've trawled all through my Magicville code because I knew I figured it out for that, yet I could see no sign of how I'd done it.<br><br>Mark, if you're reading this - PLEASE, for my sanity if nothing else, put this in the official build!  If I happen upon the same problem/thread at the end of my next game and it takes me as long to figure out it was done via a mod tweak, then I'm probably going to murder some kittens (or at least shout at some inanimate objects). <br><br></td></tr></table><br>
<a name="1111113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bumping this again as a couple of times a year I have to rebuild my Mac games and if I've updated Blitz and forgot to modify the modules, they don't have a minimise button.  It would be great to have that support build-in finally.<br><br>Pretty Please Mark? <br><br></td></tr></table><br>
<a name="1111142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't it time you bought MaxGUI? <br><br></td></tr></table><br>
<a name="1111144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> bought??????????????????????????<br>have you been away that long:<br><a href="http://www.blitzmax.com/Community/posts.php?topic=91243" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=91243</a> <br><br></td></tr></table><br>
<a name="1111145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> No cos all my games use vanilla BMax and so do lots of other devs.  In order to have a professional quality game you need a minimise button. <br><br></td></tr></table><br>
<a name="1111158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> MaxGUI is vanilla now! <br><br></td></tr></table><br>
<a name="1111170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I totally missed that thread, didn't know that! <br><br></td></tr></table><br>
<a name="1111208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Add MaxGUI (and a bunch of unnecessary code) just for a minimize button??? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
