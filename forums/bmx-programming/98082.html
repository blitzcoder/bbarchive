<!DOCTYPE html><html lang="en" ><head ><title >Packing Graphics?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Packing Graphics?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Packing Graphics?</a><br><br>
<a name="1143519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robby</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys! Just had a graphic storage question here. Suppose I have something like this:<br><br>Global tiles:TImage[848]<br><br>For gcount = 1 To 847<br>  name="tile" + gcount<br>  tiles[gcount] = LoadImage(name,MASKEDIMAGE)<br>Next<br><br>Those tiles are 46x46 pixels each, and 847 of them in the directory.<br><br>Is there some way I can load them in like this, but then save them out as one big file, like graphics.gfx or something, and be able to reload the whole pack back into the tiles[847] so I don't need to have all the zillions of little graphics in the directory?<br><br>Any help appreciated!!   -Rob <br><br></td></tr></table><br>
<a name="1143521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadAnimImage should do what you want. It automatically cuts the image into the specified number of frames. <br><br></td></tr></table><br>
<a name="1143528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just<br><pre class=code>Incbin "image.blim" 'my own format
Global blimey:TImage=LoadImage("incbin::image.blim")
</pre><br>If you want to tile an image just use G.I.M.P. :)<br><a href="http://www.gimp.org/" target="_blank">http://www.gimp.org/</a> <br><br></td></tr></table><br>
<a name="1143571"></a>

<a name="1143579"></a>

<a name="1143581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SystemError51</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>Question moved to appropriate topic</i><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143573"></a>

<a name="1143574"></a>

<a name="1143575"></a>

<a name="1143576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> With... <br><pre class=code>BigImage=CreateImage(46*40,46*22)</pre> ...you should be able to create a new empty image with 1840x1012pixel (space for 40*22=880 tiles). <br><br>Now you load the 847 small images, display them on the screen like tiles: 40 in a line and 22 rows. <br><br>Then copy the screen into the big image with... <pre class=code>GrabImage(BigImage,0,0,0)</pre><br><br>At the end you save the big image with<br><pre class=code>SavePixmapPNG()</pre><br><br>When loading again now use LoadAnimImage() with the big picture.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, first of all:<br>tiles:timage[848] - this creates an Array with 848 entries.<br>for gcount = 1 to 847 ... this iterates only 847 of them, arrays start with index '0'. Just a little thing, but such things sum up ;)<br>Also, if you are nto doing already keep your programs with superstrict, this will show you many errors before they get weird.<br><br>Then, for your question:<br>you can load your images as you do by now, draw them and capture the whole image with all of them and save it. Try to make a Picture thats nearly square, considering 847 images this would be:<br>sqr(847) -&gt; ~30*30 Images -&gt; 1380*1380px in Size.<br>I would recoomend using Imagesizes in Powers of 2 in the future as most graphic cards handle them faster (e.g. 32*32, oder 64*128).<br><br>See SavePixMapPNG and GrabPixMap for this.<br>It's as simple as that.<br><br>After this, which is a one-time-duty, you can easily load and draw your Images with LoadAnimimage and Drawimage. <br><br></td></tr></table><br>
<a name="1143614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robby</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can make a 30 x 30 png or bmp. In fact, this is how they were first arranged. But I couldn't find any info on how to split the big image into an array. I can certainly leave some blanks for future expansion - and in fact a few of those 847 are already blanks. So lets suppose I already made a 30 x 30 grid of 46 x 46 tiles. That would be a bmp or png of 1380 x 1380, as you mentioned. This I can do.<br><br>What I don't know is how to do something like read it left to right, top to bottom into my array. Something like:<br><br>Global tiles:TImage[900] (or 901 if I want to use 1-900 vs. 0-899]<br><br>gcount = 0<br><br>For y = 0 To 1334 Step 46<br>  For x = 0 To 1334 Step 46<br>      gcount = gcount + 1<br>      tiles[gcount] = (Load a 46x46 chunk)<br>      ' like tiles[gcount] = ChopAChunk(x,y,46,46)  ???<br>  Next <br>Next<br><br>Also, I need them to be images for what I do in the rest of the program. I forgot why, but couldn't do it if loaded as PixMap.<br><br>Its that "load a 46x46 chunk" I can't figure out. Thanks,  -Rob <br><br></td></tr></table><br>
<a name="1143620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no need for using an array. You could directly use the frames of the big image. <br>DrawImage() has a paramter FRAME after x and y:<br><pre class=code>for i=0 to 10 ' or 847
     DrawImage BigImage, 50, i*50, i 
Next</pre><br><br>Your BigImage, loaded as AnimImage() is not really one image but already 847 little images. You can handle them like 847 independent pictures. <br><br></td></tr></table><br>
<a name="1143622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you save a pixmap, you can load is at image later on - it's stored as a .png and bmax won't bother if you loadimage or loadpixmap it.<br><br>As midimaster said: <br>LoadAnimImage and DrawImage is all you need. Write them in your IDE, hit F1 two times and bMax will tell you what the parameters are. (I would recommend hotdocs for a better documentation, can be found in the code archive on www.blitzforum.de) <br><br></td></tr></table><br>
<a name="1143663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Captain Wicker (crazy hillbilly)</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if you save a pixmap <br></div><br>that is one of the easiest ways of doing things. :)<br>I like to be more 'sophisticated' with my code and image processing. ;) <br><br></td></tr></table><br>
<a name="1143695"></a>

<a name="1143696"></a>

<a name="1143697"></a>

<a name="1143698"></a>

<a name="1143699"></a>

<a name="1143700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SystemError51</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> But I couldn't find any info on how to split the big image into an array <br></div><br><br>That's super easy.<br><br>[bbcode]' Load our big image<br>Global myLargePixmap : TPixmap = LoadPixmap("path/to/your/image.png")<br><br>' Dynamic array holding smaller images<br>Global pxArray : TPixmap[]<br><br>' Figure out how many images we need<br>' // insert some code to figure out number //<br>'<br>' For the purpose of this post, let's just say we want 32x32 (w and h) images.<br>' This would set the big image at 1024x1024 image size.<br>Global numImages = 1024<br><br>' Make room for all our images.<br>pxArray = pxArray[.. numImages]<br><br>' Three locals<br>Local i<br>Local xpos<br>Local ypos<br><br>' Create all images from the big image<br>For i=1 To numImages<br><br>    ' Read the appropriate section from the large pixmap<br>    pxArray[i-1] = New TPixmap  ' Prevent ExceptionViolation errors<br>    pxArray[i-1] = PixmapWindow(myLargePixmap, xpos, ypos, 32, 32)<br><br>    ' Increase horizontal position<br>    xpos = xpos + 32<br><br>    ' Update row and jump back to 0<br>    If xpos &gt; 1024<br>        xpos = 0<br>        ypos = ypos + 32<br>    EndIf<br><br>Next<br><br><br>' Release the pixmap<br>myLargePixmap = Null[/bbcode]<br><br>That's pretty much it... you now have made smaller images out of the big one, and all in memory.<br><br>(I don't know why there's a ";" after the bigger-than symbol "&gt;" - that is not supposed to be there)<br><br><a href="/bmdocs/command.php?name=PixmapWindow&amp;ref=2d_cat" target="_blank">PixmapWindow API call</a><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1143707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if you save a pixmap<br><br>that is one of the easiest ways of doing things. :)<br>I like to be more 'sophisticated' with my code and image processing. ;)  <br></div><br>First of all, why shoud he go more complicated than needed.<br>Second, instead of just speaking that you have sophisticated ways (which sounds like pure posing) you should SHOW them- 'cause that would be real help for the asking person here.<br>So share your great wisdom with us, Cap.<br><br>SystemError: although you answer his question to the point I think it would be better to keep stuff simple for him. I got the trong feeling that this post had to be in the beginners section. <br><br></td></tr></table><br>
<a name="1143735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robby</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You guys are the greatest! And I appreciate all the advice I'm getting here.<br><br>I think one of my biggest personal problems not only in programming but other stuff, is that I often leave out huge gaps of information when asking a question as I forget to mention any background info, which can confuse my intent, and I apologize for my absent mindedness!<br><br>What I'm working on is over here, maybe 1/3 done at this point:<br><br><a href="http://web.me.com/drdungeon/Site/MADMAN.html" target="_blank">http://web.me.com/drdungeon/Site/MADMAN.html</a><br><br>I use IMAGES because my understanding is that they are in graphics memory and are much faster. If I read correctly, they also support LoadImage with the MASKED flag, which I need.<br><br>I have 847 diamond tiles, white background as mask so they mesh up on the screen when drawn.<br><br>I use a tile array because its much easier to refer to specific tiles, like when clicking dough on a firepit to make bread, etc. These numbers comparing tiles are all over the program.<br><br>Its also the reason I use 1-847 instead of 0-846. I keep mixing up 0 as first or 1 as first, plus the 0 gives me a left-over extra spot in case I need it.<br><br>Originally I searched for a way to split up a big bitmap or png, and my understanding was that you needed to load as a pixmap to do this - to work with it at a pixel level, or chop sections.<br><br>PixMap is in main memory, Image is a representation of Pixmap in video ram and is much faster, plus supports the MASKED image flag and likely others.<br><br>All this is fine and works like a charm. MADMAN is coming along!<br><br>Its just my aesthetic sense doesn't like the hundreds - and possibly thousands of little tiles in the directory.<br><br>So the point is I can't convert the thing at this point to do a completely different drawing method - as I said, that tile array and a similar people and object array are all over the place, and make the program far easier to work with.<br><br>Ideally, then - if I can't save my tile array to a file, much as we would an integer array, is it possible to save a pixmap array to one file?<br><br>The idea is then I could re-load a big map into a pixmap - which apparently I need to split into 46x46 tiles, then somehow convert them into my MASKED tile image array, which is used all over the program.<br><br>I'm thinking that AnimImage() might work, but I'm unfamiliar with using that.<br><br>So the goal is to get one big graphic file loaded into an IMAGE array of MASKED tiles.  Thanks again! You know, programing is the only thing I know of that can be fun and maddening at the same time!    -Rob <br><br></td></tr></table><br>
<a name="1143738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BladeRunner</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, one more time: <br>You have by now (correct me if I am wrong) something like this:<br><br>drawimage bla[tilenumber],x,y, and this a lot of times in your program.<br><br>What we suggest is converting all of those little images to one big as midimaster and i told you, then replace those drawimages with sth like this:<br><br>drawimage bla,x,y,tilenumber<br><br>Replacing this should be no pain in the arse as you don't need to modify anithyng else in your code. if you use the find/replace button in the BMax IDE (just make a backub before you do it, sometimes the IDE behaves a little weird).<br><br>The only matter is a one-time-conversion of your tiles into one set.<br>load all of them as images,<br>draw them to screen side by side, capture them all together(grabpixmap) and save them (savepixmappng).<br>If you need to keep the white background for your tiles: setclscolor 255,255,255.<br><br>Ah, btw: BMax can handle alphachanneled images, so a masking color isn't needed anymore, you can make different tones of visibility. Just for future projects, as I wouldnt want to replace all those white pixels now.<br><br>I suggest reading the help to the named functions, as they will clear things a little up. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
