<!DOCTYPE html><html lang="en" ><head ><title >Indexed images</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Indexed images</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Indexed images</a><br><br>
<a name="758823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >necky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way of loading in a 256 colour BMP and then having access to it's 256 colour palette and the index value from any of its pixels?<br><br>Thanks,<br>Andy <br><br></td></tr></table><br>
<a name="758862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>As far as I'm aware only by reading the pixel values and generating the palette from that.  BM doesn't use palettes.<br><br>I might be talking complete trash by the way but thought I'd try.<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="758866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't an indexed bmp made up from palette-data (3x256 bytes) and then the image data (width*height bytes)? <br><br></td></tr></table><br>
<a name="758893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just look up the format of the BMP file and write your own BMP reader so you can load in the palette yourself and then read the values for each pixel. <br><br></td></tr></table><br>
<a name="758894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simply answer No<br>Real Answer yes, but you would be faking it but only using 256 colurs on a 32bit (or 16Bit) image, so it wouldnt be as small as 8bit used to be. Or as angel said do the whole thing, <br>@Angel But then wouldnt you be stuck plotting the image onto the scree? <br><br></td></tr></table><br>
<a name="758919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> No you'd read the pixels into a pixmap. You'd have to, as you say, store them as colors rather than as indexes to colors. You'd be converting from an indirect index for each pixel, to a direct copy of the color value for each pixel.<br><br>You could draw the pixels straight to the backbuffer if you prefer and then grab to an image or a pixmap.<br><br>There's not any inbuilt stuff in Max to handle a 256-color image or to treat it as such using a palette. Ie changing the palette doesn't change the image. But if you did want that to happen, what you'd basically have to do is think of the palette as a table of values to REMAP the image to. Each time you change a color in the palette, go through all pixels in the image and if the pixel has that index, change it to the new color. But you'll have to then keep a copy of the indexed image as well as the 32-bit image. <br><br></td></tr></table><br>
<a name="758923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This link might help:<br><a href="http://www.fortunecity.com/skyscraper/windows/364/bmpffrmt.html" target="_blank">http://www.fortunecity.com/skyscraper/windows/364/bmpffrmt.html</a><br><br>From what I've quickly read there, you should be able to write a BMP loader which gives you direct access to the RGB data.  By modifying this data you should be able to change the colour of any given register. <br><br></td></tr></table><br>
<a name="759148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >necky</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all your help on this guys.<br>After I posted this question I took a good look at the BMP format and found it had a very easy-to-access header which I was able to use to extract the palette and also the pixel index values.<br><br>I`m at work at the moment but, when I go home tonight, I`ll post up my function that loads in a 256 colour index pixmap.<br>Each red channel of each pixel contains the index value as apposed to the actual colour and a separate array contains the palette.<br><br>You can't draw these pixmaps but there handy to use if, for example, you're writing an index paint package.<br><br>Thanks again guys! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
