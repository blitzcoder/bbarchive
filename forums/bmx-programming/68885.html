<!DOCTYPE html><html lang="en" ><head ><title >Floating point inaccuracy</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Floating point inaccuracy</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Floating point inaccuracy</a><br><br>
<a name="769958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I know floating point numbers can't hold numbers as accurately as you like but I can't seem to hold 1.4 !!!<br><br>Check it out:<br><br><pre class=code>
test:Double = 1.3
test:+0.1!

Print test

test2:Double = 1.4
Print test2
</pre><br><br>Gives output:<br><br><pre class=code>
1.3999999523162843
1.3999999761581421
</pre><br><br>Sigh.  Any idea how I can round this to one decimal place in blitz so that it can be used to display 1.4 without having to write a hole bunch of silly code.  Thanks! :-) <br><br></td></tr></table><br>
<a name="769974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> hm.. perhaps silly, but if you're only going to use one decimal, why not *10 and use ints instead, and display the result as /10 ? :P <br><br></td></tr></table><br>
<a name="769979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
a:Float = 1.3
Print a
</pre><br><br>Yeah, it equals 1.29999995......kinda scary. <br><br></td></tr></table><br>
<a name="769981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah and these sort of numbers will be flying man to Mars...<br><br>CS_TBL: YEah I did something like that:<br><br><pre class=code>
		Local temp$=String(multiplierghost)
		Local MultiplierText$ = ccFirstStringToSubChop(temp,".") 'This returns the number before the decimal place and updates temp to be the number after the decimal place.
		MultiplierText:+"."+(Int(Float("0."+temp)*10))
</pre> <br><br></td></tr></table><br>
<a name="769982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Be nice if BlitzMax had a round function where you could specify the number of digits. <br><br></td></tr></table><br>
<a name="769984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interestingly printf chops rather than rounds numbers... I think I might add a flag to my string Formatter module to enable rounding of floats/decimals for the given precision. <br><br></td></tr></table><br>
<a name="769985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've moaned about this since BlitzMax was released. Each time it started off with people saying "yep, can't be right" and then the boffins come in with their 'floating point precision' explanations.<br>When I said BB showed the numbers OK I was deafened by 'BB was less accurate' replies. <br><br></td></tr></table><br>
<a name="770008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can't you just do this?...<pre class=code>test:Double = 1.4!
Print Int(test) + "." + Int(test * 10) Mod 10</pre>?? <br><br></td></tr></table><br>
<a name="770012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>without having to write a hole bunch of silly code<br> <br></div> <br><br></td></tr></table><br>
<a name="770014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly...<div class="quote"> yeah and these sort of numbers will be flying man to Mars...<br><br>CS_TBL: YEah I did something like that:<br><br>		Local temp$=String(multiplierghost)<br>		Local MultiplierText$ = ccFirstStringToSubChop(temp,".") 'This returns the number before the decimal place and updates temp to be the number after the decimal place.<br>		MultiplierText:+"."+(Int(Float("0."+temp)*10)) <br></div> <br><br></td></tr></table><br>
<a name="770017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah but as per usual there's code missing.  I'm not just printing it I'm using a bitmap font and also making some decisions based on some of the values.  Thanks for the tip though I might change to Mod ;-) <br><br></td></tr></table><br>
<a name="770022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blimey...<pre class=code>GreyAliensSuperFantabulousBitmapPrintingFunction  Int(test) + "." + Int(test * 10) Mod 10</pre>...Happy now. ;op<br><br>What's with everyone being soooo finicky today?<br><br>Is it silly season already?<br><br>:o)<br><br>[edit]<br>...WOT!?...<br>[/edit] <br><br></td></tr></table><br>
<a name="770050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately my GreyAliensSuperFantabulousBitmapPrintingFunction cannot accept input parameters in that form which I why I need the separate parts :-) <br><br></td></tr></table><br>
<a name="770060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> finicky I say...Fiiiniiicky! ;o)<br><br><br>...Yes, I'm bored. :o) <br><br></td></tr></table><br>
<a name="770106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blueapples</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
a:Float = 1.3
Print a * 2 + .40
</pre><br>Out:<br><pre class=code>
3.00000000
</pre><br>It's accurate, the problem seems to be output. <br><br></td></tr></table><br>
<a name="770129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah it's weird as 1.4 (1.39999) + 0.1 is 1.5 and not 1.49999 <br><br></td></tr></table><br>
<a name="770380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you just use Doubles?  Do they work or do they show the same problem? <br><br></td></tr></table><br>
<a name="770389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you need more precise float, download the current mingw and recompile all modules beside maxgui<br><br>this will remove this crappy problems with float (not only for this case but float ^float scenario as well) <br><br></td></tr></table><br>
<a name="770426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> TaskMaster: It's already using doubles if you look at the code.<br><br>Dreamora: REALLY!? So this was always just a mingw issue then?  weird.  Well I've written a workaround now. <br><br></td></tr></table><br>
<a name="770457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems so. The ^ thread where I posted showed that I get 8.0000 with 2^3 in any of the potential combinations where all others get 7.999... with float ^ float <br><br></td></tr></table><br>
<a name="770672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TaskMaster</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whoops, you're right.  Should have paid more attention.  :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
