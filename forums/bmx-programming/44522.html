<!DOCTYPE html><html lang="en" ><head ><title >Refreshrate observation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Refreshrate observation</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Refreshrate observation</a><br><br>
<a name="495717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>(*edit* - in hindsight, this probably should be in the 'bugs' forum... )</i><br><br>I was playing around with the graphics mode refreshrate parameters so a game I'm working on can work at the same speed regardless of the actual refresh rate, and ran into something odd:<br><br>From what I understand, when you select a 'non-supported' refresh rate, from BlitzMax is supposed to pick a near match and apply some frame limiting to 'fit' your screen updates in there. (OpenGL bglSetSwapInterval, I presume)<br><br>Overall this seems to work pretty well, but I did notice a very odd one in there:<br><br>- If I specify 60Hz, my FPS counter returns 60FPS for me, and the GetGraphics command also returns 60.<br><br>- If I specify 54Hz, both FPS and GetGraphics counter return 54.<br><br>- If I specify 56Hz, both FPs and GetGraphics counter return 56.<br><br>- However, the 55Hz mode behaved quite differently from the others:<br><br>If I first run at 60Hz, stop the program, change the value over to 55Hz, and run again, things go a bit weird: Now things appear to move around faster than they should. FPS counter shows 60 instead of 55, but the GetGraphics command correctly returns '55'.<br><br>I'm using the refreshrate as returned by GetGraphics to calculate the speed of some objects, so the fact that they move too fast clearly indicates that the frame limiting isn't happening like it should.<br><br>Now, even weirder:<br><br>- If I go first to 60Hz (=correct) and then to 55Hz, the 55Hz mode does not do the proper frame limiting.<br><br>- If I go first to 60Hz (=correct), then to 54Hz (=correct), and then switch to 55Hz, there is no proper frame limiting.<br><br>- Howver, If I go first to 60Hz (=correct), then to 56Hz (=correct), and <i>then</i> switch to 55Hz, then it <b>is</b> correctly limiting itself to 55FPS.<br><br>Very weird -- could this be some openGL context variable not getting reset properly or something?<br><br>While this example above is obviously not something any real program would do, it does show that there may be circumstances under which the frame limiting isn't working as it should...<br><br>(Aside from this example changing back and forth between various screenmodes/refreshrates by a game, what would happen if you jump straight into 55Hz mode on a computer that defaults to 60Hz on a certain screenmode? Could this issue also appear then? That could potentially be a bit more of a 'real-world' issue I suppose)<br><br>(I have a feeling that we'll be seeing frame limiting be used to smooth out gameplay to some extend on slower machines, which aren't always able to render OpenGL fast enough to run smooth without the frame limiting. <br><br></td></tr></table><br>
<a name="495760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would steer clear of changing the users refresh rate, it can be a minefield of problems and just isn't polite to change it IMO. <br><br></td></tr></table><br>
<a name="495809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shambler<br><br>Hey I just learned that lesson the hard way! I sent a test prog to my pal in TX and the damned thing wouldn't run on his crappy old imac....mainly because I forced the refresh rate to somn specific. I took out that part and voila! It worked! <br><br></td></tr></table><br>
<a name="495824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hey I just learned that lesson the hard way! I sent a test prog to my pal in TX and the damned thing wouldn't run on his crappy old imac....mainly because I forced the refresh rate to somn specific. I took out that part and voila! It worked!  <br></div><br><br>Out of curiosity, did you set it to something high, or low?<br><br>I'm using an LCD monitor myself, which tend to be a lot more forgiving to 'weird' refreshrates than CRT's are. <br><br></td></tr></table><br>
<a name="496259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess that as long as one sticks to the refreshrates returned by the <i>GetGraphicsMode</i> command, there -shouldn't- be any issues?<br><br>Nice to see though -- BlitzMax lists a bunch of screenmodes that weren't detected by the previous versions, like 512x384  (They worked OK, but weren't part of the list before) <br><br></td></tr></table><br>
<a name="496280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thankyou !.. at last someone else has experienced it - and I'm not imagining it !!!.<br><br>I've got a 9800 Rad, first time I run my OpenGL proggie I get twice as many FPS then if I run it a second time.<br>(drop of 3000 to 1600)<br><br>Seems after the first run, it will always default to the 1600 speed. I had a feeling it was something to do with lost syncing somehow. (and this is running on an LCD with a refresh rate of 85mhz) <br><br></td></tr></table><br>
<a name="496283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Booticus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Shambler <br>I did set it to 75hz, my friend was trying to run it on his mom's computer...guessing she had an older one, didnt get the specs. :)<br><br>@PaulJG<br>Glad you're getting to the bottom of it. Heh, I've noticed old boxes with onboard video cant handle anything above 70ish without balking (i.e. not working!!) <br><br></td></tr></table><br>
<a name="496287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I did set it to 75hz, my friend was trying to run it on his mom's computer...guessing she had an older one, didnt get the specs <br></div><br><br>If it's a Mac, there may be another issue: some of the older ones don't support full-screen OpenGL applications at all, and will only run them in windowed mode. <br><br>Which does bring up the point: We can programmatically obtain the list of supported resolutions and refreshrates -- but is it possible to find out whether or not a computer supports <b><i>full screen</i></b> OpenGL or not? <br><br></td></tr></table><br>
<a name="496288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >teamonkey</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> From what I understand, when you select a 'non-supported' refresh rate, from BlitzMax is supposed to pick a near match and apply some frame limiting to 'fit' your screen updates in there. (OpenGL bglSetSwapInterval, I presume)  <br></div><br>The timing code is set up by Graphics and executed in Flip. bglSetSwapInterval does something different ( <a href="http://blitzwiki.org/index.php/BglSetSwapInterval" target="_blank">http://blitzwiki.org/index.php/BglSetSwapInterval</a> )<br><br>Graphics will try and set the screen refresh to the desired rate. It will then perform a timing test to see if the refresh rate is OK. If it fails it just uses the default refresh rate and switches off vsync. In that case Flip will wait the required length of time before calling bglSwapBuffers.<br><br>It sounds like this is an issue in the timing test in Graphics. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
