<!DOCTYPE html><html lang="en" ><head ><title >Move over pixel distance over fixed amount of time</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Move over pixel distance over fixed amount of time</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Move over pixel distance over fixed amount of time</a><br><br>
<a name="1254051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nennig</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there,<br><br>I am looking for some help on how to code the move of a piece of text for a certain amount of pixel on the x-axis (from 800 to 0 )and a defined amount of milliseconds.<br><br>I need to have a variable for the "distance" in pixels to cover, the "amount_ of_ time" within which the move need to happen.<br><br>The distance should be travelled exactly in the time allocated and the speed of the computer should not affect this process (delta timing issues).<br><br>Anybody could help me with these few lines of code?<br>Many thanks for your help.<br><br><pre class=code>

Graphics 1600,800


Global distance = 800 		'in pixels
Global amount_time = 2500   'in Millisecs

Global last_time:Int = MilliSecs()

pos = 800

While Not AppTerminate()  Or Not Confirm( "Terminate?" )
  	
	now  = MilliSecs()
	delta =now - last_time	'speed of the computer should not affect the time and distance travelled
	Cls
	
         pos = pos - ((distance / amount_time)* delta)  
         DrawText "Hi", pos, 100
	
	Flip
	
	last_time = now
	
Wend



</pre> <br><br></td></tr></table><br>
<a name="1254062"></a>

<a name="1254064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya<br><br>Make the distance and amount_time variables floating point values so that the division works correctly.<br><br><pre class=code>
Global distance# = 800 		'in pixels
Global amount_time# = 2500   'in Millisecs
....
</pre><br>There are many debates regarding delta timing etc. if you search this site there are hundreds of them.<br><br>Hope it helps! <br><br></td></tr></table><br>
<a name="1254063"></a>

<a name="1254065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Graphics 1600,800


Global distance:Float = 800 		'in pixels
Global amount_time:Float = 2500   'in Millisecs

Global last_time:Int = MilliSecs()

pos:Float = 800

While Not AppTerminate()  Or Not Confirm( "Terminate?" )
  	
	now:Float  = MilliSecs()
	delta:Float =now - last_time	'speed of the computer should not affect the time and distance travelled
	Cls
	
         pos = pos - ((distance / amount_time)* delta)  
         DrawText "Hi", pos, 100
	
	Flip
	
	last_time = now
	
Wend
</pre> <br><br></td></tr></table><br>
<a name="1254122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nennig</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Dave and Jesse,<br><br>Many thanks for your help, I would have never figured this one out by myself.<br><br>The above code move the text over the correct distance and correct amount of time but the scrolling is very blocky.<br><br>Is there a way to get a smooth scrolling?<br><br>Eventually, I want to move musical notes on a staff that is why the distance and amount of time are constraints. I also want to share the end result with a friend that use a different computer (hence delta timing)<br><br>Thanks a lot for your help. <br><br></td></tr></table><br>
<a name="1254124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br>search for 'delta time' or 'tweening' in the forum.<br>There are several examples about smooth scrolling. <br><br></td></tr></table><br>
<a name="1254130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Smoothest movement possible is: pixelsPerFrame - and this is defined by "distance/(amount_time*fps)". If you move more than 1px per frame you might run into a non-nicely-looking movement. If you use a way higher speed the eye gets lazy enough to make it "smooth" again.<br><br>@tweening:<br>Tweening is not useful for you if you do not split "physics" and "rendering". Tweening has to get done if your physics are done at a different interval then rendering (eg. 10times/second compared to 60rendertimes/second).<br><br>In that case your rendering has to store the "last position" and the "next position" and then use a factor to add to the last position (last position = factor * difference of next and last position). The factor is a value between 0.0 and 1.0. 1.0. If you know the interval of the "physics updates", you can calculate how many time is left until the next "physics update". So you then now: 85% of that interval is gone since last "physics update" - so your factor is 0.85.<br>Why do that? Because the next "physics update" will correctly move the object to the next position (refreshes "last position" etc.), it also checks for collisions with other objects etc..<br>If your physics updates are running more times a second than the rendering, you might not neet tweening, it might introduce jittering then (small numbers are not the best option in BlitzMax as floats like 0.05 are stored 0.0499... or 0.051... there, this might create some trouble). But as said: there are enough posts about this in the boards.<br><br><br>@delta <br>Jesses code mixes something up: Delta is somehow a "Milliseconds" number. This is of course NOT correct.<br><br>correct:<br>delta = (now - last_time) / 1000.0<br><br>now delta is a fraction of a second, eg. "0.5" means 500ms. Now the speed you define somewhere is in "pixels per second" instead of a "pixels per millisecond" which would lead to another too small float like 0.005px/ms - which gets rounded to 0.0048xyz or so. 4.8px/s is 4% less than 5px/s - see the difference?<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1254268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nennig</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Ron,<br><br>Thanks a lot for this information. Now, the text moves the correct distance for the correct amount of time but it is still doing so with blocky movements.<br><br>I found the following thread and will try to implement this solution.<br>I didn't expect that something as trivial to think about could be that complicated to program ;-)<br><br>Thanks all for your help.<br>I will share my code if I manage to do what I want.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=70516#bottom" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=70516#bottom</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
