<!DOCTYPE html><html lang="en" ><head ><title >Throw and DebugStop problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Throw and DebugStop problems</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Throw and DebugStop problems</a><br><br>
<a name="553863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a SQLite 3 wrapper - but that's pretty irrelevant. What I'm finding is that without the following line<br><br><pre class=code>Global SQLite3_Exec:Int(DBHandle:Int, SQL$z, Callback:Byte Ptr, FirstArgument:Byte Ptr, Error:Byte Ptr Ptr) "Win32"</pre>throwing exceptions shows the error messages as expected and DebugStop works fine.<br><br>But if I include the line above the error messages stop showing up and the Throw just stops the program and the Output window says "Process complete", and DebugStop is ignored.<br><br>Any ideas?<br><br><br>Edit: Should say that the annoying thing is that the line of code in question actually works fine.<br><br>Edit: Tell a lie - DebugStop stops the program dead but doesn't go into debug mode. Debug Build is definetely on and removing that one line gets everything working again.<br><br>Edit: Should also mention - I'm still on v1.09 (demo) for now. <br><br></td></tr></table><br>
<a name="553968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No one else has seen this?  Bummer  :-( <br><br></td></tr></table><br>
<a name="554016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Edit: Should say that the annoying thing is that the line of code in question actually works fine.<br> <br></div><br>Then I would point the finger at the call back you are passing the function which, if a Blitz function, will also need to have "win32" type so that function uses __stdcall parameter calling convention in order for your native wrapper not to upset the stack. I doubt very much you will be able to call Throw from the callback also (Throw is mentioned in your topic title but not in your post).<br><br>I have had some problems with the debugger getting confused when .bmx callbacks are invoked from C++ wrappers but not the kind of meltdown you are describing.<br><br>Also, I assume you weren't referring to C++ exceptions because BlitzMax will not be able to link with any code that expects such a language feature. <br><br></td></tr></table><br>
<a name="554293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I presume when you say "Then I would point the finger at the call back you are passing the function which, if a Blitz function, will also need to have "win32" type so that function uses __stdcall parameter calling convention in order for your native wrapper not to upset the stack." that you mean like: <br><pre class=code>Global SQLite3_Exec:Int(DBHandle:Int, SQL$z, Callback() "Win32", FirstArgument:Byte Ptr, Error:Byte Ptr Ptr) "Win32"

Function Callback() "Win32"
    blah...
End Function</pre>But it doesn't help anyway  :-(<br><br>Another thing I should say is that just including the declaration above causes the problems described - I don't have to actually call the function for the problems to begin. <br><br></td></tr></table><br>
<a name="554421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RktMan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm not a 'C'/C++ guru by any stretch ...<br><br>are you sure that this isn't some sort of conflict with this library you are linking to and some fancy signal handling stuff that it might be doing internally that messes with Blitz'es ability to do debugging ?<br><br>if the lib _were_ doing something fancy, it would probably be doing it when the lib loads, so calling the function wouldn't be the causal, simply starting the blitz exe would do it i would think.<br><br>this thought is pulled completley from my rear ... so grain of salt ...<br><br>Tony <br><br></td></tr></table><br>
<a name="554424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> not sure if you have seen it yet, but teammonkey has a wrapper for SQLite as well.  you may be able to find some inspiration there.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=48455" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=48455</a> <br><br></td></tr></table><br>
<a name="554604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> are you sure that this isn't some sort of conflict with this library you are linking to and some fancy signal handling stuff that it might be doing internally that messes with Blitz'es ability to do debugging ? <br></div><br>No idea about the dll messing with Blitz.  Maybe.<br><br><div class="quote"> if the lib _were_ doing something fancy, it would probably be doing it when the lib loads, so calling the function wouldn't be the causal, simply starting the blitz exe would do it i would think. <br></div><br>Removing the offending line (but leaving lots of other definitions for functions in the dll in place) causes the debugging to go back to normal, and the problem happens whether I call the offending function or not, which is what made me think it was maybe a BMX thing, rather than the dll itself. I'm probably wrong though  :-)<br><br>@gman - thanks, hadn't seen that (I'd previously done SQLite in B3D and just started converting it to BMX without looking to see if anyone else had done it already  :-)  - I'll have a look. <br><br></td></tr></table><br>
<a name="554609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I've now tried teammonkey's module (which actually compiles the SQLite source into the module rather than dymanically loading the dll as I was doing) and his example code works find (exceptions and debugstop work as expected).<br><br>But when I use his module in my code it has similar problems - exceptions still just end the process silently,  while DebugStop now works (though Step In ends the process).<br><br>So it looks like it's maybe my code ... oh, well, I'll keep looking. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
