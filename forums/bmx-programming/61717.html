<!DOCTYPE html><html lang="en" ><head ><title >Tip for loading images</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tip for loading images</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Tip for loading images</a><br><br>
<a name="689868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found this out today.<br><br>Well, normally if you load an image and don't specify any flags, it will use AutoImageFlags which (unless you've changed them) are MASKEDIMAGE and FILTEREDIMAGE.  This is normally fine as you want your sprite to be masked and filtered image means that if it's scaled up, rotated or drawn at fractional pixel sizes it looks cool (antialiased).<br><br>However, if you load in a background image with these flags that has a lot of black in (I had a jpg like this), it may not have the desired effect.  My jpg was black with white writing (which was anti-aliased in a paint package) and although the edges of text were fine in the paint package, it looked weird and jagged in BlitzMax.  I assume this is because the defaul mask colour is not using plain 0,0,0, it's actually using a range e.g. 8,8,8 or something and cutting those colours out.  Anyone have more info on this...?  (I can post an example)<br><br>Anyway, so I recommend always loading background images with a flag of 0, unless you plan to rotate or scale or scroll (draw at floating point coords) the background.<br><br>Also, am I correct in thinking that filtered images take up more memory or is that just mipmapped images?  Also are filtered images slower to draw, even at integer coords, non-scaled and non-rotated? <br><br></td></tr></table><br>
<a name="689967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Curtastic</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't notice a difference with my background image, but it sounds like a good idea <br><br></td></tr></table><br>
<a name="690045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah you may not notice on many images, but it's a good precatution. <br><br></td></tr></table><br>
<a name="690056"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally I don't use JPG for anything in a game (even a background) as they are too lossy.  PNG is my preferred format. <br><br></td></tr></table><br>
<a name="690057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use PNG for all game graphics, but sometimes certain backgrounds can look OK as jpg and are 100K whereas a png is 500K so it's a trade off for final install size.  If download size meant nothing I'd use a png.  However, the issue above may still occur on pngs, I just noticed on a jpg I was given.  Lot's of professional games use jpgs, some with horrible compressiona artifacts.  I personally check them and make sure they don't have anything obvious/horrible. <br><br></td></tr></table><br>
<a name="690059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> sometimes certain backgrounds can look OK as jpg and are 100K whereas a png is 500K <br></div><br>That's a fair point.  I guess if the difference is negligible and you can save 400K, then it's worth doing. <br><br></td></tr></table><br>
<a name="690067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You do not need to disable maskedimage.<br>All you need to do is render it with SolidBlend, that should solve JPGs nearly 0,0,0 color problem. <br><br></td></tr></table><br>
<a name="690074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filtered images do not take up any more memory. The filtering is to do with the way that the texture is looked up and interpolated on the fly, nothing to do with how the original data is stored. You aren't storing sub-pixel-accurate image data, you're just representing regular image data at a sub-pixel offset. Filtering is a combination of the values from the surrounding pixels multiplied by how much percentage of the pixel they take up, at a sub-pixel level, so that the overall color represents contributions from all the nearby pixels, and gives the appearance of drawing it at a sub-pixel position.<br><br>Usually filtering IS slower. At least, it is on my system. But even so, I found no problem doing much the same routines with filtering on. You might eat up 20-30% extra GPU time or something, depends on the card.<br><br>At integer coordinates, if filtering is on it still (probably) filters the image with sub-pixel accuracy and is the same speed. Being non-scaled and non-rotated doesn't appear to have any influence on the speed. Some cards might accelerate that but I don't think it's standard. Especially with OpenGL for example, I think it applies full rotation and scaling matrix operations regardless of the angle or scale. <br><br></td></tr></table><br>
<a name="690079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> All you need to do is render it with SolidBlend <br></div>Good point *BUT* I was drawing it solid blend yet still it looked funny!<br><br>AngelDaniel: Thanks for the extra info and opinion. <br><br></td></tr></table><br>
<a name="690093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Looking funny and GraphicsDepth() = 32) ?<br><br>Because in 16Bit much stuff will look funny especially when it came from jpg. <br><br></td></tr></table><br>
<a name="690099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep depth = 32, this is why I don't get it!<br><br>here's the draw code:<br><br><pre class=code>
	Method Draw()
		If Image &lt;&gt; Null Then
			SetBlend SOLIDBLEND
			DrawImage(Image,0,0)
		EndIf
		If Header &lt;&gt; Null Then
			SetBlend ALPHABLEND
			Header.Draw()
		EndIf
		If Menu&lt;&gt;Null Then Menu.Draw()
	End Method
</pre><br><br>pretty obvious.  When the jpg is loaded with MASKIMAGE it looks crap, when flags = 0 it's fine. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
