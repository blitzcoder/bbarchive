<!DOCTYPE html><html lang="en" ><head ><title >Way to speed up the loading of game music?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Way to speed up the loading of game music?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Way to speed up the loading of game music?</a><br><br>
<a name="909121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, just incbin'ed some extra music tracks to my game for the release version, only to find that the 'delayed' loading process now takes nearly a minute to load incbin'ed .ogg music tracks (6 tracks totaling about 18 Mb in total avg 2Mb) via the LoadSound() method.<br><br>So is there a way to speed up the loading process e.g.<br><br>Is loading from external file faster?<br>Would zipping up the tracks speed up the initial loading?<br>Could I use a thread to load the music in the background?<br>Would another format work faster?<br>Is there another approach to this that would work?<br><br>Any and all help welcome!<br><br>Regards<br><br>Merx <br><br></td></tr></table><br>
<a name="909128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rs22</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could try this: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1757" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1757</a> <br><br></td></tr></table><br>
<a name="909129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another approach would be to use a module that supports streaming. Not sure if you can stream from an incbin'ed file, but you can from external files. This way you won't need to load the entire file and it will save some memory. <br><br></td></tr></table><br>
<a name="909136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 6 tracks totaling about 18 Mb in total avg 2Mb <br></div>You're loading them all at once?<br><br>You know that's going to suck up around 180MB of resources, right?  Might want to consider REDi's MaxMod for streaming audio. <br><br></td></tr></table><br>
<a name="909137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> To stream music, all you usually need is a pointer and the length of the data, so I would imagine streaming from an IncBin'ed song would work fine. You might also try loading it directly into a bank and streaming it from there. The initial loading period should be less as you are not decompressing it as you load it, as you are when loading it as a sound. <br><br></td></tr></table><br>
<a name="909140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I've used MaxMod before with IncBin'd variable bitrate OGGs, AND wrapped with Reflexive's DRM software and everything worked perfectly. <br><br></td></tr></table><br>
<a name="909142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using fmod 3.75 for streaming... <br><br></td></tr></table><br>
<a name="909146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> FMOD isn't a free (or even cheap) solution though, is it? <br><br></td></tr></table><br>
<a name="909148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Free for free stuff, cheap for shareware... I stopped reading after that... <br><br></td></tr></table><br>
<a name="909151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not really cheap for shareware. The rules on what constitutes shareware are very strict, and most shareware won't comply, so you'd end up needing a commercial license. Bass is pretty cheap though. <br><br></td></tr></table><br>
<a name="909156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >deps</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been some times since I looked at FMod but if I recall correctly it was $100 for a shareware license. <br><br></td></tr></table><br>
<a name="909158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Been some times since I looked at FMod but if I recall correctly it was $100 for a shareware license.  <br></div><br>That only applies to games selling for less than $10, which would rule out all portal games. <br><br></td></tr></table><br>
<a name="909178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "6 tracks totaling about 18 Mb in total avg 2Mb.."<br><br>"You know that's going to suck up around 180MB of resources, right?"<br><br>Could someone explain why 18mb becomes 180mb when dealing with sound files? Thanks. <br><br></td></tr></table><br>
<a name="909181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because they have to be uncompressed to play them when you don't stream them. <br><br></td></tr></table><br>
<a name="909187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Streaming would speed up the load time a bit, but then you wouldn't have the music protected from piracy, etc. I wonder if there is an encrypted music format....<br><br>Russell <br><br></td></tr></table><br>
<a name="909191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Streaming would speed up the load time a bit, but then you wouldn't have the music protected from piracy, etc <br></div><br>Sure it would. Stream it from memory as I suggested above, or straight out of an encrypted zip archive. I know the latter works because I'm doing it, and GFK confirmed he has the former working. <br><br></td></tr></table><br>
<a name="909192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Streaming would speed up the load time a bit, but then you wouldn't have the music protected from piracy, etc <br></div>As I said above, you can still stream audio even if you've used Incbin and DRM software.  It also works with Molebox. <br><br></td></tr></table><br>
<a name="909267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Because they have to be uncompressed to play them when you don't stream them."<br><br>Doh! Jeesh... I should have known that one. <br><br></td></tr></table><br>
<a name="909322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> As I said above, you can still stream audio even if you've used Incbin and DRM software <br></div><br><br>Have you any code for streaming an incbinned .ogg? <br><br></td></tr></table><br>
<a name="909323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure MaxMod can stream from incbin? <br><br></td></tr></table><br>
<a name="909328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Brucey, I'll give that a try :) <br><br></td></tr></table><br>
<a name="909481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent I now have the music streaming from incbin thanks to the MaxMod Module's CreateAudioStream(URL) command.<br><br>However I have noticed an oddity, when I first startup my game the first track is triggered during the loading screen and then once in the main game loop I have a updateMusic method that checks the myChannel.Playing() status to test when the track completes and start the next one.<br><br>Now the first track starts fine whilst the game loads (now a couple of seconds), but once the updateMusic method is called from the main game loop it's call to test if the channel is Playing return's false (???) and the game switches to the next track and which plays fine?<br><br>This was not an issue with the previous LoadAudio version, is this a bug in the Streamed audio module? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
