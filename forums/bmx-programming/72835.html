<!DOCTYPE html><html lang="en" ><head ><title >BMK modifications</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BMK modifications</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BMK modifications</a><br><br>
<a name="814107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hallo :-)<br><br>I'm updating my tweaked BMK to support the new MinGW that the next BlitzMax will use.<br><br>Dream, what are those compiler options you recommend?<br><br>I also need to add a new command-line flag to allow for custom appstubs (since hacking the OS X appstub is getting tiresome) - thanks to Blueapples for that spark of inspiration ;-) <br><br></td></tr></table><br>
<a name="814120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay... this works for me :-)<br><br><pre class=code>
bmk makeapp -t gui -d -b bah.appstub splash.bmx
</pre><br>..using a custom (ie. not brl.appstub) appstub module to build an app with.<br>Therefore, on Mac, one can now build both Cocoa (MaxGUI etc) and Carbon (wxWidgets) BlitzMax apps without needing to hack any official modules. Nice...<br><br>All it needs now is adding to the IDE as another build option, with perhaps the stub name in the IDE Options... pah... <br><br></td></tr></table><br>
<a name="814122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about adding this to your bmk?<br><br>in file bmk_make.bmx at line 215<br><pre class=code>
If imp.StartsWith( "-dll:") Then
	ext_files.AddLast RealPath(imp[5..])
Else
	ext_files.AddLast imp
EndIf
Continue
</pre><br><br>And you can statically import dlls like so:<br><pre class=code>
Import "-dll:dlltest.dll"

Extern
	Function ShowMessage()
EndExtern

ShowMessage()
</pre><br><br>Neat huh? =)<br><br>its the same as running pexports+dlltool+ranlib (but why do it manually when ld does it for you? hehehe) <br><br></td></tr></table><br>
<a name="814127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, that's cool :-)<br><br>Any more? <br><br></td></tr></table><br>
<a name="814135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> There really needs to be some kind of noob tutorial for all these mods, with their pros/cons, etc, step by step, etc, etc. Oh well..perhaps I'm asking too much. ;) <br><br></td></tr></table><br>
<a name="814136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> what they really need, is to be officially integrated into the new bmk/IDE. :) <br><br></td></tr></table><br>
<a name="814151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use the -march=pentium-m flag instead of the pentium1 flag used in the original BMK.<br>This adds MMX, SSE and SSE2 flag.<br>Due to libpng, I needed to use disable flag for MMX again, libpng will blow up otherwise. <br><br></td></tr></table><br>
<a name="815088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where do I have to modify the bmk sources to add this? <br><br></td></tr></table><br>
<a name="815222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matthew Smith</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check the Src folder in the help tree (MaxIDE) <br><br></td></tr></table><br>
<a name="815245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I checked it, I'd like to know which var I have to change. cc, bcc or another one (I assume its the bmk_make source)? <br><br></td></tr></table><br>
<a name="815294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> search for -march and you will see.<br>Should be the opt when I remember correctly. <br><br></td></tr></table><br>
<a name="815302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does it work with blitzmax 1.26 ? <br><br></td></tr></table><br>
<a name="815306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @faktor<br><br><div class="quote"> <br>1) open "blitzmaxinstalldir/src/bmk/bmk_util.bmx"<br>2) search "function compileC"<br>3) search ?Win32 ... "opts:+"<br>4) replace like you wish<br>5) build the file (F5)<br>6) copy the new "bmk.exe" into "blitzmaxinstalldir/bin"<br><br>7) open BlIDE<br>8) select "Modules - Advanced Modules Builder" (or so)<br>9) click on "inverse selection"<br>10) deselect all things with "jpg", "tga", "png" (brl.pngloader and so on)<br>11) deselect axe.maxgui (or where it was included)<br>12) press "build modules"<br>13) wait until finished<br><br>14) all modules are now compiled using your installed mingw/gcc-version and the settings made in the "bmk_util.bmx"-file<br> <br></div><br><br>Didn't test if step 10 and 11 are needed in v1.26.<br><br><br>bye <br>MB <br><br></td></tr></table><br>
<a name="815312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I now have<br><br>opts:+" -march=pentium-m -ffast-math -fno-exceptions -O3 -fomit-frame-pointer"<br><br>Edit: ok, didn't work with all the those flags...<br><br>Edit2: opts:+" -march=pentium-m -ffast-math -fno-exceptions" didn't work, too... <br><br></td></tr></table><br>
<a name="815573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> you need to add the mmx deactivation flag, otherwise the png lib and a few others won't compile.<br><br>haven't tested the modified bmk with BM 1.26 yet. <br><br></td></tr></table><br>
<a name="815598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Dreamora says, try:<br><br>opts:+" -march=pentium-m -mno-mmx -ffast-math -fno-exceptions -O3 -fomit-frame-pointer" <br><br></td></tr></table><br>
<a name="815646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >iprice</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> That didn't do the trick either...<br><br>Still get:<br><br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(png.c.release.win32.x86.o)(.text+0x7b8):png.c: undefined reference to `png_mmx_support'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xa1d):pngread.c: undefined reference to `png_combine_row'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xc04):pngread.c: undefined reference to `png_read_filter_row'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xc7d):pngread.c: undefined reference to `png_do_read_interlace'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xc97):pngread.c: undefined reference to `png_combine_row'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xcbf):pngread.c: undefined reference to `png_combine_row'<br>D:/BlitzMax/mod/pub.mod/libpng.mod/libpng.release.win32.x86.a(pngread.c.release.win32.x86.o)(.text+0xcd2):pngread.c: undefined reference to `png_combine_row' <br><br></td></tr></table><br>
<a name="815666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just compile all files except the image-modules (and gui).<br><br>For this - I prefer using the blide-advanced-module-builder (inverse selection like the steps above mention it).<br><br><br>@f4ktor - einfach alle anderen Module kompilieren, die PNG&amp;Co-Module deaktivieren und nicht mit durch den G++ jagen.<br><br><br>bye<br>MB <br><br></td></tr></table><br>
<a name="817496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andre72</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can somebody can give me a hint please where to find the compiler options for the fasm ...<br>Google couldn't help.<br><br>Also I tried to use fasm 1.67.23 which seems to don't work with BM ...<br>Any changes to make it working or isn't it compatible? <br><br></td></tr></table><br>
<a name="817502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what they really need, is to be officially integrated into the new bmk/IDE. :)  <br></div><br>Amen. <br><br></td></tr></table><br>
<a name="817505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can somebody can give me a hint please where to find the compiler options for the fasm ... <br></div><br><br>start of by crawling down the calling tree of the makeapp command argument case <br><br></td></tr></table><br>
<a name="817512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andre72</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Dreamora - but I mean the options for the fasm.<br>At the fasm docs are not so much description for... <br><br></td></tr></table><br>
<a name="817521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grable</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can somebody can give me a hint please where to find the compiler options for the fasm ...  <br></div><br>Im not sure there are any of value, the only ones i can find for v1.67.23 are:<br><pre class=code>
 -m &lt;limit&gt;  set the limit in kilobytes for the memory available to assembler
 -p &lt;limit&gt;  set the maximum allowed number of passes
</pre> <br><br></td></tr></table><br>
<a name="817600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andre72</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes grable you're right - also the only ones I found at the source too.<br>So I think there's no way to tune up - thanks--- <br><br></td></tr></table><br>
<a name="820817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I use the -march=pentium-m flag instead of the pentium1 flag used in the original BMK.<br>This adds MMX, SSE and SSE2 flag.<br>Due to libpng, I needed to use disable flag for MMX again, libpng will blow up otherwise. <br> <br></div><br>I made the tweak you recommended for enabling MMX, SSE and SSE2, but also found the same problem with libpng. However, I managed to fix it by copying the the latest <a href="http://sourceforge.net/project/showfiles.php?group_id=5624" target="_blank">libpng (v1.2.22) source files</a> into the <i>BlitzMax\mod\pub.mod\libpng.mod\</i> directory, and rebuilding modules. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
