<!DOCTYPE html><html lang="en" ><head ><title >Xbox 360 Controller - Mac Os &amp; Linux Problems !</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Xbox 360 Controller - Mac Os &amp; Linux Problems !</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Xbox 360 Controller - Mac Os &amp; Linux Problems !</a><br><br>
<a name="1117685"></a>

<a name="1117686"></a>

<a name="1117689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I add Xbox 360 controller support to my game and it's working perfectly under windows (as always I want to say...).<br><br>Of course, under Linux. While <b>dmesg</b> return :<br><br>input: Microsoft X-Box 360 pad as /devices/pci0000:00/0000:00:02.0/usb2/2-2/2-2:1.0/input/input5<br><br>Under BlitzMax <b>JoyCount()</b> return nothing !<br><br>And under MacOsX (when tattiebogle.net drivers installed) the joystick worked but <b>JoyZ</b>() and <b>JoyR</b>() act differently from the Windows One.<br><br><i>Zero if the joystick is centered, -1.0 if Up, 1.0 if Down or a value inbetween.</i><br><br>Under Windows it's working this way <b>JoyZ</b> goes to -1.0 if the right trigger is pressed down and goes to 1.0 if the left trigger is pressed down.<br><br>but under MacOs <b>JoyZ</b>() start at -1.0 and goes to 1.0 when left trigger is pressed down and <b>JoyR()</b> (?) start at -1.0 and goes to 1.0 when right trigger is pressed down !<br><br>The problem is that under windows <b>JoyR</b>() is nothing related to the trigger but is in fact the Y Axis of the right Numb-Stick !<br><br>Windows JoyR and JoyU becomes JoyU and JoyV under Mac Os !?<br><br>I will probably use the pre-compiler ?MacOs for the Mac problem (even if it's not a good solution at all, shouldn't this work the same way on every os ?) but What Can I do for the first one !?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117688"></a>

<a name="1117690"></a>

<a name="1117693"></a>

<a name="1117694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I read somewhere in the forum from user RiK that I'm not the only one to discover that :<br><br><div class="quote"> <br>In that OSX driver, the L trigger is mapped to JoyZ and the right one to JoyR.<br><br>Left stick is JoyX/JoyY and right stick is JoyU/JoyV.<br> <br></div><br><br>What if the driver owner change his mind to do it the way it should or if someone at Apple/Microsoft release an official 360 Driver ? A schizophrenic Patch occur ^^<br>But most important ! If it's not a XBox 360 Controller then no need to use this driver, then this error does not occur and the ?MacOs need to test the joystick name to apply the patch or not... What a mess !<br><br>Is this the same mess under Linux ?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117696"></a>

<a name="1117697"></a>

<a name="1117698"></a>

<a name="1117699"></a>

<a name="1117700"></a>

<a name="1117702"></a>

<a name="1117713"></a>

<a name="1117714"></a>

<a name="1117715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...JoyHat() is not working under Mac too...<br><br>Even under windows JoyHat() return 0.0 for UP and -1.0 for center.<br>It's a non-sense because if there is a joystick without D-PAD then JoyHat() will always return 0.0 meaning always UP. I suppose I have to use something like :<br><pre class=code>
If JoyAxisCaps(port) &amp; (1 Shl JOY_HAT)
... ' Joy Hat stuff
endif
</pre><br><br>I do not have tons of joystick to see how they are working under each os, each drivers. <br>I will simply have to disable most of the joystick features when it's not a 360 under Windows.<br><br>PFFFF it cost me a lot on this one !<br>It's like building a website in the 2000 with IE/Mozilla/Opera custom mess.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you make a gamepad/joystick configuration system then it's up to the user to make it work right, and it works cross platform, and it work with more than just the 360 controller, and it doesn't matter if someone changes a driver, etc... More work but fixed functions always have problems, and there are also always people that have problems with them... most games let you customize the button layout even on consoles... <br><br></td></tr></table><br>
<a name="1117706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, you can already choose the mapping layout in my game for buttons, but I though that a D-Pad or a Stick would at least run the same way on every platform and configuration.<br>I think that I have no choice but to add some kind of sub-configuration mapping switch in my game options.<br><br>But about the JoyCount() not working under Linux and the JoyHat not detected under MacOs (while working in the system tool) there is not much I can do.<br><br>By the way, it's probably a bad driver conception since when I unplug the 360 Controller from the Macbook, the keyboard stop working and I'm forced to restart the whole system (and this take a lot of time).<br><br>Anyway <b>JoyCount</b>() is a bit like the <b>CountGraphicsModes</b>() they refuse to work correctly under certain configuration or drivers (mainly under Linux). <br><br></td></tr></table><br>
<a name="1117711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using some drivers you installed under MacOS, or just what's active when you plug it in on a clean system? Unless there's a really wonky driver unplugging a device shouldn't affect the rest of the system... I don't have a wired 360 controller to test with unfortunately, but I know PS3 controllers play nice if you plug them in and then yank them out...<br><br>Re:linux I don't dive too deep there with bmax unfortunately but it's always been a bastion of driver related headaches... love it as a core OS, but you really gotta know your stuff to set up a smooth system. <br><br></td></tr></table><br>
<a name="1117712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you plug a wired Xbox 360 Controller in a Macbook nothing happen and nothing is detected.<br>To solve this you have to install the only Driver I found here : <a href="http://tattiebogle.net/index.php/ProjectRoot/Xbox360Controller" target="_blank">http://tattiebogle.net/index.php/ProjectRoot/Xbox360Controller</a><br><br>Since it is a personal driver, it's possible there is problem while using it. This explain why Z/R/V/U axis are messed-up.<br><br><b>Does someone knows if in general the Z (corresponding to back trigger) R &amp; U axis (corresponding to the right analog stick) respect the freejoy "template" ?</b><br>Leave my user choose which axis does what in my game is pretty overwhelming.<br><br><br>I'm 100% with you about Linux. When it's working it's really something good, but as soon as you have to setup drivers it's the worst thing I ever use !<br>I still use the only working nvidia graphic driver probably from 2007 on Mint or Ubuntu. By default, the Max IDE as well as any software build with it appear in the middle of my dual monitor. And if I switch to fullscreen depending on the Driver I get a giant resolution including both screen or a crash :) <br><br></td></tr></table><br>
<a name="1117718"></a>

<a name="1117719"></a>

<a name="1117720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The button mappings between Windows and OS X(tattiebogle driver) are also different. I use this for mapping the buttons for Windows and Mac.<pre class=code>?Win32
Const X360_A:Int=0
Const X360_B:Int=1
Const X360_X:Int=2
Const X360_Y:Int=3
Const X360_LB:Int=4
Const X360_RB:Int=5
Const X360_BACK:Int=6
Const X360_START:Int=7
Const X360_LSTICK:Int=8
Const X360_RSTICK:Int=9
Const X360_BIGX:Int=10
?MacOS
Const X360_A:Int=0
Const X360_B:Int=1
Const X360_X:Int=2
Const X360_Y:Int=3
Const X360_LB:Int=4
Const X360_RB:Int=5
Const X360_BACK:Int=9
Const X360_START:Int=8
Const X360_LSTICK:Int=6
Const X360_RSTICK:Int=7
Const X360_BIGX:Int=10
?</pre>Hope you find it useful, but letting the user configure their own controls is probably the best option.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1117726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Oddball<br><br>Yes this is probably more acceptable to have button not at the same place seeing how much joystick can be different.<br><br>Since I already had a small configuration mapper in my game options, I enhance it to let the user choose which axis does does what but also add a Fix Analog Stick in order to allow Mac Os X User (and maybe Linux user using XBCD Driver, main source of TattieBogle I think) to work with the Tattiebogle driver. Because it non only support EOM XBox 360 but also many other Game Controller like Madcatz (or something).<br><br>I let you imagine with 4 axis one D-Pad and 31 buttons how many preset it would have been possible to create... So better let the user setup this himself. To bad about the Tattiebogle not working exactly like it should with FreeJoy. <br><br></td></tr></table><br>
<a name="1117729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> A word from Colin Munro, the developer behind the Tattiebogle driver:<br><div class="quote"> <br>Hi,<br><br>I'm aware of that difference, it was actually an intentional choice by me :) The reason I did it was that there is an implicit loss of information with creating a sum of the two separate readouts.<br><br>The controller represents each trigger as an independent axis, and indeed, "native" XBox 360 games also see these axis separately. However, for whatever reason in the XNA driver Microsoft decided to throw away this information - if both triggers are pulled, the resulting value is the same as if neither are pulled. To me, that seems almost pointless (one example is Burnout Revenge, left trigger is brakes and right trigger is accelerator - often you're pulling both at the same time, and with the XNA driver, the game wouldn't be able to differentiate, just "throttle is at neutral", which is an important distinction between braking and accelerating :) )<br><br>Replicating the XNA behaviour would have obviously been simple, but I just couldn't abide by such a loss of data, so I decided my driver had to represent as much data as the controller reported, nothing less :)<br><br>Sadly, I can't actually change the mapping of my driver anyway, some commercially released games have been hardcoded to use my driver and its current layout (made a huge mess when I didn't know this and released an update that changed the IORegistry layout!)<br><br>Thanks,<br>Colin<br> <br></div><br><br>So a pretty logic answer to a problem already discuss here in the Forum.<br>I knew already the answer before asking, my intention wasn't to change this features but see if there was any easy workaround.<br><br>Hope it will help some folks around :) <br><br></td></tr></table><br>
<a name="1117737"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ima747</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good notes. Interesting yet depressingly not surprising that MS doesn't have proper drivers for their own hardware... Discarding data, especially when the console uses it is just stupid, the kind of stupid that makes me mad. Oh well, I'll stick to a ps3 controller emulated as 360... Dont like the layout as much but wireless+wire works (stupid charge and play cable is in reality just a charge cable if anyone is curious) <br><br></td></tr></table><br>
<a name="1117747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>However, for whatever reason in the XNA driver Microsoft decided to throw away this information - if both triggers are pulled, the resulting value is the same as if neither are pulled.<br> <br></div><br><br>This isn't quite true. When using the XInput driver ( correct software to hardware driver for Windows ) it reports both triggers accurately and independently. I believe XNA uses a different dll but I'm sure the binary inside it will be the same, however I don't know this for a fact.<br><br>The standard BMax driver also reports both triggers as cancelling each other out, hence why I wrote :-<br><a href="/posts.php?topic=94785#1092801" target="_blank">This</a><br><br>Unfortunately it's Windows only as it uses the XInput.dll ( can you use Windows drivers on MacOS and Linux nowadays? ), but I'm only posting to point out that the statement above is incorrect. The other drivers must be missing something crucial. <br><br></td></tr></table><br>
<a name="1117764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Twinprogrammer</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have problems with the computer reading the X_360 controller it's probably because you're using a wireless controller and hooking it up to the computer with the play and charge kit. <br>The play and charge kit's wire only transfer electricity to charge , nothing else. If you want to plug it in and use it , you need to buy a WIRED controller <br>(I prefer the afterglow controller for 29.99 US$ ) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
