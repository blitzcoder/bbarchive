<!DOCTYPE html><html lang="en" ><head ><title >Flip not waiting for Vertical Blank</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Flip not waiting for Vertical Blank</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Flip not waiting for Vertical Blank</a><br><br>
<a name="912129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi I am using Box2d with Blitzmax. I am using Framework BaH.Box2d near the start of the program and then Import other modules I use. I use the Flip 1 command (to sync with my display in the main loop. (I will eventually use delta-time, but I want to use 'Flip 1' on on my laptop which has a 60Hz display).<br>     The problem is - although the program runs - it is clearly not waiting for a vertical blank and is running uninhibited. I have done tests by starting a new program and printing Frames per sec and it is definitely because of the Framework format I am using.<br><br>I presume I need to Import a module that I am missing to fix this, but I don't which one would deal with this. I have already done Import BRL.graphics but I still have this problem.<br><br>Any help would be appreciated. Thank you. <br><br></td></tr></table><br>
<a name="912131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try Flip -1 without having specified a refresh rate. EDIT: Oh, also, try a different GFX driver... OGL simply won't render without tearing on my machine so for a properly synced display I have to go with DX. <br><br></td></tr></table><br>
<a name="912141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also make sure your advanced GPU driver settings have something like "wait for vertical blank" or similar option set as "application controlled". <br><br></td></tr></table><br>
<a name="912163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually you're supposed to use Flip 1, not -1, to sync with the vertical blank. Flip -1 is a software-based timer, not vertically synced. <br><br></td></tr></table><br>
<a name="912170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suggest only to <i>try</i> it. We can all read the manual. <br><br></td></tr></table><br>
<a name="912171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Flip -1 is a software-based timer"<br><br>Can someone point out the source code in the module that handles this? Thanks. <br><br></td></tr></table><br>
<a name="912233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rico</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry I forgot to mention that I normally use Flip 1 in my main loops - to sync to the display and it works fine (though my FPS counter says 55 when it should say 60 - cos I have a 60Hz display) - it looks very smooth.<br><br>Its only when using the Framework command and Import -ing the Modules I need - it doesn't wait for the VBlank. I did one program with a full module build and the same with the Framework version to test and the Framework version wasn't waiting for the VBlank. This is why I think I need to import a module to fix the problem - but I don't know which one I'm missing.<br><br>MGE - Yes that option is enabled<br><br>Sledge - I will try Flip-1. Thank you. <br><br></td></tr></table><br>
<a name="918684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry -- I came across a bit snippy there, IH. Rico without importing the required modules I can't see how it would compile at all... perhaps you can run Framework Assistant over it if you haven't already. I can only think that you must be specifying a different driver to the default when manually importing? <br><br></td></tr></table><br>
<a name="918723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only graphics-based ones that are available are the GL or DX ones. If you don't specify a Framework at the start, you will get both. I'm not sure which is on by default on Windows if you have both, but I'd assume that whichever it is, is not the same one you are using when you are using Framework.<br><br>I always just use Flip without a number.<br>Also note that you should be passing in the correct delta timing into Box2D for the physics to update at the correct speed. For example, if your framerate dropped to 30fps and you were telling Box2D to updated at 60fps, your physics would appear to slow down. The same would apply if your framerate went higher. <br><br></td></tr></table><br>
<a name="918819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I always just use Flip without a number."<br><br>Flip(1) - should be used to flip and wait for vblank<br>Flip(0) - is used to to rest render speed at full speed<br>Flip() - is actually Flip(-1) which according to the docs:<br><br>"If sync is -1 and the current graphics object was created with the Graphics command, then flips will occur at the graphics object's refresh rate regardless of whether or not the graphics hardware supports such a refresh rate. <br><br>If sync is -1 and the current graphics object was NOT created with the Graphics command, then the flip will occur on the next vertical blank. "<br><br>-1 is confusing. If you use the Graphics() command and then Flip(-1) then apparently Bmax will do some internal timing to tie it into the hz you set up in the graphics command. <br><br>If you created a graphics screen without using Graphics() and then flip(-1) it apparently will wait for vblank before flipping.<br><br>If you're doing your own timing in your code, I would only use Flip(0) or Flip(1). <br><br></td></tr></table><br>
<a name="918995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check your video card's driver settings.  You might have OpenGL set to ignore vertical blank and DirectX set to application controled.  So when you don't use Framework command, D3D7Max2D is being used by default, and when you use FrameWork, something you are including is setting the Max2D driver to OpenGLMax2D. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
