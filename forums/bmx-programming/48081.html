<!DOCTYPE html><html lang="en" ><head ><title >Assembly question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Assembly question</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Assembly question</a><br><br>
<a name="534384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boris</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there. I have a small problem -(<br><br>I need to know if its possible to insert ASM Code directly into the code by opcodes.<br><br>Example:<br><br>There is a routine and I want to execute the following asm opcodes:<br><br>&amp;hEB,&amp;h03,&amp;hD6,&amp;hD6,&amp;h00  <br><br>some other blitzmax code..<br><br>and then I need to execute<br><br>&amp;hEB,&amp;h03,&amp;hD6,&amp;hD6,&amp;hFF <br><br>Any ideas?<br><br>If there is a way to directly insert asm-code in any way it would be nice if someone could point me to the right direction. Opcodes or asm-instructions.<br><br>It is important that the asm-code is executed exactly in the position where its inserted, not called as function. <br><br></td></tr></table><br>
<a name="534386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you have your asm in functions in a seperate file and call them at the required points? <br><br></td></tr></table><br>
<a name="534438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're mad, but here goes:<br><pre class=code>
Function Call( p:Byte Ptr )
	Local f()=p
	f
End Function

Local p:Byte[]=[Byte($eb),Byte($03),Byte($d6),Byte($00)]

Call p
</pre><br>Of course, I have not and will not run this - and if it crashes, please, no bug reports!<br><br>A tidier way would be to Import the asm source, and declare an extern function, eg:<br><pre class=code>
Import "myasm.s"
Extern
Function myfunc()    'declare as '_myfunc' in asm...
End Extern
myfunc
</pre> <br><br></td></tr></table><br>
<a name="534483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boris</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, cool -)<br><br>My problem is I can not run the code as a function.<br><br>Background: I am using a software that encrypts the .exe file and it uses the Opcodes as an identifier for start/stop the encryption. The tool encrypts and protects the exe file to make shareware-stuff.<br><br>Any more ideas?<br><br>btw: Blitz3D and BlitzMax are the coolest thing on earth -) <br><br></td></tr></table><br>
<a name="534490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> is it possible to insert the opcodes with a hex editor perhaps?! <br><br></td></tr></table><br>
<a name="534552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boris</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> No because you need to insert them on specific positions. <br><br></td></tr></table><br>
<a name="534585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you use incbin to include the opcode data, would it get included at that exact location, or would it have some kind of header thing int he way? <br><br></td></tr></table><br>
<a name="534624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boris</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no separation between data and code section so I expect that this won't work but I'll give it a try. <br><br></td></tr></table><br>
<a name="534635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm thinking it might not work. If the program flow had to go `past` an incbin statement, either the incbin would end up at the end of the actual file or there would be an extra jump instruction which would completely skip the data. It couldn't be treated as a program.<br><br>Could you use Data statements to define the opcodes you want stored? Maybe same problems tho? <br><br></td></tr></table><br>
<a name="534636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are just trying to encrypt `most of` the program or whatever, would it matter that there is some kind of a `jump` instruction just prior to the opcodes? Or do you need the opcodes to actually be executed? <br><br></td></tr></table><br>
<a name="534659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boris</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried a lot of ways now, even the direct ASM way without success.<br><br>I tried to include ASM-Code like this<br>; test.s<br>format	MS COFF<br>section	"code" code<br><br>db $eb,$03,$d6,$d6,$ff<br><br>but the include statement is only possible at the beginning of the file.<br><br>I tried to write C Code and implement it via Inline-ASM and GCC was funny enough to tell my that my DB command is not understood..<br><br>	#define SECUREBEGIN     asm ("db 0xEB,0x03,0xD6,0xD6,0x00;")<br><br>Well what I need is a command to insert an opcode -((( Playing and mixing around is very interesting, specially the thing that its possible to mix c and blitzmax, but its a little bit oversized for my problem.<br><br>Something like:<br><br>Opcode $eb,$03,$d6,D6,$0<br><br>thats what I need -(((( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
