<!DOCTYPE html><html lang="en" ><head ><title >How are you avoiding memory Increas</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How are you avoiding memory Increas</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How are you avoiding memory Increas</a><br><br>
<a name="1229381"></a>

<a name="1229382"></a>

<a name="1229383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im testing a process where a space ship shoots missiles<br>and when the missiles explode the memory should be free.<br><br>my Type is constructed more or less like that<br><br><pre class=code>
  Type SpaceShip
    Field MeshHandle
    Field Sons:TList
    Field Physical:PhysicalData_Type
    Field  XPos#
    Field YPos#
    etc...
  End Type
</pre><br><br><br>So what I have is a Class which has Fields That are Classes too.<br>So I FreeEntity MeshHandle<br>and Then I Do SpaceShip=Null<br><br>Do I also Need to do Null for the Internal Parts like Physical field etc..<br><br>Anyway.. I get memory Increase So something is Wrong..<br><br>What Is the Proper way to clear a Game Element in order to keep Memory Stable and not gradually increased? <br><br></td></tr></table><br>
<a name="1229384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzMax does not have a command "FreeEntity" - I assume you are posting in the wrong section of this board.<br><br><br>Memory increases because Garbage Collection does not take place each time an object gets "collectable".<br><br>If an object is not linked from somewhere anymore, it gets collectable.<br><br>myobject -&gt; list -&gt; otherobject<br><br>Delete myobject and list gets collectable - which makes otherobject collectable.<br><br><br>myobject -&gt; thislist -&gt; otherobject<br>secondobject -&gt; thislist -&gt; otherobject<br><br>Delete myobject and thislist/otherobject/secondobject keep existing<br>Delete thislist and otherobject gets deleted, secondobject gets kept<br><br><br>thislist -&gt; otherobject -&gt; myobject<br>thislist -&gt; myobject -&gt; otherobject<br><br>if you now delete thislist, you created a mem leak as nobody knows about otherobject/myobject, but both of them know about each other - so they do not get GCed. To avoid this, manually "clear/empty" this list before setting it null. Or just avoid circular referenced (otherobject-&gt;myobject and myobject-&gt;otherobject at the same time).<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1229388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hardcoal</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Derron i use xors. Thats why ive mentioned freeentity.<br>Its the principle that matters anyway.<br><br>Now im gonna try understanding your explanation. Tnx <br><br></td></tr></table><br>
<a name="1229397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would suggest to encapsulate access to non managed memory members in your program, to keep safe from future crashes.<br><br>Make any object that requires to be manually free "private" and automatically release it on the Delete method, just in case you forget to free it in other areas of the program. This way, you will avoid big memory leaks (only leaks while the GC is not yet collecting objects).<br><br>Additionally, I would suggest to encapsulate collection of entiities so a managed "Collect" or "Destroy" or whatever method can be used to actually call the xors freeentity command AND at the same time, set a flag in your managed class, so you can debug the areas where something is free twice, or accessed after being free.<br><pre class=code>

</pre> <br><br></td></tr></table><br>
<a name="1229398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another idea is using suitably sized arrays and encapsulating them.  Stacks can also work very nicely for this purpose but that's basically a way of handling data within an array.<br><br>If you handle particles this way you can get good speed improvements because it doesn't have to garbage collect at all.<br><br>I can write an example for you if you want. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
