<!DOCTYPE html><html lang="en" ><head ><title >Particle Origins on Sprites</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Particle Origins on Sprites</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Particle Origins on Sprites</a><br><br>
<a name="1241554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have any ideas for having sprites that originate from specific points on sprites?<br><br>I could do this the obvious canned hard way but I think I would like to have it baked into my sprite storage format.  Think of the origin points for gun muzzle flashes, or ice particles dripping off a sword.<br><br>One thing I had thought of was having certain specific colors that were replaced by my engine at draw time, to re-color armor and weapons.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="1241568"></a>

<a name="1241569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would make a simple MaxGUI application that loads your animation frames and you can zoom in and visually specify the in-sprite coordinates for those special-effect sockets, per frame.<br>These sockets are just objects that have an ID and a coordinate pair [x, y] that's positioned relative to the sprite handle, wherever it may be (as you might happen to use something other than top left).<br><br>This tool would also save this socket data to a file so that you can load it in your game engine. <br><br></td></tr></table><br>
<a name="1241612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> or, of you know the vertex data of your model<br><div class="quote"> I would make a simple MaxGUI application that loads <br></div><br>once you have the model loaded, just locate the required vertex for spawning sprites.<br><br>this could be a vertex range (start..end), a single vertex, or you could have an additional data per vertex which your engine uses to reference sprint emissions <br><br></td></tr></table><br>
<a name="1241618"></a>

<a name="1241619"></a>

<a name="1241620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> He is talking about sprites, not textures.<br><br>So eg. he has a spritesheet containing a figure holding a weapon in the hand while shooting and walking.<br>He now wants to store the information of the weapon so he could add some effects ("muzzle flash").<br><br><br>Idea: it adds a specific offset but keeps it "visible": each sprite you have could get a X-sized-Pixel-Border. (X = amount of special positions on the image).<br><br>So you end up with eg this:<br><br><pre class=code>
+-------------+
|+-----------+|
||    ,=,    ||
||   (o o)   1|
||    \~/    ||
||     o     |2
|| .--' '--. ||
||    ...    ||
|+----1-1----+|
+------2------+

 +-----2-----+
 |    ,=,    |
 |   (o o)   1
 |    \~/    |
 2     o     |
 | .--' '--. |
 |    ...    |
 +----1-1----+

</pre><br><br>1 and 2 define special positions on the sprite (the top and left pixel rows/cols could also get used - for me they contain 9patch-pattern information or "content area"-definition).<br><br>In our case you see two definitions of the "1"-x-axis: so we have two spots of this effect, both on the same y-axis. Yes, you cannot create multiple definitions in one set of "col-row" - except they share a coordinate (either X orY). Of course you could add different colours - but you still could not mark "two spots of the same effect on the same coordinate" - except of cours for another color coding,  but this just makes it harder to "paint".<br><br>So as long as you keep it simple (2, 4, 6... effects) you can do it with the pixel-border-method. I prefer color codes too - you even could do something like "255,0,0" = dropping blood, "0,0,255" = dropping melted ice .... .<br><br><br>hope you got the idea.<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1241623"></a>

<a name="1241627"></a>

<a name="1241633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just going to go with color codes and roll my own copyrect.  That way the information will be baked into the bitmap.<br><br>Derron, your way is super original.  Did you think of that yourself?  Do you have any demos of this effect?<br><br>Interesting other ideas gents-- is there anything interesting you can think of to do with this system?<br><br>The plot thickens: since the game is top-down, the particle origin needs to be rotated along with the sprite!  Probably the best way to do this is to do the sprite rotation as normal, then put the particles into screen space on the res-up pass.<br><br>Hrm. <br><br></td></tr></table><br>
<a name="1241667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @think of that yourself<br>Yeah, I did that - but I assume others did that before. Like said I reuse the idea of androids nine patch configuration (the use the left and top added pixel line to mark stretchable areas of a 3x3 grid , the bottom and right added pixel line defines content areas of the grid).<br><br>While it adds the benefit of "the designer could add them graphically" it really lacks of a flexible configuration - if your sprite is loaded via a ressource loader - just add more configuration details in a XML.<br><br>This xml then just contains<br><pre class=code>
&lt;sprite name="bla" url="url/to/image.png" offsetLeft="-10"
  &lt;effects&gt;
    &lt;effect x="10" y="20" type="1" /&gt;
  &lt;/effects&gt;
&lt;/sprite&gt;
</pre><br><br>while this adds some entries to an XML it allows for a way more flexible configuration of your sprite, no need to do this in your paint program.<br><br>BUUUT ... you might do it for simple effects (if no additional configuration data like "drop amount" is needed) but advanced ones should be done in a more versatile environment -&gt; ini/xml/...<br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1241848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could also have particle origins on the top and left lines and stretching information on the bottom and right.  Lots of people seem to use sprite stretching for quick and dirty animations. <br><br></td></tr></table><br>
<a name="1241942"></a>

<a name="1241949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Derwin, [DERRON, thanks very much autocorrect] I decided to do it your way, there are just too many possibilities and it's much easier than having to deal with another format to parse and bother with.  It will also work for room templates!<br><br>Something else I am going to do with the sprites is to have pixels to indicate eyes and possibly head origins so I can procedurally generate sprites like paper dolls.  Probably I will pre-build sprite sheets for these at map creation to minimize number of draws.  It's a dungeon game-- one thing I am going to do is to have a fullbright flag for things that glow in the dark, like eyes.<br><br>Any other ideas?  Since I am coding an editor and format I would like to really milk it for all it's worth. <br><br></td></tr></table><br>
<a name="1241944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Derron</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> just use XML ... it is versatile and easy to extend (new flag/option? just store it with them).<br><br>Especially if you use an custom editor this will be the best deal to accomplish.<br><br><br>In your "paper doll" approach: you have a "mydoll.xml", which describes parts of the body - and a body which has "parts"-children with coordinates where to attach the parts.<br>Each part could have custom properties like "offset", "handle location" etc.<br><br>Means: while your body says: the left arm belongs to x5,y4, your "part type='leftarm'" defines a handle of x2,y2. Result will be that the left arm is is positioned at x5+2,y4+2 because it took care of an individual declared offset/handle.<br><br>This all are things which can be easily done in XML - you then just have to extend your xml-reading-function and types. Way better than to code them into the image itself.<br><br>Such things just should be done if the encoded information is existing in nearly all of your graphics or is very generic.<br><br><br><br>bye<br>Ron <br><br></td></tr></table><br>
<a name="1241946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zoqfotpik</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmmm... I will think about it, maybe I am just being a luddite.  The 9patch format borders on genius... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
