<!DOCTYPE html><html lang="en" ><head ><title >Detecting DX or GL and falling back on Failure ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Detecting DX or GL and falling back on Failure ?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Detecting DX or GL and falling back on Failure ?</a><br><br>
<a name="578746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>On my work pc, bmax apps cannot run in dx mode. the app crashes.<br><br>Is there a way to check if there is an error running dx mode, to fallback onto GL ?<br><br>I am sure the answer is simple, but I cannot find it anywhere. Can bmax do this out the box without any funny tweaks ? How to I assert on failure ?<br><br>Something like this would rock<br><br>pseudo<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

// check initial caps
// default dx
if failed dx then
   msg "using GL"
   set GL
else if failed GL
    msg "Unlucky, using DX"
    set DX
end if
 
// now choose display options for set API

</textarea> <br><br></td></tr></table><br>
<a name="578751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there a way to check if there is an error running dx mode, to fallback onto GL ? <br></div>Not that I know of. Currently I'm forcing OpanGL, and allowing the user to switch to the DX renderer by using a commandline switch. <br><br></td></tr></table><br>
<a name="578754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok cool, thanks FlameDuck :)<br><br>So I take it you have come across the same prob with dx on some pc's  ? Apps Crashing on dx ? <br><br></td></tr></table><br>
<a name="578764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> YEs you could do this but it would mean fiddling with one of the modules. <br><br></td></tr></table><br>
<a name="578767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The simplest workaround I can think of is...<br><br>Open and write to a file when your app starts e.g. write a string stating which driver you are using "Running in DX mode" or "Running in OpenGL mode".<br><br>Then just before you application closes normally write over the file with "DX ran OK" or "OpenGL ran OK".<br><br>When you start your application check this file and it will tell you if your application crashed using that particular driver and if so you could create another file stating which driver should be used for this PC. <br><br></td></tr></table><br>
<a name="578773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That means the user has to basically run the app again, if it failed on the first run.<br><br>I wish I could trap the crash in bmax and handle it like that.<br><br>It would be nice to give the user a friendly error message. <br><br></td></tr></table><br>
<a name="578782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surely coming soon...<br><a href="/posts.php?topic=51078&amp;hl=windows%20fallback" target="_blank"> DX -&gt; GL </a> <br><br></td></tr></table><br>
<a name="578790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert Cummings</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly. It should happen gracefully and automatically. <br><br></td></tr></table><br>
<a name="578796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah perfect. thanks <br><br></td></tr></table><br>
<a name="578934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure you can do this to check which drivers are available...<br><br><pre class=code>If GLMax2DDriver()&lt;&gt;Null Then openGL=True	' check if OpenGL available
If D3D7Max2DDriver()&lt;&gt;Null Then directX=True	' check if DirectX available</pre><br>At least, that's what I've done, but it hasn't been tested to the extent that it falls to OpenGL if DirectX isn't available. <br><br></td></tr></table><br>
<a name="579037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm, weird, it says both are available, maybe I have poked drivers or something, I need to investigate this further. But that is a nice way that I would like to implement it.<br><br>*EDIT<br><br>Does not work :( <br><br></td></tr></table><br>
<a name="579177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe both ARE available.  I assume that what I posted above returns a non-null response if a DX and/or OGL driver exists - not whether your app will run without crashing.<br><br>If the app crashes then it could be another issue, for example graphics drivers and/or DX may need updating, or the PC doesn't meet the minimum spec for your app (even if you don't yet know what that minimum is).<br><br>One thing though, you don't say how your app crashes.  It may not be DX related at all, but could be something completely different - like missing files when you move to your work PC.<br><br>Also, the minimum version of DirectX required for Max2D is 7 - does your work PC meet this? <br><br></td></tr></table><br>
<a name="579342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SillyPutty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes it does, I get unhandled exceptions while trying to use the dx driver.<br><br>Funny enough I can run dx9 apps on my work pc no problem. I agree that both Are available with the above check.<br><br>I just wish I could trap the error and fallback to GL. <br><br></td></tr></table><br>
<a name="579377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't BRL post a test program a while back for people to try, that was supposed to do a DX -&gt; OpenGL fallback?<br><br>Sounds like something is in the pipeline... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
