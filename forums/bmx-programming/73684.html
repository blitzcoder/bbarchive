<!DOCTYPE html><html lang="en" ><head ><title >Solid CSG Lib for Bmax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Solid CSG Lib for Bmax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Solid CSG Lib for Bmax</a><br><br>
<a name="823365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating a Solid CSG library for Bmax, it is not dependant on any 3d library. uses 3d maths only to calculate CSG operations. However in order to use it you will need to Transfer the Mesh data to the Solid and then back again.<br><br>i posted a worklog on it<br><br><a href="http://www.blitzbasic.com/logs/userlog.php?log=1525&amp;user=9295" target="_blank">http://www.blitzbasic.com/logs/userlog.php?log=1525&amp;user=9295</a><br><br>I'll try and add some example files with the mod for B3dSDK and Minib3d <br><br></td></tr></table><br>
<a name="823374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's nice and all, but I don't think you need a thread for this.  Especially considering you have nothing to show. <br><br></td></tr></table><br>
<a name="823469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol Noel - always nice and all, but I don't think you need a post to say that, especially considering you have nothing to say ;)<br><br>Leon - I think it'll be sweet when you've created this, It'd be awesome to use it to do red-faction style geomod!<br><br>Would you write in-out methods for use with MiniB3D?  That'd really help it to be very useful. <br><br></td></tr></table><br>
<a name="823474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to hear it Leon.  A lot of people could use some drop-in CSG code for their editors (me).<br><br>Noel, any particular reason you're taking a personal attack on this guy?  You're lucky I'm not a mod here or I'd just take out the trash for good. <br><br></td></tr></table><br>
<a name="823485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Noel, any particular reason you're taking a personal attack on this guy? <br></div><br>Probably because there's a 90% chance this will never materialize. <br><br></td></tr></table><br>
<a name="823490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Noel, any particular reason you're taking a personal attack on this guy? You're lucky I'm not a mod here or I'd just take out the trash for good. <br></div><br>Telling someone they have nothing to show is a statement of fact. It may be blunt, but it's no personal attack. For reference, a personal attack is when you do something daft like call people names. I don't know, like refer to someone as trash, for example. <br><br></td></tr></table><br>
<a name="823513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Probably because there's a 90% chance this will never materialize. <br></div><br>That may be, but a response like Noel's gives the impression that no new ideas are wanted or accepted by this community.<br><br>Gabriel, and referring to someone as daft too I assume.  ;)<br><br>Anyways, enough derailing.  I think it's a good idea. <br><br></td></tr></table><br>
<a name="823522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That may be, but a response like Noel's gives the impression that no new ideas are wanted or accepted by this community. <br></div><br>That's not the impression I get at all. I get the impression that starting two threads and a worklog on the subject when there's nothing to discuss is overkill. <br><br><div class="quote"> Gabriel, and referring to someone as daft too I assume. ;) <br></div><br>Sorry, I'm a bit forgetful and I forget which members speak English as a first language and which don't. If you read carefully, you'll see I described an act as daft, not a person. If you're suggesting that only daft people can commit daft acts, I don't actually agree, but I guess I'll take your word for it. <br><br></td></tr></table><br>
<a name="823553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same thing.  But do us both a favor, and the community, and just drop it.  Thanks. <br><br></td></tr></table><br>
<a name="823555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> well at anyrate i should have something to show tonight. Kind of hard to show any visual progress when im halfway into the library.<br><br> I made it so when you request faces from the solid you can set a bool so it will return either Union or Intersection. (i may add Difference, i personally never use it though), but it will return a list of the faces that are visible depending on the bool. no math needed to perform this operation its all about occlusion. all the math is done when you run addsolid method.<br><br>I'll see if i can get a screeny up tonight.<br><br>Oh BTW thanks Leadwerks, without that pdf you wrote on CSG i might still be scratching my head. The math you show was alot easier to follow than other sources i've looked at. <br><br></td></tr></table><br>
<a name="823556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW i'll include read in-out functions for minib3d and B3dsdk when im finished.<br><br>I'm pretty much done now all i gotta do is write the functions for returning the faces of changed solids and a rebuild world method.<br><br>and of course test it, so i can fine tune it. <br><br></td></tr></table><br>
<a name="823558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Same thing. But do us both a favor, and the community, and just drop it. <br></div>It's not the same thing, and you were the one who brought it up.<br><br><div class="quote"> Leon - I think it'll be sweet when you've created this, <br></div>Indeed. <br><br></td></tr></table><br>
<a name="823561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> if i work fast enough i should be able to have this done tonight..... well a beta of it anyways. <br><br></td></tr></table><br>
<a name="823563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW noel-<br><br>Possibly, i didn't presume i was wasting a thread because im sure i can create this, currently im almost done with it as it is. I suppose i could have waited and just went BAM here it is!<br><br>either way this won't be a wasted thread once i publish it. ;) <br><br></td></tr></table><br>
<a name="823564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> [EDIT: Ah, you changed the sig already!] Looking forward to seeing the lib -- could be the foundation for Neo Maplet, eh? <br><br></td></tr></table><br>
<a name="823565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol, you noticed that too? heh heh im gonna change it to something smaller. <br><br></td></tr></table><br>
<a name="823566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is identical.  And aside from who brought what up and who chimed in of their own accord...just drop it.<br><br>Looking forward to seeing some examples Leon. <br><br></td></tr></table><br>
<a name="823567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> gonna change it to something smaller <br></div><br>That would be appreciated, the FAQ asks that sig images be no bigger than 80 pixels high in case you haven't seen it (it's quite well hidden). <br><br></td></tr></table><br>
<a name="823568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah well this new one's a lil bigger than 80 but eh not too bad now. <br><br></td></tr></table><br>
<a name="823606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Noel, any particular reason you're taking a personal attack on this guy? You're lucky I'm not a mod here or I'd just take out the trash for good. <br></div>What is it with you people and assuming I'm personally attacking someone?  Yeesh, all I did was point out that a thread wasn't needed for a project that already has a worklog and nothing else to show.<br><br>Leon, good luck with it, but again, don't need a thread this early.<br><br>There, everyone happy that I included 'good luck' and the usual sugar-coating?  Now go back to your holes and look for insults elsewhere. <br><br></td></tr></table><br>
<a name="823613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> ROFLMAO <br><br></td></tr></table><br>
<a name="823719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please stop the posts unrelated to the topic.<br><br>Leon: looking forward to seeing this! <br><br></td></tr></table><br>
<a name="823866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> bah, im tired. ugh. i need to figure out how to locate the UV of a new point within a face. <br><br></td></tr></table><br>
<a name="824460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you get time, please add subtraction - I really want to do red-faction style geo-mod. <br><br></td></tr></table><br>
<a name="824466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> i need to figure out how to locate the UV of a new point within a face. <br></div>Interpolation? <br><br></td></tr></table><br>
<a name="824605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> like mapping axes. im not sure how to do those.<br><br>i saw a bit of math on how to retrieve the UV from a set up mapping axes but i dunno how to set one up for a face. <br><br></td></tr></table><br>
<a name="824608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok im sure you guys will find this humorous, after finally fixing some recursive issues i finally got it to a point where i can visually see whats going on. hahaha i got this result.<br><br><img src="http://www.vigilart.com/laugh.jpg"><br><br>seems like<br><br>a.) I gotta fix the math coordinates when im splitting a face. <br><br>b.) its not returning unmodified faces<br><br>c.) It's returning the wrong boolean<br><br>however i dont plan on giving up. i can finally see whats going on now. <br><br></td></tr></table><br>
<a name="824830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would really like to see this working, but that image is not convincing at all. <br><br></td></tr></table><br>
<a name="824833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's hard stuff!<br><a href="http://www.leadwerks.com/post/csg.zip" target="_blank">http://www.leadwerks.com/post/csg.zip</a><br><br>I have found that splitting the brush edges gives more reliable results than reconstructing a new solid out of planes. <br><br></td></tr></table><br>
<a name="824890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> A fully working clipping plane and closed mesh is something I'd need.  Big10p did one of those around 2004, it's in the code archive.  The only problem with it is that it doesn't close the mesh.<br><br>But to me CSG is, for example:  Take a rectangle, subtract a smaller rectangle from it (make a tub), then add a sphere on one of the edges and... son on and so forth. <br><br></td></tr></table><br>
<a name="825146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea im currently working on splitting edges, i agree it is more reliable. i fixed some probs with that last screenshot. however when i run a ray/edge vs triangle test for some reason the dotproduct is off somewhat. currently im trying to get all the intersection points of the edges to line up correctly. once i get that point working right, splitting edges is pretty much covered. <br><br></td></tr></table><br>
<a name="825147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> that was a pretty neat lil program. was that using occlusion rendering or was that straight up manipulating the geometry? <br><br></td></tr></table><br>
<a name="825149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i see whats going on<br><br>when i test a line to a face, it gives me the XYZ coords but its in integer format so its not exact<br><br><img src="http://www.vigilart.com/linepick.jpg"><br><br>and when i try this on testing edges of one mesh to another i get this<br><br><img src="http://www.vigilart.com/edgepick.jpg"><br><br>i found some source code on getting the distance between the point and the line.<br><br>im just having trouble getting<br>(xyz) - distance#<br><br>any ideas? <br><br></td></tr></table><br>
<a name="825150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah man got it a pinch closer. but the math is still off a pinch. ergh...<br><br><img src="http://www.vigilart.com/linepick2.jpg"> <br><br></td></tr></table><br>
<a name="825151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah hah<br><br><img src="http://www.vigilart.com/linepick3.jpg"><br><br>figured it out. <br><br>now to apply this to the solidcsg lib im working on. <br><br></td></tr></table><br>
<a name="825152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> erm maybe not. doesnt seem to work well at some odd angles. <br><br></td></tr></table><br>
<a name="826187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck!  Hope it ends up speedy :P <br><br></td></tr></table><br>
<a name="826373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> gotten alot closer. i got all the correct intersection points but they are off. i need to use or write a different line pick code thats more accurate. these ones i got from the code archive do return the intersection point. but its on the triangle and its not completely accurate down to the smallest point. I need one that gives me the intersection point on the line not on the face.<br><br>the rest however is covered i can do face splitting and stuff right. but its just getting the correct intersection points that are giving me grief. <br><br></td></tr></table><br>
<a name="826422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> well until i figure out this ray triangle intersection bit i found something cool on the side<br><br>there is <br><a href="http://activesolid.ncf.ca/asdstd.html" target="_blank">http://activesolid.ncf.ca/asdstd.html</a><br>an active solid library which can be integrated into Bmax the standard edition has a free license.<br><br>the SDK info is a bit vague. it says i can be wrapped in an application that uses a COM container, but thats if you want the full gui etc etc out of it. it contains activesolid.dll which does all the grunt work for solid modelling plus there is an import/export feature so you could transfer a model to the dll have it chop it up and send it back. <br><br></td></tr></table><br>
<a name="826425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> oooh even better one<br><br><a href="http://www.geometros.com/sgcore/review.htm#5" target="_blank">http://www.geometros.com/sgcore/review.htm#5</a> <br><br></td></tr></table><br>
<a name="826441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> WOOT! progress, got those damn intersection points to line up exactly. <br><br><img src="http://www.vigilart.com/intersected.jpg"><br><br>now i can finally start splitting edges, etc etc <br><br></td></tr></table><br>
<a name="826445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> sgCore :o<br><br>Genius piece of work!  I really like the boolean operations and how fast everything gets done.  Great :P<br><br>I'm thinking, couldn't it be more time saving to adapt sgCore to BlitzMax than rewriting the whole system from scratch?  That would be pretty sweet! <br><br></td></tr></table><br>
<a name="827305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> i know , however IR stoopid when it comes to making wrappers for that kind of thing. i would much rather use sgcore.<br><br>but at the same time i want the experience learning how to do CSG, i been eyeballing it since UT GOTY and have mildly obsessed with learning it. i remember back when Cshop was my fav tool, but i wanted that power integrated into my own editor because the game i plan on releasing requires user made stuff.<br><br>on the flip side, however i got those intersection points much more exact. except now i got a few staggler points that seem to pass the ray intersection test but arent actually intersecting anything see<br><br><img src="http://www.vigilart.com/straggler.jpg"><br><br><br>also here is the code i used to sorta snap to a line,<br><br><pre class=code>
Function Magnitude#( px#,py#,pz#,dx#,dy#,dz# )

 Local vx#,vy#,vz#
 vx# = dx# - px#
 vy# = dy# - py#
 vz# = dz# - pz#
 Return Float(Sqr( vx# * vx# + vy# * vy# + vz# * vz# ))
End Function

Function DistancePointLine( ax#,ay#,az#,bx#,by#,bz#,px#,py#,pz# )

 Local LineMag#,U#
 Local ix#,iy#,iz#
 Local Distance#
 LineMag# = Magnitude( bx#, by#, bz#, ax#, ay#, az# )
 U# = ( ( ( px# - ax# ) * ( bx# - ax# ) ) +( ( py# - ay# ) * ( by# - ay# ) ) +( ( pz# - az# ) * ( bz# - az# ) ) ) /( LineMag# * LineMag# )

 If  U# &lt; 0.0 Or U# &gt; 1.0 Then Return False 
 ' closest point does Not fall within the line segment
 
 ix# = ax# + U# * ( bx# - ax# )
 iy# = ay# + U# * ( by# - ay# )
 iz# = az# + U# * ( bz# - az# )
 Distance# = Magnitude( px#,py#,pz#,ix#,iy#,iz# )
 Return True
End Function
</pre><br><br>i'll add that to the archives here in a bit. <br><br></td></tr></table><br>
<a name="827311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok lolz got it fixed now, should be good to split those edges and return changed faces based on the booleans sent to the world type.<br><br><img src="http://www.vigilart.com/sfixed.jpg"> <br><br></td></tr></table><br>
<a name="827328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> PROGRESS REPORT<br><br>ok i got it so it splits the edges along the intersection points, now i just have to have it split the faces on the intersection points of the other mesh and that should do it.<br><br><img src="http://www.vigilart.com/splitedges.jpg"> <br><br></td></tr></table><br>
<a name="827329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try something other than a cube. <br><br></td></tr></table><br>
<a name="827405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my mind, this csg stuff is extremely complex.  Much more so than wrapping something that has been tested and that works, plainly.  But I respect people that are obsessed about making something work.<br><br>Hope all the best!  My game project will eventually need csg.  But, csg that is compatible with stencil shadow.  So that means, a soldered closed mesh. <br><br></td></tr></table><br>
<a name="827454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm later on i'll try a sphere on sphere instead.<br><br>but i noticed i need to use a different method for detecting a ray intersecting the triangle. currently this only detects the ray going a particular direction. <br><br></td></tr></table><br>
<a name="827991"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Imagine on the Amiga had one of the best boolean functions I've ever seen. Slow, but 99% accurate ;)<br><br>Russell <br><br></td></tr></table><br>
<a name="828037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool. so the story goes so far. trying to find a bug where a couple edges get skipped in the intersection routine. tried sphere on sphere cone on cone and those on cubes too, it shows the intersections just not all of them. somewhere i did something that causes it to skip an Edge. <br><br>Just to be sure i tried b3d line pick on one triangle and got the same results.<br><br>so once i figure that out i can move on to the next part. ugh, this has turned into a more challenging task than i presumed. <br><br></td></tr></table><br>
<a name="829671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I finally got it working somewhat, I think i may have made a typo when checking to see whether or not a triangle intersects another triangle, it keeps returning true for all of them. I'll get to that but i just now got everything to carve correctly, except when i use sphere's or anything really high poly.  As you can see below it leaves some small holes around the edges. But hey at least this is math only written in native Max code, so its not 3d lib or OS dependant.<br><br><img src="http://www.vigilart.com/csgtry.jpg"> <br><br></td></tr></table><br>
<a name="829694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooh, nice. <br><br></td></tr></table><br>
<a name="829713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> now im just playing around with co-planar faces, should it stay or should it go bum ba bum bum ba. <br><br></td></tr></table><br>
<a name="829723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats kind of odd bbcreatesphere(8) looks just like bbcreatesphere(16) also in B3dsdk it said the minimum was 8 so i tried 4 for the hell of it and it looked like bbcreatesphere(8) back on B3d.<br><br>Anyways fixed the detection issue and got it to carve a sphere <br>using the bbcreatesphere(4) with no probs.<br><br><img src="http://www.vigilart.com/spherecsg.jpg"><br><br>And it carved in 225 milliseconds woot!<br>however the other one carved in like 3126 milliseconds.<br><br>Well this works great so far if the convex brushes are low-ish poly. If you guys want i can package it up as a module. i still need to document it and add a Minib3d example as well. <br><br></td></tr></table><br>
<a name="829725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh i forgot to show i got union working as well.<br><br>however what you see is still 3 meshes, this library doesnt actually combine meshes together it just chops each one accordingly. in fact you can make a call to the read out function to return the original mesh instead.<br><br><img src="http://www.vigilart.com/union.jpg"><br><br>the only downside right now is i haven't written any functions to move or rotate brushes so you'd have to rebuild the brush for that. This library is very dependant on the order in which brushes are added. If a subtraction brush is added after a union brush it will cut the union brush, but if the subtraction was added before then then union brush will be ignored.<br><br>This library Performs CSG 3 ways, you can have it perform CSG on One single brush all other brushes will be ignored. <br>You can Set it to do a normal CSG operation carving or union on any brushes that it intersects with. Or you can do an entire world rebuild. Usually the case if you have to move pre-existing brushes around.<br><br>Here soon i wanna try my hand at adding some lightmapping functions to this library. <br><br></td></tr></table><br>
<a name="829802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> - I think the performance figure you stated clearly shows this library can't do realtime CSG<br>- If you add 2 meshes, the result should return 1 mesh, because you want the solid mesh to be...solid!  This is for many reasons, one could be a stencil shadow system.<br>- The textures should be applied to the new mesh accordingly to what the CSG function gives after it performed, specially not to confuse the calling application.<br>- From an application standpoint, a CSG lib should give the options to return what the application needs, not the other way around.<br><br>I can't help much but I just wish you luck if you want to do something usable by many. <br><br></td></tr></table><br>
<a name="829891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>If you guys want i can package it up as a module<br> <br></div><br>Yes, please!<br><br>[Edit: Oops, I see you've posted it <a href="/posts.php?topic=74293" target="_blank">here</a>. Thanks for sharing!] <br><br></td></tr></table><br>
<a name="829923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> i designed it to return the Unions and Subtractions as seperate meshes yes. you could literally perform a CSG operation between two brushes only then simply add one brush to the other from the output. <br><br>The reason i did it this way is to reduce CSG operation time when using multiple brushes. there are many ways to use the CSG functions.<br><br>one is to do CSG on one brush singly, or Do CSG on That brush + any brushes it intersects, and finally you can Perform CSG on All Brushes doing a world rebuild.<br><br>I have a flag you can set to tel it whether to build dynamically or not. Dynamic off builds faster but has a tendency to not be quite as accurate in some situations. Dynamic on is slower but it gives you accurate results, best to use dynamic on a particular brush you are having problems with. e.g.<br><br>brush1.CSG(recursive=false,dynamic=false)<br>brush2.CSG(recursive=false,dynamic=true)<br>or<br>world.Rebuild(dynamic=true)<br><br><br><br>If you need to Just add one brush to another brush in the output to get one solid mesh. just do bbaddmesh or the minib3d equivalent.<br><br>As far as speed issues go, if the dynamic flag is off it generally can perform CSG in under a second. I didnt design this to be realtime, since it was primarily for one of my editors. I think a good approach to Realtime CSG would be something like using frustrum culling on intersecting brushes. Or a BSP method using culling portals.<br><br><br>On another note, how would i reapply textures to the returned mesh without first including a 3d library to do so. i can have it store the texture or brush handle on the surface, but the repainting cannot be done in the library otherwise it will be 3d lib dependant. <br><br></td></tr></table><br>
<a name="829974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice work Leon <br><br></td></tr></table><br>
<a name="829985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry Leon didn't want to sound harsh or anything.  Obviously I wish for all the bells and whistles, but this is already something nicely done. <br><br></td></tr></table><br>
<a name="829988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> its all good after this i want to tackle Lightmapping and BSP.<br><br>I did include an example on how to return the Tbrush back into a textured mesh, i also added extra variables on the surface to store Surface brushes as either an int or a Type object. I have to make the read in out functions externally. <br><br></td></tr></table><br>
<a name="830052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is a shot using 4 brushes - 2 union 2 subtraction<br><br><img src="http://www.vigilart.com/csgmultiple.jpg"> <br><br></td></tr></table><br>
<a name="830053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might like this paper I wrote:<br><a href="http://www.leadwerks.com/files/csg.pdf" target="_blank">http://www.leadwerks.com/files/csg.pdf</a> <br><br></td></tr></table><br>
<a name="830237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats exactly what inspired me to continue, actually after reading that the whole process became much clearer. <br><br></td></tr></table><br>
<a name="830539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> In case anyone didnt notice i released the WIP module for this here<br><br><br><a href="http://www.vigilart.com/vas.csg.zip" target="_blank">http://www.vigilart.com/vas.csg.zip</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
