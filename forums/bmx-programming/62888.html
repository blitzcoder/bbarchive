<!DOCTYPE html><html lang="en" ><head ><title >ToString() broken?  removed?  gone?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ToString() broken?  removed?  gone?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >ToString() broken?  removed?  gone?</a><br><br>
<a name="702470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use the following line in my code:<br><pre class=code>font.text "("+Len(w.txt).ToString()+")",x,y</pre><br>It used to work perfectly.  I've since updated to 1.22 and done Syncmods and now I get "Compile Error: Identifier 'ToString' not found".  BLIde still highlights ToString() as if it still exists.  I tried compiling in the standard IDE and I get the same error there, too.<br><br>What's the deal?  Has ToString() been removed?  I see no mention of it in the list of updates. <br><br></td></tr></table><br>
<a name="702472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try just casting to String with String(Len(w.txt) instead. You might not even need to cast, it might be automatic. I never used ToString so I'm not sure what happened to it. <br><br></td></tr></table><br>
<a name="702475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, 'font.text "("+Len(w.txt)+")",x,y' is what I'm using now.  Was just a bit surprised that it has apparently been removed without warning. <br><br></td></tr></table><br>
<a name="702477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Azathoth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it worked at all it was likely a bug, Len returns a number not an Object.<br>ToString hasn't been removed, it still works with Objects. <br><br></td></tr></table><br>
<a name="702484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a bug in version 1.22.<br>The correct behaviour is that the member access operator is precedenced to the Len operator.<br>So "Len(anything).ToString()" has to be compiled as "Len((anything).ToString())".<br>But in version 1.22 somthing got wrong - so "Len (anything).ToString()" is compiled as "(Len(anything)).ToString()".<br>So the compiler thinks you want first to get the length of it and then access to the ToString method of the returned integer (which is impossible because there's no ToString method in type Int).<br>The correct compiler behaviour would be first to compile the access to the ToString method and then compile Len to get the length of the returned string.<br><br>To solve this I'm currently still using V1.20, but that's not a good solution.<br><br>I don't know when this gets fixed, but I hope very soon. <br><br></td></tr></table><br>
<a name="702596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So "Len(anything).ToString()" has to be compiled as "Len((anything).ToString())".<br> <br></div><br><br>Whaaaat?<br><br>Am I in bizzaro land?<br><br>It makes perfect sense to me that Len(Anything).ToString would  perform the Len(Anything) operation first, and then do the ToString on whatever object was returned from Len().<br><br>Otherwise, I could not do this:<br>Text.Create(NewText$, 0, 0, 1, Board).Pivot.AnimatePosition(X#, Y#, X#, Y#-250, 1000)<br><br>Cause then instead of Pivot being a field of whatever object Create returns, it would try to act on this stuff: (NewText$, 0, 0, 1, Board)<br><br><br>If you want .ToString to act on what is in the brackets in Len, then why don't you just do this?<br><br>Len(anything.ToString()) <br><br></td></tr></table><br>
<a name="702719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you want .ToString to act on what is in the brackets in Len, then why don't you just do this?<br><br>Len(anything.ToString())  <br></div>Um, because its already a string? ;)<br><br>I'm pretty sure that I should be able to use ToString on any number.  I can in VB/C#. <br><br></td></tr></table><br>
<a name="702728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem is that numbers in max aren't actually objects.  I'm pretty sure mark said as much a while back, and hinted that they ought to be objects too... <br><br></td></tr></table><br>
<a name="702744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Winni</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I think the problem is that numbers in max aren't actually objects.<br><br><br>Sounds like Java, where primitive datatypes are the only exception to the "everything is an object rule"... <br><br></td></tr></table><br>
<a name="702795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Um, because its already a string? ;)"<br><br>And how'm I supposed to know that when you didn't put the little $ on the end! :-) <br><br></td></tr></table><br>
<a name="702807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>sswift:</b><div class="quote"> It makes perfect sense to me that Len(Anything).ToString would perform the Len(Anything) operation first, and then do the ToString on whatever object was returned from Len(). <br></div><b>BlitzMax documentation:</b> (in the "Expressions" section)<div class="quote"> BlitzMax supports the following operators. Operators are grouped into levels of precedence, starting with the highest precedence operators:<pre class=code>.....


True                         True 
False                        False 
--------------------------------------------------------
Member access                Expression.Expression 
Index                        Expression[Subscripts] 
Invoke                       Expression(Parameters) 
--------------------------------------------------------
Negate                       - Expression 
Posate                       + Expression 

.....

Character code value         Asc Expression 
Character                    Chr Expression 
Length of value              Len Expression 
Size of value in bytes       SizeOf Expression 
Address of variable          Varptr Expression 

.....</pre> <br></div><b>Skidracer:</b> (about this problem in the "BlitzMax Update V1.22 Up!" thread)<div class="quote"> The precedence of the . (member access operator) is documented as being higher than the Len operator <br></div> <br><br></td></tr></table><br>
<a name="702810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>sswift:</b><div class="quote"> Otherwise, I could not do this:<br>Text.Create(NewText$, 0, 0, 1, Board).Pivot.AnimatePosition(X#, Y#, X#, Y#-250, 1000) <br></div>Of course you can do this because the operators with same precedence (which you're using) are complied from left to right. <br><br></td></tr></table><br>
<a name="702830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasn't aware Len was an operator.  I thought it just returned the length of strings like in every other language I've ever used. :-)<br><br><br>"The precedence of the . (member access operator) is documented as being higher than the Len operator"<br><br>So then:<br><br>"font.text "("+Len(w.txt).ToString()+")",x,y"<br><br><br>Should do (w.txt).ToString(), and Len should then operate on the resulting string.<br><br><br>I don't like this though.  I code assuming Len() is a function because of years of conditioning.  I see there that Asc and Chr are also operators now?  WHY?  Can you do Asc on anything other than a string?  Can you convert anything BUT a number to a Chr$()?  Why change things just for the sake of changing them and confusing the hell out of people when stuff doesn't work?<br><br>If "font.text "("+Len(w.txt).ToString()+")",x,y" doesn't work now, and it's because Len is now a function and the . no longer takes precedence, then I'm FINE with that.  That's how I'd expect it to work. <br><br></td></tr></table><br>
<a name="702875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The precedence of . is high, thats correct. Nearly highest after all<br><br>But there is no question about precedence in this problem<br><br>len(x.txt) is a function. It gets executed before ANY precedence questions come up at all.<br>And the return of this function (-&gt; int) then is used to execute the following procedure. And as int is no object it fails. No mather if + is higher than . or . higher than boolean or anything.<br><br>Can't remember that it ever worked at all.<br><br>.ToString() is a method I never called anyway, as it is an implicitely called method on objects anyway if they are used in a string context and thus it does not make sense. (sure there are some that want to explicitely cast anything. To me only makes sense if the code is that messy that the variable type isn't clear when writting the code so you can prevent "wrong casts")<br>If you've used modern languages, you are used to not manually call this method anyway as it is one of the objects core methods and its the same in BM. <br><br></td></tr></table><br>
<a name="702894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> "len(x.txt) is a function."<br><br>Are you sure about that?  Because that table posted up there by Fabian says it is an operator wit lower precendence than the . operator. <br><br></td></tr></table><br>
<a name="702900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The docs say it's an operator. Not that the docs are never wrong, but in this instance, I'm pretty sure they're right. <br><br></td></tr></table><br>
<a name="702908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skid posted this in the 1.22 update up thread three days ago<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=62674#701278" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=62674#701278</a><br><br><div class="quote"> Len is an operator not a function so the brackets rule does noto apply. The precedense of the . (member access operator) is documented as being higher than the Len operator so my gut feeling is Fabian has found a bug. <br></div>So why are we all arguing about it. Its a bug. But most importantly...when he said len(x.txt) is a function<br>Dream was definatly wrong ;) (Oh Joyoius day)<br><br>I assumed it was a function as well, and the above from skid was to tell me I was wrong. But it still means that Dream was wrong as well <br><br></td></tr></table><br>
<a name="703037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm. ok thats strange.<br><br>I was quite sure, len used to be a function that returns the value of .length of the underlying object.<br><br>On the other hand, I never used it. I've used OO from day 1 of BM and with OO you don't use len.<br>You use .length on string as well as array to get its size and on that there is no question about precedence or its type as it is declared as int. <br><br></td></tr></table><br>
<a name="703046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Dream,<br><br>It shocked me as well, (And if you look at the two threads several other people). But hah, as it was pointed out "Len x" works, which it whouldnt if Len was a return Function, (well it doesnt work properly hence the bug)<br><br>I did exactly what you had done and told Fabian that he was wrong, but Skid pointed out that he was right. But hah great minds think alike, even when we're wrong. <br><br></td></tr></table><br>
<a name="703054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wrong yes.<br>Or we just assume consistency, where it isn't present. (Operators operate on something as their name already points out. But returning or even calculation length is no operation, its just a query thus no operator) <br><br></td></tr></table><br>
<a name="703209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I said, it's weird. <br><br></td></tr></table><br>
<a name="703211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I expertly said...  it's weird. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
