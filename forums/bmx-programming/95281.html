<!DOCTYPE html><html lang="en" ><head ><title >3D Rendering on a Server</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3D Rendering on a Server</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >3D Rendering on a Server</a><br><br>
<a name="1096456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Has anyone had any luck using BlitzMax to render 3D images on a web server?<br><br>I've managed to get BlitzMax 1.30 compiling on Centos 5 (outdated I know - but I cant change the server so i'm stuck with an old version of glibc which in turn limits me to Max 1.30).<br><br>Of course what the server doesnt have is a desktop environment (no KDE or Gnome) as that's a security risk, so all i've got is PuTTY which is console driven and so doesnt have access to the graphics ram.<br><br>I develop locally and everything is fine but of course when I try to run my app via PuTTY I get a "Segmentation Error", which I believe is where my software calls Graphics3D because it cannot access the graphics RAM and results in a page fault.<br><br>I know that there are libraries on Linux for offscreen rendering but i've no idea how to use them, I suspect I would need to rewrite at least some of the OpenGL commands within MiniB3D to restructure the engine for rendering to an image buffer - which sounds like more man hours than I can throw into my current project.<br><br>Do any of you resident genius' have any thoughts on the topic, or suggestions of things I might try?<br><br>Thanks<br>Becky <br><br></td></tr></table><br>
<a name="1096461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The segmentation fault is caused by the GL graphics driver failing to find an X11 display to initialize a window and GL context on. <br><br>Don't have any idea how you would go about doing what you want to do, but I imagine it'll take some heavy modification. <br><br></td></tr></table><br>
<a name="1096468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> From your post it sounds like you're trying to do 3D rendering without any sort of 3D renderer. You'll presumable need a server with either a 3D graphics card, or some sort of software renderer. MiniB3D isn't a software renderer, it's just a high-level interface to the 3D API. And the 3D API (OpenGL or DirectX) is just a low level interface for the 3D graphics hardware.<br><br>I've heard of some dedicated server hosts providing 3D graphics cards as an option on their servers, but I can't recall which ones. I'd suggest Googling for suitable hosts. Using a customized colocated server which you've set up a graphics card on is another option. You'll probably need a host that can host a tower system, though, as a conventional rack server will be lacking the ports, power capacity, etc, required for a graphics card.<br><br>I tried a quick Google for server hosts that provide this, but all I seem able to find is people asking about this on web hosting forums and then getting a lot of muppet replies back. <br><br></td></tr></table><br>
<a name="1096477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The other way is to write your own Opengl software renderer, or use Mesa, which I believe has an Opengl software renderer. <br><br></td></tr></table><br>
<a name="1096483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In terms of server I could get the hardware changed easily enough, but the software is more rigid - it's running CentOS 5 without a desktop environment and I cannot change that.<br><br>So I could get a 3D card put in but I have a suspicion that still wont be enough, will the "Graphics3D" command still need some kind of desktop environment to open a window?<br><br>The security experts have suggested to me in no uncertain terms that running KDE or Gnome could open up the potential for exploits and is a route that I cannot go down.<br><br>Alternatively is there a 3D engine in BMax that supports software rendering?  I'd be happy to change engine, but I lack the skill and time constraints to write my own.<br><br>Thanks<br>Becky <br><br></td></tr></table><br>
<a name="1096494"></a>

<a name="1096495"></a>

<a name="1096496"></a>

<a name="1096497"></a>

<a name="1096498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't believe BlitzMax executables for Linux need a desktop environment, at least going by <a href="/posts.php?topic=64326#717986" target="_blank">this post</a> I made YEARS ago!<br><br>My understanding is that Linux OpenGL defaults to Mesa (generally, software rendering) by default, which is at least what used to happen in virtual machines before they supported hardware 3D, ie. things would run but very slowly.<br><br>So, if the web server had an X server installed (and the dependencies the executable needs), it *might* at least run. I know I couldn't *build* stuff requiring Graphics calls on my Linux server, but BlitzMax executables use static libs as far as I'm aware, so I think you could possibly build them on a standard PC and then copy the exe to the server. Haven't tried it...<br><br>However, I've *no* idea how you would get at the rendered image if it did run.... :/<br><br>What kind of thing are you planning to do anyway?<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1096501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've successfully run a hello world so indeed it is the Graphics3D call which is failing.<br><br>The goal is to deliver 3D rendered images into web pages. The project at hand is quite small, just allows a user to upload an image and see their customised product visualised in 3D.<br><br>But if I can get the technology working the possibilities are endless.  I'm not looking for real time, just fast delivery of a single image.<br><br>Also, I just kinda want to do it, there's a few times over the years I've seen opportunities to do some 3D renders from data just because it'd be cool - and foremost I am utterly a geek! :)<br><br>I'll go read your other post now, I might try and setup a test rig without a desktop but with a 3D card and see what happens.<br><br>Thanks<br>Becky <br><br></td></tr></table><br>
<a name="1096503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also may I just add, thank you everyone for the abundance of intelligent and considered replies. x<br><br>Becky <br><br></td></tr></table><br>
<a name="1096504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> However, I've *no* idea how you would get at the rendered image if it did run.... :/ <br></div><br><br>I don't know how to get around the lack of an actual 3D surface, but if you manage to get past that (big) hurdle you can probably do all your actual rending to pixmaps, which are stored in normal RAM... Then save those to disk. <br><br></td></tr></table><br>
<a name="1096518"></a>

<a name="1096535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh, yes, you could probably just GrabPixmap/SavePixmap after a Flip, then save, so that part's easy.<br><br><div class="quote"> <br>I'll go read your other post now, I might try and setup a test rig without a desktop but with a 3D card and see what happens.<br> <br></div><br>I'll be interested to hear if you get it working! Now I think about it, I think graphics programs did build but failed on trying to run, so maybe you will have some luck with a graphics card, though I'm reasonably sure hardware 3D isn't necessary for OpenGL/Linux, as long as X/Mesa are installed. (Could be wrong.)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1096679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just doing a little light reading and found this, <a href="http://en.wikipedia.org/wiki/Xvfb" target="_blank">Xvfb</a>, which is a virtual X server for machines with no display device attached. Might be useful, as rendering would go to this 'device' (just a block of memory), and the first example shows how you'd grab the output...<br><br>... and <a href="http://semicomplete.com/blog/geekery/xvfb-firefox.html" target="_blank">this page</a> gives an example of real-world use. <br><br></td></tr></table><br>
<a name="1096749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks BlitzSupport that is a really interesting library you've found, I cant wait to try it.<br><br>I'm being all ill and sorry for myself today so i'm working from home far far away from my linux box.<br><br>xlsior, I tried rendering to texture and grabbing that but I found that the texture was not easily accessible when using this technique.  It wasnt available in texture.pixmap.  I considered copying it in there but aired on the side of not modifying MiniB3d to ease updating.  However the problem of running on a server ocurrs long before actually rendering anything.<br><br>The more I get to understand why it doesnt work the more xvfb looks like a viable solution, so i'm very keen to try it.<br><br>Thanks<br>Becky <br><br></td></tr></table><br>
<a name="1096763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I went in to the office in the end, and:<br><br>tried "-screen 1" and "-screen 0" and "800x600" and "640x480" with the same result:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
# su root Xvfb :1 -screen 1 800x600x16 &amp; /home/X/public_html/test/tex_render
[3] 15845

[3]+  Stopped                 su root Xvfb :1 -screen 1 800x600x16
Segmentation fault
</textarea><br><br>I *think* i'm running Xvfb correctly ( I am a long way from being an expert ) but it seems to me that the application is still generating a Segmentation fault.<br><br>I am using the command:<br>Graphics3D 800,600,0<br><br>I am going to do some more testing, probably not today as I dont think I will get time, but with the goal of testing different graphics3D commands. <br><br></td></tr></table><br>
<a name="1096765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> gdb can tell you where it's crashing... <br><br></td></tr></table><br>
<a name="1096766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ooo this is feeling close now, I properly escalated to root and created some folders and had a play, and now i'm at<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
root@s1 [/home/X/public_html/test]# Xvfb :1 -screen 0 640x480x16 -fbdir /home/X/public_html/test/screen &amp; /home/X/public_html/test/tex_render
[1] 32417
Couldn't open RGB_DB '/usr/share/X11/rgb'
Xlib:  extension "XFree86-VidModeExtension" missing on display ":1.0".
Xlib:  extension "XFree86-VidModeExtension" missing on display ":1.0".
Xlib:  extension "XFree86-VidModeExtension" missing on display ":1.0".
Segmentation fault
</textarea><br><br>It feels close... Just not quite got the fat lady singing yet. <br><br></td></tr></table><br>
<a name="1096927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Xvfb :3 -screen 3 640x480x24 -fbdir /home/X/public_html/test -pixdepths 8 16 24 32 &amp; /home/X/public_html/test/tex_render
[3] 25221
[2]   Killed                  Xvfb :3 -screen 3 640x480x24 -fbdir /home/X/public_html/test
Segmentation fault
</textarea><br><br>I've got a bit closer!<br>No error messages with Xvfb anymore just the segmentation fault.<br><br>I need to compile a new test binary with just "Graphics3D" command and check the pixel depth of it, unfortunately some work experience kid is using the spare mouse &amp; keyboard so I can't get near my machine without annoying the manager of the Ops department today but it feels so near now.<br><br>It bothers me that the error "Segmentation fault" is written to my PuTTY window though, I would expect it to appear on the Xvfb window, am I using it correctly? <br><br></td></tr></table><br>
<a name="1096929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may also find <a href="/posts.php?topic=95302" target="_blank">this</a> of interest too, if xvfb doesn't work out for you... <br><br></td></tr></table><br>
<a name="1096971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got OpenGL-based Max2D drawing directly into Pixmaps on a linux instance without X11 running, using OSMesa...<br><br>Happy coding :o) <br><br></td></tr></table><br>
<a name="1097064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I've posted in your other thread, Brucey, you are a veritable god among men, and @Banshee, drop the xvfb thing and try <a href="/posts.php?topic=95302" target="_blank">this</a> out!<br><br>Hopefully I'll get to try it tomorrow. <br><br></td></tr></table><br>
<a name="1097100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The existing OSMesa implementation looks great for 2D but if i'm working in 2D on this particular project then I may aswell use gdLibrary - although I can see ideas i've had in the past which would have benefited from that approach.<br><br>The real goal of this project is to do it in 3D.  Whilst i'm sure it is possible to hack MiniB3D around I don't have the time - and I suspect I probably don't have the skills to achieve it, I can see where it's got to go but I've little experience with the technicalities in question.<br><br>Anyway, I got to get on my boss is loitering over my shoulder at the moment, i'll catch up with you later :) <br><br></td></tr></table><br>
<a name="1097107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the example is for Max2D, but it's just using OpenGL calls... so, there's no reason it shouldn't work with MiniB3D.<br>Since I've about 4 hours experience with MiniB3D in total... I can't say for sure. But, I'll have a look at it later anyway... just for fun. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
