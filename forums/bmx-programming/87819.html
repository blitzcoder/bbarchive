<!DOCTYPE html><html lang="en" ><head ><title >BlitzMax 135 Up!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzMax 135 Up!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BlitzMax 135 Up!</a><br><br>
<a name="996218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Please visit product updates page of the account section for the latest BlitzMax update!<br><br>Major news is the addition of an official d3d9 max2d driver.<br><br>There are also some new max2d commands for setting 'virtual' resolutions.<br><br><div class="quote"> <br>* Added VirtualMouseXSpeed/VirtualMouseYSpeed (test me!)<br><br>* Default behaviour of Flip (ie: "Flip -1") has changed:<br><br>1) If graphics hertz was 0, no vsync.<br><br>2) If graphics hertz was not 0, uses soft vsync in windowed mode (ie: possible tearing), hard vsync in fullscreen.<br><br>Note: Using "Flip False" or "Flip True" still works as before, forcing vsync off/on.<br><br>* New BRL.Graphics command:<br><br>	GetGraphicsDriver:TGraphicsDriver()<br><br>* New BRL.Max2D virtual resolution commands: <br><br>	SetVirtualResolution width#,height#<br>	VirtualResolutionWidth#()<br>	VirtualResolutionHeight#()<br>	VirtualMouseX#()<br>	VirtualMouseY#()<br>	MoveVirtualMouse( x#,y# )<br><br>* Added new official D3D9Max2DDriver. This is the new default for Windows.<br><br>* D3D7Max2DDriver will no longer be supported on Vista/Windows 7 etc.<br> <br></div> <br><br></td></tr></table><br>
<a name="996220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yay! <br><br></td></tr></table><br>
<a name="996221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's great to see this officially out! The Dx9 driver works wonders even on my crap intel integrated card!! :D <br><br></td></tr></table><br>
<a name="996223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rs22</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! Thanks for your hard work! <br><br></td></tr></table><br>
<a name="996226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome!, Thank you! <br><br></td></tr></table><br>
<a name="996235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent :)<br><br>Thanks...<br><br>With<br><br><div class="quote"> <br>* D3D7Max2DDriver will no longer be supported on Vista/Windows 7 etc.<br> <br></div><br><br>I take that it will still work as normal, but you are no longer supporting it?<br><br>Whens the official D3D11Max2DDriver coming out? ;-) <br><br></td></tr></table><br>
<a name="996239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> "D3D7Max2DDriver will no longer be supported on Vista/Windows 7"<br><br>What about on Windows XP? <br><br></td></tr></table><br>
<a name="996241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_JIM</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woohoo! Awesome update. Downloading now!<br><br>EDIT: This is so awesome. My editor used to run at 790-820 FPS on my system. Now it's 1180-1190. That's a huge "free" performance gain.<br><br>Thank you Mark! <br><br></td></tr></table><br>
<a name="996246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perfect! Thanks a lot for your work! <br><br></td></tr></table><br>
<a name="996247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great update, I know I`ve already said it before but thanks Mark. The Virtual commands are a godsend. Cheers for your hard work on this.<br><br>Jason. <br><br></td></tr></table><br>
<a name="996252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Major news is the addition of an official d3d9 max2d driver.<br><br>There are also some new max2d commands for setting 'virtual' resolutions. <br></div>HAVE MY BABIES!<br><br>[edit]Actually, no don't.  But this is an awesome update and a huge digitus erectus to all those who keep harping on about "Blitzmax is never updated/sunk/dead/old". <br><br></td></tr></table><br>
<a name="996259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Mark! <br><br></td></tr></table><br>
<a name="996263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just posted a few times in the bug reports forum as there seems to be one or two teething troubles... <br><br></td></tr></table><br>
<a name="996285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GaryV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What about on Windows XP? <br></div>Can't you read?  Mark already answered that ;) <br><br></td></tr></table><br>
<a name="996286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahhh.. built-in projection matrix AND dx9 driver?  awesome :) Thanks Mark!! <br><br></td></tr></table><br>
<a name="996293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snixx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its both good and bad, unlike code that was posted by users this does not account for borders to prevent screen stretching. <br><br></td></tr></table><br>
<a name="996312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excuse my stupidity, but what are virtual resolutions and what are they used for? <br><br></td></tr></table><br>
<a name="996314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Basically its a projection matrix.<br><br>You write your game in 800x600 so everything's where it should be.  After that you can change to any physical resolution, set the virtual res to 800x600, and everything is scaled to fit the bigger/smaller resolution.<br><br>Witchcraft is involved. <br><br></td></tr></table><br>
<a name="996315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Amon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Witchcraft is involved. <br> <br></div><br><br>O.O <br><br></td></tr></table><br>
<a name="996316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice Update :)<br><br>The new DX9 Driver is sweet maybe this means we can finally get some type of shaders working :)<br><br>I agree with Snixx, the new Virtual Resolutions simplifies supporting multiple screen sizes somewhat, but it does not letterbox the screen as it should, ie you will get distorted images if you try to display an image made for 1280x800 on a screen of 800,600. <br><br></td></tr></table><br>
<a name="996320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does this mean that a games window could be resized by the player? <br><br></td></tr></table><br>
<a name="996321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> From another thread:<br><br><div class="quote"> <br>... for a quick test of the virtual graphics commands, run RockOut and play with the resolution in the Graphics call, eg. set it to your desktop size. <br> <br></div><br><br>RockOut is hard-coded with a 'game area' of 640 x 480, but using the virtual commands allows it to scale easily to any resolution. Don't forget to use the virtual mouse calls alongside the virtual graphics calls or you'll get wonky results.<br><br>(I'm hoping we'll see aspect ratio correction added too!) <br><br></td></tr></table><br>
<a name="996333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool   , thx Mr.Sibly <br><br></td></tr></table><br>
<a name="996336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you Mark. Probably the most important update in a long time, along with the previous multi-thread support. Now if we can convince you to add in a *x64 compile flag, BlitzMax will be good to go on most future OSs.<br><br>*Everyone, please don't comment on how pointless 64-bit software is. It is the future. Just accept it. <br><br></td></tr></table><br>
<a name="996356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice update. It's definitely a speed improvement here over DX7 but the OpenGL driver is still the quickest for me. For anyone that's interested I updated TimelineFX for this version. <br><br>Thanks to Doug Stastny for the excellent DX9 mod for use in the meantime! <br><br></td></tr></table><br>
<a name="996367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> who keep harping on about "Blitzmax is never updated/sunk/dead/old". <br></div><br><br>Whomever was saying that doesn't know Mark very well.  Generally, in my experience, long update blackouts are times when Mark has a big project on the go that is just not ready... I'm hoping for a native Max3D for Christmas ;)<br><br>Pete Rigz,<br>Thats my experience as well, but I think it depends on what you are doing.  Almost every test I did OpenGL came up faster by 3-4ms minimum (not that it means anything without the test code lol) <br><br></td></tr></table><br>
<a name="996377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh Oh !<br><br>Does virtual resolution easy to use ?<br>Currently I have a 2D platform game that can have multiple screen resolutions but each one reveal more or less tiles and game field.<br>Would be nice to lock it to 1024x768 and then only change that virtual value to display it at any size.<br>But what about all my SetViewport() function ?<br><br>I need to test that thing right now. <br><br></td></tr></table><br>
<a name="996378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> errr... I was almost ready to ***** my ***** until I realized this:<br><br>"(I'm hoping we'll see aspect ratio correction added too!)"<br><br>Seriously, add aspect support, black bars if needed on the top/sides,etc, and the update is easily worth another $50.00!! <br><br></td></tr></table><br>
<a name="996380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snixx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Currently its pretty much useless without the aspect ratio correction so i have no idea why it was even added in this patch.<br><br>Not a proper job as of yet. <br><br></td></tr></table><br>
<a name="996382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that true.<br>I hope to see the aspect ratio support too. <br><br></td></tr></table><br>
<a name="996383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't most video drivers have aspect ratio correction built in?  I'll grant you that most people do not turn it on.  (same thing with widescreen TV, people watching old shows in widescreen without the borders drive me nuts) <br><br></td></tr></table><br>
<a name="996387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Seriously, add aspect support, black bars if needed on the top/sides,etc, and the update is easily worth another $50.00!! <br></div>I wouldn't go that far.. but I think Mark was a bit fast on the release trigger. <br><br></td></tr></table><br>
<a name="996389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is that worse than watching new shows on old TVs with half the faces chopped off? :( <br><br></td></tr></table><br>
<a name="996390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way.<br>I just try the new projection matrix stuff.<br>It's impressive but I have a few function to rewrite particular low level OpenGl function for DrawTexturedPoly and the like.<br><br>Logically the CeGui module of brucey still display itself at normal resolution which is a good thing except if you plan to use your game on tiny device with 640x480 or less resolution (GUI is then too large for that resolution obviously).<br><br>Mark, this virtual feature come at an excellent timing really !<br>Since I simply write my tile engine to use as much as viewport available, I just needed to choose the desired resolution and keep everything else intact as well as any viewport code :D<br><br>AWESOME !<br>One thing I don't need to worry about, and today it was very welcome.<br>Thank you <br><br></td></tr></table><br>
<a name="996391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and I just try a virtual resolution of 1024x768 at real resolution of 1280x800 and it render at correct ratio !<br>Even if the rendering isn't centred and lead to black rectangle on the right and on the bottom of the screen.<br><br>Now like Dynaman is saying I don't know if it's hardware or BlitzMax feature.<br><br><b>EDIT</b><br>The low level OpenGl is not responsible for the few glitch I encountered but GrabImage() is probably more responsible.<br>Maybe the virtual code support isn't present inside that function ?<br>Can someone confirm that ? <br><br></td></tr></table><br>
<a name="996407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> With regards to cards with aspect ratio correction inbuilt, yes most if not all modern cards do this, but as far as im aware it only helps when you want to display a 4:3 ratio game on a 16:9 or 16:10 display.<br><br>So it will add black borders to the left and right of the screen so the image is square not rectangular.<br><br>What we want ideally is for max to do the opposite, so you make your game at a 16:9 ratio and if someone with a 4:3 monitor wants to play your game, they still can but with borders on the top and bottom. <br><br></td></tr></table><br>
<a name="996431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> And I don't know why but now my game has a lot more tearing than before but I never use flip -1.<br>Now I need to activate VSYNC most of the time and it's not as smooth for unknown reason...<br><br>Nobody experienced problem with <b>GrabImage()</b> while using the virtual resolution ?<br>I don't know well what to do about this, maybe a <b>virtualGrabImage()</b> would help.<br>I wish you could draw upon texture and don't need to use crappy GrabImage... <br><br></td></tr></table><br>
<a name="996447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I made this temporary VirtualGrabImage() until the official one :<br><br><pre class=code>Rem
bbdoc: Grab an image from the back buffer with Virtual support
about:
Copies pixels from the back buffer to an image frame.

Only images created with the DYNAMICIMAGE flag can be grabbed.
End Rem
Function VirtualGrabImage(image:TImage, X:Int, Y:Int, Frame:Int = 0)

	Local gcr:Int, gcg:Int, gcb:Int
	GetMaskColor(gcr, gcg, gcb)
	
	Local gcw:Float = VirtualResolutionWidth() / GraphicsWidth()
	Local gch:Float = VirtualResolutionHeight() / GraphicsHeight()
	Local pixmap:TPixmap = _max2dDriver.GrabPixmap(X / gcw, Y / gch, image.width / gcw, image.Height / gch)
	
	If image.flags&amp;MASKEDIMAGE 
		pixmap = MaskPixmap(pixmap, gcr, gcg, gcb)
	EndIf
	
	image.SetPixmap(Frame, pixmap)
	
End Function</pre><br><br>Work correctly now :) <br><br></td></tr></table><br>
<a name="996449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's worth 50.00 to me because if Mark cleans up the bugs, adds proper aspect support, etc, this easily adds a HUGE life span to the product. wow...very pumped up about bmax again. :) <br><br></td></tr></table><br>
<a name="996452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Effectively the aspect support is welcome because I try some others resolution in full screen mode and not exactly the same portion of screen was rendered.<br>Work fine when the resolution is reduced but not when increased (and squished on some weird resolutions obviously).<br>And the black area to the right and bottom part of the screen is rather annoying.<br><br>I really hope to see the final version of this feature in a near future ! <br><br></td></tr></table><br>
<a name="996474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zambani</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have problems using loadsound in a seperate thread  with this new build?<br><br>My code is now crashing when I call loadsound more than once. <br><br></td></tr></table><br>
<a name="996484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel like I'm missing out on something, because I don't see what's so useful it would be worth 50.00 somethings? Virtual resolutions seem nice and handy but I don't get it? :S <br><br></td></tr></table><br>
<a name="996507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> GarageGames' Torque 2D costs $250 and does not run on Linux (bummer  D:  ).  BlitzMax costs $80 and runs on all 3 platforms.  This is an incredible value in my eyes, and I hope BRL charges something for every 0.10 they accomplish but it's really up to them and their business model.<br><br>Even GLBasic ($80) has just a Windows-only development environment (it compiles code for many platforms), but it's Windows-only development environment, and what I believe to be an overreaching philosophy (the <i>number</i> of platforms (6+) they develop for), were the reasons I chose BlitzMax. <br><br></td></tr></table><br>
<a name="996508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I feel like I'm missing out on something, because I don't see what's so useful it would be worth 50.00 somethings? Virtual resolutions seem nice and handy but I don't get it? :S  <br></div><br><br>Don't forget the addition of DirectX 9 -- that by itself is a biggie, too. <br><br></td></tr></table><br>
<a name="996566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> And what about <b>GetViewport()</b> and <b>SetViewport()</b> ?<br>I suppose you also need to tweak those 2 functions in order to support Virtual resolutions.<br>I wonder how many function I need to change...<br><br>Plus the function names doesn't feel like the rest of Max2d (<b>virtualResolutionWidth</b>() while <b>graphicsWidth</b>() or <b>MoveVirtualMouse</b>() and <b>VirtualMouseX</b>() while <b>moveMouse</b>() and <b>MouseX</b>()).<br><br><br>A temporary version of <b>SetVirtualViewport</b>() and <b>GetVirtualViewport</b>() until the official one :)<br><br><pre class=code>Rem
bbdoc: Set Virtual drawing viewport
about:
The current ViewPort defines an area within the back buffer that all drawing is clipped to. Any
regions of a DrawCommand that fall outside the current Virtual ViewPort are not drawn.
End Rem
Function SetVirtualViewport(X:Int, Y:Int, Width:Int, Height:Int)
	
	Local gcw:Float = VirtualResolutionWidth() / GraphicsWidth()
	Local gch:Float = VirtualResolutionHeight() / GraphicsHeight()
	
	X:/gcw
	Y:/gch
	Width:/gcw
	Height:/gch
	
	SetViewport(X, Y, Width, Height)
	
End Function

Rem
bbdoc: Get Virtual dimensions of current Viewport.
returns: The horizontal, vertical, width and height values of the current Virtual Viewport in the variables supplied.
End Rem
Function GetVirtualViewport(X:Int Var, Y:Int Var, Width:Int Var, Height:Int Var)

	Local gcw:Float = VirtualResolutionWidth() / GraphicsWidth()
	Local gch:Float = VirtualResolutionHeight() / GraphicsHeight()

	GetViewport(X, Y, Width, Height)

	X:*gcw
	Y:*gch
	Width:*gcw
	Height:*gch
	
End Function</pre><br><br>Also, I choose to draw border to every viewport camera. I now need to tweak them now because 1 pixel shift incorrectly here and there :s <br><br></td></tr></table><br>
<a name="996582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also Grabimage create some kind of dithering when used in different virtual resolution...<br>That mean even if you are using full alpha pixel in you texture with a maskbit background you see ugly anarchic border around your grabed image :<br><img src="http://img26.imageshack.us/img26/7533/metagolf003.png"><br>Except with a RTT I don't know how I could resolve this problem :s<br>I also open a new topic for that specific problem but with positioning/sizing : <a href="http://blitzmax.com/Community/posts.php?topic=87849" target="_blank">http://blitzmax.com/Community/posts.php?topic=87849</a> <br><br></td></tr></table><br>
<a name="996673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well for that problem I simply <br>1) Backup and set the virtual Resolution equal to the current real resolution<br>2) draw my image and grabimage it<br>3) restore the previous virtual resolution<br><br>It's a bit ugly but working correctly now :)<br>HTH<br><br>But still remain my problem with positioning/sizing : <a href="http://blitzmax.com/Community/posts.php?topic=87849" target="_blank">http://blitzmax.com/Community/posts.php?topic=87849</a>  if anyone can help : it's welcome :D <br><br></td></tr></table><br>
<a name="996724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mark.  Sounds like a cool update.<br><br>For those who are interested: The reason DX7 was slow was there was a fix in there (added about 3 years ago) to stop render lagging which reduced the framerate a lot (but made it stable).  I presume that DX9 doesn't need the fix, which would mean a faster frame rate, but has anyone tested if the lag exists in DX9 (hopefully not)?<br><br>I'm still using the DX7 driver, and it seems fine in Vista and Windows 7.  I'm presume that it's no longer being supported because it's old, but at least it seems to work OK.  I guess I can make my game test the OS and switch to DX9 for Vista and Win7 and keep DX7 for older OSes.  I'll do that when everyone is 100% happy with DX9.<br><br>Regarding the virtual resolution, has anyone tried it with tiles yet to see if there are edge artefacts between the tiles.  Unless some magic has happened, I imagine this is still the case.  The thing with virtual res is that for some types of games it can really reduce the quality, whereas it works very well for other sorts. <br><br></td></tr></table><br>
<a name="996728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm still using the DX7 driver, and it seems fine in Vista and Windows 7 <br></div><br><br>Its not that fine Jake, Gfk found a nasty bug in it awhile ago [Edit: Ah youve already seen it ;-)]<br><br><div class="quote"> Regarding the virtual resolution, has anyone tried it with tiles  <br></div><br><br>Isnt that what Armitage is doing? <a href="http://blitzmax.com/Community/posts.php?topic=87849" target="_blank">http://blitzmax.com/Community/posts.php?topic=87849</a> <br><br></td></tr></table><br>
<a name="996742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Therevills said my game is made of tiles and while I don't have any artefacts between them I do have problems with SetViewPort positioning with floating values.<br><br>My tiles are 32x32 (I see no artefacts either with 24x24) and appear to be ok even while zooming (because I respect the tile format) anywhere I place the viewport 'camera'.<br><br>But objects positioned with floating values as well as the viewport itself shift about 1 pixel because of the reduction factor.<br><br>It's like the problem of drawing a 1 pixel line right in the middle of a pixel coordinate which is impossible.<br>I thought that the accelerated smoothing reduction would take care of this for me but it does not work this way I presume (like scaling down images with different reduction mode in graphic tools).<br><br>I think that's really the last problem that I have with virtual resolution.<br>I do not know if the aspect ratio would help in this case...<br><br>Maybe I need to place my camera viewport to precise integer pixel coordinates. <br><br></td></tr></table><br>
<a name="997006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does using the DX9 driver mean that the viewport commands now use scissor tests rather than clip panes?<br><br>This would be good for avoiding that irritating issue with some cards not supporting the required 4 clip panes, leaving viewports not functioning correctly. <br><br></td></tr></table><br>
<a name="997008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >theHand</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would always overlapping images by 1 or 2 pixels be a suitable workaround, Armitage?  Not sure if that is what you are talking about, but? <br><br></td></tr></table><br>
<a name="997118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunatly no.<br>It's simply a rounding errors with the viewport positioning and size.<br>I need to find the nearest round coordinances for the desired resolution in order to disable that bug. <br><br></td></tr></table><br>
<a name="997136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yah changing the projection matrix isn't going to fix the tile issues. <br><br></td></tr></table><br>
<a name="997236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobody else is trying to use the Virtual Resolution ?<br>I can't position and render any viewport correctly with this feature : <a href="http://blitzmax.com/Community/posts.php?topic=87849" target="_blank">http://blitzmax.com/Community/posts.php?topic=87849</a><br><br>I wrote a small program to demonstrate the problem:<br><pre class=code>SetGraphicsDriver GLMax2DDriver()

Graphics(640, 480)
SetVirtualResolution(1024.0, 768.0)

Local CW:Float = 250.0
Local CH:Float = 141.0

SetBlend(LIGHTBLEND)
SetAlpha(0.75)

While Not KeyHit(KEY_ESCAPE)
	
	' Press SPACE to cycle various virtual resolution
	If KeyHit(KEY_SPACE)
		Select VirtualResolutionWidth()
			Case 1280.0
				SetVirtualResolution(640.0, 480.0)
			Case 1024.0
				SetVirtualResolution(1280.0, 1024.0)
			Case 640.0
				SetVirtualResolution(800.0, 600.0)
			Case 800.0
				SetVirtualResolution(1024.0, 768.0)
		End Select
	End If
	
	If KeyHit(KEY_ENTER)
		If CW = 250.0
			CW = 320.0
			CH = 240.0
		Else
			CW = 250.0
			CH = 141.0
		End If
	EndIf
	
	Cls()

	SetColor(128, 128, 255)
	drawCamera(VirtualMouseX(), VirtualMouseY(), CW, CH)
	
	'Draw the viewport in the middle of the screen
	SetColor(128, 255, 128)
	drawCamera((VirtualResolutionWidth() - CW) / 2.0, (VirtualResolutionHeight() - CH) / 2.0, CW, CH)
	
	'Draw the viewport at 0,0
	SetColor(255, 128, 128)
	drawCamera(0.0, 0.0, CW, CH)

	SetColor(255, 255, 255)
	drawCamera(0.0, 0.0, VirtualResolutionWidth(), VirtualResolutionHeight())

	SetScale(VirtualResolutionWidth() / GraphicsWidth(), VirtualResolutionHeight() / GraphicsHeight ())
	DrawText("Press SPACE to cycle virtual resolution and ENTER to change camera size", 10.0, 10.0)
	DrawText("Virtual Resolution:" + Int(VirtualResolutionWidth()) + "x" + Int(VirtualResolutionHeight()), 10.0, 32.0)
	SetScale(1.0, 1.0)
	
	Flip()
	
Wend


Rem
bbdoc: Simply draw a viewport Camera with border line
End Rem
Function drawCamera(camX:Float, camY:Float, camWidth:Float, camHeight:Float)

	SetVirtualViewport(camX, camY, camWidth, camHeight)
	
	' Reset View Port Origin for Layer Rendering
	SetOrigin (camX, camY)

	DrawLine(0.0, 0.0, camWidth - 1.0, 0.0)
	DrawLine(0.0, 0.0, 0.0, camHeight - 1.0)
	DrawLine(0.0, camHeight - 1.0, camWidth - 1.0, camHeight - 1.0)
	DrawLine(camWidth - 1.0, 0.0, camWidth - 1.0, camHeight - 1.0)

End Function


Rem
bbdoc: Set Virtual drawing viewport
about:
The current ViewPort defines an area within the back buffer that all drawing is clipped to. Any
regions of a DrawCommand that fall outside the current Virtual ViewPort are not drawn.
End Rem
Function SetVirtualViewport(X:Int, Y:Int, Width:Int, Height:Int)
	
	Local gcw:Float = VirtualResolutionWidth() / GraphicsWidth()
	Local gch:Float = VirtualResolutionHeight() / GraphicsHeight()
	
	X:/gcw
	Y:/gch
	Width:/gcw
	Height:/gch
	
	SetViewport(X, Y, Width, Height)
	
End Function</pre><br><br>On some resolution the last vertical and horizontal lines are unavailable (move Mouse Camera on screen borders to see that).<br><br>Is this is related to the problem of ratio?<br>I also discover that <b>virtualMouseX()</b> and <b>virtualMouseY()</b> aren't precise enough in that case. <br><br></td></tr></table><br>
<a name="997250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> The projection matrix is scaling your rendered image down, you _will_ lose some information, especially with thin 1-pixel lines. <br><br></td></tr></table><br>
<a name="997252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> So there is nothing we can do about that ??<br>I will have to determine every position and every size where things actually correctly rendering for every resolution ?<br><br>There must be a way to position each viewport and still get maximum visual informations.<br>That would be useless for pixel perfect game then :( <br><br></td></tr></table><br>
<a name="997259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> With hardware accelerated subpixel accuracy your pixels will never be perfect again so yes you don't need the smiley, floating point coordinates or these new commands if you want to code in a pixel perfect manner.<br><br>You could fix some of your code replacing 1.0 with virtual version but there is still rounding on all your viewports as they are still integer in nature and don't fit the magnification model. <br><br>Current BlitzMax viewport implementation is restrained by behavior of old geforce cards as a floating point viewport based on clipping plane hardware would solve the other issue your code has due to rounding at integer viewport boundaries. <br><br></td></tr></table><br>
<a name="997273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I try some of your ideas Skidracer but none of them work (or I probably don't correctly use them).<br><br>I shift size and position of viewport for common resolution and this seems to work except with resolution higher to the virtual one (eg. gap between objects are visible at 1280x1024 even while setting the same virtual resolution of 1280x1024 which is bad).<br><br>I'm loosing too much time on this and really don't know if I will use virtual resolution up to 1024x768 OR a unique screen resolution to skip all those problems.<br><br>After all many great 2D games don't allow to change resolution and it's rare for common user to do so. <br><br></td></tr></table><br>
<a name="997276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reality is LCD monitor has a native resolution, analog CRT does not.<br><br>This means best practise for LCD is always use desktop resolution or even division of it.<br><br>Here is your code with extra rounding for the viewports, it may well be usable, not sure.<br><br>note the use of onex and oney to denote size of pixel and extra pixel in viewports to accommodate integer rounding of parameters<br><br>the tweak to setorigin is I think needed due to aspect ratio difference and will break when aspect is dominant in x axis, it may be due to rounding on first arguments of setviewport...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

SetGraphicsDriver GLMax2DDriver()

Graphics(640, 480)
SetVirtualResolution(1024.0, 768.0)

Local CW:Float = 250.0
Local CH:Float = 141.0

SetBlend(LIGHTBLEND)
SetAlpha(0.75)

While Not KeyHit(KEY_ESCAPE)
	
	' Press SPACE to cycle various virtual resolution
	If KeyHit(KEY_SPACE)
		Select VirtualResolutionWidth()
			Case 1280.0
				SetVirtualResolution(640.0, 480.0)
			Case 1024.0
				SetVirtualResolution(1280.0, 1024.0)
			Case 640.0
				SetVirtualResolution(800.0, 600.0)
			Case 800.0
				SetVirtualResolution(1024.0, 768.0)
		End Select
	End If
	
	If KeyHit(KEY_ENTER)
		If CW = 250.0
			CW = 320.0
			CH = 240.0
		Else
			CW = 250.0
			CH = 141.0
		End If
	EndIf
	
	Cls()

	SetColor(128, 128, 255)
	drawCamera(VirtualMouseX(), VirtualMouseY(), CW, CH)
	
	'Draw the viewport in the middle of the screen
	SetColor(128, 255, 128)
	drawCamera((VirtualResolutionWidth() - CW) / 2.0, (VirtualResolutionHeight() - CH) / 2.0, CW, CH)
	
	'Draw the viewport at 0,0
	SetColor(255, 128, 128)
	drawCamera(0.0, 0.0, CW, CH)

	SetColor(255, 255, 255)
	drawCamera(0.0, 0.0, VirtualResolutionWidth(), VirtualResolutionHeight())

	SetScale(VirtualResolutionWidth() / GraphicsWidth(), VirtualResolutionHeight() / GraphicsHeight ())
	DrawText("Press SPACE to cycle virtual resolution and ENTER to change camera size", 10.0, 10.0)
	DrawText("Virtual Resolution:" + Int(VirtualResolutionWidth()) + "x" + Int(VirtualResolutionHeight()), 10.0, 32.0)
	SetScale(1.0, 1.0)
	
	Flip()
	
Wend


Rem
bbdoc: Simply draw a viewport Camera with border line
End Rem
Function drawCamera(camX:Float, camY:Float, camWidth:Float, camHeight:Float)

	SetVirtualViewport(camX, camY, camWidth, camHeight)
	
	Local onex:Float=GraphicsWidth() / VirtualResolutionWidth()
	Local oney:Float=GraphicsHeight() / VirtualResolutionHeight()

	DrawLine(0.0, 0.0, camWidth - onex, 0.0)
	DrawLine(0.0, 0.0, 0.0, camHeight - oney)
	
	DrawLine(0.0, camHeight - oney, camWidth - onex, camHeight - oney)
	DrawLine(camWidth - onex, 0.0, camWidth - onex, camHeight - oney)

End Function


Rem
bbdoc: Set Virtual drawing viewport
about:
The current ViewPort defines an area within the back buffer that all drawing is clipped to. Any
regions of a DrawCommand that fall outside the current Virtual ViewPort are not drawn.
End Rem
Function SetVirtualViewport(X:Int, Y:Int, Width:Int, Height:Int)

	Local gcw:Float = GraphicsWidth()/VirtualResolutionWidth()
	Local gch:Float = GraphicsHeight()/VirtualResolutionHeight()
	
	Local x2:Int
	Local y2:Int

	SetOrigin(x,y-.5)

	x2=x+width
	y2=y+height
	
	X:*gcw
	Y:*gch
	x2:*gcw
	y2:*gch

	SetViewport(X, Y, x2+1-x,y2+1-y)		
	
End Function

</textarea> <br><br></td></tr></table><br>
<a name="997278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Armitage 1982</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks<br><br>This is roughly what I try except the huge tweak around the SetVirtualViewport().<br>The code above seems to work but not with all resolutions for me.<br><br>As I am not very comfortable with this exercise I will stick to a unique resolution until further update. <br><br></td></tr></table><br>
<a name="997296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think this code rounds correctly, the setorigin now uses the rounded value to position top left of viewport which will keep you near pixel perfect. It would possibly be tidier if not better to do everything in centered coordinates meaning viewports would end up with even width and height physical pixels no matter what.<br><pre class=code>
Function SetVirtualViewport(X:Int, Y:Int, W:Int, H:Int)
	Local xx:Float = GraphicsWidth()/VirtualResolutionWidth()
	Local yy:Float = GraphicsHeight()/VirtualResolutionHeight()
	x=Floor(xx*x)
	y=Floor(yy*y)
	w=Floor(xx*w)
	h=Floor(yy*h)
	SetOrigin x/xx,y/yy	
	SetViewport x,y,w+2,h+2
End Function
</pre> <br><br></td></tr></table><br>
<a name="997328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imphenzia</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great stuff :)<br><br>I'm doing some testing with virtual screenresolution and it also, not surprisingly, resizes DrawText. I find text downscaling much more noticeable than sprites. I was hoping to use 1600x1200 as a virtual screen resolution to make it look nice in higher resolutions. Any thoughts on this?<br><br>Update: Ignore this post, I am a bit of an idiot =) You can set virtual resolution at any time of course, prior to drawing text for example then switch back. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
