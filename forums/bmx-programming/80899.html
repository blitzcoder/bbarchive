<!DOCTYPE html><html lang="en" ><head ><title >Pixmap saturating/hue</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pixmap saturating/hue</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Pixmap saturating/hue</a><br><br>
<a name="910754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to recolor or saturate a specific color/color-range (and possibly the whole pixmap) in a pixmap, without having to parse all the pixels?<br>Can we do it using standard max2d calls (or more specifically, OpenGL)?<br><br>I can think of one way to do it, make a pixmap with the areas you want to saturate/hue in the mask color and draw a pre-colorized mask image under the pixmap, so that the color of the mask image shows through to the other side. <br><br></td></tr></table><br>
<a name="910756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, I cannot find a code example using the accumulation buffer, anyone care to share? <br><br></td></tr></table><br>
<a name="910760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Accumulation buffer should be easy to use, you just ask for it when you call GLGraphics or set it in the driver default, and then call glAccum() to accumulate and some other command to copy it back to the backbuffer. There might be some other command to set up the scale factor and operation.<br><br>The saturation thing, you can't really do saturation or hue changes using RGB data, you have to convert the color space. You can use SetColor to add a tint, and use a blend mode, but real saturation/hue is going to need you to either modify the colorspace back and forth in the pixmap or write a shader. <br><br></td></tr></table><br>
<a name="910764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> and some other command to copy it back to the backbuffer <br></div>Sounds like a useful command.<br><br><div class="quote"> The saturation thing, you can't really do saturation or hue changes using RGB data, you have to convert the color space. <br></div>Can we draw a texture and tell gl to replace a certain color? Is that something a shader could do?<br><br>Shaders are a newer thing right? Will they work in the current max wrapper for OpenGL? (v1.1?)<br>Do shaders require a newer graphics card?<br><br><br>P.S. To anyone about to post "go Google it," I have been, and even if I can find something it's specifically for 3D or has a bunch of other stuff going on, making it very hard to find what I'm looking for (referring to code.) I find it better to ask here.. just hardly any responses :( <br><br></td></tr></table><br>
<a name="910977"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes shaders can do more or less anything. You need GL extensions to use them, and it must be supported by the gfx card.<br><br>It isn't easy to replace a color without something like that. <br><br></td></tr></table><br>
<a name="911003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about grayscaling a whole scene (whole window)? <br><br>I already know one answer will be "shaders," but is it something that could be quickly done with the accumulation buffer? <br><br></td></tr></table><br>
<a name="911007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recommend looking at and reading at least some of the OpenGL Red Book, which is available for free online as html pages in various places. It will help you to understand how OpenGL is working and what it is able to do, or at least the basics of it.<br><br>The accumulation buffer is only really intended for one purpose - to `accumulate` the contents of the backbuffer over several frames. All you can really do with it is either copy the backbuffer to the accumulation buffer, or add the backbuffer to the accumulation buffer with a scale factor. So if you wanted to add up the values of 10 backbuffers you'd add their contents to the accumulation buffer by multiplying their values by 0.1 - then once it's all added together you can copy it back to the backbuffer and you'll see motion blur, for example. You can do some other things like depth of field, jittered antialiasing etc, but you can't really do any of the kind of processing operations that you're talking about. All you can do is add values by the same amount across the board.<br><br>There are a few ways to do grayscale - you can get your data into a pixmap and convert the R G and B components to a percentage of 0.333 and then add them together, or add different weighting to each component. You can also use glReadPixels to read the backbuffer into a pixmap - you can read just one of the components if you like, such as the red channel, and then pretend that it's grayscale. Also you can try working with GL_INTENSITY format pixmaps. And maybe use a shader. ;-)<br><br>Similarly if you wanna change individual pixel values on a pixel-by-pixel basis you really have to use something that does per-pixel changes, which would be the alpha channel, stencils, blending, texturing, or shaders. Or work with pixmaps and write a software-based image processing function. <br><br></td></tr></table><br>
<a name="911068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What about grayscaling a whole scene (whole window)?  <br></div><br><br>Here's one I did, but it does parse all the pixels:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2089" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2089</a><br><br>At some point in the past Indiepath posted some code that was supposed to do this in one go (OpenGL?) but while it worked OK on some cards, it never did on others. (His sample code turned the images into shades of green instead of B/W on my video card, among others) <br><br></td></tr></table><br>
<a name="911163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> GL does have an image processing subset which you can activate through higher versions using extensions, I think it can do things like grayscale. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
