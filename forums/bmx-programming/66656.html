<!DOCTYPE html><html lang="en" ><head ><title >Freeing sounds?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Freeing sounds?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Freeing sounds?</a><br><br>
<a name="744543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Am I right in thinking 'sound = Null' will 'free' a sound?<br><br>I'm still having all sorts of bother with Blitzmax's sound system.  Sound stops working after switching from front-end to game and back *exactly* ten times.  I've pretty much ruled out that its nothing to do with the way I'm handling sound channels, so I'm starting to look for other possible problems.<br><br>The only thing thats apparent is that there's something linear that I'm doing wrong.  I just can't work out what it is. <br><br></td></tr></table><br>
<a name="744555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, this is most peculiar.<br><br>I've fixed the problem, but it was nothing to do with sounds or channels.<br><br>I have a custom type with a timer in it.  There is only one instance of this type at any given time.  Its possibly worth notice that, if any of you have a timer within a type, then simply calling "myType = Null" may well cause GCCollect to get rid of the instance, but it does NOT get rid of the timer within (even though you no longer have any access to it).<br><br>Why this was preventing sounds from working I'm not entirely sure, but its fixed now. <br><br></td></tr></table><br>
<a name="744558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I must admit I dislike the inconsistencies of garbage collection in BMax. Some things have to be explicitly destroyed and some just have to go out of context to be collected automatically. I know I'm going to face this when I'm using external libraries, but it really would be nice if the standard modules - as far as possible - stuck to one technique or the other. <br><br></td></tr></table><br>
<a name="744601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One big problem is that the special method that's suppsoed to be called when something is freed is not called when it is freed, and may never be called.  This kind of makes it impossible to say, remove sprites from the rendering pipeline when they are no longer needed.  Of course, it also is impossible to do that because there are no weak references which don't contribute to the reference count, meaning because the sprites are in a rendering list in the first place they never would run out of pointers to them to begin with.<br><br>Oh and the whole freeing stuff when it goes otu of reference?  I've been using BlitzMax for a year now and I'd say I'm fairly expert at it at this point, and I still find it really hard to keep track of what I still have pointers to.  As elegant as this method is, the inelegant method is by far less confusing, and having the two mixed has been a recipe for disaster in my code on more than one occasion.<br><br>I say explicitly requiring things to be freed is the way to go.  Then you don't even need weak references to just confuse matters more. <br><br></td></tr></table><br>
<a name="744668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah all my types have a Kill() funciton which I always call as I'm used to manually cleaning up.  Then if Imiss something I hope the GC gets it, but if I'm in any doubt, I manually clean... <br><br></td></tr></table><br>
<a name="744685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think doing it manually is the best way, given the aggravation GCCollect caused me yesterday.  I wasted five hours chasing an audio bug which, in the end, wasn't even down to the way I was implementing sound.<br><br>I'm still not sure why stray timers would stop sound from working.  But honestly I don't really care why.  I know now. <br><br></td></tr></table><br>
<a name="744872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jake L.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing it like Grey Alie. Everything that smells like an object will be manually destroyed by xyz=null (and if possible a xyz.Clear() before that). I also clear arrays with pointers with ar=ar[..0]. So far the only issues I got were caused by homemade erros and could be easily fixed once known ;)<br><br>The only thing I leave unattended are local objects inside methods/functions. <br><br></td></tr></table><br>
<a name="744901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that's true, I leave locals alone, it's only my types and their fields that I free up. <br><br></td></tr></table><br>
<a name="745085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just found out that audio channels fall into the same boat as gadgets and timers, as in due to the nature of "ownership" the objects will never be collected.<br><br>From first glance there doesn't actually seem to be anyway of freeing an unstarted channel but I may have missed something. It would certainly be nice if all three shared some sort of free / stop methodology by extending something like TResource so it was more evident that the system underneath has it's own reference to the object, or at least should have...<br><br>My other problem is whenever I see a reference to sound I think AudioSample not AudioChannel.... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
