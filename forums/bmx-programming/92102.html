<!DOCTYPE html><html lang="en" ><head ><title >Array Question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Array Question</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Array Question</a><br><br>
<a name="1048391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey!<br><br>I'm still fairly new to arrays(I only started using them in the last few months, lol)<br>and have a quick question about them.<br><br>I'm using one in my current game, to hold the level images, and set it up like this.<br><br>Global Array:Timage[10] 'Allots room for 10 levels.<br>Array[0] = loadimage("Graphics/Level1.png")<br>Array[1] = loadimage("Graphics/Level2.png")<br><br>And so on, assigning each segment of the array to a level image.<br><br>However there seems to be a slight problem with this.<br><br>During the game, I draw the level like so.<br><br>Drawimage Array[Level],x,y<br>so that the correct level image is drawn, depending on what Level I'm at.<br>However everytime I increase or decrease the 'Level' variable, there is a brief<br>pause while the game loads the level image. Which is not good, since I need<br>them to load seamlessly. If I don't use an array, and simply use Global variables<br>for the level images instead, it loads how I want it to. Also this only happens<br>the first time I access that segment of the array. If I try to change the 'Level'<br>variable back to a value that it had previously been, it loads seamlessly with<br>no slow down.<br><br>SO, here is my question.<br><br>Why do arrays not 'pre-load'(If that's the correct term) images like Global<br>variables do?<br><br>I've managed to fix this problem by simply putting Drawimage after I assign<br>an image to each array segment, but would like to know why I need to.<br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="1048395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had that problem with my a shmup I am working on. I set the loadImage flags to MASKEDIMAGE|DYNAMICIMAGE and it stopped doing it. try it and see if that helps. I think it's how the graphics are manipulated while accessing the video card but I could be wrong. <br><br></td></tr></table><br>
<a name="1048404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jesse is correct, the images are loaded into RAM when you declare them, but the lag you are seeing is the transfer from RAM to the graphics card VRAM.<br><br>Try this:<br><br><pre class=code>
' -----------------------------------------------------------------------------
' createFrames: Caches an Image or Anim Image in VRAM
' by Ian Duff
' -----------------------------------------------------------------------------
Function createFrames(image:TImage) 
	'Use this to cache an image or animimage in VRAM for quicker drawing later.
	For Local c%=0 Until image.frames.length
		image.Frame(c)
	Next
End Function
</pre><br><br><a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=82765#933654" target="_blank">http://www.blitzbasic.co.nz/Community/posts.php?topic=82765#933654</a><br><br>Also you can do this to load your images into your array faster (as in faster coding it):<br><br><pre class=code>

Const maxLevels:Int = 10
Global Array:Timage[maxLevels] 'Allots room for 10 levels.

For Local i:Int = 0 to maxLevels-1
   Array[i] = loadimage("Graphics/Level"+(i+1)+".png")
Next

</pre> <br><br></td></tr></table><br>
<a name="1048469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should have a TLevel object, which contains a background image (and other things you require) and create an array of them instead. You can have a Load method that loads the images etc required by that level, and a Play method which contains a game loop. <br><br></td></tr></table><br>
<a name="1048498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys!<br><br>That should help out tremendously ;)<br><br>@Czar Flavius<br>A very good idea! Never would have thought of that one, lol.<br><br>I'll see how I like that, compared to how I'm doing it now. <br><br></td></tr></table><br>
<a name="1048901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing to keep in mind, depending on how many graphics you actually have, loading them all at once at the beginning could exceed the amount of video memory on low end machines.<br><br>Keeping only the current level in memory would lower your system requirements, which could increase the number of machines your game would work on. Not necessarily an issue for small(ish) games, but as the size of a game increases it can easily catch up with you. <br><br></td></tr></table><br>
<a name="1048912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WERDNA</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the heads up xlsior!<br><br>I already planned on doing just that ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
