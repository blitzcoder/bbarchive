<!DOCTYPE html><html lang="en" ><head ><title >Changing windows cursor</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Changing windows cursor</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Changing windows cursor</a><br><br>
<a name="769788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know how to change the windows cursor to a custom cursor using an .ico or other method?  Basically have it change to your custom 32x32 icon when it's inside the BMax window. <br><br></td></tr></table><br>
<a name="769893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hidemouse and then load an image drawn at mousex(), mousey()? <br><br></td></tr></table><br>
<a name="769907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> *double post* <br><br></td></tr></table><br>
<a name="769909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't mention this enough - never ever start changing Windows settings programatically.  The end-user is not going to thank you for it.<br><br>Do what TonyG says. <br><br></td></tr></table><br>
<a name="769912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol, so it seems, GFK- you said it twice. :P <br><br></td></tr></table><br>
<a name="769915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dunno how that happened.  I only edited it. :/ <br><br></td></tr></table><br>
<a name="769975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hidemouse and then load an image drawn at mousex(), mousey()?  <br></div><br>Erm, I'm not a newb...please <b>read</b> the post!  I was looking for a specific method.<br><br>The code below works but sometimes you see the default cursor pop in every once in awhile.  Would be cool if that could be fixed.<br><br><pre class=code>
Graphics 800,600

?win32
	Extern "win32"
		Function LoadCursorFromFileA% (lpFileName$z)
	End Extern
?
cm=LoadCursorFromFileA( "3dgarro.cur" )

While KeyDown(KEY_ESCAPE)=False And AppTerminate()=False
Cls
SetCursor( cm )

Flip
Wend
End
</pre> <br><br></td></tr></table><br>
<a name="769980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Erm, I'm not a newb...please read the post! I was looking for a specific method. <br></div><br>... yes, and I was suggesting a possible method which ended with a question mark to suggest, politely, if it might help you. <br>Anyway good luck ingrate. <br><br></td></tr></table><br>
<a name="769986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your post stating such an obvious well-known method followed by a question mark was meant more as ridicule towards me personally than anything.  Sorry but that's not polite either.<br><br>I even posted about possibly loading an .ico which clearly demonstrates I wasn't looking for the normal approach.  Like I said, please read the whole post instead of responding with such utter juvenile garbage.<br><br>Ingrate eh?  That just corroborates your first response as derogatory. <br><br></td></tr></table><br>
<a name="769988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Ingrate eh? That just corroborates your first response as derogatory.  <br></div><br>No, it now just makes you a paranoid ingrate.<br>You've taken a post offering a reasonable suggestion and read into it a personal attack for no apparent reason. <br>Anyway, I still think the suggestion is a sound response to your initial post. <br><br></td></tr></table><br>
<a name="769992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> No, it now just makes you a paranoid ingrate. <br></div><br>No, it makes you Captain Obvious lol.<br><br><div class="quote"> Anyway, I still think the suggestion is a sound response to your initial post. <br> <br></div><br>It is a sound but obvious response.  That's how 99% of everyone here does it.  I was exploring other methods.  You clearly don't know of any other methods.  Fair enough.<br><br>And yes, based on your response to my question I would be considered an ingrate.  Which is an ungrateful person.  Guilty as charged. :p <br><br></td></tr></table><br>
<a name="769996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... I might do but how do I know they're not obvious or ones you have already thought of?<br>I daren't suggest anything else although I might check how MaxGui SetPointer command does it.<br>Wow. It works<br><pre class=code>
Graphics 800 , 600
while Not KeyHit(KEY_ESCAPE)
	SetPointer (4)
Wend
</pre> <br><br></td></tr></table><br>
<a name="770001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> And to load a custom .cur using maxgui?<br><br>The method I have above works but there's major tearing.  You can also load animated cursors .ani but and then animate normally until you move the mouse.  Then the animation starts over each pixel the mouse moves which makes the animation useless. <br><br></td></tr></table><br>
<a name="770004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, by adjusting the bbsetpointer source it could probably work... good luck.<br>&lt;edit&gt; seems somebody else has been <a href="/posts.php?topic=42755#479119" target="_blank"> there </a> <br><br></td></tr></table><br>
<a name="770006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you insert LoadCursorFromFileA% (lpFileName$z ) into your user32.bmx file in your pub mod folder it will allow you to load the custom cursor.  Or you could use the extern method above.  I wonder if this would work:<br><br><pre class=code>
cm = LoadCursorFromFileA("mycursor.cur")
SetPointer( cm )
</pre><br><br>EDIT: I actually found that C code yesterday but was a bit intimidated by it.  I'll have another go at it I guess. <br><br></td></tr></table><br>
<a name="770018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get an error that the c code won't compile using <pre class=code>Import "cursor.c"</pre>.<br><b>EDIT</b>: That .c code does the exact same thing as I'm doing above except in C.  You still have to set the cursor each cycle, still get the tearing, flashing etc. :( <br><br></td></tr></table><br>
<a name="770062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a hack for 'brl.dxGraphics/d3d7Graphics.bmx' that works...<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function Create:TD3D7Graphics( width,height,depth,hertz,flags )
		Global _reg
		If Not _reg
			Local wc:WNDCLASS=New WNDCLASS
			Local cursor = LoadCursorA(GetModuleHandleA(Null), Byte Ptr(102)) ' Load cursor (if included as resource '102')
			If cursor = Null Then cursor = LoadCursorA(Null, Byte Ptr IDC_ARROW) ' No cursor included so use system default
			wc.hInstance=GetModuleHandleA(0)
			wc.lpfnWndProc=WndProc
			wc.hCursor = cursor
			wc.hIcon = LoadIconA(GetModuleHandleA(Null), Byte Ptr(101)) ' Add icon (if included as resource '101')
			wc.lpszClassName=_wndClass
			RegisterClassA( wc )
			_reg=True
		EndIf
	
		Local hinst=GetModuleHandleA(0)
		Local title:Byte Ptr=AppTitle.ToCString()
	
		Local hwnd
	
		If depth
			hwnd=CreateWindowExA( 0,_wndClass,title,WS_VISIBLE|WS_POPUP,0,0,width,height,0,0,hinst,Null )
		Else
			Local style=WS_VISIBLE|WS_CAPTION|WS_SYSMENU
			
			Local rect[4], wx, wy			' Centre window
			GetWindowRect(GetDesktopWindow(), rect)	'      ~"~
			wx = (rect[2] - width) / 2		'      ~"~
			wy = (rect[3] - height) / 2		'      ~"~			
			rect = [wx, wy, wx + width, wy + height]'      ~"~		
			
			'Local rect[]=[32,32,width+32,height+32]
			AdjustWindowRect rect,style,0
			hwnd=CreateWindowExA( 0,_wndClass,title,style,rect[0],rect[1],rect[2]-rect[0],rect[3]-rect[1],0,0,hinst,Null )
		EndIf
	
		MemFree title
	
		If Not hwnd Return
		
		Local t:TD3D7Graphics=New TD3D7Graphics
		t._hwnd=hwnd
		t._width=width
		t._height=height
		t._depth=depth
		t._hertz=hertz
		t._flags=flags
		Return t
	End Function</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
