<!DOCTYPE html><html lang="en" ><head ><title >Phidget module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Phidget module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Phidget module</a><br><br>
<a name="953942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>In between two projects I managed to create a first version of a Phidget module (see <a href="http://www.phidgets.com" target="_blank">www.phidgets.com</a>).<br><br><b>Note:</b> This module is developed and tested on a Windows XP computer. I don't know where Phidget installs the lib file on MacOS and Linux. Probably the file phidget21.bmx needs to be updated. If there is anyone who can give me the correct install path, I would be very grateful.<br><br>EDIT: <i>version 1.01 update: Added the Phidget Temperature Sensor board.</i><br><br>Version 1.0 supports the following Phidget boards:<br><br>* Accelerometer<br>* InterfaceKit<br>* PhidgetLED<br>* PhidgetRFID<br>* PhidgetServo<br>* PhidgetPHsensor<br>* PhidgetEncoder<br><br>I do not have a PH sensor and Encoder, so I haven't tested them yet. But they work rather straight forward, so I expect no problems there.<br><br>You can download the module <a href="http://www.box.net/shared/rqr2rp4lsy" target="_blank"><b>here</b></a>.<br><br>Installation:<br>* Create a kistjes.mod folder in the BlitzMAX\mod folder.<br>* put the unzipped phidget.mod in kistjes.mod<br>* build/document the module<br>* See the examples for the use of the module.<br><br>Enjoy!<br><br>Many thanks to Brucey for helping me out!!!!<br><br>Kistjes <br><br></td></tr></table><br>
<a name="954838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kistjes many thanks for doing this! I only have the 8/8/8 board, vibration sensors, light sensors, an IR distance sensor and a temp sensor. I plan to get a hold of some of the ones you currently support. Better yet, I have a need to get my head around developing a mod for some hardware at work. This might be a good opportunity for me to learn from your mod. Do you mind if I mess about with your stuff and try and add support for the sensors I own?<br><br>EDIT: Looks like support for my sensors is already there by looking at InterfaceKit.bmx. <br><br></td></tr></table><br>
<a name="954880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's right! Look at the Phidget documentation about the interface kit. All the sensors you mention are analog inputs for the 8/8/8 Interfacekit board.<br><br>The boards that are <b>not</b> supported by phidget module v1.0 are:<br>* Phidget Advanced Servo<br>* Phidget Motor Control<br>* Phidget Stepper<br>* <strike>Phidget Temperature Sensor</strike><br>* Phidget TextLCD<br>* Phidget TextLED<br>* Phidget Weight Sensor.<br><br>Edit: @ wmaass: O, I see you have a temp sensor. I'll try to add that board to the module this week.<br><br>EDIT: module updated! Temperature Sensor added. Download module from first post. <br><br></td></tr></table><br>
<a name="954945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Super! I'm tempted to neglect all my yard work today and hide in my office to play with this. <br><br></td></tr></table><br>
<a name="954989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's exactly what I've done today 8-)<br><br>Enjoy the Phidgets! And please let me know if the module works as wanted. <br><br></td></tr></table><br>
<a name="955016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That's exactly what I've done today <br></div><br>... welcome to my world :-p <br><br></td></tr></table><br>
<a name="955033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well here is how I solved the yard work problem. I removed the mower blade from the mower and took it to a shop for sharpening. Get it back Monday, too bad :)<br><br>Anyway, everything is working perfectly Kistjes! So what I plan to do now is build 2 IR Distance sensors into some sort of housing and use them to get angle and speed of golf putts. Then I'll use the data for a mini-putt game I've had on the back burner for some time. Thanks again for this and thank you Brucey for helping :) <br><br></td></tr></table><br>
<a name="956731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kistjes,<br>If you run the InterfaceKit Full example that comes with the Phigets SDK you will notice an input sensitivity slider for the analog sensors. I think this is done by messing about with SetAnalogInputChangeTrigger. When I try it seems to work but my test program just exits after a few seconds (it does manage to print data from the sensor). It is probably due to poor programming on my part but I thought I would run this by you to see what you think:<br><pre class=code>

SuperStrict
Import kistjes.phidget21

'create an InterfaceKit instance
Local oKit:TmsInterfaceKit = TmsInterfaceKit.Create()

'if succeeded...
If oKit Then

	'open connection to InterfaceKit board
	oKit.OpenPhidget()
		
End If

'set ratiometric
oKit.SetRatiometric(1)
oKit.SetAnalogInputChangeTrigger(0, 20)

Global sensorvalue:Int

oKit.SetOnAnalogInputChangeHandler(OnChangeMe, Null)


Local changetrig:Int = oKit.GetAnalogInputChangeTrigger(0)
Print changetrig

Graphics(800, 600, 0)

SetClsColor(255, 255, 255)
SetColor(0, 0, 0)
	
SetBlend(ALPHABLEND)

While Not KeyHit(KEY_ESCAPE)
	Cls

'Local sensorvalue:Int = oKit.GetAnalogInput(0)
'Print sensorvalue

	Flip(0)

Wend

oKit.RemovePhidget()
	

GCCollect()
End

Function OnChangeMe:Int(bpPhidgetHandle:Byte Ptr, userData:Object, iIndex:Int, iValue:Int)
	sensorvalue = iValue
	Print sensorvalue
	
	Return 0
End Function

</pre> <br><br></td></tr></table><br>
<a name="956740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I updated the code above and now the data continues to print but now I get a <br><br>"Unhandled Exception:GC bbGCFree: mem has non-0 refs" <br><br>or a<br><br>"Unhandled Exception:clrMemBit error: membit not set"<br><br>after a minute or so. <br><br></td></tr></table><br>
<a name="956741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooh. You shouldn't see things like that!<br><br>Sounds like there's a bug in the wrapper. <br><br></td></tr></table><br>
<a name="956743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, seems random too - unhandled exceptions in d3d7graphics, pollsystem, d3d7max2d...all kinds of havoc.<br><br>Seems to work better with flip(0) changed to flip(1) if that makes any sense. <br><br></td></tr></table><br>
<a name="956745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reason it appears random is because the error occurs when the GC is attempting to clean up some pointers - it does this at various times when it thinks it needs to - so you'll see it pop up in all kinds of places. <br><br></td></tr></table><br>
<a name="956746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like a job for Super Kistjes :) <br><br></td></tr></table><br>
<a name="958044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, <br><br>Sorry for the delay.<br><br>I get the same error :(<br>Please give me some time to figure out what's wrong.<br><br>I'll see what I can do.<br><br><div class="quote"> Sounds like a job for Super Kistjes :) <br></div><br>Do we become cynically? 8-) <br><br></td></tr></table><br>
<a name="958054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> No worries, take your time. <br><br></td></tr></table><br>
<a name="972924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >North</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heyas,<br><br>i'm about to order me a package from phidgets including the 8/8/8+onboard usb, the temperature+humidity sensors and dual relay interfaces.<br>I'm wondering if you had any plans to include the relays/temp+humidity sensors into your wrapper?<br><br>kind regards<br><br>Nicholas <br><br></td></tr></table><br>
<a name="1011254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spot-Nothing</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Kistjes!<br><br>Just wondering: Is this module still actively in development? I would *love* to see some updates - If I can help with a little donation to support extended Phidgets support, just let me know. <br><br></td></tr></table><br>
<a name="1011436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spot-Nothing</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or is there perhaps anyone else planning to integrate Phidgets through a module? They're just awesome - highly recommended! <br><br></td></tr></table><br>
<a name="1011502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi spot_bot,<br><br>There is 'only' one problem in the Phidget module I can't solve.<br>The callback functions for change of sensor value detection (like OnAnalogInputChanged()) do not work reliable.<br>Still want to look at it but I'm stuck at the moment. Sorry about that.<br><br>All other functionality works great. So if you can write your code by checking input values yourself (I know it is a dirty workaround) you can use the module quite well.<br><br>What are your plans with the Phidgets? <br><br></td></tr></table><br>
<a name="1011504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Spot-Nothing</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Kistjes,<br><br>Thanks for replying! My plans are using Phidgets for a console (desktop) game on an exhibition and I want to try out the Phidgets to make controlling the game more immersive by attaching accelerometers to gloves that are sending the steering signals to the console through bluetooth. <br><br></td></tr></table><br>
<a name="1011517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whow, ambitious project ;-)<br>The Phidget module should be able to manage that.<br>Good luck!<br><br>Please inform me about the progress and the results of the exhibition game. <br><br></td></tr></table><br>
<a name="1041688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this still in development? I would love to see support for Advanced Servo. <br><br></td></tr></table><br>
<a name="1041783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kistjes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Beaker: The Phidget module already supports the advanced servo controller.<br><br>There is still an unsolved problem with the callback functions for all phidget boards. <br>So, you can set or get the position of a servo motor but you probably will get an error when you use the OnPositionChange function. Sorry about that.<br><br>Recently I implemented a phidget interface in MS-Expression Blend (.Net + c#).  I came across a similair problem with the callback functions. After some research I learned that it had something to do with threats. Phidget-threat conflicting with UI-threat. <br><br>I'm not sure the problem with this module is the same but perhaps it is.<br>If anyone has an idea... please let me know.<br><br>Good luck with your servo project! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
