<!DOCTYPE html><html lang="en" ><head ><title >CString and WString</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CString and WString</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >CString and WString</a><br><br>
<a name="1201108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BLaBZ</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know by definition these methods return either an 8 bit null terminated byte or 16 bit null terminated shorts but I'm having a hard time understanding what exactly that means and how I should think of these methods.<br><br>In what cases is this important?<br><br>Is there a reference for working with more low level API calls!?<br><br>I recently had to put the contents of a file into a string, decrypt it, then reference the decrypted string as if it was a file. I used cstring and banks to achieve this but I still don't feel like I have a good understanding of what ToCString really does.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="1201115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In C, strings do not exist natively.  To create one, you must use an array of type Char for 8 bit strings and an array of type Int for 16 bit strings.  Since the size of strings can vary, you would indicate the end of a string by appending a '0' after the string.<br><br>For example, "Hi" would be encoded as<br><br>Char MyString[3];<br>MyString[0] = 72; //ASCII for 'H'<br>MyString[1] = 105; //ASCII for 'i'<br>MyString[2] = 0; //0 byte indicates end of string<br><br>Of course, you wouldn't build a string byte for byte like that.  C includes many functions for handling strings automatically.<br><br>Char MyString[] = "Hi"; //Creates the MyString[3] and fills it with 72,105,0 for you<br><br>Remember that you will need one extra element in the array for the 0 element in C strings.<br><br>Why you would need them would mostly be because you are about to pass a string to a .dll or library that expects strings in C format, or write to a file in which the reading program would expect the data in C format.  I really don't think that C strings and C Wstrings have much any other use in BlitzMax. <br><br></td></tr></table><br>
<a name="1201136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Generally you only need to convert Strings if something else needs them in a particular format (C string, UTF8 string, or wide string).<br>BlitzMax's Strings are stored internally as sets of 16-bit (short) characters. If you are converting to C strings, you need to be aware that character values over 255 will be truncated. So, standard ASCII is fine, but for international characters you may have issues. Most of the time it's probably not something you need to worry about though.<br><br>On Linux and OS X, filenames are in UTF-8 format, which is a special sequence of byte-size characters. BlitzMax provides conversion functions for UTF-8.<br>There are also formats such as wchar_t*, std::string, std::wstring, wxString, and a whole host of others used in the likes of C++ and various libraries, which you may come across on your travels in the realms of low-level land.<br><br>As Tom says, if you are only doing BlitzMax stuff, you'll rarely, if ever, need to know about anything other than the native String functionality. <br><br></td></tr></table><br>
<a name="1201140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The most sneaky difference is probably this, that TomToad touched on:<br><br><div class="quote"> Since the size of strings can vary, you would indicate the end of a string by appending a '0' after the string. <br></div><br><br>i.e. C strings <i>cannot contain the null byte</i>. Whereas strings in Blitz and most other languages have no problem with this and can contain arbitrary data, and often do, when people (mis)use them as generic data banks. If you have null characters in your string, it <i>will</i> run into problems when it tries to go through C. It's therefore not a good idea to use C strings for general purpose binary data.<br><br>C's string operations are also pretty inefficient for related reasons (e.g. having to loop over every character to find out how long the string is). This also makes them hilariously unsafe when dealing with unverified data. Do avoid whenever possible. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
