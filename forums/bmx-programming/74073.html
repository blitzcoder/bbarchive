<!DOCTYPE html><html lang="en" ><head ><title >Do image go to ordinary RAM?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Do image go to ordinary RAM?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Do image go to ordinary RAM?</a><br><br>
<a name="827553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..or to some VRAM'ish section?<br><br>E.g. Can I just load 300MB (or 1GB for all I care) worth o' images and have 'em all in mem, or am I limited to -say- 64MB of the VRAM or shared VRAM?<br><br>(it's not for a game) <br><br></td></tr></table><br>
<a name="827556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I understand it :<br>Images go to system RAM until they are drawn. They are then loaded to Video Memory which causes a slight delay the first time. I know that the DX driver uses the default algo for texture memory management which means the Least Used  textures are replaced by new textures if you run out of VRAM. You really want to avoid this though as it causes slowdown. <br><br></td></tr></table><br>
<a name="827565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> what I'm doing is:<br><br>- have images in ram<br>- have max 4 images on screen, they're selected by keys<br>- fade the newly selected image in, fade out the previous image, actually, the reason why I have 4 images is because of a cycle system to prevent seeing an older image switch to the new image during its fade-out. So the images that one sees at the same time is really 4 max.<br><br>So, performance is not really shocking, as long as e.g. a notebook with 512MB mem can cope with it.. Otherwise I'll have to use a meatier notebook with more mem. <br><br></td></tr></table><br>
<a name="827569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Images are in first step represented as TPixmap -&gt; stored in RAM<br><br>If you draw them for the first time, they are uploaded to the VRAM -&gt; TImage<br><br>if other Images (actually textures) need the VRAM, they are replaced and can be rewritten later if needed.<br><br>But don't come up with the idea of using 300MB of RAM for it. This means that the system at least needs to have 768MB of RAM on XP and newer (not 512) and I do not think that there is any scenario where 300MB of data must be loaded at the same time for a single level in 2D <br><br></td></tr></table><br>
<a name="827572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> YEah they guys have it right. Also make sure they are not above 1024x1024 if you want slightly older cards to be able to use the textures. <br><br></td></tr></table><br>
<a name="827585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> dreamora: it's not a level, it's not a game.. :P It's a slide show. The sole reason I have all pix in mem is because I show small thumbnails. (setscale'd images). I could create thumbnails first and use them while I load the correct image from HD whenever I need it. But that's extra time I need to put into then, hoped I could avoid it. As for the amount of RAM, I dunno. 1024x768 would mean 3MB, and 100 images is perhaps a bit over the top. I could also try 512x384 images. After all the whole shebang will be displayed using a beamer, for a crowd averaging 60+ who're listening to accordion-ensemble 'music' .. (don't ask :P) <br><br></td></tr></table><br>
<a name="827597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> For a slideshow I don't think you'll have much problem unless you're going to time the images to the music.<br>You could try just using loadpixmap and drawpixmap rather than images which will keep everything in system RAM. <br><br></td></tr></table><br>
<a name="827602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yupp, would suggest pure pixmap here as well.<br>A slideshow does not need realtime normally.<br><br>The only problem is that the alpha, scale etc commands only apply to images.<br><br><br>But another thing that puzzles me a little: Do you have 3000x3000 screen? otherwise the 100 thumbs won't be onscreen which means that the images do not need to exist as well.<br><br>PS: not even asyncron file handling will solve the problem as the largest part of the loading of an image is the upload and especially the mipmap generation. So by disabling mipmap and filtering it should already speed up considerably.<br><br><br>PS: 1024x768 actually means 1024x1024 and if you didn't make sure you don't load with mipmap, this is actually around 6MB not 4MB (it will never be 3MB no mather what you do) <br><br></td></tr></table><br>
<a name="827607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1024x1024x4 bytes (for 32-bit colour) = 4MB.  It's that simple (unless you Mipmap it) <br><br></td></tr></table><br>
<a name="827619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could create some form of image compression? <br><br></td></tr></table><br>
<a name="827621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> And then? In RAM and VRAM its still pure byte data unless you use S3TC compression (DXT on DX) which is not implemented.<br><br>Image Compression is only nice for saving harddisk space at the cost of higher loading times <br><br></td></tr></table><br>
<a name="827624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CS_TBL</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Behold:<br><img src="http://pub.unreal64.net/boor/cbslide.png"><br><br>The output widow right/below is normally to be placed right outside the screen so it'll appear onto the beamer.<br><br>On top the main window with left a list o' groups, and right the images in such a group. Note that an image can appear in any group. One presses a key on the keyboard, and the image that belongs to that key will fade in while the previous image will fade out, e.g. a crossfade. The app itself works like a charm sofar. Since I'll also be doing the stage-lights/spots and a bit o' mixing, the slideshow can run by itself by simply moving on to the next image by a set interval. The thumbnails are simply the images with some setscale 1/16.0, 1/16.0 or something.., that's why I wanted 'em all in RAM, it'd save me the hastle to make a workaround for that.<br><br>Anyway, I'll experiment a bit with 512x384 images, while also experimenting a bit with a vista notebook with 2GB mem I may be temporarily using from wednesday. <br><br></td></tr></table><br>
<a name="827625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's actually a shame that Image Compression hasn't been implemented. It's one of the few "fancy features" which are most useful for a 3D-accelerated 2D game. I know that pretty much any basic onboard card is going to have 64MB of VRam available, but if that's shared ram, you could seriously cut the bandwidth requirements if you were using 1/4 as much. Not to mention the extra animations and frames of animations you could fit in with that. <br><br></td></tr></table><br>
<a name="827628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, thats just confused it, if Tpixmaps are indeed stored in memory, then why on earth can my system not manually modify a pixmap? Its obviously not a driver issue anymore? :S (sorry to half-hijack but the only functions that I can do in pure max right now is setcolour and plot...)<br><br>Strange considering FLow and other 3D graphics work fine..... <br><br></td></tr></table><br>
<a name="827634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are indeed pure RAM, they are actually even pure Bytearrays meant to be uploaded later ...<br><br>That you don't see the output btw does not mean that the content is not modified ... might be that the copy command actually fails due to beeing too high end and using DX7 <br><br></td></tr></table><br>
<a name="827651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Image Compression hasn't been implemented. <br></div><br><br>Wouldn't it be possible to create your own compression method, even a crude one? When you need to use it, decompress the data into a normal pixmap to then be shipped off to the graphics card. <br><br></td></tr></table><br>
<a name="827692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> and then?<br>the compression would still be only on the harddisk.<br><br>it has nothing to do with the pixmap and especially image size so its pointless as you can just use PNG, they are about the size you get with ultra zip compression of any kind of 32bit image data <br><br></td></tr></table><br>
<a name="827717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why would it? Store the pictures in memory as just a compressed stream of bytes. When a picture needs to be drawn, decompress it to a pixmap and send it to be drawn. Only one big image needs to be drawn at once, right? <br><br></td></tr></table><br>
<a name="827724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> that way you would even have it twice in RAM!<br>Once as compressed and once as pixmap as the pixmap will exist until the image is null-ified<br><br>so that would definitely be the worst idea.<br><br>What people were talking above is actually real hardware compression. S3TC / DXT. that is small on disc and remains as small in VRAM. Benefit of it is faster loading time and pregenerated mipmaps if you want to use them. They drastically reduce loading and upload actually and raise the FPS due to that (as texture binds are faster as well) <br><br></td></tr></table><br>
<a name="827727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> that way you would even have it twice in RAM!<br>Once as compressed and once as pixmap as the pixmap will exist until the image is null-ified<br> <br></div><br>I think the idea is to have 1 pixmap and 100 compressed pixmaps rather than 100 pixmaps.<br>Might work if the decompression is quick enough. TBH I would probably look for a 'loadpoint' where I load some more images from disk and get rid of those already seen. <br><br></td></tr></table><br>
<a name="827729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, the loading from RAM instead of disc could make a difference if you want to force it to "only have pixmap for what drawn at the moment".<br>Problem is that even a compressed one will take some space (+- png file size) and you would still be forced to remain on pixmaps <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
