<!DOCTYPE html><html lang="en" ><head ><title >Determine what to draw in an isometric map</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Determine what to draw in an isometric map</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Determine what to draw in an isometric map</a><br><br>
<a name="940129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Currently my tilemap renders like <a href="http://img252.imageshack.us/img252/2800/earlywithshadingmoew5.png" target="_blank">this</a> (no special doings to draw to the full size of the screen).<br><br>Map data is in rows of columns, when rendering the screen positions are calculated for isometric.<br><br>What would be the best/fastest way to determine where to start and end drawing so that the whole screen is filled with tiles? <br><br></td></tr></table><br>
<a name="940205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> are those 2d images?<br><br>if so you have to just off set the co-ords to minus 100 so you are drawing off the screen <br><br></td></tr></table><br>
<a name="940219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not that simple.<br><br>The map data is in top-down format.. non isometric.<br><br>Row 0: 0, 0, 0, 0, 0<br>Row 1: 1, 1, 1, 1, 0<br>Row 2: 1, 0, 0, 1, 0<br>Row 3: 1, 1, 1, 1, 0<br>Row 4: 0, 0, 0, 0, 0<br><br>When they get drawn, the tile positions are transformed<br><a href="http://img23.imageshack.us/img23/3032/tmisotrans.png" target="_blank">http://img23.imageshack.us/img23/3032/tmisotrans.png</a><br><br>So simply increasing the number of rows and columns to draw from the starting point will just make the box larger (that would *work*, but it would be a waste, because there would be many tiles drawn outside the viewport). <br><br></td></tr></table><br>
<a name="940220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> first off<br>the first image is not isometric it is just rotated 45 degrees<br>isometric tiles are diamond shaped and a cube would look like a hexagon<br><br>second to fill the screen with tiles you would need to have a larger array than the screen as you would be trimming off some off screen parts<br><br>i need to find an image to explain better what i mean <br><br></td></tr></table><br>
<a name="940224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's an isometrically projected map.<br><br>Clearly the example I gave in my last post is a tiny map.<br><br>The image in the first post is actually 100x100 tiles (much much larger than the screen), I am just taking 0,0 to about 16x16. <br><br></td></tr></table><br>
<a name="940225"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> i take <a href="http://en.wikipedia.org/wiki/Isometric_projection" target="_blank">isometrically projected</a> to be diamond squares hexagonal cubes like we had in the old q*bert alien 8 games, where as that image looks just "rotated 45 degrees" <br><br></td></tr></table><br>
<a name="940226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> http://en.wikipedia.org/wiki/File:IsometricFlaw_2.svg<br>Wikipedia must be wrong then, clearly those floor-like tiles are not 'isometric'.<br><br>That is exactly how I am rendering my tilemap, but with height changes to simulate a terrain. <br><br></td></tr></table><br>
<a name="940255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> why bother making shure the background is all full, most ismoetric tile engines show empty outer edges when displaying corners on maps. some just display a background image. and some just limit the walking area so no outer edges are displayed but I think its a waste of resources. Even 3D games like C&amp;C Generals display a black background outer edge. <br><br></td></tr></table><br>
<a name="940258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >plash</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Jesse: I know that. I'm talking about non-corners.<br><br>In the shot above only the top-left and top-right sides are corners (no more map data in those directions), the other sides do have more data in their directions though (which is what I want to make it render so that the screen is as full as possible).<br><br>I'm just trying to get the rendering to display as much as possible to the screen size. <br><br></td></tr></table><br>
<a name="940276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I started working on a tile engine a while back but I gave up due to my lack of time. the way did it: <br>first I would find out how many tiles fit across and down the display area. Determining how many tiles across will determine how many tiles down I need to move. To display 8 tiles across I  had to move the map 8 tiles down: <br><pre class=code>
mapShiftY = (8* tileHeight)/2 
</pre><br>sence tiles are spaced half the tile height I have to divide by 2.<br>the same goes for displaying tiles down. <br><br>There might be a better way but this is how I did it a while back. I don't have the source anymore else I would post it.<br><br>ignore it if I missunderstood you. <br><br></td></tr></table><br>
<a name="940336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kenshin</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> two stage process:<br><br>- Do a tile flood fill from the centre of your screen.  Check whether each tile is visible on screen.  If it is, you then store the relative offset of each visible tile in a list/array, as in relative to centre screen but stored as map co-ordinates.  You only need to do this once.  So now you have made an array of map offsets from centre screen, as in 2,2...-3,4 etc...only these are the offsets which actually lie on the visible screen, none of which are completely offscreen.<br><br>- When you need to render, you can work out which map location is sitting in the screen centre and then use the offset list you built previously to determine which tiles will need to be rendered.<br><br>Note: With your flood fill, it will be better to have a 'border' of one extra map tile around the edge of your screen otherwise you will occasionally see background at the edges as you scroll around. <br><br></td></tr></table><br>
<a name="940358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AramusM</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.gamedev.net/reference/list.asp?categoryid=44" target="_blank"> http://www.gamedev.net/reference/list.asp?categoryid=44</a> is a good place to have a look. it has lots of info on tile maps. Standard, Isometric and Hex tile maps covered. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
