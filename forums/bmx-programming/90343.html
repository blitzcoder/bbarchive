<!DOCTYPE html><html lang="en" ><head ><title >Extending TPixmap derived type problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extending TPixmap derived type problems</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Extending TPixmap derived type problems</a><br><br>
<a name="1026701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to extend TPixmap, but the inheritance doesn't seem to entirely  work.<br><br>Example:<br><pre class=code>
SuperStrict

Type TPixmapDraw Extends TPixmap
	Method calc()
		Print "calc"
	EndMethod
EndType

Print "start"

Local pix:TPixmapDraw = New TPixmapDraw

pix = LoadPixmap("test1.jpg") ''why doesn't this work

pix.calc
Print pix.width

End
</pre><br>the error I get is unable to convert (type) to (type)<br><br>But yet the BlitzMax manual states that the derived type should be compatible where the base type is expected.<br><br>Any suggestions? Am I missing something or is this not allowed in BlitzMax?<br><br>Many thanks. <br><br></td></tr></table><br>
<a name="1026705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The built-in BlitzMax modules are not designed to be extended in this way.<br><br>LoadPixmap() returns  TPixmap... the instance is created elsewhere.<br><br>A TPixmap is not a TPixmapDraw, hence the error.<br>A TPixmapDraw is a TPixmap though... <br><br></td></tr></table><br>
<a name="1026713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the insight.<br>But I still don't see the error, unless it's just a restricted thing and I need to accept it.<br><br>The code: pix = LoadPixmap("test1.jpg")<br><br>is: TPixmapDraw = TPixmap<br><br>Can't a TPixmapDraw be assigned a TPixmap? (derived assigned a base, since the derived contains the base) <br><br></td></tr></table><br>
<a name="1026715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks for the insight.<br>But I still don't see the error, unless it's just a restricted thing and I need to accept it. <br></div><br>It's not a "restricted thing" and I don't know any programming language which would allow you to do what you think you're doing.<br><br><div class="quote"> is: TPixmapDraw = TPixmap <br></div><br>Absolutely correct. That's exactly what it's doing.<br><br><div class="quote"> Can't a TPixmapDraw be assigned a TPixmap?  <br></div><br>No. How could it possibly? You're creating a TPixmap and then telling the compiler that it's really a TPixmapDraw. But you didn't create a TPixmapDraw, you created a TPixmap. The constructor (the New method) allocated memory and sets up the function table for your object, and it gives your object everything a TPixmap should have, and nothing more.<br><br>So that Calc method you created was not placed in the object's function table when it was created because you didn't ask BlitzMax to create a TPixmapDraw. So when you come to call that function that doesn't exist, what do you think BlitzMax is going to do? Crash badly is my guess of what would happen. The compiler tries to prevent that by not allowing you to make the invalid typecast in the first instance.<br><br>It works in reverse because accessing less than everything that was created is perfectly possible, but you must surely see that accessing more than was created is not possible. <br><br></td></tr></table><br>
<a name="1026719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jesse</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The built-in BlitzMax modules are not designed to be extended in this way.<br> <br></div><br>true but that shouldn't stop anyone from doing whatever they want with them as long as they are not releasing any of the Bmax code as their own. <br>aside from the code possibly becoming obsolete when Mark desides to make changes to a/the module, I would say to look at the modules source code before attempting something like this. <br>Work based on what you know not what you ass-u-me.<br>Easy for me to say. As if I hadn't fallen in to the same pitfall before. ;) <br><br></td></tr></table><br>
<a name="1026756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamRedwoods</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>It works in reverse because accessing less than everything that was created is perfectly possible, but you must surely see that accessing more than was created is not possible. <br> <br></div><br><br>Ahhhhh.... that makes sense, thank you for the explanation. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
