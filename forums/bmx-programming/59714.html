<!DOCTYPE html><html lang="en" ><head ><title >How to find the hertz rate?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to find the hertz rate?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to find the hertz rate?</a><br><br>
<a name="665721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't quite understand the whole Hertz business when setting up graphics displays/windows or flipping the display at the right time.<br><br>1. Apparently if you don't specify a hertz rate and you set the color depth to 0, when calling Graphics(), you get a 60Hz default refresh rate. This isn't necessarily the hertz rate of the display. Presumably, though, this is quite a popular hertz rate so it might be synchronized to the display quite often. This seems to apply to windowed mode and fullscreen mode. But doesn't this mean that Graphics() really doesn't know what the display's hertz rate is? If I open a 75Hz fullscreen display, by passing 0 as the hertz rate, will it actually be 75Hz refresh or 60?<br><br>2. I can see how this `unknowingness` of the hertz rate can be avoided in full-screen displays, by selecting an actual `known` mode from the list of modes you get back from GetGraphicsMode() or GraphicsModes(). If the data includes the actual hertz rate of the display, you can then know how often to ideally flip the display. However, on some systems the Hertz rate in the mode info is passed back as 0, maybe particularly applicable to LCD screens. With hertz of 0, the mode opens correctly at whatever hertz rate it is, but you don't know what that hertz rate is. Is the only option to then guess a 60Hz software rate, or how can we find the actual rate of the display (requires waiting for the VBlank reliably) ??<br><br>3. If I want to use GLGraphics() or CreateGraphics() for full-screen modes, I have to know the hertz rate I want to give the object before I open the display. Presumably that has to be the rate found in the list of graphics modes otherwise the display will not open (or 0 is default). So then the graphics object might be 0 or a hertz rate, if you're lucky, but it's 0 you're out of luck. It also appears that Flip 1 or Flip -1 do not wait before flipping, at all, unless the display was created with Graphics(). All flips act like Flip 0. To update at a given rate I have to use CreateTimer() at a given hertz rate. What hertz rate?<br><br>4. What we basically need, I think, are two things. Open the display, whatever method, then a) A way of reliably waiting for the vertical blank on all systems (OpenGL only please), and then b) do a timed test to see how long it takes to do x number of flips from which we could find something `near to` the hertz rate of the actual display, which we could round up or down to the nearest 5 Hz perhaps since the timer is inaccurate. OR ... if BRL could provide the ACTUAL hertz rate of the display even when it's listed as 0, that would work too.<br><br>Summary: Full-screen modes, find the actual mode and open it. If you know the hertz, use that, if not, use 60. Windowed mode, try and match the desktop mode to one from the list if possible and get the hertz from it to use, or if 0 then just go with 60Hz? Do we have no choice but to use 60Hz when we don't know the hertz rate?<br><br>Any ideas/comments/suggestions appreciated. <br><br></td></tr></table><br>
<a name="665802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh man, your just kidding at me, aren't you ? That's exactly the point I've decided to code that module for... I can't understand why you don't use it instead of asking one resolution-question after another... :D<br><br>I've added the Linux part yesterday and will upload it tomorrow if you are interested in this. <br><br></td></tr></table><br>
<a name="665816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> AngelDaniel: In DirectX, all flips act like Flip 0 in Windowed mode too.  That's why there is vertical tearing in windowed mode.  This happens when using Graphics().  That's why I tweaked the BRL modules to make Flip -1 and 1 do a VSync. <br><br></td></tr></table><br>
<a name="665877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> d:bug Actually I tried to go back and find the module you posted but I couldn't find it. I'll be happy test out the one supporting all three platforms. Thanks. <br><br></td></tr></table><br>
<a name="665893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, I will upload it tomorrow. <a href="/posts.php?topic=59065#658527" target="_blank">Click here</a> until I've done this. :D This is the old version without the Linux-Part... <br><br></td></tr></table><br>
<a name="665903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool thanks. <br><br></td></tr></table><br>
<a name="666089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey d:bug ... I tried your module on my Mac here, it works fine :-) Thanks for the effort you've put into it. It'll be interesting to see it supporting Linux as well.<br><br>I did recently buy MaxGUI which has GadgetWidth(Desktop()) and GadgetHeight(Desktop()) that returns the desktop dimensions, so I'll probably use those, but I am finding that I will still need to use your module to find out for sure what the bit depth of the desktop is, and the hertz rate. So that's all cool. I really think MaxGUI should have the desktop depth and actual hertz rate as well as the dimensions. Maybe they can put that info into some kind of `extra` field of the gadget. Who knows.<br><br>I am finding that, and something to bare in mind, is that some computers return 0 as the hertz rate. Your modules also return zero on those computers for the hertz rate. I think what we're facing here is that maybe the o/s itself doesn't even know what the hertz rate of the display is and just refers to it as 0, maybe using its own timing system for updating stuff. Although it's hard to think the o/s wouldn't know the display's refresh rates. Fact is though that trying to find it out with your module or any other method seems to return 0 on those systems and there doesn't seem to be any way to truly find out what the rate is.<br><br>I think what it'll come down to is using your module to find out the hertz and bit depth, if the hertz is 0 then we'll basically have to guess at a decent hertz rate, like how BlitzMax defaults to 60. That's probably all we can hope for. It's a pity that not all hardware behaves the same. If we were dealing with one graphics card and one main computer card like the ole Amiga it would be much simpler :-D <br><br></td></tr></table><br>
<a name="666165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Glad to see that you have found your freedom... ;) <br><br>Yesterday i've uploaded the new version, but the board was down. You can find the new, optimized version with Linux support <a href="http://d-bug.future-coding.de/extern/DesktopExtension.rar" target="_blank">here</a>.<br><br>I've only testet it on my computers and they all returned an accurate refresh rate of 60Hz. No wonder, since LCD screens can't get faster. I've also talked to hamZta and it seemed to work on his Mac too. <br><br></td></tr></table><br>
<a name="666338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok cool. Then it's down to whether the o/s gets given the rates properly or whether the driver just returns 0 on some systems. Will have to make do in that case, but try to avoid that case as much as possible.<br><br>Cool about the linix support. Has anyone tested the linux version?<br><br>Thanks again. You should post your module in the module tweaks forum? <br><br></td></tr></table><br>
<a name="666357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey d:bug ... in this new version, you've referred to GetBPP for the macos code, in two places within desktopext.bmx, but in the macscreen.c you refer to it as GetBits. I changed the two instances in the bmx file to GetBits and rebuilt the module, now it works fine. Before it was saying unable to link because GetBPP wasn't found. <br><br></td></tr></table><br>
<a name="666358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, i've tested the Linux-support by my own. Had to install Ubuntu and BMax to do that. That was the main reason that it took so long since skidracer told me about the GetGraphicsMode trick.<br><br>I'm not shure about the module tweaks forum. Isn't that a place to post 'tweaked' BRL modules?<br><br>I've thought about the refresh rate 0 problem. Did you checked grapiccard drivers on this machines. Some cards provide an application based frame rate. I remember i had to uncheck it for B3D to get an accurate speed without vsync. Before I've done this my apps allways runned at 60 FPS, Flip(0) or not!<br><br>Waarg... It's hard for me to explain something in english! :(<br><br>cheers <br><br></td></tr></table><br>
<a name="666359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're english sounds fine, I didn't realize it's not your  native tongue till looking at your website ;-)<br><br>Incidentally, DesktopDepth() returns 8 for a 256-color screen, which is cool. Can you confirm that it returns 8 on Linux and Windows, if you have a 256-desktop mode?<br><br>Cool thing also is it returns 16 for a 16-bit display, even though OpenGL says the mode is really 5:5:5 not 5:6:5. :-) <br><br></td></tr></table><br>
<a name="666373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've didn't test 8bit graphics mode so far, but I will do it this evening. Will tell you the result tomorrow. I don't think that this is any problem, if all other resolutions are confirmed. :D <br><br></td></tr></table><br>
<a name="666379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. I'll test it on my other mac also as it has a different display arrangement. <br><br></td></tr></table><br>
<a name="666715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried to test ist but failed. My Notebook doesn't provide 8bit...<br>Could somebody please test this for me ? <br><br></td></tr></table><br>
<a name="666720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  You're english sounds fine, <br></div>Oh the irony. :o&gt;<br><br>Anyway, does anyone have a BINARY I can test? <br><br></td></tr></table><br>
<a name="666722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, thats hurting me ;)<br><br>O.K.<a href="http://d-bug.future-coding.de/extern/DesktopExtension.rar" target="_blank">here</a> is the link again.<br><br>cheers <br><br></td></tr></table><br>
<a name="666901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol.<br><br>Just download the module and install it, build modules, exit the IDE and then make a program, like:<br><br><pre class=code>
Import dbug.desktopext
Print DesktopWidth()
Print DesktopHeight()
Print DesktopBits()
Print DesktopDepth()
</pre><br>I tested on my other computer, an ibook .. it reports 8-bit for the 256-color desktop.<br><br>It was interesting to realize that the o/s is reporting that the desktop on my ibook is 32-bit while on my ibook OpenGL says there is no alpha buffer and it's 24-bit. This means that on some systems you automatically get given an alpha, on others you don't. So you should ask for exactly what you want, and be careful of getting extra. <br><br></td></tr></table><br>
<a name="667166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >d-bug</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> erm, the function DesktopBits() doesn't exist anymore :D<br><br><pre class=code>Import dbug.desktopext
Print DesktopWidth()     'Get the width of the current desktop
Print DesktopHeight()    'Get the height of the current desktop
Print DesktopDepth()     'Get the depth of the current desktop (...not DesktopBits() ;))
Print DesktopHertz()     'Get frame rate of the current desktop</pre><br><br>thats the right syntax <br><br></td></tr></table><br>
<a name="667308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh ok. <br><br></td></tr></table><br>
<a name="681296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tachyon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've placed the folder dbug.mod in the pub.mod folder, rebuilt all modules, then restarted the IDE. I get the error: "Compile Error. Can't find interface for module 'dbug.desktopext'".<br><br>Could someone be so kind to point out my mistake? :) Thanks! <br><br></td></tr></table><br>
<a name="681366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dont put it in the pub folder? In my setup I created a DBug folder in the mod folder, which contains the desktopext.bmx etc files. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
