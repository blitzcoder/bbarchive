<!DOCTYPE html><html lang="en" ><head ><title >Is there a way to "recache" gfx in VRAM</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is there a way to "recache" gfx in VRAM</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Is there a way to "recache" gfx in VRAM</a><br><br>
<a name="809577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm currently using this code by Ian Duff to cache my images in VRAM.<br><br>Function ccCreateFrames(image:TImage) <br>	'Use this to cache an image or animimage in VRAM for quicker drawing later.<br>	For Local c=0 Until image.frames.length<br>		image.Frame(c)<br>	Next<br>End Function<br><br>That's fine, but I have a question:<br><br>Let's say my video card only had 32MB RAM and I cached around 32MB of graphics on it for the game screen with the above code, then I showed another screen which uploaded another 8Mb to VRAM, I assume it would push out the earlier cached graphics.  So if I call the above code AGAIN on returning to the game screen, will it recache the original 32Mb of graphics again, or is that code a "one shot" affair due to the internal workings of BMax (i.e. it's sets some flag or someting)?  Anyone know?  Hope I've explained this clearly enough... <br><br></td></tr></table><br>
<a name="809611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Upload will be needed whenever the texture is not in VRAM anymore, as the app would just show a white quad if it didn't reupload the needed media.<br><br>The behavior on the DX side is automatic. The OpenGL behavior can be seen in the gl driver.<br>Blitz does NOT know if something isn't in VRAM anymore. so it basically tries to use it and it is uploaded when not present anymore. <br><br></td></tr></table><br>
<a name="809624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx.  Yep I realise that upload is required if not in VRAM anymore, but why does the above code I posted upload it in the first place (I don't understand what it's doing internally), and if called again will it upload it again if it needs to?  I don't want to have to wait until I call Draw() for Blitz to discover that it needs to upload to VRAM again as that would cause a minordelay in the drawing function, I want to precache when the screen is being loaded up. <br><br></td></tr></table><br>
<a name="809650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may be spooled off to main memory as the memory overflows which can be a huge slowdown. GL will probably try to keep the most recently used textures in memory, regardless of how you're using them. <br><br></td></tr></table><br>
<a name="809712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unless I'm totally wrong, Blitzmax tells the GPU that the textures are in system memory which means they will be pulled into Vram as needed by the app. To eliminate that initial stutter that can accour while images are streamed into Vram, you could render all textures needed for the loop, followed by a black square to cover the screen, do a few flips, etc, etc. Then go ahead and render the actual loop, that should help with the stutter. <br><br></td></tr></table><br>
<a name="809716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah MGE I know about that one, but I was using the code from my top post to eliminate that because I have all my graphics in a handy list so can iterate through and call that code to cache them all.  What I'm wondering is if it works a second time later on or if it's a one shot affair due to Blitz internal mod code (flags being set once done etc) <br><br></td></tr></table><br>
<a name="809736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What I'm wondering is if it works a second time later on or if it's a one shot affair due <br></div> I would think it would... I think a test is in order ;)  if you need a crappy machine to exacerbate the problem, I'd be happy to run a test on my old laptop.  hey won't your little background task performance graphing test allow you to see when such a reload happens? <br><br></td></tr></table><br>
<a name="809799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah guess it should do.  I've got 256MB of VRAM so it's gonna be hard to test on mine ... well it's not mega urgent I just wondered if anyone knew more... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
