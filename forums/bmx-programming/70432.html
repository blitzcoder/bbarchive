<!DOCTYPE html><html lang="en" ><head ><title >BVM 2 beta test : scripting systems made easy</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BVM 2 beta test : scripting systems made easy</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >BVM 2 beta test : scripting systems made easy</a><br><br>
<a name="787550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello everyone. <br><br>I am pleased to announce that the sequel to Blitz Virtual Machine, now named "BriskVM",  is entering its final beta test phase.<br><br>So what is BriskVM 2 ?<br>It is a powerfull and easy to integrate scripting system. It currently supports BlitzMax as the host language, but support for other languages is planned.<br>It is available for Windows, Mac and Linux.<br><br>Some of its most noticeable features and/or enhancements since version 1 are:<br><br>&gt;&gt; <b>Easy integration.</b><br>Integrating BriskVM into your application is rather easy. Indeed, BriskVM's approach to integration is very declarative: you list in a file (the "command set" file) everything that is to be shared between the scripts and the host application , being functions, types or global variables. From this file, the necessary glue code is generated for you. Your task when integrating BriskVM is reduced to the very minimum, and you'll get back to code the creative part very fast.<br>And not only will it generate everything that is needed to let scripts access the host application, but the reverse is true also : special declarations will generate the needed code<br>to easily let the host application call any script function (as well as manipulating script objects). No more manual push or pop, it's now all transparent.<br><br>&gt;&gt; <b>Eased debugging.</b><br>BriskVM makes script debugging easier by including a runtime debugger. You'll be able to pop up a debugger window at any time, and step into your script code like you're probably used to for your "normal" code. The source code of the debugger's GUI is freely modifiable, so that you can pretty easily tailor it to your needs, or even adapt it to use your favorite gui library.<br>From your code, you can also get the current script stack trace at any time for debugging purpose.<br>Finally, you can in a few lines of code integrate a debugging console that allows to enter instructions interactively (from within the application). <br><br>&gt;&gt; <b>Many optional extensions to the core script language.</b><br>The core script language of BriskVM is (just like in the previous version) BlitzBasic itself. <br>On top of this core language, a set of extensions is available. These extensions give your scripts a lot more power, and make some tedious tasks become trivial. You'll find:<br><br>    * Object Oriented Programming : take advantage of inheritance and polymorphism.<br>    * Serialization : write and read your objects in just one line of code.<br>    * Reflection : lookup at runtime which types are present, which are their fields, access them etc. Among other things, this gives you all you need to write a *generic* in game editor (that lets the user create new objects and edit them). That is, no need to modify your editor every time you write a new class in some script.<br>    * Annotations : attach meta data - in the form of strings - to your classes and fields, and read them at runtime via the reflection API.<br>    * Function pointers<br>    * Scoping : specify access restrictions to your object's members (Public, Friendly, Protected and Private)<br>    * Alternative syntax : use an alternative BlitzMax-like syntax, more natural to most programmers.<br>    * Option Explicit : force explicit variable declaration and let the compiler catch typo errors.<br>    * Garbage collector : objects manipulated by the scripts are tracked by a garbage collector. It means memory managing and object's life time in scripts are gracefully handled for you.<br>      Nonetheless, you can still manage an object's life time manually, if it happens it better fits your need.<br>      These 2 policies nicely live together without interfering, in a straight forward way: types deriving from Collectable (directly or indirectly) are entirely handled by the garbage collector, otherwise their instances have to be explicitely deleted.<br>    * Handy syntactic sugar:<br>          o Type inference on variable declaration:<br>            Simply write "Local myVar? = New MySuperDuperType" instead of the too verbose "Local myVar:MySuperDuperType = New MySuperDuperType"<br>          o Properties: transparently use getters and setters as if you were accessing a true type field.<br>            Never write again<br>                obj.setLocation(obj.getLocation() + obj.getSpeed())<br>            Just write<br>                obj.location = obj.location + obj.speed<br>            You're still using getters and setters, but transparently, without the kludge.<br>          o For EachIn : iterate over any collection without having to bother with loop indexes or iterators. Just do "For myVar = EachIn myList ..."<br><br>In accordance with BriskVM's aim of customizability, most of these extensions are optional and can be enabled or disabled depending on your specific needs.<br><br>As a side note, you'll also find that arrays handling is a bit more powerful than in the original BlitzBasic language, as you can now have multidimensional arrays in your types. <br><br>&gt;&gt; <b>Documentation system.</b><br>If you plan to use scripts for a significant part of your application, documenting at least the base types and functions is definitely a plus. Especially if you're going to let the end-user modify and extend them. To ease the writing of this documentation, BVM includes a documentation generator similar to JavaDoc or the C# doc system. The generated document is in XML format, with a provided default style sheet to view it as HTML. Thus the documentation layout is not freezed, and you can entirely customize it. <br><br>&gt;&gt; <b>Straight forward script imports</b><br>You can now import other compiled scripts in a transparent way, with a simple declaration:<br>Using "myModule.bbm"<br><br>&gt;&gt; <b>Mix different command sets in the same execution context</b><br>It is now possible to use different command sets in the same execution context. So by example a script could import another script that uses a totally different command set.<br>This makes everything more flexible, and in particular allows to easily share compiled scripts with other BriskVM users : even if compiled with another command set, the<br>imported module can work with your very own command set provided that yours do provide the same needed functionailities.<br>This is made possible through the use of dynamic linking with the host application.<br><br><br>For more information, please visit <a href="http://www.koriolis-fx.com/" target="_blank">http://www.koriolis-fx.com/</a><br><br><br>----------------------------------------------------------------------------------------------------<br><br><br>This beta test phase is semi public, meaning that only registered BVM 1 users may get their hands on the beta version.<br>Nonetheless, anyone is free to browse the online documentation, or participate on the forum. If you have suggestions, feel free.<br>When the beta test is over, BVM 1 registrees will get a free upgrade to BriskVM 2.<br><br>Please note that purchasing of BVM 1 is temporarily suspended.<br><br>BVM 1 registrees should have received a mail with instructions to get the beta version. For anyone who hasn't, please send me a mail with your registration information here:<br>koriolis <b>&lt;dot&gt;</b> fx <b>&lt;at&gt;</b> gmail <b>dot</b> com <br><br></td></tr></table><br>
<a name="787588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TheSin</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> awesome, finally here :-) <br><br></td></tr></table><br>
<a name="787592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The new features of BVM2 are really useful, and it is much easier to integrate and maintain now. <br><br></td></tr></table><br>
<a name="787654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep got your mail! Really useful and flexible. <br><br></td></tr></table><br>
<a name="787767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting! When will it be available? <br><br></td></tr></table><br>
<a name="787773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't tell for sure right now. It heavily depends on the feedbacks I will have from the beta test phase. It is actually already very useable (and *is* actually used, in particular by Joshua Klint), but work to do includes:<br>- enhancing the documentation<br>- fixing minor bugs here and there<br>- reworking a few existing features (mostly renaming, for consistency).<br><br>The rest all depends on the feedback and suggestions.<br>If I was over optimistic I'd say in matter of weeks, but let's be more rational : maybe a matter of monthes. Releasing anything below my expected level of quality is NOT an option :) <br><br></td></tr></table><br>
<a name="787901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >@rtur</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, great news! <br><br></td></tr></table><br>
<a name="787931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> What format do serialized files take? Are they human readable/editable? Is the format layout configurable?<br><br>Sounds great so far. <br><br></td></tr></table><br>
<a name="787934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Compiled scripts files (modules) are in a compact binary format, totally not human readable. Even string literals are not readable.<br><br>Serialized objects are serialized in a similar (binary) way, but in the current version strings are readable. I will change that asap. And I'm going to add the ability to customize somewhat the implementation of individual integer, float and string serialization anyway. But the overall layout will stay fixed, it will not be configurable (only the way integers, floats or strings are written will be).<br>However, I plan to finish a binary format to XML converter (both directions), so that you can then work on a human readable version of serialized data.<br>Ensuring that the end user can't access that human readable version of the serialized data can be achieved very easily with basic encryption of the binary version (the one BriskVM works with). <br><br></td></tr></table><br>
<a name="787958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What does it take for someone who doesn't own BVM 1, to get his mittens on BVM2 (for instance) tomorrow? ... I sent you an email from your website, but didn't get any response :) You can email me at giles snail frecle dot net ... if you want. <br><br></td></tr></table><br>
<a name="788019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Concerning the contact form, it seems there was a problem with it. Looking at the page code I'm clueless as to why it didn't worked, so I simply did a quick and dirty change, did a try, and it now works as expected.<br><br>The reason why the beta is only open to existing BVM 1 users is very pragmatic, it ensures that people reporting bugs or suggesting enhancements have at least a basic understanding of how BriskVM works (not that it's so hard to grasp, but anyway).<br>This makes it unlikely for me to be flooded with total beginners questions, and also gives me more time to enhance the documentation (existing users are at this stage more likely to forgive a few documentation lacks here and there).<br><br>I will contact you to see what can be done to statisfy people in your position. In any case I'm certainly glad to see you are potentially interested in BriskVM. [edit]for information, I've finally settled for a special case arrangement with fredborg[/edit] <br><br></td></tr></table><br>
<a name="788072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually want the user to be able to edit serialized data. Will this be possible, or should I use some other method (INI?) to get my data in (and out)? <br><br></td></tr></table><br>
<a name="788083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> why would you want that? it like having the user edit an encrypted file?<br>Anything that can be serialized can be unserialized <br><br></td></tr></table><br>
<a name="788119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I actually want the user to be able to edit serialized data. Will this be possible, or should I use some other method (INI?) to get my data in (and out)? <br></div>Then you could simply give him access to the XML version of the serialized data. Just DON'T encrypt it, and that's about it.<br>Or even better, provide a GUI to edit the objects from inside the game. This can be achieved using "reflection" (it is the primary intended use of this feature).<br><br><div class="quote"> Anything that can be serialized can be unserialized  <br></div>It's more about "obfuscation" than real "encryption". You usually don't want the end user to easily be able to tweak savegames by example, this would remove any challenge if it was so easy to do. <br><br></td></tr></table><br>
<a name="788279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, I will check it out! <br><br></td></tr></table><br>
<a name="788291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >@rtur</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any speed comparsion benchmarks beetween native BlitzMax code execution and BriskVM script execution time? <br><br></td></tr></table><br>
<a name="788374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a quickie test I just threw together and tried in the BVM2 beta (debug off in all cases):<br><pre class=code>Local start = MilliSecs()
Local a# = 3.14, b# = 17.76, c#
For Local i = 1 To 100000
	c = a / Rnd(20) * b / Rnd(17)
Next
Print MilliSecs() - start</pre>In BlitzMax it took 40 millisecs.  In BVM2 it took 287.<br><br>And another:<br><pre class=code>Local start = MilliSecs()
Local a$ = "here's a test string", b$ = "and another string", c$
For Local i = 1 To 1000
	c = c + ( a$ + b$ )
Next
Print MilliSecs() - start</pre>In BlitzMax it took 69 millisecs.  In BVM2 it took 36. <br><br></td></tr></table><br>
<a name="788437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> WendellM, BriskVM now includes built-in mathematical and random number functions. This means you don't need to expose similar functions, and as a nice bonus it's faster. So you can remove the declaration for "Rnd" in your command set, and replace<pre class=code>	c = a / Rnd(20) * b / Rnd(17)</pre>with<pre class=code>	c = a / Rand(0,20) * b / Rand(0,17)</pre>With the latter change, the BriskVM version is then even faster than BlitzMax on my computer.<br><br>As for the second test, I can confirm that string manipulations are not significanly slower than in pure BlitzMax, and actually often faster (as is the case here).<br><br>In any case, I'd like to point that pure speed is not the main concern as far as scripting goes. Classical virtual machines are necessarily slower than pure machine code,<br>but if well written it should be plenty fast enough to run all your high level code without any significant slowdown.<br><br>So you'll ask, is BriskVM fast enough? I've done a few quick benchmarks to give you an idea of the speed, and here are the results:<br><br>- Benchmark 1 : fibonacci ( fib(30) )<br>  BriskVM 2 is 2.8 times slower than BlitzMax<br>  <br>- Benchmark 2 : Simple loop<br>  BriskVM 2 is 3.6 times slower than BlitzMax<br>  <br>- Benchmark 3 : Simple string manipulation (concatenation + substring search)<br>  BriskVM is 1.9 times *faster* than BlitzMax<br><br>- Benchmark 4 : iterative computation of PI<br>  BriskVM is 13 times slower (that's still more than decent, just take a look at some other scripts/native code comparisons)<br><br>This tends to show a pretty good speed.<br>If someone wants to see the source, just ask and I'll post it.<br><br>Again, these numbers should really be taken as very rough estimates, and not be given too much importance anyway. <br><br></td></tr></table><br>
<a name="788472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Koriolis.  I tried what you mentioned, and that first BVM2 test is now down to 54 millisecs for me compared to the native BlitzMax speed of 35 - much closer.<br><br><div class="quote"> pure speed is not the main concern as far as scripting goes <br></div><br>I agree, but it's still impressive to see how well BVM2 is doing.  It's in the same general area in most cases - well done! <br><br></td></tr></table><br>
<a name="788489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks :) <br><br></td></tr></table><br>
<a name="788512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> really stunning performance comparisions. <br><br></td></tr></table><br>
<a name="788545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >@rtur</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems that BriskVM has great perfomance, thanks for sharing benchmarks results. <br><br></td></tr></table><br>
<a name="788641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I should also have mentioned that you can try the scripts *online*.<br>There is a link on my site to an online sandbox where you can enter script code snippets and execute them (you can also simply follow the link in my signature).<br>It's a good place to go to get a feel of what it is to write BriskVM scripts.<br>You can even submit code snippets that you find interesting, for others to try out.<br>But please don't flood it or I'll have to remove it. <br><br></td></tr></table><br>
<a name="790663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have just finished the implementation of exception handling.<br>This means that you can now throw and catch exceptions in your scripts.<br>I have uploaded a new build of the beta.<br>Documentation is not updated yet (nor is the sandbox), but exception handling uses the same syntax as in BlitzMax so hopefully this should be pretty straightforward to anyone.<br><br>The next step is to add support for "Finally" (as found in C#, Java, python ...), and to find the best way to convert some BriskVM runtime script errors (such as dividing by zero, currently reported to the host via an error code) into exceptions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
