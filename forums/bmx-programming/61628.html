<!DOCTYPE html><html lang="en" ><head ><title >drag and drop files onto BMAX window</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >drag and drop files onto BMAX window</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >drag and drop files onto BMAX window</a><br><br>
<a name="688848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its like this (Please HELP!):<br><br>I have made an emulator in BlitzMAX and want to add a feature enabling the .bin (ROM data) to be Dragged and Dropped onto the window.<br><br>Oh and I dont have or want to use MAXgui<br><br>Im assuming that is it something to do with the HOOK command but the documentation is rather brief. <br><br></td></tr></table><br>
<a name="688855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not really sure it can be done without MaxGUI unless you want to fiddle with the windows message loop and ugly C based GDI code.<br>I do however yearn to be proved wrong :) Anyone? <br><br></td></tr></table><br>
<a name="689067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> From BMAX documentation:<br><br>Event id:            Event description<br>EVENT_WINDOWACCEPT   Drag and Drop operation was attempted <br><br>This tells me yes it can be done, but documentations shit as. <br><br></td></tr></table><br>
<a name="689070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> All I should need is an example of HOOKs in some source code.<br><br>I have never heard of a compiler with no documentation on how to use some of the commands.<br><br>makes it so hard, but its still a great improvement on Blitz3d. <br><br></td></tr></table><br>
<a name="689073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Byteemoz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Only MaxGUI windows created with the WINDOW_ACCEPTFILES flag set produce EVENT_WINDOWACCEPT-events.<br>I think the window created using Graphics(...) doesn't catch any drag-and-drop events...<br>-- Byteemoz <br><br></td></tr></table><br>
<a name="689076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right<br>You would need to modify the original source and add the needed flag when creating the window, because there is no intelligent reason a graphics context should check for file drop ... thats a "gui thing" not a 3d context thing <br><br></td></tr></table><br>
<a name="689093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Choice, Maybe max gui can do it, It would be cool if my emulator could be inside another window, this first window could be the ROMs folder and you drag the data files across to the emulator window to load them. <br><br></td></tr></table><br>
<a name="689094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder why the documentation mentions Drag and Drop Hooks if it is not a feature of blitzMAX<br><br>perhaps if there was some examples! <br><br></td></tr></table><br>
<a name="689335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >impixi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is the main BlitzMax window created at runtime is not set to handle drag and drop events. You would need to modify the BlitzMax source code to enable this.<br><br>You can, however, drag a file onto your program's .exe (or a shortcut to it) and utilise AppArgs to read the dragged item's name:<br><br><pre class=code>

SuperStrict

Graphics 640,480,0

For Local i:Int = 0 To (AppArgs.length - 1)
	Print AppArgs[i]
Next

While Not KeyHit( KEY_ESCAPE )

Wend

End

</pre><br><br>Your users could launch your emulator loading a single ROM in such a way.<br><br>Alternatively you could reconsider purchasing the MaxGUI module. Drag and drop is <b>very</b> simple:<br><br><pre class=code>

SuperStrict 

Local Window:TGadget = CreateWindow("Launcher", 40, 40, 320, 240, ,WINDOW_TITLEBAR | WINDOW_RESIZABLE | WINDOW_ACCEPTFILES)

While True

	WaitEvent()

	Select EventID()
	
		Case EVENT_WINDOWCLOSE
			End
			
		Case EVENT_WINDOWACCEPT
			If EventSource() = Window
			    Print EventExtra().ToString()
			    'Useful code here
			EndIf
						
	End Select
	
Wend

End

</pre> <br><br></td></tr></table><br>
<a name="689636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> interesting and thanks.<br><br>How much bigger would the .exe be, its only 224K at moment, I wouldnt bother if it ends up like B3D and 1.5mb, waste of time at that size. <br><br></td></tr></table><br>
<a name="689638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kfprimm</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> a blank exe with just BRL.D3D7Max2D set as the framework,<br>debug   - 773 KB<br>release - 151 KB<br><br>with brl.win32maxgui also imported,<br>debug   - 1.15 MB<br>release - 461 KB<br><br>you should definitely get maxgui. <br><br></td></tr></table><br>
<a name="689643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im im im... downloading it now! <br><br></td></tr></table><br>
<a name="689650"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah I think that I will alter the BMAX source code instead of making the executable more than double the size just for that function.<br><br>Also because im going to have downloads for MAC and LYNX and then different emulators based on the same source, the extra storage space required isnt worth it. <br><br></td></tr></table><br>
<a name="689660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boulderdash</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found this in the code section, perhaps a variant of this could be used to add drag and drop? I didnt write it so i dont know.<br><br> Import BRL.EventQueue<br> Import BRL.Event<br><br>Extern "win32" ' Crazy WinAPI stuff<br>	Function GetActiveWindow%()<br>	Function IsZoomed%(hwnd%)<br>End Extern<br><br>Graphics 800,600,0,60<br><br>Global hWnd% = GetActiveWindow() ' Save current Window handle<br>' Init Buttons<br>enableMinimize( hwnd% )<br>enableMaximize( hwnd% )<br><br><br><br><br><br>main ...<br><br>... loop<br>end<br><br>Function enableMaximize(hWnd:Long)<br>' Adds the Maximize Button "[]"<br>	Local tmp:Int = GetWindowLongA( hWnd, GWL_STYLE )<br>	tmp = tmp | WS_MAXIMIZEBOX<br>	SetWindowLongA( hWnd, GWL_STYLE, tmp )<br>	DrawMenuBar( hWnd )<br>End Function<br><br>Function enableMinimize(hWnd:Long)<br>' Adds the Minimize Button "_"<br>	Local tmp:Long = GetWindowLongA( hWnd, GWL_STYLE )<br>	tmp = tmp | WS_MINIMIZEBOX<br>	SetWindowLongA( hWnd, GWL_STYLE, tmp )<br>	DrawMenuBar( hWnd )<br>End Function <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
