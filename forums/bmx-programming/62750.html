<!DOCTYPE html><html lang="en" ><head ><title >Destructor or Delete in BMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Destructor or Delete in BMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Destructor or Delete in BMax</a><br><br>
<a name="700982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midnight</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am confused about the use of the destructor in BMax.<br><br>I see reference to the "Delete" method, but no documentation on how to use it.  Looking at sample programs, I can see that people are using Remove:<br><br>method DestroyMe()<br>    mylist.Remove(Self)<br>end method<br><br>That obviously removes the reference to the object I created, but it doesn't actually remove the object itself, does it? Isn't this object still occupying memory until it is destroyed (deleted)?<br><br>So how do I use the destructor in BMax? <br><br></td></tr></table><br>
<a name="700983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> the object is still there, yes.<br><br>But if this was the last reference to this specific object, the GarbageCollector will free the object and call the Delete() method (so you can put all other clean up code in there)<br><br>Memory occupation is something that is not directly bound to your current objects, as it keeps some memory within a memory pool to assign new objects to it without the need to ask the OS all the time to get / free memory as this isn't the fastest thing. <br><br></td></tr></table><br>
<a name="700986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unless it stops working properly (ie self linking lists and the like), the GC will destroy the object once the last intsance of it point to Null<br><br>Use delete, untill it looks like it isnt working <br><br></td></tr></table><br>
<a name="700992"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing to remember is that you can't rely on Delete() being called on your object so don't do anything critical in there.  If the garbage collector never collects that object, Delete() will never be called.  If you have lots of memory and the GC never needs to collect old objects - ouch. <br><br></td></tr></table><br>
<a name="701003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> And at which point breaks that the "rely on delete beeing called"?<br><br>Not without ref -&gt; not collected -&gt; naturally delete never called.<br><br>You will most likely always need another method to clean the "back references" first (normall remove it from a list or similar structure where it is saved for handling) <br><br></td></tr></table><br>
<a name="701054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midnight</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, this still isn't quite clear to me.  So I call the following method in my object:<br><br>method DestroyMe()<br>  mylist.Remove(Self)<br>end method<br><br>This, since it removes the only reference to the object (I am assuming that it is not in any other lists), will initiate the Garbage Collection to call the delete method of my object (when it get's around to it).  So I need the following code in my object:<br><br>method Delete()<br>   Some code here...<br>End Method<br><br>Is that correct so far?  If so, then what code do I need to place in the Delete() method that would destroy the object?<br><br>Or do I not need any, since the GC will automatically destroy the object anyway?<br><br>Thanks! <br><br></td></tr></table><br>
<a name="701070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nothing is necessary there in general. It's there for any code you want to be executed when the object is destroyed. By the time the Delete() method is called, the object is already on it's way out, so you don't *have* to do anything. <br><br></td></tr></table><br>
<a name="701096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> To 'delete' your objects...  simply do stuff like this:<br><br><pre class=code>object:ObjectType = New ObjectType
'no longer needed:
object = Null</pre><br><br>Since your object is dereferenced (ie your code can no longer access it), the garbage collector will notice this and -at it's own discretion-, free up or reuse the space taken by that object in its own time.  If there was a Delete method attached to ObjectType, the code in that method will be executed when the GC does its thing - which may or may not ever happen.  I'm a bit rusty as I havn't used Max in some time, but I think your DestroyMe method would look more like:<br><br><pre class=code>Method DestroyMe
mylist(Self)=Null
'or
mylist.Self=Null
End Method</pre><br><br>I forget. <br><br></td></tr></table><br>
<a name="701291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check this tutorial:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=59233" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=59233</a> <br><br></td></tr></table><br>
<a name="701637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midnight</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone!  I think I got it now...<br><br>Toby:  i've seen both: <br>mylist.self=null<br>and<br>mylist.Remove(Self)<br>used in examples, so I assume either can be used.<br><br>Tom: Yup, I had read that. Great doc, but unfortunately weak on the explanation of the destructor.  Basically just say there is one, and it's just like using NEW. No examples.<br><br>Again, thanks everyone! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
