<!DOCTYPE html><html lang="en" ><head ><title >Text fields - detecting the enter key</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Text fields - detecting the enter key</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Text fields - detecting the enter key</a><br><br>
<a name="593669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do I do this? The example in the docs only shows you how to do it a silly way with a button. Surely there's a proper way? <br><br></td></tr></table><br>
<a name="593675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> SetGadgetFilter (theres even an example!) <br><br></td></tr></table><br>
<a name="593677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh. Might well have an example but I had no idea "filters" were even related. Anyway, thanks!<br><br>Edit: Changed the SetGadgetFilter example from a text area from a text field and judging from the output it still isn't detecting Enter. What's going on? <br><br></td></tr></table><br>
<a name="593686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is because we are now using a dialog control in windows which manages the tabbing between gadgets and unfortunately swallows all traces of the Enter key being pressed, hence the need for the silly button, which can be hidden with dimensions 0,0,0,0 if you must... <br><br></td></tr></table><br>
<a name="593689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I must. But if I have multiple fields in the same gadget how am I supposed to know which text field it's from since the event hits the button? I tried ActiveGadget() but that didn't work. <br><br></td></tr></table><br>
<a name="593690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't (unless you keep your own LastModifiedTextField variable), and you will be confusing the average windows user if you treat the enter key in such a manner because the standard behavior for a Windows form / dialog is always for the enter key to Post or OK the form. <br><br>That said, a lostfocus event for textfields may be needed in MaxGUI so you can also validate your fields when users tab to the next one, in the meantime you need to either validate your textfields as they are modified or just validate all of them when the users goes OK or perhaps / maybe take over the Enter key entirely with a SetHotKeyEvent. <br><br></td></tr></table><br>
<a name="593693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not a form. It's some file path URLs which you can see/edit manually aswell as hitting a button to open a file requester and select it that way. I wanted it so if you edit it manually you have to hit "enter" for it to verify the file. <br><br></td></tr></table><br>
<a name="593703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> In most of the bespoke java database apps I've made, my clients have overwhelmingly requested that enter/return should validate and tab on to the next control...<br>(its much quicker for data entry)<br><br>It might not be "standard" but its a *very* popular way of doing  it... <br><br></td></tr></table><br>
<a name="593708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> :0 oh no it seems to eat escape too! <br><br></td></tr></table><br>
<a name="593709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also if it was something like entering float numbers for something that is graphically represented on a canvas, personally I'd prefer it not try to update the graphics as the value changes with each keystroke but to wait until enter is hit. <br><br></td></tr></table><br>
<a name="593714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've solved it by using a textarea shaped like a textfield<br>I filter out return (return 0 on return down) so it doesnt<br>grow (but you could do your validation here too)<br>and escape to quit<br><br>it does mean you have to detect the tab key and activate<br>the next gadget, and i'm not sure if activegadget is working...<br><br>hope that helps <br><br></td></tr></table><br>
<a name="593720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, that could work. I haven't tried it but I suppose another solution could be to encapsulate the field inside its own panel with an ok_button. That would probably kill tabbing completely, though... <br><br></td></tr></table><br>
<a name="593727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I managed to solve it completely but to do the focus tabbing<br>I had to have 2 filter routines 1 for each component<br><br>I couldnt get activegadget to work at all...<br><br>here I'm filtering return out so that it doesnt add<br>another line to the text area<br><br>escape quits the application<br><br>and tab switches between the two "text fields"<br><br><pre class=code>

Function filter_r1:Int(event:TEvent,context:Object)

	If event.id=EVENT_KEYDOWN Then
		If event.data=27 Then End
		If event.data=13 Then Return 0
		If event.data=9 Then
			ActivateGadget textfield_r2
			Return 0
		EndIf
	EndIf
	
	If event.id=EVENT_KEYCHAR And event.data=9 Then Return 0
				
	Return 1

End Function


Function filter_r2:Int(event:TEvent,context:Object)

	If event.id=EVENT_KEYDOWN Then
		If event.data=27 Then End
		If event.data=13 Then Return 0
		If event.data=9 Then
			ActivateGadget textfield_r1
			Return 0
		EndIf
	EndIf

	If event.id=EVENT_KEYCHAR And event.data=9 Then Return 0

	Return 1

End Function


</pre><br><br>i have 2 textareas 1 line high called textfield_r1 and textfield_r2<br><br>oh you'll need to check that the length of the entered input<br>doesnt exceede the width of the component<br>or the scrollbars obscure everthing <br><br></td></tr></table><br>
<a name="593731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could do that by filtering EVENT_KEYCHAR to return 0 if TextAreaLen exceeds some specified amount, right? <br><br></td></tr></table><br>
<a name="593775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, I guess that would be the way to go... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
