<!DOCTYPE html><html lang="en" ><head ><title >Building more than one module</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Building more than one module</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Building more than one module</a><br><br>
<a name="831311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Max seems to be building modules in alphabetical order which is causing problems for me atm, for example if you create two empty (uncompiled) modules and one of those modules imports the other like so...<br><br>"example.mod/b.mod" imports example.a - all works fine because a.mod gets compiled first.<br><br>But if "example.mod/a.mod" imports example.b - then I get "unable to find interface" error because b.mod hasnt been compiled yet.<br><br>Perhaps the easiest way around this would be to have a optional file to list the required compile order? <br><br></td></tr></table><br>
<a name="831328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> From what I've found, BlitzMax compiles required modules in order, with the top-level module in a hierarchy compiled last.<br><br>I get this :<br><pre class=code>
Building Modules
Compiling:b.bmx
flat assembler  version 1.66
3 passes, 443 bytes.
Archiving:b.debug.win32.x86.a
Compiling:a.bmx
flat assembler  version 1.66
3 passes, 486 bytes.
Archiving:a.debug.win32.x86.a
</pre><br>where a looks like :<br><pre class=code>
module example.a

import example.b
</pre><br><br>Looks good from here. <br><br></td></tr></table><br>
<a name="831336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brucey, yeah thats what I thought, I just tried to replicate it myself and failed. (sorry I should have tried example before posting!)<br><br>There must be something else strange going on.<br><br>It was first reported by gregbug in this thread... <a href="http://www.blitzmax.com/Community/posts.php?topic=74048" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=74048</a> and I had the same problem after deleting all the i and a files and rebuilding.  I renamed one of the mods to amusic and it all compiled fine.<br><br>I dont think it could have been due to circular imports, because I didnt change what ones were actualy imported, just renamed one.<br><br>I'll have a play around later tonite and see if I can replicate it again. <br><br></td></tr></table><br>
<a name="831340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just uploaded a version of maxmod the produces the error... <a href="http://maxmod.googlecode.com/files/maxmod_builderror.zip" target="_blank">http://maxmod.googlecode.com/files/maxmod_builderror.zip</a><br><br><div class="quote"> <br>Building Modules<br>Compiling:audiostream.bmx<br>Compile Error: Can't find interface for module 'maxmod.music'<br>[C:/Program Files/BlitzMax/mod/maxmod.mod/audiostream.mod/audiostream.bmx;20;1]<br>Build Error: failed to compile C:/Program Files/BlitzMax/mod/maxmod.mod/audiostream.mod/audiostream.bmx<br>Process complete<br> <br></div><br><br>but if I rename maxmod.music to maxmod.amusic it compiles fine O.o<br><br><div class="quote"> <br>Building Modules<br>Compiling:amusic.bmx<br>flat assembler  version 1.66<br>3 passes, 6473 bytes.<br>Archiving:amusic.debug.win32.x86.a<br>Compiling:audiostream.bmx<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/amusic.mod/amusic.debug.win32.x86.a<br>flat assembler  version 1.66<br>3 passes, 21826 bytes.<br>Archiving:audiostream.debug.win32.x86.a<br>Compiling:modplayer.bmx<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/audiostream.mod/audiostream.debug.win32.x86.a<br>flat assembler  version 1.66<br>5 passes, 78350 bytes.<br>Archiving:modplayer.debug.win32.x86.a<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/modplayer.mod/modplayer.debug.win32.x86.a<br>Compiling:sidstream.bmx<br>flat assembler  version 1.66<br>4 passes, 15247 bytes.<br>Archiving:sidstream.debug.win32.x86.a<br>ar: creating C:/Program Files/BlitzMax/mod/sid.mod/sidstream.mod/sidstream.debug.win32.x86.a<br>Compiling:amusic.bmx<br>flat assembler  version 1.66<br>3 passes, 6473 bytes.<br>Archiving:amusic.release.win32.x86.a<br>Compiling:audiostream.bmx<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/amusic.mod/amusic.release.win32.x86.a<br>flat assembler  version 1.66<br>3 passes, 21826 bytes.<br>Archiving:audiostream.release.win32.x86.a<br>Compiling:modplayer.bmx<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/audiostream.mod/audiostream.release.win32.x86.a<br>flat assembler  version 1.66<br>5 passes, 78350 bytes.<br>Archiving:modplayer.release.win32.x86.a<br>ar: creating C:/Program Files/BlitzMax/mod/maxmod.mod/modplayer.mod/modplayer.release.win32.x86.a<br>Compiling:sidstream.bmx<br>flat assembler  version 1.66<br>3 passes, 6939 bytes.<br>Archiving:sidstream.release.win32.x86.a<br>ar: creating C:/Program Files/BlitzMax/mod/sid.mod/sidstream.mod/sidstream.release.win32.x86.a<br><br>Process complete<br> <br></div> <br><br></td></tr></table><br>
<a name="831345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found it...<br><br>You have :<br><br>?NoDebug<br><br>Remove the "?"<br><br>so :<br><br>NoDebug<br><br>... and all should be well :-)<br><br>Works for me when I take it out. (well, bar an error about parameters, but it's compiling in the right order now).<br><br>HTH<br><br>:o) <br><br></td></tr></table><br>
<a name="831346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one Brucey, you're a legend! :)<br><br>Still odd that it works when its renamed to amusic.<br>So is it not a compiler directive anymore?<br><br>what error about params? you still using 1.26 or something? <br><br></td></tr></table><br>
<a name="831352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> you still using 1.26 or something? <br></div><br>Yeah... on the work's PC... don't mind me :-)<br><br><div class="quote"> Still odd that it works when its renamed to amusic. <br></div><br>Actually, what's happening is the "?" is like the start of a block, but BMK skips searching for Imports to the end of that block - which doesn't exist. Therefore it doesn't see that there are any Imports to import, and that's why when you change the order by renaming it, things appear to work.<br>BMK just makes sure things are built, while bcc actually tries to link them together...<br><br>;-) <br><br></td></tr></table><br>
<a name="831494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, Thanks Brucey! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
