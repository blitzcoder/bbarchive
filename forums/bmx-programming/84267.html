<!DOCTYPE html><html lang="en" ><head ><title >Doing LD 14 and I've hit a problem with lists...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Doing LD 14 and I've hit a problem with lists...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Doing LD 14 and I've hit a problem with lists...</a><br><br>
<a name="952004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Gents, is there a know problem with list management?<br><br>P-Code<br><div class="quote"> TBUllet<br>  Global mag:TList ' of unfired bullets<br>  Global fired:TList ' of fired bullets<br>...<br><br>  Method fire()<br>    mag.Remove(Self)<br>    fired.AddLast(Self)<br>...<br>  Method Hit()<br>    fired.Remove(Self)<br>    mag.AddLast(Self)<br> <br></div><br><br>I'm losing bullets and as I'm using this way to add other entities and manage them problems in other areas?<br><br>Quick and accurate direction/help, greatly appreciated! <br><br></td></tr></table><br>
<a name="952005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Add it to the new list *before* removing it from the old one.  The way you're doing it, it can potentially go out of scope and get nuked by GC. <br><br></td></tr></table><br>
<a name="952007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The way you're doing it, it can potentially go out of scope and get nuked by GC.  <br></div><br>If it's true that an object can go out of scope and be collected within one of it's own methods, the GC has an extremely serious bug that needs to be fixed. <br><br></td></tr></table><br>
<a name="952008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> He did say it was pseudocode (p-code?) so I didn't pay too much attention to how he's structured it.  I wouldn't be surprised, though. <br><br></td></tr></table><br>
<a name="952015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How he's structured it isn't relevant to my point though. If he didn't have a reference to it, he couldn't put it back in the list at all. And if he does have a reference to it, the GC should not be collecting it. <br><br></td></tr></table><br>
<a name="952016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi removed the magazine just creating new bullets, quick fix!<br><br>But similar problem with an entities the user creates e.g.<br><br><div class="quote"> Type Entity<br>   Global list:TList<br>..<br>   Method create(...)<br>     ...<br>     list.AddLast(Self)<br>..<br>   Method destory()<br>     list.Remove(Self)<br> <br></div><br><br>The system looks like it has created a new entity but non appear, ok going to try and debug this but it is intermittent!? <br><br></td></tr></table><br>
<a name="952017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not that this has anything to do with your problem, but why exactly are you moving bullets from one list to another?  Wouldn't it be easier to just have an integer with a count of how many bullets are in the clip, and decrement that as you create and fire each bullet?<br><br>I suppose if you're writing some kinda game where you can put multiple types of bullet in the same clip, you might need to do that, but that would be extremely rare, and it would probably be better to just have seperate clips for each type of ammo.<br><br>What I'm saying is, you're making your code a lot more complicated than it needs to be. :-) <br><br></td></tr></table><br>
<a name="952018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Possibly only I'm trying to save on the cost of creating new bullet objects, the actual magazine is just a metaphore for bullets created but not in action. <br><br></td></tr></table><br>
<a name="952036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are there any issues with polled input under heavy loads e.g. holding down a key constantly? <br><br></td></tr></table><br>
<a name="952046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's really no need to save on the cost of creating bullet objects.  The days of the 486 are long behind us. :-)<br><br>As for polled input, I know of no issues with it.  But I suppose that may depend on how you're reading the key input.  Are you creating a bullet each frame you detect keydown?  Or are you reading keys with getchar or something? <br><br></td></tr></table><br>
<a name="952047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There's really no need to save on the cost of creating bullet objects. The days of the 486 are long behind us. :-) <br></div><br>Actually, I disagree. In any language which uses a garbage collector, it's very useful to get the hang of not dynamically creating and destroying objects more than absolutely necessary. Yes, in this case a handful of bullets is not much, but getting the hang of pooling objects to avoid dynamic allocation and deallocation of resources, particularly when GC controlled, is a good idea.<br><br><br>As for the original point, I'm not really seeing enough of your code to see where the problem might be. Any chance you can post a bigger (possibly even standalone) example? <br><br></td></tr></table><br>
<a name="952053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Arowx</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok finally figured it out because I was using a scale factor to draw things and an offset to keep the player centred, newly created sprites could be set up without being updated with their offset values before drawing!!!<br><br>Ouch! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
