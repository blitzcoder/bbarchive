<!DOCTYPE html><html lang="en" ><head ><title >Delay(1) - Where to put it using GAF?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Delay(1) - Where to put it using GAF?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Delay(1) - Where to put it using GAF?</a><br><br>
<a name="1010138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All, <br><br>One of my testers has complained that my game which uses GAF (Grey Alien's Framework) and BlitzMax (of course ;) ) is using too much CPU and therefore it causes his laptop to overheat, which in turn slows the CPU and slows the framerate of the game... <br><br>Its been recommended to me to put Delay(1) in my main loop, which will give the CPU space to breathe... but I am unsure where to put it... and how it will affect the GAF fixed rate logic cycles. <br><br>Any ideas? <br><br>Thanks<br>Steve <br><br></td></tr></table><br>
<a name="1010145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Its been recommended to me to put Delay(1) in my main loop, which will give the CPU space to breathe... but I am unsure where to put it... and how it will affect the GAF fixed rate logic cycles <br></div><br><br>- Put it just before (or after) the flip command<br>- Logic rates should be OK -- it's only 1/1000th of a second, after all. <br><br></td></tr></table><br>
<a name="1010150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks xlsior, I'll try that once I get BLide to work again... <br><br></td></tr></table><br>
<a name="1010178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A logic rate of 200 is a bit...unorthodox.  Try dropping to to 60 or 120. <br><br></td></tr></table><br>
<a name="1010267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >therevills</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> A logic rate of 200 is a bit...unorthodox <br></div><br><br>Why?<br><br>I understand the code, but not the reasoning behind the 200 rate... Jake must have chosen it for a reason. <br><br></td></tr></table><br>
<a name="1010271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> A complete guess - there's not much point updating the logic faster than the screen can refresh each frame? <br><br></td></tr></table><br>
<a name="1010289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would think 120hz is the most you'd want for logic, but maybe 200 for user input, but only if you can get it that fast, otherwise there's not much point. That said, higher hz rate for fixed rate logic helps with collision detection accuracy and avoiding things flying right through other things. <br><br></td></tr></table><br>
<a name="1010993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same here...I'm actually using 120 for my logic rate and it's plenty for input detection and collision accuracy too.  Maybe he chose 200 because he got a speeding ticket for $200.  /shrug<br><br>I think it's a quality issue too.  I'd be much more apt to buy a framework from say, SSwift, Flameduck, or even Nilium(Noel) etc....  You can tell by the INSANE amount of pure Function calls in his framework that it was a lot of...shooting from the hip.  There's much better/efficient ways to construct a framework than how he did it IMO.  You can go into the BMax source and see how Mark set up his code...I would use that as a good template to start a framework. <br><br></td></tr></table><br>
<a name="1012613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 200 is nice and smooth and allows for good collision.  I avoided 120 as I wondered if double the refresh rate might generate some moire-like timing oddities where it's almost in sync then slips out then goes back in etc.  Never tested that so can't say for sure.  My original timing routine was based on some code by Mike Boeh (Retro64) but that was at 500Hz and I thought that was excessive so I slowed it down.  200 has worked nicely for all my games but I considered making my latest game at 120Hz but never did in the end.<br><br>As for Chroma, thanks for your expert opinion. <br><br></td></tr></table><br>
<a name="1012618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is the reason for using more than 60Hz? The video card updates the monitor only with 60Hz. All scenes build between these 60 pictures are never visible. So why stress the video card? It is completely useless.<br><br>Maybe there is a need for updating the world with more accuracy (User-Input or Collisions), but never a need for doing more than 60 Renderworld a second. <br><br>The collisions ar not based (depending) on the last DrawImage-instructions, but always are "created on the fly". Test it: you can check your collisions without painting anything, without FLIP, etc...<br><br>Or am I wrong? <br><br></td></tr></table><br>
<a name="1012623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Czar Flavius</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's because you can never render at exactly the same speed as monitor refresh (if a frame takes 1% longer, then too slow it's missed the render) so it's a good idea to go slightly higher than this to keep things smooth. <br><br></td></tr></table><br>
<a name="1012630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oddball</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="/Account/showuser.php?id=10365" target="_blank">Midimaster</a> wrote:<div class="quote"> The video card updates the monitor only with 60Hz. All scenes build between these 60 pictures are never visible. So why stress the video card? It is completely useless. <br></div>But my video card updates the monitor at 75Htz.<br><br><a href="/Account/showuser.php?id=10176" target="_blank">Czar Flavius</a> wrote:<div class="quote">  think it's because you can never render at exactly the same speed as monitor refresh (if a frame takes 1% longer, then too slow it's missed the render) so it's a good idea to go slightly higher than this to keep things smooth. <br></div>But then you will run into the reverse issue of getting the occasional double update per frame. The only way to ensure one update per frame and a smooth speed is to force the monitors refresh rate and tie your logic to that directly. Well I say ensure, but even that won't ensure it. <br><br></td></tr></table><br>
<a name="1012837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah basically I wrote the framework when people still had CRTs that it was possible to run at 120Hz, so I wanted higher than that to keep it smooth, so there'd never be any frames missing.  Sure if you get double update per frame it wouldn't look smooth if everything moved at *integer* coords but I moved everything by floating point so it did look smooth. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
