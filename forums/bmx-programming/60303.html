<!DOCTYPE html><html lang="en" ><head ><title >Keyboard/mouse problem after Create/SetGraphics()</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Keyboard/mouse problem after Create/SetGraphics()</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Keyboard/mouse problem after Create/SetGraphics()</a><br><br>
<a name="672248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Code below should exit on ESC or LMB - neither works.  Seems that nothing from PolledInput is working.  Have Quickbuild off, Debug on/off makes no difference, gl/dx makes no difference, have rebuilt all mods.<br><br>I also seem to be suffering from a 50% drop in FPS since upgrading from 1.18 to 1.20 when running under DX.<br><pre class=code>gfxObject:tGraphics = CreateGraphics(800,600,0,60,GRAPHICS_BACKBUFFER)
SetGraphics gfxObject
While (Not KeyDown(KEY_ESCAPE)) And (Not MouseDown(1))
  Delay 1
Wend</pre> <br><br></td></tr></table><br>
<a name="672251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is in the source code for EnablePolledInput()<br><div class="quote"> <br>Rem<br>Currently only called by Graphics/bglCreateContext.<br>Private for now, as it really needs a source:object parameter.<br>End Rem<br> <br></div><br>So apparently CreateGraphics nor SetGraphics enables the Polled input. <br><br></td></tr></table><br>
<a name="672253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As TomToad mentions, CreateGraphics alone does not enable polled input.<br><br>What's wrong with just using 'Graphics'? <br><br></td></tr></table><br>
<a name="672259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... nothing.<br><br>I came across this issue as part of my investigation into why my game's FPS has dropped from 30fps to 15fps simply by updating from 1.18 to 1.20. <br><br></td></tr></table><br>
<a name="672292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ha this one caught me out too a while ago. <br><br></td></tr></table><br>
<a name="672312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why is it you chose to enable polled input in the Graphics command, Mark? :)<br><br>Just seems strange as they're pretty unrelated :) <br><br></td></tr></table><br>
<a name="672340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just as a little side-note here... is it possible to manually enable PolledInput after using CreateGraphics(), then?  I can't find anything in the documentation pertaining to this. <br><br></td></tr></table><br>
<a name="672344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grey Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> guess what ... EnablePolledInput() :-D<br><br>Although I've just got rid of PolledInput from my framework to use event-based input instead. <br><br></td></tr></table><br>
<a name="672407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Grey said.  I use it to enable polled input when I'm in Windowed mode so I don't have to have two sets of input fuctions and I don't have to keep track fo the state of every key myself.  The only caveat there is you need to make sure you enable the canvas each frame or else the input will go elsewhere. <br><br></td></tr></table><br>
<a name="672483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> guess what ... EnablePolledInput() :-D <br></div>How the hell do you find this stuff in the documentation?  I still can't find that! <br><br></td></tr></table><br>
<a name="672489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not in the docs.  I found it when I was trying to debug, and clicked the source button at the top of the section with the graphics function, and looked in the graphics function to see the command there, unhighlighted. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
