<!DOCTYPE html><html lang="en" ><head ><title >Playing NSF Files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Playing NSF Files</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Playing NSF Files</a><br><br>
<a name="910451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to be able to play Nintendo .NSF files in BMax (NES tunes). Would it be possible? Can anyone give me any helpful pointers?<br><br>I know that I could simply convert them into another format but I`m after the small file sizes that this format offers.<br><br>Thanks for any advice.<br><br>Jason. <br><br></td></tr></table><br>
<a name="910462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.fly.net/~ant/libs/audio.html#Game_Music_Emu" target="_blank">http://www.fly.net/~ant/libs/audio.html#Game_Music_Emu</a><br><br>I might see if I can add it to MaxMod2 at some point. (dont hold your breath though) <br><br></td></tr></table><br>
<a name="910478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, looking at the source it'll be very easy to implement into maxmod2 ;) <br><br></td></tr></table><br>
<a name="910484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's LGPL... if you integrate the source, you'll either have to create a dll or apps will need to be GPL'd. <br><br></td></tr></table><br>
<a name="910495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I *think* any derived librarys have to be available to download in source and contain the LGPL/GPL license, and users have to make the source available to the customer (link to maxmod download).<br><br>I'll clarify this with the author if can find his email address. <br><br></td></tr></table><br>
<a name="910497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> No.. that's not how LGPL works... if MaxMod (assuming you've compiled in the LGPL source) is a static library, when you link it into your app, your must release the source to your app.<br>If MaxMod was a shared library (.so / .dll / .dylib) then that caveat (of having to provide source to your app)  wouldn't apply - which is the point of the "L" in LGPL. <br><br></td></tr></table><br>
<a name="910498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a groovy little library.. I've got it playing an nsf tune on Mac, via BaH.BASS.<br>Very cool indeed :-) <br><br></td></tr></table><br>
<a name="910502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I've got it going as well, it sounds pretty good :)<br><br><div class="quote"> <br>  6. As an exception to the Sections above, you may also combine or<br>link a "work that uses the Library" with the Library to produce a<br>work containing portions of the Library, and distribute that work<br>under terms of your choice, provided that the terms permit<br>modification of the work for the customer's own use and reverse<br>engineering for debugging such modifications.<br><br>  You must give prominent notice with each copy of the work that the<br>Library is used in it and that the Library and its use are covered by<br>this License.  You must supply a copy of this License.  If the work<br>during execution displays copyright notices, you must include the<br>copyright notice for the Library among them, as well as a reference<br>directing the user to the copy of this License.  Also, you must do one<br>of these things:<br><br>- snip -<br><br>    d) If distribution of the work is made by offering access to copy<br>    from a designated place, offer equivalent access to copy the above<br>    specified materials from the same place.<br><br> <br></div><br><br>dunno, I'll have a talk to a legal bloke I know, when I bump into him again. <br><br></td></tr></table><br>
<a name="910504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's fine... if you are <b>dynamically</b> linking the code, everything rocks.<br><br>There have been numerous posts here in the past that discuss this.<br><br>Unless the license with the library specifically exempts <b>static</b> linking (like wxWidgets does, for example), then by statically linking, you must also include the source to the app you are statically linking into. <br><br></td></tr></table><br>
<a name="910506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Static linking counts as a "derived work", which turns such code into GPL... as if by magic :-p <br><br></td></tr></table><br>
<a name="910509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>6. As an exception to the Sections above, you may also <b>combine or<br>link</b> a "work that uses the Library"...<br> <br></div><br><br>clutching at straws here ;) <br><br></td></tr></table><br>
<a name="910510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's an example of an exemption for FLTK - an LGPL'd library :<br><div class="quote"> <br>3. Static linking of applications and widgets to the FLTK library does not constitute a derivative work and does not require the author to provide source code for the application or widget, use the shared FLTK libraries, or link their applications or widgets against a user-supplied version of FLTK. <br></div><br>Full license here : <a href="http://www.fltk.org/COPYING.php" target="_blank">http://www.fltk.org/COPYING.php</a> <br><br></td></tr></table><br>
<a name="910511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> maxmod will be the "derived work" and anyone using will be "work that uses the Library" and get away with supplying a link to the library...? Its all to poxy complicated for me... :) these licenses send you round in circles. <br><br></td></tr></table><br>
<a name="910512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Basically, if something says LGPL, and you don't see any exemptions, it's dynamic linking only... or you GPL your stuff.<br><br><br>Anyhoo, I've managed (after bloody ages of hacking a makefile together) a Mac .dylib, which is running great.<br>I expect Windows to be an utter pain in the arse to get working this way... but if it isn't such a bother, I might knock out a proper module for it. <br>The basics are working well :<br><pre class=code>
Local music:TMusicEmu = TMusicEmu.Create("ff3.nsf", 44100) ' load final fantasy 3 music :-)

If Not music Then
	Print "Error..."
	End
End If

Print "Tracks = " + music.TrackCount()

music.StartTrack(2)

...
... some BASS init/play stuff
...

Function callback:Int(handle:TBassStream, buffer:Byte Ptr, length:Int, user:Object)
	TMusicEmu(user).Play(length / 2, buffer)
	Return length
End Function
</pre> <br><br></td></tr></table><br>
<a name="910515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> maxmod will be the "derived work" and anyone using will be "work that uses the Library" and get away with supplying a link to the library...? <br></div><br>*only* if maxmod is a dll/shared library.<br>As soon as you statically link anything, it becomes a "derived work". Doesn't matter if you make a library yourself which statically links (or compiles in) the LGPL'd library, which is then itself statically linked in. At each point of a static linking, it becomes LGPL... and so on... and so on.<br><br>That's why they call GPL, viral :-) <br><br></td></tr></table><br>
<a name="910517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> last chance...<br><div class="quote"> <br>6. As an exception to the Sections above, you may also <b>combine</b> or<br>link a "work that uses the Library" with the Library to produce a<br>work containing portions of the Library, <b>and distribute that work<br>under terms of your choice</b>, provided that the terms permit<br>modification of the work for the customer's own use and reverse<br>engineering for debugging such modifications.<br> <br></div><br><br>I'll wait and see what the author thinks.<br><br>there is more holes in this license than my lucky pair of pants ( which actually only has one, rather large hole in the front :P ). <br><br></td></tr></table><br>
<a name="910537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where do your feet go? <br><br></td></tr></table><br>
<a name="910575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for looking into this, please let me know what the outcome is. <br><br>Ideally I would like to be able to jump to different patterns\positions in the files (such as subsongs, as one file can contain many), loop them, vary the volume\speed etc... Would this be possible to achieve relatively easily?<br><br>Thanks for your time with this, it is very much appreciated :)<br><br>Jason. <br><br></td></tr></table><br>
<a name="910589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's something I just knocked together (win32), if you'd like to try it...<br><br><a href="http://brucey.net/programming/blitz/misc/stuff/bah_gme_example.rar" target="_blank"> bah_gme_example.rar</a> (308kb)<br>You can drop me marks on presentation :-p<br><br>This example uses BASS for audio playback, but it should be fairly easy to get it playing through most audio libs... probably.<br><br>&lt;edit&gt;Oh, and of course, this *is* LGPL friendly, so in theory you can ship it with your closed-source work&lt;/edit&gt; ;-)<br><br><br>... donations of encouragement always welcome... :-) <br><br></td></tr></table><br>
<a name="910591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there is more holes in this license than my lucky pair of pants ( which actually only has one, rather large hole in the front :P ). <br></div><br><br><div class="quote"> Where do your feet go? <br></div><br><br>my thoughts exactly and how do you get in considering the top is a hole too :p<br><br>...<br><br>but on lgpl/gpl<br>they should make it PERFECTLY CLEAR when you can link a file that is NOT going to be compiled into the exe that you have to gpl it or not, no quasi legal speak<br><br>include thisgpl.h = gpl code<br>link to this .dll not gpl code<br>that kinda thing, cos although your program needs this file in order to work, its not modifing the dll its just using it and if said dll gets deleted the program ceases to work (or atleast breaks in parts)<br>whereas if it is included code it will be a part of the exe <br><br></td></tr></table><br>
<a name="910597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >popcade</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about making it a seperate module like<br><br>maxmod.nsf<br><br>and not to include it by default, those who want to use NSF format will follw the rule.<br><br>BTW..... well, most NSF file has copyright issues if they're from roms. <br><br></td></tr></table><br>
<a name="910623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> That`s not a problem as they are custom made .NSF files.<br><br>Thanks Brucey, I`ll give it a go.<br><br>Jason. <br><br></td></tr></table><br>
<a name="910625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's an issue with that code, because of the BASS callback into max-code - it's using the default GC, which doesn't handle external callbacks very well - can cause object errors, and other nasty things.<br><br>However, I've rewritten it to use a kind of "plug-in" modular system, which avoids this issue by running the callbacks in C++ (but it's hidden from the user).<br>This should also make it easy to plug in other audio modules, like OpenAL - just needs a driver module, which you import.<br><br>Still messing around with it... :-p <br><br></td></tr></table><br>
<a name="910630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >QuickSilva</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just tried it and it works great! Would it be easy to get the other formats working too like .SPC (SNES), AY (ZX Spectrum) and so on? <br><br>Jason. <br><br></td></tr></table><br>
<a name="910644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Brucey</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I tried loading an spc and it worked fine. <br><br></td></tr></table><br>
<a name="910669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Where do your feet go? <br></div><br>I dont have any... no, seriously... :P<br><br><div class="quote"> my thoughts exactly and how do you get in considering the top is a hole too :p <br></div><br>ah, ya got me, ok I've got four holes in my imaginary lucky pants :) <br><br><div class="quote"> How about making it a seperate module <br></div><br>yeah, it would be, all formats are in maxmod.<br><br><div class="quote"> However, I've rewritten it to use a kind of "plug-in" modular system, which avoids this issue by running the callbacks in C++ (but it's hidden from the user).<br>This should also make it easy to plug in other audio modules, like OpenAL - just needs a driver module, which you import. <br></div><br>This is how maxmod2 handles things, modules for audiodrivers (directsound and openal) and modules for audio formats (ogg,mp3,flac etc and my own mod/xm library) all done in c++, bolted together from blitzmax and handled with the standard TChannel functions.<br><br>BTW do you mind if I nab your libs when you're finished? ;) <br><br></td></tr></table><br>
<a name="911253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dayumn, I just became redundant. ;-) haha <br><br></td></tr></table><br>
<a name="911343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I dont have any... no, seriously... :P<br><br>ah, ya got me, ok I've got four holes in my imaginary lucky pants :)  <br></div><br>Now I'm -really- confused : why would you imagine a pair of pants with more holes than you need?  =] <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
