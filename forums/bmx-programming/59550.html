<!DOCTYPE html><html lang="en" ><head ><title >[MaxGUI] How does RedrawGadget() work with Flip()?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[MaxGUI] How does RedrawGadget() work with Flip()?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >[MaxGUI] How does RedrawGadget() work with Flip()?</a><br><br>
<a name="663628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you do a Flip() with a canvas, and you have to call RedrawGadget() to get it to be displayed, does that mean that the backbuffer is being copied twice, or does RedrawGadget() do the only copying? What's the point of having a backbuffer if when you flip you don't see anything anyway and have to call RedrawGadget()? Would a single-buffered graphics object be faster? is RedrawGadget() going to produce tearing? <br><br></td></tr></table><br>
<a name="663758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> RedrawGadget is some kind of windows internal command to tell the system that it needs redrawing. But this does not mean that the system instantly redraws it. <br><br>Don't know for the buffer stuff. In general you should not call redrawgadget yourself. It may cause flickering and tearing from my experience, yes. <br><br></td></tr></table><br>
<a name="663845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought you had to call redrawgadget() after calling flip()? That's what the example program for CreateCanvas() does every frame. Also it seemed when I took out the redrawgadget() the flip had no visible effect (ie you never see anything). <br><br></td></tr></table><br>
<a name="663885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What ReDrawGadget does is puts an EVENT_GADGETPAINT event in Window's event queue.  When Windows is first run, it sends an EVENT_GADGETPAINT to your program so it knows when to draw the canvas.  Windows will also send it when the canvas is covered, or minimized, then restored.  If your canvas doesn't get obscured at all, then Windows will not send any more EVENT_GADGETPAINT events.  If your canvas needs to be updated, like if you're running an animation or something like that, then your program will need to put an EVEN_GADGETPAINT event on the queue itself.  It does that through the RedrawGadget() function.<br>There are a few ways that your program can determine when one needs to be sent.  You can send it after the Flip command, so that way your canvas will be redrawn every time through the event loop.  Or you can create a timer, and do RedrawGadget() on each tick.  Or if there's no animations, you could just simply wait until something actually changes, like a mouse click or a keyhit before calling RedrawGadget(). <br><br></td></tr></table><br>
<a name="663888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I thought you had to call redrawgadget() after calling flip()? That's what the example program for CreateCanvas() does every frame.<br> <br></div><br>It does no such thing. <br><br></td></tr></table><br>
<a name="663907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skid, well it does it the other way around, it calls RedrawGadget() in the TIMERTICK event and then calls Flip, but what I was saying was I personally found this slightly confusing and by the name of the command being "redraw" gadget, it sort of suggests something gets drawn. Thanks for the clarification, though.<br><br>How would one go about detecting that the gadgetpaint request came from the o/s and not from out own TIMERTICK trigger? And how can you check if something is minimized/maximized?<br><br>TomToad, that's a nice explaination, thanks. I guess I thought RedrawGadget() actually DID some kind of redrawing, but it's more indirect. I can see how it's a good way to have the same piece of code being called for the refreshes rather than duplicating code.<br><br>I took out a bunch of unneeded extra Flip() calls - I was doing both Flip() and RedrawGadget(), doh, even though GADGETPAINT was doing a flip as well.<br><br>Could you just do a Flip() on each TIMERTICK event though, right, rather than put an event in the queue only to have the code executed under a different event? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
