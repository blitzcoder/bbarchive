<!DOCTYPE html><html lang="en" ><head ><title >execute from memory</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >execute from memory</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >execute from memory</a><br><br>
<a name="1087873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Is it possible to execute a program directly from a bank in memory?<br><br>Ie. if i createbank(size of binary file) and read contents of the binary file into the bank, how can i then execute the binary file directly from the bank? <br><br></td></tr></table><br>
<a name="1087875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The processor on most computer these days supports DEP (data execution prevention) , which is enabled by default under Windows and would prevent such a thing from running.<br><br>It's a good thing, since that is how a lot of viruses would otherwise manage to compromise your computer if they get on there through some buffer overflow. <br><br></td></tr></table><br>
<a name="1087876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ziggy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have the file, why don't you execute it directly? I mean, if you want to execute a file, there's a way to do it. If you're trying to make something specific, maybe a bit more of information would help us helping you. <br><br></td></tr></table><br>
<a name="1087877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see... But I would like to know how anyway, I'm not into making viruses, but I support the other side... This would help me in making an elf encrypter.... anyone? <br><br></td></tr></table><br>
<a name="1087924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can anyone contribute to this? Ram streams? <br><br></td></tr></table><br>
<a name="1087926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surely there's a programmatic way to do this, for like when apps run plugins? <br><br></td></tr></table><br>
<a name="1087927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the very least could you not save it to disk, then run it from there? <br><br></td></tr></table><br>
<a name="1087930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> executing from memory is not difficult. just write your code to memory and set the function pointer. You just have to be careful. <br>Check the post in my sig for an example. <br><br></td></tr></table><br>
<a name="1178065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this topic is old, but I'm trying to achieve this.<br><br>I've incbinned an encrypted elf file, I then decrypt it to memory....<br><br>Does anyone know how to execute it from memory? <br><br></td></tr></table><br>
<a name="1178067"></a>

<a name="1178068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...Did you learn anything from <a href="/posts.php?topic=87470" target="_blank">GW's "interpreter"</a>? Because that's exactly what that code does.<br><br>Other things you might want to take a look at include <a href="http://bellard.org/tcc/" target="_blank">TCC</a> and <a href="http://www.gnu.org/software/lightning/" target="_blank">GNU <i>lightning</i></a>, both of which build and execute code directly in memory. There are BlitzMax wrappers for both floating around somewhere. <br><br></td></tr></table><br>
<a name="1178069"></a>

<a name="1178076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes i learned alot there.<br><br>Does anyone know at which offset the start address of an elf is?<br><br>Oh and I didn't find the wrapper for gnu lightning <br><br></td></tr></table><br>
<a name="1178108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does anyone know at which offset the start address of an elf is? <br></div><br><br><a href="http://wiki.osdev.org/ELF" target="_blank">http://wiki.osdev.org/ELF</a> <br><br></td></tr></table><br>
<a name="1178183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zzz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a world of difference between just executing some code on the fly and executing a proper exe file on the fly.. Im not even sure if that is possible in a &gt;0 ring environment since you (afaik) must be able to set up memory mapping and stuff yourself. Although I havent tried it so I might be wrong :) Id look around for the source/documentation on how other file compressors or encrypters do it. <br><br></td></tr></table><br>
<a name="1178206"></a>

<a name="1178210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sub_Zero</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I know you are right, there's extractions of elements from the elf file, relocating the data (i remember relocating from the old 6510 days), and possibly flag the memory as executeable with write permission.<br><br>The relocation is important, as jmp and such instructions has to be relocated properly. Wish i had some of my old code from the 64 and maybe a cody of turbo assembler to have a look at it.<br><a href="http://docs.oracle.com/cd/E19082-01/819-0690/chapter6-62988/index.html" target="_blank">http://docs.oracle.com/cd/E19082-01/819-0690/chapter6-62988/index.html</a> <br><br></td></tr></table><br>
<a name="1178218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zzz</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the operating system would have to load the executable to ram before doing any funky stuff too, so I guess its a question of if that functionality is exposed to the users or not. For unix stuff I wouldnt be suprised if it is :) I tried a bit of googling but couldnt find anything useful though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
