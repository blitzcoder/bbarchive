<!DOCTYPE html><html lang="en" ><head ><title >MaxIDE - Linux version - UTF problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MaxIDE - Linux version - UTF problem</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=109" >Linux Discussion</a>/<a href="#bottom" >MaxIDE - Linux version - UTF problem</a><br><br>
<a name="1059910"></a>

<a name="1059911"></a>

<a name="1059912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to use the latest MaxIDE (compiled from the source code available in the account section).<br>In general it works well, until I try to load source code with UTF character set in it.<br><br>After some experiment I found where is the problem:<br><pre class=code>
Function CacheAndLoadText$(url:Object)
	Rem
	  Local tmpResult$
	  Local tmpBytes:byte[] = LoadByteArray(url)
	  url = CreateRamStream( tmpBytes, tmpBytes.length, True, False )
	  tmpResult = LoadText(url)
	  TRamStream(url).Close()
	  Return tmpResult
	End Rem
	Return LoadText(url)
EndFunction
</pre><br>For some reason to accelerate the loading process it was used a 'cached ram stream'. Unfortunately the LoadByteArray (or CreateRamStream) seem to cut some informations - under Linux - with erroneus and truncated string if these contain UTF characters.<br><br>I resolved removing the caching process, but I suspect there's somewhere a bug while loading streams...<br><br><font class="tiny">Last edited 2010</font><br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1059918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh... my solution allow to 'load' and display the correct UFT string in MaxIDE, but when the program is compiled I get the same result: truncated string. <br><br></td></tr></table><br>
<a name="1059952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> For some strange reason I decided to run MaxIDE CE and... voitlà! It works!<br><br>I can read and run applications with UTF character in it!<br><br>Bah! Well... resolved! <br><br></td></tr></table><br>
<a name="1060190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SebHoll</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume you are using the GTK+ build of MaxIDE CE?<br><br>The FLTK library itself only became UTF8 compliant very recently (in 1.3.x) and so FLTKMaxGUI still uses the older ANSI string passing routines to call C-base glue code.  As such FLTKMaxGUI is not unicode compliant - I'd guess that the FLTK build of MaxIDE CE would have the same issues. <br><br></td></tr></table><br>
<a name="1060203"></a>

<a name="1060206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> My fault...<br><br>I'm using MaxIDE-CE FLTK version.<br>I think I've made some confusion.<br>Just tried to open an 'original' source file with UTF character and the strings are 'truncated'.<br>To resolve the problem I opened the source file with another editor (gedit), copied all the source and pasted in the MaxIDE-CE, then saved it.<br>Once saved - for some magic - I can reopen it without problems.<br><br>So why a copied text can be saved &amp; loaded 'correctly'?<br><br>Why I'm using MaxIDE-CE? Because I cant' copy&amp;paste in the 'default' MaxIDE.<br><br>So the problem is still here (but I found a sort-of-solution...)<br><br>PS: I've tried to compile via console with BMK MAKEAPP command to see if the problem could be resolved, but I got the same problem.<br><br>edit:<br><br>Btw, where can I find a 'ready &amp; working' MaxIDE-GTK?<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1060212"></a>

<a name="1060215"></a>

<a name="1060217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is a sticky thread in the Linux section of this site promoting the GTK version.<br><br>The thread has the unhelpful title of "Linux IDE... is it just me or...? (" so possibly not as well promoted as I thought.<br><br>With a little community involvement we can hopefully bring this issue undercontrol.<br><br>The latest version of ordinary MaxIDE for linux is here : <br><br><a href="http://sourceforge.net/projects/maxgui/files/" target="_blank">http://sourceforge.net/projects/maxgui/files/</a><br><br>with the file name maxide_linux_142_beta.tar.gz <br><br>Copy and Paste should work well, but unicode support is perhaps in a state of disrepair? UTF8 should not require any difference in calling conventions for the API so I am interested if any of the gadgets have got some limited unicode support already.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1060308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >degac</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ohh! Ok thanks!<br>I will try the GTK version.<br><br>Just for curiosity, the problem of UTF support is in the loading phase, or in textareatext gadget?<br>Because once I paste&amp;copy the problem disappears (MaxIDE-CE).... so maybe the problem is elsewhere <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
