<!DOCTYPE html><html lang="en" ><head ><title >sound.samples not 16 bit - PLEASE HELP!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >sound.samples not 16 bit - PLEASE HELP!</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >sound.samples not 16 bit - PLEASE HELP!</a><br><br>
<a name="910496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have no shame of sounding desperate here! <br><br>BlitzMax doesn't seem to create 16 bit sample data for the audio, or do I miss something?<br><pre class=code>
Strict
Local sample:TAudioSample=CreateAudioSample(10000, 44100, SF_MONO16BE)

For Local i = 0 To 10000
	sample.samples[i] = Sin(i*3.6)*127
Next

Local sound:TSound = LoadSound(sample)
Local channel:TChannel = CueSound(sound)
ResumeChannel channel
Input
</pre><br>  <br>sample.samples[] will not contain floating point data!<br><br>What am I doing wrong? How can I get to write, read and play floating point data through BRL.Audio?<br><br>Any answer will do... "impossible!", "sure you can, good luck!" or "I dunno whatcha talking about?!". Anything would help, really. I've already written a beautiful interface with fully zoom, pan and editable markers for volume on samples. Just now I decided to go deeper and find out I'm stuck with 8bit data... tell me that can't be, please!<br><img src="http://www.taron.de/Storage/blitzmax/synth01/synth01.jpg"><br><br>BTW, I've tried writing data into memory and using the static audio, but it turns out to have the same troubles. It only needs integer arrays as far as I can tell?! <br><br></td></tr></table><br>
<a name="910500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local AudioPtr:Short Ptr = Short Ptr(sample.samples)
For Local i = 0 To 10000
	AudioPtr[i] = Sin(i*3.6)*5000
Next</pre><br>sample.samples is a byte pointer, so anything you write to it will only be in bytes, so you need to use a short pointer for 16bit sound.<br><br>floating point audio is 32bit and not supported by blitzmax audio. <br><br></td></tr></table><br>
<a name="910501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> THANKS, particularely for the quick reply, I had no hopes there.<br><br>I've tried bytes in one of my tests with the static audio, but came to the same weirdness, that if I play the audio it still looks at it as 8bit between -127 to 127.<br><br>If I load the result of your loop, I get the same effect. Except *5000 clips the hell out of it, of course.<br><br>Am I doing something wrong in loading the sound?<br><br>(..really, thanks again for being there for me so quickly, I really appreciate it very, very much!) <br><br></td></tr></table><br>
<a name="910505"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This shows how to read 16bit samples from the sample data, if thats any help.<br><pre class=code>
Strict
Local sample:TAudioSample=CreateAudioSample(10000, 44100, SF_MONO16BE)

Local AudioPtr:Short Ptr = Short Ptr(sample.samples)
Local av:Int
For Local i = 0 To 10000
	AudioPtr[i] = Sin(i*3.6)*5000
	av=AudioPtr[i]
	If av&gt;32767 Then av:-65535		' signed shorts are not supported, so you'll need to handle it yourself
	Print av
Next

Local sound:TSound = LoadSound(sample)
Local channel:TChannel = CueSound(sound)
ResumeChannel channel
Input
</pre> <br><br></td></tr></table><br>
<a name="910507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ARRRRRRRRRRRR............<br><br>NEVER MIND!!!<br><br>(SF_MONO16LE as opposed to ...BE)<br><br>YES! The joy... THE JOOOY! THANKS!<br><br> 8) <br><br></td></tr></table><br>
<a name="910513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> REDi, honestly, I don't know how to tell you what you've done for me right now. I might sound like having some sort of bipolar happiness attack, but you've truely, deeply saved my day and brought plenty of joy for the coming days! I'll let you know, when there's something to cool enough to play with my synth, but so far it's already a riot! I've been working with audio for the last 22 years, but never once programmed anything for it on a PC (did some C64 code and a tiny bit on Amiga, but man... ). So now I can finally try what I always wanted to be able to do with really simple sound design.<br><br>Again:  YOU ROCK!<br><br>Thank's REDi! <br><br></td></tr></table><br>
<a name="910520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> my pleasure. <br><br></td></tr></table><br>
<a name="910567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> (red: volume)<br>(yellow: pitch)<br><br><img src="http://www.taron.de/Storage/blitzmax/synth01/synth01_snp2.jpg"> <br><br></td></tr></table><br>
<a name="910592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ginger Tea</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats a pretty little spiral :) <br><br></td></tr></table><br>
<a name="910637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck with this one. Looks interesting.<br>For inpiration have a look at this -- <a href="http://www.ludumdare.com/compo/2007/12/13/sfxr-sound-effects-for-all/" target="_blank">http://www.ludumdare.com/compo/2007/12/13/sfxr-sound-effects-for-all/</a> <br><br></td></tr></table><br>
<a name="910675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow that's hillarious! Awesome little tool, thanks! <br>I'm a little too happy about being very much in charge of creating funky sounds consciously and wish for them to be beyond standart identification, but I have to admit I find it very inspiring to consider some randomizing possibilities. Could be loads of fun. The best part is the categorized randoms, haha... jump, hit'n'run, coin, explosion and so on... that's wonderful. I think, once I have it all in the can, I'll have a go at that, too! 8)))<br><br>THANKS JIM... (i even saved two wavs already, too cool) ...by the way, my app won't export wavs, but just a tiny bundle of creation data. <br><br></td></tr></table><br>
<a name="910729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>Basically off-topic:</i> Although I'd seen sfxr before (and it's great), I don't think I realised it's by DrPetter, whose "RigidRacing" project I found quite interesting, mostly because of the vibration effect he introduced for high-speed driving (with 'Turbo' mode on), a combination of visual vibration effects and convincing wind noise -- it's really cool on the fast straights.<br><br><a href="http://www.cyd.liu.se/~tompe573/hp/old/project_rigid.html" target="_blank">http://www.cyd.liu.se/~tompe573/hp/old/project_rigid.html</a><br><br>Besides this, nice code example! <br><br></td></tr></table><br>
<a name="910768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh, hey James! Thanks for chiming in! :)<br>Sounds fascinating, I'll check it out right away. 8)<br><br>My little synthi is getting cooler and cooler, while I'm getting the wildest problems, though. EVENT_MOUSEUP somehow gets ignored when I do a specific move at a specific moment, while under most circumstances it works fine. Anyone has a clue why that might be? <br><br>I checked it by printing hints at all important places and found that it goes through the event loop, ignores the MOUSEUP and bounces right back into the redraw, basically getting trapped in that loop. It's during dragging, of course, where that happens. Mouseup should stop the process...<br><br>I should call this thread differently, but while it's here! <br><br></td></tr></table><br>
<a name="911369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Taron</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks again for the heads up and bearing with me...<br><br><br>Here's a link to the fruit of my struggles so far...<br><a href="http://www.taron.de/Storage/blitzmax/synth01/synth01.exe" target="_blank"> SYNTH01 - mini taronizer - alpha 0.1 </a><br><br>Don't mind the few kinks and some sloppy stuff, but it's a first look at the synth. By the end, I'm sure, it's probably not recognizable anymore, but hey... I'm incredibly thrilled!<br><br>HOTKEYS:<br>"SPACE" - play<br>"S" - save (wav format, saves incrementally, but just for fun...)<br>"DELETE" - deletes marker<br>"ESCAPE" - exit<br><br>INTERFACE:<br><br><b>toolbar</b> from left to right<br>- display resets (full reset, x reset, y reset)<br>- console (play, pause/play, stop) (I can't elegantly use the toogle gadget)<br>- waveforms (sine, saw, square, noise) <br><br><b>slider</b> for resonance (YAAUUUWWWWWW)<br><b>bipolar</b> filter option (EEEEYYYYAAAAAAAAAHHHHHUUUWWWEEEEEEeeeewww, oh god)<br><br><b>textfield</b> for optional marker value input and supervision of value dragging<br><br>DISPLAY:<br><b>bars</b><br>red - volume<br>yellow - pitch<br>cyan - filter (lowpass)<br><br>left click on a bar to create a marker!<br>right click and drag up and down for value of currently selected marker!<br>middle click and drag left/right to offset marker position<br>(beware, it's a little sloppy code so far...still gotta make it nicer!)<br><br>left click on wave display to drag the display around<br>right click to zoom around (x stays under mouse pointer, y ignores it)<br>wheel for proportional scaling.<br><br><br>Filters are still unbalanced and cause wild spiking if resonance is up. Manually compensate with the volume, but later I'll even it all out more pleasantly. I do like some of the beautiful distortion though, particulare in bipolar mode and square waves at low pitches (0.125, 0.25 or 0.5). For anyone, who understands the concept of them, you can make great melodies with it already! 8) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
