<!DOCTYPE html><html lang="en" ><head ><title >multidimensional arrays...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >multidimensional arrays...</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >multidimensional arrays...</a><br><br>
<a name="485108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know I can do this for single dimensional arrays as a shortcut:<br><pre class=code>
Global arr:Int[] = [22,38,4,5,77] ' Very handy
</pre><br>But is this correct for multidimensional arrays:<br><pre class=code>
' Two dimensional array
Global arr:Int[][] = [[2,3],[3,5]]
</pre><br>The reason I ask is because in in the source code for Bob's Bad Day (included as a sample program), there's what appears to be a 2 dimensional definition, but with too many elements:<br><pre class=code>
Global myMap[][] = [[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,1,0,1,1,1,0,1,1,1,0,1,1,1],[1,0,1,0,0,0,0,0,0,0,1,0,0,0,1],[1,0,0,0,1,1,1,1,1,1,1,1,1,0,1],[1,1,1,0,0,0,0,1,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,1,0,1,1,1,1,0,1],[1,0,1,1,1,1,0,1,0,0,0,0,1,1,1],[1,0,1,0,0,0,0,0,0,1,1,0,0,0,1],[1,0,1,1,1,1,0,1,1,1,1,1,1,0,1],[1,0,0,0,0,1,0,0,0,0,0,0,0,0,1],[1,1,1,1,0,1,0,1,1,1,1,0,1,0,1],[1,0,0,0,0,1,0,0,0,0,1,0,1,0,1],[1,0,1,1,1,1,0,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,1,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]
</pre><br>Can someone explain what's happening here?<br><br>Thanks,<br>Russell <br><br></td></tr></table><br>
<a name="485159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not just a multi-dimensional array: an array of arrays.<br><br>Each subarray can actually have different dimensions and number of fields, but they can be grouped together this way. <br><br></td></tr></table><br>
<a name="485160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's still 2 dimensional, I think the amount of elements is maybe confusing you. In your line above, myMap = an array of size 16*15 ( a[16][15] ), so each of the slots a[16] holds an array of [15] numbers<br><br><pre class=code>
a:Int[][] = [[1,2,3],[4,5,6],[7,8,9]]
                  |   |         |
a[0][2] = 3-------^   |         |
a[1][0] = 4-----------^         |
a[2][1] = 8---------------------^</pre><br><br>Get it? :) <br><br></td></tr></table><br>
<a name="485227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local a:Int[][] = [[1,2,3],[4,5],[6,7,8,9]]

For i = 0 To (a.length - 1)
	For j = 0 To (a[i].length- 1)
		Print a[i][j]
	Next

	Print
Next
</pre><br>Here you see that subarrays really can have different amounts of indexes.<br><br>With this code, the first index of a[] has 3 values, as stated with the number of blocks ([...]) inside the whole block.<br>You see that there are 3 blocks, where the first block has 3 elements, block 2 has 2 elements and block 3 has 4 elements.<br><br>So the first (main) array has 3 indexes: a[0], a[1] and a[2].<br><br>The subindexes for each mainindex are counted by the number of elements inside each block.<br>So, at mainindex 0 (a[0]), there are 3 subindexes, because there are 3 elements to be stored ([1,2,3]).<br>At mainindex 1 (a[1]), there are only 2 subindexes.<br>At mainindex 2 (a[2]), there are 4 subindexes.<br><br>After this declaration (first line of code), you have this setup:<br>a[0][0] = 1<br>a[0][1] = 2<br>a[0][2] = 3<br><br>a[1][0] = 4<br>a[1][1] = 5<br><br>a[2][0] = 6<br>a[2][1] = 7<br>a[2][2] = 8<br>a[2][3] = 9<br><br>Here you see clearly the each mainindex has different amounts of subindexes.<br><br>But can anyone explain why<br><pre class=code>
Local a:Int[][] = [[1,2,3],[4,5],[6,7,8,9]]
</pre><br>works and<br><pre class=code>
a:Int[][] = [[1,2,3],[4,5],[6,7,8,9]]
</pre><br>throws up the error: "Expecting expression but encountered '='"? <br><br></td></tr></table><br>
<a name="485438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tom: Yeah, multidimensional arrays are not explained very well in the manual so I had to do some experiments. I finally figured it out (the shortcut method). Allowing different numbers of elements like in PowerPC603's example threw me a bit at first.<br><br>I discovered that no warnings or error messages are given if not all of the elements are given values. (I assume that they are initialized to NULL in this case - Could be wrong. I'll check it out.). This confused the heck out of me, I have to say. This seems to depart quite a bit from other BASICs.<br><br>A three dimensional array can be created like this:<br><pre class=code>
Global Arr:Int[][][] = [ ..
		       [ [1,2],[3,4],[5,6],[7,8] ], ..
		       [ [9,10],[11,12],[13,14],[15,16] ] ..
    		       ]
' Is equal to:
Global Arr:Int[2][4][2]

Arr[0][0][0] = 1
Arr[0][0][1] = 2
Arr[0][1][0] = 3

' and so on...
</pre><br>(Thank God for the line extension characters ".."!). And yeah, any of them can be left out (un-initialized). It's weird, but I understand it now (I think).<br><br>Thanks everyone,<br>Russell <br><br></td></tr></table><br>
<a name="485449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so if I have an array like this:<br><pre class=code>
Global Arr:Int[][] = [[1,2,3],[4,5]]
</pre><br>...it works. But is there a way to add that 3rd element to the second index after-the-fact? Just wondering. Turns out they are not NULL or maybe they are, but BM won't compile if I reference a 'ghost' element:<br><pre class=code>
If Arr[1][2] = NULL Then Print "Null!"
</pre><br>...will generate an error.<br><br>Is it possible?<br><br>Russell <br><br></td></tr></table><br>
<a name="485452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you do it like this...<br><pre class=code>local arr:Int[][] = [[1,2,3], [4,5]]

arr[1] = arr[1][..3]

arr[1][2] = 6</pre>I must admit, I get a bit confused with the syntax of all this arrays of arrays stuff too.<br><br>[edit]Just tried it and it seems to work okay....Yipee ;o)[/edit] <br><br></td></tr></table><br>
<a name="485672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can also do it like this:<br><pre class=code>
Local arr:Int[][] = [[1,2,3], [4,5]]

arr[1] = arr[1][..(arr[1].length + 1)] ' Add a new element to the second index (subarray)

arr[1][2] = 6
</pre><br><br>This way you don't have to worry about the number of indexes inside the subarray (second index).<br>This really is some sort of "add new element" method. <br><br></td></tr></table><br>
<a name="485730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Muttley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know why I can't do this:<br><pre class=code>Global mapArray:Int[20][15]</pre><br>It just returns a "Compile Error:Expression of type 'Int Array' cannot be invoked"<br><br>Must admit, arrays are confusing the hell out of me too.  :(<br><br>Muttley <br><br></td></tr></table><br>
<a name="485764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Squating Neville: Thanks, but how did you figure that out? Is there a section of the manual I don't know about or are you and Mark neighbors ;) I've noticed a lot of this "inside information" stuff going on in recent months. Is there some club I need to join? ;)<br><br>@PowerPC603: Can you explain your example? It is as clear as mud to me! It looks like it is utilizing slices (which I haven't investigated yet). Is that correct?<br><br>@Muttley: Where did you place this statement (not that it should matter), in the main loop? I can't see anything wrong with it, but I did discover that if you have like 20 dimensions it will go looney and also, if you name a variable "b?" (or any variable with a '?' in it) the program will immediately stop. No error. Just full stop.<br><br>Thanks for the replies all,<br>Russell<br><br>p.s. This should be in the manual! <br><br></td></tr></table><br>
<a name="485826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaVirus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info everyone, I think I'm getting the hang of this also.  I seem to be having a little trouble with a 2D array of 2D arrays.  The following...<br><pre class=code>
Strict

Local array[,][,]
array=New [10,10]

For Local y=0 Until 10
	For Local x=0 Until 10
		array[x,y]=New [10,10]
	Next
Next

For Local y=0 Until 10
	For Local x=0 Until 10
		For Local yy=0 Until 10
			For Local xx=0 Until 10
				array[x,y][xx,yy]=Rnd(255)
			Next
		Next
	Next
Next
</pre><br><br>seems to compile and run OK but when the executable closes it crashes.  Does this work properly for anyone? <br><br></td></tr></table><br>
<a name="485975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local arr:Int[][] = [[1,2,3], [4,5]]

arr[1] = arr[1][..(arr[1].length + 1)] ' Add a new element to the second index (subarray)

arr[1][2] = 6
</pre><br>Yep, the second line uses slices to resize the array.<br><br>When using arrays of arrays, BMax uses the first index as a pointer to other arrays (the second index), that's my guess.<br>So the first line states that there is an array "arr", that holds pointers to two other arrays (as there are 2 blocks defined), where the first array holds 3 elements and the second holds 2 elements.<br>That's why there can be subarrays of a different size for each index of the main array (arr).<br><br>arr[1] = arr[1][..(arr[1].length + 1)]<br><br>The second line works like this:<br>At index arr[1], there's a pointer to an array of size 2 (the array which holds the values 4 and 5).<br>So, the .length method returns "2" (because that array has 2 elements).<br>We want to resize the array, so it can hold 1 more element, so we do "arr[1].length + 1", which gives us "3".<br>The slicing resizes the array with this new value 3, so that the new array has 3 elements inside it.<br><br>The last line places a new value (6) inside this new index, that we've just created by resizing the array. <br><br></td></tr></table><br>
<a name="486378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the explanation all!<br><br>@Tea Virus: I think you're missing something in the third line 'array = New [10,10]'. Still learning this myself, so I could be wrong. Try defining the whole size of the array in one step like this, instead:<br><pre class=code>
Local array:Int[10,10][10,10]
</pre><br>Let us (well, me!) know if that helps.<br>Russell <br><br></td></tr></table><br>
<a name="486582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaVirus</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Russell,<br>Thanks, but when I try that I get "Expression of type Int Array can't be invoked".<br><br><pre class=code>Strict

Local array:int[,][,]
array=New [10,10]

For Local y=0 Until 10
	For Local x=0 Until 10
		array[x,y]=New [10,10]
	Next
Next</pre><br>Just trying to initialize the array like this the executable seems to just sit there with the CPU utilization at 100%.  It eventually needs to be manually stopped.  Seems like something like this should work if you can have a 2D array of 1D arrays but maybe not.  I'll keep trying and post if I find a solution. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
