<!DOCTYPE html><html lang="en" ><head ><title >More timing problems (bug in DX drivers?)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More timing problems (bug in DX drivers?)</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >More timing problems (bug in DX drivers?)</a><br><br>
<a name="799090"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pete Rigz</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, made a start on a little top down game and after reading some of the excellent posts here on timing code I implemented HrdNutz timing code (thank you very much for that!). Both in windowed mode and full screen with either flip 0 or 1 it was silky smooth, didn't even notice the tiniest of glitches. Great.<br><br>So then I started on a little particle engine for it in a separate program, implemented the same timing code and it jittered all over the place, seemed ok in full screen but in windowed with flip 1 it was crazy. I couldn't understand why the game engine I was doing with the same timing code was so smooth in all modes but this wasn't.<br><br>Anyway, after process of elimination I reduced both main loops to just this:<br><br><pre class=code>
Graphics 800,600
While Not KeyDown(KEY_ESCAPE)
	Cls
	
	dt = MilliSecs() - t
	t = MilliSecs()

	DrawText dt,0,0

	Flip 1
Wend
</pre><br><br>When I ran this on the particle side of things dt flicks between 0, 16 and 17, so i figured it must be swings from 0 to 16/17 that's causing those jitters. The game code however simply flickered between 16/17, but why? Turns out that at some point I'd put<br><br><pre class=code>
SetGraphicsDriver GLMax2DDriver()
</pre><br><br>in the game code and that was smoothing things out. So for some reason the dx drivers (which i assume are set as default) seem to not bother waiting for a sync every other frame. Maybe just my PC? It's Vista, maybe a dx 10 issue? I dunno, I've had enough confusion for now so I'm happy to stick with the GL drivers :)<br><br>Bizarrely, putting a delay 1 before the flip goes some way to smoothing things out. <br><br></td></tr></table><br>
<a name="799121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> opengl has just been the best hands down on any "XP" machine that I've tried.  Even laptops with old S3 chips run opengl better and much faster than BlitzMax's DX implementation (again in XP).  that's just my experience though. <br><br></td></tr></table><br>
<a name="799126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MGE</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're not using delta timing you will notice the jitters heavily if your render loop misses a vsync or 2. Also, check your DirectX dirvers to make sure VSYNC is not disabled, if it is, nothing via software can change it, you would need to change it on your driver settings. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
