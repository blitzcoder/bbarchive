<!DOCTYPE html><html lang="en" ><head ><title >How to draw to a buffer?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to draw to a buffer?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >How to draw to a buffer?</a><br><br>
<a name="467793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cant find any commands that allow you to draw an image to an intermediate image/buffer....they all draw direct to the screen. <br><br></td></tr></table><br>
<a name="467795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Direct on the backbuffer you mean, from where you can grab them again as image or pixmap<br><br>You can't draw onto a buffer <br><br></td></tr></table><br>
<a name="468050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You would probably have to use pixmaps so that you can copy an area from one pixmap to another. Images are usually kept in videoram as openGl textures, although you can get the image's pixmap and write to that. Not sure exactly what command you would use though. <br><br></td></tr></table><br>
<a name="468064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can get two pixmaps (either from images or as standalone pixmaps), and use copymem to copy the data, or some custom routine? I find it a little bit awkward that in BlitzMax you are only allowed to do PeekLong and PokeLong (and such) to Banks, not just to whatever memory pointer you have. <br><br></td></tr></table><br>
<a name="468359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nah, looks like it can be done by going into the raw opengl mode. <br><br></td></tr></table><br>
<a name="486443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to know this too, as there's no sign of SetBuffer ImageBuffer(etc). CreateImage, is in the mix. But the most handy and useful of commands is missing. And not talking about OpenGL - normal 2D drawing.<br><br>Any ideas, and will it be featured in the Modules? <br><br></td></tr></table><br>
<a name="486533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im also missing this very much :/ <br><br></td></tr></table><br>
<a name="486544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> More discussion...<br><a href="/posts.php?topic=42118" target="_blank">here</a><br>and in the 'Feature Requests thread.<br>I think it's unlikely they'll be included but I'd like to be proved wrong. <br><br></td></tr></table><br>
<a name="486550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>SetBuffer</b> is an absolute must though.<br>Everyone uses it, and it's proving really annoying that it isnt present in BMAX. And there's going to be many many more people asking for it, once BMAX windows is out of Beta. <br><br></td></tr></table><br>
<a name="486553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree. <br><br></td></tr></table><br>
<a name="486625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OpenGL doesn't support it in base form, though I believe extensions allow it (meaning it won't work on all cards). I think Mark wants to make sure the base stuff is covered before getting into extensions... <br><br></td></tr></table><br>
<a name="486673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder how libraries like SDL manage it. I think SDL works on OpenGL 1.1. <br><br></td></tr></table><br>
<a name="486685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> so is there then a work around?<br>Please bring it into BMAX though, as Buffers are golden. <br><br></td></tr></table><br>
<a name="486712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how SDL manages it. It could be based on stuff similar to what BMAX already offers: drawing to BackBuffer and then grabbing the image / manipulating pixels of pixmaps.<br><br>In general BMAX should be fast enough to prevent the need to draw to other buffers. <br><br>Has anyone really faced a situation in which they really need drawing to another buffers? <br><br></td></tr></table><br>
<a name="486729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Has anyone really faced a situation in which they really need drawing to another buffers? <br> <br></div><br>It all depends what has changed in Bmx since Blitzbasic<br>where the doc states...<br>"There are 1000 reasons for this command. Simply put, you may want to 'draw' on an existing image you've loaded (LoadImage or LoadAnimImage) or created (CreateImage). You could, for example, have a blank wall graphic and you want to add 'graffiti' to it based on the user action (Jet Grind Radio baybeee! Sorry...). Instead of trying to draw a dozen images all over the wall, just use the SetBuffer command to denote the wall graphic as the 'target' buffer, and draw away! Next time you display that graphic (DrawImage), you will see your changes! This is a powerful command!"<br>It was deemed important then (and I used it quite often) and, from it's omission, I guess it's deemed unimportant now. I'm just not sure why it's no longer necessary. <br>We can draw to the backbuffer but we could have done that in BlitzBasic. <br>The drawing is quicker in Bmx but you have to grab and convert from/to pixmap which slows it down somewhat.<br>I'm guessing it's an OGL limitation which wasn't worth coding around. I could be wrong. <br><br></td></tr></table><br>
<a name="486730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Has anyone really faced a situation in which they really need drawing to another buffers? <br><br><br>For a drawing program with a huge image it would be handy.  Sure it could be done by doing it one step at a time on the backbuffer but it's just easier being able to do it on the buffer. <br><br></td></tr></table><br>
<a name="486733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>It was deemed important then (and I used it quite often) and, from it's omission, I guess it's deemed unimportant now. I'm just not sure why it's no longer necessary.<br> <br></div><br>Tony, could you read what I posted up there ^^^ ? I used buffers quite often too, and would now, but the core stuff (without extensions) needs to be solid for now, particularly as most platforms are still in beta. <br><br></td></tr></table><br>
<a name="486743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the past drawing on screen was relatively slow, while there was lots of memory to waste. That lead to the use of memory buffers to make actual drawing to screen faster (by having less drawing calls).<br><br>What has changed is that drawing is now handled by the hardware accelerator. It means that now drawing to screen is VERY fast, while available memory is limited. <br><br></td></tr></table><br>
<a name="486748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Write Errors Man</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> dynaman,<br><br>True, that's one case where buffers would be handy. But you must admit that it's quite an exceptional case. <br><br></td></tr></table><br>
<a name="486751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup - but it's the first thing I tried to do... <br><br></td></tr></table><br>
<a name="486754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Example, say I have some scrolling text comming across the screen, and I want to have it wobble - much better to have it set to an imagebuffer and then using DrawImageRect to give a much better sin/cos with. It how iver always done it, and it vely hard to do alot of things without setbuffer. I even tried grabimage a lot of times and it just crashed the program. for no reason at all.<br><br>Just a small plea, stick it on the list! <br><br></td></tr></table><br>
<a name="486759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kanati</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> /me uses hand signals...   <br><br>he said...  it's not gonna...  happen...  in the short term...  making sure...  CORE...  is solid...  THEN...  worky on...  extensions... <br><br></td></tr></table><br>
<a name="486764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>he said... it's not gonna... happen... in the short term... making sure... CORE... is solid... THEN... worky on... extensions...<br> <br></div><br>Thanks, though I'm not making any promises as to Mark's intentions here, with regards to extensions-based features! Just seems sensible to point out he has to at least get the base stuff solid before looking any further. <br><br></td></tr></table><br>
<a name="486774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clyde</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quite understandable BS, it's quite a job I'd of suspected to get a programming language up and running. Same goes for all at BR, nice work. And cant wait for future prospects. <br><br></td></tr></table><br>
<a name="486786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>/me uses hand signals... <br><br>he said... it's not gonna... happen... in the short term... making sure... CORE... is solid... THEN... worky on... extensions... <br> <br></div><br>/me responds using famous Agincourt handsignal and reminding Kanati that 'getkey' was a big issue at one point. I realise this is a different situation but if the command was, and is still, considered 'powerful' then I see nothing wrong in a few people requesting it, at least, gets on the 'to-do' list and, if already on, gets bumped up the list a bit.<br>I don't think anybody needs to justify why they think it's an important command as BRL have stated so. <br>The demise of the poor imagebuffer command. From 'powerful' to non-base stuff... bless it!!<br>P.S. I guess it's this...<br><a href="http://oss.sgi.com/projects/ogl-sample/registry/ARB/pixel_buffer_object.txt" target="_blank">http://oss.sgi.com/projects/ogl-sample/registry/ARB/pixel_buffer_object.txt</a><br>or maybe this...<br><a href="http://www.opengl.org/documentation/extensions/EXT_framebuffer_object.txt" target="_blank">http://www.opengl.org/documentation/extensions/EXT_framebuffer_object.txt</a> <br><br></td></tr></table><br>
<a name="486987"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ability to blit to an intermediate buffer is the backbone of decent scrolling. <br><br></td></tr></table><br>
<a name="486994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I created a maze generator (actually adapted an existing project from a TrueVision3D user), which could draw a maze of 500x500 squares.<br>In B3D I used a separate ImageBuffer to do the drawing, because the backbuffer (and frontbuffer) wasn't big enough.<br>I then saved that ImageBuffer to disk and there I had my maze in BMP format.<br><br>Without the possibility of drawing to other buffers in BMax, I cannot easily convert my B3D code into BMax.<br><br>I can also imagine that, when creating a sort of Super Mario Bros style game (horizontal scrolling of a level), it could benefit from drawing to other buffers.<br>Then you could create a new image, with the total size of the level, draw all level-data (static building-blocks) to this image at the start of the level and just draw that image to the screen, relative to the player's position.<br>If the player moves to the right, then draw that level-image a bit more to the left and you get horizontal scrolling. <br><br></td></tr></table><br>
<a name="487008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are some good points about scrolling techniques needing extra buffers. However, with faster hardware and accelerated graphics it shouldn't be a problem to redraw the entire display each frame. A preserving scroll routine is something born out of not enough CPU power on older computers. Lots of people came up with clever techniques to get things to scroll smoothly doing the minimum amount of graphics rendering each frame. But now most people are likely to have enough CPU and GPU power to just rebuild the whole screen each frame - which not only makes things a lot easier it also gives you more animation options.<br><br>However, I can definitely see that it would be desirable to have buffers to support superbitmaps. Let's say you transfer the visible portion of a superbitmap from a pixamp into a set of images, then render them, then you want to modify them in some way - e.g. deformable landscape or paint program, and store the results so that the next frame you can render the images again without having to re-copy the whole screen over from the pixmap. And when certain portions go out of view you'd want to offload them to the pixmap for storage. This would definitely need a use of buffers ie the ability to draw to textures at a fast rate. Grab Image doesn't seem to be very quick and introduces extra steps that would be otherwise unnecessary.<br><br>Still, has anyone tried using, for example, the accumulation buffer or some other buffer as temporary storage? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
