<!DOCTYPE html><html lang="en" ><head ><title >Problems using STDIN</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problems using STDIN</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Problems using STDIN</a><br><br>
<a name="731706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >doswelk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have compiled the code below into STDINTEST.EXE, and when I try to Pipe anything through it, it just siezes up. <br><br>The command that is actually causing the problem is ReadStdin(), I thought initially I was going into an endless loop during While...Wend, but this is not the case.<br><br>Any idea where I am going wrong?<br><br>Test it from a command line like this:<br>C:\Blitz\stdin&gt; Echo Hello | stdintest.exe<br><br>*****<br>WARNING: This code will hang.<br>Run it in a command window, and you may need to terminate the process manually.<br>*****<br><br>Framework BRL.StandardIO<br><br>Print "POS=" + StandardIOStream.Pos()<br>Print "IO=" + StandardIOStream.Size()<br>Print "EOF=" + Eof(StandardIOStream)<br><br>While Not Eof(StandardIOStream)<br>' THIS LINE CAUSES THE APP TO HANG<br>Print "=='" + ReadStdin() + "'=="<br>Wend<br><br>Print "STDIN done" <br><br></td></tr></table><br>
<a name="731709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know that IO commands are "locking" commands. thsi means if you read something with stdin and there isn't anything, you will have quite some time to wait as the whole app freezes at that point. <br><br></td></tr></table><br>
<a name="731738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >doswelk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, so that explains why it locks up; so how do I check if there is something there to actually get?<br><br>I would have expected WHILE NOT EOF(StandardIOstream)...WEND would have done this.<br><br>Is it locking because I need to somehow set StandardIOStream to INPUT? <br><br></td></tr></table><br>
<a name="731908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> StandardIO is a 'pure', non-seekable stream so Pos() and Size() have no meaning.<br><br>StandardIO will also never reach end-of-file.<br><br>ReadStdin blocks until an end-of-line is received, so you'll have to pipe something with an end-of-line in it instead of just 'hello'. <br><br></td></tr></table><br>
<a name="732161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fabian.</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a module containing an alternative stdio stream object. The problem is it wouldn't make sense to post the code here, since like in its current version you would need three more module from my scope just to install this one. Sadly it's win32 only.<br><br><a href="/codearcs/codearcs.php?code=1596" >fmc.StdIOStream</a><br><br>The module buffers the input data, so if there's still data in this buffer your application won't lock; you can get the buffer's size with StreamSize ( StdIOStream ( ) ); Eof ( StdIOStream ( ) ) returns True as soon as the buffer is empty and won't be filled any more. If your application is started like "Echo Hello | yourapp" it returns true if "Echo Hello" is terminated; If your app is started like "yourapp &lt; filename" it returns true if all contents of the file are read.<pre class=code>Strict
Framework brl.blitz

Import fmc.StdIOStream

While Not Eof ( StdIOStream ( ) )
  Print "==" + ReadLine ( StdIOStream ( ) ) + "=="
Wend</pre>works with this module - sorry, it would be easilier if it would be an import file or something like this or cross-plattform, but till now it wasn't possible for me to solve this... :-( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
