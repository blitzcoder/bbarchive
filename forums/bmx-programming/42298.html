<!DOCTYPE html><html lang="en" ><head ><title >Image sizes and subimages</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Image sizes and subimages</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Image sizes and subimages</a><br><br>
<a name="474012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> With OpenGL being used to rendering images, this means that images are promoted to powers of two in each direction.    As such, there's a much stronger incentive to pack frames into a single image, to avoid wasting large amounts of space. (For example, a 129x129 image turns into a 256x256 image internally.)  Unfortunately, this makes it so you can't easily rotate and scale images--and have multiple frame handles--unless you break down and write your own system using OpenGL commands.  'twould be nice to have some native support for packing images together in BMAX. <br><br></td></tr></table><br>
<a name="474013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> loadanimimage ?? <br><br></td></tr></table><br>
<a name="474016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> loadanimimage only supports a grid of equal-sized rectangles, which is not the same as packing arbitrary images into a single super-image.  For example, if you have a ten frame explosion effect, and the largest frame is 100x100 and the smallest frame is 10x10, then you don't want to use a 100x100 slot for each of them. <br><br></td></tr></table><br>
<a name="474022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> not equal sized stuff can't just be packed together ...<br>this can become quite tricky and complicated ... especially the commands you will have to use to define the position on the "pack texture" <br><br></td></tr></table><br>
<a name="474023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I've done it before, Dreamora.  Packing them is tricky, but then all you need is an array of structures indicating the UV coordinates of each frame.  The space savings can be huge.<br><br>In short, you take each frame that you're concerned with, strip out all the surrounding transparent space, then put it in its own image, packed into the upper left corner.  You need to take care to adjust the image offset properly.  Sometimes this alone can drop an image down by an entire power of two.  Then it's fine to use a naive algorithm to combine images into a single frame.<br><br>In terms of drawing them, it's probably easiest to use OpenGL commands.  Blitz seems geared toward "one image = one frame" or having a grid of frames in an image.  This is perfect for small games, not so for big ones.  You can cut your vram requirements by 2 to 4 by packing. <br><br></td></tr></table><br>
<a name="474042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW, we don't know for a fact that LoadAnimImage doesn't simply break up an image into a bunch of smaller images, each of which has its dimensions rounded up to powers of two. <br><br></td></tr></table><br>
<a name="474212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LeisureSuitLurie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not just use a timage array then, instead of loadanimimage? <br><br></td></tr></table><br>
<a name="474248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadAnimImage currently breaks up images into little seperate textures causing a hit on the framerate - see my other threads which investigate this issue in depth. <br><br></td></tr></table><br>
<a name="474571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've done this sort of thing for blitz3d - packing images into one large image (or texture) then saving the pack with a definitions file which indicates where all the individual images are within the larger image.<br>the image packer was written for a single-surface sprite sytem. see link ... <br><br></td></tr></table><br>
<a name="474971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Why not just use a timage array then, instead of loadanimimage? <br></div><br>They're equivalent: one rounded-up in size texture per image.  There needs to be a standard way around this, outside of using raw OpenGL calls.  Perhaps something as simple as specifying a rectangle in the source image, and then the 2D engine will automatically use the handle as a position in that rectangle. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
