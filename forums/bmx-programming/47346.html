<!DOCTYPE html><html lang="en" ><head ><title >Any reason to use MemAlloc</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Any reason to use MemAlloc</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Any reason to use MemAlloc</a><br><br>
<a name="526251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any reason why you should use MemAlloc when you can just create an array of bytes?  You can read from and write to it the same way, you can create a bank from it, etc. -- so why use MemAlloc over a byte array?  You even access them nearly the same way (you use [idx]).<br><br>Byte array<br><pre class=code>
Local MyData:Byte[128]

Print MyData[idx]
</pre><br><br>MemAlloc<br><pre class=code>
Local MyData:Byte Ptr = MemAlloc( 128 )

Print MyData[idx]
</pre><br><br>So, I'm wondering if there are any advantages to one or the other.<br><br>Advantages for MemAlloc:<br>- As far as I know, it's not controlled by the garbage collector, so you can pass it to an external library and it can free it later.  With a Byte array, you would have to reference it somewhere to keep it in memory (or not call FlushMem, and not calling FlushMem would be a bad idea).<br>- Dereferencing it is fun.<br>Disadvantages:<br>- MemAlloc is an ugly function name.<br><br>Advantages of the Byte array:<br>- Controlled by the garbage collector.<br>Disadvantages:<br>- You can't dereference it for fun.<br><br>So, am I missing anything from those? <br><br></td></tr></table><br>
<a name="526278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DStastny</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Only thing I can think of is there might be some compiler overhead to the array that is not present with MemAlloc<br><br>Although that might be neglibile,  I suspect internally the array has to call MemAlloc as well as do the refernce counting for the array.<br><br>I dont know for sure but logic tells me Memalloc is less code generated by the compiler.<br><br>Doug Stastny <br><br></td></tr></table><br>
<a name="526284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about this:<br><br>Local MyByte:Byte Ptr=MemAlloc(128), MyInt:Int Ptr=MyByte<br><br>MyInt[0]=5006<br>Print MyByte[0]<br><br>Its a speedy memory playhouse... can you do this with arrays? <br><br></td></tr></table><br>
<a name="526315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Local MyByte:Byte[128]
Local MyInt:Int Ptr = VarPtr MyByte[0]

MyInt[0] = 5006
Print MyByte[0]
</pre><br><br>I'd say you can, yes. <br><br></td></tr></table><br>
<a name="526346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, well, that wasnt very fair. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
