<!DOCTYPE html><html lang="en" ><head ><title >Parsing and Organizing Lua Objects</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Parsing and Organizing Lua Objects</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Parsing and Organizing Lua Objects</a><br><br>
<a name="838060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm in the process of reworking my GUI module a little bit and the main emphasis is on getting the XML layouts and Lua scripts better integrated.<br><br>The GUI has interfaces ( a group of gadgets which form one complete layout  ) and gadgets. Lua has both gadgets and interfaces represented as a table of functions, one function for each method. Simple enough but works well.<br><br>What I've done is have the function which loads an interface, parse all the gadgets it loads and automatically attach "events" ( which are BMax callbacks which in turn call Lua functions ) to them. The scripts containing those functions are automatically loaded into the VM at the same time.<br><br>That's well and good but I need some way to be able to access these objects from within Lua. I have a BlitzMax function to get an interface or a gadget by name - and it is bound to Lua - but it's clumsy having to do that every time. Up until now I was just manually creating global variables in Lua for whatever interfaces and gadgets I needed, but now that I'm trying to tidy all this up and hopefully even automate the whole kaboodle, it seems like this may not be the best way to go. I know that Lua lookups for globals are fast, but they're still being clogged up with a lot of unnecessary variables if it's automated, so a cleaner method is called for.<br><br>I'm not too well versed on Lua, just the basics. So I'm currently thinking in terms of having a nested tables for this. Essentially put all my gadget tables into a gadget table, indexed by the name of the gadget, then put the gadget table for each interface into an interface table, indexed by the name of the interface.<br><br>This should spread the load a little by indexing things in groups. It still means that I have to use a table lookup ( or two ) eachtime I want to access an object, but it doesn't have to call BMax, so the overhead is pretty light.<br><br>Does that sound like a plan or is there a better way of automatically parsing and managing my objects? <br><br></td></tr></table><br>
<a name="838855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nino</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use an numeric id but thats not much different than what you're doing.  I decided to stay away from light user data (pointers) on the Lua side but it is there if you want to use it.   You just need to be really careful with GC.<br><br>I use nested tables as well - usually for what would be an array of structures in c.  The only issue is consuming it on the bmx side can get a bit confusing with the remembering where you are on the stack crap. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
