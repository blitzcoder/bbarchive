<!DOCTYPE html><html lang="en" ><head ><title >Idea's?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Idea's?</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=102" >BlitzMax Programming</a>/<a href="#bottom" >Idea's?</a><br><br>
<a name="692547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Was wondering how some of you would takle a small probably I have.<br><br>Lets say I have two type's, one called bird, and one called food.<br><br>there can be lots and lots of food on the ground, and you start with 1 bird.<br><br>A bird moves, then checks to see if there is any food in front of it, lets say within 100 units.<br><br>Now, I do this at the moment by doing a for eachin loop, checking the distance between the bird, and then all the food.<br><br>this could loop 100 times.<br><br>Now if I then have 20 birds, I am then looping for 20*n where n is the number of food. and each of them needs to check the food to see how far away from it they are.<br><br>I think you can see that this will end up with lots of lag, if your sitting with 20+ birds all flying about, looking for food, and you have 100's of food to scan for distance.<br><br>I know there is going to be a better way but its late and im not sure.<br><br>So pls let me know any ideas you have.<br><br>I had thought about creating a pre calculated list, of disctances, but thats no use because the bird moves so the table would be usless. <br><br></td></tr></table><br>
<a name="692552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about splitting the "map" into zones? Each zone has a list of food which is in that zone. Then just check which zone the bird is in and only check the food lists in the zone the bird is in and the neighbouring zones?<br><br>I dunno, there are probably better ways, but that might spark off an idea. <br><br></td></tr></table><br>
<a name="692762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, some kinda treestructure such as a quadtree perhaps? <br><br></td></tr></table><br>
<a name="692822"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ragz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've heard that the zoning method mentioned above is the best. <br><br></td></tr></table><br>
<a name="692935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Will</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got a similar problem with a space sim, with 300 ships and up to 1000 projectiles that need to be collided with them all.  Fortunately they are pretty spread out, I'm going to try splitting the map into "zones" like Gabriel suggested.<br><br>My problem is that being a space-sim, there is no maximum distance, and you can fly forever.  I can't split it into infinity zones :p<br><br><br>Maybe I could calculate the distance for everything from 0,0 and store it with the object.  Then, I could run through the the objects and store them in a  system of concentric circle zones, however many as are necessary for the furthest object.<br><br>Easy, for sure, but not the most efficient zoning.  Hard problem. <br><br></td></tr></table><br>
<a name="692959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> With a situation like yours, Will, I would definitely be looking at a quadtree ( if it's 2d ) or an octree ( if it's 3d ) because they create their own zones as they go. They eliminate huge areas very fast because they essentially split your entire world into four ( or eight ) and only subdivide those zones if they're visible. It may or may not be worth using a quadtree for Yavin's original problem, but I really think a quadtree or octree would work wonders for you. They're pretty simple to implement too. <br><br></td></tr></table><br>
<a name="692976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gab got examples of a quadtree. ? I am guessing the traversal code will need to be tweaked or slightly different to a basic tree to handle the extra node pointers?<br><br>I may be wrong, an example would be awsome.<br><br>I think I will try splitting the screen into 6 zones, 2 deep three across.<br><br>If I get your idea corectly, I then have 6 TfoodTreeList's setup, and whenevr my code creates a new food, it checks the x,y and drops it into the correct tree.<br><br>then when my Ai bird is scanning for food, it only scans for food in the same zone.<br><br>This then means that if the bird is 1 pixel out from another zone, and the zone its in has a food at max distance, while the zone next to the bird has a food 5 pixels away I could have some problems.<br><br>then again I could just add more zones. is it possible in Max to create an array of lists? <br><br></td></tr></table><br>
<a name="692979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If I get your idea corectly, I then have 6 TfoodTreeList's setup, and whenevr my code creates a new food, it checks the x,y and drops it into the correct tree. <br></div><br>Yes, exactly.<br><br><div class="quote"> This then means that if the bird is 1 pixel out from another zone, and the zone its in has a food at max distance, while the zone next to the bird has a food 5 pixels away I could have some problems.then again I could just add more zones. is it possible in Max to create an array of lists?  <br></div><br>Well my idea was to check neighbouring zones as well as the zone you're in. But you'd need more than six zones for that to be worth doing, yeah. Yeah, you can have an array of tLists.<br><br>I don't have anything for quadtrees or octrees in Blitz any more, I'm afraid. Most of my old B3D code is gone. There's a nice tutorial on GameDev which I think I might have used when I was learning it.<br><br><a href="http://www.gamedev.net/reference/programming/features/quadtrees/" target="_blank">http://www.gamedev.net/reference/programming/features/quadtrees/</a> <br><br></td></tr></table><br>
<a name="693045"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah I c.<br><br>thats clever. I might give that a shot, for the moment I am just going to go with a set amount of cells, and then test for food withing the root cell, and the 8 cells that suround the root cell.<br><br>Once this is done it should cut down the iterations through the food lists from 1000's to only a few.<br><br>I think I will also be adding some code so that it will only check the cells that are within its field of view and not the ones that its in.<br><br>I will probably release the source cos Im only coding this as a refresher into max.. <br><br></td></tr></table><br>
<a name="693621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you guys think I should do now...<br><br>Ok so I have now implemented the lists, the screen is split up into 11*11 grid, each list holds any food found withing its grid(x,y) ..<br><br>Now , when My bird or Droid needs to scan for food it needs to scan the root list, and then the 8 lists that suround it.<br><br>I was thinking there are two ways to do this.<br><br>1. Scan each list individually, I cant really think of an easy way of sticking this in one loop, should would probably use 9 chunks of code.<br><br>2. Find some way if its possible, to do something like.<br><br>templist : Tlist<br>listaddlast templist,FoodArrayList[x,y]<br>listaddlast templist,FoodArrayList[x+1,y+1] etc...<br><br>and then just scan the temp list, then clearing the templist once the scan is done..<br><br>I am asking this here first because I dont have as much time as I used to to programme, so I waan be clear on what im going to do before i touch the code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
