<!DOCTYPE html><html lang="en" ><head ><title >EntityPosition of a child loaded wth LoadAnimMesh?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >EntityPosition of a child loaded wth LoadAnimMesh?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >EntityPosition of a child loaded wth LoadAnimMesh?</a><br><br>
<a name="583164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to be able to parse objects in my b3d file for various in-game objects. I'm sure I've done this but it's been so long since I've used b3d that I can't get it working. I load it with LoadAnimMesh so that I can parse children, then use FindChild() to find the children.<br><br>But EntityX#(), EntityY#() and EntityZ#() all return 0, whether I force global or local coordinates. Short of parsing the vertices and finding the geometric center of the object, how can I just grab the position of the object? <br><br></td></tr></table><br>
<a name="583168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got a sample mesh we could look at? <br><br></td></tr></table><br>
<a name="583194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try some of the function in this tutorial:<br><a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1496" target="_blank">http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1496</a> <br><br></td></tr></table><br>
<a name="583202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The method you are using should work. The fact that you are getting back zero makes me think that you are not getting or finding the child entity and its returning the position of the mesh.<br>The other thing tht could be happening is that your model has multiple root joints . You could be searching for the children of the first root node that has no children. A susequent root node could be the one containing all the children. <br><br></td></tr></table><br>
<a name="583213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom: Not right now, perhaps tomorrow. Your question implies that you think it's the way the object is exported, which was my suspicion too. Since I want to be able to support user-created meshes with this, I won't be able to guarantee the export process they use. If this is indeed the case, I may have to stick with the workaround I'm using.<br><br>John: Yeah, that's kinda what I'm doing. It works, but it's not very elegant.<br><br>Smiff: No, nothing like that. I'm finding the meshes just fine. I know this because I hide them after processing them, so if I wasn't finding them I'd see cubes all over the scene. <br><br></td></tr></table><br>
<a name="583218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using  flat hierarchy i.e. all meshes are siblings under the root node ? If so it might be possible that their origins are all at Zero even though the vertices are in the right place. How do they rotate ? Just a thought. <br><br></td></tr></table><br>
<a name="583308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Are you using flat hierarchy i.e. all meshes are siblings under the root node ? <br></div><br>Seems to be that way, yeah. I think most b3d exporters do this, don't they?<br><br><div class="quote"> If so it might be possible that their origins are all at Zero even though the vertices are in the right place. <br></div><br>This what I was thinking. The origins are all in the right place within 3dsMax so it's happening somewhere along the export pipeline from 3dsMax to UU, from UU to Gile[s] and from Gile[s] to B3d. Probably somewhere involving UU.<br><br>Unfortunately, I have to live with it if I want users to be able to use their own meshes. <br><br></td></tr></table><br>
<a name="583326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> UU tends to zero positions AFAIR. <br><br></td></tr></table><br>
<a name="583415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> John: Yeah, that's kinda what I'm doing. It works, but it's not very elegant. <br></div><br>As far as I know the only way is to track down all the vertices. At least it works. <br><br></td></tr></table><br>
<a name="583520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why MAx to UU? Over B3D pipeline for max you can go straight to Giles..I did try just now few of my meshes, loaded with LoadAnimMesh and working fine for all children within with proper EntityX,Y,Z .. <br><br></td></tr></table><br>
<a name="583612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alien, that's baffling. I tried a Giles output B3D and each child entity had x,y,z of -2,000,000; which is why I had to write the code I've linked above. <br><br></td></tr></table><br>
<a name="583624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know about gile[s] but I can confirm what Beaker said, that UU zeroes the positions when you save a multi-object mesh to b3d.  UU doesn't support pivot points for objects (technically it doesn't even support multiple objects; exporting a mesh with multiple objects is done via a trick of grouping.) <br><br></td></tr></table><br>
<a name="583892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Why MAx to UU? Over B3D pipeline for max you can go straight to Giles. <br></div><br><br>Because not many people have 3dsMax and a lot of export paths involves Ultimate Unwrap in some way.<br><br>Thanks to Beaker and Joe for the confirmation that UU is the problem. I'll stick with my functions to find the geometric centre of an object using vertex positions. <br><br></td></tr></table><br>
<a name="583982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I must agree with Gabriel:<br><div class="quote"> Unfortunately, I have to live with it if I want users to be able to use their own meshes. <br></div><br>Gabriel, you said my code at www.blitzbasic.co.nz/codearcs/codearcs.php?code=1496 <br>was not very elegant - do you want to realease yours? <br><br></td></tr></table><br>
<a name="584077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> No no no, I didn't say your code wasn't very elegant. I said having to use vertex positions wasn't very elegant. My code is rarely elegant, so mine is probably less elegant than yours. It's just a shame that UU can't deal with each object having it's own pivot point. <br><br></td></tr></table><br>
<a name="584107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Email the author of UU about the problem. He's always been very keen to help when I've had issues with UU. <br><br></td></tr></table><br>
<a name="584113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would second that comment (that he's really responsive to email and keen to help,) but do note that years ago when he was first developing b3d support I had a conversation with him about this and it was sort of a fundamental conflict with what UU is/does.  But I haven't talked with him since then, so it may very well be that by now the situation is more amenable to that change. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
