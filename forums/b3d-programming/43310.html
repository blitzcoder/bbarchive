<!DOCTYPE html><html lang="en" ><head ><title >Help with Lights</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help with Lights</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Help with Lights</a><br><br>
<a name="484027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Black Hydra</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recently added lights to go along with a lens flare effect I am working on in my game and I got a most unwelcome surprise.<br><br>The lights seem to make my hud completely black.  My hud is made with quad's that are textured, but it seems that the light is causing them to be completely black.  Is there any way I can make it so that lights won't affect a particular entity?  <br><br>I thought this was what the FX fullbright did, but apparently I was wrong.  I'll give my code here, excuse my formatting its been awhile since I posted anything and I forget the formatting labels.<br><br>----------HUD CODE---------<br>Global nWinWid=800,nWinHit=600<br>Global nCameraZoom# = 1<br><br>Type hud<br> Field mesh<br> Field surface<br> Field x#<br> Field y#<br> Field w#<br> Field h#<br> Field ScaleSpeed#       ;for any guages, this records the speed at which the guage can scale itself<br> Field CurrentValue#     ;this variable stores what value the guage is currently displaying<br> Field Brush<br> Field Alpha <br>End Type <br><br>;------------------------------------------<br>Function CreateHud.hud(Brush, ScaleSpeed# = 0)<br>;------------------------------------------<br>    Hud.Hud = New Hud<br>    Hud\ScaleSpeed# = ScaleSpeed#<br>	Hud\mesh=CreateMesh()<br>	Hud\surface=CreateSurface(Hud\mesh)<br>	AddVertex Hud\surface,-1,+1,-1,0,0 : AddVertex Hud\surface,+1,+1,-1,1,0<br>	AddVertex Hud\surface,+1,-1,-1,1,1 : AddVertex Hud\surface,-1,-1,-1,0,1<br>	AddTriangle Hud\surface,0,1,2 : AddTriangle Hud\surface,0,2,3<br>	EntityOrder(Hud\mesh, -1) ; ensure the sprite is drawn after everything else<br>	EntityBlend(Hud\mesh, 1) ; alphamode, use 1 or 3<br>	EntityFX(Hud\mesh, 1)<br>	If Brush &gt; 0 Then PaintEntity(Hud\mesh, Brush)<br>	Hud\Brush = Brush	<br>    Return Hud<br>End Function<br><br>;-----------------------------<br>Function HudParent(Display.hud,camera)<br>;-----------------------------<br>	EntityParent(Display\mesh,camera)<br>End Function<br><br>;------------------------------------------<br>Function PlaceHud(Display.hud,x#,y#,w#,h#)<br>;------------------------------------------<br>    Display\x# = x#<br>    Display\y# = y#<br>    Display\w# = w#<br>    Display\h# = h#<br>    Local cx#,cy#,px#,py#<br>	cx# = x#+(w#/2)<br>	cy# = y#+(h#/2)<br>	px# = 2*(cx#-(Float(nWinWid)/Float(2)))<br>	py# = -2*(cy#-(Float(nWinHit)/Float(2)))<br>	ScaleEntity(Display\mesh,w#,h#,1)<br>	PositionEntity(Display\mesh,px#,py#,nCameraZoom# * nWinWid)<br>End Function<br><br>;------------------------------------------<br>Function FreeHud(Hud.Hud)<br>;------------------------------------------<br>  FreeEntity Hud\mesh<br>  Delete Hud<br>End Function <br><br>---------LIGHT CODE-------------<br>B\HandleNum = CreateLight(1, User\EnvironHandle)<br>RotateEntity B\HandleNum, -Pitch#, WrapAngle(Yaw#-180), 0<br>LightColor B\HandleNum, B\Red, B\Green, B\Blue <br><br></td></tr></table><br>
<a name="484173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does not go black here, but I am having to guess how you are creating your texture and brush.  Are you sure the light is making them black?  I do not think so. <br><br></td></tr></table><br>
<a name="484213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you set brushfx brush,1 in your brush creation routine?  Not sure if the entityfx,1 affects a surface painted with a specific brush. <br><br></td></tr></table><br>
<a name="484221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good idea. Something else you might want to disable fx wise is fogging, just in case you decide to add some, you will not want it to effect your hud. <br><br></td></tr></table><br>
<a name="484224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tsk, tsk, Black Hydra - it wou;ld be nice if you credited other people when you post code like this ;) <br><br></td></tr></table><br>
<a name="484236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also dude, use UpdateNormals on it, i used to get that. I assmue you have the latest b3d? <br><br></td></tr></table><br>
<a name="484251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Black Hydra</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The light definitely is the problem, however I'll go over the things you said.<br><br>Sorry, I was shown the code from a guy in another post.  It isn't mine but I couldn't remember who it was.  If it was yours then I can make a note of it in my code.  I'm not trying to look ungrateful, I really am ;) . <br><br></td></tr></table><br>
<a name="484254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Black Hydra</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I managed to fix it by adding the fullbright to the brush and adding an update normals.<br><br>Thanks you guys.<br><br>Oh, and to Blackledge, if you can tell me who made this code (either yourself or someone you know...) then I'll make note of it in my code and give them credit when my game is done, sorry for my faux-pas (if thats how you spell it...) <br><br></td></tr></table><br>
<a name="484374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I can't, coz I've forgotten who I got ir from! Arrgghh!<br><br>But there are so many of us working on similar problems (thank goodness, so help yourself) but I just wish that we could somehow create a separate forum, or maybe put in a request to Blitz Support to make one when they agree it's justified, maybe called 'Mesh-HUDs', then instead of bits of code in different threads it would all be in one place.<br><br>I guess what I'm asking for is something like the Tools Section, but with headings like 'Mesh-HUDs', 'Physics', 'Collisions', 'B3D-format' - you know, discreet areas where discussions and code can be shared on a specific problem without bothering other people in the more general area.<br><br>Probably too much to ask for in terms of moderation/web-site restructuring? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
