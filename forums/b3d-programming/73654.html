<!DOCTYPE html><html lang="en" ><head ><title >Advice needed on LightMesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Advice needed on LightMesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Advice needed on LightMesh</a><br><br>
<a name="823079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a few problems with LightMesh. My code is too long to copy and paste here, so I'll just give a quick run down of what I'm trying to do, and what I'm observing.<br><br>I've written a program that randomly generates the inside of a building. Its very rough at the moment and looks like a maze, but I hope to make it generate proper rooms eventually. Anyway, that's besides the point.<br><br>The structure is a single mesh, with its origin point at the centre. If I place the camera at (0,0,0), I'd be in the centre of the mesh. Everything was working fine, and if I put in some lights using CreateLight() it works perfectly.<br><br>However, I want to use LightMesh due to the number of small lights, and this is where I've hit a problem. From what I understand, the command works like this:<br><br>LightMesh mesh,red,green,blue,range,x,y,z<br><br>I believe the x,y and z co-ordinates are relative to the position of the mesh, not the world. My mesh has its centre at (0,0,0) and is sitting at (0,0,0), so shouldn't world co-ordinates work? I mean, if I put a lamp object at (-20,20,-20) and use lightmesh with those same co-ordinates, then the light should be placed properly, right?<br><br>What I'm actually seeing is that the mesh doesn't get lit at all, unless I increase the range by a lot. Even then, it appears that the light is coming from somewhere outside the mesh. If I increase the range to a few hundred, the east and south walls are completely black, but the north and west walls are well lit.<br><br>Why would it be placing the light outside of the mesh, when the co-ordinates I've given should be inside? <br><br></td></tr></table><br>
<a name="823096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mortiis</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try an "UpdateNormals YourMesh" in your main loop. I haven't tried it but it may work. Also did you set "EntityFX YourMesh,2" ? If not, you need to state it so your mesh will use vertex colors... <br><br></td></tr></table><br>
<a name="823147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The number of verts in the mesh will make a difference - ie the more there are, the more accurate/realistic the lighting will be.<br><br>Any mesh's origin is not always central by default - if you have internally created this mesh with it's centre at 0,0,0 (which you have to calculate in advance) then Blitz3D does not require you to specify coordinates to LightMesh as Blitz3D will assume this is what you want to do by default - the light coordinates are optional - try your code without supplying coordinates. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
