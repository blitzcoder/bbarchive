<!DOCTYPE html><html lang="en" ><head ><title >Hotspot Types</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Hotspot Types</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Hotspot Types</a><br><br>
<a name="614967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have recently learnt how to use Types to good effect but have ran into a little problem.<br><br>I have created a type to hold Hotspots on a screen i.e when the mouse moves to a certain area on screen and colides with the hotspot, the pointer changes to a hand icon. When moving away from the hotsopt it should turn back into a pointer again. In this case it does not. Its slightly doing my nut but it is probably something i missed.<br><br>Code as follows with 2 on screen hotspots, (2 images are required for the collision)<br><br>Type HOTSPOT<br>    Field HID%  ; Hotspot ID<br>    Field HX%   ; X Pos<br>    Field HY%   ; Y Pos<br>    Field HW%   ; Hotspot Width<br>    Field HH%   ; Hotspot Height<br>End Type<br><br> <br>Graphics3D 300,300,32,2<br><br>SetBuffer BackBuffer()<br><br> <br>Global hand=LoadImage("hand.bmp"); Mouse Pointer<br>Global pointer=LoadImage("redsq.bmp"); Mouse Pointer<br><br>HandleImage hand,7,0<br><br>HotCreate(0,0,0,10,10)<br>HotCreate(1,100,0,10,10)<br><br>HidePointer()<br><br>While Not KeyHit(1)<br><br>    Cls<br><br>    hotspotupdate()<br><br>    Flip<br><br>Wend<br><br>End<br><br> <br><br>Function HotCreate(HID%,HX%,HY%,HW%,HH%)<br><br>    H.HOTSPOT = New HOTSPOT<br>    H\HID%    = HID%<br>    H\HX%     = HX%<br>    H\HY%     = HY%<br>    H\HW%     = HW%<br>    H\HH%     = HH%<br>    Return True<br><br>End Function<br><br>Function hotspotupdate()<br><br>For H.HOTSPOT = Each HOTSPOT<br><br>If H\HID%=0<br><br>    If RectsOverlap(H\HX%,H\HY%,H\HW%,H\HH%,MouseX(),MouseY(),1,1)<br>     DrawImage hand,MouseX(),MouseY()<br>    <br>     If MouseDown(1)<br>        Text 100,100,"Hotspot!!!!"<br>     End If<br><br>    End If<br><br>Else If H\HID%=1<br><br>    If RectsOverlap(H\HX%,H\HY%,H\HW%,H\HH%,MouseX(),MouseY(),1,1)<br><br>    DrawImage hand,MouseX(),MouseY()<br><br>    If MouseDown(1)<br>        Text 100,100,"Hotspot2!!!!"<br>    End If<br><br>    End If<br>Else<br>   DrawImage pointer,MouseX(),MouseY()<br>End If<br><br>Next<br><br>Return True<br><br>end Function <br><br></td></tr></table><br>
<a name="615009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The If..ElseIf..Else conditional in your For..Each loop will never enter your Else block; the loop will iterate twice, once for each of your hotspot objects.<br><br>Whenever possible, eliminate nested blocks to simplify your code.  Your logic can be broken down into two steps: (1) figure out which hotspot the mouse is over, then (2) draw the correct mouse cursor.<br><br>It's also better to poll your mouse position only once, since it can change while your code is executing, leading to confusing results!<br><br>Try this instead:<br><pre class=code>
local mouse_x = mousex()
local mouse_y = mousey()

local active_hotspot.hotspot = NULL
for h.hotspot = each hotspot
	if RectsOverlap(H\HX%,H\HY%,H\HW%,H\HH%,Mouse_X,Mouse_Y,1,1) then active_hotspot = h : exit
next

if active_hotspot &lt;&gt; NULL then
	DrawImage hand,Mouse_X,Mouse_Y
	if mousedown(1) then text 100,100,"clicked hotspot id " + active_hotspot\HID + "!"
else
	DrawImage pointer,Mouse_X,Mouse_Y
endif
</pre> <br><br></td></tr></table><br>
<a name="615080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Octothorpe,<br><br>Thanks v much for this refined bit of code. It works a treat....:-) I thought a NULL check would need to be used somewhere to see if the mouse was over a Hotspot or not. This nicely tidies up the hotspot checking process.<br><br>Types though tricky to get you ed around are indeed fab and v powerfull...<br><br>Thanks again... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
