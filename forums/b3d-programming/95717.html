<!DOCTYPE html><html lang="en" ><head ><title >Question about poking into the b3d dx lights</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question about poking into the b3d dx lights</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Question about poking into the b3d dx lights</a><br><br>
<a name="1104343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i can use the B3d_plus dll to hack the dx lights some .. but was wondering if anyone knows if you can just poke some values in instead of using an entire dll for the following<br><br>BP_SetLightMaxRange( dxlight(i),dxl\range# )  	<br>BP_SetLightAtten0(dxlight(i),.001) 					<br>BP_SetLightAtten1( dxlight(i),0 )<br><br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="1104344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> just poke some values in <br></div><br><br>...how were you going to do that without using a DLL? Remember Blitz3D doesn't have pointers or peek/poke to arbitrary locations.<br><br>You can build arbitrary peek/poke on top of a combination of the regular bank operations and RtlMoveMemory (imported from Kernel32.dll, so it at least saves you having to actually ship a second DLL with your application), but it will be fairly slow by comparison. Not that that's likely to be important for one-off operations like updating lights.<br><br>Assuming you don't have it, the source for those three functions is as follows:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Sub SetLightMaxRange ( ByVal light As Any Ptr, ByVal range As Single ) Export
    Dim address As Integer
    address = Peek(Integer, light+576)
    Poke Single, address+76, range
End Sub

Sub SetLightAtten0 ( ByVal light As Any Ptr, ByVal value As Single ) Export
    Dim address As Integer
    address = Peek(Integer, light+576)
    Poke Single, address+84, value
End Sub

Sub SetLightAtten1 ( ByVal light As Any Ptr, ByVal value As Single ) Export
    Dim address As Integer
    address = Peek(Integer, light+576)
    Poke Single, address+92, value
End Sub
</textarea><br><br>(B3D_Plus was originally distributed with source. Can forward it to you if you like.)<br><br>So yeah, you could easily just rewrite those in Blitz3D using a memory poke function, but you still need to get that memory poke function from somewhere, because one doesn't form part of the language.<br><br>What's your objection to using a DLL? What alternatives are acceptable? <br><br></td></tr></table><br>
<a name="1104345"></a>

<a name="1104346"></a>

<a name="1104347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yasha, yes I meant using system DLLs instead of 3rd party indie DLL so that I dont have to include another DLL in my game distribution<br><br>So , the acceptable alternative is what you mentioned.. Im not dead sent against using the dll, but if I can avoid another file in the updater and installer I would like to.<br><br>Oh , I didnt know it had source. Yeah I would love to have a look at that.  You can email me if you like <br><br>GameMaker04@...<br><br>Thanks so much.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1104349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sent. <br><br></td></tr></table><br>
<a name="1104351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the B3D_Plus license prevents you from sharing it publically? if not, could you please host it somewhere so everyone can take a look?<br><br>(if you need a place, <a href="http://www.4shared.com/" target="_blank">4Shared</a> or <a href="http://www.mediafire.com/" target="_blank">MediaFire</a> work great.) <br><br></td></tr></table><br>
<a name="1104393"></a>

<a name="1104394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the original thread, which... doesn't say anything about redistribution actually, but I feel compelled to link it to the discussion: <a href="http://www.blitzbasic.com/Community/posts.php?topic=75711#957569" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=75711#957569</a><br><br>The link at the end of that one is actually still alive, but here's my own upload anyway: <a href="https://sites.google.com/site/nangdongseng/downloads/Blitz3dplus.zip?attredirects=0&amp;d=1" target="_blank">https://sites.google.com/site/nangdongseng/downloads/Blitz3dplus.zip?attredirects=0&amp;d=1</a><br><br>And here's a post that basically answers the original question by demonstrating how to use RtlMoveMemory to port those address hacks to B3D proper: <a href="http://www.blitzbasic.com/Community/posts.php?topic=66397#741912" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=66397#741912</a><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1104420"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Yasha! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
