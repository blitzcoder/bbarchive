<!DOCTYPE html><html lang="en" ><head ><title >detecting if a player has "stepped" ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >detecting if a player has "stepped" ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >detecting if a player has "stepped" ?</a><br><br>
<a name="1016618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> how would i detect if the foot of the player has hit the ground? <br><br></td></tr></table><br>
<a name="1016623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> foot_bone=findchild charMesh,"leftFoot"<br>collPivot=createPivot(foot_bone)<br>Entitytype collPivot,colltype<br>EntityRadius collPivot,radius#<br><br>check for collPivot blitz collision with the ground Surface (using CollisionSurface etc..)<br><br>btw I don't think it's a wise thing.. <br><br></td></tr></table><br>
<a name="1016630"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm gonna take a wild guess (as well as noting your other post about the animation sequences/time) that this is perhaps due to wanting to synchronise footstep sounds with the placement of the foot(or feet) on the ground?<br><br>It would make sense that you have some frame limiting or timing tehnique to ensure a single 'walk' sequence will always take the same time.<br>All you need to do, is sync the playing of two footsteps one with the duration/2 and another at the duration.<br><br>This also assuems you cancel the animation (switch to, say, 'idle') if the player stops walking halfway through.<br><br>It's much more efficient to have the sound played every x seconds than to constantly check the positions and collisions. <br><br></td></tr></table><br>
<a name="1016632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What i would do, is check the animtime command (which is actually the current frame) Visually, check which frames the players feet hit the ground, and play the sound. <br><br></td></tr></table><br>
<a name="1016633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, i wanna synchro the footsteps when the feet touch the ground.<br><br>so far, here is what i have: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function check_footsteps()
	
	;col_level=1
	;col_player=2
	;col_bullet=3
	
	For i = 1 To CountCollisions(player)	;count all the collisions that the player has been in
		If GetEntityType(CollisionEntity(player,i)) = col_level Then
			surface = CollisionSurface(level,i)
		EndIf
	Next
	
End Function</textarea> <br><br></td></tr></table><br>
<a name="1016636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could attach Pivots to the feet bones using FindChild(entity,"Left_Foot") then put the collisions on the pivot. <br><br></td></tr></table><br>
<a name="1016637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i like that idea much better <br><br></td></tr></table><br>
<a name="1016638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..collision for footsteps is very wrong idea..checking specific frame is much more better and faster, as Ross already mentioned.. <br><br></td></tr></table><br>
<a name="1016639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dont care if its a LITTLE slow. sheesh. im not trying to make a state-of-the-art game. i only care if its fast enough to run on windows 98 &amp; up <br><br></td></tr></table><br>
<a name="1016656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The operating system is mostly irrelevant.<br><br>Checking through the ENTIRE collision table every loop for just the footsteps is gonna be intensive, especially since you haven't even exited the loop after a positive result.<br>It would probably make more sene to combiine the collision event checks in the loop so you don't need to make multiple checks.<br><br>If you're not bothered about the efficiency of your code, then does this mean we wont see posts about "low framerates" or "why is my game so slow?"<br><br>Efficiency of the codeis even more crucial if you're not using state-of-the-art techniques to minimise overheads and manage resources. <br><br></td></tr></table><br>
<a name="1016657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> i never said that. i said i simply want it to run not VERY fast, but fast enough for a player to play around 40-60 fps on a windows 98 or higher <br><br></td></tr></table><br>
<a name="1016674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drak</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would advise against NOT checking for positive collision between a foot and the ground.  Why?  Because unless you have some switch or flag to flip, the collision may trigger say 15 or 20 frames in a row, creating a machine-gun footstep effect.  What about when the player is standing still? 2 positive collisions between both feet and the ground = 2 constant machine-gunning sound effects.  To make that work you'll have to only check for collisions until a collision is detected, then say don't check again until x frames of walk animation again... or something... anyway it'll get way complicated.<br><br>Ross C's idea is much, much simpler than the collision method.  However, you will still have to have a switch or flag to not play the sound while the player is standing still.  Alternatively, I guess you would only need to check it while the player is animating in the walk\run cycle. <br><br></td></tr></table><br>
<a name="1017055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If it were me i would just record which frames in the animation a players foot touches the ground and play the footstep at that moment. <br><br></td></tr></table><br>
<a name="1017057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ive decided im just going to attach very small invisible spheres to the feet, and detect if they collide <br><br></td></tr></table><br>
<a name="1017060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good to me. There's always more than one way to do everything :) <br><br></td></tr></table><br>
<a name="1017061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed ^^ <br><br></td></tr></table><br>
<a name="1017119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drak</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> This will trigger the footstep to fire, but I'll tell you right now that it may trigger the sound for many more than 1 single frame.  The foot will more than likely be colliding with the ground, or terrain, or whatever, for say 5 or 8 frames before being lifted again, and that will trigger the footstep sound 5 or 8 frames in a row.  What that will do is turn your step sound into RATATATATATATSTEP. You'll have to code the sound to play only once every animation cycle. <br><br></td></tr></table><br>
<a name="1017141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't worry, if that happens then you'll know why more threads are created by Rez about "repeated sound glitch". <br><br></td></tr></table><br>
<a name="1017143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..thats why I have suggested simple frame check..works like a charm and no issues such as sound repetition.. <br><br></td></tr></table><br>
<a name="1017145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drak</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Naughty Alien. <br><br></td></tr></table><br>
<a name="1017146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, how would u do a frame check?<br><br>frame = frame + 1 or something? idk, ive never seen this type of code <br><br></td></tr></table><br>
<a name="1017147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> something like this<br><br><pre class=code>
if frame_playing_from_my_current_sequence = one_of_the_Stored_frames_for_current_sequence 
  emitsound(my_footstep_sound)
end if
</pre><br><br>something like this... <br><br></td></tr></table><br>
<a name="1017204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> animtime command gives you the current frame. <br><br></td></tr></table><br>
<a name="1017214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok cool <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
