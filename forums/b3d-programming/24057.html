<!DOCTYPE html><html lang="en" ><head ><title >meshesintersect</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >meshesintersect</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >meshesintersect</a><br><br>
<a name="249262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i was using the meshesintersect command in a demo<br><br>if the player was a certain distance from a coin the meshesintersect would be checked and then the coin would be deleted, even if i removed the distance check, speed seemed fine.<br><br>i could have about 1000 coins on screen and speed was good with distancechecks.<br><br>now when i try it with a meshesintersect on my basic level(meshesintersect(player_mesh,Level_mesh) the speed drops to about 10fps. the level has about 500 polys.<br><br>anyone explain why?<br>i know its a slow command. <br><br></td></tr></table><br>
<a name="249265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Robert</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Each poly of the player presumably has to be tested against each poly of the mesh, which is very slow. <br><br>Maybe a better option if the in-built collision isn't good enough would be to use linepicks? <br><br></td></tr></table><br>
<a name="249273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> it was just mainly a test for a boundingbox on my player but the speed loss is too great, the bounding box mesh had about 20polys. <br><br></td></tr></table><br>
<a name="249355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> but that's still 10,000 checks per frame. why not use blitzes collisions? and why does a bounding box have 20 polys? shouldn't it only have 12? <br><br></td></tr></table><br>
<a name="249379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> 12 then, i was just making a rough guess :) <br><br></td></tr></table><br>
<a name="249436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >joncom2000</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Strange, i've had a level up and running with over 8000 polys and used meshintersects for collisions with pickups with no slowdown at all. Rock solid 85fps.<br><br>I think you must have either a mistake in your polycount or something else in your code is slowing it down.<br><br>You say there are 1000 coins well that means that even if your using a flat quad your polycount is 2000.<br><br>Jon <br><br></td></tr></table><br>
<a name="249541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, i did a test without coins and only a meshesintersect for the box intersecting with level. <br><br></td></tr></table><br>
<a name="249628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lecks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> How many polys does your player mesh have?<br><br>I dont think meshesintersect uses the collisionbox. It even warns in the help:<br><div class="quote"> <br>This is a fairly slow routine - use with discretion...<br> <br></div><br>I'd try something like this:<br>[CODE]<br>;do this during initialization<br>EntityBox player_mesh,centerx#, centery#, centerz#, xsize#,ysize#,zsize#<br>;in your loop<br>noofcollisions = countcollisions(player_mesh)<br>for i = 1 to numberofcollisions<br>    entitythatgothit = collisionentity(player_mesh, i)<br>    dosomethingto(entitythatgothit)<br>next<br>[/CODE]<br>i'm just guessing though, i could be wrong :) <br><br></td></tr></table><br>
<a name="249657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> what i did was create a cube around my player and set it's alpha to 0 then used that to check meshesintersect because the command checks the mesh on the entities specified. <br><br></td></tr></table><br>
<a name="249685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lecks</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i just wouldnt recommend using a command that mentions that it's slow in the help, when you could use another command to get the same effect :). <br><br></td></tr></table><br>
<a name="249782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Commands which are referred to as slow are not too slow to use one or two times every frame; commands which are that slow (such as several 2D image manipulations) specifically state not to use it while the game is running.  Commands like MeshesIntersect are slower than other stuff like moving entities but you should still be fine using it a couple times every frame; faster commands you routinely use hundreds of times every frame.  As an example, I am using MeshesIntersect once a frame right now and am not having any drop in framerate.<br><br>So the main thing you should check for is how many times you are calling MeshesIntersect every frame.  It is possible that you are accidentally using the command in the middle of a loop. <br><br></td></tr></table><br>
<a name="249791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> something is going on because if i do a meshesintersect between my players mesh and level i get no slowdown but if i create a sphere around him and parent it to him then do a meshesintersect between the sphere and the level, frames drop to about 10.<br><br>ps don't need to use it anyway, i had a problem with collision which i had in my other post (collisions post)and was gonna use a meshesintersect but have found a better way for my collisions to register without my player moving at all. <br><br></td></tr></table><br>
<a name="249871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gauge</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You are running a different type for the coins right? meshintersect does that too?  Or does meshintersect check all fo the meshes in the game.  If it does not good to use.<br>Maybe you could:<br>when mob dies, get x/y/zof the mob, drop the coins etc.<br>then add a type coin...with fields max/min x/yz so the type would look like.<br>type powerup<br>field maxx<br>field minx<br>field maxy<br>field miny<br>field maxz<br>field minz<br>end type<br>then perhaps in your loop add:<br><br>for c.coin=each coin<br>if playerx &lt;c\minx and &gt;c\maxx<br>andz<br>andy<br>then delete the coins,add it to the players inventory, etc.<br>and each coin/powerup whatever loop could delete the coin atuomatically after so many frames have passed, etc?<br><br>Oh well, just a thought. <br><br></td></tr></table><br>
<a name="249910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> i won't be using meshesintersect now like i said but thanks for the help anyway. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
