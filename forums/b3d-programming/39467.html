<!DOCTYPE html><html lang="en" ><head ><title >Is Blitz3d reindexing vertices on loading?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is Blitz3d reindexing vertices on loading?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Is Blitz3d reindexing vertices on loading?</a><br><br>
<a name="440284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrumpyOldMan</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I've been playing around with mesh animation and it looks like Blitz3d is reindexing some vertices of b3d and 3ds models on loading. Am I going crazy or has this always been the case? I had a look at the Bugs Reports and I couldn't see anything there. I've been struggling with mesh animation with there always being some vertices not being attached to the right bones. I checked and rechecked what I was doing, so I decided to run a .b3d model through the excellent b3d to xml to b3d program, and also write a simple program that loaded the same b3d file and write to file the vertexx,vertexy and vertexz of the loaded b3d. The indexed vertex values in the xml file and the indexed values from the loaded file don't match!!<br><br>Any help on this would be appreciated.<br><br>Cheers<br><br>GrumpyOldMan <br><br></td></tr></table><br>
<a name="440296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="440298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't happen to be using the Milkshape exporter, do you?  If you are, it's the exporter that's the problem: it exports static objects correctly, but reverses the Z axis when exporting animated meshes, so things are never facing the right way -- and god forbid you try to 'fix' it; you'll only make the problem worse, and you'll get some really evil looking results if you try.<br><br>Only solution I've found is to ditch the MS3D .b3d exporter entirely and bring the .ms3d into something like Ultimate Unwrap to export to .b3d instead. <br><br></td></tr></table><br>
<a name="440307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrumpyOldMan</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi RaGR and morduun<br><br>Thanks for the replies. It's not the exporter because I'm happy with the loaded mesh, I get the data from the already converted mesh. It's just that the information shown on the .xml for the vertex coordinates is different from the vertex coordinates taken from the loaded .b3d.<br><br>RaGR - I really hope I'm doing something wrong because my life would be a bit easier if I could use loaded b3d's. What you're doing sounds pretty much like what I'm trying to do. I run the b3d file through a utility that gives me a small file that shows vertex assignments to bones, and then try to match that up with loaded vertices except for me it's not working. I'll go back and go through it again!!<br><br>Cheers<br><br>GrumpyOldMan <br><br></td></tr></table><br>
<a name="440315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="440667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The surface indices of vertices in a single surfaced .b3d mesh will only be the same as the order index in the .b3d file in a single surface model but if there are multiple surfaces i.e. more than 1 TRIS chunk then Blitz sets the index of the first vertex of each surface to 0 incrementing the index no as it builds the mesh. Really the vertex in a .b3d file are not 'indexed' at all just read in the order they are written. Its the TRIS chunk that defines a surface - if there's only one surface then its index values will correspond to the order of the vertex in the file - if there's multiple surfaces then the vertex surface index is set to 0 for each surface created.The total count of the vertex should match unless there are any isolated i.e. not used by any of the tris.<br>An additional problem with working with vertex in an animated mesh is that there is no way to find the real world coordinates of a vertex when the mesh is animating - VertexX# ( surface,index )will always return the original starting position of the reference frame and not the current 'animated' position. To get around this you can create a pivot at the vertex start position and parent that pivot to the bone. You can then check the pivot to get the position of the vertex. This however will not work correctly if you have weighted vertex - you would then have to move the pivot according to the vertex weighting values which gets a bit more complicated. <br><br></td></tr></table><br>
<a name="442535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrumpyOldMan</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Morduun - Apologies, I loaded the Milkshape exported .b3d file into JTEdit and resaved and now it works perfectly. For some reason a Milkshape exported .b3d when loaded has reindexed vertex positions to what is contained in the file. Something for anybody looking at mesh animation to be wary of!!!!<br><br>Cheers<br><br>GrumpyOldMan <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
