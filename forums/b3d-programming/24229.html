<!DOCTYPE html><html lang="en" ><head ><title >Assigning  verts</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Assigning  verts</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Assigning  verts</a><br><br>
<a name="251043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been playing with some weird stuff lately but came to a point where i need to link verts from a preloaded mesh to a diffrent surface/parent.. Is it possible to assign verts to a parent other then their original? Or will i need to completely rebuild the mesh with code?<br><br>Also... I know this has been asked before but i never saw a viable means of preforming it, how would one go about rotating verts?<br><br>Let's see if i can describe my dilima a little better.<br>I'm attempting to build a model editor, bones are placed manually and i want to assign weightmaps to the joints.<br>I select a group of verts and assign them to a joint.  I can fake the x,y,z deformation using vertexcoords but i havent been able to append for rotations. Exporting the tween data to b3d will be automatic, but i need the editor to show the animations as they are being edited.. etc...<br><br>TFormPoint seemed to be my answer, but i've noticed the rotation values get swapped or the axis is offset by the bones rotation value.<br><br><br><br><br>Thanks in advance! <br><br></td></tr></table><br>
<a name="251051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another option was to write/export the entity each time a vert was assigned to a bone.. Then reload the mesh allowing blitz's native loader to handle the assignments....  Before i venture down that road I would like to get confirmation as to if this is the only viable means to do what i need done.. <br><br></td></tr></table><br>
<a name="251342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Binary_Moon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You want to write your own bone system using vertex coords? You can do that with tformpoint. I had a working sample on my computer but recently formatted my harddisk and started from scratch.<br><br>Just hads a quick look and I have found a back upof the code. Email me (Ben at Binarymoon.co.uk) and i will send you the demo. The update bones code is about 5 lines long :) <br><br></td></tr></table><br>
<a name="251440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is it possible to assign verts to a parent other then their original? Or will i need to completely rebuild the mesh with code?  <br></div>You will need to completely bebuild the mesh with code.<br><div class="quote">  I can fake the x,y,z deformation using vertexcoords but i havent been able to append for rotations.  <br></div>The easy way would be using TFormVector or TFormPoint (depending on what type of result you're after). TFormPoint vx,vy,vz,bone_pivot,0 where vx/vy/vz are the vertice positions and bone_pivot is the entity of the bone object, should give you the correct *global* coordinates for the vertices when they are rotated. Since this seems to be what you're doing I think you'll need to be a little more specific with regards to why you aren't getting the results you wanted.<br><div class="quote"> Before i venture down that road I would like to get confirmation as to if this is the only viable means to do what i need done..  <br></div>No it is not. <br><br></td></tr></table><br>
<a name="251466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> BM, thanks for the code example, thats some neat stuff you got there! I now see how i was messing up the TformPoint's... :) Many thanks<br><br>Flame, thanks for confirming 'the way not to do it' :) Rebuilding the mesh does seem to be the proper route...  I've started this approach today..<br><br>To better explain, imagine Milkshape (the editor).. you select and assign verts to a bone/pivot. After doing such you enter animation mode and contort the bones around causing animation.. This is the effect im tring to achieve - as it would be easy enough to record the frame tweens to file, i need the real time editor to show/update these animation tweens as well... <br><br></td></tr></table><br>
<a name="251470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Custom vertex weights can be faster than Blitz's, because they only need to get updated before a RenderWorld, not with every UpdateWorld. <br><br></td></tr></table><br>
<a name="251494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been looking over Marks c++ milkshape exporter code tring to determine what w-rot is... further more - I'm tring to figure out how to get that formula into blitz notation.. :)<br><br>Any clues as to what wrot is? Im guessing its an offset value from the bone to center axis?<br><br>Anyhow, if anyone has converted that equation from the exporter to blitz notation I would love to see it :) <br><br><br><img src="http://www.viszero.addr.com/temp/vertice.jpg"><br><br>Rebuilding the mesh within code after each assignment is glued... so animation/deform is real time now!, but darn that w-rot.... <br><br><br><br><br>Thanks! <br><br></td></tr></table><br>
<a name="251738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Discovered the wrot value as being a quaternion representation... also the pitch,yaw and roll being values based off the wrot.  BUT im stumped again... this changes the values of my x,y,z positoning...  xyz are offsets from the chunks center, but i can't seem to put my finger on how the coords work.. sometimes they are inverted.. sometimes z is listed and y and what not...<br><br>Anyone with a brief run down on how positioning coordinates are recorded in a mesh?<br><br>heres a xml of a node im working with :<br>&lt;NODE name="neck" xpos="5.01093e-004" ypos="0.0295951" zpos="-0.383532" xscale="1.0" yscale="1.0" zscale="1.0" wrot="1.0" xrot="0.0" yrot="0.0" zrot="0.0"&gt;<br><br>the xyz values make no sense to me as the neck should be Yvalue higher then the center axis - but clearly shown the Xvalue is greater then Y..<br><br>Is xyz position coordinates; a quaternion value as well? If so where are these calculated as I see no wrot value listed in this node other then '1' (default).<br><br>Thanks <br><br></td></tr></table><br>
<a name="251826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Positioning should be sensible enough. Only the rotations should be Quaternions. The Xpos you mentioned is a:<br><br>"5.01093e-004"<br><br>Which appears to be a notation which denotes a number too small to be represent in 0.0000001 type digits. Hence the e-004 at the end.<br><br>I ran into these dudes when doing the Lightwave convertor! :/ <br><br></td></tr></table><br>
<a name="251830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tera...  I exported a few larger models and looked at their positionings and as you mentioned - its a size issue!<br><br>One last question for you kind folks... I've managed to export the model with bones assigned, i've linked verts to the bones as mentioned earlier.. BUT im having another problem with the vertexnormals... I noticed when i ran the animation in blitz none of the triangles appeared to be attached. I then loaded the model in Unwrap3d and welded all the verts - then back to blitz for a test.. Sure enough the model deformed and the triangles stayed together. <br><br>So i noticed, in the b3d export code, my &lt;VRTS&gt; flag not being set to 'normals' so i changed that - but i'm abit lost on how to obtain the vertexnormal values to pass to the my exporter function()....<br><br>What's the proper procedure for setting vertexnormals? - ive dug and dug but found little enough on this topic and blitz docs... to say the least - is vague on this topic.<br><br>It sounds to simple to be true, but Vertexnx(surf,indx) does return a value...  but not set bymyself... should i pass this to the Vrts chunk? <br><br></td></tr></table><br>
<a name="251834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use VertexNx() etc to pass to your VRTS chunk.<br><br>To set the vertex normal use the VertexNormal command.<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="251888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks MB.<br><br><br>Problem with the broken tri's is sorted, I had a mis-assignment in the vert numbering system :( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
