<!DOCTYPE html><html lang="en" ><head ><title >Track editor help required</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Track editor help required</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Track editor help required</a><br><br>
<a name="301170"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm writing a racetrack editor and have a pretty funky interface where you can design your track with anchor points which define hermite splines which is easy to use and looks great.<br><br><img src="http://www.jpsaunders.pwp.blueyonder.co.uk/editor.png"><br><br>All these dots are defined in a array.  Has anyone got a useful routine that will convert these anchor point data to a 3d mesh.  I've looked at addvertex comands but got in a bit of a state.<br><br>This will be released to the community with source when i'm done. <br><br></td></tr></table><br>
<a name="301223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this should help - not tested I'm afraid but used this method to create my own tracks ...<br><br>Assuming your points are held in an array .. <br>pointx(2,nopoints), pointz(2,nopoints)<br><br>Where pointx(1,..) and pointz(1,..) hold the x &amp; z position of your initial track points.<br><br><br><br>for a=0 to nopoints-1<br><br> ;get next point<br> b=(a+1) mod nopoints<br><br> ;get vector from point a to point b<br> dx#=pointx(1,b)-pointx(1,a)<br> dz#=pointz(1,b)-pointz(1,a)<br> d#=sqr( dx*dx+dz*dz)<br> <br> ;normalise vector<br> dx=dx/d:dz=dz/d<br> <br> ;get points perpendicular to point a<br><br> ;point to left<br> pointx(0,a)=pointx(1,a)-dz*trackwidth<br> pointz(0,a)=pointz(1,a)+dx*trackwidth<br><br> ;point to right<br> pointx(2,a)=pointx(1,a)+dz*trackwidth<br> pointz(2,a)=pointz(1,a)-dx*trackwidth<br><br>next<br><br><br><br>Once you have this you can then build the track mesh from the new perpendicular points like this ..<br><br><br><br>mesh=createmesh():s=createsurface(mesh)<br><br>for a=0 to nopoints-1<br> ;get next point<br> b=(a+1) mod nopoints<br> ;add the 4 points to the mesh<br> v0 = addvertex (s,pointx(0,a),0,pointz(0,a))<br> v1 = addvertex (s,pointx(0,b),0,pointz(0,b))<br> v2 = addvertex (s,pointx(2,b),0,pointz(2,b))<br> v3 = addvertex (s,pointx(2,a),0,pointz(2,a))<br> addtriangle s,v0,v1,v2<br> addtriangle s,v2,v3,v0<br>next<br>  <br>............... <br><br></td></tr></table><br>
<a name="301232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. I'll give it a try. <br><br></td></tr></table><br>
<a name="301244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WebDext</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You also might want to create a list of verteces for the left and right edges initially then step through them and check to make sure that they are not too close together, so you won't get sliver shaped triangles on tight corners.<br><br>The other thing you  may need to do is check tight corners for intersections so that the track polygons don't overlap wierd.<br><br>Just some thoughts...<br>Jack <br><br></td></tr></table><br>
<a name="301259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh Jack - ran into that problem too ...<br><br>I found that just averaging the previous, current and next perpendicular points made it much smoother but I guess it depends on how wide you want the track to be. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
