<!DOCTYPE html><html lang="en" ><head ><title >Benefits of a Portal Engine ???</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Benefits of a Portal Engine ???</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Benefits of a Portal Engine ???</a><br><br>
<a name="240182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rogue Vector</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What are the benefits of a Portal Engine?<br><br>I've read about game engines that facilitate 'continuous level of detail' - allowing the creation of large outdoor environments. Is this the same thing as a portal system?<br><br>Thanks in advance,<br><br>RV <br><br></td></tr></table><br>
<a name="240191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> RV,<br><br>Okay, I hope this makes some sense.<br><br>A portal engine only draws those sections of a level which can be seen by the camera.  <br><br>Imagine a model of a house broken into rooms, with doorways between each room.<br><br>Each room is a place you can see by being in it or looking into it through a doorway.<br><br>Each doorway is set up as a 'portal' into those places or rooms.<br><br>Room One, perhaps, has a portal into room two, so the camera can see room 2 when you look through the portal.  The engine only ever draws room 2 when you can see through the portal.<br><br>The benefits can be huge in terms of level design because you are only drawing small portions of those levels, this keeps the frame rate bouncing along very nicely, rarely putting a strain on the machine.<br><br>This means you can do more in each smaller section of the level. <br><br><br>However, the negeative side may be that if you want a large expansive outdoor section, you may find it difficult to design with portals in mind.  The frame rate may show some strain if similar detail is required.<br><br>Think of games such a Metroid Prime and Jak and Daxter (if you know them at all), think of where the scenery changes are and how many times in Prime for example there is a short delay at a doorway.  I think this is a complex portal system with lots of detail, loading each section very quickly.<br><br>Jak and Daxter has some large exterior scenes and often rockfaces, trees, houses will obscure views around corners, where presumably there is some portal magic working its stuff.<br><br>Quill 3D has a portal demo for B3D which shows the fps benefits quite nicely.<br><br>Hope that explains a bit of it anyways...<br><br>Ipete2. <br><br></td></tr></table><br>
<a name="240384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> the delay at the doorways in metroid prime is not a complex portal system, it's just a delay to load the next section. the portal stuff (or deciding what part has to be rendered) happens in real time.<br><br>but that's a tad off topic.<br><br>a good way to see how portals work is to run quake or half life or any quake engine based games and turn the wireframe view on (in quake3 it something like "/r_showtris 1" in the command line after you enabled the cheats with "/sv_cheats 1").<br><br>hope that helps. <br><br></td></tr></table><br>
<a name="240391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> doesn't loading a level as  loadanimmesh() which has be chopped into segments do this automatically? only the parts which are visible get rendered, the rest are hidden. <br><br></td></tr></table><br>
<a name="240497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That isn't true (entirely.)  Objects which are outside the viewing frustrum (ie. off to the sides or behind the camera) are culled but everything in the viewing frustrum, whether or not it is occluded, is rendered.<br><br>Think of a house for example.  You could be looking at a wall and thus cannot see anything else but without any sort of occlusion culling system like a portals engine the game will render everything on the other side of the wall, ending by drawing the wall last on top of everything else. <br><br></td></tr></table><br>
<a name="240515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> i understand now, thx. <br><br></td></tr></table><br>
<a name="240544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rogue Vector</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's this continuous LOD stuff then?<br><br>I've read a lot of game engine write-ups that brag about 'the ability to manage large outdoor terrains and the transitions between indoor and outdoor scenes...etc...etc'<br><br>Regards,<br><br>RV <br><br></td></tr></table><br>
<a name="240566"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> That refers to games that reduce the amount of polygons in an object the further away it is from the camera; allowing lots of detail for close-up stuff, without wasting a lot of processing power rendering things in great detail when they're far away. It means you can have great big outdoor areas where you can see for miles, without having to render millions of polygons for all those far away objects. <br><br></td></tr></table><br>
<a name="240602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Continuous LOD is kind of a step backward really.  For a variety of reasons (too numerous to get into right now and anyway definitely debateable) continuous LOD is actually not as good as static LOD.  Not that Blitz supports the latter natively but it is really easy to write code to do that.  Basically CLOD (continuous level of detail) modifies the geometry of objects every frame depending on screensize (hence the "continuous" part of the name) which is pretty inefficient.  Static LOD is based on simply swapping between pre-created level of detail versions of an object as the camera moves.<br><br>CLOD is nice because it is automatic and in theory reduces the visual popping on objects as the level of detail changes.  In practice however it is usually so inefficient that the slight reduction of visual popping is not worth it.  Plus there are a number of techniques to cover up the visual artifacts of static LOD. <br><br></td></tr></table><br>
<a name="240626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Joe,<br><br>Hmm, I don't think that's how the portal system works in Virtools, perhaps it's different?<br><br>I have two cameras set up to view a level with portals.  Camera one is inside showing what the player sees.  Camera two is outside viewing the whole level. Most of the level is not rendered because camera one cannot see it.<br><br>Camera two shows only what can be seen by camera one, the walls beyond are not rendered because they are part of a place which cannot be seen by camera one, and so are not drawn to begin with.  <br><br>The rest of the level is not visible until you move the camera through that section.<br><br>I'm not sure if Virtools culls or just doesn't draw the other parts of the level.<br><br>Okay, here it is... reading the manual...<br><br>Places and Portals are used to optimise the rendering phase. The decision of what to display is done relative to the active camera.<br><br>Once Portal Management is active, these rules apply:<br><br>1. Before rendering the list of Places spatially containing the active camera (including the view frustrum) is composed using the Places bounding box.  These Places are considered to be potentially visible and processed by the renderer.<br><br>2. If an element is not a member of one of these Places the element is not rendered. The element is considered "out of view".<br><br>It goes on to say without Portal Manangement system being active only hierarchical culling of the scene will determine the potentially visible set of entities.<br><br><br>What I can say is that it is a very efficient and worthwhile system to implement and levels designed with it in place will allow more processing time overall, which is a good thing.<br><br>Regards,<br><br>IPete2. <br><br></td></tr></table><br>
<a name="240651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was responding to sinu's post just above mine.  He was misunderstanding portals/occlusion culling; you understand it correctly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
