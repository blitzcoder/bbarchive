<!DOCTYPE html><html lang="en" ><head ><title >Runtime Lightmapping Question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Runtime Lightmapping Question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Runtime Lightmapping Question</a><br><br>
<a name="1095270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My skill with using complicated maths in conjunction with programming is limited, and I need to create some method of baking static lighting into my levels at runtime. Before you say it, no. I'm not using any external code that someone else made. So no YAL. Fortunately, this might not be quite as difficult as previously thought, because the bulk of my world is made completely of large cube-like structures aligned to a grid. So, I don't have to deal with any polygon intersections, just AABB's. So the real question is, how do I partition the texture space of my lightmap for all the faces of the mesh? And remember that everything is cubic and grid-aligned. <br><br></td></tr></table><br>
<a name="1095273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not using any external code that someone else made. So no YAL. <br></div><br><br>Why not? YAL is public domain.<br><br><div class="quote"> cube-like structures <br></div><br><br>Define "cube-like". If they're actual regular boxes, you will be able to cheat in ways that wouldn't be available for arbitrary mesh shapes, but cheating always depends on the details of the restriction! <br><br></td></tr></table><br>
<a name="1095275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll have better luck in the <a href="http://www.gamedev.net/topic/568749-bin-packing-texture-atlasing-glyph-caching-how-do-you-do-it/" target="_blank">Graphics Programming and Theory</a> forum of GameDev.Net. Although, there are plenty of questions about it already.<br><br>What you're looking for is <a href="http://en.wikipedia.org/wiki/Bin_packing_problem" target="_blank">Bin Packing</a>, a "combinatorial" area of algorithms that deal specifically with this problem of efficiently packing smaller structures into a bigger, limited space. <br><br></td></tr></table><br>
<a name="1095277"></a>

<a name="1095278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was a thread recently:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=92901" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=92901</a><br><br>Where jfk EO-11110 and myself were bouncing some code around for doing various real time shadow mapping including a concept test for ICU real time lightmapping - unfortunatly nothing produced acceptable results but you might find some of the code handy for reference purposes.<br><br>Video of the sort of stuff here:<br><br><a href="http://www.youtube.com/watch?v=ydJCmXEHLrY" target="_blank">http://www.youtube.com/watch?v=ydJCmXEHLrY</a><br><br>Unfortunatly you either have to trade off shadow accuracy or performance and theres no middle ground with OK performance and acceptable quality without using pixel shaders and if we had access to them in B3D then there are miles better ways to do real time shadows but you might find it a good way to quickly build lightmaps for each static light (tho you'd probably need fastext w/ render to texture to get high enough quality).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1095291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why not? YAL is public domain. <br></div><br><br>Because:<br>A. My problem is simpler and YAL is just overkill.<br>B. I always like to understand how what I'm using works, so I don't want to jump into YAL not understand how it works.<br><br><div class="quote"> Define "cube-like". <br></div><br>Aligned to a grid. All faces are perfectly square. Imagine Minecraft but the blocks are 4x the size. And this has just given me an idea on how to do the packing. Since all faces are square, I could just create an true/false array and set each occupied square of image to true. This works because the face size is always the same. So I might not even need help with this! Although I'm still not sure how I'll find the collision point between the ray of light and the cube..<br><br><div class="quote"> Unfortunatly you either have to trade off shadow accuracy or performance and theres no middle ground with OK performance and acceptable quality without using pixel shaders <br></div><br><br>*facepalm* I knew I should have picked a word for the topic title that looked less like "realtime". I want precalculated lightmaps. But thanks for your contribution anyway and the RT lightmapping you've been working on is pretty amazing! <br><br></td></tr></table><br>
<a name="1095365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry that comment wasn't exactly aimed at your implementation itself it was just a general comment on the systems tested in that thread - but a lot of them are heavily based on similiar mechanisms to pre-baked lightmaps so the code could be useful to you with some adjustment baring in mind things like quality bias. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
