<!DOCTYPE html><html lang="en" ><head ><title >Centre Of Gravity How?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Centre Of Gravity How?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Centre Of Gravity How?</a><br><br>
<a name="1052377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> With respect to a 'physics (mechanical approximation) engine', if I had a non-uniform mesh, with a non-central centre of gravity, what is the best way to deal with the effect of gravity on that mesh?<br><br>My current thoughts are:<br>1- Set the HANDLE of the mesh to be at the physical centre coordinates<br>2- Set a pivot at the CoG coordinates<br>3- Calculate the force fractionally between the two points<br>4- Translate the mesh accordingly to the ratio of the two points' fractional gravity<br><br>5 - How to account for th effects of air resistancve etc. i.e. when a cone is 'balanced' on its point? In reality, this would never remain stable, but in a 3D simulation with a regular, symmetrical cone, the CoG would be directly above the balanced point. <br><br></td></tr></table><br>
<a name="1052434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you talking about implementing some of the role of a physics engine yourself?<br><br>Because if you're using an existing physics solution such as ODE, the simplest thing would probably be to set the mesh handle wherever you want the centre of gravity, and let the engine take care of the rest. You shouldn't have to do anything else yourself. <br><br></td></tr></table><br>
<a name="1053581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am coding a simple physics (mechanical approximation) 'engine' myself.<br>Essentially,k just dealing with the meshes having a weight and 'physical' geometry for collisions etc.<br><br>note: that assuming (which works for my purposes) the 'material' of the objects and their density is uniform, then the centre of gravity's location ought to be calculable. I can't just "place the handle" where I want the centre of gravity to be without first calculating the centre of gravity... <br><br></td></tr></table><br>
<a name="1053594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm...<br><br>As far as calculating the centre of gravity goes, I don't think there is an easy way for arbitrary shapes (I <i>hate</i> those words... finding the easy way is the whole point of programming). If your object is easily broken down into regular primitives, it's a different matter, of course. What are you looking for here - are you wanting to dynamically apply physics to any closed mesh, or do you have a prepared set of meshes and props whose centres you can calculate in advance?<br><br>As far as calculating the centre of gravity of an arbitrary shape goes, the only way I can think of offhand is to use a particle-based physics system - "fill" the mesh volume with a few hundred particles arranged in a regular, rigid structure and use a trial-and-error algorithm to literally <i>measure</i> the centre of gravity. This would be ridiculously slow, but shouldn't be too hard for shapes of uniform density (on the other hand, it sounds pretty cool... might write this myself...).<br><br>What is important is that you don't need to recalculate the centre of gravity once you've found it. I'd still go with putting the mesh handle at the centre of gravity once you've found that point - even if you're not using ODE, I recommend you take a look at its wiki/source code to get a feel for how they handle this with their body/geom system.<br><br>Also, what are your aims with this system? I'd advise against trying to simulate air resistance in anything intended for real-time use. <br><br></td></tr></table><br>
<a name="1053610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fortunately, I'm dealing with quite simple shapes. Essentially meshes built from collections/arrangements of cubes :) ... perhaps a maximum of less than 5 cubes per parent mesh. The actual arrangement of cubes within these collections, though, wont necessarily be known. This makes the calculation much easier of course.<br><br>Think (and you're onto a BIUG clue as to what I'm doing) - "3D 'Physical' Tetris"<br><br>Whilst not suitable for "any mesh", for the issue here, a simple algorithm which combines the total CoGs and find the average should suffice I think?<br><br>Sorry, I should have mentioned this earliewr that it's really not something very complex I'm aiming for,<br><br>My comment about air-resistance was really with regards to any real-life siutuation where incalculable factors are significant. Like trying to balance a very thin, tall cylinder on its end. I was wondering how best  to introduce the randomnisity of air-resistance etc. without the complexity. <br><br></td></tr></table><br>
<a name="1053613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the component parts are cubes of the same size that don't intersect (making a few more assumptions based on "Tetris"), you don't even need to know the positions of the cubes within the main mesh... just take the average of every vertex's coordinates and you should have the centre of gravity.<br><br>If you want to add a little randomness... I suppose you could simply apply a random force just above the minimum threshold every few milliseconds? No idea about that one, sorry. <br><br></td></tr></table><br>
<a name="1053644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Yasha...<br>That makes sense of how to locate the CoG, thank you, now I jusdt need to get the trig in to determine how the offset affects the object.<br><br>I'm pretty sure it ought to be:<br><br>Distance from Pivot(Centre of contact with whatever it lands on)<br>Multiplied By<br>Cosine(angle)<br>Multiplied By Weight<br>Gives:<br>Ratio of torsional g-force?<br><br>It's still not clear how an object might 'slide' down if the CoG is pulling it... :S<br><br>I'll see how it works with what I have, who knows, Deus might be Ex Machina ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
