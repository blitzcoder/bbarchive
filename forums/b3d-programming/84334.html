<!DOCTYPE html><html lang="en" ><head ><title >Pivot lag?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pivot lag?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Pivot lag?</a><br><br>
<a name="952761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something strange that draws me to come here and ask...<br><br>On our robot sim, our units normally create a bunch of pivots for many different referencing reasons, most of them are placed at 0,0,0 (vectors, item indexing on naming refs applied to pivot hierarchy, etc). This same thing is also applied to the weapons they shoot.<br><br>The problem is... when my camera looks at 0,0,0, this slight lag is noticeable, and was also noticeable when the camera looked at areas where lots of pivots hadn't been cleared (I made a careful memory leak check just now). Even with the memory leaks removed, there is still a vast amount of pivots created mostly at 0,0,0 during gameplay which are needed to exist for said referencing reasons.<br><br>What gets to me is this slight lag that happens even if no mechs are present.. it is like something exists right THERE that you cannot see but that is causing grief, I even went as far as replacing the CreatePivot function with one that returns cubes instead (after the world is cleared, only 11 entities remain which are the ones that should exist after clearing it anyway)<br><br>I know this happens at 0,0,0 because also when the camera moves away from this point, the lag stops happening even if there are still mechs nearby. Lag also manifests no matter from which angle you look at this spot... I imagine it as some kind of Medusa that petrifies you if you dare to look at it.<br><br>Anyways, just wondered if you are aware that pivots may lag if placed on vast amounts (hidden or not... though would be ridiculous that a completely empty entity causes rendering grief...) and if pivots are not responsible of this then I should stop blaming it on them and look at other possibilities that might be causing this.<br><br>Another note worth mentioning... plenty of cached meshes are placed there but hidden, could it also be the hidden meshes? <br><br></td></tr></table><br>
<a name="952767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everything you load and create will default to 0,0,0 - so the idea of congestion is probable.<br><br>Merely hiding them may not be sufficient - as Blitz3D still knows they are there.<br><br>If you have to concentrate the camera on 0,0,0 - then you are best moving everything that is loaded or created to far away from both 0,0,0 and also outside of camera view, then move them back when needed.<br><br>I could be wrong - but I am suspicious on this. <br><br></td></tr></table><br>
<a name="952768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe the problem is based on the fact that, as you said puki, Blitz3D still checks through them even if they are hidden. Sadly there is no way to tell Blitz3D to completely ignore entities -at all- unless you want to unhide them (something like a "hidden mode 2") <br><br></td></tr></table><br>
<a name="952769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How many pivots are there? <br><br></td></tr></table><br>
<a name="952772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am embarrased to say that an average mission drop with about 12 mechs has around 200 of these pivots, not counting hidden cached meshes. <br><br></td></tr></table><br>
<a name="952774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't automatically create pivots.  Apply them per mission, per mech.  Use pivot skeletons and reuse them each time. <br><br></td></tr></table><br>
<a name="952791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is what I'm doing... only fixed pivots are about 11 to 15. I will try to do a test application to see if hidden entities or pivots cause such lag on a raw 3D space with a camera. Will post the results later. <br><br></td></tr></table><br>
<a name="952934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use multipurpose pivots too, but 200 is way too many. <br><br></td></tr></table><br>
<a name="952953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I moved the cached meshes to a very far position and it seemed to fix the problem a bit.<br><br>The test I mentioned... failed miserably at it (no lag showed even with 200 anim-meshes loaded and hidden at 0,0,0 ... ) <br><br></td></tr></table><br>
<a name="953014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I use multipurpose pivots too, but 200 is way too many. <br></div><br><br>Since when?? I've had over 300 pivots onscreen at once on a ten-year-old machine with 8MB Gfx memory, with no detectable problems.<br><br>Sake906, I think there's something else going on here, although unfortunately I've no idea what. <br><br></td></tr></table><br>
<a name="953115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> To be honest, i've had 5000 on screen at the one time, before i just decided to use the one. A pivot should not cause rendering lag at all. Hidden or shown, as they are never rendered. Best thing to do is to create a type object for each pivot, or an array, and when you need one, access it's rotation/position, and apply them to the one pivot.<br><br>Another question. Are you creating and deleting type objects regulary? <br><br></td></tr></table><br>
<a name="955424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not really, but they are being updated with some local movement information... Though this still does not explain why things lag a bit when I look at that certain position of the 3D space. <br><br></td></tr></table><br>
<a name="955431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you show some code to reproduce this please? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
