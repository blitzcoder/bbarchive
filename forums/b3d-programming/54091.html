<!DOCTYPE html><html lang="en" ><head ><title >Any Shadow Solutions for animated meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Any Shadow Solutions for animated meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Any Shadow Solutions for animated meshes</a><br><br>
<a name="604005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eye</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering if anyone has come up with/are working on or have any ideas about casting shadows for animated meshes ?<br><br>This seems to be a standard feature in all pro games, yet I/we have trouble implementing this in blitz.<br><br>Thanks for any input <br><br></td></tr></table><br>
<a name="604010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is one:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=434" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=434</a><br><br>Someone rewrote this recently - it's on the forums somewhere in the last 6 months.<br><br>There is at least one other shadow routine for animated characters - might be this: <a href="http://utenti.lycos.it/mnzsoftware/." target="_blank">http://utenti.lycos.it/mnzsoftware/.</a> <br><br></td></tr></table><br>
<a name="604011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eye</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks puki, <br>I will have a look at those. <br><br></td></tr></table><br>
<a name="604021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The best known solution is <a href="/posts.php?topic=54007" target="_blank">sswifts shadow system.</a><br><br>It is good, but there isn't a perfect solution for Blitz3D mainly cos it uses old technology (DirectX 7).  Regardless, Blitz3D is still great. <br><br></td></tr></table><br>
<a name="604033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I second sswift's shadow system.<br><br>it is well worth it IMO, and really easy to use. <br><br></td></tr></table><br>
<a name="604038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been working on some features for another game I want to make (after my gauntlet remake) which has animated models casting shadows.  I'll release the code when I've done a little more, although it has a few drawbacks that I am going to use as features.<br><br>The way I do them is by taking a render (or multiple renders) from the light's position and orientation (for a spot or point light(multiple renders))  and copying the render to a texture and applying this texture over the level/mesh in such a way that shadows are shown on the mesh.  There are a few ways of doing them and a few tricks you may need to use when designing your levels but I'll hopefully have something to post in a few days. <br><br></td></tr></table><br>
<a name="604041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> To cast shadows from animated meshes the way I do it is by placing a camera at the light source, take a render with scene in white, shadow casters in black, apply it as a texture to a copied mesh, do this for each light, use additive blend and take another render of the sum of all the meshes from the world camera's view and then apply this as a texture to the 2nd uv coords of your level using multiply texture blending (level mesh full bright).  <br> <br>Will post a demonstration in a few days hopefully as I've got something that does this I am working on..although it has a few features/drawbacks that limit its usefulness <br><br></td></tr></table><br>
<a name="604076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Swifts Shadows - although cpu intensive produce very professional results.  I have it working with animated meshes too - lovely!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="604082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recommend Swift's Shadow System. It's really cheap, and fully featured. <br><br></td></tr></table><br>
<a name="604096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty I'd really lik to see your method, sounds good. <br><br></td></tr></table><br>
<a name="604461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a link to an example I put together today demonstrating real time lighting/shadows with animated meshes.  <br><br><a href="http://home.swiftdsl.com.au/~gezeder/lloyd/Shadows.zip" target="_blank">http://home.swiftdsl.com.au/~gezeder/lloyd/Shadows.zip</a><br><br>A few points to note:<br><br>1. I just realised - you will probably need to change the screen resolution as I set it to 1280x800 which is my laptop's resolution, easy enough it's in the first few lines.<br><br>2. There are glitches - I have not tweaked this fully but hopefully you will be able to see how it works.<br><br>To run it:<br><br>open the file Sci Fi Engine.bb (remembering to change the graphics resolution) and simply run it.  Cursor keys to move/turn the player around.  There are about 20 little green men running around who will cast shadows as well as a set of doors which also cast shadows and the walls of the level which while themselves not seen do cast shadows as well.<br><br>The core stuff that does the shadows:<br><br>ShadowMap.bb - contains a few functions, one which basically initialises the system, another which sets up spot lights, another to remove lights when necessary and the main one which updates the level shadows every frame.  <br><br>Don't worry about all the rubbish that is in the Sci Fi Engine.bb code - I basically spent the last little while modifying my gauntlet code to run this and so it is not in the best of shape however it should not give you any errors. <br><br></td></tr></table><br>
<a name="604468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> looks pretty cool - but so much source, i am sure i will not get into this :(  nevertheless, very very nice. <br><br></td></tr></table><br>
<a name="604484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty! Really cool. thanks for sharing <br><br></td></tr></table><br>
<a name="604568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> t3K|Mac - don't worry about the source in sci fi engine.bb, it is the source in shadowmap.bb that deals with the shadows/lighting.<br><br>Edit - alternate thread here:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=54167" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=54167</a> <br><br></td></tr></table><br>
<a name="605123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift shadow system ftw! <br><br></td></tr></table><br>
<a name="605393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is another new shadow system that's well worth considering.  It supports stencil shadows, soft self-shadowing and refractions.  Have a look:<br><br><a href="http://www.codersworkshop.com/viewshowcase.php?id=395&amp;read=no" target="_blank">http://www.codersworkshop.com/viewshowcase.php?id=395&amp;read=no</a><br><br>I'd like to hear from experienced users of Sswift's sytem, how  the quality of shadows compares. <br><br></td></tr></table><br>
<a name="605396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks interesting, but I have my doubts it can handle B3D's with bones, and that's a really important feature to many people. <br><br></td></tr></table><br>
<a name="605405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it is...  The animated robot in the demo is an X file with bones.  I don't imagine B3D or X file format makes much difference here.<br><br>The shadows created by this system are sharp--I don't think soft ground shadows are possible with this technique.  Also, I haven't seen a color-tinted shadow, as seen in your system.  Nor, multiple light sources.  Your demo warns that two-light sources will "kill your frame rate" but I don't find that to be the case on my system.  It's still pretty fast.<br><br>I'm not quite sold on the hot air effect in Andreyman's system, although, it could probably be fine-tuned on the Blitz-side better than it is in the demo.  Generally, the refraction system is *very* nice.<br><br>It would be interesting to see a head-to-head comparison of performance between these two systems. <br><br>All in all, it's looking like stiff competition for you Sswift.  (Sorry, to be the bringer of bad news.)  ...but probably, the two systems will turn out to have different strengths. <br><br></td></tr></table><br>
<a name="605486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Barli:<br>Which robot?  The one from Aliens?  Why would a robot have bones?  I guess in theory you could DO it, and it might save you on surfaces, but it would cost you a whole lot more for tansforming all those vertices.<br><br>Also, I was no aware anyone had developed a library to load X files with bones.  I'm prety sure that isn't possible.  To load anyhting with bones, it has to be loaded as a B3D unless you somehow find a way to get into the internal polygons structures of Blitz.  <br><br>Which is exactly why I dubted he could handle bones.  That's really the only easy way to accomplish that for animated meshes because blitz doesn't report the transformed vertex locations.<br><br>Now in theory, one could wite an X with bones loader, and then transform the vertices themselves, or predict where Blitz will transformt hem for a given animation frame, but in reality that would be such a huge headache and require wiritng so many new commands, and would probably be so slow, and require so much extra ram, that frankly, I doubt he's done that.<br><br>So the only option really would be that he is loading X files, and he found a way to access and write to the bone strucutres in Blitz, which would in itself be a major feat above and beyoond mere stencil shadows. :-)<br><br><br>"Nor, multiple light sources. Your demo warns that two-light sources will "kill your frame rate" but I don't find that to be the case on my system. It's still pretty fast."<br><br>Well I say that because when you add a second light source, you double the number of shadows you cast.  A third would triple the number.  So effectively you cut in half the number of objects you can have cast shadows, and it is already low.<br><br>Of course there are special cases for everything.  That's why I included the option to have more than one.<br><br><br>"All in all, it's looking like stiff competition for you Sswift. (Sorry, to be the bringer of bad news.)"<br><br>It's not that big a deal, I don't sell very many copies of my shadow system anymore. :-) <br><br></td></tr></table><br>
<a name="605788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you look through the media files for demo3, you'll find that the robot model is an X file.  I loaded that file into Unwrap3D and found that it contained a skeletal hierarchy.  ...come to think of it, I've confused that skeleton for DX8-style bones.  Ahhhh, so no.  This is NOT an example of a boned mesh!<br><br>I stand corrected. <br><br></td></tr></table><br>
<a name="605972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ferret</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm creating libs to reuse in future projects, i got one for vertex lighting and i'm working on animated shadows for characters.<br>It will not be as fancy as Swifts shadow system but i'm uploading it when it works. <br><br></td></tr></table><br>
<a name="605981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Also, I was no aware anyone had developed a library to load X files with bones. I'm prety sure that isn't possible. To load anyhting with bones, it has to be loaded as a B3D unless you somehow find a way to get into the internal polygons structures of Blitz. <br> <br></div><br>You simply parse the .x file and do a real-time conversion to .b3d. It's something I'm currently adding to PaceMaker.<br>I already export to boned .x but want the ability to import as well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
