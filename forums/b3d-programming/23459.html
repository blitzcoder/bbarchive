<!DOCTYPE html><html lang="en" ><head ><title >Terrain Multitexturing</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Terrain Multitexturing</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Terrain Multitexturing</a><br><br>
<a name="242328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey everyone.  I've been looking at the "Insaner" demo (samples/mak/insaner on how to multitexture a terrain to get a track image.  Anyways, I've pretty much copied the texturing and setup and everything.  The multitexturing seems like it is working, but instead of having one large track over the entire terrain, the track texture is tiled across the whole terrain.  I'm not sure how to fix this, and my code is pretty much the same as the insaner demo, so I have no idea whats wrong with it.  <br><br><pre class=code>
Global Terrain=CreateTerrain(256)
ScaleEntity terrain,1,50,1
TerrainDetail terrain,5000,True
EntityFX terrain,1


tex0=LoadTexture( "CrackedStone_diff.bmp" )
ScaleTexture tex0,16,16
tex1=LoadTexture( "track.bmp" )
ScaleTexture tex1,256,256
tex2=LoadTexture( "MossyGround.bmp" )
ScaleTexture tex2,16,16
TextureBlend tex2,3


EntityTexture terrain,tex0,0,0
EntityTexture terrain,tex1,0,1
EntityTexture terrain,tex2,0,2

</pre> <br><br>Thats all pretty much the same, except I took out the heightmap and the lightmap.  Anyone know what im doing wrong?  Thanks.<br><br>EDIT:  I just noticed that if I "scaletexture" tex1 it has no effect.  Any idea why? <br><br></td></tr></table><br>
<a name="242338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> try changing the EntityTexture terrain,tex0,0,0<br><br>EntityTexture terrain,tex1,0,1<br><br>EntityTexture terrain,tex2,0,2<br><br><br>to<br><br>EntityTexture terrain,tex0,0,0<br><br>EntityTexture terrain,tex1,1,1<br><br>EntityTexture terrain,tex2,2,2 <br><br></td></tr></table><br>
<a name="242339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> if that dosent work try taking out the<br><br>TextureBlend tex2,3 <br><br></td></tr></table><br>
<a name="242340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply, but that makes only tex0 show up, (I think that parameter is for the frame of the image...).<br><br>EDIT:  Taking out the textureblend makes that texture not show up at all, still the same tiling problem though. <br><br></td></tr></table><br>
<a name="242341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heres my code for multitexturing:<br><br><br>level=LoadTerrain("sweeet.bmp")<br>land=LoadTexture("land.bmp")<br>terra_detail=400000<br>TerrainShading level,terra_shade<br>ScaleTexture land,100,100<br>EntityTexture level,land,0,0<br>d=LoadTexture("tex1.bmp")<br>EntityTexture level,d,1,3<br>ScaleTexture d,0.2,0.2<br>RotateEntity level,0,160,0<br>ScaleEntity level ,1000,500000,1000<br>EntityType level,type_level<br>EntityPickMode level,3,5<br>MoveEntity level,-150,-50,-500<br>d2=LoadTexture("tex1.bmp")<br>EntityTexture level,d2,0,2<br>ScaleTexture d2,50,50<br>d3=LoadTexture("tex1.bmp")<br>EntityTexture level,d3,0,3<br>ScaleTexture d3,5,5<br>While Not KeyHit(1)<br>If KeyDown(200) Then<br>MoveEntity camera,0,0,1<br>EndIf<br><br>hope this helps. <br><br></td></tr></table><br>
<a name="242343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem is something with ScaleTexture not working right.  I tried setting it to different values (100,100, like your code above for example), but it doesn't make any difference.  Is there something that would prevent it from scaling?  Thanks <br><br></td></tr></table><br>
<a name="242345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I really dont know whats wronge but you could try moving your       <br>each scaletexture code under each entitytexture code,sometimes that works. <br><br></td></tr></table><br>
<a name="242347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried editing the code down to:<br><pre class=code>
;tex0=LoadTexture( "CrackedStone_diff.bmp" )
;ScaleTexture tex0,16,16
tex1=LoadTexture( "track.bmp" )
ScaleTexture tex1,256,256
tex2=LoadTexture( "MossyGround.bmp" )
ScaleTexture tex2,16,16
TextureBlend tex2,3

;EntityTexture terrain,tex0,0,0
EntityTexture terrain,tex1,0,1
EntityTexture terrain,tex2,0,2
</pre><br><br>and that works, although it stretches tex2 out across the whole terrain.  Then if I uncomment the lines (specifically the commented entitytexture), everything scales back down to be tiled.  In the insaner demo it allows the track to be scaled big, while the other two are small.  Not sure whats wrong now? <br><br></td></tr></table><br>
<a name="242349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> try this remove the ; from the code i think thats it.<br><br>;tex0=LoadTexture( "CrackedStone_diff.bmp" )<br><br>;ScaleTexture tex0,16,16<br><br>tex1=LoadTexture( "track.bmp" )<br><br>ScaleTexture tex1,256,256<br><br>tex2=LoadTexture( "MossyGround.bmp" )<br><br>ScaleTexture tex2,16,16<br><br>TextureBlend tex2,3<br><br><br><br>;EntityTexture terrain,tex0,0,0<br><br>EntityTexture terrain,tex1,0,1<br><br>EntityTexture terrain,tex2,0,2<br>        <br>            to<br><br>tex0=LoadTexture( "CrackedStone_diff.bmp" )<br><br>ScaleTexture tex0,16,16<br><br>tex1=LoadTexture( "track.bmp" )<br><br>ScaleTexture tex1,256,256<br><br>tex2=LoadTexture( "MossyGround.bmp" )<br><br>ScaleTexture tex2,16,16<br><br>TextureBlend tex2,3<br><br><br><br>EntityTexture terrain,tex0,0,0<br><br>EntityTexture terrain,tex1,0,1<br><br>EntityTexture terrain,tex2,0,2<br><br><br>        this <br><br></td></tr></table><br>
<a name="242351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's how I had it origionally, but it still does the 'tiling' to the track, arg! <br><br></td></tr></table><br>
<a name="242352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >killal4</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dont get it then it looks good to me, as a last resort try taking out the <br><br>TextureBlend tex2,3 <br><br></td></tr></table><br>
<a name="242364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried that too.  Well thanks for the help anyways.  I've been pulling hair out all day over this, ahh! <br><br></td></tr></table><br>
<a name="242377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been adding the code to the insaner demo piece by piece, and this seems to be the line that causes the problem:<br><pre class=code>
Global placer=CreateSphere()  ;placer sphere
</pre><br><br>If I edit that out it works ok, otherwise not.  Any ideas about that?<br><br>EDIT:  To see what I mean, try adding the line "a=createsphere()" to the insaner demo.<br><br>EDIT#2:  I've been testing on some other computers, and they seem to render it correctly.  Maybe it has something to do with my graphics card?  Another computer with a GeForce2 MX runs it fine, while my ATI Radeon 7500 mobile gets the problem.  The GF2 drivers are fairly old (on a pretty old computer, I havnt updated them that I remember).  I think the ATI card has up to date drivers though.  Is there a workaround to get the same effect? <br><br></td></tr></table><br>
<a name="242381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I guess ATI just nput out some new drivers, and that fixes the problem!  Thanks for the help killal4. <br><br></td></tr></table><br>
<a name="242427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >rsbrowndog</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think to fix it pre driver update, the following might have worked:<br><br><pre class=code>
HWMultiTex False
</pre><br><br>Here's the description of this command from the docs:<br><br><div class="quote"> <br>Enables or disables hardware multitexturing. <br><br>Multitexturing is a technique used to display more than one texture on an object at once. Sometimes, 3D hardware has built-in support for this, so that using two textures or more per object will not be any slower than using just one. <br><br>However, some cards have problems dealing with hardware multitexturing, and for these situations you have the option of disabling it. <br><br>When hardware texturing isn't being used, Blitz3D will use its own software technique, which involves duplicating objects that just have one texture each.<br> <br></div><br><br>You may want to include this as an option for other people who might not have the latest drivers!<br><br>Cheers,<br><br>Ryan <br><br></td></tr></table><br>
<a name="242428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dirkduck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey rsbrowndog.  I had played around with that before, both enabling and disabling, but it didn't make any difference on the problem. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
