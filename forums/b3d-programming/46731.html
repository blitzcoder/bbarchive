<!DOCTYPE html><html lang="en" ><head ><title >3D Animation Oddity</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3D Animation Oddity</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >3D Animation Oddity</a><br><br>
<a name="519783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I load animations in the following way:<br><br>Player(0) = LoadAnimMesh( "breathe.b3d" )	;anim seq 0<br>Player(0) = GetChild(Player(0),1);<br>LoadAnimSeq(Player(0),"Marinewlk.b3d")	;anim seq 1<br>LoadAnimSeq(Player(0),"Walk.b3d")		;anim seq 2<br><br>I start off by playing the ‘base’ animation (anim seq 0 in the example), this works fine. I then play any of the other animations, this works fine. The next animation played will be contorted somehow; the bones will not be in the positions where they should be.<br><br>I have noticed that once the animation becomes contorted, playing the ‘base’ animation again means that the next animation will play correctly again and whatever animation is played after that will work correctly but the next animation played after that will then breakdown once more.<br><br>Has anybody else encountered this problem? Does anybody know what to do? I assume it’s a problem with how the animations are exported. I’m using MAX5 and B3D Pipeline. <br><br></td></tr></table><br>
<a name="519861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds to me like you didn't set keyframes for all bones on the very first frame of each sequencs, something you should do in max. <br><br></td></tr></table><br>
<a name="519927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually I'm not doing the models myself but my friend claims he has keyframes at the start and end of all the sequences. Anyway, surely if they didn't have keyframes then they wouldn't animate properly even the first time they were played. <br><br></td></tr></table><br>
<a name="520126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well if you have keyframes at the beginning of the first sequence, the would play ok if you play the sequences one by one, only when play eg. the 3th first and then the 2nd, it wouldn't work. But playing 1,2,3 would work since each sequence ends where the next one starts.<br><br>You could test it, I guess you can play a sequence with a speed of 0.001 or so, then check it's pose. If it's the correct start pose for this sequence (all bones), then the keys are there. <br><br></td></tr></table><br>
<a name="520127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh, wait a minute - <br><pre class=code>
Player(0) = LoadAnimMesh( "breathe.b3d" ) ;anim seq 0
Player(0) = GetChild(Player(0),1);
LoadAnimSeq(Player(0),"Marinewlk.b3d") ;anim seq 1
LoadAnimSeq(Player(0),"Walk.b3d") ;anim seq 2
</pre><br>What the heck are you doing here? Parenting the basic handle to the added sequences? Why? Why don't you simply:<br><pre class=code>
Player(0) = LoadAnimMesh( "breathe.b3d" ) ;anim seq 0
LoadAnimSeq(Player(0),"Marinewlk.b3d") ;anim seq 1
LoadAnimSeq(Player(0),"Walk.b3d") ;anim seq 2
</pre><br><br>That's the way the command works by default. <br><br></td></tr></table><br>
<a name="520186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't do that because we never got animations to work that way. We export the entire model and its bones for the first animation which we then use GetChild on. Subsequent animations just have their bones exported.<br><br><div class="quote"> Well if you have keyframes at the beginning of the first sequence, the would play ok if you play the sequences one by one, only when play eg. the 3th first and then the 2nd, it wouldn't work. But playing 1,2,3 would work since each sequence ends where the next one starts. <br></div><br>That's the thing, we can play ANY animation after we've played the first animation so 1,2 or 1,3 or 1,4 etc but the next animation after that doesn't play correctly. <br><br></td></tr></table><br>
<a name="520190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> By doing that, you lose the handle the the rest of the model, because Player(0) now only holds the child mesh. <br><br></td></tr></table><br>
<a name="520197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So can anybody tell me how to export all my animations in MAX the same way and avoid having to use GetChild? <br><br></td></tr></table><br>
<a name="520472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Export it without Geometry, but keep the main handle intact. you may hide the mesh, so it will export the bones only, including the entire hierarchy. Well, I didn't test this. <br><br></td></tr></table><br>
<a name="520532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay peeps, I think I've more or less sorted it on my own. I'm not using GetChild at any point anymore and I'm exporting all my animations the same way, that is I hide the bones and uncheck the 'scene root' button in Pipeline. Everything works okay with the animations now but I've noticed that if you run the game in debug mode, when you quit it pops up with two "entity does not exist" messages followed by loads of other error messages.<br><br>Any ideas? <br><br></td></tr></table><br>
<a name="520887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please <br><br></td></tr></table><br>
<a name="521003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use get child - export with the scene root - as far as I know it's important. Change the child's variable name to Playerchild  or something (obviously makes sure it's a  global if you intend to keep track of it)....instead of loading the animations in the example you gave..assign a global variable to each sequence (providing you export all the animations in one file which is the easiest way to do it) this way you can keep track of each sequence much easier....it's always worth exporting the bones in my opinion - they are so hand for attaching weapons to etc - just don't export them in the pipeline as meshes.<br><br>Let me know if this didn't make much sense.<br><br>(I'm sure your missing entities are because you're not using globals somewhere.) <br><br></td></tr></table><br>
<a name="521010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raitsun</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Makepool... the problem could be your hardware... some hardware dealer probably fooled you ;-]. <br><br></td></tr></table><br>
<a name="521255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think the missing entity message is anything to do with the code as bar the omission of GetChild the code is identical to what it was when using the other models. The model handles are actually in an array 'Player(0) = LoadAnimMesh( "breathe.b3d" ) ;anim seq 0' so they already are global.<br><br>It's definitely not a hardware fault because I've tried it on more than one system and it always crashes when quitting from debug mode on every machine. <br><br></td></tr></table><br>
<a name="521298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry - I missed that array you had there...well then do you use 'clearworld' anywhere?...any entity code that might be running immediately after that command somewhere will give you that message. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
