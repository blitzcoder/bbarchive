<!DOCTYPE html><html lang="en" ><head ><title >CopyEntity/Mesh &amp; Vertex Lighting problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CopyEntity/Mesh &amp; Vertex Lighting problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >CopyEntity/Mesh &amp; Vertex Lighting problem</a><br><br>
<a name="705421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All,<br><br>I'm doing this vertex lighting thing and I'm very happy with the results. The shading &amp; shadows on static entities (the set/terrain) look really nice, but I just found out that lighting/shading dynamic objects (tables, chairs, crates) is a different story.<br><br>Problem is that dynamic objects are instances made with COPYENTITY. And the obvious problem is that if I alter the vertex colors on ONE mesh, ALL the instances get the same (lighting) effect.<br>So in stead, I need to use COPYMESH to create unique instances- that can receive individual lighting. But using CopyMESH over CopyEntity has the obvious drawbacks on 100's of entities: More memory, more surfaces =&gt; performance hit.<br><br>I'm pretty sure I'm falling in an obvious 'vertex lighting' trap here that some of you must have encountered before... Any tips, work arounds, 'magic red buttons' or other advice appreciated.<br><br>cheers<br>Danny <br><br></td></tr></table><br>
<a name="705423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no way around it.<br><br>If you really need hundred of copies, you should consider chunking them by using CopyMesh and then using Addmesh to form a single mesh with all the copies. That way lighting is correct and you only have 1 surface. (don't do that with widely spread stuff as Blitz3D occlusion is mesh based)<br>You still have more vertices but on static vertices, B3D pushes through far more than 500k to 1 million even on lower end system (GF4 MX) <br><br></td></tr></table><br>
<a name="705424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that one possible solution would be to ""light"" dynamic objects by adjusting their EntityCOLOR. I can apply this seperately to different instances. So that an object in total darkess gets entitycolor 0,0,0 whilst one in full light would be set EntityColor 255,255,255. This works pretty well and much faster since I only have to check it's light 'once' in stead of for every vertex.<br><br>But I can imagine there might be a better solution since there's some 'grey area' with CopyEntity(); ie. You CAN apply individual textures, Even though all instances share the 1 same surface, etc.<br><br>d. <br><br></td></tr></table><br>
<a name="705427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks Dreamora for confirming that :/<br><br>I guess I'll stick with the 'entity color' method, since it's fast enough for real time..<br><br>cheers <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
