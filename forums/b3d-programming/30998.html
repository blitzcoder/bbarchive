<!DOCTYPE html><html lang="en" ><head ><title >Efficient Tile Map</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Efficient Tile Map</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Efficient Tile Map</a><br><br>
<a name="330529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyPhil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm re-writting a 2D game into 3D. The game has a tile map (30x30).. so I've created a single tile mesh (simply a flat square 16x16 units). I've placed this tile mesh 30x30 times (900) into the game world, and as expected, it is quite slow. <br><br>I created a pvit object and made it the parent for each tile. So when I move the pivot, all the tiles move (quite nice actually)<br><br>My question is: Am I going about this the right way? There are world builders out there, but they all seem to be geared to outside, wilderness type terrain. I want objects and certain tile textures in certain places (the orig game is grid based, and I'd like to keep it that way if possible).<br><br>Is this making any sense?<br><br>Cheers,<br>Phil. <br><br></td></tr></table><br>
<a name="330535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to make a single mesh that contains all of your flat squares rather than have 30*30 individual ones.<br><br>All the flat squares that share the same texture can be on the same surface in that mesh.<br><br>The combination of the above will speed it up no end. <br><br></td></tr></table><br>
<a name="330645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Afrohorse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, having 900(30x30) separate objects would be slow, but also having one big object would mean it would try and draw all the tiles, all the time.<br><br>As these are tiles and the textures aren't repeated inside each tile you can put all the individual textures into one big super texture and use the UV coordinates in the vertices that make up the tiles to map into 'parts' this big texture. This way you only have to use one texture (this reduces texture swaps and will speed things up) and you can setup the surfaces however you like. You have to be a little careful doing this though, when the textures are mip-mapped they can bleed into each on the super texture, so its best to either move the UV coordinates inwards slightly, or put a border around the 'sub-textures'. (Ok - it's not the best explaination in the world, it's quite a common technique - but I can't find a link that explains it! )<br><br>Then, split up the tiles into patches - for instance make objects that have 10x10 tiles in it, so you'd have 9(3x3) objects. This way, blitz can clip out the patches that aren't seen. <br><br></td></tr></table><br>
<a name="330686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EOF</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  you can put all the individual textures into one big super texture and use the UV coordinates in the vertices that make up the tiles to map into 'parts' this big texture <br></div>*Cough* .. ImagePacker will do this for you.<br><img src="http://homepage.ntlworld.com/config/imagepacker/s_imagepacker.gif"><br>Just throw all of your images into ImagePacker and save the 'pack'. The saved pack will have an associated definitions file containing the details of each image stored in the pack such as name, x, y, width, height, and animation setting.<br><br>You can also generate Blitz code to display all of the images using a single-surface quad system (SpriteMaster) or regular 2d images (ImageMaster).<br><br>See this thread for more info: <a href="/posts.php?topic=30518" target="_blank">Image Packer</a> <br><br></td></tr></table><br>
<a name="330806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LuckyPhil</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so this is what I need to do:<br><br>- Create 1 big model divitied with 30x30 squares in it instead of 30x30 individial squares.<br><br>- Create a surface for each texture that I want to use. 1 surface for all the road tiles, 1 surface for the grass tiles, 1 surface for the road corners, etc..<br><br>- UV map each square so that it uses the same point in the texture file<br><br>If my world is 30x30 big, and my camera range is say only 20, does that mean that blitz won't draw the last 10 squares of the model, and as you move towards the end, it will draw them.?<br><br>Sorry for the newbieish questions, but I just can't get my head around this bit.<br><br>Cheers,<br>Phil. <br><br></td></tr></table><br>
<a name="330834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an example of creating a grid.  <br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=950" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=950</a><br><br>Regarding the camera, you can change the camera's range if you have to.  <br><br>This code also textures the grid in a fairly intuitive manner using a single texture and a single surface (although it is capable of supporing multiple surfaces if you wish). <br><br></td></tr></table><br>
<a name="330845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mearrin69</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If my world is 30x30 big, and my camera range is say only 20, does that mean that blitz won't draw the last 10 squares of the model, and as you move towards the end, it will draw them.? <br> <br></div><br><br>AFAIK, Blitz will draw the whole thing because it's one model. Part of it is in view all of the time, so the whole thing gets included in the mix. <br><br>If you're really talking about a lot of polygons and it's killing your machine you might think about breaking the model into a few more parts...say, 10x10 cells per mesh. Then you've got nine models. If you're in the middle facing a corner then only a few of those meshes will get drawn.<br><br>At least that's the way I understand it. Anybody correct me on that? <br>M <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
