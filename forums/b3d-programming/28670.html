<!DOCTYPE html><html lang="en" ><head ><title >colliding copies of type?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >colliding copies of type?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >colliding copies of type?</a><br><br>
<a name="301918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lorenzo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have an asteroid type that is copied multiple times and each copy is randomly placed in space along the XZ coodinates. They randomly move and spin. How would I (1) get each asteroid to bounce off each other and (2) the best way to get the translation movement to wrap around the screen? Thanks for anyone's assistance.<br>Here is my code so far:<br><br>Graphics3D 800,600,32,1<br>SetBuffer BackBuffer()<br>SeedRnd (MilliSecs())<br><br>camera=CreateCamera ()<br>point=CreatePivot()<br>mainlight=CreateLight()<br>LightColor mainlight,255,255,10<br>sublight=CreateLight()<br>LightColor sublight,-100,-100,-100<br>indlight=CreateLight()<br>LightColor indlight,255,2,255<br><br>PositionEntity camera,0,100,0<br>PositionEntity mainlight,20,5,20<br>PositionEntity sublight,0,5,-0<br>PositionEntity indlight,0,2,-100<br>PositionEntity point,0,0,0<br><br>PointEntity camera,point<br>PointEntity mainlight,point<br>PointEntity sublight,point<br>PointEntity indlight,point<br><br>Const rock_collision = 1<br>Const bullet_collision = 2<br>Const ship_collision = 3<br><br>Global bam=0<br>Global numshot=0<br>Global bop=0<br>Global angle#=0<br>Global timage=0<br>Global health=3<br>Global movex#=0<br>Global movez#=0<br><br>Type asteroid<br>	Field aster<br>	Field x#<br>	Field y#<br>	Field z#<br>	Field speedx#<br>	Field speedz#<br>	Field spin#<br>	Field life<br>	Field distance#<br>End Type<br><br>Type player<br>	Field entity<br>	Field dist#<br>	Field x#<br>	Field y#<br>	Field z#<br>End Type<br><br>Type bullet<br>    Field entity<br>    Field distance_to_travel#<br>	Field x#<br>	Field y#<br>	Field z#<br>	Field hit<br>End Type<br> <br>Global rock=LoadMesh("images/rock1a.3ds")<br>EntityRadius rock,6<br>EntityType rock,rock_collision<br>HideEntity rock<br><br>For n=0 To 9<br>	ast.asteroid=New asteroid<br>	ast\aster=CopyEntity(rock)<br>	ast\x#=Rnd(-70,70)<br>	ast\y#=0<br>	ast\z#=Rnd(-70,70)<br>	ast\speedx#=Rnd(-.2,.2)<br>	ast\speedz#=Rnd(-.2,.2)<br>	ast\spin# = Rnd(-0.5,0.5)<br>	ast\life=5<br>	PositionEntity ast\aster,ast\x#,0,ast\z#<br>	RotateEntity ast\aster,0,Rnd(0,359),0<br>	ScaleEntity ast\aster,.5,.5,.5<br>Next<br><br>Global ship=LoadMesh("images/playership.3ds")<br>EntityRadius ship,3<br>EntityType ship,ship_collision<br>;HideEntity player<br>shp.player=New player<br>shp\entity=ship<br>shp\dist#=0.05<br>shp\x#=0<br>shp\y#=0<br>shp\z#=0<br>PositionEntity shp\entity,shp\x#,0,shp\z#<br><br>;-- create base bullet entity<br>Global bullet_entity = LoadMesh("images/bullet.x");CreateSphere(6) ;use your sprite here<br>EntityColor bullet_entity, 255, 0, 0<br>EntityRadius bullet_entity,2<br>EntityType bullet_entity,bullet_collision ;set collision type<br>HideEntity bullet_entity<br><br>;--setup sphere_to_polygon collision between rocks and bullets and ships<br>Collisions bullet_collision,rock_collision, 2, 1<br>Collisions ship_collision,rock_collision, 2, 1<br><br>;MAIN LOOP------------------------------------<br>While Not KeyHit(1)<br><br>	playergo()<br><br>	asteroidism()<br><br>	MoveBullets()<br><br>  UpdateWorld<br>  RenderWorld<br>  Text 50,50,"SCORE: "+bam<br>  Text 50,60,"SHIP HITS: "+bop<br>  Flip<br>Wend<br>ClearCollisions<br>End<br><br>;Asteroid function----------------------------<br>Function asteroidism()<br>	For ast.asteroid=Each asteroid<br>		smack=EntityCollided(ast\aster,bullet_collision)<br>		If smack<br>		ast\life=ast\life-1<br>		If ast\life=0<br>			FreeEntity ast\aster<br>			Delete ast<br>			bam=bam+100<br>		EndIf<br>		Else<br>			TurnEntity ast\aster,ast\spin#,ast\spin#,ast\spin#<br>			TranslateEntity ast\aster,ast\speedx#,0,ast\speedz#<br>			If EntityZ#(ast\aster)&gt;100<br>				PositionEntity ast\aster,ast\x#,ast\y#,-100<br>			EndIf<br>			If EntityX#(ast\aster)&gt;120<br>				PositionEntity ast\aster,-120,ast\y#,ast\z#<br>			EndIf<br>			If EntityZ#(ast\aster)&lt;-100<br>				PositionEntity ast\aster,ast\x#,ast\y#,100<br>			EndIf<br>			If EntityX#(ast\aster)&lt;-120<br>				PositionEntity ast\aster,120,ast\y#,ast\z#<br>			EndIf	<br>		EndIf<br>	Next<br>End Function<br><br>;Player function--------------------------------<br>Function playergo()<br>	For shp.player=Each player<br>	bop=EntityCollided(shp\entity,rock_collision)<br>	If bop<br>	health=health-1<br>	If health=0<br>		FreeEntity shp\entity<br>		Delete shp	<br>	EndIf	<br>	Else<br><br>;left and right turning-----------------------<br>	If KeyDown( 203 )=True Then angle#=angle#+3.0 <br>	If KeyDown( 205 )=True Then angle#=angle#-3.0 <br><br>;thrust---------------------------------------<br>	If KeyDown( 200 )=True Then<br>		shp\x#=shp\x#+Cos(angle#+90.0)*shp\dist#<br>		shp\z#=shp\z#+Sin(angle#+90.0)*shp\dist#<br>	EndIf<br> <br>;brakes---------------------------------------<br>	If Not KeyDown(200)<br>		shp\x#=0+(shp\x#*0.995)<br>		shp\z#=0+(shp\z#*0.995)<br>	EndIf<br>	<br>;reposition on screen if off screen-----------<br>	If EntityZ#(shp\entity)&gt;100<br>		PositionEntity shp\entity,shp\x#,shp\y#,-100<br>	EndIf<br>	If EntityZ#(shp\entity)&gt;100<br>		PositionEntity shp\entity,shp\x#,shp\y#,100<br>	EndIf<br>	If EntityX#(shp\entity)&gt;120<br>		PositionEntity shp\entity,-120,shp\y#,shp\z#<br>	EndIf<br>	If EntityX#(shp\entity)&gt;120<br>		PositionEntity shp\entity,120,shp\y#,shp\z#<br>	EndIf<br>	<br>;movement of player----------------------------<br>	RotateEntity shp\entity,0.0,angle#,0.0 <br>	TranslateEntity shp\entity,shp\x#/2,0.0,shp\z#/2<br>	fire()<br>	EndIf<br>	Next<br><br>End Function<br><br>;Bullet functions---------------------------------<br>Function fire()<br>;fire new bullet<br>     If KeyDown(157) ;change to MouseHit(1) for mouse button 1<br>       timage=timage+1<br>       If timage=1<br>		If numshot&lt;3<br>          shoot.bullet = New bullet<br>          shoot\entity = CopyEntity(bullet_entity,ship) ;&lt;parent&gt; parameter here is IMPORTANT<br>          EntityParent shoot\entity, 0 ;remove from parent so it can move on its own<br>          shoot\distance_to_travel = 70<br>		  numshot=numshot+1<br>		EndIf<br>       EndIf<br>     ElseIf Not KeyDown(157)<br>       timage=0<br>     EndIf<br>     If timage&gt;10 Then<br>       timage=0<br>     EndIf<br>End Function<br><br>Function MoveBullets()<br>     ;-- go through all active bullets...<br>	For shoot.bullet = Each bullet<br> 		zap=EntityCollided(shoot\entity,rock_collision)<br>		If zap<br>			FreeEntity shoot\entity<br>			If numshot&gt;0<br>				numshot=numshot-1<br>			EndIf<br>			Delete shoot<br>		Else<br>     ;move bullet forward<br>    		MoveEntity shoot\entity, 0,0,2	         <br>     ;reduce counter of distance to travel until finished movement<br>    		shoot\distance_to_travel = shoot\distance_to_travel - 1<br>     ;remove bullet entity? (finished it's movement (or collided with block))<br>		    If shoot\distance_to_travel=0<br>       ;remove entity and delete bullet type instance<br>		       FreeEntity shoot\entity<br>			   If numshot&gt;0<br>					numshot=numshot-1<br>			   EndIf<br>		       Delete shoot<br>			Else<br>   			   If EntityZ#(shoot\entity)&gt;100<br>				PositionEntity shoot\entity,shoot\x#,shoot\y#,-100<br>			   EndIf<br>			   If EntityX#(shoot\entity)&gt;120<br>				PositionEntity shoot\entity,-120,shoot\y#,shoot\z#<br>			   EndIf<br>			   If EntityZ#(shoot\entity)&lt;-100<br>				PositionEntity shoot\entity,shoot\x#,shoot\y#,100<br>			   EndIf<br>			   If EntityX#(shoot\entity)&lt;-120<br>				PositionEntity shoot\entity,120,shoot\y#,shoot\z#<br>			   EndIf<br>	        EndIf<br>		EndIf<br>     Next<br>End Function <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
