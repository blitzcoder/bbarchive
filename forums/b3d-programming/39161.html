<!DOCTYPE html><html lang="en" ><head ><title >PositionEntity Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PositionEntity Problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >PositionEntity Problem</a><br><br>
<a name="436341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'd think after 2+ years of programming in Blitz I'd have seen everything. Well how about this:<br><br>PROBLEM 1: POSITIONENTITY.<br>Setting the start position of a vehicle; ent is a pivot, and _not_ a child of another entity.<br>My car was nowhere in sight, so I checked the code:<br><br>ex = 723 : ey = 9 ; ex = 392<br>PositionEntity ent, ex,ey,ez<br>UpdateWorld()<br>tempex = EntityX(ent)<br>tempey = EntityY(ent)<br>tempez = EntityZ(ent)<br>; tempex returns 127!<br>; tempey returns 206!<br>; tempez returns 392!<br><br>After 2 days of frustration I wondered what would happen if I immediately repeated the positioning:<br>PositionEntity ent, ex,ey,ez<br>UpdateWorld()<br>tempex = EntityX(ent)<br>tempey = EntityY(ent)<br>tempez = EntityZ(ent)<br>; tempex,y,z now _sometimes_ return 723,9,392 (the correct values).<br>But not all the time. It's a 50/50 chance that I will get non-accurate values as I step through the second block of code.<br>So my cars appear up in the air, or away from the racetrack altogether.<br>This problem happens whether the parent is a pivot or a sphere.<br>Can anyone help. This feels just plain insane!<br><br>PROBLEM 2: POSITIONENTITY.<br>I now take it for granted that child entities are not going to stay 'attached' to parent entities.<br>So every loop I have to do 'PositionEntity car,0,0,0' to 'remind' Blitz to re-attach the child to the parent pivot accurately, or else the car drives along the side of the road, while the pivot drives down the middle. <br><br></td></tr></table><br>
<a name="436342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like a collision thing.<br><br>Hide your entity before you position it, then show it again. <br><br></td></tr></table><br>
<a name="436345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem appears to be immediately solved. Yippee!<br>Thanks Rob. This is a good one to remember for the future, and as a general method.<br><br>Now, any ideas why child entities don't stay attached to parent entities unless 'refreshed' every loop? <br><br></td></tr></table><br>
<a name="436350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> They do stay attached, they just get farther away if a collision happens.  This is normal. <br><br></td></tr></table><br>
<a name="436436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, isn't that a contradiction in terms?<br>If this is unavoidable, then I can't see the point of child entities - I could just as easily 'align' entities with 'parents' manually. <br><br></td></tr></table><br>
<a name="436438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GitTech</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Hide your entity before you position it, then show it again.<br> <br></div><br><br>Or use ResetEntity() <br><br></td></tr></table><br>
<a name="436651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this:<br><br>EntityType your_child,0<br><br>If the child is not buffeted by collisions, it should follow along perfectly. <br><br></td></tr></table><br>
<a name="436729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually I do need the children to register collisions, but thanks anyway. It just means that each loop I have to do PositionEntity ent,0,0,0,FALSE for each child, and also the same for my camera which is a child of a pivot - it also needs to register collisions so that it doesn't go through overhangs.<br>Thanks to all for replying. <br><br></td></tr></table><br>
<a name="436748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, the way round this is to use pivots as your children then positionentity your colliding children to the pivot locations entityx(childpivot,true),entityy(childpivot,true),entityz(childpivot,true)<br><br>There has been talk in the past about being able to make one super entity from a bunch of children and treat the collisions as one, this way you could get a cube (for example) and stick a pivot on each corner so you'd know which corner hits the ground. As it currently stands the corner child will move, so you've got to manually keep track of where they are to see what's hit.<br><br>Bit of a pain in the arse but there it is. <br><br></td></tr></table><br>
<a name="437524"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Rob.<br>Unfortunately I feel that it's one of the points about children/collisions that could have been explained better (or at all) in the manual, thus saving me days of being convinced that it was my fault. But I'm there now, thanks to you all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
