<!DOCTYPE html><html lang="en" ><head ><title >Collision radius and registration points</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision radius and registration points</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Collision radius and registration points</a><br><br>
<a name="381233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! I am familiar with 2-d graphics in which buttons etc. have a "registration point" that can be used to lay out a rectangle for mouse click reactions (for example). Do 3-d meshes, such as character meshes, also have a registration point? If so, A) is there an easy way to tell where that is and B) is it typically at the feet, head or middle of a character mesh? If character meshes have a registration point, is that then used as the center point of their "EntityRadius" elipsoid? If not, where is the center of that ellipsoid? Thanks for any input on these fundamental questions. <br><br></td></tr></table><br>
<a name="381237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> By "registration point" I'm guessing you mean 'origin'. Yes, 3D meshes do have origins. In fact, all point(vertex) coordinates in the mesh are relative to this origin. For most meshes the origin is usually smack-bang in the centre but it can actually be set to *anywhere* in 3D space.<br><br>If you position a mesh with PositionEntity, the point in 3D space you specify is where the mesh is placed, with it's origin at that point. And, yes, EntityRadius etc. are also set at the origin. <br><br></td></tr></table><br>
<a name="381242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your answer which, like all good answers, raises further questions.<br><br>In the "create mesh" example (Blitz3d Help) they create an empty mesh and add 6 vertices and 8 triangles, after which it is used as a graphical element.<br><br>They never explicitly created an origin for it. Is there a "default origin" or if not, what does EntityRadius etc. consider to be the "effective origin" of such constructs?<br><br>You say an origin can be set to anywhere in 3-d space. How can I set or change an object's origin?<br><br>BTW I don't assume I'm entitled to answers!  But if it interests you, I'd like to hear your thoughts.  Thanks. <br><br></td></tr></table><br>
<a name="381249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. The default origin is xyz position 0,0,0 with a pitch/yaw/roll of 0,0,0.<br><br>You can move an obects origin with the following:<br><pre class=code>
Function MoveOrigin(obj,x#,y#,z#)
 MoveEntity obj,x,y,z
 MoveMesh obj,-x,-y,-z
End Function
</pre><br><br>this works because Movemesh moves the vertices without moving the origin and moveentity moves both. <br><br></td></tr></table><br>
<a name="381252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you. <br><br></td></tr></table><br>
<a name="381262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried it but the function "MoveMesh" does not seem to be supported in Blitz3d. But we can do this instead:<br><br>Function MoveOrigin(obj,x#,y#,z#) <br>	save_x# = EntityX(obj,1)<br>	save_y# = EntityY(obj,1)<br>	save_z# = EntityZ(obj,1)<br><br>	PositionEntity obj,0,0,0,1<br>	PositionMesh  obj,-x,-y,-z<br>	PositionEntity(obj,save_x+x,save_y+y,save_z+z,1)<br>End Function<br><br>Thanks for pointing me in the right direction.<br><br>-Marty <br><br></td></tr></table><br>
<a name="381265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZombieWoof</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got a mesh with the origin far offset from them mesh -- is there a quick and dirty way to get the origin back to mesh center without walking all the verts to determine the real mesh extents ?? MeshWidth, MeshHeight, and MeshDepth appear to include the origin in the space they describe. (or have I missed something ?) <br><br></td></tr></table><br>
<a name="381277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REDi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ZombieWoof<br>You could use this to center the origin<br><pre class=code>
FitMesh MeshID,-(MeshWidth(MeshID)/2.0),-(MeshHeight(MeshID)/2.0),-(MeshDepth(MeshID)/2.0),MeshWidth(MeshID),MeshHeight(MeshID),MeshDepth(MeshID)
</pre><br><br>Hope that helps. <br><br></td></tr></table><br>
<a name="381280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I presume he meant PositionMesh() instead of MoveMesh(). <br><br></td></tr></table><br>
<a name="381284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using the function "MoveOrigin" in my post, just above, you can try this:<br><br>1) PositionEntity(object,0,0,0,1)<br>2) MoveOrigin (object, -MeshWidth(object), -MeshHeight(object), -MeshDepth(object))<br>3) PositionEntity(object) as desired.<br><br>This should move the origin to a point on the bounding box for the object.<br><br>-Marty <br><br></td></tr></table><br>
<a name="381291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZombieWoof</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @papa: tried that -- didnt seem to work <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
