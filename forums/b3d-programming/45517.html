<!DOCTYPE html><html lang="en" ><head ><title >Wishing for a use of the z-buffer...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Wishing for a use of the z-buffer...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Wishing for a use of the z-buffer...</a><br><br>
<a name="506061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey peeps<br><br>Had a fantastic idea that was ruined, but i'll let you know  what i thought and then you can tell me how you knew it wouldnt work from day one :P<br><br>Cropping meshes: I was planning on doing a multiple pass render, but the 2nd time around,draw a plane to prevent meshes being drawn past a certain point...<br><br>The problem is that the mesh still seems to get rendered? Basically the dragons head would stick through this "plane" that has eaten the Z-order.. and whatever is behind it doesnt get rendered, thus, water possible. The great thing is it doesnt have to be a plane that you use to crop. you could use any mesh....<br><br>*gets idea*<br><br>CopyRect might save the day again here.......^.^<br>I'll try that again later..<br><br>But while i'm here,<br>Any ideas peeps? <br><br></td></tr></table><br>
<a name="506066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using 'CameraClsMode camera,True,False'?  As you should be able to achieve this with a bit of fiddling about.<br><br>[edit] is this what you're trying to do?<br><br><pre class=code>Graphics3D 800,600
light = CreateLight()
camera = CreateCamera()
plane = CreatePlane()
MoveEntity camera,0,3,-10
cube = CreateCube()
MoveEntity cube,0,5,0


While Not KeyDown(1)
	CameraClsMode camera,True,True
	HideEntity cube : ShowEntity plane
	RenderWorld

	CameraClsMode camera,True,False
	HideEntity plane : ShowEntity cube
	TurnEntity cube,0,1,0
	TranslateEntity cube,0,-0.03,0
	RenderWorld
	Flip
Wend</pre> <br><br></td></tr></table><br>
<a name="506080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create several cameras with different cameraranges. And, as Dave said, make sure the clsmode is off <br><br></td></tr></table><br>
<a name="506119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> camerarange wont do it ;)<br><br>I'm doing CameraClsMode .<br><br>I beleive what i need to do is copyrect the previous render (without the z-order clipping plane) onto the screen ready for the second render :) <br><br></td></tr></table><br>
<a name="506210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why won't camera range work? As Gfk shows, using cameraclsmode will leave the previous render onscreen whilst the current frame is rendered on top. <br><br></td></tr></table><br>
<a name="506235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, i know. My entire Mirror system runs like that<br><br>I was thinking:<br><br>Render part one (clear everything), copyrect to image....<br>Render ONLY the plane<br>Copyrect image back to screen<br>Render part two. (dont clear background)<br><br>Anyway, im terrible when it comes to explaining, i may have a workaround. I'l get back to you :) <br><br></td></tr></table><br>
<a name="506465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this Cygnus, might help in your task.<br><br><a href="http://www.tomspeed.com/clipplanes.zip" target="_blank">http://www.tomspeed.com/clipplanes.zip</a><br><br>put the .decls and .dll into Userlibs<br><br>cursors &amp; 'a' &amp; 'z' to rotate/move the plane<br><br>Most DX7 cards have user defined 'clipping planes', usualy 6 of them. You can turn them on/off independantly, you can set their position &amp; rotation.<br><br>Clipping planes work just like a cameras near/far range, and anything behind the planes won't get rendered.<br><br>Note: user defined means they have nothing to do with Blitz3Ds native camera/viewport clipping regions, these work seperately.<br><br>[Edit] Throw 'Wireframe True' in the example code to see it working better :)<br><br>Tom <br><br></td></tr></table><br>
<a name="506531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Tom, i managed to get it to work last night but i overlooked the obvious....<br><br>I got the meshes to clip (pure blitzcode) along a plane, but didnt realised that my technique will only work for an angle where the camera is above the object. as soon as my entity hits the water, his head still pops up above the water :(<br><br><br>Now, as for this code above, i can't WAIT to try it.<br><br>I'm at work now, just got there. Can you tell me, will it enable me to say, crop the head off a dragon and see the effect from any angle? If so, this will be the key to my water system, and i'll have it complete pretty much as soon as i figure out the hide/show entity speed issues and how/if i can use tweening with it....(Mark, please please please add a flag to some of those commands ;) ) <br><br></td></tr></table><br>
<a name="507031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> PERFECT! Nice one. I've applied this to my project, works really well! <br><br>I'll go off and apply it to "D-Grafix" water code now, it should fix the bug or at least, minimise the problem effect..... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
