<!DOCTYPE html><html lang="en" ><head ><title >Normal Mapping (again)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Normal Mapping (again)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Normal Mapping (again)</a><br><br>
<a name="449267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >.rIKmAN.</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just starting to get to grips with a nice art pipeline for normal maps in Blitz, and now I have hit a prob.<br>I have multitexturing working with a normal map, a base texture and a decal graffitti style texture, and am looking at taking this technique into a full walk around level.<br><br>Now, the few examples I have seen of Normal Mapping all seem to use a light that rotates around using sin/cos routines....obviously you wouldn`t have this in a game.<br><br>I do notice however that the rgb value for EntityColor is also derived from this calculation, but I don`t see how it fits together.<br><br>Can`t I just use a normal CreateLight() and walk around having it light my level with the Normal Maps?<br>Do I need to do some additional calculations each loop to update the normals on the surfaces with them applied?<br><br>Cheers <br><br></td></tr></table><br>
<a name="449701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately yes, because this dot 3 (formerly known as blitz easter egg) does support only static blending. But there is a new demo around that is using a multi layer method to dynamicly fake-update the dot3 map etc. well, to be honest, I didn't get it fully by now :) wait a minute, the url is:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=39353" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=39353</a> <br><br></td></tr></table><br>
<a name="449942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >.rIKmAN.</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks jfk. I saw that a few days ago and though it all sounds good, the normal map isn`t really that pronounced.<br><br>Plus I didn`t really take it all in as I had no intention of Normal Mapping animated objects, but will go have another read - cheers :) <br><br></td></tr></table><br>
<a name="450611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >.rIKmAN.</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there already a walk around normal map demo anywhere?<br>I have created the level and applied the normal maps, but now when using the same lighting method as in other demos (EntityColor mesh,r,g,b) it just makes my mesh all black.<br><br>Weird :S <br><br></td></tr></table><br>
<a name="450705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br> have created the level and applied the normal maps, but now when using the same lighting method as in other demos (EntityColor mesh,r,g,b) it just makes my mesh all black. <br> <br></div><br><br>Each ploygon of the level should be treated seperately...polygons where the light is hitting it strait on would be colored 127,127,255...this equates to a normal value of 0,0,1...when the normal map is DOT3 applied, the videocard performs a dot product operation between the polygon and normal map...the result is a greyscale value from black to white.<br><br>About the easiest way to get the proper normal colors for the level would be to create a pivot...move it to each polygon verticy...point the pivot at each light source visable to the polygon...record the pivot normal...point it to the next lightsource...record the pivot normal...repeat until no more lightsources strike the polygon the verticy is attached to...then average the recorded pivot normals...convert that averaged normal into a RGB color (average normal X axis * 127 + 127 =  red...average normal Y Axis * 127 + 127 = Blue, etc..) and give that particular verticy that color...move the pivot to the next verticy and repeat...once all the verticy colors have been calculated, save the level mesh.<br><br>Then in your game engine just render it with the fullbrite and verticy color flags...DOT3 the normal maps onto that, followed by the regular textures and lightmap....note: this is only static precalculated lighting...additionaly the calculated verticy colors arn't the actual verticy normals, rather they are the normals (or vector) pointing in the direction of the light as it strikes the surface. <br><br></td></tr></table><br>
<a name="450717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>About the easiest way to get the proper normal colors for the level would be to create a pivot...move it to each polygon verticy...point the pivot at each light source visable to the polygon...record the pivot normal...point it to the next lightsource...record the pivot normal...repeat until no more lightsources strike the polygon the verticy is attached to...then average the recorded pivot normals...convert that averaged normal into a RGB color (average normal X axis * 127 + 127 = red...average normal Y Axis * 127 + 127 = Blue, etc..) and give that particular verticy that color...move the pivot to the next verticy and repeat...once all the verticy colors have been calculated, save the level mesh. <br> <br></div><br><br>Right. I vote Mark integrates all that into Maplet so that I never have to contemplate any of what you just wrote ever again. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
