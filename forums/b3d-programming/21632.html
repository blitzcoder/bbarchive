<!DOCTYPE html><html lang="en" ><head ><title >B3D problem ...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B3D problem ...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >B3D problem ...</a><br><br>
<a name="221570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >necky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>   I've come on quite far with the .B3D exporter, but I've come across a bit of a problem that one of you guys might be able to fix. For some reason this code block below won't export more then one triangle per node entity. What it should be displaying is 2 triangles, each with a different texture. It's only displaying one. Any ideas anyone?<br><br>;*****************<br>;* .B3D Exporter *<br>;*****************<br><br>Include "b3dfile.bb"<br><br>;**** Open file for writting *****<br><br>Global filename$="c:\test\temp.b3d"<br><br>Global file=WriteFile( filename$ )<br><br>	b3dSetFile( file )<br>	<br>;**********Title *****************<br><br>	b3dBeginChunk( "BB3D" )<br>	b3dWriteInt( 1 )						; Version<br>		<br><br>;*********  Get textures *********<br><br>	b3dBeginChunk( "TEXS" )<br><br>;-- Texture 1 START ---<br><br>	b3dWriteString( "c:\test\texturea.bmp")	; Texture file name<br>	b3dWriteInt( 1 )						; Texture flag<br>	b3dWriteInt( 1 )						; Blend type	<br>	b3dWritefloat( 0 )						; X position<br>	b3dWritefloat( 0 )						; Y position<br>	b3dWritefloat( 1 )		 				; X Scale<br>	b3dWritefloat( 1 )						; Y Scale<br>	b3dWritefloat( 1 )						; Rotation<br>	<br>;--  Texture 1 END  ---	<br><br>;-- Texture 2 START ---<br><br>	b3dWriteString( "c:\test\textureb.BMP")	; Texture file name<br>	b3dWriteInt( 1 )						; Texture flag<br>	b3dWriteInt( 1 )						; Blend type	<br>	b3dWritefloat( 0 )						; X position<br>	b3dWritefloat( 0 )						; Y position<br>	b3dWritefloat( 1 )		 				; X Scale<br>	b3dWritefloat( 1 )						; Y Scale<br>	b3dWritefloat( 1 )						; Rotation<br>	<br>;--  Texture 2 END  ---	<br><br>;etc.<br><br>	b3dEndChunk()							;end of Textures chunk<br>	<br>;*********  Create brushes *********<br><br>	b3dBeginChunk( "BRUS" )<br><br>;-- Brush defaults ---<br><br>	b3dWriteInt( 1 )						; Default textures per chunk<br>	b3dWriteString( "default")				; Default brush name<br>	b3dWritefloat( 1 )						; Default R <br>	b3dWritefloat( 0 )						; Default G <br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Default Alpha<br>	b3dWritefloat( 1 )						; Default Shininess<br>	b3dWriteInt( 1 )						; Default Blend type<br>	b3dWriteInt( 1 )						; Default FX type<br>	b3dWriteInt( 0 )						; Default texture number<br>	<br>;---Brush 1 START ---<br><br>	b3dWriteString( "brusha")				; brush 1 name<br>	b3dWritefloat( 1 )						; Default R<br>	b3dWritefloat( 1 )						; Default G<br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Alpha<br>	b3dWritefloat( 1 )						; Shininess		<br>	b3dWriteInt( 1 )						; Blend type<br>	b3dWriteInt( 1 )						; FX type<br>	b3dWriteInt( 0 )						; texture number	<br>	<br>;---Brush 1 END ---	<br><br>;---Brush 2 START ---<br><br>	b3dWriteString( "brushb")				; brush 2 name<br>	b3dWritefloat( 1 )						; Default R<br>	b3dWritefloat( 1 )						; Default G<br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Alpha<br>	b3dWritefloat( 1 )						; Shininess		<br>	b3dWriteInt( 1 )						; Blend type<br>	b3dWriteInt( 1 )						; FX type<br>	b3dWriteInt( 1 )						; texture number	<br>	<br>;---Brush 2 END ---	<br><br>	b3dEndChunk()							;end of brushes chunk<br>	<br>;********** NODES ***********<br><br>	b3dBeginChunk( "NODE" )<br>	b3dWriteString( "MAIN_NODE")			; Node name<br>	<br>	b3dWritefloat( 1 )						;  X pos <br>	b3dWritefloat( 1 )						;  Y pos<br>	b3dWritefloat( 1 )						;  Z pos<br>	b3dWritefloat( 1 )						;  X scale<br>	b3dWritefloat( 1 )						;  Y scale<br>	b3dWritefloat( 1 )						;  Z scale<br>	b3dWritefloat( 1 )						;  W rotation	<br>	b3dWritefloat( 1 )						;  X rotation<br>	b3dWritefloat( 1 )						;  Y rotation<br>	b3dWritefloat( 1 )						;  Z rotation<br>	<br>;********** Meshes ***********		<br>	<br>;-------------------------------------------------------------	<br>	<br>b3dBeginChunk( "MESH" )<br>		<br>	b3dWriteInt( 1 )						; Brush number<br>	<br>;--- VERTS ---<br><br>b3dBeginChunk( "VRTS" )<br><br>	b3dWriteInt( 2 )						; Flags (0=no, 1=with normals, 2=with colour)	<br>	b3dWriteInt( 1 )						; texture coords set<br>	b3dWriteInt( 2 )						; coords per set<br>	<br>;-- vert 1 data --<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 2 data --	<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 3 data --	<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 1 )	 					; V<br>	<br>b3dEndChunk()							;end of verts chunk<br>	<br>;--- TRIS ----<br><br>b3dBeginChunk( "TRIS" )<br>	<br>	b3dWriteInt( 1 )						; Brush used for tris<br>	<br>;-- Tris 1 data --<br><br>	b3dWriteInt( 0 )						; Tri point A<br>	b3dWriteInt( 1 )						; Tri point B<br>	b3dWriteInt( 2 )						; Tri point C<br>	<br>b3dEndChunk()							;end of verts chunk<br><br>b3dEndChunk()							;end of MESH chunk<br><br>;----------------------------------------------------------<br>b3dBeginChunk( "MESH" )<br>		<br>	b3dWriteInt( 2 )						; Brush number<br>	<br>;--- VERTS ---<br><br>b3dBeginChunk( "VRTS" )<br><br>	b3dWriteInt( 2 )						; Flags (0=no, 1=with normals, 2=with colour)	<br>	b3dWriteInt( 1 )						; texture coords set<br>	b3dWriteInt( 2 )						; coords per set<br>	<br>;-- vert 1 data --<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 2 data --	<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 1 )	 					; V<br>	<br>;-- vert 3 data --	<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 1 )	 					; V<br>	<br>b3dEndChunk()							;end of verts chunk<br>	<br>;--- TRIS ----<br><br>b3dBeginChunk( "TRIS" )<br>	<br>	b3dWriteInt( 2 )						; Brush used for tris<br>	<br>;-- Tris 1 data --<br><br>	b3dWriteInt( 0 )						; Tri point A<br>	b3dWriteInt( 1 )						; Tri point B<br>	b3dWriteInt( 2 )						; Tri point C<br>	<br>b3dEndChunk()							;end of verts chunk<br><br>b3dEndChunk()							;end of MESH chunk<br><br>;--------------------------------------------------------------------<br><br>b3dEndChunk()							;end of NODE chunk<br>		<br>b3dEndChunk()							;end of BB3D chunk<br>			<br>CloseFile file<br>	<br>While Not KeyHit(1)<br><br>Wend <br><br></td></tr></table><br>
<a name="221572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >necky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's okay people, I've answered my own question :O). Here's how it's done if you want to export multitexture objects in .B3D format.<br><br><br>;*****************<br>;* .B3D Exporter *<br>;*****************<br><br>Include "b3dfile.bb"<br><br>;**** Open file for writting *****<br><br>Global filename$="c:\test\temp.b3d"<br><br>Global file=WriteFile( filename$ )<br><br>	b3dSetFile( file )<br>	<br>;**********Title *****************<br><br>	b3dBeginChunk( "BB3D" )<br>	b3dWriteInt( 1 )						; Version<br>		<br><br>;*********  Get textures *********<br><br>	b3dBeginChunk( "TEXS" )<br><br>;-- Texture 1 START ---<br><br>	b3dWriteString( "c:\test\texturea.bmp")	; Texture file name<br>	b3dWriteInt( 1 )						; Texture flag<br>	b3dWriteInt( 1 )						; Blend type	<br>	b3dWritefloat( 0 )						; X position<br>	b3dWritefloat( 0 )						; Y position<br>	b3dWritefloat( 1 )		 				; X Scale<br>	b3dWritefloat( 1 )						; Y Scale<br>	b3dWritefloat( 1 )						; Rotation<br>	<br>;--  Texture 1 END  ---	<br><br>;-- Texture 2 START ---<br><br>	b3dWriteString( "c:\test\textureb.bmp")	; Texture file name<br>	b3dWriteInt( 1 )						; Texture flag<br>	b3dWriteInt( 1 )						; Blend type	<br>	b3dWritefloat( 0 )						; X position<br>	b3dWritefloat( 0 )						; Y position<br>	b3dWritefloat( 1 )		 				; X Scale<br>	b3dWritefloat( 1 )						; Y Scale<br>	b3dWritefloat( 1 )						; Rotation<br>	<br>;--  Texture 2 END  ---	<br><br>;etc.<br><br>	b3dEndChunk()							;end of Textures chunk<br>	<br>;*********  Create brushes *********<br><br>	b3dBeginChunk( "BRUS" )<br><br>;-- Brush defaults ---<br><br>	b3dWriteInt( 1 )						; Default textures per chunk<br>	b3dWriteString( "default")				; Default brush name<br>	b3dWritefloat( 1 )						; Default R <br>	b3dWritefloat( 0 )						; Default G <br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Default Alpha<br>	b3dWritefloat( 1 )						; Default Shininess<br>	b3dWriteInt( 1 )						; Default Blend type<br>	b3dWriteInt( 1 )						; Default FX type<br>	b3dWriteInt( 0 )						; Default texture number<br>	<br>;---Brush 1 START ---<br><br>	b3dWriteString( "brusha")				; brush 1 name<br>	b3dWritefloat( 1 )						; Default R<br>	b3dWritefloat( 1 )						; Default G<br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Alpha<br>	b3dWritefloat( 1 )						; Shininess		<br>	b3dWriteInt( 1 )						; Blend type<br>	b3dWriteInt( 1 )						; FX type<br>	b3dWriteInt( 0 )						; texture number	<br>	<br>;---Brush 1 END ---	<br><br>;---Brush 2 START ---<br><br>	b3dWriteString( "brushb")				; brush 2 name<br>	b3dWritefloat( 1 )						; Default R<br>	b3dWritefloat( 1 )						; Default G<br>	b3dWritefloat( 1 )						; Default B<br>	b3dWritefloat( 1 )						; Alpha<br>	b3dWritefloat( 1 )						; Shininess		<br>	b3dWriteInt( 1 )						; Blend type<br>	b3dWriteInt( 1 )						; FX type<br>	b3dWriteInt( 1 )						; texture number	<br>	<br>;---Brush 2 END ---	<br><br>	b3dEndChunk()							;end of brushes chunk<br>	<br>;********** NODES ***********<br><br>	b3dBeginChunk( "NODE" )<br>	b3dWriteString( "MAIN_NODE")			; Node name<br>	<br>	b3dWritefloat( 1 )						;  X pos <br>	b3dWritefloat( 1 )						;  Y pos<br>	b3dWritefloat( 1 )						;  Z pos<br>	b3dWritefloat( 1 )						;  X scale<br>	b3dWritefloat( 1 )						;  Y scale<br>	b3dWritefloat( 1 )						;  Z scale<br>	b3dWritefloat( 1 )						;  W rotation	<br>	b3dWritefloat( 1 )						;  X rotation<br>	b3dWritefloat( 1 )						;  Y rotation<br>	b3dWritefloat( 1 )						;  Z rotation<br>	<br>;********** Meshes ***********		<br>	<br>;-------------------------------------------------------------	<br>	<br>b3dBeginChunk( "MESH" )<br>		<br>	b3dWriteInt( 1 )						; Brush number<br>	<br>;--- VERTS ---<br><br>b3dBeginChunk( "VRTS" )<br><br>	b3dWriteInt( 2 )						; Flags (0=no, 1=with normals, 2=with colour)	<br>	b3dWriteInt( 1 )						; texture coords set<br>	b3dWriteInt( 2 )						; coords per set<br>	<br>;-- vert 1 data --<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 2 data --	<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 3 data --	<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 1 )	 					; V<br>	<br>;-- vert 4 data --<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( 5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 0 )	 					; V<br>	<br>;-- vert 5 data --	<br>	<br>	b3dWritefloat( 5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 1 )						; U<br>	b3dWritefloat( 1 )	 					; V<br>	<br>;-- vert 6 data --	<br>	<br>	b3dWritefloat( -5 )						; X pos <br>	b3dWritefloat( -5 )						; Y pos<br>	b3dWritefloat( 0 )						; Z pos<br>	<br>	b3dWritefloat( 1 )						; R<br>	b3dWritefloat( 1 )						; G<br>	b3dWritefloat( 1 )						; B<br>	b3dWritefloat( 1 )						; Alpha<br>	<br>	b3dWritefloat( 0 )						; U<br>	b3dWritefloat( 1 )	 					; V<br><br>	<br>b3dEndChunk()							;end of verts chunk<br>	<br>;--- TRIS ----<br><br>b3dBeginChunk( "TRIS" )<br>	<br>	b3dWriteInt( 1 )						; Brush used for tris<br>	<br>;-- Tris 1 data --<br><br>	b3dWriteInt( 0 )						; Tri point A<br>	b3dWriteInt( 1 )						; Tri point B<br>	b3dWriteInt( 2 )						; Tri point C<br>	<br>b3dEndChunk()							;end of tris chunk<br><br>;--------------<br>;--- TRIS b----<br><br>b3dBeginChunk( "TRIS" )<br>	<br>	b3dWriteInt( 2 )						; Brush used for tris<br>	<br>;-- Tris 2 data --<br><br>	b3dWriteInt( 3 )						; Tri point A<br>	b3dWriteInt( 4 )						; Tri point B<br>	b3dWriteInt( 5 )						; Tri point C<br>	<br>b3dEndChunk()							;end of tris chunk<br><br>b3dEndChunk()							;end of MESH chunk<br>	<br>;-------------------------------------------------------------	<br><br>;--------------------------------------------------------------------<br><br>b3dEndChunk()							;end of NODE chunk<br>		<br>b3dEndChunk()							;end of BB3D chunk<br>			<br>CloseFile file<br>	<br>While Not KeyHit(1)<br><br>Wend <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
