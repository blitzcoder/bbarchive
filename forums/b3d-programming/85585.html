<!DOCTYPE html><html lang="en" ><head ><title >BlitzGet Delux and Rerouted addresses</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BlitzGet Delux and Rerouted addresses</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >BlitzGet Delux and Rerouted addresses</a><br><br>
<a name="968442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In reference to this code<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=24" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=24</a><br><br>I cannot seem to get it to initiate a link to files through NO-IP (rerouted) address.  Direct linking works fine, but I dont want to hardwire my software to a site that may or may not change later.<br><br>Any advice would be appreciated.  Thanks. <br><br></td></tr></table><br>
<a name="968547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I cannot even connect with OpenTCPStream (webHost$, 80) if the webhost$ is a no-ip redirect.. still stumped.<br><br>example <br>"www.empowergames.com/tt/updates/whatever.dat"     will work but<br>"tinytankupdates.servehttp.com/tt/updates/whatever.dat"  will not (no-ip erdirect address) <br><br></td></tr></table><br>
<a name="968558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok well im on the right track.. for anyone who is wondering, you have to modify blitzget to look at the header to find the word "location" this means the headers info holds the redirected url, you then have to close that connection and start a new one.. heres the info I found on this<br><br>14.30 Location<br>The Location response-header field is used to redirect the recipient to a location other than the Request-URI for completion of the request or identification of a new resource. For 201 (Created) responses, the Location is that of the new resource which was created by the request. For 3xx responses, the location SHOULD indicate the server's preferred URI for automatic redirection to the resource. The field value consists of a single absolute URI. <br><br>       Location       = "Location" ":" absoluteURI<br>An example is: <br><br>       Location: <a href="http://www.w3.org/pub/WWW/People.html" target="_blank">http://www.w3.org/pub/WWW/People.html</a><br>      Note: The Content-Location header field (section 14.14) differs<br>      from Location in that the Content-Location identifies the original<br>      location of the entity enclosed in the request. It is therefore<br>      possible for a response to contain header fields for both Location<br>      and Content-Location. Also see section 13.10 for cache<br>      requirements of some methods.<br><br><br>heres my modified snipper from blitzget delux.. I send my data to a bank instead of a file. but you can replace my bank with a file handle like the original bgd<br><pre class=code>
Repeat
If WEBGET_ESCAPE=1 Then 
     If KeyDown(1) Then 
          CloseTCPStream www
 	  Return -1
     EndIf  					
EndIf

header$ = Lower$(ReadLine (www))
If Instr(Lower$(header$),"location",1) Then 
     CloseTCPStream www
     spot=Instr(header$,":",1)
     newurl$=Trim$(Mid$(header$,spot+1,Len(header$)-spot))                 
     Return blitzget_bank(newurl$,savebank)
EndIf
If Instr(Lower$(header$),"not found",1) Then 
     closeTCPStream www
     Return -1
EndIf	
DebugLog "hdr: "+header$
If Left (header$, 16) = "content-length: "	; Number of bytes to read
     bytesToRead = Right (header$, Len (header$) - 16)
EndIf
Until header$ = "" Or (Eof (www))

</pre> <br><br></td></tr></table><br>
<a name="968627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done, RifRaf... I had a look into this, and found that handling "30x" responses was indeed key to dealing with re-directed URLs -- I've updated my (ahem, 7 year-old) Code Archives entry below (in the comments):<br><br><a href="/codearcs/codearcs.php?code=24" >BlitzGet Deluxe</a><br><br>This is better than the original, in that I now check for '200' and '404' responses ('OK to download' and 'file not found' respectively). I've only tested <i>very briefly</i> that it downloads the re-directed URL, and to use this in any sort of production code, you really ought to add much more in the way of error-checking, and ideally ought to re-write from scratch using this only as a general guide to the download process.<br><br>This is a great resource if you want to take things further, or handle things more 'correctly'...<br><br><a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank">http://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a> <br><br></td></tr></table><br>
<a name="968821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice, thank you. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
