<!DOCTYPE html><html lang="en" ><head ><title >Shooter game.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Shooter game.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Shooter game.</a><br><br>
<a name="764163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.midnightdragons.org/Yavin/img002.png"><br><br>I am starting a new project, which will be an up screen shooter that will make use of some material that I have already to save some time in development.<br><br>The above screen shot shows what I call a Tile, a screen might show 5 Tiles at a time, and a level of course will be many tiles long.<br><br>I am creating my tiles all as generic blank slates, much like the one above, I will then edit and create a set of unique tiles for each zone in the the game, which will allow me to create dynamic levels that always look different but that still fit with each other as the basic shap of the tiles wont change.<br><br>Anyone think this is worth doing ? or would it be better on the CPU and memory if I just make one big level model per zone and fill it with all the detail it comes with ? or keep this tile idea iv got.<br><br>Its been a while since iv done anything a few years to be exact so just wanted to check this and run it past you guys to see if there will be any major issues.<br><br>PS. posting this on both B3D and Max forums as I am not sure which language I will be using, will probably pick based on responses from this post. <br><br></td></tr></table><br>
<a name="764168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you going to use 3d models as the tiles?  This can add up in a hurry if you dont merge it into smaller surfaces.  At the angle you have the top one at, with a short drawing distance, you should be able to get away with it just fine. <br><br></td></tr></table><br>
<a name="764182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am still playing with tile size and stuff. but yeah the tiles will be 3D. and the camera will be at the same angle as in the picture, but not off to the side like that, it will be set in the middle of the map, and the camera will tilt and pan to follow the ship as it moves to the left and right on the level.<br><br>I hit a lighting problem with the tiles tho, I only have 1 onni light set at the camera, and I noticed it was lighting each of the tiles the same, so you got this light dark effect which you could see when the tiles were loaded. very annoying.<br><br>Early days tho. <br><br></td></tr></table><br>
<a name="764185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure I understand your lighting problem. There shouldn't be a problem lighting them correctly, as long as the vertex normals are correct. <br><br></td></tr></table><br>
<a name="764186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The angle of the top screenshot reminds me of Durrel's "Critical Mass".  Or possibly "Zaxxon". <br><br></td></tr></table><br>
<a name="764194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yavin is probably talking about the fact that blitz lights every object each "tile" has a gradient light from top to bottom on EACH tile.  It looks annoying I know what he is referring to.  Merge all the tiles into the same mesh this should resolve the issue. <br><br></td></tr></table><br>
<a name="764199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still dont get it. Blitz lights meshes using the vertex normals. If the normals are correctly set, it should be fine.<br><br>*shrugs* <br><br></td></tr></table><br>
<a name="764202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know what he's talking about.<br><br>Try using flatshading - that might help. <br><br></td></tr></table><br>
<a name="764205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I think I see what you mean now - the lighting is wrong where the tiles join?<br><br>If so, I dont think flatshading will help, TBH. It isnt properly implemented in B3D. Instead, just make sure the norms at the tile edges are pointing straight up, instead of having them smoothed. <br><br></td></tr></table><br>
<a name="764216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unwelding, calculating the normals per triangle manually then flatshading will definately sort this.  I've had this lighting issue when using 3d tiling with lights in the past.<br><br>You could try the functions I posted here ... B32's last ones retain the vertex uv's.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=64797" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=64797</a><br><br>Stevie <br><br></td></tr></table><br>
<a name="764227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.midnightdragons.org/Yavin/pyro.rar" target="_blank">http://www.midnightdragons.org/Yavin/pyro.rar</a><br><br>This should show what I am talking about. I dont think I can merge the meshs cos its tiles, and I want to free each tile as it scrolls out the bottom of the screen.<br><br>As for the normals, some one said make sure they are all set correctly .. Not sure how to do that in 3DS Max 6. <br><br></td></tr></table><br>
<a name="764245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if I were doing this, I wouldnt bother with unwelding or flatshading. I'd just create each tile (without sides or bottom), and make sure all vertex normals were point straight up. Am I missing something here?<br><br>[edit] well, not ALL normals. I mean set the normals at the edge of the tile mesh perpendicular to the poly they belong to. Gah, I've had way too much beer for this. :P <br><br></td></tr></table><br>
<a name="764250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well for starters your ignoring the normals which you set in 3ds max completely by calling updatenormals() after loading.  Even after removal you still get the issue though so your normals are wrong at the edges .. looks like they are averaged as per Blitz's updatenormals() command.<br><br>This works better but it looks like you're texture uv's are off .. hence the black lines on the distant tiles.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;Pyro Working title. and test code
; loading the level segments into a screen resolution



Graphics3D 800,600,16,2
SetBuffer BackBuffer()

Global Ship=LoadMesh("test/Ship.3ds")
Global green_skin=LoadTexture("test/Ship.png")
EntityTexture Ship,green_skin
 

;Global Levela=LoadMesh("test/Beach001.3ds") 
Global Levela=MESHunweld( LoadMesh("test/Beach001.3ds") )
MESHnormals( Levela )
HideEntity levela

Dim lev(20)
For looper=0 To 19
	lev(looper)=CopyEntity(levela)
	PositionEntity lev(looper),0,0,looper * MeshDepth( Levela ) 
	EntityFX lev(looper),1
Next

;ScaleEntity level,.02,.02,.02

Global game_cam=CreateCamera()
PositionEntity game_cam,0,1500,-1000
RotateEntity game_cam,90,0,0
CameraRange game_cam,1000,6000
PointEntity game_cam,ship
	
Global light=CreateLight(1)
PositionEntity light,0,-2000,0
	
While Not KeyDown(1)

	UpdateWorld()
	RenderWorld()	
	Flip

Wend 


;by Stevie G
Function MESHnormals( mesh )

	For l = 1 To CountSurfaces(mesh )
		s = GetSurface( mesh , l )
		;calculate normals for flatshading
		For t = 0 To CountTriangles( s )-1
			v0 = TriangleVertex( s, t, 0 )
			v1 = TriangleVertex( s, t, 1 )
			v2 = TriangleVertex( s, t, 2 )
			ax# = VertexX( s, v1 ) - VertexX( s, v0 )
			ay# = VertexY( s, v1 ) - VertexY( s, v0 )	
			az# = VertexZ( s, v1 ) - VertexZ( s, v0 )	
			bx# = VertexX( s, v2 ) - VertexX( s, v1 )
			by# = VertexY( s, v2 ) - VertexY( s, v1 )	
			bz# = VertexZ( s, v2 ) - VertexZ( s, v1 )	
			Nx# = ( ay * bz ) - ( az * by )
			Ny# = ( az * bx ) - ( ax * bz )
			Nz# = ( ax * by ) - ( ay * bx )
			Ns# = Sqr( Nx * Nx + Ny*Ny + Nz*Nz )
			Nx = Nx / Ns
			Ny = Ny / Ns
			Nz = Nz / Ns
						
			For v = v0 To v2
				VertexNormal s, v, Nx, Ny, Nz 
			Next
		Next
	Next

End Function


Function MESHunweld( Mesh )

	Copy = CreateMesh()
	For su = 1 To CountSurfaces( Mesh )
		s = GetSurface( Mesh , su )
		ns = CreateSurface( Copy )
		For t = 0 To CountTriangles( s ) - 1
			v0 = TriangleVertex( s, t, 0 )
			v1 = TriangleVertex( s, t, 1 )
			v2 = TriangleVertex( s, t, 2 )
			Nv0 = AddVertex( ns , VertexX( s , v0 ) , VertexY( s, v0 ) , VertexZ( s, v0 ) )
			Nv1 = AddVertex( ns , VertexX( s , v1 ) , VertexY( s, v1 ) , VertexZ( s, v1 ) )
			Nv2 = AddVertex( ns , VertexX( s , v2 ) , VertexY( s, v2 ) , VertexZ( s, v2 ) )
			VertexTexCoords ns, nv0, VertexU(s, v0), VertexV(s, v0), VertexW(s, v0)
			VertexTexCoords ns, nv1, VertexU(s, v1), VertexV(s, v1), VertexW(s, v1)
			VertexTexCoords ns, nv2, VertexU(s, v2), VertexV(s, v2), VertexW(s, v2)
			AddTriangle ns , Nv0 , Nv1 , Nv2
		Next
		ClearSurface s

		For t = 0 To CountTriangles( ns ) - 1
			v0 = TriangleVertex( ns, t, 0 )
			v1 = TriangleVertex( ns, t, 1 )
			v2 = TriangleVertex( ns, t, 2 )
			Nv0 = AddVertex( s , VertexX( ns , v0 ) , VertexY( ns, v0 ) , VertexZ( ns, v0 ) )
			Nv1 = AddVertex( s , VertexX( ns , v1 ) , VertexY( ns, v1 ) , VertexZ( ns, v1 ) )
			Nv2 = AddVertex( s , VertexX( ns , v2 ) , VertexY( ns, v2 ) , VertexZ( ns, v2 ) )
			VertexTexCoords s, nv0, VertexU(ns, v0), VertexV(ns, v0), VertexW(ns, v0)
			VertexTexCoords s, nv1, VertexU(ns, v1), VertexV(ns, v1), VertexW(ns, v1)
			VertexTexCoords s, nv2, VertexU(ns, v2), VertexV(ns, v2), VertexW(ns, v2)
			AddTriangle s , Nv0 , Nv1 , Nv2
		Next
		
	Next
	FreeEntity Copy
	Return Mesh

End Function
</textarea> <br><br></td></tr></table><br>
<a name="764405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> So what those functions are doing is taking the normals per face and fixing its alignment. ?<br><br>Seems to work, thanks m8. Anyone know how to set this manually in 3DSMax 6 ? cos I cant figure it out. I would rather have them set in the mesh than have to do it in code.<br><br>Also @ Steve, I noticed that black line in the distance, not sure what thats all about cos the UVmap is fine on the tiles close to the camera, Iv tried padding out the UV's a little giving the texture a little more space at the edge's but its still there.<br><br>Any ideaS? change to blending mode perhaps?<br><br>www.midnightdragons.org/Yavin/pyro.rar here is an updated source with the new tile I am working with, its a little larger than before.<br><br>What I noticed as well is that even if I overlap the joins between tiles a little you still see that black line ??<br><br>I recall being able to change the Z order of objects, but its been ages I will need to look the command up, I think it might just be an Ordering issue. <br><br></td></tr></table><br>
<a name="764409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those black lines are probably a z-buffer issue, most likely caused by the camera range you've set. The large camera range is probably diluting the z-buffer resolution too much - if you see what I mean. Just a guess.<br><br>If you're using such a large camera range because the meshes are so large, try scaling everything down and using the default camera range. <br><br></td></tr></table><br>
<a name="764416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've looked at this again and it seems to be a mipmapping issue.  <br><br>To confirm this .. try this code after the level is loaded ..<br><br><pre class=code>
Tex = LoadTexture( "test/SLAB001.png", 256 )
EntityTexture Levela, Tex
</pre><br><br>Note that flag 256, as well as loading into vram also disables mipmapping.<br><br>p.s. Your model has some dodgy white plane underneath it.  Is that meant to be there?<br><br>Stevie <br><br></td></tr></table><br>
<a name="764424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I stuck the white plane there to show up any gaps between the tiles.<br><br>I fixed the line, it seemed that even though I thought and it indeed looked like the tiles were flush with each other, turns out there was a very small gap and you could see it once the level started to scroll.<br><br>Its actually all look rather nice now. Will upload what I have a few minutes.<br><br>I have a question about your functions tho if thats ok.<br><br>I added a water plane to the river tile, set its name to water in Max, and then thought I could use findchild to get it and set its alpha but that didnt work. findchild didnt find anything in the mesh.<br><br>So I then expanded the array 20,2 and 1,1 being the riverbed, and 1,2 being the water plane. that let me set the alpha of the river plane so that its alphaed and looks nice.<br><br>lost track of what my question was lol.. be back in a bit when i remember what it was I wanted to ask you haha I hate it when that happens. <br><br></td></tr></table><br>
<a name="764464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I fixed the line, it seemed that even though I thought and it indeed looked like the tiles were flush with each other, turns out there was a very small gap and you could see it once the level started to scroll. <br></div>Ah. Also bear in mind that the positioning of objects gets less and less accurate, the further they're positioned away from 0,0,0. I trust you've got a fixed camera position and achieve scrolling by moving the tiles?<br><br><div class="quote"> I added a water plane to the river tile, set its name to water in Max, and then thought I could use findchild to get it and set its alpha but that didnt work. findchild didnt find anything in the mesh. <br></div>Did you use LoadAnimMesh, instead of plain LoadMesh? <br><br></td></tr></table><br>
<a name="764469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wasnt aware of the drop in accuracy and no, I am moving the comera and player.<br><br>you think it would be better to move the tiles instead?<br><br>and no I didnt use loadanimesh.. I forgot all about that. <br><br></td></tr></table><br>
<a name="764477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> How strange is that, if you just change that loadmesh to loadanimmesh then it stops drawing the extra tiles in the array. <br><br></td></tr></table><br>
<a name="764496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> you think it would be better to move the tiles instead? <br></div>Deffo. ;)<br><br><div class="quote"> How strange is that, if you just change that loadmesh to loadanimmesh then it stops drawing the extra tiles in the array. <br></div>Not sure why that would happen, TBH. You need LoadAnimMesh to access child objects, though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
