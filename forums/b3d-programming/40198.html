<!DOCTYPE html><html lang="en" ><head ><title >Val</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Val</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Val</a><br><br>
<a name="450412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> From the Blitz Command Reference:<br><div class="quote"> If you wish to convert from a string to a number, there is no equivalent Val command. Instead, simply assign the string variable into a numeric variable, and Blitz will implicitly convert it. <br></div><br><br>But this doesn't appear to be possible.<br><br>a$ = "5"<br>num = a$<br><br>Of course this code won't compile...  "<b>Error!  Variable type mismatch.</b>" ...of course!  So how does this work??? <br><br></td></tr></table><br>
<a name="450413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use Int() <br><br></td></tr></table><br>
<a name="450416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Genexi2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dont know why yer gettin the error as the code above works fine in Blitz, there shouldnt be a need to use Int() as Rottbott mentioned. <br><br></td></tr></table><br>
<a name="450417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried it.  Doesn't compile either. <br><br></td></tr></table><br>
<a name="450418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What version of Blitz3d are you using? I've tested with v1.88 and it's fine! <br><br></td></tr></table><br>
<a name="450419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm...  I've got the v1.88 compiler installed.  I'm using Protean IDE.  I wonder if Protean is doing some checking for a type mismatch error.  Anybody else using Protean? <br><br></td></tr></table><br>
<a name="450427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You get the variable type mismatch if you have used the "a" variable previously in your code, where it wasn't declared as a string. <br><br></td></tr></table><br>
<a name="450775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah ha.  Very interesting.  I've got it to work now.  Thanks for the tip.<br><br>Lately I've taken to declaring all my locals, like a good and proper programmer ought to.  I think I'll save confusion and just write a Val() function.  I wanted it to handle Hex values as well, anyway. <br><br></td></tr></table><br>
<a name="450812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so I've written a more comprehensive Val() function that converts integers and floats (using the built-in functionality described above) as well as hex and binary strings.  Hex values can begin with either "0x" or "#" ...I know there's a standard prefix for binary values, but I can't recall what it is--I've used "$"<br><br><pre class=code>
Local Value%

Print Val("37")
Print Val("3-7")
Print Val("50.1")
Print Int(Val("0xFFFF"))
Print Val("#FF")
Value = Val("$10010010")
Print Value

End


Function Val#(StringNumeric$)

   Local Num# = 0
   Local Hex1 = (Left$(StringNumeric$,1)="#")
   Local Hex2 = (Left$(StringNumeric$,2)="0x")
   Local Binary = (Left$(StringNumeric$,1)="$")
   Local c
   
   If Hex1 Or Hex2
      StringNumeric$ = Upper(StringNumeric$)
      For c=(Hex1 + (Hex2 * 2) + 1) To Len(StringNumeric$) 
         Select Mid$(StringNumeric$,c,1)
            Case "1","2","3","4","5","6","7","8","9","0"
               Num# = (Num# * 16) + Asc(Mid$(StringNumeric$,c,1))-48
            Case "A","B","C","D","E","F"
               Num# = (Num# * 16) + Asc(Mid$(StringNumeric$,c,1))-55
            Default
               Return Num#                        
         End Select
      Next
   Else
      If Binary
         For c=2 To Len(StringNumeric$) 
            Select Mid$(StringNumeric$,c,1)
               Case "1"
                  Num# = (Num# * 2) + 1
               Case "0"
                  Num# = (Num# * 2)
               Default
                  Return Num#                        
            End Select
         Next
      Else
         Num# = StringNumeric$
      EndIf
   EndIf
   Return Num#
   
End Function
</pre><br><br>Anybody have any suggestions?  Otherwise, I'll post it over in the code archives. <br><br></td></tr></table><br>
<a name="450820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> In most BASICs I have seen, $ is standard for HEX, % for binary, 0 for octal and # for explicit decimal (in case the number has a leading 0, it doesn't get confused with octal).<br><br>255 ;decimal<br>#255 ;decimal<br>%11111111 ;binary<br>0377 ;octal<br>$FF ;hex <br><br></td></tr></table><br>
<a name="450839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> 0xFF is used in C for Hex values<br>#FF  is used in HTML for Hex values<br><br>Okay, I'll add:<br><br>$FF    for Hex<br>%0011  for Binary<br><br>Decimal values shouldn't need any special characters.<br>A leading zero for octal values doesn't work comfortably to me:  0.35 is a floating value with a leading zero.  ...Would I offend anybody by leaving out Octal?  Does anybody really use it?? <br><br></td></tr></table><br>
<a name="450843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Octal? Isn't that the new Spiderman villian?<br><br>(ie. I don't know anyone who uses it, and besides, anyone who IS using it must already have their own OCT routines) <br><br></td></tr></table><br>
<a name="450852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> LOL!<br><br>My thoughts precisely.<br><br>The new version of Val() can be found here:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1189" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1189</a> <br><br></td></tr></table><br>
<a name="450855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> use 0x00377 for Octal, that would work <br><br></td></tr></table><br>
<a name="450856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would be interpreted as Hex, for a completely different result. <br><br></td></tr></table><br>
<a name="450857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @TomToad.... err, ive never come across those in BASIC, since the BBC. what versions have you used? <br><br></td></tr></table><br>
<a name="450914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have a friend who lives on BBC basic, you might as well forget the BBC basic stuff! todays basic is a bit different <br><br></td></tr></table><br>
<a name="450927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> '%' for binary? you learn something new every day... I accidently figured out '#' for Hex one day. Twas a long day.. <br><br></td></tr></table><br>
<a name="450933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> With the old sam coupe, I'm sure it used &amp; for Hexadecimal. I think. Long time. Loved the Sam coupe, could use all your speccy code, but had like 512k RAM (!) and you could use 16 (YEAH! 16!) colours on screen and they were individual pixel colours, none of those big, square, 8x8 Character Square things that made the speccy really -er- stand out!<br>*goes all dreamy* <br><br></td></tr></table><br>
<a name="450944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> im not gona be forgetting BBC Basic- i still have at least 3 beebs in the attic, and i just reinvented its sound system :P <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
