<!DOCTYPE html><html lang="en" ><head ><title >"Snapping" bones to meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >"Snapping" bones to meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >"Snapping" bones to meshes</a><br><br>
<a name="834148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xtremegamr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The topic says it all: Can I snap bones to meshes and animate them? <br><br></td></tr></table><br>
<a name="834164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No the topic doesn't say it all.  What the heck does "snapping" mean? <br><br></td></tr></table><br>
<a name="834166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xtremegamr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> By "snapping", I meant attaching. <br><br></td></tr></table><br>
<a name="834169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can attach blitz entities to bones by using the entityparent command. <br><br></td></tr></table><br>
<a name="834186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> *sigh* And what do you mean by "attaching"?  Do you want to rigidly have a bone moving along with a whole object?  Do you want to link vertices to bones as per soft-skin skeletal animation?<br><br>Also, what is the antecedent for "them" in your original question?  That is, are you wanting to animate the mesh and have the bone move with it, or the other way around?<br><br>Just generally, your question is vague and you need to be specific and fully explain the situation you are asking about. <br><br></td></tr></table><br>
<a name="834191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can not create bones in realtime and use them.<br>Especially you can not assign vertices to bones in realtime.<br><br>Those informations can only be loaded from a B3D<br><br>But you can indeed import a model that is rigged for a specific bone skeleton and import a bone skeleton with the same naming etc and then entity parent the model to that skeleton to use its animation.<br>You can as well manually rotate the bones on the model if you want to animate it <br><br></td></tr></table><br>
<a name="834295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xtremegamr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm making an FPS. I want to have rag doll physics for the enemies, so I want to know if I can make the animations (with bones only), then somehow attach the individual body parts to that bone-animation. <br><br></td></tr></table><br>
<a name="834298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> And Dreamora already answered that when he said<br><br><div class="quote"> Especially you can not assign vertices to bones in realtime. <br></div><br><br>What you suggest, however, makes no sense to me. You seem to be trying to do precisely the opposite of what I would be doing if I wanted rag doll physics. Perhaps it's just me, but I'd be wanting to attach my vertices to bones in the modeller and then control the bone positions in code. Which you can do. But for whatever reason, that doesn't seem to be your aim. <br><br></td></tr></table><br>
<a name="834339"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm making an FPS. I want to have rag doll physics for the enemies, so I want to know if I can make the animations (with bones only), then somehow attach the individual body parts to that bone-animation. <br></div><br>Ah okay, that clarification helps a lot.  As Gabriel says however you are thinking of it kind of backward.  Rather than attaching the body parts in code, everything should be setup in your animation tool for skeletal animation and then when you move bones in code the body parts will move with them.  Name the bones before export and use those names to FindChild (or is it GetChild? I get those commands mixed up) the bones in code.<br><br>It is important to remember though that any animation in the skeleton will override moving bones in code.  In general when moving bones in code, you want to make sure calls to PositionEntity or whatever are happening <i>after</i> UpdateWorld; for physics simulation specifically however you will want to turn off animations entirely using the Animate command with the off parameter. <br><br></td></tr></table><br>
<a name="834351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'd create the bones in the modeller. then assign several physic boxes to the bones (which are assigned to vertices) and let a physics engine do the rest. i am also currently developing ragdoll for my fps and i go this way. <br><br></td></tr></table><br>
<a name="834401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xtremegamr</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool...but how can I get my hands on a physics engine? <br><br></td></tr></table><br>
<a name="834403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait, you're asking about applying ragdoll physics to a skeletal animated character when you haven't even gotten a physics engine working?  Dude, walk before you can run. <br><br></td></tr></table><br>
<a name="834511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leon Drake</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> if its any help i wrote a snap to bone code in the code archives, but its mainlt for using seperate meshes as body parts<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1917" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1917</a> <br><br></td></tr></table><br>
<a name="834521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> one note: if you want to apply a physics based ragdoll effect on animated models, you have to animate the models "by hand" - using setanimtime. "animate model,1" is a no go, because you cannot stop an animation at a current frame. when you stop it, the model will be positioned back to the beginning animation frame. using setanimtime, you can always stop the animation where you want to and then apply ragdoll. looks better. feels better ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
