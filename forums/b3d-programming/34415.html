<!DOCTYPE html><html lang="en" ><head ><title >Speed problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Speed problems</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Speed problems</a><br><br>
<a name="371806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Read then Code below:<br><br>; Sub - NewGame<br>; This sub is called when a new game needs processing and rendering<br>.Do_NewGame<br><br>	; RENDER<br>	If d2 = True Then<br>		For players.playertype = Each playertype<br>			SetBuffer ImageBuffer(TempNameImage)<br>				DrawImage box001, 0, 0<br>				If players\index = playercreating Then <br>					If nameing = True Then colText 17, 10, "Name:  " + players\name + "_", False, False, 255, 0, 0<br>					If nameing = False Then colText 17, 10, "Name:  " + players\name, False, False, 255, 0, 0<br>				EndIf<br>			SetBuffer BackBuffer()<br>			DrawImage TempNameImage, 300, 230<br>			<br>			SetBuffer ImageBuffer(TempNameImage2)<br>				DrawImage box001, 0, 0<br>				If players\index = playercreating Then colText 17, 10, "Skin:  " + skinname, False, False, 255, 0, 0<br>			SetBuffer BackBuffer()<br>			DrawImage TempNameImage2, 300, (230+(45*1))<br>				<br>			SetBuffer ImageBuffer(TempNameImage3)<br>				DrawImage box001, 0, 0<br>				If players\index = playercreating Then colText 17, 10, "Body:  " + body, False, False, 255, 0, 0<br>			SetBuffer BackBuffer()<br>			DrawImage TempNameImage3, 300, (230+(45*2))<br>				<br>			SetBuffer ImageBuffer(TempNameImage4)<br>				DrawImage box001, 0, 0<br>				If players\index = playercreating Then colText 17, 10, "Gender:  " + gender, False, False, 255, 0, 0<br>			SetBuffer BackBuffer()<br>			DrawImage TempNameImage4, 300, (230+(45*3))<br>				<br>			SetBuffer ImageBuffer(TempNameImage5)<br>				DrawImage box001, 0, 0<br>				If players\index = playercreating Then colText 17, 10, "Color:  " + bcolor, False, False, 255, 0, 0<br>			SetBuffer BackBuffer()<br>			DrawImage TempNameImage5, 300, (230+(45*4))<br>		Next<br>		<br>		DrawImage mousepic, MouseX(), MouseY(); Draw the mouse image last (over everything)<br>	EndIf<br>	<br>	; PROCESS<br>	If d2 = False Then<br>		If KeyHit(1) Then <br>			For players.playertype = Each playertype<br>				deleteplayer(players.playertype)<br>			Next<br>			game_status = 1 ; Go back ,if the user presses ESC, to the main menu<br>		End If<br>		<br>		curkey = GetKey()<br>		If nameing = True Then<br>			FlushKeys()<br>	<br>			lastletter = letter<br>			If curkey = 13 Then <br>				nameing = False<br>				lastletter = ""<br>				letter = ""<br>				curkey = 0<br>				bob = 0<br>				name = ""<br>				tname = ""<br>				templetter = ""<br>				Goto endnaming<br>			End If<br>			If curkey &gt; 0 Then<br>				letter = Chr(curkey)<br>				If curkey = 8 Then <br>					If name &gt; "" Then<br>						For bob = 1 To Len(name) - 1<br>							templetter = Mid(name, bob, 1)<br>							tname = tname + templetter<br>						Next<br>						.Stop2<br>						name = tname<br>						tname = ""<br>					EndIf<br>					Else<br>						name = name + letter<br>				EndIf<br>			EndIf<br>			<br>			For players.playertype = Each playertype<br>				If players\index = 1 Then players\name = name<br>			Next<br>		EndIf<br>		.endnaming<br>		<br>		god001 = ImagesCollide(mousepic, MouseX(), MouseY(), 0, TempNameImage, 300, 230, 0)<br>		If god001 = True Then<br>			If MouseHit(1) Then<br>				nameing = True<br>			EndIf<br>			god001 = False<br>		EndIf<br>		If ImagesCollide(mousepic, MouseX(), MouseY(), 0, TempNameImage2, 300, (230+(45*1)), 0) Then<br>			If MouseHit(1) Then<br>				skin = skin + 1<br>				If skin =&gt; noofskins Then skin = 1<br>			EndIf<br>		EndIf<br>		If ImagesCollide(mousepic, MouseX(), MouseY(), 0, TempNameImage3, 300, (230+(45*2)), 0) Then<br>			If MouseHit(1) Then<br>				nameing = True<br>			EndIf<br>		EndIf<br>		If ImagesCollide(mousepic, MouseX(), MouseY(), 0, TempNameImage4, 300, (230+(45*3)), 0) Then<br>			If MouseHit(1) Then<br>				nameing = True<br>			EndIf<br>		EndIf<br>		If ImagesCollide(mousepic, MouseX(), MouseY(), 0, TempNameImage5, 300, (230+(45*4)), 0) Then<br>			If MouseHit(1) Then<br>				nameing = True<br>			EndIf<br>		EndIf<br>		<br>		playercreating = 1<br>		statge =1 <br>		Select playercreating<br>		<br>			Case 1:<br>				Select statge<br>					<br>					Case 1:<br>						coltext(10, 10, "PLAYER 1: CrEaTe YoUr ChArAcTeR YoU SwInE", False, False, 155, 0, 0)<br>						<br>						For players.playertype = Each playertype<br>							If players\index = 1 Then TurnEntity players\modle, 0, 2, 0<br>						Next<br>					<br>				End Select<br>				<br>		End Select<br>		For bbeams.bbeamtype = Each bbeamtype<br>			updatebbeam(bbeams.bbeamtype)<br>		Next<br>	EndIf<br><br>Return<br><br>i'm having problems with the speed of the above code. for some reson it works fine speed wise until the user moves the mouse over one of the 'TempNameImages' thats when the speed problems happeren.<br><br>I thought it might be todo with the buffer swapping so i took it out but still the problem happerend. i eventally found out that it had somthing todo with when the user mouse pic collides with the 'TempNameImages' but i don't know what????<br><br>plz help!!! <br><br></td></tr></table><br>
<a name="371921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dude,<br>if the above code works, it would be a miracle !!!<br><br>(with no offense at all !) ;-)<br><br>A game program is (usually) made of these sections:<br><br>Initialisation<br>Intro<br>Menu<br>Main game loop<br>Score<br>End<br><br>The Initialisation section takes care of loading the media, such sounds, images, models, maps, and so on. It set also  the graphics up.<br><br>The intro would display some cute scene and gfx to introduce the player to the game<br><br>Menu: here is where the player can choose some options, like difficulty levels, maps, characters, missions, sound on/off, and the like<br><br>The main loop is the game itself, is where the player interacts with the game - ex. guides an astroship through a tunnel, and shoots to asteroids.<br><br>Score: here the game has ended, and the player is prompted to enter his score in the hall of fame<br><br>End: the player has quit the game; so all the resources - sounds, gfx, models - should be freed.<br><br>Some suggestion for you:<br><br>1) try to mantain a modular aspect of your code. I still can't understand where it starts and where it ends !!!<br>2) Avoid 'GoTo' commands<br>3) You don't have any Flip command in your code; so I guess your proggy works only with front buffer, hence it could be slow<br>4) try to follow a structure like this:<br><pre class=code>
;initialization: include files, graphics mode setting, variable settings

;timer - this will mantain the render speed running at a costant rate
global mytimer = createtimer(60)

;main loop:
while not keydown(1) ;do this until esc is pressed

k = waittimer(mytimer)
for n = 0 to k
updategame()
next

rendergame()
flip

wend
end

;==========================
function updategame()
;==========================

;put here all the stuff related to movement, update frames, game controls, sound control, ecc.

end function

;==========================
function rendergame()
;==========================

;here put everything that should be displayed; should only contain all the DrawImage commands, if you get my drift.

end function
</pre><br><br>I suggest you to read some tutorial; have a look at www.blitzcoder.com for example.<br><br>Some further note to the code you've posted:<br>1) you don't need to set the buffer to the imagebuffer each time you want to display some text on it. This could really slow down your application.<br>Instead, just do this:<br>--- display the image at x,y: drawimage image,x,y<br>--- display a filled rectangle on it: rect x+50,y+50,150,100,true<br>--- display some text on the rectangle: text x+100,y+100,"Dude !"<br>--- DONE<br><br>2) If you need to display 50 images, would you do something like in your code:<br>drawimage image1,x,y<br>drawimage image2,x,y<br>.<br>.<br>drawimage image50,x,y<br><br>? This is simply crazy, dude ! Just make an array of images, and :<br>for n = 1 to 50<br>drawimage my_array(n),x,y<br>next<br><br>See ? You save space and time !!!<br><br>3) Say you want to delete all your types; you wrote:<br>For players.playertype = Each playertype <br>deleteplayer(players.playertype) <br>Next <br><br>This is (quite) correct; shouldn't be deleteplayer(players) ?<br>Anyway, for your info, there's a simple command that will wype out all the type element in a simple statement:<br><pre class=code>
Delete Each players.playertype
</pre>:-)<br><br>Have fun,<br>Sergio. <br><br></td></tr></table><br>
<a name="372292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> k I tried what you said and it kinda works but its still a little slow - It doesn't bother me to muchnow though as i can just take away some of the special effects.<br><br>P.S. I know about the program flow and just incase u thought that was all of it, it isn't :) :).<br><br>P.S. I always thought that a sub would be faster than a function.<br><br>:) :) :) :) :) :) :) :) :) :) :) :)<br>thx Sergio <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
