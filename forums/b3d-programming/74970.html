<!DOCTYPE html><html lang="en" ><head ><title >Network Code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Network Code</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Network Code</a><br><br>
<a name="837746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a few questions about network coding:<br><br>First, how is it possible to test server-client network code if you don't have access to more than one computer? Can you just run the server and client on the same machine, or will this not accurately reflect how the code would work when it's actually going over the internet.<br><br>Second, I know everyone recommends UDP when large numbers of players are going to be playing at once, but then how is World of Warcraft able to run almost lag-free? <br><br></td></tr></table><br>
<a name="837749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Can you just run the server and client on the same machine, or will this not accurately reflect how the code would work when it's actually going over the internet. <br></div><br>I did a test a while back about this and you will be able to connect to the server if the server is on the same machine the client is, but other computers might not. Well that's what it was like with me until I figured out that I had an error in my code.<br><br><div class="quote"> Second, I know everyone recommends UDP when large numbers of players are going to be playing at once, but then how is World of Warcraft able to run almost lag-free? <br></div><br>You mean all movement of characters in World of Warcraft is being sent using TCP? <br><br></td></tr></table><br>
<a name="837753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, as far as I know, everything in World of Warcraft is sent using TCP.<br><br>I'm not sure I understand you're reply to my first question. Are you saying that the code worked until you tested it out on separate computers?<br><br>Thanks <br><br></td></tr></table><br>
<a name="837758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> TCP in Blitz is no option because the call is blocking. This means until the data is really sent and received on the other side you app waits. WoW does not do that, it handles the networking in an own thread.<br><br>And fully testing it on one machine is not possible. There are a few things that don't exist in that environment:<br>1. Packet Drop -&gt; UDP are not always received so you must have some kind of mechanism to make sure that important ones are always received (Ack - Nack)<br><br>2. Latency does not exist. So you normally don't suffer the problems you do over net when it comes to interpolation and intrapolation of data (positions of players mainly, everything else is server emulated and does not need to be intrapolated but interpolated by the client) <br><br></td></tr></table><br>
<a name="837778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> even packet drop and latency can be simulated though.  The trick is to create a seperate program that simulates the packet drop and latency.  Packet drop is easy, have the middle program just drop a % of the items that are sent.  Latency is a little harder, but for each message give it a time range that could be applied before it is delivered. <br><br></td></tr></table><br>
<a name="837781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ked</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not sure I understand you're reply to my first question. Are you saying that the code worked until you tested it out on separate computers? <br></div><br>With TCP, yes. <br><br></td></tr></table><br>
<a name="837861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies everyone, and thanks for clarifying the WoW thing.<br><br>One more thing, will testing the server-client code on two computers that are connected to the same network through the same router accurately simulate latency and packet drop or will I still have to design a middleman program as dynaman suggested? <br><br></td></tr></table><br>
<a name="837862"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> you will need to have middleman program. The internet is worse than a single router in your local lan will be. But a good designed network layer actually would remove that tests as well.<br><br>You just need to have 2 (1) feature:<br>1. Reliable UDP messages. Not that hard.<br>2. If you want to have them in the correct order, you would need to implement ordering on the receiver end.<br><br>And if you are interested in an optimized solution you start looking for a solution that is simple and that offers that ... and over short or long you will struggle over the Blitz ENET userlib ;-)<br>Then the only thing you have to do is think about Intrapolition and Interpolition where needed <br><br></td></tr></table><br>
<a name="838085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> TCP can indeed be used for a MMRPG.<br><br>One rule<br><br>1 packet size.. alway 1 PACKET size.<br>like packet size of 512 or 1024.<br><br>Use readavail<br><br>;The command to use<br>readbyte"S"<br><br>Forbidden commands.<br>readbyte<br>readline<br>readint<br>readlong<br>readshort<br><br>i have ben coding MMRPG using blitz basic sens 2003 and it can handle over 150 users at once.<br><br><br><br>Lag free ?<br><br>Wow lags a lott<br>internet delay of 2000 ms and it still works.<br><br>In a counter strike game data is sent more frequent.<br><br>In wow data is only sending the users destination.<br><br>Look for "mangos project" it show you source code in C++  :D <br><br></td></tr></table><br>
<a name="838114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> [quote] Look for "mangos project" it show you source code in C++ :D   [\quote]<br><br>and<br><br><br>[quote] i have ben coding MMRPG using blitz basic sens 2003 and it can handle over 150 users at once.<br>  [\quote]<br><br>both very intersting points Wings, cheers, BP. <br><br></td></tr></table><br>
<a name="838125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Wow lags a lott<br>internet delay of 2000 ms and it still works."<br><br>2000 ms? Did you mean 200 ms? That's what it was when I played. At worst it got up to 1500 ms on very rare occasions, but when it was that slow it was barely playable.<br><br>Oh, also could you clarify which commands I should use if I use TCP? You're list is a little confusing. (Should I use readavail or readbyte or both?)<br><br>I checked out your website Wings, it looks like a cool game so far. Just wondering though, how were you able to test if it would work with 150 players? <br><br></td></tr></table><br>
<a name="838422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> no<br><br>i can play wow in 2000 ms<br><br><br>so UDP or TCP dosent matter.<br><br>I have 2000 ms then there is error in my isp network. <br>(2 second lag :D)<br><br>ordinary u have 40-240 ms to the wow server.<br><br>the point is TCP is engought :D <br><br></td></tr></table><br>
<a name="838480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the help.<br><br>Oh, by the way Wings I think there's something wrong with your website. Whenever I click on a different page it just reloads the home page.<br><br>Just to let you know. <br><br></td></tr></table><br>
<a name="838537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> TCP is not fast enough for realtime in Blitz. Not because it is slow but because the whole game will stop while the transfer is ongoing.<br><br>for a roundbased game thought its great :) <br><br></td></tr></table><br>
<a name="838579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> TCP is not fast enough for realtime in Blitz. Not because it is slow but because the whole game will stop while the transfer is ongoing.<br><br><br>False:<br><br>Sooooo many uses TCP and it works good :D<br><br>But you have to think over the code before writing it.<br><br>Like dont send a packet untill its ben recived :) )<br><br><br>To all who give tcp a shoot.  use STATIC size of packets.<br>try to think out how packet shold look like.<br><br>Never use sigle write int  commands.. write the whole data in one chunk. <br><br></td></tr></table><br>
<a name="838609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry but blitz does not offer that.<br>A TCP message is sent until it is received. There is no possibility for you to control that.<br>That is how blitz handles TCP!<br><br>It makes no difference how genius your code is, blitz does not mind. TCP message not received -&gt; halt until its done, point.<br><br>If you don't want that:<br><br>1. Use UDP<br>2. Use an external library that offers TCP in a nonblocking way. <br><br></td></tr></table><br>
<a name="838610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll probably just use UDP anyway but are there any external TCP libraries like what you mentioned that you can suggest? <br><br></td></tr></table><br>
<a name="838904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz TCP works fine. iam building eninge for over 1000 users online same time with it.  I dont see any delays att all in my code. cause i handle it propper.<br><br>But you must be able to controll it propper.<br><br>1) use readavail()<br>2) always use static size.. <br>3) whatever you planing to use.. Think ahead. draw everything down. Make a spread sheat how packet shall look like.<br><br>Many fails with TCP cause its some kind of hard to understand. but in the long run those who use it wins time at the end. <br><br>I whold never use UDP for a RPG. sens its so unsecure. <br><br></td></tr></table><br>
<a name="839086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure it will work for that many players though? How did you test your code to make sure it could handle that amount of people? <br><br></td></tr></table><br>
<a name="839100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wings: How about testing it at least ONCE before claiming it works? I mean under real circumstances with 200ms lag from player to you back to player.<br>The problem is and never was the reading. Nobody would be that stupid to read all the time if nothing is available (you would instant crash your app by the way, reading 0 stream)<br>The problem is that Blitz will try to send a message until it either is received by the target system or the connection times out. <br>At latest at that point, you will see how greatly useless your theory on blitz internal TCP support is.<br><br>There are solutions to that thought by using an external library that does nothing else than "queues" up your messages and that gives your app the incomming messages on a query but otherwise works within its own process.<br>That way you will have the superb features of TCP and have it realtime.<br><br>But pure Blitz: No chance.<br>Even with UDP, it wouldn't be powerfull enough for a 1000 player networking, just to mention that.<br>Blitzs loop time is too high to handle several tousand messages per ms if you intend to react to them and generate new packages to be sent out.<br>I would highly suggest thinking ahead as you claim you do, and use at least BlitzEnet if you are not willing to use one of the larger scale powerfull but complex library. <br><br></td></tr></table><br>
<a name="839145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have test TCP in blitz3d and it works with no problem. even from slow networks. thoe i only send 1 packet at a time.<br><br>I dont se why any one whold want to send a bunch of packet at once yet :D  vause if you dare to send every 10 ms the internet connection die soon in a RPG game. <br><br></td></tr></table><br>
<a name="839275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about if the server was in some other language, C++ or Python for example, would I be able to use TCP then if only the client was coded in Blitz? <br><br></td></tr></table><br>
<a name="839302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I could be wrong, but I think Blitz only hogs the program with TCP if you set the message to "reliable"; otherwise it shouldnt "freeze" the program at all.<br><br>BTW:I would love to see some MMO code for B3D... <br><br></td></tr></table><br>
<a name="839474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not quite sure who to believe here. I'm getting conflicting reports from everyone...<br><br>Slotman, I can't figure out any way to set a message to "reliable". Is there a specific command for this? <br><br></td></tr></table><br>
<a name="839568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can only tell from my experience.<br><br>2003 i had just learned about blitz3d<br><br>2004 messing with TCPIp  whooo why to it lagg..  fault trace and so on...<br><br>2004 Found the bugg.<br> My server Halts cause the TCPIP buffer Lying in tcpip.<br> Packets seam to arrive difirent times. and this cause TCPIP readavail lying about size of buffer.<br><br>2005 Found the workarond for that Nasty tpcip lag. Its simple medecine is to have Static size of packet, and have a sneaky sending.. i<br><br><br>So in order to create a good running engine in blitz3d tcp. there is soem basic rulze.<br><br>1) Always have static size of tcp packet size.<br>2) Always user readavail() before readbytes()<br>3) Always user readbytes(),Sendbytes()<br><br>Never ever putt more than 8k into the stream :D<br><br>I dont say its easy to understand. I just says it works good if propper used. <br><br>Also there is no GOOD tcpip engine at CodeAcrive.. thats saad :( <br><br></td></tr></table><br>
<a name="839569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found some horror code for a blitz3d Server,<br><br>---------------------------------<br>Data1=ReadByte(file1)<br>WriteLine(stream, Data1)<br>------------------------------------<br><br>the above lines is a good example how to make a server HALT :D<br><br>First it reads from stream 1 byte   (its ok if ther is a byte there)<br>Second it dosent check if there are any bytes in that stream. if it is not it will halt execution untill there is data.<br><br>but in worst case there is other data arives before tha first data and this makes server HALT at first step.<br><br>So if you gona write a good tcpip engine folow my rulse :D <br><br></td></tr></table><br>
<a name="839571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> ---------------------------- Horror code ----------------<br>WriteLine(stream,"Player Cords")<br>		<br>WriteLine(stream,xpos)<br>WriteLine(stream,ypos)<br>WriteLine(stream,MouseX())<br>WriteLine(stream,MouseY())<br>-------------------------------------------- <br><br></td></tr></table><br>
<a name="839836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here it a brief description how i use TCP.<br><br>1) Create a memmory bank on server. lile 512 bytes<br>2) Poke values into that memmory bank.<br>3) Send this memmory bank to clients. in one big packet.  <br><br>4) wait for client to respond before sending next packet.<br><br>that way server never lags. <br><br></td></tr></table><br>
<a name="839885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wings, youre missing the point... no matter how to design it, the problem is internally with the way blitz handles that sort of thing... TCP messages that dont arrive will be sent until either they receive a receipt or the send times out.  This wait time will hang your application no matter what you do.  Blitz does not have the ability to multi-thread.  Having anymore than 8 or so people on a TCP only network game that is action based is going to push the limits in blitz.  Thats just the way it is.  If you are using an outside library or application that operates in its own thread then yes you can use tcp in a sly fashion and get it to work right.  But they way you are doing it simply will not work.  It may work on a gigabit lan sending small-medium sized packets but it will certainly fail with 10 dsl users spread out across a country.  Trust us.<br><br>Noting that even UDP is flawed in the fact that, A. Yes its fast, but you have no idea what packet is arriving in what order and if the entire packet was completed.  You could send a few integers and not even receive the same number on the other end if the network hiccups.  So in order to do packet checking and receipts/crc handling (in blitz anyways) its going to bog down almost as much at tcp.<br><br>In the end, TCP is bad for a lot of real time stuff because each connection has a thread... its great for security and reliability, but lacks the speed that UDP gives you... UDP lacks the security and packet checking/verification that TCP has.  Each has pros and a cons, and regardless if you are making any sort of non-turnbased game in blitz that will require more than 5-8 players, I would *highly* suggest using an external library to handle your network stuff.<br><br>-Scott <br><br></td></tr></table><br>
<a name="840047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure if this is a stupid question, but is it possible to use winsock.dll in blitz if I could find or write a .decl file?  And if so, would using winsock solve the blocking problem of using TCP in Blitz? <br><br></td></tr></table><br>
<a name="840193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forget what I just said. After your suggestions to use a network library I downloaded RottNet and have been attempting, unsuccessfully, to figure it out.  Does anyone have any examples of a simple client-server program using Rottnet? Right now I am simply trying to send a players position between the server and all the clients but I don't even know where to start. <br><br></td></tr></table><br>
<a name="840410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ringwraith,<br><br>Might I suggest learning how the process works first?  If you are having problems with this, then there will be a boat load of problems to come.  I know it sounds stupid, but trust me on this.  Simply plot and draw out what to send to the server, and how the server will take it apart.  A client/server chat room is a great place to start.  No graphics or anything just a text prompt(not input as it hangs the app) for sending and receiving of messages.  This is the whole basic principle behind it all.  Then work on sending the chat messages more efficiently.  Once you have a good messaging system, its easy to do it on a byte level and using UDP with some degree of error checking for "the important parts" you shouldnt have any trouble developing from there.  There are many libraries out there.  K-Net is a good one I think, however; lately I have been having some problems with it on a real server type environment.  And honestly I must say, Blitz isnt bad for a client, but for a server its starting to become a pain for me haha.  Best of luck! <br><br></td></tr></table><br>
<a name="840416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, that's sort of what I'm trying to do here, just sort of mess around with the code and try to figure out what's really going on. Do you know of any good tutorials for networking in Blitz? That would be a real help, although given past experience it's far easier to find tutorials for languages like C++.<br><br>P.S. Isn't K-net lib only for b-max? <br><br></td></tr></table><br>
<a name="840431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Iam not missing any points ?<br><br>tell me exactly how slow the send command is ?<br><br>where is the slownews ?   i am qureus. cause i fail to se any att all.  even at 250 ms delays. ? <br><br></td></tr></table><br>
<a name="840432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> At a latency of 100ms it will take at least 200ms until your program will continue after sending the TCP data.<br><br>And by "until continue" we really mean: Your app will be frozen, no further processing of anything. As mentioned, TCP operations (like file operations as well) in Blitz are  blocking commands, which means that whenever they perform anything the whole remaining app must wait until they finished their work.<br><br>Thats the main difference to Blitzs UDP implementation: You can send and receive and it will not wait until something has happened. It will just let the hardware handle it and read out the data / write the data to those ends. So you can even implement Blitz side security checks (for sending etc).<br>RottNet is a simple, yet effective implementation example on that.<br><br>I personally would use BlitzEnet, as it is the best "simple" network wrapper onto UDP with reliable and ordered packet send. You can use RakNet as well, there is a wrapper, but it is several times harder to understand it.<br>If you want a little of both those worlds, the K-Netlib might be right thing for you. <br><br></td></tr></table><br>
<a name="840445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> At a latency of 100ms it will take at least 200ms until <br><br>thanks<br><br>testing your theory now. :D <br><br></td></tr></table><br>
<a name="840453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> test complete..<br>here is proff of that delay 200 ms cause 0 ms delay on server.. So no delays what so ever ?<br><br>Where is the delays every one screams about ?<br>and after they cream about it they try to sell a crappy UDP engine ?<br><br>This test is based on 40 clients connects via 3g modem to server. Ie the modem broadband was driving full. still no sign of the lag you talk about.<br><br><img src="http://www.tiberion.com/images/test4ever.jpg"><br><br><br>Here is source code to test for you self.<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2182" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2182</a> <br><br></td></tr></table><br>
<a name="840454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> ringwraith <br> <br>Question 1) Yes<br><br>Question 2) yes, <br><br>WOW is in fact only sending then needed. If you Go UDP or TCP or Whatever engine. same rule applyes.<br><br>Wow dont send every hitt.. in fact some dimes then i have 5000 ms in lagg. my charter continues to strike and hitt oposite force.. and some time i win some time i lost.  often a 5sek lag in wow = disconnected from server :D <br><br></td></tr></table><br>
<a name="840461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> by the way my network ISP now work OK again :D no more lagging. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
