<!DOCTYPE html><html lang="en" ><head ><title >Terrain Editor Mouse Position Problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Terrain Editor Mouse Position Problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Terrain Editor Mouse Position Problem</a><br><br>
<a name="326024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Im trying to get my mouse to position on the terrain right..<br><br>Im making a map editor for a MMORPG a freind and I are working on and I need help getting the mouse(cursor) to move along the terrain including height...<br><br>&lt;quote&gt;<br><br>mx = MouseX()<br>my = MouseY()<br>mz = MouseZ()<br>	<br>mouse_y = TerrainY(terrain,mx,my,mz)+2<br>	<br>PositionEntity cursor,mx*x_scale,mouse_y*y_scale,mz*z_scale<br><br>&lt;/quote&gt;<br><br>this is all I have so far, but still no mouse following the terrain...<br><br>If you could help, thank you.. <br><br></td></tr></table><br>
<a name="326044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> MouseZ() is not a 3d location.. its the position the mouse scroll wheel is turned to. Also mx and my in your equation is 2d screen coordinates, not 3d world space so the call to the terrainY is completely wrong.<br><br>You'll need to check into CameraProject and CameraPick's to accomplish this task. <br><br></td></tr></table><br>
<a name="326076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> To get a simple mouse cursor to be able to click on the terrain I would suggest<br>the following method:<br><br><br>Load your object you wish to use as the mouse cursor.  Make it the child of the<br>camera.  Position it at the camera's position then move it in the Z direction a distance<br>equal to the Screen Width divided by 2.  Like this:<br><br>ie <br>Camera=createcamera()<br>Mouse3d=loadmesh("MouseMesh.b3d",Camera)<br>moveentity Mouse3d,0,0,Screen Width / 2<br>entityorder Mouse3d,-1<br><br>then in your main loop<br><br>Moveentity Mouse3d,MouseXSpeed(),-MouseYSpeed(),0<br><br>(I cannot remember if the function's name is MouseSpeedX() or MouseXSpeed() but whichever one it is use that)<br><br>You will need to use the pick commands to cause the mouse to interact with the <br>terrain. <br><br></td></tr></table><br>
<a name="326139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Coolness thanks<br><br>Im almost done with the terrain part of my editor now.. <br><br></td></tr></table><br>
<a name="326141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm that code didn't work :( <br><br></td></tr></table><br>
<a name="326142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, That would only work if you don't move the camera. try this:<br><br>(assuming terrain is the handle of your terrain)<br><pre class=code>
;In the start of the program ,after creating the terrain:
EntityPickMode terrain,2

;In your editer's loop, do this to find the coordinates on the terrain the mouse is at:
CameraPick camera,MouseX(),MouseY()	;Assuming camera is your camera's handle
If PickedEntity()=terrain Then  
 x#=PickedX#()
 y#=PickedY#()
 z#=PickedZ#()
EndIf
</pre> <br><br></td></tr></table><br>
<a name="326200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> well neither of these two codes worked :(<br><br>Im lost now... <br><br></td></tr></table><br>
<a name="326213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this as a basic program.  You will need to supply<br>your own terrain height map (32x32) and your own grass<br>texture.<br><br>&lt;code&gt;<br>Graphics3D 800,600<br><br><br>camera=CreateCamera()<br>terrain=LoadTerrain("map.bmp")<br>grasstex=LoadTexture("grass.bmp")<br>EntityTexture terrain,grasstex<br>ScaleTexture grasstex,6,6<br>ScaleEntity terrain,8,10,6<br>mouse3d=CreateSphere(8,camera)<br>ScaleEntity mouse3d,10,10,10<br>PositionEntity mouse3d,EntityX(camera,True),EntityY(camera,True),EntityZ(camera,True)<br>EntityOrder mouse3d,-1<br>MoveEntity mouse3d,0,0,400<br>MoveMouse 400,300<br>MX=MouseX()<br>MY=MouseY()<br>TotalMX=0<br>TotalMY=0<br>PositionEntity camera,120,60,80<br><br>Repeat<br><br>simplecameramovement(camera)<br>MX=MouseXSpeed()<br>MY=MouseYSpeed()<br>MoveEntity mouse3d,MX,-MY,0<br>UpdateWorld<br>RenderWorld<br>Flip<br><br>Until KeyDown(1)<br>End<br>Function simpleCameraMovement(camera)<br>If KeyDown(203) Then TurnEntity camera,0,1,0<br>If KeyDown(205) Then TurnEntity camera,0,-1,0<br>If KeyDown(200) Then MoveEntity camera,0,0,1<br>If KeyDown(208) Then MoveEntity camera,0,0,-1<br>If KeyDown(30) Then MoveEntity camera,0,1,0<br>If KeyDown(44) Then MoveEntity camera,0,-1,0<br>End Function<br>&lt;/code&gt;<br><br>It works well on my PC and the mouse can be moved around<br>the screen regardless of the camera's motion. <br><br></td></tr></table><br>
<a name="326454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool it worked, but its not excately what I was looking for.. I want it to follow the terrain... <br><br></td></tr></table><br>
<a name="326674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you wish the mouse to be able to select points on the terrain or do you wish the mouse cursor to kind of act like a ball which rolls over the terrain in the direction the mouse moves.. <br><br></td></tr></table><br>
<a name="327168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FBEpyon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> want it to select<br><br>sorry it took so long to reply, bad week :(<br><br>okay little more detail about the editor.. its for a MMORPG, but I want to create the full world off of one program loading like 9 terrain areas at once this way I can edit them and align them correctly, then I want to save all the information into a world file like (*.rwf) then load it into the game but having the game do the samething by loadin about 9 sections at a time this way Im not using up as much memory, but the game looks fluid..  so right now Im starting with the Terrain part and once thats done I will make it where I can add entities and other information to the map..<br><br>if you may have anyother information you can provide for please drop me a  email fbepyon@... or the same at MSN IM using the same email :P  thanks <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
