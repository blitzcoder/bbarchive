<!DOCTYPE html><html lang="en" ><head ><title >How to obtain the color of a triangle in a .b3d?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to obtain the color of a triangle in a .b3d?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >How to obtain the color of a triangle in a .b3d?</a><br><br>
<a name="596494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I have a b3d model of a terrain.<br>I would like to put grass on to it, but my problem<br>comes at the moment I'm going to read the triangle<br>in wich I'm going to place the grass with a linepick..<br>the piece of code is the next:<br><br><br>[...more code before...]<br>yt# = LinePick(x#,10,z#,0,-30,0)<br>yy# = PickedY#()<br>surf= PickedSurface()<br>tri = PickedTriangle()<br>v0  = TriangleVertex(surf,tri,0)<br>v1  = TriangleVertex(surf,tri,1)<br>v2  = TriangleVertex(surf,tri,2)<br>red#= VertexRed#(surf,v0)<br>green# 	= VertexGreen#(surf,v0)<br>blue# 	= VertexBlue#(surf,v0)<br>entitycolor grass_entity,red#,green#,blue#<br><br>The read values are always 255.0 in all the color components, and If I change the last line by<br>entitycolor grass_entity,0,0,0<br>it works!<br><br><br>I cannot understand what's I'm doing wrong or why<br>it doesn't return the good values..<br>Please HELP!!!!!<br><br>Thanks in advance!! <br><br></td></tr></table><br>
<a name="596502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suspect your .b3d model isn't vertex coloured so all verts will have a colour of 255,255,255. <br><br></td></tr></table><br>
<a name="596506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks big10p,<br>but just in this case, how I could to obtain the texture<br>color? that's really my objetive.. <br><br></td></tr></table><br>
<a name="596510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> TBH Pinete, I'm not sure what you are trying to do. If your terrain is textured then each triangle is unlikely to be a single colour. If you want to find the texel colour at the point of your LinePick, then that's pretty difficult - I think there may be some code in the achives to do this, though. <br><br></td></tr></table><br>
<a name="596547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming you have only one texture, know what it is, and aren't concerned about lighting or vertex colours:<br><pre class=code>ReadPixel(VertexU(surf, v0), VertexV(surf, v0), TextureBuffer(tex))</pre> <br><br></td></tr></table><br>
<a name="596684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks to all,<br><br>I will try to explain what I would loke to achieve.<br>I am placing grass on the terrain. The terrain is a .B3D model (not a blitz terrain), and i need that each entity of grass placed on to the terrain gets the colour of the ground underneath.<br>The terrain is composed by various textures. The first one for the basic colour and shape (roads, etc), the second one is noise and the last texture is a detail texture.<br>I will try during the day the method of octothorpe but I am not sure it works, because the first problem is how to access to the texture buffer of one of the textures used in a b3d model.. :_(<br>but I'll try!<br>However, is someone has another solution I will be very pleased to listen it!!!!<br><br>Thanks in advance <br><br></td></tr></table><br>
<a name="596896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeppe Nielsen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about placing a camera above the picked coordinates and looking straight down. Render this camera, and readpixel all the pixels, and calculate an average color based on all the pixels read?, then use this color to color your grass. <br><br></td></tr></table><br>
<a name="596942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Jeppe!<br>Really curious that I just finish to have a visit to your website before enter to the forum finding help!<br>wow, really could be a great solution!<br>It's a very good idea, absolutely. I will try it.<br>Thanks a lot. <br><br></td></tr></table><br>
<a name="597087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you take that approach, you'll need to disable any lighting, shadowing, and set your ambient light to full-bright.<br><br>Imagine a green texel rendered as dark green because it's in shadow.  Reading dark green, you create a dark green grass entity.  Your dark green grass entity will also be in shadow, and therefore will be <i>dark</i> dark green! <br><br></td></tr></table><br>
<a name="597138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br>:) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
