<!DOCTYPE html><html lang="en" ><head ><title >Loading .OGG files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loading .OGG files</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Loading .OGG files</a><br><br>
<a name="586560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> All,<br>if I convert a quite big audio .WAV file in .OGG format, the LoadSound command needs some second to load the file, while if I load the .WAV file instead, the same command is performed in few millisecs.<br><br>I wonder, is that the normal behaviour ? I guess it is due to the compressed format. Does it happens to you too ? I've tryed with .MP3, and it's the same story.<br><br>If you want to try by yourself, choose a rather big audio file. With smaller file size, the loading time difference between .wav and .ogg is not noticeable.<br><br>Unfortunately I can't solve this problem by loading all the sounds at the very beginning of the game, because they would require lots of memory (and would also freeze the program for quite a long time, since the sounds are quite long).<br><br>That's why I load one audio file each time a new match is started from within the game, but in this way if I use .OGG audio files, the game freezes for some second. Again, .WAV files don't give this problem.<br><br>I could use .WAV files, but it would require more space on the HD, while the .OGG are nice small..<br><br>Is there any workaround ? Any help would be greatly appreciated.<br><br>Sergio. <br><br></td></tr></table><br>
<a name="586570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I wonder, is that the normal behaviour ? <br></div>Sounds correct to me.<br><br>Define a 'big' file. 100KB? 1MB? 10MB?<br><br>Maybe you could try loading (in the background) between matches?<br><br>Maybe divide up the audio file into smaller parts?<br><br>Is the audio file used as a game sound or is it used as music?<br><br>You didn't give any insight into what kind of game it is. <br><br></td></tr></table><br>
<a name="586612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> sounds like it has something to do with memory allocation and unpacking the ogg. Maybe you should convert it to wav during installation of the game. <br><br></td></tr></table><br>
<a name="586629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is normal for ogg to take time to load.  That's the tradeoff; ogg files are smaller but need time to decode, while wavs are faster but larger.  I normally balance this by using ogg for music and wav for sound effects, but obviously this is going to vary by the specific application.<br><br>Do note that players are used to load times between, and increasingly even during, levels.  They don't <i>like</i> it, but they are used to it. <br><br></td></tr></table><br>
<a name="586633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are OGG files decoded once on loading, and so use the same amount of mem as a WAV? (Probably true since you're saying they take longer to load).<br><br>or<br><br>Are OGG files decoded on-the-fly each time they're played, and so use less mem that WAVs?<br><br>Sorry to hijack! :) <br><br></td></tr></table><br>
<a name="586668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> They take up the same amount of memory. <br><br></td></tr></table><br>
<a name="586691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Decode to wav the first time the game starts and save the wav back to disk (replacing the ogg). <br><br></td></tr></table><br>
<a name="586776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Decoding to WAV when the game is first run and re-saving them to disk doesn't get over the disk usage issue.  You might say that using OGG helps with the download size, but WAV files compress quite will in ZIPs or installers too, so you won't really be saving anything.<br><br>This means two options...<br><br>1. Load the new music track during a natural pause in the game, for example between levels.<br><br>2. Use the PlayMusic command and stream the music from disk instead.<br><br>Incidentally, all compressed file formats for music/sound and graphics are decompressed when loaded into memory, so memory usage is equal to that of a WAV or BMP. <br><br></td></tr></table><br>
<a name="586840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VP</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> semar asked for workarounds, I offered one. Other people offered other workarounds.<br><br>I would normally try to keep the distributable size down to save on bandwidth usage, both to save the end user's time and and to keep my monthly website usage limit as low as possible (if I go over it, I get charged). <br><br></td></tr></table><br>
<a name="587067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure what your point is there.  Basically, he has two issues:<br><br>1. Disk usage<br>2. Memory usage<br><br>Options as follows.<br><br>To save disk space, after installation, use OGG.<br><br>To lessen the distributable size (ZIP or installer) you could also use OGG, but even WAV files get compressed in the distributable.  Not sure to what level, but I can't imagine there being much difference between the final size if a comparison was made.<br><br>As for memory, it doesn't matter what format they are stored on disk, as they will get decompressed on loading them.  So, the options are to either make use of LoadSound/FreeSound and only load them when needed at an appropriate place in the game, or use PlaySound where the memory usage will be down to a minimum and the music is streamed from the hard disk, which starts instantaneously. <br><br></td></tr></table><br>
<a name="587373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks all for the replies so far.<br><br>I prefere to use .OGG because they are smaller than .WAV files; but I don't like the the loading time.<br><br>Unfortunately there are not 'pause moments' where I can load an .ogg file without the player notice that... there are not levels, only a menu and the game itself. But each time the player choose to play, I would like to change the background music from a random .ogg file list.<br><br>I could pre-load all the .ogg files at the very beginning of the game, but I would like to keep the used memory as low as possible.<br><br>I have not tryed the PlayMusic command, I didn't know it streams the music from the HD. Thanks for the hint JazzieB.<br>Perhaps that's the solution..<br><br>Sergio. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
