<!DOCTYPE html><html lang="en" ><head ><title >b3d angle of elevation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >b3d angle of elevation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >b3d angle of elevation</a><br><br>
<a name="381317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've wanged a maplet level together that contains a few ramps and I thought it would be nice if the objects which mill about over the map actually follow the contours properly (ie their pitch alters to suit the particular section of the b3d they are on).<br><br>I've implemented this a couple of times now, but never to complete satisfaction (dropping a child in front of the parent object so you can point at it is abrupt and runs the risk of the child getting caught up; calculating the angle of incline based on the altering entityY from one frame to another is dependant upon velocity) and I'm wondering if there's a standard way to achieve this effect? As the collision system has sliding built in Blitz is probably holding onto some very handy numbers (ie the severity and direction of any incline diectly beneath a certain object) internally but I bet they're inaccessible :(<br><br>Any suggestions gratefully received... except that "Tokamak" isn't an answer of course ;) <br><br></td></tr></table><br>
<a name="381327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZombieWoof</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> check the Y directly below you, and 1 unit back from your current position... that will get you a slope value that progresses from one "normal to surface" to another smoothly as you transition on to or off of a slope. <br><br>check one unit in front and one behind if you want to transition sharply, if either is equal, you are on the level, else whichever has the greatest change in altitude is the slope you are currently on (presuming that you never have a ramp that changes its slope).<br><br>Hope one of these behaviors suits your needs !! <br><br></td></tr></table><br>
<a name="381658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that... I got the basis for a similar system with the child-dropping (unfortunate term) and had a bit of a think about how to refine it at work. I didn't want to spend time doing it long-hand if there was a built-in technique though (too lazy :D), but it looks like this is indeed the ticket. <br><br></td></tr></table><br>
<a name="381660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sledge,<br><br>If you already have collisions set up, why not just aligntovector the object based on the collisionNX, NY, NZ but on the Y-axis only.  <br><br>You could also make the level pickable and use a linepick straight down, aligntovector based on the pickedNX,NY,NZ, again on the Y-axis.<br><br>Either method should work for you unless I'm misunderstanding you ... <br><br></td></tr></table><br>
<a name="381703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>why not just aligntovector the object based on the collisionNX, NY, NZ but on the Y-axis only. <br> <br></div><br><br>Mainly because I'm not knowledgeable enough to know that that's what the commands can do... or at least I wasn't. I'll give it a go now -- cheers for the pointers. <br><br></td></tr></table><br>
<a name="381748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZombieWoof</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> wasnt aware of those functions either - much simpler implementation :)<br><br>I'll get BB figured out one of these days :) <br><br></td></tr></table><br>
<a name="381785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>much simpler implementation <br> <br></div><br><br>Not so far... going off the side of a ramp using this (collisionNY etc) method seems to make other axis' than the pitch go out of whack. Compensating for that makes the y-axis wrong again (always points downwards, even when going up an incline).<br><br>Might try picking next.<br><br>EDIT: Oh no, worst thing ever! I tweaked the collisions version so that it works fine... but I now have NO IDEA WHY! :P <br><br></td></tr></table><br>
<a name="381929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sometimes your object collides with more than one thing at a time.Check the  CollisionNY() for the first collision. CollisionsNY() Returns a nomalized Vector depending on the angle of the slope. If it is withing a certain range then, and then only align to vector. Just a thought. <br><br></td></tr></table><br>
<a name="381933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I had to allow for collisions with the vertical sides of the map (which the alignment process now ignores). My main problem currently, though, is that the numbers don't add up... well they DO add up, I just don't understand how or why, and that bugs me a bit. (For example the last parameter of AlignToVector [rate] is apparently capping the extent to which the vector is aligned, not the rate of alignment. The alignment also leaves me 90 degrees out, but altering the rate also affects this figure and the extent to which any manual realignment is effected... it's all a mite odd.)<br><br>I'll take a look at it with fresh eyes tommorow, and I should probably learn what a "normal" is at some point (they sound handy). Just glad it essentially works now, thanks for the help everyone. <br><br></td></tr></table><br>
<a name="382117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Normals, Heck, I'm new to this stuff too... I understand it to mean that it is in a range of Magnitude -1 to 1. But I know that can't be all to it.<br><br><a href="http://mathworld.wolfram.com/NormalVector.html" target="_blank">http://mathworld.wolfram.com/NormalVector.html</a> <br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="382135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> *plug*<br><br>I've just added this to the code archives:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1085#comments" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1085#comments</a><br><br>It actually draws normals which might give you a better understanding of them. :) <br><br></td></tr></table><br>
<a name="382373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Coo, I'll take a look... well I'll have to as my implementation isn't as robust as I thought it turns out :( <br><br></td></tr></table><br>
<a name="382382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try something like,<br><br>nx=collisionNx(entity,collisionNum)<br>ny=collisionNy(etc)<br>nz=collisionNz(etc)<br><br>aligntovector entity,nx,ny,nz,2<br><br>depending on your models orientation you may want to do it on axis 1, or a combination of axis. I've never found one combination that works in all cases.(Across apps that is..once you get it working with the media/set up you have it should be 100% stable..alot better than pointentity, none of that mad rotating going on) <br><br></td></tr></table><br>
<a name="382426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hooray, it was ME being THICK all along! The Yaw was sliding out of whack because I'm only allowing incremental turning (ie x degrees in total, in equal stages each frame) but I wasn't waiting for one turn to complete before stacking up the next one... meaning you could start a whole new turn halfway through the current one, leaving you half an increment (or so) out at the end. Why was it tied to ramps? Because, due to my level layout, leaping off the side of ramps is the only time you ever turn so quickly as to interrupt an in-progress rotation. Nothing to do with the normal detection, which works fine after all. Phew, eh?<br><br><div class="quote"> <br>aligntovector entity,nx,ny,nz,2 <br> <br></div><br><br>I'm using a variation on that (only the nx,ny &amp; nz calculations go where you have the nx,ny and nz variables... I can understand the benefit it using variables given that we potentially have three axis' to plough through, though) but am curious as to why you would set the rate to 2. I thought it was supposed to be a value between zero and one? <br><br></td></tr></table><br>
<a name="382428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1 Means X Axis<br>2 Means Y Axis<br>3 Means Z Axis<br><br>He is not using the Optional "Rate" <br><br></td></tr></table><br>
<a name="382429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ha ha... I looked at the docs and have been typing in "y-axis"! :D That's probably the last piece of the puzzle right there, bet I can make the numbers add up now (God only knows how it has been managing to work as well as it does thus far). <br><br></td></tr></table><br>
<a name="382777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, that was it... the text was being converted to a value and screwing things up I guess -- works exactly as expected now. Top banana everyone! :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
