<!DOCTYPE html><html lang="en" ><head ><title >CreateMirror vs EntityOrder</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >CreateMirror vs EntityOrder</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >CreateMirror vs EntityOrder</a><br><br>
<a name="838728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. I have a problem with a skybox in an older game that I never released, but I probably will reopen the project, but I need to solve an ugly artefact first. <br><br>The game uses the CreateMirror function for some reflection on the water surface. When I scale the skybox small and set EntityOrder to make it appear behind everything else, then the Mirror won't reflect the skybox anymore.<br><br>When I scale the skybox up until the size allows to use a normal EntityOrder, then the huge size brings up a lot of ugly  rounding error (single precision float Z resolution) z-fighting, resulting in real ugly flickering parts of the skybox.<br><br>Is there a way to make CreateMirror work together with EntityOrder (with a smallish skybox)? <br><br></td></tr></table><br>
<a name="838775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Terry B.</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> make the mirror appear behind everything, including the skybox? <br><br></td></tr></table><br>
<a name="838806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suppose creating a texture mirror is out of the question? <br><br></td></tr></table><br>
<a name="838840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>make the mirror appear behind everything, including the skybox? <br> <br></div><br>No reason why that wouldn't work. <br><br></td></tr></table><br>
<a name="839332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks. Creating a mirror texture may be a solution. I could use cubemapping and simply use only one side. BUt this requires to copy a render to a texture, and to prevent blocky artefacts the texture must be 2048^2 or so, pretty slow when used with copyrect, even with flag 256. Even with its limitations, CreateMirror Mirrors performed nicely.<br><br>I will however try to EntityOrder the Mirror, in the worst case it will simply fail, so I ain't got nothing to lose there. <br><br></td></tr></table><br>
<a name="839982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember this problem. I ended up using a large squashed cube just inside the camera range (with the bottom cut off to stop Z fighting!!), which was not allowed to go below the water height (but can go upwards with clever use of fog and bkg colors.<br><br>anyway,<br><br>For your problem, what about doing a double render like this:<br><br>10 set cameraclsmode to default, and renderworld (no need for any entity ordering) <br><br>20 Then turn off cameraclsmode clearing (color or z buffer cant remember which) hide the skybox and then renderworld a second time  (This should draw all the other 3D stuff over the backbuffer (which is still the sky's image) without wiping it out completely) <br><br>30 draw any 2d overlay stuff to bbuf as normal and flip() the screen<br><br>40 goto 10 :P<br><br>Hopefully it wont clear the sky in the mirror as there is no clearing of the backbuffer and the mirror shouldnt draw those areas where theres nothing to mirror. Certainly worth a try :) <br><br></td></tr></table><br>
<a name="840205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'm not sure if I get this right, 2pass ok, this could work.<br><br>I'm afraid there is no simple solution. Since the small skybox is located at the cameras position (fps), it will also require  its own mirror. I tried 2 mirrors, but Hideentity doesn't work with mirrors. <br><br></td></tr></table><br>
<a name="840297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hideentity doesn't work with mirrors <br></div>Does here. <br><br></td></tr></table><br>
<a name="840384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> and here, <br><br></td></tr></table><br>
<a name="841358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> oops - all of a sudden it's working here too. Strange, I'm sure it didn't before...<br>(BTW I really should have known since it's a feature in my fps engine... I'm getting old. see kids? don't take drugs. x_x ) <br><br></td></tr></table><br>
<a name="841594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zeotrope</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a quick question: <br><br>Is a B3D mirror [createmirror()] the same as copying each and every entity, fliping them 180 on the verticle? (I understand there is more to it than justthat..but I think you get my point)<br><br>I ask this because when I look at the scene containing a mirror in wireframe, this is what it seems like; all entities are doubled and flipped.<br><br>How is it different? <br><br>(I recall once making a Quake2 map -palace.bsp- that basically had a replica of itself underneath (flipped)....made the level look like it had a shiny, reflective floor. (Although, not reflections of the entities could be acheived) <br><br></td></tr></table><br>
<a name="841597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that's pretty much it. If you let an entity cross the mirror you will notice that its opposite 'image' does likewise -- it's just another entity. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
