<!DOCTYPE html><html lang="en" ><head ><title >Maths lib or dll for Blitz3D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Maths lib or dll for Blitz3D</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Maths lib or dll for Blitz3D</a><br><br>
<a name="1173578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Prym</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does a library for math ( 3root, Nroot, and other ) in Blitz3D exist ? <br><br></td></tr></table><br>
<a name="1173742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a great Q.<br><br>I don't remember such a library, yet there are scattered math topics throughout this forum.<br>--------------------------------------------------------------------------<br>You probably already know this code here; This is an elementary way to do roots:<br><br><b>Function ThirdRoot#</b>(v#)<br>          Return Exp( Log(v)/3 )<br>End Function <br><br><b>Function NthRoot#</b>(v#, n#)<br>          Return Exp( Log(v)/n )<br>End Function <br>-------------------------------------<br>If you wish to have DOUBLE Precision math, then there is a <b>library</b> for that:<br><br>Doubles for Blitz3D <u>by RGR</u><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1971" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1971</a><br><br>Blitz Doublw by <u>Abram</u><br><a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1905#comments" target="_blank">http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1905#comments</a><br><br>Blitz Double <u>by Abram</u><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1905" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1905</a><br>-------------------------------------<br>other math related posts:<br><br>Blitz3D C++ Geometry Code by Marksibly<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=42657" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=42657</a><br><br>Vector Math Library by Beeps<br> <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=936" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=936</a><br>-------------------------------------<br> I know that PureBasic is an excellent language for creating DLLs.<br><a href="http://www.purebasic.com/" target="_blank">http://www.purebasic.com/</a><br><br>Tiny C is free, and can also create DLLs:<br> <a href="http://bellard.org/tcc/" target="_blank">http://bellard.org/tcc/</a><br>Tiny C is sort of command-line based, so you'll have to get used to that.<br>Tiny C documentation on creating DLLs: <a href="http://bellard.org/tcc/tcc-doc.html" target="_blank">http://bellard.org/tcc/tcc-doc.html</a><br><br>DLLs seem to be hard to find. So, you can either figure out how to make your own <b>Math DLL</b>,<br>or you can transfer math code from various places into Blitz3D.<br>-------------------------------------<br>some sample codes:  ;)<br><br>calculating cube root by <u>John T.H.</u><br><a href="http://forums.purebasic.com/english/viewtopic.php?p=210283" target="_blank">http://forums.purebasic.com/english/viewtopic.php?p=210283</a><br><br>PureBasic UNclassified Nth root<br><a href="http://megasnippets.com/source-codes/purebasic/nth_root" target="_blank">http://megasnippets.com/source-codes/purebasic/nth_root</a><br><br>Huge Integer Math and Encryption, [includes various math routines]<br><a href="http://www.bestsoftware4download.com/software/k-purebasic-t-free-hime-huge-integer-math-and-encryption-download-wgevwgkq.html" target="_blank">http://www.bestsoftware4download.com/software/k-purebasic-t-free-hime-huge-integer-math-and-encryption-download-wgevwgkq.html</a><br><br>Lots of 3D Graphic Maths<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?cat=13" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?cat=13</a><br><br>a whole horde of stuff <u>by Teasy</u><br><a href="http://www.bettiesart.com/tc/blitz/lib.html" target="_blank">http://www.bettiesart.com/tc/blitz/lib.html</a> <br><br></td></tr></table><br>
<a name="1173751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> We already have arbitrary powers, x^y.<br><br>x^(1.0/3.0) is 1/3 root. <br><br></td></tr></table><br>
<a name="1173799"></a>

<a name="1173800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Tiny C is free, and can also create DLLs: <br></div><br><br>Note that while Tiny C is a jaw-droppingly brilliant piece of compiler design, it doesn't bother reporting errors in any level of detail (or... at all). Unless you're an expert C coder and can spot errors yourself, you might find it very difficult to get much done. <a href="http://www.smorgasbordet.com/pellesc/" target="_blank">Pelles C</a> is an industrial-strength compiler that's nearly as small, fast and easy to use (so good for newcomers) and comes with a Blitz-style graphical editor. <br><br>(I have nothing helpful to add on-topic, sorry.)<br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="1173850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for sharing the <b>Pelles C.</b><br>I have now added it to my collection. <br><br></td></tr></table><br>
<a name="1173877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, nice low-down at post #2. Thanks for sharing. <br><br></td></tr></table><br>
<a name="1174025"></a>

<a name="1174026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, Floyd's idea of <br><b>ThirdRoot(x) = x^(1.0/3.0)</b><br><br>if much faster than my idea of <br><b>ThirdRoot(x) = Exp( Log(x)/3 )</b><br><br>---just out of curiousity I placed both in an extensive timing test,<br>---and Floyd' code is about <b>16.5</b> times faster than my long version.<br><br><font class="tiny">On my machine:<br><br>x^(1.0/3.0)     takes about 0.0625 millisecond<br>Exp( Log(v)/3 ) takes about 1.03 millisecond</font><br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="1174034"></a>

<a name="1174035"></a>

<a name="1174111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. I was complimenting your post VirtLands, the amount of resources you posted.<br><br>Anyway, the "^" operator is supposed to be faster than a function: being native to Blitz3D, it probably represents the Pow(x,y) from math.h in C++, so it's expected to have improved performance over vanilla Blitz3D code.<br><br>However, if you're going for integer powers, it's been noted that using multiplications is much faster than that power operator:<br><br>Using the native operator<br><b>Cube(x) = x^3</b><br><br>is slower than using multiplications<br><b>Cube(x) = x*x*x</b><br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="1174048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note also that unlike the other operators, there's no integer version of ^ (makes sense - math.h doesn't provide one either): it will always give a floating point result no matter what you pass into it. This means that you have to watch for the single-precision limit, which I guess you might reach quite easily with this operator.<br><br>In the unlikely event that this is an actual problem (not just obscure trivia), some alternative solutions can be found here: <a href="http://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int" target="_blank">http://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int</a> <br><br></td></tr></table><br>
<a name="1174078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Depending on your application, if you are doing a lot of these per frame and if they are all based on integers (or if integers would be close enough) you could put them in an array at startup.  Looking them up is faster than either form of calculation above.<br><br><pre class=code>
Local limit=1000000
Dim ThirdRoot(limit)
Local x
Local startTime,endTime
Local v#

startTime=MilliSecs()
For x=0 To limit-1
	ThirdRoot(x) = x^(1.0/3.0)
Next
endTime=MilliSecs()

Print "Calculation time was "+(endTime-startTime)


startTime=MilliSecs()
For x=0 To limit-1
	v#= ThirdRoot(x)
Next
endTime=MilliSecs()

Print "Array lookup time was "+(endTime-startTime)

WaitKey()

</pre><br><br>Thus you just run this kind of thing once at startup.<br><br>Of course it doesn't do negative numbers or floats, however for floats I suppose you could still do it, you'd just have to calculate the root, then store in the array index that is, say 100 times the original lookup value.  You'd be sacrificing precision for speed, but it should work?  Maybe? <br><br></td></tr></table><br>
<a name="1174125"></a>

<a name="1174127"></a>

<a name="1174134"></a>

<a name="1174136"></a>

<a name="1174139"></a>

<a name="1174140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >virtlands</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ; Thanks Yasha. <br><br>; Your link led to another link, which quite possibly has the <br>; fastest integer power function in the universe.  <br>;<br>; It's <b>power_v4(a,b)</b> from Santiago's Blog:<br>; So, here's that <u>code</u> which I translated from 'C' to Blitz3D.<br><br><img src="http://i411.photobucket.com/albums/pp194/aeDream/other%20emoticons/mfw-excellent-mr-burns_50x50_zps090046e1.png">  <font class="tiny"> It's excellent, and  complex, .. </font><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">;    Code taken from Santiago's blog:
;    <a href="http://blog.svpino.com/2012/08/four-different-algorithms-to-power.html" target="_blank">http://blog.svpino.com/2012/08/four-different-algorithms-to-power.html</a>
;
;    public static double power_v4(double a, double b)    ;; original 'C' code
;    { double result = 1;
;         While(b &gt; 0)
;         {   
;            If (b % 2 != 0)  {  result *= a;  b -= 1 }
;            a *= a;  b /= 2;
;         }
;         Return result;
;    }

Graphics 800,600,32,2
Print" Testing a quick power function : " :Print 

For z=6 To 8
   For y=2 To 3
         show$ = "  "+y+"^"+z+" = "
         result4 = power_v4(y,z)                                 
         Print show + (result4)
   Next 
Next 

WaitKey():End 

Function power_v4(a,b)   ;; ------ Santiago's version -----
   Local result =1  
      While(b&gt;0)
         If (b Mod 2)                              
             result =result*a  :  b =b-1                                 
         End If 
         a = a*a : b = b Shr 1                      
      Wend 
      Return result
End Function </textarea><br>Of course, 'doubles' are not <i>natural</i> to Blitz3d, so I had to demote it to 'long'.<br><br>As for <b>Axel Wheeler</b>'s idea of creating tables, that kind of has possibilities, and I was wondering if it could be accurate to interpolate <br>third-root-tables created from integer domains?   I'm guessing that it would not lead to accurate results, because the world of <b>floats</b> is so vast. <img src="http://i411.photobucket.com/albums/pp194/aeDream/Yahoo%20emoticons/confused.gif"><br><br><font class="tiny">[Wikipedia subject: Interpolation_ <a href="http://en.wikipedia.org/wiki/Interpolation" target="_blank">http://en.wikipedia.org/wiki/Interpolation</a> ]</font><br><br><font class="tiny"> edited too many times 1970 </font> <img src="http://i411.photobucket.com/albums/pp194/aeDream/wunderland%20emoticons/frozen_lol_smiley.jpg"><br><br><font class="tiny">Last edited 2013</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
