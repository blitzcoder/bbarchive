<!DOCTYPE html><html lang="en" ><head ><title >Sprite Candy Collision Detection...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sprite Candy Collision Detection...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Sprite Candy Collision Detection...</a><br><br>
<a name="979417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NeilH</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been playing around with collision detection in Sprite Candy, and I've now got to a point where I am completely stuck and just wondering if anybody has either come across the same, or has any advice on how I can get around the following...<br><br>All the main characters in my game are animated, and so I am handling this manually using the HUD_SetImageClip function to move around the texture to create the animation frames.<br><br>The problem I have got is that I just cannot get collision working to a suitable standard for the game.<br><br>There are two options by default; the first being to check if object A hits object B, however this is done on the 4 corners of the objects. If you have any transparency in the object it makes it look odd as the collision happens even when the blank spaces collide.<br><br>Second option is to use the shape editor and do shape collision, however you can have only 1 shape per object, even though the object is animated. So when the frame changes you are still on the original shape, even though the new animation frame does not reflect this shape anymore.<br><br>Has anybody come across anything to resolve this?  Basically I suppose I am after a pixel perfect collision against the current clip of an object.<br><br>I'm sure there must be a way around this as I would be a fundamental gap in the Sprite Candy library!<br><br>Any help/advice appreciated!<br><br>NeilH <br><br></td></tr></table><br>
<a name="979421"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> make a simple oval shape around the players general area but be sure to make the part below the feet flat.  That should do it.. you cant do pixel perfect collisions with animated images and have them look much more realistic... try a 2d physics engine instead. <br><br></td></tr></table><br>
<a name="1102285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ian Martin</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can actually switch the collision shape with HUD_LoadCollisionShape or HUD_ClearCollisionShape and HUD_AddCollisionPoint.  <br><br>I tried this with an animated object.  First I would get the frame the object was on with HUD_GetAnimFrame and then load the collision shape to go with the frame.  Since you are using HUD_SetImageClip, you already know the frame.  To make the collision shape in the shape editor, load just the relevant frame, and make the shape as if it were just one image - using the second, third, etc. of the image strip will put the collision to the right of the object.  So do each separately.  Save each frame's collision shape as GuyFrame1.shp, GuyFrame2.shp, etc.  <br><br>Check the collision shapes with HUD_DrawCollisionShapes turned on, in debug only as it kills performance!  "Since this function uses common 2D drawing commands, it must be placed after RenderWorld and before Flip. Otherwise you won't see it's results. Use it for test purposes only."<br><br>I was using the switched shape for a 'spring' shaped enemy.  It seemed to work OK, but I was looking through the objects twice so I decided I didn't really need to do it.  I ended up setting the collision shape to a compromise between the three images, a medium size shape.  It worked fine in the game because the spring was always compressing and decompressing, so you couldn't really tell what frame it was on.  <br><br>I think the above suggestion to use an oval with a flat bottom would work well too.  I have been using squares for a lot of the collision, using them slightly inside the object.  Make the box bigger for enemies, smaller for the player's character.  People won't mind if the bad guy collision is a tad off, if it's in their favor.  They will REALLY mind if their character collision isn't good.  Another option would be to use separate images for each leg, torso, etc. so each has it's own collision.  It really matters what you are trying to accomplish.  Do you just need collision against the feet, or are you needing to know where the torso, head, arms are?  I'm planning on doing a game with a guy at some point and am thinking of having the torso, arms separate so I can do things like figure out if he is hanging by his arms or know when his body is crushed by two objects on either side.<br><br>Let us know if you come up with a good solution.  I wish the collision shapes worked with strips too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
