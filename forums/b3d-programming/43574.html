<!DOCTYPE html><html lang="en" ><head ><title >SetAnimTime Confusion</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SetAnimTime Confusion</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >SetAnimTime Confusion</a><br><br>
<a name="486488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been banging my head against the wall looking for bugs in my code for a week now because my manual animation system kept glitching. Now I've found it, and I'm still confused.<br><br>It appears that this<br><br><pre class=code>SetAnimTime Entity,AnimLength(Seq),Seq</pre><br><br>Sets the animation to a frame which does not exist within the animation sequence specified.<br><br>As long as I stop the time variable from ever reaching AnimLength(Seq) it appears not to happen. I kinda have to guess how much lower to keep it in order not to have any problems, which is a bit awkward, but it seems ok at this early stage.<br><br>Is this correct behaviour though? Why? <br><br></td></tr></table><br>
<a name="486912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It wouldn't happen to be one of those things where the frames start from 0 to AnimLength(Seq)-1? <br><br></td></tr></table><br>
<a name="486918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I don't think it's that. That was the first thing I thought of when I noticed it happening. But it only happens if the parameter supplied to SetAnimTime is <b>exactly</b> the same as the length. EG: If the length is 7 then 7.0 will cause it to display the incorrect frame but 6.98 ( for example ) won't. <br><br></td></tr></table><br>
<a name="487085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> And I've had confirmation on IRC that this has cropped up before. It seems that Blitz somehow manages to get the reference frame tangled up with the animations when you use AnimTime. It's patchy, in that I can't make it happen 100% of the time ( yet, I'm working on it ) but it happens plenty enough to ruin a game. Bug? <br><br></td></tr></table><br>
<a name="487573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've found that it doesn't matter how you set the animation time...<br>If, for example, I have a model with 100 frames, and I try to set the animation time to 638, it will wrap around and arrive at frame 38.<br>However... this is what I've found *without* using the sequence number parameter. <br><br></td></tr></table><br>
<a name="487643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, without a sequence parameter, you're going to find that the reference frame is right at the beginning of your animation and you wouldn't be able to tell if it was there for the right reasons or the wrong reasons, so I'm inclined to agree that it won't show up if you only have the one sequence.<br><br>However, with a sequence extracted from the middle or end of the original animation, the reference frame shouldn't be there at all. Yet it is. <br><br></td></tr></table><br>
<a name="488060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Small update:<br><br>I have tested playing back an animation very slowly and recording the time retrieved with AnimTime#() and I can confirm that when Blitz plays an animation all the way through, that includes the value returned by length, so it should *NOT* be necessary to keep the SetAnimTime() time parameter below the length of the animation.<br><br>I intend to investigate further, but it's hard to make it happen consistently so if anyone has come across this and knows how to make it go wrong consistently, that would be very helpful in tracking down the problem. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
