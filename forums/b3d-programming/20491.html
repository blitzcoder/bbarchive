<!DOCTYPE html><html lang="en" ><head ><title >Limiting the FPS?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Limiting the FPS?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Limiting the FPS?</a><br><br>
<a name="209177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nazca</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a code that should prevent the game from going too fast, but it's not quite working.. here it is:<br><br><pre class=code>
SyncRate = 30
while not keydown(1)
 RenderTime = MilliSecs() - RenderStart
 renderStart = MilliSecs()
 If Rendertime&lt;(1000/syncrate) Then temp = (1000/syncrate) - Rendertime: Delay temp
 UpdateWorld
 RenderWorld
 Flip
wend
end
</pre><br><br>[To sum up the above, it finds out how long it's taking to render one loop, then comparing it to how long it should take, then delaying for the right amount of time]<br><br>what's wrong with the above? It DOES limit the fps, but it still allows it to go about 10 fps over the SyncRate value!<br><br>how can I make it more percise? <br><br></td></tr></table><br>
<a name="209191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't limit the framerate.  Instead I scale changes in the game based on how quickly frames are being calculated.  This method is usually referred to as delta time.  Basically you figure out how much time has passed since last frame (the delta time) and then multiply stuff by that value.  This way there are larger changes between frames when the framerate is lower, resulting in the overall visual appearance being identical at all framerates. <br><br></td></tr></table><br>
<a name="209245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Peer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey why not use the Timer Functions?<br><br>Timer = Createtimer(Max_FPS)<br>Repeat<br>  WaitTimer(Timer)<br>  .<br>  .<br>  .<br><br>  Updateworld()<br>  Renderworld()<br>  .<br>  .<br>  .<br>Forever<br><br>This is much easier to use :) <br><br></td></tr></table><br>
<a name="209320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is easiest and for something simple that is fine.  But for any major project, such as a game you intend to distribute, that has a number of drawbacks.  The main drawback is that using WaitTimer is extremely wasteful of processing power.  The hardware renders the scene as fast as it can and then just sits there waiting, doing nothing, until it is time to render the next frame.  Doing something like delta time or tweening or whatever allows the game to take advantage of better hardware (ie. hardware which can process the game faster than the target framerate you have in mind) by keeping the computer busy doing something useful (drawing more frames for smoother animation, calculating AI further for smarter enemies, calculating physics more accurately, etc.)  Personally I recommend the delta time approach over tweening because it is much simpler (seriously, pretty much all you have to do is setup a framerate counter) but has many of the same benefits. <br><br></td></tr></table><br>
<a name="209392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ice9</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using a delay is not optimal. You should run it as fast it will go and adjust all time based variables with a modifier based on the last or average time of the iteration of your game loop. <br><br></td></tr></table><br>
<a name="209662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nazca</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> but delta time is way too choppy sometimes <br><br></td></tr></table><br>
<a name="209802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Follow the link and read more...<br><br>[faq 48] <br><br></td></tr></table><br>
<a name="209860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> More specifically, read the thread that FAQ refers to.<br><br>Good call, Anthony. <br><br></td></tr></table><br>
<a name="536014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> See the castle demo example that comes with Blitz3D :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
