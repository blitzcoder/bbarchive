<!DOCTYPE html><html lang="en" ><head ><title >linepick doesn't work with anim meshes...?????</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >linepick doesn't work with anim meshes...?????</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >linepick doesn't work with anim meshes...?????</a><br><br>
<a name="615311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I've noticed recently that the command linepick fails with<br>animated entities.<br>I'm not sure if the is a isolated phenomena that only has happened to me or someone more have experience it.<br><br>Basically I load an animated mesh, not much animations, just<br>the tipical ones... walk, run, open fire and crouch and set all its childs as pickables.<br><br>The problem comes when the enemy detects you (player) and crouch itselg (one of the states of its behaviour). When I tried to point him I noticed that the target only turned in red (it happens when you are pointing to a enemy) pointing some of the parts of the body, and, the most strange thing,<br>the target turned in red when I pointed out of the body<br>of the enemy, just in the closest upper pixels.<br><br>I have concluded that linepick command was picking the<br>"base entity", is said, the base state of the mesh: static.<br><br>Some days ago I posted my doubts about how to make 100% pickable a mesh and octothorpe give me a code snipet, very basic, to make it.<br><br>I load the mesh and make all the childs pickables... I guess there cannot exist any error...<br><br>some idea about how to solve this??<br><br>Thanks in advance! <br><br></td></tr></table><br>
<a name="615348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's true, Linepicks will use the initial pose of the animated mesh, not the current animation pose. This is a problem with .B3D only. There isn't much you can do AFAIK, other than using .3DS or .X instead. <br><br></td></tr></table><br>
<a name="615354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks!<br>Do you know if occurs the same with other blitz similar commands like meshintersect()???<br>Just to think in possible alternatives!<br><br>Regards! <br><br></td></tr></table><br>
<a name="615407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are solutions to the problem tho.  You could use pickable spheres positioned relative to the bones for example.<br><br>Using 3DS or X isn't really a solution, as then you don't get nice skinned animations. <br><br></td></tr></table><br>
<a name="615415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another method which I outlined in an older thread is to do this: (mainly for detecting bullets hitting different body locations on any mesh md2 or b3d)<br><br>place camera at the position you wish to do the linepick from, point it at your entity along the same direction as the direction you wish to linepick from.<br>Set the entity color of all objects you wish to treat as possible barriers to the linepick in one color and your target entity in another color.  Take a render at low res with the new camera.  Do a readpixelfast at the centre of the viewport for that camera, by comparing colors you can tell what object you have hit and what location.  For example if you wanted to detect bullet hits on arms/legs/head you simply create a second texture for your creature with those areas color coded, and then check what color was returned from the camera render. <br><br></td></tr></table><br>
<a name="615427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use hitboxes.  Essentially Beaker's suggestion, except I use boxes, not spheres.  Basically, make a bunch of rectangular primitives for each bone and parent them to the bones. <br><br></td></tr></table><br>
<a name="615495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...and what about meshintersect? could be helpful? or it has the same behaviour with anim meshes?<br><br>regards! <br><br></td></tr></table><br>
<a name="615512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just made a test, it seems meshesintersect also works this limited way. It's really one of the not so fatastic aspects of the format, but I guess there are technical reasons for it. <br><br></td></tr></table><br>
<a name="615533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's for the same reason that TFormPoint doesn't return the position of animated vertices.  Mesh deformation for skeletal animation is handled on the video card, so it would be too slow to send the data back <i>up</i> the pipe to the CPU. <br><br></td></tr></table><br>
<a name="615706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought it was a software based deformation. I'm pretty sure the transformations are software, that's why there so bleeding slow. <br><br></td></tr></table><br>
<a name="615723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well it's not done with a vertex shader, but I'm not sure if it's done on the videocard despite that. In either case, Blitz doesn't ( for whatever reason ) keep track of the vertex positions with skeletal animation so none of these commands are going to be able to retrieve the vertex position during an animation. Bone positions are updated during the process though, so you could probably code it yourself. It's gonna be horribly slow though ( more so ) and hardly any ( even commercial ) games actually do hit detection by the vertex. <br><br></td></tr></table><br>
<a name="615724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a .DLL by spacemonkey. He's claiming it does massive tform operations, and it may be quick enough to calculate vertex positions :o) It's in the creation part of the forum. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
