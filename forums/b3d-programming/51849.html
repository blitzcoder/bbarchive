<!DOCTYPE html><html lang="en" ><head ><title >Accurate collision detection with animated meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Accurate collision detection with animated meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Accurate collision detection with animated meshes</a><br><br>
<a name="578730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I was mucking around on my PC in blitz3d the other night and thought of a simple way to detect collisions between 'bullets' and animated meshes regardless of whether they are md2 or b3d or whatever.<br><br>I've tested it out at home and it works quite well so I thought I'd share it here - only 'pseudocode' below so it should be easy to follow:<br><br>Create animated character model as normal, with texture.<br><br>Create secondary texture  for character model with bodily regions marked out in different colors, example white for face, green for left arm, red for right arm, yellow for upper torso etc etc<br><br>In main game loop when a bullet is fired and is within a small distance from the character being shot at perform this process:<br><br>Change texture on character to the secondary texture.<br><br>Place camera at bullet position with same orientation as bullet.<br><br> Set camera range to 'very small' near and a far distance of the distance that the bullet travels each frame.  <br><br>Hide all entities other than the character being shot at (or simply move them and the bullet/camera to a location where the camera won't see anything else) .<br><br>Call 'renderworld'.  <br><br>Call 'getcolor' at the coordinates of the centre of the camera's viewport.<br><br>Based on the pixel's color we can determine the damage location ie if it was black (background) then the bullet has not hit anything, if it was white (or close to white) (using secondary texture example above) then a head shot has been scored (play appropriate animation), it it was green (or close to green)  then the left arm has been hit (play appropriate animation, perhaps have a particle effect spray of blood from the bullet's current location)<br><br>Prior to rendering the scene set all the textures back to normal and show all the entities again and proceed as normal.  <br><br>If necessary I'll post some code when I can with an example model. <br><br></td></tr></table><br>
<a name="578851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not a bad idea.  If your character is rather complex: instead of changing texture you might find rendering a simpler proxy 'stickman' mesh of the character with the texture already attached is worth a try.  I'm not sure how easy it is to keep 2 animated meshes in sync (particularly MD2s) but worth a try [EDIT: I found a way to keep them in sync if you're interested].<br><br>This method might also allow you to use vertex colors intead of a texture.  I'm not sure how you would handle areas that are blended between different vertex colors tho. <br><br></td></tr></table><br>
<a name="578856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I 'love' a smart thinker!  Nice one Matty!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
