<!DOCTYPE html><html lang="en" ><head ><title >Third person cameras..</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Third person cameras..</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Third person cameras..</a><br><br>
<a name="590856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's the best third person camera example made in B3D?  I have noticed that creating a proper camera system is quite hard, is there any good examples out there?  Especially for a closed dungeon like environment. <br><br></td></tr></table><br>
<a name="590868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Castle blitz sample ? <br><br></td></tr></table><br>
<a name="590899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will need to give the camera a collision mode so, it doesn't go through walls. Also, you will need to keep an eye on the distance between the player and camera, to make sure the camera doesn't get snagged on anything. I find it best not to parent the camera to the player, but to constantly point the camera at a pivot, parented to the player. You place the pivot where you want the camera to rest. Then, point the camera at the player, and then, each loop...<br><br><pre class=code>

PointEntity camera, player_pivot
MoveEntity camera,0,0, EntityDistance#(camera,player_pivot)/30.0 ; 30 is just an example number. Higher numbers will result in slowly following speed.
PointEntity camera,player

</pre><br><br>Do that every loop, and you should have a smooth camera. <br><br></td></tr></table><br>
<a name="590943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thx Ross, I'll be using a similar method in conjunction with <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1528" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1528</a> to make the system the way I want it.  No more worries about the camera collisions. <br><br></td></tr></table><br>
<a name="591617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> COllision on cameras may produce a lot of problems, like a camera that is struck inside a corner etc. IMHO the best method is: Use a number of linepicks from the wanted camera-position to the closest possible camera position (cose to the player character) until the linepick returns the characters handle, so you'll know it's visible. When there is a wall between the wanted camera position and the character, the camera will automaticly go as close as neccessary to the character. To find this point I'd suggest to do a binary search:<br>let's say the full distance is 100%<br>visible at full distance ? no!<br>visible at 50% dist? no!<br>visible at 25% dist? yes!<br>visible at (25%+12.5%= 37.5%) dist? no!<br>visible at (25%+6.25%) dist? yes!<br>visible at (25%+6.25%+3.125%) no!<br>visible at (25%+6.25%+1.5625%) yes!<br>and so on, it's up to you to define the max resolution for this search, but you see even here we got 1.5% resolution with only 7 linepicks. <br><br></td></tr></table><br>
<a name="591647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dont know who did this...its not my code, but I find it useful for my cutscene system with some modifications..I hope this can help you..its working well..<br><br>; Smooth 3rd person Camera Example<br>; ----------------<br><br>camdistance=5<br><br>Graphics3D 640,480 			;rem   setup the Graphics mode<br><br>light=CreateLight()			;rem create a light for our scene<br><br>Global barney=CreateCube()		;rem create a cube and call it barney	<br>Global obpiv=CreatePivot(barney) ; attach a pivot to barney<br>MoveEntity obpiv,0,0,-camdistance		; move the pivot back a little adjust this for effect<br>				<br>Global cam=CreateCamera()	;rem create a camera and make barney the cube it's parent entity<br>	<br><br>me=1<br>building=2<br>EntityType barney,me<br><br>Type brick					;rem create a type called brick with 1 field in it<br>Field entity				;rem create a field in type brick to hold the entity number<br>End Type<br><br>For x = 1 To 10		;rem	create 100 "bricks" To place in the world<br>	For y = 1 To 10		<br><br>			b.brick = New brick 		;rem add an entry into the type list b <br><br>			b\entity = CopyEntity(barney) ;rem make a copy of barney and call it b\entity<br>			EntityType b\entity,building<br>			PositionEntity b\entity,x*8,0,y*8 ;rem make a grid<br><br>			EntityColor b\entity,Rnd(0,255),Rnd(0,255),Rnd(0,255) ;rem random red,green,blue colors<br><br>Next<br>Next<br><br>Collisions me,building,3,1 ; set up collisions between me and the world <br><br>; main loop<br>While Not KeyDown( 1 )<br><br>	If KeyDown (203) Then TurnEntity barney,0,1,0<br>	If KeyDown(205) Then TurnEntity barney,0,-1,0<br>	If KeyDown(200) Then speed#=speed#+.003<br>	If KeyDown(208) Then speed#=speed#-.003<br><br>speed#=speed#*.99<br>MoveEntity barney,0,0,speed#<br><br>smoothcam(obpiv,barney,50)<br><br>; check for collisions and bounce if necessary<br>If CountCollisions ( barney ) <br>	hitentity=CollisionEntity ( barney,1 ) <br>	;change the color of the entity we hit<br>	EntityColor hitentity,Rnd(0,255),Rnd(0,255),Rnd(0,255)<br>EndIf<br><br>If EntityCollided ( barney,building ) <br>	If speed#&lt;0 Then speed#=speed# +.1<br>	If speed#&gt;0 Then speed#=speed# -.1<br>EndIf<br><br>	UpdateWorld<br>	RenderWorld  ;rem render the world<br>	Flip ; flip from the back buffer to the front buffer <br><br>Wend<br><br>End<br><br>Function smoothcam(pivot,target,camspeed)<br><br><br>curx#=EntityX(cam)<br>curz#=EntityZ(cam)<br>destx#=EntityX(pivot,True)<br>destz#=EntityZ(pivot,True)<br><br>curx#=curx#+((destx#-curx#)/camspeed)<br>curz#=curz#+((destz#-curz#)/camspeed)<br>cury#=3<br><br>PositionEntity cam,curx#,cury#,curz#<br><br>PointEntity cam,target<br>End Function <br><br></td></tr></table><br>
<a name="591954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's something I got (utilizes some Mario camera code)<br><br><a href="http://webzoom.freewebs.com/xmlspy/Downloads/Worlde.zip" target="_blank">http://webzoom.freewebs.com/xmlspy/Downloads/Worlde.zip</a> <br><br></td></tr></table><br>
<a name="605899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >callahan614</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> About camera collisions - I found myself on a tight timeframe to get a prototype finished of this 3D platformer I'm working on. Organic, fully enclosed corridor-based levels with plenty of twists and turns in them; to make a camera system rugged enough to stay smooth and on target without obscuring the player's view would have been far too much trouble, for a prototype at least.<br><br>     What I did was request that my level designer (whom I love for doing this for me) make every surface in the level one-sided and ensure that all the normals faced in. She did that, and I imported the level and left collisions completely off my camera. All I did was limit the pitch(as the game uses 3rd person mouselook), and if the camera swings out - it goes through the wall; benefit of this is that the player can see IN through the one-sided wall, eliminating obscurity problems entirely.<br><br>     This probably seems like a cheap solution to most of you, but it was quick, harmless, and combined with enough of a far clip to hide other segments of the level, provides a pretty decent feel. It also let me focus on the more important aspects, like my collision reponse...ugh.<br><br>     I know this thread is a month old, but I thought this might be a helpful alternative to some of the more complex methods. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
