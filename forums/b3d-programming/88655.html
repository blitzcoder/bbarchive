<!DOCTYPE html><html lang="en" ><head ><title >Fuzzy Logic</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fuzzy Logic</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Fuzzy Logic</a><br><br>
<a name="1006619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Fuzzy logic Do you know?<br><br>Since Bobysait placing his excellent blitz3d TMap lib, I reused to design my Blitz3d Fuzzy Logic Library.<br><br>Fuzzy logic is used for decision support in inaccurate cases .<br><br>For example, say you're playing a friendly game of basketball with your buddies. When sizing up an opponent on the court to decide whether you or someone else should guard him, you might base your decision on the opponent's height and dexterity. You might decide the opponent is tall and quick, and therefore, you'd be better off guarding someone else. Or perhaps you'd say he is very tall but somewhat slow, so you might do fine against him. You normally wouldn't say to yourself something such as, "He's 6 feet 5.5 inches tall and can run the length of the court in 5.7 seconds."<br><br>Fuzzy logic enables you to pose and solve problems using linguistic terms similar to what you might use; fuzzy logic enables you to think as you normally do while using very precise tools such as computers.<br><br>For more info in game programming, I suggest you read<br>Programming Game AI by Example by Mat Buckland ISBN: 1556220782 "<br><br>My code implements the example of<br>Chapter 10: Designing for FLV weapon selection "<br><br>The code has nothing graphic, he is sober.<br><br><a href="http://www.box.net/shared/3dvkszddj0" target="_blank">http://www.box.net/shared/3dvkszddj0</a><br><br>patmaba <br><br></td></tr></table><br>
<a name="1006734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice work<br><br>i haven't time to read all that book yet (and understand it). seems that you implement the fussy class presented in chapter 10, isn't it?<br><br>thank's<br><br>Juan <br><br></td></tr></table><br>
<a name="1006797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanx<br><br>have you tested ?<br><br>i appreciate feedback :) <br><br></td></tr></table><br>
<a name="1006803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, simply load and run ok but as i say, no time to read the entire book.<br>say that run isn´t much help, let me read some and see whats you have done.<br><br>i'll try to test it more seriously<br>Juan <br><br></td></tr></table><br>
<a name="1006856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thnks Charrua<br><br>If anyone can test and give feedback  please ?<br><br>Pat <br><br></td></tr></table><br>
<a name="1007016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br>first: so much work! congratulations<br><br>in general it seems that you have implemented a whole fuzzy system<br><br>are you planning to implement other functions to calculate the final crisp value other than Centroid? Average of Maxima seems to be less time consuming, because the "representative value" should be given as a parameter or precalculated based on the shape of the fuzzy set itself, isn't it?<br><br>dont't know if it worth the effort to add Very and Farirly hedges. What do you think?<br><br>let me do some tests to see what happens with other values, i'm thinking in do a loop wiht values in the domain to get the values returned by your Membership functions to do a graphical represetation, (i saw better a graph than a table of results...)<br><br>should it be helpful that you write a simple demo wiht simple usage instructions (because fuzzy situations are almost every where), i think that should be a great contrubution to the comunity<br><br>Juan <br><br></td></tr></table><br>
<a name="1007050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, creating a function to graph the fuzzysets in a fuzzyvariable i started with a modification of the FuzzyCentroyd because it iterates over all the sets defined for a particular fuzzyvariable and, modifying the p_fStepFactor i could reach more samples to plot. I think i encounter a bug!<br><br>if i'm not wrong, the last value to try should be MaxBound or MinBound+l_diff, as you like. When i do my firs version I Saw that the graph didn't reach the end of the domain<br><br>For i#=p_fzv\MinBound To p_fzv\MinBound+l_diff#	;&gt;&gt;&gt;&gt;&gt; modificacion!!!!<br>;For i#=p_fzv\MinBound To l_diff#				;old one<br><br>here is your sample code with a function that graphs the variables, please correct the code in the "inc_fuzzy.bb" if you think that my sugestion is ok<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ------------------------------------
; Main Code
; Demo fuzzy logic 
; author patmaba
; mail: patmaba@...
; date 2010 01 15
; modified 
; When			What				comment
; 2001/01/16	       Comment on desirability	bad comment on desirability 
;									thx bobysait to find this 
; ------------------------------------

Include "Inc_Fuzzy.bb"
Include "Inc_TMap.bb" 
 
Graphics 800,600,16,2 
Cls  
Locate 0,1 
Print "Example applyed in blitz, come from following Book" 
Print " Programming Game AI by Example by Mat Buckland  ISBN:1556220782" 
Print " Chapter 10 Designing FLV for weapon selection " 
Print " " 
 
; ================================================================== 
; Defining the FLV's 
; FLV Mean Fuzzy linguistic variable 
; ================================================================== 
 
; Input Variable
Global DistanceToTarget.TFuzzyVariable   = CreateFuzzyVariable( "DistanceToTarget" )
Global AmmoStatus.TFuzzyVariable         = CreateFuzzyVariable( "AmmoStatus" )

; Output Variable 
Global Desirability.TFuzzyVariable 		 = CreateFuzzyVariable( "Desirability" )



; ------------------------------------------------------------------ 
; Designing the Distance to Target FLV 
; ------------------------------------------------------------------ 
; distance of the player and enemy is the domain and contain 3 value 
; Fuzzy linguistic variable 
; CLOSE Domain = [25..150] 
; MEDIUM Domain = [25..150...300] 
; FAR Domain = [150..300] 
; ------------------------------------------------------------------ 
; Describe the Set{close,medium,far} of first Input fuzzy vaiable 'DistanceToTarget'
Global close.TFuzzySet  = CreateFuzzySet_ReverseGrade( DistanceToTarget, "CLOSE", 25.0, 150.0,0 )
Global medium.TFuzzySet = CreateFuzzySet_Triangle( DistanceToTarget, "MEDIUM", 25.0,150.0,300.0 )
Global far.TFuzzySet    = CreateFuzzySet_Grade( DistanceToTarget, "FAR", 150.0,300.0 )


; ------------------------------------------------------------------ 
; Designing the Distance to Target FLV 
; ------------------------------------------------------------------ 
; Ammo Status is the domain and contain 3 value. 
; LOW Domain range (0.0, 10.0)  
; OKAY Domain range (0.0, 10.0, 30.0) 
; LOADS Domain range (10.0, 30.0) 
; ------------------------------------------------------------------ 
Global low.TFuzzySet   = CreateFuzzySet_ReverseGrade( AmmoStatus, "LOW", 0, 10.0 )
Global okay.TFuzzySet  = CreateFuzzySet_Triangle( AmmoStatus, "OKAY", 0,10.0,30.0)
Global loads.TFuzzySet = CreateFuzzySet_Grade( AmmoStatus, "LOADS", 10.0,30.0)


; ----------------------------------------------------------------------- 
; Designing the Desirability for final choice, It's the output
; ----------------------------------------------------------------------- 
; Desirability is the domain and contain 3 value. 
; UNDESIRABLE Domain range (50.0, 25.0,0)  
; DESIRABLE Domain range (25.0, 50.0, 75.0) 
; VERY_DESIRABLE Domain range (50.0, 75.0,100.0) 
; ------------------------------------------------------------------ 

;Global undesirable.TFuzzySet    = CreateFuzzySet_ReverseGrade( Desirability, "UNDESIRABLE", 50.0, 25.0,0 )
Global undesirable.TFuzzySet    = CreateFuzzySet_ReverseGrade( Desirability, "UNDESIRABLE", 25.0, 50.0,0 )
Global desirable.TFuzzySet      = CreateFuzzySet_Triangle( Desirability, "DESIRABLE", 25.0, 50.0, 75.0 )
Global very_desirable.TFuzzySet = CreateFuzzySet_Grade( Desirability, "VERY_DESIRABLE", 50.0, 75.0,100 )


; ================================================================== 
; Defining the FLV's 
; ================================================================== 
; ------------------------------------------------------------------ 
; Designing the Ammo Status FLV 
; ------------------------------------------------------------------ 
Global Input_Distance# = 200 


Print "Input distance of the player and enemy is " + Input_Distance# 
Print "My Fuzzy linguistic variables(FLV) is DistanceToTarget can be close, medium and far" 
Print " CLOSE =" + FuzzyCalculateDOM#( close, Input_Distance )
Print " MEDIUM=" + FuzzyCalculateDOM#( medium, Input_Distance )
Print " FAR  =" + FuzzyCalculateDOM#( far, Input_Distance ) 

Print " "

Global Input_Ammo# = 8

Print "My Fuzzy second FLV is Ammo Status can be low, okay and loads" 
Print "Input Power level of the player is " + Input_Ammo# 

Print " LOW   = " + FuzzyCalculateDOM( low, Input_Ammo# )
Print " OKAY  = " + FuzzyCalculateDOM( okay, Input_Ammo# ) 
Print " LOADS = " + FuzzyCalculateDOM( loads, Input_Ammo# ) 
Print " "  
 
 
 
Print "List All Business Rules" 
Print "-----------------------" 
 
;If Target_Far And Ammo_Loads Then Desirable  
;If Target_Far And Ammo_Okay Then Undesirable  
;If Target_Far And Ammo_Low Then Undesirable  
;If Target_Medium And Ammo_Loads Then VeryDesirable  
;If Target_Medium And Ammo_Okay Then VeryDesirable  
;If Target_Medium And Ammo_Low Then Desirable  
;If Target_Close And Ammo_Loads Then Undesirable  
;If Target_Close And Ammo_Okay Then Undesirable  
;If Target_Close And Ammo_Low Then Undesirable  
 
;Rule 1.  
Print "If Target_far    And Ammo_Loads -&gt; desirable      = " + FuzzyAND(  far, loads ) 
FuzzyRule( FuzzyAND(  far, loads ), desirable ) 

;Rule 2.  
;If Target_Far And Ammo_Okay Then Undesirable = FuzzyAND(  Target_Far, Ammo_Okay )  
Print "If Target_Far    And Ammo_Okay  -&gt; Undesirable    = " + FuzzyAND(  far, okay )  
FuzzyRule( FuzzyAND(  far, okay ), undesirable ) 

;Rule 3.  
;If Target_Far And Ammo_Low Then Undesirable = FuzzyAND(  Target_Far, Ammo_Low )  
Print "If Target_Far    And Ammo_Low   -&gt; Undesirable    = " + FuzzyAND(  far, low )  
FuzzyRule( FuzzyAND(  far, low ), undesirable ) 

;Rule 4.  
;If Target_Medium And Ammo_Loads Then VeryDesirable = FuzzyAND(  Target_Medium, Ammo_Loads ) 
Print "If Target_Medium And Ammo_Loads -&gt; VeryDesirable  = " + FuzzyAND(  medium, loads ) 
FuzzyRule( FuzzyAND( medium, loads ), very_desirable ) 

;Rule 5.  
;If Target_Medium And Ammo_Okay Then VeryDesirable = FuzzyAND(  Target_Medium, Ammo_Okay )  
Print "If Target_Medium And Ammo_Okay  -&gt; VeryDesirable  = " + FuzzyAND(  medium, okay )  
FuzzyRule( FuzzyAND( medium, okay ) , very_desirable ) 

;Rule 6.  
;If Target_Medium And Ammo_Low Then Desirable = FuzzyAND(  Target_Medium, Ammo_Low )  
Print "If Target_Medium And Ammo_Low   -&gt; Desirable      = " + FuzzyAND(  medium, low )  
FuzzyRule( FuzzyAND( medium, low ) , desirable ) 

;Rule 7.  
;If Target_Close And Ammo_Loads Then Undesirable = FuzzyAND(  Target_Close, Ammo_Loads ) 
Print "If Target_Close  And Ammo_Loads -&gt; Undesirable    = " + FuzzyAND(  close, loads ) 
FuzzyRule( FuzzyAND( close, loads ) , undesirable ) 

;Rule 8.  
;If Target_Close And Ammo_Okay Then Undesirable = FuzzyAND(  Target_Close, Ammo_Okay )  
Print "If Target_Close  And Ammo_Okay  -&gt; Undesirable    = " +  FuzzyAND( close, okay )  
FuzzyRule( FuzzyAND( close, okay ) , undesirable ) 

;Rule 9.  
;If Target_Close And Ammo_Low Then Undesirable = FuzzyAND(  Target_Close, Ammo_Low )  
Print "If Target_Close  And Ammo_Low   -&gt; Undesirable    = " + FuzzyAND(  close, low )  
FuzzyRule( FuzzyAND( close, low ) , undesirable ) 
 
Print " " 

 
Print "Lists the inferred conclusions of applying the values of distance to target = "+Input_Distance#+" And " 
Print "---------------------------------------------------------------------------------------" 
Print "ammo status = "+Input_Ammo#+" To all the rules." 
Print "----------------------------------" 

Print "Desirability.DESIRABLE=" + desirable\Confidence
Print "Desirability.UNDESIRABLE=" + undesirable\Confidence
Print "Desirability.VERY_DESIRABLE=" + very_desirable\Confidence
Print 
Print "Desirability Crisp value = "+ FuzzyCentroid(Desirability)
Print 


WaitKey
FlushKeys
Cls

;Print "Distance to target range: "+DistanceToTarget\MinBound + " .. "+DistanceToTarget\MaxBound
;Print "Ammo Status range       : "+AmmoStatus\MinBound + " .. "+AmmoStatus\MaxBound

xOffs=10
yOffs=10
xRange=300
yRange=100

Line xOffs,yOffs,xOffs,yOffs+yRange	;vertical Y axis
Line xOffs,yOffs+yRange,xOffs+xRange,yOffs+yRange	;horizontal x axis

;FuzzyCalculateDOM#( close, Input_Distance )
GraphFuzzyVariable(DistanceToTarget, xOffs, yOffs, yRange)


xOffs=10
yOffs=120
xRange=30
yRange=100

Line xOffs,yOffs,xOffs,yOffs+yRange	;vertical Y axis
Line xOffs,yOffs+yRange,xOffs+xRange,yOffs+yRange	;horizontal x axis

;FuzzyCalculateDOM#( close, Input_Distance )
GraphFuzzyVariable(AmmoStatus, xOffs, yOffs, yRange)


xOffs=10
yOffs=240
xRange=100
yRange=100

Line xOffs,yOffs,xOffs,yOffs+yRange	;vertical Y axis
Line xOffs,yOffs+yRange,xOffs+xRange,yOffs+yRange	;horizontal x axis

;FuzzyCalculateDOM#( close, Input_Distance )
GraphFuzzyVariable(Desirability, xOffs, yOffs, yRange)



WaitKey

FuzzyReleaseAll() 

End


Function GraphFuzzyVariable#( p_fzv.TFuzzyVariable, xOffs, yOffs, yRange)
	
	Local l_diff# = 0.0 	 
	l_diff# = p_fzv\MaxBound - Abs(p_fzv\MinBound)
	
	Local l_val# 

	Local list.TMapList = Null 
	Local node.TNode = Null 
	Local i# =0.0
	Local l_fs.TFuzzySet
	Local l_fDom#=0.0
	Local un_dixiemme_de_diff# = (l_diff * Float(1.0/l_diff))
	DebugLog l_diff
	DebugLog xRange
	DebugLog Float(1.0/xRange)
	DebugLog un_dixiemme_de_diff
	
	xPos=xOffs
	
	For i#=p_fzv\MinBound To p_fzv\MinBound+l_diff#
		If i Mod (un_dixiemme_de_diff#) = 0.0
			
			list.TMapList=MapList(p_fzv\m_mFuzzySet) 
			node.TNode=FirstNode(list) 
			
			While node&lt;&gt;Null 
				yPos=yOffs+yRange
				l_fs = Object.TFuzzySet(NodeValue(node))
				l_fs\Value# =0.0
				
				l_fDom# = FuzzyCalculateDOM( l_fs, i )
				
				Plot xPos+p_fzv\MinBound,yPos-Int(yRange*l_fDom)
				
				node=NextNode(list,node) 
			Wend
			xPos=xPos+1 
		EndIf 
	Next 	
	
End Function 

</textarea><br><br>my brain is exausted for today, i think that should be nice to adjust the for/next in the graph function so the Range of the x axis of the graph should be adjustable. At this time is a function of MinBound and MaxBound and for the AmmoStatus is only 30 units and the graph is very poor.<br><br>the good part is that if the graph work, the Functions you made work and the Centroid do what is supposed to do<br>(if you try my modification, you see no difference in the result, i think is because only 10 points are used to calculate the centroid and the part of the range not included in the for/nex is less than 10%)<br><br>best regards<br><br>Juan <br><br></td></tr></table><br>
<a name="1007340"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua hi,<br><br>Firstly, thanks to spend a little your time to analyze my code.<br><br>About your first comment on a graphic log , I thought but the implementation of the code I hardest. That's why I concentrated on the core code.<br><br>Sure, it will be a real advantage. Your function will be very useful for the first step.<br><br>Your second comment about a bug. I will analyse and re-check my result.<br><br>As always the real problem is filling these gaps, for it takes time to achieve it.<br><br>Charrua, I will try to complete the fuzzy lib.<br><br>If another person have more idea, I am ready to read.<br><br>Yours <br><br>Pat Maba <br><br></td></tr></table><br>
<a name="1007354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are very welcome!<br><br>when i said "simple demo" i didn't have a 3D demo in mind, to make not a tutorial neither a master on fussy logic but simple rules of usage of both your work and the variables initilization, so, it will be useful for one that has none or little knowlegde on fussy logic.<br><br>Step one: define which variables to use, wich are "antecedent" or input, which are "consequent" or output.<br><br>Step two: define the vars and the idea of slope on some ranges defining the shape of slope (what means Triangle and ReverseGrade for example)<br><br>and then wich funtion to call to construct the system and wich to call to get the Fuzzy results.<br><br>no more than that with a simple, very simple demo with some 2D world with dots moving and taking fuzzy desitions, nothing more than that, but as always, probably that is too much. <br><br>My intention is that in this way your work should be good for more than one!<br><br>Juan <br><br></td></tr></table><br>
<a name="1007426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua<br><br>I have begin an implementation of drawing variable "Function DrawFuzzyVariable( p_FzVar.TFuzzyVariable )",<br>only reverse grade, triangle and reverse grade have result.<br><br>Clear, it's not functional but it's a begin.<br><br><pre class=code>
; ------------------------------------
; Main Code
; Demo fuzzy logic 
; author patmaba
; mail: patmaba@...
; date 2010 01 15
; modified 
; When			What				comment
; 2001/01/16	       Comment on desirability	bad comment on desirability 
;									thx bobysait to find this 
; ------------------------------------

Include "Inc_Fuzzy.bb"
Include "Inc_TMap.bb" 

Graphics 800,600,16,2 
Cls  
Locate 0,1 
Print "Example applyed in blitz, come from following Book" 
Print " Programming Game AI by Example by Mat Buckland  ISBN:1556220782" 
Print " Chapter 10 Designing FLV for weapon selection " 
Print " " 

; ================================================================== 
; Defining the FLV's 
; FLV Mean Fuzzy linguistic variable 
; ================================================================== 
 
; Input Variable
Global DistanceToTarget.TFuzzyVariable   = CreateFuzzyVariable( "DistanceToTarget" )
Global AmmoStatus.TFuzzyVariable         = CreateFuzzyVariable( "AmmoStatus" )

; Output Variable 
Global Desirability.TFuzzyVariable 		 = CreateFuzzyVariable( "Desirability" )



; ------------------------------------------------------------------ 
; Designing the Distance to Target FLV 
; ------------------------------------------------------------------ 
; distance of the player and enemy is the domain and contain 3 value 
; Fuzzy linguistic variable 
; CLOSE Domain = [25..150] 
; MEDIUM Domain = [25..150...300] 
; FAR Domain = [150..300] 
; ------------------------------------------------------------------ 
; Describe the Set{close,medium,far} of first Input fuzzy vaiable 'DistanceToTarget'
Global close.TFuzzySet  = CreateFuzzySet_ReverseGrade( DistanceToTarget, "CLOSE", 150.0, 25, 0 )
Global medium.TFuzzySet = CreateFuzzySet_Triangle( DistanceToTarget, "MEDIUM", 25.0,150.0,300.0 )
Global far.TFuzzySet    = CreateFuzzySet_Grade( DistanceToTarget, "FAR", 150.0,300.0,325.0 )

Print "DistanceToTarget Min=" + DistanceToTarget\MinBound + "   Max=" + DistanceToTarget\MaxBound

; ------------------------------------------------------------------ 
; Designing the Distance to Target FLV 
; ------------------------------------------------------------------ 
; Ammo Status is the domain and contain 3 value. 
; LOW Domain range (0.0, 10.0)  
; OKAY Domain range (0.0, 10.0, 30.0) 
; LOADS Domain range (10.0, 30.0) 
; ------------------------------------------------------------------ 
Global low.TFuzzySet   = CreateFuzzySet_ReverseGrade( AmmoStatus, "LOW", 0, 10.0 )
Global okay.TFuzzySet  = CreateFuzzySet_Triangle( AmmoStatus, "OKAY", 0,10.0,30.0)
Global loads.TFuzzySet = CreateFuzzySet_Grade( AmmoStatus, "LOADS", 10.0,30.0)
Print "AmmoStatus Min=" + AmmoStatus\MinBound + "   Max=" + AmmoStatus\MaxBound

; ----------------------------------------------------------------------- 
; Designing the Desirability for final choice, It's the output
; ----------------------------------------------------------------------- 
; Desirability is the domain and contain 3 value. 
; UNDESIRABLE Domain range (50.0, 25.0,0)  
; DESIRABLE Domain range (25.0, 50.0, 75.0) 
; VERY_DESIRABLE Domain range (50.0, 75.0,100.0) 
; ------------------------------------------------------------------ 
Global undesirable.TFuzzySet    = CreateFuzzySet_ReverseGrade( Desirability, "UNDESIRABLE", 50.0, 25.0, 0 )
Global desirable.TFuzzySet      = CreateFuzzySet_Triangle( Desirability, "DESIRABLE", 25.0, 50.0, 75.0 )
Global very_desirable.TFuzzySet = CreateFuzzySet_Grade( Desirability, "VERY_DESIRABLE", 50.0, 75.0,100 )
Print "Desirability Min=" + Desirability\MinBound + "   Max=" + Desirability\MaxBound


; ================================================================== 
; Defining the FLV's 
; ================================================================== 
; ------------------------------------------------------------------ 
; Designing the Ammo Status FLV 
; ------------------------------------------------------------------ 
Global Input_Distance# = 200 


Print "Input distance of the player and enemy is " + Input_Distance# 
Print "My Fuzzy linguistic variables(FLV) is DistanceToTarget can be close, medium and far" 
Print " CLOSE =" + FuzzyCalculateDOM#( close, Input_Distance )
Print " MEDIUM=" + FuzzyCalculateDOM#( medium, Input_Distance )
Print " FAR  =" + FuzzyCalculateDOM#( far, Input_Distance ) 
 
Print " "  
 
Global Input_Ammo# = 8

Print "My Fuzzy second FLV is Ammo Status can be low, okay and loads" 
Print "Input Power level of the player is " + Input_Ammo# 

Print " LOW   = " + FuzzyCalculateDOM( low, Input_Ammo# )
Print " OKAY  = " + FuzzyCalculateDOM( okay, Input_Ammo# ) 
Print " LOADS = " + FuzzyCalculateDOM( loads, Input_Ammo# ) 
Print " "  
 
 
 
Print "List All Business Rules" 
Print "-----------------------" 
 
;If Target_Far And Ammo_Loads Then Desirable  
;If Target_Far And Ammo_Okay Then Undesirable  
;If Target_Far And Ammo_Low Then Undesirable  
;If Target_Medium And Ammo_Loads Then VeryDesirable  
;If Target_Medium And Ammo_Okay Then VeryDesirable  
;If Target_Medium And Ammo_Low Then Desirable  
;If Target_Close And Ammo_Loads Then Undesirable  
;If Target_Close And Ammo_Okay Then Undesirable  
;If Target_Close And Ammo_Low Then Undesirable  
 
;Rule 1.  
Print "If Target_far    And Ammo_Loads -&gt; desirable      = " + FuzzyAND(  far, loads ) 
FuzzyRule( FuzzyAND(  far, loads ), desirable ) 

;Rule 2.  
;If Target_Far And Ammo_Okay Then Undesirable = FuzzyAND(  Target_Far, Ammo_Okay )  
Print "If Target_Far    And Ammo_Okay  -&gt; Undesirable    = " + FuzzyAND(  far, okay )  
FuzzyRule( FuzzyAND(  far, okay ), undesirable ) 

;Rule 3.  
;If Target_Far And Ammo_Low Then Undesirable = FuzzyAND(  Target_Far, Ammo_Low )  
Print "If Target_Far    And Ammo_Low   -&gt; Undesirable    = " + FuzzyAND(  far, low )  
FuzzyRule( FuzzyAND(  far, low ), undesirable ) 

;Rule 4.  
;If Target_Medium And Ammo_Loads Then VeryDesirable = FuzzyAND(  Target_Medium, Ammo_Loads ) 
Print "If Target_Medium And Ammo_Loads -&gt; VeryDesirable  = " + FuzzyAND(  medium, loads ) 
FuzzyRule( FuzzyAND( medium, loads ), very_desirable ) 

;Rule 5.  
;If Target_Medium And Ammo_Okay Then VeryDesirable = FuzzyAND(  Target_Medium, Ammo_Okay )  
Print "If Target_Medium And Ammo_Okay  -&gt; VeryDesirable  = " + FuzzyAND(  medium, okay )  
FuzzyRule( FuzzyAND( medium, okay ) , very_desirable ) 

;Rule 6.  
;If Target_Medium And Ammo_Low Then Desirable = FuzzyAND(  Target_Medium, Ammo_Low )  
Print "If Target_Medium And Ammo_Low   -&gt; Desirable      = " + FuzzyAND(  medium, low )  
FuzzyRule( FuzzyAND( medium, low ) , desirable ) 

;Rule 7.  
;If Target_Close And Ammo_Loads Then Undesirable = FuzzyAND(  Target_Close, Ammo_Loads ) 
Print "If Target_Close  And Ammo_Loads -&gt; Undesirable    = " + FuzzyAND(  close, loads ) 
FuzzyRule( FuzzyAND( close, loads ) , undesirable ) 

;Rule 8.  
;If Target_Close And Ammo_Okay Then Undesirable = FuzzyAND(  Target_Close, Ammo_Okay )  
Print "If Target_Close  And Ammo_Okay  -&gt; Undesirable    = " +  FuzzyAND( close, okay )  
FuzzyRule( FuzzyAND( close, okay ) , undesirable ) 

;Rule 9.  
;If Target_Close And Ammo_Low Then Undesirable = FuzzyAND(  Target_Close, Ammo_Low )  
Print "If Target_Close  And Ammo_Low   -&gt; Undesirable    = " + FuzzyAND(  close, low )  
FuzzyRule( FuzzyAND( close, low ) , undesirable ) 
 
Print " " 

 
Print "Lists the inferred conclusions of applying the values of distance to target = "+Input_Distance#+" And " 
Print "---------------------------------------------------------------------------------------" 
Print "ammo status = "+Input_Ammo#+" To all the rules." 
Print "----------------------------------" 

Print "Desirability.DESIRABLE=" + desirable\Confidence
Print "Desirability.UNDESIRABLE=" + undesirable\Confidence
Print "Desirability.VERY_DESIRABLE=" + very_desirable\Confidence 
Print 
Print "Desirability Crisp value = "+ FuzzyCentroid(Desirability)
Print 


WaitKey
Cls 
DrawFuzzyVariable( DistanceToTarget )
WaitKey
FuzzyReleaseAll() 
End   


Function DrawFuzzyVariable( p_FzVar.TFuzzyVariable )
	Local l_yLow = 300
	Local l_yHigh = 200
	Local l_xMin=100
	Local l_yMin=l_yLow
	
	Local l_xMax=500
	Local l_yMax=l_yLow
	Line l_xMin,l_yMin,l_xMax,l_yMax
	
	Local list.TMapList=MapList(p_FzVar\m_mFuzzySet) 
	Local node.TNode=FirstNode(list) 
	Local l_val = 0.0
	Local l_fs.TFuzzySet
	
	Local x0,y0,x1,y1,x2,y2,x3,y3
	While node&lt;&gt;Null 
		
		l_fs = Object.TFuzzySet(NodeValue(node))
		If l_fs\Shape = FUZZY_REVERSE_GRADE
			x0=GetXCoord( l_fs\x0, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y0=l_yLow
			Rect x0-2,y0-2,4,4,1
			Text x0,y0-20, l_fs\x0
			
			x1=GetXCoord( l_fs\x1, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y1=l_yHigh
			Rect x1-2,y1-2,4,4,1
			Text x1,y1+10, l_fs\x1
			
			x2=GetXCoord( l_fs\x2, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y2=l_yHigh
			Rect x2-2,y2-2,4,4,1
			Text x2,y2+10, l_fs\x2
			
			x3=GetXCoord( l_fs\x3, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y3=l_yLow
			Rect x3-2,y3-2,4,4,1
			Text x3,y3+10, l_fs\x3
			
			Line x0,y0,x1,y1
			Line x1,y1,x2,y2
		EndIf 
		
		If l_fs\Shape = FUZZY_GRADE
		    Color 200,200,0
			x0=GetXCoord( l_fs\x0, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y0=l_yLow+1
			Rect x0-2,y0-2,4,4,1
			Text x0,y0+10, l_fs\x0
			
			x1=GetXCoord( l_fs\x1, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y1=l_yHigh
			Rect x1-2,y1-2,4,4,1
			Text x1,y1+10, l_fs\x1
			
			x2=GetXCoord( l_fs\x2, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y2=l_yHigh
			Rect x2-2,y2-2,4,4,1
			Text x2,y2-20, l_fs\x2
			
			
			Line x0,y0,x1,y1
			Line x1,y1,x2,y2
		EndIf 
		
		If l_fs\Shape = FUZZY_TRIANGLE
			Color 0,200,200		
			x0=GetXCoord( l_fs\x0, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y0=l_yLow+1
			Rect x0-2,y0-2,4,4,1
			Text x0,y0+10, l_fs\x0
			
			x1=GetXCoord( l_fs\x1, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y1=l_yHigh
			Rect x1-2,y1-2,4,4,1
			Text x1,y1-20, l_fs\x1
			
			x2=GetXCoord( l_fs\x2, p_FzVar\MinBound, p_FzVar\MaxBound, l_xMin, l_xMax )
			y2=l_yLow
			Rect x2-2,y2-2,4,4,1
			Text x2,y2+10, l_fs\x2
			
			Line x0,y0,x1,y1
			Line x1,y1,x2,y2
			
		EndIf 
		
		node=NextNode(list,node) 
	Wend 
	
	
End Function 

Function GetXCoord( p_fVal#, p_fMinVal#, p_fMaxVal#, p_ixMin, p_ixMax )
	Local l_fDistMinMaxVal# = Abs(p_fMaxVal#) + Abs(p_fMinVal#)
	Local l_fVal# = (((p_ixMax-p_ixMin)/l_fDistMinMaxVal#)*p_fVal#)+p_ixMin
	Return Int(l_fVal#) 
End Function 
 
</pre> <br><br></td></tr></table><br>
<a name="1007444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> the look is great!<br><br>may i ask why you don't use the functions that actually work in the lib to get the Y axis?<br><br>i modify the centroid funtion and in this way i realize that the correct functions are called and they return the correct values.<br><br>In the way you are writing the Draw funtion you have to rewrite a func to return the value depending on the shape, chances are that the graph and the function retruns different values, or, if a modification will be made, then it will be made on 2 places instead of one.<br><br>i supose you know that and you have a reason for doing that this way.<br><br>(hope you understandme, my englis is so and so)<br><br>Juan <br><br></td></tr></table><br>
<a name="1009278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua<br><br>my code is update for a new debug mode<br>It's no complet but a first approach.<br><br>I need your feedback please.<br><br>last code here :http://www.box.net/shared/3dvkszddj0 <br><br></td></tr></table><br>
<a name="1009281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Charrua<br><br>my code is updated for a new debug mode<br>It's no complet but a first approach.<br><br>I need your feedback please.<br><br>Now, i'm using svg.<br><br><a href="http://www.box.net/shared/3dvkszddj0" target="_blank">http://www.box.net/shared/3dvkszddj0</a> <br><br></td></tr></table><br>
<a name="1009294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi again!<br>i'm sorry but i'm getting a White screen when i suposse the graphs will appear (after a key press).<br><br>Juan <br><br></td></tr></table><br>
<a name="1009296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> i see the *.svg files with Safari (web browser from apple, you know it?)<br>and are exelent ones! but only a white screen from blitz. <br>Juan <br><br></td></tr></table><br>
<a name="1009428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >patmaba</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> a white screen ? humm. i don't know why. I will seek.<br><br>but yes the result are svg file to watch their definitions. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
