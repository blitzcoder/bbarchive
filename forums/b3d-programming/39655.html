<!DOCTYPE html><html lang="en" ><head ><title >Texture specular highlights</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Texture specular highlights</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Texture specular highlights</a><br><br>
<a name="442541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone done anything like this.  I can think of a number of ways (From <a href="http://www.andrew.darst.net" target="_blank">Spacechimp's</a> site):<br><img src="http://www.andrew.darst.net/mat.jpg"> <br><br></td></tr></table><br>
<a name="442559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Loki_uk did this over at blitzcoder. The whole thing kind of disappeared though.<br>Pretty sure he just used two layers - a sphere-mapped light layer, and a specular map layer on top. Not the best method probably, but it works for simple uses.<br><a href="http://www.blitzcoder.com/cgi-bin/ubb-cgi/postdisplay.cgi?forum=Forum14&amp;topic=001492" target="_blank">http://www.blitzcoder.com/cgi-bin/ubb-cgi/postdisplay.cgi?forum=Forum14&amp;topic=001492</a> <br><br></td></tr></table><br>
<a name="442581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Uber Lieutenant</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yea, Loki accomplished this a while ago, but either his technique is simpler or it was just never put to practical use like this example. Excellent work, Halo (as usual)! <br><br></td></tr></table><br>
<a name="442584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't do anything. <br><br></td></tr></table><br>
<a name="442597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> HAHHAHAHA!<br>Shame, shame, shame. <br><br></td></tr></table><br>
<a name="442642"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you can use a greyscale cubemap to generate the highlight areas, then put the mask atop that. that would at least generate the specular highlights as intended<br><br>I'd imagine something like this:<br><br>texturelayer 0 = a color cubemap used to calculate surface normals for DOT3 (setcubemode 2, blending with multiply on a white fullbright model)...can also be done through verticy coloring, or even a seperate "light map" containing normals converted to colors<br><br>texturelayer 1 = the normal map DOT3 blending...see this thread: <a href="http://www.blitzbasic.com/Community/posts.php?topic=39353" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=39353</a> which has my normalmapped animated mesh example that used cubemaps <br><br>texturelayer 2 = a color cubemap (setcubemode 2, multiply or mod2 blending) to generate the effect of colored lighting (agin see how that works in the link above)...this could also be a conventional "lightmap"...or not used at all<br><br>Texturelayer 3 = normal diffuse color layer<br><br>Texturelayer 4 = a greyscale cubemap for spectral highlights (setcubemode 1 or even 3, additive blending)...either store in a file or modified when loading by reduceing the brightness to half or less...basicly no RGB color value greater then 127 ...basicly you want this to be pretty dark (may have to play a bit with how dark it should be)<br><br>texturelayer 5 = the greyscale spectoral highlight mask (multiply blending)...again like the cubemap...either store it in a file or modify it at runtime so no RGB color value is less then 127...basicly you want this to be fairly bright (again, you would likely half to play with it a bit)<br><br>colors are in the range of 0 to 1.0 on the GFX card...which can work to your advantage...as long as you realise that anything over 1.0 is truncated, you can use the textureblending settings to do all sorts of things.<br><br>say you have a RGB color value of 32,32,32 (or about .125,.125,.125) a very dark grey...the spectoral highlight cubemap has an RGB pixel color of 8,8,8 (or .03125,.03125,.03125) at that particular pixel location when rendered...as the cube map is additve blended the result would be an RGB value of about 40,40,40 (.125 + .03125 = .15625)...then the spectoral mask is multiplied atop that...say the RGB pixel color at that location is 235,235,235 (or about .9179688,.9179688,.9179688) and the resulting RGB color would be about 37,37,37 (.9179688 * .15625 = .1434326) slightly brighter then before..which might be exactly what you want...on the other hand if you didn't want that particular pixel to be brightened at all, effectively remaining the same 32,32,32 RGB color...if the spectoral mask RGB color for that location were 209,209,209 or .81641,.81641,.81641) then multiplying it with .15625 (the surface grey with the additve blended spectoral highlight) results in .127564 or RGB values of about 32,32,32 takeing you right back to where you started...which again, might just be what you wanted.<br><br>The darker the spectoral cubemap and the lighter the spectoral mask, the more subtle the effect...at least in theory :P <br><br></td></tr></table><br>
<a name="442761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't think of any way to make a spectral highlight cubemap that will look right.  What you want is a light that kind of follows you around, and cubemaps would just look like a skybox in the wall, or else a weird stretchy shiny metallic reflection. <br><br></td></tr></table><br>
<a name="442793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, cubemaps can look like reflections...but thier ability to do so is exactly what you want.<br><br>spectral highlights occur due to the light from a strong lightsource being reflected off the surface directly into the camera and/or viewers eyes.<br><br>say you have a nightime skybox with a full moon in it...the spectral highlight cubemap would be completely black, except for the moon...then additvely applying this cubemap to the ground (setcubemode 1 ... see: <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=SetCubeMode&amp;ref=3d_a-z" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=SetCubeMode&amp;ref=3d_a-z</a> ) it would produce the desired effect.<br><br>this is because setcubemode 1 gives the illusion of depth when moveing...load a level mesh into blitz, load a cubemap, setcubemode 1 and apply it to the mesh...then move around, bits of the cubemap will seem to travel with you...just like your discription of setting up a light to follow the camera around.<br><br>setcubemode 2 doesn't work that way, re-run the same level mesh and cubemap, changeing the cubemode...and the result looks a bit like lightmapping...as you move around the cubemap highlights and such stay planted in place...<br><br>try it again with setcubemode 3, which has a completely different effect. <br><br></td></tr></table><br>
<a name="442871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I am saying is you want that light-traveling-with-you look, but there is no way to do that where the light will appear correct for all orientations a surface might be. <br><br></td></tr></table><br>
<a name="442873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I am saying is you want that light-traveling-with-you look, but there is no way to do that where the light will appear correct for all orientations a surface might be.<br><br>It's easier just to map a sphere hightlight on the wall and update texture position as you move the camera. <br><br></td></tr></table><br>
<a name="442906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, should i be able to multitexture when using a cubemap? if so, my current drivers are fooooooooooxxored <br><br></td></tr></table><br>
<a name="445996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >@rtur</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did someone cracked this? <br><br></td></tr></table><br>
<a name="446001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> From extensive research(yeah, research..) playing counsterstrike source, It appears the specular map is projected from the centre of the camera position, using a 3dsquare projection that is not dependent on the view.<br><br>Which suggests a cube map that is not being tex-gened from the entity's model viewmatrix, but is actually using the cameras positional matrix(Not rotation, otherwise it would warp when the camera turned), probably feed into a vertex/pixel shader. (You can pass 4x4 matrix pars, so doesn't matter if it's a built in feature, it's still possible.) <br><br></td></tr></table><br>
<a name="446036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >@rtur</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;Texturelayer 4 = a greyscale cubemap for spectral highlights (setcubemode 1 or even 3, additive blending)...either store in a file or modified when loading by reduceing the brightness to half or less...basicly no RGB color value greater then 127 ...basicly you want this to be pretty dark (may have to play a bit with how dark it should be) <br><br><br>Can someone give example of this cubemap,please?<br>Cubemap will be better than sphere hightlight for car, imfo... <br><br></td></tr></table><br>
<a name="446039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> [quote]From extensive research(yeah, research..) playing counsterstrike source, It appears the specular map is projected from the centre of the camera position, using a 3dsquare projection that is not dependent on the view.<br><br>Which suggests a cube map that is not being tex-gened from the entity's model viewmatrix, but is actually using the cameras positional matrix(Not rotation, otherwise it would warp when the camera turned), probably feed into a vertex/pixel shader. (You can pass 4x4 matrix pars, so doesn't matter if it's a built in feature, it's still possible.)[quote]<br><br><br>Exactly.  I think you would get better results just using a circular gradient texture and mapping it yourself, like what I did in one demo before CubeMapping came out.<br><br>Play some Doom 3, and you will see a circle like this following you around on the walls. <br><br></td></tr></table><br>
<a name="446073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I kind of did it in a test terrain using 2 layers aof geometry and some multitexturing between the two. An example can be seen here:<br><br><a href="http://s93153354.onlinehome.us/rot.wmv" target="_blank">http://s93153354.onlinehome.us/rot.wmv</a><br><br>doesn't have the detail, and you will probably have alpha problems but it still looks cool. About 512k in WMV format <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
