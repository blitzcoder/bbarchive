<!DOCTYPE html><html lang="en" ><head ><title >compare if two images are equal</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >compare if two images are equal</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >compare if two images are equal</a><br><br>
<a name="1068703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pixel per pixel solution? or there are other algorithm? <br><br></td></tr></table><br>
<a name="1068723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pixel by pixel....can't think of any other algorithm.<br><br>However do you want to know if two images are exactly equal, or if the color differences are less than a certain amount....ie if two images are 'similar'. <br><br></td></tr></table><br>
<a name="1068827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you know what possibility differences may be, i.e. if they're restricted to certain colour values or resolution you can check just for those differences.<br><br>If the images are loaded from a file, you might get somewhere with an MD5 check<br><br>Otherwise, I guess pixel by pixel is the only real wayto ensure complete parity. <br><br></td></tr></table><br>
<a name="1068844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MCP</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pixel by pixel comparison isn't really a feasible solution when dealing with this kind of problem. As an example imagine taking two photos  of the same scene...<br>One is taken during the day.  The other at night. Both show the same image but all the lighting has changed.<br>The pixel comparitor will fail even with a generous tolerance setting. This will be true even for rendered scenes.<br><br>The only workable way I can think of is to run both images through an edge detection algorythm.  The edges can be easily converted to 2d vectors.  These vectors can be rescaled and repositioned so that they can be 'overlayed' over the vector positions of the 2nd image.<br>A comparision an then be made with a tolerence setting to see how many these vectors match each other in terms of position an orientation ( Even the 'shape' these vector sets create can be taken into consideration ).<br>With this technique it should be possible for the computer to match two images showing the same scene with differing light levels and will even eliminate camera shake.... in theory. <br><br></td></tr></table><br>
<a name="1068849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> MCP - those two picture would not be "equal" in this sense they might be of the same thing but would not be equal.<br><br>The original question needs more detail, what do you mean by equal? <br><br></td></tr></table><br>
<a name="1068984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree, night and day pictures are really something diffrent. There may be a need for such a detection in certain programs, but basicly I think what makes sense is an image comparation that is able to detect higly similar images, eg: one is JPG and one is a PNG from the same original: pixels won't be the same, but it might look almost identic to the human eye. A tolerance setting is required.<br><br>I would suggest to sample the pixels blockwise, eg. in bocks of 8x8 pixels. then add the total red, green and blue of such a bock. Finally compare the results with a certain tolerance. You may also use 2 images with a diffrent size, just adjust the block size. This way an image will be recognized even if it was sharpened or resized before.<br>To make this faster you may use it as a texture on a quad, position it in front of the camera to get the right size after a renderworld (regardless of image size), then compare the two renders, again with tolerance.<br><br>If you only want to test if they are the same files with a diffrent name, load them as a bank and do a checksum test, that's much faster than readpixelfast. <br><br></td></tr></table><br>
<a name="1069086"></a>

<a name="1069087"></a>

<a name="1069088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; If you only want to test if they are the same files with a diffrent name, load them as a bank and do a checksum test, that's much faster than readpixelfast.<br><br>Or open them as bytestreams and compare the bytes, but the checksum test is 99.999% (or more) accurate.<br><br><br>[edit] - if the files are different types (bmp/gif] then checking pixel by pixel is probably required - they would have very different checksums or byte stream info.<br><br><font class="tiny">Last edited 2011</font><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1069095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you compare the memory sizes of the images in ram wouldn't they be the same? <br><br></td></tr></table><br>
<a name="1070073"></a>

<a name="1070075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> no! i have only image of the same size but it can be useful if it's work with several size.<br><br>My real need is if the image are similar, but i want use the size that is equal because it's for this reason that are equal...(almost the first reason).<br><br>but i must say this, i have several thousands of images, i need to cut from this, some type of image that i don't see with eyes because it is need much time (have like 80000 image for examples, windows is very slowly when open only the directory)..<br><br>yes i need a computer's eye..<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1070330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note: you could use the faster Resize Image source that I posted some years ago in the code archives, then scale the images down to a very small size (in Ram) then compare the small images, this is faster. Unfort my resize function works only with images up to the screen size. But there are further resize image samples, although some of them without filtering.<br><br>I have to say, IF you need to test any picture against any other picture (?), no matter how you do it, with 80000 images this is going to take a while.<br>BTW. it may be suboptimal to have 80'000 images in one directrory, because windows does a lot of file (and esp. images) checking when you open the directory. Maybe put them in 8 sub-folders? Example: My Foto camera is creating a new folder for every 1000 images, there must be a reason why.<br><br>fast resize image:<br><br>mine, with the mentioned limits:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1305" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1305</a><br><br>by sswift:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1303" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1303</a><br><br>by filax:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1503" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1503</a><br><br>So, if you must compare each image aginst any other image, you maybe best create a list of reference images. Every further image that you will test will then have to be compared against this list only.<br><br>Pseudo code:<br><pre class=code>
list_len=0
for n=0 to number_of_images-1
 already_got_this=0
 read image n
 for l=0 to list_len-1
 if image n similar list image l
  already_got_this=1 : exit()
 endif
 next 
 if already_got_this=0
  add image n to list
   list_len=list_len+1
 endif
next 
</pre><br><br>Additionally you could write an info file that contains some information about the images, esp. how similar a certain image is, compared to the similar one in the refrence list. <br><br></td></tr></table><br>
<a name="1070409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps using size as the first test, if it passes that then it takes every size/10 pixel from x &amp; y and analyses it using readpixel fast on some locked image buffers. The chances of two images passing this are pretty slim, -especially- if the images are loaded as JPGs. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
