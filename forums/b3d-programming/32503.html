<!DOCTYPE html><html lang="en" ><head ><title >tokamak physics thread 4</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >tokamak physics thread 4</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >tokamak physics thread 4</a><br><br>
<a name="348403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>to·ka·mak ( P ) Pronunciation Key (tôk-mk, tk-) <br>n.<br>A doughnut-shaped chamber used in fusion research in which a plasma is heated and confined by magnetic fields.<br> <br></div><br>Download Blitz Tokamak: www.freewebs.com/sweenie <br><br>Tokamak Homepage: <a href="http://www.tokamakphysics.com" target="_blank">http://www.tokamakphysics.com</a><br><br>Tokamak Physics Threads: <br><br>www.blitzbasic.co.nz/Community/posts.php?topic=29381 <br>www.blitzbasic.com/Community/posts.php?topic=29680 <br>www.blitzbasic.com/Community/posts.php?topic=30024<br><br>Blitz Tokamak Tutorials<br><br>www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=bot__builder102082004102230.html<br>www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=bot__builder103252004031037.html <br><br></td></tr></table><br>
<a name="349037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is my first time downloading any of the tokamak stuff and when I try to run the samples is says it's missing<br>the toksim_createsimulator function can't be found, where do I get it from? <br><br></td></tr></table><br>
<a name="349057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you put the 'tokamak.decls' and 'tokamakwrapper.dll' files into your Blitz3D -&gt; userlibs folder? Got the tokamakdll.dll file in the same folder as your source code? If not, do so and restart Blitz... <br><br></td></tr></table><br>
<a name="350257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, If you start using tokamak alot, you might as well put tokamakdll.dll in windows\system32. This makes it accessible from anywhere. <br><br></td></tr></table><br>
<a name="350381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> However if distributing game demos, it makes sense to keep both the wrapper dll and the tokamak dll with your game executable.<br><br>This is because we can't forsee what other people will have in their systems - ie a different version of tokamak. <br><br></td></tr></table><br>
<a name="350734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Everything just slides through the floor.  It stops for a while, then sinks into it.<br><br>Are there any issues with scale? <br><br></td></tr></table><br>
<a name="350744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Four important things to remember when using Tokamak.<br><br>* Don't use enormous masses(like 1000 for a 1x1x1 box)<br>* Don't take too big timesteps(the bigger the timestep, the bigger chance of missed collisions)<br>* Always make sure the inertiatensor is set (correctly)<br>* Keep the scale low to avoid floating point errors. <br><br></td></tr></table><br>
<a name="350847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would keeping the scale low avoid floating point errors?  It's just going to be accurate to some number of places, regardless of offset from the decimal point. <br><br></td></tr></table><br>
<a name="350866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry, forget that one... :)<br>I meant not to use to high float values...ahh<br><br>Read this thread instead, it explains it better than I do ;)<br><a href="http://www.tokamakphysics.com/phpbb/viewtopic.php?t=284" target="_blank">http://www.tokamakphysics.com/phpbb/viewtopic.php?t=284</a> <br><br></td></tr></table><br>
<a name="350877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am following the instructions from the terrain tutorial, but  it looks to me like Tokamak DOES NOT support accurate collisions on a "map" type mesh, which is probably why I haven't seen any demos.  The FPS game shown on the site must be constructed completely out of animated bodies (boxes). <br><br></td></tr></table><br>
<a name="350924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >taxlerendiosk</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You obviously haven't seen the one that looks like this then halo?<br><br><img src="http://img1.imageshack.us/img1/2426/tokademo.jpg"> <br><br></td></tr></table><br>
<a name="350930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well is that all one mesh, or did you create a bunch of physics shapes to appoximate the (map) objects? <br><br></td></tr></table><br>
<a name="350935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I said in the other thread, using the code from the car demo program I am using a large racetrack mesh of perhaps 10k polys or so with no problems at all.<br><br>The makeTokcollider function works pefectly. <br><br></td></tr></table><br>
<a name="350938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's good to know.  Thanks. <br><br></td></tr></table><br>
<a name="350994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or, my function library which allows multiple objects, and physics properties based on textures:<br><br><a href="http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1077666832" target="_blank">http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1077666832</a><br><br>You might also want to grab the tokamak command refrence:<br><br><a href="http://www.freewebs.com/botbuilder/TokamakHelp.7z" target="_blank">http://www.freewebs.com/botbuilder/TokamakHelp.7z</a> OR<br><a href="http://www.freewebs.com/botbuilder/TokamakHelp.exe" target="_blank">http://www.freewebs.com/botbuilder/TokamakHelp.exe</a><br><br>(7z is a bit smaller) <br><br></td></tr></table><br>
<a name="351019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh SWEET!<br><br>Thank you!  That fixed the boxes, and fixed some collision errors I was getting.<br><br>I actually ended up using a value of about ten, to get it really accurate at high speeds, and not have those floaty, slow-mo physics. <br><br></td></tr></table><br>
<a name="351381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, it appears that there is no way to make an upright cylinder for the player.  Using a sphere causes objects to go through your head, while constantly righting a cylinder causes collision errors.  Tokamak is presently useless for FPS games.<br><br>I called Havok, and their license fee is at least $100,000! <br><br></td></tr></table><br>
<a name="351487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I figured out a solution.  Set the cylinder intertia tensor to a huge value, so the mass is spread over an enourmous volume.  Forces applied to the center of the object won't create enough torque to rotate it. <br><br></td></tr></table><br>
<a name="351488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried 2 spheres, jointed and positioned vertically? <br><br></td></tr></table><br>
<a name="351493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> How would that be any good?  It's just going to separate them any time you run into a situation where the top and bottom hit different things. <br><br></td></tr></table><br>
<a name="351587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really? Try it and see. The joint will hold the two together. When my 9-object car hits a wall, the body doesn't carry on without the wheels. That's the point of a jointed rigid body system....<br><br>You can also set joint limits to prevent the top sphere moving relative to the bottom, set torques to hold it upright etc...<br><br>Personally I don't see the point of using tokamak for the normal movement part of a FPS. Using it for ragdoll style death anims etc... is fair enough, but not for the generally unrealistic movement required in the average shooter. <br><br>You can try to bully it into working, but a combination approach using normal movement or tokamak where well suited will probably yield the best results. <br><br></td></tr></table><br>
<a name="351761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vorderman - how are you handling breaking for the car, and keeping it from sliding sideways on a slope?<br><br>My car never seems to have enough friction in the world for it. <br><br></td></tr></table><br>
<a name="351813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's difficult to get a nice balance between sliding or not, but I've added a few extra bits -<br><br>At very very low speed the car body has its linear damping increased to stop it slowly sliding around.<br><br>When in midair it has an upwards impulse applied every frame to negate gravity to a certain degree - this allows me to have high normal gravity to keep it on the ground, but still allows the car to make vast jumps in gentle arcs.<br><br>The angular damping of the body is increased dep. upon speed, to allow it to hold in a straight line. This also takes into account the steeringangle, allowing you to fling the car sideways if you want.<br><br>I'm using these friction settings...<br><br><pre class=code>
TOKSIM_SetMaterial 1,6,0.15 	;objects 6,12		3,0.15
TOKSIM_SetMaterial 2,2,0.15		;ground	2,10		3,0.15
TOKSIM_SetMaterial 3,6,0.15		;ground	2,10		3,0.15
</pre><br><br>...for ground objects, and front and rear wheels seperately, allowing me to vary the balance of the car, or create a handbrake effect by decreasing friction on the rear wheels.<br><br>For braking, I'm using a negative torque on the driving wheels, which in this case are primarily the front wheels. The rear wheels can be driven to the certain variable degree to promote oversteer, but primarily front wheel drive gives a nicely balanced car.<br><br>I'm also allowing the player to balance the car in the air by pitching the nose up and down with the throttle and brake, to allow a bit more control. I might introduce a slight steering effect in the air also.<br><br>Note that this lot is for my Stunt Car Racer clone, not for a serious driving sim. <br><br></td></tr></table><br>
<a name="351832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vorderman : I can't wait to see that clone, one of the greatest games ever imho.<br><br>Tokamak seems really good to me.<br>I've got ten landyachts sailing around a course without any trouble. The yachts, sails, ground and environment are all handled by tokamak.<br><br>The landscape is formed from two meshes, an invisible one for passing to the physics, only covers the driveable areas,<br>and a second mesh, visible this time, higher detail and covering a larger area.<br><br>re friction :- They have a degree of sideways slippage on the wheels, i control the amount by factoring the sideways velocity of wheels (after tforming the x,y,z velocities to global, then factoring x and then re-tforming and applying back to the wheel).<br><br>FunkyFrank <br><br></td></tr></table><br>
<a name="352058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> the demo I made awhile back uses a single mesh for the 'world'<br><br>I am almost back...<br>(been working on a huge security project --14 hour days)<br><br>I am kinda waiting for Sweenies next release so I hit the ground with a fresh build.<br><br>I am also working on some Python&gt;blitz3d bindings<br>(could be cool) <br><br></td></tr></table><br>
<a name="352943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> has anyone done a nice car sim yet with Toka?<br><br>Tracer <br><br></td></tr></table><br>
<a name="353083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not that I'm aware of... most people still seem to be fiddling with the basics(myself included). <br><br></td></tr></table><br>
<a name="354854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> After a couple of weeks of testing, I don't think this is very useful for FPS games.  You just can't get all aspects of it working at once.  You either are going through boxes, or the player cylinder is falling over, or the physics are too slow, or something. <br><br></td></tr></table><br>
<a name="355036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to take a different approach and use a combination of normal techniques and tokamak when it suits. Use the normal Blitz system for player movement, bullets etc..., then bring in Tokamak only when a physics based reaction or movement is required, such as a bullet knocking over a barrel. Once the movement is complete the physics is no longed required.<br><br>This is how games that use Havok or similar systems, such as Max Payne 2, Half Life 2 etc.. combine their physics with normal gameplay. There's no way the Max character is simulated with the physics engine, just the objects he hits / moves, and only when required. <br><br></td></tr></table><br>
<a name="355438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes but then the player can't be affected by objects, like a moving door or whatever. <br><br></td></tr></table><br>
<a name="356725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Halo,<br><br>How would you integrate tokamak with for example, BlitzPlay internet lib?<br><br>I take it that multiplayer is still something you've notyet done? I'm interested too. <br><br></td></tr></table><br>
<a name="357061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd just let the sever control all crucial events, and let the client machines control all physics that are just for looks. <br><br></td></tr></table><br>
<a name="357075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> So each client is responsible for it's own physics and just uploads the result?<br><br>The problem here is a bit different from standard FPS stuff - it's all about response. If a response doesn't occur at exactly the right time, they get wildly out of sync. <br><br></td></tr></table><br>
<a name="357111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, physics that actually effect things, and aren't just for show, should be controlled by the server, and the results sent to clients. <br><br></td></tr></table><br>
<a name="359324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't do that, as there would be a noticable lag between action and reaction on the client side. <br>What I'd do is say player A shot a box, that goes flying across the room. Player A calculates the physics for it, and sends a constant force to the server, that ensures the same response happens, this force/impulse is then sent to all other clients. <br>You can optionally send updates to keep it in sync, in case there was a bad bit of lag when it was first 'hit'.<br><br>If you let the server handle all the physics, when player A hits the box, the box won't move until the server has sent a response back the player. This won't be bad in good games, but lag would make the game look very juddery, where as if you do the physics client side it may snap now and then, but it'll be smoothr.<br><br>And imagine the player..you want him to move and push boxes etc out of the way instantly, or you break the natural feel of the gameplay. <br><br></td></tr></table><br>
<a name="359781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice theory but it doesn't work in practise.<br><br>The amount of updates you propose will require it to be a lan-only game. <br><br></td></tr></table><br>
<a name="360178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> You time your updates and use cubic splines to interpolate the incoming values. <br><br>You never send constant data, you create a timer. And once it ticks, you update the server. And the server decides what clients need to be updated.<br>Good method of this is to scale the update frequence from server to client based on distance. Sort of like Network based Level of detail. And when I say distance, I'm talking in terms of visual distance on screen. If player b can barely see player A, there's really no need for player A's psoition to be that accurate in player B's eyes. <br>Also, you can skip updates for off-screen entities all together(With a set safetly margin, to avoid popping)<br><br>So yes, it would work. Don't argue with me, or there will be trouble. Right!? ;) <br><br></td></tr></table><br>
<a name="360179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyway, check out this tutorial Rob, it's great. <br><a href="http://www.bookofhook.com/Article/GameDevelopment/MultiplayerProgramming.html" target="_blank">http://www.bookofhook.com/Article/GameDevelopment/MultiplayerProgramming.html</a> <br><br></td></tr></table><br>
<a name="360625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Otacon, petty neat tips :) I had the idea of lod myself. I guess the rule of thumb is to only send and recieve whats vital.<br><br>I wonder what the buffer sizes are for modems and stuff? <br><br></td></tr></table><br>
<a name="361983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is the plan for TOKAMAK+Blitz<br><br>Does Mark Sibly plan on incorporating it into BMAX?<br><br>Does Sweenie plan on creating a newer wrapper?<br><br>Does Tokamak plan on releasing TOKAMAK 2 anytime soon?<br><br>If anyone has this info, please share. <br><br></td></tr></table><br>
<a name="362052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does Mark Sibly plan on incorporating it into BMAX? <br></div><br>I doubt it.<br><br><div class="quote"> Does Sweenie plan on creating a newer wrapper? <br></div><br>Yes.<br><br><div class="quote"> Does Tokamak plan on releasing TOKAMAK 2 anytime soon?  <br></div><br><br>Hard to say. There hasn't been much visible tokamak activity, but who knows. <br><br></td></tr></table><br>
<a name="363638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, to jump the topic :)<br>ive just uploaded my rag doll demo and im now incorporating it into the game (very easy :D) however, i was wandering how i should go about with water... should i move the rigid bodies as normal but when i move the bones move them between the rigid body and their current position, and then moving the rigid body back to the bone. or just lowering the mass of the rigid body. oooor even-- the water provides a constant upwards force, not quite as strong as gravity? <br><br></td></tr></table><br>
<a name="363746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. A constant upward force would be most physicaly accurate.   If you have the patience to set realistic density values you could make it look even better - basically the force is the density of water divided by the density of the object multiplied by gravity. Even better would be to multiply this by a number between 0 and 1 representing the amount of the rigid body submerged.  As you can see, this force can be greater than gravity (if the object density is less than water), this is how things float.  You're also going to want to make linear and rotational damping alot higher for the rigid body - preferably based on the amount submerged, but doesn't really matter.  Water friction, as you probably know is very dramatic. <br><br></td></tr></table><br>
<a name="363850"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey good post bot :) i'll start off just using a constant upwards force and then try and do those calculations...ek :P <br><br></td></tr></table><br>
<a name="364235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehehe. Yeah. I did alot of research on bouyancy while doing my physics engine.  For games, Your method of constant force should be fine. <br><br></td></tr></table><br>
<a name="365552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OverDozing</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Bot Builder !<br>thank you for the 2 tutorials talking about tokamak wrapper, there is only 2 tutorials and it's from you! damn !<br><br>Then, I am requesting a tutorial for a car physics ???? it would be so interresting, don't you think?<br><br>Thank you anyway for all your work guys ! awesome ! :) <br><br></td></tr></table><br>
<a name="365733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> what does this do?<br><br>* Iteration of existing geometries (TOKRB_BeginIterateGeometry,TOKRB_GetNextGeometry,<br>  TOKAB_BeginIterateGeometry,TOKAB_GetNextGeometry) <br><br></td></tr></table><br>
<a name="365962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe. Thanks. I guess a car tut would be possible. I'd base it of the demo already done, and add some special stuff. Also, check out the command refrence I made for it - <a href="http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1078737396" target="_blank">http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1078737396</a><br><br>Bradford6-<br><br>I bet their similar to the Read dir/nextfile commands in Blitz.  This way you can get all the handles for geometries under the rb by first Begining the Iteration and then Getting the Next Geometry over and over until 0. Note - I have not actually tried them. <br><br></td></tr></table><br>
<a name="366232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea im also for car physics tutorial - currently im workign on making cloth and rope simulations :) Got the water working aswell btw <br><br></td></tr></table><br>
<a name="366330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> BOT,<br>Thanks for the help files. they are great!<br>Sweenie,<br>Thanks again for this awesome set of tools.  (I am now able to spend more time with this...been out of the loop for awhile) <br><br></td></tr></table><br>
<a name="367507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wanted you to know that the Tokamakteam just released version 1.2 of their physicslibrary.<br>I'll start wrapping immediately. :)<br>Major news...<br>* Convex hull collider<br>* Sliderjoint <br><br></td></tr></table><br>
<a name="367539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Judd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one !<br>It's good news, not least because the lack of communication  from the TOKAMAK team led me to suspect they had stopped work.<br>However can't see anything in the release info text file about wheel dynamics stuff (i.e. helping to fix the common friction issues).<br>Hope there is something in there, anyway the slider joint and convex collider hull will be useful as soon as i've figured out just what they do......<br><br>Thanks again for your efforts sweenie.<br><br>Funky Frank <br><br></td></tr></table><br>
<a name="367567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> A convex hull can be used instead of the basic primitives.<br>They included a tool that inputs a list of vertices that you provide and generates a closed convex mesh covering the vertices as tightly as possible.<br><br>Lets say you want a boulder falling down from a hill.<br>You probably would choose the sphereprimitive for this as this is the shape that best fits the boulder.<br>But in real life a boulder wouldn't roll as smoothly as a perfect sphere(unless the boulder is VERY smooth).<br>Instead take your bouldermesh, run it through the convexhull generator and use the resulting hull in Tokamak as the collisionvolume for the boulder. <br><br></td></tr></table><br>
<a name="367579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds great - I'm dying to get to grips with this once I've finished my current project. <br><br></td></tr></table><br>
<a name="367646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> this sounds great. What about the slider joint?  is this something that can be used for a spring/damper? <br><br></td></tr></table><br>
<a name="367720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ice9</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder if the convex hull can be dynamicaly changed.<br>Say a boned convex hull attached to your player model.<br>Or another Idea... Preselect vertices in your mesh and<br>save the indexes. Use this smaller selection as your convex<br>hull then update the convex hull vertice information with<br>each frame.<br><br>slow? or not possible? <br><br></td></tr></table><br>
<a name="367801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> I imagine it would only be calculated once per simulation like the CreateTerrainMesh for the main collision entity. <br><br></td></tr></table><br>
<a name="367845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> so a convex hull can automatically make a precise physics sim object for a game model?<br>Does this mean that there's no need to set up an objects out of boxes except in very special circumstances?<br>Um, how do I run the adjacency tool? <br><br></td></tr></table><br>
<a name="367935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you'll have to wait for Sweeney to get a new wrapper out with these changes.<br><br>the Adjaceny tool takes a list of vertices and creates teh convex hull<br><br>example:<br>4<br>X Y Z<br>X Y Z<br>X Y Z<br>X Y Z<br><br>THE "4" TELLS THE ADJACENCY TOOL HOW MANY VERTS<br>then the 4 lines of coordinates are the actual verts. <br><br></td></tr></table><br>
<a name="368008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check this java-applet.<br>It demonstrates how convex hulls are constructed.<br><a href="http://www.cse.unsw.edu.au/~lambert/java/3d/hull.html" target="_blank">http://www.cse.unsw.edu.au/~lambert/java/3d/hull.html</a> <br><br></td></tr></table><br>
<a name="368015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> @arbitrage:<br><br>I don't think you could modify the hull during simulation, but you should be able to remove the currently used hull and replace it with another hull.<br><br>@dillpickle79:<br><br>Yes, this means that your spaceship could get a better fitting collisionvolume.<br>However, since your spaceship is convex you probably would have to create three hulls.<br>One for the ship's body and two for both wings. <br><br></td></tr></table><br>
<a name="368203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> whats faster - 1 cube with two cylinders, or one really low poly convex hull? <br><br></td></tr></table><br>
<a name="368312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul "Taiphoz"</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a question to those of you using this so far.<br><br>Is there anyone working on a tutorial for this ? .. I know there are some samples and demos but a tutorial to actuall explain some things would be nice.<br><br>Im thinking about using this system for a small game project, it would have to handle collisions between humanoid chars. Im wondering how hard it is to set all this up. <br><br></td></tr></table><br>
<a name="368423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm looking into 'extending' my particle system by adding a little toggle so the particles in it can (optionally) use Tokamak.  Now, because I'm completely ignorant on this subject, I was wondering if someone could help me through the basic steps I'd have to take in order to get it working (properly or not, I'd just like to get it working first)?<br><br>I'm reading Bot Builder's tutorial, but while I'm doing that I'm hoping someone could help me understand what would be required for this and if it's even plausible. <br><br></td></tr></table><br>
<a name="368546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> The convex hull collider sounds great!...  go sweenie go! :) <br><br></td></tr></table><br>
<a name="368764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the whole particle thing is a bit of a kludge from my perspective. the only difference between them iand rigid bodies is that they don't collide with themselves - a rigid particle won't collide with another rigid particle. probably worthless unless you want the particle engine to follow contours etc. <br><br></td></tr></table><br>
<a name="368766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> a rigid particle won't collide with another rigid particle <br></div><br><br>That's a good thing, actually.  Basically, I want them to react 'realistically' with the environment, but they shouldn't interact with themselves. <br><br></td></tr></table><br>
<a name="368777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, yes, but I first thought they might be dumbed down even more (no rotation for instance), making them faster, maybe with some features like emiters and exemption from gravity. <br><br></td></tr></table><br>
<a name="368801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually thought Tokamak-particles would be faster too, but judging from some quick speed tests they aren't much faster than a regular rigidbody.<br>So throwing 2000 particles into the simulation brings the simulation to it's knees and I think a particlesystem should be able to handle alot more particles than that. <br><br></td></tr></table><br>
<a name="368947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> the slowdown has to do with the way blitz handles entities, not the tokamak particles. <br><br>perhaps a single-surface particle system with the tokamak physics particles would work better.<br><br>I have always thought that blitz should have a simple emitter system built-in that does not rely on each particle being a part of the entity system. maybe an emitter entity with attributes that affect the particles it generates. <br><br></td></tr></table><br>
<a name="369273"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I've added basic Tokamak 'support' to <a href="http://s87776868.onlinehome.us/Lotus/" target="_blank">my particle system</a> if anyone wants to mess around with it or has any suggestions on how I can improve the way Tokamak is being used by it.<br><br>Bradford: Even with a single surface system this occurs.  I've done the tests- anything over thousand Tokamak particles can and will make everything hideously slow.<br><br>[complete ignorance]<br>As an example, I made <a href="http://s87776868.onlinehome.us/stuff/TokaTest.bb" target="_blank">this</a> to test how well Tokamak handles particles, as far as I'm concerned it's doing a pretty good job for a thousand or so, but the rigid particles would have to be carefully limited in order to make it work well. [/complete ignorance] <br><br></td></tr></table><br>
<a name="369359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Noel, had a look at your PS but the test code couldn't find function:<br><br>SetEmitterUsesTokamak <br><br></td></tr></table><br>
<a name="369466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sunteam: The Tokamak version of the code is 'disabled' by default- you have to change an include in 'h_lotus.bb' to make it work. <br><br></td></tr></table><br>
<a name="381186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tokamak is dead. Long live Tokamak... <br><br></td></tr></table><br>
<a name="381189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Riiiiiiiiiiiiiiiiiiiiiii... <b>TWO HOURS LATER</b> ...iiiiiiiiiight. <br><br></td></tr></table><br>
<a name="381331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehe. you're just in the wrong forum....<br><br><a href="http://playerfactory.proboards25.com/" target="_blank">http://playerfactory.proboards25.com/</a><br><br>900 posts and rising <br><br></td></tr></table><br>
<a name="381343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Version 0.6 of the wrapper is almost done.<br>I'm just having some trouble with the convex-mesh collision.<br>I get an error as soon as the mesh collides with another body.<br>But I know it's a bug somewhere in the wrapper because the Tokamaksample 3 uses it without problems. <br><br></td></tr></table><br>
<a name="381954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, hooray!<br>I can't wait for convex hulls :D <br><br></td></tr></table><br>
<a name="381988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, It wasn't exactly a bug.<br>I thought that I were supposed to pass the binaryfile data straight to Tokamak with the SetConvexMesh function and I did.<br>However after getting a crash everytime the convex collided I checked the Tokamaksample.<br>Turned out that I needed to extract the verts, faces &amp; edges from the binfile and put them in a certain order.<br>Luckily for me, the Tokamak samplebase already had a premade function for doing that.<br>Works like a charm now.<br>Then I noticed that the convex mesh didn't collide with spheres, and after reading the changelog I realized that it won't.<br>Convex-Convex, Convex-Box and Convex-Terrain collision are implemented but not Convex-Sphere.<br><br>So, only breakage left now, but I will release wrapper 0.6 before implementing breakage. <br><br></td></tr></table><br>
<a name="382104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mac M</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds cool!!<br>I can't wait to see convex hulls in action...<br>And breakage too!<br><br>Thanks Sweenie<br><br>BTW: Any example or idea using tokamak with water? <br><br></td></tr></table><br>
<a name="382153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> BTW: Any example or idea using tokamak with water? <br></div><br><br>Here is a demo with faked buoyancy<br>[Edit]<br>I improved it a bit.<br>Fixed inertiatensor and added rotationaldamping in water<br>/Edit] <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const FPS=90

Graphics3D 800,600,0,2
SetBuffer BackBuffer()

WireFrame False

camera = CreateCamera()
PositionEntity camera,0,5,-15

TOKSIM_CreateSimulator(0,-10,0)

; Create a bank to hold collisioninfo
ColBank=CreateBank(104*2)

TOKSIM_SetCInfoBank ColBank
TOKSIM_SetCollisionResponse 1,2,2 ; Feedback only
TOKSIM_SetCollisionResponse 2,1,2 
TOKSIM_SetCollisionResponse 0,2,0 ; Nada
TOKSIM_SetCollisionResponse 2,0,0 

water = CreateCube()
EntityColor water,55,55,175 
ScaleEntity water,50,5,50 
PositionEntity water,0,-5,0
abwater = TOKAB_Create()
TOKAB_AddBox(abwater,100.0,100.0,100.0)
TOKAB_SetPosition(abwater,0.0,-50.0,0.0)
TOKAB_SetCollisionID abwater,2
EntityAlpha water,0.5 

  obj = CreateCube()
  	
  rb = TOKRB_Create()
  TOKRB_AddBox rb,2,2,2
  TOKRB_SetPosition rb,0,5,0
  TOKRB_SetRotation rb,0,0,0
  TOKRB_SetAngularDamping rb,0.01 
  TOKRB_SetLinearDamping rb,0.001 
  TOKRB_SetMass rb,0.5
  TOKRB_SetBoxInertiaTensor rb,2,2,2,0.5 
  TOKRB_SetCollisionID rb,1

  obj2 = CreateSphere()
  ScaleEntity obj2,0.25,0.25,0.25
  rb2 = TOKRB_Create()
  TOKRB_AddSphere rb2,0.5
  TOKRB_SetPosition rb2,1.25,5.0,0
  TOKRB_SetAngularDamping rb2,0.01 
  TOKRB_SetLinearDamping rb2,0.001 
  TOKRB_SetMass rb2,0.3
  TOKRB_SetSphereInertiaTensor rb2,0.5,0.3 
  
  joint = TOKJOINT_Create(2,rb,rb2) 
  TOKJOINT_SetType joint,1
  TOKJOINT_SetPositionAndRotationWorld joint,1.25,5.0,0,0,0,0
  TOKJOINT_Enable joint,True  	


Centerpivot = CreatePivot()

light=CreateLight()
PositionEntity light,7,15,-5
PointEntity light,Centerpivot
PointEntity camera,centerpivot  

period=1000/FPS
time=MilliSecs()-period

; MainLoop
While Not KeyHit(1)

	Repeat
		elapsed=MilliSecs()-time
	Until elapsed

	ticks=elapsed/period
	tween#=Float(elapsed Mod period)/Float(period)

	For k=1 To ticks
		time=time+period
		If k=ticks Then CaptureWorld

		TOKSIM_Advance(1.5/FPS,1)
		
		;Check Collision
		Ccount=TOKSIM_GetCollisionCount()

		 InWater#=TOKRB_GetY#(rb)-1
		If Ccount=0 Then InContact=False
		
		If Ccount&gt;0 Then
		InContact=True
		 ;Determine how much of the sphere's volume is in the water...
		 If InWater#&lt;-2 Then InWater#=-2	
		 Vol#=(1.0/2.0)*Abs(InWater#)
		 TOKRB_SetForce rb,0,(10+Rnd(-2.0,2.0))*Vol#,0
		 TOKRB_SetLinearDamping rb,0.03
		 TOKRB_SetAngularDamping rb,0.1

		Else

		 TOKRB_SetForce rb,0,0,0
		 TOKRB_SetLinearDamping rb,0.01
		 TOKRB_SetAngularDamping rb,0.001
		EndIf

		If KeyDown(200) Then
		 TOKRB_ApplyImpulse RB,0,1.0,0 
		 TOKRB_ApplyTwist RB,1,2,3 
		EndIf
		If KeyDown(208) Then
		 TOKRB_ApplyImpulse RB,0,-0.5,0 
		EndIf

 	PositionEntity obj,TOKRB_GetX#(rb),TOKRB_GetY#(rb),TOKRB_GetZ#(rb) 
 	RotateEntity obj,TOKRB_GetPitch#(rb),TOKRB_GetYaw#(rb),TOKRB_GetRoll#(rb),False
 	PositionEntity obj2,TOKRB_GetX#(rb2),TOKRB_GetY#(rb2),TOKRB_GetZ#(rb2) 
 	RotateEntity obj2,TOKRB_GetPitch#(rb2),TOKRB_GetYaw#(rb2),TOKRB_GetRoll#(rb2),False
	
	UpdateWorld

	Next


RenderWorld tween


Text 0,10,"Render Time:"+Str(elapsed)+ " milliseconds"
Text 0,20,"InWater"+Str(InWater#)
	Flip 

Wend

TOKSIM_DestroySimulator()

End</textarea> <br><br></td></tr></table><br>
<a name="382172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's neat. I geuss here is another addon to my program for the todo list. I was going to ask about buoyancy at some point but I guess I don't now. Thanks :P <br><br></td></tr></table><br>
<a name="382187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you know how to spell 'buoyancy' you are halfway there. lol! ;p<br>Couldn't Archimedes have called it 'Floatiness' instead? hehe 8P <br><br></td></tr></table><br>
<a name="382228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mac M</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow! That's nearly what I was looking for. I will try to make it with dynamic ocean instead of a plane.<br>Thanks.<br><br>"Buoyancy" hehe. Here we call it "Flotabilidad", hehe. <br><br></td></tr></table><br>
<a name="382471"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> It will be interesting to see the result.<br>Good luck on your submarine game.(It looks great) <br><br></td></tr></table><br>
<a name="382494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any news on the next update with the sensor functions added Sweenie? <br><br></td></tr></table><br>
<a name="382503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> I should be able to release it within the next 24 hours. <br><br></td></tr></table><br>
<a name="382534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent - I'm looking forward to trying my rally game with the sensors for suspension - hopefully it will improve the reaction to the road surface and allow a more realistic feel - currently the suspension is a bodge and doesn't give you that pitch and roll feel that is required.<br><br>Thanks<br>James <br><br></td></tr></table><br>
<a name="382580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> The sliderjoint works in the new release aswell. <br><br></td></tr></table><br>
<a name="382653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> stop teasing us and release it!! :P <br><br></td></tr></table><br>
<a name="382685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> way to setup the tension Sweenie! you should change your naming scheme to 'Episodes'<br><br>Sweenie Tokamak Wrapper Episode 0.6: A New Hope<br><br>seriously,<br>the slider joint sounds great.<br>Your Bouyancy demo looks great. <br><br></td></tr></table><br>
<a name="382747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> Buoyancy, Bill! Buoyancy!<br>Bouyancy, isn't that the girl who sang in Destiny's Child? ;p <br><br></td></tr></table><br>
<a name="382784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol...<br><br>you're great for doing this sweenie, I really appreciate it. <br><br></td></tr></table><br>
<a name="383036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, Friday... I love fridays...<br>Good shows on the tv, no more work for a couple of days, pizza, beer and new wrapper releases... ;)<br>Get it here --&gt; <a href="http://www.freewebs.com/sweenie/" target="_blank">http://www.freewebs.com/sweenie/</a> <br><br></td></tr></table><br>
<a name="383084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent work Sweenie, I have been waiting for this release like it was Christmas :) <br><br></td></tr></table><br>
<a name="383208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you lord sweenie!!!!<br><br>Those motors and sensors sound pretty useful if they are what they say they are. And more work for me :D <br><br></td></tr></table><br>
<a name="384066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice work Sweenie! <br><br></td></tr></table><br>
<a name="384102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> mmm. sounds like I won't be able to add the documentation along with it. Oh well.<br><br>Great work! <br><br></td></tr></table><br>
<a name="384137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh.. Sorry Botbuilder, I forgot. :(<br>Tell you what, update the documentation and send it to me and I will update the wrapperpackage to include the documentation.<br><br>ps!<br>Thanks for helping me out and I hope you aren't angry at me for forgetting the docs. :) <br><br></td></tr></table><br>
<a name="384139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks man!<br><br>sweenie - will you be interested in a mac tokamak? <br><br></td></tr></table><br>
<a name="384362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's okay.  :D<br><br>I'm just happy the new version's out.<br><br>Now I'm gonna monkey with it and write the docs. <br><br></td></tr></table><br>
<a name="384386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> and post your support for a mac version on the tokamak official forums or you'll all cry when blitzmax comes out and you've nowhere to go mac-wise. <br><br></td></tr></table><br>
<a name="384613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay sweenie, emailed you :D<br><br>That was quite a large update.  Cant wait to start experimenting with the sensors and convex hulls! <br><br></td></tr></table><br>
<a name="384628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> A mac-version of Tokamak would be cool, but considering the somewhat slow developement of Tokamak for PC I wouldn't bet any money on Tokamak for Mac showing up anytime soon.<br>But hey, you never know. <br><br></td></tr></table><br>
<a name="384748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> found it. Thanks again! <br><br></td></tr></table><br>
<a name="384868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't C/C++ cross platform? Maybe I'm being ignorant in this case, but I coulda sworn it was.  Since Tokamak is essentially bunch of math, I wouldn't think there would be to much stopping them from making a mac version.  Although, I don't know if there is a file equivalent to a dll on macs.<br><br>For those that didn't notice - there are docs by me available off the tokamak website. Put the zip in your blitz directory. It will overwrite one Blitz help file - the main page, to provide a link to the documentation. F1 help works. <br><br></td></tr></table><br>
<a name="385124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how ordinary windows DLL works with mac, but could the .lib version of Tokamak work? <br><br></td></tr></table><br>
<a name="385126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZombieWoof</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesnt OSX have linux/posix compatible compilers ?? <br><br></td></tr></table><br>
<a name="385189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem here is the tokamak people. We must encourage them. <br><br></td></tr></table><br>
<a name="385297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> I plan to do this myself shortly, but does anyone already have a function that parents two tokamak geometries together? Presently, this is done using a solid joint (I think), and I think it would be more readable if there were a function like TokGeom_Parent()<br>Or even better, is there a parenting function within tokamak? <br><br></td></tr></table><br>
<a name="386342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can add geometry to the same rigid body without problems or extra functions. <br><br></td></tr></table><br>
<a name="386450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not used tokamak much, but i love the stuff i have seen done with it so far.<br><br>I have a question tho, i have managed to load a .3ds map in as a level, convert it to a rigid body, but how easy would it be to add other rigid (or are the animated?) bodies to this map, such as moving elevators, rotating floors etc?<br><br>I tried to tilt my level just to see if i could get the player to slide off but he just stands there as if the mesh and the tokamak collisions are seperate.<br><br>Anyone have some code that will show me how to do this? IE rotate or tilt a level and have the player affected by it?<br><br>Cheers <br><br></td></tr></table><br>
<a name="387577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zombie:<br><br>OSX's standard set of dev tools includes gcc3, so yes. <br><br></td></tr></table><br>
<a name="389209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carrot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd personally use animate bodies for entities like doors and elevators (lifts!), but the tilting map idea could be easier modeled by twisting the camera and then just applying a force to all rigidbodies, including the player entity.<br><br>Alternatively, you could modify the gravity vector. <br><br></td></tr></table><br>
<a name="391765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carrot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can add geometry to the same rigid body without problems or extra functions.  <br></div><br><br>Anyone manage to do this successfully yet? I can't get it to work. <br><br></td></tr></table><br>
<a name="392561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure:<br><br><a href="http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1076363448" target="_blank">http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1076363448</a><br><br>It only works with an older version though (different syntax) you should get the idea though. <br><br></td></tr></table><br>
<a name="392779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am playing around with a lunar lander game, How would I create Tok objects for my lander, making sure that when it lands that it sits at the right angle.<br><br>Would this be hard to do? I have my basic code running, without tokamak, but I would like to incorporate it. <br><br>What would be involved?<br><br>Regards,<br>Eric<br><br>ps My Lander has 4 landing pads. <br><br></td></tr></table><br>
<a name="392802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I would first create a rigid body for the lander, and add four boxes to it, using TOKGEOM_SetPositionAndRotation to position them at the pads of the lander. Then perhaps making the body of the lander out of one of the other geometries (depends on the shape).  I presume you would have a static mesh for he terrain.  In your main loop you would update tokamak, and position the lander model to the tokamak rigid bodies position and orientation.  For thrusts just do a TFormVector to transform 0,force#,0 from object local space to global space, then apply the impulse.  If this is to confusing I can do a bit of sample code. <br><br></td></tr></table><br>
<a name="392820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot,<br><br>Ok So I can Create a Tok_Sphere, and connect 4 boxes for the pads. Can you show me how to do that part.<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="392939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#120">[#120]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you might be able to use a convex body as I mentioned on the player factory forums.  I also mentioned how to combine multiple geometries into the rigid body.  I presume you will use a static mesh for the terrain?  <a href="http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1077666832" target="_blank">http://playerfactory.proboards25.com/index.cgi?board=tokamak2&amp;action=display&amp;num=1077666832</a> Will allow you to do it without to mych trouble.  Then its just a matter of initializing tokamak, advancing in your main loop and finally positioning the objects. <br><br></td></tr></table><br>
<a name="393065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#121">[#121]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot,<br><br>You will have to forgive me, but sometimes I have a hard time getting my head around new things (sswift can attest to this, he helped me learn basic physics stuff without tokamak). Can you give me an Idea how to make a pyramid with 5 cubes. With the top point being my Lander and the bottom four cubes as my landing skids.<br><br>Then my next question is, can I turn the RB (Lander) manually, or do I have to apply impulse. What I want to end up with is a way to pivot the lander on both the x and z axis. <br><br>I played around lastnight with my lander within a single RB cube and a AB ground cube. I used ApplyImpulse2 and set the point of impact 10 units above my lander to use that to tilt it left, right , fore and backwards, but the effect I got was that I pushed the Lander too far, off course trying to turn it... Has this made any sense?<br><br>Best Regards,<br>Eric <br><br></td></tr></table><br>
<a name="393112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#122">[#122]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, I think I know what oyur problem could be. This happened in a thing I was doing... Just apply a reverse impulse on the opposite side at the same time. <br><br></td></tr></table><br>
<a name="393121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#123">[#123]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean in addition to ApplyImpulse2, use an ApplyImpulse in the opposite direction? <br><br></td></tr></table><br>
<a name="393144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#124">[#124]</a></td></tr></table></td></tr><tr ><td class="posttext"> no, the same kind of impulse as the first side, just with a negative value. <br><br></td></tr></table><br>
<a name="393150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#125">[#125]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will Try when I get home.... Is there a way that I can rotate my lander without impulse? A manual way...Like rotating the RB. <br><br>REgards,<br>Eric <br><br></td></tr></table><br>
<a name="393161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#126">[#126]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you can use tokrb_setTorque, tokrb_setAngularMomentum, or tokrb_applyTwist (there are probably more...). They all basically rotate an object. Apparently tokrb_setAngularMomentum is a bit buggy, but I haven't tried out any of them myself. <br><br></td></tr></table><br>
<a name="393398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#127">[#127]</a></td></tr></table></td></tr><tr ><td class="posttext"> TOKRB_SetRotation can set the rotation but be warned it messes up collisions, so best it's probably best to use turning impulses (and more realistic) as I (in the playerfactory forums) and dillpickle have suggested.<br><br>Also, if you never need your lander to collide with spheres or capsules, I would suggest using it as a convex body at first.  If this proves problematic you could always switch to geometry based, even though I don't know of any problems. <br><br></td></tr></table><br>
<a name="393457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#128">[#128]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot,<br><br>I have used both methods of rotation. I do like the impulse method, it seems more realistic, your right. In my original game, The joystick controlled the X and Z Axis rotation. I transformed Joystick X and Z from Camera to world space, so no matter what direction the camera was facing, left was left and right was right.<br><br>For some reason, I can't get this to work within the Tokamak world. For Rotation on the X-Axis for instance I am using the following abbreviated statments<br> <br><br>TokRB_ApplyImpulse2 RB,.1,0,0,Getx(),Gety()+12,GetZ()<br>TokRB_ApplyImpulse2 RB,-.1,0,0,Getx(),Gety()-12,GetZ()<br><br>I used two Impulse statments like Mr Picklesworth suggested above. <br><br>How can I apply my joystick inputs so the orientation stays correct in the camera view..<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="393774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#129">[#129]</a></td></tr></table></td></tr><tr ><td class="posttext"> mmm. Does this work?<br><pre class=code>TFormVector 0,-1.1,0,camera,0
TokRB_ApplyImpulse2 RB,.1,0,0,Getx()+TFormedX(),Gety()+TFormedY(),GetZ()+TFormedZ()
TokRB_ApplyImpulse2 RB,-.1,0,0,Getx()-TFormedX(),Gety()-TFormedY(),GetZ()-TFormedZ()</pre><br><br>BTW, this will actually be rotation about the Z axis. <br><br></td></tr></table><br>
<a name="393957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#130">[#130]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot, <br><br>Nope it doesn't work, Sheesh I am getting frustrated with this. I thought It was going to be a fairly simple project and the stupid camera, is holding me back.<br><br>Regard,<br>Eric <br><br></td></tr></table><br>
<a name="394396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#131">[#131]</a></td></tr></table></td></tr><tr ><td class="posttext"> How doesn't it work? just doesn't move at all? try debugging various variables - see what the problem is. Make sure you've set the RB variable, and the Getx/y/z things are typed properly.  Debug the values of the tformedx/y/z. See if they are responding to your input.<br><br>[edit]Okay so there was a little error :P I made a demo to test:<br><pre class=code>Const Rigid_Bodies=100,Animated_Bodies=5
TOKSIM_SetRigidBodiesCount Rigid_Bodies
TOKSIM_SetAnimatedBodiesCount Animated_Bodies
TOKSIM_SetRigidParticleCount 0
TOKSIM_SetControllersCount 0
TOKSIM_SetGeometriesCount Rigid_bodies+Animated_Bodies ;Assuming each one only has one geometry.  Not true with more complex rigid bodies and animated bodies.
TOKSIM_CreateSimulator(0,0,0)

Graphics3D 640,480
;Setup The scene
lander=CreateCube()
landerb=TOKRB_Create()
TOKRB_AddBox landerb,2,2,2
campiv=CreatePivot()
cam=CreateCamera(campiv)
PositionEntity cam,0,0,-5

l=CreateLight()

While Not KeyHit(1)
	TurnEntity campiv,0,.25,0
	TOKSIM_Advance .1,1
	;Position graphical representation
	PositionEntity lander,TOKRB_GetX(landerb),TOKRB_GetY(landerb),TOKRB_GetZ(landerb)
	RotateEntity lander,TOKRB_GetPitch(landerb),TOKRB_GetYaw(landerb),TOKRB_GetRoll(landerb)
	TFormVector .1,0,0,cam,0
	x#=TFormedX()
	y#=TFormedY()
	z#=TFormedZ()
	TFormVector 0,(KeyDown(205)-KeyDown(203))/100.0,0,cam,0
	TOKRB_ApplyImpulse2 landerb,x#,y#,z#,TOKRB_GetX(landerb)+TFormedX(),TOKRB_GetY(landerb)+TFormedY(),TOKRB_GetZ(landerb)+TFormedZ()
	TOKRB_ApplyImpulse2 landerb,-x#,-y#,-z#,TOKRB_GetX(landerb)-TFormedX(),TOKRB_GetY(landerb)-TFormedY(),TOKRB_GetZ(landerb)-TFormedZ()
	RenderWorld
	Flip
Wend
TOKSIM_DestroySimulator</pre>I don't think its a very suitable way to control a lunar lander sim but oh well. <br><br></td></tr></table><br>
<a name="394585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#132">[#132]</a></td></tr></table></td></tr><tr ><td class="posttext"> BOT,<br><br>Thanks for your reply, I actually use a joystick, and appreciate your code above, I will play with it tonight when i get home.. Your comment "I don't think its a very suitable way to control a lunar lander sim but oh well."<br><br>Please give me some insight as to what you would do. I am just learning, and would appreciate and advice you may offer.<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="394812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#133">[#133]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I'd say it depends.  The problem I see with this method is that at any time you don't have control over one of the axis of rotation.  For instance, as in my sample, the camera is rotating around the lander.you can apply a thrust but then half a second later (after turning 90 degrees) you can't stop that rotation.  Perhaps if the y axis of the joystick did pitch thrusts(relative to camera) and the x axis did roll thrusts (relative to camera) it could work pretty well with tweaking as to how much the joystick affects it.  Maybe trigger to do a thrust (or perhaps z axis of joystick, maybe user-settable) and button 2 for super thrust maybe (very bad for fuel). <br><br></td></tr></table><br>
<a name="394986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#134">[#134]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot,<br><br>Thanks for the insight, I figured out my camera problem. And it seems to work pretty well. I Place a camera target at 0,5,-10 relative to the lander, and made the Parent another Pivot.<br>Center=CreatePivot(Lander)<br>Target=CreatePivot(Center)<br><br>I check the angle of the Camera to The Lander and rotate the Center pivot to match, This way as I'm flying past the camera, The Camera swings around the lander. It's like it is trapped in a 10 unit circle around the lander. It's pretty smooth coming from an amature like me.. :)<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="394990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#135">[#135]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok The tokamak Sensor, I looked at the sample code and it looked pretty simple until I tried to put a sensor on the bottom of my lander. TokRB_AddSensor (RB,0,0,0,0,-10,0)<br><br>Is this Wrong? I want to detect if I am getting close to the ground. Using The GetDectectDepth# Command, but it is always reading Zero... Is there a trick to this command?<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="395220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#136">[#136]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, sounds like a pretty cool camera system :D<br><br>Yes, the sensors all a little wierd.  GetDetect Depth will actually return the amount the sensor has penatrated.  Also, The sensors are local to the rigid body so if say you want it to measure altitude, you'll have to continuosly change it's location.  However, the sensors are probably faster than blitz linepicks so you might as well use it:<br><br><pre class=code>TFormPoint EntityX(lander),0,EntityY(Lander),0,Lander
TOKSENSOR_SetLineSensor Sensor,0,0,0,TFormedX(),TFormedY(),TFormedZ()
TOKSIM_Advance .01,1
altitude#=TOKRB_GetY(lunarb)-TOKSENSOR_GetDetectDepth(Sensor)</pre><br><br>[edit]To tell you the truth, i can't get it to work either :/  Haven't actually tried using a sensor till now, although I'll probably have a use for them.  I'm not sure what the demo is doing that I'm not. <br><br></td></tr></table><br>
<a name="395470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#137">[#137]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't get the darn thing to work, So I am gonna work on other things for the time being. Currently I am using Terragen to make my landscapes then importing them into Truespace to convert to .X.. I then Create a Static Mesh.. Right now I'm pushing 40,000 Tris.  Way too much. Right now I am still concentrating on the Physical Properties of the Lander... SO... how can I create proper geometry on my lander? I just want four small boxes on the Lander pads and a sphere to encomass the upper portion. I can't visualize, how to orient the boxes to line up with the lander. Can you help with that?<br><br>Also, Do the Sensors, work on static Meshes? If anyone out there knows how to use sensors let me know.<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="396198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#138">[#138]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. Well I just did a test on the sensors and they appear to *not* work on static meshs :'(.  You can try using blitz's linepick.<br><br>Does terragen work off hightmaps? If so that may be one way to make your own super fast linepick method.  Figure out the point on the bitmap your lander is above and take the red value of it (readpixel and then take the result And $FF), then multiply this by the amount your map is scaled in the y direction.  Take the y of the lander subtacted by the terrain y.<br><br>Even easier would be to use a blitz terrain, load up the heightmap and use landery-TerrainY().  However you would still need a triangle version because you can't pass a terrain to tokamak.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">;************************
;Geometry visualization commands
;With these, stay away from rotation as it introduces really wierd stuff in the visuals. If
;someone knows how to fix this, please post on the Blitz-Tokamak forum,
;http://playerfactory.proboards25.com/index.cgi?board=tokamak
;************************
Function addbox(mesh,RigidBody,x#,y#,z#,Width#,Height#,Depth#,Pitch#=0,Yaw#=0,Roll#=0,alpha#=1)
	TOKGEOM_SetPositionAndRotation TOKRB_AddBox(RigidBody,Width#,Height#,Depth#),x#,y#,z#,Pitch#,Yaw#,Roll#
	If mesh Then c=CreateCube(mesh) Else c=CreateCube()
	ScaleEntity c,Width#/2,Height#/2,Depth#/2,1
	PositionEntity c,x#,y#,z#,1
	RotateEntity c,Pitch#,Yaw#,Roll#,1
	EntityAlpha c,alpha#
End Function

Function addcylinder(mesh,RigidBody,x#,y#,z#,Diameter#,Height#,Pitch#=0,Yaw#=0,Roll#=0,alpha#=1)
	TOKGEOM_SetPositionAndRotation TOKRB_AddCylinder(RigidBody,Diameter#,Height#),x#,y#,z#,Pitch#,Yaw#,Roll#
	If mesh Then c=CreateCylinder(8,True,mesh) Else c=CreateCylinder(8,True)
	EntityAlpha c,alpha#
	ScaleEntity c,Diameter#/2,Height#/2,Diameter#/2,1
	sp1=CreateSphere(8,c)
	ScaleEntity sp1,Diameter#/2,Diameter#/2,Diameter#/2,1
	PositionEntity sp1,0,Height#/2,0,1
	EntityAlpha sp1,alpha#
	sp2=CreateSphere(8,c)
	ScaleEntity sp2,Diameter#/2,Diameter#/2,Diameter#/2,1
	PositionEntity sp2,0,Height#/-2,0,1
	PositionEntity c,x#,y#,z#,1
	RotateEntity c,Pitch#,Yaw#,Roll#,1
	EntityAlpha sp2,alpha#
End Function

Function addsphere(mesh,RigidBody,x#,y#,z#,Diameter#,Pitch#=0,Yaw#=0,Roll#=0,alpha#=1)
	TOKGEOM_SetPositionAndRotation TOKRB_AddSphere(RigidBody,Diameter#),x#,y#,z#,Pitch#,Yaw#,Roll#
	If mesh Then c=CreateSphere(8,mesh) Else c=CreateSphere(8)
	ScaleEntity c,Diameter#/2,Diameter#/2,Diameter#/2,1
	PositionEntity c,x#,y#,z#,1
	RotateEntity c,Pitch#,Yaw#,Roll#,1
	EntityAlpha c,alpha#
End Function</textarea><br><br>These might help as far as positioning the pads/sphere right.  Just twiddle with it until its close to right. <br><br></td></tr></table><br>
<a name="396502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#139">[#139]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Thanks for the functions, Much appreciated.<br><br>Bot...Here is what I have.. I have a Lunar.X Model, And a staticMesh Terrain.. Using your Function by the way.<br><br>My collisions happen, In other words when the lander hit or touches the Terrain, it reacts.. My problem is, I can't figure out how to trap those events...None of the commands seems to work... Do you have experience with collisions?<br><br>Also Materials... I've tried using your functions, and they don't make sense to me, Textures and Materials.. Will they work on a static Mesh? How do I get them to work also... I can't figure out why I can't get a lot of these function to work... Sensors..Materials...Collisions<br><br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="397279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Bossy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#140">[#140]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I find the demo that Denzil Quixode posted a screenshot of (near the top of the thread)? <br><br></td></tr></table><br>
<a name="397371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GeordieB</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#141">[#141]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.the-radfords.net/tokatest5.zip" target="_blank">http://www.the-radfords.net/tokatest5.zip</a> <br><br></td></tr></table><br>
<a name="398184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GeordieB</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#142">[#142]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone explain how the "height" value off TOKAB_addCylinder() works off, cause its not the same as sphere/cube<br><br>im using absolute values to set the sizes, not a scale %, but this doesnt work for Cylinders<br><br>speaking of which, is there any way at all to be able to change the X and Z size of Spheres and Cylinders or are you stuck with diameter and thats it? <br><br></td></tr></table><br>
<a name="398213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#143">[#143]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are stuck with the diameter.  As for the height, the "actual height" is diameter+height.  The reason being that the "cylinder" is really a capsule. <br><br></td></tr></table><br>
<a name="398472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#144">[#144]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sure this doesn't happen in real life, or we would all be floating.<br><br>In both versions of tokamak, I have found that if you put a significantly lighter object below a heavier one (or light above a heavy one), the above object will bounce in the air for no reason, and in a very fast manner. I have finally decided to face this glitch upon trying to fix a problem in the rope demo (the crate bounces when it lands on the rope).<br>So, has anyone else found this problem, and do you have a solution?<br>A good way to see the effect is by making the tires in the car demo (in the tokamak lib samples folder) very light, and the chassis very heavy. <br><br></td></tr></table><br>
<a name="400402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#145">[#145]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh no,don't tell me I just killed another thread!!! this always happens with my post being last!!<br>NOOOOO! <br><br></td></tr></table><br>
<a name="400481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#146">[#146]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, You didn't I was just waiting for an answer to my question above... BTW I figured it out... For anyone that doesn't know... The collisons ID of a static Mesh Terrain is -1...   :) Now I just have to figure out Materials.<br><br>Regards,<br>Eric<br>PS My Lunar Lander Game is Coming along Pretty good now. Baby Steps!! <br><br></td></tr></table><br>
<a name="400556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#147">[#147]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is a serious lack of Tokamak demos in this thread.<br><br>come on. share the love... <br><br></td></tr></table><br>
<a name="400561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#148">[#148]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. Here's two:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">;RopeTok Demo v.5
;Rope tokamak demo originally by Souled, modified by dillpickle79 and Bot_builder

Const FPS=60
;=========================
Const number = 40 ;Number of rope points
Const Ydistance = 3 ;This also defines the resolution of the rope. \\ Adjust the height of the mesh and RidigBody scale manually if you change it.

Global Lastnumber = number


;=========================
Graphics3D 800,600,0,2
SetBuffer BackBuffer()

WireFrame False

campiv=CreatePivot()

camera = CreateCamera(campiv)
PositionEntity camera,0,2,-170
RotateEntity camera,30,0,0
CameraClsColor camera,82,134,172
light=CreateLight()
PositionEntity light,7,15,-5

TOKSIM_CreateSimulator(0,-20,0)
;========================

Dim mesh (number)
Dim rb (number)
Dim joint(number)

;create the hook
hookPivot = CreatePivot()
PositionEntity hookpivot,0,20,0

hook = CreateSphere()
PositionEntity hook,EntityX#(hookPivot),EntityY#(hookPivot),EntityZ#(hookPivot)
EntityAlpha hook,.5

;========================

TOKSIM_SetRigidBodiesCount number+1
TOKSIM_SetAnimatedBodiesCount 1
TOKSIM_SetGeometriesCount number+2
TOKSIM_CreateSimulator(0,-10,0)

;ground material
TOKSIM_SetMaterial 0,0.8,0.1


For i=1 To number - 1

    mesh(i) = CreateCylinder()
    ScaleEntity mesh(i),1,1.7,1
    EntityColor mesh(i),196,118,2
    EntityPickMode mesh(i),2
    NameEntity mesh(i),i

    rb(i) = TOKRB_Create()
    TOKRB_AddCylinder rb(i),2.14,1
    TOKRB_SetPosition rb(i),EntityX#(hookPivot),EntityY#(hookPivot)-(i*Ydistance),EntityZ#(hookPivot)
    TOKRB_SetLinearDamping rb(i),0.0001
    TOKRB_SetAngularDamping rb(i),0.0
    TOKRB_SetMass rb(i),20
    TOKRB_SetCylinderInertiaTensor rb(i),2.14,1,20

    TOKRB_CollideConnected rb(i),True

    If i=1
        joint(i) = TOKJOINT_Create(1,rb(i),0)
        TOKJOINT_SetPositionAndRotationWorld(joint(i),0.0,EntityY#(hookPivot)-(i*(Ydistance/2)),0.0,0,0,90)
    Else
        joint(i) = TOKJOINT_Create(2,rb(i-1),rb(i))
        TOKJOINT_SetPositionAndRotationWorld(joint(i),0.0,TOKRB_GetY(rb(i-1))-1.5,0.0,0,0,90)
    EndIf

    TOKJOINT_SetType(joint(i),1)
    TOKJOINT_SetLowerLimit joint(i),3.14*0.0
    TOKJOINT_SetUpperLimit joint(i),3.14*0.8
    TOKJOINT_EnableLimit joint(i),True
    TOKJOINT_Enable(joint(i),True)
    TOKJOINT_SetDampingFactor joint(i),80.0

Next

GroundA=TOKAB_Create()
GroundGeom = TOKAB_AddBox(GroundA,200,1,200)
TOKGEOM_SetMaterialIndex GroundGeom,0
TOKAB_SetPosition GroundA,0,-120,0
gr=CreateCube()
ScaleEntity gr,100,.5,100
PositionEntity gr,0,-120,0

;the last section that it is holding (test)
i = number

mesh(i) = CreateCube()
ScaleEntity mesh(i),20,10,15,True
EntityColor mesh(i),255,0,0
EntityPickMode mesh(i),2
NameEntity mesh(i),i

rb(i) = TOKRB_Create()
TOKRB_AddBox rb(i),40,20,30
TOKRB_SetPosition rb(i),EntityX#(hookPivot),EntityY#(hookPivot)-(i*Ydistance),EntityZ#(hookPivot)
TOKRB_SetLinearDamping rb(i),0.0001
TOKRB_SetAngularDamping rb(i),0.0
TOKRB_SetMass rb(i),100
TOKRB_SetBoxInertiaTensor rb(i),20.0,10.0,15.0,100
TOKRB_SetMass rb(i),200
TOKRB_CollideConnected rb(i),True

joint(i) = TOKJOINT_Create(2,rb(i-1),rb(i))
TOKJOINT_SetPositionAndRotationWorld(joint(i),0.0,TOKRB_GetY(rb(i-1))-1.5,0.0,0,0,90)

TOKJOINT_SetType(joint(i),1)
TOKJOINT_SetLowerLimit joint(i),3.14*0.0
TOKJOINT_SetUpperLimit joint(i),3.14*0.8
TOKJOINT_EnableLimit joint(i),True
TOKJOINT_Enable(joint(i),True)
TOKJOINT_SetDampingFactor joint(i),80.0

period=1000/FPS
time=MilliSecs()-period

; MainLoop
While Not KeyHit(1)
    TurnEntity campiv,0,.1,0
    Repeat
    elapsed=MilliSecs()-time
    Until elapsed
    
    ticks=elapsed/period
    tween#=Float(elapsed Mod period)/Float(period)
    
    For k=1 To ticks
        time=time+period
        If k=ticks Then CaptureWorld
        TOKSIM_Advance(1.9/FPS,2)
        UpdateWorld
    Next
        
    ; destroying sections
    If MouseDown(1) And SAllowed = True Then
        CameraPick(camera,MouseX(),MouseY())
        If Not PickedEntity() = False Then
            Sallowed = False
            Jnumber = EntityName(PickedEntity())
            If Jnumber = number
                TOKRB_ApplyImpulse2 rb(Jnumber),0,0,.1,PickedX() * 2,PickedY() * 2,PickedZ() * 2
                Lastnumber = JNumber - 1
            Else
                TOKRB_ApplyImpulse2 rb(Jnumber),0,0,.1 ,PickedX() * 2,PickedY() * 2,PickedZ() * 2
                If Not joint(JNumber) = False
                    TOKJOINT_Free joint(Jnumber)
                    Lastnumber = JNumber - 1
                EndIf
            EndIf
        EndIf
    Else
        If Not MouseDown(1) Then SAllowed = True
    EndIf
    
    ;bouncing sections
    If MouseDown(2)
        CameraPick(camera,MouseX(),MouseY())
        If Not PickedEntity() = False
            Jnumber = EntityName(PickedEntity())
            TOKRB_ApplyImpulse2 rb(Jnumber),0,0,10 ,PickedX() * 2,PickedY() * 2,PickedZ() * 2
        EndIf
    EndIf
        
    For i=1 To number
        PositionEntity mesh(i),TOKRB_GetX#(rb(i)),TOKRB_GetY#(rb(i)),TOKRB_GetZ#(rb(i))
        RotateEntity mesh(i),TOKRB_GetPitch#(rb(i)),TOKRB_GetYaw#(rb(i)),TOKRB_GetRoll#(rb(i))
        
        If KeyDown( 208 )=True Then TOKRB_ApplyImpulse rb(Lastnumber),0,0,-.1
        If KeyDown( 200 )=True Then TOKRB_ApplyImpulse rb(Lastnumber),0,0,.1
        If KeyDown( 203 )=True Then TOKRB_ApplyImpulse rb(Lastnumber),-.1,0,0
        If KeyDown( 205 )=True Then TOKRB_ApplyImpulse rb(Lastnumber),.1,0,0
    Next
    
    RenderWorld tween
    
    Text 0,0,"Physics Time:"+TOKSIM_GetPhysicsTime()*1000.0+ " milliseconds"
    Text 0,10,"Render Time:"+Str(elapsed)+ " milliseconds"
    Flip False

Wend

TOKSIM_DestroySimulator()

End</textarea><br><br>And here's one by me: <a href="http://blitzstuff.250free.com/zips/Tokamak_intro.zip" target="_blank">http://blitzstuff.250free.com/zips/Tokamak_intro.zip</a> (234 KB)<br><br>Its a wrecking ball demo where the ball nocks over the letters "TOKAMAK". No user interaction, so its suitable for a game intro or somthing. Also uses lotus particle system (included, with intact liscence.txt), so at the end "Using lotus" and "tokamak" logos fade in. <br><br></td></tr></table><br>
<a name="400662"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#149">[#149]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot,<br><br>Can you explain the use of Materials in Tokamak, How do I implement them with your Terrain Mesh Functions. I read your description but still don't understand.<br><br>Thanks,<br>Eric <br><br></td></tr></table><br>
<a name="400715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#150">[#150]</a></td></tr></table></td></tr><tr ><td class="posttext"> ooh, hehe, I thought it was my restitution on the rope causing that problem. `my bad :)<br>Come to think of it, I think that's the same reason for my trouble with the car demo... So I've learned a lesson: never trust restitution unless it's really needed.<br><br>Tokamak materials are quite simple: You put toksim_setmaterial at the top of your code for each material you want to create. Remember the index you use (in fact, using a constant for the indexes is a good idea). Then you can apply it to geometries at any point with tokgeom_setmaterial() <br><br></td></tr></table><br>
<a name="400750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#151">[#151]</a></td></tr></table></td></tr><tr ><td class="posttext"> So it really has nothing to do with how you texture it.<br><br>Can you give me a brief code snip.<br><br>I have a box and a Static Mesh terrain.<br><br>My LinearDampining is very low, so when the box rests on the terrain is slides on even the slightest incline. I want the Box to have more friction based on the material it collides with.<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="400753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#152">[#152]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I'm not great at code snips but here's a slightly codified example to show you sort of how materials are done.<br>Sorry about any wrong/missing functions, but I'm too lazy to look them up.<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;toksim created
Const GroundMat = 0
Const BallMat = 1
;Rough material, probably ground
toksim_SetMaterial GroundMat,0.8,0.01 
;Bouncy ball material
toksim_SetMaterial BallMat,0.2,0.8

;make ground
Ground = tokab_create()
GroundBox = tokab_addbox( Ground,100,2,100 )
tokgeom_setmaterialindex GroundBox,GroundMat ; apply material

;make ball
Ball = tokrb_create()
tokrb_setposition Ball,10,40,5
BallGeom = tokrb_addsphere( Ball,5 )
tokgeom_setmaterialindex BallGeom,BallMat ;apply material
</textarea><br><br>I hope this helps to some extent :) <br><br></td></tr></table><br>
<a name="400761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GeordieB</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#153">[#153]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eric,<br><br>you say the collisons ID of a static Mesh Terrain is -1, how do you actually trap if your ball hits it and do something?<br><br>I cant see a command to check if X hit Y if you know what i mean.<br><br>Also is there a way to make gravity more realistic?  If you make a ball, with a mass of 300, why does it still fall slower than a feather in a storm, it should fall like a brick...... <br><br></td></tr></table><br>
<a name="400783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#154">[#154]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, But I don't remember the exact command names<br><br>but you set the Collisions ID of let's say a cube to 1<br><br>and the Static Mesh terrain is defaulted to  -1<br><br>Now TOKSIM_SetCollisionResponse(1,-1,3) To get feedback.<br><br>Then TOKSIM_GetCollisionCount() <br><br>Then there are a whole bunch of Bank Related commands to determine Things about the collions. Y Velocity and stuff<br><br>Hope this Helps,<br>Eric <br><br></td></tr></table><br>
<a name="400784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#155">[#155]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes, good old gravity. What do you have the gravity variables set at? <br><br></td></tr></table><br>
<a name="400789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GeordieB</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#156">[#156]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Eric, i did see them but wasnt too sure how to use them, got it sussed and working now, ta :-)<br><br>Ive got my Y gravity to -20 at the mo? havent played with that too much, my object is set to a mass of 300, but falls slooowwwwww, and if i set gravity any higher, my objects start squashing into each other and/or the floor..... <br><br></td></tr></table><br>
<a name="400802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#157">[#157]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pickle,<br><br>Currently I am using 0,-5,0 for my gravity... But in the future I am going to have to use the set Gravity command, because my terrain is going to be a sphere instead of flat.. But that's in the future.<br><br>Bonks, <br><br>Make sure you set your inertia tensor properly.<br><br>If using a Cube RB at 1,1,1 with a mass of 20<br><br>TOKRB_SetBoxInertiaTensor(RB,1,1,1,20)<br><br>And Also Properly set the LinearDampening to a value that gives a good feel. Too high a value will make your RB seem like it's in glue.<br><br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="400812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#158">[#158]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as how materials work in my terrain mesh stuff, I decided it was easiest to assign by texture, so areas that looked like dirt would have some different properties than grass areas. Of course, its not foolproof.  You can also set the material of a particular mesh or a default material for a particular mesh in the case that there is no material for a texture.<br><br><pre class=code>
Const GroundMat = 0
Const WallMat = 1
toksim_SetMaterial GroundMat,0.8,0.01 
toksim_SetMaterial WallMat,0.2,0.8

TOK_SetTextureMaterial("Ground.jpg",GroundMat)
TOK_SetTextureMaterial("Wall1.png",WallMat)
TOK_SetTextureMaterial("Wall2.png",WallMat)

TOK_AddMesh LoadMesh("Level.3ds")
TOK_SetMesh</pre> <br><br></td></tr></table><br>
<a name="400842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#159">[#159]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I will play more with this when I get home, Thanks.<br><br>Eric <br><br></td></tr></table><br>
<a name="400864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#160">[#160]</a></td></tr></table></td></tr><tr ><td class="posttext"> Botbuilder, where can I get those functions? <br><br></td></tr></table><br>
<a name="400917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#161">[#161]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot I hope you don't mind... <br><br><br><br>Mr. Picklesworth<br>These Functions are in the Documents for tokamak  <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Global vertices=CreateBank(0),triangles=CreateBank(0)
Global offsett,offsetv,tric,ttlvert,ttltris

Dim tname$(20),tMindex(20)
Global cur=0

Function TOK_SetTextureMaterial(fil$,Mindex)
tname$(cur)=fil$
tMindex(cur)=Mindex
cur=cur+1
End Function

Function TOK_AddMesh(mesh,recurse=0,mat=-1,textureindex=0)
scount=CountSurfaces(mesh)
For ind=1 To scount
  surface=GetSurface(mesh,ind)
  ttltris=ttltris+CountTriangles(surface)
  ttlvert=ttlvert+CountVertices(surface)
Next
ResizeBank triangles,ttltris*24
ResizeBank vertices,ttlvert*16
For ind=1 To scount
  surface = GetSurface(mesh,ind)
  bru=GetSurfaceBrush(surface)
  tex=GetBrushTexture(bru,textureindex)
  nam$=strippath$(TextureName$(tex))
  fo=0
  For a=0 To cur-1
   If tname$(a)=nam$ Then mindex=tMindex(a):fo=1:Exit
  Next
  If fo=0 Then mindex=0 
  FreeBrush bru 
  ctr=CountTriangles(surface)
  tric=tric+cvt 
  cvt=CountVertices(surface)
  ;add vertices to bank
  For v=0 To cvt-1 
   TFormPoint VertexX#(surface,v),VertexY#(surface,v),VertexZ#(surface,v),mesh,0
   PokeFloat vertices,offsetv,TFormedX()
   PokeFloat vertices,offsetv+4,TFormedY()
   PokeFloat vertices,offsetv+8,TFormedZ()
   PokeFloat vertices,offsetv+12,0.0
   offsetv=offsetv+16 
  Next
  ;fill bank with triangles 
  For v=0 To ctr-1 
   PokeInt triangles,offsett,tric+TriangleVertex(surface,v,0)
   PokeInt triangles,offsett+4,tric+TriangleVertex(surface,v,1)
   PokeInt triangles,offsett+8,tric+TriangleVertex(surface,v,2)
   If mat=-1 Then PokeInt triangles,offsett+12,mindex Else PokeInt triangles,offsett+12,mat
   PokeInt triangles,offsett+16,0
   PokeInt triangles,offsett+20,0
   offsett=offsett+24
  Next
Next
If recurse Then 
  children=CountChildren(mesh)
  If children&gt;0 Then
   For childcount = 1 To children
    child = GetChild(entity,childcount)
    TOK_AddMesh child,recurse,mat  
   Next 
  EndIf
EndIf
End Function

Function TOK_SetMesh()
;Hand over the terrain data to Tokamak
TOKSIM_SetStaticMesh vertices,ttlvert,triangles,ttltris
; Now we can free the banks as Tokamak has copied all data
FreeBank vertices
FreeBank triangles
End Function

Function StripPath$(file$) 
If Len(file$)&gt;0 
  For i=Len(file$) To 1 Step -1 
   mi$=Mid$(file$,i,1) 
   If mi$="\" Or mi$="/" Then Return name$ Else name$=mi$+name$ 
  Next 
EndIf 
Return name$ 
End Function

Function TOK_ReInitializeBanks()
vertices=CreateBank(0)
triangles=CreateBank(0)
offsett=0
offsetv=0
tric=0
ttlvert=0
ttltris=0
End Function
</textarea> <br><br></td></tr></table><br>
<a name="400943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bradford6</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#162">[#162]</a></td></tr></table></td></tr><tr ><td class="posttext"> BOT,<br>I like the Tokamak intro thingy.  very nice job with that. <br><br></td></tr></table><br>
<a name="400949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#163">[#163]</a></td></tr></table></td></tr><tr ><td class="posttext"> continued here:<br><br>www.blitzbasic.com/Community/posts.php?topic=36626 <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
