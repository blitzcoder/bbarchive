<!DOCTYPE html><html lang="en" ><head ><title >Cubemapped Water...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Cubemapped Water...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Cubemapped Water...</a><br><br>
<a name="672123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tried out adding cube mapped water to my game, by copying the example code in the gile[s] b3d parser example and changing it to fit my engine. After a long bit of trial and error (this kind of thing isn't my specialization), I got it to run, but with a few problems. <br><br>First off, at times it would be fast enough to not impact my frame rate (set at 60 FPS), but other times (especially if something is actually happening on screen, shooting a gun, particle effects, etc) it would slow down the whole thing horribly (sometimes down to 20 FPS or less).<br><br>The other problem is that it also rendered things that it shouldn't...like stuff that's already penetrated the surface and is laying on the bottom of the pit. This I understand, and I know the way to fix it would be to hide entities that are in the liquid body when it renders the cube map images for it...but I don't know how to go about doing that.<br><br>As for the speed issue, is the example in the gile[s] parser just not a "fast" way to do it? I'm not up on cubemapping methods, so I may be missing something here. I think that demo is fairly old, perhaps someone has found a faster way to do it?<br><br>Any tips on how to fix my problems would be greatly appreciated. <br><br></td></tr></table><br>
<a name="672169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> make sure to read the code archives on cube mapping. one example explains how to render 6 sides with one renderworld.<br><br>Other solutions do not update every side for every frame, but frequently update a side of the cube texture, using a turnus order.<br><br>Most important is to use the right texture flags to make sure Copyrect will work fast enough (not sure if the flag 256 is set by default when you use cubemapping, you better set it to be on the save side)<br><br>Hiding those things that are lower than the cubemap surface (eg floor) is a bit tricky, especially when they intersect with the surface. This is only an idea, maybe it works: position a black box on the surface level, width and depth pseudo infinite, top side right on the surface y level, FX fullbright. Now when you render the scene, in theory things inside the box/cube will be hidden under the black zones, as well as intersection parts etc. All you have to do now is Drawimage to draw everything but the black pixels to a buffer that has a neutral pattern. <br><br></td></tr></table><br>
<a name="672173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> and take a look at the water contest we just had not too long ago... some of the code examples there are very good... and pretty fast as well...<br><br>for example, i'm using a modification of the code that Fredborg so generously gave out... and it is pretty fast, especially considering that i have scaled up the water quite a bit, and i have all sorts of particles stuff running around in the scenes as well (look at the graphics showcase for my lil sub video thingees to get an idea)<br><br>good luck...<br><br><br>--Mike <br><br></td></tr></table><br>
<a name="672208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info guys, I'll go check it out! <br><br></td></tr></table><br>
<a name="672280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have the code for Fredborgs cubemapped water...it is impressive but it's just not wanting to work for me...<br><br>Does anyone have an old copy of the cubed demo with source code? The one by Rob Cummings? I had it but I think I lost it...all I can find now is the one without source. <br><br></td></tr></table><br>
<a name="672373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Points at sig* This might also help. :) <br><br></td></tr></table><br>
<a name="672375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Orc... if i remember, Rob's water is based on 2 files... ocean reflect and ocean...  ocean sets up a few things and makes the calls to the actual work functions in ocean reflect...<br><br>what's not working?<br><br>--Mike <br><br></td></tr></table><br>
<a name="672384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Red, whatever happened to my technique? Were there any problems? <br><br></td></tr></table><br>
<a name="672423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Red Ocktober: It works fine, but I only have the demo with no source code. All the links I found to the copy WITH source code are dead.<br><br>Cygnus: Looks good, but I think I've pretty much decided NOT to use real time cubemapping, but rather single render cubemapping with dynamic surface animation. It's the only way I think I can pull off the effect I want, without the problems.<br><br>Namely, stuff like everything that goes into the water making seriously weird reflections...which is caused by the very way it all works. Of course, I also want to save speed, since there's a lot that goes on in my game at any given time. <br><br></td></tr></table><br>
<a name="672425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Namely, stuff like everything that goes into the water making seriously weird reflections...<br> <br></div><br><br>Something Toms DX7 dll can be used to fix- using a method I gave to Red :) <br><br></td></tr></table><br>
<a name="672455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I'm a bit worried about using DLL's...mostly because I'm working on project that is going to be a commercial game (indie though)...and I'm leary of restrictions and such (except for Tokamak I'm currently using pure Blitz for everything).<br><br>Where can I find this DLL, and does it have any restrictions on it, or possible incompatibility issues? <br><br></td></tr></table><br>
<a name="672458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the clip planes work, full stop, theyre just a DX7 feature that blitz didn't implement (which IMO it should.)<br><br>there are parts of the DLL that arent compatible with everything (DirectX texture compression stuff) but the clip plane you will need works fine.<br><br>Youre more likely to run into errors due to lack of cubemap support :)<br><br>As for where to get it from, fraid I don't have a direct link, but I can put the demo I did for red online in a few hours :) <br><br></td></tr></table><br>
<a name="672480"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see, well I'll be sure to check back and see about this demo of yours!<br><br>I finally got cubemaps sort of working...but they look horrible unless I constantly update them, and to do that I have to render everything...including objects that can pass through them (unless I wrote a function to hide all non-static entities when rendering a cube map...now that would be horrible, but is one possible solution).<br><br>Hopefully your demo will help me sort this out... <br><br></td></tr></table><br>
<a name="672481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo will show you an example, it may be too slow depending on how complex your scene is though!<br><br>It uses the DX7 dll to clip rendering above/below a certain point. It doesn't simply hide an entity, but only renders the part of the entity thats above the clip range.<br><br>BTW, to get the above effect requires hiding/showing certain entities and rendering the scene twice. The result is *worth it* providing you dont have a bazillion bullets flying around :) <br><br></td></tr></table><br>
<a name="672487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll be sure to check it out then...but, things can get pretty hectic in the game. Not quite a bazillion bullets...but lots of bullets/particles/decals and a fair amount of characters/scenery can all be in scene at once...<br><br>If it works, I'll be very happy. If not, I'll fake it. <br><br></td></tr></table><br>
<a name="672507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus - could you help me too with this clip plane thing? I guess it would be useful also for CreateMirror()? <br><br></td></tr></table><br>
<a name="672528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> uuhhh, now don't get mad at me Cyg... but i still haven't put in your clipping code yet...  i'm still using my old method  (just too lazy to add it in)...<br><br>i did look at it, and it looks like it'll go in smoothly enough... and the demo works great...<br><br>--Mike <br><br></td></tr></table><br>
<a name="672570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i'll shove it up now. <br><br></td></tr></table><br>
<a name="672576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=60331" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=60331</a> <br><br></td></tr></table><br>
<a name="672582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
