<!DOCTYPE html><html lang="en" ><head ><title >Types vs. Banks: Speed vs. Space?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Types vs. Banks: Speed vs. Space?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Types vs. Banks: Speed vs. Space?</a><br><br>
<a name="943008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, here's a rather more advanced-system type question than I usually ask.<br><br>Let's say I have a level with a preset number of enemies that don't respawn, like in a <i>Mario</i> game or something. Each enemy has four variables:<br><br>Kind of enemy<br>X &amp; Y position<br>Status of enemy (live, dead, etc)<br><br>The normal thing to do would be to use Types, with something like:<br><br><pre class=code>Type Enemy
    Field X,Y
    Field EnemyType,Status
End Type</pre><br>And then update them with a For...Each...Next loop:<br><br><pre class=code>For Enemy.Enemy = Each Enemy
    If Enemy\Status = Alive ;Draw the correct enemy image from an image strip
        DrawImage Enemies,Enemy\X,Enemy\Y,Enemy\EnemyType
    EndIf
Next</pre><br>In this situation, however, I could also use a bank in the same way, and go through the enemies with a For...Next loop, something like:<br><br><pre class=code>For CurrentEnemy = 0 To NumOfEnemies - 1
    ;Get enemy data
    Local EnemyStatus = PeekInt(EnemyBank,CurrentEnemy * 16)
    Local EnemyX      = PeekInt(EnemyBank,(CurrentEnemy * 16) + 4)
    Local EnemyY      = PeekInt(EnemyBank,(CurrentEnemy * 16) + 8)
    Local EnemyType   = PeekInt(EnemyBank,(CurrentEnemy * 16) + 12)

    If EnemyStatus = Alive;Draw the enemy
        DrawImage Enemies,EnemyX,EnemyY,EnemyType
    EndIf
Next</pre><br>Both these solutions could work equally well from a code standpoint.<br><br>My question is this: would the Bank method use less or more RAM to store the enemy data than the traditional Type method? And would it be faster or slower? <br><br></td></tr></table><br>
<a name="943031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suspect that the types will likely take slightly more RAM to store as you would also have a pointer to the type instance.  Both methods would probably show negligible difference in speed.  I personally think that the type method is better as it's more elegant and easier to manage. <br><br></td></tr></table><br>
<a name="943040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I prefer Types too, I was simply wondering what kind of performance benefits there might be with the other method. I'll probably just stick with Types. <br><br></td></tr></table><br>
<a name="943042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tim Sweeney was famously quoted as saying (I think the subject was moving from C++ to C# for game development) that he would gladly sacrifice 10% of performance for a 10% productivity gain. This, to me, is just such an issue. <br><br></td></tr></table><br>
<a name="943116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really don't worry about this. Lots of people can get hung up about what to use, floats, ints, types....etc for storage speed issues, but really just go with whats easy to use.<br><br>Any gains you make in how much ram you use can so easily be negated by including 1 extra texture file.<br><br>Performance perfection is never what will sell a game. <br><br></td></tr></table><br>
<a name="943210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think banks are much faster. Anyone want to make a test?<br><br>Alternatively to your one bank for all entities, you could make your custom types made of banks, eg.<br>dim a(1000)<br>a(0)=createbank(16)<br>and so on, so you don't have to multiply by 16, but you can access a variable directly by bank-handle and offset. <br><br></td></tr></table><br>
<a name="943523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would agree, but it depends on what your using them for. I did a pathfinding algo with types and it was much slower than the one i did with array, due to the creation and deletion of lots of types, and cycling through them. <br><br></td></tr></table><br>
<a name="943547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... based on <i>this</i> info, I might start using arrays &amp; banks for things like particles &amp; frags; might be a significant boost! <br><br></td></tr></table><br>
<a name="943570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bank (or array). Easy access to data with a dll<br><br>JP <br><br></td></tr></table><br>
<a name="943576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not to be too picky, but i'd stick to types for particle, just for ease of use. And you can recycle types, so you don't need to constantly create and destroy them. The reason i didn't do this of pathfinding, is each type had a reference to the next one, so they were all linked. <br><br></td></tr></table><br>
<a name="943722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do a "array version" of Particle Candy. This version is faster than the "type version". The objective was the translation of the source Blitz to C++ (for the SDK). The "array version" use more space.  Sorry Google translate ;-)<br>JP <br><br></td></tr></table><br>
<a name="943779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Banks may be faster to some degree, but with types there's a lot you can do wrong, from a speed point of view. I've seen code searching for a certain index in the fields of types, slow as hell, where in an array indexed access is immediate. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
