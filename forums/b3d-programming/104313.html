<!DOCTYPE html><html lang="en" ><head ><title >Fire effect quits working doring 2nd level load.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Fire effect quits working doring 2nd level load.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Fire effect quits working doring 2nd level load.</a><br><br>
<a name="1262848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gerald</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I'm trying the "fire effect" code in the 3d examples.  I got it to work on the first level of a 3 level game.  My game switches via "goto" statements.  When the second level is loading it generates the error "the entity does not exist."  It just existed in the first level and I am at a loss to understand why it does not work or how to fix it so it does work.<br><br><br>The code I use follows.  Anyone have the same experience or recognize how to fix it?<br><br><br>The error occurs here, at the&gt; Add_Flame(Entityx...  part.  It says:  Entity does not exist.  It worked/existed in the first level but not in the rests of the program.<br><br><br><br><br>;Update all fires<br>Function Update_Fires()<br>	For a.fire=Each fire<br>		Add_Flame(EntityX(a\piv),EntityY(a\piv),EntityZ(a\piv),Rnd(1,4),.04,a\dx,a\dy,a\dz)<br>	Next<br>	Update_Flames()<br>End Function<br><br><br><br><br><br><br><br>Global flame01=LoadSprite("gameart\base.bmp")<br><br><br>;Each Flame of the fire<br>Type flame<br>	Field ent<br>	Field ang#<br>	Field size#<br>	Field alph#<br>	Field dis#<br>	Field dx#, dy#, dz#<br>End Type<br><br>;The fire itself<br>Type fire<br>	Field piv<br>	; Direction<br>	Field dx#, dy#, dz#<br>End Type<br><br><br>;Add a flame to the fire<br>Function Add_flame(x#,y#,z#,size#=1,dis#=.016,dx#=0,dy#=0.3,dz#=0)<br>	a.flame=New flame<br>	a\ent=CopyEntity(flame01)<br>	PositionEntity a\ent,x,y,z<br>	a\alph=1<br>	a\size=size<br>	a\dis=dis<br>	a\ang=Rnd(360)<br>	ScaleSprite a\ent,a\size,a\size<br>	EntityColor a\ent,Rnd(150,255),Rnd(0,100),0<br>	a\dx=dx<br>	a\dy=dy<br>	a\dz=dz<br>End Function<br><br>;Update flames<br>Function Update_flames()<br>	For a.flame=Each flame<br>		If a\alph&gt;0.01 Then<br>			a\alph=a\alph-a\dis<br>			EntityAlpha a\ent,a\alph<br>			RotateSprite a\ent,a\ang<br>			a\ang=a\ang+.2<br>			MoveEntity a\ent,a\dx,a\dy,a\dz<br>		Else<br>			FreeEntity a\ent<br>			Delete a<br>		End If<br>	Next<br>End Function<br><br>;Erase all flames<br>Function Erase_flames()<br>	For a.flame=Each flame<br>		If a\ent&lt;&gt;0 Then FreeEntity a\ent<br>	Next<br>	Delete Each flame<br>End Function<br><br>;Update all fires<br>Function Update_Fires()<br>	For a.fire=Each fire<br>		Add_Flame(EntityX(a\piv),EntityY(a\piv),EntityZ(a\piv),Rnd(1,4),.04,a\dx,a\dy,a\dz)<br>	Next<br>	Update_Flames()<br>End Function<br><br><br>;Add a fire to the scene<br>Function Add_Fire.fire(x#,y#,z#,dx#=0,dy#=.23,dz#=0)<br>	a.fire=New fire<br>	a\piv=CreatePivot()<br>	PositionEntity a\piv,x,y,z<br>	a\dx=dx:a\dy=dy:a\dz=dz<br>	Return a<br>End Function<br><br>tfire.fire=Add_Fire(0,0,0)<br><br><br><br>;in main loop<br><br><br>Update_Fires()<br><br><br><br>;remove after 25 iterations<br><br>se = se + 1<br>If se &gt;= 25 Then<br>HideEntity flame01<br>;erase_Flames<br>HideEntity Exp1<br>TranslateEntity tfire\piv,0,5000,0<br>End If<br><br><br><br>;locate the fire at target collision<br><br><br>PositionEntity tfire\piv,CollisionX#(bullet(q),1),CollisionY#(bullet(q),1),CollisionZ#(bullet(q),1) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
