<!DOCTYPE html><html lang="en" ><head ><title >Stuck with 1.106 and FastLib</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Stuck with 1.106 and FastLib</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Stuck with 1.106 and FastLib</a><br><br>
<a name="1252710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have read that there's an issue with FastLib not working with the latest version. So if I am to add Fast libraries on my game I will be stuck with v1.106?<br><br>That's a shame. Is there a workaround on this since the code is already out in the open? <br><br></td></tr></table><br>
<a name="1252934"></a>

<a name="1252935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have FastLib, last thing I've seen is:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=102094" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=102094</a><br><br>Currently running on V1.106 and Win7 and haven't tried it on Win8 or with &gt;V1.106 . <br><br></td></tr></table><br>
<a name="1252940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info Rick. What I'm concerned about is the open source version which is at v1.108. I would like to make some changes to the code in the future or if needed but since the source is the latest, I can't use it and have FastLibs at the same time.<br><br>Seems to be a small issue at the moment but I guess the future of blitz is now moving towards custom shaders and using DX9/11, and maybe Ploppy's Hardwired masterpiece would be the next viable solution. <br><br></td></tr></table><br>
<a name="1252973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, everyone who loves Blitz3d is keeping their fingers crossed for that one. <br><br></td></tr></table><br>
<a name="1252983"></a>

<a name="1252984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >videz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes for a couple of weeks of tinkering I finally have a grasp that the easy of use and prototyping capabilities of blitz3d for me is unrivaled. <br><br>It is very easy to create a game prototype from scratch with the help and backing of the plethora of code archives and 10 years of information shared here. I'm also hoping and routing for Hardwired to pull through and soon will support this great project! :) <br><br></td></tr></table><br>
<a name="1252986"></a>

<a name="1252987"></a>

<a name="1252988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Same boat here - stuck on 1.106 if I want to use FastLibs which is quite important.<br><br>I had problems with the Windows 8 fix implementation of my own as I had to compile separate binaries due to some systems otherwise crashing out at that point - I probably should just take a look at how its done in the B3D source and convert that back to B3D native code.<br><br>EDIT: Its done pretty much the same method as I use in native B3D so not sure why mine crashes on certain systems due to issues with different versions of ddraw.<br><br>EDIT2: Ah I see - its not just checking if the library exists before calling it, it is also checking the function exists before trying to set compatibility flags, will have to remember to fix that when I get back to coding. <br><br></td></tr></table><br>
<a name="1253203"></a>

<a name="1253229"></a>

<a name="1253232"></a>

<a name="1253234"></a>

<a name="1253238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just saw this <a href="http://www.blitzbasic.com/Community/posts.php?topic=102094" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=102094</a><br><br>EDIT: Completely off the cuff programming almost done in my head and untested so might not work at all but this _should_ implement the Windows 8 fix for those still on v1.106 without a 3rd party dll and work on older machines and some weird setups that seem to crash out otherwise:<br><br><pre class=code>
;kernel32.decls
;.lib "kernel32.dll"
;GetProcAddress%( hModule%, lpProcName$ ) : "GetProcAddress"
;GetModuleHandle%( lpModuleName$ ) : "GetModuleHandleA"

Function bbWin8fix()
	Local ddraw = GetModuleHandle("ddraw.dll") ; if it exists ddraw.dll should have been loaded by b3d
	Local procaddr
	Local apibank
	Local apiout
	
	If (Not ddraw) Then ; failed ddraw.dll wasn't loaded or not present on system (Windows XP and earlier?)
		Return 0
	EndIf
	
	procaddr = GetProcAddress(ddraw,"SetAppCompatData")
	
	If (Not procaddr) Then ; failed - SetAppCompatData doesn't exist in this version of ddraw.dll (_shouldn't_ happen)
		Return 0
	EndIf
	
	apibank = CreateBank(8)

	PokeInt apibank,0,12
	PokeInt apibank,4,0

	apiout = CallDLL("ddraw.dll","SetAppCompatData",apibank)

	FreeBank apibank

	Return apiout

End Function
</pre><br><br>Obviously needs the kernel32.decls if you don't already have those functions.<br><br>EDIT2: This is more or less reproducing what calldll does internally anyway so not sure if it will be any different to the issues on some older machines with trying to call ddraw.dll. <br><br></td></tr></table><br>
<a name="1253365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ^^ So basically I can't remember what the issues was with doing it in B3D natively - whether calldll wasn't having the desired effect or if it was still crashing on older systems like a userlib for ddraw.dll does and don't have either an older system or a Windows 8 system to hand at the moment to test - that code is basically doing the same as the calldll function does internally though slightly different via getmodulehandle instead of loadlibrary but will leave the code up for reference as it might be useful for somone doing something else. <br><br></td></tr></table><br>
<a name="1253384"></a>

<a name="1253385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >videz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Rroff. I will also try this one when I get a chance. I'm currently using Win7 only<br><br>I was also hoping for getting v1.108 to work with FastLibs. But I guess this should be totally in the hands of the author of FastLib (Mikhail) unless you have something up your sleeve.. :)<br><br>Thanks. <br><br></td></tr></table><br>
<a name="1253464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh wouldn't even know where to start on that one - would need some serious debugging and hooking/address translocation I'm guessing. <br><br></td></tr></table><br>
<a name="1253466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jimmy</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Been expeimenting as thibgs seem to have changed with windows versions. Stikl no luck on the titlebar icon.<br><br>Tab/task icon I've suceezed with so far <br>I post what I've suceeded with so far.<br><br>This code below is a programmers mess while he tries to learn<br>a new API :s<br><br>The sendmessage sewm to be the newer way and it dupports title (small icon 16x16) and tab (big icon 32x32),<br>But it crashes 90% of the times and the rest gives a clean space OR actually work 1% of the times.<br><br>Using Windows 7 here.<br><br>Any ideas how to go aboyt the titlebar icon without recompiling blitz?<br><br>[/code]<br>setappicon("1.ico")<br>	<br>Graphics 1280,800,0,2:SetBuffer BackBuffer()<br>repeat<br>; delay 1<br>flip<br>until mousedown(2)<br><br>Function SetAppIcon(iconname$)<br>iconname$="icon2.ico" ; extract and load its own exe file icon<br>WM_SETICON      = $80 <br>LR_LOADFROMFILE = $10<br>ICON_SMALL      = 0   ; 16x16<br>ICON_BIG        = 1   ; 32x32<br>IMAGE_ICON      = 1<br>GCL_HICON = -14<br>hWnd = api_GetActiveWindow() : hDC = api_GetDC(hWnd) : imageid = LoadIcon( hWnd, iconname$,0)<br>; imageid = api_LoadImage(Api_GetModuleHandle_Null(0), iconname$, IMAGE_ICON, 16,16, LR_LOADFROMFILE)<br>; imageid = api_LoadIcon(hWnd,iconname$)<br>; api_SetClassLong(hWnd,GCL_HICON, imageid)<br>;Flip<br>api_SendMessage(hWnd, WM_SETICON, ICON_SMALL, imageid)<br>api_SendMessage(hWnd, WM_SETICON, ICON_BIG, imageid)<br>;api_DrawIcon( hDC, 75, 75, imageid )<br>;WaitKey<br>End Function<br><br>; Notes of the used API calls and where to add them<br>; -------------------------------------------------<br>; kernel32.decls FILE ADD:<br>; Api_GetModuleHandle_Null%(lpModuleName%):"GetModuleHandleA" <br>;<br>; shell32.decls FILE ADD:<br>; LoadIcon%(hWND%,File$,Index%) : "ExtractIconA"<br>; api_ExtractIcon% ( hWnd%, File$, Index% ) : "ExtractIconA"<br>;<br>; user32 FILE ADD:<br>; api_DrawIcon% (hdc%, x%, y%, hIcon%) : "DrawIcon"<br>; api_DrawIconEx% (hdc%, xLeft%, yTop%, hIcon%, cxWidth%, cyWidth%, istepIfAniCur%, hbrFlickerFreeDraw%, diFlags%) : "DrawIconEx"<br>; api_LoadIcon% (hInstance%, lpIconName$) : "LoadIconA"<br>; api_LoadImage% (hInst%, lpsz$, un1%, n1%, n2%, un2%) : "LoadImageA"<br>; api_GetDC% (hwnd%) : "GetDC"<br>; api_SetActiveWindow% (hwnd%) : "SetActiveWindow"<br>; api_SetClassLong% (hwnd%, nIndex%, dwNewLong%) : "SetClassLongA"<br><br>; Programmers scratchbook<br>; -----------------------<br>; old in user32.decls crashed<br>; api_SendMessage% (hwnd%, wMsg%, wParam%, lParam*) : "SendMessageA"<br>;<br>; new in user32.decls empty icon in titlebar<br>; api_SendMessage% (hwnd%, wMsg%, wParam%, lParam$) : "SendMessageA"<br>;<br>[/code]<br><br><br><br>; notice also the  "loadicon" clone, does not seem to be the source of error though <br><br></td></tr></table><br>
<a name="1253468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you remove the slash from the first time you use the code tag this may be visible as code <br><br></td></tr></table><br>
<a name="1253485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >videz</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting code Jimmy. What I'm puzzled about is why the default IDE and the output exe doesn't have the rocket icon. The console icon is the default instead and seems that this was an intentional coding by BRL not to have an icon resource in it.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
