<!DOCTYPE html><html lang="en" ><head ><title >Grass placement</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Grass placement</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Grass placement</a><br><br>
<a name="736474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..I would like to place grass randomly on my terrain(not done by heightmap within blitz, but exported as a mesh from MAX)..is there any useful function someone wrote maybe?? if not,whats the best way to achieve this on such a terrains?? Any help is really apprechiated.. <br><br></td></tr></table><br>
<a name="736585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the easiest is using LinePick:<br><a href="http://www.blitzmax.com/Community/posts.php?topic=62925" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=62925</a> <br><br></td></tr></table><br>
<a name="736664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if it's a good idea to save a whola lotta grass in mesh and then load it into a level. Real dense lots of grass tend to slow down things. For grass you need to use some tricks. Additionally, think about to animate the grass (well not with an animated mesh, but with some simple entity rotation etc.). Today static grass may be a bit poor.<br><br>Suggestion: use DDS DXT3 alpha masked textures with the mask flag to get best results and intact z-order!<br><br>Grass depends on the topography of the landscape. is it rocky, has it hills, canyons or is it entirely flat as the netherlands. <br><br>Think about to use Grass patches, eg. made of several crossed (like in tictactoe) quads, eg: 3*3 quads, all of them scaled eg: w6:h1.<br><br>THen align them to the ground using linepick and aligntovector or so. If this initialisation takes too much time then cache the data to a file, and make the app load the data instead of linepicking.<br><br>You may use Entityautofade with Grasspatches to speed things up. as long as the gound texture has the same brightness, main color tone and contrast then you don't need grass in the distant areas.<br><br>A Green virtual grass layer texture would be useful to determine where it may grow and where it shouldn't This may be a simple image that fits your grass planting raster, that's especially useful when there are streets, buildings etc. <br><br></td></tr></table><br>
<a name="736878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bitmaps are quite usefull for placement of grass. You can store additional information in the colour channels too. <br><br></td></tr></table><br>
<a name="736880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..how this linepick working actually?? I have to define 2D area over mesh I wanna use for grass placement, and then do this linepicking and read PickedY for every grass entity I wanna place? <br><br>pick=linepick(x,100,z,0,-200,0,0.1)<br><br>and value -200 means what exactly? if I put it 200, is it same  value return with PickedY as well as with -200?? <br><br></td></tr></table><br>
<a name="736884"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> use a plugin added to max (glue...)<br>Use this plugin for place a spline (initially this spline is a circle) onto your mesh. after use the spacing tool to place your grass (or mesh) and finally export all your grass in a separate b3d file. this is one solution... <br><br></td></tr></table><br>
<a name="736891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I said before, storing all grass in one mesh may be very slow. You can fragment it at runtime, using someting like the clusterize example from the archives.<br><br>linepick works this way:<br><br>x,y,z,w,h,d<br><br>so -200 means the linepick on the Y axis goes from 100 to -100, practicly from heaven to underground. When you use 200 instead, you won't pick the ground. Also check out pickedNX etc. <br><br></td></tr></table><br>
<a name="736981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk wrote :Suggestion: use DDS DXT3 alpha masked textures with the mask flag to get best results and intact z-order!<br><br>is this true ? no moore a extra  zorder routine ? <br><br>hmm dunno <br><br></td></tr></table><br>
<a name="737041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Z-order problems only appear in alpha mode. My Suggestion was to use the Mask flag. When you use DDS (DXT3) textures with alpha information for the Masked mode in Blitz3D then the alpha data will be used to mask the texture in a very smart way. The contours will be interpolated, depending in the alpha values. In other words: no more blocky contours of masked textures, as well as no more darkish contours (fade to black artefacts).<br><br>Tipp: If you blur the contours then the alpha will also be blured and therefor the mask outline won't jitter too much.<br><br>When using photoshop you should not use an additional alpha channel, but make use of the unpainted or erased areas on the RGB layers. (Background layer must be transparent by default) <br><br></td></tr></table><br>
<a name="737087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...in order to make it really fast and nice, my approach was this..first, I create array of plain pivots all around terran where i wanna put grass mesh..then I create second array for grass meshes itself, let say 500..now, what I did is that when I move camera, I check given distance from camera (let say 300) and I place grass from grass array in to positions of those pivots whats within range of 300..every grass mesh outside of that range is repositioned in to new positions where is the pivots within given range..so, it would work fine, and very fast since all time is the same amount of grass units in visible range BUT..I didnt realize that pivot array taking so much processing time!!..even without anything on scene, without any mesh, after I create array of pivots, and do tests with flip false..I got 35 FPS..ha!..where did my processing power went?? I repeat, I didnt update anything in main loop, just create array of pivots, and thats all..no loaded meshes of any kind...how come pivots is so 'greedy' ?? It seems that Blitz3D rendering my fully textured level with bloom and DOF with 48K polys at 59 FPS and bunch of pivots with flip false reaching magnificant 35 FPS...hehehe..this is sexy..I love it.... <br><br></td></tr></table><br>
<a name="737152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..okay..it seems that major slowdown was happen becouse I use to play with arrays, rather than with Types..instancingalso working damn faster than generating grass entity by itself..my suggestion...run away from arrays with such a things..types is the king.. <br><br></td></tr></table><br>
<a name="737154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> my approch is setting all grass meshes in my level. then i use entityautofade. that works ok for me. no overhead in types/arrays/.... the trick is, a grass mesh consists of a bunch of grass quads (about 25) using single surface technique.<br>it did just a testlevel, so in "real-level" it might be slowing down... i'll see. <br><br></td></tr></table><br>
<a name="737162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Justus</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Once read LinePick was not really fast, so I think TerrainY would be the better choice in this case. <br><br></td></tr></table><br>
<a name="737165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did that randomly in MAX so its fine...TerrainY will not work for mesh terrains.. <br><br></td></tr></table><br>
<a name="737276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arrays slower than types? You must be doing something wrong there, they are faster than types, espeically if you access them directly by index.<br><br>What t3kIMAC said makes sense to me. single surface patches, where a good patch size must balance surfacecount and polycount.<br><br>And finally, the number of mask or alpha levels is still very important. Today I made a function that will cross a number of quads, like a star. With about 180 quads (and the same amount of masked levels to render) the framerate dropped straight under 10. So the angle the player will look at the grass may affect the speed too. <br><br></td></tr></table><br>
<a name="737348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..I cant see what i did wrong..its just array with created pivots, after they have been created I just enter in to main loop without any update, any loaded mesh, quad, or absolutely anything..and frame rate is 35! when I did same thing with Types, frame rate got 213..sooo... <br><br></td></tr></table><br>
<a name="737635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> i did a few tests with grass - i found a very good and fast solution (at least my pc can handle this easily).<br><br>make sure all the grass quads are singlesurface (i used copyentity for testing). place them all on the map and then use entityautofade. this gives you huuuuuge grass areas, with nearly no speed penalty. and they fade in and out just around the camera. this works like a charm.<br><br>you could boost it even more if you scale your grassmeshes like jfk said (6*x, 1*y, 6*z) and then adjust UV coords. then you'll have to set the autofade distance farer, otherwise you will get ugly fading errors. <br><br></td></tr></table><br>
<a name="737637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alien - you must be kidden. How many pivot's did you create? a million? And even then, there's no reason for arrays to be slower. It's their nature to be faster, cause they use less vectors. Accessing types by index may be up to 10 times slower than the same with arrays, as benchmark tests have shown (ok, some blitz version releases ago).<br><br>Please show us some sourcecode that will let us reproduce your results. <br><br></td></tr></table><br>
<a name="737643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want say only this: this post is very good.<br>I have learning very much of it.Thanks but...<br>Please show us some sourcecode that will let us reproduce your results. <br><br></td></tr></table><br>
<a name="737652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm really not kidding..I create 20 000 pivots, within array (no any textures or mesh loaded), and just went in to main loop without any processing over those pivots..I got 35 FPS..I did same with Types I got over 200 FPS..I am not sure whats going on, but its really case..<br><br>I have created this after initializing screen,<br><br>P_Pivot=Createpivot()<br>For i=1 To 20000  <br>   <br>  G_Pos(i)=CopyEntity(P_Pivot)<br>  <br><br>  EntityAutoFade G_Pos(i),100,200<br>  <br>  x#=(Rnd(-550,550)+Rnd(-5,5))<br>  z#=(Rnd(-550,550)+Rnd(-5,5))<br>  y#=0;y#=TerrainY(terrain,x,0,z)-Rnd(2)<br>  PositionEntity G_Pos(i),x,y,z<br>  G_Pos_I(grasscount)=Rand(-45,45)<br><br>  grasscount=grasscount+1<br> <br> Next<br><br>;main loop<br>While KeyDown(1)=0<br><br>UpdateWorld<br>RenderWorld<br>Text 10,10, FPS_framecount <br>Text 10,30,AvailVidMem()<br>Text 10,50, TrisRendered()<br>   Flip False<br>Wend<br>End<br><br>..and thats it..I didnt do any update or something within loop..same things like this one, done with Types giving me much much more faster results...<br><br>What I am trying to do now is to place those pivots over whole area where grass should be, then define second array (or types) with grass meshes, and place them around camera in specific range around it, with specific constant number of grass planes..so, when camera move system will find wich new Pivots is within range and wich grass planes is out of range and simply reposition those grass planes out of range in to places where is new pivots within range :)) ok, sounds a bit confusing but tests i did by now showing me that it  is damn fast, and results is very very nice...but to be honest i am still confused with slowdown coused by pivots in array...or pivots itself... <br><br></td></tr></table><br>
<a name="738274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrumpyOldMan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Naughty Alien<br><br>I'm wondering why you're creating and storing all the pivots? One of the things I found when I was playing around with animation is that a large number of Blitz entities will slow anything down. Store the x,y,z of your positions and do a simple proximity check ie diff_x*diff_x+diff_y*diff_y+diff_z*diff_z compared to visibility*visibility (you don't need to do the square root, and you could even write a simple dll to give true or false returns).<br><br>The more I look at entities it seems that they are set up for convenience rather than speed. I'm not sure what happened with arrays versus types in your case. Did you convert both arrays g_pos and g_pos_i to types?<br><br>Cheers<br><br>GrumpyOldMan <br><br></td></tr></table><br>
<a name="738331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello GrumpyOldMan..<br><br>Yes, I did realize that placing pivots as a reference for grass position is not smart idea at all..I just didnt realized that its taking so much processing time without doing anything in main loop actually...you are right, so I already removed pivots from scene and using them initially (placed by 3DSMAX automatically) to get position of grass..then storing their position values (x,y,z) in to an array and then passing values to DLL in order to get as a return indexes of grass what have to be replaced and appropriate new positions for them from stored x,y,z values..I limit maximumnumber of replaced grass objects about 100, and total amount of grass field around camera 500 and its really working fine (except I got some error in DLL, after replacement cycle happen 1024 times, I'm trying to figure out what did I do wrong there)...but once I clean up this it will work really nice...by the way, regarding pivots, once we create it, whats actually created, just their position x,y,z or something more?? I mean..what is the difference from my storing x,y,z values and creating one pivot wich containing this value already by his creation?? <br><br></td></tr></table><br>
<a name="738357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrumpyOldMan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Naughty Alien<br><br>Even though you are creating just a pivot, I believe there is more going on behind the scenes as regards to entity storage and sorting. I'm not a great programmer with any great insights but I do know that if you store 200,000 x,y,z values in an array there is a significant difference in performance to 200,000 pivots :). With regards to the grass system are you rebuilding the grass mesh based on camera proximity per render or moving already created mesh pieces?<br><br>I'll be away for a few weeks but I'll look in when I get back.<br><br>Cheers<br><br>Grumpyoldman <br><br></td></tr></table><br>
<a name="738425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi GrumpyOldMan<br><br>System how I wanna make it working with fixed constant number of grass objects (500 units)..those grass objects is placed around player camera, within range specified in function call..so, once you moving camera, grass objects out of specified range will be repositioned in to area within range (I wanted to use already prepared pivots on terrain for those information regarding new positions for grass objects out of range, but I drop it already)..so it means that system will basically render all time 500 grass objects, nicely animated, and cover huge areas at same time with decent speed..nice feature will be also control over density of grass, simply resizing range area on to smaller reasonable value.. <br><br></td></tr></table><br>
<a name="743691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have packed a small demo of my grass system:<br><br>www.delivery-game.com/grasstest.zip<br><br>its a quick hack, so do not expect high quality ;-)<br><br>it works as followed:<br><br>- loading grassquad<br>- make lots of copies of it using copyentity()<br>- position them with positionentity<br>- let them fade with entityautofade<br><br>thats it. this demo is rendering max. 10.000 grassquads (depending on your LOD Range of course) <br><br></td></tr></table><br>
<a name="743693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I haven't followed this thread, so I might be stating the obvious, but when I set the LOD level to all the way, it's getting dead slow (with only 5000 tri's!?!) - even though I've got a beafy computer/graphics board.<br> <br>Are you copying quads using copyEntity or are you using a single surface system?!<br><br>D. <br><br></td></tr></table><br>
<a name="743700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> in this hack i am using copyentity.  a huge grassrange isn't possible with nowadays hardware. thats why AAA games limit the grass rendering distance. with this demo, you can have a decent amount of grass around your player/camera with only a few lines of code. and best thing is, you need absolutely no code&amp;calculation in your mainloop for fading grassquads. sure you can optimize this system using real single surface system and grassquad-blocks but thats another one... <br><br></td></tr></table><br>
<a name="743732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..I just finished my system few days ago, its working a bit different..first, you dont have to make such a huge number of gras entity copys..here is a steps<br><br>-define how many gras units you want around your point of interest (camera)<br><br>-define distance from your point of interest you wanna cover with grass units<br><br>thats it..system will check for grass units outside of range and simply replace them within empty space within range..it means you dont have to create huge number of copys and then entityautofade them...on this way you create 1000 units and you have all time (in memory and on scene) actually just 1000 units with excellent cover over whole area since they automatically repositioning themselves once they get out of specified range...its working trough DLL and its really fast...it has been purposely done for our upcoming 3D platformer...I'll update forum once we come out with Practice level.. <br><br></td></tr></table><br>
<a name="744140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> i updated my version. replaced CreateSprite() with CreateQuad() and did a few optimisations - runs at nearly double speed in comparison to the old version. just redownload it. <br><br></td></tr></table><br>
<a name="744251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I like this thread since grass is an important special task in a game engine.<br><br>personally I think the best solution is to use a combination of both, EntityAutofade as well as the distancebased reposition code. This way you can smoothly fade in the grass on the borders of your grass area, where the plain reposition code may show pop-in quads when you have a long range view (eg. when looking down from a hill)<br><br>some time ago I used such a reposition code that would determine the position of the grass and the rotation of it by reproducable RND numbers with a seed that is initialized by the current space sector. This way you can walk virtualy endless far away, then come back, and everywhere the grass is repositioned correctly. So, basicly you don't need to store the position and rotation of the quads. But in a smaller world it may be faster to simply precalc them and store them in arrays. <br><br></td></tr></table><br>
<a name="776072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is a little video of my latest version of my grassengine (all done in pure blitz): <br><br>www.t3k-entertainment.com/grassengine.mpg<br><br>There are only 750 grass-tris onscreen. they reposition themselves when required (based on simple distance checking). since rotation/scale/color are (pre-)stored in arrays, lightmapped grass is also available. i am using 750 copyentities() with entityautofade. right now i am optimizing the engine using singlesurface grasspatches for even better performance. i also have a small editor where i can scale/rotate and position the grasspatches by hand. lightmapped color will be read automatically - the grass blends perfectly with lights/shadows. the grass is animating too (optionally) - but in this video you can't see it very well, 'cause the camera is always moving.<br><br>at my rig the engine performs about 130-200 fps (without singlesurfacepatches).<br><br>@naughty: whens your practice level out? i'd like to see your grassengine in action. <br><br></td></tr></table><br>
<a name="776661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> My player can't handle the mpeg.<br><br>If you use Single surface then you have to z-sort the tris each frame.<br><br>Using Copyentity isn't that bad. When you use DDS in alpha mode then you only have to resposition the copies in a for loop around the player, eg: for x=xp-100 to xp+100 and the same with Y. This way they will be sorted automaticly. Did I already mention (for some strange reason) using DDS alpha was running at the double speed as using BMP? <br><br></td></tr></table><br>
<a name="776712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> @t3K|Mac<br>right now I'm working on level geometry (5th world)..after that I'm going to release Tutorial level with some nice features in game (without characters at the moment), to show physics, grass engine, specular lights over surface, etc...month ago (something like that) I post sky temple level and how it will look..so, soon after I clean up geometry, I'll release small example whats going to be in regarding content itself without characters/gameplay at the moment... <br><br></td></tr></table><br>
<a name="776730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @jfk:its a plain mpg. i am using quicktime plugin to play it.<br>i am also using dds files, not bmps. when i said singlesurface, i didn't meant to replace all copyentities with a singlesurfacemesh, i just replace some single grasspatches with a bunch of grasspatches (these are singlesurface) which cover a bigger area. so i am capable of virtually rendering more than 750 grassquads with only using 750 quads.<br>i will give banks a try, maybe this is faster than lots of huge DIMs. I am gonna squeeze every fps out of my grass-system.<br><br>@naughty: i cant wait to see your demo. mine is taking another bunch of weeks/months ;( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
