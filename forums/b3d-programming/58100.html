<!DOCTYPE html><html lang="en" ><head ><title >Home made Random Function?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Home made Random Function?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Home made Random Function?</a><br><br>
<a name="646294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm messing about with a simple procedural routine but would like a specific seed to generate the same random number on everyones machines.  I know there are known issues.<br><br>Has anyone created their own function which can be used in a similar was to the native version?  Even if you couold point me in the direction of convertable code/theory to create one myself?<br><br>I'd like to avoid DLL's completely.<br><br>Cheers <br>Stevie <br><br></td></tr></table><br>
<a name="646305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Google for 'Mersenne Twister'. That should throw up plenty of code to pick over. <br><br></td></tr></table><br>
<a name="646321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OJay</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well...<br><br><pre class=code>
SeedRnd "myspecialseed"
Print Rnd(0,1)
Print Rnd(0,1)
Print Rnd(0,1)
</pre><br>should print out exactly the same numbers on EVERY machine, assumed all compiling with the same blitz-version!<br><br>on mine with blitz3d (and 32bit cpu) i get:<br><pre class=code>
0.736565
0.3433
0.122169
</pre><br>try it out! <br><br></td></tr></table><br>
<a name="646353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> There was problems with this i believe. Morduun came up with a proper seed function... somewhere... <br><br></td></tr></table><br>
<a name="646362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=41909" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=41909</a><br><br>if you look at the last post there, someone has done a lib for blitz3d/plus and MAX. I hope that helps. <br><br></td></tr></table><br>
<a name="646448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought there was a problem with this, and I remember Morduun complaining about it all the time, but OJay's example gave me the same results, so what is the actual problem with the random seed?<br><br>I thought it had to do with different machines treating the same seed differently, but in that code ^^^ it seems to work properly, so now I'm confused. <br><br></td></tr></table><br>
<a name="646494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I get the same results too but I was under the same impression as Pongo as it's been discussed quite a few times in the past 2-3 years.   I'll check out Morduun's stuff and the Mersenne Twister.<br><br>Cheers Guys :) <br><br></td></tr></table><br>
<a name="646529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simple solution, definitely not the best, is the following which I have used on occasion - <br><br><br>create a file called 'random.txt'<br><br>decide what precision you want with your random numbers, perhaps a byte (0-255) for instance,<br><br>write a few thousand values from 0-255 generated at random and store in your file 'random.txt'.  <br><br>The above steps are only needed to be done once and never again after that.<br><br>In your game/app read these values, from the file, into an array, bank or type whichever suits best.<br><br>Assuming for the moment you went with 1000 values, then you can make a simple function similar to<br>'seedrnd millisecs()' by setting the first random number to be generated in your sequence = millisecs() mod 1000 (same value between 0-999).  Make sure you store the 'seed' used if you are intending for a replay of the game or similar.<br><br>From that point, after generating your starting point simply iterate through the list of numbers, incrementing the array index by one each time and looping around when you reach the maximum.  <br><br>Of course, this means that your 'random sequence' will repeat after you've gone through all the numbers in the sequence but I would think it highly unlikely it would be noticed.  As long as you start from a different point in the list initially it's hardly going to matter.<br><br>As I said, not a great solution but it is easy and allows for the same simulation to take place each time if given the same seed on each person's machine since it uses the same data file as a reference. <br><br></td></tr></table><br>
<a name="646773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, now I'm super curious as to what the problem really is. I tested this on 2 different machines and got the same result.<br><br><pre class=code>
SeedRnd 1000
For x = 1 To 10
	Print Rand(0, 1000)
Next

Print 

SeedRnd "myseed"
For x = 1 To 10
	Print Rand(0, 1000)
Next

WaitKey()
</pre><br><br>and the results were<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

557
293
171
327
442
443
807
864
229
11

737
343
122
318
973
755
728
939
910
416
</textarea><br><br>The interesting thing to me is that this appears to be working properly, BUT,... I took that code from an earlier thread (linked above) and it had given different results than what was listed there. (maybe an older version of blitz?)<br><br>Can anyone enlighten? <br><br></td></tr></table><br>
<a name="646880"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> SeedRnd "myseed" (or any String that starts not with a number) is the same as SeedRnd 0<br>Strings that begin with Numbers are converted to numbers<br>SeedRnd "3565" is the same as SeedRnd 3565<br>So, using Strings with SeedRnd is rubbish and only confusing beginners...<br><br><br>I never met the situation when SeedRnd produced different lines of numbers on lots of different computers.<br>I read years ago that there were some series of Intel CPUs that produced errors rounding numbers ... so they would change the line of numbers compared to other CPUs ... but this was ages ago ...<br><br>. <br><br></td></tr></table><br>
<a name="646902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yan</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark has explained this but I can't remember exactly what the problem is. It's something to do with him using a FP routine and the FPU state not being guaranteed across multiple CPUs...or something...<br><br>Do a forum search for more details. <br><br></td></tr></table><br>
<a name="646939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought the problem was that different numbers were sometimes generated across different CPUs? Something like that, anyway. <br><br></td></tr></table><br>
<a name="647118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  Ok, now I'm super curious as to what the problem really is. I tested this on 2 different machines and got the same result. <br></div><br><br>Mordy posted a test which was run on an awful lot of machines. Trust me, it's not reliable, and Skidracer himself confirmed it, if memory serves. You'll get the same results from most of the people, but not all the people. When you're using it for procedural content generation, or fractal seeding, you need it 100% and it's just not. <br><br></td></tr></table><br>
<a name="647128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahhhh, got it.<br><br>Just thought it was a bit odd, since I had seen a lot of posts about it, and then it appeared to be working. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
