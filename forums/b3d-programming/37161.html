<!DOCTYPE html><html lang="en" ><head ><title >Loadimage - maximum image size</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Loadimage - maximum image size</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Loadimage - maximum image size</a><br><br>
<a name="407996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mhorvatic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I was wondering what is the maximum image size that I could load with the Loadimage function?<br>I tried 4200x600 pixels and I get a lot of trash on screen.<br><br>However with 4000x600 image it works just fine.<br>Of course I have to crop the image to the screen size to produce it on screen.<br><br>Thanks,<br>Marko <br><br></td></tr></table><br>
<a name="408018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Binary_Moon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Generally it is recommended that you don't load any images larger than the screen resolution. 4000 * 600 may work on your computer but it is not guarenteed to work on others. I would suggest breaking the image up into 5 or 6 seperate files and then just drawing them side by side. <br><br></td></tr></table><br>
<a name="408044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mhorvatic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the response,<br><br>however I don't understand why it would not work on any other computer. What I did is: I loaded the whole image (4000x600) and then copied only the screen size of the picture to front buffer. this should work on any computer no matter how big the picture realy is. <br><br>I am trying to make a scrolling picture on the screen and have images larger than 4000 pixels in width.<br><br>thanks,<br>marko <br><br></td></tr></table><br>
<a name="408060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some graphics cards may handle this badly.<br><br>I used to have an nvidia vanta which displayed junk when I tried to load a very wide image, about 5000 pixels. <br><br>But I could load and properly display an even bigger image with the same card. This bigger image was so large it would not fit into the 16mb of graphics memory. Apparently Blitz then loaded it into system RAM and copied only the required portion to the screen display each frame. <br><br></td></tr></table><br>
<a name="408066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> On a related topic, i've had no problems loading large images (4096x4096), but when i use createimage to create an image the same size, frame rate suffers drastically? <br><br></td></tr></table><br>
<a name="408074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd's absolutely right.  One of my laptops absolutely refuses to load images larger than screen size -- the remaining image gets filled with random memory garbage when you try to display it; you have no guarantee that loading any images in larger than that will work.  IIRC it's to do with the way drivers interact with DirectX's surfaces but the specifics elude me.<br><br>To do what you want to do reliably, you'll need to chop the image up into smaller bits and tile them traditionally. <br><br></td></tr></table><br>
<a name="408075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your trying to display and scroll the super large image, maybe you should look into tile maps :o) <br><br></td></tr></table><br>
<a name="408497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was under the impression that Mark has implemented code to automatically break up the images behind-the-scenes, so you might want to post this in the bug reports forum.<br><br><div class="quote"> I tried 4200x600 pixels and I get a lot of trash on screen. <br></div><br>I'll wager 4096 is the magic number for your particular card, before it starts screwing up...  Powers of 2. <br><br></td></tr></table><br>
<a name="408534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mhorvatic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello all,<br><br>Thank you for all the comments.<br>However, this still doesn't solve the problem.<br><br>What I need to do is to display a scrolling image on screen that is larger than 4000 pixels. Howerver I do not have any influence on the images (i can't change them because this is supposed to work dinamicly for any picture put into the folder).<br><br>What I have learned here is that there is no way I could load a bigger picture (bigger 4000 pixels in width) and work with it? Does this mean that LoadImage loads the complete image into video ram? Can I load the image directly into ram somehow and then move parts of it into video ram?<br><br>thanks,<br>Marko <br><br></td></tr></table><br>
<a name="408648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That isn't the whole truth. I have some problems that are related to this topic. Try the following:<br><br>pic=createimage(5120,256)<br><br>then fill the pic with some random graphics, then draw it to the screen. On my Computer this works without any problems. But big surprise, when i use SaveBuffer or SaveImage to save this image as a BMP, I got some vertical garbage strips in the File.<br><br>The fact that this happens whle saving (or in your case while loading) suggests, that it isn't a videoram issue, but rather a file operation problem. probably a buffering bug.<br><br>Please try the CreateImage test.<br><br>( BTW has anyone an idea how I could save an array of images in one big image to be used with LoadAnimTexture WITHOUT to use SaveBuffer? Should I manualy save the BMP? Maybe use a Bank to save it quickly? any BMP Header description around?) <br><br></td></tr></table><br>
<a name="408679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i have some new infos:<br><br>I have written a custom BMP export function that will save an Image Pixel by Pixel.<br>Although I can drawImage a 5120*256 Image that was created using CreateImage to the screen without any troubles, the same carbage stripes reappear in the saved faile that I used to save using my custom BMP Save Function. Now this is weird. It seems like:<br><br>PIxels can be written at any image size.<br>Pixels may return garbage when you read (ReadPixel or ReadPixelFast) them from very big images!<br><br>can anybody confirm this? <br><br></td></tr></table><br>
<a name="408739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know about these 2 statements but I can add that: Pixels won't return garbage when you read them from very big images IF the portion that you read is on screen (fitting in screen resolution).<br><br>That's a statement from previous experience with (loaded)images of 4000*600 or bigger (don't know if there is a limit) and this on all my computers (got 4, all different videocards and cpu). I was scrolling the image and saving bmp's of 800*600. <br><br></td></tr></table><br>
<a name="408754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I got a workaround that works for my custom code:<br><br>my frame-handles (images) for the animTexture are stored in the array "strip(n)", so I only need to readpixel them to store the big picture/animstrip. It was a bit confusing to read from the right frame while writing the big picture. It is no longer a generic BMP Saver now, but works for me.<br>Surprisingly the Animstrip loads correctly when loaded with the LoadAnimTexture command.<br><br>For your Problem with the Loading Garbage artifacts, you could write a custom Loader, something like this (I assume it's a 24bit BMP):<br><br>n$="bipicture.bmp"<br>fs=filesize(n$)<br>img=loadimage(n$)<br>w=imagewidth()<br>h=imageheight()<br>; (alternatively you could also read w and h from the bmp header: at offset 18 and offset 22 are width and height in 32 Bit values (low bytes first))<br><br>freeimage img<br><br>img=createimage(w,h)<br>bank=createbank(fs-54)<br>re=readfile(n$)<br>readbytes bank,re,54,fs-54<br>closefile re<br><br>setbuffer imagebuffer(img)<br>lockbuffer<br>for y=0 to h-1<br> for x=0 to w-1<br>  adr=(x*3)+(y*w*3)<br>  r=peekbyte(bank,adr+2)<br>  g=peekbyte(bank,adr+1)<br>  b=peekbyte(bank,adr+0)<br>  rgb=(r shl 16)or(g shl 8)or b<br>  writepixelfast x,y,rgb<br> next<br>next<br>unlockbuffer<br>setbuffer backbuffer()<br><br>Freebank bank<br><br><br>something like that (not tested). If you want to use other Image Formats, it may be harder. <br><br></td></tr></table><br>
<a name="408757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> LAB - Didn't work for me: The garbage bar was visible all across the whole width of the image. <br><br></td></tr></table><br>
<a name="411486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mhorvatic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my opinion there must be a problem with the loadimage command rather then the way to show loaded picture on screen.<br><br>Best regards<br>Marko <br><br></td></tr></table><br>
<a name="411487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>there must be a problem with the loadimage command<br> <br></div><br>No, it's just a limitation of different graphics cards/drivers. <br><br></td></tr></table><br>
<a name="411584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> A reference from gamedev.net implies that DirectX 5 and up can create image surfaces of =any= size; if the drivers or hardware don't support the operation then the image is created in system ram.  This is expected behavior, and in a perfect world you'd be able to trundle along with your original plan -- though with images that size you'd be constantly swapping out between system ram and video ram, which isn't good practice because it makes a significant speed hit.<br><br>As this isn't a perfect world, what I suspect is happening in these 'garbage' cases is that a driver reports that the card has this capability when it actually doesn't, and the result is the garbage you're seeing on a lot of older cards.  Unfortunately there's nothing you can do if you want to stay compatible with these cards aside from keeping image size no larger than screen size. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
