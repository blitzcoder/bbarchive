<!DOCTYPE html><html lang="en" ><head ><title >Sswift's event system question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sswift's event system question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Sswift's event system question</a><br><br>
<a name="489995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dustin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using Sswift's nifty little event system: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=632" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=632</a><br><br>Question... how do you kill an active event before it expires?<br><br>Example:<br>Create an event-<br>  Newevent.event(5,MilliSecs(),MilliSecs()+5000)<br><br>To kill it the only way I see, at the moment, is to cycle through all of the events, find it then kill it:<br>  For ThisEvent.event = Each event <br>      If ThisEvent\event_type = 5 Then Delete ThisEvent<br>  Next<br><br>Is there a more efficient way? <br><br></td></tr></table><br>
<a name="490016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Heh, I don't even use that myself (too much work to bother with event systems unless I'm forced to with Blitzplus, and then only for windows events) so I don't remember exaclty what I was doing with that system, but I think I can offer a suggestion.<br><br>Looping through all the events really wouldn't be any kind of performance hit worth worrying about.  I would just do that.  I loop through large types with lots of objects in many of my systems.  It's just not going to suck that much CPU time to worry about.  Less than a millisecond probably.<br><br>But if you really want to delete an event faster, you'll have to store the pointer to the event type somewhere.  And since the system can delete an event at any time if it's a timed event, then you need to worry about what happens if you try to access that event manually after it has been deleted by the system.<br><br>Thankfully, Blitz helps you out here.  I think.  I'm pretty sure that if you have a pointer to a type in another type, that if the type is deleted, the pointer in the type referencing it will be automatically set to null.<br><br>I think this might even work if the type is in a variable.<br><br>So if you go KillMe.Event = New Event, and then you go Blah.Event= KillMe then if you go Delete KillMe, then Blah should be set to Null.<br><br>It should be easy for you to test this.  But in any case, if that does not work, I am almost 100% positive it will work if Blah.Event is a field in a type.  <br><br>But that's kind of kludgy, don't you think?   I think the better solution is to just make a killevent function that goes through and looks for events of a specific type like you show above and kills them all. <br><br></td></tr></table><br>
<a name="490018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dustin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool!  I'll take you're word for it.  And quite honestly I'll never have more than 5 or 6 events active at any moment.  It was more for future planning.  I just thought that there was a more efficient system out there.  I'm pleasently surprised to see that I was wrong!<br><br>Thanks! <br><br></td></tr></table><br>
<a name="490030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dustin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, still struggling here a little bit.  I understand that if you create a pointer that references an object in a type and then kill that pointer you are in effect killing that object in the type.<br><br>But how do reference the pointer to the type?  I've tried referencing it with a standard variable and I've tried creating a new type who's sole purpose is to point to the other type.  But all attempts seem to end with a "Variable must be a Type" error.<br><br>Okay, so what am I mucking up here? <br><br></td></tr></table><br>
<a name="490036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Type Event<br>Field Nothing<br>End Type<br><br>Type Monster<br>Field Something.Event<br>End Type<br><br>ThisMonster.Monster = New Monster<br>ThisEvent.Event = New Event<br>ThisMonster\Something = ThisEvent<br><br>Delete ThisEvent<br><br>IF ThisMonster\Something = Null Then Print "Hooray!" <br><br></td></tr></table><br>
<a name="490041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dustin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You make it look so easy.  Big thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
