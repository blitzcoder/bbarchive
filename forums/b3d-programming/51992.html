<!DOCTYPE html><html lang="en" ><head ><title >point enitity</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >point enitity</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >point enitity</a><br><br>
<a name="580249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im creating a 3D Verlet Ragdoll and what Im trying to do is point an entity at another entity (or point it at xyz, doesnt matter), I have tried using pointentity command and also the following code found in the archives :-<br>;===========================<br>;Point Entity at x,y,z<br>;===========================<br>Function Point_Entity(entity,x#,y#,z#)<br>	xdiff# = EntityX(entity)-x#<br>	ydiff# = EntityY(entity)-y#<br>	zdiff# = EntityZ(entity)-z#<br>	dist#=Sqr#((xdiff#*xdiff#)+(zdiff#*zdiff#))<br>	pitch# = ATan2(ydiff#,dist#)<br>	yaw#   = ATan2(xdiff#,-zdiff#)<br>	RotateEntity entity,pitch#,yaw#,0<br>End Function<br>;===========================<br><br>But when both the entity and target are moving, the entity tracks the target and points at it, but it sometimes spins (thats the best way to describe it), this happens when using both the above methods. I've tried using aligntovector but no success.<br>Has anybody else come across this problem and managed to find a solution. <br><br></td></tr></table><br>
<a name="580254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only trouble with pointing one entity at another is that the roll of the entity can end up being anything - this is probably the spinning you're talking about.<br><br>Just off the top of my head, try adding the following <b>after</b> pointing the entity at the target:<br><pre class=code>RotateEntity ent,EntityPitch(ent,True),EntityYaw(ent,True),0,True</pre><br>Does that help? Probably not. lol. :) <br><br></td></tr></table><br>
<a name="580265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanx big10p, but unfortuanately that didn't fix it, and thanks for the speedy response. <br><br></td></tr></table><br>
<a name="580280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use this instead ... should be quicker too.<br><br><pre class=code>

global PIVOT = createpivot()

;===========================
;Point Entity at x,y,z
;===========================
Function Point_Entity(entity, x#,y#,z# )

   positionentity PIVOT, x, y, z
   Dy# = deltayaw( entity, PIVOT )
   Dp# = deltapitch( entity, PIVOT )
   turnentity Entity, Dp, Dy, 0

End Function
;===========================

</pre> <br><br></td></tr></table><br>
<a name="580285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie, you've come to my rescue once again, cheers mate, works great. I'll soon be giving your ragdoll-'Bender' a run for his money.<br><br>oops, spoke too soon, its still has a spin to it. If I put this code in on its own, my entity seems to rotate out of control, if i put it after pointentity command, then I get the same results as before. <br><br></td></tr></table><br>
<a name="580314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've believe I've used this ones - in psuedo:<br><br>pointentity ent, Target<br>p = entitypitch(ent)<br>y = entityyaw(ent)<br>rotate ent, p,y,0, 1<br><br>or if you have a vector, reset the object before pointing:<br><br>rotate ent,0,0,0, true<br>aligntovector ent, xvec,yvec,zvec, 1 (xaxis / pitch)<br>aligntovector ent, xvec,yvec,zvec, 2 (yaxis / yaw)<br><br>hope this helps<br>(sorry was in a hurry ;)<br>d. <br><br></td></tr></table><br>
<a name="580473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the entity you're rotating parented to another entity?  If so then you probably just have to use the global flag for turnentity. <br><br></td></tr></table><br>
<a name="581322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexus6</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Danny, the "pointentity" code worked but not the vector one, which is a shame because the vector one would of been faster and would of saved me aditional work creating pivots for the enity to point at.<br><br>@ Stevie G, <br>Stevie, no the entity is not parented to anything, just positioned at the verlet co-ordinates and constarined to the tail verlet, I dont know why it didn't work, especialy if your using similar code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
