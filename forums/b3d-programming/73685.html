<!DOCTYPE html><html lang="en" ><head ><title >A flashlight - How to do perspective projection?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A flashlight - How to do perspective projection?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >A flashlight - How to do perspective projection?</a><br><br>
<a name="823403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi!<br><br>i was working on a flashlight source a time ago and i discovered that tformpoint helps a lot. it helps me to project the flashlight texture.<br>the only problem is that the texture is projected parallel and not perspectively. parallel in this case means, that the flashlight spot will appear with the same size in every possible distance!!!<br>it's like the flashlight has a diameter of 2 meters and would project like a laser!!!<br><br>is there a way to project this whole thing perspectively?<br><br><a href="http://dev-ch.de/upload/files/Devils%20Child/Flashlight.zip" target="_blank">http://dev-ch.de/upload/files/Devils%20Child/Flashlight.zip</a> (786.82 KB)<br><br>if you don't find out, you still have my source code which works almost well Smiley<br>thanks for ANY help!!:)<br>bye <br><br></td></tr></table><br>
<a name="823511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your calculations use the flash light radius and fixed values.<br>But there is no calculation basing on the distance and the zoom / Field of View <br>That would be needed to calculate the real radius depending on the distance to the flash light source <br><br></td></tr></table><br>
<a name="823514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I havent looked at the source but cant you just scale the radius based on distance? <br><br></td></tr></table><br>
<a name="823542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> if i scale down the flashlight spot for every vertex, i get a spot with a shape of a heart or something...<br><br>but i could use the Z-DISTANCE instead of radial distance. i dont know how to do that or wheter it will work! <br><br></td></tr></table><br>
<a name="823622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main problem actually will be that the UV needs to be stretched from the center out. So you will most likely need Fredborgs code archive entry for PickedU PickedV to get the "picking point" UV and stretch it from there.<br><br>Your projection has a different problem anyway: you only do one pic ... that can not work unless you are prependicular to the wall and the wall is flat ...<br><br>btw: Did you have a look at Fredborgs image projector sources he uploaded long ago? (the batman like projector in a closed room) <br><br></td></tr></table><br>
<a name="823655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> i know that badmap projector. its pretty cool! also, it causes the "hear-shape" problem i described before<br><img src="http://www.dev-ch.de/upload/files/Devils%20Child/Screen227.jpg"> <br><br></td></tr></table><br>
<a name="823656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats an issue not bound to the projection.<br><br>Thats an issue thanks to the fact that the line of disortion there is a polygon border between 2 triangles ... Thats the same as the texture disortion you get with 2 polygons next to each other where it looks like the texture is targetting the top right corner. <br><br></td></tr></table><br>
<a name="823686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> so the soultion must be something between fredborg's idea and mine.<br>fredborg is projecting it the way, that the spot gets dynamicly bigger on each distance. that causes the glitch of that "heard shape" i dont have. but i have no size-correction...<br>or how ever i should explain:(<br><br><br>so whats your idea? <br><br></td></tr></table><br>
<a name="823693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Identifying fredborgs projection method and trying to integrate it into yours.<br><br>But I'm not sure if yours does not suffer this problem actually. The pillars are a very bad object to check for it as they always have near-perpendicular surfaces<br><br>But as you are the master of "stencils" ;-): Wouldn't it be simpler just project it that way instead of trying to fake something that will not work with objects smaller than the light radius at the given distance (you would need far more than only 1 pick to make that work)<br><br>Alternatives are investigating jRenderMonkey, OGRE and others texture projectors. <br><br></td></tr></table><br>
<a name="823707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i thought about stencils for a moment but than realized that this is not possible with stencils but rather with some tformpoint or pick operation...<br><br>but every solution i tried yet ends up in crippled "heard like shape" or in parallel projection :( <br><br></td></tr></table><br>
<a name="823778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "some" is exactly the problem.<br>You would need a far higher amount of picks ... if you did that, you could actually do it easily by using Fredborgs PickedU PickedV even with projection :) <br><br></td></tr></table><br>
<a name="823876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, so i actually need to double and tripple every polygon in the scene. even if i use 10 times more polys it doesn't look very better <br><br></td></tr></table><br>
<a name="823894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see where more polygons should help with that problem that a perspective projection should check the perspective to project :)<br><br>But I am sure there must be a more intelligent way to solve this issue.<br>You mentioned that stencils don't work for this purpose.<br>But there are still z Buffers and Acum Buffers to missuse although I don't think that the later one is an option in DX7 <br><br></td></tr></table><br>
<a name="823927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> well then, at best would to ask Tom.<br>so Tom if you read this, can you help us please :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
