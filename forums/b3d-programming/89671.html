<!DOCTYPE html><html lang="en" ><head ><title >Models' Texture Movement</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Models' Texture Movement</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Models' Texture Movement</a><br><br>
<a name="1018744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I have a really simple problem. In my game, I have several places in my world where there are rivers. I have all the rivers as separate model children called 'river' in my world model. What I want know how to do is create a UV map on the rivers so that if I go into B3D and EntityTexture a water texture to the 'river' child only, I can then PositionTexture the water over 1 to the right or something each frame and the texture will appear to flow all over the river without any strange artifacts. Thanks! <br><br></td></tr></table><br>
<a name="1018750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to use a program that can do UV mapping.  I use Ultimate Unwrap Pro, works great. <br><br></td></tr></table><br>
<a name="1018783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @stayne: I have the tools to do UV mapping. What I'm asking is how would I make the map correct so that it flows in the directions I want it to. Oh, I forgot to say, I'm using DeleD to make my worlds. <br><br></td></tr></table><br>
<a name="1018824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to map it, so all the triangles run flat, straight down the texture. That way, you can easily scroll the texture. Only problem you will have is UV distortion. I'm not really sure how to properly fix that... <br><br></td></tr></table><br>
<a name="1018871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how mapping in DeleD is done, but here's how I would do it [in 3DS]:<br><br>Create a quad "strip" (the river or stream). Make it the shape you want, and weld the vertices to the rest of the level.<br><br>Then I'd go through all 4 vertices of each quad of this river strip mesh, manually editing the UVs of each vertex in order to make that quad map perfectly the texture, regardless of it's 3D shape. If you go try mapping each quad with a customized planar gizmo, it <b>won't</b> hold the same results - unfortunately, you really have to go manually with this (unless you can script a gizmo for this, somehow).<br><br>Here's a visual description:<br><img src="http://img193.imageshack.us/img193/6307/riveray.png"><br><br>The numbers are the UVs each vertex should have. Consider this data as the following format: "U,V".<br>What you're looking for here is making each adjacent edge continue the texture in a <b>seamless</b> way.<br><br><div class="quote"> Only problem you will have is UV distortion. I'm not really sure how to properly fix that... <br></div><br>I don't think it's fixable in any way, since you're trying to apply a square\rectangular texture to a shape with a different ratio.<br>But what I believe will help is making each quad with a width and length ratio closer to the texture's, and making the river mesh more straight, without too strong curves (if that doesn't conflict with your level design, of course). You can have curved rivers, really, it's just a matter of balance and where you set your tolerance to stretching and skeweing. <br><br></td></tr></table><br>
<a name="1018877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks! I was hoping it would be that easy. Now, there's something I've been wondering. I know how you can grab model children from a model with FindChild and assign a variable to it to reference it. Is there some way to do something like that to grab individual textures or materials from a model? If so, I could use that to just texture the river in DeleD, then grab it in B3D and move it as opposed to applying it in B3D and moving it. <br><br></td></tr></table><br>
<a name="1018885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I don't think you should texture that river at all; just keep it with the polygons really.<br>That way there won't be any leftover brushes from your mesh, leaking your memory (since Finding a brush or a texture gives you a copy of said material, instead of giving you the original).<br>But I get what you said; it would indeed be awesome if we could just extract the currently applied texture and use that, instead.<br><br>You can find the river(s)\waterfall(s) entities with GetChild() too, which in turn would make your level design more modular with name prefixes and such. Then you'd use PaintEntity to paint each of these elements with a Brush that has that tileable water texture:<br><pre class=code>
For Index = 1 To CountChildren(MESH_Level1)
       
       child = GetChild(MESH_Level1,Index)

       If Left(EntityName(child),6) = "RIVER_" Then
              PaintEntity(child,FLOW_RiverBrush)
       End If

Next
</pre><br><br>That brush you would create with the <a href="/b3ddocs/command_list_3d_cat.php?show=Brush" target="_blank">Brush commands</a>, giving it a special name and the appropriate texture.<br><br>(I recommend you give intelligent prefixes to level elements, variables and so on 'cause that'll make things much easier and organized, of course. Not to mention it will ease the addition of further content to your game engine, which is one of the top priorities you should have when building it). <br><br></td></tr></table><br>
<a name="1018893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Expanding slightly on Kryzon's idea. What i do in my editor, is have the properties for the river, in it's EntityName. For instance:<br><br>EntityName "&lt;name&gt;River &lt;TextureScrollX&gt;0.1"<br><br>And run through each entity, extracting these properties, and storing each entity in a seperate type object. That way you can set lots of different entity properties in the editor, and build code to make these things happen when the code runs. <br><br></td></tr></table><br>
<a name="1018895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a good idea, Ross (although I go the lazy way and set it directly from the modelling application).<br><br>Do you know if there's a size limit regarding the entity name's string? (in case of elements with a lot of tags and properties). <br><br></td></tr></table><br>
<a name="1018896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've always wondered that myself. But i doubt i will run into it. I'm mearly creating say:<br><br>&lt;Name&gt;Platform_2 &lt;Trigger&gt;Key_Space &lt;TriggerDistance&gt;10 &lt;TriggerTransform&gt;Move &lt;TriggerMode&gt;PingPong &lt;TriggerSpeed&gt;2<br><br>Evrytime you get within 10 units of a platform, pressing space triggers a ping pong motion of the platform. You can have things follow waypoints etc etc. Unfortunetly, i'll never finish my editor, because i keep adding stuff :( <br><br></td></tr></table><br>
<a name="1018897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (I recommend you give intelligent prefixes to level elements, variables and so on 'cause that'll make things much easier and organized, of course. Not to mention it will ease the addition of further content to your game engine, which is one of the top priorities you should have when building it).  <br></div><br><br>When I assign vars to something, I usually put the name followed by its type. (eg. RockEntity, WallType, StepSound)<br><br>This sounds like it will work. All I need to know is if I configure the UV coordinates without a texture, then texture it in B3D, will it retain the UV coordinates when I texture it? <br><br></td></tr></table><br>
<a name="1018908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK. I tried it. Everything seems to be working fine -- Except my UV mapping skills:<br><br><img src="http://img190.imageshack.us/img190/3041/uvmappingskills.png"><br><br>That Ultimate Unwrap seems you have to pay for it, so I used the NashaUV that comes with DeleD CE and that's what it gave me.. <br><br></td></tr></table><br>
<a name="1018943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> UV's are stored in the vertices of a mesh. They don't know anything about the texture, not even it's size. <br><br></td></tr></table><br>
<a name="1018965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was an awesome idea putting arrows in your texture. Nicely thought.<br><br>Yeah, it's just a matter of correcting the UVs to make it work right (please show a screenshot of it later on, with the definitive texture etc!). <br><br></td></tr></table><br>
<a name="1018971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, it was totally my fault. I selected the faulty faces and rotated their coordinates. Here is the result:<br><br><img src="http://img145.imageshack.us/img145/3972/rivercorrected.png"><br><br>Here is a download link to the source code I made for the river. (ZIP contains all files including the arrow texture)<br><br><a href="http://host-a.net/ClayPigeon/RiverTest.zip" target="_blank">http://host-a.net/ClayPigeon/RiverTest.zip</a><br><br>P.S.: The UV program I'm using doesn't support grid snapping, and it's visual so I can't just enter the UV coords - I have to drag them to the correct corners. Does anyone know of a UV mapping program that supports .b3d files? (preferably free?) <br><br></td></tr></table><br>
<a name="1019055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure you can't manually type in the UVs?<br><br>I tried taking a look at the NashaUV interface:<br><br><img src="http://img188.imageshack.us/img188/4005/nashauv1jpg.jpg"><br><br>If you look at the top-left corner, there are two text boxes for "U" and "V", I guess there's where you could manually type the UVs for each quad of the river mesh (which in the end would make all quads overlay eachother, all of them occuping the whole UV space). <br><br></td></tr></table><br>
<a name="1019057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would be idea, as you'd get a potential seamless texturing, if you have a seamless texture that is. <br><br></td></tr></table><br>
<a name="1019086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I was hoping I wouldn't have to do that.. I mean, what if I have a river that extends really far with a lot of polygons? Also, that screenshot you have there is not actually quite what I got when I opened NashaUV. The quads were all clumped in an odd way into the same square. I guess it will just have to be trial and error. Thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
