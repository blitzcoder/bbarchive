<!DOCTYPE html><html lang="en" ><head ><title >Align to floor</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Align to floor</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Align to floor</a><br><br>
<a name="620994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grovesy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello again everyone :)<br><br>I'm creating a game where the player is moved by the user clicking on the terrain and the player moves towards it. but when the terrain goes downhill the player floats through the sky. How can i always keep him on the floor?<br><br>I did just think about doing:<br><br><pre class=code>MoveEntity (player, 0, -0.1, 0)</pre><br>But this makes the character slide down hills, or if the player falls off from a high he just slowly floats down. any ideas?<br><br>Thanks as always :) <br><br></td></tr></table><br>
<a name="621040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you still want to retain some form of gravity then use <br><br>translateentity player, 0, -whatever_number_feels_right, 0<br><br>This ensures that gravity will always point down regardless of player orientation.<br><br>I'd also make sure that you have the collisions set for non-slide.  Option 3 I think.<br><br>If you want to ignore gravity then why not simply position the player at the terrain height based in it's x and z coords.  I think the command is terrainy() to get this height.<br><br>Stevie <br><br></td></tr></table><br>
<a name="621067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's how i like to do it :)<br><br><pre class=code>
If PlayerNotOnFloor() then VerticalVelocity = VerticalVelocity -0.01
If PlayerCollidedWithFloor() then VerticalVelocity = 0
TranslateEntity( Player x, VerticalVelocity, x )
</pre> <br><br></td></tr></table><br>
<a name="621080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One small change:<pre class=code>EntityType groundentity, 1
EntityType playerentity, 2
Collisions 2, 1, 2, 3

If PlayerCollidedWithFloor()
  VerticalVelocity = VerticalVelocity -0.01
Else
  VerticalVelocity = -0.01
EndIf
TranslateEntity(playerentity, 0, VerticalVelocity, 0)

Function PlayerCollidedWithFloor()
  If EntityCollided(playerentity, 1) Then Return True
End Function</pre>You should always be applying gravity.  Don't set it to zero. <br><br></td></tr></table><br>
<a name="621164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>"You should always be applying gravity. Don't set it to zero."</i><br><br>Could you explain that one to me WolRon?<br><br>my understanding is, if the entity is colliding with the floor, then upward force would be exactly equal to downward force... the result being 0?<br><br>I'm not diagreeing, just trying to understand your way :) <br><br></td></tr></table><br>
<a name="621166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Diablo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> um but it wouldnt set gravity to zero would it, it would just mean the moment result would be zero. <br><br></td></tr></table><br>
<a name="621277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> My way would cause the player to touch the floor (due to gravity) every loop of the program.  Your way would cause the player to touch the floor every other loop of the program.<br><br>Run it in debug and step through and you'll see. <br><br></td></tr></table><br>
<a name="621287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jams</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> *enlightened* ahhh yes, i never thought of that! Thanks WolRon <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
