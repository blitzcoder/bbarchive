<!DOCTYPE html><html lang="en" ><head ><title >Recursive Randomness</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Recursive Randomness</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Recursive Randomness</a><br><br>
<a name="1089819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a question. <font class="tiny">(obviously or why else would I be here?)</font> If some choices are invalid, is it acceptable to keep asking for random numbers until a valid one is obtained? For example, if I execute Rand(0,15), and all numbers except 3 &amp; 12 are invalid, is it acceptable to repeat the Rand(0,15) function until I hit a valid number? I don't know what the probability of the program hitting invalid numbers is and I'm worried that there is a chance that the program could get hung up from this. <br><br></td></tr></table><br>
<a name="1089821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its not something I'd do repeatedly on-the-fly (like, every frame), but as an occasional thing or one-off you shouldn't have any problems.  I don't have BB3D installed but I just ran some tests on my laptop in Blitzmax and can get through 100,000 Rand() iterations in release mode, in under 10ms.<br><br>That said, I'd always look for a better solution first but having to do it is not the end of the world. <br><br></td></tr></table><br>
<a name="1089822"></a>

<a name="1089823"></a>

<a name="1089824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> (<b>Edit:</b> original suggestion was really stupid because I misunderstood)<br><br>Depending upon what kind of "randomness" you need, the simplest thing to do might be to simply increment/loop round to zero until you hit an open slot in the list of numbers? It wouldn't get you an open slot in a constant amount of time, but it would guarantee that you get one eventually as long as not all the numbers are invalid.<br><br>Of course if you didn't have a check to see whether all the numbers were invalid, or if you'd been around the entire list, then you'd have a guaranteed infinite loop.<br><br>(original suggestion) For short lists of numbers such as the example (say under 100 numbers) you could also keep a list or array of valid results and retrieve the actual number by selecting a random index from the array of valid numbers, rather than the number itself. Obviously this becomes impractical for very large ranges.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089825"></a>

<a name="1089826"></a>

<a name="1089827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think Yasha is right, if I want to get a rnd number and only two numbers are valid, I would definitely just rnd for two outcomes (Rnd (0,1)) and then sort out what they represent.<br><br>Edit, to be clear I think he was right in the post before he edited. I dont like his new answer, cos I assume you want the same chance for any of the remaining numbers<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1090274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way I'd recommend is to have an array of all possible valid answers and then Rand(0, &lt;number of possible answers&gt; - 1).<br><br><pre class=code>Dim answers(10)
For a=0 to 9
 answers(0)=a+1
Next
possibles=4
Print answers(Rand(0, possibles-1))
</pre><br>By having an array, you can dynamically alter your choices.<br><pre class=code>;To add an answer
new_number=Rand(10)
answers(possibles)=new_number
possibles=possibles+1

;To subtract an answer
invalid_answer=Rand(0, possibles-1)
answers(invalid_answer)=answers(possibles-1)
possibles=possibles-1
</pre><br>Guaranteed to only give you valid choices. <br><br></td></tr></table><br>
<a name="1090296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Certainly for a lot of cases, iterations of Rand() wont make too much difference. As Gfk stated, the CPU can process the check millions of times a second.<br>If the situation is particularly time intensive, and/or the ratio of 'valid' results is very small, and/or the number of possibilities is largte, then one of the other suggestions presented may be better practice.<br><br>I like Subirenhil's suggestion, though whether or not it's really practical is another matter and again, relies heavily on the specific circumstance.<br><br>Ultimately, consider the actual end result of what you need to achieve. The rule of thumb I like to work by is to, in the first instance, use a simple system that works. Only later address the parts that require optimisation. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
