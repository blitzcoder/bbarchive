<!DOCTYPE html><html lang="en" ><head ><title >Decals</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Decals</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Decals</a><br><br>
<a name="451782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know this has probably been asked before but I can't seem to find just the right solution.<br><br>I'm firing objects which upon a collision with the level mesh I intend to mark it with a sprite (i.e. bullet hole). The problem I have is that I can gain the collision normals no problem but I just can't seem to get my head around the math required to rotate the sprite for the bullet hole to match that of the surface being hit.<br><br>The collision normals do seem to be being reported correctly (naturally) but I think my 3D maths is just not up to the task. If someone could briefly explain, possibly with some code it would really help :)<br><br>Thanks <br><br></td></tr></table><br>
<a name="451810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Position the sprite, align it, move it slightly on +Z axis to prevent z fighting<br><br>PositionEntity sprite,px#,py#,pz#<br>AlignToVector sprite,nx#,ny#,nz#,3 ; align Z axis<br>MoveEntity sprite,0,0,.001 ; experiment with best value for you <br><br></td></tr></table><br>
<a name="451814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was going to ask that, just now..... Thanks <br><br></td></tr></table><br>
<a name="452465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tom. <br><br></td></tr></table><br>
<a name="452525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, this is very weird :/<br><br>That doesn't work as is, I had to add a rotate on it because it was facing 180 degs from where it should have been facing. So I now have this code:<br><br><pre class=code>
;nx#,ny#,nz taken from collision normal
PositionEntity bp,x#,y#,z#
AlignToVector bp,nx#,ny#,nz#,3
MoveEntity bp,0,0,0.1
;turn entity right way around
TurnEntity bp,0,0,180,True
</pre><br><br>This works fine where the collisions Z normal (nz#) is zero however if it is not zero then it just totally disappears! My current test level was done in Maplet and all the walls are all axis aligned, so collision normals only occur at right angles (a normal of 1 or -1 on the relevant axis).<br><br>The entities are all native blitz sprites so no funny proprietory stuff is being used. Any ideas anyone? <br><br></td></tr></table><br>
<a name="452591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try removing the TurnEntity line and change the following lines:<br><pre class=code>
AlignToVector bp,-nx#,-ny#,-nz#,3
MoveEntity bp,0,0,-0.1
</pre><br><br>Or:<br><br>Change the TurnEntity line to:<br><pre class=code>
TurnEntity bp,0,180,0,False
</pre><br><br>Not tested any of that but think it should work. Basically, Blitz sprites 'point' in the opposite direction to how you may think. <br><br></td></tr></table><br>
<a name="453365"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh thanks, will try it out :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
