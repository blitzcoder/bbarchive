<!DOCTYPE html><html lang="en" ><head ><title >Small WinBlitz3D Test</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Small WinBlitz3D Test</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Small WinBlitz3D Test</a><br><br>
<a name="561735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Ive Uploaded a little test to see how it functions on other peoples pc. this example is in .dll form for now, it enables gadgets directly onto blitz3d's runtime window. theres not much functionality.<br><br>Please read the readme in the .zip<br><br>download here.<br><a href="http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3DTest.zip" target="_blank">http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3DTest.zip</a> <br><br></td></tr></table><br>
<a name="561742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Grisu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works fine for me. <br><br></td></tr></table><br>
<a name="561753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem here. <br><br></td></tr></table><br>
<a name="561767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yeshu777</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> All good here too... <br><br></td></tr></table><br>
<a name="561773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LineOf7s</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thumbs up here.  And your test is directly responsible. <br><br></td></tr></table><br>
<a name="561841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Works here.<br><br>/Alienforce <br><br></td></tr></table><br>
<a name="561844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, but since some of us did this 2 years ago, show us some controls that are the diffucult ones: Keystrokes to Text boxes and menus.<br><br>There's a problem getting that stable. Problem was originally solve by somebody, by installing a keyboard hook, and running translate message and such from there.<br><br>Before that we had: <br><a href="http://home.tiscali.dk/scheutz/blitz/bbwincon/bbwincon.zip" target="_blank">http://home.tiscali.dk/scheutz/blitz/bbwincon/bbwincon.zip</a><br><br>which was ok but not good enough really.<br><br>This might be fun too: <a href="http://home.tiscali.dk/scheutz/blitz/kidnap/kidnap.zip" target="_blank">http://home.tiscali.dk/scheutz/blitz/kidnap/kidnap.zip</a> <br><br></td></tr></table><br>
<a name="561857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks guys, <br><br>Peter the examples are like that of early WinBlitz3D before i stopped using .dll and coded it fully in blitz3d. using the asm custom winproc. the example will if everything works will also be ported using the same method.<br><br>i will look into the menus's and edit boxes, well ive allready been looking into edit boxes keydown messages. and like you say this is going to be a problem. but maybe using SetWindowsHook on the WH_KEYBOARD message might be possable.<br><br>in the above example's is the runtime window made a child to a main window?<br><br>kev <br><br></td></tr></table><br>
<a name="561897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> below is PoweBasic code, for a dll, That I *think* made Blitz proces the keystrokes, so that they came throug, and it was possible to catch them in a subclass procedure.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">#Compile Dll "d:\blitz3d\userlibs\bbhook.dll"


#Include "WIN32API.INC"

Global gKBHook As Long


Function LibMain(ByVal hInstance As Long, _
                 ByVal Reason    As Long, _
                 ByVal Reserved  As Long) _
                 Export As Long

  Select Case Reason
    Case %DLL_PROCESS_ATTACH
      LibMain = 1
      Exit Function
    Case %DLL_PROCESS_DETACH
      Exit Function
    Case %DLL_THREAD_ATTACH
      Exit Function
    Case %DLL_THREAD_DETACH
'
      Exit Function
  End Select

  LibMain = 0   'failure!
End Function

Function KeyboardHookProc(ByVal code As Long,ByVal wParam As Dword ,lParam As tagmsg) As  Dword
    'Static Msg As tagMsg

    If code&lt;0 Then
           Function= CallNextHookEx(gKBHook,code,wParam,lParam)
           Exit Function
    Else


       '    Call getMessage( lParam, %NULL, 0, 0 ) '= %FALSE 'Then
        If lParam.message=%WM_KEYDOWN Then

        TranslateMessage lParam
        DispatchMessage lParam

        End If


    End If

End Function

Function hook  Alias "hook" (bank1 As Dword) Export As Long
     MsgBox "hooked " &amp; Str$(gKBHook)
    gKBHook=SetWindowsHookEx(%WH_GETMESSAGE,CodePtr(KeyboardHookProc),0,GetCurrentThreadID())

End Function

Function unhook  Alias "unhook" (bank1 As Dword) Export As Long
    UnhookWindowsHookEx gKBHook
    MsgBox "unhooked"
End Function</textarea> <br><br></td></tr></table><br>
<a name="562043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clarks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> damn kev, you the man, it works great <br><br></td></tr></table><br>
<a name="562210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> using winblitz3d's includes menus ive put a little demo showing menus/buttons in the runtime window.<br><br><pre class=code>


Include "WinBlitz3D_Include.bb"

Graphics3D 640,480,16,2
SetBuffer BackBuffer()

camera = CreateCamera()
light = CreateLight()

cube = CreateCube()
PositionEntity cube,0,0,5

;
blitz_runtime_window = WinBlitzGUI(SystemProperty("AppHWND"))

; create window menus
window_menu = WindowMenu(blitz_runtime_window)
menu_file = CreateMenu("File",0,window_menu)
	CreateMenu("Open",1,menu_file) : AddMenuIcon(window_menu,1,"menuBMPS/menuload.bmp",16,16)
	CreateMenu("Save",2,menu_file) : AddMenuIcon(window_menu,2,"menuBMPS/menusave.bmp",16,16)
	CreateMenu("",0,menu_file)
	
	submenu_file = CreateMenu("Recent Files ",0,menu_file) 
		CreateMenu("D:\WinBlitz3D\Example_1.bb",3,submenu_file) : AddMenuIcon(window_menu,3,"menuBMPS/menurecent.bmp",16,16)
		CreateMenu("D:\WinBlitz3D\Example_2.bb",4,submenu_file) : AddMenuIcon(window_menu,4,"menuBMPS/menurecent.bmp",16,16)
		
	CreateMenu("",0,menu_file)
	CreateMenu("Quit",5,menu_file) : AddMenuIcon(window_menu,5,"menuBMPS/menuquit.bmp",16,16)

menu_edit = CreateMenu("Edit",0,window_menu)
	CreateMenu("Cut",6,menu_edit)  : AddMenuIcon(window_menu,6,"menuBMPS/menucut.bmp",16,16)
	CreateMenu("Copy",7,menu_edit) : AddMenuIcon(window_menu,7,"menuBMPS/menucopy.bmp",16,16)
	CreateMenu("Paste",8,menu_edit) : AddMenuIcon(window_menu,8,"menuBMPS/menupaste.bmp",16,16)

menu_disable = CreateMenu("Disable Items",0,window_menu)
	CreateMenu("ITEM",9,menu_disable)
	CreateMenu("Disable Item",10,menu_disable) : AddMenuIcon(window_menu,10,"menuBMPS/menudisable.bmp",16,16)
	CreateMenu("Enable Item",11,menu_disable) : AddMenuIcon(window_menu,11,"menuBMPS/menuenable.bmp",16,16)
	DisableMenuItem(window_menu,9)

menu_check = CreateMenu("Check Items",0,window_menu)
	CreateMenu("ITEM",12,menu_check):CheckMenuItem(window_menu,12)
	CreateMenu("Check Item",13,menu_check) : AddMenuIcon(window_menu,13,"menuBMPS/menudisable.bmp",16,16)
	CreateMenu("Uncheck Item",14,menu_check) : AddMenuIcon(window_menu,14,"menuBMPS/menuenable.bmp",16,16)
			
UpdateWindowMenu(blitz_runtime_window,window_menu)

button = CreateButton("move cube",100,100,100,20,blitz_runtime_window,0)
button_quit = CreateButton("quit",100,140,100,20,blitz_runtime_window,0)


While Not KeyDown(1)

	TurnEntity cube,1,1,1
	
	UpdateWorld
	RenderWorld
	
	msg = WaitGUIEvents()
	
	If msg &lt;&gt; 0 Then DebugLog "Event "+Hex(msg)

	Select msg
		
		Case WM_KEYDOWN
			Text 100,50,"WM_KEYDOWN"
			
		Case WM_MOVE
			Text 100,50,"WM_MOVE"
			
		Case WM_COMMAND
		
			If lParamGUIEvents() = 0 Then ; menu selected
				menuid = LOWORD(wParamGUIEvents())
				
				Select menuid 
					
					Case 5
						EndGUI 
						End

				End Select
			EndIf
			
			Select HIWORD(wParamGUIEvents()) ; wNotifyCode
	
				Case BN_CLICKED
					gadget_selected = lParamGUIEvents()
					Select gadget_selected
						Case button
							TranslateEntity cube,0,0,1

						Case button_quit
							EndGUI 
							End
					End Select
			Default
			
					
			End Select
	Default
		Text 100,10,"NO EVENTS"
	End Select
	
	Text 200,10,"Menu Selected "+menuid
	
	FlushGUIEvents
	
	Flip
	
Wend

FreeGadget button
EndGraphics
EndGUI 
Print "bye, press any mouse button"
MouseWait
End

</pre><br>this functions ok here on my pc, anyone wont to give it a try.<br><br>kev <br><br></td></tr></table><br>
<a name="562245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "WinBlitzGUI nor found" - and that's after downloading the latest via your link above. ??? <br><br></td></tr></table><br>
<a name="562299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> WinBlitz3D_Include.bb needs to be in the same folder as the example. you need the WinBlitz3DTest.zip and WinBlitz3D.zip available in my sig <br><br></td></tr></table><br>
<a name="562446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> "available in my sig"?<br><br>When I click on your name all I see is an email address. <br><br></td></tr></table><br>
<a name="562472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> john, winblitz3d.zip the include files can be downloaded here <a href="http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3D.zip" target="_blank">http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3D.zip</a><br><br>and you would need the .dll test available here.<br><a href="http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3DTest.zip" target="_blank">http://myweb.tiscali.co.uk/blitzbasic/WinBlitz3DTest.zip</a><br><br>hope this helps. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
