<!DOCTYPE html><html lang="en" ><head ><title >Curve distance equation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Curve distance equation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Curve distance equation</a><br><br>
<a name="443981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, i'm wondering if any of you smart folks have an equation to work out the distance of a curve, from point A to point B with angle A. <br><br></td></tr></table><br>
<a name="443983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The angle is the difference basically between the way point A is facing and the way point B is facing. <br><br></td></tr></table><br>
<a name="443998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross, <br><br>I think it's quite difficult to determine the length of the curve - it really depend on how accurate you want it. <br><br>Just a thought but by using a 4 pt bezier you can set the direction vectors of points 2 &amp; 3 and simply add the distances between each interpolated point.  Probably quite accurate if you use a small timestep.<br><br>.. then again, I'm sure there is a quicker and better approximation but in order to determine the length you need to know the curve equation and that's where the bezier stuff somes in.<br><br>Stevie <br><br></td></tr></table><br>
<a name="444034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> its Interesting how after all the Volumes of 3 dimensional  Spline Revolution, Integration to find area under graph and um..other stuff<br>That isnt covered in high school Maths.<br>There must be some way to work it out exactly..<br>All i can think of is in equation terms, where if i was to approximate the length of a curved graph (between closed intervals) i would calculate the gradient(eg in 2d:(yincrease/xincrease)) for each x co-ordinate (ie 0,1,2) (==&gt;XINCREASE WOULD BE 1) store the length (pythagoras OR ==&gt;ratios i prefer) in a type or array or bank and then add them up at the end through a loop for each index.<br><br>but then u need to find the actualpoint at which the spline is at for each co-ordinate...<br><br>scene as its made up of vertex and line combinations, i suppose in the end i would just find the distance between each vertex that is connected to every other vertex and combine those values (I'm sure that could be done in Blitz=although you'll be using your own distance formula)<br>The Vertex relatred commands that ivenever really looked at:<br><a href="http://www.blitzbasic.com/b3ddocs/command_list_3d_cat.php?show=Surface" target="_blank">http://www.blitzbasic.com/b3ddocs/command_list_3d_cat.php?show=Surface</a><br>so just countvertices, do a loop for them storing the x,y and z into an array, then use the distance formula from school to find and add the differnce between each related vertex in the spline.<br>Wouldnt be curve orientated mind me...<br><br>ALTERNATIVELY<br>edit: if theres a path following algorithm out there, you could use that, move an entity along the spline at a constant vectoral speed and then find then time through the millisecs. and then multiply to find the distance in  co-ord's/Millisec <br><br></td></tr></table><br>
<a name="444321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you differentiate the curve equation. Or integrate... cant remember now :*( <br><br></td></tr></table><br>
<a name="444324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1970<br>i just thought id waste 2 mins by saying this:<br>im crap at maths... and i couldnt do this.. but at the age of 12 i made a worms game for my BBC and accidentally created a math formula that worked.....<br><br>[/time wating] <br><br></td></tr></table><br>
<a name="444330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, circumference = 2*pi*r<br>I assume we know the radius?<br><br>The decimal of the circumference that we need is A/360<br><br>So we calculate the total circumference and multiply it by A/360<br><br>therefore<br><br>Distance=(2*pi*r)*(A/360)<br>where r=radius and A=angle.<br><br>Correct me if I am wrong. <br><br></td></tr></table><br>
<a name="444332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> sbout what i came up with :/ <br><br></td></tr></table><br>
<a name="444372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would work, Phil, if the curve was cirumferencial (i.e. an Arc of a circle)<br><br>Do you have an equation for the curve??? <br><br></td></tr></table><br>
<a name="444554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> There should eb an equation to calculate an ovals circumference as well mind you. I'd assume it was the average between the min and max lengths. Then you could use this between each set of points, assuming you knew ow to calculate the ovals height which wont be vertex joined <br><br></td></tr></table><br>
<a name="444631"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your suggestions :o) I'll think over them and post if a get an answer :o) Thanks again! <br><br></td></tr></table><br>
<a name="444634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two ways of finding the length of a curve:<br><br>1.If the curve is represented by a function of form <br>		<br>y=f(x)<br><br>Perform the following operation:<br><br>(I will use words as I cannot enter symbols in here)<br><br>Integrate between Xfinal and Xinitial the following<br>function with respect to x:<br><br>(Square Root of (1 + f'(x)^2))dx<br><br><br><br>2.If the curve is represented by a parametric equation <br>like y=y(s), x=x(s)<br><br>Integrate between sfinal and sinitial the following function<br>with respect to s:<br><br>(Square Root of (y'(s)^2 + x'(s)^2))ds<br><br><br>Performing that operation will give you the length of <br>a line. <br><br></td></tr></table><br>
<a name="444889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Distance=(2*pi*r)*(A/360) <br>where r=radius and A=angle.  <br></div><br><br>radius could be calculated as distance between the 2 points divided by 2<br><br>angle would be 180 because we are taking the radius from the centre of the distance between the 2 points <br><br></td></tr></table><br>
<a name="444893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Type SIN in BlitzIDE and hit F1. Copy and paste the example and run it. Left/right arrow keys to control. If you want to work out angles between points, you're going to have to go back to school maths - sine, cosine, and tangent. I know it was a long time ago, but maybe this will help refresh your memory. :) <br><br></td></tr></table><br>
<a name="444894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can do the angles between points, is just getting the distance of a curved line. I can then pull the the x and y cords based on how far i've travelled along the curve :) And i can interpolate the angle based on this distance too :o) <br><br></td></tr></table><br>
<a name="444899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yeah, thanks, Matty - <br><br>Integrate to find the length.<br><br>Am I right in remembering Integration is raising the 'power' by 1 then dividing by this new 'power'? <br><br></td></tr></table><br>
<a name="444910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using the information you have supplied above I think you are saying you have this situation:<br><br>You know the coordinates of both point A, point B and the angle that the curve makes with the horizontal at point A (in other words the gradient at A).<br><br>That is 3 pieces of information.  If you are using a cubic spline you need one more piece of information, the angle the curve makes at point B as well.  But you have not specified that so I assume you have only 3 pieces of information which means we can use a quadratic rather than a cubic spline.<br><br>So we set up the following:<br><br>y = y (x) - ie our y coordinate is some function of x.<br><br>we know the following:<br><br>Coordinates of A we shall write as (0,A) - ie x=0, y=A<br>Coordinates of B we shall write as (L,B) - ie X=L, y=B<br>Angle curve makes at A is Theta =&gt; Gradient at this point = Tan(Theta).<br><br>So:<br><br>Y(0)=A<br>Y(L)=B<br>Y'(0)=Tan(Theta) - which we will just call "C"<br>so Y'(0)=C<br><br>then, since we have 3 points and are using a quadratic to fit the curve we do this:<br><br>Y(x) = ax^2+bx+c (a,b,c not the same as A,B,C)<br><br>Y(0)=A = a*0^2 + b*0 + c, therefore c=A<br>Y(L)=B = a*L^2 + b*L + A<br>Y'(0) = C = b, therefore b=C<br><br>then solving for "a" we get this:<br><br>a = (B-CL-A)/(L^2)<br><br>Okay so our equation for your curve that passes through the points and with the initial angle as specified is:<br><br>Y(x)=((B-CL-A)/(L^2))*x^2 + Cx + A<br><br>Now use this equation for Y and calculate the length of the line using the method I outlined above.  <br><br>I will write it anyway:<br><br>Okay - you now want to find the length of the curve I specified: <br><br>Length = Integrate Between X=0 and X=L the following function:<br><br>(Square Root of (1 + Y'(X)^2)) dX<br><br>You could do this analytically but it would probably be just as easy and not too inaccurate to do so with a numerical technique ranging from something simple like the midpoint method to something more complex like the Runge Kutta method <br><br></td></tr></table><br>
<a name="444911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Malice - yes you integrate, but you don't integrate the equation for the curve itself - that would just give the area, you have to create a new function as I outlined above and integrate that one.  Basically the integration of this new function splits the curve into tiny segments and by using the slope of the curve at each point over a small distance as the hypotenuse of many tiny right angled triangles it works out the total distance of the curve. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
