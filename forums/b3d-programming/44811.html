<!DOCTYPE html><html lang="en" ><head ><title >Blitz sending e-mails!?!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz sending e-mails!?!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blitz sending e-mails!?!</a><br><br>
<a name="498540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any one know if it's possible? <br><br></td></tr></table><br>
<a name="498544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> SOmeone may have done it at blitzcoder<br>dont use google to search the website because youll get loads of useless entries <br><br></td></tr></table><br>
<a name="498550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=23" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=23</a> <br><br></td></tr></table><br>
<a name="498721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm doing it in my game using code based on Marks Blitzmail.  It works very well indeed.  I'm even sending attached files. <br><br></td></tr></table><br>
<a name="498835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Beware of using this for public stuff, though -- many people won't know what the heck their SMTP server settings should be, and a lot of ISPs' SMTP servers will actually reject attempts to send email through them unless you've accessed the POP3 server within a certain time-frame... <br><br></td></tr></table><br>
<a name="498882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How else can I send emails from my game?<br><br>I haven't encountered any problems with it so far BTW. <br><br></td></tr></table><br>
<a name="498886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  I'm doing it in my game using code based on Marks Blitzmail. It works very well indeed. I'm even sending attached files. <br></div>I'm curious - what sort of game would you want to send e-mails from? <br><br></td></tr></table><br>
<a name="498893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> A turn based game. <br><br></td></tr></table><br>
<a name="498894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or a "Tell A Friend" feature. <br><br></td></tr></table><br>
<a name="498925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it's definitely a turn based game.<br><br>;-) <br><br></td></tr></table><br>
<a name="498962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> JP: This is what I get if I try to send email using the 'BlitzMail Deluxe' code, as linked to by Gfk up there ^^^. It's just BlitzMail with some error checking...<br><br><img src="http://www.hi-toro.com/blitz/reject.jpg"><br><br>If I log into my POP3 account (ie. receive email) first, it'll let me send via SMTP for a given amount of time after that. There's some code <a href="/codearcs.php?code=725" target="_blank">here</a> to access POP3 email (it doesn't have to be downloaded, just accessed). There's no way around it as this sort of thing is put in place by individual ISPs.<br><br>It does add more complication to the end user, though, as you need to know your SMTP and POP3 server details, and enter your username/password for POP3; in fact, looking at that, you might need to access an IMAP account for some users to be able to send, and I know nothing about that.<br><br>I'm only bringing this up as it will obviously cause problems for your game on release if this happens. I assume that your own ISP doesn't require you to log into your POP3 email before accessing your server, which would explain why you haven't run into problems (though if you leave your email client working all the time it'll be doing the POP3 access for you -- try running your game after leaving your email program closed for a good while).<br><br>The only way I could see this being made easy on the end user would be if you ran your own mail server for your game's users to connect through, but that opens a can of worms, too, as I don't think you can password-protect SMTP servers (I imagine ISPs allow access based on your IP address being one of theirs, or something like that), so it'd be an open relay (ideal for spammers).<br><br>Sorry if this screws things right up, but unless anyone knows better, I do think you'll find yourself running into this! I have some ideas for working around this (eg. a central server taking direct messages from the clients and then sending out the emails to registered users), but they'd be outside my abilities to implement... <br><br></td></tr></table><br>
<a name="499032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knotz</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would use a webserver to pass messages in a turn based game.<br><br>a call like this:<br><br><a href="http://www.foo.com/cgi-bin/msg.cgi?to=somebody&amp;else=me&amp;subject=whatever&amp;body=hi" target="_blank">http://www.foo.com/cgi-bin/msg.cgi?to=somebody&amp;else=me&amp;subject=whatever&amp;body=hi</a><br><br>You can easily store the messages in a database for the other player to be picked up. <br><br>No configuration for the user, easy and transparent solution. You have to think a bit about security and privacy though. <br><br></td></tr></table><br>
<a name="499041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Sorry if this screws things right up, but unless anyone knows better, I do think you'll find yourself running into this! I have some ideas for working around this (eg. a central server taking direct messages from the clients and then sending out the emails to registered users), but they'd be outside my abilities to implement... <br> <br></div><br>Cheers for the info.  We haven't encountered that on any PC we've tried it on yet.<br><br>I don't think it screws things up.  We can add the pop 3 stuff as a backup option.  Its not the end of the world if some people can't get it working.  Email play is only one aspect of the game. <br><br></td></tr></table><br>
<a name="499055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> We are looking at using a server to handle outgoing turns anyway.  The main reason is more to do with 'match making' and allowing people to play strangers without revealing their email address.   But I'm committed to Email for 'incoming' turns.   I think it works a lot better as you don't need to have the game running to know a turn has arrived - far more inclusive and more fun.<br><br>James,  I'm starting the first phase of testing next week, mainly for the Email game.  Do you want to be a tester? <br><br></td></tr></table><br>
<a name="499188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Do you want to be a tester?<br> <br></div><br>Yep, sure, I'll give it a whirl! <br><br></td></tr></table><br>
<a name="499203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a few (non-blitz) applications that sent e-mails.  The biggest problem by far was that some accounts had very tight spam controls (hotmail, yahoo etc) and would often not accept or would file them under spam.<br><br>I sorted it in the end but it meant having special rules (and simpler e-mails) for those type of accounts.  Pain really. <br><br></td></tr></table><br>
<a name="499676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I tried the test code that GFK posted and it work!  Now the next trick is how to get it to send a file attatchment.  Any ideas? <br><br></td></tr></table><br>
<a name="499679"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here you go.<br><br>This bit goes into Blitzmail,  It's ages since I worked on this.  message$ is the path of a text file which forms the email content.  attachpath$ &amp; attach$ point to the binary file you want to attach.<br><br><pre class=code>

; ---------------------------------------------------------------------
; Email message
; ---------------------------------------------------------------------



	WriteLine t,"Content-Type: multipart/mixed; boundary="+Chr$ (34)+"boundarystring"+Chr$(34)
	
	  WriteLine t,""
	  WriteLine t,"--boundarystring"
	  WriteLine t,"Content-Type: text/plain" 
	  
	  mess=OpenFile (message$)
	
	  If mess
	
	
		While Not Eof (mess)
		
		 mbyte=ReadByte (mess)
		
		 If mbyte=Asc ("#")
		
			Select ReadByte(mess)
			
				Case Asc ("1")
				
				  WriteString t,mailto$
				
				Case Asc ("2")
				
				  WriteString t,mailname$
			
			
			End Select
		
		 Else
		
		
		  WriteByte t,mbyte
		 
		EndIf
		
		
		Wend
	
	
		CloseFile (mess)
	  EndIf
		
	
			
	  encode_file (attachpath$,attachment$,t)
	
	  WriteLine t,""
	  WriteLine t,"--boundarystring--"
	
	
	
	
</pre><br><br>And this is the function it calls to encode the file<br><br><pre class=code>

Function encode_file (path$,name$,stream)

	DebugLog "Encoding file attachment"
	
	file=OpenFile (path$+name$)

    If file

;Info

	WriteLine stream,""
	WriteLine stream,"--boundarystring" 
	WriteLine stream,"Content-Type: application/octet-stream; name="+name$
	WriteLine stream,"Content-Transfer-Encoding: base64"
	WriteLine stream,"Content-Disposition: attachment; filename="+name$ 
	WriteLine stream,""


	linelen=0

	While Not Eof (file)

;Fetch 3 bytes

		
		value=ReadByte (file) 
		value=(value Shl 8) Or ReadByte (file)
		value=(value Shl 8) Or ReadByte (file)

	
;spit out 4 bytes (encoded)
	
		WriteByte stream,Asc(Mid$ (encodestring$,1+ ( (value Shr 18) And 63) ) )
		WriteByte stream,Asc(Mid$ (encodestring$,1+ ( (value Shr 12) And 63) ) )
	    WriteByte stream,Asc(Mid$ (encodestring$,1+ ( (value Shr 06) And 63) ) )
		WriteByte stream,Asc(Mid$ (encodestring$,1+ ( (value Shr 00) And 63) ) )


		;new line every 64 chars
	
		linelen=linelen+4
	
		If linelen&gt;63
		
			WriteLine stream,""		
			linelen=0
		EndIf
		
		    
	Wend
	
	CloseFile (file)
	
	Else
	
		DebugLog "File not found"
	
	EndIf
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="499704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> GFK example shows how to send a string as an e-mail.  This second johns version is sending a text file as the e-mail body.  How do I get the text file to be sent as the e-mail body.  Is this Blitzmail code somewhere where I can see it? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
