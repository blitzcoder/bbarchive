<!DOCTYPE html><html lang="en" ><head ><title >looking for fast bloomfilter</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >looking for fast bloomfilter</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >looking for fast bloomfilter</a><br><br>
<a name="674558"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>During the past week I've been looking for functions<br>of BloomFilter. I've found the one write by Bouncer and<br>some other, but after implement it, I could see I lost a lot of framerate in order to the various renderworlds it<br>need to work, the one for render to 512x512 texture and<br>another one for blurring it.<br><br>My question is if someone knows if there exist some piece of code more optimized or the way in which I could optimize<br>it.<br><br>I am managing a scenario with 90 surfaces, 64,000 polys, about 25 textures of 512x512 and 12 animmesh enemies of 2,000 polys each one.<br><br>Before implement the bouncer bloomfilter I use to obtaion a framerate of 19-22 frames and after implement it, I obtain 8 to 11 frames.<br><br>My computer is a P4 2.6 with a X800 128Mb.<br><br>Some idea of how could I optimize this or some piece of code???<br><br>Thanks in advance!!! <br><br></td></tr></table><br>
<a name="674565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure about the bloomfilter in terms of optimization but you could be doing with reducing that surface count.<br><br>Depending on how your scene is set up you could combine some of the surfaces / entities which have the same brush properties.  Also, make sure you use instancing ( copyentity ) where possible.<br><br>There will be many other areas which could be optimized but these are the main ones which spring to mind.<br><br>Stevie <br><br></td></tr></table><br>
<a name="674571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only way to optimize it is using Toms r2t.dll and instead of rendering to the backbuffer render to textures which you place then on the sprites.<br>That way you only need 2 renderworld calls per frame.<br><br>But in the end: even if optimized, your code needs some very good optimiations in other places ... 20 FPS on a X800? that means no FPS on normal graphic cards anymore. <br><br></td></tr></table><br>
<a name="674577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie: Thanks a lot. I've attempted to maintain number of surfaces as small as possible yet... I've also used instancing for enemies, I just load one enemie and make "copyentities" for the others, but I've not notices a big speed increase.. I hope a bigger increase..<br><br>Dreamora: Thank you very much. Could you explain me a little more about how works the r2t.dll of Tom and where I could find it? A more complete information about framerates could be for example:<br>- Without load 12 animmesh enemies, without bloom and without shadows: 60-70fps<br>- Loading 12 animmesh 2000 polys enemies, without bloom and without shadows: 40-45fps<br>- Without bloom but with 2000 polys enemies (12) with swift shadows of 256x256: 19-22 fps<br>- With bloom and enemies with 256x256 swift shadows: 8-11<br><br>Any idea will be welcome!<br><br>thanks again! <br><br></td></tr></table><br>
<a name="674698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would recommend using ( flip false ) to get a true FPS reading.  Also, put in some simple code to time your main functions and display them on screen to see where some of the other bottlenecks are.  <br><br>Obviously shadows on animated meshes is giving you a big slowdown.   Assume your only using a single light source for the shadows.  Is your 60k poly level segmented into cullable areas ... I understand his system is optimised to work best this way.  Also, have you tried using the fastest shadow method ... e.g. textured blobs under the characters?<br><br>Stevie <br><br></td></tr></table><br>
<a name="674706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pinete</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, I have various types of shadows to choose, from textured blobs as you say to swift shadows of 256x256,<br>but where I can appreciate the maximum slowdown is when<br>activate the bloom. Is dramatic.<br>The problem is I would like to maintain a kind of bloom because it gives to the visuals a special consistence and<br>a actual game feeling..<br>That's the reason because I'm looking a similar function or the way in which someone help me to improve the current bouncer bloom..<br>I would be prepared to pay millions of dollars to achieve that!!! :)<br>The bouncer bloom is divided into two parts: The first one in the renderworld to a 512x512 texture, and the second one is to blurring that texture. I am trying to avoid the blurring making a bigger texture (1024x1024), but I don't know how could I adjust it to fix perfectly in the screen. All the attempts I've done has been time waste.<br>....... <br><br></td></tr></table><br>
<a name="674720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still think its too slow for dealing with 64000 polys and something about 12 textures and 90 surfaces..i got better results with weaker GPU and similar poly count with more textures..(nVidia 5600FX) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
