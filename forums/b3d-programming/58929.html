<!DOCTYPE html><html lang="en" ><head ><title >specular</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >specular</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >specular</a><br><br>
<a name="655783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> can blitz 3d do proper specualar, ie from a texture map <br><br></td></tr></table><br>
<a name="655795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use a spheremap or a static cubemap (I think) to get a decent specular highlighting effect. Is that what you mean? <br><br></td></tr></table><br>
<a name="655809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although dx7 supports it Blitz3d does not. <br><br></td></tr></table><br>
<a name="655813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ashmantle</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> why? <br><br></td></tr></table><br>
<a name="655815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobody knows... that's the honest answer :o) Same with DXTC (texture compression). You can do Specular mapping with a normalmap and a cubemap, using the normal map to act like a mask, to mask out pixel you don't want lit. <br><br></td></tr></table><br>
<a name="655844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I jsut wanted to do a standard specular highlight using a texture map like below<br><br><img src="http://www.virtualmediastudios.com/tuts/mapping/part11_image008.jpg"><br><br><br>seems as though its not possible though <br><br></td></tr></table><br>
<a name="656015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can cheat specular maps easily by using multitexturing.<br><br>I can't get to it right now, but I can post an example perhaps tomorrow to show what I mean. <br><br></td></tr></table><br>
<a name="656016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay - I'll wait here. <br><br></td></tr></table><br>
<a name="656058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to render the specular surface in one pass, then render the second pass using the specular map as an alpha channel. <br><br></td></tr></table><br>
<a name="656111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> if anyone could post a brief example, that would be cool. <br><br></td></tr></table><br>
<a name="656333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an older example I made to show a specular effect with a metal texture. It could be optimized a bit to work with fewer textures, but this method shows all the steps clearly. You can comment out each of the steps to see the result build.<br><br>www.andimages.com/proofs/pongo/specular.zip<br><br><br>Here are the steps summed up.<br>Step 1 : assign the base texture<br>step 2 : assign a reflection map to act as lighting<br>step 3 : this is the key step. Use a mask texture using multiply mode to block over the reflection from step 2.<br>step 4 : now apply the non-reflective texture using additive  mixing. This texture needs to have the mask pre-applied to it (and inversed) so that you will only be adding to the black areas from step 3.<br><br><br>I tried to comment this a bunch, but feel free to ask if there is something confusing here. <br><br></td></tr></table><br>
<a name="656369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ruz, convert that into a normal map. Then apply the normal map, then the specular map, as a lightmap, then... i think a cubemap. I'll need to check that actually... <br><br></td></tr></table><br>
<a name="656377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>Wrong forum</i><br><br>There's <i><b>Blitz3D Programming</b></i> for a reason. <br><br></td></tr></table><br>
<a name="656380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> cheers guys. I will look at that. Thanks for the sample Pongo. <br><br></td></tr></table><br>
<a name="656384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, nice example, Pongo. ;) <br><br></td></tr></table><br>
<a name="656910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very good example Pongo. I suppose you could give that Mask texture an alpha channel, to have certain pixels a semi-shine? <br><br></td></tr></table><br>
<a name="656925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Expanding upon pongo's code and setup. Here's another example. I think it demonstrates the effect more:<br><br>www.rosscrooks.pwp.blueyonder.co.uk/specular.zip<br><br>Nice code pongo ;o) <br><br></td></tr></table><br>
<a name="656947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need to use an alpha channel on the mask, simply using grey values will work because of the multiply blending mode. <br><br></td></tr></table><br>
<a name="657038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, wish it were a bt simpler. tried using blitz pipleline but it seemed very flakey.<br><br>I just wish we had simple commands for stuff like this, not workarounds <br><br></td></tr></table><br>
<a name="657337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ruz, you can always covert this to function, something like:<br><br>DoSpecular(box,base.bmp,ref.png,mask.bmp,overlay.png)<br><br>Easy... and by using stadard naming it gets eve easier, like <br><br>box.b3d -&gt; map box.tga, box_m.tga (mask), box_o (overlay) etc. IMO it's good to name your maps consistently anyway so that you know what is what and goes to where. <br><br></td></tr></table><br>
<a name="657637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> thnks for teh nfo mustang . I got the effect working ok , but i would like to have it so that the lights in my scene actually effect the specular, not a fake light from a texture map<br><br>jsut wondered if anyone knws of a reason why you could n't do proper specular in Blitz 3d.<br>Is that a directx 9 shader  thing <br><br></td></tr></table><br>
<a name="657666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> here you go,... use the same media from the specular demo. The unfortunate thing here is that I have to duplicate the object to create the specular effect, but it works here. I don't know if this will cause z-buffer issues on some cards, but maybe someone can expand on this. <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Graphics3D 640,480,0,2
SetBuffer BackBuffer()

box = LoadMesh("teapot.3ds"); load object for texturing

box2 = CopyEntity(box,box) ; create a copy and parent it to the original

; step 1, ... assign the base texture map
basetex = LoadTexture ("base.png")	; base texture map
EntityTexture box,basetex,0,0			; assign base map, channel 0

; step 2 , ... assign an alpha mask to the second box
mask = LoadTexture ("mask.png",2) 	; use texture as alpha
EntityTexture box2,mask,0,0				; assign mask texture box2

; step 3 , make the second box have a shiny specular
EntityShininess box2,1 ;set shininess For the specular part
EntityColor box2,255,128,0 ; color the specular part orange

;set up a camera
cam = CreateCamera ()
PositionEntity cam,0,0,-20
CameraZoom cam,3

light = CreateLight(1)
MoveEntity light,5,10,0 
PointEntity light,box2

While Not KeyHit(1)
	TurnEntity box,.5,.5,.5
	UpdateWorld()
	RenderWorld()
	Flip()
Wend

End 
</textarea> <br><br></td></tr></table><br>
<a name="657684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are a star mate thanks for that. might be  tad expensive, but its nice too see this progressing.<br><br>any way of doing a kind of multipass render without actually duplicating the box <br><br></td></tr></table><br>
<a name="657788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>jsut wondered if anyone knws of a reason why you could n't do proper specular in Blitz 3d.<br>Is that a directx 9 shader thing <br> <br></div><br><br>Hardly! Specular is ancient thing in the 3D world... Blitz3D just doesn't have that "coded in" so that it would be easy to use for users, ie like with separate specular mask maps like you usually do this "effect" in other languages and rendering softs. Blitz3D is surprisingly basic (pun intended) in some features, but yet it has for example Modulate2X blending.<br><br><div class="quote"> <br>any way of doing a kind of multipass render without actually duplicating the box <br> <br></div><br><br>That's a same thing, Ruz - you are rendering things twice in both cases. Multi-pass is just more expensive (fps wise) than having just one object duplicated. <br><br></td></tr></table><br>
<a name="658116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh ok. the only other problem is that shininess looks inherently bad unless you have a very smooth object<br><br>Yeah i am amazed that blitz does n't have proper specularity <br><br></td></tr></table><br>
<a name="658182"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>shininess looks inherently bad unless you have a very smooth object<br> <br></div><br><br>That is why I like to use reflection maps as fake lighting. The result is much smoother than the vertex-dependent lighting you get with the scene lights.<br><br>Oh, and Mustang, since I see you are reading this thread, and are probably one of the more qualified people around here to answer, do you know of any other methods for doing the specular? Have you seen any issues with the object duplication trick? Like I said before, it works fine here, but I'm a bit concerned about z-buffer issues on some cards. <br><br></td></tr></table><br>
<a name="658518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used alpha / object duplication on my "Planet demo" for making the specular effect... no problems but that was easy case because there was only the planet and background nebulas. Well in fact there was also few cloud layers and stuff but too... <br><br>It would be easy to test z-problems by creating many scattered objects and making the move so that they will overlap (depth) each other. That should reveal z-order problems quite quickly.<br><br>Also don't forget that Blitz3D has an alternative for z-buffer which is worth checking out too:<br><br><a href="http://www.blitzbasic.co.nz/b3ddocs/command.php?name=WBuffer&amp;ref=3d_cat" target="_blank">http://www.blitzbasic.co.nz/b3ddocs/command.php?name=WBuffer&amp;ref=3d_cat</a> <br><br></td></tr></table><br>
<a name="658745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apparently cubemaps don't work using the w-buffer. <br><br></td></tr></table><br>
<a name="829819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, anyone got a copy of Pongo's original demo? I am trying to collect useful things and will host it for future people.<br><br>Email address in profile (or just host it) <br><br></td></tr></table><br>
<a name="829825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the Ashadow library offers specular. <br><br></td></tr></table><br>
<a name="829876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still have it here somewhere, but I'll have to dig a bit for it. Will try to post later. <br><br></td></tr></table><br>
<a name="830089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its ok, I figured it out from your description of the process.<br><br>It would be interesting to combine your process with the image negative code from here:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1772" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1772</a><br><br>so you would only have to supply it with a spec and color map, and it would generate the 4th map for you. <br><br></td></tr></table><br>
<a name="830199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't get a chance to look for this last night, so I'll have to find it this weekend.  I may just make a new demo that showcases the effect, since I was never completely satisfied with the old demo anyways.<br><br>Stay tuned. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
