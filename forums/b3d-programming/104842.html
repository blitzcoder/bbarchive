<!DOCTYPE html><html lang="en" ><head ><title >Z-order Question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Z-order Question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Z-order Question</a><br><br>
<a name="1272692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I believe it’s a z-order problem (like when two mesh planes are close together, but far away from the camera so they start to flicker).  I have a procedural generated adventure game where the world is divided into areas.  Each area is 400x400 blitz units.  I take the X and Y position of the player, divide by 400 to determine which area to generate, then delete all previously generated areas.<br>I am finding out that the farther away the player gets from blitz center (global entity coordinates of 0, 0), he starts to flicker.  He can be wearing a helmet (parented to the “head bone”), and it will flicker between being able to see the helmet on top of the character like intended, to seeing the player’s head drawn on top of the helmet.  He also jitters, but this may be part of the same problem.  Is this a problem with my computer/code, or does this happen to blitz when you get that far away from center (such as coordinates 36000, 18000)?<br>PS I have a picture if needed, but I don't know how to post it. <br><br></td></tr></table><br>
<a name="1272696"></a>

<a name="1272697"></a>

<a name="1272699"></a>

<a name="1272700"></a>

<a name="1272716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> From my past experiments, it can be because of a surface with alpha (pixels/material/brush) over another surface but with a too near distance, or because of a camerarange with a too great difference between the min value and the max value, or because of duplicated tris which have the exact same size and normal and position (by mistake) in the mesh.<br><br>About the camerarange, see : <a href="http://www.blitzbasic.com/Community/posts.php?topic=98868" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=98868</a><br><br>About surfaces with alpha (pixels/material/brush) maybe try to search : https://www.google.fr/?gws_rd=ssl#q=alpha+z+ordering+site:blitzbasic.com <br><br></td></tr></table><br>
<a name="1272715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you get tens of thousands of world units away from the world center then floating point precision issues start to come into play and may cause z-fighting and other problems. It's best to try to stay within a few thousand world units of world center. If you have a large world then you might need to center the world occasionally (how you do that is going to depend on the nature of your project). <br><br></td></tr></table><br>
<a name="1272717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed there can also be weird problems when an entity is too far from the origin (0,0,0) <br><br></td></tr></table><br>
<a name="1272724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've noticed anything over 32768 units from the world origin (0,0,0) will progressively have more issues with jitter and ordering, etc. and ocer 65536 much more severe issues due to as mentioned above rounding precision issues.<br><br>Never tested it extensively for performance impact or other issues but I was offsetting the world so the player position was 0,0,0 for rendering and some movement updates and then moving it back rather than the more traditional work around of locking the player at 0,0,0 and moving everything around them which I dislike. <br><br></td></tr></table><br>
<a name="1272727"></a>

<a name="1272728"></a>

<a name="1272752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have done some tests about this in the past, my approach was to have a world coordinate (between 0 and 1000 world units) and a zone coordinate (between 0 and 100 blitz3d units).<br>The player was able to turn move freely in the zone (between 0,0,0 and 100,0,100) and when he reached a border of the zone, the world coordinate was updated and all zones where moved so that the active zone (where the player is) had its origin at 0,0,0<br>The challenge was to load then build, and save then destroy, the properties and entities inside each zone without slowdown... <br><br></td></tr></table><br>
<a name="1272749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trek</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ugh, I was afraid of it simply being too far away from center...Off to recode my world generator.  Thanks for the quick info guys! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
