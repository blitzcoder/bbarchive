<!DOCTYPE html><html lang="en" ><head ><title >ZBlur?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ZBlur?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >ZBlur?</a><br><br>
<a name="278670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Has anyone tried to make a Zbuffer Blur like you get in Zelda The Windwaker?  You know where anything over say 100 feet from you is blurry?<br><br>I suppose effects like this would be impossible without access to the Z buffers tho. <br><br></td></tr></table><br>
<a name="278678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ZBlur = DoF, Depth-of-Field?<br><br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_c/directx/graphics/programmingguide/TutorialsAndSamplesAndToolsAndTips/Samples/DepthOfField.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_c/directx/graphics/programmingguide/TutorialsAndSamplesAndToolsAndTips/Samples/DepthOfField.asp</a> <br><br></td></tr></table><br>
<a name="278682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could do multilpe renders. Render all entities that are are so far away from the camera, then blur them, then set the camera clear mode so it doesn't clear the backbuffer, then rednder all the near entities. That should work. Except if you have a long corridor your in and it's all the one entity :S <br><br></td></tr></table><br>
<a name="278733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah mustang thats about right<br><br>Ross I am sure its sort of done like that, multiple pass rendering would maybe work but would be slow <br><br></td></tr></table><br>
<a name="278773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use this code:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=815" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=815</a><br><br>I just added it to the code archives.  It was a system I was working on for speeding up the rendering of distant objects.  I'm pretty sure that's why Zelda does what it does.  I found though that at least in Blitz, there is little benefit to this method since you cannot render to a texture directly (the copy operation takes some time) the blurring operation takes some time, (no direct hardware blur, which the gamecube probably has) and even if you solve those problems, without the ability to render images with alpha, you can't optimize it by rendering the stuff that's farther away less often than the stuff that's nearby, which I'm sure is another optimization they're doing in Zelda.<br><br>But luckilly for you that doesn't matter if all you want is for stuff to be blurry when it's far away.  And this code is really simple to use.  You'll have to have a sky which is large enough to encompass your world (no render order tricks) and then you just specify the distance to which your main camera renders with the far clipping plane and everything beyond that is rendered with the special camera and then a skybox is generated. <br><br>You may or may not be able to speed things up by rendering only one view instead of six but rendering it every frame and placing that on a plane in front of the camera instead of rendering a skybox.  The advantage rendering a skybox provides is that you can turn around in one spot with no cost at all once the maps are rendered, and you can move around a bit without having to have the maps rerendered.<br><br>You could also speed up the algorithm by creating "nodes" around the player and attempting to render skyboxes from the node which the player is moving towards over the course of several frames to get rid of the jittering from the sudden rendering of six images.  That way you could render just one of the six images each frame till they get to the new node and then swap in the new node's textures when they get there. <br><br></td></tr></table><br>
<a name="278808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers sswift that code sounds exactly like what I am after, I will check it out when I get home :) <br><br></td></tr></table><br>
<a name="278837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note that this isn't the same thing as depth of field.  It'll look good though if you use it on stuff that's relatively distant so it's hard to see where it goes from being normal to being blurred.<br><br>Combinging multiple renders with this method is not an option because there's no alpha.<br><br>It may however be possible to do a truish multiple render DOF effect by rendering multiple camera views and offsetting them and then copying those to a set of textures which you then overlay over the screeen using that blur2 style blurring I have in the above code, which uses alpha... There's a trick to blending multiple images together with alpha. :-)  That shows you what levels of alpha you should use for each layer.  <br><br>Anyhow that would of course be a lot slower than normal and would make even the sharpest graphics fuzzier cause the texture wouldn't be the same size as the screen exactly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
