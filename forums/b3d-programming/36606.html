<!DOCTYPE html><html lang="en" ><head ><title >Little math problem :-/ (hopefully not big)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Little math problem :-/ (hopefully not big)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Little math problem :-/ (hopefully not big)</a><br><br>
<a name="400714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got quite a lot of my car physics working fine, but there's a slight little problem, as most of my math sucks.<br><br>However, I got a little equation telling how much pressure a tire must be able to handle to not skid during a turn in R radius at V speed. The problem is that that equation requires me to know the radius I'm currently turning in (of the whole circle).<br><br><img src="http://chrml.thefreebizhost.com/carphy.jpg"><br><br>Lets say during last calculation (60 times a second) my car was at the green spot (Coords: ABC), this cycle, it is at the red spot (Coords: XYZ).<br><br>Out of those two positions, how can I figure out R? <br><br></td></tr></table><br>
<a name="400727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PGF</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry but you cannot.<br><br>There are infinitely many circles that can pass through two points.<br><br>Thinking of another way ... Do you know the heading at both points ?  If so and you consider the heading is at a tangent then you can find the point of intersection of the perpendiculars to the tangents to get R.  Watch out for the special case where the perpendiculars are parallel and R is infinitely distant.  In this case the vehicle is travelling in a straight line and there is no sideways force.<br><br>Do you really need R ?  If you know the headings at both points then the change in heading is going to be an angle which is what you'll need to calculate the 'sideways' force due to circular acceleration. <br><br></td></tr></table><br>
<a name="400730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> _________________________________________________<br><br>Consider the circumference of a circle being PI*d<br>Radius (r) = d/2<br><br>The distance travelled (assuming it is an arc of a circle,) is : s<br><br>The Angle between the start of curve and the end of curve: Q<br><br><br>(PI*d)/(360/Q)=s<br><br><br>If you know the speed, v <br>The distance travelled, a is simply v/t (t=time)<br><br>(PI*d)/(360/Q)=(v/t)<br><br><br><br>We know<br><br>t=1/60seconds<br>_______________________________________________________<br><br><br>For the rest I'll need to see your diagram... that's a bad link. <br><br></td></tr></table><br>
<a name="400738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for help guys :).<br><br>@PGF: Yes, I know which way the car is turned to at both points. Yeah, I thought the sideways force also could be calculated out of the difference between the two angles, but I haven't been able to figure out a way to do so, as all my references tells me to use the radius of some reason :(.<br><br>@Malice: Ah, so that's the actual velocity as the way the circle is followed? Nice. That becomes handy. Yep, I know V. Oh, the link is bad (weird, worked for me).<br>_ttp://chrml.thefreebizhost.com/carphy.jpg<br>Switch _ with h, and past in browser, guess that works (also the host is down for 2 minutes from time to time). <br><br></td></tr></table><br>
<a name="400746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Malice: Ah, so that's the actual velocity as the way the circle is followed?  <br></div><br>No!!!<br><br>You've referred to speed (I assume angular velocity) not velocity. the velocity will be changing constantly with direction.<br><br>Also, Displacement is distance around the circumferencial arc, not straight line! <br><br></td></tr></table><br>
<a name="400749"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The distance travelled, a is simply v/t (t=time)<br> <br></div><br><br>Woops, I think I misread a bit, sorry.<br>The A you are talking about here, is that the sideway accelleration I'm looking for (which I just can compare to what the wheels can handle to find skid/or not skid)?<br><br>I studied the logic a bit now (I hope), if Q is the angle between the first angle (green), and the last angle (red) of the car, then this means that the answer (v/t) is A, meaning the sideway accelleration between these two calculation events (which happens at 60 Hz, meaning t=1/60), or have I completly misunderstood?<br><br>Lol, sorry if I sound a bit dumb, math isn't really my strongest side. <br><br></td></tr></table><br>
<a name="400758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, not 'a' should be 's' as before.<br><br>Yes, Q should be that angle between start and finish locations, provided the arc is consistent. I think you have misunderstood a little, I have not dealt with any sideways movement, because there isn't enough info. I really cant see your diagram, otherwise I could use that to describe better. <br><br></td></tr></table><br>
<a name="400778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, my pic is uploaded to an another location:<br>_ttp://chrml0606.tripod.com/carphy.jpg<br><br>Remember to switch _ with h before pasting into browser :). <br><br></td></tr></table><br>
<a name="400781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The force is speed*delta-rotation/time*(some constant) <br><br></td></tr></table><br>
<a name="400788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Delta rotation, sorry, but what kind of rotation is that? :P<br>Is it the difference between first and last angle on my pic (as Malice explained me), or some other rotation? I guess time here is 1/60 second if game running in 60 hz (60 loops a second)? <br><br></td></tr></table><br>
<a name="400810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the difference, so delta-rotation/time is just the speed of rotation. <br><br></td></tr></table><br>
<a name="400817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, lol, ok. Last question, you got a faintest idea about what time is supposed to be multiplied with (the constant), or do I just have to try and see? <br><br></td></tr></table><br>
<a name="401023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might wish to convert everything to Delta-time (change-in-time)<br><br>Where anything involving 'time' is multiplied by the Millisecs() difference each loop.<br><br>This will help everything move by standard amounts and be the same regardless of computer speeds etc. <br><br></td></tr></table><br>
<a name="401172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just try, and by the way, if the logic rate is locked, time will probably be a constant too. <br><br></td></tr></table><br>
<a name="401179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great thanks for help guys :D!<br><br>@Malice: Good idea, I'll reprogram most movement stuff/time calculations stuff to suit that. :)<br><br>@eBusiness: Yep, logic rate will be locked to 60 if the computer can handle it (otherwize it will autolock to something less). <br><br></td></tr></table><br>
<a name="401187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not meaning to hijack this thread, but since there's some math majors here I got a little problem too. <br>This code was taken from the archives and the idea is it's supposed to aim and move your object towards a 3d point. It works most of the time but sometimes it doesn't, I think when it hits negative values or something. I suck at math so I'm not sure how to fix it to be 100% accurate.<br><pre class=code>
For e=1 To 35
PointEntity enemy[e]\pivot,player
targetangle#=EntityYaw(cam,True)
currentangle#=EntityYaw(enemy[e]\pivot)

If Abs(currentangle#-targetangle#)&lt;180 Then turn=2 Else turn=-2 
If currentangle#&lt;targetangle# 
TurnEntity enemy[e]\pivot,0,turn,0 
Else
If currentangle&gt;targetangle
TurnEntity enemy[e]\pivot,0,-turn,0
EndIf
EndIf
MoveEntity enemy[e]\pivot,0,-0.5,.5 
Next
</pre><br><br>Thanks <br><br></td></tr></table><br>
<a name="401196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this doggie ( not tested but should work )<br><br><pre class=code>
For e = 1 To 35
	ENTITYchase( enemy[e]\pivot , player , 2.0, .5 )
Next

;=============================
;=============================
;=============================

Function ENTITYchase( Entity, Target, TurnRate#, MoveSpeed# )

	Turn# = DeltaYaw( Entity , Target )
	If Turn &lt; - TurnRate Turn = -TurnRate
	If Turn &gt; TurnRate Turn = TurnRate
	TurnEntity entity, 0, Turn, 0
	MoveEntity entity,0,0, MoveSpeed
	
End Function	
</pre> <br><br></td></tr></table><br>
<a name="401405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> SO far so good. It works in all directions. Thank you. <br><br></td></tr></table><br>
<a name="402879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> This should be the solution to use the popular formulas used to calculate sideway force during a turn (F = m*v^2/r, where m is the mass, v is the speed, and r is the radius of the circle (way to calculate described below), and F is ofcourse the result of the calculation, the sideway accelleration (which the tires must support to prevent the car from skidding out)):<br><br><img src="http://chrml.thefreebizhost.com/hmmm.jpg"><br><br>When thinking about the XY line, it's a quite rough calculation, but it shouldn't play an important role as the change of position doesn't become that big in 1/60 seconds. That SHOULD (unless my logic really fails) be the way to get the radius out of two positions, where the rectangles is a car (supposed to be at the purple dots), and the lines through them are the way they drive. The angle the two car directions create (D2) are ofcourse the delta rotation (the change of rotation) between two calculations (usually not that big as on this drawing).<br><br>If you got problems with the picture, replace _ with h, and paste this URL into the browser:<br>_ttp://chrml.thefreebizhost.com/hmmm.jpg<br><br>Or try again later (the server seems to go down sometimes). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
