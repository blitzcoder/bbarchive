<!DOCTYPE html><html lang="en" ><head ><title >[RESOLVED] api_closehandle peculiar crashing</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >[RESOLVED] api_closehandle peculiar crashing</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >[RESOLVED] api_closehandle peculiar crashing</a><br><br>
<a name="1253296"></a>

<a name="1253298"></a>

<a name="1253375"></a>

<a name="1253376"></a>

<a name="1253377"></a>

<a name="1253378"></a>

<a name="1253379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's very strange behavior!<br><br>EDIT: AHA! Please advise on using global memory instead of banks. The API function's being greedy and won't let me free my bank without a MAV!<br>Show me the pointer(s) to use with an API and poke/peek loop example please.<br>It's for api_read/writefile and file mapping Never mind. I found it.<br><br>EDIT#2: DOUBLE AHA! That wasn't it. I think it was my API decls file.<br>MoveMemory is REALLY touchy!<br>For future reference folks, use this method:<br>Kernel32.decls:<br>api_RtlCopyMemory(Destination*,Source%,Length%):"RtlMoveMemory"<br>api_RtlCopyMemory2(Destination%,Source*,Length%):"RtlMoveMemory"<br>Your program:<br>api_RtlCopyMemory(MemBank,lApiMapFilePointer%,mSize%)<br>api_RtlCopyMemory2(lApiMapFilePointer%,MemBank,mSize%)<br>This seemed to solve my crashing issue.<br><br>[Original Plea for help]<br>Has anybody figured out why my working application<br>Would crash when it hits api_closehandle(hObj)?<br>My hObj is global and contains the right value or I couldn't write/read<br>to my created file handle. <br><br></td></tr></table><br>
<a name="1253386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >videz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Mikorians. By any chance what is the difference of this function with the standard file and read for B3D? looks interesting to me.<br><br>thanks. <br><br></td></tr></table><br>
<a name="1253431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This sounds like C programming from the good old days. You are allocating blocks of memory then effectively using memcpy to move data into them. When some sort of cleanup causes the memory to be freed the program crashes. That suggests you wrote past the end of a block and corrupted the administrative data the OS needs to manage memory. <br><br></td></tr></table><br>
<a name="1253459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The use I had was for IPC, but can also be used to write to a disk file as well.<br>The reason for its deployment is that the windows API runs concurrently with blitz, and unlike the built-in file handling functions does NOT cause a noticable frame-rate stutter on a polygon-heavy 3D scene.<br><br>I have a Visual Basic 6 force-feedback client application for my many different devices BY name and control type. I use blitz to read the controls because its simpler, but VB for triggering FFB because the sample BB app was insufficient to my rather drastic needs.<br><br>I have BB samples of both API uses. <br><br></td></tr></table><br>
<a name="1253460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Floyd: Actually, I had just called the function with incorrect parameters (gotta keep a weather eye on those decls). And I now understand C FAR MORE than I EVER wanted to. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
