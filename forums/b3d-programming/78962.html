<!DOCTYPE html><html lang="en" ><head ><title >Blitz's TCP idles very long before sending data...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz's TCP idles very long before sending data...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blitz's TCP idles very long before sending data...</a><br><br>
<a name="886482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ever since i started programming with blitz TCP, i got the problem.<br>my server sends a data package with 3 bytes in total and waits for the client to respond.<br>but the client gets these 3 bytes delayed approximately 50 ms later, because the Blitz TCP engine is sending these bytes with a delay...<br>which makes the whole app useless :(<br><br>i think it's because TCP collects data until a packet of a certain size is full. this certain size seems to me more than 3 bytes...<br><br>is there anyone who can help me?<br>thanks. <br><br></td></tr></table><br>
<a name="886494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nawi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, an obvious hack is to send a larger packet. <br><br></td></tr></table><br>
<a name="886498"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> my packet is exactly 3 bytes. how large should i make it? does it depend on the router or is it a fixed size?<br>but this just isn't it... a proper solution would be to just send it out using some sort of windows command, hmm? <br><br></td></tr></table><br>
<a name="886516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you not use UDP? TCP has never really been for time critical applications... <br><br></td></tr></table><br>
<a name="886520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm coding a multi-PC raytracer. so with UDP i get problems because once even one packet is missing, everything stops working... <br><br></td></tr></table><br>
<a name="886555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Resend if the packet goes missing then. Tag each packet with an unique number. When your code on the other side receives a packet, then send back a confirmation packet. If the sending side doesn't receive a confirmation, resend the packet again. <br><br></td></tr></table><br>
<a name="886563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think tcp is fast enough and i don't want any UDP bugs here...<br>there must be a function in some library to send the TCP packet without waiting until it's full... <br><br></td></tr></table><br>
<a name="888853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> As an Blitz3d TCP coder send 2004 i am looking into this.. i will prove every one wrong here as usual. by using my knowlage :)<br><br>Stay tooned for my answare will come this wekend. <br><br></td></tr></table><br>
<a name="888857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) hey why are you only sendind 3 bytes ?<br><br><br>2) if you dont have controll over flow blitzbasic TCPIP block your servercode if recivebuffer is over 8000 bytes.<br><br>maby you can explain what you trying to do ? and maby UDP is the way here as we speak lan. <br><br></td></tr></table><br>
<a name="888932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi <br><br>Devils<br><br>I think that the problem should be in the implementation of the blitz routine, or the routine that blitz call.<br><br>I have some sort of TCP/IP communication between two machines connected directly via an ethernet cable, and I experienced the slow transit of information, but, has no time yet to research a solution.<br><br>I think that Ethereal (or other sniffer) should help to analyze the problem, generating all sort of packet's with different length's on one machine and in another, or the same, running Ethereal to catch the packets for a while and then watch the way they arrived, trying to find if there are a better way of send small packets than other's.<br><br>I read some.. and still learning:<br>An ethernet frame must have at least 46 bytes of data to 1500. The overhead of an IP datagram is 20 bytes for it's header, and another 20 bytes for the TCP header, so the minimal TCP data should be 6 bytes: (20 + (20 + 6)) or the minimal TCP/IP that I think should be long enough to be sent over an ethernet lan. <br><br>If a packet with less than 46 data bytes is to be sent, must be filled with zero's, until reach 46 bytes of data.<br><br>On the other hand, the biggest TCP datagram that can be set with out fragmentation (to slice the data in two or more ip packets) is of 536 data bytes .<br><br>In other words, if I have to decide when to sent a tcp packet over an ethernet lan, I choose to wait at least 6 bytes to 536.<br><br>If I put in consideration the fact that, only 6 bytes of 72 (minimal ethernet packet) are data, so the overhead is 66 bytes, I probably wait some more bytes to do a better use of the bandwidth. <br><br>And that's the problem I think we have, consequence of the implementation of the send routine.<br><br>What I mean is, numbers with minimal amounts and maximum quantities are in each level of the stack, and I don't know which weight's more than others, so if some one has the answer: welcome!!<br><br>I think both are in the same boat!<br><br>best regards<br><br>Juan <br><br></td></tr></table><br>
<a name="889180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have some experience with render farms... that can be a bitch even with industry standard software like maya.... What I would do is make your ray trace program... compile to an exe... and have that exe accept command like switches.  The program you write would only analyze on one frame of the animation, or in a specific x,y + width, height section of the screen.  Next I would write a listener application in blitz.. That has whatever tcp port open you want.  Have a bit of a delay in the application, and exit the loop when called.  So any one of the machines could throw a file out on a network share.  Then run your program... It then blasts out the "run render" command to all of the machines.  They would grab the file on the share you specified with the switch, and render its specific part.  Also you would want to kill the listener application before it starts the render to improve speed.  Then after the render is complete save the section or frame to that network share with a naming convention. Before closing the renderer start up the lister application again.  In your program write an assembler that would take those named exported chucks and put them together however you like.  Sounds lenghty but its rather quite simple.<br><br>Also if you want them all in sync with one another and the above solution doenst work.  Use Raknet... its amazing, and so easy to use.  Dont bother coding UDP, let raknet handle it for you... you just send message headers and youre finished. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
