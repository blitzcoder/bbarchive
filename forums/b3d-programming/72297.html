<!DOCTYPE html><html lang="en" ><head ><title >Video</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Video</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Video</a><br><br>
<a name="807927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys. I am using blitz3d for a future project, and need to know what my options are for playing video inside blitz. The video clips will be my own (as in they will be distributed from me, not loaded up by the user (like in a video editor))<br><br>They just need to be quite good quality, smallish in size, run in blitz, with some kind of basic control (pause, stop etc) and play on oldish (800mhz/1ghz) computers that don't have codec packs installed (a codec install would be acceptable, if it can be hidden).<br><br>I will pretty much consider anything and any format, commercial lib's, something like bink, some decent code, just so long as it meets the reguirments above and someone has had a good experiance with it.<br><br>Thanks :) <br><br></td></tr></table><br>
<a name="807941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know that without using external libs blitz can play avi files and mpeg files but not .mov or .wmv files.  <br><br>I also know that there used to be a memory leak with the movie commands which was fixed around 1.9x (yet remains in blitzplus...).<br><br>Using standard blitz commands you can play a movie, and that is about it, no rewind/pause/fast forward or other standard movie player functions.  <br><br>I thought in the toolbox there were some movie libs but haven't had a look...maybe you could ;) <br><br></td></tr></table><br>
<a name="807946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a look in there first, but didn't find anything. <br><br></td></tr></table><br>
<a name="808062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first thing you'll need is this:<br><br>avifil32.DECLS<textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">.lib "avifil32.dll"
AVIFileInit%()
AVIFileOpen%(ppfile*,szFile$,uMode%,lpHandler%)
AVIFileRelease%(pfile%)
AVIFileInfo%(pfile%,pfi*,lSize%)
AVIFileGetStream%(pfile%,ppavi*,fccType%,lParam%)
AVIFileExit%()
AVIFileCreateStream%(pfile%, ppavi*, psi*)
AVIStreamInfo%(pStream%,pfi*,lSize%)
AVIStreamStart%(pavi%)
AVIStreamRelease%(pavi%)
AVIStreamLength%(pavi%)
AVIStreamGetFrameOpen%(pavi%,lpbiWanted%)
AVIStreamGetFrame%(pFrame%,index%)
AVIStreamGetFrameClose%(pFrame%)
AVIStreamReadFormat%(pavi%, lPos%, lpFormat%, lpcbFormat*)
AVIStreamSetFormat%(pavi%, lPos%, lpFormat*, cbFormat%)
AVIStreamRead%(pavi%, lStart%, lSamples%, lpBuffer%, cbBuffer%, plBytes*, plSamples*)
AVIStreamWrite%(pavi%, lStart%, lSamples%, lpBuffer*, cbBuffer%, dwflags%, plSampWritten%, plBytesWritten%)
AVISaveOptions%(hwnd%, uiFlags%, nStreams%, ppavi*, plpOptions*)
AVISaveOptionsFree%(nstreams%, plpOptions*)
AVIMakeCompressedStream%(ppsCompressed*, psSource%, lpOptions%, pclsidHandler%)
</textarea><br><br>Put this in your userlibs subdir under the blitz3d directory.  The you'll need to figure out how to access the various windows video functions within. <br><br></td></tr></table><br>
<a name="808065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> does this use a system registered dll? So I don't need to distrubute it with my app? <br><br></td></tr></table><br>
<a name="808072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It uses a dll which is already in Windows System32 folder.<br><br>_33, where can we get a better description of the parameters (and return values)? <br><br></td></tr></table><br>
<a name="808076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> can anyone suggest anything else? what about wrapping up movies as seperate exe's using osmehting like bink, and then having blitz just load up the exe when the movie needs to be played. I think this will be my fallback plan if all else fales. <br><br></td></tr></table><br>
<a name="808089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, I'd have to code an example, but the parameters are really straight forward IMHO.  You'd have to go through the MSDN docs to find out.<br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/multimed/htm/_win32_avifileinfo.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/multimed/htm/_win32_avifileinfo.asp</a><br><br>Here's another solution:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1329" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1329</a><br><br>This is SSwift's solution which uses winmm.  So, you'd also need to create a winmm.DECLS if you haven't already.<br><a href="http://www.blitzforum.de/forum/viewtopic.php?t=3915" target="_blank">http://www.blitzforum.de/forum/viewtopic.php?t=3915</a> <br><br></td></tr></table><br>
<a name="808139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks, _33. <br><br></td></tr></table><br>
<a name="811237"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, I have been playing around with the SSwift's MCI stuff in the code archives:<br><br><a href="http://blitzbasic.com/codearcs/codearcs.php?code=1329" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1329</a><br><br>But I seem to be getting problems when use this in windowed mode (mode 2).<br><br>Especially if I have a flip command flipping the buffers, it will also flicker the movie. Any ideas on hwo to solve this? <br><br></td></tr></table><br>
<a name="811277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I remember there was a way around it, but I've forgotten how :)<br><br>The problem is MCI is drawing to some kind of canvas that is<br>aligned virtually ontop of the blitz canvas. After a flip there's a z-fight. You may try to use Copyrect instead. <br><br></td></tr></table><br>
<a name="811333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you can have a think I will be very grateful :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
