<!DOCTYPE html><html lang="en" ><head ><title >Lightmapping frustration</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lightmapping frustration</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Lightmapping frustration</a><br><br>
<a name="375269"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a really frustrating time with lightmapping.<br>As stated in another thread, I am using Quill to lightmap, not model (god forbid); but loading in anything which has a reasonable polycount takes 20 minutes, then 10 minutes to lightmap.<br>LightBulb(Demo) to 40 minutes to lightmap the same model, then light bleeds under the walls!<br>Please would as many as possible reply, and tell me ewhat you are using for lightmapping. <br><br></td></tr></table><br>
<a name="375275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Giles I think will be the answer... Never used it, but from what I gather various blitzers would like to 'pleasure' Fredborg now. <br><br></td></tr></table><br>
<a name="375286"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gile[s] - Easily the best thing ever written in Blitz.<br><br>It gives you so much flexibility with a bucketload of raw power and functionality. And best of all, it has the best interface of any Blitz app ever. And, of course, it uses x2 blending.<br><br>I'm rather embarrassed to say that I actually took a few hours away from work the other day to create a scene just so that I could see how Gile[s] lightmapped it. The scene wasn't for anything.. just wanted to play with the Global Illumination and shadows. <br><br></td></tr></table><br>
<a name="375292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> giles is commercial quality. <br><br></td></tr></table><br>
<a name="375368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Giles... without a doubt. I don't really have speed issues since I upgraded my cpu... Quill takes 20 min??? Dang!!! <br>-RZ<br>Athlon 64 3200+ 1024ram 80gigHD ATI9200 yadda yadda yadda... <br><br></td></tr></table><br>
<a name="375585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, everyone. You seem to be unanimous. <br><br></td></tr></table><br>
<a name="375625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> "LightBulb(Demo) to 40 minutes to lightmap the same model, then light bleeds under the walls!"<br><br>I'm not saying lighbulb is good or not... I haven't looked at it lately.  But I'm pretty sure I've seen a screenshot form giles with light bleeding under a walkway connected to a wall in a red room.  <br><br>But worse, Giles has problems with shadows leaking everywhere.  Ie, every corner is darker than it should be.  Looks wrong.  Looks like Unreal actually.  Gives it kind of a cartoonish look.<br><br>The problem is sampling texels from only one point.  <br><br>If you sample with one point, either you can look to see if the texel can see the light, which results in light bleed, but no dark corners, or you look to see if the light can see the texel, which results in shadow bleed, which ends up being a much worse problem than light bleed because every single corner in the level has texels that are half in shadow.  Of course some people like the look of shadow bleed, but nobody seems to like the look of light bleed, because light bleed makes the level seem non-solid.<br><br>The only way to solve this problem is to sample texels from multiple points, or to create a frustum that contains each texel and then determine if all of the frustrum is blocked from the light source.<br><br>I don't know if one could make a frustum method run at an acceptable speed... I'm not even sure how one would do it really... determining how much of the frustum is blocked I mean.  But I do know that sampling from multiple points will only increase the time by the number of extra samples you take.  So if you take four samples at each corner then you could quadruple the amount of work you have to do...  OR DO you?  But before I go into that...  One problem with sampling only at the corners is that ligth can still bleed under walls in extreme cases, like a sharp corner poking into a texel of a lightmap which is low res.  But it greatly reduces the problem.<br><br>Now... how does one take more samples of each texel without doing extra work?<br><br>Well, consider this.  Each corner of each texel is shared by four texels.  There's no reason to sample the same point four times.  So, if one works from the lightmap, one can sample just the corners of texels and transform that point to the world, and then figure out whether or not the texels that surround that point are lit or not.  And in this case you would go from light to texel, not texel to light.  Doing that, if the light sees the texel corner, then all four texels that surround that corner are lit.  Once you know that, you can figure out how bright each is by interpolating between the color of each corner after you've calculated all four corners for that texel.<br><br>Of course I've gone way off track here with this discussion but maybe some of the lightmapping folks will find it useful to improve their lightmappers. <br><br></td></tr></table><br>
<a name="375640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gile[s] is perfect IMHO. It is up to the user to make it crap or shine.<br><br>If you apply a 256x256 texture to an entire level, you're gonna get bleeding on everything including 3dsmax, believe me.<br><br>If you know how gile[s] works or you run the auto lightmap wizard, then it's very doubtful you'll ever meet bleeding. <br><br></td></tr></table><br>
<a name="375675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If that's true then why do their own screenshots show light bleeding?  Are you saying they, the authors of GIles themselves, don't know how to lightmap a level?<br><br>I know how lightmapping works, and it is IMPOSSIBLE to correct these issues completely without using the "frustum" method I outlined above.  But increasing the number of samples per texel and using smarter sampling methods like the 4 corner optimization I eoutlined above are a good start.  Just the 4 corner thing alone will fix most cases, even with low res light maps.  And it doesn't cost you any speed.  So it's worth implementing.  <br><br>I'm not slighting Giles.  Most lightmappers I've seen have these problems.  But that doesn't mean they can't be fixed. <br><br></td></tr></table><br>
<a name="375682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to agree with Sswift. <br><br>I did a quick test with Giles vs Luminescence beta. Giles showed 'leakage', L3d did not and seemed to show better overall fidelity.<br><br>However, although L3d was due to be released last month, it wasn't and the website hasn't given any news about why not, which isn't encouraging.<br><br>www.insight-concepts.com <br><br></td></tr></table><br>
<a name="375683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone's interested, I can post the b3d geometry I used for the test. <br><br></td></tr></table><br>
<a name="375763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like your next lib should be a lightmapper then, Sswift (not just another addition to YAL, which was slow as a wet week when I last ran the demo). <br><br></td></tr></table><br>
<a name="375798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> light bleeding should be out since 1.21 ( was a known problem before that which resulted in a quite specific way of setting up the light bias value without the advanced lightmap setting possibilities like we have them now )<br><br>haven't seen it since then with GI settings anymore.<br>For an actual screenshot check out <a href="http://www.frecle.net/forum/viewtopic.php?t=18" target="_blank">http://www.frecle.net/forum/viewtopic.php?t=18</a><br><br>I think this shows quite good the power of Gile[s] <br><br></td></tr></table><br>
<a name="375903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Sounds like your next lib should be a lightmapper then, Sswift (not just another addition to YAL, which was slow as a wet week when I last ran the demo)."<br><br>No money in it. :-)<br><br><br>"light bleeding should be out since 1.21"<br><br>Well if you have fixed something maybe you should update your screenshots. :-)  People do look at screenshots to make purchasing decisions... don't give them a reason not to buy. :-) <br><br></td></tr></table><br>
<a name="375909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will update the screenshots :) I'm very busy with my graduation project, so I haven't had time to do much on gile[s] for the past few months.<br><br>One might say the same about your demos Sswifty lad :) <br><br></td></tr></table><br>
<a name="375932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> MY demo screenshots ARE up to date, so I don't know what YOU are talking about. :-) <br><br></td></tr></table><br>
<a name="375944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Speaking of your systems Sswift... Can I have you shadow system for free please? <br><br></td></tr></table><br>
<a name="375983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift: yeah your screenshots are up to date ... at last for most systems ... the shadow system demo is several versions behind if I'm right ( actual version is 0.9x or something like that ... :) )<br><br>btw: sswift i payed over paypal for shadow sys, how long does it normally take to proceed <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
