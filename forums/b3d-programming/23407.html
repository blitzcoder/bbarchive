<!DOCTYPE html><html lang="en" ><head ><title >Making Skidracer's single surface particle system face camera?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Making Skidracer's single surface particle system face camera?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Making Skidracer's single surface particle system face camera?</a><br><br>
<a name="241750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ashmantle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to do this and does anyone know how?<br><br>I have just downloaded Skidracers code from the code archives, but it isn't rotated to face the camera like sprites do, so I obviously need to mod it a little ;)<br><br>Please help me with this, as I will release it free to the community when its done :) <br><br></td></tr></table><br>
<a name="241776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> But they do face the camera. <br><br></td></tr></table><br>
<a name="241906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... only if the camera never moves. <br><br></td></tr></table><br>
<a name="241914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> wo, major bug, change CameraEntity to global cam, sheesh... <br><br></td></tr></table><br>
<a name="241917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, try this one, mousex rotates around smoke, I am such a spoon...<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=437" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=437</a><br><br>and just found 3 more typos, new version much better <br><br></td></tr></table><br>
<a name="241922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> TFormNormal 0,0,1, Camera, 0<br>Nx# = TFormedX()<br>Ny# = TFormedY()<br>Nz# = TFormedZ()<br><br>This gives you the normal of the camera view.<br><br>Multiply each component by -1, and you have a normal that points back towards the camera.<br><br>You then need to rotate each particle polygon so that it's plane is aligned to this vector, using some math I'm not going to figure out for you. :-)<br><br><br>A slower method which is easier to implement is to: <br><br>1. Create a pivot.<br>2. For each particle, position the pivot in space at it's center.<br>3. Point the pivot at the camera.<br>4. For each vertex in the particle do this:<br><br>TFormPoint Vx#-Px#, Vy#-Py#, Vz#-Pz#, Pivot, 0<br><br>TVx# = TFormedX()<br>TVy# = TFormedY()<br>TVz# = TFormedZ()<br><br>Then re-position the vertex at TVxyz.<br><br><br>It would be a lot faster to animate stored floats than to modify each vertex's location twice.  Also do not perform this operation on vertices that you have repositioined once already.  All particles must start out each frame facing towards the positive Z axis, then you do this transform to get them to face the camera.  Then you start over next frame with particles facing the Z axis again.  If you do not, then the particles won't face the camera, and even if you could figure out how to retransform them, they would begin to distort over time.  Though particles exist for such short time spans on average that that may not be a big issue. <br><br></td></tr></table><br>
<a name="241924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well nevermind then, looks like skidracer's code can do that stuff for you after all with a bug fix.  I never looked at his code. <br><br></td></tr></table><br>
<a name="241928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> cool, even my matrox g400 smokes:)<br><br><img src="http://64.26.47.97/simon/smokewindow.jpg"> <br><br></td></tr></table><br>
<a name="241994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; embaraced... <br><br>Surely you mean embarrassed?<br>I wouldn't worry, we all make mistakes with our code. <br>We're only human after all.<br>Except for me, because I'm a tea spoon. <br><br></td></tr></table><br>
<a name="242014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ashmantle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehe... cool ;)<br><br>Thanks Skidracer, Sswift and all you others ;) Now I can continue with my project.. <br><br></td></tr></table><br>
<a name="242052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; I am such a spoon... <br><br>Oi. I saw that ;) <br><br></td></tr></table><br>
<a name="246802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am also trying to expand Skid's code, so it will become a proper particle system with lots of possible uses.<br><br>It still needs z-ordering and a proper way to also spin the quads, etc. I have done z-ordering, now I am working on the rotation bits, finally forcing myself to actually learn proper vector math... The joys of 3d coding. ahum <br><br></td></tr></table><br>
<a name="247058"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wiebo, there are a couple of ways to rotate individual quads in a single surface mesh without getting your hands dirty with the math. Firstly, add a single, unattached vertex to each quad placed at the centre (or wherever you want your point of rotation). Then you can:<br><br>1) Create a hidden, scratch pad mesh that contains a single quad then read the verts of the quad from the single surface to this scratch pad, using the centre vert to easily centre the quad in the scratch pad. Then, do the rotations and write the verts back into the single surface, again using the centre vert to make offset adjustments.<br><br>2) Create a pivot, rotate it by the amount you want your quad rotated, then use TFormPoint vertx,verty,vertz,pivot,0 to get the new vert coords for the rotated quad. Again, use the centre vert to convert the quad's vert coords to coords relative to the centre vert (if you see what I mean :)).<br><br>I've used method 1 before and found it pretty fast, TBH. So, you still don't have to learn vector math - hurrah! :) <br><br></td></tr></table><br>
<a name="247123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p: Thanks, I will take a look at your suggestions! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
