<!DOCTYPE html><html lang="en" ><head ><title >Shadow Command</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Shadow Command</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Shadow Command</a><br><br>
<a name="801489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So, I was looking at another B3D like engine and they have built into their engine a shadow function that all you have to do is add the function to the object you want to cast a shadow...setshadow object,x,x.<br><br>Why don't we have one for B3D? I ask this because B3D seems to be the fastest Indie style engine, yet we are behind in some tech respects.<br><br>Is there a "set shadow to object" command system and I just don't know it yet?<br><br>At any rate, I will remain using B3D for my project, but dang, shadows seem to be B3D's nemesis :) <br><br></td></tr></table><br>
<a name="801493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, I don't have sswifts shadow system but it's the most user friendly native solution there is.  Details and links will be in his sig. <br><br></td></tr></table><br>
<a name="801501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah with Swiftys system you simply do these commands...<br><br>set the mesh to cast the shadow like this:  <br><br><pre class=code> Cast_Shadow(meshname,Shadow_Resolution, False) </pre><br>		<br>set the light which will create the shadow like this:  <br><pre class=code> Cast_Light(lightname, LIGHT_RANGE) </pre><br><br>set the mesh to receive the shadow cast by a mesh: <br><pre class=code> Receive_Shadow(meshname) </pre><br><br>You may have to fiddle with some settings depending upon the scale of your level, and you can't cast on to a surface which rotates.  You don't need to cast an animated shadow either, a soft edge circle can be used (graphic included in the system).  It also casts none static shadows for things which don't ever move in your level.<br><br>A nice little extra with swifty's system is that you can have a highly complex animated mesh for your character but his shadow could be cast by a synchronised low resolution animated mesh, which means you get more fps for your hero character.  btw, the shadow resoultion is a power of two setting for the amount of detail in the shadow, realistically no more than 512, but 256 is pretty good.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="801502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would it be possible for someone to post code showing a very basic example of swwifts system?<br><br>In the meantime I will go into the Code Archs and see if I can find it. <br><br></td></tr></table><br>
<a name="801503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just did...  :)<br><br>IPete2 <br><br></td></tr></table><br>
<a name="801506"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol, sorry, I missed your post, dang cache...<br><br>thank you :) <br><br></td></tr></table><br>
<a name="801507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> argh! I can't find it in the Code Archs and the forum search result replies with 0.<br><br>Anyone have sswifts shadow system available? <br><br></td></tr></table><br>
<a name="801509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> argh! I can't find it in the Code Archs and the forum search result replies with 0.<br><br>Is it no longer for free, just to purchase? <br><br></td></tr></table><br>
<a name="801510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey CodeOrc!<br><br>Simply look for Swifty's posts in any thread - he has links in his signature.<br><br>Oh actually you could check here:<br><br><a href="http://www.blitzbasic.com/toolbox/toolbox.php?tool=87" target="_blank">http://www.blitzbasic.com/toolbox/toolbox.php?tool=87</a><br><br>It is very cheap for none commercial use (i.e. sharware) or reasonably priced for commercial licenses. afaik it has never been free as such.<br><br>And to save any heartache, read the notes at the very bottom, incase you want to cast onto Blitz terrains or plains or use animated MD2s...<br><br><br>Have fun...<br><br>IPete2. <br><br></td></tr></table><br>
<a name="801511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ty much mate :) <br><br></td></tr></table><br>
<a name="801529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey Ipete, what you mean, 'cant cast shadow on to rotating surface'? Does that mean that if my character passing by rotating big gear (or something) in level, shadow will not cast over it?? <br><br></td></tr></table><br>
<a name="801545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Naughty,<br><br>When I was developing the ss Great Britain project, I needed to cast realtime shadows across the deck, Shawn told me it was not possible without some changes to the library which he wasn't planning on doing at that time.<br><br>In the end I had to keep the ship and the camera fixed and move everything else, the world the sea everything.  It worked really really well though and the result is awesome.<br><br>There may be a way around it but I don't remember what it is (I think Shawn had a couple of ideas for me but it is a couple of years ago).<br><br>IPete2. <br><br></td></tr></table><br>
<a name="801607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Naughty:<br><br>That is correct.  I did that for speed reasons.  <br><br>It probably wouldn't be too hard for one to modify the system to support it again though.<br><br>Basically the reason for the requirement as far as I can remember, is that accessing the vertcies with the regular Blitz functions was slow, and storing it in banks was faster.  Or maybe I did that as a result of needing to in order to implement a much faster octree-based polygon culling system which I never got around to doing, which wuod have required objects to remain unrotated/scaled, and would have required the data to be stored in a special way in banks.<br><br>For whatever reason I did it, the vertex data of the receivers is stored in banks.  You would need to exchange each bank access with the appropriate vertex access command.<br><br>But I just remembered another couple issues.  <br><br>First, in using the banks, I did not need to loop through an object's various surfaces when rendering the shadows.  So you'd have to have a surface loop in addition to the vertex loop in the main rendering loop of the shadow system.<br><br>Second, once you have taken these vertex values from the object's mesh that won't do you any good alone because they'd be untransformed...  They wouldn't be scaled or rotated...<br><br><br>Hm... Actually come to think of it, that changes things.  Scratch all that.<br><br><br>There is no reason to change the code that relies on the banks, because the vertex data returned is always going to be the same anyway.  The only thing that needs to be done, which would result in a slowdown, would be transforming the vertex data according to how the receiver is transformed. There is also a bounding sphere calcualted for the receiver, and that radius value would have to be scaled according to the current scale of the receiver.  It would be a little more complicated to allow the receiver to be scaled differently on each axis, but only if you cared if the bounding radius was optimal, rather than being a bit larger than it needed to be.<br><br>But the transformations of the vertex data would be handled with the tform commands built into Blitz, so that wouldn't be too hard to implement.<br><br><br>So that's why it is the way it is.  Because I'd planned to have a better culling system, and that would have required static receivers, and transforming the points from receiver space to global space comes at a speed penalty.  And if the receiver has a LOT of points, then that comes at a really big speed penalty.  You'd definitely have to split your receivers into small objects so they could be culled.  Right now you can sort of get away with not doing that.<br><br>Of course I could probalby solve that speed issue by transforming the light plane into receiver space per receiver instead of the receiver into global space, but that'd probably be a huge pain to do. <br><br></td></tr></table><br>
<a name="801710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> .hhhmmm I see...so, does that mean that shadow will not cast over rotating geometry even if caster is standing on that rotating geometry and moving with it/let say my character jump on to big gear and standing on it while rotating together with it?/ ? <br><br></td></tr></table><br>
<a name="801733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, that's what it means.  <br><br>Whether he's hovering over it, or standing on it and moving with it, a shadow could not be cast onto the moving gear without modifying the system. <br><br></td></tr></table><br>
<a name="801745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..ehh... :( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
