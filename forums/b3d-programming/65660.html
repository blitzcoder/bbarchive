<!DOCTYPE html><html lang="en" ><head ><title >Highlights w/ Vertex Lighting??</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Highlights w/ Vertex Lighting??</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Highlights w/ Vertex Lighting??</a><br><br>
<a name="733553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Does anyone know if it's possible using vertex-lighting techniques to ''light'' an object so as to create highlights as you might get when using basic DX7 lights (eg. with a mesh's shininess set to 1.0) ?! I've not been able to color a vertex/object above it's default 100% diffuse (textured-)color... which makes sense I understand, but it there a 'trick' to create some additive effect to it (ie. without using lightmapping)...?!<br><br>Thanks,<br>Danny <br><br></td></tr></table><br>
<a name="733556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried <a href="/b3ddocs/command.php?name=lightmesh&amp;ref=goto" target="_blank">LightMesh()</a>? <br><br></td></tr></table><br>
<a name="733651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >scribbla</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep vertex painting can get you some very good results<br>screen grabs form blitz, no lights just ambient set at 200 so the colours dont get washed out<br><br>i used lightwave but i think any program where you can bake the lighting to the mesh should work<br><br>NO vertex map &amp; 1 tile<br><br><img src="http://www.btinternet.com/~coloured.pixels/_wp_generated/wp7ecbb473.png"><br><br>-----------------------------------------------------------------------<br><br>with vertex map &amp; 1 tile, 6k tris<br><br><img src="http://www.btinternet.com/~coloured.pixels/_wp_generated/wp78d7ea81.png"><br><img src="http://www.btinternet.com/~coloured.pixels/_wp_generated/wp181608a9.png"> <br><br></td></tr></table><br>
<a name="734282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gfk / Scribbla,<br><br>But what I mean is if it's possible to create really heavy burned out WHITE HIGHTLIGHTS as you get when using very bright dx7 lights. FOr example a default red (255,0,0) sphere with a bright point light close next to it, will produce a 255,255,255 highlight on the red sphere. With vertex lights &amp; textured objects, I've only been able to create diffuse (non specular) surfaces as scribbla demonstrates with his (very cool looking by the way!!!) images - everything still remains 100% diffuse! <br><br>p.s. I haven't tried lightmesh because I'm using a range of light-shapes already coded myself... <br><br></td></tr></table><br>
<a name="734287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Think you'll have a job getting convincing specular highlights simply using vertex colours - especially on low poly meshes. Any reason you can't use EntityShininess? <br><br></td></tr></table><br>
<a name="735374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Entityshininess only reacts to DX7 lights. A vertex's color does not affect it's shininess. That's me whole point... :/<br><br>Guess it's not possible... so I'll put it on me xmas list then..<br><br>d. <br><br></td></tr></table><br>
<a name="736084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> memory who has not written the program but this is the version modified from me  ;)<br><br>no remember <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80"> 
Include "fps.bb"

Graphics3D 640,480,16,2
;AmbientLight 0,0,0

Global DS=4
Const NObj=4
Dim sphereobj( NObj, NObj, NObj)

NObj2=NObj+1
Global FactPercent#=100.0/(NObj2*NObj2*NObj2)
Global val#=0

Global Light=CreateSphere(4)
Lightp=CreateLight(2,Light)


;Global Cube = LoadMesh("cubo128.3ds")
;ScaleEntity Cube,20,20,20

val=0
For x=1 To NObj
	For y= 1 To NObj
		For z= 1 To NObj
			sphereobj(x,y,z)=CreateSphere(32)
			EntityPickMode sphereobj(x,y,z),2
			PositionEntity sphereobj(x,y,z),x*DS,y*DS,z*DS
			val=val+FactPercent
			Print "Create Object :"+val
		Next
	Next
Next

For x=1 To NObj
	For y= 1 To NObj
		For z= 1 To NObj
			LightObject(sphereobj(x,y,z), Light)
		Next
	Next
Next



camera=CreateCamera()
PositionEntity camera,12,12,2
RotateEntity camera,0,0,315


Global vrot#=.5
Global vmove#=.2
Global OldTime=timer
Global mla#=.2, mlb#=0

While Not KeyHit(1)

		If KeyDown(63) Then Stop
		If (Not KeyDown(29)) And (Not KeyDown(157)) Then ; CTRL 
			If KeyDown(208) Then TurnEntity camera,vrot,0,0
			If KeyDown(200) Then TurnEntity camera,-vrot,0,0
			If KeyDown(203) Then TurnEntity camera,0,vrot,0
			If KeyDown(205) Then TurnEntity camera,0,-vrot,0
		Else 
			If KeyDown(208) Then MoveEntity camera,0,0,-vmove
			If KeyDown(200) Then MoveEntity camera,0,0, vmove
		EndIf

		mlb=EntityX(Light)
		If mlb&gt;30 Then mla=-mla
		If mlb&lt;0 Then mla=mla

		;PositionEntity Light,mlb,mlb,mlb
		MoveEntity Light,mla,mla,mla		
		PositionEntity Light, EntityX(sphereobj(1,1,1)), EntityY(sphereobj(1,1,1)), EntityZ(sphereobj(1,1,1))
		;LightObject(Cube, Light)

		val=0
;		For x=1 To NObj
;			For y= 1 To NObj
;				For z= 1 To NObj
;					LightObject(sphereobj(x,y,z), Light)
;				Next
;			Next
;		Next

    UpdateWorld
    RenderWorld
		DrawFps()
		Text 5,15 ,TrisRendered()+"   "+EntityX(Light)
    Flip
Wend
End

Function LightObject(entity, Light)
	ApplyAmbient(entity,32,32,32)
                    
	ApplyLight(entity, EntityX(Light), EntityY(Light), EntityZ(Light), 20, 1,255,255,255)                        
	EntityFX entity,3
End Function

Function ApplyAmbient(entity,r,g,b)        
    
    count=CountSurfaces(entity)    
    For n=1 To count
        surf=GetSurface(entity,n)    
        Vcount=CountVertices(surf)-1    
        For v=0 To Vcount
            VertexColor surf,v,r,g,b        
        Next            
    Next

End Function

Function ApplyLight(entity,LX#,LY#,LZ#,radius#,flag,Lr,Lg,Lb)
	
	;Lambert shading in blitz "by Staton Richardson (Arbitrage)"    
	;This function is meant for 1 time lighting not realtime    
	;entity is the entity you wish to light
	;LX, LY, LZ are the coodinates of the light in world space
	;Lr, Lg, Lb are the colors of the light
	;radius is the radius the light affects. Light falls off with distance so half the radius would be half the light
	;flag tells the function to include the current vertex color for multiple lights
	
	Local AttSHW#=0.8
	Local kx#,ky#,kz#

	kx = EntityX(entity)-LX#
	ky = EntityY(entity)-LY#
	kz = EntityZ(entity)-LZ#

	Lrr# = (Lr/radius)
	Lrg# = (Lg/radius)
	Lrb# = (Lb/radius)
	
	count=CountSurfaces(entity) 
	For n=1 To count
		surf=GetSurface(entity,n) 
		Vcount=CountVertices(surf)-1 
		For v=0 To Vcount          
			xd#=VertexX(surf,v)+kx
			yd#=VertexY(surf,v)+ky
			zd#=VertexZ(surf,v)+kz
			mag#=Sqr(xd#*xd# + yd#*yd# + zd#*zd#)
				
			If flag=1
				vcr=VertexRed(surf,v)
				vcg=VertexGreen(surf,v)
				vcb=VertexBlue(surf,v)
			EndIf    
			
			vr=Lr-Lrr*mag#
			vg=Lg-Lrg*mag#
			vb=Lb-Lrb*mag# 
			
			If vr&gt;255 Then vr=255
			If vg&gt;255 Then vg=255
			If vb&gt;255 Then vb=255 
			
			vx#=VertexNX(surf,v)
			vy#=VertexNY(surf,v)
			vz#=VertexNZ(surf,v)
			
			mag#=1/mag#
;			LnX#=xd#*mag#*-1
;			LnY#=yd#*mag#*-1
;			LnZ#=zd#*mag#*-1
			LnX#=-(xd#*mag#)
			LnY#=-(yd#*mag#)
			LnZ#=-(zd#*mag#)
			
			Kh#=((vx)*LnX+(vy)*LnY+(vz)*LnZ)
			
			
			DLx = (LX-xd)
			DLy = (LY-yd)
			DLz = (LZ-zd)
			;Stop
			a = LinePick (xd,yd,zd,DLx,DLy,DLz)
			
			If kh#&gt;0 And a=0
				VertexColor surf,v, vr*Kh#+vcr, vg*Kh#+vcg, vb*Kh#+vcb
			Else
				;VertexColor surf,v, vcr*AttSHW, vcg*AttSHW, vcb*AttSHW
				VertexColor surf,v, 0, 0, 0
			EndIf  
			
		Next   
	Next 
End Function
</textarea> <br><br></td></tr></table><br>
<a name="736565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a picture to illustrate my question.<br><br>As you'll see the bottom two spheres have bright highlights on them from the DX7 point-light AND setting entityShininess to 1.0.<br>But you'll also see that the top-right sphere (done using vertex lighting) won't produce a highlight. <br><br>So, could it possible somehow to create a highlight like that on a textured and vertex-lit object??<br><br><img src="http://www.xs4all.nl/~dendanny/Blitz/lightingsample1.jpg"><br><br>cheers,<br>Danny <br><br></td></tr></table><br>
<a name="736877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you'd need to work that out yourself...<br><br>There has a couple of examples posted using a combination of cubemapping and normalmapping, to produce specular lighting on a mesh. Honestly can't remember the link though... It's on these forums somewhere... <br><br></td></tr></table><br>
<a name="736883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Ross,<br><br>I was hoping someone perhaps knew of a trick to do/fake this without additional textures...<br><br>cheers,<br>Danny <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
