<!DOCTYPE html><html lang="en" ><head ><title >Strange hardware breaking bug!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Strange hardware breaking bug!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Strange hardware breaking bug!</a><br><br>
<a name="766348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have a very peculiar bug that emerges from a seemingly simple line of code and I don't understand how it happens, here is a simplified version of the code<br><br><pre class=code>
type source
   field toX#, toY#
end type


;Main loop
repeat
   ;....<i>lots of other stuff goes here....</i>
   for s.source=each source
      special(s)
   next
   renderworld
   flip
until endgame 
;end main loop here

function special(s.source)
   repeat
      a=0
      s\toX=rnd(1,3) : s\toY=rnd(1,3)
      for s2.source=each source
      ;THE FOLLOWING LINE IS CAUSING THE BUG, IF I COMMENT IT OUT NO MORE BUG!
         if s2&lt;&gt;s and s2\toX=s\toX and s2\toY=s\toY then a=1
      next
   until a=0
end function

</pre><br><br>It's part of a much larger framework (4000+ lines) for 2D/3D games, but the algorythm in question is very simple (the "source" type only contains 3 objects at most)<br><br>Every time I run this code section, the computer hangs, <b>screen display becomes corrupted</b>(little red dots in a grid appear on screen) and <b>I have to go and reinstall the 3D card drivers or Windows won't even boot!</b><br><br>Anybody has an idea what's going on and what can cause this bug and the hardware corruption?<br>I know it could be a problem with my 3D card (geforce 6600) but the point is that, this particular line of code, and only this one, will always trigger the problem.<br>And I don't see anything there that should trigger a problem. As I said it's not a very intensie part of the program (there are much more intensive and complex algorythms in other places of the program) and the list of "source" objects is comprised of 3 objects at most. <br><br></td></tr></table><br>
<a name="766352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Add these lines to the beginning of you program:<br><pre class=code>Graphics3D 800,600,16,1
SetBuffer BackBuffer()
c=CreateCamera()</pre><br>And add this line after the ";....<i>lots of stuff goes here</i>...." line:<br><pre class=code>   If KeyHit(1) Then endgame=True</pre><br>You needed to enter a screen mode (you forgot that in you example but it was in the original code?)<br>You need a camera.  The "screen corruption" is just an uncleared BackBuffer.<br>It hangs because you have an endless loop - your "Repeat/Until" exiting variable never gets set to True.<br><br>As far as Windows not being able to boot, how can you reinstall the drivers if Windows isn't booted?<br>Or how can you reinstall the drivers if the screen is corrupted?<br><br>When I looked at you code, I added the Graphics3D and If/Then endgame=True lines before running your code.  It did indeed have a "corrupted screen" of various rectangles of random colors, some light rectangles and some dark.  I exited and the screen was fine.  I ran the code again with no modifications and the screen was completely black.  I added the CreateCamera line so that the BackBuffer would always get cleared.<br><br>Another thought.  Were you running it with or without Debug? <br><br></td></tr></table><br>
<a name="766488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for answering, my code contains screen declaration and camera and a way to exit the main loop and everything, I just didn't want to include them for the sake of getting to the heart of the problem.<br>It's interesting that you get a corrupted screen too, it's strange given the nature of the code.<br>With or wthout debug the problem is the same.<br>when it happens, I have to start windows in failsafe mode, uninstall drivers and reinstall. <br><br></td></tr></table><br>
<a name="766548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let me guess, it's windows vista?<br><br>To me this sounds like you pressed the reset button when directx was doing some "do not disturb" stuff.<br><br>But I really never heard of a blitz problem that killed the card driver.<br><br>Maybe in the function special you should use:<br><br>until a=0 or keydown(1)&lt;&gt;0 instead of only<br>until a=0<br><br>cause this line:<br> if s2&lt;&gt;s and s2\toX=s\toX and s2\toY=s\toY then a=1<br>seems to always set a to 1. <br><br></td></tr></table><br>
<a name="766610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No it doesn't because s\tox and s\toY are set to a random value each.<br>But you' right that it's most likely an infinite loop problem.<br>And no it's not Vista.<br><br>I'm starting to think that maybe I should add parenthesis like this<br><pre class=code>if (s2&lt;&gt;s) and (s2\toX=s\toX) and (s2\toY=s\toY) then a=1
</pre><br>Maybe blitz is trying to make a logical and between things that it shouldn't? <br><br></td></tr></table><br>
<a name="766611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should however not break your hardware...<br><br>Imagine<br><br>Fatal Error $EF3A24:<br><br>You missed a bracket, your computer will now explode - press a key to continue. <br><br></td></tr></table><br>
<a name="767065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ice9</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bad memory or bad video memory<br>reseat memory and video card <br>check your memory <br><br></td></tr></table><br>
<a name="767073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You used to be able to break the BBC from software. If you turned the Cassete auto on and off really fast loads of times.<br>And Ive been told that you used to be able to crash the heads of HDs if you toldthem to park in the middle of the disk.<br><br>However I dont think you are breaking any hardware here.<br><br>But anyway, questions to the B3D programers. What does<br><pre class=code>AofTapeA &lt;&gt; BofTypeA</pre>do?<br>Does it return True if A is not pointing to the same instance as B? or Does it return True if any of the member fields of A do not equal the member Fields of B? <br><br></td></tr></table><br>
<a name="767643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Curtastic</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to see the real code.<br><br>cyberyoyo: your if statement is fine.<br>H&amp;K: it tells if A and B are pointing to the same instance. <br><br></td></tr></table><br>
<a name="767648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You only exit when you get two matches of two floating point numbers? <br><br>You know how long it will take to get a single matching float out of the random number generator given there are 10,000,000 possible unique floats between the range specified???<br><br>I would guess there is a locked vertex or pixel buffer that will be released by the renderworld which is causing the problem of breaking your infinite loop or you are simply running in fullscreen when you should be debugging in windowed mode? <br><br></td></tr></table><br>
<a name="767734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Off topic:<br><br><div class="quote"> <br>You used to be able to break the BBC from software. If you turned the Cassete auto on and off really fast loads of times.<br> <br></div><br><br>Damn....<br><br><br>You know, I didn't think about that! I had 4 BBCs and all of them ended up with broken tape hardware (It would load "?????.??" and it would be a bad program hehe.<br>I was using the tape motor control as a form of network device between the machines. Was nothing cooler than hearing a click followed by seeing a pixel appear on the other machine :) (actually, hearing your voice come out of the BBC speaker was better...)<br><br>I ended up making a crossover cable. Save on one machine. Load on the other. Hit enter at the same time :D <br><br></td></tr></table><br>
<a name="770445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You only exit when you get two matches of two floating point numbers? <br><br>You know how long it will take to get a single matching float out of the random number generator given there are 10,000,000 possible unique floats between the range specified???<br> <br></div><br>No, I exit if the numbers are NOT matching. (and in the real case these are not floating point but integers).<br><br>Thanks everybody who responded, actually it WAS a hardware problem, and I had to change my graphic adapter.<br>It's just a (really strange) coincidence that it was only happening in the same spot of the code.<br><br>Incidentally I had to revert to my in-board graphic card (geforce 6100) and it's a good thing because it enables me to test and optimize my code on a very slow hardware :). <br><br></td></tr></table><br>
<a name="772361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> you need a computer science cource.<br>ICE 9 you say well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
