<!DOCTYPE html><html lang="en" ><head ><title >Help New export Ase To B3D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Help New export Ase To B3D</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Help New export Ase To B3D</a><br><br>
<a name="643460"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> pleace HELP! HEEELLPP!!!<br><br>i have a create this exporter, have a problem for load object, MAV and crash the program.... what is?<br><br>I have verified the program with dump.bb the return no problem :(<br><br>Help!!!<br><br>Thanks all<br><br><br><br><br>;=====================================================================<br>;----------------------------------------------------------------<br>; Vincenzo Caldarulo<br>; nickname : VinsentX<br>; e-mail: enzo_light@...<br>; main Programmer V&amp;D Software Multimedia<br>;----------------------------------------------------------------<br>;=====================================================================<br>;****************************<br>;-------------------------<br>; 3DMax Ase export to B3D<br>; Support Converter:<br>;<br>; - Default Map<br>; - Light Map<br>; - Reflect Map<br>; - Bump (Dot3)<br>;-------------------------<br>;****************************<br>;<br>Const Ver# = 2.00<br>Const Max_Vertex% = 65000<br>;===&gt;<br><br>;=======================================<br>;---------------------------------------<br>; Costanti texture<br>;---------------------------------------<br>;=======================================<br>Const tex_color     = 1   ; Color texture<br>Const tex_alpha     = 2   ; Alpha texture (Include alpha channel data)<br>Const tex_mask      = 4   ; Masked texture (black is transparent)<br>Const tex_mipmap    = 8   ; Create texture mipmaps<br>Const tex_clampu    = 16  ; Restrict U texture coords from "bleeding over"<br>Const tex_clampv    = 32  ; Restrict V texture coords from "bleeding over"<br>Const tex_envshpere = 64  ; Load texture as a spherical environment map<br>Const tex_void      = 128 ; &lt;void&gt;<br>Const tex_vram      = 256 ; Force texture graphics to vram<br>Const tex_highcolor = 512 ; Forces texture graphics to be 32-bits per pixel<br><br>Const blend_Alp = 1 ; non miscelare oppure Alpha (alpha quando usato con il flag Alpha - non raccomandato nel multitexturing - vedi sotto)<br>Const blend_Mul = 2 ; Moltiplicazione (Default) <br>Const blend_Add = 3 ; Additivo<br>Const blend_Dot = 4 ; Dot-3<br><br><br>;=======================================<br>;---------------------------------------<br>; Strutture di dati<br>;---------------------------------------<br>;=======================================<br>;===&gt;<br>Type RGBA<br>	Field R#											; <br>	Field G#										;<br>	Field B#											;<br>	Field A#											;<br>End Type<br>;===&gt; <br>Type Vector<br>	Field X#											;<br>	Field Y#											;<br>	Field Z#											;<br>End Type<br>;===&gt; <br>Type Face<br>	Field A%											;<br>	Field B%											;<br>	Field C%											;<br>End Type<br>;===&gt;<br>Type UV<br>	Field U#											;<br>	Field V#											;<br>	Field W#											;<br>End Type<br>;===&gt;<br>Type Material<br>	Field Nome$								;<br>	Field Col.RGBA						;<br>	Field Shines#								;<br>	;<br>	Field OnDifu%						; Variabile di verifica presenza materiale<br>	Field Difuse$						; Nome texture<br>	Field D_UV_OffsetX			;	Texture Offset X<br>	Field D_UV_OffsetY			;								 Y<br>	Field D_UV_TilingX			;	Texture Tiling X<br>	Field D_UV_TilingY			;								 Y<br>	;<br>	Field OnSelf%						; Variabile di verifica presenza materiale<br>	Field SelfI$									;<br>	Field S_UV_OffsetX			;	Texture Offset X<br>	Field S_UV_OffsetY			;								 Y<br>	Field S_UV_TilingX			;	Texture Tiling X<br>	Field S_UV_TilingY			;								 Y<br>	;<br>	Field OnEnvi%						; Variabile di verifica presenza materiale<br>	Field Enviroment$				;<br>	Field E_UV_OffsetX			;	Texture Offset X<br>	Field E_UV_OffsetY			;								 Y<br>	Field E_UV_TilingX			;	Texture Tiling X<br>	Field E_UV_TilingY			;								 Y<br>	;<br>	Field OnBump%						; Variabile di verifica presenza materiale<br>	Field Bump$								;<br>	Field B_UV_OffsetX			;	Texture Offset X<br>	Field B_UV_OffsetY			;								 Y<br>	Field B_UV_TilingX			;	Texture Tiling X<br>	Field B_UV_TilingY			;								 Y<br>End Type<br>;===&gt;<br>Type Obj<br>	;<br>	Field IdMaterial%					;<br>	;<br>	Field NVertex						;<br>	Field CntVertex					;<br>	Field VertexList.Vector	;<br>	;<br>	Field NFace							;<br>	Field CntFace					;<br>	Field FaceList.Face			;<br>	;<br>	Field Normal.Vector			;<br>	;<br>	Field CH1_NVertex				;<br>	Field CH1_VList.UV			;<br>	Field CH1_NFace					;<br>	Field CH1_FList.Face		;<br>	;<br>	Field CH2_NVertex				;<br>	Field CH2_VList.UV			;<br>	Field CH2_NFace					;<br>	Field CH2_FList.Face		;<br>	;<br>End Type <br><br>Type Mesh<br>	;<br>	Field Nome$							;<br>	;<br>	Field Nobj%							;<br>	Field CNTObj%						;<br>	Field Oggetto.Obj				;<br>	;<br>	Field NMaterial%				;<br>	Field CNTMaterial%			;<br>	Field Materiali.Material;<br>	;<br>End Type<br><br>Type FB3D<br>	Field vx#, vy#, vz#			; <br>	Field nx#, ny#, nz#			;<br>	Field r#, g#, b#, a#			;<br>	Field u1#, v1#, w1#			;<br>	Field u2#, v2#, w2#			;<br>End Type <br><br><br>;=======================================<br>;---------------------------------------<br>; Variabili Principali<br>;---------------------------------------<br>;=======================================<br>;===&gt;<br>Global AseObj.Mesh = New Mesh<br>Global FileLog<br>Global ObjExp<br>Dim		 VertB3D.FB3D(Max_Vertex)<br><br>;===&gt;<br>AppTitle ("V&amp;D Software - Export file 3DSMAX Ase to B3D - Version "+Ver#)<br><br>Include "b3dfile.bb"<br><br>Graphics3D 800,600,32,2<br><br>;===&gt;<br>Const Simb1 = 32 ; 32 = ASC(" ")<br>Const Simb2 = 125; 125 = ASC("}")<br><br>  ;===&gt;<br>  Flag$ = Input$( "Texture in VRam? (s/N)" )<br>  If (Lower(Flag$)="s") TexFlag = TexFlag + tex_vram	Else TexFlag = TexFlag + 0   <br>  ;===&gt;<br>  Flag$ = Input$( "MipMapping? (s/N)" )<br>  If (Lower(Flag$)="s") TexFlag = TexFlag + tex_mipmap  Else TexFlag = TexFlag + 0<br>	;===&gt;<br>  Flag$ = Input$( "HightColor? (s/N)" )<br>  If (Lower(Flag$)="s") TexFlag = TexFlag + tex_highcolor Else TexFlag = TexFlag + 0 <br>  ;===&gt;<br>  Cls<br>  Text 0,00,"V&amp;D Software - Ver."+Ver +" - Inizio esportazione"<br>  Text 0,30,"Conversione in corso......"<br>  Text 0,60,"Importazione File ASE ......"<br><br>;Flip<br><br>Global time1 = MilliSecs()<br>;Stop<br>LogDebug("Open")<br>Convert_Ase_B3d("Obj\Obj.ASE","Obj\Obj.B3D")<br>LogDebug();close file log<br><br>Global time2 = MilliSecs()<br><br>;;cool dragon model!<br>;dragon=LoadMesh( "imp.x" )<br>;EntityFX dragon,1<br>;PositionMesh dragon,0,0,0<br>;dragonbump = LoadTexture("imp_dot3.png")<br>;TextureBlend dragonbump,4<br>;;ScaleTexture dragonbump,.25,.25<br>;dragonskin = LoadTexture("imp_d.png")<br>;TextureBlend dragonskin,2<br>;EntityTexture dragon,dragonbump,0,1<br>;EntityTexture dragon,dragonskin,0,2<br><br>;Global ObjExp = dragon<br><br>;=====================================================================<br>;=====================================================================<br>; -------------------------------<br>; Creation de la caméra<br>; -------------------------------<br>Global Mouse_X_Speed#, Mouse_Y_Speed#<br>Global Camera<br>Global Camera_VelX#, Camera_VelZ#<br>Global Camera_Pitch#, Camera_Yaw#<br><br>Global Cam_spx# = 3.682*100<br>Global Cam_spy# = -6.992*100<br>Global Cam_spz# = 2.663*100<br>Global Cam_srx# = 73.275<br>Global Cam_sry# = 2.499<br>Global Cam_srz# = 27.786<br>Global Cam_fov# = Sqr(50)<br><br>Camera=CreateCamera()<br>RotateEntity camera,0,0,0<br>;PositionEntity camera,290,-600,2380 ; da inc a metri x100<br>PositionEntity camera,0,0,0 ; da inc a metri x100<br>CameraRange camera,0.1,10000<br>;formula del fov camera Zoom =Sqrt(Fov)<br>;CameraZoom camera, sqr(50) ; 1 = 10 di fov // 7.5 = 50 di fov<br>CameraZoom camera, 1 ; 1 = 10 di fov // 7.5 = 50 di fov<br>; -------------------------------<br>; Chargement de l'objet<br>; -------------------------------<br>Stop<br>ObjExp=LoadMesh( "obj\Obj.b3d" )<br>;ObjExp=LoadAnimMesh( "Obj.b3d" )<br>;Animate ObjExp, 1<br>RotateEntity ObjExp,0,0,0<br>PositionEntity ObjExp,0,0,0<br>EntityShininess ObjExp,1<br>PointEntity Camera,ObjExp<br><br>temp = CreateSphere(8)<br>EntityAlpha temp,0.5<br>Dither True<br><br>;===&gt;<br>LightCA = 128<br>LightDOT3=(256-LightCA)/2<br>AmbientLight LightCA, LightCA, LightCA<br>;===&gt;<br>;pivot=CreatePivot()<br>;mylight = CreateSphere(2)<br>;light=CreateLight(1,mylight)<br>;LightRange light,200<br>;===&gt;<br>font=LoadFont( "Arial",20 )<br>SetFont font<br>;===&gt;<br>MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>;rotateentity camera,-2.7,178,180<br>SetBuffer BackBuffer()<br><br>While KeyDown(1)=0<br><br>	;mylight<br>;	Dist#=32<br>;	rot#=rot#+0.1<br>;	xrot#=Cos(rot)*Dist<br>;	zrot#=Sin(rot)*Dist<br>;	yrot#=Cos(rot/4)*Dist<br>;	PointEntity mylight,ObjExp	<br>;	PositionEntity mylight,EntityX(ObjExp)+xrot,1.5+yrot,EntityZ(ObjExp)+zrot<br>;<br>;	PositionEntity pivot, 0, 0, 0<br>;	RotateEntity pivot,-EntityPitch(mylight),EntityYaw(mylight)+180,0<br>;	MoveEntity pivot, 0, 0, 1<br>;	r#=(EntityX(Pivot)+1.0) * 128<br>;	g#=(EntityZ(Pivot)+1.0) * 128<br>;	b#=(EntityY(Pivot)+1.0) * 128<br>;	EntityColor ObjExp,r,g,b	<br><br><br><br><br><br>;	if keyhit(47) then   ; 47 = "V"<br>;	  PositionEntity camera,Cam_spx#,Cam_spy#,Cam_spz# ; da inc a metri x100<br>;	  rotateentity camera,Cam_srx#,Cam_sry#,Cam_srz#<br>;	  CameraZoom camera, Cam_fov#<br>;	end if<br>  Procedure_Freelook(1.05,0.2)<br>  UpdateWorld()<br>  RenderWorld()<br>  time_dif = time2-time1<br>  Text 0,0,"V&amp;D Software - Ver."+Ver +" - Esportazione avvenuta con successo"<br>  Text 0,15,"px:"+EntityX(Camera)+"py:"+EntityY(Camera)+"pz:"+EntityZ(Camera)<br>  Text 0,30,"rx:"+EntityPitch(Camera)+"ry:"+EntityYaw(Camera)+"rz:"+EntityRoll(Camera)<br>  Text 0,45,"Time to export"<br>  Text 0,60,"Millisecs "+time_dif+" secs "+(time_dif/1000)<br>  tris = TrisRendered()<br>  Text 0,75,"Triangoli renderiz.:"+tris<br><br>	Text 0,105,"R : "+r#<br>	Text 0,120,"G : "+g#<br>	Text 0,135,"B : "+b#<br><br>  Flip<br>Wend<br><br>End<br>;===============================<br>; -------------------------<br>; Fonction Freelook<br>; -------------------------<br>Function Procedure_Freelook(Velocity#,Speed#)<br>	 AngMax = 89<br>   Mouse_X_Speed=MouseXSpeed()*0.5<br>   Mouse_Y_Speed=MouseYSpeed()*0.5<br><br>   MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>   Camera_Pitch=Camera_Pitch+Mouse_Y_Speed<br>   Camera_Yaw=Camera_Yaw-Mouse_X_Speed<br><br>   If Camera_Pitch&lt;-AngMax Then Camera_Pitch=-AngMax<br>   If Camera_Pitch&gt;AngMax Then Camera_Pitch=AngMax<br><br>   RotateEntity camera,Camera_Pitch,Camera_Yaw,0<br><br>   If KeyDown(Key_ArrowPad_Left) Camera_VelX=Camera_VelX-Speed# ElseIf KeyDown(Key_ArrowPad_Right) Camera_VelX=Camera_VelX+Speed#<br>;  	If KeyDown(Key_ArrowPad_Down) Camera_VelZ=Camera_VelZ-Speed# ElseIf KeyDown(Key_ArrowPad_Up) Camera_VelZ=Camera_VelZ+Speed#<br>   If MouseDown(2) Camera_VelZ=Camera_VelZ-Speed# ElseIf MouseDown(1) Camera_VelZ=Camera_VelZ+Speed#<br><br>   Camera_VelX=Camera_VelX/Velocity#<br>   Camera_VelZ=Camera_VelZ/Velocity#<br>   MoveEntity camera,Camera_VelX,0,Camera_VelZ<br>End Function<br>;===============================<br>;---------------------------<br>; Scrittura stringa<br>;---------------------------<br>Function ReadStringN$(f,sep$)<br>  s$ = "";<br>  SepVal = Asc(sep$)<br><br>  While Not Eof(f)<br>	  let = ReadByte(f);<br>	<br>	  If (let  = SepVal And s$ &lt;&gt; "")<br>		  Return s<br>		Else<br>	    If ((let &gt;= Simb1) And (let &lt;= Simb2) And (let &lt;&gt; SepVal) And (let &lt;&gt; 34)); the code 34 = " from ascii table<br>        s$ = s$ + Chr(let)<br>      Else<br>		    If (s$ &lt;&gt; "") Return s<br>      End If<br>    End If<br>  Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function EstractName$(str_nome$)<br>	s$ = ""<br>	lun = Len(str_nome)<br>	;===&gt;<br>	For xc = lun To 1 Step -1<br>	  s$ = Mid(str_nome,xc,1)<br>	  If ((s$ = "\") Or (xc=1))<br>      s$ = Mid(str_nome,xc+1,lun-xc);<br>	    Exit<br>	  End If<br>	Next<br>	;===&gt;<br>  Return s$	<br>	;===&gt;<br>End Function<br>;==============================<br>;---------------------------<br>; Scrittura stringa<br>;---------------------------<br>Function Convert_Ase_B3d(LoadFile$,SaveFile$)<br>	;===&gt;<br>  infile = OpenFile(LoadFile$)<br>  While Not Eof(infile)<br>    LoadAse(infile)<br>	Wend<br>	CloseFile infile<br>	;===&gt;<br>;Stop <br>	OutFile = WriteFile(SaveFile$)<br>	If Not OutFile  RuntimeError "Apertura file in scrittura fallita!!"<br>    WriteBB3D(OutFile)<br>	CloseFile OutFile<br>	;===&gt;<br>End Function<br>;==============================<br>;---------------------------<br>; Scrittura stringa<br>;---------------------------<br>Function LoadAse(ASE)<br>  OpenP = 0<br>	S$=""<br>	I%=0<br>	F#=0<br>	Ogg%=0<br>	<br>	While Not Eof(ASE)<br>		chunk$ = ReadStringN(ASE," ")<br>		;===&gt;<br>		If (chunk$ = "*GEOMOBJECT") Then<br>		  ;stop<br>      While Not Eof(ASE)<br>		    cluster$ = ReadStringN(ASE," ")<br>				;Stop<br>		    ;===&gt;<br>				If (cluster$ = "{")<br>				OpenP = OpenP+1<br>				End If<br>		    ;===&gt;<br>				If (cluster$ = "}") Then<br>				  OpenP = OpenP-1<br>				End If<br>		    ;===&gt;<br>				If (OpenP &lt;= 0)<br>				  If (XYZ_Count_vertex&gt;2)<br>				    Return 2<br>				  Else<br>				    Return 0<br>				  End If<br>				End If<br>		    ;===&gt;<br>		    If (cluster$ = "*NODE_NAME") Then<br>				  ;Stop<br>          S$ = ReadStringN(ASE," ")<br>					AseObj\nome = s$<br>					LogWrite("")<br>					LogWrite("===========================")<br>					LogWrite("---------------------------")<br>					LogWrite("Nome oggetto : " + AseObj\nome)<br>					Text 0,120,"Importo "+(Ogg/2)+" Materiali"<br>        End If<br>		    ;===&gt;<br>		    If (cluster$ = "*TM_POS") Then<br>        End If<br>		    ;===&gt;<br>		    If (cluster$ = "*TM_ROTAXIS") Then<br>        End If<br>		    ;===&gt;<br>		    If (cluster$ = "*TM_ROTANGLE") Then<br>        End If<br>		    ;===&gt;<br>		    If (cluster$ = "*TM_SCALE") Then<br>        End If<br> 		    ;===&gt;<br>        If cluster$ = "*MATERIAL_REF" Then<br>					I% = ReadStringN(ASE," ")<br>					AseObj\Oggetto\IdMaterial% = I%<br>        End If<br> 		    ;===&gt;<br>		    If (cluster$ = "*MESH") Then<br>					AseObj\Oggetto.obj = New obj<br>          While Not Eof(ASE)<br>		        cluster1$ = ReadStringN(ASE," ")<br> 		        ;===&gt;<br> 		        If (cluster1$="}") Exit<br>    		    ;===&gt;<br>		        If (cluster1$ = "*MESH_NUMVERTEX") Then<br>						  ;Stop<br>		          I% = ReadStringN(ASE," ")<br>							AseObj\Oggetto\NVertex = I<br>							LogWrite("Numero di Vertici : " + AseObj\Oggetto\NVertex)<br>		        End If<br>    		    ;===&gt;<br>		        If (cluster1$ = "*MESH_NUMFACES") Then<br>						  ;Stop<br>		          I%  = ReadStringN(ASE," ")<br>							AseObj\Oggetto\NFace = I<br>							LogWrite("Numero di Face : " + AseObj\Oggetto\NFace)<br>		        End If<br>    		    ;===&gt;<br>		        If (cluster1$ = "*MESH_VERTEX_LIST") Then<br>						  ;Stop<br>  		        MESH_VERTEX_LIST(ASE)<br>		        End If<br>    		    ;===&gt;<br>		        If (cluster1$ = "*MESH_FACE_LIST") Then<br>						  ;Stop<br>  		        MESH_FACE_LIST(ASE)<br>		        End If<br>    		    ;===&gt;<br>		        If cluster1$ = "*MESH_NUMTVERTEX" Then<br>						  ;Stop<br>		          I% = ReadStringN(ASE," ")<br>							AseObj\Oggetto\CH1_NVertex = I<br>							LogWrite("")<br>							LogWrite("Numero di Vertici UV CH_1: " + AseObj\Oggetto\CH1_NVertex)<br>		        End If <br>    		    ;===&gt;<br>		        If cluster1$ = "*MESH_TVERTLIST" Then<br>						  ;Stop<br>		          MESH_TVERTLIST(ASE)<br>		        End If<br>    		    ;===&gt;<br>		        If cluster1$ = "*MESH_NUMTVFACES" Then<br>						  ;Stop<br>		          I% = ReadStringN(ASE," ")<br>							AseObj\Oggetto\CH1_NFace = I<br>							LogWrite("")<br>							LogWrite("Numero di Facce UV CH_1: " + AseObj\Oggetto\CH1_NFace)<br>		        End If<br>    		    ;===&gt;<br>		        If cluster1$ = "*MESH_TFACELIST" Then<br>						  ;Stop<br>  		        MESH_TFACELIST(ASE)<br>		        End If<br>    		    ;===&gt;<br>						; Lettura UV Channel 2<br>		        If cluster1$ = "*MESH_MAPPINGCHANNEL" Then<br>              While Not Eof(ASE)<br>		            chunk1$ = ReadStringN(ASE," ")<br>    		        ;===&gt;<br>    		        If (chunk1$="}") Exit<br>								;===&gt;<br>		            If chunk1$ = "*MESH_NUMTVERTEX" Then<br>									;Stop<br>									I% = ReadStringN(ASE," ")<br>									AseObj\Oggetto\CH2_NVertex = I<br>									LogWrite("")<br>									LogWrite("Numero di Vertici UV CH_2: " + AseObj\Oggetto\CH2_NVertex)<br>    		        End If<br>        		    ;===&gt;<br>    		        If chunk1$ = "*MESH_TVERTLIST" Then<br>									;Stop<br>    		          MESH_TVERTLIST1(ASE)<br>    		        End If<br>        		    ;===&gt;<br>		            If chunk1$ = "*MESH_NUMTVFACES" Then<br>									;Stop<br>									I% = ReadStringN(ASE," ")<br>									AseObj\Oggetto\CH2_NFace = I<br>									LogWrite("")<br>									LogWrite("Numero di Facce UV CH_2: " + AseObj\Oggetto\CH2_NFace)<br>		            End If<br>        		    ;===&gt;<br>		            If chunk1$ = "*MESH_TFACELIST" Then<br>									;Stop<br>      		        MESH_TFACELIST1(ASE)<br>    		        End If<br>    		        ;===&gt;<br>  	          Wend<br>		        End If<br>    		    ;===&gt;<br>            If (cluster1$ = "*MESH_NORMALS") Then<br>							;Stop<br>		    		  MESH_NORMALS(ASE)<br>		        End If<br>    		    ;===&gt;<br>          Wend<br>        End If<br>		    ;===&gt;<br>    	Wend<br>		End If<br>		;===&gt;<br>		; Chunck *MATERIAL_LIST<br>		If chunk$ = "*MATERIAL_LIST" Then<br>		  OpenP = 0<br>      While Not Eof(ASE)<br>		    cluster$ = ReadStringN(ASE," ")<br>				;===&gt;<br>				If (cluster$ = "{")<br>				  OpenP = OpenP+1<br>				End If<br>				If (cluster$ = "}") Then<br>				  OpenP = OpenP-1<br>				End If<br>				If (OpenP &lt;= 0)<br>				  If (MAT_Count=&gt;0)<br>				    Return 1<br>				  Else<br>				    Return 0<br>				  End If<br>				End If<br>		    ;===&gt;<br>		    If (cluster$ = "*MATERIAL_COUNT") Then<br>		      cnt = ReadStringN(ASE," ")<br>     			AseObj\NMaterial = cnt<br>					LogWrite("")<br>					LogWrite("Numero di Materiali: " + AseObj\NMaterial)<br>					Text 0,90,"Importo "+AseObj\NMaterial+" Materiali"<br>				End If<br>		    ;===&gt;<br>				; Inizializza il materiale<br>		    If (cluster$ = "*MATERIAL") Then<br>			    ;===&gt;<br>					LogWrite("")<br>					LogWrite("===========================")<br>					LogWrite("---------------------------")<br>          Id_mat = ReadStringN(ASE," ")<br>					AseObj\Materiali.Material = New Material<br>					AseObj\Materiali\Col.RGBA = New RGBA<br>			    ;===&gt;<br>				End If<br>		    ;===&gt;<br>		    If (cluster$ = "*MATERIAL_NAME") Then<br>          a$ = ReadStringN(ASE," ")<br>					AseObj\Materiali\nome$ = a$<br>					LogWrite("")<br>					LogWrite("Materiale: " + AseObj\Materiali\nome)<br>				End If <br>		    ;===&gt;<br>		    If (cluster$ = "*MATERIAL_DIFFUSE") Then<br>;		    If (cluster$ = "*MATERIAL_AMBIENT") Then<br>			    ;===&gt;<br>          R# = ReadStringN(ASE," ")<br>          G# = ReadStringN(ASE," ")<br>          B# = ReadStringN(ASE," ")<br>			    ;===&gt;<br>					AseObj\Materiali\Col\R# = R#<br>					AseObj\Materiali\Col\G# = G#<br>					AseObj\Materiali\Col\B# = B#<br>					LogWrite("R: " + AseObj\Materiali\Col\R# + "  G: " + AseObj\Materiali\Col\G# + "  B: " + AseObj\Materiali\Col\B# )<br>			    ;===&gt;<br>				End If<br>		    ;===&gt;<br>				If (cluster$ = "*MATERIAL_SHINE") Then<br>					F# = ReadStringN(ASE," ")<br>					AseObj\Materiali\Shines# = F#<br>				End If<br>		    ;===&gt;<br>		    If (cluster$ = "*MATERIAL_TRANSPARENCY") Then<br>			    ;===&gt;<br>		      F# = ReadStringN(ASE," ")<br>          AseObj\Materiali\Col\A# = 1.0-F#<br>					LogWrite("Numero di Vertex : " + AseObj\Materiali\Col\A#)<br>			    ;===&gt;<br>				End If<br>				;********************************************<br>				;==========================<br>				;<br>				;===&gt;<br>		    If (cluster$ = "*MAP_DIFFUSE") Then<br>		    ;===&gt;<br>					While Not Eof(ASE)<br>						;===&gt;<br>						cluster1$ = ReadStringN(ASE," ")<br>						;===&gt;<br>						If (cluster1$="}") Exit<br>						;===&gt;<br>						If (cluster1$="*BITMAP")<br>							name$ = ReadStringN(ASE,"")<br>							AseObj\Materiali\Difuse$ = EstractName$(name$);<br>							LogWrite("Numero di Vertex : " + AseObj\Materiali\Difuse$)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\D_UV_OffsetX = F#<br>							LogWrite("U_OFFSET : " + AseObj\Materiali\D_UV_OffsetX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\D_UV_OffsetY = F#<br>							LogWrite("V_OFFSET : " + AseObj\Materiali\D_UV_OffsetY)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\D_UV_TilingX = F#<br>							LogWrite("U_TILING : " + AseObj\Materiali\D_UV_TilingX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\D_UV_TilingY = F#<br>							LogWrite("V_TILING : " + AseObj\Materiali\D_UV_TilingY)<br>						End If<br>						;===&gt;<br>					Wend<br>				End If<br>				;********************************************<br>				;==========================<br>				;<br>				;===&gt;<br>		    If (cluster$ = "*MAP_SELFILLUM") Then<br>		    ;===&gt;<br>					While Not Eof(ASE)<br>						;===&gt;<br>						cluster1$ = ReadStringN(ASE," ")<br>						;===&gt;<br>						If (cluster1$="}") Exit<br>						;===&gt;<br>						If (cluster1$="*BITMAP")<br>							name$ = ReadStringN(ASE,"")<br>							AseObj\Materiali\SelfI$ = EstractName$(name$);<br>							LogWrite("Numero di Vertex : " + AseObj\Materiali\SelfI$)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\S_UV_OffsetX = F#<br>							LogWrite("U_OFFSET : " + AseObj\Materiali\S_UV_OffsetX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\S_UV_OffsetY = F#<br>							LogWrite("V_OFFSET : " + AseObj\Materiali\S_UV_OffsetY)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\S_UV_TilingX = F#<br>							LogWrite("U_TILING : " + AseObj\Materiali\S_UV_TilingX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\S_UV_TilingY = F#<br>							LogWrite("V_TILING : " + AseObj\Materiali\S_UV_TilingY)<br>						End If<br>						;===&gt;<br>					Wend<br>				End If<br>		    ;===&gt;<br>				;********************************************<br>				;==========================<br>				;<br>				;===&gt;<br>		    If (cluster$ = "*MAP_BUMP") Then<br>		    ;===&gt;<br>					While Not Eof(ASE)<br>						;===&gt;<br>						cluster1$ = ReadStringN(ASE," ")<br>						;===&gt;<br>						If (cluster1$="}") Exit<br>						;===&gt;<br>						If (cluster1$="*BITMAP")<br>							name$ = ReadStringN(ASE,"")<br>							AseObj\Materiali\Bump$ = EstractName$(name$);<br>							LogWrite("Numero di Vertex : " + AseObj\Materiali\Bump$)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\B_UV_OffsetX = F#<br>							LogWrite("U_OFFSET : " + AseObj\Materiali\B_UV_OffsetX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\B_UV_OffsetY = F#<br>							LogWrite("V_OFFSET : " + AseObj\Materiali\B_UV_OffsetY)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\B_UV_TilingX = F#<br>							LogWrite("U_TILING : " + AseObj\Materiali\B_UV_TilingX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\B_UV_TilingY = F#<br>							LogWrite("V_TILING : " + AseObj\Materiali\B_UV_TilingY)<br>						End If<br>						;===&gt;<br>					Wend<br>				End If<br>		    ;===&gt;<br>				;********************************************<br>				;==========================<br>				;<br>				;===&gt;<br>		    If (cluster$ = "*MAP_Env") Then<br>		    ;===&gt;<br>					While Not Eof(ASE)<br>						;===&gt;<br>						cluster1$ = ReadStringN(ASE," ")<br>						;===&gt;<br>						If (cluster1$="}") Exit<br>						;===&gt;<br>						If (cluster1$="*BITMAP")<br>							name$ = ReadStringN(ASE,"")<br>							AseObj\Materiali\Enviroment$ = EstractName$(name$);<br>							LogWrite("Numero di Vertex : " + AseObj\Materiali\Enviroment$)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\E_UV_OffsetX = F#<br>							LogWrite("U_OFFSET : " + AseObj\Materiali\E_UV_OffsetX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_OFFSET")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\E_UV_OffsetY = F#<br>							LogWrite("V_OFFSET : " + AseObj\Materiali\E_UV_OffsetY)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_U_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\E_UV_TilingX = F#<br>							LogWrite("U_TILING : " + AseObj\Materiali\E_UV_TilingX)<br>						End If<br>						;===&gt;<br>						If (cluster1$="*UVW_V_TILING")<br>							F# = ReadStringN(ASE,"");<br>							AseObj\Materiali\E_UV_TilingY = F#<br>							LogWrite("V_TILING : " + AseObj\Materiali\E_UV_TilingY)<br>						End If<br>						;===&gt;<br>					Wend<br>				End If<br>		    ;===&gt;<br>    	Wend		<br>		End If<br>		<br>	Wend<br><br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_NORMALS(ASE)<br>	;===&gt;<br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Poligon Normal")<br>	LogWrite("")<br>	;===&gt;<br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster1$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster1$="*MESH_VERTEXNORMAL")<br>			;===&gt;<br>			AseObj\Oggetto\Normal.Vector = New Vector<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>			X# = ReadStringN(ASE," ")<br>			Y# = ReadStringN(ASE," ")<br>			Z# = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\Normal\X# = X#<br>			AseObj\Oggetto\Normal\Y# = Y#<br>			AseObj\Oggetto\Normal\Z# = Z#<br>			;===&gt;<br>			LogWrite("X = "+AseObj\Oggetto\Normal\X#+"  Y = "+AseObj\Oggetto\Normal\Y#+"  Z = "+AseObj\Oggetto\Normal\Z#)<br>			;===&gt;<br><br>  	End If<br>    If (cluster1$="}") Exit<br>  Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_VERTEX_LIST(ASE)<br>	;===&gt;<br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Vertex List")<br>	LogWrite("")<br>	;===&gt;<br>	AseObj\Oggetto\CntVertex = 0<br>	;===&gt;<br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster2$ = ReadStringN(ASE," ")<br>  	;===&gt;<br>		If (cluster2$="*MESH_VERTEX")<br><br>			;===&gt;<br>			AseObj\Oggetto\VertexList.Vector = New Vector<br>			;===&gt;<br>			No$ = ReadStringN(ASE," ")<br>			X# = ReadStringN(ASE," ")<br>			Y# = ReadStringN(ASE," ")<br>			Z# = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\VertexList\X# = X#<br>			AseObj\Oggetto\VertexList\Y# = Y#<br>			AseObj\Oggetto\VertexList\Z# = Z#<br>			;===&gt;<br>			LogWrite("n "+AseObj\Oggetto\CntVertex+" - X = "+AseObj\Oggetto\VertexList\X#+"  Y = "+AseObj\Oggetto\VertexList\Y#+"  Z = "+AseObj\Oggetto\VertexList\Z#)<br>			AseObj\Oggetto\CntVertex = AseObj\Oggetto\CntVertex + 1<br>			;===&gt;<br>		End If<br>		;===&gt;<br>		If (cluster2$="}") Exit<br>		;===&gt;<br>	Wend<br>	;===&gt;<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_FACE_LIST(ASE)<br>	;===&gt;<br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Face List")<br>	LogWrite("")<br>	;===&gt;<br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster2$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster2$="*MESH_FACE")<br>			;===&gt;<br>			AseObj\Oggetto\FaceList.Face = New Face<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>      No$ = ReadStringN(ASE," ")<br>      A% = ReadStringN(ASE," ") : No$ = ReadStringN(ASE," ")<br>      B% = ReadStringN(ASE," ") : No$ = ReadStringN(ASE," ")<br>      C% = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\FaceList\A% = A<br>			AseObj\Oggetto\FaceList\B% = B<br>			AseObj\Oggetto\FaceList\C% = C<br>			;===&gt;<br>			LogWrite("n "+AseObj\Oggetto\CntFace+" - A = "+AseObj\Oggetto\FaceList\A%+"  B = "+AseObj\Oggetto\FaceList\B%+"  C = "+AseObj\Oggetto\FaceList\C%)<br>			AseObj\Oggetto\CntFace = AseObj\Oggetto\CntFace +1					;<br>			;===&gt;<br>		End If<br>		;===&gt;<br>	  If (cluster2$="}") Exit<br>		;===&gt;<br>	Wend<br>	;===&gt;<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_TVERTLIST(ASE)<br>	;===&gt; <br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Vertex UV CH1")<br>	LogWrite("")<br>	;===&gt;<br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster2$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster2$="*MESH_TVERT")<br>			;===&gt;<br>			AseObj\Oggetto\CH1_VList.UV = New UV<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>			U# = ReadStringN(ASE," ")<br>			V# = ReadStringN(ASE," ")<br>			W# = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\CH1_VList\U = U<br>			AseObj\Oggetto\CH1_VList\V = V<br>			AseObj\Oggetto\CH1_VList\W = W<br>			LogWrite("U = "+AseObj\Oggetto\CH1_VList\U+"  V = "+AseObj\Oggetto\CH1_VList\V+"  W = "+AseObj\Oggetto\CH1_VList\W)<br>			;===&gt;<br>		End If<br>    If (cluster2$="}") Exit<br>  Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_TFACELIST(ASE)<br>	;===&gt; <br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Face UV CH1")<br>	LogWrite("")<br>	;===&gt; <br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster2$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster2$="*MESH_TFACE")<br>			;===&gt;<br>			AseObj\Oggetto\CH1_FList.Face = New Face<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>      A% = ReadStringN(ASE," ")<br>			B% = ReadStringN(ASE," ")<br>			C% = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\CH1_FList\A% = A%<br>			AseObj\Oggetto\CH1_FList\B% = B%<br>			AseObj\Oggetto\CH1_FList\C% = C%<br>			LogWrite("A = "+AseObj\Oggetto\CH1_FList\A+"  B = "+AseObj\Oggetto\CH1_FList\B+"  C = "+AseObj\Oggetto\CH1_FList\C)<br>			;===&gt;<br>  	End If<br>	  If (cluster2$="}") Exit<br>	Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_TVERTLIST1(ASE)<br>	;===&gt; <br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Vertex UV CH2")<br>	LogWrite("")<br>	;===&gt;<br>   While Not Eof(ASE)<br>		;===&gt;<br><br>    cluster2$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster2$="*MESH_TVERT")<br>			;===&gt;<br>			AseObj\Oggetto\CH2_VList.UV = New UV<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>			U# = ReadStringN(ASE," ")<br>			V# = ReadStringN(ASE," ")<br>			W# = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\CH2_VList\U = U<br>			AseObj\Oggetto\CH2_VList\V = V<br>			AseObj\Oggetto\CH2_VList\W = W<br>			LogWrite("U = "+AseObj\Oggetto\CH2_VList\U+"  V = "+AseObj\Oggetto\CH2_VList\V+"  W = "+AseObj\Oggetto\CH2_VList\W)<br>			;===&gt;<br>		End If<br>    If (cluster2$="}") Exit<br>  Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function MESH_TFACELIST1(ASE)<br><br>	;===&gt; <br>	LogWrite("")<br>	LogWrite("===========================")<br>	LogWrite("---------------------------")<br>	LogWrite(" Face UV CH2")<br>	LogWrite("")<br>	;===&gt; <br>  While Not Eof(ASE)<br>		;===&gt;<br>    cluster2$ = ReadStringN(ASE," ")<br>		;===&gt;<br>    If (cluster2$="*MESH_TFACE")<br>			;===&gt;<br>			AseObj\Oggetto\CH2_FList.Face = New Face<br>			;===&gt;<br>      No$ = ReadStringN(ASE," ")<br>      A% = ReadStringN(ASE," ")<br>			B% = ReadStringN(ASE," ")<br>			C% = ReadStringN(ASE," ")<br>			;===&gt;<br>			AseObj\Oggetto\CH2_FList\A% = A%<br>			AseObj\Oggetto\CH2_FList\B% = B%<br>			AseObj\Oggetto\CH2_FList\C% = C%<br>			LogWrite("A = "+AseObj\Oggetto\CH2_FList\A+"  B = "+AseObj\Oggetto\CH2_FList\B+"  C = "+AseObj\Oggetto\CH2_FList\C)<br>			;===&gt;<br>  	End If<br>	  If (cluster2$="}") Exit<br>	Wend<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function WriteBB3D( File )<br>	;Stop<br>	mat = 0<br>	<br>	LogWrite("")<br>	LogWrite("")<br>	LogWrite("===================================================")<br>	LogWrite("------------------------------------------------")<br>	LogWrite(" Inzio Esportazione")<br>	LogWrite("------------------------------------------------")<br>	LogWrite("")<br><br>	;===&gt;<br>	b3dSetFile( file )<br>	b3dBeginChunk( "BB3D" )<br>	b3dWriteInt( 1 )	;version<br>	;===&gt;<br>	;Iniziamo con la giostra ;-)<br>	;<br>	;====================== <br>	; Scrittura texture<br>	;===&gt;<br>	;Stop <br>	AseObj\Materiali.Material = First Material<br>		For AseObj\Materiali.Material = Each Material<br>			NMap=0<br>			;===&gt; <br>			b3dBeginChunk( "TEXS" )<br>			;===============================<br>			;===&gt; Default map<br>			If ( AseObj\Materiali\Difuse$&lt;&gt;"")<br>				NMap=NMap+1<br>				b3dWriteString( AseObj\Materiali\Difuse$ )<br>				b3dWriteInt( 1 + TexFlag )  ;textureflag<br>				b3dWriteInt( 2 )					  			;textureblend<br>				b3dWriteFloat( AseObj\Materiali\D_UV_OffsetX# )		;x_pos<br>				b3dWriteFloat( AseObj\Materiali\D_UV_OffsetY# )		;y_pos<br>				b3dWriteFloat( AseObj\Materiali\D_UV_TilingX# )		;x_scale<br>				b3dWriteFloat(-AseObj\Materiali\D_UV_TilingY# )		;y_scale<br>				b3dWriteFloat( 0 )																;rotation<br>			EndIf <br>			;===============================<br>			;===&gt; ReflectMap<br>			If ( AseObj\Materiali\Enviroment$&lt;&gt;"")<br>				NMap=NMap+1<br>				b3dWriteString( AseObj\Materiali\Enviroment$ )<br>				b3dWriteInt( 64 + TexFlag )	;textureflag<br>				b3dWriteInt( 2 )					  											;textureblend<br>				b3dWriteFloat( AseObj\Materiali\E_UV_OffsetX# )		;x_pos<br>				b3dWriteFloat( AseObj\Materiali\E_UV_OffsetY# )		;y_pos<br>				b3dWriteFloat( AseObj\Materiali\E_UV_TilingX# )		;x_scale<br>				b3dWriteFloat(-AseObj\Materiali\E_UV_TilingY# )		;y_scale<br>				b3dWriteFloat( 0 )																;rotation<br>			EndIf <br>			;===============================<br>			;===&gt; Light Map<br>			If ( AseObj\Materiali\SelfI$&lt;&gt;"")<br>				NMap=NMap+1<br>				b3dWriteString( AseObj\Materiali\SelfI$ )<br>				b3dWriteInt( 65536 + TexFlag )	;textureflag for 2nd ! uv channel [65536=normal, 65584=clamp u,v and so on ...]<br>				b3dWriteInt( 2 )									  							;textureblend<br>				b3dWriteFloat( AseObj\Materiali\S_UV_OffsetX# )		;x_pos <br>				b3dWriteFloat( AseObj\Materiali\S_UV_OffsetY# )		;y_pos<br>				b3dWriteFloat( AseObj\Materiali\S_UV_TilingX# )		;x_scale<br>				b3dWriteFloat(-AseObj\Materiali\S_UV_TilingY# )		;y_scale<br>				b3dWriteFloat( 0 )																;rotation<br>			EndIf <br>			;===============================<br>			;===&gt; Bump Map <br>			If ( AseObj\Materiali\Bump$&lt;&gt;"")<br>				NMap=NMap+1<br>				b3dWriteString( AseObj\Materiali\Bump$ )<br>				b3dWriteInt( 65536 + TexFlag)	;textureflag for 2nd ! uv channel [65536=normal, 65584=clamp u,v and so on ...]<br>				b3dWriteInt( 4 )					   											;textureblend<br>				b3dWriteFloat( AseObj\Materiali\B_UV_OffsetX# )		;x_pos <br>				b3dWriteFloat( AseObj\Materiali\B_UV_OffsetY# )		;y_pos<br>				b3dWriteFloat( AseObj\Materiali\B_UV_TilingX# )		;x_scale<br>				b3dWriteFloat(-AseObj\Materiali\B_UV_TilingY# )		;y_scale<br>				b3dWriteFloat( 0 )					 ;rotation<br>			EndIf <br>			;===============================<br>			;===&gt; Log<br>			LogWrite("------------");Name Object<br>			LogWrite("Texture");Name Object<br>			LogWrite("  DefMap -&gt; "+AseObj\Materiali\Difuse$)			;Name Object<br>			LogWrite("  RefMap -&gt; "+AseObj\Materiali\Enviroment$)	;Name Object<br>			LogWrite("  LigMap -&gt; "+AseObj\Materiali\SelfI$)			;Name Object<br>			LogWrite("  BumpMap -&gt; "+AseObj\Materiali\Bump$)			;Name Object<br>			;===&gt;<br>			b3dEndChunk()	;end of TEXS chunk		<br>			;======================<br>			; Scrittura Brush<br>			;===&gt;<br>			b3dBeginChunk( "BRUS" )<br>			;===============================<br>			;===&gt; Multi Texture<br>			b3dWriteInt( NMap )					  		        ;textures per brush[1]<br>			b3dWriteString( AseObj\Materiali\Nome$ );name<br>			b3dWriteFloat( AseObj\Materiali\col\R )	;red<br>			b3dWriteFloat( AseObj\Materiali\col\G )	;green<br>			b3dWriteFloat( AseObj\Materiali\col\B )	;blue<br>			b3dWriteFloat( AseObj\Materiali\col\A )	;alpha<br>			b3dWriteFloat( AseObj\Materiali\Shines );shininess<br>			b3dWriteInt( 1 )					          		;blend<br>			b3dWriteInt( 0 )					          		;FX<br>			If (NMap=1 ) b3dWriteInt( mat+0 ) : mat = mat+1<br>			If (NMap=2 ) b3dWriteInt( mat+0 ) : b3dWriteInt( mat+1 ) : mat = mat+2<br>			If (NMap=3 ) b3dWriteInt( mat+0 ) : b3dWriteInt( mat+1 ) : b3dWriteInt( mat+2 ) : mat = mat+3<br>			If (NMap=4 ) b3dWriteInt( mat+0 ) : b3dWriteInt( mat+1 ) : b3dWriteInt( mat+2 ) : b3dWriteInt( mat+3 ) : mat = mat+4<br>			;===============================<br>			;===&gt; Log<br>			LogWrite("------------");Name Object<br>			LogWrite("Brush");Name Object<br>			LogWrite("   -&gt;"+AseObj\Materiali\Nome$);Name Object<br>			;===&gt;<br>			b3dEndChunk()	;end of Brush chunk		<br>			;===&gt;<br>		Next<br>	;======================<br>	; Scrittura Mesh come sub Object<br>	;===&gt;<br>	For AseObj\Oggetto.obj = Each obj <br>		LogWrite("Mesh");Name Object<br>		b3dBeginChunk( "NODE" );------------sub nodes			<br>			;===&gt;<br>			b3dWriteString( AseObj\Nome$ );name<br>			b3dWriteFloat( 0 )	;x_pos XYZ_px#<br>			b3dWriteFloat( 0 )	;y_pos XYZ_py#<br>			b3dWriteFloat( 0 )	;y_pos XYZ_pz#<br>			b3dWriteFloat( 1 )	;x_scale XYZ_sx#<br>			b3dWriteFloat( 1 )	;y_scale XYZ_sy#<br>			b3dWriteFloat( 1 )	;z_scale XYZ_sz#<br>			b3dWriteFloat( 1 )	;rot_w XYZ_aw#<br>			b3dWriteFloat( 0 )	;rot_x XYZ_ax#<br>			b3dWriteFloat( 0 )	;rot_y XYZ_ay#<br>			b3dWriteFloat( 0 )	;rot_z XYZ_az#<br>			;===&gt;<br>			WriteMESH1()<br>		b3dEndChunk()	;end of NODE chunk<br>	Next<br><br><br><br>	;===&gt;<br>	; chiusura file B3D<br>	b3dEndChunk()	;end of BB3D chunk<br><br><br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function WriteMESH1()<br>	;=========================================================================<br>	;----------------------------------------------------------------------<br>	;Convertiamo il formato standard in formato compatibile BLITZ 3D<br>	;----------------------------------------------------------------------<br>	;=========================================================================<br>	;Stop<br>	NVertex = 0<br>	CntVertex = AseObj\Oggetto\CntVertex<br>	;===&gt;<br>	AseObj\Oggetto\FaceList = First Face<br>	AseObj\Oggetto\CH1_FList = First Face<br>	AseObj\Oggetto\CH2_FList = First Face<br>	;===&gt;<br>	For ciclo = 0 To AseObj\Oggetto\NFace<br>		;===&gt;<br>		; Prendiamoci i vertici inbase alle faccie<br>		ID_VL_A = AseObj\Oggetto\FaceList\a	:	ID_VL_B = AseObj\Oggetto\FaceList\b	: ID_VL_C = AseObj\Oggetto\FaceList\c<br>		;===&gt;<br>		; Prendiamoci le UV CH-1 in base alle faccie<br>		ID_UV1_A = AseObj\Oggetto\CH1_FList\a : ID_UV1_B = AseObj\Oggetto\CH1_FList\b : ID_UV1_C = AseObj\Oggetto\CH1_FList\c<br>		;===&gt;<br>		; Prendiamoci le UV CH-2 in base alle faccie<br>		ID_UV2_A = AseObj\Oggetto\CH2_FList\a : ID_UV2_B = AseObj\Oggetto\CH2_FList\b : ID_UV2_C = AseObj\Oggetto\CH2_FList\c<br>		;********************************************<br>		;===&gt;<br>			;Puntiamo All'oggetto Vertex List (A)<br>			AseObj\Oggetto\VertexList = First Vector<br>			For Cic=0 To ID_VL_A : AseObj\Oggetto\VertexList = After AseObj\Oggetto\VertexList :Next<br>			;Puntiamo All'UV CH-1<br>			AseObj\Oggetto\CH1_VList = First UV<br>			For Cic=0 To ID_UV1_A : AseObj\Oggetto\CH1_VList = After AseObj\Oggetto\CH1_VList :Next<br>			;Puntiamo All'UV CH-2<br>			AseObj\Oggetto\CH2_VList = First UV<br>			For Cic=0 To ID_UV2_A : AseObj\Oggetto\CH2_VList = After AseObj\Oggetto\CH2_VList :Next<br>		;===&gt;<br>		If VertB3D(ID_VL_A)=Null Then<br>			;===&gt;<br>			VertB3D(ID_VL_A) = New FB3D<br>			;===&gt;<br>			;kk=AseObj\Oggetto\VertexList\X#<br>			;yy=VertB3D(ID_VL_A)\vx#<br>			VertB3D(ID_VL_A)\vx# = AseObj\Oggetto\VertexList\X#		;<br>			VertB3D(ID_VL_A)\vy# = AseObj\Oggetto\VertexList\Y#		;<br>			VertB3D(ID_VL_A)\vz# = AseObj\Oggetto\VertexList\Z#		;<br>			;<br>			VertB3D(ID_VL_A)\nx# = AseObj\Oggetto\Normal\X#		;<br>			VertB3D(ID_VL_A)\ny# = AseObj\Oggetto\Normal\Y#		;<br>			VertB3D(ID_VL_A)\nz# = AseObj\Oggetto\Normal\Z#		;<br>			;<br>			VertB3D(ID_VL_A)\r# = 1			;<br>			VertB3D(ID_VL_A)\g# = 1			;<br>			VertB3D(ID_VL_A)\b# = 1			;<br>			VertB3D(ID_VL_A)\a# = 0.5		;<br>			;<br>			VertB3D(ID_VL_A)\u1# = AseObj\Oggetto\CH1_VList\u			;<br>			VertB3D(ID_VL_A)\v1# = AseObj\Oggetto\CH1_VList\v			;<br>			VertB3D(ID_VL_A)\w1# = AseObj\Oggetto\CH1_VList\w			;<br>			;<br>			VertB3D(ID_VL_A)\u2# = AseObj\Oggetto\CH2_VList\u			;<br>			VertB3D(ID_VL_A)\v2# = AseObj\Oggetto\CH2_VList\v			;<br>			VertB3D(ID_VL_A)\w2# = AseObj\Oggetto\CH2_VList\w			;<br>			;===&gt;<br>			NVertex = NVertex + 1<br>			;===&gt;<br>		EndIf<br>		;********************************************<br>		;===&gt;<br>			;Puntiamo All'oggetto Vertex List (B)<br>			AseObj\Oggetto\VertexList = First Vector <br>			For Cic=0 To ID_VL_B : AseObj\Oggetto\VertexList = After AseObj\Oggetto\VertexList :Next<br>			;Puntiamo All'UV CH-1<br>			AseObj\Oggetto\CH1_VList = First UV<br>			For Cic=0 To ID_UV1_B : AseObj\Oggetto\CH1_VList = After AseObj\Oggetto\CH1_VList :Next<br>			;Puntiamo All'UV CH-2<br>			AseObj\Oggetto\CH2_VList = First UV<br>			For Cic=0 To ID_UV2_B : AseObj\Oggetto\CH2_VList = After AseObj\Oggetto\CH2_VList :Next<br>		;===&gt;<br>		If VertB3D(ID_VL_B)=Null Then<br>			;===&gt;<br>			VertB3D(ID_VL_B) = New FB3D<br>			;===&gt;<br>			VertB3D(ID_VL_B)\vx# = AseObj\Oggetto\VertexList\X#		;<br>			VertB3D(ID_VL_B)\vy# = AseObj\Oggetto\VertexList\Y#		;<br>			VertB3D(ID_VL_B)\vz# = AseObj\Oggetto\VertexList\Z#		;<br>			;<br>			VertB3D(ID_VL_B)\nx# = AseObj\Oggetto\Normal\X#		;<br>			VertB3D(ID_VL_B)\ny# = AseObj\Oggetto\Normal\Y#		;<br>			VertB3D(ID_VL_B)\nz# = AseObj\Oggetto\Normal\Z#		;<br>			;<br>			VertB3D(ID_VL_B)\r# = 1			;<br>			VertB3D(ID_VL_B)\g# = 1			;<br>			VertB3D(ID_VL_B)\b# = 1			;<br>			VertB3D(ID_VL_B)\a# = 0.5		;<br>			;<br>			VertB3D(ID_VL_B)\u1# = AseObj\Oggetto\CH1_VList\u			;<br>			VertB3D(ID_VL_B)\v1# = AseObj\Oggetto\CH1_VList\v			;<br>			VertB3D(ID_VL_B)\w1# = AseObj\Oggetto\CH1_VList\w			;<br>			;<br>			VertB3D(ID_VL_B)\u2# = AseObj\Oggetto\CH2_VList\u			;<br>			VertB3D(ID_VL_B)\v2# = AseObj\Oggetto\CH2_VList\v			;<br>			VertB3D(ID_VL_B)\w2# = AseObj\Oggetto\CH2_VList\w			;<br>			;===&gt;<br>			NVertex = NVertex + 1<br>			;===&gt;<br>		EndIf <br>		;********************************************<br>		;===&gt;<br>			;Puntiamo All'oggetto Vertex List (C)<br>			AseObj\Oggetto\VertexList = First Vector <br>			For Cic=0 To ID_VL_C : AseObj\Oggetto\VertexList = After AseObj\Oggetto\VertexList :Next<br>			;Puntiamo All'UV CH-1<br>			AseObj\Oggetto\CH1_VList = First UV<br>			For Cic=0 To ID_UV1_C : AseObj\Oggetto\CH1_VList = After AseObj\Oggetto\CH1_VList :Next<br>			;Puntiamo All'UV CH-2<br>			AseObj\Oggetto\CH2_VList = First UV<br>			For Cic=0 To ID_UV2_C : AseObj\Oggetto\CH2_VList = After AseObj\Oggetto\CH2_VList :Next<br>		;===&gt;<br>		If VertB3D(ID_VL_C)=Null Then<br>			;===&gt;<br>			VertB3D(ID_VL_C) = New FB3D<br>			;===&gt;<br>			VertB3D(ID_VL_C)\vx# = AseObj\Oggetto\Normal\X#		;<br>			VertB3D(ID_VL_C)\vy# = AseObj\Oggetto\Normal\Y#		;<br>			VertB3D(ID_VL_C)\vz# = AseObj\Oggetto\Normal\Z#		;<br>			;<br>			VertB3D(ID_VL_C)\nx# = AseObj\Oggetto\Normal\X#		;<br>			VertB3D(ID_VL_C)\ny# = AseObj\Oggetto\Normal\Y#		;<br>			VertB3D(ID_VL_C)\nz# = AseObj\Oggetto\Normal\Z#		;<br>			;<br>			VertB3D(ID_VL_C)\r# = 1			;<br>			VertB3D(ID_VL_C)\g# = 1			;<br>			VertB3D(ID_VL_C)\b# = 1			;<br>			VertB3D(ID_VL_C)\a# = 0.5		;<br>			;<br>			VertB3D(ID_VL_C)\u1# = AseObj\Oggetto\CH1_VList\u			;<br>			VertB3D(ID_VL_C)\v1# = AseObj\Oggetto\CH1_VList\v			;<br>			VertB3D(ID_VL_C)\w1# = AseObj\Oggetto\CH1_VList\w			;<br>			;<br>			VertB3D(ID_VL_C)\u2# = AseObj\Oggetto\CH2_VList\u			;<br>			VertB3D(ID_VL_C)\v2# = AseObj\Oggetto\CH2_VList\v			;<br>			VertB3D(ID_VL_C)\w2# = AseObj\Oggetto\CH2_VList\w			;<br>			;===&gt;<br>			NVertex = NVertex + 1<br>			;===&gt;<br>		EndIf<br>		;********************************************<br>		;===&gt;<br>		; Puntiamo al successivo gruppo<br>		AseObj\Oggetto\FaceList = After AseObj\Oggetto\FaceList<br>		AseObj\Oggetto\CH1_FList = After AseObj\Oggetto\CH1_FList<br>		AseObj\Oggetto\CH2_FList = After AseObj\Oggetto\CH2_FList<br>		;===&gt;<br>	Next<br>	;----------------------------------------------------------------------<br>	;=========================================================================<br><br>	LogWrite("Mesh");Name Object<br>	b3dBeginChunk( "MESH" )<br>		b3dWriteInt( 0 )				;no 'entity' brush-&lt;---the brush!!<br>		;===&gt;<br>		b3dBeginChunk( "VRTS" )<br>			b3dWriteInt( 3 )			;flags - 0=no 1=normal 2=Vertex color<br>			b3dWriteInt( 2 )			;texture coords per vertex (eg: 1 for simple U/V) max=8<br>			b3dWriteInt( 3 )			;components per set (eg: 2 for simple U/V) max=4<br>			;===&gt;<br>			;Stop <br>			aa = NVertex<br>			bb = AseObj\Oggetto\NVertex<br>			<br>			For ciclo = 0 To AseObj\Oggetto\NVertex-1<br>				;===&gt;<br>				;===&gt; XYZ Vertex<br>				b3dWriteFloat( VertB3D(ciclo)\vx# ); VX<br>				b3dWriteFloat( VertB3D(ciclo)\vy# ); VY<br>				b3dWriteFloat( VertB3D(ciclo)\vz# ); VZ<br>				;===&gt; XYZ Normal<br>				b3dWriteFloat( VertB3D(ciclo)\nx# ); NX<br>				b3dWriteFloat( VertB3D(ciclo)\ny# ); NY<br>				b3dWriteFloat( VertB3D(ciclo)\nz# ); NZ<br>				;===&gt; Vertex Color<br>				b3dWriteFloat( VertB3D(ciclo)\r# ); Vertex Color R<br>				b3dWriteFloat( VertB3D(ciclo)\g# ); Vertex Color G<br>				b3dWriteFloat( VertB3D(ciclo)\b# ); Vertex Color B<br>				b3dWriteFloat( VertB3D(ciclo)\a# ); Vertex Color A<br>				;===&gt; UVW CH-1<br>				b3dWriteFloat( u0# ) ; CH-1 -&gt; U<br>				b3dWriteFloat( v0# ) ; CH-1 -&gt; V<br>				b3dWriteFloat( w0# ) ; CH-1 -&gt; W<br>				;===&gt; UVW CH-2<br>				b3dWriteFloat( u1# ) ; CH-2 -&gt; U<br>				b3dWriteFloat( v1# ) ; CH-2 -&gt; V<br>				b3dWriteFloat( w1# ) ; CH-2 -&gt; W<br>				;===&gt;<br>			Next<br>		b3dEndChunk()	;end of VRTS chunk<br>		;===&gt;<br>		b3dBeginChunk( "TRIS" )<br>			b3dWriteInt( AseObj\Oggetto\IdMaterial )			;flags - 0=no 1=normal 2=Vertex color<br>			;===&gt;<br>			;Stop <br>			aa = AseObj\Oggetto\CntFace<br>			bb = AseObj\Oggetto\NFace<br>			;===&gt;<br>			For AseObj\Oggetto\FaceList = Each Face<br>				;===&gt;<br>				b3dWriteInt( AseObj\Oggetto\FaceList\A )<br>				b3dWriteInt( AseObj\Oggetto\FaceList\B )<br>				b3dWriteInt( AseObj\Oggetto\FaceList\C )<br>				;===&gt;<br>			Next<br>		;===&gt;<br>		b3dEndChunk()	;end of TRIS chunk<br>	;===&gt;<br>	b3dEndChunk()	;end of MESH chunk<br>	;===&gt;<br>	<br>End Function<br><br>;=========================================================================<br>;=========================================================================<br>;=========================================================================<br>;---------------------------<br>;<br>;---------------------------<br>Function LogDebug(Logs$="")<br>	Select Logs$<br>	  Case "Open"<br>	    FileLog = WriteFile("mydata.dat")<br>	  Default<br>	    CloseFile( FileLog )<br>	End Select<br>End Function<br>;==============================<br>;---------------------------<br>;<br>;---------------------------<br>Function LogWrite(Logs$="")<br>  ; +Chr$(10)+Chr$(13) = Accapo<br>  WriteLine( FileLog, Logs$ )<br>End Function <br><br></td></tr></table><br>
<a name="643549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scherererer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try putting it into debug mode and then running it, it should then show you what line the problem is at. <br><br></td></tr></table><br>
<a name="643655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or...<br><br><br>email Fredbourg (creator of Gile[s]) who has already generated import/export for ASE in Blitz.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="644667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> the my problem is Mav and crash blitz<br><br>thanks bye <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
