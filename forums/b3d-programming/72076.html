<!DOCTYPE html><html lang="en" ><head ><title >Type Trouble</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Type Trouble</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Type Trouble</a><br><br>
<a name="805594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm no stranger to Blitz3D, but I have a major problem.<br>I'm trying to make a shooting game in which when you touch a weapon to pick it up, the weapon dissappears and returns after 20 seconds.<br><br>Long ago I bought a book about programming in Blitz3D, which I now use mainly for reference. In this situation it uses the command "Object". Blitz recognizes it by changing the color of the typed word but I can't find it anywhere in the help files. Here's my code (its a bit messed up from the size of this window):<br>	If CountCollisions(soldier2)&gt;0<br>	any_weapon.weapon=Object.weapon(EntityName(entity))<br>	HideEntity any_weapon\inactive_model<br>	any_weapon\active=True<br>	starttimer(any_weapon\inactive_model,any_weapon\timer)<br>	conditional(any_weapon\index,2)<br>	End If	<br><br>Could someone please tell me what Object is and how to use it here? <br><br></td></tr></table><br>
<a name="805599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> First this:<br>my_type.foo = New foo<br>type_ID = Handle(my_type)<br>This asigns the my_type instance a unique ID number.<br><br>Then, you can use this handle to get the type instance it refers to:<br>this_type.foo = Object.foo(type_ID)<br><br>Since the ID handle is a simple integer number, it can be stored as an entity's name, as in the code you posted. This allows a specific type instance to be linked to an entity.<br><br>Handle and Object aren't in the docs as they were never made 'official' commands, for some reason. <br><br></td></tr></table><br>
<a name="805617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Handle() and Object() are now official. <br><br></td></tr></table><br>
<a name="805618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Since when?<br><br>I don't see how they can be official since Handle() could potentially cause a long-running app to crash. <br><br></td></tr></table><br>
<a name="805628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> "skid" mentioned it 9 months ago:<br><div class="quote"> It mentions some 1.97 specific abilities in the LoadTexture description for instance, and all new commands added uptil now are documented including Object and Handle, finally official! <br></div><br><br>They are both on page 129 of the brand new, PRINTED, Blitz3D Programming Manual ( www.lulu.com/content/388950 ). <br><br></td></tr></table><br>
<a name="805629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I'm going to write an app that uses handle that crashes, then report it as a bug. :P <br><br></td></tr></table><br>
<a name="805689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Big10p... In what situations is Object/Handle() prone to crash blitz?  I use handle in my server code, and it was running for about 3 months straight with no issues.  Just kinda curious what to look out for :) <br><br></td></tr></table><br>
<a name="805830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem as I see it is with Handle. It always returns a unique integer. That number is never re-used for the duration of the program run, even if the type instance it refers to is subsequently deleted.<br><br>That means that Handle could potentially run out of integers to assign, if it was called enough times on different type instances. The limit must be $7FFFFFFF as blitz uses 32-bit signed integers.<br><br>TBH, I don't know how Handle copes with this situation if it occurs, but I can't see any other outcome but a crash. Sure, $7FFFFFFF is a very large number and would take a long time to reach, but I guess it's technically possible. <br><br></td></tr></table><br>
<a name="805878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Software Horizons</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought it gave out a number that basically amounts to a pointer.. e.g. a memory address, and not a constantly increasing counter. <br><br></td></tr></table><br>
<a name="805886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. The first time you call it, it returns 1, then 2, then 3 etc. It always returns the same number for the same type instance though, obviously. <br><br></td></tr></table><br>
<a name="806034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p. Thanks for the code, but it doesn't work. The debug reports "Illegal type conversion". Perhaps I should have mentioned this earlier, but I tried numerous other methods of trying to make this work and got this same error almost every time. When I didn't, the whole game changed and after one frame I got the classic "object does not exist" error.<br><br>puki, I'm afraid I dodn't have the time to read 400 pages to solve problems like this.<br><br>This seems to be the last big hurdle in my attempt to make this game. This section of a function controls picking up the weapon, activating it and setting all the variables for its operation. Everything else is a piece of cake.:)<br><br>But , obviously, I don't want my computer to crash <br><br></td></tr></table><br>
<a name="806115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, I wasn't posting working code, just the relevent parts that demonstrate how Object/Handle are used. For the code to actual run, you'd need to define the type foo. <br><br></td></tr></table><br>
<a name="806356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, I integrated the code into my game. I don't know why it doesn't work. <br><br></td></tr></table><br>
<a name="807053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello? <br><br></td></tr></table><br>
<a name="807054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it is something else, because the example seems to work:<br><pre class=code>
Type foo
	Field f$
End Type

my_type.foo = New foo
my_type\f$ = "hello"

type_ID = Handle(my_type)

this_type.foo = Object.foo(type_ID)
Print this_type\f$

WaitKey()
End
</pre> <br><br></td></tr></table><br>
<a name="807055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What line of the code causes the error?<br><br>Without seeing the source, we can't really guess what's going wrong. <br><br></td></tr></table><br>
<a name="807061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here (I found that one problem was that I forgot the second line):<br><br>If CountCollisions(soldier2)&gt;0<br>entity=EntityCollided(soldier2,1)<br>any_weapon.weapon=Object.weapon(EntityName(entity))<br>HideEntity any_weapon\inactive_model<br><br>On the fourth line, I get the classic "Entity does not exist error". This dissappears when I add: <br><br>If entity=True<br><br>after the second line, but then no commands are executed after that. While the program functions normally after that, I'm back to where I started.:(<br><br>P.S., all this code is in functions, and creating and using the weapons are in two different functions, but all the variables, including the types are global.<br><br>By the way how do you insert those code pieces? <br><br></td></tr></table><br>
<a name="807078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use: <pre class=code>
entity=CollisionEntity(soldier, 1)
</pre> instead.<br>To insert code pieces, place a text between 'code tags'<br>You can find the tags here:<br><a href="http://www.blitzbasic.com/faq/faq_entry.php?id=2" target="_blank">http://www.blitzbasic.com/faq/faq_entry.php?id=2</a> <br><br></td></tr></table><br>
<a name="807089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H. T. U.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> How to look like an idiot:<br><br>Step 1: Using an example from a book, try to use the code to program a shooting game. Miss several lines of code.<br><br>Step 2: Check the code on the last page numerous times while forgetting to check the code on the previous page.<br><br>Step 3: Post your question online to ask for help while hinting at the problem being a piece of code that functions perfectly. Involve five other people in a forum trying to find out what's wrong.<br><br>Step 4: Try every suggestion without success and keep trying to find the answer from the wrong piece of code. Finnaly discover the lines of code you miss, which happen to be some of the most important parts.<br><br>Step 5: Post he newly discovered code when it is asked for. Try to solve the nagging "Entity does not exist error" by inserting the code If entity=True. Solve the "Illegal type conversion error" by deleting the new code.<br><br>Step 6: Repeat step five dozens of times with different methods to try to elliminate the errors.<br><br>step 7: Discover that the problem is that when the soldier touches the ground in the building, the entity no longer has a name.<br><br>Solution: change<br><br><pre class=code>If entity=True</pre><br>to<br><br><pre class=code>If entity&lt;&gt;Null</pre><br><br>Thanks for the help guyes!<br>;) <br><br></td></tr></table><br>
<a name="807520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
