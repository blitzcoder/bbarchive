<!DOCTYPE html><html lang="en" ><head ><title >Walking through walls collision problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Walking through walls collision problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Walking through walls collision problem</a><br><br>
<a name="850323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What I have is a house which is set to collide with a character by ellipsoid-to-polygon mode with a full sliding response. The problem is that the collisions don't appear to work some of the time. For example, my character can run across the floor and when he runs into the walls he usually stops, but sometimes if I hit the wall at a certain speed and angle my character just goes right through. This only occurs in certain places on the wall. I know it doesn't have to do with the radius of my character because no matter how I adjust that the problem is still there. This isn't a problem when I set the collisions to 'stop' response, but when I do this a different problem arises which is that my character can't even move when he's in the house. I've thought of dividing the house into two separate parts, the walls and the floors, and having the walls trigger a stop response and the floors trigger a sliding response, but this would involve going through every building model and separating the walls from the floor, which would be quite painstaking and laborious.So, can anyone think of a better solution to this problem or at least explain why this might be happening? <br><br></td></tr></table><br>
<a name="850349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A couple of things you may want to try ..<br><br>If the house is comprised of several meshes - make sure you set the collisions for the children.<br><br>You may have small gaps in your mesh in the places that collisions are breaking during slide mode.  This can cause this issue.  Examine the house in more detail at a bigger scale.<br><br>If you say using stop collisions works - try backing up your player slightly when a collision occurs and see how this works ..<br><br>for c = 1 to countcollisions( player )<br>   translateentity player, collisionnx( player, c ) * .01, collisionny( player,c ) * .01, collisionnz( player, c ) * .01<br>next<br><br>Stevie <br><br></td></tr></table><br>
<a name="850552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait, scratch that, I've just been playing around with it for awhile and it's still a problem when the response is set to stop. Stevie, it's just one single mesh, so it doesn't have to do with children not being set to collide. Also, I tried your suggestion about using the collision normals, which seems to work when I do it like this (multiplying by player speed instead of 0.01):<br><br>for c = 1 to countcollisions( player )<br>translateentity player, collisionnx( player, c ) * playerspeed, collisionny( player,c ) * playerspeed, collisionnz( player, c ) * playerspeed<br>next<br><br>The only problem is that this results in a bounce back effect every time the player hits the wall. Also, I tried experimenting with different numbers but anything less than the players speed resulted in the player being able to go through the wall. I don't understand why this would be happening in the first place. Isn't Blitz supposed to handle the collisions? <br><br></td></tr></table><br>
<a name="850555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you post some code or e-mail it to me?  Blitz collisions work just fine. <br><br></td></tr></table><br>
<a name="850559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How far are your models from 0,0,0? <br><br>I seem to recall that high distances can introduce floating point errors to the collision calculations and occasional failures... <br><br></td></tr></table><br>
<a name="850579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow Madjack, you really nailed it on the head. My house and player were located at 90000,0,90000 for some odd reason. When I moved them closer to the origin (900,0,900) the collisions started working perfectly.<br><br>Thanks for finding the problem for me :) and thanks for your help, too, Steve. <br><br></td></tr></table><br>
<a name="850852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool - one of the issues when trying to build large seamless worlds I suppose. <br><br>My own levels are limited to 4096x2048x4096 - I found that anything larger could lead to rare failures (e.g. characters falling through a mesh) and although it's probably not going to be a problem for you, collisions of medium/small polys against very large single polys can cause failures as well. <br><br></td></tr></table><br>
<a name="851060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I'll have to keep that in mind. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
