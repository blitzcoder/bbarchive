<!DOCTYPE html><html lang="en" ><head ><title >Memory usage</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory usage</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Memory usage</a><br><br>
<a name="306333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a 1Ghz , 1GB ram PC with 128Mb Graphicd card.<br>Running Win 2000<br><br>I have built several components for the level and have 10 animated entities.<br><br>3 lights, 1 camera and fog. <br><br>I have tried reducing colours etc in all textures, but the application still consumes 85Mb ram when running.<br><br>Reducing entities and graphics makes little difference.<br>Is this normal or am I overlooking something.  I know its a bit difficult to guess. <br><br></td></tr></table><br>
<a name="306350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> have you tried?<br><pre class=code>
Graphics3D 640,480,16
</pre><br><br>You can reduce the colors in the textures all you want...but even if you make your textures 8-bit color JPGs...when loading them in Blitz will automaticly convert them to 16 or 32-bit color depending on the color depth that was set with the last Graphics3D call...<br><br>another thing to try is to reduce the texture size...make those 1024 X 1024 textures into 256 X 256 ones, then load them in...also might want to consider turning off MIP-mapping for some textures...<br><br>Just as an example...lets say you have a 1024 X 1024 32-bit texture....that is 4MB on it's own...now you load that in as 32-bit color with mip-mapping enabled...blitz ends up constructing a 512 X 512, a 256 X 256, and a 128 X 128 versions of your texture for use with mip-mapping...so all combined that one texture would need about 5.4MB of video memory to store that one 32-bit texture....in 16-bit mode it's about half that.<br><br>Another thing to consider is the screen resolution...the higher it is the more memory is required...remember you arn't just setting the screen resolution with graphics3D, you are setting two buffers and a Z-buffer...effectively useing 3 times the amount of memory.<br><br>for example:<br><br>Graphics3D 640, 480, 16<br> the front buffer will need: 614400 bytes (exactly 600kb)<br> the backbuffer will need: 614400 bytes<br> the Z-buffer will need: 614400 bytes<br> combined total: approx 1.8MB<br><br>Graphics3D 1024, 768, 32<br> the front buffer will need: 3145728 bytes (exactly 3MB!)<br> the backbuffer will need: 3145728 bytes<br> the Z-buffer will need: 3145728 bytes<br> combined total: approx 9MB...or about 1/10th of the 85MB your game is useing. <br><br></td></tr></table><br>
<a name="306358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks I`ll try all of these.<br><br>At the moment I am running a 1024 X 768 window.<br><br>In your experience what is the norm ?<br><br>640 x 480, 800 X 600 etc. <br><br></td></tr></table><br>
<a name="306369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most cards under windows can support 640 X 480 in 16-bit color...however, blitz has a couple of handy little built in functions for your game to deturmine the available graphics modes and if a 3D graphics driver is available...<br><br>I would first test if the graphics card can support 3D acceleration, then check if 640 X 480 X 16-bit mode is supported...If so then that is the initial graphics resolution I would start with, and set it in a window (not fullscreen)...after that you can allow the players to change the resolution basied on what the graphics card supports (take into account the memory requirements for all your textures...so you might not want the player to set a 1600 X 1200 X 32-bit mode if they only have 64MB of video memory and your game is going to need at least 40MB of it at 32-bit color depth)...once the player has changed the game resolution you can write those settings to a file and reapply them the next time the game is started (if no file exists then go with the windowed 640 X 480 16-bit setting) <br><br></td></tr></table><br>
<a name="306466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> My crappy game uses about 15MB, so it must be game-specific. What size is each of your models (triangle-wise), and what size are the textures involved? Any fixed-size arrays in use (and if so, how are they defined)? <br><br></td></tr></table><br>
<a name="306484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this video ram or system ram you're talking about? Either way it's rather a lot and you're right to be concerned. I don't think video mode is your problem; yes it makes a difference but only a small difference in an extreme case like this. <br><br></td></tr></table><br>
<a name="306513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Say you have 10 1024 X 1024 textures with mip-mapping enabled...and are running the game in 1024 X 768 in &gt;&gt;32-bit&lt;&lt; mode.<br><br>That is 9MB for the 2 buffers and 32-bit Z-buffer<br>Each of the ten textures needs 5.3MB for a total of approx 62MB...<br><br>Same 10 textures loading in but with Graphics3D set at 1024 X 768 &gt;&gt;16-bit&lt;&lt; mode and with the W-buffer on requires approx total of 33MB...And you can subtract about 1.5MB of that total if the W-Buffer is off at that resolution.<br><br>That is not a small difference <br><br></td></tr></table><br>
<a name="306555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, but only if you then load the textures in 16 bit colour. Personally I think that looks a bit crappy, and if there is transparency in the texture, it looks very very crappy as it uses 4x4x4x4.<br><br>However, using 1024x1024 textures is in itself rather excessive. <br><br></td></tr></table><br>
<a name="306571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, 512x512 is the largest i'd go. You could also double check to see if you have any memory leaks, things that are getting loaded and not freed, check to see if your loading entites or textures mulitple times by accident, check to see if your copying textures etc etc. <br><br></td></tr></table><br>
<a name="306942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have sorted it now thanks.<br><br>I reduced the colour depth of all the textures and resized them to 512 X 384.<br><br>Also dropped the window size down to 800 x 600.<br><br>Used copyentity for several objects which were loaded rather than loadmesh.<br><br>It has now gone from 87Mb to 38Mb of system RAM.<br><br>Incidentally, the game so far has a series of corridoors, 11 rooms, 6 of which are furnished, 12 fully animated enemies and a main player. <br><br></td></tr></table><br>
<a name="307111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> 512x384 will be scaled up to 512x512. Textures in blitz must be of a square power (64x64,256x256,512x512). They don't have to be square tho, they can be like 512x256. Just as long as the numbers are powers of 2.<br><br>Also, when blitz scales texture, like yours, it doesn't make a very good job of it :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
