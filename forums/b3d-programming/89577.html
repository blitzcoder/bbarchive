<!DOCTYPE html><html lang="en" ><head ><title >Internal Blitz3D Structures</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Internal Blitz3D Structures</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Internal Blitz3D Structures</a><br><br>
<a name="1017494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello everyone,<br><br>I'm sure tonnes of people have asked this before - does anybody know anything about the structure of Blitz3D objects in memory?<br><br>What I'm really looking for here is the structure of a buffer or texture, but it would be great if anybody has information about others.<br><br>On one of my other topics, somebody (I think Charrua or Yasha) posted a link to a blitz forum (in another language) which had some structures listed, but I can't find the link in those topics for some reason!  Any knowledge about this would be contributed.<br><br>I'm interested in copying memory directly into a buffer as a fast means of transferring image data (see some of my recent posts). <br><br></td></tr></table><br>
<a name="1017501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jiffy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> translated (ru-&gt;en)<br>http://translate.googleusercontent.com/translate_c?hl=en&amp;ie=UTF-8&amp;sl=ru&amp;tl=en&amp;u=http://blitz.pp.ru/forum/showthread.php%3Fs%3D969a613d7deeb67f32385669ba81bcbb%26threadid%3D203%26perpage%3D15%26highlight%3D%26pagenumber%3D1&amp;prev=_t&amp;rurl=translate.google.com&amp;usg=ALkJrhgFEE4PoiLUk8jkxkY1WW799-CyrA<br><br>untranslated<br><a href="http://blitz.pp.ru/forum/showthread.php?s=2a85d3d02c25434f31dae3da25e1ca6e&amp;threadid=203" target="_blank">http://blitz.pp.ru/forum/showthread.php?s=2a85d3d02c25434f31dae3da25e1ca6e&amp;threadid=203</a><br><br>This is prob not up to date. MikhailV from Userlibs/Fast Extend  thread may be able to help you. <br><br></td></tr></table><br>
<a name="1017583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm interested in copying memory directly into a buffer as a fast means of transferring image data (see some of my recent posts). <br></div><br>If you're saying you want to copy a custom buffer into the texture's buffer (so as to allow fast pixel manipulation from C++), that won't be very fast.<br>I've tried that already. What happens is that the messaging from video card to CPU etc. to perform this operation is rather slow.<br><br>Perhaps try using Blit. Might be a better approach. <br><br></td></tr></table><br>
<a name="1017652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kryzon:  If you see some of my other recent posts you'll see what I'm trying to do - a simple screenshot.  The best way I've gotten so far is to BitBlt the screen to a compatible bitmap and then call GetDIBits to get the data in a bank.  I then reformat the bank to the appropriate pixel format B3D uses in memory and then use a series of RTLMoveMemory calls to transfer the data from the bank directly into a buffer.  Through my testing, the buffer has to be locked to work.  I'm assuming that 'Locking' a buffer transfers the data from video memory or wherever into a location in RAM (stored in the internal buffer struct).  The MoveMemory calls are very fast.<br><br>Jiffy:  Thanks!  That was the website I was looking for - I'll bookmark it this time.<br><br><br>Edit:  Kryzon - bear in mind I don't know much about many of the calls in my screenshot process (it's taken me most of the last month to understand how it works).  I'm unsure about BitBlt - if it can be used to directly transfer to a Blitz image, texture, or buffer that would be great. <br><br></td></tr></table><br>
<a name="1017739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should try that, using BitBlt to transfer the surface memory - note the 'surface' word. <br>I'm hoping it's faster to transfer an appropriately formatted surface-like buffer to another surface, like that of a texture or image. <br><br></td></tr></table><br>
<a name="1017799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't understand what you mean by a 'surface' and don't understand the memory format of device contexts which is why the best way I have is using GetDIBits to get the data in a bank.  This is already off the topic of this thread, but if you know more about how to do this - direct bitblt to an image/buffer/etc that would be great. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
