<!DOCTYPE html><html lang="en" ><head ><title >B3D meshes &amp; Lighting</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B3D meshes &amp; Lighting</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >B3D meshes &amp; Lighting</a><br><br>
<a name="327424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am experimenting with the use of B3D meshes. I have textured one and wish to use it as a building (well ruins!) on a Terrain. All is well, except Lights seem to have no effect on the mesh.<br><br>Is this a particular 'quality' of the B3D format? How do I apply Lightmaps if necessary - remember I am really not techy when it comes to all this lightmap stuff! ;)<br><br>Heres some screenies : Hope you can see the difference...<br><br>www.bloodwych.netfirms.com/Coolsoft_Developments/unlit.JPG<br><br><br>www.bloodwych.netfirms.com/Coolsoft_Developments/lit.JPG<br><br><br>-----------------The links didnt work because this forum automatically inserts the actual image, yet my site host don't allow direct linking in that way!<br><br>Hmm- just found out the links dont work at all as required :( I'll slap 'em onto an html page this afternoon.) <br><br></td></tr></table><br>
<a name="327430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >napole0n</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe your object has the 'fullbright' flag set? This way it'll only display it's baked lighting and not be affected by any lights in your scene. You can turn it off by force  by setting EntityFX object, 0 <br><br></td></tr></table><br>
<a name="327433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the above screens, all the parameters and effects applied to the mesh and textures are here:<br><br><pre class=code>
structure=LoadMesh (Level$+"\Structure.b3d")
PositionEntity structure,260,20,600
ScaleEntity structure,0.1,0.1,0.1
structex=LoadTexture(Level$+"\Structex.bmp",73)
structexdetail=LoadTexture(Level$+"\Bricks.bmp",9)
ScaleTexture structexdetail,16,16
EntityShininess structure,0.5
EntityFX structure,2
LightMesh structure,50,80,7

		TextureBlend structexdetail,2
		EntityTexture structure,structex,0,0
		EntityTexture structure,structexdetail,0,1
		
EntityType structure,2
</pre><br><br>I included that LightMesh command to see if that affected anything. If I remove the LightMesh and EntityFX commands,it makes no difference... <br><br></td></tr></table><br>
<a name="327437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> "EntityFX structure,2" - That might be the culprit <br><br></td></tr></table><br>
<a name="327438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> perhaps your vertex colours are all white. try setting them to a mid grey in your modelling program.<br>or your ambient light could be too bright <br><br></td></tr></table><br>
<a name="327446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How exactly was the building created?  Most lightmapping tools like Maplet will export b3d models with fullbright set on.  Thus the code doesn't matter, the mesh will be set to fullbright when you bring it into Blitz.<br><br>By the way, I don't see any images, just broken links. <br><br></td></tr></table><br>
<a name="327450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm I lack a modelling prog that exports in B3d<br><br>I tried using EntityColor to make it 'greyer' before texturing, but I think that may be totally unnecessary. My ambient light is quite dark.<br><br>How was it created???<br>I'm only experimenting, so in actual fact, I 'stole' a .BSP, and converted it using BSP Factory <br><br></td></tr></table><br>
<a name="327451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, then you should be specifically asking about using BSP Factory.  I think they may have their own forum you should ask on.  I know pretty much nothing about BSP Factory but I wouldn't be surprised (since it does lightmapping) if it behaves exactly the way I described, exporting b3d models with the fullbright parameter on.  If so, fullbright will be automatically on when you load the model, without you having to use EntityFX in code. <br><br></td></tr></table><br>
<a name="328256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> BSP Factory 1.0 exports the map with the fullbright flag on. This is because the BSP is intended to be illuminated using lightmaps.<br><br>BSP Factory 1.1 does not export maps with the fullbright flag on. This is because BSPf1.1 allows you to define shiny surfaces (with specular highlights), and they are not visible when the fullbright flag is enabled. You should set the ambient light to 255,255,255, or enable the fullbright flag yourself. <br><br></td></tr></table><br>
<a name="328380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does BSP factory export the normals?<br><br>If not you will need an UpdateNormals command in there too. <br><br></td></tr></table><br>
<a name="328408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for gettin back to me Jedive -<br>I DID receive an update for BSP factory (Ill double-check the version # when I get home)<br><br>I'm still not any cleaerer though - are you saying I should make the model FullBright???<br><br>How does one make lightmaps?<br><br><div class="quote"> <br>If not you will need an UpdateNormals command in there too. <br> <br></div><br><br>I'll give that a try too! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
