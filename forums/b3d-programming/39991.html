<!DOCTYPE html><html lang="en" ><head ><title >Processing textures in Blitz</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Processing textures in Blitz</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Processing textures in Blitz</a><br><br>
<a name="447287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> IS there any way to process texture data in Blitz? Say I load in a bitmap with LoadTexture, can I go through each pixel and halve its value to decrease brightness? Is there a pointer system to the memory that I can fiddle about with? <br><br></td></tr></table><br>
<a name="447289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure.<br><pre class=code>myTexture = LoadTexture("texfile.tga")
SetBuffer TextureBuffer(myTexture)</pre><br>Then just use readpixel, writepixel, text, lines, whatever you like.  Two things though --<br><br>One, it's often more efficient to CopyRect the texture to an image, perform pixel level operations on that copied image and then re-copyrect the image back to the texture, as I've seen it perform a lot faster, and<br><br>Two, if you insist on directly manipulating the texture in this way, load the texture via flag 256, forcing it to vram -- direct access will be faster this way.<br><br>Do note, however, that flag 256 has the occasional compatibility problem.  Copyrect does not. <br><br></td></tr></table><br>
<a name="447315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Do note, however, that flag 256 has the occasional compatibility problem. <br></div><br><br>Yep. For example, my old GF2 used to work considerably *slower* with flag 256 textures on certain driver versions. I don't think it happens in any recent drivers, but there's always a chance your users will be using out of date drivers and not want to update. <br><br></td></tr></table><br>
<a name="447319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> answer: Distribute the latest drivers with your program :P <br><br>About the copyrect- im using it to stop from having to constantly redraw the map. At work, this is dead slow, where redrawing the map, for some, very very odd reason, is fast. Anyone know whats up with THAT? <br><br></td></tr></table><br>
<a name="447327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadsNy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> im working on somthing like that, want to make an demo effect where the brightest places on a 3D object is boosted in whitness and some kind of flare/white alpha will be overlayed... looks kewl hehe....<br><br>take a look at this DLL image manipulation, it's nice, but i found it a "bit" slow thou... don't know why...<br><a href="http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=zjp05242004195911&amp;comments=no" target="_blank">http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=zjp05242004195911&amp;comments=no</a> <br><br></td></tr></table><br>
<a name="447328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadsNy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh forgot, would you be so kind to post an example on how to do the texture manipulation, just for newbies and others to learn from... i will too if i get that far.. :) <br><br></td></tr></table><br>
<a name="447351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Brilliant. Thanks for that. I'm not looking to work on textures in real-time - rather process a texture on loading to create HDRI style specular highlights.<br><br>A question on textures and VRAM though. Are textures not loaded to VRAM by default? I would have thought this the sensible place to put textures for speed reasons. If not, I take it large VRAM isn't needed for Blitz3D with lots of textures? At the mo' I'm a bit cautious how many textures I use as I'm aiming for very low-spec machines. Also I remeber reading a long time ago that video cards process 256x256 pixel textures the most efficiently. Are there any obvious disadvantages for larger or small textures?<br><br>Cheers! <br><br></td></tr></table><br>
<a name="447354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would suggest loading them in as images, monkeying around with them then copyrect them onto textures if you're not dealing in real time, it'll be a lot more compatible and stable. <br><br></td></tr></table><br>
<a name="447386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadsNy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm<br>i just did some monkey stuff like<br><br><pre class=code>
	SetBuffer ImageBuffer(scr_dumb)
	For x=1 To 800
		For y= 1 To 600
		GetColor(x,y)
		Tr = ColorRed()
		Tg = ColorGreen()
		Tb = ColorBlue()
		
		Color 0, Tg, Tb
		Plot x,y
		Next
	Next
	SetBuffer BackBuffer()
</pre><br><br>on a 800*600 image.. and this is sooooo slow you won't belive it, have tried readpixel and writepixel but this ain't better in anyway..... even with an 100*100 square we have a extream reduce in speed....<br><br>for throuing it back on the entity i use copy rect, this works fine thou...<br><br>but how do we manipulate in realtime images with high speed, i mean the only thing i did here was not to draw the red color.... and have even tried not doing enything than getColor.. and wow slow ass....<br><br>do we really have to compile some shit in ASM or C.. ????<br><br>anyone knows how to manipulate images grace and speed in blitz. ????... hmm :) <br><br></td></tr></table><br>
<a name="447523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>do we really have to compile some shit in ASM or C.. ???? <br> <br></div><br><br>No.<br><br>The major speed bottleneck is the bandwidth between system memory and the video cards memory...even if you write the fastest routines possable it will be super slow.<br><br>It doesn't matter what pixel drawing functions you use...writepixelfast, readpixelfast, poke, peek...you arn't maximizeing the from/to transfer abilities between video/system memory....its slow already, so doubleing, or even tripleing the amount of data transfered across makes it much, much slower.<br><br>What you can do is to load the texture into an image stored on SYSTEM memory (yes system, NOT video)...do what you want to it from there and transfer it to the video memory stored texture useing the drawimage function...<br><br>Put it this way...when you writepixelfast, poke, etc...you are sending not just the pixel color value across to the video card, but also a video memory address to place the pixel...as well as a byte count, telling the card how many bytes to place there.<br><br>Now lets say you have a 128 by 128 32-bit color texture that you want to mess around with...you do this one pixel at a time (writepixelfast, poke, assembler, it doesn't matter as you end up doing the same thing) in this manner you will be sending a 32-bit memory adress, a 32-bit byte count, and a 32-bit color value across for EACH pixel (a 128 by 128 32-bit color texture is 64k...but doing it one pixel at a time you end up sending 192k across the system/video pipeway)...but by useing the drawimage function you only need to send the address and byte count once...8-bytes + 64k worth of pixel colors...a third as much data across, makeing it faster as you are maximizeing the system/video transfer bottleneck...which is why simply loading textures is so much faster then individualy coloring them with writepixelfast and poke routines <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
