<!DOCTYPE html><html lang="en" ><head ><title >Sphere intersecting triangle</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Sphere intersecting triangle</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Sphere intersecting triangle</a><br><br>
<a name="1146337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get the feeling this is simple enough, but once again my basic math repertoire stands in my way. I wish to make a function to determine whether a sphere at coords <b>sX#, sY#</b> and <b>sZ#</b>, with radius <b>sR#</b>, is intersecting a triangle described by <b>x1#, y1#, z1#, x2#, y2#, z2#, x3#, y3#</b> and <b>z3#</b>. I realize that Blitz's sphere-to-polygon collisions already take care of this in a way, but I only wish to check for intersections, not have an actual solid-body collision, plus Blitz collisions are often glitchy and require strange handling to get a proper reading from <b>EntityCollided()</b>.<br><br>So, looking for a straight-math solution: how do I go about this? Keep in mind that I mostly only understand layman's terms for math; if you're going to refer to things like cross-products, be prepared to tell me what cross-products are (and yeah what <i>are</i> cross-products?). <br><br></td></tr></table><br>
<a name="1146383"></a>

<a name="1146384"></a>

<a name="1146385"></a>

<a name="1146386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i guess that you only need to calculate 3d distance between the center of the sphere to each of the 3 points<br><br>3d distance = SquareRooth(deltaX*deltaX + deltaY*deltaY + deltaZ*deltaZ)<br>being deltas the difference between each axis between center of the sphere and one of the 3 points wich define the triangle<br><br>If all distances are bigger than the radius then the triangle is outside<br>if all are smaller, the triangle is inside<br>and if some are bigger and some smaller the triangle is intersecting the sphere.<br><br>Note that isn't needed to calculate the square root in each cases (wich some people like to evade for timings reasons), you may compare squared values, you only need to calculate Radius*Radius at first and then compare it between each distance3d without the squareroot operation.<br><br>naturally, matematically could one of the distances be equal and is it intersecting, tangent etc... (probably not of interest or yes depending on your application.<br><br>Seen from a vector point of view, you need to calculate the Magnitude of the vectors defined between the center of the sphere and each of the points wich define the triangle <br><br>Another aproach could be to find the plane defined by the triangle and use some of the shelf routines to calculate distance between a plane to a point (the center of the sphere) and if it is smaller than the radius or bigger you find if the triangle is or not intersecting the sphere. Probably here you need to find a Normal vector to the plane formed by T1, T2, T3 (Tn = points wich define the triangle), wich will be paralell to the distance from the center of the sphere and the plane wich contains the triangle and... some other operations... the first one: get a vector normal to the plane is simple to find (for some strange people):<br>A vector normal = CrossPorduct(Vector1, Vector2)<br>being Vector1 = the vector from T1 to T2<br>      Vector2 = the vector form T1 to T3<br>I currently don't understand it (if it make you feel better) but i used it somewhat in the past and it seems to work!, naturally each time i left them for a while i became completely ignorat about the subject.<br><br><br>Juan<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1146390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first question must be why do you need this. Perhaps you could get away with some lesser, easier condition.<br><br>A full solution to your question would be quite messy. It starts out easily. The triangle is a collection of points. We can check if a point is in a sphere by testing if the distance from the point to the center is not more than the radius. So in principal we do this for all points in the triangle, determining the minimum distance from a triangle point to the center. That tells us if the triangle intersects the sphere.<br><br>But the devil is in the details. If that minimum distance point is in the interior of the triangle then calculus comes to the rescue and gives us the tools to solve this. But if that point is somewhere on the boundary then it gets tougher. We are reduced to handling a bunch of special cases.<br><br>A little googling turned up some code which purports to do exactly this: <a href="http://www.codeproject.com/Questions/93254/Distance-between-Point-and-Triangle-in-3D" target="_blank">Matlab code for Distance between Point and Triangle in 3D</a><br><br>The comments in the code point to a pdf which discusses the problem and presents an algorithm. You may find the math incomprehensible but the general idea can still be gleaned. <br><br></td></tr></table><br>
<a name="1146397"></a>

<a name="1146398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... So the fiddliness of the problem means that even a successful implementation is not as simple as I'd thought. Alright, that does make me personally feel better, but perhaps I should address Floyd's question now.<br><br>It's for a ball-and-paddle collision checker, similar to Breakout. While normally this would be a simple <b>If ball\x &gt; leftPaddleEdge</b> type of problem, there's a twist: the playing field is circular, and the paddle rotates around the perimeter rather than sliding back &amp; forth at the bottom. What I ultimately need is a reliable way to check if a ball of variable radius <b>bR#</b> has collided with the paddle, which can change widths, position and most importantly, rotation. I learned some time ago that generally, in Blitz3D, collisions are fine if you want to stop something like a ball moving through a wall, but if you want to see if said ball is actually colliding <i>with</i> a wall then you're better off coding your own "collision" detection routine.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1146428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> So this is essentially a 2D problem with moving circles and rectangles.<br><br>The paddle is presumably impenetrable, so we need only consider the sides of the rectangle and this boils down to circle versus line segment intersection. That should be doable.<br><br>The key factor is the nonlinear motion. That really cranks up the complexity. But the motion of the paddle is constrained to a predefined circular path. That takes away some of the complexity. Still, it sounds quite challenging. <br><br></td></tr></table><br>
<a name="1146429"></a>

<a name="1146430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> this boils down to circle versus line segment intersection. <br></div>.......... Oh good god I'm a complete idiot. I was completely overcomplicating this entire issue. I actually produced some code for my now-on-hold project of <i>Midnight Hacker</i> that addresses this exact problem: a circle intersecting a line at any arbitrary rotation or position. For some strange reason, I'd been thinking more in 3D terms for this and got wrapped up in the two polygons that make up the paddle's quad rather than the lines that form its actual hitbox perimeter.<br><br>Thanks a mil Floyd, now I can get this whole thing cracked with a copy-paste and a little tailoring.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
