<!DOCTYPE html><html lang="en" ><head ><title >Feature Request - ByRef</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Feature Request - ByRef</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Feature Request - ByRef</a><br><br>
<a name="477177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikeyj21</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry if this is the wrong place for this, but I couldn't find any other!<br><br>Please, please, please... could we have the ability to 'pass by reference' to functions?<br><br>I promise to go away and never make any more requests if you grant this one! <br><br></td></tr></table><br>
<a name="477178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you mean, by reference? <br><br></td></tr></table><br>
<a name="477180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> edit: doh!<br><br>thought this was max :P <br><br></td></tr></table><br>
<a name="477181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: nothing to see! <br><br></td></tr></table><br>
<a name="477203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> By reference, meaning that you would pass a "copy" of the variable to a function, which would then be edited.   Any changes made to this variable effect the original, and all other references of the original. <br><br></td></tr></table><br>
<a name="477283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikeyj21</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, pretty much as Dev said (except I believe that instead of a 'copy' being passed then edited, the memory address where the variable is held is passed).<br>Any changes made to the variable within the function are therefore actually made in the original. This has many benefits: two that immediately spring to mind are that you no longer have to use global variables, thus improving coding style by introducing variable 'scope', and if you pass a variable by reference (even if you don't intend to actually change it), then the memory and speed overhead of making a copy (which can be relatively large if the variable is a large instance of a type) is saved.<br><br>Basically, it is a feature which most modern languages implement - certainly Visual Basic, C++ and Java. <br><br></td></tr></table><br>
<a name="477290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> (which can be relatively large if the variable is a large instance of a type) <br></div><br>I think you're wrong here, I'm pretty sure that type instances are always passed by reference, and other variables are passed by value.<br><br>Because if you do Type_Var.MyType=New MyType and then pass this on to a function, and change one of its fields there, it will have changed outside the function as well.<br><br>So maybe you could have types byRefString, byRefInt and byRefFloat which each contain one field, and pass those to your functions in order to mimic byref? <br><br></td></tr></table><br>
<a name="477322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well everything is passed by value and I can not see that changing.  If you want a more advanced compiler use Bmax and wait for the inevitable 3d module(s).<br><br>However  types are accessed by pointers and so are banks.  So although you can not change what they point to when passed as an argument, you can certainly change the data they point to.<br><br>You can also use Blitz Arrays...<br>Local b#[0]<br>b[0]=1.03<br>print b[0]<br>change(b)<br>print b[0]<br>waitkey()<br><br>Function change(a#[0])<br>a[0]=a[0]+1<br>End Function<br><br>Though of course currently only one dimension and of constant size which I guess limits their flexibility a bit but maybe useful for vector and matrix calculations and so on where you do know the size of the array in advance.<br><br>vis.<br>; create a matrix to rotate points by angle theta around a given axis<br>Function MakeAxialRotMat(axis#[2],theta#,Mat#[8])<br>	Local ax#=axis[0], ay#=axis[1], az#=axis[2], c#=Cos(theta), s#=Sin(theta)<br>	Mat[0] = c+ax*ax*(1-c)    : Mat[1] = ax*ay*(1-c)-az*s : Mat[2] = ax*az*(1-c)+ay*s<br>	Mat[3] = ax*ay*(1-c)+az*s : Mat[4] = c+ay*ay*(1-c)    : Mat[5] = ay*az*(1-c)-ax*s<br>	Mat[6] = ax*az*(1-c)-ay*s : Mat[7] = ay*az*(1-c)+ax*s : Mat[8] = c+az*az*(1-c)<br>End Function<br><br><br>P.S.  Fall_x please stop calling floats doubles, you will only raise false expectations and yet another feature request :0 <br><br></td></tr></table><br>
<a name="477326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a quick work around for byref, only for strings but you should be able to add ints and floats quickly.<br><br><pre class=code>
Type byRefStr
	Field val$
End Type

Function createString.byRefStr (val$)
	s.byRefStr=New byRefStr
	s\val$=val$
	Return s
End Function


; just a function to test passing a byref string and changing it :
Function testChangeIt(s.byRefStr)
	s\val$="After"
End Function


; using it :

s.byRefStr = createString ("Before")

Print s\val$

testChangeIt(s)

Print s\val$
</pre> <br><br></td></tr></table><br>
<a name="477329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> P.S. Fall_x please stop calling floats doubles, you will only raise false expectations and yet another feature request :0 <br></div><br>sorry, my bad, got confused, I'll edit my posts :) <br><br></td></tr></table><br>
<a name="477534"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, that's why I said "copy" mike :).   Alot of the people here don't know much about memory management I'm guessing. <br><br></td></tr></table><br>
<a name="477672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikeyj21</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> fall_x: You are completely correct.... when I read the reference regarding functions, it states "...each parameter may be given an optional type tag. Parameters are always local.".<br><br>So... I mistakenly assumed that all parameters passed to functions were local! ;) <br><br>So, thanks VERY much for pointing this out, fall_x... I am a very happy bunny now! I can get back to a degree of good coding style!<br><br><br>In case anyone reading this want's further clarification(bear in mind I am new to Blitz, but definitely NOT new to programming!)... and in light of fall_x's post:<br><br>When a function it is called, variable(s) can be passed to the function (called 'parameters' by some, 'arguments' by others).<br>In most modern languages there are either two or three ways of passing these arguments.. <br>1) By Value <br>2) By Reference<br>3) Pointers<br><br>As Pointers and 'By Reference' are very similar in function(C++ supports both, for example, but these days using pointers is considered a legacy of the old 'C' language (not that I am saying they are a bad thing!)).. I shall treat them as the same thing, leaving us with TWO ways of passing arguments.<br><br>When a variable is passed 'By Copy', an actual copy is made of the variable within the called function... any changes made to this variable within the function are lost when the function is exited.<br><br>However, when a variable is passed 'By Reference', the actual address of the memory containing the variable is passed to the function, and any modifications made within the function affect the variable in the calling function (simply put, it IS the same variable).<br><br>In Blitz3d, all basic variables (%,# and $) are passed 'By Copy', but (as fall_x has pointed out to me) variables which are custom types are passed 'By Reference' (a revelation which has made me absolutely  overjoyed! But then I always was easily pleased :)<br><br>Hope this helps anyone who was struggling to understand what we were talking about (it would have been me, many moons ago......) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
