<!DOCTYPE html><html lang="en" ><head ><title >(Interesting!) Frame Limiting done better!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >(Interesting!) Frame Limiting done better!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >(Interesting!) Frame Limiting done better!</a><br><br>
<a name="940597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just Copy - Paste - and - run this thing:<br><br><pre class=code>
While Not KeyHit(1)
d = d + 1
If d &gt; 359 Then d = 0
For I = 0 to 100
t = Cos(d)*Sin(d)*Tan(d)
Next
If KeyDown(57) Then api_Sleep(10)
Wend
</pre><br><br><b>You need this DECLS for this to work:</b><br><a href="http://www.freewebs.com/rafael_navega/CPU_Sleep.decls" target="_blank">http://www.freewebs.com/rafael_navega/CPU_Sleep.decls</a><br><br>Make sure to watch the CPU usage in your Task Manager with and without the space key being pressed.<br><br>In case you are wondering WTH does this change in my life...<br>We can now effectively replace parts of frame limiting codes like...<br><pre class=code>
Repeat
   elapsed=MilliSecs()-FrameTime
Until elapsed
</pre><br>...with the apropriate time in Api_Sleep(milliseconds).<br><br>Credits go for Boiled Sweets for making the Kernel32.DECLS <br><br></td></tr></table><br>
<a name="940600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would you mind explaining what you think this code does? <br><br></td></tr></table><br>
<a name="940611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would you mind specifying which code you are refering to? <br><br></td></tr></table><br>
<a name="940616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The code I'm supposed to copy and paste and run. The code which is supposed to be a better way to frame limit. <br><br></td></tr></table><br>
<a name="940626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried it, and it made my cpu for the program go from 50 to 0 while pressing the button :D <br><br></td></tr></table><br>
<a name="940627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I tried it, and it made my cpu for the program go from 50 to 0 while pressing the button :D  <br></div><br>Yes, that's what it did for me too. Which is why I was wondering what Kryzon thinks it does and what application he thinks it has for frame limiting, as well as what makes it superior to some other method. <br><br></td></tr></table><br>
<a name="940633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That is only to show the application of the Api_Sleep call.<br>I know the topic title is a little misleading (I wasn't sure what to put when I created it, and there isn't a topic title editing feature in these forums). <br><br>I remember reading in frame limiting discussions that there aren't really <i>ideal</i> manual solutions for frame limiting because most of them rely on putting the CPU through a useless blank loop until the frame time is met (I think it was with Ross C, don't recall ), and then iterating through the rest of the program (even if it's only for a single millisecond, it's still, logically speaking, unoptimized). <br>Now there is something better to put in the "waiting" part. Api_Sleep.<br><br>The snippet is merely for showing that the function does not fails, it really does free the CPU. <br><br></td></tr></table><br>
<a name="940634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't "api_Sleep( 10  )" exactly the same as "delay 10" which also free's the CPU? <br><br></td></tr></table><br>
<a name="940637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> What evidence do you have that Delay free's the CPU? <br><br></td></tr></table><br>
<a name="940648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> That is only to show the application of the Api_Sleep call. <br></div><br>Yes, I realize that. I just haven't managed to grasp what you're saying the application of it is. I know that it frees CPU time, but all my tests suggest that utilizing the CPU yourself is more effective at creating good game timing than giving it back to the OS is, so it seems at cross purposes to my experience. Which is why I was hoping for a little more information on what you think or have experienced as a benefit from giving the OS back some time.<br><br><div class="quote"> What evidence do you have that Delay free's the CPU?  <br></div><br>Well, replace Api_Sleep(10) in your example with Delay(10) and you'll find it has exactly the same effect. AFAIK, StevieG is correct. Delay is calling Sleep internally. <br><br></td></tr></table><br>
<a name="940651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>What evidence do you have that Delay free's the CPU? <br> <br></div><br><br>It's a well known fact.  I always use a small delay in my main loop just incase another task needs some cpu. <br><br></td></tr></table><br>
<a name="940653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> And you can always check CPU usage with Task Manager. <br><br></td></tr></table><br>
<a name="940654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh-kay then!<br>Sleep = Delay. It does have a really similar (if not <b>equal</b>) result by replacing Api_Sleep(10) with Delay(10) ).<br><br>Good day al'around.<br><br><div class="quote"> <br>It's a well known fact.<br> <br></div><br>That doesn't prove anything (it was a well known fact that the earth was flat! and look how that ended up), but I see your point totally. <br><br></td></tr></table><br>
<a name="940687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it was a well known fact that the earth was flat! <br></div>No it wasnt<br><br>Anyone in history or pre history of any note, who expressed an opinion thought that the world was round, or roundish (pear shapped etc)<br>The assumption that people thought the world was flat only really started in about 1830 when Washington Irving "made up" his history of columbus' vouage to the Americas, and Antoine-Jean Letronne's On the "Cosmographical Ideas of the Church Fathers" <br><br></td></tr></table><br>
<a name="940722"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not only Delay lets your CPU "breath", but as far as I recall also VWait and Flip True. <br><br></td></tr></table><br>
<a name="940747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The assumption that people thought the world was flat only really started in about <b>1830</b><br> <br></div><br>"Various cultures have had conceptions of a flat Earth, including ancient Babylon, Egypt, pre-Classical Greece and pre-17th century China." - taken from the same article you appear to have referenced.<br><br><div class="quote"> <br>Not only Delay lets your CPU "breath", but as far as I recall also VWait and Flip True.<br> <br></div><br>But did Mark say anything to back that up, or have you taken a look at the B3D SDK source? (instead of just personal tests - which are still reliable of course, but I'd prefer something more concrete) <br><br></td></tr></table><br>
<a name="941084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> You only have to watch the running tasks with something like process explorer by sysinternals. <br><br></td></tr></table><br>
<a name="941222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You only have to watch the running tasks with something like process explorer by sysinternals. <br></div><br>Or you could just hit Ctrl+Alt+Del and check the Task Manager. ^_ <br><br></td></tr></table><br>
<a name="941528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BIG BUG</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not only Delay lets your CPU "breath", but as far as I recall also VWait and Flip True <br></div><br>Nope, your totally wrong. <br>Flip True actually stresses the CPU pretty hard as it behaves like an empty loop. I guess VWait works the same way. <br><br></td></tr></table><br>
<a name="941621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Question: unless you're making something like a 3D modeler, then you're probably making a <i>game</i>, which assumes that the player is <i>playing</i> it, so... Why would you NEED to free CPU time for other applications?? <br><br></td></tr></table><br>
<a name="941627"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LineOf7s</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because some (many?) games - especially so-called "casual" games - are played in a window whilst other applications are running.  Like when someone has a quick game of Solitaire (for example) while waiting for something else to happen...<br><br>Plus, people like to multitask these days with their new-fangled computers that are able to do so, so it's just polite to allow for that possibility, rather than having your dinky lil proggie consume an entire CPU if it doesn't need to.<br><br>...then again, some games need as much as they can get...<br><br>Horses for courses. <br><br></td></tr></table><br>
<a name="941812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BIG BUG</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, a CPU running at full capacity wastes a lot of energy and causes a more noisy computer, as the fan needs to run at full RPM too...<br><br>Btw. WaitTimer does free the CPU too... <br><br></td></tr></table><br>
<a name="941851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, you're right, I was wrong with VWait and Flip true. I hope this isn't this "Alz-Thingie", you know what I mean. I'm still pretty sure at least once upon a time Flip 1 and Vwait didn't eat 95% of the CPU cylces, as they do now. <br><br></td></tr></table><br>
<a name="941854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Btw. WaitTimer does free the CPU too... <br> <br></div><br>Boy, if that's true, than it's a far better command than I'd ever expect (from reading bad things about it here, don't remember where). <br><br></td></tr></table><br>
<a name="947078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >epiblitikos</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had also heard some bad stuff about WaitTimer, I definitely want to give the timer system another look now. Thanks BIG BUG.<br><br>PS - VSyncing uses polling in Blitz and so is definitely, definitely CPU intense.<br><br>[EDIT:]<br><br>Looked into the manual and sure enough on the CreateTimer page it mentions the CPU-freeing. I really gotta read that stuff more. Again, thanks BIG BUG. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
