<!DOCTYPE html><html lang="en" ><head ><title >Real time depth of field effect.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Real time depth of field effect.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Real time depth of field effect.</a><br><br>
<a name="365715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In a game.  Is this possible.  How would you go about it. <br><br></td></tr></table><br>
<a name="365716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No idea what you're talking about...<br><br>But if you're talking about changing the camera fog range, then yes you can. <br><br></td></tr></table><br>
<a name="365719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> DoF? Sure, we had it in our 3DMark03 and the recent ATI Ruby demo has that too. Possible with Blitz3D as it is? No. <br><br></td></tr></table><br>
<a name="365724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is Depth of Field? <br><br></td></tr></table><br>
<a name="365725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> sure its possible, first render the "far away part" by setting the camera near value to the distance where the blur should begin. and copy that to an image, blur the image en draw it. then set the clsmode of your camera to 0 and the far range to what the near value was above.<br><br>it's not the prettiest or fastest dof, but it is possible in blitz.<br><br>rob: depth of field is the blurring of far away and close up objects, a photography term really. in games it usually means that the background is blurred. as seen in the wind waker and mario kart double dash. <br><br></td></tr></table><br>
<a name="365729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to blur things in the distance do a low res render of the "far away part" stick it on a quad and make the quad the full screen side, let the hardware do the blurring. <br><br></td></tr></table><br>
<a name="365745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >koekjesbaby</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> that's also an option, but standard hardware blurring is ugly. so i suggest using sswifts blurring method for better blurring. <br><br></td></tr></table><br>
<a name="365861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> more importantly, the transition between blur and non blur has to be nice.<br><br>Shaders are the only quality way <br><br></td></tr></table><br>
<a name="365872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It isn't that difficult in Blitz, I'll post an example later... <br><br></td></tr></table><br>
<a name="365900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cheers Fredborg. <br><br></td></tr></table><br>
<a name="365996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1030" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1030</a><br><br>Have fun! <br><br></td></tr></table><br>
<a name="366021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avrigus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fredborg you are a genius! If I start a thread asking to make my Blitz3D game look like Halo will you come back in a few days time with a code example?   :-) <br><br></td></tr></table><br>
<a name="366025"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> you think it would take him a few days ?  :) <br><br></td></tr></table><br>
<a name="366030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> adds wicked cool depth.. but is a bit slow<br><br>http://www.brianedey.com\rifraf\dof.jpg <br><br></td></tr></table><br>
<a name="366086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damn you Fredborg! :)<br><br>Allrighty, it IS possible to do using Blitz3D, sort of... "proper" way to do it would be something like this:<br><br><a href="http://www.ati.com/developer/gdc/Scheuermann_DepthOfField.pdf" target="_blank">http://www.ati.com/developer/gdc/Scheuermann_DepthOfField.pdf</a><br><br>We used different technique in 3DMark03, but the basic principles were the same. <br><br></td></tr></table><br>
<a name="366101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> imho, that DoF looks more like radial (or zoom) blurring <br><br></td></tr></table><br>
<a name="366105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone tried it with sswift's texture blur? <br><br></td></tr></table><br>
<a name="366157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zombie Apocalypse alpha 1 had depth of field using the above method...copycat...;p<br>but as rob said without pixel shaders it's next to impossible to achieve a smooth transistion.<br>(Pats vividGL on back and  makes love to it's pixel shader skins)<br><br>But as for the above shot, I'd say fred is making each 'blur' frame bigger or smaller than the last. This isn't the optimal way(because it creats a radial shilloute(sp?))<br>What you want to do is shift the 'frame buffer' around on it's x,y plane but always keep it at the same distance from the camera. <br><br>i.e for 10 frames,<br><br>for j=1 to 10<br>    moveEntity depthLayer(j),centreX+cos(j*36),centreY+sin(j*36),centreZ<br>next<br><br>This cretes a very convincing and easily adjustable blur. because,<br><br>centreX+cos(j*36) cna be altered to, centreX+cos(j*36)*blurFactor...<br>bigger blur factor = more out of focus.<br><br>Reason for moveEntity is you parent the depth layers to the camera. So you can move it on it's x,y while still being perfectly aligned to the camera.(I.e to prevent any radial leakage.) <br><br></td></tr></table><br>
<a name="366233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>It was some old code I had lying around, so I didn't check it properly :) The effect is better now! <br><br></td></tr></table><br>
<a name="366241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> fredborg.. that looks good on your cubes, but throw the effect in to a real scene with any real distance and you get this.<br><br><img src="http://www.brianedey.com/rifraf/hmm.jpg"> <br><br></td></tr></table><br>
<a name="366244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Change the spread value to something lower! <br><br></td></tr></table><br>
<a name="366245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> i put it to .01 and still did it.. <br><br></td></tr></table><br>
<a name="366247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> nevermind.. i was using the second param as spread value :)<br>its causes a tear in the scene where the blur begins though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
