<!DOCTYPE html><html lang="en" ><head ><title >AlignToVector question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >AlignToVector question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >AlignToVector question</a><br><br>
<a name="464057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I feel sure I'm missing something obvious.<br>I want to create and align a simple shadow quad under a tree, then AddMesh it as part od a larger 'shadow' mesh.<br>The tree will always sit on a known triangle.<br>How can I (a) get the slope of the triangle's surface and (b) align the quad to that slope?<br>Currently the shadows are not aligning to the slope of the triangle below.<br><br>This is the code I'm using:<br><br>indshadow = CopyMesh(mastershadow)<br>FitMesh indshadow, x1,y1,z1, x2,0.001,z2, True<br>ScaleMesh indshadow,newscalex#,1,newscalez#<br>LinePick(treex#,treey#+10,treez#, 0,-20,0)<br>AlignToVector indshadow,PickedNX(),PickedNY(),PickedNZ(),3,1<br>PositionMesh indshadow,treex#,treey#+0.1,treez#<br>AddMesh indshadow, treeshadowmesh<br>FreeEntity indshadow <br><br></td></tr></table><br>
<a name="464222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What axis did you create the shadow tris? Also, I'd move the quad along the normal rather than move it Y+, else as the slope of the ground gets steeper, the distance between the quad and the ground will get smaller, possibly increasing the chances of Z-fighting at a distance.<br><br>;Assuming quad normal is Y+<br>Const AXISX=1<br>Const AXISY=2<br>Const AXISZ=3<br><br>...<br>AlignToVector indshadow,PickedNX(),PickedNY(),PickedNZ(),AXISY,1<br>PositionMesh indshadow,treex#,treey#+0.1,treez#<br>MoveEntity indshadow,0,.1,0 ;raise the quad along ground normal rather than absolute Y+<br>..<br><br>Tom <br><br></td></tr></table><br>
<a name="464581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Tom. Thanks for the reply.<br><br>But if you check my code above you'll see that your AXISY variable is equivalent to the last but one parameter of 3 in my AlignToVector line.<br><br>So no change there.<br><br>Let me clarify:<br>Imagine a triangle in a mesh.<br>I can get the triangle and I can get each vertex, but I need to align my shadow mesh to the slope of that triangle.<br><br>Surely (please...) one of the big brains out there has already done something like this?<br>I guess it's the same as aligning a bullet-damage sprite to a wall, but it's beyond me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
