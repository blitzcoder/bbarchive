<!DOCTYPE html><html lang="en" ><head ><title >Always-in-front entity?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Always-in-front entity?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Always-in-front entity?</a><br><br>
<a name="280516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Is it possible to "overrule" an entity by saying: "you are always in front of the other objects"<br><br>Thanks,<br><br>Jeroen <br><br></td></tr></table><br>
<a name="280517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at EntityOrder! <br><br></td></tr></table><br>
<a name="280520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, use EntityOrder with a negative value<br><br>i.e. EntityOrder MyEntity,-1<br><br>the lower the number the more in front the entity becomes so<br><br>EntityOrder ent1,-1<br>EntityOrder ent2,-2<br><br>means both ent1 and ent2 will be in front of everything else plus ent2 will also always be draw in front of ent1.<br><br>This is useful for things like a 3D on screen HUD. <br><br></td></tr></table><br>
<a name="280529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> woooah I never spotted that command: how useful!<br><br>thanks! <br><br></td></tr></table><br>
<a name="280543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using EntityOrder for meshes turns off z-buffering for the mesh, though, so it will cause problems with non-convex meshes. A better solution is to use a second camera, with an EntityOrder value of -1 to force it to render last.<br><br>Just stick the second camera and whatever you want to render with it outside the range of the main camera and make sure the background screen color is black, so that the background is not rendered. Once you have the second camera set up you shouldn't need to do anything else to it, beyond changing the graphics displayed whenever your program needs them changed.<br><br>Here's the function I use for setting up a second camera for displaying a heads-up-display. I'm not sure why I've got CameraClsMode set to false values (it's been a while since I've worked on the game this is from) but I think there's a good reason for it.<br><br>Function create_hud()<br>	hud_camera = CreateCamera()<br>	CameraRange hud_camera, 1.0, 100.0<br>	CameraClsMode hud_camera, False, False<br>	EntityOrder hud_camera, -1<br><br>	; -- Setup HUD status display.<br>	hud_info = LoadSprite ( "..\media\sprites\display info2.png" )<br>	EntityOrder hud_info, -1<br>	SpriteViewMode hud_info, 2<br>	EntityParent hud_info, hud_camera<br>	MoveEntity hud_info, -3.55, 2.4, 4.5<br><br>	; -- Setup crosshair.<br>	crosshair = LoadSprite ( "..\media\sprites\crosshair7.png" )<br>	EntityOrder crosshair, 1<br>	ScaleSprite crosshair, 0.1, 0.1<br>	EntityParent crosshair, hud_camera<br>	PositionEntity crosshair, 0.0, 0.0, 5.0<br>	PositionEntity hud_camera, 0.0, 5000.0, .0<br>End Function <br><br></td></tr></table><br>
<a name="280550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Axeman, why bother with a second camera just for a HUD? Surely that's all flat surfaces (i.e. quads or sprites) anyway, so Z-order shouldn't matter.. <br><br></td></tr></table><br>
<a name="280591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Al Mackey</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Axeman, your CameraCLSMode function isn't clearing the Z-Buffer, AND you're using a negative EntityOrder on your crosshairs and hud.  So when the second camera renders, it's still not using the Z-buffer that you were setting up all this second camera stuff just to use.  You might as well just be using one camera with the HUD and crosshairs parented to it.  I bet it would give you a noticable speed increace. <br><br></td></tr></table><br>
<a name="280599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Axeman, why bother with a second camera just for a HUD? Surely that's all flat surfaces (i.e. quads or sprites) anyway, so Z-order shouldn't matter.. <br></div>While his example is probably not the best in the world, his reasoning is still perfectly valid. He explained in his post that the reason for doing this is to get non-convex shapes to work. It is unfortunate that his example code doesn't contain any, but that wasn't the point of setting up a second camera. <br><br></td></tr></table><br>
<a name="280600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> While his example is probably not the best in the world, his reasoning is still perfectly valid. <br></div>Absolutely.  For instance, try setting your game and your HUD up on the same camera, then apply CameraZoom.<br><br>You'll begin to see the point of rendering a HUD with a separate, dedicated camera. <br><br></td></tr></table><br>
<a name="280636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Al Mackey</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, but my policy is to avoid multiple rendering passes whenever possible, especially if they require using HideEntity() and ShowEntity() on dozens of objects every frame.  For the HUD, if you apply 1/Zoom to ScaleEntity, it will stay perfectly in place as the camera zooms (assuming its origin is in the middle of the screen). <br><br></td></tr></table><br>
<a name="280645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought mark made hideentity() and showentity() inconsequential a while back.  As in, they wouldnt eat any resources at all. *shrug* <br><br></td></tr></table><br>
<a name="280683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neo Genesis10</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice method... but does anyone know of a workaround to do the opposite - ie, farther in the distance while retaining Z buffering? <br><br></td></tr></table><br>
<a name="280719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I thought mark made hideentity() and showentity() inconsequential a while back. As in, they wouldnt eat any resources at all. *shrug* <br></div>In the case of a HUD camera, you can just position it away from the game world and point it in the opposite direction.  That way you don't have to mess about hiding and showing entities.<br><br>I don't think I'd recommend it as an alternative to EntityOrder though where in-game objects are concerned. <br><br></td></tr></table><br>
<a name="281289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I said, it's been a while since I've worked on the game engine that code sample was taken from and I think I'd just started playing around with the second camera code. The main reason I think I went to a second camera routine was to display a gun model for the player without having it go through walls the player was up against, and also, so I could use a larger gun placed further away from the camera (to make it appear the correct size) to keep it out of the minimum camera range.<br><br>The 'CameraClsMode' is probably wrong for that though, as Al Mackey said. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
