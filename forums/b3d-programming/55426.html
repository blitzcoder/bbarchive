<!DOCTYPE html><html lang="en" ><head ><title >Reading from a memory address</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Reading from a memory address</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Reading from a memory address</a><br><br>
<a name="616971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> If got a bit of an unusual task, i have to emulate keystrokes from another windows application, currently being written by another person to my blitz program.<br><br>Ive thought of using peek but if my associate writes to an area of ram, how can i read it, as the peek command doesnt seem to have an address other than a handle from createbank.<br><br>i know very little about DMA and have never used these before.<br><br>Of course if anyone has an easier way please do tell <br><br></td></tr></table><br>
<a name="616974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kev</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.catch22.net/tuts/undoc01.asp" target="_blank">http://www.catch22.net/tuts/undoc01.asp</a><br><br>scroll down to the bottom theres some info on making two process talk to each other.<br><br>kev <br><br></td></tr></table><br>
<a name="617127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackJumper</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Someone did a decls for the WinAPI which has SendMessage() and PostMessage() functions available. These can be used to place keyboard messages directly into the message queue of a window that you know the windowsHandle for.<br><br>... might be a starting point for further investigation. <br><br></td></tr></table><br>
<a name="617234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> WM_COPYDATA can be used to safely send data between programs. I don't think it can be used with Blitz3d, though, because it involves structures and pointers. <br><br></td></tr></table><br>
<a name="617382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using a simple Peek and Poke to absolute adresses is possbile with an userlib extension:<br><br>.lib "kernel32.dll" <br>RtlMoveMemory%(Destination,Source*,Length) : "RtlMoveMemory" <br>RtlMoveMemory2%(Destination*,Source,Length) : "RtlMoveMemory"<br>RtlMoveMemory4%(Destination,Source,Length) : "RtlMoveMemory"<br><br>So RtlMovememory will move to destination what is found at the adress peeked at *source.<br>RtlMovememory2 will move from the Adress Source to the adress that is stored at the adress destination<br>RtlMoveMemory4 will move data from source to destination, without to peek any pointers.<br>At least that's what I guess :) So correct me if I'm wrong.<br><br>While this allows to peek and poke and shutdown the puter in 1 ms, or wipe the harddrive accidently, I still don's know how you would use it to simulate keystrokes.<br><br>BTW you can use Banks in userlibs, blitz will retrieve return values of lib function calls in banks when you use their handle as an adress in the function call (well if the function wants such an adress to write the answer to). <br><br>And then there is still this hack solution to determine the true physical adress of a bank in blitz, have a look at this example:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1518" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1518</a> <br><br></td></tr></table><br>
<a name="617693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seldon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> @JFK: You can't share two memory areas between different programs, because of memory protection system. It means a memory pointer is valid only inside the program that has requested it.<br><br>A good solution are 'memory mapped files' . They work as normal files, but they're created in memory. I used this method with Blitz and I think it's the best. Look on MSDN. Of course you need userlib declarations.<br><br>If you have a window, the best solution (as already suggested) is WM_COPYDATA , but in B3D, isn't very suitable. <br><br></td></tr></table><br>
<a name="617909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackJumper</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You can't share two memory areas between different programs, because of memory protection system <br></div><br><br>Not strictly true... You can use shared data segments - I had to do this to get lowlevel keyboard trapping working for my StickyKeys_dll<br><br>see <a href="http://www.codeproject.com/dll/data_seg_share.asp" target="_blank">this page</a> for some example code... <br><br></td></tr></table><br>
<a name="618129"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seldon - but it seems to work for some reason. EG a lot of Api calls ask for an adress to write their return structures to. So basicly they do write to an area of an other program? <br><br></td></tr></table><br>
<a name="619400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Seldon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @BlackJumper: Yes, it's true: that is a global shared DLL , it means each application opens the same instance of the DLL. It is another method of sharing data. But you can understand you don't access the memory area of another program. You simply let two (or more) programs access the same DLL and its memory area. Usually a DLL is mapped into the memory area of the calling process, so it is like an extension of your program.<br><br>Besides, if I remember exactly there is an API function that lets you access the address of a memory area allocated by another process from the handle you pass. But I've read on MSDN it's slow and it is not recommended.<br><br>As I said, memory mapped files are the fastest and most secure way and I'd say, it's rather easy as well since you can do it in Blitz with no external DLL.<br><br>@jfk: Most of (all) the API calls ask for an "HANDLE", that is a sort of ID number that the system keeps for various objects. If you'd pass a memory address, the OS would be much faster indeed :-) (see 68k AmigaOS for example... on PowerPC AmigaOS things are changed, but I've to say AmigaOS is faster for other reasons as well) , but you'd lose memory protection. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
