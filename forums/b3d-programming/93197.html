<!DOCTYPE html><html lang="en" ><head ><title >User Locater Function</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >User Locater Function</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >User Locater Function</a><br><br>
<a name="1064823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ThePict</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was about to start writing a global location selector menu thing, but stopped short when I got too annoyed trying to grab flag graphics from a bitmap. <br>I have seen sites where you (and all others visiting at that moment) appear on a world map. There must be a way of pulling that data from the server to identify a user's location.<br>This would be very handy for my 2-player games, as you may want to start a game with someone who's at least within a few hours of your own timezone, or face taking turns every 12 hours.<br><br>Does anyone have any ideas how i could obtain details of where a player is in the world? <br><br></td></tr></table><br>
<a name="1064852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> - Ask the user<br>- Check the computer timezone settings and language to make a guess<br>- Geo-locating based on the IP address of the user. (the whois protocol is about as basic as protocols come, and can esily be implemented within blitzmax. You pretty much establish a connection to port 43 on the whois server, send the IP, and parse the return data)<br>  The return info shows what organization a block is assigned to, and you can do additional whois queries to find out where they are located.<br>  Note that the end results may not always be accurate for companies that exist in multiple countries, since they may have gotten their IPs from their parent company in a different zone.<br><br>There's five regional agencies that allocate IP addresses: RIPE (Europe), ARIN (America), APNIC (Asia-Pacific), AfriNIC (Africa), LACNIC (Latin America/Caribbean). There's also the top overseeing agency, IANA (Internet Assigned Numbers Authority)<br><br>Depending on how granular you need the lookup to be, it may be as easy as checking which of the 5 registries handed out the IP to narrow it down to the continent or so.<br><br>For example: if you look up IP 1.2.3.4 on whois.iana.org, it will tell you that it is assigned to APNIC. Based on that, you know that it's Asia/Pacific. If you need more info, query the apnic whois server.<br>It's not perfect though: for example, IANA tells that IP 4.4.4.4 belongs to Level 3 Communications, instead of delegating it to a regional registrar...  But it's a start. <br><br>Especially if you combine the IP address info with additinal info like the timezone and language, you can probably make an educated guess on location for the vast majority of users. <br><br></td></tr></table><br>
<a name="1064854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Note: It appaears that there's free geolocation IP info available as well:<br>For example, see <a href="http://ipinfodb.com/ip_database.php" target="_blank">http://ipinfodb.com/ip_database.php</a><br><br>Free online API as well that you can interface with... They claim 99.5% accuracy when it comes to determining the country, and 80% accuracy on determining US city within 25 mile radius. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
