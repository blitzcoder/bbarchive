<!DOCTYPE html><html lang="en" ><head ><title >score not working</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >score not working</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >score not working</a><br><br>
<a name="294746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lorenzo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> could someone what I need to do to get my score to work. Here is the code so far. I have it so that when an asteroid is deleted, the score (bam) should increment by 1. But obviously, this is not setup correctly. Any help is appreciated. Thanks.<br><br><br>Graphics3D 800,600,32,1<br>SetBuffer BackBuffer()<br>SeedRnd (MilliSecs())<br><br>camera=CreateCamera ()<br>point=CreatePivot()<br>mainlight=CreateLight()<br>LightColor mainlight,255,255,10<br>sublight=CreateLight()<br>LightColor sublight,-100,-100,-100<br>indlight=CreateLight()<br>LightColor indlight,255,2,255<br><br>PositionEntity camera,0,100,0<br>PositionEntity mainlight,20,5,20<br>PositionEntity sublight,0,5,-0<br>PositionEntity indlight,0,2,-100<br>PositionEntity point,0,0,0<br><br>PointEntity camera,point<br>PointEntity mainlight,point<br>PointEntity sublight,point<br>PointEntity indlight,point<br><br>Const rock_collision = 1<br>Const bullet_collision = 2<br>Const ship_collision=3<br><br>scorepoint=0<br><br>Type asteroid<br>	Field aster<br>	Field x#<br>	Field y#<br>	Field z#<br>	Field speedx#<br>	Field speedz#<br>	Field spin#<br>	Field life<br>	Field distance#<br>End Type<br><br>rock=LoadMesh("images/rock1a.3ds")<br>EntityType rock,rock_collision<br>HideEntity rock<br><br>bam=0<br><br>For n=0 To 9<br>	ast.asteroid=New asteroid<br>	ast\aster=CopyEntity(rock)<br>	ast\x#=Rnd(-50,50)<br>	ast\y#=0<br>	ast\z#=Rnd(-50,50)<br>	ast\speedx#=Rnd(-.2,.2)<br>	ast\speedz#=Rnd(-.2,.2)<br>	ast\spin# = Rnd(-0.5,0.5)<br>	ast\life=5<br>	PositionEntity ast\aster,ast\x#,0,ast\z#<br>	RotateEntity ast\aster,0,Rnd(0,359),0<br>	ScaleEntity ast\aster,.5,.5,.5<br>	;mark=mark+1<br>Next<br><br><br>player=LoadMesh("images/playership.3ds")<br>EntityType player,ship_collision<br><br>dist#=0.05 <br>x#=0 <br>y#=0 <br>z#=0 <br><br>Type bullet<br>    Field entity<br>    Field distance_to_travel#<br>	Field x#<br>	Field y#<br>	Field z#<br>End Type<br> <br>;-- create base bullet entity<br>Global bullet_entity = LoadMesh("images/bullet.x");CreateSphere(6) ;use your sprite here<br>EntityColor bullet_entity, 255, 0, 0<br>EntityType bullet_entity,bullet_collision ;set collision type<br>HideEntity bullet_entity<br><br>;--setup sphere_to_polygon collision between rocks and bullets<br>Collisions bullet_collision,rock_collision, 2, 1<br><br>;MAIN LOOP------------------------------------<br><br>While Not KeyHit(1)<br><br>asteroidism()<br><br>MoveBullets()<br><br><br>;left and right turning---------------------------<br>	If KeyDown( 203 )=True Then angle#=angle#+3.0 <br>	If KeyDown( 205 )=True Then angle#=angle#-3.0 <br>;thrust---------------------------------------<br>	If KeyDown( 200 )=True Then<br>		x#=x#+Cos(angle#+90.0)*dist#<br>		z#=z#+Sin(angle#+90.0)*dist#<br>	EndIf<br> <br>;brakes------------------------------------<br>	If Not KeyDown(200)<br>		x#=0+(x#*0.995)<br>		z#=0+(z#*0.995)<br>	EndIf<br>	<br>;reposition on screen if off screen------------<br>	If EntityZ#(player)&gt;100<br>		PositionEntity player,x#,y#,-100<br>	EndIf<br>	If EntityX#(player)&gt;120<br>		PositionEntity player,-120,y#,z#<br>	EndIf<br>	If EntityZ#(player)&lt;-100<br>		PositionEntity player,x#,y#,100<br>	EndIf<br>	If EntityX#(player)&lt;-120<br>		PositionEntity player,120,y#,z#<br>	EndIf<br><br>;movement of player-----------------------------------------<br>	RotateEntity player,0.0,angle#,0.0 <br>	TranslateEntity player,x#/2,0.0,z#/2<br><br>;fire new bullet<br>     If KeyDown(157) ;change to MouseHit(1) for mouse button 1<br>       timage=timage+1<br>       If timage=1<br>          shoot.bullet = New bullet<br>          shoot\entity = CopyEntity( bullet_entity, player ) ;&lt;parent&gt; parameter here is IMPORTANT<br>          EntityParent shoot\entity, 0 ;remove from parent so it can move on its own<br>          shoot\distance_to_travel = 50<br>        EndIf<br>     ElseIf Not KeyDown(157)<br>       timage=0<br>     EndIf<br>     If timage&gt;10 Then<br>       timage=0<br>     EndIf<br>  UpdateWorld<br>  RenderWorld<br>  Text 50,50,"SCORE: "+bam<br>  Flip<br>Wend<br>End<br><br>Function asteroidism()<br>	For ast.asteroid=Each asteroid<br>		smack=EntityCollided(ast\aster,bullet_collision)<br>		If smack<br>			FreeEntity ast\aster<br>			Delete ast<br>			bam=bam+1<br>		Else<br>			TurnEntity ast\aster,ast\spin#,ast\spin#,ast\spin#<br>			TranslateEntity ast\aster,ast\speedx#,0,ast\speedz#<br>			If EntityZ#(ast\aster)&gt;100<br>				PositionEntity ast\aster,ast\x#,ast\y#,-100<br>			EndIf<br>			If EntityX#(ast\aster)&gt;120<br>				PositionEntity ast\aster,-120,ast\y#,ast\z#<br>			EndIf<br>			If EntityZ#(ast\aster)&lt;-100<br>				PositionEntity ast\aster,ast\x#,ast\y#,100<br>			EndIf<br>			If EntityX#(ast\aster)&lt;-120<br>				PositionEntity ast\aster,120,ast\y#,ast\z#<br>			EndIf	<br>		EndIf<br>	Next<br>End Function<br><br>Function MoveBullets()<br>     ;-- go through all active bullets...<br>	For shoot.bullet = Each bullet<br> 		zap=EntityCollided(shoot\entity,rock_collision)<br>		If zap<br>			FreeEntity shoot\entity<br>			Delete shoot<br>		Else<br>     ;move bullet forward<br>    		MoveEntity shoot\entity, 0,0,2	         <br>     ;reduce counter of distance to travel until finished movement<br>    		shoot\distance_to_travel = shoot\distance_to_travel - 1<br>     ;remove bullet entity? (finished it's movement (or collided with block))<br>		    If shoot\distance_to_travel &lt;= 0<br>       ;remove entity and delete bullet type instance<br>		       FreeEntity shoot\entity<br>		       Delete shoot<br>			 Else<br>   			   If EntityZ#(shoot\entity)&gt;100<br>				PositionEntity shoot\entity,shoot\x#,shoot\y#,-100<br>			   EndIf<br>			   If EntityX#(shoot\entity)&gt;120<br>				PositionEntity shoot\entity,-120,shoot\y#,shoot\z#<br>			   EndIf<br>			   If EntityZ#(shoot\entity)&lt;-100<br>				PositionEntity shoot\entity,shoot\x#,shoot\y#,100<br>			   EndIf<br>			   If EntityX#(shoot\entity)&lt;-120<br>				PositionEntity shoot\entity,120,shoot\y#,shoot\z#<br>			   EndIf<br>	         EndIf<br>		 EndIf<br>     Next<br>End Function <br><br></td></tr></table><br>
<a name="294748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have set bam local to main program and local to function asteroidism. <br><br>bam in your main program is out of scope for your functions.<br><br>If you want to modify it from within a function, you have to either:<br><br>Pass it to the function and return it from the function<br>or<br>Make it a global variable.<br><br><br>Also, I would highly recommend indenting your code for readability reasons. <br><br></td></tr></table><br>
<a name="294751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lorenzo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Wolron, worked. Actually the code was indented. I guess when i cut and pasted, it whacked the indentation. sorry about that. Thanks again. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
