<!DOCTYPE html><html lang="en" ><head ><title >Pushing furniture around</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Pushing furniture around</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Pushing furniture around</a><br><br>
<a name="234554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadMax</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any ideas on how to push objects around? <br><br></td></tr></table><br>
<a name="234561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should be more specific in asking your question.  First off describe the objects being pushed (you said "furniture" but that is still pretty vague) and the objects doing the pushing.  The setting would help too (in particular, the surface on which the objects are being pushed.) <br><br></td></tr></table><br>
<a name="234593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the player and furniture object are clolliding, translate the entity in the x/z directions based on the collision normals and players movement speed. <br><br></td></tr></table><br>
<a name="234710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yinch</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also decide if you want your furniture to rotate when pushed - it adds a degree of realism but also complexity to the simulation.<br><br>You'll have to consider how 'off-centre' an impluse has to be to make the furniture turn instead of slide.<br><br>Consider if the furniture ever leaves the floor - e.g. lifted or else pushed off the edge  of a platform.<br><br>Having said that - non-rotating pushable furniture is a perfectly usable solution (see Half-Life 1 et al) which does add something to an environment.<br><br>y'03 <br><br></td></tr></table><br>
<a name="235191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadMax</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I'll try to be more specific, I think yinch get's the idea of what I want to do very well, let's say for a start I'm happy to stick with the "non-rotating-pushable" option. What I realy need is something to get me started, there seem to be some commands in B3d, but to the contrary to the 2D ones; those dealing with 3D (not all but many) don't seem to explain much, and don't come with a sample to play around with. And the truth is I'm not sure how I would go about making the collided object moving in the direction of the colliding object if and only if it's blocking it's advance ( thought about getting it to move with the colliding object, but then it would not only push, it would pull as well (Superglue?) I could (suposition) work out a complex way to do this, but I'd hate to find out, that the same could be archieved, with the clever use of a few commands. :)<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="235310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would want you to be more specific (eg. describe the game; is it first-person?) but I think sinu has already mentioned the most important thing for you to know.  You want to check the collision normal.  That will tell you the direction of the collision (ie. which direction the collided object is being pushed.) <br><br></td></tr></table><br>
<a name="235333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look at the ball rolling code I posted a couple forums up.  If you take out the part about rolling, and subsitutue a chair for the ball, and subsitute the amount of force the player is applying to the object for the force the player applies with the arrow keys to the ball, then you'll have a pushable object simulator.<br><br>When I say subsitute the amount of force the player applies to the object, I mean detect that a collision has occured, and then take the player's velocity vector, the speed/direction they are moving on each axis of the world, and then add that, to the velocity of the object.  You can also make the object harder to push by say, dividing the force in half, and having the chair push back on the player with an equal amount of force so they move more slowly when they are pushing against it and it is pushed more slowly. <br><br></td></tr></table><br>
<a name="235419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
Function ControlP1()

xinc# = (KeyDown(205) - KeyDown(203)) * 0.1
zinc# = (KeyDown(200) - KeyDown(208)) * 0.1

p1\xvel# = (p1\xvel# + xinc#) * 0.7
p1\zvel# = (p1\zvel# + zinc#) * 0.7

TranslateEntity p1\entity,p1\xvel#,p1\yvel#,p1\zvel#

For i = 1 To CountCollisions(p1\entity)
	For b.box = Each box
		If CollisionEntity(p1\entity,i) = b\entity
			b\xvel# = p1\xvel# * Abs(CollisionNX(p1\entity,i))
			b\zvel# = p1\zvel# * Abs(CollisionNZ(p1\entity,i))
		End If
	Next
Next

End Function


Function UpdateBoxes()

For b.box = Each box

	TranslateEntity b\entity,b\xvel#,b\yvel#,b\zvel#

	x# = EntityX(b\entity)
	y# = EntityY(b\entity)
	z# = EntityZ(b\entity)
	
	b\xvel# = x - b\px
	b\yvel# = y - b\py
	b\zvel# = z - b\pz

	b\xvel# = (b\xvel#) * 0.7
	b\yvel# = (b\yvel# - 0.1) * 0.5
	b\zvel# = (b\zvel#) * 0.7
	
	b\px# = EntityX(b\entity)
	b\py# = EntityY(b\entity)
	b\pz# = EntityZ(b\entity)
	
Next

End Function
</pre><br><br>taken from my little fun project :P <br><br></td></tr></table><br>
<a name="235742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadMax</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> cheers, i'll try out these things. <br><br></td></tr></table><br>
<a name="236485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> MadMax,<br><br>The other quick and dirty way would be:-<br><br>(1) Check for collision between player and furniture<br>(2) Parent collided object to player (make player look like they have a hold on the furniture)<br>(3) Moving player now move furniture<br>(4) Have a special key to drop the furniture<br>i.e. release the parenting of the object to the player.<br><br>(Oh if you are meaning a first person mover then the camera would be the player I guess.)<br><br>This means player could carry stuff up and down stairs, into new rooms etc. with very little coding.<br><br>regards,<br><br>IPete2. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
