<!DOCTYPE html><html lang="en" ><head ><title >Textures not really freed?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Textures not really freed?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Textures not really freed?</a><br><br>
<a name="479518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gillissie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think textures in Blitz3D are not really freed when you do a FreeTexture, or when you FreeEntity an entity with a particular texture. The reason I think this is because I am trying to reload and re-apply textures with the same filename, and nothing happens.<br><br>What I'm trying to do is create a simply 3D viewer program to view my texture maps on an entity. I want to modify the texture file, then click a button on the 3D viewer to reload the same texture with the updated image, but nothing happens. It seems like Blitz3D thinks "I already have a texture with that filename in memory, so just use it instead of actually reloading it again."<br><br>Has anybody figured out how to get around this? <br><br></td></tr></table><br>
<a name="479552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could always load a dummy file first, and then the updated version. <br><br></td></tr></table><br>
<a name="479624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gillissie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried that, doesn't matter if I free it, load a different texture, free that, then load the first texture again. The first texture stays the same, even if the file has been updated. <br><br></td></tr></table><br>
<a name="479628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Assuming the texture is not applied to any active entities ( which will keep the texture in video ram ) you can just renderworld ( and possibly flip - can't remember ) and it will be flushed from video memory as Blitz then seems to detect that it's no longer required. <br><br></td></tr></table><br>
<a name="479702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The space that was used for the texture is no longer locked. The texture data is still there and even the handle still may be used, although it will be removed or overwritten when blitz performs the next garbage collection. I don't know exactly when it's gonna do that, every Renderworld() as Sybixsus said, or only from time to time, or when new memory is allocated. Fact is a texture that was freed is no longer accessable _securely_ cause it's RAM will be recycled soonish.<br><br>Therefore I'd reccomend if you remove a texture, always set its handle to zero at the same time, this way you will always be able to check if a texture exists or not. <br><br></td></tr></table><br>
<a name="479809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you may have the same problem I had:<br>I wanted to change a named texture on a model, as I was editing it, to see the differences.<br><br>It seemed as if the graphics card was saying 'No, I've already got that (named) texture in memory, I won't actually reload it.' - but no error in Blitz.<br><br>The only answer was:<br>a) To load a texture of a different name (obviously), or<br>b) Erase the model, and reload using the newly changed (but same name texture).<br><br>I wrote my own model viewer, and had to end up using method b) - it was the only way to be sure. <br><br></td></tr></table><br>
<a name="479811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> (now I realize I misunderstood your question before. Sorry, I should read more carefully :) )<br>You are referring to memory usage optimation that is perfomed automaticly. When you load a texture twice with the same settings and everything, blitz thinks it's better to reuse the one it already loaded before. Blitz doens't recognize if the texture file was edited.<br><br>BTW there are further ways to solve this:<br><br>Situation A: You are loading a texture several times and write, say, a teamplayer number onto each texturebuffer, then assign the texture to one of the teams players. You'll notice that in the end each team player has all numbers on his texture. Solution: Load the basic texture, then create each player texture using the CreateTexture Command, then CopyRect the basic texture to the players individual textures and then draw their numbers on their textures.<br><br>Situation B: You have loaded and assigned a Texture to a model, then you overwrite the texture file with a new texture. When you try to reload it, Blitz thinks it does not have to reload it since it's already loaded, and Blitz tries to utilize this (usually very smart) optimation based on recycling (or more exact:instancing). Solution: Load the texture, create a blank texture of the same size, CopyRect the texture to the created Buffer and then use that buffer, finally Free the original Texture, so when you instruct Blitz the next time to load it, it actually WILL reload it since the texture officially doesn't exist in memory. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
