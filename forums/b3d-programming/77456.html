<!DOCTYPE html><html lang="en" ><head ><title >JFKs AVI decls</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >JFKs AVI decls</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >JFKs AVI decls</a><br><br>
<a name="866682"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone post a link to the actual decls files. I tried to make them from the code but they don't work.<br>Appreciate it.<br><br>The "save AVI with sound" in archives <br><br></td></tr></table><br>
<a name="867130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What exactly didn't work?<br><br>Save the following as a textfile named "avifil32.decls":<br><br>.lib "avifil32.dll"<br>AVIFileInit%()<br>AVIFileOpen%(ppfile*,szFile$,uMode%,lpHandler%)<br>AVIFileRelease%(pfile%)<br>AVIFileInfo%(pfile%,pfi*,lSize%)<br>AVIFileGetStream%(pfile%,ppavi*,fccType%,lParam%)<br>AVIFileExit%()<br>AVIFileCreateStream%(pfile%, ppavi*, psi*)<br>AVIStreamInfo%(pStream%,pfi*,lSize%)<br>AVIStreamStart%(pavi%)<br>AVIStreamRelease%(pavi%)<br>AVIStreamLength%(pavi%)<br>AVIStreamGetFrameOpen%(pavi%,lpbiWanted%)<br>AVIStreamGetFrame%(pFrame%,index%)<br>AVIStreamGetFrameClose%(pFrame%)<br>AVIStreamReadFormat%(pavi%, lPos%, lpFormat%, lpcbFormat*)<br>AVIStreamSetFormat%(pavi%, lPos%, lpFormat*, cbFormat%)<br>AVIStreamRead%(pavi%, lStart%, lSamples%, lpBuffer%, cbBuffer%, plBytes*, plSamples*)<br>AVIStreamWrite%(pavi%, lStart%, lSamples%, lpBuffer*, cbBuffer%, dwflags%, plSampWritten%, plBytesWritten%)<br>AVISaveOptions%(hwnd%, uiFlags%, nStreams%, ppavi*, plpOptions*)<br>AVISaveOptionsFree%(nstreams%, plpOptions*)<br>AVIMakeCompressedStream%(ppsCompressed*, psSource%, lpOptions%, pclsidHandler%)<br><br>As well as a textfile named "kernel32.decls":<br><br>.lib "kernel32.dll" <br>RtlMoveMemory2%(Destination*,Source,Length) : "RtlMoveMemory"<br><br>If you already got one of these files in your userlibs folder, then you may have to add the missing commands to it. In case of incompatible use of certain commands (that were already declared by older programs and that may be the cause of problems) I suggest you rename the functions in my decls as well as in my bb source like this (use Search and Replace functions)<br><br>the line:<br>AVIFileInit%()<br> will become<br>jfk_AVIFileInit%() : "AVIFileInit"<br><br>Do this with all declaration lines.<br><br>you see I have this new "jfk_" prefix that makes it unique. but now we need to tell Windows the original Name of the function ( : "AVIFileInit") in the decls file.<br><br>In the kernel32.decls the <br>RtlMoveMemory2%(Destination*,Source,Length) : "RtlMoveMemory"<br>already has this original function name, so it would become:<br>jfk_RtlMoveMemory2%(Destination*,Source,Length) : "RtlMoveMemory"<br><br>As I already mentioned, you also need to edit the function calls in the Blitz Soucecode.<br><br>If this is all done then it really should work (unless there is a new XP or Vista Feature that stops it from running) <br><br></td></tr></table><br>
<a name="867142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> My kernel32.decls file had the function mistyped. It's working now. Thanks! <br><br></td></tr></table><br>
<a name="908238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >4pac</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder if you can help me... when I try to execute the code in b3d, the program hangs up at the lines<br><br>   If AVISaveOptions(hwnd, 3, 1, ret, plpOptionsList)=1 ;=0<br>    res=AVIMakeCompressedStream(compression_handle, stream_handle, PeekInt(plpOptionsList,0), 0)<br><br>That´s around 20 lines before the end of function OpenWriteAvi(). I found out this particular line by placing a lot of debugging marks with waitkey() before and after.<br><br>I have to terminate the programm using the XP task manager. An empty avi file is generated. I put the dll and decls files into the userlib folder, think there´s nothing wrong about that. What could I be doing wrong? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
