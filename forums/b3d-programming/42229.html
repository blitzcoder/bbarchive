<!DOCTYPE html><html lang="en" ><head ><title >Ocean Simulation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Ocean Simulation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Ocean Simulation</a><br><br>
<a name="473281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MIK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to make a U-Boat game.<br>I've tried to simulate the ocean, but I don't know how to simulate a very big piece of water with waves using level of detail algorithms.<br>I wanted to implement the Pierson-Moskowitz sea formula to an enormous LOD ocean.<br><br>How would you do this? <br><br></td></tr></table><br>
<a name="473290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erroneouss</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's some nice looking moving water.<br>The code archives are your friend.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=364" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=364</a> <br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=991" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=991</a> <br><br></td></tr></table><br>
<a name="473312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MIK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This only works for small surfaces with stored vertex heights.<br>I want to make a very big piece of water with LOD management. <br><br></td></tr></table><br>
<a name="473314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not asking for much then are you? I recommend using a sin based solution. GPU Gems has a chapter dedicated to water simulation, so if you want to do it well, I highly recommend that book.<br><br>As for LOD... well firstly your going to need to learn about quad trees or other large scene management techniques (I dont see Oct-trees being neccissary :) ) and  to use this you'll be needing to have sliced meshs. The LOD technique you use I can't help you about - haven't tryed any LOD. But there is a book dedicated to LOD techniques....<br><br>You should probably start with a terrain system because its static. <br><br></td></tr></table><br>
<a name="473321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your looking to simulate waves, you could also use animated normal maps, for the smaller waves. As long as you don't get too close, it should look decent. Trouble is getting an animated normal map that tiles :D <br><br></td></tr></table><br>
<a name="473349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey MIK,  I was workin on somethin similar awhile back, I've got something you might be interested in.<br><br>Email me at stangekopf@...  and we'll have a chat. <br><br></td></tr></table><br>
<a name="473529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz Terrains have built in LOD, you will even be able to use a high optimation since water MAY pop in and out (a known problem of LOD terrains).<br><br>All you have to do is editing the terrains heights in realtime. For this you may load an animated texture and copy the brightness of each pixel and frame to arrays or banks. Then you can access them quickly to modify the terrain in realtime. Check out the "Texture Wobbler" (toolbox section), a tool that was designed to create animated water textures.<br><br>So you could do both, use an animated texture for the terrain, and animate it in the same time, using the information extracted from the said texture-frames. Of course, the (tiled) terrain-height animation  should be scaled larger than the texture. <br><br></td></tr></table><br>
<a name="473565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> MIK,<br><br>I cannot help you with the LOD stuff, but I dont know if you need it or not because it is very possible to make nice looking ocean expanses in realtime, but you have to cheat a little and use multiple layers to generate the effect, here's what I would suggest you look at...<br><br>You can use a cube map to provide reflectivity off the sky, but alpha that layer down because the sea rarely looks like a lake or mirror, so you have to reduce the effect to make it look more realistic.<br><br>There is a piece of code in the archives called ripple mesh - check that out, and tweak the parameters a bit, use multiple meshes and alpha them.  Beware though, the meshes become out of control after about 10 mins, so you need to refresh them on a regular basis.  By that I mean alpha them away and introduce a new mesh - a replacement - to keep the density of the effect going.<br><br>I am in the middle of developing a simulation which requires this effect, but I can't post any shots just yet.  I will release shots once the sim is in place, I may even release a little movie because still shots do not do it justice - watch out for those shots in the gallery in about a month or so.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="473612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Strider Centaur</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well the good news about doing a ocean surface is that after about 1 mile you cant really decern any signifacant changes in  the sureface texture of the sea.   If you design for 17" to 19" nmonitors, the LOD only needs to extend a few hundred meters in any direction.<br><br>For this reason you could simply design a animated mesh and center your view in it.  Then mover it with you, but do not rotate it relative to the world when you turn.  You dont want the waves changing firections with you.<br><br>For much rougher sees it gets even easier, as wall of water will usually only provide you good vision out to something a good bit less than a couple hundered meters for the magority of the time.<br><br>Now you will want to use something alot less detailed out past the max range.  This level of detail is simple, and should be fast enough, simply render the wave mesh you created with a camera view set behind where the view camera sill be set and then save that image to a image buffer. Then useing a cube that in entity flipped and centers on you, just paint that image as textures, increasing the X scale while reducing the Y scale.  You wont need to update that texture nearly as oftern as you do the animation of the wave mesh.  Since things at a distance always seem to mover slower.  You will need to play around with the second camera position to get the right view reletive to the players view, but once you have it it should be fairly consistant. This does require rendering part of a sceen twice( I say part, becaue you will be setting up Waves ahead of time then rendering them, then adding the other objects and rendering them with the waves.).<br><br>Anyway, its just an idea <br><br></td></tr></table><br>
<a name="473635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MIK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br>I will use quad trees for the LOD.<br>I planed to use the Pierson-Moskowitz formula for the sea movement, but it seems imposible to use it with the LOD because you need to store the actual height of each vertex (and this would make useless the LOD, because you would still need to store the height of each possible vertex to move the water properly). <br><br></td></tr></table><br>
<a name="473719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;-- <br><br></td></tr></table><br>
<a name="473792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never heared of that, but I shurely would test what's faster. yes, with a terrain, an ocean with nice waves should be real easy, although an ocean is real big and probably it would be better to use a fake ocean that fades to a simple plane at some point. But then it would be smart to use an offset for a tiled animation for the visible ocean "patch", and that offset would be calculated from the players moving direction etc.<br><br>It's a fascinating topic and since I worked on underwater fx lately, I probably gonna give it a try soonish.<br><br>EDIT: Does anyone remember the last level of NOLF2, that plays on a little island? That was a great ocean! watched from the hills, the waves around the islands coast where looking very nice, one of the sweeter candies of the lithtech engine IMHO. <br><br></td></tr></table><br>
<a name="474472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chad</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep us informed MIK..  <br><br>I would really love to see another U-boat sim :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
