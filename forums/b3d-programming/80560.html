<!DOCTYPE html><html lang="en" ><head ><title >How to handle gun shots?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How to handle gun shots?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >How to handle gun shots?</a><br><br>
<a name="906158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Two questions:<br>1) What's the best way to handle bullets &amp; shots?<br>2) ...what about in (online multiplayer) network game? :)<br><br>I'm back to using Blitz3D... and was searching for code on how to handle gun shots. Conclusion seems to be that linepicks should be avoided, and instead use bullets that collide... and do stuff depending on collision.<br><br>Here's some threads I've checked out:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=76232#852521" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=76232#852521</a><br><br>damage effect:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=76139#851176" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=76139#851176</a><br><br>line pick &amp; slowdown:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=75533#844735" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=75533#844735</a><br><br><br>I presume I should 'create bullet objects' and let them fly? Is this the most efficient way to handle them? (I expect to have single shooting guns, but also shotguns that could send 5-10 "bullets" per shot)<br><br>---<br><br>2) What about online play? (server-client)<br>Server is naturally in "right time", but all the clients lag behind (a bit), and their positions/rotations aren't exactly in sync. <br><br>Even though my game is not FPS, it still has enough shooting to make things bit more complex:<br><a href="http://www.deadwakegame.com/forums/showthread.php?t=478" target="_blank">http://www.deadwakegame.com/forums/showthread.php?t=478</a> (link to a video showing shooting :))<br><br>I've dug some resources earlier, like this one:<br><a href="http://www.gameproducer.net/2006/10/23/online-multiplayer-games-programming-resources-are-hard-to-find/" target="_blank">http://www.gameproducer.net/2006/10/23/online-multiplayer-games-programming-resources-are-hard-to-find/</a><br>...but I think for example Valve's system (Source multiplayer) has too heavy calculation for figuring out "where client was aiming 200 milliseconds ago", and I'd try to look something bit more simple.<br><br>I *could* simply let client shoot (and lag behind), and then let server simply send "bullets info", but this still won't solve the problem if client was aiming to something that wasn't there. <br>(I suppose one idea could be to simply let client also 'decide' whether he 'clicked target', and then server would know too...)<br><br>Ideas? <br><br></td></tr></table><br>
<a name="906892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knight #51</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well for starters using Collisions,LinePick and all of those other things, will just make a big mess. To make this simpler (and mabey even faster) try this: <br><br><pre class=code>

If EntityDistance("your bullets","your people") &lt;= 1

   ;do whatever

EndIf

</pre> <br><br></td></tr></table><br>
<a name="906913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't have a lot of bullets at once then I would recommend linepicks because although they are slow, you only have to do 1 or 2 per frame which is not enough slowdown to matter. <br><br></td></tr></table><br>
<a name="906932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..just include any of available physics engines and use raypicking and forget about speed issues.. <br><br></td></tr></table><br>
<a name="906959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mtnhome3d</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> first you clean the wound with antiseptic then bandage it up and then hope you don't bleed out till 9-1-1 arrives. :)<br>on topic:<br>i would do line picks and stagger the frames that you do the pick on, like frame1 bullets 1 and 2, frame 2 bullets 3 and 4 and so on an so forth. <br><br></td></tr></table><br>
<a name="906971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> mtnhome3d<br><br>most of the time this isn't needed because it is unlikely that two bullets will be fired on the exact same frame but just in case it is good to include  :) <br><br></td></tr></table><br>
<a name="907067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with Naughty Alien. Use raypicking. It's hell of alot faster. <br><br></td></tr></table><br>
<a name="907126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knight #51</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is raypicking??? <br><br></td></tr></table><br>
<a name="907208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> or what is the difference between raypicking and linepicking besides speed  ? <br><br></td></tr></table><br>
<a name="907211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is no difference between raypicking and linepicking, they are the same thing. The differentiation Naughty Alien was making is that when you do it with a physics engine, the calculations are very optimized. Physics engines tend not to deal with pure geometry. They see everything as a box, a cylinder, a sphere, or for more complex geometry, perhaps a convex hull. I can't personally confirm that it's faster than B3D picking, but I would certainly expect it to be. <br><br></td></tr></table><br>
<a name="907215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nate the Great</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok that always confused me until now   thanks :) <br><br></td></tr></table><br>
<a name="907236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the LinePicking speed depends a bit on the EntityPickMode set (as there is the polygon [SLOW], sphere [FAST] and bounding-box [FAST]). But still, making one line pick every time the user shoots is not at all time-consuming (what is time consuming is to use it every frame, like with towel-meshes. And that still runs pretty smooth for what it is). You really wouldn't be doing it every frame, only when the user shoots the gun. But if you're in doubt relating to CPU usage, go with a physics engine as it has not only really fast raypicking as also non-responsive collision detections and lots of other nice stuff adding capabilities to Blitz3D. You'll thank yourself.<br><br>And please don't use bullet models to check collisions...since when do we see a bullet flying through the air? if you make a nice barrel-flash, a nice shot sound and a nice impact, it makes no difference. Check counter-strike for example, uses no bullet models at all (I think you should only use bullet models when you are making cartoon games where you want that to happen. In realistic games that's just really unecessary). <br><br></td></tr></table><br>
<a name="907244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knight #51</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok........................what is linepicking???????????????? <br><br></td></tr></table><br>
<a name="907248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Linepicking = Picking pickable entities (use EntityPickMode) between two 3D points <br><br></td></tr></table><br>
<a name="907250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..raypicking is way way faster than native B3D linepicking...Im using it as a part of my occlusion system, based on Physx..more than 3000 objects each frame picked in not time, less than 1 ms..when i tried to do same with standard B3D stuff, my frame rate simply...stuck..and my levels has 120K-200K polys...also, im using Physx for my characters collision and so on..simply..no slow down at all.. <br><br></td></tr></table><br>
<a name="907265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Avoid EntityDistance except for the most coarse calculations.<br>As I found last night, if I shoot my man in the chest then EntityDistance effectively says the distance is 1.5 units/metres - from his chest to his feet, which is the origin point of the model. <br><br></td></tr></table><br>
<a name="907314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah def. Entity distance is useful for stuff like coin collecting for example, where you don't want to actually register a coliision. <br><br></td></tr></table><br>
<a name="908779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knight #51</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I guess so. <br><br></td></tr></table><br>
<a name="908852"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys. Especially the info about cleaning the wound with antiseptic first, then bandage it up and then hope you don't bleed out till 9-1-1 arrives was very helpful :)<br><br>RayPicking. I wonder if JVODE can handle that.<br>EDIT: just found there's a demo... next testing to see how fast it is....<br><br>----<br><br>Hmm, what about slow 'bullets'.... like, throwing a knife for example? :) <br><br></td></tr></table><br>
<a name="908872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityCollided, EntityPick, LinePick (from the blade's beginning to it's tip). <br>You should filter your questions through common sense first...if you want to check if a line interesects a mesh, go with linepick. If you wanna check if a mesh intersected with a mesh, go with blitz collisions or EntityPick. <br><br></td></tr></table><br>
<a name="908900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gameproducer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh... and Do'h. what were I thinking. :)'knife throwing' could indeed be done by checking "did it collide", and then check damage. <br><br>(well, in multiplayer it will require bit more than that... ) <br><br></td></tr></table><br>
<a name="908909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure, and then disabling the knife collisions and then parenting it to the target, so as the target moves the knife "sticks" to it :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
