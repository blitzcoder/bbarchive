<!DOCTYPE html><html lang="en" ><head ><title >Depth buffer</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Depth buffer</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Depth buffer</a><br><br>
<a name="241363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to turn off the depth buffer?  I want to draw a bunch of quads and the zbuffer is making my life difficult.<br><br>Basically, I want to add a bunch of quads to a surface and have them rendered on top of each other, as if I had used the DrawImage command multiple times.  Problem is, the zbuffer is stepping in and making things look wrong.<br><br>Can I disable it? <br><br></td></tr></table><br>
<a name="241367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at CameraClsMode or EntityOrder. I believe setting entity order to the same for all quads, will kill zbuffer fighting, not sure though...<br><br>Fredborg <br><br></td></tr></table><br>
<a name="241387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, but neither command seems to make any difference.<br><br>Basically, what I'm doing is that I'm adding 2 quads to a mesh.  When they render, the first quad is on top of the second one.  I'd like them to draw in the order that I add them.<br><br>I THINK the depth buffer is screwing me over, but I might be wrong.<br><br>Has anyone does this sort of thing before?  Should I be creating a new mesh for every quad then?  Seems wasteful ... <br><br></td></tr></table><br>
<a name="241391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Creating a new mesh for each quad isn't going to make any difference, I don't think. I needed to achieve a similar thing to you recently for a special effect. I simply placed each layer/quad with a slightly different Z coord - something like 0.0001 difference between each layer. <br><br></td></tr></table><br>
<a name="241438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityFX 32.  That enables vertex alpha, which disables zbuffer writes, but still checks the zbuffer.  This allows the polygons in your cube to draw in the order you specify, yet still sort with the rest of the scene properly.<br><br>Keep in mind that all transparent objects are rendered last, so any opaque object between the cube and the camera will cover it.  But that's normal.  Still, depending on what you're doing, this order could make a difference.  Also note that since you're not updating the zbuffer, the cube won't affect the z values.  So that might cause things to render differently than you expect as well in some cases. <br><br></td></tr></table><br>
<a name="241439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, you can use Entityorder in some limited cases.   Entityorder disables zbuffer writes AND checks.  So this allows you only to place objects over all the other geometry in the scene.  If entityorder didn't change the appearance of anyhting at all then I suspect you did something wrong. <br><br></td></tr></table><br>
<a name="241656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, at the moment I've got a single mesh that I'm adding multiple surfaces into.  I'm using the sprite camera set up from the "Sprite Control" library that's been mentioned on this site many times.<br><br>That camera set up seems to offer a very limited range of Z values so maybe that's the problem.<br><br>I tried EntityOrder, but since there's 1 mesh I guess it's really not going to do anything.  I also tried bit 32 for EntityFX with no luck (and I know it took it because I CAN specify alpha values for the verts and it works).<br><br>I just don't understand what's going on.  I guess I can try putting every quad on it's own mesh but that seems horribly wasteful. <br><br></td></tr></table><br>
<a name="241724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just for those that are following this thread to learn something...<br><br>Epicboy just told me he was using the 32 only on EntityFX but then painting surfaces with BrushFX.  <br><br>I told him he was overriding the EntityFX when he painted the surfaces individually.  Unless he specifies the 32 on the BrushFX he will turn it off and then the surface won't do the vertex alpha trick I outlined above.<br><br>EntityFX is like a short cut.  It paints all surfaces at once.  Though I don't know if this means that it can ovveride  surfaces which have already been painted with a brush individually.  But it does definitely affect any surfaces which haven't been painted with a brush yet.  So EntityFX is kind of like a convenience function.  But it would be better named as PaintSurfaces or something to imply what it is doing different from PaintSurface.  The help documentation needs to be somewhat clearer in this respect. <br><br></td></tr></table><br>
<a name="241756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know about its behavior with flag 32 but EntityFX seems to override brush properties for other stuff like vertex colors, and full bright.<br><br>That would have stumped me (I didn't know applying a brush overrides EntityFX) so it's good to know. <br><br></td></tr></table><br>
<a name="241799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> " EntityFX seems to override brush properties for other stuff like vertex colors, and full bright."<br><br>Yiou sure about that?  I would like to see a tes demonstating that if you apply a brush to a surface after using entityfx that it does not oveeride any and all properties. <br><br></td></tr></table><br>
<a name="241825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyway, to bring this to a close, I'm creating a new mesh for every texture change instead of just creating a new surface instead a common mesh.<br><br>Seems to fix the depth buffering crapola.  I guess it's costing me some extra overhead, but for the game I'm trying to do that shouldn't matter much. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
