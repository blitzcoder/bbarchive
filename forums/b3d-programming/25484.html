<!DOCTYPE html><html lang="en" ><head ><title >what is verlets?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >what is verlets?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >what is verlets?</a><br><br>
<a name="265050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is verlets those people talking about? something similar to vertex? <br><br></td></tr></table><br>
<a name="265060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Imagine you have a single vertex which has simple physics applied to it.  Wind, gravity, bounce, friction.<br><br>Now imagine you have a lot of these verlets.  Eight of them.  At the corners of a box.<br><br>Now imagine you have connected them with stiff rods.  These rods can move in any direction but constrain each verlet to be a certain distance from the other verlet it's connected to.<br><br>To use verlets, you create the verlets, and then define which verlets are connected to one another, storing the distance apart which they should try to remain.<br><br>Then you do your basic physics on each verlet by itself, moving it however it WANTS to move, ignoring the connections to the other verlets, but colliding it with objects it wants to collide with.<br><br>Once you've done this, you do a "relaxation phase".  You do several loops, each time looping through all the verlets and trying to move them towards the verlets they are connected to so that they are the right distance from their neighbors.  So if verlet A is connected to verlet's B and C, you would move it in the direction of B so that it is the right distance from B, and then you would move it in the direction of C so it is the right distance from C.  If you do this several times, then you will converge on a correct solution.<br><br>The side effect of all this is that MAGICALLY, your objects will rotate as they are supposed to when they hit something, and they will even bounce as a whole even though you're only simulating the bouncing of individual verlets.<br><br><br>There's one last thing you need to know about verlets and that is that instead of storing a direction and velocity for each, you store the velcoity in the positions of the verlets.  But I forget how this works.  Someone else will need to describe that.  This special way of storing the velocity by storing two positions keeps the physics more stable. <br><br></td></tr></table><br>
<a name="265152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>special way of storing the velocity by storing two positions keeps the physics more stable. <br> <br></div><br>Since time passes with every loop, the difference between position (BEFORE) and position (AFTER) can help determine speed, direction and therefore velocity<br>(is this on the right track?) <br><br></td></tr></table><br>
<a name="265259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess that's all they're doing.  I wasn't quite sure if I had it right and I didn't want to go off spouting nonsense. :-)<br><br>So I guess what you do is at the start of each frame, store the verlet's position in CURRENTFRAME, and then at the end of each frame, store CURRENTFRAME in LASTFRAME.  Then each frame you take CURRENTFRAME-LASTFRAME and that tells you the difference between the verlet's position between where it was and where it now is.  And that tells you it's position and velocity.  And because the two are combined in this way it's very difficult for position and velocity to get out of synch with one another. <br><br></td></tr></table><br>
<a name="265330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually there's no such thing as "verlets". I don't know who invented that word anyway??... It's only the integration method that is called Verlet integration... it's an option for traditional methods like Euler integration.<br><br>So actually they are just talking about particles connected by springs. <br><br></td></tr></table><br>
<a name="265343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Miracle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, but "verlets" is such a fun word to say. <br><br></td></tr></table><br>
<a name="265359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dunno who invented using "verlets" I know it wasn't me because I remember thinking it was a wierd but good way of describing them. More sophesticated than particles. Anyway, the first time I heard it was from Miracle/DMC in the Advanced 3d forum. <br><br></td></tr></table><br>
<a name="265378"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Be what they may, that was a great explanation sswift ! <br><br></td></tr></table><br>
<a name="265393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> "So actually they are just talking about particles connected by springs."<br><br>Actually they're stick constraints, not springs.  IF you want to get TECHNICAL, Mr. They're Not Verlets. :-) <br><br></td></tr></table><br>
<a name="265401"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Codemonger</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Long live Verlets !!! and the guy who invented them. <br><br></td></tr></table><br>
<a name="265419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> or when vertex / vertices + ODE = verlets?? <br><br></td></tr></table><br>
<a name="265425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RexRhino</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, so I have created my own physics library, but it only works on individual points (I was simulating space ships, so this was all I needed)...<br><br>To make this a "vertlet" library, all I have to do is create some function to orient my vertlets so they are a specific distance from each of the other vertlets it is linked to?<br><br>Would this work????:<br><br>1. Calculate my points using my standard physics library.<br><br>2. For each point in my object, I check the distance to it's linked points.<br><br>3. Lets say I am out of range between point A, and point B. I would point A at B (they are pivots), determine the difference between how far apart they are, and how far apart they should be, and then move point A forward the amount of the distance?<br><br>This all seems extremly simple. Most of the vertlet explainations I have seen have gone into some pretty deep calculus, and this I could do with some simple algebra and trig. Am I misunderstanding something? I haven't began my own ragdoll and rigid body stuff because I thought it was too complex. If this is how it works (and it would work that way quickly), then I see no reason not to write my own. <br><br></td></tr></table><br>
<a name="265431"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "3. Lets say I am out of range between point A, and point B. I would point A at B (they are pivots), determine the difference between how far apart they are, and how far apart they should be, and then move point A forward the amount of the distance?"<br><br><br>Well you could do that, but there's much MUCH less computationally expensive ways to do that:<br><br><br>1. PositionA - PositionB = Vector pointing from B to A.<br>2. Calculate length of vector.<br>3. Divide vector by vector's length, making Vector's length = 1.<br>4. Multiply vector by distance which you want A to be from B.<br>5. Place A at (B + Vector).<br><br><br>Also, you completely ignored the whole storing the positions instead of the velocities.  This is probably important for stability in this sort of system.  It's easy to convert each frame from the position stuff to a speed and velocity and then back to a position though.  <br><br>Why convert back and forth?  Well, one reason is that when a collision occurs, the velocity of that verlet is automatically reduced or even inverted by the neccessary amount.<br><br>Other than that, yeah you've pretty much got the idea.  You just need to do step 3 for each verlet connected to each verlet, for all verlets, and do that a few times each frame to relax the object.<br><br><br>There's a lot of times when people who are knowledgeable about math start using calculus for stuff when they don't need to.  It's cause they've been trained that way and it's easier to express concepts like calculating a value with a loop over time to other people who know calculus, I guess.  I don't know calculus myself.  It's frustrating to read a lot of articles on game development when they start using calculus. <br><br></td></tr></table><br>
<a name="265563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wasnt Verlet the name of the guy that invented ...well... Verlets? <br><br></td></tr></table><br>
<a name="266617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. His name was Verlet Varlet. <br><br></td></tr></table><br>
<a name="266657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> what if bouy floating on the wavvy ocean - also using verlets <br><br></td></tr></table><br>
<a name="266736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Akat, you don't need verlets for simple things like boats and floating objects in general. The power of verlets is when you need to roll something over or have collision interaction with another set of verlets.<br><br>If you look at the driver demo on the blitz cd you can see that by just checking the wheels of a car and using align to vector, you get a great result. Same for a Bouy floating on an ocean.<br><br>So using verlet calculations with string constraints is overkill for simple things. <br><br></td></tr></table><br>
<a name="267004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, verlets are pretty well suied for buoys/boats. Id wouldn't be hard to write a little verlet physics, add a loop that checks if verlet's under water, and move upwards. People keep on thinking that verlet calculations are expensive. Halos' demos are slow because he made a really bad implementation of constraints, creating and freeing temporary pivots for EACH constraint, and then Using blitz rotation/pointing/movement commands to correct. Oh well. A bouy could be 1 particle.3 particles, or four. Depends on how much you want it to do.  It would be good for boats, cause it would have realistic collision with land instead of blitz entity collisions.  With alot more work, you coud get boat-boat working. <br><br></td></tr></table><br>
<a name="267470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> any demo? <br><br></td></tr></table><br>
<a name="267475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> gheh. I could right one if you like. no promises of course. I might have alot of non-blitz work pretty soon. I was thinking about writing an example of this anyway. Also, I'd need to email it to someone who has webspace as I don't. Anyone have some good quad waves algorithms I can work with?  I tried writing one a while back, but It didn't work out to well. I'd also need a bouy model to make it pretty, but for now I could use a sphere and a cylinder. <br><br>I admit that verlet physics may be overkill in simple situations like these, but it may induce that extra level of detail that makes a game really good. You could also add a verlet string down from the bouy to the sea floor. which isn't actually very slow. the main slow thing in verlet is alot of constraints, and a string only needs one per verlet.  Also, it may in the end actually save time, as you might have had to debug a system that moves the bouy in a way simply using aligntovector and nothing else. what if a boat hit the bouy? you'd have to write specialized code to handle it. what if one bouy hit another bouy? more specialized code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
