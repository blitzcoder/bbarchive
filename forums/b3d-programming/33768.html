<!DOCTYPE html><html lang="en" ><head ><title >2D Pivoting around a point</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D Pivoting around a point</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >2D Pivoting around a point</a><br><br>
<a name="363774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jager</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick, could somesone give me a 2D pivoting formulae.<br><br>For example, a point x=5 and z=3 away from a cental pivot point, pivoting 45% 8 times.<br><br>for some strange reason mine only half works? <br><br></td></tr></table><br>
<a name="363784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay...if you have a point which is 5 units in the x direction and 3 units in the z direction away from a point and you wish to rotate the coordinates by 45 degrees 8 times then do the following:<br><br>Radius#=Sqr(5^2+3^2)<br><br>NewX=PivotX+Radius*Cos(Angle)<br>NewZ=PivotZ+Radius*Sin(Angle)<br><br>assuming you are rotating in the xz plane and that PivotX,PivotZ are the world coordinates of your central pivot point.<br><br>The only parameter that you then need to pass is the "Angle" variable. <br><br></td></tr></table><br>
<a name="364266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jager</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks but I lied a bit, I really want 4 points in a box formation to rotate around a central point - while keeping the formation.<br><br>The problem seems to be that the angle (in the above formula), is related to world coordinates not related to the object. I need to add /subtract extra degrees for each point and it's in adding and subtracting, things start to go wrong .. as you can gather at this point, I'm no mathematician.<br><br>Here's my test code .. don't laugh! :)<br><br><br>  Graphics 800, 600, 32, 2<br><br>  Cls<br><br>  x1# = 200.0<br>  z1# = 200.0<br>  x2# = 250.0<br>  z2# = 200.0<br>  x3# = 200.0<br>  z3# = 250.0<br>  x4# = 250.0<br>  z4# = 250.0<br><br>  ax# = 350.0<br>  az# = 350.0<br><br>  deg# = 45.0<br><br>    Color 250, 0, 0<br>    Oval ax#, az#, 3, 3, True <br><br>  For d = 0 To 360 Step 45 <br>    <br>    Radius1# = Sqr( (ax#-x1#)^2 + (az#-z1#)^2 )<br>    NewAng1# = ASin( (ax#-x1#) / radius1# )<br>    x1#  = ax# + Cos( d-NewAng1# ) * radius1#<br>    z1#  = az# + Sin( d-NewAng1# ) * radius1#<br>    Radius2# = Sqr( (ax#-x2#)^2 + (az#-z2#)^2 )<br>    NewAng2# = ASin( (ax#-x2#) / radius2# )<br>    x2#  = ax# + Cos( d-NewAng2# ) * radius2#<br>    z2#  = az# + Sin( d-NewAng2# ) * radius2#<br>    Radius3# = Sqr( (ax#-x3#)^2 + (az#-z3#)^2 )<br>    NewAng3# = ASin( (ax#-x3#) / radius3# )<br>    x3#  = ax# + Cos( d-NewAng3# ) * radius3#<br>    z3#  = az# + Sin( d-NewAng3# ) * radius3#<br>    Radius4# = Sqr( (ax#-x4#)^2 + (az#-z4#)^2 )<br>    NewAng4# = ASin( (ax#-x4#) / radius4# )<br>    x4#  = ax# + Cos( d-NewAng4# ) * radius4#<br>    z4#  = az# + Sin( d-NewAng4# ) * radius4#<br><br><br>    Color 250, 250, 250<br><br>    Rect x1# , z1#, 20, 20<br>    Rect x2# , z2#, 20, 20<br>    Rect x3# , z3#, 20, 20<br>    Rect x4# , z4#, 20, 20<br><br>    Delay 2000<br><br>  Next<br><br>  WaitKey() <br><br></td></tr></table><br>
<a name="364281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> To go back to your original example, x=5 z=3, we have<br><br>Radius#=Sqr(5^2+3^2) <br><br>Then points on a circle are given by<br><br>newX# = CenterX# + Radius*Cos(Angle#) <br>newY# = CenterZ# + Radius*Sin(Angle#)<br><br>The only remaining question is where to start. The answer is<br><br>Angle0# = ATan2( 3, 5 ) <br><br>With this angle we get newX = 5 and newY = 3.<br><br>After that use 45+Angle0, 90+Angle0 etc. <br><br></td></tr></table><br>
<a name="364290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jager</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> strange?<br><br>  CurAng# = ATan( -5 / -5 )<br><br>CurAng# = equals 45 degrees?<br><br>Shouldn't that be -45 degrees? I mean a point @ x = -5, z = -5 would be -45 o from origin, yes? <br><br></td></tr></table><br>
<a name="364292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ATan deals with a line though (0,0). Note that (5,5) and (-5,-5) are on the same line.<br>The same is true for any point (x,x) where x is not zero.<br><br>So ATan(x/x) is 45.<br><br>This is the reason ATan2 exists. <br><br></td></tr></table><br>
<a name="364303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jager</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah! that's what I was looking for.<br><br>I'm blind as well as being a poor mathematician.<br><br>thanks. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
