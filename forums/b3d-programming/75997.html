<!DOCTYPE html><html lang="en" ><head ><title >MeshTerrainY</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MeshTerrainY</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >MeshTerrainY</a><br><br>
<a name="849533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been working on a terrain editor for a while now and I decided to use mesh terrains from the beginning for a number of reasons. But now I'm wondering how it might be possible to find the terrain height of a mesh terrain without using linepick which might cause slowdown? <br><br></td></tr></table><br>
<a name="849555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe there is already something in the code archives. Probably one of the line-intersect-whatever routines. <br><br></td></tr></table><br>
<a name="849560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I have tested out one of those and it seems to kill my framerate. I'm not sure why that is, but I think it has something to do with the fact that it has to use a PointInTriangle check for every triangle in the mesh terrain every frame. I think it might work well if there was a quicker way of doing this check, but I haven't been able to find one. <br><br></td></tr></table><br>
<a name="849564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, another, somewhat related problem I've encountered is that Blitz seems to handle collisions way too sensitively. For example, if I try to test out one of my terrains, my character gets stopped on the slopes that could pretty easily be walked up in real life (roughly 30 or 40 degrees). I'm not sure if this is a bug in Blitz or if it has something to do with my code, but I don't think its in my code because I'm not currently using any kind of gravity and I'm using <br>Collisions player_collide,terrain_collide,2,3. Also, if I use Collisions player_collide,terrain_collide,2,2, the character doesn't even slide down extremely steep slopes sometimes (close to 90 degrees). <br><br></td></tr></table><br>
<a name="849693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll need to set some other things up behind the scenes to handle slope angle collisions.<br><br>As for the mesh height, you can use mesh height i believe to get the height of a mesh. OR, loop through every vertex, find the lowest, find the height vertex then do a simple calculation :o) <br><br></td></tr></table><br>
<a name="849724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure I would have to handle the collision angles on my own? I thought Blitz was supposed to do that for you when you set the response settings for collisions, of course I could be wrong.<br><br>Also, mesh height returns the total height of the mesh, not the height at a specific point. And I'm not quite sure I understand your second method, if you could explain it a little more. <br><br></td></tr></table><br>
<a name="849768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your terrain is uniform in the x and z scale then the calculations are quite easy and fast otherwise you'll always have to iterate through all tri's to get the point of intersection so quicker to use linepick.<br><br>Which is it? <br><br></td></tr></table><br>
<a name="849770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's uniform in the x-z plane. <br><br></td></tr></table><br>
<a name="849823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, what i mean by your own collisions, is get the normals from the collision and check them. If they are too steep then don't allow the player to keep walking. I use a linepick downwards and gather all the pick collision information and work with that.<br><br>As for my second suggestion, i thought you were only wanting the terrain height. Sorry about that ^_^. As stevie says, linepick is probably the best. <br><br></td></tr></table><br>
<a name="849847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> See here then ...<br><br><a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=45525#506330" target="_blank">http://www.blitzbasic.co.nz/Community/posts.php?topic=45525#506330</a> <br><br></td></tr></table><br>
<a name="849997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ringwraith</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies Stevie and Ross. I think Stevie's method of finding the height on a quad will probably work well for my situation. Ross, you're right about having to handle my own collisions in this case. I've come across a whole bunch of buggy wierd things like my player just walking right through the terrain or not being able to walk down a smooth gentle slope. I guess I'll have to check the steepness of the triangles manually then.<br><br>Thanks all. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
