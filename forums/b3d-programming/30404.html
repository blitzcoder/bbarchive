<!DOCTYPE html><html lang="en" ><head ><title >Can't get .midi files to play using PlayMusic</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can't get .midi files to play using PlayMusic</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Can't get .midi files to play using PlayMusic</a><br><br>
<a name="323953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can anyone else get this code snippet to work?  of course, you will have to substitute your own .mid file<pre class=code>chnTitle=PlayMusic("Title.mid")
If chnTitle = 0 Then RuntimeError("file not loaded")
WaitKey()
End</pre>I can't get it to work and keep getting "file not loaded" errors.  The .mid file is in the same directory as the executable. <br><br></td></tr></table><br>
<a name="323961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KiwiSteve</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tried it by putting a midi file in with the program, and it runs fine both from within Blitz3D and as the exe.  Are you able to play your midi file in anything else like MediaPlayer?  All I can think of is whether the file is corrupt.  Sorry I can't be any more help. <br><br></td></tr></table><br>
<a name="324083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can play the .mid files fine from within Windows MediaPlayer and Magix Midi Studio.<br><br>I can't play them from Blitz3D (I have Blitz3D version IDE 1.85, Linker 1.64, Runtime 1.85) nor from BlitzPlus (ver IDE 1.35, Linker 1.10, Runtime 1.37) either as executables or from within Blitz.<br><br>This all happens regardless of the .mid file I substitute.<br>The strange thing is that it used to work fine a while back.  I don't remember when exactly it stopped working. <br><br></td></tr></table><br>
<a name="324227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go to the "Run" option in your start menu and type "dxdiag". There should be a tab in there for music. Check that the test works with all MIDI devices on your system; it could be that if one or more don't work, Blitz is trying to play out of the ones that don't work.<br><br>Do MIDI files play in other DirectX applications? (This is so we can test whether your DirectX needs to be re-installed, or whether it is solely a Blitz problem.) <br><br></td></tr></table><br>
<a name="324541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> All tests in the DXDiag work OK.<br><br>I have an older game that I wrote in C++ that uses DirectX to play .mid files and that game runs fine (music plays).<br><br>Also, I tried this:<pre class=code>chnCool=PlayMusic("cool.wav")
If chnCool = 0 Then RuntimeError("wav file not loaded")
chnTitle=PlayMusic("Title.mid")
If chnTitle = 0 Then RuntimeError("mid file not loaded")
WaitKey()
End</pre>And the wav file plays but the mid file doesn't (and I get the 'mid file not loaded' message).<br>Both files are in the same directory as the exe.  It's not making sense. <br><br></td></tr></table><br>
<a name="324792"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can a number of you out there please try out that last code segment I wrote?  I would like to know if it's really just my machine or if it affects all/some others. <br><br></td></tr></table><br>
<a name="324839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's working fine here...<br><br>Could you run Regedit (Start Menu -&gt; Run -&gt; regedit) and see what is in this key:<br><br><div class="quote"> <br>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Multimedia\MIDIMap<br> <br></div><br><br>... in particular, what's under 'szPname' and 'DeviceInterface'...? <br><br></td></tr></table><br>
<a name="324886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It appears that I don't have that key.  I can go as deep as<br>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion<br>but I have no Multimedia entry under that.<br><br>As my sig says, I have WinXP Pro w/ SP1 Media Center Edition.<br><br>I did find this key<br>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\MIDIMap but it didn't contain either of values you mentioned (it had: Mapping Name = Sound System).<br>Don't know if it does any good.<br><br>I couldn't find either of these ('szPname' and 'DeviceInterface') either (except for references that didn't apply, such as AutoCAD and WindowsCE)<br><br>BTW, thanks for the reply... <br><br></td></tr></table><br>
<a name="324953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, how about this one? Anything listed under there?<br><br>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\MediaProperties\PrivateProperties\Midi\Ports<br><br>How about Control Panel -&gt; Sounds and Audio Devices -&gt; Audio -&gt; MIDI Music Playback -&gt; Default Device? What's the selected device, and are there any others you can select and try again with? <br><br></td></tr></table><br>
<a name="324995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is what's listed in the control panel:<br>Microsoft GS Wavetable SW Synth<br><br>There are no others listed.<br><br>Under that key you mentioned there are two other keys with additional keys:<pre class=code>
+Microsoft GS Wavetable SW Synth [Emulated]
 +Out
   DMPortGUID = 6c 5a 46 99 90 39 72 42 ac b3 61 c6 6d 9d 0a ff

+Microsoft MIDI Mapper [Emulated]
 +Out
   DMPortGUID = 05 0e a0 b3 1f c0 0d 4a 8b 7e ca 79 1a 40 bd d7
</pre><br><br>Does any of it mean anything to you? <br><br></td></tr></table><br>
<a name="325026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Does any of it mean anything to you?<br> <br></div><br>Not really. I wondered if maybe Blitz was incompatible with the basic Microsoft MIDI Synth, but I switched to that here and it played fine... so I've really no idea what's up! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
