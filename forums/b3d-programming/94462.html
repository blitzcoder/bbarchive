<!DOCTYPE html><html lang="en" ><head ><title >Any way to access DX blending modes &amp; z-buffer?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Any way to access DX blending modes &amp; z-buffer?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Any way to access DX blending modes &amp; z-buffer?</a><br><br>
<a name="1083712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Roland</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm wondering if there is any way to access the directx rendering options to control blending modes, zfunc comparisons (for writing to the zbuffer) and subsequently if it's possible to have an object only write to the zbuffer rather than to the screen.  <br><br>Anyone ever work on anything like that here?  The end result I'm looking for is to be able to have an object mask another object by having its zfunc comparison set to less-equal, and have it only write to the zbuffer, so that it doesn't show up on screen.  Clear as mud, I'm sure.  I'm certain that this is possible in other environments, but I can't get it to work with Blitz's native commands so far (entityorder, entityfx, etc.)  <br><br>thanks,<br>roland <br><br></td></tr></table><br>
<a name="1083720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> z-buffer manipulation in B3D is notoriously difficult, theres a couple of dlls that supposedly give such features but last time I checked they were long ago abandoned by their developers and gave unpredictable results with modern PCs/OS.<br><br>The excellent FastExt library gives quite a bit of access to DX blend modes and some other advanced rendering options that might be of use to you however. <br><br></td></tr></table><br>
<a name="1083727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MCP</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Multi-pass rendering trickery might produce the results that you're after and is quite possible in Blitz3D.  Have a look at this code archives example I knocked up a few years ago...<br><br><a href="/codearcs.php?code=1770" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1770</a><br><br>It might give you an idea how to achieve the effect your looking for. <br><br></td></tr></table><br>
<a name="1083729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's hard to hack RenderStates into B3D because once you call RenderWorld() it sets up its own states (and might overwrite the ones you changed).<br><br>There's the <a href="/b3ddocs/command.php?name=CameraClsMode&amp;ref=3d_cat" target="_blank">CameraCLSMode</a> function which would at least allow you to preserve the Z-Buffer when rendering your mask objects so the next ones would be discarded.<br><br>Also, since you're using Blitz3D seriously, you might find these things useful:<br>- <a href="http://blitzmirror.ueuo.com/" target="_blank">BlitzMirror</a><br>- <a href="http://www.4shared.com/file/NkzdXwhK/DX7-Libs_for_Blitz3D.html" target="_blank">DX7-Libs_for_Blitz3D.zip</a><br>- <a href="http://stuff.dev-ch.de/index.php?loc=14" target="_blank">Devil's Child's Stuff</a> <br><br></td></tr></table><br>
<a name="1083734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Roland</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey guys,<br><br>some great stuff here.  The FastExt &amp; FastImage libraries might work -- there's a very minimally documented function in FastImage that looks like it might expose control of renderstates. (SetCustomState%).  Anyone have any experience with this?  I'd need to be able to use the ZBufferWriteEnable and ZFunc renderstates for it to be of any value to me  :  <a href="http://www.toymaker.info/Games/html/render_states.html" target="_blank">http://www.toymaker.info/Games/html/render_states.html</a><br><br>MCP -- you're absolutely right -- multipass rendering works (and I did test it out as an option), but it's unfortunately too slow for this use case.  I'd need a minimum of 6 rendering passes, and unlike a blur effect, this masking effect needs to be very crisp.<br><br>Thanks for the help guys.  The B3d community never ceases to amaze.  I'm becoming convinced we're still going to be coding in B3d (and loving it) when the rest of the world is using the holodeck.  After 2 years of coding for the wii, coming back to blitz is like going back home for the holidays. <br><br></td></tr></table><br>
<a name="1083737"></a>

<a name="1083738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The z-buffer stuff should be in the DX7 dlls Kryzon linked to, I seem to remember dx7sshad.dll providing these functions in a shadow demo but I can't remember where that came from.<br><br>Word of warning with regards to the devils shadow system - in some cases it breaks multi texturing and if your working on a commercial program I believe you potentially may have some legal issues as some of the techniques used overlap with patents held by Creative Labs.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1083742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Roland</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Rroff, you're right -- the zbuffer, zfunc, zwriteenabled, etc., are all in the dx7 lib.  But I guess I don't know how to take advantage of them in blitz.  Seems like you'd need to write directly to the buffers after changing those settings (like fastimage does), right?  <br><br>What I'd love would be a way to have those settings affect a blitz3d material / entity, within the context of the regular RenderWorld calls.  Is that possible? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
