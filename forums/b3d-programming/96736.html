<!DOCTYPE html><html lang="en" ><head ><title >Vector problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vector problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Vector problem</a><br><br>
<a name="1120277"></a>

<a name="1120278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stollentroll</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there and a Happy New Year!<br><br>Currently I am having the following problem:<br><br>I'd like to have light beam that "travels" through a 2D space until it hits a wall, then it bounces off. (Angle of incident equals angle of relection.)<br><br>The basic concept is easy. <br>I have a velocity vector with "X" and "Y". I add these values to the current x and y value of the light beam.<br>When the beam hits the wall I just multiply the according velocity vector with "-1" and just keep the other one.<br><br>(See example code below for clarification.)<br><br>This works nice and easy.<br><br>Now the question comes up: Right now my "borders" are orthogonal. (Like a billiard table viewed from above.) But what if these "reflection walls" are tilted by any degree?<br><br>How do I now calculate the correct vector after the "bouncing"?<br><br>Do I need vectors or will I have revert to triangle calculation? Mirroring a vector? Rotating the vector? Sin, Cos, ..... ?<br><br>I am absolutely cluelss what the smartest approach would be.<br><br>If anyone could come up with a suggestion that would be great. What kind of math is required to solve this problem?<br><br>The light does not have to slow down, there is no gravity, just 2D space. The collision between the light beam and the "tilted mirror" is not of importance now. The question is only how to calculate the correct reflection angle.<br><br>Thanks a lot!<br><br>Stollentroll<br><br><br><br><br>----------- EXAMPLE CODE ---------------<br><pre class=code>
beam_x = 50
beam_y = 50
velocity_x = 5
velocity_y = 2
WHILE NOT KEYHIT(1)
  beam_x = beam_x + velocity_x
  beam_y = beam_y + velocity_y
  IF (beam_x &gt; 320) OR (beam_x &lt; 10) then velocity_x = velocity_x * -1
  IF (beam_y &gt; 400) OR (beam_y &lt; 10) then velocity_y = velocity_y * -1
  PLOT beam_x, beam_y
WEND
</pre><br>-----------------------------------------<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Stollentroll, happy new year and welcome back.<br>I don't mean this in a rude way, but there's plenty of material to be found in Google. <br><br>In fact, it happened to find these entries that are totally related to Blitz:<br><a href="/posts.php?topic=53464" target="_blank">How to Mirror/Reflect a vector against another Vec</a> (BlitzMax)<br><a href="/posts.php?topic=52511" target="_blank">Reflecting a 2d vector by a 2d normal?</a> (BlitzMax)<br><br>The code should be easily ported to Blitz3D. Best of luck! <br><br></td></tr></table><br>
<a name="1120409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stollentroll</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Kryzon,<br><br>you're not rude and I really would love to use Google to find the according math formula.<br>But I simply did not know what kind of math I had to look into. I wasn't sure whether vectors are really the way to go. Or if I had to use some triangle calculation.<br><br>So, thank you for your reply. Vectors seem to be the solution. <br><br>And I will take a look at the two links you posted. They will surely help me to solve my problem.<br><br>Cheers,<br><br>Stollentroll <br><br></td></tr></table><br>
<a name="1120425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm still loitering, in case you need more help. <br><br></td></tr></table><br>
<a name="1120461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Stollentroll: I'm thinking the vectors used in those links don't have an "origin" - i.e: they only have an end point; the origin is assumed to be [0,0].<br>This kind of vector would be your beam's speed vector, which you can find with this:<br><pre class=code>
Beam\SpeedX = Beam\Speed * Cos(Beam\Angle)
Beam\SpeedY = Beam\Speed * Sin(Beam\Angle)
</pre>The SpeedX and SpeedY members are what you should input to that function - this speed vector is considered to be starting from a [0,0] origin.<br>Since you also need the walls' normals, you can use the above but with your walls' angles, and with any "speed" value since the size of this normal doesn't matter (use 1.0 if you will).<br><br>@Warpy: Hi. If you wouldn't mind, could you please explain how your function works?<br><pre class=code>
method reflectVector(vectx#,vecty#,normx#,normy#)
	dotprod#=-vectx*normx-vecty*normy
	relx=vectx+2*normx*dotprod
	rely=vecty+2*normy*dotprod
end method
</pre>I'm having a hard time understanding how it mirrors the vector - more specifically, what that dot-product is responsible for. <br><br></td></tr></table><br>
<a name="1120462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warpy</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Split the velocity into two components - the part heading directly into the wall and the part heading along the wall. When something bounces, the part heading into the wall points in the opposite direction, and the part heading along the wall isn't changed.<br><br>The dot product is a measure of how much the vector is pointing directly into the wall. The normal vector (normx,normy) is at right angles to the wall, pointing outwards. If you multiply the normal vector by the dot product you get a vector representing the component of the velocity heading into the wall. If you add 2 times that vector to the velocity, you get the velocity after the ball has bounced. <br><br></td></tr></table><br>
<a name="1120465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweet. Thanks a lot! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
