<!DOCTYPE html><html lang="en" ><head ><title >Centre point of mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Centre point of mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Centre point of mesh</a><br><br>
<a name="280024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>How can I set the pivot point of a mesh to exactly the center of the mesh? <br><br>Jeroen <br><br></td></tr></table><br>
<a name="280047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
PositionEntity m\block4_pivot, MeshWidth#(m\block4_entity)/2, MeshHeight#(m\block4_entity), MeshDepth#(m\block4_entity)/2
</pre>		<br><br>Doesn't work :(<br>I want to make the entity a child of the pivot.<br><br>Plz help :) <br><br></td></tr></table><br>
<a name="280267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to change the center of a mesh you need to first choose the point which you want to be the center relative to the current center of the mesh, and then move all the vertcies in the mesh.<br><br>this is hard to explain though.<br><br>Okay...<br><br>Inside your mesh it has it's own "space".  Each vertex is at a position in mesh space.  These positions are the same no matter how you orient the mesh in the world.<br><br>So, you need to define the center point in this mesh space.  Once you have done that you can figure out how much to offset all the vertices.<br><br>But finding this point in mesh space can be hard for you.<br><br>Here's an easy way to do it.<br><br>Leave your mesh at 0,0,0 in the world, with no rotation when you load it.<br><br>FInd the point in world cooridnates where you want the center point to be in the mesh.<br><br>This point will be Px# Py# Pz#.<br><br>Then do this, where Mesh is the pointer to your mesh.<br><br>TFormPoint Px#, Py#, Pz#, 0, Mesh<br>Px# = TFormedX()<br>Py# = TFormedY()<br>Pz# = TFormedZ()<br><br>You now have transformed the point from world space to mesh space.<br><br>Now the center of your mesh is always at 0,0,0 in mesh space.  So, Pxyz is going to be a point around this somewhere.  <br><br>Let's pretend Px=1, and Py and Pz = 0.<br><br>That means that the new center point you want is one unit (in mesh space) to the right of the current center location.<br><br>So what you need to do is move all the vertices one unit to the LEFT to move 0,0,0 over to 1,0,0.<br><br>So all you do now is loop through every vertex in the mesh, and move it from it's current position, to it's current position MINUS Pxyz.<br><br>In other words:<br><br>Loop through each vertex<br>For this vertex<br>Set it's position to VertexX#()-Px#, VertexY#()-Py#, VertexZ#()-Pz#<br><br>And voila, you now have a new mesh center. <br><br></td></tr></table><br>
<a name="280268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh and the center point is the average location of all vertices.  So add all the Vx#'s and divide by rhe number of vertices.  Same for Vy and Vz.  The result is your center position in MESH space.  That allows you to skip the whole global space transformation I told you about and skip right to subtracting Pxyz from the vertex positions.<br><br>And if you want to use a pivot instead you can make a pivot and then go EntityParent Entity, Pivot  or maybe the other way around I forget. <br><br></td></tr></table><br>
<a name="280426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, don't you get the center point by adding the smallest and largest value of each axis and divide by 2?<br>MidPointX = (SmallestX + LargestX) / 2<br>MidPointY = (SmallestY + LargestY) / 2<br>MidPointZ = (SmallestZ + LargestZ) / 2<br><br>If you sum all Vx#'s you get the mean value.<br><br>Consider a 2D triangle.<br><br>Topvertex Y = 0<br>BottomRightvertex Y = 100<br>BottomLeftvertex Y = 100<br><br>The middle should be at Y = 50 , right?<br><br>  But (0 + 100 + 100) / 3 = 66.6666...<br>Instead use this...<br>  (0 + 100)/2 = 50 <br><br></td></tr></table><br>
<a name="280430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> No the middle should not be at Y = 50.<br><br>It's only an approxiomation, but the center which you almost always want in a 3D object is the center of mass, and the locations of the vertices gives you an approximation of that.<br><br>The reason you want the center of mass is because that is the point an object in the real world is most likely to rotate around.<br><br>In your triangle example, the two vertices at 100 Y means that that is where the wide end of the triangle is, and thus the most mass, so the center of mass is closer to them than the other point. <br><br></td></tr></table><br>
<a name="280441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I think we both can agree that it depends on what we are gonna use the centerpoint for.<br>For realistic rotations and physics you'll want the center of mass, but for bounding spheres and such, you don't want the center of mass, but the center of the mesh. <br><br></td></tr></table><br>
<a name="280443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, for bounding regions you want the center of the bounding box which would be calculated with the method you described. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
