<!DOCTYPE html><html lang="en" ><head ><title >Cubic fog</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Cubic fog</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Cubic fog</a><br><br>
<a name="360719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has any one here got a better way of making cubing fog, mine is clumbsy and slow, it has some intelegence, but the result is still slow.<br><br>Has anyone got any ideas? <br><br></td></tr></table><br>
<a name="360721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eole</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go to www.gamedev.net ... ou www.flipcode.com <br><br></td></tr></table><br>
<a name="360760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> um... whats cubic fog :) is that where the fog rises from the ground? or is that volumetric fog? <br><br></td></tr></table><br>
<a name="360765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, yeah, Volumetric, Sorry i wrote this forum at 3am in the morning, half my brains where dribbling out my ears.. <br><br></td></tr></table><br>
<a name="360876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Volumetric fog is easy.<br><br>Make a polygon volume for yuor fog.  For example, a sphere.<br><br>Cast a ray from the camera through each vertex touching a front facing tri.  Determine where that ray hits the back of the volume.<br><br>The distance between the vertex and the point the ray exits the fog is the thickness of the fog.  <br><br>Use an exponential formula to then choose the value to set that vertex's alpha to.  <br><br>For example, <br>Alpha# = (Distance#/FogFar#)^2<br><br>Where FogFar# is the thickness of the fog where alpha reaches 1, and below which where it falls off exponentially.<br><br>In other words, if FogFar# is 2.0 and the fog is 1.0 thick, if the equation were linear alpha would be 0.5, but it's exponential so alpha will be much less than 0.5.<br><br>Exponential is how real fog works.  But you might want linear fog if you don't want your fog volumes to be too big.   <br><br>You can also change the eponentiality of the equation by reducing the exponent.  For example, instead of ^2, you can ^1.5.  That will give you a more linear curve.<br><br>There's functions in the code archives which will tell you if a ray or line segment instersects a polygon.<br><br>Btw you need to update this whenever the camera moves.  So you won't want your fog volume to have too many vertices.<br><br>Another less accurate way you can make a fog volume is by using spherical environment maps.  Just make a map that goes from black in the middle to white at the edges.  Apply this to your fog shape on one surface.  Then on a second surface, apply the inverse of this map, and set the surface to add.  The color of the second surface will be the color of the fog.  The spherical environment map acts as an alpha channel.<br><br>Neither of these methods take into account objects within the fog though.  If you want an object within fog to appear fogged the right amount, if that object is an animated object in Blitz you may be out of luck, unless Blitz's linepicks work properly with animated objects.  Cause you can't do your own linepicks on animated objects.  There's no way to know where the vertcies are as they change during animation.<br><br>Then again, it might still be possible.  It is possile to generate a pseudo zbuffer like map by using regular fog on an entity so that parts of it farther from the camera are darker.  If you can generate that then you might be able to use it as an alpha map to control how much fog the entity recieves on each part.  Of course, it would be a linear change, but that would probably not be too noticeable.<br><br>Of course, it occurs to me that you might be able to get away with simply finding how deep inside the fog volume the entity is realtive to the camera, and then just use a single fog value for it to kinda fake it.  But that would mean if the entity sticks it head up out of the fog it would not be fogged.  You'd change the amount of fog on the entity by giving it a second surface with alpha blending.<br><br>Well, that's enought o get you started.  I guess it's not such an easy effect after all when you don't have access to all the data. :-) <br><br></td></tr></table><br>
<a name="360889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was a great tute on the subject sswift.  You should write a book on blitz with explainations like that.  I for one would buy it. <br><br></td></tr></table><br>
<a name="360916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about writing a book on Blitz, but as far as I know book writers don't make a whole hell of a lot and a book on Blitz isn't likely to sell to many copies, and besides, it's a hell of a lot of work to write a book! :-)  I can't just throw a bunch of anecdotes like this together and call it a book! :-) <br><br></td></tr></table><br>
<a name="360923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> any code? i cant seem to make mine work :(<br><br>i think iv got writers block! <br><br></td></tr></table><br>
<a name="360925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> JFK wrote a vol fog routine, its in the codelibs, damn nice one too.<br><br>PS: or was that GFK.. hell I don't .., I think i'll change my handle to YFK <br><br></td></tr></table><br>
<a name="360928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> wheres the link? <br><br></td></tr></table><br>
<a name="360938"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Isaac P</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> code archives.. its the grass system by JFK, also includes some volumetric fog <br><br></td></tr></table><br>
<a name="360943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ sswift:<br><br> EASY... you call that scientific geek speech you made above easy!!!<br><br>will someone explain to me, in plain english,  exactly what the f##k he just said   :)<br><br><br>actually, that was pretty good... the only thing missing is a few pictures and diagrams... for the slow of mind, like me.<br><br>i'm copying it now before you get the idea to put it in your book and start charging for it  :)<br><br>this'll come in handy...  THANKS...<br><br>--Mike <br><br></td></tr></table><br>
<a name="360945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sswift explodes an array of thoughts :D <br><br></td></tr></table><br>
<a name="360952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JAW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift: Well a book would probably be too much work, but how about a nice simple website with tutorials, equations, and reference material? You posted a big list of helpful equation stuff you've collected once. I've got it saved in a txt file.   Type that up nice and organize it, throw a few tuts together from stuff you've already written, and there you go :) I have yet to find a really good site with useful general programming/game programming reference material. I thought of putting one up myself a few times.. <br><br></td></tr></table><br>
<a name="360960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Type that up nice and organize it, throw a few tuts together from stuff you've already written, and there you go :)"<br><br>Yeah but nobody pays for access to websites. :-)  And it's not like there aren't OTHER websites where you can get said information for free.<br><br>If I wrote a book on Blitz, it'd be more like "How to write a first person shooter in Blitz 3D." or "How to write a racing game in Blitz 3d".  It'd include all the basic physics and graphics stuff you need to know to make such a game.  But not volumetric fog. :-) <br><br></td></tr></table><br>
<a name="360974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... do the book thing<br><br>i say that because i just ordered a book on the Torque engine written by one of the guys there...<br><br>just give it the right title... something like GAME DEV Write Your OWN FPS In 7 Days  with Blitz3D...<br><br>... and get the rights to package the demo version on cd... along with a bunch of other tuts...<br><br>... tuts all written in html, and linked to other pages n the cd.<br><br>... and send me my 6% cut for advisory services when the money starts rollin in  :)<br><br>--Mike <br><br></td></tr></table><br>
<a name="361051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I should get a 3% royalty just for saying that I should get a 3% royalty!<br><br>RD/rz <br><br></td></tr></table><br>
<a name="361130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift... codes please, instead of book <br><br></td></tr></table><br>
<a name="361139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Code? Try this:<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=31460" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=31460</a> <br><br></td></tr></table><br>
<a name="361191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't that using particles for fog?  I didn't take a close look at it but I saw something about modifying snow to make fog, and that indicates particles.<br><br>You can certainly use particles for fog, but you will get a lot more overdraw, which means less speed.  And it won't look as convincing as real volumetric fog... the fog won't be of uniform density.<br><br>Maybe I should make a fog system. :-)  But I'm working on something much cooler right now.  And like I said I'm not sure you can do animated entities in fog well in Blitz. <br><br></td></tr></table><br>
<a name="361193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift, your a gem! your fog system will be better than mine, prolly more efficient too!! <br><br></td></tr></table><br>
<a name="361213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Isn't that using particles for fog? I didn't take a close look at it but I saw something about modifying snow to make fog, and that indicates particles. <br><br>You can certainly use particles for fog, but you will get a lot more overdraw, which means less speed. And it won't look as convincing as real volumetric fog... the fog won't be of uniform density. <br></div><br><br>Yup, it uses particles, but looks darn nice... it probably gets a big speed hit when used in real complex game enviroment and might not cool that cool either because of the particle clipping etc... but this demo is nice.<br><br>True HW fog has all kind of limitations like that it don't work at all with alpha... and what you have described in this thread is just really complicated.<br><br>IMO there is no way to use any volumetric (or regular) HW fog in our games unless Blitz evolves or something... <br><br></td></tr></table><br>
<a name="361228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> bumber :( i guess that answers that one then, <br>Cheers guys anyway <br><br></td></tr></table><br>
<a name="363151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> HW fog doesn't work with alpha?  What makes you say that?  I've never heard any such thing, and I'd swear I've seen screenshots with it in use, and I thought I used it in my own 100,000 tree demo a long time ago. <br><br></td></tr></table><br>
<a name="363276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> HW fog doesn't work with alpha? What makes you say that? <br></div><br><br>Experience? :) Anyways, I had alpha-ed tracks on my tank (demo below) and when I enabled fog, tracks didn't get fogged. BF1842 has this same problem too, when the trees switch to bollboard mode they use alpha and don't get fogged. "Altpha test" can be fogged IMO easily though... my demo was made with old Blitz3D so I don't know if it's been "fixed" now.<br><br>[edit]<br><br>Yup - fixed now... if you change the lines:<br><br><pre class=code>	Tank_L_Tracks = LoadTexture ( "obj\TankJagdpantherTrack.jpg")
	Tank_R_Tracks = LoadTexture ( "obj\TankJagdpantherTrack.jpg")
</pre><br>to:<br><br><pre class=code>	Tank_L_Tracks = LoadTexture ( "obj\TankJagdpantherTrack.tga",2)
	Tank_R_Tracks = LoadTexture ( "obj\TankJagdpantherTrack.tga",2)
</pre><br>and uncomment the fog lines in the end, you'll see that the alpha in the tracks works now. But multiplicative "shadows" don't... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
