<!DOCTYPE html><html lang="en" ><head ><title >Raycasting Math Help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Raycasting Math Help</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Raycasting Math Help</a><br><br>
<a name="1135806"></a>

<a name="1135848"></a>

<a name="1135849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a raycaster for rendering a voxel dataset. I have already decided on how I'm going to project the rays: I will create a vector out of a pixel on the viewing plane relative to the viewer. Then, I'll normalize the vector and use that vector as the ray's step size. The only thing that I need help with is all the confusing math required to rotate the viewing plane about the viewer. It seems the only way I can find so far involves a projection matrix, which is rather hard for me to grasp at this point. If anyone can show me a way of rotating the viewing plane about the viewer, I would greatly appreciate it. And, I am specifically looking for a way to rotate the viewing plane, as apposed to the dataset because it's faster to transform 640*480 points as opposed to 1024*64*1024 or however many voxels I'll end up with. All help appreciated!!<br><br><br>P.S. I'm not interested in people trying to tell me I shouldn't be writing a software renderer. I'm aware B3D can be a little slow. :)<br><br><font class="tiny">Last edited 2012</font><br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1135814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> the only way I can find so far involves a projection matrix <br></div><br><br>You're not going to like this answer, but you basically need to learn how to manipulate matrices if you want to do anything serious in 3D, such as this task.<br><br>Roll/Pitch/Yaw simply don't provide the necessary information, consistency, or speed for this kind of work, which is why nobody uses them (which in turn will be why there are no examples). Take note that internally Blitz3D doesn't use them either. <br><br></td></tr></table><br>
<a name="1135815"></a>

<a name="1135816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You're not going to like this answer <br></div><br><br>I kind of expected this answer, and frankly, I'm fine with it. I really shouldn't beat around the bush. I really need to learn this kind of stuff anyway if I want to make any useful progress.<br><br>I did read up on matrices all day today, trying to understand them. I know how to add, subtract, and multiply matrices, and it seems that's all I need to know how to do. Also, I (think) I understand the "homogeneous coordinates". (I guess it could be described as a vector, and <i>w</i> is the magnitude?) And that's where it I sort of lose track of what's going on. Can you supply an example of a function that rotates a point around the origin using a transformation matrix? I would like to understand this. (Copy-Pasting code is like scratching nails on a chalkboard to me XD -- I have to re-write it myself and <i>know</i> how every aspect of my code works to be happy)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1135833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a particular interest in this thread too. For the moment, my 3D work is comprised almost exclusively of using 3D hardware rendering to display 2D imagery, but that won't hold me forever; I know absolutely NOTHING about matrices. Most of the first half of ClayPigeon's post was gibberish to me, so I think it's time I expanded my horizons. <br><br></td></tr></table><br>
<a name="1136207"></a>

<a name="1136209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if I get this right at all, but as far as I remember there were no matrices involved when I wrote those old Raycasters, for something like a 2.5D Wolfenstein-like maze in QB. With Atan2, Sin and Cos I was able to get the X and Z Stepsize. Sorry if I completely missed the point.<br><br>(there may be a sample or two in the archives)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1136250"></a>

<a name="1136251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry my comment about 3D requiring matrices was assuming full 3D... as jfk says, if you want 2.5D you should be fine with "simpler" maths and yes, there are examples of this in action in the archives (and they're awesome).<br><br>You could probably make a 2.5D renderer <i>more efficient</i> with matrices, but they're not quite as necessary as they are for full 3D rotation (strictly speaking they're not necessary there either, it's just that the maths for using Euler angles becomes unspeakably complex and filled with edge cases).<br><br>Jfk's own examples (man, you're too modest with your own work):<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=579" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=579</a><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=418" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=418</a><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=896" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=896</a> (this one's especially cool)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1136259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ClayPigeon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I figured that would be assumed. No. I do not want 2.5D, but I don't want to call it ray<b>tracing</b> because then everyone will have a seizure and get all "NO RAYTRACINGS ON TEH BLITZ3D!!!!! U CRAZY!?!?!?". I want a fully 3D renderer, and I know how I'm going to optimize it. I'm not having anything insane like multiple bounces and volumetric subsurface scattering. In other words, I'm not going to be simulating the entire universe and everything in it. It'll be pretty fast, just not 2.5D. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
