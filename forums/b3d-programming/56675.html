<!DOCTYPE html><html lang="en" ><head ><title >aligning a entity ot the normal of a collision</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >aligning a entity ot the normal of a collision</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >aligning a entity ot the normal of a collision</a><br><br>
<a name="630069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to make an entity align with the polygon of the walls in my game for a bullet ricochet effect.  I'm guessing I have to use the collision normal and align the mesh to that normal.  Am I close?  Any examples of how to do this? <br><br></td></tr></table><br>
<a name="630100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
pick=LinePick(EntityX(weapon,1),EntityY(weapon,1),EntityZ(weapon,1),TFormedX(),TFormedY(),TFormedZ())
if pick
 setdecal()
endif

Function SetDecal()
	nx#=0
	ny#=0
	nz#=0
	nx=nx+PickedNX()
	ny=ny+PickedNY()
	nz=nz+PickedNZ()
	x#=x#+PickedX()
	y#=y#+PickedY()
	z#=z#+PickedZ()
	s.decal=New decal
	s\ent=CopyEntity(decalsprite)
	s\life#=decal_stay
	RotateSprite s\ent,Rand(360)
	temp#=.05+Rnd#(-.01,.01)
	ScaleSprite s\ent,temp#,temp#
	PositionEntity s\ent,x,y,z
	AlignToVector s\ent,-nx,-ny,-nz,0
	MoveEntity s\ent,0,0,-0.0075
	Return s\ent
End Function
</textarea><br>------------------------------<br>This should do the job. at least it does for me ;) <br><br></td></tr></table><br>
<a name="630106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> A ricochet implies you might want the bullet to bounce off the wall at an angle incident to the angle of impact; a reflection. If so search for bouncing on these forums.  Lots of applicable code. <br><br></td></tr></table><br>
<a name="630139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It shouldn't be too difficult to get the angle of the face it bounced of off, get the normal of the collision, then work out the resultant angle. As DJ says, there should be face normal code in the archives somewhere :o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
