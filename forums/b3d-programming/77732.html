<!DOCTYPE html><html lang="en" ><head ><title >x360 support/config</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >x360 support/config</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >x360 support/config</a><br><br>
<a name="870426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mtnhome3d</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok i'm writing a config prog for my new controllers and i have a problem. the d-pad registers as a hat and i'm using joyhat() to return a number to draw a line with but it wont return the number.<br>heres the code<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 400,300
SetBuffer BackBuffer()
AutoMidHandle True
cont= LoadImage("controller.bmp")
Const left_stick_pos=88,right_stick_pos=124
Const hat_x=160,hat_y=100
Repeat

ju#=JoyU()
judir=JoyUDir()
jv#=JoyV()
jvdir=JoyVDir()
jyaw#=JoyYaw()
jpitch#=JoyPitch()
jroll#=JoyRoll()
jz#=JoyZ()
jx#=JoyX()
jy#=JoyY()
jxdir#=JoyXDir()
jydir#=JoyYDir()
jzdir#=JoyZDir()
jhat=JoyHat()
button=GetJoy()

DrawImage cont,200,100

 If button &lt;&gt; 0 Then
  Select button
   Case button=1
    Text 0,214, "you hit the A button"
   Case button=2
    Text 0,214,"you hit the B button"
  End Select
 End If
;left stick
If jydir#&lt;&gt;0 Or jxdir#&lt;&gt;0
 Color 255,0,0
 Line 145,left_stick_pos,jx#*200,jy#*200
 Text 0,214,jy#+"   "+jx#
End If
;right stick
If jyaw#&lt;&gt;0 Or jpitch#&lt;&gt;0 
 Color 255,0,0
 Line 230,right_stick_pos,jpitch#*100,jyaw#*100
 Text 0,234,jyaw#+"   "+jpitch#
End If
;Z-triggers
If jzdir#&lt;&gt;0 
 Color 0,0,255
 Line 200,30,200+(-jz#*100),30
 Text 0,254,jz#
End If
;joyhat stuff
 Select jhat
  Case jhat=0
   Color 255,0,0
   Line hat_x,hat_y,hat_x,hat_y-50
   Text 0,274,jhat
   Delay 100
 End Select


Flip
Delay 100
Color 255,255,255
Cls
Forever
</textarea><br>and you will need to save both the code and this picture properly if you want to see the cool graphics the way there supposed to be. you need to save it as a bmp named controller.bmp<br><img src="http://www.microsoft.com/hardware/gaming/images/signature/gm_xboxc_otherview_1.jpg"> <br><br></td></tr></table><br>
<a name="870532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mtnhome3d</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> anyone? <br><br></td></tr></table><br>
<a name="870579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The XBox 360 pad only runs with XInput, not fully DirectInput ... you sadly decided for the wrong pad to work with DX7 - DX9c 07 (the same as owners of other pads have problems with XInput oriented games in most cases) <br><br></td></tr></table><br>
<a name="870599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mark Tiffany</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this the same problem as Mr John Pickford is experiencing?<br><br><a href="http://www.blitzmax.com/Community/posts.php?topic=77723" target="_blank">http://www.blitzmax.com/Community/posts.php?topic=77723</a> <br><br></td></tr></table><br>
<a name="870612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this post related ?<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=71496" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=71496</a><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=69681" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=69681</a> <br><br></td></tr></table><br>
<a name="870644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mtnhome3d</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, d-pad isn't totally nesecary but i have ran the joyhat() example and it returns a degree e.g. 180,90,45 so i don't know why my line command isn't working. <br><br></td></tr></table><br>
<a name="870827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> try case jhat=0 -&gt; case 0 <br><br></td></tr></table><br>
<a name="873120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not wishing to rain on anyones parade...<br><br>May I recommend getting the Joytech rumblepad 2 - and use Pepsi's dll and library - you won't go far wrong and I think rumble is supported too?<br><br>It has a complete library of commands which works beautifully.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="873290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to correct some mis-information,...the 360 pad is awesome, I've had no issues with it. The only thing you don't have access to in DX7 is the rumble features.<br><br>The hat on mine is returning -1 in the neutral position, and 0,45,90,... around the different positions. <br><br>your current code only checks if joyhat = 0 (up)<br><br>edit: removed sample joyhat() code,... see example in next post below.<br><br><br>Also, you may want to consider doing a setup similar to this:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1592" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1592</a><br><br>That only uses the analog sticks and triggers, but this method allows you to map *any* controller for your game, instead of having to hard code each controller. It would not be too hard to expand the buttons and hat into this as well. <br><br></td></tr></table><br>
<a name="873425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> your line command is not working because your code doesn't have any thing to do.<br><br>currently you are only checking if jhat=0 which would be the up position. none of the other angles are being checked for.<br><br>edit: here is a code sample that does what you need.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">



Graphics 400,300,0,2
SetBuffer BackBuffer()

hat_posX= 200
hat_posY= 150
length = 20

While Not KeyHit(1)

	hatvalue = JoyHat()

	If Hatvalue &gt; -1
		Line hat_posX,hat_posY,hat_posX + (Sin(hatvalue) * length),hat_posy - (Cos(hatvalue) * length)

		;these convert the x/y  hat values into -1,0,or 1 (there is probably a better way to do this)

		Text 50,30,"Joyhat() X: " + Int(Sin(hatvalue))
		Text 50,45,"Joyhat() Y: " + Int(Cos(hatvalue))
	
		; X values: right = 1 left = -1
		; Y values: up = 1 down = -1
		
	EndIf

	Text 50,10,"Joyhat() value : " + hatvalue

	Flip
	Cls
Wend 


</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
