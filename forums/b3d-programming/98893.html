<!DOCTYPE html><html lang="en" ><head ><title >SeekFile help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SeekFile help</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >SeekFile help</a><br><br>
<a name="1158535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello ltengo a concern regarding this command. In support tells me about a formula to calculate the offset into the file I want to see, eg if I have three numbers with this command I set it on 4 and I would read the second integer file.<br><br>Now the roll is that I can not understand what the Formual calculated and not how to implement it.<br><br>Another issue is that only whole numbers.? <br><br></td></tr></table><br>
<a name="1158537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have no idea what you're talking about, first of all.<br><br>On the assumption that you have three integers (four bytes each), then the first integer occupies bytes 0-3, the second occupies bytes 4-7, and the third, 8-11.  So simply multiplying 'n' by 4 would give you the file offset to read the integer from.<br><br><div class="quote"> Another issue is that only whole numbers.? <br></div>only whole numbers... what?  I don't understand. <br><br></td></tr></table><br>
<a name="1158541"></a>

<a name="1158542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you have to seek to byte locations<br><br>byte =    1 position<br>integer = 4 bytes<br>float =   4 bytes<br>string =  4 byte integer header showing length + byte per char<br><br><br>You can google longs and all that, for blitz3D though i think the above is all you need.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1158557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the file, that you have a "self made" file, which you created with WriteFile() or OpenFile()?<br><br>Or is it a file, that comes from a other software?<br><br>In the Menu "Help" of Blitz-3D you will find the command SeekFile() and a nice example, which you could study. It says all about writing seeking and reading files.<br><br>If you stored INTEGERs with WriteFile() and WriteInt() commands...<br><pre class=code>FileHandle=WriteFile("test.dat")
     WriteInt FileHandle,123
     WriteInt FileHandle,999
     WriteInt FileHandle,-6
CloseFile FileHandle
</pre><br><br>..., you can later open the file an read it with ReadFile() and ReadInt(). The file cursor will automatically jump to the next correct position:<br><pre class=code>FileHandle=ReadFile("test.dat")
     A=ReadInt(FileHandle)
     B=ReadInt(FileHandle)
     C=ReadInt(FileHandle)
CloseFile FileHandle
Print A + "   " + B + "   " + C
</pre><br><br><br>If you do not need A you can jump over with SeekFile():<br><pre class=code>FileHandle=ReadFile("test.dat")
     SeekFile FileHandle,4
     B=ReadInt(FileHandle)
     C=ReadInt(FileHandle)
CloseFile FileHandle
Print A + "   " + B + "   " + C
</pre><br>Because a INTEGER is 4 Bytes long you have to jump 4 Bytes in the File<br><br>The value of A is at position 0 in the file<br>The value of B is at position 4 in the file<br>The value of C is at position 8 in the file<br><br><br><br>You can jump to any position in the file, also backwards:<br><pre class=code>FileHandle=ReadFile("test.dat")
     SeekFile FileHandle,8
     C=ReadInt(FileHandle)
     SeekFile FileHandle,0
     A=ReadInt(FileHandle)
CloseFile FileHandle
Print A + "   " + B + "   " + C
</pre><br><br>But be careful, if you jump "between" the INTEGERs you will not get an ERROR, but you will get wrong values:<br><pre class=code>FileHandle=ReadFile("test.dat")
     SeekFile FileHandle,3
     C=ReadInt(FileHandle)
CloseFile FileHandle
Print "wrong C= " + C
</pre> <br><br></td></tr></table><br>
<a name="1158607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://oi49.tinypic.com/2r76b74.jpg"><br><br>Ok, I understand the matter concerning the integers, however this can be used in text strings in files almacenads?.<br><br>What I can not understand exactly is the formula that says and not referred.<br><br>For example a file of integers are 4 bytes long Which is Calculated by:<br><br>The 7th integer is at offset 7 * 4-4 i.e. 24 <br><br></td></tr></table><br>
<a name="1158618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The offset is simply the number of bytes which precede the location you want to access. If you are looking for the 7th integer then you must move past the previous 6 integers and the offset is 6*4 = 24.<br><br>If you want to read text strings then you must know how the strings are stored. The Blitz WriteString command stores an integer ( the number of characters in the string ) followed by the actual text. <br><br>But most text is not stored like this. Instead, a line of text is followed by an end of line marker. This would usually be the two bytes 13 and 10, which mean carriage return and line feed. The Blitz WriteLine command does this.<br><br>There are other possibilities. You need to know how the file was created. <br><br></td></tr></table><br>
<a name="1158638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you means this?<br><br>"The position of the 7th INTEGER is 24, but the file size of course is 28 Byte."<br><br>To your questions about text files: <br>It would help, if you tell us, what you want to do with the text file. Perhaps there is a better way the ReadInt() and FileSeek()<br><br>And it would help if you tell us, where the txt file was created. In which software? Which ending? " Is it *.txt"  or  "*.doc" or ...?<br><br>"Almacenads" es un po espanol? You mean "saved files"? <br><br></td></tr></table><br>
<a name="1158650"></a>

<a name="1158651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Midimaster<br><br>sorry my english is bad, i am use google translator, sorry... Almacenados =  stored <br><br>To find the size of the item, the file is not it, then use FileSise?<br><br>The 7th integer is at offset= FileSize * 4-4 i.e. 24<br><br>Correct??<br><br>The text strings is considered making a database with player names and score esteblecer the maximum and minimum. (Scoring system) and manage the player's name.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1158667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 7 integer offset is ( 7 * 4 )<br>7 integers @ 4 bytes each <br><br></td></tr></table><br>
<a name="1158669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> so... the text file is made by you? It is made by BlitzBasic?<br><br>So you could write it with WriteLine() and read it with ReadLine(). That is easy:<br><br>A line contains the name of the player and his score and other values of the player. The "|" is used as a separator sign:<br><pre class=code>Player A | 1400 | 4 |

Yue | 2345 | 6 |

Midimaster | 45 | 1 |

</pre><br><br><br><b>Add a new player to the file:</b><br><br><br>[bbcode]<br>Function AppendAPlayer( Name$, Score%, Level% )<br>    ;first create a string with the players data:<br>    locString$ = Name + "|" + Score + "|"   + Level + "|"        ; + ...whatever<br><br>    ; then open the file<br>    If FileType("test.dat")=0<br>        locFileSize% = 0<br>        FileHandle% = WriteFile("test.dat")<br>    Else<br>        locFileSize% = FileSize("test.dat")<br>        FileHandle% = OpenFile("test.dat")<br>    Endif  <br><br>        ; now skip to the end and write the data<br>        SeekFile FileHandle, locFileSize<br>        WriteLine FileHandle, locString<br><br>    CloseFile FileHandle<br>End Function<br>[/bbcode]<br><br><br><b>This to find again a player:</b><br><br>[bbcode]<br>Function FindAPlayer( SearchName$ )<br>    ;  open the file<br>    FileHandle% = OpenFile("test.dat")<br><br>        ; search until the end of the file is reached<br>        While Eof(FileHandle)=0<br><br>            ; read one line<br>            locString =ReadLine(FileHandle)<br><br>            ; separate it in single values:<br>            For i%=1 to 3       ; or 4 or 5...depending on the nuber of values<br>                   ; find the position of the separator:<br>                   Separator%=Instr (locString, "|" )<br><br>                   ;cut the left part as the value<br>                   locValue$= Left(locString, Separator-1 )<br>                   Select i<br>                       Case 1<br>                           Name=Value<br>                       Case 2 <br>                          Score=Int(Value)<br>                        Case 3 <br>                          Level=Int(Value)<br>                   End Select<br><br>                   ; if you found the current player close the file:<br>                   If Name = SearchName Then<br>                       CloseFile FileHandle<br>                       Return<br>                   Endif<br><br>                   ; cut the rest for searching again<br>                   locString= Mid(locString, Separator+1, -1 )<br>            Next<br>        Wend<br>    CloseFile FileHandle<br>End Function<br>[/bbcode]<br><br><br><b>Now find all players for a highscore list:</b><br><br>[bbcode]<br>Function GetAllPlayers()<br>    ;  open the file<br>    FileHandle% = OpenFile("test.dat")<br><br>        ; search until the end of the file is reached<br>        While Eof(FileHandle)=0<br><br>            ; read one line<br>            locString =ReadLine(FileHandle)<br><br>            ; separate it in single values:<br>            For i%=1 to 3       ; or 4 or 5...depending on the number of values<br>                   ; find the position of the separator:<br>                   Separator%=Instr (locString, "|" )<br><br>                   ;cut the left part as the value<br>                   locValue$= Left(locString, Separator-1 )<br>                   Select i<br>                       Case 1<br>                           Player.TPlayer = New TPlayer<br>                           Player\Name=Value<br>                       Case 2 <br>                          Player\Score=Int(Value)<br>                        Case 3 <br>                          Player\Level=Int(Value)<br>                   End Select<br><br>                   ; cut the rest for searching again<br>                   locString= Mid(locString, Separator+1, -1 )<br>            Next<br>        Wend<br>    CloseFile FileHandle<br><br>    ; list all Players:<br>    For loc.TPlayer = Each TPlayer<br>           Print loc\Name + " " + loc\Score + " " + loc\Level<br>    Next<br>End Function<br>[/bbcode]<br><br><br><b>Find a existing Player and change his values:</b><br><br>In this case you open the file as for a highscorelist (see above). Then search for the player, change his values and save all players:<br><br>[bbcode]<br>Function ChangeAPlayer( SearchName$ ,Score%, Level%)<br>    GetAllPlayers()<br><br>    ; search the Players:<br>    For loc.TPlayer = Each TPlayer<br>           If loc\Name = SearchName<br>               Found =TRUE<br>               ; change his values:<br>               loc\Score = Score<br>               loc\Level = Level<br>    Next<br>   <br>    If Found=FALSE<br>          ;it is a new player:<br>          AppendAPlayer(Name,Score,Level)<br>          Return<br>    Endif<br><br>    ; player was found, so save all datas:<br><br>    FileHandle% = WriteFile("test.dat")<br><br>        For loc.TPlayer = Each TPlayer<br>            ;create a string with the players data:<br>            locString$ = Player\Name + "|" + Player\Score + "|"   + Player\Level + "|"        ; + ...whatever<br>        WriteLine FileHandle, locString<br>        Next<br><br>    CloseFile FileHandle    <br>End Function<br>[/bbcode] <br><br></td></tr></table><br>
<a name="1158676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) Ho! Thanks you Midimaster <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
