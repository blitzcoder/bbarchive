<!DOCTYPE html><html lang="en" ><head ><title >instant replays</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >instant replays</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >instant replays</a><br><br>
<a name="1139255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zeek</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way to code replays. I would like to be able to play back the all the action that took place in the last 10 seconds or so in a game. <br><br></td></tr></table><br>
<a name="1139266"></a>

<a name="1139268"></a>

<a name="1139269"></a>

<a name="1139270"></a>

<a name="1139271"></a>

<a name="1139272"></a>

<a name="1139273"></a>

<a name="1139274"></a>

<a name="1139275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes there is.<br><br>- If you want to make rendered replays (recording what the camera sees), it's very easy. Just keep storing the last 10 seconds of backbuffer rendered images and then replay this footage - you limit your viewable angles to as many cameras as you record, and you won't be able to change replay speed up\down or zoom in\out.<br><br>- If you want real-time replays (like most games do it), which allow you to zoom in\out, play at different speeds and any camera angle you want, you'll have to record game state. <br>There are several ways to do this, and the most optimized ones are incredibly difficult (using only actions and recalculating states based on time, with physics and interpolation).<br><br>So I suggest you simply store the last 10 seconds of game state as data: <br><br>- Transformation data: position, rotation and scale.<br>- Animation data: sequence and animation time.<br>- Brush data: FXs, alpha and shininess (ignore the ones you won't use.)<br>- Texture data: position, rotation and scale.<br><br>The above is the typical amount of properties you need to record for every object in the scene - every particle, every sprite, character etc. - at every game frame.<br>It's almost like recording an animation, except that the game engine would still be calculating collisions and other game events <b>as if they were new</b> (this saves you having to record them as well).<br><br>You can use Banks for this, to keep data size small - Banks allow you to use Byte and Short data types for data you know will always be small (such as animation sequence index and animation time), instead of using costly Int arrays.<br><br>If you're worried about memory usage, it's the amount of objects in the scene that influence it, since the replay size is fixed. <br>Each time you record more than 10 seconds, just free\overwrite the memory used by the oldest frames.<br><br>This method is still difficult, so start small and work your way up.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1139304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> My try at this :<br><br>Here :<br><a href="http://blitzbasic.com/codearcs/codearcs.php?code=2944" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=2944</a><br><br>A really simple example, only the X,Y,Z and Pitch,Yaw,Roll are recorded/played. <br><br></td></tr></table><br>
<a name="1139729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both the above techniques are valid, and ultimately decidfe whether you wish to:<br><br>1) Record the actual screen display (GraphicsWidth * GraphicsHeight * 4 Bytes per Frame)<br>2) Record the transformations and states of gameplay objects (#Objects * #States * n Bytes)<br><br>The deciding factors are the speed of recording, wher this may slowdown the standard gameplay by too much, and the memory used in doing so.<br>These arte quivalently similar, since the speed will be dependant on the memory space too.<br><br>How your game engine is structured can help a lot too. If, for example, certain objects follow defined patterns, react to other circumstances, or follow pathfinding routines, then perhaps only their initial states may be required, since the paths may be calculated bythe engine itself as in standard gameplay. This means that a greatly reduced number of objects that require to be recorded (i.e. maybe even just the player object) <br><br></td></tr></table><br>
<a name="1139812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I prefer to use a method of recording entity parameters (x/y/z etc) than recording the screen picture since that way you can (in 3d) view the replay from different angles. If you just record screen grabs then you cannot view the action from different angles... <br><br></td></tr></table><br>
<a name="1139952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >zeek</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot everyone for your suggestions and quick response. I was really leaning towards real time replays where you can zoom in and out, and play from any camera angle. I will experiment with most of your suggestions, and thanks again. <br><br></td></tr></table><br>
<a name="1139967"></a>

<a name="1139968"></a>

<a name="1139969"></a>

<a name="1139970"></a>

<a name="1139971"></a>

<a name="1139972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding what I said about collisions. I changed my mind.<br><br>Since transformation data and animation data will already be recorded, collisions will be there implicitly, recorded as movement\absence of movement - there is <b>no need</b> to keep collisions still active when the replay is showing. Nothing will change visually for the player anyway.<br>If you keep collisions active, the floating point precision of the transformation data you record will make room for innacuracies that can even change the outcome of the recorded match (i.e: a near miss can become a hit in a fighting game).<br><br>This last point brings to attention that you will need to record important game events such as <b>hits</b> (if we're talking about a fighting game, for instance), so you have absolute precision when reproducing these events.<br><br>In short:<br>- When playing the replay, turn off collisions. They were already registered with transformations, and if kept active they can influence the outcome.<br>- Record important game events such as hits (for fighting games), kicks and passes etc. (for soccer games) and others such that the outcome of the replay is secured to be the same as that of the actual match.<br>- Record who's the victor; don't use replay data to reprocess this.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1140054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> d. post.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
