<!DOCTYPE html><html lang="en" ><head ><title >Feature request: Low-level functions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Feature request: Low-level functions</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Feature request: Low-level functions</a><br><br>
<a name="464671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like to request functions to get the handles of vertex and index buffers of surfaces.<br><br>I assume that whenever AddVertex and AddTriangle are called, these buffers are locked and unlocked.  By giving users access to these buffers, we can signifigantly cut down on the amount of calls to these methods per modification of surface.<br><br>I can't say how much this would increase speed, but it would likely be faster than locking and unlocking them 3,000 times per frame.<br><br>Basically, give people these functions:<br><br>LockVertexBuffer(Surface)<br>UnlockVertexBuffer(Surface)<br>LockVertexBuffer(Surface)<br>UnlockVertexBuffer(Surface)<br>GetVertexBufferGraphicsStream(Surface)<br>GetIndexBufferGraphicsStream(Surface)<br>SetVertexCount(Surface,Count)<br>SetTriangleCount(Surface,Count)<br><br>Then we could use the IO functions on the streams to read and write data to these buffers.<br><br>I don't know how plausible this sounds to you, but I think it's completely doable. <br><br></td></tr></table><br>
<a name="464733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I assume that whenever AddVertex and AddTriangle are called, these buffers are locked and unlocked.<br> <br></div><br><br>Why do you assume that, as opposed to it only happening once per frame, if a surface has been modified? <br><br></td></tr></table><br>
<a name="464771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If someone like Tom is hacking the surface structure like he did with Textures, then it could eventually be possible ... but I think only "lowlevel" cracks like him know the answer. <br><br></td></tr></table><br>
<a name="464778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> These functions would be very useful if they speed up the changing of vertex &amp; colour in a surface.<br><br>I currently have 2048 quads in a surface used as 2D particles. (3D quads allow alpha). If I change one of these vertex then I get an immediate 2ms hit, going up to 2.5ms when changing all the vertex.<br><br>There must be something going on as they are plotted in 0.1 to 0.2ms.<br><br>Please somebody speed up altering of vertex in surfaces.<br>Marg <br><br></td></tr></table><br>
<a name="464785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is a simple prove that the lock is only at the start ...<br><br>and the rest is more or less just hardware restriction.<br>But I think the mainproblem is the way the meshes are saved ... from OGL I know that there are different types of mesh buffers so I assume that DX has them as well. And as Blitz3D is focused on outdated hardware it might be that the used buffertype is the slowest and not the most optimal. <br><br></td></tr></table><br>
<a name="464889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why do you assume that, as opposed to it only happening once per frame, if a surface has been modified? <br></div><br><br>Because modifying one vertex in contrast to modifying lots of vertices in my shader system shows a signifigant difference in speed.<br><br>In any case, if the buffers aren't locked and unlocked per modification, then the handles to these streams would still be useful for other purposes (e.g., passing them to external DLLs, software vertex shaders, etc.). <br><br></td></tr></table><br>
<a name="465264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bump. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
