<!DOCTYPE html><html lang="en" ><head ><title >Division by zero</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Division by zero</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Division by zero</a><br><br>
<a name="821236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have several places in my current code (when scaling etc.) where it's possible a division by zero could occur.<br><br>Now, Blitz3D throws a division by zero error when using a constant zero (a# = b# / 0.0), but when using a variable as the divisor, B3D seems to handle the situation by returning a value of 'Infinity', and not ending the program with an error.<br><br>Is this situation guaranteed when dividing using a variable, or could my program still fail at some point with a division by zero error?<br><br>Also, the resultant 'Infinity' value is approximately equivalent to zero, right? I mean, if I scale an entity with it, it becomes invisible.<br><br>Anyone set my mind at rest on this as I'd prefer to not have to check for division by zero in-code. :)<br><br>Thanks. <br><br></td></tr></table><br>
<a name="821238"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always multiply instead of dividing... So if you want to make something half size use x * .5 rather than x / 2.<br><br>Using this method you will never get division by 0 and multiplying by 0 gives a result of 0 safely. <br><br></td></tr></table><br>
<a name="821239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you're getting is Nan = Not a number.  In my opinion it's best to avoid all divisions by 0.  While you may not get a MAV strange &amp; unexpected things can start happening.<br><br>Stevie <br><br></td></tr></table><br>
<a name="821244"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I always multiply instead of dividing... So if you want to make something half size use x * .5 rather than x / 2.<br><br>Using this method you will never get division by 0 and multiplying by 0 gives a result of 0 safely. <br></div>That's a neat solution when you know the divisor, but what about a situation like this? :<br>ratio# = mesh_height# / mesh_width#<br><br><div class="quote"> What you're getting is Nan = Not a number. In my opinion it's best to avoid all divisions by 0. While you may not get a MAV strange &amp; unexpected things can start happening. <br></div>Hmm, is Infinity the same as NaN? When I print the value it says 'Infinity' not NaN. I know using NaN can cause weird things but I haven't noticed anything odd during testing. It almost seems as Infinity is treated as an extremely small fraction, which is basically what I want. :) <br><br></td></tr></table><br>
<a name="821305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Terry B.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just Ran some tests on this.<br>It works, as long as the varible is a float.<br>The code I used to test:<br><br><pre class=code>
Local zero# =0
For a#=0 To 1000
b=a#/zero#
Print b
Next 
WaitKey()
End 
</pre><br><br>It gave me:<br>-2147483648<br>Over and over.<br>No error though.<br><br>EDIT: Changed b to a float, gave me infinity. <br>Intresting. Still no error though. <br><br></td></tr></table><br>
<a name="821353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not explicitly test for a zero condition, or perhaps a less than a very small finite amount?<br><br><br><br>If zero# &lt;  0.000000001 then zero# = 0.000000001 <br><br></td></tr></table><br>
<a name="821474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I guess I could test for zero but it *seems* as though I don't need to. That's what I'm asking about. :)<br><br>Faffing around testing for zero division all over the shop would be a pain, TBH. It would make the code less easy to read and execution speed is priority one, also.<br><br>I think I might just ignore the 'problem' - it's not for anything commercial, anyway. However, it would be nice to get a definitive answer from BRL about this. I can dream! :) <br><br></td></tr></table><br>
<a name="821488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Infinity is just what it sounds like, a number bigger than any ordinary number.<br><br>The value of 1/x gets bigger as x decreases toward zero. The limiting case is x=0, when 1/x has become infinitely large.<br><br>Notice that Infinity is an actual floating point value. But there are few cases where you can do anything useful with it. Continued calculation with infinite values usually leads to NaN, which is not a valid number and causes all sorts of trouble. <br><br>Whether this will be a problem in your program depends on what you are doing with the resulting infinite numbers. But unless you have a very good reason for believing it won't cause any trouble you should test for division by zero. <br><br></td></tr></table><br>
<a name="821490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, thanks Floyd.<br><br>Is it possible to check the result for infinity?<br><br>Is the best way to check for div by zero 'If Abs(a#) &lt; 0.000001 Then a# = Sgn(a#)*0.000001'? Not even sure the Sgn is needed?! Hmmm.<br><br>Thanks all. <br><br></td></tr></table><br>
<a name="825055"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're checking the result for infinity then you've gone one step too far. As stated above, use a conditional test to check if the divisor is a zero value before you perform the division. If it is a zero value, then abort the division and handle the situation in a manner appropriate to whatever you're trying to achieve (pop an error message, substitute an epsilon value, etc). <br><br></td></tr></table><br>
<a name="825074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, so, the consensus seems to be I really should check for div by zero.<br><br>I may just use an epsilon on all divisions. This should be ok as long as the inaccuracy doesn't become cumulative. Hmmm.<br><br>Also, I forget - what's the smallest epsilon I can use in B3D? .000001 or .0000001?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
