<!DOCTYPE html><html lang="en" ><head ><title >Do These Balls Look Real?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Do These Balls Look Real?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Do These Balls Look Real?</a><br><br>
<a name="320704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am new to Blitz3D (about 6 days) but I found the forums lacking in pure Blitz source code examples for physics. There are alot of 3rd party examples like Tokamac etc but I prefer to exhaust purely coded solutions before moving to 3rd party code.<br><br>Here is a demo I made which simulates balls interacting on a plane (Basketballs perhaps) but the values can easily be changed to simulate pool balls or a squash court. I'd like to get some opinions from some more experienced Blitz coders as to my solution.<br><br>***********************************************<br>;<br>; Bouncing ball physics - by Vincent DeCampo 2/1/04<br>;<br><br>Const GRAVITY#=-.05<br>Const BALLS=1<br><br>Graphics3D 640,480<br><br>;*** Type for Ball ***<br>Type Ball_Object<br>	Field Entity<br>	Field x#<br>	Field y#<br>	Field z#<br>	Field dx#<br>	Field dy#<br>	Field dz#<br>	Field xMin#<br>	Field xMax#<br>	Field yMin#<br>	Field yMax#<br>	Field zMin#<br>	Field zMax#<br>	Field elasticity#<br>	Field friction#<br>End Type<br><br>;*** Lets create the floor ***<br>Room=CreateTerrain(64)<br>PositionEntity room,-32,0,-32<br><br>;******* Create Initial Ball ******<br>Blitz.Ball_Object = New Ball_Object<br>InitBallVars(Blitz)<br>Collisions BALLS, BALLS, 1, 2<br><br>;***** Create Camera *****<br>camera=CreateCamera()<br>PositionEntity camera,0,15,-55<br>;PointEntity camera, Blitz\Entity<br><br>;**********************************<br>;			 Main Loop<br>;**********************************<br>;<br>While Not KeyHit(1)<br><br>	If KeyHit(57) Then<br><br>		;***** Seed RND Generator *****<br>		SeedRnd (MilliSecs())<br>		<br>		;*** Create New Ball ***<br>		Blitz.Ball_Object = New Ball_Object	<br>		InitBallVars Blitz<br><br>	End If<br><br>	;**** Perform Room Physics ****<br>	For Ball.Ball_Object = Each Ball_Object<br>		BallPhysics (Ball)		<br>	Next<br><br>	UpdateWorld	<br><br>	;**** Perform Ball-on-Ball Physics ****<br>	CheckCollisions (Blitz)<br>		<br>	RenderWorld <br><br>	Text 0,5,"Press SPACE to throw another ball"<br>	Text 0,15,"Press ESC to Exit"<br><br>	Flip<br><br>Wend<br><br>End<br><br>;**********************************<br><br>Function CheckCollisions (Ball.Ball_Object)<br><br>	For C.Ball_Object = Each Ball_Object<br>				<br>		If EntityCollided(c\Entity, BALLS)<br><br>			For i = 1 To CountCollisions(c\Entity)<br><br>				Ent=CollisionEntity (c\Entity, i)<br><br>				;Get the normal of the surface which the entity collided with. <br>				Nx# = CollisionNX(c\Entity, i) <br>				Ny# = CollisionNY(c\Entity, i) <br>				Nz# = CollisionNZ(c\Entity, i) <br>			<br>				;Compute the dot product of the entity's motion vector And the normal of the surface collided with. 				<br>				VdotN# = (c\dx# * Nx# + c\dy# * Ny# + c\dz# * Nz#)<br>									<br>				;Calculate the normal force. <br>				NFx# = -2.0 * Nx# * VdotN# <br>				NFy# = -2.0 * Ny# * VdotN# <br>				NFz# = -2.0 * Nz# * VdotN# <br>										<br>				;Add the normal force to the direction vector. <br>				c\dx# = c\dx# + NFx#/2<br>				c\dy# = c\dy# + NFy#/2	;Force /2 assumes balls equal in mass<br>				c\dz# = c\dz# + NFz#/2<br>				<br>				For Hit.Ball_Object = Each Ball_Object<br><br>					If Hit\Entity = Ent Then<br>						<br>						;Add negative force to collision entity vector		<br>						Hit\dx# = Hit\dx# - NFx#/2<br>						Hit\dy# = Hit\dy# - NFy#/2	;Force /2 assumes balls equal in mass<br>						Hit\dz# = Hit\dz# - NFz#/2			<br>												<br>					End If<br>																									<br>				Next<br><br>			Next<br>												<br>		EndIf<br>		<br>	Next<br>							<br>End Function<br><br>;**********************************<br><br>Function InitBallVars(Ball.Ball_Object)<br><br>	;Create Ball<br>	Ball\Entity=CreateSphere(8)<br>	ScaleEntity Ball\Entity, 1,1,1<br>	txt=LoadTexture("Blitzlogo.bmp")<br>	EntityTexture Ball\Entity, txt<br>	EntityType Ball\Entity, BALLS<br><br>	;*** Variables for Ball ***	<br>	Ball\x#=0<br>	Ball\y#=20	;set ball 20 units above floor<br>	Ball\z#=0<br>	Ball\dx#=Rand(5)<br>	Ball\dy#=0	;at rest<br>	Ball\dz#=Rand(5)<br>	Ball\yMin#=1<br>	Ball\yMax#=9999<br>	Ball\xMin#=-32<br>	Ball\xMax#=32<br>	Ball\zMin#=-32<br>	Ball\zMax#=32<br>	Ball\elasticity#=.90	;value from &gt;0 to &lt;1 (1=pure elastic collision)<br>	Ball\friction#=.025<br>	;**************************<br><br>End Function<br><br>;**********************************<br><br>Function BallPhysics (Ball.Ball_Object)<br><br>	If ball\y   =&lt; Ball\yMin# Then<br>		Ball\y  =  Ball\yMin#<br>		Ball\dy = -Ball\dy<br>		Ball\dy =  Ball\dy * Ball\elasticity<br>	End If<br><br>	If Ball\x   =&lt; Ball\xMin# Then<br>		Ball\x  =  Ball\xMin#<br>		Ball\dx = -Ball\dx<br>		Ball\dx =  Ball\dx * Ball\elasticity<br>		AlignToVector Ball\Entity, Ball\dx, Ball\dy, Ball\dz,3<br>	End If<br><br>	If  Ball\x &gt;=  Ball\xMax# Then<br>		Ball\x  =  Ball\xMax#<br>		Ball\dx = -Ball\dx<br>		Ball\dx =  Ball\dx * Ball\elasticity<br>		AlignToVector Ball\Entity, Ball\dx, Ball\dy, Ball\dz,3<br>	End If<br>	<br>	If Ball\z   =&lt; Ball\zMin# Then<br>		Ball\z  =  Ball\zMin#<br>		Ball\dz = -Ball\dz<br>		Ball\dz =  Ball\dz * Ball\elasticity<br>		AlignToVector Ball\Entity, Ball\dx, Ball\dy, Ball\dz,1<br>	End If<br><br>	If Ball\z  &gt;=  Ball\zMax# Then<br>		Ball\z  =  Ball\zMax#<br>		Ball\dz = -Ball\dz<br>		Ball\dz =  Ball\dz * Ball\elasticity<br>		AlignToVector Ball\Entity, Ball\dx, Ball\dy, Ball\dz,1<br>	End If<br>	<br>	If Ball\y  &gt;= Ball\yMin# Then<br>		Ball\dy = Ball\dy + GRAVITY<br>	End If	<br><br>	Ball\x = Ball\x + Ball\dx<br>	Ball\z = Ball\z + Ball\dz<br>	Ball\y  = Ball\y + Ball\dy<br><br>	Ball\dx = Ball\dx - (Ball\dx*Ball\friction)<br>	Ball\dz = Ball\dz - (Ball\dz*Ball\friction)<br><br>	;Move ball to new coords<br>	PositionEntity Ball\Entity, Ball\x, Ball\y, Ball\z<br> <br>	;Rotate mesh to give appearance of rolling<br>	TurnEntity Ball\Entity, Ball\dz*50,0,0, 1<br>		<br>End Function<br>*********************************************<br><br>PS: You will need the file 'Blitzlogo.bmp' to run the demo.<br><br>Thanks <br><br></td></tr></table><br>
<a name="320711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wedoe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No they does not look real.<br>The gravity is too strong, and the balls doesn't roll naturally.<br>They kind of slides on the surface. <br>The balls also goes partly into the court-floor when they bounce from high altitude.<br><br>But it's a good start, I'm sure it will be good in the end :) <br><br></td></tr></table><br>
<a name="320719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> But as far as the gravity etc...you can change those values to whatever you want in the demo. I'm more concerned with the collisions between balls and the transfer of momentum. As far as I know, this is the only code on this forum that actually demos transfer of momentum from a moving ball to a stationary one. <br><br></td></tr></table><br>
<a name="320744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Impressive ! <br><br></td></tr></table><br>
<a name="320759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Almo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The momentum transfer looks okay to me. Thing that looks odd is the way balls rolling spin in a slightly different direction than you'd expect given their direction of motion. <br><br></td></tr></table><br>
<a name="320765"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Apocalypse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The rotational ball movement happends at the end of the BallPhysics routine. I tried aligning each ball to its vector and then rotating it but that seems to still give some sliding results. I'll keep tweeking. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
