<!DOCTYPE html><html lang="en" ><head ><title >Character Shadows</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Character Shadows</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Character Shadows</a><br><br>
<a name="323172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeOrc</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've looked in the code archives and through the forums, but I need additional help understanding how to have a shadow cast for my character.<br><br>In other languages you can use a hardware call to cast a shadow, is there such a thing in B3D? <br><br>I am using B3D 1.85.<br><br>thanx in advance for your help. <br><br></td></tr></table><br>
<a name="323178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Unfortunately not. If you want shadows in Blitz, a lot of tricks and extra work is required. I am looking hopefully forward to the release of BlitzMAX, which will probably contain such things, along a range of other DX9 Hardware supporting stuff. Until then you need to use some tricks, or  - not for free, but easier: buy sswifts shadow system, that's pretty good. <br><br></td></tr></table><br>
<a name="323184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I recommend sswift's shadow system. <br><br></td></tr></table><br>
<a name="323190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is sswifts shadow system easy to understand/inorporate.<br>can you have mutipole shadows , ie a shadow for every entity. <br><br></td></tr></table><br>
<a name="323191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's pretty simple to include. there's a demo: <a href="http://sky.prohosting.com/~scswift/Swift-Shadow-System-Demo-025.zip" target="_blank">http://sky.prohosting.com/~scswift/Swift-Shadow-System-Demo-025.zip</a> <br><br></td></tr></table><br>
<a name="323205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's very simple.  When you load the models/setup the scene you call commands something like CreatShadowCaster (I don't remember the exact commands off the top of my head) for every shadow casting entity, CastShadows for the lightsource, and ReceiveShadows for the model the shadows will be cast onto.  Then just call UpdateShadows every frame, probably right after UpdateWorld. <br><br></td></tr></table><br>
<a name="323215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm sounds not too bad. i may buy this at some point depending on how far my prject gets. comin along ok right now <br><br></td></tr></table><br>
<a name="323334"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i reccommend it too, very simple to setup and use. <br><br></td></tr></table><br>
<a name="323352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>As jhocking said, my shadow system is pretty simple to use.  It's about as simple as it could get.<br><br>There's two things you should be aware of though.<br><br>1. You cannot cast shadows onto Blitz terrains. <br>2. You cannot cast shadows from MD2's. <br><br></td></tr></table><br>
<a name="323376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats cool, i don't use either right now. Is it fast ?<br>Will it cast shadows from alpha tranparencies <br><br></td></tr></table><br>
<a name="323385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have also used Swift`s shadow system and its easy to use, but its a shame that Blitz has no features to support truly fast dynamic shadows, Blitz has physics, tools, etc... but things always look abit dated without true shadows. <br><br></td></tr></table><br>
<a name="323386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah its kind of essential really. <br><br></td></tr></table><br>
<a name="323405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Will it cast shadows from alpha tranparencies"<br><br>Hm... <br><br>I believe the answer is yes and no.<br><br>When casting a normal shadow, a copy of the mesh casting the shadow is made, and textured black and then a texture is made from the view of the light source.  This would override any texture with alpha you have on the model.<br><br>However, there is a special shadow type for casitng shaodws from translucent objects, like colored glass.  In this mode the model is NOT retextured.  However, this means that the model will then cast a colored shadow as if it were fully transparent.  But there will be uncolored holes where the alpha is.<br><br>There is a potential solution though.  You could cast a shadow from a hidden entity.  I forget if the system checks to see whether the entity is hidden or not before castign a shadow but it would be a trivial change to an if statement in the system that I could make for you if it did not.  This hidden entity would be a copy of the entity you make, which is colored black but has alpha transparency.  You then would use the colored shadow mode and the result would appear to be a shadow coming from the original object.<br><br><br>Copper:<br>There is no such thing s "true" shadows.  Only various algorithms which approximate some things better than others.  The shadows in Doom 3 have major limitations as well.  All the characters have to be very low polygon for example.  And a bunch of shadows which are cast across your viewpoint, such as the shadows from a jail cell door when viewed side on, kill the framerate.<br><br>Also more advanced techniques require more advanced hardware, and the nice thing about Blitz is that your game will look the same without any affort on your part on even the lowest end generic 3D hardware (in general).  Though the framerate may not be spectacular. <br><br></td></tr></table><br>
<a name="323408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> cheers sswift. I will probably invest in this at some point soon.<br>I am pretty happy with my lightmaps , but I need a good easy way fo giving all my level entities shadows or just the main characters at least <br><br></td></tr></table><br>
<a name="323422"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thats cool, i don't use either right now. Is it fast ? <br></div><br><br>Well Anime Tennis Babes casts shadows from one light source to four players ( in doubles mode ) onto two court meshes. I can even turn on soft shadows and get no slowdown at 1024x768. Now ATB doesn't push the hardware too much in other areas. In fact it's optimized to the point where it runs on Intel onboard things with 8 meg of ram. And my machine has a Radeon 9700 Pro in it. But I think other people have tested it on much lower hardware with similar results, so I'd say that was pretty fast. And bear in mind that soft shadows are really intensive. Ordinary non-soft shadows are much faster still.<br><br>I doubt you could do faster in Blitz as it stands. <br><br></td></tr></table><br>
<a name="323429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> . <br><br></td></tr></table><br>
<a name="323454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Einstein said that light is a particle that behaves like a wave."<br><br>Uh huuuh. :-)<br><br>&lt;Backs aaway slowly&gt;<br><br><br>Mirror system huh?  I'll think about it.  But it probably wouldn't be very fast.  For every mirror you would, effectively, need to render the entire scene again, just from a slightly different viewpoint.<br><br>Someone made a mirror system already.  I don't know if it's in the code archives or not.  It's not a perfect mirror though.  Stuff looks funny if the mirror is at too great of an angle relative to the camera. <br><br></td></tr></table><br>
<a name="323500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Einstein said that light is a particle that behaves like a wave'<br><br>you could make that in to a song lyric <br><br></td></tr></table><br>
<a name="323613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe light is a wave of particles or particles that give off waves <br><br></td></tr></table><br>
<a name="323665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sswift, by true shadows i meant stenciled, I would just like to be able to cast basic stenciled shadows for more than 5 entites on a fairly complex level at a decent speed.<br>With Island Storm I have had to use basic fake shadows, just to keep the framerate, I have tried to switch from them to your system when the player gets closer, but the framerate dies, when casting onto a large .b3d with lots of textures. <br><br></td></tr></table><br>
<a name="323698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift, can you just clarify that point about your shadow system not being possible with Blitz terrains? <br><br></td></tr></table><br>
<a name="323757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Sswift, by true shadows i meant stenciled, I would just like to be able to cast basic stenciled shadows for more than 5 entites on a fairly complex level at a decent speed.<br>With Island Storm I have had to use basic fake shadows, just to keep the framerate, I have tried to switch from them to your system when the player gets closer, but the framerate dies, when casting onto a large .b3d with lots of textures."<br><br><br>Well you know if you have problems like this, you can always send me a copy of the game which I can compile that has the shadows integrated.  Then I can see if I can offer suggestions to improve the speed, and I might find a way to optimize the system better for your specfic scenario.  I don't really have any real levels to test with, nobody sends me anything but simple demos. :-)<br><br>Oh and were these entities animated by chance?  One thing I've considered implementing would be an epsilon value for the animation much like I have for the movement and rotation of an entity realtive to the light source.  In short, a value which determines how many frames the animation has to progress before the shadow is updated.  In all likelyhood this would actually be fractional frames, but if you can avoid rendering the shadow map every frame, as you currently have to do with animated meshes, you get a large speed savings.<br><br>Another thing I could implement for distant entities is the abiltiy to force them to render their shadows less often.<br><br>I'd have to see how you're using the shadows though.  I don't understand how you could see the shadows well enough to even need shadows if they're that far away. <br><br></td></tr></table><br>
<a name="323762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> "sswift, can you just clarify that point about your shadow system not being possible with Blitz terrains?"<br><br><br>You can use the Shadow system if you have a Blitz terrain in the scene, but you can't specify the terrain as a shadow receiver, because there is no way for the shadow system to get the vertices and polygons which make up its mesh.  Any kind of mesh terrain would work just fine, but Blitz's Roam terrains are dynamic, and Blitz will not tell you how many vertcies it has or where they are at any particular time.  So it is impossible to cast shadows onto them.<br><br>There is however a workaround if you're truly desperate to use my shadow system with a Blitz terrain.  In the code archives there is code for "towel shadows".  These towel shadows work with terrains because they simply drape over the terrain in an imprecise manner using the linepick commands.  They however do not support true shadows.  They're just black dots under your character as written.  However, if you place one of these towel shadows on your terrain and specify it as a shadow recevier, then you could cast a character shadow onto it.  But it would have to be large enough to catch all of the shadow.<br><br>I suggest you don't use Blitz terrains though.  They're very simple to implement to be sure, but they're also very expensive to render.  I can make a mesh terrain with the same level of detail that runs twice as fast as a Blitz terrain, and has more detailed texturing. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
