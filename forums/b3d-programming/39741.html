<!DOCTYPE html><html lang="en" ><head ><title >Area Change affected by gravity</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Area Change affected by gravity</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Area Change affected by gravity</a><br><br>
<a name="443555"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> When my character changes area in a 'half seamless' fashion<br>(eg: Halo where you walk through a room from which you cannot see others, and it load while telling you to please wit)<br>He falls through the floor. Of course the new area loaded is in Exact synchrony with the old one (in fact its the same for testing purposes), and has all its collission affections updated immediately after the area is freed and reloaded, so why should my players gravity take effect in this way? help!<br><br>my main loop goes something like this:<br><br>playerstuff....<br>if there is an areamesh &gt;&gt;gravity<br><br>updateworld<br>renderworld<br>drawhud<br><br>flip<br>checkareas....<br><br><br>EDIT: Nearly fixed: I had to reestablish the collissions, but u still fall through thr floor. <br><br></td></tr></table><br>
<a name="443561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you got an example of some code?<br><br>It certainly souinds like a collision problem (do you re-update the Player collisions, not just the level objects?)<br><br>how is your gravity handled?<br><br>is your player a mesh, a camera, a pivot combined complex collecion of children??? <br><br></td></tr></table><br>
<a name="443563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;loads the new area<br>Function LoadArea2()<br>	CURRENTAREA=2<br>	;Light Settings<br>	AmbientLight 150,150,150<br>	CameraFogMode cam,1<br>	CameraFogRange cam,-2000,500<br>	CameraRange cam,1,500	<br>	<br>	<br>	;free prevoius mesh, if any<br>	If Not AREAMESH=0 FreeEntity AREAMESH<br>	;load the mesh<br>	AREAMESH=sLOADMESH("3ds\HulkR.3ds")<br>	EntityType AREAMESH,areatype<br>	PositionEntity AREAMESH,0,0,-5<br>	ScaleEntity AREAMESH,1.3,1,1.3<br>	EntityPickMode AREAMESH,2,True<br>	EntityColor AREAMESH,158,158,158<br>	AREACOLLISSIONS()<br>end function<br><br><br><br>;this is called in the main loop after flip<br>Function CheckAreas()<br>	<br>	Local NEWAREA<br>	<br>	NEWAREA=0<br>	<br>	Select CURRENTAREA<br>		Case 1 <br>			If EntityX(cam)&lt;=(-3898)    NEWAREA=2<br>		Case 2 <br>			If EntityX(cam)&gt;(-3898)     NEWAREA=1<br>	End Select<br>	<br>	If NEWAREA&gt;0<br>		DrawImage LoadingNEWAREA,screenW/2,screenh/2:Flip<br>		Select NEWAREA<br>			Case 1 loadarea1()<br>			Case 2 loadarea2()<br>		End Select<br>	EndIf<br>	<br>	<br>	<br>End Function<br><br>gravity is just a negative y translation, which takes place if there is an Areamesh.<br><br>collision with the area is entitysphere to area poly<br><br><br><br>I'm going to try slightly increasing the players y co-ordinate when this point is reached, but its a strange solution, and will be rather noticable as a botched up job<br><br><br><b>Edit:********************************************************</b><br>The Y increase wasnt too bad, and the re-establishment of<br>player to area collissions was the real culprit, so <b>thanks!</b> <br><br></td></tr></table><br>
<a name="443568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you actually solved it? or just know where to look now? <br><br></td></tr></table><br>
<a name="443676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had this problem.<br>I found that since some time was taken in loading a new area, and my gravity was implemented within the main  Tweening loop, Blitz tried to play 'catch-up' for lost time (which the tweening process should do).<br>And so suddenly the code was looping through many instances of the gravity implementation before a collision could be detected.<br>The only way I found around this was to switch off gravity as I changed areas, then wait till FPS &gt; 5, then switch gravity back on.<br>Sorry if that sounds a bit garbled, but it does depend on your own coding style. <br><br></td></tr></table><br>
<a name="444024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> sounds like the kind of thing i would do.<br><br>Its fixed close enough now: i just made it that my character moves up u few y after the change, so all thats felt is a 'loading jump'<br><br>Thankyall <br><br></td></tr></table><br>
<a name="444060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Better if you can freeze your character during the transition, then if you're using tweening reset all the variables involved, so that the tween code does not rush round its loop playing catch up with its timers. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
