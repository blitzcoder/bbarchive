<!DOCTYPE html><html lang="en" ><head ><title >PointEntity and TFormPoint</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PointEntity and TFormPoint</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >PointEntity and TFormPoint</a><br><br>
<a name="678786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is possible simulate the function PointEntity and TFormPoint if yes what?<br><br>Thanks <br><br></td></tr></table><br>
<a name="678790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> um, what do you mean by "simulate"?  Or, more to the point, why don't you just use those commands?<br><br>I do have a bit of code that accomplishes basically the same thing as PointEntity, but using AlignToVector since that gives you more control over the movement. <br><br></td></tr></table><br>
<a name="678793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not directly as tformpoint gives you only a point, not a rotation.   <br><br>You could use aligntovector to avoid gimbal lock as it uses quarternions. You could maybe make use of tformvector to get the alignment vector depending on what your doing.<br><br>Another option would be to use a combination of deltayaw and deltapitch to acheive similar results.<br><br>What exactly are you trying to do?  Related to your shadow system I guess?<br>Stevie <br><br></td></tr></table><br>
<a name="678797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mongia2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Function Point_Entity(entity,x#,y#,z#)<br>   xdiff# = EntityX(entity)-x#<br>   ydiff# = EntityY(entity)-y#<br>   zdiff# = EntityZ(entity)-z#<br>   dist#=Sqr#((xdiff#*xdiff#)+(zdiff#*zdiff#))<br>   pitch# = ATan2(ydiff#,dist#)<br>   yaw#   = ATan2(xdiff#,-zdiff#)<br>   RotateEntity entity,pitch#,yaw#,0<br>End Function<br><br>mongia <br><br></td></tr></table><br>
<a name="678827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, while reading this thread, I saw the use of the term "gimbal lock".  I have seen it referred to in these forums from time to time.  What is that, anyway?  (Like my sig says, "When in doubt, find out.") <br><br></td></tr></table><br>
<a name="678858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> when in doubt turn to wiki...<br><br><a href="http://en.wikipedia.org/wiki/Gimbal_lock" target="_blank">http://en.wikipedia.org/wiki/Gimbal_lock</a> <br><br></td></tr></table><br>
<a name="678885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> A simpler and quicker method ...<br><br><pre class=code>
Global PIVOT = createpivot()

Function Point_Entity( entity, x#, y#, z# )
   positionentity Pivot , x, y, z
   turnentity entity, deltapitch( entity, pivot ) , deltayaw( entity, pivot ) , 0
end function
</pre><br><br>Stevie <br><br></td></tr></table><br>
<a name="678899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not quicker... <br><br></td></tr></table><br>
<a name="678996"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks all <br><br></td></tr></table><br>
<a name="678998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Chroma, of course it's quicker!  <br><br>Speed is probably negligible until you use it hundreds of times per frame but there is no SQR, no ATAN2 or precalcs.<br><br>Stevie <br><br></td></tr></table><br>
<a name="679228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah but you are positioning an object and using turnentity with deltapitch and deltayaw.<br><br>The pure math way is faster.  Tests were done a couple years ago for verification.  The Point_Entity Function I wrote for the archives is even faster than the built in PointEntity function in B3D.<br><br>But yeah, unless you're using it hundreds of time per frame, it doens't really matter which method is used. <br><br></td></tr></table><br>
<a name="679625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> to point one objects at another..<br><br>1] vec to target object - position of source object.<br>2] cross of this vector with the source objects look vector<br>    gives you axis of rotation.<br>3] acos(dot) of those vectors gives you the angle of <br>    rotation.<br><br>now you have an axis and and angle..shame blitz doesnt<br>support axis angle rotation..converting to euler is messy..<br><br>heh.. useless information.. im good at that ;) <br><br></td></tr></table><br>
<a name="698562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well Ive used all methods including the PointEntity() command from Blitz3d. They all work great, dont see any speed difference (yet). My main problem is my model is facing the opposite direction. I fixed that with RotateMesh, and it worked great, the new problem is if I use RotateMesh on any equipped items, they get all stretched and skewed. Any Idears on how to fix this without remodeling my center points for each model?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="698570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe create a pivot, parent all to this pivot, and turn it 180 on axe Y<br><br>Remeber Rotatemesh move the vertex, not the pivot of the mesh, so it's irreversible.<br><br>If your model point to the opposite direction, you can solve using a turnentity 0,180,0 after your pointEntity . But it's only available for FPS or RPG like movements =&gt; Turning 180° in 3D should not be for yaw... unless you turn locally and not globally.<br><br>Don't know if you understand what i mean, i'm not very clear... <br><br></td></tr></table><br>
<a name="698572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >YellBellzDotCom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the response...<br><br>I found out that RotateMesh has adverse effects on Boned meshes.<br><br>I found the same answer you stated here...<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=35590#387649" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=35590#387649</a><br><br>from TRACI<br>"if your mesh is back to front, the only way I have found to do it is use rotateentity 180 degrees when loading it to get it pointing in the right direction, then parent it to a pivot and use the pivot for movement. Max does the same thing, what looks like the right way round in the front viewport isn't :S and this is what I've done with models in the past."<br><br>I rotated the model first, then created the pivot, parented the mesh to the pivot, and used PointEntity CharacterPivot, TargetPivot to get it. It worked great!!<br><br>Thanks for the help! <br><br></td></tr></table><br>
<a name="698720"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd say Stevie's way is quickier. I'd like to say that dis-proven :o) SQR is a slow-ish function. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
