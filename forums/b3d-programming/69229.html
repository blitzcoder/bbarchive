<!DOCTYPE html><html lang="en" ><head ><title >Clamp UVs versus Multiply Blendmode !?!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Clamp UVs versus Multiply Blendmode !?!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Clamp UVs versus Multiply Blendmode !?!</a><br><br>
<a name="774053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a problem with the Multiplying Blendmode. Although I set the textureflags 48 to clamp UVs, there's still a dark border on the textured quad. The texture is a dds dxt1. The idea is to use simple shadow "blobs" on some quads, but I don't want to use ordinary alpha blending due to z-fighting.<br><br>Clamp UVs works well as soon as I use the blendmode 3 (additional), but gives the dark seam in blendmode 2 (multiply). Is this a known "feature", or am I doing something wrong here? <br><br></td></tr></table><br>
<a name="774064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never used dxt1 but do pgn / jpg textures work?  If not, the only thing possible would be your texture uv's being slightly out.  Do you offset the coords by .5 / TextureWidth() and .5 / TextureHeight?  If not, this could be your issue. <br><br></td></tr></table><br>
<a name="774070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Stevie. It turned out I have to use the alpha flag when loading, so the texflags are 2+16+32. This way it works, but unfort. using this blendmode instead of alpha does not solve z-fighting troubles with other alpha-blended things as I used to hope.<br><br>Any ideas how to solve this? (other than lightmapping)<br><br>Thinking... Based on Beakers Z-Sort source and some studies of mine I guess somebody should try to write a function that is able to do the following:<br><br>-check a list of all loaded meshes for alpha transparent parts<br>-write their handle to a list that is sorted by the positions <br>-reposition them using the sorted list<br><br>This could - maybe - fix some of z-fighting problems. <br><br></td></tr></table><br>
<a name="774125"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried using the mutiply blending mode on the quad and load the texture normally, without alpha?  <br><br>Does this BMP texture work using this method?<br><br><a href="http://www.steviegoodwin.plus.com/images/Shadow.bmp" target="_blank">http://www.steviegoodwin.plus.com/images/Shadow.bmp</a> <br><br>Sorry if this doesn't help. <br><br></td></tr></table><br>
<a name="774309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't try a bmp so far, but I think it's about the same as a dds dxt1 without alpha. I used to hope the Multiply mode or the Additive mode would be z-sorted correctly, but they are exactly the same as the alpha blending mode.<br><br>yes I tried Multiply blendmode without alpha flag, that's where the mysterious seam appeared, so I had to add the alpha flag. Tho, gotta test it again to see of the z-order problem is caused by the alpha flag only...<br><br>Thanks for your help. <br><br></td></tr></table><br>
<a name="774406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm going to guess that the seam is there even in additive blending mode, but is just much harder to see.<br><br>Does your image have any transparency, or is it flattened?  In Photoshop, is there just one layer called "Background" in Italic?  If you have just one layer, but the image hasn't been flattened, then there is an alpha channel.  If that's the case, try flattening the image, and then closely check the color values at the image's edges for any signs of a border. <br><br></td></tr></table><br>
<a name="774418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are several layers. The top layer is fully opaque. The dds exporter additionally doesn't export the alpha channel in DXT1 mode. I also checked the edges, it's $ffffff, as it should be. Now there's even one more strange thing about: When I set EntityFX to 1(fullbright) then the whole thing is darker and things that should be fully transparent aren't. Contrary to EntityFX zero, that will look brighter than the fullbright mode! It also seems with FX zero the seam is disappeared. More and more I think Multiply Mode isn't really exact science. <br><br></td></tr></table><br>
<a name="774654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> There are several layers. <br></div><br>Do you mean in your PSD file, or in the DDS you create from it?  I'm sure you must be talkign about the PSD...  DDS does not preserve all those layers.  However, if your original is in layers, the exporter will export an alpha channel--even if your top layer is totally opaque.<br><br>So, before you export to DDS, try flattening the image. <br><br></td></tr></table><br>
<a name="774729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks I'll try that. Although, I can't imagine why the dds exporter would use the alpha channel when you chose DXT1 that doesn't contain alpha.<br><br>Basicly the problem is a z-sorting problem and I couldn't solve it with multiply-blending. I just remember somebody said if there is a further texture layer that is masked and totally transparent then the z-sorting will work again. Anybody who can confirm this? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
