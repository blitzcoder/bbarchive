<!DOCTYPE html><html lang="en" ><head ><title >MMO theory</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MMO theory</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >MMO theory</a><br><br>
<a name="292740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just realised I don't know much about massivley multiplayer network architecture.   Anyone care to shed some light on the subject of how you handle the networking for something like this at it's most eficient mark? <br><br></td></tr></table><br>
<a name="292869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's quite a question you're asking there, I wouldn't mind talking over some of the finer details with you... but if you want answers on the forum, it might be wise to make your question a little more specific...<br>There's a great deal of factors involved affecting your protocol, method of data storage, etc. for example security, bandwith cost, size of target playercount, geographical player density ingame, geographical player density in real life, game type, specific specs and capabilities and the list goes on.<br><br>If I where to write a conclusive reply now I guess I'd be typing for a few days. :P <br><br></td></tr></table><br>
<a name="292905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> We'll chat in IRC later! <br><br></td></tr></table><br>
<a name="292906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I'll have a shout in here.<br><br>I would use a divide and conquor approach. Basically for a truely huge network like this to function, the key is to have territories. Each territory has it's own server. The player, when he crosses a territory actually joins another server.<br><br>This is the server-load problem minimised. Now you have geographic location. Since the server is so fast, each territorial server will simply take people from another geographic location and "mirror" them in this territory.<br><br>Hence the servers in japan mirror the servers in england. This is the latency problem solved.<br><br>Now for this to work, you don't need specialised client code. You need standard client code much like what you see in BlitzPlay or Quake. UDP, nice and fast with a reliable packet every so often to keep things sane.<br><br>But the server is another story. It should operate on two levels: mirroring it's own territory in another country, and shifting players out of it's own territory while accepting players into it's own territory. When either of these actions occur it will begin broadcasting to it's closest mirrored neighbor - for example england to france. France's mirror will pick up on this and broadcast to germany and so on until the player is in the same territory across the world.<br><br>This will usually happen within 20ms if we're lucky - since servers are on pretty fat pipes.<br><br>If there's anything you don't understand about what I proposed here, just reply. <br><br></td></tr></table><br>
<a name="293123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about the mirroring, everything but that seems to be common sense just from playing a few MMO titles. <br><br></td></tr></table><br>
<a name="293151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting idea Rob. Of course, you have to be rich enough to pay for a lot of servers :-)<br><br>My (currently free) MMO just uses BlitzPlay, and it works fine so far. I should be able to handle quite large amounts of players on only a modest server.<br><br>What I do is split my game world into Areas. A player in one Area doesn't "know" about players in any other. This keeps bandwidth usage way down.<br><br>Also I don't worry about perfect synchronisation - so long as something is "about right" it's fine. And I handle as much on the client side as possible.<br><br>The result - it's currently possible to have 2 players with no lag to speak of over a single 56k connection. And that's with a server which only does 128k upstream and 512k downstream.<br><br>I haven't had enough players to REALLY strain the thing but I think it should be able to handle a couple of thousand at once without being too slow. In fact the game would slow to a crawl rendering and updating all the players long before the network side of things became annoyingly slow. <br><br></td></tr></table><br>
<a name="293216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> For those who may be interested, Jay Lee did a pretty good right-up on Relational Database Guidelines for MMOGs in September.  I haven't checked to see if he's written any more works on MMOG theory.  Heres the link:    <br><br><a href="http://www.gamasutra.com/resource_guide/20030916/lee_pfv.htm" target="_blank">http://www.gamasutra.com/resource_guide/20030916/lee_pfv.htm</a> <br><br></td></tr></table><br>
<a name="293610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been pondering a Network Architecture concept that would use multple client PC's as Game World Hosts. The goal is to simulate one massive virtual server without the need for a large server farm. <br><br>At the moment I'm not sure this concept is even feasible, hell, I'm probably waay out in left field with this one:), but, its worth getting feedback on it wether good, bad, indifferent. So here it goes...<br><br>The Concept<br><br>Visualize the Game World as a large 1000x1000 Grid (ignore scale for now). This server architecture would be built on a 4 Tier Server Hieararchy: Host -&gt; Master -&gt; Domain -&gt; World.  <br><br>Host Server would manage one square of the game world (upto 16 - 32 players). This server behaves similar to a Multiplayer Arena Server essentially providing communication between players within the area, periodically updating the Master Server of Player/Game world state.<br><br>Master Servers would manage 100 Host Servers within 10x10 area of the Game World. Masters Servers would be responsible for mirroring, updating, and establishing communication between host and their neighbors. All world events are communicated up to the Domain Server.<br><br>The Domain Servers would manage 100 Master Servers within area. Domain Servers would provide the same functionality to Master Servers as they do to Host Servers. All world events are communicated up to the World Server.<br><br>The World Server would manage 100 Domain Servers. The world Server would provide the same functionality to Domains as they do to Master Servers. The world server also issue broadcast to update Servers and Clients.<br><br>The PROS<br><br>No need for massive server farm. Load balancing.<br><br>The CONS<br><br>The game worlds persistence would be only as reliable as the number of players in the game world. No players - no game world:( <br><br></td></tr></table><br>
<a name="293912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> On the other hand, no player - no game world needed.<br><br>I think that's quite an interesting idea. Also pretty much infinitely scalable. However, I think it'd require your players to have quite beefy connections to handle being servers? Even if only for a small segment of the world.<br><br>You'd also have to find a way to transfer server-duties when a player left or moved to a different segment of the world.<br><br>Finally, there'd be more of a security problem - it would be much easier for people to cheat if their PC was acting as a server. <br><br></td></tr></table><br>
<a name="293947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rottbott,<br><br>Thanks for the feedback.<br><br><div class="quote"> However, I think it'd require your players to have quite beefy connections to handle being servers? Even if only for a small segment of the world. <br></div>Yes. Connection speed will determine wether or not a Client PC can participate as a Server.<div class="quote"> You'd also have to find a way to transfer server-duties when a player left or moved to a different segment of the world. <br></div>This will be managed by the Tier Server above. For example, Masters Server supervise Host Servers, Domain Server supervise Master Servers, etc.<div class="quote"> Finally, there'd be more of a security problem - it would be much easier for people to cheat if their PC was acting as a server. <br></div>Security is a top priority. Although this server functionality is suppose to be transparent to the player, safeguards and detection will have to be in place  regardless if the PC is acting as a server. <br><br></td></tr></table><br>
<a name="293974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, sounds like you have most of the potential problems worked out. It would certainly be a cheap way to run a huge game - you'd only really need to pay for one server (World server), and not even an especially super-fast one either. Perhaps one of us bedroom programmers could even run a successful MMORPG without having to pay huge server costs. I like the idea.<br><br>About security: I was thinking more along the lines of people being able to use packet sniffers to work out your packet formats, and then make artificial packets which would allow them to cheat. Of course that problem is always present, but I think it would be worse if the person's PC was acting as a server.<br><br>Also, wouldn't you get sudden jumps when a server-player left unexpectedly and the server had to be quickly changed to another player? How long do you think it would take to do the switch? I'm thinking at least a second or two, maybe even longer if a lot of game data has to be sent. <br><br></td></tr></table><br>
<a name="293976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Update*   I've been using BPlay for 2 days, already I have most of a game I started 2 days ago done.<br><br>Great lib surreal! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
