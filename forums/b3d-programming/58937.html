<!DOCTYPE html><html lang="en" ><head ><title >Changing a .b3d texture on-the-fly</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Changing a .b3d texture on-the-fly</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Changing a .b3d texture on-the-fly</a><br><br>
<a name="655853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may seem an odd enquiry - but I know little about modelling.<br><br>Let's suppose I have a character called 'Man.b3d'.<br><br>Let's suppose the texture file-name is hard-coded into the .B3D file - ie 'Man.jpg'.<br><br>If I then load that .b3d model into Blitz, and then load another skin (Man2.jpg) and then 'EntityTexture' the new skin to the mesh, what happens to the original texture?<br><br>Do both textures exist inside Blitz3D as being applied to the model?  Or is Blitz3D cunning enough to kill the first one.  Do both textures remain in memory?  Does the first texture go into 'limbo'.  Can you 'Freetexture' the first texture if it is not killed by the second texture?<br><br>I hope I have made sense there.  Anyway, hopefully someone can shed a bit of light here. <br><br></td></tr></table><br>
<a name="655855"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm guessing limbo until you ClearWorld ents=true,brushes=true,textures=true <br><br></td></tr></table><br>
<a name="655857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, thanks "Tom".  I was supsicious it went into 'limbo' as even when you 'FreeTexture' a texture from memory it remains on any objects in memory - yet the second texture would have taken its place. <br><br></td></tr></table><br>
<a name="655873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> However, this raises a new question:<br><br>What is the best way to remove a hard-coded texture file-name from a .b3d file? <br><br></td></tr></table><br>
<a name="655885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What about loading the models into an editor/modeller and removing the textures. Then, load the models and textures separately in Blitz3D, and apply textures as required. <br><br></td></tr></table><br>
<a name="655902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, what editor do you suggest?  Smartie-shaped editor, Squirrel paw-shaped editor, perhaps Amphibious landing craft-shaped editor'? <br><br></td></tr></table><br>
<a name="655905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Knob-shaped editor, natch. <br><br></td></tr></table><br>
<a name="655973"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmm.  I used Ultimate Unwrap - not knowing what I was doing, I just looked at the right-hand side of the screen and noted 'Groups/Materials/Bones'.  'Materials' looked interesting - it seemed to contain the texture - so I simply deleted it entirely (the whole thing).<br><br>However, the new model has increased in size - it was 949KB, now it is 967KB.<br><br>The end result worked - the model has no texture at all and the file structure of the .b3d file reflects it has no default texture - yet, I am not sure how the file size has increased.<br><br><br>EDIT:<br>I just got the file size to drop by not selecting to re-export vertex normals or vertex colours.  File size is now 936KB - which would be about right to remove the texture file-name from the structure. <br><br></td></tr></table><br>
<a name="656256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Freaking out over 18kb? :P <br><br></td></tr></table><br>
<a name="656350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..maybe its better to explain what you trying to achieve buddy...big10p is right if you trying to change texture becouse of 'new better look' in your game or whatever...if you trying to do something else, approach should be different..so..give it a try and give us more details about task you trying to achieve.. <br><br></td></tr></table><br>
<a name="656366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Change the texture. How about, loading the new texture and copying rect-ing over the old one? <br><br></td></tr></table><br>
<a name="656433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not my stuff - I have paid for these:<br><br><a href="http://www.cubixstudio.com/MaleNPCInfo.html" target="_blank">http://www.cubixstudio.com/MaleNPCInfo.html</a><br><br>There is one .b3d mesh - but 2 skins.  The .b3d had the file-name of one of the skins hard-coded - so it auto loads onto the mesh when you load the .b3d.  So, I was purely wondering what would happen if I applied the second skin when I had loaded it.  I couldn't see the point of hard-coding the texture file-name to a .b3d whereby it comes with 2 skins. <br><br></td></tr></table><br>
<a name="656535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> All you have to do is to check the hierarchy of the b3d recursively and EntityTexture those children that are meshes. See the "how to make entityalpha work with animated meshes" (or alike) in the archives for an example on recursively parsing the entity hierarchy.<br><br>For multitextured stuff you may track down the used textures as seen in the "SaveB3D" source and then use PaintSurface to replace certain textures.<br><br>AFAIK Blitz will do an automatic Garbage collection. When a Texture is freed, its space is available. Although physicly still there and even the entity handle still working, but you could compare this to the file system that only releases the space occupation referenced in the FAT, the data is still there.<br><br>Blitz has no known memory leak and manages memory nicely. When you try to load something twice, it will reuse the loaded data and only create an instance. When you AddMesh a few meshes together and some of them use the same textures, it will minimize the surface count automaticly. <br><br></td></tr></table><br>
<a name="657040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I reckon the texture goes on holiday for a while then comes back when its feeling better <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
