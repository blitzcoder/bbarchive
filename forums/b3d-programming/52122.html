<!DOCTYPE html><html lang="en" ><head ><title >Illegal Instruction?  -  Any ideas?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Illegal Instruction?  -  Any ideas?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Illegal Instruction?  -  Any ideas?</a><br><br>
<a name="581941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game is crashing if I leave it running for a bit.   <br><br>This just started happening today and I've no clue what's going on.<br><br>Does anyone have any idea what might cause this error.<br><br><img src="http://www.zee-3.com/video/illegal.JPG"> <br><br></td></tr></table><br>
<a name="581945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you be hitting a surface vertex limit?<br><br>Are you getting memory leaks? <br><br></td></tr></table><br>
<a name="581947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not as far as I know.<br><br>The game is running an attract mode repeatedly.  Everything is rebuilt each cycle and there are no random elements.   The crash happens after it's been running 10-20 minutes (didn't time it).<br><br>No memory leaks as far as I can tell.  <br><br>Would hitting the vertex limit generate an illegal instruction error anyway? <br><br></td></tr></table><br>
<a name="581949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just put an extra check into that routine and the highest vertex number reported is 2191 which I presume is a long way from hitting any limits. <br><br></td></tr></table><br>
<a name="581952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> What vertex/tri limit are you using for your surfaces, John? Going above ~32000 for either can cause problems sometimes, although, that usually shows up by getting a MAV on RenderWorld. I don't think I've seen an "illegal instruction" error before.<br><br>[edit] Nevermind. We cross-posted. :) <br><br></td></tr></table><br>
<a name="581958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeppe Nielsen</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where do you call the function?, I think it is there the problem is and not in the function.<br><br>In the following example the error will highlight in the function and not at the freeentity:<br><br><pre class=code>
Graphics3D 800,600,16,2
FreeEntity nonsense(123)


Function nonsense(s)
Return s
End Function
</pre> <br><br></td></tr></table><br>
<a name="581961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just got the crash elsewhere.  This time on a renderworld().<br><br>I'll investigate further - to see if there is a common element. <br><br></td></tr></table><br>
<a name="581964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you accidentally setting a vertex coord to NaN or Infinity, by any chance? <br><br></td></tr></table><br>
<a name="581965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I don't think so.  As I said the crash happens in attract mode which runs the same demo over and over and has no random elements.   The code in question has been running fine for the best part of two years. <br><br></td></tr></table><br>
<a name="581976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems Slenkar has had this error before:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=39875&amp;hl=illegal%20instruction" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=39875&amp;hl=illegal%20instruction</a><br><br>He doesn't say whether he ever found the source of the error but it might be worth emailing him to ask. <br><br></td></tr></table><br>
<a name="581984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm..  I might try going back to an older version of B3D. <br><br></td></tr></table><br>
<a name="582065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Changed your GFX drivers recently? <br><br></td></tr></table><br>
<a name="582138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. <br><br></td></tr></table><br>
<a name="582157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using XMs for sound? There's a crashing bug in there (or was). <br><br>If that's not it, I think I came across this error, or something similar, a long time ago, but I'm having trouble remembering the specifics. It was a crash on random graphics functions as a result of something silly I did elsewhere (that gave no error) with mesh functions. <br><br></td></tr></table><br>
<a name="582169"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm just using B3D sound commands.   I'm playing an MP3 when the crash happens.<br><br>What's wierd (or perhaps connected) is, I just spent a couple of days fixing a gradual slowdown issue which meant leaving the attract mode running for about 20 minutes each time.   I sorted that out - although I still don't quite understand what was slowing the game down - and now the game won't run for that length of time.<br><br>I'll unzip an old version just to be sure... <br><br></td></tr></table><br>
<a name="582176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay,  I've unzipped Sundays version (before I fixed the slowdown issue) and the crash is still happening.   Now, that version definitely wasn't crashing on Sunday because, as I said above, I was running it for 20 minutes at a time to track the slowdown.<br><br>Looks like the ATI Catalyst drivers might be the culprit.<br><br>Now I think of it, IE crashed a few times yesterday as well.<br><br>Is there anyway to get hold of old catalyst drivers? <br><br></td></tr></table><br>
<a name="582177"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> The slowdown does seem to suggest a leak of some sort. I have never seen that error message though in my life. Maybe, you have unreferenced a surface, ie. not freed it, but changed it's handle, so the surface still exists. Have you tried keping an eye on system memory and video memory, and noticed whether as the program slows, the memory increases.<br><br>I know this is a simple thing, and not really related, so forgive me if i'm insulting you here (it's always good to check simple things), but your not writing too much to the debuglog by any chance? <br><br></td></tr></table><br>
<a name="582179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I fixed the slowdown.  I just mentioned it because it meant I was running the game for long periods so I know the crash wasn't happening.<br><br>Writing to the debuglog?  Does that cause problems?  I write a lot to it. <br><br></td></tr></table><br>
<a name="582222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> JP can you pls check in at the dev team forum. <br><br></td></tr></table><br>
<a name="582290"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, i don't honestly know if the debuglog would cause an illegal instruction, but it definetly causes slowdown, if it contains alot of debug text. But since you've fixed that problem... i dunno. Sorry i can't be of more help. Hope you get it sorted, looks like a cracking game. <br><br></td></tr></table><br>
<a name="582300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> JP/Skidracer: can one of you report back here if you solve this, please. It would be useful to know in case other members encounter this problem. Y'know, lowly members like me who don't get privileged attention from BRL staff and access to VIP dev forums. ;) <br><br></td></tr></table><br>
<a name="582571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course.   I'm starting to think this is a driver issue.  I'm getting system crashes as well on occasion too.   Odd as this is a fresh install with the latest drivers. <br><br></td></tr></table><br>
<a name="582598"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it possible your GFX card has a minor/intermittent fault? It would be good if you could get hold of an identical card and swap it in to check. Also, are you able to test on a machine with different GFX hardware? i.e. nVidia <br><br></td></tr></table><br>
<a name="582615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I can't afford a new card.   I'll get my brother to give the game a stress test today. <br><br></td></tr></table><br>
<a name="582623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Illegal Instruction? Ive never seen blitz throw THAT error before. strange. Either way, I hope it gets fixed soon. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
