<!DOCTYPE html><html lang="en" ><head ><title >Levels (Maps) - best way to store them</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Levels (Maps) - best way to store them</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Levels (Maps) - best way to store them</a><br><br>
<a name="246468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Guys,<br><br>I was wondering how you'd recommend that I use maps on my little game.<br><br>At the mo, I'm loading in around 30+ 3DS static and animated mesh objects - which form my level.<br><br>I've been putting out each object in my little world by hand, I guess there must be some sort of free 'world placement editor' or something I could use to visually see how things go together more quickly ?.<br><br>Also, loading up that amount of objects for each level of the game is a pain - should I think about loading them up in some sort of complete map file ?. I need to use collisions on most of the objects, so I guess I'm limited as to what I can do ??. (do they take on the one mesh fits all profile ?, or are they still treated as single objects ?)<br><br>Any help here would be very welcome, I've got a feeling I'm doing it the hard way.<br><br>Thanks Paul. <br><br></td></tr></table><br>
<a name="246485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the interests of fairness there are several Blitz user created world editors. Do a search in the forums for any of the following:<br><br>LightBulb<br>Worldspin<br>Quill3D<br><br>Sorry if i've omitted any. <br><br></td></tr></table><br>
<a name="246494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I have looked at em. But at the mo I want to use something that is free and will let me get on with it.<br><br>Thats not to say I wont be buying one of them when I get to such lovely things as lightmapping :( but at the mo I just need something that will let me place objects visually.<br><br>Reading through the posts on the forum, there seems to be a bit of a battle over which one is better.. Not sure where that leaves me ?<br><br>I am still alittle worried about how they treat objects, are they still single objects or combined into one ?.<br><br>btw.. the BUY button on Worldspin gives out a 'page cannot be found error' <br><br></td></tr></table><br>
<a name="246527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can just construct the level in any modeling tool (eg. 3D Studio Max, Milkshape.)  If you really want a world editor you could write your own placement editor.  More complex stuff like lightmapping and CSG level editing would take a while to write but just a simple placement editor (to place pre-made objects together into a scene) is simple.<br><br>You can represent the data as a single model or you can keep the various objects as separate model files and represent the assembled scene in a custom file format.  All you really need there is a text file which contains the name and position/rotation of every object.<br><br>Unless the objects to load are all hard-coded (and even then you only have to list everything once) there's no reason loading and placing a whole bunch of objects should be painful.  Just create a loop which loads an object and keep looping until all the objects are loaded. <br><br></td></tr></table><br>
<a name="246962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> HomeSpun is FREE. Go get it at the Blitz Showcase.<br><br>It will do exactly what you want. Sorry though, it too will load each of your objects one at a time unless they are copies.<br><br>Doggie <br><br></td></tr></table><br>
<a name="247064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >superqix</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a freebie for you...  This is the code I use for my level editor to load and save ".LED" files.  LED files store the location and rotation of all meshes loaded using the ImportMesh(ImportFilename$) command.<br><br><pre class=code>
Type LevelItem
	Field Mesh
	Field File$
End Type

Function ImportMesh(ImportFilename$)
	DebugLog "Import: " + Filename$
	Mesh = LoadMesh(ImportFilename$)
	If Mesh Then
		Level.LevelItem = New LevelItem
		Level\Mesh = Mesh 
		Level\File$ = ExtractFilename$(ImportFilename$)
		EntityPickMode Level\Mesh,2
		PositionEntity Level\Mesh,0,0,0
	EndIf 
	Return Mesh
End Function

Function FindLevelItemFile$(Entity)
	For Level.LevelItem = Each LevelItem
		If Level\Mesh = Entity Then Return Level\File$
	Next
End Function

Function DeleteLevelItem(Entity)
	For Level.LevelItem = Each LevelItem
		If Level\Mesh = Entity Then Delete Level
	Next
End Function

Function SaveLevel(Filename$)
If Lower(Right(Filename$,4)) &lt;&gt; ".led" Then Filename$=Filename$+".led"
	LevelFile=WriteFile(Filename$)
	If LevelFile Then
		WriteInt LevelFile, (76 Shl 24) + (69 Shl 16) + (68 Shl 8) + 49; LED1
		For Level.LevelItem = Each LevelItem
			WriteString LevelFile, Level\File$
			WriteFloat LevelFile, EntityX(Level\Mesh,1)
			WriteFloat LevelFile, EntityY(Level\Mesh,1)
			WriteFloat LevelFile, EntityZ(Level\Mesh,1)
			WriteFloat LevelFile, EntityPitch(Level\Mesh,1)
			WriteFloat LevelFile, EntityYaw(Level\Mesh,1)
			WriteFloat LevelFile, EntityRoll(Level\Mesh,1)
		Next
		CloseFile LevelFile
		Return True
	Else
		Return False
	EndIf
End Function

Function ClearLevel()
	For Level.LevelItem = Each LevelItem
		If Level\Mesh Then FreeEntity(Level\Mesh)
		Delete Level
	Next
End Function

Function LoadLevel(Filename$)
	DebugLog "Load: " + Filename$	
	LevelFile=ReadFile(Filename$)
	If LevelFile Then
		LevelDirectory$ = Left$(Filename$,Len(Filename$)-Len(ExtractFilename$(Filename$))) + "\"
		If (ReadInt(LevelFile) = (76 Shl 24) + (69 Shl 16) + (68 Shl 8) + 49) Then ; LED1
			ClearLevel()
			Repeat
				Mesh = ImportMesh(LevelDirectory$ + ReadString$(LevelFile))
				x# = ReadFloat(LevelFile)
				y# = ReadFloat(LevelFile)
				z# = ReadFloat(LevelFile)
				p# = ReadFloat(LevelFile)
				w# = ReadFloat(LevelFile)
				r# = ReadFloat(LevelFile)
				If Mesh Then PositionEntity Mesh,x,y,z
				If Mesh Then RotateEntity Mesh,p,w,r
				If Mesh Then EntityType Mesh,2
				If Mesh Then EntityPickMode Mesh,0
			Until Eof(LevelFile)
			CloseFile LevelFile
			Return True
		Else
			RuntimeError("File Not Found")
		EndIf
	Else
		Return False
	EndIf
End Function

Function FindLevelItem(file$="")
	For Level.LevelItem = Each LevelItem
		If Level\File$ = Upper$(file$) Then Return Level\Mesh
	Next
	Return False
End Function

Function ExtractFilename$(FileName$)
	FileName$="\"+FileName$
	LastBackSlash = 1
	Repeat
		NextBackSlash = Instr(filename$,"\",LastBackSlash)
		If NextBackSlash &gt; 0 Then LastBackSlash = NextBackSlash + 1
	Until NextBackSlash = 0
	tmp$ = Right$(FileName$,Len(FileName$)-LastBackSlash+1)
	Return tmp$
End Function
</pre><br><br>Now all you need to do is write something to load and move your objects around....<br><br>UPDATE:  I had to hack out some level editing code, let me know if there is any problems using it... <br><br></td></tr></table><br>
<a name="247092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ice9</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Writing your own editor is half the fun of making the game.<br>feature rich all inclusive and fun to use. To some the editor is the most enjoyable part of the game. <br><br></td></tr></table><br>
<a name="247098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ummmm, hello? <br><br></td></tr></table><br>
<a name="247121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello what? <br><br></td></tr></table><br>
<a name="247142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> err.. Halo - click on the DOWNLOAD button on your cart. site, lil problem. ;)<br><br>I got the cart2 demo a couple of weeks ago to play around with but without a feature to load in 3d objects, its hard to see how I'd use it.<br><br>Quill was 'interesting'.. I'd had a few beers before looking at it - thought I was in a plane cockpit with the amount of buttons it was throwing at me. Couldnt get lights to point where I wanted very easily ?.<br><br>Mark's Maplet and the other proggies, droplet etc.. where good fun. Problem is when you've created the level, textured it, put down your entities, placed your objects, you want to recalc the lightmap. :(<br><br>Doggie, had a problem with homespun - starts off with a readymade level which I cant clear ???.<br><br>Superqix, thanks matey - looks like I just might have to write my own, and thats a good start.<br><br>(although not at the mo, since I wanna get this game finished up first. I've taken Joe's advice and grouped everything together in my 3d program.)<br><br>Anyway, cheers for all the help guys, so much has changed with Blitz over the last year - but its nice to be back !. <br><br></td></tr></table><br>
<a name="247235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >superqix</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No prob,<br><br>This is what I'm working on with it...<br><br><img src="http://turbo.gamedev.net/blitz/isoed_3.gif"> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
