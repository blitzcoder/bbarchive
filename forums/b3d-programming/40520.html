<!DOCTYPE html><html lang="en" ><head ><title >Tweening help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tweening help</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Tweening help</a><br><br>
<a name="455202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey peeps... ive created a general tween function, but it doesnt work its best...<br>Now, ive played and played and played, and tweening has always done my head in, this function was like a godsend when i created it...<br><br>This is just the "include".<br>instead of "renderworld:flip", call "Renderworldtween(frames per second)<br><br>Can anyone help fix this so that it is actually the same speed on everyones computer?<br><br>Cheers<br><br>Damien<br><br><pre class=code>
Global rendertweenskipframes#,oldrendertime#

Function RenderWorldTween(fps#)
Local tween#,Beforerender#,Afterrender#,tw#,framespd#,renderspd#,afps#,TWEENVAL#
If rendertweenskipframes&gt;1 Then rendertweenskipframes=0
If rendertweenskipframes&gt;0.99999999999 Then rendertweenskipframes#=rendertweenskipframes#-1:Goto skiprendertween
tween#=0
Repeat
	If tween#=0 Then beforerender=oldrendertime
	TWEENVAL#=TWEEN#
	
	;If tween#&gt;1 Then Goto Dontrenderthisbit
	If rendertweenskipframes&lt;1 Then tweenVAL#=tween#+rendertweenskipframes:rendertweenskipframes=0
	om=MilliSecs()
	;If tweenval=0 Then
	RenderWorld tweenVAL#

	If debugtext=1 Then
		;----------------------------------------------------------------------------
		;---PLACE DEBUG AND DRAWING STUFF HERE----
		;-----Note, 2D stuff will NOT be tweened for obvious----
		;-----reasons													    ----
		;---------------------------------------------------------------------------
	EndIf

	Flip 0
	If tween#=0 Then
		afterrender=MilliSecs()
		renderspd#=afterrender-beforerender:framespd#=1000.0/fps#
		tw#=renderspd#/framespd#
		If tw#&lt;.000001 Then tw#=1
		If tw&gt;5 Then tw=5   ;To stop endless loops
	EndIf
	DebugLog tween#+"  "+tw#
	tween#=tween#+tw#
	If twEEN&gt;1 Then rendertweenskipframes#=rendertweenskipframes#+TWEEN#-1
	
	.Dontrenderthisbit
Until tween#&gt;=1
.skiprendertween
CaptureWorld
oldrendertime#=MilliSecs()
End Function
</pre> <br><br></td></tr></table><br>
<a name="455259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I always refer people to the original Marcoworld example included with Blitz3D, that always does the trick for me :) <br><br></td></tr></table><br>
<a name="455278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Marcoworld". hehe, right, now, what if i say ive looked at that about 50 times? :P im not looking to implement it specifically, just looking for a function that would work in almost any project by just replacing the Renderworld function<br><br><br>oh well, cheers, i will take another look when i get home.<br><br>BTW, i noticed your fondness of "marcoworld"... all i have is "castle" and "castledemo.bb" :P <br><br></td></tr></table><br>
<a name="455537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try my tutorial:<br><a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=johnblackledge09202003161847.html" target="_blank">http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=johnblackledge09202003161847.html</a> <br><br></td></tr></table><br>
<a name="455782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sunteam Software</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hehe not a fondness, but this topic seems to keep re-appearing quite a lot and I just happen to know in my own experience the code worked for me. I believe the castle demo is the code I'm talking about, I'm not sure how it got to be known as Marcoworld... I probably picked it up from somewhere's around here ;D <br><br></td></tr></table><br>
<a name="456710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use the code from the Castle Demo in everything. Works like magic :-) <br><br></td></tr></table><br>
<a name="456712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;Start of program
Const FRAMERATE=30				;The target framerate
Const PERIOD=1000/FRAMERATE		;How many ms per frame
;All your other initialization here


;MAIN LOOP
.main

;Setup Tween Code and FPS counter
time=MilliSecs()-PERIOD
While Not KeyHit(1)
        Repeat
		elapsed=MilliSecs()-time
	Until elapsed
	ticks=elapsed/PERIOD
	tween#=Float(elapsed Mod PERIOD)/Float(PERIOD)
	For k=1 To ticks
		time=time+period
		If k=ticks Then CaptureWorld
		
.tween
;Tween Routines - Only add routines that need to be timed here
;-------------------------------------------------


;-------------------------------------------------

		UpdateWorld
	Next; next k

.non_tween	
;Non Tween Routines - Add other stuff here that needs to be rendered like shadow updates etc.
;-------------------------------------------------


;-------------------------------------------------

.render
	RenderWorld tween
	
;Non Rendered Routines - Add non rendered stuff here like display updates
;-------------------------------------------------

text 10,10,"FPS = "+fps

;-------------------------------------------------
	
;Frames per second counter
If MilliSecs()&gt;fps_timer+1000 Then
		fps=fpscounter
		fpscounter=0
		fps_timer=MilliSecs()
	Else
		fpscounter=fpscounter+1
	End If

Flip False
Wend
End
</textarea> <br><br></td></tr></table><br>
<a name="456741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are some excellent tutorials on this over at blitzcoder<br><br><a href="http://www.blitzcoder.com/" target="_blank">http://www.blitzcoder.com/</a><br><br>Just search for 'tweening' and 'delta timing' should do it.<br><br>I use tweening as it seems the best solution in most cases. Only problem you can run into is when you just want to 'teleport' an object from one place to another. Tweening will try and make it 'move' there. You can get around this, but you might also want to consider implementing delta timing instead. I mention this, because you are really best implememnting the most suitable solution for your project from the start. Its a pain swapping over part way through ;) <br><br></td></tr></table><br>
<a name="456895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would implement delta time unfortunately im using a physics library. also, the project is near complete, and its set for tweening- my current tween function just doesnt cut it :/ oh well :/<br><br>Il take a look around, cheers guys. <br><br></td></tr></table><br>
<a name="456960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Rhyolite said:<br>'There are some excellent tutorials on this over at blitzcoder '<br>As I said:<br>Try my tutorial: <br>www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=johnblackledge09202003161847.html <br><br></td></tr></table><br>
<a name="457087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, kinda missed your link was to blitzcoder!! Ooops! This was one of the tutorials I was reffering to.<br><br>But while I am here, thanks for your excellent tutorial John, it really helped me out. The blitz community is great and one day I hope to put something back in (although its always tricky when others seem to know more than me!). <br><br></td></tr></table><br>
<a name="457236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can I swear? Bloody Hell!<br>About two years ago _I_ said the same as you: the Blitz community is great and one day I hope....<br>And today it's come full circle and _I_ got thanked!<br>Cheers Rhyolite, just now, I needed that.<br><br>Can I also mention that I think that one of the great things about being part of this community is that (whether you know it or not) we really _are_ and the start of something new and cutting edge. Where all else has gone predictable and rancid in the professional I.T. sector, 3D is still _that_ new. There are very few rules as such, and every day people are having breakthroughs with lighting, shading, physics etc. Yes, people in this community! Woo-hoo! <br><br></td></tr></table><br>
<a name="457253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) <br><br></td></tr></table><br>
<a name="457256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >scribbla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> well said john..well said ;) <br><br></td></tr></table><br>
<a name="457300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice tutorial. Doesnt look like il make a worthy function yet then! Can anyone test my function above just for laughs?<br><br><br>Cheers to everyone and John for that tutorial. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
