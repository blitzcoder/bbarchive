<!DOCTYPE html><html lang="en" ><head ><title >Here's how to disable filtering.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Here's how to disable filtering.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Here's how to disable filtering.</a><br><br>
<a name="459481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you don't like DLLs, look away now! :)<br><br>First off:<br>BACKUP any important files, as you would do when using any other 3rd party DLLs!!! I won't be held responsible for anything bad happening.<br><br><br>For version 1.88 only, adds 4 commands. Note that this isn't a 'hack', they're just regular DX7 functions wrapped in a DLL.<br><br>On with the good stuff...<br><br>Set &amp; Get texture stage filtering:<br>SetTextureStageState()<br>GetTextureStageState()<br><br>Set &amp; Get the Mipmap LOD bias:<br>SetMipmapLODBias()<br>GetMipmapLODBias()<br><br><a href="http://www.tomspeed.com/texture_filters/texture_filters_dll.zip" target="_blank">http://www.tomspeed.com/texture_filters/texture_filters_dll.zip</a><br><br>Example in the zip, lemme know here if anything aint working.<br><br>Cya!<br>Tom <br><br></td></tr></table><br>
<a name="459486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks so much Tom. The ass kissing starts with me I guess. :D <br><br></td></tr></table><br>
<a name="459487"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit: Updated the code in the zip, you can change the anisotropic level so now when you tell a texture to use it, you see results (GFX card permitting!)<br><br>Looks smoother. <br><br></td></tr></table><br>
<a name="459488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ion-Storm</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have done, in a few lines of code, summat ive been asking for for nearly 2 years... Well done mate..<br>Screw the compatability...!!<br>Thanks. <br><br></td></tr></table><br>
<a name="459499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yaaaaaaaaaaaaaaaaaaaaaayyyyyyyyyy!!!!!!!!!!!!! <br><br></td></tr></table><br>
<a name="459502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks man... great work... <br>Would it be possible to make a working antialias function now that we can access the dx7 interface? <br><br></td></tr></table><br>
<a name="459509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> really nice :)<br><br>2 more things to go ;)<br>*DDS support and SetRenderTarget for texture / image buffers* <br><br></td></tr></table><br>
<a name="459546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is very very cool! <br><br></td></tr></table><br>
<a name="459572"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> he scouse  it works here u know !<br><br>mfg panno <br><br></td></tr></table><br>
<a name="459582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) <br><br></td></tr></table><br>
<a name="459595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bouncer:<br><br>From the SDK...<br><div class="quote"> Note  If your application will use antialiasing, it should create the render-target surface with the DDSCAPS2_HINTANTIALIASING capability flag. Applications that omit the flag might suffer from poor performance when antialiasing is enabled, or might not receive antialiasing serices at all. <br></div><br><br>As far as I can tell the DX7Device created by B3D hasn't been created with the dwCaps2 flag 'DDSCAPS2_HINTANTIALIASING' (would be present in &lt;dwCaps2&gt; for the backbuffer if it was active). This is what the backbuffer looks like after a Graphics3D() call:<br><br>Pntr: 1498440<br>ID: 5<br>Width: 800<br>Height: 600<br>Pitch: 3328<br>Depth: 32<br>dwFlags: 4111<br>&lt;dwCaps&gt;<br>DDSCAPS_BACKBUFFER<br>DDSCAPS_COMPLEX<br>DDSCAPS_FLIP<br>DDSCAPS_3DDEVICE<br>DDSCAPS_VIDEOMEMORY<br>DDSCAPS_LOCALVIDMEM<br> <br>&lt;dwCaps2&gt;<br>NONE<br> <br>I'm not familiar with the AA problem, but maybe this is it?<br><br>Tom <br><br></td></tr></table><br>
<a name="459603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom - excellent work! Cheers. <br><br></td></tr></table><br>
<a name="459605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Odd.. I get a memory access violation.<br><br>Set texture path correctly, and it shows up initally, but errors out with a memory violation on any of the lines used in the DLL.<br><br>- .decls and DLL put in userlibs<br>- path corrected for gothic3.jpg<br>- runs okay and displays initial image, but trying to change it causes the crash.<br><br>Blitz3D 1.88<br>Nvidia 5700 Ultra<br>DirectX 9.0b<br><br>Any ideas?<br><br>+BlackD <br><br></td></tr></table><br>
<a name="459607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even more odd - got it working with a reboot, however - changing the Mipmap LOD Bias appears to have no effect on my system. Somewhat odd considering the specs support it easily. Texture filter works fine though. <br><br></td></tr></table><br>
<a name="459608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice work, Tom, thanks. It's a shame we have to add this stuff via DLL, but it's very generous of you to put these things together. <br><br></td></tr></table><br>
<a name="459609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's your specs &amp; drivers BlackD?<br><br>What command exactly causes a crash? <br><br></td></tr></table><br>
<a name="459610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's alright. I fixed the crash issue with a reboot. Haven't rebooted for about 3 weeks so figure it was an artifact from something else. :)<br><br>But the problem now is, the mip'ing bias doesn't work. I could take screenshots if you want, but basically - wether Mipmap LOD bias is 1 or 100, makes no visible difference. On a 5700 Ultra, I'd imagine it should. I'll try some fixes tomorrow (drivers are about 2 months old - but the functions you're using have been around for 3 years so I don't see a problem there?) and something else. AFAIK, a difference even of 5 should be clearly distinct. :)<br><br>But right now, I need sleep. Mmmm.. sleep. <br><br></td></tr></table><br>
<a name="459719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >elias_t</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. I was excited about this, But this doesn't work here.<br>I get a memory access violation using the demo and for every command I try to use.<br>Nvidia FX5700 / Athlon 2200 XP directx 9.0c. <br><br></td></tr></table><br>
<a name="459728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @BlackD<br><br>Are any of the settings on your GFX card overriding your Blitz commands? I had this problem once because I had set my GFX card to use 'Max Quality' which then overrode any software settings and ALWAYS gave me max mipmapping etc.<br><br>Just a thought :)<br><br>Oh, and this sounds good. Gonna download and have a look :) <br><br></td></tr></table><br>
<a name="459745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woah, access dx7 interface! I nearly closed the window until I read that :)<br>Nice job. <br><br></td></tr></table><br>
<a name="459758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tom, very much appreciated.<br><br>Marg <br><br></td></tr></table><br>
<a name="459807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> FYI<br>I also get no mipmap lod changes.<br>winXP, geforce GTS pro/32 <br><br></td></tr></table><br>
<a name="459821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Elias, almost same spec as mine. I'm using 66.93 drivers at the moment, what you using? <br><br></td></tr></table><br>
<a name="459847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Hi. I was excited about this, But this doesn't work here. <br>I get a memory access violation using the demo and for every command I try to use.  <br></div><br>I fixed this by re-running the Blitz3DUpdate188.exe, then rebooting. Give it a shot. :)<br><br>Now just gotta try and get the mipmap lod working. Antialiasing and ansitropic filtering are both set to application controlled. Direct3D settings are set to quality. Installing new vid drivers now.. brb :) <br><br></td></tr></table><br>
<a name="459867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well - I've removed PowerStrip, reinstalled nvidia drivers, set them to default settings, made sure everything is application-controlled, and it still doesn't apply mipmap LOD changes. However, this windows install is about 9 months old and has had a lot of stuff go through it so a reinstall would probably fix it but MEH! Not gonna do that just yet. :) <br><br></td></tr></table><br>
<a name="459879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fantastic work Tom, it's clear that these things could make a major difference to Blitz Basic in general.  The difference with the filtering is very cool.   <br><br>For me, the facility to use Anti-alias would be a godsend - it looks as though you are on the right track.  Some people have problems with AntiAlias that it doesn't turn on with their cards, whereas other people have it so that it doesn't turn OFF after being called. <br><br></td></tr></table><br>
<a name="459931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone whos having a problem, you just dont have the latest Blitz3d. :) <br><br></td></tr></table><br>
<a name="460014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not quite Zenith - as you'd notice if you'd read the posts. I have the latest Blitz3D, the latest video card drivers, no third-party video software interfering, up-to-date windows XP, an nVidia 5700 Ultra video card, all video settings set to enable applications to control mipmaps, and guess what - it doesn't work. It's not an nvidia problem, as other folk with nvidias have it working fine. Computer issues are not always so simplistic as "update your Blitz3D" as any technician will tell you. :)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="460051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> elias_t:<br><br>Are you using v1.88?<br><br>Does this print a non 0 value?:<br><br>Graphics3D 800,600,32,2<br>Print SystemProperty$("Direct3DDevice7")<br>WaitKey<br>End<br><br><br>Pretty sure you'd have to have your display settings for various features on something like: 'Application Controlled' else your display drivers will override stuff you try to do in B3D. <br><br></td></tr></table><br>
<a name="460070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlackD - sorry for not reading the latest posts. I'm a dick. :( <br><br></td></tr></table><br>
<a name="460074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aww .. don't take it so hard. :) Glad you've got it working ok. :) <br><br></td></tr></table><br>
<a name="460094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> It all works here, as well as can be expected on my old card anyway.  I am not sure why the example program was using cleartexturefilters in conjunction with changing the LODbias.  Don't you need a mipmapped texture to see the difference?  So I changed it some, as below.<br><br>Anyway setting lodbias to -1 produces a quantum leap in mipmap quality particularly on terrains.  Well in fact -1 is the only value that did anything sensible on my card. It is so much better though, I will be using it all the time. <br><br>Many thanks Tom. <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; DLL for tweaking Texture Filter states
; must have blitz3d version 1.88 update


; GetTextureStageState(Direct3DDevice7, D3D_TEXTURE_STAGE_STATE_TYPE, index%)
; SetTextureStageState(Direct3DDevice7, D3D_TEXTURE_STAGE_STATE_TYPE, index%, value%)

; GetMipmapLODBias(Direct3DDevice7, index%) ; B3D Default = 0.0
; SetMipmapLODBias(Direct3DDevice7, bias#, index%)

; In both Set.. commands, the index can be 0 to 7 to specify
; 1 texture stage, Or 8 To set ALL 8 texture stages at once

; Renamed to more sensible names

;D3D_TEXTURE_STAGE_STATE_TYPE
Const D3D_MAGFILTER			= 16	; D3DTEXTUREMAGFILTER filter To use For magnification
Const D3D_MINFILTER			= 17	; D3DTEXTUREMINFILTER filter To use For minification
Const D3D_MIPFILTER			= 18	; D3DTEXTUREMIPFILTER filter To use between mipmaps during minification
;Const D3D_MIPMAPLODBIAS	= 19	; D3DVALUE Mipmap LOD bias

;D3DTEXTUREMAGFILTER
Const MAG_POINT					= 1
Const MAG_LINEAR				= 2 ; B3D default
Const MAG_FLATCUBIC			= 3
Const MAG_GAUSSIANCUBIC	= 4
Const MAG_ANISOTROPIC		= 5

;D3DTEXTUREMINFILTER
Const MIN_POINT					= 1
Const MIN_LINEAR				= 2 ; B3D default
Const MIN_ANISOTROPIC		= 3

;D3DTEXTUREMIPFILTER
Const MIP_NONE					= 1
Const MIP_POINT					= 2
Const MIP_LINEAR				= 3 ; B3D default 



Graphics3D 800,600,32,2
MoveMouse 400,300

dev7=SystemProperty$("Direct3DDevice7")

cam=CreateCamera()
CameraRange cam,.1,1000
PositionEntity cam,0,.5,-4

light=CreateLight()
RotateEntity light,20,10,0

cube1=CreateCube()
ScaleEntity cube1,1,1,5
RotateEntity cube1,-30,0,0
tex1=LoadTexture("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\castle\castle\gothic3.jpg",1)
If tex1=0 Then RuntimeError("Cube texture not found")
ScaleTexture tex1,2,.5
EntityTexture cube1,tex1

terrain=LoadTerrain("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\castle\environ\heightmap_256.BMP")
If terrain=0 Then RuntimeError("Heightmap not found")
tex2=LoadTexture("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\castle\environ\terrain-1.jpg")
If tex2=0 Then RuntimeError("Terrain texture not found")

ScaleEntity terrain,2,50,2
ScaleTexture tex2,20,20
EntityTexture terrain,tex2


MinFilter=2
MagFilter=2
MipFilter=3
bias#=0.0

While Not KeyHit(1)
	If KeyHit(2)
		MagFilter=MagFilter+1 : If Magfilter&gt;5 Then MagFilter=1
		SetTextureStageState(dev7,D3D_MAGFILTER,0,MagFilter)
	End If

	If KeyHit(3)
		MinFilter=MinFilter+1 : If MinFilter&gt;3 Then MinFilter=1
		SetTextureStageState(dev7,D3D_MINFILTER,0,MinFilter)
	End If

	If KeyHit(4)
		mipFilter=MipFilter+1 : If MipFilter&gt;3 Then MipFilter=1
		SetTextureStageState(dev7,D3D_MIPFILTER,0,MipFilter)
	EndIf

	If KeyHit(5)
		bias=bias-1
		SetMipmapLODBias(dev7,bias,8)
	EndIf

	If KeyHit(6)
		bias=bias+1
		SetMipmapLODBias(dev7,bias,8)
	End If

	If KeyDown(57) Then TurnEntity cube1,1,0,0

	TurnEntity cam,-MouseYSpeed(),0,0
	TurnEntity cam,0,-MouseXSpeed(),0,1
	MoveEntity cam,0,0,MouseDown(1)-MouseDown(2)
	MoveMouse 400,300	

	RenderWorld

	If MilliSecs()&gt;time Then time=MilliSecs()+1000 : fps=frame : frame=1 Else frame=frame+1

	Text 0,0,fps
	
	If KeyHit(59) Then htext=Not htext ; F1 enables text

	If htext Then
		Text 0,12,"Keys 1,2 &amp; 3 to change between filtering levels"
		Text 0,24,"MagFilter "+GetTextureStageState(dev7,D3D_MAGFILTER,0)
		Text 0,36,"MinFilter "+GetTextureStageState(dev7,D3D_MINFILTER,0)
		Text 0,48,"MipFilter "+GetTextureStageState(dev7,D3D_MIPFILTER,0)
		Text 0,60,"Mipmap LOD Bias (Keys 4 &amp; 5 changes): "+GetMipmapLODBias(dev7,0)
	EndIf
	
	Flip
Wend
End
</textarea> <br><br></td></tr></table><br>
<a name="460101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hahaha! <br><br>Note my signature.. <br><br>Thanks DJ. Removing ClearTextureFilters did the trick. No idea why its there either, and didn't notice it. Was too busy trying to change the LOD settings manual to effect an actual difference. Now what I'm wondering is though, how come for some people the LOD is working correctly with "cleartexturefilters" and for some people it isn't? Or maybe the people who said it was working nicely didn't know what they were looking at and simply thought "mmm.. blurred is better than pixelated.. nice work!"<br><br>GW! Take out the ClearTextureFilters line.. mipmap LOD will work. :D<br><br>Now that the ansiotropic filtering is working (couldn't see it before ofcourse, with the texture mag filter being cleared :p).. WOW! :D Nice work Tom. :)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="460105"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> The LOD Bias can be any float b.t.w (not steps of 1.0 in my demo)<br><br>Before I expand on this any further I'm just writing some Caps checking functions. Send a few type pointers to a few calls then you'll get something like this:<br><br>(debug output)<br><a href="http://www.tomspeed.com/DeviceCaps.txt" target="_blank">http://www.tomspeed.com/DeviceCaps.txt</a><br><br>&gt;0 = supported<br><br>Then simply do:<br><br>If (pcaps\RasterCaps And D3DPRASTERCAPS_MIPMAPLODBIAS)<br>  ; Safe to tweak the Mipmap LOD Bias<br><br>It may seem over the top to get all the caps, but they may come in useful later. I should have done this from the start. (As the blonde bad guy said in Segals 'Under Siege2'..."Assumption is the mother of all f**k ups!") :)<br><br>The only downside to using some features is that you may need to do multipass renders to use them exclusively.<br><br>Blitz3D renders all non-hidden entitys when RenderWorld is called. To make use of a certain feature on just 1 entity, you would need to render your other entitys, hide them, then show &amp; set the texture stages or whatnot for 'this' entity, render it, e.t.c<br><br>Another example would be something Fredborg mentioned, rendering 1 entity with Wireframe:<br><br>Render scene, hide scene, show entity, set wireframe shade mode, render, e.t.c.<br><br>But there's no harm in trying :)<br><br>Cya!<br>Tom<br>p.s The more I mess with the SDK, the more sympathy I have for Mark :P <br><br></td></tr></table><br>
<a name="526074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm.. does anyone else have this available now? the links broken and ive got a need for it :) <br><br></td></tr></table><br>
<a name="526094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have a link or can email this one to me?<br>Thanks <br><br></td></tr></table><br>
<a name="526096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this:<br><br><a href="http://www.tomspeed.com/texture_filters/texture_filters_dll.zip" target="_blank">http://www.tomspeed.com/texture_filters/texture_filters_dll.zip</a> <br><br></td></tr></table><br>
<a name="602010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Apologies for reviving the topic, but...<br><br>I just tried this out, and it doesn't seem to compile anymore - I get the 'oops' error. Does anyone use this DLL in their work, or is there any alternative DLL which can be used to achieve the same result? <br><br></td></tr></table><br>
<a name="602031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm me too<br><br>IPete2. <br><br></td></tr></table><br>
<a name="602120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> ohh, i had a check to non update filters if setsystemproperties failed... so i didn't notice it isn't working now!<br><br>I have testes with 1.88,1.90 and 1.91 and nothing...<br><br>what's the problem? the latest nvidia drivers?<br><br>:( <br><br></td></tr></table><br>
<a name="602154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm on ATI here. Surely it should still compile regardless of drivers too. <br><br></td></tr></table><br>
<a name="602202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> You maye need to change this line, if it says 'If SetSystem.....' add in a Not like so:<br><br>If Not SetSystemProperties(d3d,dev7,draw7,hwnd,instance) RuntimeError "Ooops!"<br><br>Or vice versa, I changed something and forgot to update the code, "Ooops!" :P<br><br>I'm all done trying to get 'this, that and the other' working in a DLL, a lot of stuff in Blitz3D is hard coded, i.e whatever you set it to renderworld will overwrite it.<br><br>Some kinda release version coming in next few days, else may I never drink another cup of tetley ever again! :) <br><br></td></tr></table><br>
<a name="602268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oops, you're right. so my original file is working anyway... hehe... <br><br></td></tr></table><br>
<a name="603856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't blame you for not wanting to touch B3d much more. However, I really appreciate you releasing this hack to the community. It makes a big difference with my game and I'm sure it does for other people too.  I'll actively look forward to a new release so I can use it again! ^-^ <br><br></td></tr></table><br>
<a name="764895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to necro this thread, but was a final version of this DLL ever released? I'd like to compile libraries and DLLs in my Blitz 3D 'folder' so that I can back them up for the future, if I'm using them in my game. <br><br></td></tr></table><br>
<a name="819359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have a copy of this they can upload? <br><br></td></tr></table><br>
<a name="819463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> shouldn't these be built in Blitz3D? <br><br></td></tr></table><br>
<a name="972981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone have this?  If you do can you host it or something.  I really need these commands to fix a few things. <br><br></td></tr></table><br>
<a name="972983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check out your post in the blitz showcase forum. Krischan has posted some stuff on the .dds textures. <br><br></td></tr></table><br>
<a name="972984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I just want to use the one command though.<br><br>SetMipMapLODBias<br><br>It's floating around here somewhere in a .dll.  Just have to find it. <br><br></td></tr></table><br>
<a name="972988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just google searched it and came up with 2 results. This page and one that says dx7.dll<br><br>http://www.google.com/search?hl=en&amp;client=firefox-a&amp;rls=org.mozilla%3Aen-US%3Aofficial&amp;hs=Awc&amp;q=SetMipMapLODBias+in+DLL&amp;aq=f&amp;oq=&amp;aqi=<br><br>Is that it? <br><br></td></tr></table><br>
<a name="972995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope that's not it.  I'll keep looking... <br><br></td></tr></table><br>
<a name="973002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe that DLL is part of the devil shadow system. If you look in the decls you'll find SetMipMapLODBias.<br>Download here:<br><a href="http://devil-engines.dev-ch.de/Downloads/DSS_1.35u.zip" target="_blank">http://devil-engines.dev-ch.de/Downloads/DSS_1.35u.zip</a> <br><br></td></tr></table><br>
<a name="973013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have it but I'm not willing to distribute it without Tom's say-so.  I'm not sure where he's gone, haven't spoken to him in ages. <br><br></td></tr></table><br>
<a name="973038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup Warner, I already got the Devil system and tried it.  Didn't notice a difference whatsoever.<br><br>Tom released it to the public at one point so I doubt he's renigged on the offer.  His website is down but it's up to you.  I'm assuming it's the same DX7.dll though so it should work the same in Devil's .dll I would hope.<br><br>I set the mipmapbios to 0, 0.1, 1, 8, 20, 100,1000,10000,100000,10000000<br><br>And no difference...<br><br>Tried setstagefilter thing too...still banding on the runway.<br><br>I've spent too much time toying with mipmapping so I'll move on to other stuff.  Hopefully someone knows how this works and will shed some light. <br><br></td></tr></table><br>
<a name="973070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can I edit the TextureStageState <b>individually</b> for each texture?<br><br>You specify the "layer" from 0 ~ 7 (or 8 if you want them all), but <b>for what entity\texture?!</b><br><br>Cheers<br><br>PS: the pack does not include the source that Tom made available, it's just various DLLs + DECLS. <br><br></td></tr></table><br>
<a name="973088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that is not possible. If so, you should set SetTextureStageState between rendering two entities. Maybe you can render in multiple passes:<br><pre class=code>
	CameraClsMode camera, True, True
	ShowEntity ent1
	HideEntity ent2
	SetTextureStageState ..etc
	RenderWorld ;----&gt;render first entity
	HideEntity ent1
	ShowEntity ent2
	CameraClsMode camera, False, False
	SetTextureStageState ..etc
	RenderWorld ;----&gt;render second entity
	Flip
</pre> <br><br></td></tr></table><br>
<a name="973093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get what you mean, but I'm almost certain there <b>is</b> a way to do it for each texture. Someone out there is hiding the gold. <br><br></td></tr></table><br>
<a name="973348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, funny how in about 5 thousand advanced forum users nobody knows the answer.<br><br>Just so I don't look like an ice-hole, here is the Dx7 DLLs pack:<br><br><a href="http://www.geocities.com/rafael_nvg/DX7-Libs_for_Blitz3D.zip" target="_blank">http://www.geocities.com/rafael_nvg/DX7-Libs_for_Blitz3D.zip</a><br><br>The question still remains, if anybody would be so kind as to answer it! <br><br></td></tr></table><br>
<a name="973434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe they are all on vacation? I think the idea behind SetTextureStageState is that you change the texture state per stage. Maybe there is another command to change it per texture? Per entity is not going to work, since DirectX doesn't use entities. <br><br></td></tr></table><br>
<a name="973435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> It don't think there is something like that (although I'd be glad if it did!), as little as I know of Dx7. It seems that when you are going to render every entity, you set up the textures for each object and then render them. Something like:<br><pre class=code>
SetTextureStageState(...)
SetTextureStageState(...)

SetTexture( 0, Ground )
SetTexture( 1, Grass )

DrawPrimitiveUP(...) //...or some other method of drawing the object.

It draws a certain mesh using the current texture layers, so, if another mesh uses different textures, then the SetTexture functions would need to be called again to set different textures and THEN render that other mesh.
</pre><br>And then doing that for every single object in the scene. This is what Blitz3D probably does when we call RenderWorld(), for every object in the scene it iterates through that logic. <br>That's why we don't have how to control it using SetTextureStageState, because when we call RenderWorld() the stage states get over-written or something like that.<br><br>In the end, we need to find a way to alter the state value to which RenderWorld() set a specific texture to. Having access to that, we can specify whatever we want the states to be.<br><br><a href="http://www.tesko-sport.ru/temp/texture.gif" target="_blank">Looking at the texture structure that MikhailV came up with</a>, there is a certain memory offset that holds the current BLEND value for that texture, set up with TextureBlend. It seems that RenderWorld() uses this value to set up the appropriate Stage State (in which case we have 5 to select from within Blitz3D, the available Texture Blends). But Direct3D 7 has much more than 5, and so if there was a way to write a memory value to the Blend offset in the texture structure and have RenderWorld() use that value, then we would have control over the stage state value. <br>I've tried writing some values to it but it didn't make any difference. <br><br></td></tr></table><br>
<a name="973465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kryzon: It is really necessary for you? What for?<br>Now (with FastExt library) it is possible to establish demanded LodBias &amp; Filtering for all scene. I can make it for each texture, but I do not see sense in it... <br><br></td></tr></table><br>
<a name="973483"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alternatively, you could write your own RenderWorld function. That way you could render anything the way you want to. That would require a good insight in how the entities and textures are set up. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
