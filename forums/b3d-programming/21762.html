<!DOCTYPE html><html lang="en" ><head ><title >Looking for the best particle system. Where is it?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Looking for the best particle system. Where is it?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Looking for the best particle system. Where is it?</a><br><br>
<a name="222732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Reda Borchardt</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dear All,<br><br>I seem to recall that either Halo or Swift sold a particle system. But I cannot find it anywhere!<br><br>I need the following:<br><br> - Recycling of existing particles (instead of the slow destroying and creating)<br> - Lifetime / Cycle management (event based / types)<br> - Custom tris instead of 3D sprites<br> - Rock solid / Efficient / Scalable<br><br>Where is it. I am prepared to shelf out some money for it.<br><br>Kind regards<br>Reda Borchardt <br><br></td></tr></table><br>
<a name="222736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MarkT</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> im working on a particle system right now with all those features but im afraid i have alot more to do to it before its ready for any sort of release. <br><br></td></tr></table><br>
<a name="222747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> well personaly to me particle systems are some of the fun parts to create. and its quite an easy concept even if there lots of cool stuff u can make to optimize the basics can be made in a night. <br><br></td></tr></table><br>
<a name="222756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> My old particle system is not currently available.<br><br>My new particle system is on hold until Mark implements zbuffering for surfaces which use vertex alpha.  Without that you are either limited to multiply/add blend, or you have to use animated textures with animated alpha in order to make the particles fade in/out.<br><br>Single surface particle systems are only about 2x as fast as systems that use multiple entities, at least on mid-range 3d cards.  And they limit the effects you can create a lot.  For example, a lot of the particle effects you see in movies use solid objects rather than little flat 2D shapes.  Like the dragon fire in Shrek was made with brightly colored spheres with a 2d glow superimposed over them.  Doing the same kind of thing with single surface particles would require a TON of particles, whereas in shrek a long burst of dragon flame only used maybe 100 spheres max and it looked a ton better.<br><br>I think maybe I will experiment in my tank game with rendering smoke as a set of 3d spheres instead of the current 2D shapes I have right now which don't look that cartoony.<br><br>The nice thing about a multiple-entity particle system is that each particle can have lots of polygons and thus do a lot more.  Like you can make a particle a sphere, or a torus, or a cylynder or cone.  And that can save you tons of particles. <br><br></td></tr></table><br>
<a name="222814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shawn, the particle system I use in my stuff uses alphaed png sprites which I then fade in/out uing the entityalpha command and it works fine, no zbuffer issues at all. <br><br></td></tr></table><br>
<a name="222815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Shawn is refering to single surface particle systems, not using entity alpha but vertex alpha. Which has zbuffer issues. <br><br></td></tr></table><br>
<a name="222820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, what he said. :-) <br><br></td></tr></table><br>
<a name="222824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surely the z-order issue is the same whether you use vertexalpha or "hardwired" animated alpha? <br><br></td></tr></table><br>
<a name="222851"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> i get the feeling its time to have a alook at shrek again when i get home :D <br><br></td></tr></table><br>
<a name="222865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look at the "making of" extras.  They show part of how the particle effects were done for the draogn chase scene in the castle. <br><br></td></tr></table><br>
<a name="222868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah yeh. i get the feeling i seen that part :) gotta pay alil extra attention to it this time :) <br><br></td></tr></table><br>
<a name="222971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Surely the z-order issue is the same whether you use vertexalpha or "hardwired" animated alpha?"<br><br>Nope!<br><br>Entites which have alpha channels, or which use entity alpha are rendered in a second pass after the solide parts of a scene are rendered.  During this pass, Z writes are disabled, but Z checking is enabled. <br><br>However, when Mark implemented vertex alpha, for some reason he neglected to have the entities that use the vertex alpha EntityFX flag check the zbuffer as they are being written.<br><br>So as it currently stands, vertex alpha is all but useless.  Useful for a few limited effects, but not for widespread use.<br><br><br>Space_Guy:<br>Another movie with good particle effects is "The Road to El Dorado".  They show in the extras how they used a realtively few simple 2D particles with animated textures to create highly realistic effects like a fountain with water that splashes and spreads out along the ground.<br><br>It's also a really good movie too. :-) <br><br></td></tr></table><br>
<a name="223012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh - I never knew vertex alphaed objects don't check the z-buffer... I guess that due to some quirks of the ways I am doing things, this problem has miraculously failed to crop up for me. Er, hooray!<br><br>I just checked my game, and it certainly seems that they ARE checking against the z-buffer in my case (I only ever use the z-buffer in a special compatibility mode so I had to check to be sure - normally the game is just one big manually sorted surface). One thing is that all my vertex alphad stuff is textured with alpha masked textures... maybe that makes a difference? <br><br></td></tr></table><br>
<a name="223016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a single surface particle system working using vertex alpha and alpha masked textures and get no z-buffer problems at all. <br><br></td></tr></table><br>
<a name="223019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Litobyte</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.geocities.com/gsclano/blitz3D.html" target="_blank">http://www.geocities.com/gsclano/blitz3D.html</a><br><br>or the Weibo one is also good...and FREE :-)<br><br>But I'd wait a next b3d update before to start a so long project Reda :)<br><br>I'm getting TONS of bug (not in the source code of course) from testers, they complain (win2000 and winXP) users of a lot of things, I will be more precise soon.<br><br>They are about Changing resolution with Endgraphics - Graphics3D command, win98 is very slow in doing this, but it does thousand of times with no problems.<br><br>I tried a simple program with no resources, and is able to switch resolution 100 times (on win2000) without problem.<br><br>This is the (working on all the OS) example I used:<br><br><pre class=code>
Global gwidth=800,gheight=600
Global counter=0

Graphics3D gwidth,gheight,16

cu=CreateCube()
c=CreateCamera()

While counter&lt;100
	counter=counter+1
	cleanupandgo()
Wend


Function cleanupandgo()

Text 0,0,"Hi, test #"+counter
Flip

EndGraphics

If GfxMode3DExists(gwidth,gheight,16)
	Graphics3D gwidth,gheight,16
	SetBuffer BackBuffer()
Else
	RuntimeError "Unable to init video mode: "+gwidth+"x"+gheight+"x"+bitdepth
	End
EndIf

End Function

</pre><br><br>So the problem seems about EndGraphics make loose the Global Variables (wow quite a not small bug if so) after being called by the same EXE 6 - 7 times...very bad if you expect to produce a huge complete 3D game with it.<br><br>I will try to write the same source code with more resources and variables so to be able to reproduce the bug.<br><br>I think this is the first time anybody finds that.<br><br>Am I right ? <br><br></td></tr></table><br>
<a name="223115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> "One thing is that all my vertex alphad stuff is textured with alpha masked textures... maybe that makes a difference?"<br><br>It may.  I will have to do a test to see.  <br><br>I'm pretty sure aobut this vertex alpha thing, cause someone tried to write a terrain engine using an alpha blending technique I suggested, and they ran into a problem and I tested their code and it seemed like vertex alpha was to blame for the improper sorting. <br><br></td></tr></table><br>
<a name="223141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the tip using spheres. im far from shrek gfx but it did make some effects alot lively :)<br>ill be working more on this. <br><br></td></tr></table><br>
<a name="223173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >makakoman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> For everyone debating the 'Vertex Alpha' question, this text is from Mark's version history:<br><br>Vertex Alpha has been added, via an extra, optional parameter on the end of VertexColor.<br>This is currently rather limited: polys are NOT sorted for you, and you'll need to use the<br>new entityfx value of 32 which 'forces' alpha blending even if an entity is apparantly opaque.<br>The alternative would have been to add some 'per vertex' overhead to calculate/update whether a<br>surface has at least one vertex with alpha&lt;1 - but I wasn't happy about doing this.<br><br>MK <br><br></td></tr></table><br>
<a name="223188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Im far from shrek gfx but it did make some effects alot lively :)  ill be working more on this."<br><br><br>Here's another trick.<br><br>Make a texture map which is a gradient that is bright in the center, and completely black at the edges.<br><br>Next, add a second surface to your particle sphere, and add a second sphere to that surface, which is 1.25x as large as your first sphere.<br><br>Set this second surface to add blend mode.  <br><br>Load your texture as a spherical environment map, and apply it to the second sphere.<br><br>Voila, you now have a solid glowing sphere particle.<br><br>This would be perfect for creating a fire effect very similar to the one in Shrek.<br><br>You can also probably get away with making the outer sphere pretty low polygon, though if you go too low it might introduce distortions in the blur, but if you have a bunch of them together you wouldn't notice this.<br><br><br><br>"polys are NOT sorted for you"<br><br>That just means within the object itself.  Not with regards to each object being sorted with other objects in the rest of the scene, and it does not refer to zbuffering. <br><br></td></tr></table><br>
<a name="223189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, we know that the polys aren't sorted back to front - that has always been the case with transparent stuff in blitz though. What sswift is saying is that vertexalpha polys don't seem to check against the z-buffer either; a rather more serious problem... Is it a problem with entityfx 32? Is it a problem with sswift forgetting to set entityfx 32? I can't say. All I know is it's working for me... <br><br></td></tr></table><br>
<a name="223235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I didn't forget to set Entityfx 32.  In fact, you don't even see any alpha in the vertices unless you set Entityfx 32! <br><br></td></tr></table><br>
<a name="223250"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> In that case, I guess it's a problem with entityFX 32, which is overridden by the use of "regular" alpha? <br><br></td></tr></table><br>
<a name="223260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Space_guy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interessting ideas sswift. too bad i have to sit all day now at work before i can try em out hehe <br><br></td></tr></table><br>
<a name="223326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> " In that case, I guess it's a problem with entityFX 32, which is overridden by the use of "regular" alpha?"<br><br>Well if you are correct, and your stuff is working right, then yeah, that is what I was thinking might be happening.<br><br>Forgive me for not taking your word on it, but I don't take anyone's word for anything. :-)  <br><br>When I was working on System Shock 2, I noticed the transparency in the engine was wrong... Whenever a computer with a transparent monitor would be visible through a window, the transparent parts would be drawn in front of the window.<br><br>I brought this to the attention of him, but he could not see the problem!  Somehow he was incapable of seeing how obviously wrong the transparency order was.  One look at it and you could see that the computer monitor didn't have a milky tone to it like everything else behind the window.<br><br>He insisted on doing a test, and even when he did THAT he couldn't see it.  It took like 20 minutes to convince him something was in fact awry.<br><br>(What was happening was the game was drawing transparency front to back.)<br><br>The moral is, programmers can believe something looks right when it actually does not. :-)<br><br>Now where's that terrain rendering test.  That would let me test this theory of yours.  That would be pretty cool if indeed the case! <br><br></td></tr></table><br>
<a name="223330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, crap! <br><br></td></tr></table><br>
<a name="223389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >makakoman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit <br><br></td></tr></table><br>
<a name="223407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't tihnk what is the problem?<br><br>If you'll notice I posted something in the General forum.  I fixed your code.  It works fine now. <br><br></td></tr></table><br>
<a name="224064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chroma</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> The bonus of using the built in 3d sprites is the auto-facing of the sprite towards the camera.  I have an emitter-based particle engine that uses pools of pre-created sprites.  You attach the emitter to an entity and set basic parameters like lifespan, smoke size, particles per second, and fade rate.  VERY realistic looking and a breeze to use.  Are you interested in this?<br><br>I would NOT recommend using a catch-all particle engine but many different ones that are specific in their purpose.  For instance, you should have a separate particle engine for smoke, fire, rain, snow, etc.  Much more efficient that way. <br><br></td></tr></table><br>
<a name="224068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd be interested in something like that, or at the very least some AW1946 news. ;D <br><br></td></tr></table><br>
<a name="224473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wiebo</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go to my site to download my particle system, which seems to work the same as Chroma's! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
