<!DOCTYPE html><html lang="en" ><head ><title >Regulating anim speed with delta timing?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Regulating anim speed with delta timing?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Regulating anim speed with delta timing?</a><br><br>
<a name="409744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, can anyone tell me how to go about setting the global animation speed parameter for UpdateWorld, for a program that uses delta timing to regulate gamespeed. I've tried using the delta timing multiplier variable for the 'anim_speed#' UpdateWorld parameter, but this causes the animations to run too slowly.<br><br>Basically I just want to regulate the speed of the animations so that they run at the same base speed on different systems. <br><br></td></tr></table><br>
<a name="409751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are not using frame tweening, then you need not specify any value at all after updateworld. <br><br></td></tr></table><br>
<a name="409754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you're thinking of the tween# parameter for RenderWorld, Sswift.<br><br>What I'm talking about is setting the value of the anim_speed# parameter for UpdateWorld to regulate game speed on computers running at different speeds, for a delta time regulated program.<br><br>I've tried running the C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\anim\anim.bb program both with and without a 'Delay( 100 ) in the main loop to simulate different speed computers, and there is a significant difference in the anim speed. So regulation of the base animation speed is definately required. <br><br></td></tr></table><br>
<a name="409756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Axe:<br>I do not use any value on updateworld in my programs.  However, I also do not use the standard animation commands.  In fact, I don't even use animation.  But if I DID use animation, then I would manually specify the animation frame I want for each entity rather than muck about with updateworld. Automatic animation updates might seem nice, but how often do you REALLY want an animation to play back at the same speed?  Perhaps you want the player to pull put a new gun at the same speed every frame, but if you have a car, or a player running, you want the tires and the players legs to animate at the same speed they're moving.  So you need to control that manually.  I beleive the command I'm thinking of is called SetAnimTime.<br><br>If you really want to use the updateworld command though, I can't help you.  I'm looking at the command right now myself, and frankly these help instructions for this particular command are atrociously bad.  It says the normal value is 1.  That is the normal playback rate.  What is the normal playback rate?  Is that stored in the file?  Does the file specify that the animation should play back at 60 frames per second?  And if it plays back at 60 frames per second always no matter what, why would you need to change the value for updateworld to get the animation to play back at the right speed?  Clearly that is not what it is doing, if in fact the animation speed is changing on you, because the animation speed should be tied to the timer and not to how many times you call renderworld.  <br><br>So I don't know what is going on.  It's too confusing.  Sorry! :-)  I suggest you animate stuff manually.  I don't use that tweening crap for the same reason.  It is much simpler to use delta time and animate things manually. <br><br></td></tr></table><br>
<a name="409767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think if you set the animation frame manually, you won't get any smooth transition between animations. <br><br></td></tr></table><br>
<a name="409847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that only applies to md2 animations.  B3D's you can set the anim frame to any float value. <br><br></td></tr></table><br>
<a name="409863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Axeman:<br><br>Set the speeds using the "Animate" command so the animations look right on the computer you're testing on.<br><br>Then, set "Test_FPS" to the typical FPS of your game on that same computer.<br><br>Then, use the following code, or something equivalent, to calibrate the animations.<br><br><br><pre class=code>
Global Max_FPS = 60	; Maximum FPS on any computer
Global Test_FPS = 35    ; Typical FPS on test computer
Global FramePeriod = 1000 / Max_FPS

Global FrameDiff#
Global FrameFactor#
Global FPS#		; Actual FPS on any computer


Previous = FrameTime = MilliSecs() - FramePeriod

;Main Loop

Repeat
	Now = MilliSecs()
	FrameDiff = Now - Previous
	Previous = Now
	FPS = 1000.0/FrameDiff
	FrameFactor = Float(Test_FPS)/FPS

; Frame limiter
	While (FrameTime + FramePeriod) &gt; MilliSecs()
		Delay 1
	Wend
	FrameTime = MilliSecs()

	UpdateGame()
	
	If FrameFactor &gt; 3.0 FrameFactor = 3.0 ;a "reasonable limit"
	UpdateWorld(FrameFactor)
	RenderWorld
	Flip False
Forever
</pre> <br><br></td></tr></table><br>
<a name="409881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The anim_speed parameter is very easy to use with delta time.  You just use the delta time multiplier, adjusted for a scale factor.  As in, if the animation is playing too slow when you use the multiplier straight, try doubling it:<br><br>UpdateWorld delta*2<br><br><br><br>"I beleive the command I'm thinking of is called SetAnimTime"<br><br>Hee hee.  I still giggle over having set a bad precedent by successfully "lobbying" (ie. whining to) Mark to add that command.  Poor Mark; even though the Feature Requests forum is gone, people are still super annoying about demanding new features.<br><br>I use the standard Animate command a lot, but I also use SetAnimTime a lot.  Basically, any time I don't need the exact control of SetAnimTime I use Animate because you can just fire and forget.  For example, for simple looping animations on background objects I just call Animate once immediately after loading the object and never have to worry about that object's animation any more. <br><br></td></tr></table><br>
<a name="409921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Hee hee. I still giggle over having set a bad precedent by successfully "lobbying" (ie. whining to) Mark to add that command. Poor Mark; even though the Feature Requests forum is gone, people are still super annoying about demanding new features."<br><br>What are you talking about?  I lobbied for that feature myself, and it's anything but bad precendent.  That is a great feature and one Blitz should have had from the start.  It is absurd to think that all that time Blitz had no way to set an animation to a specific frame, and even now, it has no way to do so for MD2 animations... which is the only thing preventing my shadow system from casting shadows from MD2 models.<br><br>Yeah there are a lot of bad feature requests out there, but this was a good one and very neccessesary because without it, some things are difficult, annoying, or impossible. <br><br></td></tr></table><br>
<a name="410179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info, people. I'll have a play with SetAnimTime for game animations.<br><br>What I need this for, though, is for a model viewer/game world editor program. I just need the animations to play automatically at a standardized rate so that the user can see what animations are available for a model. I'll try the suggestions above. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
