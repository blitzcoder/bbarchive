<!DOCTYPE html><html lang="en" ><head ><title >Lighting tiled 3d terrains</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lighting tiled 3d terrains</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Lighting tiled 3d terrains</a><br><br>
<a name="209261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a lot of issues with tiled 3d terrains.<br><br>Simple case:<br><br>I used textured cubes to represented wall areas, and a global light pointing down at 45,45,0. Seams were visible between the cubes. These seams disappear if I point the light straight down -- 90, 0, 0 -- but then everything looks pretty flat.<br><br>The situation got considerable worse when I used a tiled floor (eventually infinite planes don't cut it) and had my character carry a point light source.<br><br>Sorry I can't post images since I've fixed these things using pretty major hacks (there are now struts covering the seams in the walls, and I'm creating the floor on the fly as a mesh surface.<br><br>Now I'm finding that point light sources work very poorly in general and wondering if I should give up on using lights for illumination completely and just use vertex lighting and/or "burn" lighting into my textures for every tile (which seems excessive not to mention costly in textures).<br><br><img src="http://www.realgurus.com/gamedev/point_light.jpg"><br><br>Any suggestions? <br><br></td></tr></table><br>
<a name="209317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Baking the lighting into your textures is really inefficient because then you can't tile your textures.  Use lightmaps; tile the main textures, then use a second set of UV coordinates with non-overlapping texture coordinates for lightmap textures.  The lightmap textures are greyscale textures which are applied as a multiply blended layer over the main textures.  In this way your main textures are still tiled (saving lots of texture memory) but your lightmaps are not tiled (because the lighting information for each polygon must be unique.)  Assuming you use small lightmaps (shadows tend to be rather blurry anyway) multitexturing in this way saves a lot of memory.  You can generate lightmaps easily using apps like Lightbulb.<br><br>As for the problem with cracks, don't use cubes for your walls.  Instead model your walls as a seamless mesh.  Your reference to an infinite plane for the floor makes it sound like you are trying to construct the level in code.  Don't.  Model it just as you would model a character and load the model to use for your level.<br><br>Incidentally, what does any of this have to do with terrain?  The screenshot depicts an indoor scene.<br><br>*********<br><br>Nice texture on that character.  I'm pretty good at painting textures but loose folds in cloth are my downfall. <br><br></td></tr></table><br>
<a name="209391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> My system will eventually generate both indoor and outdoor terrain using tiles (I'm not talking about Blitz3D terrain objects; sorry if I caused any confusion) -- note the strange lighting artifacts on the archway in front of the character and along the bases of the walls.<br><br>[box]Baking the lighting into your textures is really inefficient because then you can't tile your textures[/box]<br><br>Well it would be tricky in other respects too. I wouldn't mind low texture re-use if the terrain tiles themselves still tiled, but even that would be tricky.<br><br>[box] Your reference to an infinite plane for the floor makes it sound like you are trying to construct the level in code[/box]<br><br>Given that I'm trying to construct content on-the-fly (from pre-made components), I don't have much of a choice. I don't *want* to construct levels by hand in advance; there are plenty of "hand made tunnel of fun" games on the market, and competing with them is, in my opinion, a waste of time.<br><br>One other option would be building a bunch of relatively small BSP-style maps and tiling them -- kind of a compromise between completely hand-made levels and completely dynamic levels.<br><br>I am also considering doing vertex lighting in code.<br><br>Oh sadly the character model model isn't my work -- it's licensed from Geo-Metricks.<br><br>Tonio <br><br></td></tr></table><br>
<a name="209846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I might be completely wrong here but for lighting on 3d objects to appear correctly mustn't you make sure that each face has it's own set of normals?<br>That is, faces can't share any vertices.<br><br>If you model your cube with only 8 vertices, 5 of the faces will share the same normal and isn't lighting based on normal direction.<br>Often the normal projection of such cubes will point from the center out through the corner.(Not actually from the center, but in that plane)<br><br>So a cube should have 36 vertices for correct lighting.<br>Well,not neccesarily 36 as some vertices could be shared when two faces resides on the same plane.<br>(For a cube 2 faces always reside on the same plane) that will give 24 vertices instead.<br><br>Try model your objects like that and see what results you get.<br><br>As i said, I may be wrong, but it makes sense to me.(though I could be totally insane)<br><br>[Edit]<br>If you have DirectX SDK installed you can use the meshviewer utility to check lighting on objects. It's also a great tool to view normals and recompute them.<br>In this tool you could also create a cube with 24 vertices and compare it to a cube with 8 vertices. <br><br></td></tr></table><br>
<a name="507337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Baystep Productions</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> A flash back from 2 YEARS AGO!!!! OMG <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
