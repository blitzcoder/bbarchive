<!DOCTYPE html><html lang="en" ><head ><title >Object and Handle Commands</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Object and Handle Commands</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Object and Handle Commands</a><br><br>
<a name="591654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bluecarrot16</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is up with the elusive Object and Handle commands??<br><br>they are listed in the B3D docs, but there is no help page for them. they are highlighted in the IDE and ive seen them used before, but i cannot find any more information on them and I beleive that they are the culprit in an "illegal type conversion" error that i keep getting.<br><br>can anybody shed some light on these commands? <br><br></td></tr></table><br>
<a name="591655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scherererer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Handle() retrieves the handle of a type instance, i.e.<br><pre class=code>
m.mytype = new mytype
h = Handle(m)
</pre><br>You can then retrieve that type for later use with the Object command<br><pre class=code>
m.mytype = Object.mytype(h)
m\blah$ = "whatever"
</pre> <br><br></td></tr></table><br>
<a name="591657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Seems to be good for <a href="/codearcs.php?code=216" target="_blank">creating a direct reference from an entity to its container type in order to avoid iterating through the entire list of instances</a>. <br><br></td></tr></table><br>
<a name="591663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Primarily useful for polymorphism - when you want a field to be able to hold a pointer to more than one type of object.  Of course it's up to you to keep track of what types of objects your handles are for.<br><br>Handle() returns an integer, starting at 1 and incrementing for every handle created.  Calling Handle() multiple times on the same object will always yield the same number.<br><br>Object.type() returns null if given 0, a handle to an object which has been freed, or a handle to an object of a different type. <br><br></td></tr></table><br>
<a name="591696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bluecarrot16</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i see. this is fairly confusing considering that the value that Object() returns is also called a handle... so if i understand correctly, Handle() is used to "name" a certain object to to speak and Object() returns the handle of the object bearing that "name"...?<br><br>I think i get it thanks everyone.<br><br>btw, perhaps we can have some documentation on these commands in the next release of the BlitzDocs...along with BlitzArrays &gt;_&lt; <br><br></td></tr></table><br>
<a name="591711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I'm aware, the word on Object() and Handle() is that they're, well, "undocumented"... ie you're not supposed to use them because they could be dropped at any update. Since B3D development has slowed recently one could argue that the chances of them disappearing at this stage are slim though. <br><br></td></tr></table><br>
<a name="591714"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;they are listed in the B3D docs<br><br>No they're not!<br><br>&gt; but there is no help page <br><br>Because they are not listed.<br><br>&gt;for them. they are highlighted in the IDE<br><br>Because they are undocumented commands.<br><br>&gt;and ive seen <br>&gt;them used before, but i cannot find any more information &gt;on them<br><br>Because they are undocumented!<br><br>&gt;btw, perhaps we can have some documentation on these <br>&gt;commands in the next release of the BlitzDocs...along with <br>&gt;BlitzArrays <br><br>Don't expect that to happen. People have been asking for this since they were first discovered, but they are apparently 'undocumented' because they are for internal BRL testing purposes only and could be subject to change at any time.<br><br>However, they have been in the language for eons, so maybe it is time to make them official.<br><br><br>Andy <br><br></td></tr></table><br>
<a name="591717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see these functions as integral parts of the language. If they are removed in the future and not replaced with another feature which provides their functionality, I will not be upgrading.  If they didn't exist in the first place, I would not have been very happy with my purchase.<br><br><div class="quote"> this is fairly confusing considering that the value that Object() returns is also called a handle <br></div><br><br>It is?  I calls it a pointer. <br><br></td></tr></table><br>
<a name="591719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Until recently I didn't know how to use these, but as of a few months ago I use them all the time - they are quite useful commands as you don't have to cycle through entire instances of types if you know which one you wish to get to, assuming you've stored the 'handle' somewhere.  Would be a shame to see them disappear, although I can't really see that happening. <br><br></td></tr></table><br>
<a name="591777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> this is fairly confusing considering that the value that Object() returns is also called a handle <br></div>This has lead to some confusion. I think it would have been better if the Handle command was called HandleID, or something similar. <br><br></td></tr></table><br>
<a name="591799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzcoder.com/cgi-bin/code/code_showentry.pl?id=thechange08052002184613&amp;comments=no" target="_blank"> Objects/Handles </a><br><a href="http://www.blitzcoder.com/cgi-bin/ubb-cgi/postdisplay.cgi?forum=Forum3&amp;topic=000638" target="_blank"> Advance types </a><br><a href="http://www.blitzcoder.com/cgi-bin/ubb-cgi/postdisplay.cgi?forum=Forum7&amp;topic=000051" target="_blank"> definitive types </a> <br><br></td></tr></table><br>
<a name="591843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is a reason why they are not documented.... <br><br></td></tr></table><br>
<a name="591877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there is a reason why they are not documented.... <br> <br></div><br>I've always wondered. What *is* the official reason for them not being documented? <br><br></td></tr></table><br>
<a name="591908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was waiting for Frank to chime in.  ;)<br><br>Argh, responding to flame-bait is so hard to resist! <br><br></td></tr></table><br>
<a name="592015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) Yeah, im just pullin ya strings octo, there aint nothin wrong with object/handle commands, but a custom solution can work well too. BTW, I was interesting in using your Hash Table functions but I'm difficulty figuring out how i can implement them. <br><br></td></tr></table><br>
<a name="592043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Show me what you're trying to store and I'll show you how to use them.  :) <br><br></td></tr></table><br>
<a name="592061"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> octo,<br><br>I understand the basics of a hash table. Im ultimately using it in my Command Line Interface for rapid lookup. The CLI command string format is Verb-Object-SubObject-Property. The parser separates and tokenizes the words in the string and uses hashing for rapid comparison valid VOSP. <br><br>I've written my own Hash functions but haven troubles with collisions.<br><pre class=code>Const HASH_PRIME=383
Const HASH_MULTIPLIER=5 ;65599

Dim hash_Table.hashentry(HASH_PRIME)

Type hashentry
	Field name$
	Field blah$
End Type

Function hashIndexGet(hashstring$)
	hashstringlength=Len(hashstring) 
	hashmultiplierexp=hashstringlength
	While (hashoffset&lt;hashstringlength)
		hashoffset=hashoffset+1
		hashmultiplierexp=hashmultiplierexp-1		
	    hashfactor=hashfactor+(HASH_MULTIPLIER^hashmultiplierexp*Asc(Mid(hashstring,hashoffset)));
	Wend
	Return hashfactor Mod HASH_PRIME
End Function

Function hashentryNew.hashentry(hashentryname$)
	this.hashentry=New hashentry
	this\name$=hashentryname
	hash_Table(hashIndexGet(this\name))=this
	Return this
End Function

Function hashentryKeyGet.hashentry(hashentryname$)
	Return hash_Table(hashIndexGet(hashentryname))
End Function

;create a new entry
hashentry.hashentry=hashentryNew("test")

;get object by using hash key
hashentry.hashentry=hashentryKeyGet("test")</pre> <br><br></td></tr></table><br>
<a name="592067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> To fix your hash: instead of having your hash buckets point directly to elements, point them each to their own linked lists of elements - that way collisions cost you performance instead of the loss of data integrity.  This means that whenever you look up an entry, you need to walk the correct bucket's list and look for a matching key; if there are no collisions in your hash, there'll only be one element to check.<br><br>To use <a href="/codearcs/codearcs.php?code=1439" >Container: hash table</a> instead (which takes care of all that for you:)<br><br><pre class=code>
Include "hashC.bb"

Global verb_hash.hashC = hash_new()

Type verb
	Field name$
	Field blah$
End Type

Function verb_new.verb(name$)
	v.verb = New verb
	v\name = name$
	hash_set(verb_hash, name$, Handle(v))
	Return v
End Function

Function verb_get.verb(name$)	
	Return Object.verb( hash_get(verb_hash, name$) )
End Function

;create a new entry
verb.verb=verb_new("test")

;get object by using hash key
verb.verb=verb_get("test")
</pre><br><br>Note that I've renamed your type from "hashentry" to "verb" to prevent confusion.  I don't understand enough about your requirements to know whether you need four separate hashes ("verbs", etc.) or one hash ("CLI words").  Either way, it's cake.  :) <br><br></td></tr></table><br>
<a name="592093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, octo. There is  a separate hash table for Verbs, Objects, etc. I'll work with this. <br><br></td></tr></table><br>
<a name="592120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> No problem, glad I could help.<br><br>Wait... what?  I converted you already?  But you were my monomorphic nemisis!  What am I going to do with all these exploding cigars?! <br><br></td></tr></table><br>
<a name="592590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps, I converted you. lol. Thanx again! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
