<!DOCTYPE html><html lang="en" ><head ><title >entity height?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >entity height?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >entity height?</a><br><br>
<a name="422671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! I've got an animated 3ds model from DarkMatter that is loaded by TerraEd which does LoadAnimMesh. Then, it does CopyEntity and ScaleEntity to place each of a couple dozen such models (monsters) on the terrain.<br><br>I would like to know the height, in Blitz units, of each of these beasts, but I can't find a way to calculate that.<br><br>I tried using a method based on CountSurfaces() but when I call either CountSurfaces(Entity) or CountSurfaces(Mesh) I get back zero. This seems funky.<br><br>I also tried MeshHeight(Mesh) to which I could apply the scale factor for each beast, if it worked. However, the return value is -20000000 (negative twenty million).<br><br>What is going so wrong with CountSurfaces() and MeshHeight()?<br><br>Can anyone provide a reliable method to calculate the height of an entity copied from a 3ds mesh loaded by LoadAnimMesh? These entities animate and work just fine, but I want to know their sizes so that I can set a reasonable bounding box for each one.<br><br>Thanks for any help you can provide. This is weird! <br><br></td></tr></table><br>
<a name="422690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure you are applying the command to the correct child entity within the animmesh? I think the base part is not that actual mesh itself - you need to use GetChild to find the mesh - then try the MeshHeight command on that child object.<br><br>So, try this -<br><br><pre class=code>
mesh = LOADANIMMESH("file.b3d")
debuglog countchildren(mesh)
child1 = getchild(mesh,1)
debuglog countsurfaces(child1)
</pre><br><br>See if that (or some variation on that) returns any sensible values.<br><br>Also you could try loading the mesh as a normal mesh and not an animmesh and see it the commands work then (also try this with your problem about linepick) - then you will narrow it down to the animated mesh causing the problem (and I still suspect you are not finding the correct child object) and you can work from there. <br><br></td></tr></table><br>
<a name="422763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think using LoadAnimMesh agrees too well with mesh commands.  Just my experience, but I'd suggest loading it as a normal mesh if possible. <br><br></td></tr></table><br>
<a name="422835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure enough... MeshWidth() etc. give ridiculous results following LoadAnimMesh but seem to give the right answers following LoadMesh. Beware! <br><br></td></tr></table><br>
<a name="423041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> did you try finding the child object as I suggested? <br><br></td></tr></table><br>
<a name="423242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Vorderman:<br><br>I tried your suggestion. I listed the MeshWidth, Height and Depth of the first child of the LoadAnimMesh as well as the MeshWidth etc. of the LoadMesh.<br><br>I got answers approximately as follows:<br>MeshWidth of first child: 4.05<br>MeshHeight of first child: 3.79<br>MeshDepth of first child: 4.10<br><br>MeshWidth of LoadMesh: 2.1<br>MeshHeight of LoadMesh: 3.65<br>MeshDepth of LoadMesh: 2.2<br><br>As you see, I now get *possible* values instead of the previous silly results (negative twenty million). However, the two sets of values do not agree, raising a new question - which set, if either, is correct?<br><br>Yikes! <br><br></td></tr></table><br>
<a name="423392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The values returned from LoadMesh are correct, or nearly so. The values returned from checking the first child of LoadAnimMesh are not correct. <br><br></td></tr></table><br>
<a name="423417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very odd indeed  :( <br><br></td></tr></table><br>
<a name="423742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You know these sort of problems could be eliminated with a more thorough explanation in the Blitz manual regarding blitz3d required protocol for importing meshes and such.<br>I had a hard time findng the children of my level mesh - they simply were not there....until I loaded it in as an animmesh!! Which is bollocks that should be explained properly from somebody who knows about Blitz's inner workings...save us all a headache with what seems like obvious and straight forward stuff. <br><br></td></tr></table><br>
<a name="424402"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ziltch</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you done a renderworld?<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=26385#274511" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=26385#274511</a><br><br>Blitz seems to report non zero sizes on surfaces with no size.<br><br>I reported this almost 1 year ago and the bug report was ignored. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
