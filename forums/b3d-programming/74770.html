<!DOCTYPE html><html lang="en" ><head ><title >elevators (how the heck do they work?)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >elevators (how the heck do they work?)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >elevators (how the heck do they work?)</a><br><br>
<a name="835615"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay so I would like to have elevators available in my game, but currently if my player is on the elevator and it moves up my dude falls through! what the heck is goin' on? <br><br></td></tr></table><br>
<a name="835617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to set proper collision.  Not only that, but you need to set your player's Y position in relation on the elevator's.  I have managed to program elevators using a physics engine.  You should try that out.<br><br>Also, not posting your code will make it harder for anyone to help you. <br><br></td></tr></table><br>
<a name="835618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I bet no one ever says "TMI" to you, do they? :)<br><br>Seriously, how about some code to go with the question? <br><br></td></tr></table><br>
<a name="835619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..use of physics engine is way to go...I figure out that as a most efficient and easy way to deal with it.. <br><br></td></tr></table><br>
<a name="835621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >syntax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> if the elevator is like an REAL elevator, then dont bother with a physics engine and just say that if the player's inside the elevator, then temporarily make the player a child of the elevator. you might be able to play with the idea of what is INSIDE the elevator to get it to work in other situations too. <br><br></td></tr></table><br>
<a name="835622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> couldnt you parent the player to the elevator while a collision is registered? <br><br></td></tr></table><br>
<a name="835625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >syntax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> probably not since the collision fails once the elevator starts moving. <br><br></td></tr></table><br>
<a name="835761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another thing you can try is not only to let the player collide with the elevator (which stops the player falling through the elevator if the elevator is not in motion), but also the other way around.<br><br>If your player gets in the elevator, he collides with the elevator-floor and your character will not fall through it.<br>If the elevator goes down, the player doesn't collide anymore and falls until it collides again with the elevator floor.<br><br>If the elevator is going up, it doesn't check if it collides with something and just goes up without taking collisions into account.<br>The floor just gets repositioned (upwards) while your character stays at the same height.<br>The your character doesn't collide anymore and will fall through the floor.<br><br>Set up collisions between the player and the elevator floor and vice versa.<br><br>A while back I was playing with that too, just have a box move forward and backward while I'm controlling the player (a box too).<br>When the box moved away from me, I could run against it, but when the box came to me, my playerbox ran through it.<br>Setting up collisions both ways did the trick for me. <br><br></td></tr></table><br>
<a name="835767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/Community/posts.php?topic=66152#740940" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=66152#740940</a> <br><br></td></tr></table><br>
<a name="835795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> holey cow! lotsa responses to answer several of your posts I don't have any code, I dabbled with the elevators for a while but then gave up but now I'm trying again.<br><br>oh powerpc603 what did you mean set up collisions both ways? like this?<br><br>collisions player,wall,2,3<br>collisions wall,player,2,3<br><br>or am I totally lost there? <br><br></td></tr></table><br>
<a name="835818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, that's it.<br>It's been a while since I've tested this, but IIRC, that's what I did to fix it.<br><br>EDIT:<br><br>I've just created some testcode to see if it works.<br><br><pre class=code>
Graphics3D 800, 600, 0, 2

SetBuffer BackBuffer()

COLBOX = 1
COLPLAYER = 2

Collisions COLPLAYER, COLBOX, 2, 3
;Collisions COLBOX, COLPLAYER, 2, 3

box = CreateCube()
PositionEntity box, -10, 0, 0
EntityType box, COLBOX
EntityColor box, 255, 0, 0

player = CreateCube()
PositionEntity player, 10, 0, 0
EntityType player, COLPLAYER
EntityColor player, 0, 255, 0



camera = CreateCamera()
PositionEntity camera, 0, 50, 0
RotateEntity camera, 90, 0, 0

While Not KeyHit(1)
	MoveEntity box, -0.01, 0, 0
	MoveEntity player, -0.1, 0, 0

	UpdateWorld
	RenderWorld
	Flip
Wend

End
</pre><br>As you can see, the box would represent your elevator (the red cube) and the player (green cube) is your player.<br><br>The second collisions command is currently commented, so the player can collide with the box, but not the other way around.<br>You can also comment the "MoveEntity box" line in the main loop to let the box stay where it is.<br>You can see that the player moves towards the box and hits it, but doesn't get past it (it doesn't fall/walk through).<br>But when you change the direction of the box's movement (towards the player), the player walks through the box.<br><br>Now uncomment the second collisions command, which sets up collisions both ways.<br><br>Now when they hit eachother, they both come to a halt.<br>They are both colliding against eachother and it makes no difference if one object is faster than the other, they block eachother's movement.<br>I didn't remember this from my test a few years ago (I guess it happened there too).<br><br>So that's not an option if you want to keep your elevator going up, because it would collide against the player and stop moving.<br>This would only prevent your character to stop falling through the floor.<br><br>The best you can do is to check if your player is colliding with the elevator floor and then parent your character to the elevator.<br><br>When that's done, you can start moving the elevator.<br>When it stops, unparent the player and your player is free to leave the elevator. <br><br></td></tr></table><br>
<a name="835830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just got an idea:<br><br><pre class=code>
Graphics3D 800, 600, 0, 2

SetBuffer BackBuffer()

COLBOX = 1
COLPLAYER = 2

Collisions COLPLAYER, COLBOX, 2, 3
Collisions COLBOX, COLPLAYER, 2, 3

box = CreateCube()
PositionEntity box, -10, 0, 0
EntityType box, COLBOX
EntityColor box, 255, 0, 0

player = CreateCube()
PositionEntity player, 10, 0, 0
EntityType player, COLPLAYER
EntityColor player, 0, 255, 0



camera = CreateCamera()
PositionEntity camera, 0, 50, 0
RotateEntity camera, 90, 0, 0

While Not KeyHit(1)
	MoveEntity box, 0.01, 0, 0
	MoveEntity player, -0.1, 0, 0

	UpdateWorld

	If EntityCollided(box, COLPLAYER) Then
		MoveEntity player, 0.01, 0, 0
		MoveEntity box, 0.01, 0, 0
	EndIf

	UpdateWorld
	RenderWorld
	Flip
Wend

End
</pre><br><br>Here you see that the player and the box move towards eachother.<br>Right after they both move, there is an UpdateWorld to check for collisions (this is needed for this to work).<br><br>Then it checks if the box (your elevator) has collided with the player.<br>If that's true, move both the player and the box in the direction where the elevator must go.<br>Then it works perfectly, just by setting up collisions both ways.<br>Your character won't fall through the floor, you don't need a physics-engine just for your elevator and it works. <br><br></td></tr></table><br>
<a name="835843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Linepick is your friend :o)<br><br>Constantly do a linepick downwards, and parent the player to the lift as long as the floor is detected directly below the player feet. <br><br></td></tr></table><br>
<a name="835904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> parent entity is a problem because the move commands I use double in speed when the player is a child of anything<br><br>to powerpc does that work if the entity if being translated downward? <br><br></td></tr></table><br>
<a name="835950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, why does your player move double speed when parented? <br><br></td></tr></table><br>
<a name="835962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just do linepicks down, if the pick finds an elevator and player's Y is lower than PickedY(), make it higher, if it's higher then let the player fall. <br><br></td></tr></table><br>
<a name="835963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> And just to answer the upcomming question on how you know its an elevator:<br><br>You sure have a type TEntity or the like where you store information, right?<br>Store handle(TEntity) in the entity name<br>and if you pick it, get the type handle by using Object.TEntity(picked_entity_handle) <br><br></td></tr></table><br>
<a name="836049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think what's fun with an FPS game often is that you are free to do whatever you want  when you move.  That means that in an elevator, or on a platform, that you can jump to it or from it.  Also, that a platform can move in any direction, it doesn't matter, as the player is transported with it while it's on it but is free to move how he wants.  I think those are very important.  Only in a physics engine, have I managed to do this in a universal way. <br><br></td></tr></table><br>
<a name="836333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ben(t)</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed in halo 3 recently with large vehicles like the elephant that if you jump off and are in the air as the elephant turns you turn with it as though you were a child entity.<br><br>thank you all for the help with the elevators I think I know what to do now <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
