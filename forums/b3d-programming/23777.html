<!DOCTYPE html><html lang="en" ><head ><title >lauch another b3d exe from your program</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >lauch another b3d exe from your program</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >lauch another b3d exe from your program</a><br><br>
<a name="246066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi !<br>I plan to 'cut' my game program into two exe.<br>- The first should be the user interface (menus, game option, level choice). It use graphics3d and some music.<br>- The second should be the 'main program', in fact the 3d level (also graphics3d and game music).<br><br>Today i've experimented this, but it seems not be a good solution. My main idea was to free all the memory used by the gui interface before lauching a level ! i've planned to use a swapfile between the two programs to store some parameters. The second program need only the level number !<br><br>But... if i use an execfile command from the gui to the second program have an 'memory access violation'(of course this program perfectly works if i directly lauch it). Is somebody have experimented this ? Is it impossible ?<br><br>Simple code example (gui)<br><pre class=code>
Graphics3D 800,600,16,0

main() ; gui main program (menu, ...)

ClearWorld
ExecFile "E:\game_010303\game1\start.exe" ; the second program (level)

End 
</pre><br>produce a 'memory allocation error' when the start.exe is executed !<br><br>Many thanks for your help. <br><br></td></tr></table><br>
<a name="246089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> check you've typed the location and name of the exe right because there shouldn't be any problems with doing that. <br><br></td></tr></table><br>
<a name="246091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you might need to use EndGraphics after ClearWorld. <br><br></td></tr></table><br>
<a name="246093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've tested this, but EndGraphics seems to be a 2d command !<br><br><div class="quote"> there shouldn't be any problems with doing that <br></div><br>Sinu have you experimented that in yours programs ? <br><br></td></tr></table><br>
<a name="246097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just tested EndGraphics, it closes a 3D display nicely. Well it was pretty ugly actually so I vote you don't split your code. <br><br></td></tr></table><br>
<a name="246099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I plan to 'cut' my game program into two exe. <br>- The first should be the user interface (menus, game option, level choice). It use graphics3d and some music. <br>- The second should be the 'main program', in fact the 3d level (also graphics3d and game music). <br><br>Today i've experimented this, but it seems not be a good solution. My main idea was to free all the memory used by the gui interface before lauching a level ! i've planned to use a swapfile between the two programs to store some parameters. The second program need only the level number ! <br><br>But... if i use an execfile command from the gui to the second program have an 'memory access violation'(of course this program perfectly works if i directly lauch it). Is somebody have experimented this ? Is it impossible ? <br> <br></div><br><br>This is EXACTLY how I'm making my own game "launcher"... and for the same reasons (cleaning up stuff from the memory). It works perfectly for me, but do it slightly differently... for example I don't have drive letter or path on the ExecFile - bad idea anyway because it does not work if the user installs it to a diferent dir?<br><br>I'll post my (simplified) code when I get home so that you can test that approach.<br><br>BTW: I plan to release my GameLauncher free with source with next 2-3 weeks too. <br><br></td></tr></table><br>
<a name="246103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> mustang your game laucher is b3d code ? This path with the drive letter is just for my tests ! What's your OS ? <br><br></td></tr></table><br>
<a name="246117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> My launcher module is basically mix of 2D and 3D, and it can be run full screen or windowed mode (easily configurable). 3D in it is really only for eyecandy, not needed for any critical "menu" stuff. So basically it is 2D, although I initialize it with "Graphics3D".<br><br>I thought that the path might for test purposes only, but had to ask! I have w2k-pro at home. <br><br></td></tr></table><br>
<a name="246156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> My current project have 17000 lines... it's difficult for me to understand now where is the problem when the second program is executed from the first ! When i test with two basics programs with few lines it works ! Is somebody i've tried this with an huge project ? Fmod problem ? <br><br></td></tr></table><br>
<a name="246168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> when i was making a level editor i did this, allowed me to run the game from within the editor with the new level. <br><br></td></tr></table><br>
<a name="246779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Allrighty... here you go. VERY simplified example, but this works at least for me and allows separate "launcher.exe" that can be used to run other "yourgame.exe" with choice of options (like what "level" to load etc).<br><br>First .exe:<br><br><pre class=code>
;compile this as "launcher.exe"


Graphics3D 480,480,16,2

Print "Press any key to load level 1"

WaitKey()


ExecFile("yourgame.exe /loadlevel1")

End
</pre><br><br>Second .exe:<br><br>*note: pressing a key will get you back to "launcher menu" (ends "yourgame.exe")<br><br>*note: running this .exe directly is also handled (we do not want that... ppl should run the "launcher.exe")<br><br><pre class=code>
;compile this as "yourgame.exe"


If CommandLine$() &lt;&gt; "/loadlevel1" Then RuntimeError "Please run the menu Launcher.exe program, not this one." 

Graphics3D 640,480,16,2

Print "allright - it worked! Wo-hoo!"

WaitKey()


ExecFile("launcher.exe")

End
</pre> <br><br></td></tr></table><br>
<a name="246782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally, I don't think it's a good idea to write a launcher as a second blitz exe. Simply because a biltz exe is so large. You'll end up distributing all the blitz functionality TWICE in your download, which is overkill. A launcher made in something like PB would make a lot more sense.<br><br>But really, how much extra memory do you figure you're saving, anyway? I doubt that it'd be much more than a few k. And I can't imagine any blitz program causing a huge strain on system memory anyway. <br><br></td></tr></table><br>
<a name="246785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Personally, I don't think it's a good idea to write a launcher as a second blitz exe. Simply because a biltz exe is so large. <br></div><br><br>With UPX it is something like 500K? That's smaller than most of my texturemaps and models - and there will be DOZENS of them! So 500K is nothing. Exe size might be an issue for ppl who want to have very small game that is easily downloadable and can be put on a 1.44MB floppy disk - but my goals are different. My game will be in the end so big project that it will be close to commercial game demos (&gt;100 MB). As you can see 500K really is nothing... :)<br><br><div class="quote"> A launcher made in something like PB would make a lot more sense. <br></div><br><br>What does not make sense is me buying Blitz+ too just for shaving few KBs...?<br><br><div class="quote"> But really, how much extra memory do you figure you're saving, anyway? <br></div><br><br>I do not care about the memory usage at all... what I want is easy "housekeeping", ie getting rid of all the stuff that is not need for actual gameplay (and might mess up my game code and be hard to debug). Also keeping them separate projects is better (easier) in coding wise... I can develop "launcher.exe" more easily because it's smaller and does not have any game stuff code in it.<br><br>...But everybody is free to do their stuff just like they want, but this is the right way for me and my game. Most commercial games use separate launchers too. <br><br></td></tr></table><br>
<a name="246791"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>With UPX it is something like 500K? That's smaller than most of my texturemaps and models - and there will be DOZENS of them! So 500K is nothing.<br> <br></div><br>It's still 500k that doesn't need to be there though.<br><br><div class="quote"> <br>Also keeping them separate projects is better (easier) in coding wise... I can develop "launcher.exe" more easily because it's smaller and does not have any game stuff code in it.<br> <br></div><br><br>You can write it as a seperate .BB file and tack it on with an "include". The only thing you'd have to worry about is stuff like having a float in one file being used as an int in the other. Which, with only the smallest amount of care taken, won't happen.<br><br><div class="quote"> <br>...But everybody is free to do their stuff just like they want<br> <br></div><br>I won't try to stop you. Just offering up my take on the pros and cons. Skidracer has offered up another con, too - the switching looks ugly. <br><br></td></tr></table><br>
<a name="246823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hub</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for you ideas !<br>Finaly i keep my project into a same executable file. I continue to use an include between the two main parts ! <br><br><div class="quote"> The only thing you'd have to worry about is stuff like having a float in one file being used as an int in the other. <br></div><br>I prefer not use globals variables into a program. I store (encapsulate) all these variables into a single global type. So you can free all the useless data if you not need them. Also debugguer inform you if you commit a syntax error into the the variable name ! <br><br></td></tr></table><br>
<a name="247228"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SabataRH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> In theory this is a good idea, seperating the launcher from the game.exe. ( all games i know off work in this manner)<br><br>And up until Blitz release 1.77 ( i think ) it was possible.<br><br>Blitz use to continue program execution after a ExecFile() was called... So you could;<br><br>ClearWorld()<br>EndGraphics()<br>ExecFile("blah")<br>End<br><br>But now, Blitz haults execution after the ExecFile  is called... Therefore it is no longer able to reach the End() statement... Leaving it in memory.. It seems Blitz only continues if it has focus - after calling an ExecFile().<br><br>I've emailed Mark about this in the past, maybe adding a switch to the ExecFile().. something like ExecFile([path/filename],[optional End Task]). But never got a reply :( <br><br>So I simply code the launchers into my games now, not the prefered method... But until theres a more feasible solution it'll do. <br><br></td></tr></table><br>
<a name="247323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Blitz use to continue program execution after a ExecFile() was called <br></div><br><br>? I *have* checked with w2k-pro TaskManager that it does not do that... if you compile my two examples they will end themselves totally when they spawn the other exe (launcher -&gt; yourgame, yourgame -&gt; launcher). I switched between them several times and didn't saw any extra .exes running in the memory. Memory stayed around the same level also.<br><br>And because I have not noticed any problems with my approach (separate launcher) I will happily continue along that road :) <br><br></td></tr></table><br>
<a name="247336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dynaman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another idea is to write the launcher as a self contained procedure.  That way it can be easily added to any blitz program, just do a call to Launch_app (or whatever you call it) and it goes. <br><br></td></tr></table><br>
<a name="247584"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> My launcher code is "quite big"... and since it is basically only used for saving the key configs etc to the disk, it would be unnecessary to drag that code along when the actual game starts. <br><br>IMO game.exe itself and the configuring program.exe for it are entirely two different things and should be like that. <br><br></td></tr></table><br>
<a name="248341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just something I should add - I think that this is a pathing problem:<br><br>If you use Windows Explorer to double click a file it sets the current drive and path to the chosen exe (or at least as far as the exe is concerned, so that ..\ etc works).<br><br>Using Exec (from any language) does _not_ change the drive and path, so the parent program (which is what Explorer is) _must_ to do this.<br>Otherwise "E:\MyGame\Game.exe" is trying to loads its files from, say, a "Bmps\" folder, and you think it is "E:\MyGame\Bmps\" while the current drive might still be C: and the current path might still be "Windows". <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
