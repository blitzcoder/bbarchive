<!DOCTYPE html><html lang="en" ><head ><title >Tips for rendering foliage</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tips for rendering foliage</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Tips for rendering foliage</a><br><br>
<a name="404135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am working with one of my artists on trees and bushes.  I came across a couple of things that makes real-time foliage look a little better.  It's not exactly stuff you normally consider, so thought I would share.<br><br>I am using Red Orchestra as a guide.  My goal is not to make the highest quality plants possible, but rather to get a good mix of quality and speed, so that I can render a large area covered in fairly dense foliage.<br><br>Due to z-ordering issues, I am only using texture masks, not texture alpha.  All branch pieces have backface culling disabled.<br><br>Here is my first attempt.  As you can see, it is very horrible and ugly:<br><img src="http://www.leadwerks.com/post/brush1.jpg"><br><br>The lighting made it really obvious the bush was made of planes, so I made the material full-bright, figuring I can just lighten-darken the bush per mesh.  The planes facing to the side from the camera view are still very apparent, mostly due to the mipmapping:<br><img src="http://www.leadwerks.com/post/brush2.jpg"><br><br>Next, I turned off mipmapping.  It gives a more grainy look, but the bush now appears as a round mess of leaves:<br><img src="http://www.leadwerks.com/post/brush3.jpg"><br><br>I am not happy with the intensity of the mipmap blurring on the terrain, but can't do anything about that.  Using my texture shader lib (available somewhere on here) I added a "sway" shader to make the bush texture slowly move around in a sinus circle.  The result is moving, real-time brush that can be created at a high density. <br><br></td></tr></table><br>
<a name="404147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, still needs shadows but the lack of them is likely due to you having not lightmapped the level at all yet.<br><br>Good tips, definitely. <br><br></td></tr></table><br>
<a name="404148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The trees will use projection shadows under them.  I am hoping I can get away without any sort of shadows under the bushes.  I'm actually planning to use vertex lighting only on the terrain. <br><br></td></tr></table><br>
<a name="404155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should be interesting to see how it works out.  In my experience it has always been best to vertex color the terrain via based on the positions of virtual lights (in order to decrease overhead from the calculation of each vertex's 'new' color).<br><br>I think small blob shadows would be good for the bushes at the least, because right now they look like they're hovering. <br><br></td></tr></table><br>
<a name="404179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good tips.<br><br>Have you seen the foliage in Joint Operations? Thick, lush foliage, simply delicious!<br><br><a href="http://www.3dgamers.com/screenshots/games/jointoperations/35.html" target="_blank">http://www.3dgamers.com/screenshots/games/jointoperations/35.html</a><br>More here:<br><a href="http://www.3dgamers.com/screenshots/games/jointoperations/" target="_blank">http://www.3dgamers.com/screenshots/games/jointoperations/</a><br><br>I wonder if they're using masked textures? Also, their grass LOD system is so damn good you need to look hard to see the blend switching.<br><br>And just about on topic...<br>One of the neatest touches in that game is when you're scoped in on a soldier far away who's laying prone, although the grass may not be drawn (because you're not zoomed in 'that' close to see it), the game engine blends (or textures) the soldier the same as the ground he's laying on, making him/her very tough to spot. That's what you call attention to detail!<br><br>Tom <br><br></td></tr></table><br>
<a name="404185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's pretty nice foliage.<br><br>Here is another comparison of mipmaps and no mipmaps.  In the mipmapped texture, the black mask creeps in and darkens the image.  It also become apparent that the bushes are made of planes, since the faces that point sideways are blurred to a solid green color:<br><br><img src="http://www.leadwerks.com/post/brush5.jpg"><br><br>Without mipmaps, the foliage is grainy, but looks better overall.<br><img src="http://www.leadwerks.com/post/brush4.jpg"> <br><br></td></tr></table><br>
<a name="404187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting.<br><br>That one game, Tom, has some quite nice foliage.<br><br>I've been trying to get some decent foliage sprites (and I plan to implement some sort of single-surface mesh system for Ulysses, it's ridiculously easy) made for my grass system so it can be used for more than just grass.  I just can't figure out how the heck to draw them. <br><br></td></tr></table><br>
<a name="404271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of interest: what is WorldEdit? <br><br></td></tr></table><br>
<a name="404331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> CShop5.  I like WorldEdit better, but am going to stick with "Cartography Shop", since people know what that is.<br><br>The artist is redoing the bus texture to make the leaves larger and less grainy. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
