<!DOCTYPE html><html lang="en" ><head ><title >Mesh outline</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mesh outline</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Mesh outline</a><br><br>
<a name="830093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>Is there any QUICK way to detect if mouse lies inside an entity's outline?<br><br>Thanks <br><br></td></tr></table><br>
<a name="830099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you COULD do constant CameraPick(), and check to see if it returns the mesh your after. Could be costly though. If you only do a camerapick every other frame that might help, or only when the mouse button is clicked. <br><br></td></tr></table><br>
<a name="830100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, but I forgot to mention I want to avoid using any picking functions <br><br></td></tr></table><br>
<a name="830111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe if you using some physics lib and do picking, it can help without performance loss, while checking every frame.. <br><br></td></tr></table><br>
<a name="830123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys <br><br></td></tr></table><br>
<a name="830149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes there is:hide all objects other than the entity in question, make it a certain color other than black, render the scene without displaying it and read the pixel color at the mouse coords.  You will need to copy the backbuffer to an image or texture to do this. <br><br></td></tr></table><br>
<a name="830152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, here goes... Now, don't see any reason why this shouldn't work.<br><br>Hide everything in your scene except your entity you want to check. Colour it pure red. Make the sure the backround is pure black. Render the scene. Copy the scene to an IMAGE.<br><br>Then, you can either:<br><br>Check the mousex and y position on the image, and see if it's a red pixel underneath, or<br><br>Do an imageoverlap call, using the 2d commands. Make sure the mask for the image is set to RGB(0,0,0). This should be fairly quick to check. Only slow part is the copyrect. Since your copying to an image, you can't use the VRAM flag. I'm not 100% sure, but i don't think you can. <br><br></td></tr></table><br>
<a name="830189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very clever, but I have to try both to see if these methods are slow. Consider that I have to do this when the mouse button licked <br><br></td></tr></table><br>
<a name="830191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why can't you use a pick? A single pick every time the mouse is clicked isn't going to represent any serious kind of bottleneck, surely? <br><br></td></tr></table><br>
<a name="830234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah i agree with Big10p. It's by far the easiest way and as big10p says it's not going to cost you any CPU time, just doing a pick when the mouse is clicked. That's what camerapick is designed for really :o) <br><br></td></tr></table><br>
<a name="830259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have several meshes laying on a 3D world. I want to have a 3D cursor over any selected mesh and move them with the mouse. Because Blitz3D does not provide any method to 'unproject' 2D mouse coordinates to 3D space I need to find a way when dragging a mesh from a 3D cursor handle to move the mesh exactly where the mouse points. The only way to do this is to have a plane making picks on as the mouse moving. But what happens when the selected mesh is being moving  behind another?<br>Answer:<br>My linepick action on the plane is broken from the front mesh<br>Note all meshes are pickable also because I want to select them any time...<br>That's why I decided to find another way to select meshes without need to make them pickable <br><br></td></tr></table><br>
<a name="830265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> What i did in my editor, was to record the movement of the mouse and apply it to the mesh, based on how close the camera was to the mesh. Works very well :o)<br><br>Also, why not just use a 2d cursor? <br><br></td></tr></table><br>
<a name="830287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I read an excellent example from BlitzsSupport:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=379" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=379</a><br>but unfortunately the code above works perfect only when the mesh is moving along the X and Y axes of the camera.<br>DirectX provides a very useful function to 'unproject' 2D screen coordinates to 3D and I think in the next version/update of Blitz3D it would be a very useful addition.<br>In other words I would like to have a function to cast a ray from any point on screen and give me 3D coordinates of its intersection with a plane in any distance and orientation specified be me.<br><br>About the 3D cursor: Because if you use a 2D cursor how to move the mesh in the third direction? <br><br></td></tr></table><br>
<a name="830311"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Years ago I wrote a function based on that one from the code archives that moves an object on the ground plane instead of a plane parallel to the camera.  Lemme see if I can dig that up...<br><br>ADDITION: Here's the function I wrote<br><pre class=code>
;Positions an entity in 3D from given 2D coordinates
Function PositionEntityFrom2D(usecam,entity,x2d#,y2d#,height#=0,camZoom#=1)
	gw=GraphicsWidth()
	gh=GraphicsHeight()
	x#=-((gw/2)-x2d)
	y#=(gh/2)-y2d
	parent=GetParent(entity)
	EntityParent entity,usecam
	z#=Abs(EntityZ(entity))
	div#=(gw/(2/camzoom))/z
	x=x/div
	y=y/div
	
;z distance determined by a straight line from camera, through xyz coordinates, to height
	TFormPoint x,y,z,usecam,0
	y3d#=height
	x3d#=TFormedX()
	z3d#=TFormedZ()
	EntityParent entity,parent
	PositionEntity entity,x3d,y3d,z3d
End Function
</pre><br><br>That still doesn't get you movement along any arbitrary plane, just the ground, but it wouldn't be hard to modify this function to do what you want.  In particular, note that TFormPoint (which is the real heart of this calculation) is transforming from the camera's coordinate system to the world.  I think if you pass in a different plane as one of the parameters for the function, you can transform from the camera's coordinate system to that plane. <br><br></td></tr></table><br>
<a name="830400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks jhocking. I will test your code and If I have something better then I 'll let you know! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
