<!DOCTYPE html><html lang="en" ><head ><title >Slowing down as time goes on?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Slowing down as time goes on?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Slowing down as time goes on?</a><br><br>
<a name="516832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> My game involves lots of custom meshes. They get built, they get deformed, they get freed and rebuilt, they get freed and rebuilt and so on. I've started to notice that as time goes on when playing, rendering gets slower and slower, as does mesh manipulation. I am using FreeEntity on each mesh as it gets deleted, so why this slowdown? Surely this isn't congenital to B3D when using custom meshes? If it is, I may as well throw away 3 years of work. Someone reassure me I'm missing a memory leak in my own code... <br><br></td></tr></table><br>
<a name="516840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> mrtricks,<br><br>you must be - are you loading any sounds?  are you freeing them - or pivots or well it must be something in there.  <br><br>Take out all the creating new meshes code and run it again.  Youll soon know if its in there.<br><br>Good luck dude!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="516869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The mesh code comprises most of the program :) it's a geo-mod system. So the rendering shouldn't slow down, no matter how many times I create a mesh, add to it, deform it and free it?<br><br>[edit] I just tried using AvailVidMem() to determine if I was leaking memory but it only tells me about texture memory used. When I first build the mesh it uses so much memory, then every mesh built subsequently doesn't use any more memory (they share a brush). How do I get System Memory? And in fact, if I were not freeing meshes, would that be system memory or something else? <br><br></td></tr></table><br>
<a name="516892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clarks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> well are you creating any new types on the fly and forgetting to delete them <br><br></td></tr></table><br>
<a name="516903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you using debuglog? <br><br></td></tr></table><br>
<a name="516956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Debuglog? I'm using debug mode... is debuglog on a proprietary IDE?<br><br>Clarks - I *do* know about some types I'm not deleting, but it amounts to about 20 instances, with a few variables as fields, and no meshes are attached to them, so I can't see that any slowdown could be attributed to that. I suspect that cleaning that up would not improve the situation. (But I'll try) <br><br></td></tr></table><br>
<a name="517003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;Debuglog? I'm using debug mode... is debuglog on a <br>&gt;proprietary IDE?<br><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=DebugLog&amp;ref=2d_a-z" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=DebugLog&amp;ref=2d_a-z</a><br><br>&gt;Surely this isn't congenital to B3D when using custom <br>&gt;meshes? If it is, I may as well throw away 3 years of <br>&gt;work. Someone reassure me I'm missing a memory leak in my <br>&gt;own code... <br><br>It's propably a memory leak in your own code:)<br><br>Andy <br><br></td></tr></table><br>
<a name="517007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> whenever my game slows down its always my fault <br><br></td></tr></table><br>
<a name="517014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to be able to see tris rendered on screen to see how many tris you render... I had to do this to fix my game. I would hideentity but not clearworld() or freeentity() and once I cleaned house the game ran like a top...<br><br>Of course I wanted it to run like a choo choo train but that is another matter!<br><br>Clean house... :)<br>Rook <br><br></td></tr></table><br>
<a name="517064"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Andy, never saw that command before. Will definitely use that.<br><br>I'm glad to hear it should be my fault - I'll have a big spring clean (although I was sure there were no leaks!) <br><br></td></tr></table><br>
<a name="517074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote my own version of debuglog which spits the messages out to a file.   Helpful and it works outside of debugmode.<br><br><pre class=code>

Function debuglog2 (message$)

	If debug_file

		WriteLine debug_file,message$
	
		DebugLog (message$)

	EndIf


End Function
</pre><br><br>debug_file, obviously, is the handle to the text file which is opened at the start of execution<br><br><pre class=code>
	If debug_enable=1 Then debug_file=WriteFile ("config\debug.txt") Else debug_file=0
</pre><br><br>If a tester has a problem, they can just email me the file. <br><br></td></tr></table><br>
<a name="517077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Should there not be a line at the end:<br><br>If debug_enable=1 Then closefile(debug_file) <br><br></td></tr></table><br>
<a name="517080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just found the culprit. It wasn't any of my geomod code but some ancient rocket code I stuck in just to test out the geomod system - the rockets weren't deleting! Phew! Thanks for the help guys. <br><br></td></tr></table><br>
<a name="517082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;Should there not be a line at the end:<br><br>&gt;If debug_enable=1 Then closefile(debug_file) <br>Yes. But I tend to exit by closing the window so it's a bit academic.  Seems to work fine. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
