<!DOCTYPE html><html lang="en" ><head ><title >VERY basic networking code?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >VERY basic networking code?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >VERY basic networking code?</a><br><br>
<a name="762231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi!<br><br>i am looking for a networking code (upd)<br>i didnt quite understand how it works and i tested some samples. what i need is a very very basic code how to communicate with a server.<br><br>any ideas?<br><br>thanks :) <br><br></td></tr></table><br>
<a name="762241"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried only BlitzPlay, and it works okay. To find UDP samples, have you tried searching for "CreateUDPStream" ?<br><a href="http://www.google.com/search?hl=en&amp;q=createudpstream&amp;btnG=Search" target="_blank">http://www.google.com/search?hl=en&amp;q=createudpstream&amp;btnG=Search</a><br>or<br>http://www.google.com/search?hl=en&amp;q=createudpstream+blitz3d&amp;btnG=Google+Search <br><br></td></tr></table><br>
<a name="762257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i hunted down the whole forum searching for udp and createudpstream.<br><br>none of these samples were working between my two computers.<br>(i know that i successfuly established a connection. i was able to transfair) <br><br></td></tr></table><br>
<a name="762406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> okay, i found something that actually works. gnet! i tested it and i was able to create a server. but how can a client join the server?<br><br>ps: my firewall is not a problem. i tested it with counterstrike <br><br></td></tr></table><br>
<a name="762427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually there is no "very simple" udp netcode. The reason why is: UDP is a very basic transmission method. It has no error checks and is not packet oriented etc. It's like a wire in space, nothing more, and the whole transfer protocol must be coded by the programmer, eg. morse or something.<br><br>So a Multiplayer netcode may contain 2 parts: the UDP netcode that handles the game between the players, and some TCP code that is connecting to a webserver that stores all neccessary infos to allow people to join the game. So imagine on www.DCs_game.com there could be gnet running, or maybe something you used to write by your own (probably using Gnet as basement). A player will connect to the webserver, receive the IP of the UDP game server, what ports are used, what people are already there, how long the game is already running etc etc.<br><br>Then he may join the game as a client. The game (udp) host will then update the infos on the webserver.<br><br>Let's have a look at the UDP part only. First you have to design a packet system. Every packet should contain a purpose ID, a sequence number and an encrypted integrity checksum. These numbers should be part of the header.<br><br>The purpose ID allows the receiver to decide how to use the packet, examples: a join-request packet, a player-data packet, a player leaving packet, a chat packet...<br><br>The sequence number allows the receiver to detect missing packets. So when he receives packet 24 and then packet 26, he should send a reorder-packet that asks for packet 25.<br><br>The integrity checksum is a checksum of the rest of the packet and allows to compare a checksum that is created locally to be compared with it. If the 2 checksums are not the same, there must be some error in the packet and it should be reordered as well.<br><br>Probably the header should also contain information about the packet lenght.<br><br>Then there should be acknowledge packets that are used as a handshake, after a successfully delivered packet. These ack packets are the only packets that don't need an ack packet (because this would result in an endless loop of ack packets)<br><br>The whole "player join, add to list" etc. logic should be coded by the programmer, as well as all other things, like chat packets and so on. I even added a host-takeover packet that allows the host to quit the game without to end the game. In this case, the player with the next best ping will become the new game host automaticly. This requires a randomly created password that is handed over during the host takeover.<br><br>You see, there is no very easy netcode. Depending on the situation, you maybe should try one of the existing libs, like BlitzPlay or so.<br><br>BTW. when you connect to a webserver, this may pause the game if you wait for the answer of the webserver. Instead you should simply send the infos to the webserver and then close the stream.<br><br>Ehrm - maybe your question wasn't about all this stuff, but simply on how to make UDP work at all. Also make sure if there's a router between the machines, they may alter the port numbers, see this thread: <a href="http://www.blitzbasic.com/Community/posts.php?topic=68202" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=68202</a> <br><br></td></tr></table><br>
<a name="762434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> first: thank you for that fast and long reply! thats what i'm calling support :)<br><br>but then, on another topic: i know how to write a serverlist using php. what i dont know, is how to connect via ip to a udp server<br><pre class=code>CreateUDPStream([Port%])
;shouldnt it be this way:
CreateUDPStream(ip$)</pre><br><br>this is what i just dont understand. you're connecting to a port? but hell knows where your packages land? why cant i connect to an ip? it sounds logical to connect to an ip...<br>i asked arround in my family and wikipedia before i wrote here, and they couldn't get me going on this.<br><br>i hope you do <br><br></td></tr></table><br>
<a name="762435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would suggest NetBlitz..its free, its UDP based its fast and support for much players as your hardware can maintain...excellent.. <br><br></td></tr></table><br>
<a name="762437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you guys. i'll try netblitz.<br>if i have questions, i will bother you again :)<br>thanks! <br><br></td></tr></table><br>
<a name="762461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> DC, CreateUDPStream is not really sending data or receiving data, it simply makes a local port ready for action.<br><br>Look at the SendUDPMsg command, it takes an IP (and port) parameter. This may be a known host IP and port (taken from a webserver maybe), or if this is an answer to a (yet) unknown client that has sent data to the host (host may use ReadAvail and ReadBytes) then you may use UDPMsgIP and UDPMsgPort to obtain the correct return adress for SendUDPMsg for the answer from host to client.<br><br>So basicly, the host may receive and send using the same stream handle. Before you send data using sendUDPMsg, you need to write it to the buffer using a standard stream command, as if it was a file, example:<br><br>WriteInt mystream, 314159<br>sendUDPMsg mystream, UDPMsgIP(mystream),UDPMsgPort(mystream)<br><br>Hope this helps. <br><br></td></tr></table><br>
<a name="762469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ...how to connect via ip to a udp server <br></div><br><br>Maybe this will help clear things up: you <i>don't</i> connect to a UDP server.<br><br>TCP has "connections" which are established through handshaking packets and provide the organization required to ensure messages are retransmitted if lost, and provided in the right order.<br><br>UDP is dirt simple, it just sends single packets to IP addresses. No connections and no guarantees about delivery. You could code some super-reliable UDP client/server code, but you'd basically be re-implementing TCP.<br><br>Do you absolutely need to use UDP? TCP is easier to use. Later, if you decide that TCP isn't quick enough for some traffic, you can switch some (possibly redundant) communications over to UDP, while continuing to use TCP for stability. <br><br></td></tr></table><br>
<a name="762475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally I think implemeting a transfer protocol on a low level like UDP is pretty entertaining. It allows to do some custom optimizations in the first place. It's also a good exercise for an abstraction-layer oriented implementation of a program. <br><br></td></tr></table><br>
<a name="763315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Premature optimization is the root of all evil." <br><br></td></tr></table><br>
<a name="763419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> i tested this all and i barely gave up all hope.<br>does anyone have a sample where just two pcs with given ip adresses are communicating?<br>thank you so much!! <br><br></td></tr></table><br>
<a name="763440"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..did you try NetBlitz?? Within package you have exactly what you are looking for..nice 3D demo with PC's communicating and each player driving around one ball.. <br><br></td></tr></table><br>
<a name="763461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> netBlitz didnt work.<br>what i really need to learn it is one little demo where just two pcs with given ips are sending packages. that is all :) <br><br></td></tr></table><br>
<a name="763501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> K-NetLib here. <a href="http://www.krylarskreations.com/knl.shtml" target="_blank">http://www.krylarskreations.com/knl.shtml</a><br>Simple and free. <br><br></td></tr></table><br>
<a name="763569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> it is working, but i just dont understand why people always do the same mistake and make some long code. are there samples of knet which are less than 100 lines? <br><br></td></tr></table><br>
<a name="763637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most if not all of those demos should work DC.  I dont think they would release all of these packages if they were broken.   If you are having problems with connections, maybe you should read up more on networking in general.  Chances are you have an issue with your router.  I dont know what ports and protocols counter strike uses... but just because it gets passed through NAT doesnt mean that your personal program will.  Thats like saying, I can open aim on my pc, why cant I vpn to my home computer from china. haha.  Also a lot of routers have what is called "UDP packet scanning" "Denial of Service" "Packet flood inspection" among other things.  These options will chop the headers or udp streams and cause chaos with any "near" constant connection.  Id bet all of those apps work.  Check your home network.  Also why such haste? <br><br></td></tr></table><br>
<a name="763741"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> counterstrike and knet were working. my issue, is that knet is too much of code. i'm looking for a rather slim knet code <br><br></td></tr></table><br>
<a name="764021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try my example?<br><br>(&gt;<br>...<br>WriteInt mystream, 314159<br>sendUDPMsg mystream, UDPMsgIP(mystream),UDPMsgPort(mystream)<br>...<br>)<br><br>Maybe you should test it on localhost first, using two windows on your desktop, one client and one host. They need to use unique Ports, of course. If this works then it must be something with your router.<br><br>Post the miminal test code that didn't work. <br><br></td></tr></table><br>
<a name="764024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure that you can make quality network program with few lines of code..and as Vertigo said, things working for sure (as well as NetBlitz), its up to your local network configuration..on my side working just fine same as  BlitzPlay, after i realized problem with my router... <br><br></td></tr></table><br>
<a name="781823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ching</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone tell me why bother using UDP when direct play is part and parcel of Blitz3d?<br>I have created network games that use direct play features and its easy peasy.<br>Having said that where is all the info about Gnet? <br><br></td></tr></table><br>
<a name="781830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> the blitz3d directplay is based on tcp, which makes it 3-4 times slower than udp. also its very user-unfriendly and does not work well in fullscreen mode.<br><br>gnet is good, except, that there is no small example... <br><br></td></tr></table><br>
<a name="781837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would my tutorial be of any help for you ? It's a complete internet/LAN chat program, you find the server and client source code in the code archive:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=28" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=28</a><br><br>Sergio. <br><br></td></tr></table><br>
<a name="827957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Litobyte</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please can you guys have a look here:<br><a href="http://www.blitzbasic.com/en/Community/posts.php?topic=31510" target="_blank">http://www.blitzbasic.com/en/Community/posts.php?topic=31510</a><br>(see the last post of the topic)<br><br>and try to help me !!?<br><br>Please, please, please, I'm stuck!<br><br>Thank you <br><br></td></tr></table><br>
<a name="828215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I havent read all the responses so it may have been mentioned but.  If you have a windows firewall or another firewall enabled you will need to ensure it allows the traffic IN on both machines.<br><br>If you switch off the windows firewall on both machines this will temporarily tell you if they communicate.  Don`t be connected to the internet while you do this as you will be exposed. If it works then you will need to re-enable the firewall and find the ports used by the software and create explicit rules. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
