<!DOCTYPE html><html lang="en" ><head ><title >ferris wheel</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ferris wheel</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >ferris wheel</a><br><br>
<a name="1017773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't seem to get this one right. I am making a ferris wheel and I need the cars (18 of them) to always face forward but still spend around the wheel. I have set up pivots at the points I want the cars. I do understand that by using MoveEntity the object that is parented resets it's global coordinates to the parents position but it just wont work. Somehow I came up with this...<br><pre class=code>
For t=1 To 1296 Step 36
	
	c.cars = New cars
	c\carpiv=CreateSphere(16,ferris)
	ScaleEntity c\carpiv,.2,.2,.2
	TurnEntity c\carpiv,0,0,t
	MoveEntity c\carpiv,0,2,0
	EntityParent c\carpiv,0
	c\carmesh=CopyMesh(car1)
	ScaleEntity c\carmesh,1,1,1
	
Next</pre><br><br>I have tried tonnes of different parenting options and other sorts of goodies but I usually end up with the pivots spinning with the wheel but the cars are sitting across the map, and not moving at all.<br><pre class=code>
	For c.cars = Each cars
		;PointEntity c\carpiv,merry
		EntityParent c\carpiv,0
		PositionEntity c\carmesh,EntityX(c\carpiv),EntityY(c\carpiv),EntityZ(c\carpiv)
	Next</pre><br><br>This is the movement, once again I have tried many different options. What I would like help on is if there is another option to do this or just anyway you could help really. Thanks for the help! <br><br></td></tr></table><br>
<a name="1017775"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jiffy</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll bite:<br><br>1. Not enough code<br>2. Not sure what you mean by "but the cars are sitting across the map"<br>3. For t=1 To 1296 Step 36: why 1296?.<br>4. EntityParent c\carpiv,0 : you do this twice- once is normally enough.<br><br>Can't suggest anything properly without seeing what you're doing better. <br><br>Um, use a physics engine?<br>Other than that, post more code- preferably something that can be run &amp; fixed. <br><br></td></tr></table><br>
<a name="1017776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drak</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you try <br><pre class=code>
PositionEntity c\carmesh,EntityX(c\carpiv,1),EntityY(c\carpiv,1),EntityZ(c\carpiv,1)
</pre><br><br>Throwing the "1" in after the entityXYZ may help.<br><br>Edit: EntityParent c\carpiv,0 sets the parent to 0, or nothing.<br><br>Edit 2: Did some quick brainstorming.  I have an idea I'll knock together  quick to see if it works. <br><br></td></tr></table><br>
<a name="1017780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ya, I probably should of stated that the code I posted was just showing the way I was going, not exactly how I would do it. Its just i got to the point of trial and error. Thanks for the understanding Drak, I tried the globalizing thing and it didn't seem to help but I have an idea I will try out tomorrow. Thanks again for the help!<br><br>Edit : by the way, the "For t=1 To 1296 Step 36" is there because I somehow got the numbers from my handy dandy calculator and it gave me 18 objects and the turn radius I needed. (I need some sleep)<br><br>edit 2 : opps, I get 10 cars, not 18, oh well. <br><br></td></tr></table><br>
<a name="1017782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I seemed to have got it workin, thanks Drak, that was the issue, goodnight people. <br><br></td></tr></table><br>
<a name="1017783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Drak</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aw man.. just got this done. Ima post it anyway :)<br><br>This may or may not help you but this is the way I would try to do it.  The cars are not actually "attached" to the wheel per se, but the program makes it appear so.<br><br>Tip: Turn the degrees turned in the main loop from .1 to 1 and it makes you dizzy!<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

AppTitle "Ferris Wheel Example."
Graphics3D 800,600
SeedRnd MilliSecs()
SetBuffer BackBuffer()


camera = CreateCamera()					;camera
MoveEntity camera, 0,0,-30				;move it backwards
sun = CreateLight()						;create some light
RotateEntity sun, 45,45,0				;rotate it for no reason in particulaer


Global carriage = CreateCube()			;create a cube for a car
ScaleEntity carriage, .5, .5, .5		;scale it down a bit
EntityColor carriage, 150,0,0			;we'll make them red
HideEntity carriage						;hide it for now

Type car								;new type car
	Field mesh							;this holds the mesh
	Field central_pivot					;we need a temporary central pivot to get the car in the right spot
End Type

Global master_pivot = CreatePivot()		;this controls all movement for the wheel

Global wheel = CreateCylinder(18,1)		;here is where we create the actual "wheel"
ScaleEntity wheel, 10,.2,10				;scale it appropriately
RotateEntity wheel, 90,0,0				;turn it the correct direction
EntityParent wheel, master_pivot		;and parent it to the master_pivot

Global wheel_inside = CreateCylinder(18,1)	;this "wheel_inside" simply creates the illusion of a void 
ScaleEntity wheel_inside, 9,.25,9			;in the center of the wheel.  It's only for demonstration purposes.
RotateEntity wheel_inside, 90,0,0
EntityParent wheel_inside, master_pivot
EntityColor wheel_inside, 0,0,0

;360 divided by 18 cars = 20 degrees
For placement = 0 To 360 Step 20						;ok placement will = 0, then 20, then 40, etc...
	c.car = New car										;create a new car
		c\central_pivot = CreatePivot(master_pivot)		;place a central pivot and parent it to master_pivot
		c\mesh = CopyEntity(carriage,c\central_pivot)	;now place the mesh, and parent it to the central_pivot
		MoveEntity c\mesh, 0,10,0						;move the car UP 10 spaces (since our wheel is scaled up 10x)
		RotateEntity c\central_pivot, 0,0,placement		;now, key is to rotate the central pivot in 20 degree increments to position the cars correctly.
Next


;-----------------------------------------------------------------------------------------------------
;PROGRAM LOOP
;-----------------------------------------------------------------------------------------------------
While Not KeyHit(1)
	;ONLY 2 COMMANDS NEEDED
	TurnEntity master_pivot, 0,0,.1		;Turn only the master_pivot .1 degrees.
		For c.car = Each car			;For each car
			RotateEntity c\mesh, 0,0,0,1;rotate it's orientation to 0,0,0,Globally
		Next

UpdateWorld
RenderWorld 

Flip 

Wend
</textarea> <br><br></td></tr></table><br>
<a name="1017817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is very well documented, thank you. <br><br></td></tr></table><br>
<a name="1020479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Heliotrope</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this will work.<br><br>if entityxyz car &lt;&gt;0 then rotateentity car,1,1,1 <br><br></td></tr></table><br>
<a name="1020489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dunno if you've solved it, but surely creating pivots where the car attach to the wheel, and parent the pivots to the wheel, then parent the cars to the pivots, and rotate the pivots at the same rotation as the main wheel. <br><br></td></tr></table><br>
<a name="1020511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I solved it thanks to Drak's suggestion. What I did was load the cars and the wheel sepparatly. I used <pre class=code>For t=1 To 1296 Step 36</pre> to copy the cars and then parented them to the wheel. I used <pre class=code>TurnEntity c\carpiv,0,0,t and MoveEntity c\carpiv,0,2,0</pre> to position them. Then I used <pre class=code>For c.cars = Each cars
		PositionEntity c\carmesh,EntityX(c\carpiv,1),EntityY(c\carpiv,1),EntityZ(c\carpiv,1),1
	Next</pre><br>to position them in the main loop. <br><br></td></tr></table><br>
<a name="1020619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> another possibility:<br><br><pre class=code>
Graphics3D 800,600
wheel=CreateCylinder(18,1,0)
TurnEntity wheel,90,0,0
ScaleEntity Wheel,6,.7,6


car0=CreateCube()
HideEntity car0


World= CreateSphere(16)
EntityColor world,111,111,255
FlipMesh world
ScaleEntity World,200,50,200

camera=CreateCamera()
CameraFogColor camera,111,111,255
CameraFogRange camera ,1,250
CameraFogMode camera,1
MoveEntity camera,0,0,-25





light=CreateLight()
LightColor light, 255,222,0
MoveEntity Light,-20,20,-10
RotateEntity light,75,40,0

sun=CreateSphere(16)
EntityColor sun,255,255,111
MoveEntity sun,-100,20,110
ScaleEntity sun,11,11,11

light2=CreateLight()
LightColor light2, 5,55,22
MoveEntity Light2,20,20,-10
RotateEntity light2,-90,45,0


Plane=CreatePlane(16)
MoveEntity Plane, 0,-15,0
EntityColor Plane ,0,55,110



Dim car(20)
For i=0 To 17
   car(i)=CopyEntity(car0)
   ScaleEntity car(i),0.1,.2,1
   MoveEntity car(i),Sin(i*20)*2,0,Cos(i*20)*2	
   EntityParent car(i),wheel,0
Next


Repeat
	TurnEntity wheel, 0,.1,0
	PointEntity camera, wheel
	For i=0 To 17
		RotateEntity car(i),0,0,0,True
	Next 
	RenderWorld
	Flip 0
Until KeyHit(1)

</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
