<!DOCTYPE html><html lang="en" ><head ><title >Optimisation and the inner workings of Blitz</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Optimisation and the inner workings of Blitz</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Optimisation and the inner workings of Blitz</a><br><br>
<a name="247557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skitchy</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a few questions :<br><br>1) I'm fully aware that surface count is the no. 1 speed barrier in Blitz. However I'm a little unclear on how Blitz allocates new surfaces. Lets say I have 10 particles (sprites). They are all identical - same texture, same color, same alpha. How many surfaces?<br><br>2) Now I alter the alpha of 5 of the 10 particles to 0.5. How many surfaces?<br><br>3) Now I use EntityColor() to make all the particles DIFFERENT colors. How many surfaces?<br><br>4) When I started my project I didn't know about the sizing 'rules' for meshes (1 unit=1 foot or whatever) and consequently all my geometry is very large-scale. Changing it all would be a MAJOR job. It works fine, but I have to have the CameraRange set to 75,55000. My question is : could this have negative effects down the line ie. are there graphics cards / PCs that wont like such a large number and kick up z-buffer / framerate / other problems? NB. my VooDoo3 seems to handle it just fine, and that's some pretty old hardware ;)<br><br>5) Does .png have any speed advantages over .bmp in terms of loading times (what with the files being much smaller).<br><br><br>Thanks in advance :) <br><br></td></tr></table><br>
<a name="247576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5) pngs are compressed.  So of course they load slower than bmps, which do not need to decompress during loading (CPU dependant versus harddrive speed dependant - I'm assuming CPUs can decompress a png faster than a harddrive can load a bmp:).  Of course, who the hell cares, the file sizes rock.  =] <br><br></td></tr></table><br>
<a name="247618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>1) Sprites work by dynamically creating a mesh each render world. But the mesh is drawn in 'chunks', with renderstate changes in between. Blitz checks for redundant changes, though, so the overhead isn't too bad. Still, this could be dramamtically improved using vertex alpha/color.<br><br>4) I would recommend reducing the size of your units! You may have future problems with zbuffering and collisions. <br><br></td></tr></table><br>
<a name="247628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5) Personally I have dropped all .jpgs/.pngs from my game from the start... I want 100% quality where every pixel is like I want and does not detoriate during editing (saving, editing, saving etc .jpgs does that) and only .tga and .bmp formats can deliver that. Filesizes are bigger, yes, but in the end the difference isn't that great IMO (what's few megs anyway...). And of course .tgas and .bmps compress pretty nicely for installer/download package. <br><br></td></tr></table><br>
<a name="247635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Mustang<br><br>Aren't PNGs lossless in their compression? If not, they make a pretty job of hiding it. <br><br>JPGs - Just a bit too lossy for me! <br><br></td></tr></table><br>
<a name="247641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> PNGs are lossless, yes. <br><br>Nobody should EVER, EVER, be loading jpegs, editing them and saving them again. Load your uncompressed version, edit it, and resave the jpeg over the top of the old jpeg. <br><br></td></tr></table><br>
<a name="247651"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeh Mustang, leave pngs out of it, they rock ;]<br><br>jpegs are of course fine if you compress them at 0%, but they're still a little large.  Like, not compressed at all.  =] <br><br></td></tr></table><br>
<a name="247660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate .pngs just because they do not get along with my Photoshop6 (which is not .pngs fault of course!). Just try to do .png with alpha using Photoshop... not fun! I gave up and use .tga with alpha channel - works 100%. <br><br></td></tr></table><br>
<a name="247663"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I would recommend reducing the size of your units! You may have future problems with zbuffering and collisions. <br></div>Duh? I can't say for the collisions as it clearly depends on the blitz implementation, but for zbuffer, why would there be any problem with big scales? Unless you use very, very big scales (going to the limit of floats precision), all that matters for zfighting issues on todays gfx cards is the ratio "far clipping distance / near clipping distance", meaning that having<br><pre class=code>CameraRange(cam,1,1000)</pre>or<br><pre class=code>CameraRange(cam,100,100000); (with entities 100 times bigger)</pre>should give the exact same result.<br>Any enlightment, Mark? Maybe I've missed some Blitz specific issue, but just can't figure out what. <br><br></td></tr></table><br>
<a name="247718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Really? What problem do you have with png + alpha + photoshop 6? It all seems okay to me. <br><br></td></tr></table><br>
<a name="247748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't speak for his problems of course but for me alpha in png has the obvious problem of losing the alpha-ed out portions of the image when I load the png.  I use png for my alpha transparency needs but I always have to work on and save from a non-png version (as you pointed out to do with jpg images) because loading the png image loses a lot of information.<br><br>Mustang, note that doing alpha transparency for png is fundamentally different than for tga images.  With the latter you simply create a new channel called "alpha."  While this technically works with png you end up with ugly white halos due to anti-aliasing and the fact that alpha-ed out portions of the image are turned white when the png is saved.  Instead you need to set the image as a layer, eliminate all other layers (including the background layer,) add a mask to the image layer, and paste your alpha image onto the mask's channel.<br><br>*****<br><br>Skitchy, things are a little different with sprites (as mark indicated) but for most entities surfaces are allocated by entity first, and then further split up based on texture/material within and entity.  So even if they all have the exact same texture/material, 10 separate entities are 10 separate surfaces. <br><br></td></tr></table><br>
<a name="247795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Mustang, note that doing alpha transparency for png is fundamentally different than for tga images. With the latter you simply create a new channel called "alpha." While this technically works with png you end up with ugly white halos due to anti-aliasing and the fact that alpha-ed out portions of the image are turned white when the png is saved. Instead you need to set the image as a layer, eliminate all other layers (including the background layer,) add a mask to the image layer, and paste your alpha image onto the mask's channel. <br></div><br><br>Yup. I use .TGAs at work (or separate alpha images that the code compiles together) so working with .TGA and alpha channels is like "second nature" to me... PNGs gave me so much unneeded hassle and problems + different workflow that I just ditched PNG - why fight when I have working alternative? (bit like DarkBasic vs. Blitz3D... :)). <br><br></td></tr></table><br>
<a name="247959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah okay. Since I always work from psd files and save out to whatever format I need from there, I guess it never cropped up for me. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
