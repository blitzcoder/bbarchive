<!DOCTYPE html><html lang="en" ><head ><title >Blitz Lighting Equation</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz Lighting Equation</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blitz Lighting Equation</a><br><br>
<a name="221544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the equation Blitz uses for lighting.  It might come in handy if you want to mimic it's lights with your own vertex lighting.<br><br>This is the DX lighting equation:<br>a = 1 / (c0 + c1*d + c2*d*d)<br><br>In Blitz c0 and c2 are 0, and c1 is 1.<br><br>This gives a falloff like this:<br><a href="http://mathworld.wolfram.com/GabrielsHorn.html" target="_blank">http://mathworld.wolfram.com/GabrielsHorn.html</a><br><br>Where at a radius of 1, a = 1, beyond that radius it falls off quickly, expoentially I beleive it's called, and inside that radius it increases until it reaches infinity where d = 0.<br><br>Since c0 and c2 = 0 the ligthing equation can be simplified to:<br><br>a = 1 / d<br><br>And then we add the light radius like so:<br><br>a = r / d<br><br>And then once you calculate that for a particular light, you just multiply the light RGB by a.<br><br>(All of those should be floats btw.)<br><br><br>So:  <br><br>Light_Falloff# = Light_Min_Radius# / Vertex_Distance#<br>Vertex_R# = Light_R# * Light_Falloff#<br><br><br>Also note that the help file is mistaken on the light radius when it says that is approximately where the light falls off to 0.  In actuality, the light falls off to 1 at 255*Light_Radius.<br><br>It falls off to 0 at infinity, but because colors are clamped to integers, the oint where it goes below 1 is where it gets clamped to 0.<br><br>So for a light radius of 20, the light falls off to 0 at a distance of 5100!  Ouch. :-)<br><br>It falls off to less than that much closer though. <br><br></td></tr></table><br>
<a name="221609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift - do you mind if I add this to the light help or the FAQ? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
