<!DOCTYPE html><html lang="en" ><head ><title >More boring zooming questions...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More boring zooming questions...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >More boring zooming questions...</a><br><br>
<a name="862826"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hollifd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a couple of zooming related questions...<br><br>Question 1:<br>I need to know how I can zoom towards the current position of the mouseX() and MouseY() using the center mouse button.<br><br>I use ProEngineer CAD software at work and it has this zoom ability.  I am trying to build that type of zoom using Blitz.  No matter where I place the mouse on the screen, ProEngineer will zoom to that point when scrolling the middle mouse wheel.<br><br>Question 2:<br>In ProEngineer, when I zoom in, everything appears flat on the screen but in Blitz, objects change shape as I zoom in, out, up or down.<br><br>For example:<br>Suppose I have a cube 1 unit wide in X axis, 1 unit tall in Y axis, and 12 units deep in Z axis.<br><br>In ProEngineer, I can zoom in or out and the cube that is displayed on the screen always stays 1 unit wide by 1 unit tall.  It just gets bigger or smaller depending upon if I am zooming in or out.  I never see the depth of the cube.<br><br>In Blitz, when I zoom in or out, I can sometimes see the depth of the cube depending upon where the cube is on the screen.<br><br>Is it possible to have all objects appear flat on the screen while zooming in or out like they do in ProEngineer?  Ideally, I would want all of my objects to always appear flat on the screen no matter how far away they may be from the center of my screen.<br><br>Question 3:<br>Not related to zooming...<br>How do I post code to this sight and have all of the indentation remain?  When I post my code, all of the code is left justified and it looks very unreadable.<br><br><br>I am sure these are very boring questions for game programmers but I am building a machine simulator for use at work and I am not really a programmer so I am having to learn a bunch on my own.<br><br><br>Thanks for any advice you may have,<br><br>David<br><br>I mistakenly posted this in the regular forum.  I meant to post in the beginners forum and do not know how to move it.  Perhaps someone else can move it for me. <br><br></td></tr></table><br>
<a name="862830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Point one for me, would involve putting a pivot at the mouses x and y position. Since you seem to be working in 2d, this should be easy to do. When zooming in, you want to do the following:<br><br>Point the camera at the pivot.<br>Move the camera towards the pivot.<br>Restore the cameras default rotation so it faces the drawing board again. Doing that inbetween renders, you won't notice the steps that took place.<br><br>Point 2: You will need to use orthographic camera project mode. A little tricky to get the camera zoom value correct to show everything you want to show, but it will stop you seeing the depth of your objects.<br><br>Point 3:<br><br>[ code ]<br><br>code here!<br><br>[ /code ]<br><br>If it's a long piece of code, use:<br><br>[ codebox ]<br><br>code here!<br><br>[ /codebox ]<br><br>No spaces betwwen the brackets though :o)<br><br>I still think your better doing this in 2d :o) <br><br></td></tr></table><br>
<a name="862831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have time to explain 1. right now but ...<br><br>2.  You could use orthagonal camera, cameraprojmode 2 if I remember.  Z-ordering gets a bit screwed up with this though.  Alternatively, set the camera far away from the scene with an appropriate near and far range and camerzoom right in to get a more of less ortho view.  There are little or no z-ordering issues using this method.<br><br>3.  Use <br><br>{code} <br>Your code goes here<br>{/code}<br><br>or<br><br>{codebox}<br>Your code goes here<br>{/codebox}<br><br>but<br><br>replace the {} with [].<br><br>Stevie<br><br>EDIT:  FFS Ross!!!  You always seem reply 2 secs before me ;) <br><br></td></tr></table><br>
<a name="862832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> creepy ;o) <br><br></td></tr></table><br>
<a name="862834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great Scots think alike and all that! <br><br></td></tr></table><br>
<a name="862838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hollifd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys!<br><br>I will give those ideas a try.<br><br>David <br><br></td></tr></table><br>
<a name="863717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hollifd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.  The orthagonal camera worked out perfectly for my needs.<br><br>I could not figure out the "zooming to my mouse position".  However, it is not critical for what I am trying to do.  Maybe I will try again later after I get a little further with my learning.<br><br>Thanks again,<br><br>David <br><br></td></tr></table><br>
<a name="863725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll knock together something for you. <br><br></td></tr></table><br>
<a name="863780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This isn't perfect, as it zooms into the corner of the zoom point. The football is on, so i'll maybe see if i can get it working properly.<br><br>ARROW keys to move the zoom point. key "1" to zoom in. Key "2" to zoom out.<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global camera = CreateCamera()
PositionEntity camera,0,0,-10

Global light = CreateLight()


Global zoom_piv = CreateSphere()
ScaleEntity zoom_piv,0.3,0.3,0.3

Global plane = CreatePlane()
TurnEntity plane,-90,0,0

Global plane_texture = CreateTexture(64,64)
SetBuffer TextureBuffer(plane_texture)
Color 128,128,255
Rect 0,0,64,64
Color 64,64,255
Rect 1,1,62,62

SetBuffer BackBuffer()

EntityTexture plane,plane_texture


While Not KeyHit(1)

	If KeyDown(203) Then MoveEntity zoom_piv,-0.1,0,0
	If KeyDown(205) Then MoveEntity zoom_piv,0.1,0,0
	If KeyDown(200) Then MoveEntity zoom_piv,0,0.1,0
	If KeyDown(208) Then MoveEntity zoom_piv,0,-0.1,0
	
	If KeyDown(2) Then
		zoom_in()
	ElseIf KeyDown(3) Then
		zoom_out()
	End If
	
	UpdateWorld
	RenderWorld
	Flip
	
Wend

Function zoom_in()

	PointEntity camera,zoom_piv
	If EntityDistance#(zoom_piv,camera)&gt;1.9 Then
		MoveEntity camera,0,0,EntityDistance#(zoom_piv,camera)/30.0
	End If
	RotateEntity camera,0,0,0
	
End Function

Function zoom_out()

;	PointEntity camera,zoom_piv
	If EntityDistance(zoom_piv,camera)&lt;10 Then
		MoveEntity camera,0,0,-EntityDistance#(zoom_piv,camera)/30.0
	End If
	RotateEntity camera,0,0,0
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="863997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hollifd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Ross C!<br><br>It works good enough for me.  I changed the zoom speed to be faster and I hooked it up to my middle mouse wheel so I could use the wheel for zooming in and out.<br>Here is the code that I used for detecting the mousewheel.  It may not be as efficient as it could be and it may not be the right way to do at all.  If you know of a better way, I would love to know it...<br><br><pre class=code>

CurrentMouseZ# = MouseZ()
IF CurrentMouseZ# &lt; SaveMouseZ# then
     SaveMouseZ# = CurrentMouseZ
     zoom_in()
END IF

IF CurrentMouseZ# &gt; SaveMouseZ# then
     SaveMouseZ# = CurrentMouseZ
     zoom_in()
END IF

</pre><br><br>I really want it to zoom in to my mouse position.  How do I make the zoom_pivot always follow my mouse pointer rather than having to use the arrow keys to move the zoom_pivot?  Does that complicate things too much?<br><br>Thanks,<br><br>David <br><br></td></tr></table><br>
<a name="864016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it should be easy enough :o) I get home in an hour. <br><br></td></tr></table><br>
<a name="864082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, done it. This uses camerapick() to get the 3d location of the mouse, as if it was projected onto the plane working surface. It then positions the pivot (visualised as a white sphere), at the mouse co-ords.<br><br>Now, because when you zoom in, the mouse co-ords remain the same, this causes a problem. The zoom will constantly try and centre the screen. So you have to adjust the mouse pointer too. So, i'm using cameraproject directly after my zoom code, in the "zoom_in" function.<br><br>What this does it take an entity in the 3d world, and return it's 2d co-ords on screen. So after the zoom, the pivot moves closer to the centre of the camera. I project it's co-ords into 2d, and move the mouse to that location.<br><br><pre class=code>
Function zoom_in()

	PositionEntity zoom_piv,EntityX(zoom_piv,True),EntityY(zoom_piv,True),EntityZ(camera)
	If EntityDistance(camera,zoom_piv) &gt; 0.1 Then
		PointEntity camera,zoom_piv
		MoveEntity camera,0,0,EntityDistance#(zoom_piv,camera)/15
	End If
	PositionEntity zoom_piv,EntityX(zoom_piv,True),EntityY(zoom_piv,True),0

	PointEntity camera,zoom_piv
	If EntityZ(camera)&lt;-1.9 Then
		MoveEntity camera,0,0,EntityDistance#(zoom_piv,camera)/20
		If EntityZ(camera)&gt;-1.9 Then
			PositionEntity camera,EntityX(camera,True),EntityY(camera,True),-1.9
		End If
	End If
	
	RotateEntity camera,0,0,0
	
	CameraProject(camera,EntityX(zoom_piv,True),EntityY(zoom_piv,True),EntityZ(zoom_piv))
	MoveMouse ProjectedX#(),ProjectedY#()
	
End Function
</pre><br><br>The first part of that function moves the camera so the pivot is closer to the centre of the camera. It cuts off if it is within 0.1 blitz units, to stop it moving for so long.<br><br>The second part of the function is the same, except it moves the camera in more, actually zooming.<br><br>The third part of the function is the camera project stuff i explained above.<br><br>Full code:<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global camera = CreateCamera()
PositionEntity camera,0,0,-10

Global light = CreateLight()


Global zoom_piv = CreateSphere()
ScaleEntity zoom_piv,0.3,0.3,0.3

Global plane = CreatePlane()
TurnEntity plane,-90,0,0
EntityPickMode plane,2

Global plane_texture = CreateTexture(64,64)
SetBuffer TextureBuffer(plane_texture)
Color 128,128,255
Rect 0,0,64,64
Color 64,64,255
Rect 1,1,62,62

SetBuffer BackBuffer()

EntityTexture plane,plane_texture


While Not KeyHit(1)

	If KeyDown(203) Then MoveEntity zoom_piv,-0.1,0,0
	If KeyDown(205) Then MoveEntity zoom_piv,0.1,0,0
	If KeyDown(200) Then MoveEntity zoom_piv,0,0.1,0
	If KeyDown(208) Then MoveEntity zoom_piv,0,-0.1,0
	
	If KeyDown(2) Then
		zoom_in()
	ElseIf KeyDown(3) Then
		zoom_out()
	End If
	
	CameraPick camera,MouseX(),MouseY()
	PositionEntity zoom_piv,PickedX(),PickedY(),0
	
	UpdateWorld
	RenderWorld
	Flip
	Delay 20
	
Wend

Function zoom_in()

	PositionEntity zoom_piv,EntityX(zoom_piv,True),EntityY(zoom_piv,True),EntityZ(camera)
	If EntityDistance(camera,zoom_piv) &gt; 0.1 Then
		PointEntity camera,zoom_piv
		MoveEntity camera,0,0,EntityDistance#(zoom_piv,camera)/15
	End If
	PositionEntity zoom_piv,EntityX(zoom_piv,True),EntityY(zoom_piv,True),0

	PointEntity camera,zoom_piv
	If EntityZ(camera)&lt;-1.9 Then
		MoveEntity camera,0,0,EntityDistance#(zoom_piv,camera)/20
		If EntityZ(camera)&gt;-1.9 Then
			PositionEntity camera,EntityX(camera,True),EntityY(camera,True),-1.9
		End If
	End If
	
	RotateEntity camera,0,0,0
	
	CameraProject(camera,EntityX(zoom_piv,True),EntityY(zoom_piv,True),EntityZ(zoom_piv))
	MoveMouse ProjectedX#(),ProjectedY#()
	
End Function

Function zoom_out()

	If EntityZ(camera)&gt;-10 Then
		MoveEntity camera,0,0,-EntityDistance#(zoom_piv,camera)/20.0
		If EntityZ(camera)&lt;-10 Then
			PositionEntity camera,EntityX(camera,True),EntityY(camera,True),-10
		End If
	End If
	
	RotateEntity camera,0,0,0
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="864096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >hollifd</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C,<br><br>That works perfectly for me.  Thanks for the explanation too.<br><br>Also, Thanks for the explanation of the "Type, End Type" in one of your posts to me in the Beginner's Forum.  I am redoing some of my code to use that and it is making my life much simpler and code a lot shorter.<br><br>I had seen that before but never took the time to learn more about it.  Too bad for me.<br><br>Have a good evening?  I do have more questions on different topics but I'll try not to bug you again for a while.<br><br>Thanks again for all of your time and help,<br><br><br><br>David <br><br></td></tr></table><br>
<a name="864097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep types are great :o) When i first came to blitz, i had previous programmed on the commodore, and being the stubborn person i am, refused to use types for a while. Even refused to use functions for a long time, rather using lots of global variables and subroutines via gosub.<br><br>Nice to see you picking them up :o)<br><br>Good evening to you too sir! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
