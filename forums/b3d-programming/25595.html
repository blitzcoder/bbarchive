<!DOCTYPE html><html lang="en" ><head ><title >A question about sswifts ball physics code.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A question about sswifts ball physics code.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >A question about sswifts ball physics code.</a><br><br>
<a name="266296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been looking at the code and it is obviously very helpful when it comes to learning ball physics, I have also looked at hw others have used it.  One question is that how do you aim the ball at something as in a pool game of miniature golf.  I'm having a lot of trouble getting the ball to move in a desired direction, any help is greatly appreciated. <br><br></td></tr></table><br>
<a name="266305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you know how the velocity is stored each frame in values like vx, vy, vz?<br><br>Well to shoot it in a specified direction you need to figure out the normal of the direction and the magnitude of the force which you want to apply.<br><br>To make things simple for you, you can use a pivot.<br><br>First, make a pivot.<br><br>Next, point the pivot in the direction which you want to apply a force to the ball.<br><br>Then do this:<br><br>TFormVector 0, 0, Speed#, Pivot, 0<br>Vx# = Vx# + TformedX#()<br>Vy# = Vy# + TformedY#()<br>Vz# = Vz# + TformedZ#()<br><br>And that's it.  Speed# is for example, 10, if you want to add 10 blitz units per second of speed to your ball.  In other words, it would move 10 in the world every second.<br><br>I use a scale of 1 unit in the world = 1 meter in my games, so I can say that that is 10 meters per second, which is a lot easier to say and conceptulize. :-)<br><br><br>Anyhow, your ball will then be moving at 10 meters per second minus whatever it was moving in any other direction at the time. <br><br></td></tr></table><br>
<a name="266388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you are the god of blitz.  I appreciate the help, thanks <br><br></td></tr></table><br>
<a name="267332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift- it works except if I put the speed above 100 it doesn't work, and it seems that the max speed is 50 anything above or below is less.  Here is my code as it is any idea whats wrong.<br>[CODE] <br>Graphics3D 640,480 <br>SetBuffer BackBuffer()<br><br>; world vars <br>Global cam,ball,world,BallRadius#=2,vector_piv,aim,speed#<br><br>Const GRAVITY# = .98 <br>Const AIR_FRICTION_CONSTANT# = 0.01 <br>Const GROUND_FRICTION_CONSTANT# =.05 <br><br>; SETUP COLLISIONS <br>Const Type_Ball=1,Type_World=2<br>Collisions Type_Ball,Type_World,2,2<br><br>Type ball <br>  Field entity<br>  Field vx#,vy#,vz# <br>  Field oldx#,oldz#,newx#,newz# <br>End Type <br><br>initialize_world()<br><br>While Not KeyHit(1) <br>update_ball()<br><br>If KeyHit(5) Then fire_cannon()<br><br>UpdateWorld <br>RenderWorld<br>getposition()<br>Flip <br>Wend <br>End<br><br>Function initialize_world() <br>AmbientLight 200,225,200<br><br>lite=CreateLight()<br><br>cam=CreateCamera() ; create a world camera <br>PositionEntity cam,50,600,-75<br>MoveEntity cam,0,0,0<br>CameraClsColor cam,175,225,255<br><br>b.ball= New ball <br>b\entity =CreateSphere(12) <br>ScaleMesh b\entity,2,2,2<br>PositionEntity b\entity,5,10,-50<br>EntityRadius b\entity,3<br>EntityType b\entity,Type_Ball <br><br>aim=CreateCube()<br>ScaleMesh aim,.25,.25,8<br>PositionEntity aim,EntityX(b\entity),EntityY(b\entity),EntityZ(b\entity)<br><br>vector_piv=CreatePivot()<br><br>world=LoadMesh("test.3ds")<br>ScaleEntity world,.5,.5,.5<br>EntityType world,Type_World<br><br>PointEntity cam,world<br>End Function<br><br>Function update_ball() <br>For b.ball=Each ball <br>PositionEntity aim,EntityX(b\entity),EntityY(b\entity),EntityZ(b\entity)<br>If KeyDown(203) TurnEntity aim,0,1,0<br>If KeyDown(205) TurnEntity aim,0,-1,0<br>RotateEntity vector_piv,EntityPitch(aim),EntityYaw(aim),EntityRoll(aim)<br>If KeyDown(200) speed#=speed#+.5<br>If KeyDown(208) speed#=speed#-.5<br><br>  Entity_Hit=EntityCollided(b\entity,Type_World)<br>  ;calculate velocity<br>  Velocity# = Sqr(b\Vx#^2 + b\Vy#^2 + b\Vz#^2)<br>  If Velocity# &gt; 0<br>  ;Calc dir vector<br>  Direction_X# = b\Vx# / Velocity# <br>  Direction_Y# = b\Vy# / Velocity# <br>  Direction_Z# = b\Vz# / Velocity#  <br>  ;Air friction<br>  Air_Friction_Force# = AIR_FRICTION_CONSTANT# * Velocity#^2.0 <br>  Velocity# = Velocity# - (Air_Friction_Force#)<br><br>  ;ground friction<br>  If entity_hit&gt;0<br>  Velocity# = Velocity# - (GROUND_FRICTION_CONSTANT#)<br>  EndIf<br>  ;velocity always &gt; 0<br>  If(Velocity#&lt;0) Then Velocity#=0<br>  ; Convert the entity's velocity and direction back into a motion vector. <br>  b\Vx# = Direction_X# * Velocity# <br>  b\Vy# = Direction_Y# * Velocity# <br>  b\Vz# = Direction_Z# * Velocity# <br>  ; If the entity collided with the level, make it bounce. <br>  If Entity_Hit &gt; 0 <br>  ; Calculate bounce: <br>  ; Get the normal of the surface which the entity collided with. <br>  Nx# = CollisionNX(b\entity, 1) <br>  Ny# = CollisionNY(b\entity, 1) <br>  Nz# = CollisionNZ(b\entity, 1) <br>  ; Compute the dot product of the entity's motion vector and the normal of the surface collided with. <br>  VdotN# = b\Vx#*Nx# + b\Vy#*Ny# + b\Vz#*Nz# <br>  ; Calculate the normal force. <br>  NFx# = -2.0 * Nx# * VdotN# <br>  NFy# = -2.0 * Ny# * VdotN# <br>  NFz# = -2.0 * Nz# * VdotN# <br>  ; Add the normal force to the direction vector. <br>  b\Vx# = b\Vx# + NFx# <br>  b\Vy# = b\Vy# + NFy# <br>  b\Vz# = b\Vz# + NFz# <br>  ; Do not allow the entity to move vertically. <br>  If Vy# &gt; 0 Then Vy# = 0 <br>  EndIf <br>  EndIf <br><br>  ;Apply dir thrust<br>  b\Vx# = b\Vx# + (Thrust_X#) <br>  b\Vz# = b\Vz# + (Thrust_Z#)<br>  ; Apply gravity: <br>  b\Vy# = b\Vy# - (GRAVITY#)<br><br>  ; Move and rotate the entity: <br>  ; We rotate the entity by the actual distance moved and not by the velocity because if we rotate according <br>  ; to the velocity then the entity will roll when it's up against a wall and not moving. <br>  b\OldX# = b\NewX# <br>  b\OldZ# = b\NewZ# <br>  TranslateEntity b\entity, b\Vx#, b\Vy#, b\Vz#, True<br>  b\NewX# = EntityX#(b\entity, True) <br>  b\NewZ# = EntityZ#(b\entity, True) <br>  Mx# = (b\NewX# - b\OldX#) <br>  Mz# = (b\NewZ# - b\OldZ#)<br><br>  ; Rotate the entity the right amount for it's radius and the distance it has moved along the X and Z axis. <br>  ; This is kinda a hack and only designed for rolling on planes but you won't notice the diffrence. <br>  XAngleAdjust# = (Mx# / BallRadius#) * (180.0/Pi) <br>  ZAngleAdjust# = (Mz# / BallRadius#) * (180.0/Pi) <br>  TurnEntity b\entity,ZAngleAdjust#,0,-XAngleAdjust#,True <br>  Next<br>End Function <br>;=====================================================================================<br><br>Function fire_cannon() <br>For b.ball = Each ball <br>TFormVector 0,0,speed#,vector_piv,0<br>b\vx#=b\vx#+TFormedX#();/8<br>b\vy#=b\vy#+TFormedY#();/8<br>b\vz#=b\vz#+TFormedZ#();/8<br>Next <br><br><br><br>End Function <br>;=====================================================================================<br><br>[/CODE] <br><br></td></tr></table><br>
<a name="269087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you need to reduce the air friction constant to increase the maximum possible speed.  Air friction is expoential.  The faster you go, the more air friction you have and there is a certain speed you can't go above with X amount of thrust.<br><br>Are you saying that if you put the speed above 200 then your object actually moves at less than 50? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
