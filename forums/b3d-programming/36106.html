<!DOCTYPE html><html lang="en" ><head ><title >Positioning objects on vertices</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Positioning objects on vertices</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Positioning objects on vertices</a><br><br>
<a name="394610"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, how do i get objects like multiple sphere to each be positioned on a vertex on another object? <br><br></td></tr></table><br>
<a name="394612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Run throught the verts of an object getting the x,y and z of each and position an object at that position. <br><br></td></tr></table><br>
<a name="394618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have tryed that but it doesn't seem to work, i remember there being code somewhere in the code achieves that did that but dont know where it is, i'll have a look for it. <br><br></td></tr></table><br>
<a name="394644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> NewX=VertexX(vert1)<br><br>for eachVert(sphere)<br>    x#=newX+vertexX(sphere,spherevert)<br>next<br><br>etc.. <br><br></td></tr></table><br>
<a name="395005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks for the help, just on last question i am making a function to create hair for anyobject and have make a simple start to it, how do i get the object say if i was using a 3d rectangle how would i get it to go out of the object instead of at the top they come out of the enitity and at the bottom it comes though into the center of the object how would i sort that out? <br><br></td></tr></table><br>
<a name="395288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW. maybe you need to transform VertexX to real world coordinates using the TFormPoint command group.<br><br>And the hair thing: you could use Atan2 to determine the angle of a vertex in relation to the center of the mesh. You could then use this angle to let the hair "grow" away from the skin. <br><br></td></tr></table><br>
<a name="395299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you could just use the vertex normal of each. <br><br></td></tr></table><br>
<a name="395575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i'm sorry but i dont understand how to use these commands to get the hair strands to (from the positions on the vertices to them point away from the mesh instead of all going in the one direction, (sorry for the hassle but i aint very good with the understanding of how some of these things work). <br><br></td></tr></table><br>
<a name="395674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed, Sybixsus' Idea is better. Try to read about vertexNX, vertexny and vertexNz , they give you the rotation of a vertex this will make it very easy to turn your hair right. I think you only need to add 90 to each value. Check it out, play with it.<br><br>And the TFormPoint Command is used like this<br><br>first find the surface of the mesh (would be useful when the fur has it's own surface), then<br><br>x#=vertexx(surf,i)<br>y#=vertexy(surf,i)<br>z#=vertexz(surf,i)<br><br>tformpoint x,y,z,mesh,0<br>x2#=tformedx()<br>y2#=tformedy()<br>z2#=tformedz()<br><br><br>Now you got the true positions of the vertices, relative to the world in x2,y2,z2, and reltive to the mesh still in x,y,z.<br><br>I don't know eactly how you want to align the hair Triangles to the vertices, but as mentioned before you can use vertexNx etc. to align them to the skin. <br><br></td></tr></table><br>
<a name="395680"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, i have attempted to do that but it goes reall wrong it probably is the code of mine and that i am placing it in the wrong area, so because the code once done will be shared here it is.<br><br>Function Hair( mesh, length# )<br>surface = GetSurface(mesh,1)<br>For temp = 0 To CountVertices(surface) - 1<br>m2=CreateMesh()<br>surf=CreateSurface(m2)<br>AddVertex(surf,VertexX#(surface,temp), VertexY#(surface,temp), VertexZ#(surface,temp))<br>AddVertex(surf,VertexX#(surface,temp)+.01, VertexY#(surface,temp), VertexZ#(surface,temp))<br>AddVertex(surf,VertexX#(surface,temp), VertexY#(surface,temp)+length#, VertexZ#(surface,temp))<br>AddTriangle(surf,verts,verts+2, verts+1)<br>AddTriangle(surf,verts+1,verts+2,verts)<br>EntityColor m2,255,255,Rand(1,255)<br>EntityParent m2,mesh<br><br>Next<br>Return mesh<br>End Function<br><br>Graphics3D 640,480,32,2<br>SetBuffer BackBuffer()<br><br>camera=CreateCamera()<br>PositionEntity camera,0,0,-3<br><br>sphere = CreateSphere(30)<br><br>;If length#=&gt;5 Then length#=5<br>h=Hair( sphere,.5 )<br><br><br>While Not KeyHit(1)<br>;TurnEntity sphere,0,1,0<br>WireFrame True<br>RenderWorld<br>Flip<br>Wend<br>End<br><br>How would i apply the code you gave and add it to my code to make it work? <br><br></td></tr></table><br>
<a name="395814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you're basically wanting to draw vert normals, I have a lib in the codes archives to do this:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1085#comments" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1085#comments</a> <br><br></td></tr></table><br>
<a name="395857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just rtied to solve it, but it's darn tricky. I'll let you know. <br><br></td></tr></table><br>
<a name="395871"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made this:<br><br>This is using Tris. From some angles they may "blink"<br><pre class=code>
Graphics3D 640,480,32,2
SetBuffer BackBuffer()
camera=CreateCamera()
TranslateEntity camera,0,0,-3


c=CreateSphere(32) ; sphere width 32 segments for demo

;       mesh, lenght,width
c2=hair(c,0.2,.04)

;WireFrame 1

While Not KeyDown(1)
 TurnEntity c,.33,1,0
 RenderWorld()
 Flip
Wend
End

Function hair(mesh,ln#,wid#)
 s=GetSurface(mesh,1)
 m3=CreateMesh()
 For i=0 To CountVertices(s)-1
  m2=CreateMesh()
  s2=CreateSurface(m2)
  ScaleMesh m2,wid,ln,wid
  FitMesh m2,-MeshWidth(m2)/2.0,0,-MeshDepth(m2)/2.0,MeshWidth(m2),MeshHeight(m2),MeshDepth(m2)
  x#=VertexX(s,i)
  y#=VertexY(s,i)
  z#=VertexZ(s,i)
  
  nx#=VertexNX(s,i)
  ny#=VertexNY(s,i)
  nz#=VertexNZ(s,i)

  TFormPoint x,y,z,mesh,0
  x=TFormedX()
  y=TFormedY()
  z=TFormedZ()
  v0=AddVertex(s2,0,0,0)
  v1=AddVertex(s2,0,0+ln,0)
  v2=AddVertex(s2,0,0,0+wid)
  red  =Rand(255)
  green=Rand(255)
  blue =Rand(255)
  VertexColor s2,v0,red,green,blue
  VertexColor s2,v1,red,green,blue
  VertexColor s2,v2,red,green,blue
  AddTriangle(s2,v0,v1,v2)
  UpdateNormals m2

  AlignToVector m2,nx,ny,nz,2 ; didn't find a better way yet
  mpitch#= EntityPitch(m2,1)
  myaw#=   EntityYaw(m2,1)
  mroll#=  EntityRoll(m2,1)
  RotateEntity m2,0,0,0,1
  RotateMesh m2,mpitch,myaw,mroll
  PositionMesh m2,x,y,z
  EntityParent m2,mesh
  AddMesh m2,m3
  FreeEntity m2
 Next
 UpdateNormals m3 
 EntityFX m3,16 Or 2 ; 2=use vertexcolors, 16=show both sides of triangles
 EntityParent m3,mesh
End Function
</pre><br><br>This version is using cones instead. It may look better or more constant, but it also uses 3 times as much polygones:<br><pre class=code>
Graphics3D 640,480,32,2
SetBuffer BackBuffer()
camera=CreateCamera()
TranslateEntity camera,0,0,-3


c=CreateSphere(32) ; sphere width 32 segments for demo

;       mesh,lenght,width
c2=hair(c,0.1,.01)

;WireFrame 1

While Not KeyDown(1)
 TurnEntity c,.33,1,0
 RenderWorld()
 Flip
Wend
End

Function hair(mesh,ln#,wid#)
 s=GetSurface(mesh,1)
 m3=CreateMesh()
 For i=0 To CountVertices(s)-1
  m2=CreateCone(3)
  ScaleMesh m2,wid,ln,wid
  FitMesh m2,-MeshWidth(m2)/2.0,0,-MeshDepth(m2)/2.0,MeshWidth(m2),MeshHeight(m2),MeshDepth(m2)
  x#=VertexX(s,i)
  y#=VertexY(s,i)
  z#=VertexZ(s,i)
  
  nx#=VertexNX(s,i)
  ny#=VertexNY(s,i)
  nz#=VertexNZ(s,i)

  TFormPoint x,y,z,mesh,0
  x=TFormedX()
  y=TFormedY()
  z=TFormedZ()
  red  =Rand(255)
  green=Rand(255)
  blue =Rand(255)
  s2=GetSurface(m2,1)
  For i2=0 To CountVertices(s2)-1
   VertexColor s2,i2,red,green,blue
  Next

  AlignToVector m2,nx,ny,nz,2 ; didn't find a better way yet
  mpitch#= EntityPitch(m2,1)
  myaw#=   EntityYaw(m2,1)
  mroll#=  EntityRoll(m2,1)
  RotateEntity m2,0,0,0,1
  RotateMesh m2,mpitch,myaw,mroll
  PositionMesh m2,x,y,z
  EntityParent m2,mesh
  AddMesh m2,m3
  FreeEntity m2
 Next
 UpdateNormals m3 
 EntityFX m3,2
 EntityParent m3,mesh
End Function

</pre><br><br>I really had to use the AlignToVector Trick to make this work. Anyway, This way you can place only one "hair" on each Vertex of the skin. For a real Fur or Hair Effect you may use some kind of Special FX Tricks, as seen in the code archives (search for "fur"). <br><br></td></tr></table><br>
<a name="396021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, thanks that should help me alot, it will take me a while to finnish the function but i should be able to do the rest, thanks jfk, big10p, Sybixsus, Tony Soprano, and Rob Farley for all the help. <br><br></td></tr></table><br>
<a name="398080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i have been trying to do some work with the code but cant do any more, cause i do not have the programing skill to do what it needs, so i am gonig to put the code up for others and might if i learn anything of programing physics make updates.<br><br>link:<br><a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1113" target="_blank">http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1113</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
