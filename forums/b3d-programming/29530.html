<!DOCTYPE html><html lang="en" ><head ><title >Getting a angle for an entity relative to a surface normal it has collided with?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Getting a angle for an entity relative to a surface normal it has collided with?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Getting a angle for an entity relative to a surface normal it has collided with?</a><br><br>
<a name="312770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a hovercar that needs to move over numerous obsticles.   I'd like the car's pitch, and roll angle to reflect the pitch, and roll angle of the track underneath the car.  I am using a collision sphere under the car to settle the car on the ground with some gravity physics, and collecting the collision normal information of the track surface.  I'm not quite sure how to convert that normal to an angle relative to the facing of the car, because the track normal is in world space, and that normal, or angle, need to be converted to the relative space of my car.  I can't quite seem to get it to work.  I'm tried some the Tform functions, but I don't totally grasp them complete as of yet.  I guess I need the pitch and roll infomatin for the car entity.  Any idias? <br><br></td></tr></table><br>
<a name="312776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at this<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=392" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=392</a> <br><br></td></tr></table><br>
<a name="312784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually that is only one part of the problem.  I need to get a relative angle so I can match a vehicle, no matter which way it's facing to the contours of the track below it.  Thanks for the code link though, I will use it also:) <br><br></td></tr></table><br>
<a name="312818"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> try using the values from either<br><br>tformvector collx,colly,collz,1,car,0 or<br><br>tformvector collx,colly,collz,1,0,car<br><br>iirc one of these will report values relative to the car. So hitting head on will always return 1/ positive z value etc <br><br></td></tr></table><br>
<a name="312955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tvtom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Craig is helping me with this thing.  So far I have this:<br><br>TFormVector Nx,Ny,Nz,0,car<br>     Nx = TFormedX()<br>     Ny = TFormedY()<br>     Nz = TFormedZ()<br>				<br>carpitch# = -(VectorPitch(Nx,Ny,Nz)+90) ;+90 to make car sit upright<br><br>RotateEntity car,carpitch,EntityYaw(car),0<br><br><br>With this the car will angle correctly going up a ramp... but coming back down the other side it angles itself on the pitch as if it's going up the ramp (even though it's heading down the ramp).  The value we are getting back from the carpitch is the same going up the ramp as it is going down... don't know why? <br><br></td></tr></table><br>
<a name="313010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tvtom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> He figured it out with AlignVector........ so nevermind but thanks for the input! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
