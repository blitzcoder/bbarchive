<!DOCTYPE html><html lang="en" ><head ><title >Advanced particle system: Test 1</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Advanced particle system: Test 1</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Advanced particle system: Test 1</a><br><br>
<a name="291728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www26.brinkster.com/bed1/FSPS.RAR" target="_blank">http://www26.brinkster.com/bed1/FSPS.RAR</a><br><br>This is a prototype of the advanced particle system I'm working on.  If some people could test and post their framerates, I would appreciate it! <br><br></td></tr></table><br>
<a name="291731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> memory access violation... <br><br></td></tr></table><br>
<a name="291736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Might be nice if you didn 't surround the link in *'s so that it shows up as a clickable link. :-) <br><br></td></tr></table><br>
<a name="291745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even with the clickable link you'll have to copy and paste, sorry bout that.   <br><br>Mem access violation.  I'll have to see about that!<br><br>[EDIT] Heres the fixed file.  <br><a href="http://www26.brinkster.com/bed1/FSPS.RAR" target="_blank">http://www26.brinkster.com/bed1/FSPS.RAR</a> <br><br></td></tr></table><br>
<a name="291753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks very nice, only that the FPS seems messed. It varies from 50-75. <br><br></td></tr></table><br>
<a name="291755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got FPS from 102 - 110 <br><br></td></tr></table><br>
<a name="291764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get around 112 on my lowly AMD 1800 with gforce4 MX. <br><br></td></tr></table><br>
<a name="291776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NobodyInParticular</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It varies from about 145 to 158... <br><br></td></tr></table><br>
<a name="291787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why do people insist on using RARs? I don't bother downloading RARs and I think a lot of other people don't either. <br><br></td></tr></table><br>
<a name="291789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, i don't have Win Rar either. <br><br></td></tr></table><br>
<a name="291794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Varies from 60 to 80.<br><br>P3/1G, 256MB, ge4ti4400, WinXP Pro <br><br></td></tr></table><br>
<a name="291798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ios</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get about 150FPS<br><br>Pentium 4 @ 2GHZ<br>Radeon 9600 Pro <br><br></td></tr></table><br>
<a name="291814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Extron</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Outch!<br>240 fps <br><br></td></tr></table><br>
<a name="291877"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> 144 to 173<br>GeForce 4 mmx (really a GeForce 2)<br><br>Doggie <br><br></td></tr></table><br>
<a name="291919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll start using winzip in the future, didnt mean to be problematic m8s! <br><br></td></tr></table><br>
<a name="291960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> 160-170 <br><br></td></tr></table><br>
<a name="291966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Orca</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not just make self extracting rars?<br><br>Sorry didnt mean to get off topic....<br><br>*/Me retreats back to his cave* <br><br></td></tr></table><br>
<a name="292014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> theres no source code! :o\ <br><br></td></tr></table><br>
<a name="292018"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> RAR has a much better compression ratio and (WinRAR at least) supports zip &amp; rar compression in one package. <br><br></td></tr></table><br>
<a name="292051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> theres no source code! :o\ <br></div> what makes you think there should be? duhhhhh<br><br>65-75 here <br><br></td></tr></table><br>
<a name="292052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeppe Nielsen</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> 83 - 115 fps<br><br>Athlon 1.4 Ghz<br>GeForce4 Mx 440<br><br>Is this single surfaced? <br><br></td></tr></table><br>
<a name="292078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> RAR has a much better compression ratio. <br></div><br><br>No it doesn't.  It's better at some, worse at others.<br><br>An example I zipped up was 1075KB for ZIP and 1029B for RAR.  Hardly much better.  The executable in the RAR was compressed more but the .png files in the ZIP were compressed more.  If I had included more .png files, the RAR woould have been the larger file.<br><br>Depends on what you compress. <br><br></td></tr></table><br>
<a name="292161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then the best way is to try both ways, which is what I think 7zip does. 7 ways to compress=better ratio.  The only problem is not everyone can open um yet ;(. <br><br></td></tr></table><br>
<a name="292252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it's single surface.  I have to add particle rotation then the basics will be complete. <br><br></td></tr></table><br>
<a name="292254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I get around 112 on my lowly AMD 1800 with gforce4 MX. <br></div><br>'lowly'? <br><br></td></tr></table><br>
<a name="292255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> For a single surface system it seems slow. In the demo you had only 100 particles, and my athlon 1800xp and Radeon 9600pro gave only about 120fps? <br><br></td></tr></table><br>
<a name="292257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> The demo had 1000 particles.<br><br>It will probably see a speed increase when I add the option of how often to update the particles facing. <br><br></td></tr></table><br>
<a name="292262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> okey then :) <br><br></td></tr></table><br>
<a name="292263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure how I will handle mesh particles...  Needs to be single surface but manipulating large numbers of vertices could really hit the speed hard. <br><br></td></tr></table><br>
<a name="292265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... seems a tad slow indeed runs at around 80-100 fps here, I can recreate the demo with my own single surface particle system and it runs at 260 fps, using 2000 particles which are larger then those in this demo and running at a higher resolution. <br><br></td></tr></table><br>
<a name="292270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmmm, curious, I wonder what I'm doing to cause that.<br><br>[Edit]  I squeezwed more speed from my system by not using pivots as controlers, but still I only get 80 FPS with 2000 particles.<br><br>What are you doing in your system retro? <br><br></td></tr></table><br>
<a name="292277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've decided I don't believe you retro, since after removing almost all the activity that my system was using, and no texturing(I'm assuming you are using alpha blending like I was) I still only get ~120 FPS with my system.<br><br>Please prove me wrong though so we can all know how your managing it!  Nice work if you can honestly hack that though dude! <br><br></td></tr></table><br>
<a name="292279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure shattered, I'll post a quick demo of my system this afternoon :) (in a few hours if lucky)<br><br>Mind you I've been using single surface particle systems since well forever, way before vertex alpha was even around. (though it has realy started to shine since that feature was added, before I had to use a hybrid system to make things work)<br><br>I'm guessing you just need alot of optimalization.<br><br>Edit: might take abit longer, since I don't have access to any webspace atm, will have to call in a favour. :P<br>But expect it today in anycase. <br><br></td></tr></table><br>
<a name="292281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks.  I've got a new demo here for everyone to test.  Should be alot faster!  Could you post your system specs retro?<br><br>I do have alot of optimisations to do indeed.<br><br><a href="http://www26.brinkster.com/bed1/FSPS.zip" target="_blank">http://www26.brinkster.com/bed1/FSPS.zip</a> <br><br></td></tr></table><br>
<a name="292284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> athlon 1.4 GHZ, GF2 GTS, 512 mb ram (SD), to be replaced within a week... :P<br><br>New one seems to run at 80 FPS here, but the particles are bigger yet non blended, so I'm guessing there was a small preformance gain. <br><br></td></tr></table><br>
<a name="292288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Other then alpha blending, there is no blending, aye.<br><br>So ya don't want to give any pointers I take it? :)  I'm optimising alot, but don't seem to be getting the massiv speed gains you are... how are you managing your sprite realignment with the camera? <br><br></td></tr></table><br>
<a name="292314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I can't realy go all open on this seeing how the particle system I'm using is part of a blitz extension framework I've been working on for some time now, it replaces and/or enhances a LOT of blitz's functionalities. The quadpool system used by the built in particle system is just one of those things. The blitz terrain for example has been completely replaced in the BlitzX framework and where it once was there is now a multi LOD terrain system capable of handling and generating infinite terrains with far better detail and preformance then those originaly used in blitz, these terrains can be generated with incredible ease (using a special tool included in the package) and use a splatting method for texturing the terrain, so no matter what the size no texture detail is lost. Asside from that the terrain can be modified in realtime to support for such radical things as total climate changes. I am concidering releasing several demo's of this system shortly however it is far from sure if this system will ever be up for sale as it is beeing used to develop a rather sizeable game and I'm not very fond of the idea of releasing the very base of our outdoor engine. Ofcourse massive intrest might cause my thoughts on that subject to change. <br><br></td></tr></table><br>
<a name="292318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> the trick is to re-use and not use clearsurface and rebuild. <br><br></td></tr></table><br>
<a name="292321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's one important thing indeed, but I think everyone is aware of that, that's 1/3rd preformance gain right there, if you weren't doing that already that is. <br><br></td></tr></table><br>
<a name="292322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am re-using the quads. <br><br></td></tr></table><br>
<a name="292323"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> are you effectively culling the quads? are you skipping calculations for non-visible quads? <br><br></td></tr></table><br>
<a name="292332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't matter, right now all quads are visible.<br><br>I'm getting 219 FPS with 1000 particles onscreen...  Though I still want to up that..  How the hell is he doing it?!?!<br><br>I'm happy with the almost 70 FPS increase but still, must continue. <br><br></td></tr></table><br>
<a name="292344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> Had to call in a favour for the hosting so don't mind the slow speeds.<br><br>This demo uses 2000 single surface particles, which are all moving and onscreen, to show you that it all works you can look around and move using the mouse.<br><br>Don't forget to hit space to get a real fps reading, 2d text can take a bite out of the fps.<br><br>www.darkattackforce.com/user/gaianova/quaddemo.zip<br><br>Enjoy,<br>Retro <br><br></td></tr></table><br>
<a name="292351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very nice, would you mind posting you framecounting code?  I dunno if mine is accurate. <br><br></td></tr></table><br>
<a name="292353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> mine is very simple, tho part of it is integrated in my timing module, you can recreate it by doing this every main loop:<br><br>fps = fps + 1<br>time = MilliSecs()<br>If time &gt; oldtime<br>	oldtime = time + 1000<br>	totalfps = fps<br>	fps = 0<br>EndIf <br><br></td></tr></table><br>
<a name="292381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> How are you rotating your quads? TForm or sin and cos method? <br><br></td></tr></table><br>
<a name="292383"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very impressive Retro Booster :) That's some speeds you are getting there!! <br><br></td></tr></table><br>
<a name="292384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> TForm.  I've upped the speed on my particle system to match Mr. Retro's now, but seeing as he's made such a nice demo, I'll wait till I've finished uo my system to show anything more! :). <br><br></td></tr></table><br>
<a name="292394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmmm, i tried optimising mine. Updating the particles once ever 6 frames. I get 800 particles, alphablended, using entityblend mode 3 and alpha effects, at 467 fps. That's the highest i can get i think. <br><br></td></tr></table><br>
<a name="292400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you just update it every so often. Updating every frame slows the system down. <br><br></td></tr></table><br>
<a name="292774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was reading this thread and got curious of how fast a particle system run.... so I decided to write my own. And I noticed that the slowest part is when the model has to be sent back in the gfx card, After even one vertex is modified. <br><br>So even doing this doesn't run as fast as for example the thing posted by retro:<br><br>for i=1 to 2000<br>for p=1 to 4<br>vertexcoords surf,vert,0,0,0<br>next <br>next<br>;THATS 2000 PARTICLES AND 4 VERTICES EACH MODIFIED PRE FRAME<br><br><br>So getting fps like RETRO was getting is imposible, IF you update every frame. And IF you don't update every frame, then the FPS doesn't matter.<br><br>Hell, I can get 1000 FPS by updating every fourth frame.<br><br>So, please post a demos that update every frame so there's something to compare. <br><br></td></tr></table><br>
<a name="292776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> I propose doing it in batches. There is a clear limit, probably defined by agp 4x for most people :) <br><br></td></tr></table><br>
<a name="292784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean like updating 500 particles per frame for example?<br><br>I don't think that will help much. My framerate took the same hit when updating 1 vertice or updating 1000 vertices on my radeon 9600. <br><br>So I think the whole mesh has to be updated on the gfxcard anyway, whether you update 1 or 1000 vertices. <br><br></td></tr></table><br>
<a name="292786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> One question...<br><br>Has anybody come up with solution for that damn z-ordering problem when using alpha?<br><br>The particles could be z-ordered manually, but I suspect it would be too slow to be of any use in a particle system with thousands of particles. <br><br></td></tr></table><br>
<a name="292788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, if you're updating every fourth frame or something, then you're not giving a true FPS reading.  You're also not giving a true FPS reading if all the particles aren't visible at once.<br><br>Here's why.<br><br>I get 640fps with your demo Retro.<br><br>Now, the particles look like they're moving very smoothly.  And they are.  Because even if you update every fourth frame, you're still updating them at 100fps.<br><br>But now put them into a game where the other graphics slow the game down to 70fps.  Updating every fourth frame, you'll now have particles that only move at 17fps, and the dicontinuity of the two framerates will look awful.  Even if you only moved them every other frame, the particles would look choppy compared to everything else.<br><br>Now even my shadow system cheats a bit to get the speed up, but what I do is have the system dynamically change the rate at which it updates based on how much a particular shadow is changing.  So that way the shadows will never look choppy.  If the framerate drops, then the shadow maps will be updated every frame.  If it rises the shadow maps might be updated every four frames.  And that's okay, because it'll always look smooth.<br><br>As for a particle system, it doesn't work like my shadow example because in reality I update the shadow meshes every frame, but what I'm talking about above is the shadow textures.  I can't update the meshes every few frames.<br><br>But with particles, what you could do is determine how much the particle rotates in a particular frame, and how far it moves.  Then you create an "epsilon" value for both, and if either episolon (error) value is exceeded, then you update the particle.<br><br>But here's another possibly better idea.<br><br>Have a single episolon value for each vertex in the mesh.<br><br>This value is a distance.  If the vertex has moved more than this distance since the last time you moved it, then you move it again and record the new distance.<br><br>This will allow the particles to distort, but since we're going for smoothness, the distortion should be so small as to be undetectable anyhow.<br><br>So for example, if you have a particle rotating around one corner, there is no need to move that corner vertex at all.<br><br>The limitation of this sort of optimization is that fast moving particles won't be optimized at all.<br><br><br>One other thing which I've been wondering is whether you could create a boned mesh, one bone per particle, and whether animating particles by moving bones would be faster.  But to test this you'd have to make a B3D exporter and load the B3D in when you want to create a new set of particles, because Blitz provides no way to create bones and assign vertices to them at run time. <br><br></td></tr></table><br>
<a name="292796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift: That doesn't still solve the biggest speed related issue with the particle system. Because the biggest slowdown occures even if you update a single vertex. <br><br></td></tr></table><br>
<a name="292799"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> So... you're saying that regardless of how many vertices I update during a particular frame, the entire mesh needs to be re-sent to the card?  <br><br>And that THAT is what most slows down a single surface particle system, rather than transforming all those vertcies, or the sending of individual vertex updates to the card?<br><br>Hm... well in that case, I wonder if bones are handled by the card's hardware, and if so, that might be a solution to the problem. <br><br></td></tr></table><br>
<a name="292801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> By batches, I meant polygon batches.<br><br>There is a clear upper threshold. The AGP speed is part of this. It may be a lot quicker to upload 4x 500 poly meshes per frame than it is to upload one single 2,000 poly mesh.<br><br>I think this will prove to be true once you go over 2,000 polys. <br><br></td></tr></table><br>
<a name="292831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> ROb, that doesn't make any sense.  Why would it be faster to upload 4 500 poly meshes per frame instead of 1 2000 poly mesh?  That makese no sense at all. <br><br></td></tr></table><br>
<a name="292839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> 114-126 Fps<br><br>XP 1800+ <br>Gf4 4600<br><br>@+ <br><br></td></tr></table><br>
<a name="292844"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> sswift, he's right.  My system benefits from not loading a single system with 2000 particles but 4 systems with 500. <br><br></td></tr></table><br>
<a name="292857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> My commons sense agrees with sswift here... why would 4x500polys be faster than single 2000 poly mesh?? You still have to send the same amount of polys thru AGP... and plus there should be some slowdown when handling 4 meshes (4 surfaces).<br><br>But ShatteredRealitys experiments seem to prove otherwise?!? <br><br></td></tr></table><br>
<a name="292867"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's really odd.... I don't understand it myself.  ROB EXPLAIN! :) <br><br></td></tr></table><br>
<a name="292868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RetroBooster</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actualy this system I just posted currently runs at 60 updates per second which keeps things smooth obviously, asside from that there's a wide array of optimalization going on, to see if a particle actualy needs an update, including epsilon values as mentioned by swift, update flags set by modification functions and culling.<br><br>On my system the 4000 poly surface performs about the same as the 4x1000 poly surface.<br><br>As for the non realistic framerates, if I remove the particle update timing and epsilon the fps on my system goes down from around 330 to 160 fps. (that's with 2000 moving particles), so yes that's a fair bit less. Tho I concider atleast the epsilon system to be a fair enhancement! :P <br><br></td></tr></table><br>
<a name="292886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CopperCircle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will you be releasing your particle system? <br><br></td></tr></table><br>
<a name="293017"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did this today, because I need single surface font system for my game anyway... so this is integrated font/particle system.<br><br>This is as fast as I could get it...<br><a href="http://www.kotiposti.net/naama/particles.zip" target="_blank">http://www.kotiposti.net/naama/particles.zip</a><br><br>EVERYTHING (velocities, rotation, vertexpositions etc.) is updated EVERY FRAME.<br><br>HOLD space to see the maximum framerate <br><br></td></tr></table><br>
<a name="293019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Btw. I can release the source if someone has any use for it. It's not commented at all though. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
