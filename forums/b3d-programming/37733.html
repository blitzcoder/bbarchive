<!DOCTYPE html><html lang="en" ><head ><title >Culling offscreen meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Culling offscreen meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Culling offscreen meshes</a><br><br>
<a name="415948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Holy crap!<br><br>I was looking at my render statistics, and noticed something funny.  Here I am looking straight up at the sky, with no meshes directly in view.  According to the stats, there are 61 meshes directly around me, but few polygons are being rendered:<br><img src="http://www.leadwerks.com/post/screenshot0023.jpg"><br>61 staticmeshes<br>240 polygons<br>16 msecs<br><br>Look at the staticmesh render time!  16 msecs to render a couple hundred polys!!!  That is slow as hell.<br><br><br><br>Now I lower the camera.  Look at the stats.  8000 polys are drawn in a couple msecs more than it took to not render them in the previous shot. <br><br><img src="http://www.leadwerks.com/post/screenshot0024.jpg"><br>61 staticmeshes<br>7905 polygons<br>18 msecs<br><br>What is happening?  I am assuming the slowdown from the first shot was from checking every triangle in the surface to see if it was in the camera view frustum.  This process must be so slow, that it is almost as slow as just rendering the mesh!  I can do a box render test that's a million times faster than this.  There needs to be a brushfx flag that forces a render if a mesh is shown.  The per-triangle surface check is totally self-defeating.  As the above shots show, it takes about as long to NOT render something in Blitz as it does to just draw it!  Probably another reason multiple surfaces are so slow. <br><br></td></tr></table><br>
<a name="415950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've noticed that as well. <br>This something I'd love to see Mark comment on, and better yet do something about it.<br><br>Thanks for pointing this out Halo. <br><br></td></tr></table><br>
<a name="415951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> By using an EntityInView culling method, the same number of polys are rendered in a significantly less amount of time. <br><br><img src="http://www.leadwerks.com/post/screenshot0034.jpg"> <br>29 staticmeshes<br>7927 polygons<br>13 msecs<br><br>With this method, when I look up at the sky, staticmesh rendering takes 0 msecs, as it should.  Unfortunately, I can't eliminate this surface check for polys that I want to render. With meshes that are all in view, the first triangle will be in the view, so it will only slow down meshes that are partially out of view.<br><br>The way I would really do offscreen culling is by rendering a box for each staticmesh.  If the render results in a TrisRendered() value, I would force the mesh to render, otherwise hide it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
