<!DOCTYPE html><html lang="en" ><head ><title >A little help please :)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >A little help please :)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >A little help please :)</a><br><br>
<a name="1326084"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phodis</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Firstly A big hello to everyone I was here a few years ago..briefly, then to my misfortune discovered Gamemaker. I say misfortune as I DID NOT give Blitz3d a fair chance....what a mistake.<br>WOW from what I have seen already this is such a kickass system that really has a lot of power.<br><br>So, I have spent the last 24hrs watching Youtube videos and looking at heaps of code around this site and Jnoodle; and have come up with the code below. I know Ive basically nicked a lot of it already, but it's my one day throwtogether, and I have already learned heaps. <br><br>Basically I am ALMOST up to what I had accomplished in Gamemaker within 24hrs and am over the moon with the results. I mean really.. how the hell is this not as well known!!! I feel like a kid in a candy shop. <br><br>SO FAR<br>    I have control of a 3d cube on a Heightmap terrain.. threw in a couple of walls and a water plane that really looks pretty cool. A skybox and a simple Enemy that follow me and follows the lay of the land.. but there are a few questions I have if anyone's able to answer I would be greatfull.<br><br>I can do various AI behavior in Gamemaker...so things like random walking in a random direction for a random length of time are ok ands I'll work that out for myself.<br>But I have 2 questions.<br>Firstly is Enemy line of site to player detection, and how to go about it. It took a little while to work it out in Gamemaker but I did eventually get it. I'll elaborate... Say there is a wall between the player and the Enemy... I need to know how to tell the Enemy there is a wall between himself and the player... thus not attacking until the player is in site. Just a simple way to do it, not Astar stuff.<br>Secondly, and the hardest I think is how to shoot a bullet from the player in the right direction in 3d space. This would really help.<br>Currently to introduce myself into this language, I am simply planning to have a third person AI battle, whereby several enemies on each side will attack each other rinse and repeat.<br>I will post my progress as I go :D<br>Cheers all. <br><br></td></tr></table><br>
<a name="1326085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phodis</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;Sorry I have no idea how to post code so I'll do it raw.<br><br>;This is what I have so far...<br>;if you want to use this you'll need a few Jpegs<br>;I have no idea how to post them but you could grab a few off google<br>;the only tricky one is the Heightmap where you must use a sized image <br>;of 2x2   eg: 64x64 or 256x256 or 512x512 <br>;You'll also need a terrain texture a water texture and a sky1 texture<br>;all the above I used all the above from  <a href="http://jnoodle.com/blitz3d" target="_blank">http://jnoodle.com/blitz3d</a> <br><br><br><br><br>Graphics3D 1024,768<br>SetBuffer BackBuffer()<br><br>camera=CreateCamera()<br>RotateEntity camera,25,0,0<br><br><br>;Add extra light<br>light=CreateLight()<br>AmbientLight 200, 200, 200<br><br><br><br>;Make Terrain<br>Global land = LoadTerrain( "terrain_hmap.jpg" )<br>tex_terrain = LoadTexture( "terrain_tex.jpg" )<br>ScaleTexture tex_terrain, 10, 10<br>EntityTexture land, tex_terrain<br>PositionEntity land,-512, -15, -512<br>ScaleEntity land, 2, 25, 2<br><br><br>;Create Water and make it 60% transparent <br>plane1 = CreatePlane()<br>texture1 = LoadTexture("water.jpg")<br>;Stretch out the texture a bit so it looks less "checkered"<br>ScaleTexture texture1, 10, 10<br>EntityTexture plane1,texture1<br>EntityAlpha plane1, .6<br>PositionEntity plane1, 0, -10, 0<br><br><br>;Create  sky<br>sky = CreateSphere() <br>skytexture = LoadTexture("sky1.jpg")<br>EntityTexture sky,skytexture <br>ScaleEntity sky,500,500,500 <br>FlipMesh sky<br><br><br>;Create player<br>player=CreateCube()<br>PositionEntity player,-40,0,5<br>EntityColor player,50,100,255<br>;player weapon<br>weapon=CreateCylinder()<br>PositionEntity weapon,-40,0,7<br>ScaleEntity weapon,0.5,2,0.5<br>RotateEntity weapon,90,0,0<br>EntityColor weapon,50,100,255<br>EntityParent weapon,player    ;parent the weapon to the player<br><br><br>;Create enemy<br>enemy=CreateCube()<br>PositionEntity enemy,-40,0,50<br>EntityColor enemy,255,0,0<br><br><br>;Create enemy weapon<br>eweapon=CreateCylinder()<br>PositionEntity eweapon,-40,0,50<br>ScaleEntity eweapon,0.5,2,0.5<br>RotateEntity eweapon,90,0,0<br>EntityColor eweapon,50,100,255<br>EntityParent eweapon,enemy    ;parent the weapon to the enemy<br><br>  <br><br>;create 2 walls<br>wall=CreateCube()<br>PositionEntity wall,-70,0,30<br>EntityColor wall,255,0,0<br>ScaleEntity wall,10,3,.5  ;WIDTH HEIGHT DEPTH<br><br>wall2=CreateCube()<br>PositionEntity wall2,0,0,30 <br>EntityColor wall2,255,0,0<br>ScaleEntity wall2,10,3,.5  ;WIDTH HEIGHT DEPTH<br><br><br>;Controls<br><br>While Not KeyDown(1)<br><br>If KeyDown(205) Then TurnEntity player,0,-.5,0<br>If KeyDown(203) Then TurnEntity player,0,0.5,0<br>If KeyDown(200) Then MoveEntity player,0,0,0.3<br>If KeyDown(208) Then MoveEntity player,0,0,-0.3<br>     <br><br><br>;Correct Player Terrain height<br>objx#=EntityX(player) : objz#=EntityZ(player)	<br>PositionEntity player, objx, TerrainY( land,objx,0,objz ), objz<br><br>    ;below line makes the object move forward at the +1 speed at the end of the line<br>    ;PositionEntity player, objx, TerrainY( land,objx,0,objz ), objz+1<br><br><br>;Correct enemy terrain height<br>objx#=EntityX(enemy) : objz#=EntityZ(enemy)	<br>PositionEntity enemy, objx, TerrainY( land,objx,0,objz ), objz<br><br><br>;reposition camera behind player<br>PositionEntity camera,EntityX(player),EntityY(player),EntityZ(player)<br>MoveEntity camera,0,0,-15<br><br>;enemy chase player if less than so many units<br>If EntityDistance( enemy, player ) &lt; 40<br>PointEntity enemy, player<br>MoveEntity enemy, 0, 0, Rnd( .1, .19 )<br>EndIf<br><br>;enemy move random<br>MoveEntity enemy, 0, 0, Rnd(.05,.1)<br><br><br><br>RenderWorld<br><br>Text 10,10, "X: " + EntityX(player)<br>Text 10,20, "Y: " + EntityY(player)<br>Text 10,30, "Z: " + EntityZ(player)<br><br>UpdateWorld<br>Flip<br>Wend<br>End <br><br></td></tr></table><br>
<a name="1326087"></a>

<a name="1326088"></a>

<a name="1326090"></a>

<a name="1326094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br><div class="quote"> <br>how to tell the Enemy there is a wall between himself and the player<br> <br></div><br>there are several ways to do this :<br>-one way is to use a combination of deltayaw ( to determine if the character is oriented toward enough the target) and linepick (a kind of 3d line) and pickables (low details meshes), between the eyes 3dpoint of the character and one or several 3dpoints on the target (for example a 3dpoint at the center of the target), and check if the line can reach the target or if it is blocked by an obstacle<br>some examples here :<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=923" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=923</a><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=532" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=532</a><br><br>-another way is to hide all lights, to set the ambientlight to the maximum, to color each entity in a specific color and to capture a small render from the character eyes (for example 102x76 pixels for a 1024x768 resolution), then to analyze the colors of the pixels of this small render and to check if the color of the target is found or not. (if the target is behind an obstacle, there will be no color of the target in the small render)<br>an example here :<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=103889" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=103889</a><br><br><br><div class="quote"> <br>how to shoot a bullet from the player in the right direction in 3d space.<br> <br></div><br>-one way is to use positionentity and rotataeentity to position rotate your bullet with the same position orientation than your gun and then move it using moveentity<br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=PositionEntity" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=PositionEntity</a><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=RotateEntity" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=RotateEntity</a><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=MoveEntity" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=MoveEntity</a><br><br>-another way is to use a combination of tformvector (to determine the properties of a 3dvector depending on an entity orientation/position and the direction you want), and translateentity to move the bullet with the vector properties<br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=TFormVector" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=TFormVector</a><br><a href="http://www.blitzbasic.com/b3ddocs/command.php?name=TranslateEntity" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=TranslateEntity</a><br><br><br>good luck! <br><br></td></tr></table><br>
<a name="1326091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>;Sorry I have no idea how to post code so I'll do it raw.<br> <br></div><br>When you write a post in this forum, there, above its box is a link: Post reply to topic: (<a href="/faq/faq_entry.php?id=2" target="_blank">forum codes</a>) <br><br></td></tr></table><br>
<a name="1326097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> to your second question:<br>Your code is already very closed to fire a bullet towards the player.<br><br>You already know how to turn the enemy towards the player with "PointEntity()". If you now create a new bullet entity with "CreateCube()" as a child of the enemy, then cut the relationship, then move the Cube in z direction only, it will fly directly towards the player.<br><br><pre class=code>
While Not KeyDown(1)
....
     If KeyHit(57)  ; SPACE key
          PointEntity Enemy, Player
          Bullet=CreateCube(Enemy)
          ScaleEntity Bullet, 0.1, 0.1, 0.1
          EntityParent Bullet,0
     Endif
     If Bullet 
          MoveEntity Bullet 0, 0, 0.1
     Endif
     RenderWorld
.....
Wend
</pre> <br><br></td></tr></table><br>
<a name="1326112"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phodis</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow!!!! this is awesome stuff there guys... it sucks I have to go to work now, but I'll be right into this when I get back. Damnit I want to call in sick :P <br><br>I'll let you know my progress ASAP<br><br>Cheers All  :D <br><br></td></tr></table><br>
<a name="1326294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also master Linepicks, to test if the enemy can see the player. but the surroundings must be pickable too. Considering the speed of real bullets of like 400m/s, you may directly use Linepick for the shot, show muzzleflash, but no bullet at all. Snipers may need a realistic delay, like 2-3 secs tho. Of course, superpower plasma projectiles are an entirely diffrent story.<br><br>Generally, learn about sin, cos and atan2. Atan2 gives you the angle between two points. then use x=x+sin(angle):z=z-cos(angle) to move point A towards point B. This works in any language. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
