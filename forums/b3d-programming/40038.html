<!DOCTYPE html><html lang="en" ><head ><title >Q. for Skidracer, Entity Structs</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Q. for Skidracer, Entity Structs</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Q. for Skidracer, Entity Structs</a><br><br>
<a name="448042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>From a noobs perspective (i.e, me!) the new SystemProperties in v1.88 could open the door to some extra functionality.<br><br>Now that you've done that, would it be possible to release some information on how Blitz3D stores things like Meshes, Textures e.t.c?<br><br>We have threads like this but there's a lot of guesswork involved.<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=27669" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=27669</a><br><br>Example: Shadow Volumes, whether they're viable or not yet under DX7, direct access to mesh data would be especialy useful, if not absolutely neccessary, for this to work 'right'.<br><br>Any info, official or unnoficial, would be appreciated I'm sure.<br><br>Cheers for the update<br>Tom<br>/he who has fingers crossed <br><br></td></tr></table><br>
<a name="448409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bumpy :o) <br><br></td></tr></table><br>
<a name="449063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rumpy Bumpy!<br><br>Reading up some more on stencil shadows, to do them you'll need to create shadow volumes, to do that quick &amp; easy it would be nice to get access to Meshes, or as Noel mentioned in another thread, the vertex buffers.<br><br>All seems 'doable' from what I've read though. <br><br></td></tr></table><br>
<a name="449898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ion-Storm</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> add me a whole heap of Cows backside(rump) to that <br><br></td></tr></table><br>
<a name="449899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> *poke* <br><br></td></tr></table><br>
<a name="449915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> *bumpsy* <br><br></td></tr></table><br>
<a name="449936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> *Daisy* <br><br></td></tr></table><br>
<a name="452794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Earth calling Skid....come in Skid<br><br>BB Image struct would be good too :P <br><br></td></tr></table><br>
<a name="452823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I was to expand Blitz3D (whichisn'tmyjob) I would start with some fast bulk transfer routines to speed up updating<br><br>ReadPixels x,y,argb[],offset,count<br>WritePixels x,y,argb[],offset,count<br><br>A double buffered option on lockbuffer may also help texture update speed (I think you can avoid blocks caused by locking the same texture space as that which may be locked by the GPU for current rendering actvity).<br><br><br>The same goes for VertexBuffers, a couple of commands for reading and writing the raw vertex and triangle buffers with array parameters may provide some speedup but if you are causing a block with the gpu then it could possibly end up being a wasted effort. <br><br><br>If VertexX, Y and Z had a [,objectspace] conversion option you could read out vertex location of animated meshes, I cannot imagine the hack needed for that kind of operation in the current version. <br><br></td></tr></table><br>
<a name="452904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, not quite what I was on about :)<br><br>I was more interested in stuff like, how BB stores an Image, is there a standard BITMAP pointer tucked away at int(myImage + x) ? Or ImageBuffer(myImage)+x?<br><br>For example, I found that PeekMemInt(TextureBuffer(tex)+12) returns a valid DirectDrawSurface7 pointer for that texture.<br><br>But there's no way to create a texture within a DLL and return a pointer that can be used to assign that texture to an Entity.<br><br>Direct access to vertexbuffers would be useful.<br><br>Cheers<br>Tom <br><br></td></tr></table><br>
<a name="453034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can only read / write texture / vertex data in dx7 after a lock so extended results from lockbuffer and maybe a new lockvertexbuffer command may be what you are after.<br><br>In regards to hacking, I would imagine the logic would be simple enough to follow if you stepped into a lockbuffer call with any decent debugger hook up (which I imagine you will require for all that volumetric c code you have planned). <br><br>hint: if you are in visual studio build your dll in debug mode, put a breakpoint in a function called by your blitz app, when you hit F5 it will ask you for an exe to run, select your blitz app, ignore the missing debug warning and you be sussed, when you step out of the function you have breakpointed, you will be stepping through your blitzapp in good ol x86 assembler <br><br></td></tr></table><br>
<a name="453073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> All mark has to do (if he wants people to have access) is post a copy/paste of the image/texture structure.<br><br>Then we can just pass it through to a .dll as a memory pointer, and cast it into a image struct/object in the custom .dll (Assuming they return memory addresses, not internal handles blitz generates..)<br>I've done it with types made in blitz, recreated them as structs C++ side, with a 5 int pad..<br><br>No need to hack about with debuggers then. <br><br></td></tr></table><br>
<a name="453097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ASM, ouch! :)<br><br>Just an idea on how BB stores Image &amp; Texture pointers would do me. <br><br></td></tr></table><br>
<a name="453309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doh!<br><br>Image are directdraw surfaces too :) ... I'm slow on the uptake, but getting there!<br><br>This stuff could be useful for many things, like the BlitzMovie DLL, currently the author is using read/write pixelfast to draw the image when he could be blitting!<br><br>Tom <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
