<!DOCTYPE html><html lang="en" ><head ><title >Simple particle system.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Simple particle system.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Simple particle system.</a><br><br>
<a name="352272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, a few questions.<br><br>I intend to use fixed sized arrays to hold different variables for a particular particle. e.g. P_X#(), P_Y#(), etc. Is this a good idea or should I use Banks?<br>I would just set up enough array space for a maximum of 1024 particles say.<br><br>I intend to set up a surface with 1024 quads; one for each particle. If the particle is not 'on' then I set the quad to big Z coord so it is not displayed. i.e. The graphics card will always try to plot 1024 particles. Is this a fair way to do this?<br><br>I'm sure i've tested arrays vs banks vs types in the past and found arrays to be the fastest but i'm not 100% sure.<br><br>Any advice<br>Marg <br><br></td></tr></table><br>
<a name="352308"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trixx</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arrays are fastest in most situations - that's true. If you know that you'll never have more than 1024 particles, then it's ok to use arrays. But, setting up a surface with constant 1024 quads is wrong way to go ! <br>Why don't you simply start from 0 and add quads to surface when you need more particles ? <br><br></td></tr></table><br>
<a name="352715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean, set up a surface at the start and then do a ClearSurface and then rebuild the surface using 4*AddVertex and 2*AddTriangle and 1*VertexColor for each live particle? (assuming the quad is one color).<br><br>Seems more work than 4*VertexCoords and 1*VertexColor and put the strain on the graphics card.<br><br>Is it possible to do a ClearSurface and only delete the Vertices and leave the Triangles there? This would save the AddTriangles bit.<br><br>Marg <br><br></td></tr></table><br>
<a name="352770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trixx</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. No, I mean that you should build the surface with AddVertex+AddTriangle, but then use VertexCoords as you say to move particles.<br>2. Yes, it's possible to clear only vertices with ClearSurface and using AddTriangle only when quads are created, but that will still be slower than using VertexCoords and that will cause additional problems and limitations in handling of particles in your system. <br><br></td></tr></table><br>
<a name="352778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your going to use a fixed size array, then do it like so...<br><br>global p_x=0<br>global p_y=1<br>global p_z=2<br>global p_index=3<br>global number_of_particles=256<br><br>dim particles(number_of_particles,3)<br><br>and access each part of the array like so...<br><br>particles(1,p_z)=5<br><br>so basically you have a 2d array, instead of 3 or 4 different arrays.<br><br>You need to vertexs to actually move the triangles, so you can't get rid of them. When you want to move the 'quad', you need to move each of the 4 vertexs in the same direction.<br><br>In regards to moving the particle away in the Z axis, why not just hide it, using vertexcolor r,g,b,alpha. Set all 4 co-ords to 0 alpha, when not in use.<br><br>It's also fair enough to create all the quads at once, if you want. <br><br></td></tr></table><br>
<a name="353147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br><br>Trixx, I think you are talking about a more dynamic system but to be honest I think I'll find it easier to set a limit and create all at once.<br><br>Ross C, I never thought of a 2d array; much nicer.<br>Given x,y,z will be floats, should I use Dim particles#() ?<br>I'm assuming that I cannot mix ints &amp; floats ?<br><br>Thanks<br>Marg <br><br></td></tr></table><br>
<a name="353152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a test of VertexCoords vs VertexColor and found VertexColor to be 4 times slower than VertexCoords.<br><br>Anyone else noticed this?<br>Anyone know why?<br><br>Marg <br><br></td></tr></table><br>
<a name="353354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, didn't notice that, no :)<br><br>Btw, it's cool to mix int's and floats in an array, as long as the array doesn't hold pointers to meshes, sounds or other media, as a float number, doesn't accuratly keep the same number, and can cause errors :)<br><br>As to the slow down, maybe your gfx card doesn't like drawing lots of alphaed particles ? <br><br></td></tr></table><br>
<a name="353590"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To mix int's &amp; floats, do I set it up the array as an array of floats?<br><br>I wasn't talking about the graphics card slowdown but just using VertexCoords &amp; VertexColor and timing for a for next loop. I'm using a Radeon 9800Pro and not much slows it down :-}<br><br>Marg <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
