<!DOCTYPE html><html lang="en" ><head ><title >turning one object towards another one</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >turning one object towards another one</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >turning one object towards another one</a><br><br>
<a name="415882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ryan scott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i wan to give some intelligence to an enemy, making him turn towards the player a little bit each frame.<br><br>i am not sure how to make him turn a little towards him.<br><br>i found this, but it does a rotate, not a turn, and i'm not sure how to make it turn just part of the way, like 1% or whatever degree i specify.  ATAN is a little beyond me.<br><br>Can anyone clue me in?<br><br>Function Point_Entity(entity,x#,y#,z#)<br>	xdiff# = EntityX(entity)-x#<br>	ydiff# = EntityY(entity)-y#<br>	zdiff# = EntityZ(entity)-z#<br>	dist#=Sqr#((xdiff#*xdiff#)+(zdiff#*zdiff#))<br>	pitch# = ATan2(ydiff#,dist#)<br>	yaw#   = ATan2(xdiff#,-zdiff#)<br>	RotateEntity entity,pitch#,yaw#,0<br>End Function<br><br>; really just want to turn, and a variable amt. <br><br></td></tr></table><br>
<a name="415888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try using AlignToVector.  You can set a tweening/turning rate parameter  to do a smooth turn.  If the entity turning is called "avatar" and the entity being faced is "target" the code is:<br>AlignToVector avatar,EntityX(avatar)-EntityX(target),0,EntityZ(avatar)-EntityZ(target),1,0.2<br><br>Call this every frame as part of the enemy's movement code. <br><br></td></tr></table><br>
<a name="415961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ryan scott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm..<br><br>they are driving around him in a circle.  i don't really know why.<br><br>movement code is just 'move him forward a little (its different for each enemy so fast and slow were both tested)'  then 'aligntovector' just like you have it there.  also tried instead of .2, 1 but its exactly the same result, they circle the player.  same direction every time, never getting closer to the player.  if i move the player, they will actually veer away to avoid him and keep that constant circle around him.<br><br>i am not sure why this wouldn't work, it seems to make sense. <br><br>changing the last parameter has no effect on the tightness of the circle. <br><br></td></tr></table><br>
<a name="415966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ryan scott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> fixed it<br><br>e\model is the enemy<br>car is my player.<br><br><br>AlignToVector e\model,EntityX(car,1)-EntityX(e\model,1),0,EntityZ(car,1)-EntityZ(e\model,1),3,.2<br><br>i don't know why this works.  shouldn't 3 be 'roll'? <br><br></td></tr></table><br>
<a name="416102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The 3 signifies that you are aligning the object's Z axis to the vector you specify.  Think of the front of your car having a long arrow pointing out of it forwards representing the z axis.  When you call align to vector with "3" as the axis parameter the "arrow" is rotated so that it faces in the same direction as the vector you are aligning it to.  Very useful function. <br><br></td></tr></table><br>
<a name="416144"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, what he said.  I forgot to mention, that you set the axis to align when calling AlignToVector.  You want that axis to be the forward direction of the object.<br><br>Another caveat is that AlignToVector is sensitive to the framerate.  You can compensate for this by dividing the last parameter by the framerate, or multiplying by the time between frames.  Doing this obviously you'll need also need to change the number but once that's done it'll all be good. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
