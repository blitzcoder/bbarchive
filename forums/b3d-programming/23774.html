<!DOCTYPE html><html lang="en" ><head ><title >Vertex lighting animated mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vertex lighting animated mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Vertex lighting animated mesh</a><br><br>
<a name="246044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braneloc</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, how the heck do I set vertex lighting up on an ANIMATED mesh ?  (Before you answer, check to see if the code works..  it's not as simple or obvious as it sounds)<br><br>(if it makes a difference, it's a rigid mesh keyframe animation exported from max as a .3ds) <br><br></td></tr></table><br>
<a name="246176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you perhaps explain what you have tried and why that isn't working?  Actually, can you explain what you mean by "vertex lighting?"  That's a pretty vague term which can refer to anything from the normal Garoud shading (in which case you don't have to do anything; it is automatic) to baking lighting information as vertex color using LightMesh. <br><br></td></tr></table><br>
<a name="246266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braneloc</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...as in forced lighting that isn't from ambient light, or another DX light that may be pointing in the objects general direction.<br><br>Why isn't it working ?  Ya got me.  Objects come out black when EntityFX is applied.  Everything works fine with normal meshes (ie, static, not animated) <br><br></td></tr></table><br>
<a name="246279"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You described "vertex lighting" with the even more vague term "forced lighting."  And you say you applied EntityFX; which effect?  And why?  As far as I can tell (and I am having trouble interpreting your post; the ", or" is especially unclear because I can't tell what the antecedent for "or" is, if you mean light from DX lights is included in the definition of "vertex lighting" or if that is also excluded from the definition of "vertex lighting") you don't need or want EntityFX because the normal DX Garoud shading happens automatically.<br><br>The fact that things work fine with static meshes is an important clue however.  Especially since you say the animated mesh is a multi-object model exported to 3ds file format.  In most cases problems with those are due to needing to apply the effect (eg. EntityFX) to all the children individually.  There are some commands which will affect an entity's children automatically, and those only have to be called once on the root object, but most commands need to be applied directly to every child object.  Thus you will need to create a simple recursive function which will use CountChildren and GetChild to loop through all the children and apply EntityFX to each. <br><br></td></tr></table><br>
<a name="246405"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braneloc</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does non-dynamic lighting make sense ?   Stored onto the vertex.  Vertex colour.  Changing FVF to include vertex lighting.  Forced, precomputed whatever the heck you want to call it.<br><br>EntityFX &lt;entity&gt;, 2 (use vertex lighting)<br><br>I already tried looping through child entities before the first post, but with no useful effect - with a variety of commands.  Some even caused blitz to bomb out completely.  (ie, exit without warning)  (trying to do a recursive lightmesh bombs)  <br><br>I used a recursive entityFX, which worked since it turned all objects it was applied to black(which I hope is still the default vertexcolour, or something is up)<br><br>I have tried the following commands recursively, and non recursively, entitycolour, vertexcolor, lightmesh - but with no success.<br><br>Normal DX lighting is all fine, but I'm using dynamic effects for something else.  I've either missed something very obvious or soemthing is seriously wrong somewhere.<br><br>....so, how the heck do I set vertex lighting up on an ANIMATED mesh ? <br><br></td></tr></table><br>
<a name="246413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the additional info but there is still at least one thing you haven't addressed.  So how exactly are you trying to apply the vertex colors?  It sounds like you are using LightMesh, in which case please post sample code of what you are trying to do. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
