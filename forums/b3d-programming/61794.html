<!DOCTYPE html><html lang="en" ><head ><title >getting trouble on Flip 0</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >getting trouble on Flip 0</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >getting trouble on Flip 0</a><br><br>
<a name="690538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello!<br><br>i am currently working on a game, and there is a problem:<br>when i am using flip true, everything seems to be ok.<br>but when i'm using flip false, the keyboard reacts half a second AFTER i pushed a button! the mouse has got same problem!<br>but i cant imagine why -.-<br><br>would be thankful for help!<br><br>EDIT: a friend just told me that this bug apperas in my gui, too!<br><br>edit2: this code has got this bug, too:<br><br><pre class=code>Graphics 1024, 768, 32, 2
SetBuffer BackBuffer()

While Not KeyHit(1)
	Rect MouseX(), MouseY(), 10, 10
	Flip 0
	Cls
Wend
End</pre> <br><br></td></tr></table><br>
<a name="690545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> oh, now i know the bug: it is because the window mode! on fullscreen it is working fine.<br>well, i am very upset about this because i have got a very sh*tty monitor, which takes a &gt;few&lt; secons to build up the fullscreen! any idea to solve the bug? <br><br></td></tr></table><br>
<a name="690575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The program uses too much CPU time, Windows can't draw the window. Add "delay 1"<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 1024, 768, 32, 2
SetBuffer BackBuffer()

While Not KeyHit(1)
	Cls
	Rect MouseX(), MouseY(), 10, 10
	Flip 0
	Delay 1
Wend
End
</textarea> <br><br></td></tr></table><br>
<a name="690675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> no it doesnt work, but i will use fullscreen! thx! <br><br></td></tr></table><br>
<a name="690705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried different delays ? It could depend on your p.c.'s speed. <br><br></td></tr></table><br>
<a name="690733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> when i put in a timer with 333 the bug appears half a minute later, on 334, it appears right now <br><br></td></tr></table><br>
<a name="691319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> 333 is the frequency, so you say you want a timer event every 1000/334 millisecs. That's every second, or every third millisecond, depending on if you say 333 or 334.<br>Probably you shouldn't use such high frequencies with CreateTimer.<br><br>(Only guessing:)<br><br>You problem seems to be something in windows. Unlike the fullscreen mode, where flip truly FLIPs the buffer adresses, in windowed mode it will only tell windows to refresh the rectangle of your apps window, taking the pixels from a buffer that is logically teached as backbuffer. Infact they won't be flipped.<br><br>If this doesn't work, there seems to be a problem in the desktop refresh tasks of the system. Maybe the priority is too high, so there is a delay for the user input.<br><br>BTW there is this command that allows to use an alternative input device (aarg, can't remember the exact synthax right now), something like UseDirectDevice (anyone?). <br><br></td></tr></table><br>
<a name="691354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Reason this happens: With flip false, your GPU renders the scene ahead. Sounds theoretical like a cool idea. Sadly this means that it is 10-15 frames ahead on high end cards which means a lot on a TFT with 60hz (10-15 * 16ms) ... Every input you do in that time is "lagging" that time ahead.<br><br>The only way to fix that is the same fixes as the mouse lag fixes.<br><br><br>A different way, which I would suggest (although I'm most likely the only one using such obscure technics ... at least it seem so) is using timed rendering:<br><br><br>Ask the user for desired FPS and only draw the screen that many times. At best with maximum on the highest hertz the users screen support at that resolution.<br><br>Doing that is simple by a small "if timedifference &gt;= 1000 / desiredframes".<br><br>This also will free quite a lot computing time for the real game (ai etc) which otherwise would be wasted by rendering stuff thats never seen.<br>This should give you quite a lot rendering time etc for nice effects as well.<br>Generaly doing everything time based beside input is a good idea ... especially effect updates and rendering which are time consuming and don't need to be "millisecond accurate". (never do it with input ... while it might look like a nice idea, you wouldn't be able to use keydown / mousedown anymore which is a bad thing in most cases) <br><br></td></tr></table><br>
<a name="691736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, now i have put the timer down to 60 FPS and it is working...<br>THX A LOT!!! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
