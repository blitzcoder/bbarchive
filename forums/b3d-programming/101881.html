<!DOCTYPE html><html lang="en" ><head ><title >FPS idea- but need help</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >FPS idea- but need help</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >FPS idea- but need help</a><br><br>
<a name="1212648"></a>

<a name="1212649"></a>

<a name="1212793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I noticed a lot of 2D stuff, and a few primitive FPS material, but<br>What about lifts, elevators, ladders, vehicles- wait---<br>Now consider a type array and a loadanimmesh, because I went through a whole lot of trouble just getting an export (via blitzpipeline from 3ds max 5) to be making stuff algorithmically.<br><br>So here we sat, able to walk up a ramp, jump onto any static surface. Great!<br><br>I chose not to parent my colliders and camera together, because- watch your head!!!<br>And, oops, I jumped forward, and my head was pinned between the vertical fork! Uh oh!<br><br>With all the spinning gears and such...<br>I opted to child my main collider entity to whatever entity I'm standing on.<br><br>Any easy samples would be most helpful since my body entity is oval.<br>See, I've been through this all before in Visual Basic, and I'm just trying to port over what shouldn't be too hard...<br>I'm ready to progress, advice, sample code?<br>Update: Phone fixed. Sample code coming tomorrow! <br><br></td></tr></table><br>
<a name="1212869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm assuming that you're all on Holliday, and that blitz doesn't fall short in this respect... I'm a big fan. <br><br></td></tr></table><br>
<a name="1212883"></a>

<a name="1212884"></a>

<a name="1212885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> For lifts and for elevators, you can use linepick to detect where is the ground and a distance calculation to detect if player is in range.<br><br>For ladders you can use a collision check or a distance calculation to detect if player is in range. I think there is an example in Blitz3D\samples\si\fps<br><br>For vehicles you can use a distance calculation or a collision check to detect if player is in range and the use of a key to decide whether player wants to climb in the vehicle or leave the vehicle.<br><br>The rest is up to you, it is your game, you only can decide how it will work.<br><br>Concerning the collision of a character with the environment (ground, walls, ceiling, obstacles) i repeat what i have already explained : i have found that the best combination is to use one collider sphere to detect the obstacles at front, at back, at left, at right), and a linepick at up (to detect the ceiling), an a linepick at down (to detect the ground).<br><br>Another solution would be to use a physics engine like "Bullet" :<br><a href="http://tools.mirage-lab.com/" target="_blank">http://tools.mirage-lab.com/</a><br>in which i think there is a collider capsule for characters. <br><br></td></tr></table><br>
<a name="1212895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remi, I know you're trying to help, but I have no working example- there's no ladder in si's demo.<br>We need something more comprehensive than a tip. <br><br></td></tr></table><br>
<a name="1212899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes there is a ladder, this is the first thing i see when i run the demo.<br><br>But this is not the best way or the only way to code a "ladder". You can code it as you want.<br><br>My personnal preference would be to use different states as mentioned before :<br>OnGround<br>OnAir<br>OnWall<br>OnLadder<br>OnElevator<br><br>and update the player accordingly.<br><br>I am not trying to code your game for you, i am trying to make you understand what are the possibilities. <br><br></td></tr></table><br>
<a name="1212915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Imperium</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> At least try to code it for yourself or your skills will never improve. If you make a honest attempt and are still stuck post your code. Blitz guys are very helpful but won't make your game for you. <br><br></td></tr></table><br>
<a name="1212918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have tried the ladder in the fps demo, and looked at the code, you can see that :<br><pre class=code>
; Climb ladders
If EntityCollided(camera,type_ladders)&lt;&gt;0 Then TranslateEntity camera,0,1,0

; Gravity
TranslateEntity camera,0,-1,0
</pre><br>the gravity force is -1Y<br>and <br>when the collider sphere of the player is in contact with the collider mesh of the ladder, there is another force of +1Y applied to the player<br>This is what allows the player to move up when he is in contact with the ladder.<br><br>In my opinion this is not the best solution because the player is not locked on the ladder and thus if he wants to look around, he may fall.<br>Also if the game uses one animation for each action, the player (or a bot) must be either walking or running or jumping or falling or grabbing or climbing a ladder/ledge and not doing several actions at the same time, else it will look weird. <br><br></td></tr></table><br>
<a name="1212947"></a>

<a name="1212953"></a>

<a name="1212954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made a mistake- Si's code resembles my own with regards to gravity.<br>It had been a while since I examined his code, and it DOES look tight.<br>BUT there are other issues that remain unresolved.<br>I don't mean to come across as stupid. <br><br></td></tr></table><br>
<a name="1212948"></a>

<a name="1212949"></a>

<a name="1212997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've had numerous problems trying to parent moving objects to my camera/collider cluster and need elaboration of some small details-<br>1. There was only a mention of how you had used a couple of subroutines to create/destroy your colliders.<br>2. Is it simply that it doesn't matter what entityxyz reports BECAUSE of the use of number 1?<br> I ask this since if I'm using a lift and I'm a child of it (which doesn't fix rotations on other turning objects by the way), how can I ensure my Y is going to be right? <br><br></td></tr></table><br>
<a name="1212963"></a>

<a name="1212964"></a>

<a name="1212965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>1. There was only a mention of how you had used a couple of subroutines to create/destroy your colliders.<br> <br></div><br>The idea is simple :<br>All colliders "receiver" can be precreated before the mainloop<br>All colliders "emitter" are destroyed at the beginning of the mainloop<br>then<br>Depending on the position of the entity, some colliders "emitter" are created<br>then <br>a first update to turn/move the entities (player, bots, projectiles)<br>then<br>updateworld to calculate the collisions<br>then<br>a second update to check for each collider emitter if a collision has happened and if yes change the state of the entity accordingly<br><br>so the mainloop look like this :<br><pre class=code>
Repeat

 UpdateColliders()

 UpdatePlayerBC()
 UpdateBotsBC()
 UpdateProjectilesBC()

 Updateworld()

 UpdatePlayerAC()
 UpdateBotsAC()
 UpdateProjectilesAC()

 Renderworld()

 Flip()
until(Keydown(1)=1)
</pre><br>From my tests, it is necessary to have at least 1 collider emitter for player and for each bot which is the parent of all others components of player/bot (pivots, meshes, others colliders) and to never destroy it because it will prevent the player/bot to go through the environment.<br>For projectiles it does not matter.<br><br><div class="quote"> <br>2. Is it simply that it doesn't matter what entityxyz reports BECAUSE of the use of number 2?<br> <br></div><br>I don't understand what you mean.<br><br><div class="quote"> <br>how can I ensure my Y is going to be right?<br> <br></div><br>If you know the height of your lift (you can use MeshHeight() to measure it), and if you know the origine of your mesh, then you know exactly where to position the player/bot feet so that it is precisely on top of it. <br><br></td></tr></table><br>
<a name="1212966"></a>

<a name="1212995"></a>

<a name="1212996"></a>

<a name="1212998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not yet ready to even involve bots in this application until I can ensure that the player is going to behave correctly.<br><br>Once again- order of events in the loop are shown.<br>But what about the contents of UpdateColliders()?<br>I think I see destroy colliders, updateworld, add colliders??<br>No, before collision, after collision??<br><br>By entityxyz reporting incorrect values, I mean that it DOES when your collider is pinned or snagged somehow against say an angled surface and you keep pushing into or pulling away from it. <br><br></td></tr></table><br>
<a name="1212999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because of the sometimes complex nature of my indoor maps, I am just testing a camera with 3 sphere colliders (vertical) against the basic b3d map entity (no doors or anything right now)<br>Because of erratic collider results. I took your advise about the oval collider pivot. :) <br><br></td></tr></table><br>
<a name="1213007"></a>

<a name="1213014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Forget about the UpdateColliders() function, i have coded this only to be able to destroy and recreate collider more easily when i used several colliders sphere for each complex projectile.<br><br>But to have collisions between character and the environment (terrain, ground parts, wall parts, ceiling parts, obstacles), you only need to use one collider sphere for each character to prevent a character to go throught the environment and to detect the collisions at front at back at left at right, and use linepick to detect where is the ground and where is the ceiling.<br><br>Also i don't know if you are aware of this but it will work better and be faster to calculate if you use a low details mesh for collision and a high details mesh for rendering. <br><br></td></tr></table><br>
<a name="1213077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Simplicity is always good advise.<br>Of course for now, I'll see what I can do. <br><br></td></tr></table><br>
<a name="1213158"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikorians</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Testbed app posted:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=101898" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=101898</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
