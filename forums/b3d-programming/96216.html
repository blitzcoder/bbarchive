<!DOCTYPE html><html lang="en" ><head ><title >Avoid Vertexnx/y/z Problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Avoid Vertexnx/y/z Problems</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Avoid Vertexnx/y/z Problems</a><br><br>
<a name="1112616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've spent several hours in finding the cause for some rare but strange artefacts in the alignement of the camera to a triangle, using vertexnx etc.<br><br>When you got similar problems then try this:<br><br>nx#=filterTroubles#(nx#)<br><br>function filterTroubles#(v#)<br>if v#=0 then return 0.0001<br>return v#<br>end function<br><br>Additionally I might suggest: to align an entity to the roll  of two points (eg. to align the camera to a triangle) you should not use ProjectCamera to project the 3D coords to the 2D Screen, instead position 3 pivots at the tri-vertices coords, then parent them to the camera, then store the camera pitch yaw roll (for being able to restore it later), then rotate the camera to 0,0,0. Now you can use ENtityX and Y instead of ProjextedX and Y to be used with Atan2 to determine the angle you need to turn the camera roll in order to align the Triangle to the Camera Viewport, but amusingly you need to exchange X and Y (x#=projectedX becomes x#=entityy(piv)...). Probably I will make a more detailed tutorial about this thing soon.<br>You do this to prevent rounding errors that will occur when you ProjectCamera due to the Pixel resolution vs the 32 bit precision in 3d space. <br><br></td></tr></table><br>
<a name="1112671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might get some mileage out of <a href="/posts.php?topic=78595#882160" target="_blank">this old code</a>.<br><br>Be sure to read the comments before and after the code. Maybe it will make sense. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
