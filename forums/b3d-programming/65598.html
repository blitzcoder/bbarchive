<!DOCTYPE html><html lang="en" ><head ><title >Memory Access Violation in Screensaver</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Memory Access Violation in Screensaver</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Memory Access Violation in Screensaver</a><br><br>
<a name="732760"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just got my Dragon Screensaver on my computer. I left for awhile and came back to a black screen and when I shook the mouse, a "Memory Access Violation" warning box was there. I have tried to make multiple screensavers and all of them have the same problem. What would cause this? <br><br></td></tr></table><br>
<a name="732824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try compiling the screensaver in debug mode, it might give a more clear error message. Have you ran the program as a common (non-screensaver) .exe ? <br><br></td></tr></table><br>
<a name="733176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I tried to compile the screensaver in Debug mode but it gives me the same error. It works fine in .exe <br><br></td></tr></table><br>
<a name="733227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe it is the device that has gone lost ? Try compiling the program in windowed mode. In w98, the problem was, that a new instance of the screensaver was started every minute. I don't know if xp solved this. It might be useful to determine at what point of the program the error occurs. <br><br></td></tr></table><br>
<a name="733256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, Yeah I heard about that somewhere. I'll try it when I get home today. <br><br></td></tr></table><br>
<a name="733458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> quote:<br>In w98, the program was, that a new instance of the screensaver was started every minute<br><br>Really? Not in Win98se AFAIK.<br><br>However, it may also be a problem with the access paths, when it works as EXE but doesn't work as SCR from a screensaver call.<br>You should call the following line before you access files:<br><br>changedir systemproperty$("appdir")<br><br>Note: this won't work when stared within the IDE, needs to be compiled EXEs or SCRs. <br><br></td></tr></table><br>
<a name="733578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> so what exactly is the code doing when you "shake the mouse"? <br><br></td></tr></table><br>
<a name="733612"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @jfk, i just renamed my (delphi) .exe to .scr, and encountered this problem. I don't know if this was w98 first or second edition, actually. <br><br></td></tr></table><br>
<a name="733622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  However, it may also be a problem with the access paths, when it works as EXE but doesn't work as SCR from a screensaver call.<br>You should call the following line before you access files:<br><br>changedir systemproperty$("appdir")  <br></div><br><br>I have changedir systemproperty$("appdir")<br><br>[quote] so what exactly is the code doing when you "shake the mouse"? [/qoute]<br><br>Until Getkey()&lt;&gt;0 or Getmouse()&lt;&gt;0<br><br><br>I tried compiling it to .scr in windowed and debug mode and a strange thing happened, the screensaver loads fine and renders the scene for just  a second then it quits by itself. No warning, no black screen. I kept the task manager up to make sure multiple copies weren't coming up.<br><br>I tried It on my other computer and it still doesn't work.<br><br>This is supposed to be my friend's post-birthday present, so I'm really frustrated.<br><br>Thanks <br><br></td></tr></table><br>
<a name="733671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> send me the code and I'll fix it for you.<br><br>I have written several commercial screen savers using Blitz3d and I have not experienced this problem.  <br><br>To take a look at one of mine screen savers go here<br><br>www.boiledsweets.com/Vorboils<br><br>It is a robust heavy duty application. <br><br></td></tr></table><br>
<a name="733836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW did you think about to sell a license for some kind of screensaver for blitz3d framework? I'd probably buy one. I still can't handle the api-embeded stuff like password, settings, preview etc. correctly. (nasty black flashing popup windows) <br><br></td></tr></table><br>
<a name="733906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fuller,<br><br>please accept my apologies for what might look like a hijack of your thread.  It is not intended to be a hijack just spreading my huge screen saver writing experience hopefully for the benefit of you + others.<br><br>jfk EO-1110,<br><br>there should be no need for black flashing windows.  The config stuff is best handled by some other GUI language like VB.  Also this means the API stuff is easier to handle to.  The way my Blitz savers work is like this...<br><br>.SCR is actually a renamed VB .EXE, the VB handles all the horrid WinApi stuff and registers that the saver is running etc.  It also does the config stuff.  This then calls the Blitz .EXE.  In my opinion this is the best of both worlds.  The neat thing about a VB as the front end is that you can run a series of images (animation) in the preview window so actually looks like it's running in the preview window.  Also Innosetup is in my opinion a fair better installer.<br><br>Failing that use the Blitz MAX screen saver example in the code archives, it even runs in the preview window!<br>Please try Vorboils and see what I mean. <br><br></td></tr></table><br>
<a name="734037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, I see. VB isn't my thing, I even haven't a compiler installed. But maybe you could make some kind of generic framework, so a blitz programmer could add the screensaver exe and maybe some script based parameter settings.<br><br>Maybe this could be a useful third party product for blitz3d owners.<br><br>I used Innosetup some time ago. I also had a Gui editor that made it easier. I was using Clickteam installer because it allowed me to install a SCR as the current screensaver easily. I have no idea how to do that with Innosetup, and if it's possible at all. <br><br></td></tr></table><br>
<a name="734146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need for apology, I sent the code to you and am thankful for your help. <br><br></td></tr></table><br>
<a name="734233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk,<br><br>to install a screen saver with innosetup is easy...<br><br>"{sys}\rundll32.exe"; Parameters: "desk.cpl,InstallScreenSaver {sys}\MyScreenSaver.scr"<br><br>I could knock up a generic framework but you would still need to code the various options you wanted.  Have you taken a look at the Vorboils configuration.  Please do so and you'll see what I mean.<br><br>The problem is to amount of work to create a framework -- I would like to justify it by charing a small fee, I think the demand would be very small.<br><br>You could use the BlitzMax framework (in the code archives) to avoid a lot of these problems but then obviously your ss will only be 2d. <br><br></td></tr></table><br>
<a name="734251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I meant something like a script based options screen, with a variable number of parameters that could be saved to a file by the VB part, so the blitz part can read it.<br><br>Anyway, I patched my blitz EXE so now it will be hidden by default and only use ShowWindow if it's not a settings call, a password call or a preview call from the OS. Settings can be accessed when the saver is running.<br><br>I watched the screenie from your settings GUI, currently I'm surfing on linux so I can't run it but I think I remember that screensaver. <br><br></td></tr></table><br>
<a name="734767"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> fuller not received email... <br><br></td></tr></table><br>
<a name="734770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just realized it may be not so easy to make a dynamic GUI interface in VB that is based on a script or cfg file. Labels, gadget-type, number of elements etc. would have to be dynamic. Not sure if you can click this together with the interface clicky tools of VB as I remember it.<br><br>And BTW thanks for the Innosetup hint. I just found another reason why not to use the clickteam installer: when the user selects an other screensaver then your screensaver will vanish from the list of savers. <br><br></td></tr></table><br>
<a name="734898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm... I sent the e-mail. Darn that AOL. well here's the download link:<br><br><a href="http://s7.quicksharing.com/v/5679337/Dragon_ScreenSaver.zip.html" target="_blank">http://s7.quicksharing.com/v/5679337/Dragon_ScreenSaver.zip.html</a><br><br>Its in zip form <br><br></td></tr></table><br>
<a name="735151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get no MAVs here!  Works fine. <br><br></td></tr></table><br>
<a name="735407"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you leave it on for a long time?  hmmm... Does your computer have auto turnoff or standby feature on? What is your operating language? WindowsXP?<br><br>Thanks for helping, I really appreciate it. <br><br></td></tr></table><br>
<a name="735416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> No I didn't leave it for a while. <br><br>I noticed that in your loop you do a copy entity but never free the new copy of the entity!  You hide it, perhaps you should delete it.  Also I would eliminate all the particles stuff.  If it doesn't crash with that commented out then you know the problem is there.<br><br>XP PRO SP2. <br><br></td></tr></table><br>
<a name="735503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, im trying that out...<br><br>It's never crashed on start up, just after 10 min or so. <br><br></td></tr></table><br>
<a name="735521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I changed the hideentity's and got rid of the particles, but now it loads, renders once, then shuts down with no error message... <br><br>Kinda like what happened when I compiled it in windowed and debug mode to .scr<br><br>I can't imagine whatever's wrong with the screensaver. <br><br></td></tr></table><br>
<a name="735527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> You really have to isolate the problem.<br><br>Make a simple dummy screensaver, containing nothing but Waitkey():<br><br>waitkey()<br>end<br><br>Then add the components of your screensaver one by one and see if it still works.<br><br>Sometimes isolating a bug is the hardest part in the entire programming job. <br><br></td></tr></table><br>
<a name="735596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try a few things... <br><br></td></tr></table><br>
<a name="735645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Boiled Sweets - Thanks for all the help you've been giving me.<br><br>JFK - I've made multiple screensavers and tried isolating components of all of them, but to no avial. I'm beginning to think it is a hardware issue, even though I have tried it on multiple computers. <br><br></td></tr></table><br>
<a name="735649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I simply changed the HideEntity to FreeEntity.  Hasn't crashed yet... <br><br></td></tr></table><br>
<a name="736155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try it out here. <br><br></td></tr></table><br>
<a name="736160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now its  not  loading, like before:<br><br><div class="quote"> I changed the hideentity's and got rid of the particles, but now it loads, renders once, then shuts down with no error message...<br><br>Kinda like what happened when I compiled it in windowed and debug mode to .scr <br></div> <br><br></td></tr></table><br>
<a name="736691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well... I've tried all I an think of. Any ideas? <br><br></td></tr></table><br>
<a name="767693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PatrickS</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Any ideas?"<br><br>If it can help you or others...  I just started to learn B3D<br>and I had an error (Memory Access Violation)<br>that was occuring only when windows xp <br>was executing the screensaver .src <br>(in the screensaver setting window:<br>right click on the wall paper -&gt; properties -&gt; screensaver)<br>even if the .exe and .src worked very well.<br><br>The problem was the Path for my images (or similar ressources).<br><br>If your B3D file (.bb) is at:<br>-&gt;C:\xxxxxxxxxxxxxxxxxxxxxxxx<br>When you hit RUN in B3D:<br>-&gt;SystemProperty("appdir") <br>will return:<br>-&gt;C:\Program Files\Blitz3D\bin<br><br>SystemProperty("appdir") <br>return the current path of the .exe file.<br><br>I tried this:<br>=========================<br>If Right(SystemProperty("appdir"),12) &lt;&gt; "Blitz3D\bin\"<br>   ChangeDir SystemProperty("appdir")<br>End If<br>=========================<br>then everything worked well. <br><br></td></tr></table><br>
<a name="767942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fuller</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, I'll try that. <br><br>(I still haven't solved this in three months LOL)<br>(I gave up in a couple weeks...) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
