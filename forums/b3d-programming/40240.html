<!DOCTYPE html><html lang="en" ><head ><title >REQ: OPCODE collision engine into B3D</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >REQ: OPCODE collision engine into B3D</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >REQ: OPCODE collision engine into B3D</a><br><br>
<a name="451065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please BR guys, give us the OPCODE collisions engine in B3D!<br><br>www.codercorner.com/Opcode.htm<br><br>It's feature list:<br><div class="quote"> <br>-         C++ interface, developed for Windows systems using VC++ 6.0<br><br>-         Works on arbitrary meshes (convex or non-convex), even polygon soups<br><br>-         Current implementation uses AABB-trees<br><br>-         Introduces Primitive-BV overlap tests during recursive collision queries (whereas standard libraries only rely on Primitive-Primitive and BV-BV tests)<br><br>-         Introduces no-leaf trees, i.e. collision trees whose leaf nodes have been removed<br><br>-         Supports collision queries on quantized trees (decompressed on-the-fly)<br><br>-         Supports "first contact" or "all contacts" modes (à la RAPID)<br><br>-         Uses temporal coherence for "first contact" mode (~10 to 20 times faster, useful in rigid body simulation during bisection)<br><br>-         Memory footprint is 7.2 times smaller than RAPID's one, which is ideal for console games with limited ram (actually, if you use the unmodified RAPID code using double precision, it's more like 13 times smaller...)<br><br>-         And yet it often runs faster than RAPID (according to RDTSC, sometimes more than 5 times faster when objects are deeply overlapping)<br><br>-         Performance is usually close to RAPID's one in close-proximity situations<br><br>-         Stabbing, planes &amp; volume queries (sphere, AABB, OBB, LSS)<br><br>-         Sweep-and-prune and radix-based box pruner<br><br>-         Now works with deformable meshes (OPCODE 1.3)<br><br>-         Hybrid trees (OPCODE 1.3) keep a maximum of 16 triangles per leaf and reorganize client triangle lists, to eventually need roughly 16 times less ram than OPCODE’s standard trees. In the best case, this goes down to 1.25 byte / triangle, which is 115 times smaller than RAPID’s OBB trees (using floats ! else it’s 168 times). Speed hit is often negligible, and volume queries can actually run faster than OPCODE 1.2 due to less cache misses (reorganizing clients arrays also helps in this regard). They’re also faster for deformable meshes.<br> <br></div><br><br><br><br>Free to use for commercial and non-commercial and a whole lot better than the Blitz collisions.<br><br>It'd be nice to have proper collisions :)<br><br>Tracer <br><br></td></tr></table><br>
<a name="451178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think we already have that...<br><br><div class="quote"> <br>Below is a list of known projects or companies using OPCODE--<br><br>Tokamak<br><a href="http://www.tokamakphysics.com" target="_blank">http://www.tokamakphysics.com</a><br><br><br>ODE<br><a href="http://opende.sourceforge.net/" target="_blank">http://opende.sourceforge.net/</a><br><br>...<br> <br></div><br><br><a href="http://www.codercorner.com/OpcodeUsers.htm" target="_blank">http://www.codercorner.com/OpcodeUsers.htm</a> <br><br></td></tr></table><br>
<a name="451181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both wrappers are non-complete and both don't do the job that way they should..<br><br>We shouldn't have to rely on half completed third party DLL wrappers. Besides, both are Physics wrappers, i want collisions, plain and simple. I don't give a crap if the ball rolls left or right off the mountain.. i just want it to collide decently with a MOVING mountain ;)<br><br>I gave up on the physics wrappers after my ragdoll started twitching like it was having a MASSIVE orgasm after it's death and most of all, no two computers doing it the SAME. This was the Tokamak wrapper, which obviously is more dead than alive. The ODE wrapper was never even NEAR completion and is deader than a rusted doornail in a roman dig, considering it's author prefers to wrap 70,001 other things instead of the ODE dll :).<br><br>We were promised better collisions a long time ago for B3D, if all it takes is implementing a free ready-to-go collision system, then, go for it i say. Mark doesn't even have to touch the code, Simon is quite capable of doing it i think.<br><br>In other words, no, we don't have it. Dead, orgasming ragdolls, and not producing the same results on different computers is what we have (and that DLL is seemingly dead as well) and a 9.917457432% completed ODE wrapper that's been discontinued.<br><br>Tracer <br><br></td></tr></table><br>
<a name="451187"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Read some c++ tutorials and help us out then. <br><br></td></tr></table><br>
<a name="451206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stop dissing the wrapper writers will ya! ODE is perfectly usable! Ive only played with tokamak, but its usable too, just not with cars...<br><br>Jeez..... <br><br></td></tr></table><br>
<a name="451209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Write one yourself then.  Make some $$. <br><br></td></tr></table><br>
<a name="451215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I disagree about the Tokamak wrapper, sweenie done a great job on it, any problems with it are the fault of Tokamak.<br><br>I've almost finished adding breakages (got sidetracked a bit, one of my better..erm.. skills :), and the second static mesh function works without memory leaks. <br><br></td></tr></table><br>
<a name="451216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You guys are funny.<br><br>Falling cubes, spheres and cylinders is not 'usable' as a straightforward collision system. nor are those sad 'car physics' things done in them (logical, as both DLL's are not made for cars). It's impossible to get any sort of poly-&gt;poly system going with either physics system (fast enough anyway), let alone something as advanced as the OPCODE system as it is meant to be used. <br><br>Breakages in Tokamak are easy, my ragdoll already flies apart.. of course, then you have lots of limbs twitching like mad and making the whole thing look like a cheap horror movie :) Of course, how much twitching there is you never know as every PC screws everything differently :)<br><br><br>Sweenie, i would love to 'wrap' OPCODE.. however, as the Blitz system is mostly closed as Fort Knox and those hacks into it don't really help much with that sort of implementation.. the only people who can implement something like that collision system is those with the actual B3D source code.. You know yourself that not everything in Tokamak for example can be implemented because of the limited access to Blitz internal data. If you even manage to get a decent callback system going, it's going to be slow as  hell.<br><br>Tracer <br><br></td></tr></table><br>
<a name="451233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeroen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree with the fact that Mechanics libraries are not the same as collision engines.<br><br>If you want to define your OWN controls (not pushing objects by "forces" but just by moveEntity,positionEntity) you *cannot* use Tokamak or Ode! Okay, you can (animated bodies) but then you are still using the physics world (costs CPU) for nothing, just the collisions! That's just plain silly.<br><br>We indeed need a "normal" collision engine, better than Blitz own library. The only alternative is Nuclear Glory's engine, but since version 3 I personally got nasty performance issues. <br><br></td></tr></table><br>
<a name="451246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> IMHO Nuclear Glory is not a decent solution at all. Version 3 is slower than v2 which was never that fast anyway. They will be introducing optimisations and mesh-mesh "soon". <br><br></td></tr></table><br>
<a name="451249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tracer, check out coldet in the archives. I use it for vivid. It's very fast, has linepicks, poly to poly etc etc.<br><br>I recall the author(Of the wrapper, not the .dll) telling me it was a lot better than opcode. I may have just invented that in my head to make my story sound more belivable tho.<br><br>If opcode is better, i'll do it in vivid. (You don't need to be the engine writer Tracer. You just pass mesh and matrix info over. It would be the same internally or in b3d) <br><br></td></tr></table><br>
<a name="451253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skitchy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Antony - oddly enough, I think that 3DSMax exporter I recommended to you for Vivid about 12 hours ago is by the same people that made Opcode...<br>Yep :<br><a href="http://www.codercorner.com/News.htm" target="_blank">http://www.codercorner.com/News.htm</a> <br><br></td></tr></table><br>
<a name="451272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, and novadex..the guy's got a finger in everypie.<br><br>though the guy i'm working with on a game or at least will be soon informs me flexiporter isn't a worthwhile option these days, and suggested igame instead. so not so sure about that anymore. <br><br></td></tr></table><br>
<a name="451285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> of course, then you have lots of limbs twitching like mad and making the whole thing look like a cheap horror movie :) <br></div>Well in the right setting that's not nessecarilly a bad idea witness:<br><br>Exhibit a) Tribes Vengence; the twitchy ragdoll implementation in Tribes Vengence is obviously incompatible with the setting of the game and totally imappropriate.<br><br>Exhibit b) DOOM3; the twitcy (and in my experience worse than Tribes Vengence) ragdoll implementation was over-interpreted as additional ambience. It's not a bug, it's a feature.<br><br>Use your bugs to your advantage. Everyone else does. <br><br></td></tr></table><br>
<a name="451319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's rich. Our game's physics suck...let's call it a feature. Sucky physics sdk v1.0. <br><br></td></tr></table><br>
<a name="451330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >.rIKmAN.</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol <br><br></td></tr></table><br>
<a name="451348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Collision: 2d or 3d its the Devil of our lives.<br>were doing plane intersections in Matyhs just now... Might develop my own ideas out of that (in a few years time) <br><br></td></tr></table><br>
<a name="451395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tracer: Tokamak is NOT a collision library.<br><br>Physics libraries are not suitable in situations where you want to manualy move things, by their nature, they need forces applied to items to make them move, and make their collision work correctly.<br><br><div class="quote"> It's impossible to get any sort of poly-&gt;poly <br></div> Tokamak convex meshes to static mesh/convex mesh works, but once again, it's a physics engine, not a collision library.<br><br><div class="quote"> Breakages in Tokamak are easy, my ragdoll already flies apart.. of course, then you have lots of limbs twitching like mad and making the whole thing look like a cheap horror movie :) <br></div><br><br>Most ragdoll systems will break if: you don't fine tune them, increase iterations/time steps. Or, if you apply massive forces to joints. Don't expect many physics engines to work well @ &lt;30hz (that's why Tokamak has substeps, have you even looked into that? :)<br><br>Twitching can be eliminated!<br><br>b.t.w, Check the 'Flat Out' demo, try the ramp jump...I've seen legs &amp; arms on the character stretch if they get caught while the body moves fast.<br><br>Tom <br><br></td></tr></table><br>
<a name="451437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom Dude.. please read my posts..<br><br>If you read my posts correctly.. what i am saying is that TOKAMAK and ODE aren't collision libraries!<br><br>MUSTANG is the one who claims they are!<br><br>And yes, the ragdoll breaks intentionally, because i WANT em to do that.. If i shoot a grenade up a terrorist ass, i want the terrorist to break apart.. In other words, what my previous post stated that the ragdoll BREAKS, not as in bugging out, no, actual BREAKING. :)<br><br>Twitching CANNOT be eliminated, that's almost a direct quote from the Tokamak developer! Apparently there's a reason Havok is so expensive, and that reason is apparently NO TWITCHING if implemented right.<br><br>He also said that differing physics responses are normal on different computers.<br><br>You also do not want to have stretching arms on a ragdoll.. a real arm won't stretch more than a 10th of an inch, after that muscles tear and bones get pulled apart, or the body gets pulled towards the arms.<br><br><br>And with this response to someone who seemingly can't read ;) we still remain at the point where we heard nothing from the Blitz Team, Mustang thinking that physics are collisions and a lot of crap talk in the mean time ;)<br><br><br>Tracer <br><br></td></tr></table><br>
<a name="451443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can read fine, I've misunderstood you, sorry.<br><br>Stick your light hearted dig ...in a shadow.<br><br>Tom <br><br></td></tr></table><br>
<a name="451446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> no worries man, it was just that, a light hearted dig.<br><br>It would be nice to have a better collision system in B3D, i think we can all agree with that (except for Mustang of course).<br><br>Tracer <br><br></td></tr></table><br>
<a name="451447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I havent seen a physics lib in a commercial game not twitch to be honest. Maybe they just kill the physics after the limbs have mostly stopped animating with some kind of damping. Untill it colides with something again. <br><br>Most games with ragdoll aren't all that lifelike in certain situations, (bouncy limbs if arms and legs fall funny and can't decide if they should fall off an awkward perch like a chair arm rest etc). and the orgasm things isn't at all uncommon in games like um... DX, thief, Riddick, Max payne 2. Tread on a guy or drag him and sometimes they flop aroudn like they had the old heart starting shock treatment. It's just not so bad that you can't  ignore it figuring its just a game. <br><br></td></tr></table><br>
<a name="451485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> A fully implemented OPCODE would be goooood :) <br><br></td></tr></table><br>
<a name="451562"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> well done :) very nice indeed. If this looks very promising and just what were all missing as far as shadows casting on animated objects :) <br><br></td></tr></table><br>
<a name="451565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Uh, wrong thread Evak?<br><br>Tracer <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
