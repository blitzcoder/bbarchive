<!DOCTYPE html><html lang="en" ><head ><title >gamma - grayscale filter</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >gamma - grayscale filter</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >gamma - grayscale filter</a><br><br>
<a name="405472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> is it possible to produce a B/W filter ? <br><br></td></tr></table><br>
<a name="405473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not by altering the gamma tables, no.<br><br>I can't think of any way to do it with the normal blending modes either.<br><br>There is one possiblity however.  It may be possible to do it with the dot3 blending mode.<br><br>Dot 3 works by mulltiplying two vectors together and producing a grayscale result.  This is then blended which pixels for lighting.<br><br>The dot 3 blend works like so.  The color of the pixel, R, G, B represents a vector, V1xyz.  The color of the object that the dot 3 blend is set on is also converted to a vector.<br><br>A dot product is then performed:<br><br>Dot# = V1x#*V2x# + V1y#*V2y# + V1z#*V2z#<br><br>The resulting color is computed by multiplying Dot# by 255.<br><br>If the RGB color of the pixel is 255,255,255 that would result in a vector of 1,1,1.  1*1 + 1*1 + 1*1 = 3.  3*255 is too high a value.  So, you want to blend a plane over the scene using dot 3 whose color is 255/3.0, ie, (85, 85, 85) so that the maximum greyscale value will be 1.0.<br><br>I think that should work! :-)<br><br>[edit]<br>Hm, just thought of something.  The vectors can have negative values.  Any color channel less than 127 goes negative...  Hm...  Not sure how that will affect the result.  You may have to add 127 to the color of the dot 3 overlay quad.  And you may have to first add blend a 127,127,127 quad over the scene to obliterate the values which are so low they are negative.  But that would obliterate all values which ended up being positive...  Leading the image to appear overexposed.  Perhaps you could reach a compromise with an add plane of 64,64,64.  Negative values are clamped to 0, so you would end up with a scene that has some "overexposed" dark areas and some "overexposed" light areas,  But the midrange would be okay.<br>[/edit] <br><br></td></tr></table><br>
<a name="405984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> if yu can code a snippet... :) <br><br></td></tr></table><br>
<a name="405997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was mistaken.  There is apparently no dot 3 blend mode for entityblend in Blitz, only for textureblend.  I do not think there is any reason for this limitation... I think Mark simply chose not to support it for whatever reason.  Regardless, without a Dot 3 entityblend mode there is no way to do the effect I described above.<br><br>I'll see if I can think of any oher way to accomplish this effect, but don't hold your breath! <br><br></td></tr></table><br>
<a name="406007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Best i can think of is creating a wash out effect using camera fog, range -100 to 100. Probably nothing that you want though.... <br><br></td></tr></table><br>
<a name="406052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make all your textures black and white.  :D<br><br>Seriously, you should not rely on automatic processing to set your saturation and brightness levels. <br><br></td></tr></table><br>
<a name="407161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a working grayscale function a long time ago in 5 min. Since all grayscale pictures has equal RGB values (very obvious), you can do this perfectly by taking each pixel from the src image, find the middlevalue (basic math: m=rgb/3) of RGB, and write that value as RGB to dest image at same pixel. 20,10,60 at org pic would ie be 30,30,30 on dest pic. I'm sure u understand. <br><br></td></tr></table><br>
<a name="407166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, ChrML, but that's very slooooooooooooooooow! :)<br><br>I guess Ed wants it for rendering a light/shadow map or something. I could do with this as well. Tried farting around with gamma tables but, frankly, they're a bloody mystery to me - the docs being about as much use as an ashtray on a motorbike, as they are. :P <br><br></td></tr></table><br>
<a name="407168"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> That sounds slow. <br><br></td></tr></table><br>
<a name="407206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think Halo must be sick and freebasing cough syrup, because he actually offered a helpful suggestion and put a smiley face after it.  <br><br>Either that, or this is an imposter. <br><br></td></tr></table><br>
<a name="407212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, if only I knew what "you should not rely on automatic processing to set your saturation and brightness levels" meant, I'd be quids in! :P <br><br></td></tr></table><br>
<a name="407216"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would be cool if you could get the greyscale working.  I'd like to do a black-and-white to color transition in my game.<br><br>There is also a lib around somewhere that does real-time fullscreen pixel processing.  It might be okay for some situations. <br><br></td></tr></table><br>
<a name="407226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Yes, if only I knew what "you should not rely on automatic processing to set your saturation and brightness levels" meant, I'd be quids in!"<br><br>All Halo was saying is instead of processing the image in realtime, just make grayscale textures to texture the geometry with when you want to put the game in a grayscale mode.  And that doing this would give you more control over what the final image looked like, than simply converting the image to greyscale based on how bright each pixel is automatically. <br><br></td></tr></table><br>
<a name="407733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >karmacomposer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wasn't there a tech demo made recently (see the online magazine) - you know, the one with the spikey balls - that was balck and white and greyshades and seemed awfully fast to me.<br><br>Mike <br><br></td></tr></table><br>
<a name="407739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gpete</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> what about "Graphics3D 1024,768,4,1"  ??<br><br><br>sorry, just joking..... <br><br></td></tr></table><br>
<a name="408041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> unfortunataly the setgamma command can only set the intenity of each channel, there is no way to assign an individual color to a default RGB 24Bit Value. You can filter out one or 2 Colors, eg. show only the red colors, but that's all.<br><br>Maybe the easiest way would be to use BW-Textures. One could write a funtion that will clone a scene and create BW Versions of all textures on the fly... <br><br></td></tr></table><br>
<a name="408113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a little demo I wrote to show how I would roughly go about it.<br><br>Hope it helps :-)<br><br><a href="http://members.iinet.net.au/~pmerwarth/Color2BandW.zip" target="_blank">http://members.iinet.net.au/~pmerwarth/Color2BandW.zip</a> <br><br></td></tr></table><br>
<a name="408291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, basicly you are using BW textures. <br><br>Of course, it's the easiest thing. Problem is: when you have loaded some meshes and don't know what textures they use etc. and simply want to "switch" to BW, without any prepared content.<br><br>I'd suggest to keep all meshes accessible in an array, or as types. Then you only need to parse all meshes (recursively with children, if LoadAnimMesh was used). The app will then track down the used textures by GetsurfaceBrush and GetBrushTexture Commands, use some (r+g+b)/3 pixel manipulation in the texturebuffers (note: the texture returned by GetBrushTexture is a Copy of the original, so you may edit it without to edit the origninal one, but you need to paintsurface the surface with this edited brush).<br><br>So you would clone every mesh, hide the original and alter the textures of the clones.<br><br>I think it's possible to manage it in 2 functions: BWinit() and BWexit(). DX-lights are a further problem. If they (and their colors) are kept in arrays, then it will be easy to set them to something grey, and to restore them in the BWexit function.<br><br>This is a typical example of how a Program can be a dead end if you forgot to implement some basic features (like storing all content in an accessible list). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
