<!DOCTYPE html><html lang="en" ><head ><title >DDS DXT1 bleeding edges on lightmap</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DDS DXT1 bleeding edges on lightmap</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >DDS DXT1 bleeding edges on lightmap</a><br><br>
<a name="709521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have converted the textures for a lightmapped mesh to dds and patched the mesh file. This works so far. But there are some places with bleeding edges on the lightmap, like when a blue bulb of the neighbour room will bleed on the edge of the current yellowish lit room.<br><br>This usualy hapens when you scale down a lightmap, so some texels have to share diffrent light sources.<br><br>What could it be? I saved it as DXT1 with the default settings from within the PS plugin. Probably there's a limit for the size? The lightmap size is 1024*1024. <br><br></td></tr></table><br>
<a name="709550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paolo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure but to me it looks like the DXT1 compression<br>get some color distortion in the pixels similar to the changes<br>you see in a .jpg compression, this might be because of dxt1<br>is the lower quality,<br>have you already tried with dxt3 and 5? may be, giving more<br>"quality" to the compression will work ...<br><br>Paolo. <br><br></td></tr></table><br>
<a name="709629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, I'll try that next time. Although, I had the impression at least the default settings of DXT1 are nonlossy, if not all DDS textures ?!? <br><br></td></tr></table><br>
<a name="709634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >carpman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe something to do with the Mip mapping settings. As you say, if you scale the lightmap down you can also get this effect sometimes.<br>Doesn't the mip mapping also scale down the lightmap.<br>I've had similar problems when using the standard Blitz mip mapping and a .bmp lightmap, but only when the camera is quite a distance from the object.<br>Disabling the mipmapping corrected this but of course you need the mipmapping so never did solve this problem.<br>Haven't had it with .dds files yet. <br><br></td></tr></table><br>
<a name="709636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >markcw</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yep, essentially dds/dxt is lossy compression. <br><br>for all 5 formats it takes a block of 4x4 pixels (called a texel block) and stores the 2 most significant colors. it then calculates 2 more colors from those, and thats it, just 4 colors per block.<br><br>dxt1 uses this system alone, or with dxt1a it uses color3 for the transparent mask. <br><br>dxt2 to dxt5 use the same system to store color but on top of that they have an alpha block of the 4x4 pixels, which doubles the filesize. dxt2/3 are called "explicit" because they use the alpha level directly, whereas dxt4/5 are interpolated which gives the smooth alpha gradient.<br><br>so using dxt3 or dxt5 shouldn't fix the bleeding, if it is because of dxt compression. <br><br></td></tr></table><br>
<a name="709698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Finjogi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you could pack lighmap parts as 4*4, 4*8, 8*8 etc. divided by 4 regions then at least compression should not cause the bleeding? <br><br></td></tr></table><br>
<a name="709981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info! I guess I'll use PNG for it then. Not so much loss, 2 megabyte or so. Got to edit the meshfile patching code, so it will exclude certain filenames from ".dds" patching. <br><br></td></tr></table><br>
<a name="727283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be nice if we could use uncompressed R8G8B8 24bit dds. then the lightmaps would be without the bleeding... <br><br>but as far as i know only dxt1-5 are supported by b3d ;-( maybe someone knows how to fix that?!?<br><br>btw... here u can find a free converter for all available dds-formats: <a href="http://www.mnwright.btinternet.co.uk/programs/dxtbmp.htm" target="_blank">http://www.mnwright.btinternet.co.uk/programs/dxtbmp.htm</a> <br><br></td></tr></table><br>
<a name="727316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> uncompressed dds? then you can use bmp as well...<br><br>i can live with those bleedings, regarding the lower memory consumption compared to uncompressed bmp (especially with big lightmaps like 1024x1024). <br><br></td></tr></table><br>
<a name="727495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, but if u use a lightmap 1024x1024 in bmp, tga, png, jpg or whatever the size of the file varies but still uses over 4mb in vram. the uncompressed 1024x1024 dds file is 3mb and would only use this size in vram... so we have 1/4 less... and on 512x512 its only 1/2 vram usage<br><br>cheers, chi <br><br></td></tr></table><br>
<a name="727536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chi</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "the uncompressed 1024x1024 dds file is 3mb and would only use this size in vram..."<br><br>seems like i was wrong... i was told that this vram-advantage only works with dxt dds... if this is true it wouldnt make much sense to use uncompressed dds (also they doesnt work in b3d yet)<br><br>so... sorry about that ;-) cheers, chi <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
