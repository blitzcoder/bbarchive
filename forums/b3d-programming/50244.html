<!DOCTYPE html><html lang="en" ><head ><title >Soundmap?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Soundmap?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Soundmap?</a><br><br>
<a name="558814"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi!<br><br>I am currently coding a teambased, tactical FPS-Shooter (no arcade style), but i face a problem with sound. how do i create "soundmaps" for each map? the player walks on grass, stone, wood and therefore different running sounds should be played (depending on which texture the player is).<br>i have no idea about creating a "soundmap". maybe this is the false approach? helpless at the moment ;) maybe some of you have a great idea on how to solve this problem easily.<br><br>so long,<br><br>Mac <br><br></td></tr></table><br>
<a name="558817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> how about using pivots with a radius, if a play gets close to one of these pivots, it changes the sound fx?<br>i did this it works well, but dont try to do complex levels or if you do, try to make the pivots with a low radius do detailed sound fx <br><br></td></tr></table><br>
<a name="558819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> sounds good. i'll try this one... thanks for the hint. <br><br></td></tr></table><br>
<a name="558853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do soundmaps, they are great. You can do them in the sameway as shadowmaps, etc...<br><br>You make a 2D bitmap with color for every zone (green = grass, gray = asphalt, etc...). Then you must know the size of the 3d map and the size of the 2d map (both width and depth) and make a relation so one point in the 3d map is one point in the 2d map. After you test the rgb color of the x,y calculated in the 2d map and you use it.<br><br>I do this for my racing game, to get the shadows of the lightmap and the slip factor of the terrain and it works perfect!<br><br>Good Luck! <br><br></td></tr></table><br>
<a name="558883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh nice one... and easy ;) sometimes solutions are so easy.. *shameonme* <br><br></td></tr></table><br>
<a name="558891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Associate a group of sound effects with each texture.  When the player collides, check to see the texture name of the collided surface, then play the appropriate sound effect.  This approach is the best. <br><br></td></tr></table><br>
<a name="558902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> seems good, but not good enough. what about multitexturing? there you have merged textures... dont think it will work this way... <br><br></td></tr></table><br>
<a name="559201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the essence of what I use:<br><pre class=code>
;-----------------------------
Function PlayerDetCollText()
;-----------------------------
Local collcnt
Local SURFACE_Level,BRUSH_Level,TEX_Level
Local success = 0

	If (EntityCollided(hEntPlayer,TYPE_TERRAIN)) 
		DetCollTextName$ = "TERRAIN"
	Else
		collcnt = CountCollisions(hEntPlayer)
		If collcnt&gt;0
			SURFACE_Level = CollisionSurface(hEntPlayer, collcnt) 
			If SURFACE_Level &gt; 0
				BRUSH_Level = GetSurfaceBrush(SURFACE_Level) 
				TEX_Level = GetBrushTexture(BRUSH_Level) 
				DetCollTextName$ = Upper$(TextureName$(TEX_Level) )
				FreeBrush(BRUSH_Level) 
				FreeTexture(TEX_Level) 
				success = 1
			EndIf
		EndIf
	EndIf

Return success
End Function
</pre><br>DetCollTextName$ gives me the texture name of what I'm walking on.<br>Then I have a lookup list of texturenames &gt; sound files.<br>The appropriate sound file is 'marked' for next use, and is then played after a timer-count has expired. <br><br></td></tr></table><br>
<a name="559242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is that this can only be used with blitz collision system. I use ODE for physics and collisions, so the soundmap must be used.<br><br>Otherway the texture method is good. <br><br></td></tr></table><br>
<a name="559289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't the GetBurshTexture() make a seperate instance of the texture in memory by copying it though?  I thought it worked that way because you have to manually re-apply it to the entity to register any changes.<br><br>I may very well be wrong as I have not used the command much, but I think your putting a lot of CPU time into copying a texture that you are only then only reading the name of, which is quite an expensive way of doing things isn't it? <br><br></td></tr></table><br>
<a name="559491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kuriz: ODE? Yes, you're right this does use the Blitz collision method. I can't help you there.<br><br>@Becky: As you say, but if I use FreeBrush(BRUSH_Level) and FreeTexture(TEX_Level) then everything's ok; this is based on one of Mark Sibly's bits of code.<br><br>If fact my footsteps sound is based on a timer (let's say, every half second?). On the timeout this code is called, so CPU loss is kept to a minimum. Even so, if I deactivate the code I can't detect any difference in performance.<br><br>It _does_ seem like a very wasteful way to get a texture name (under 'my' feet) - to have to create and destroy a brush to do that.<br>If anyone can think of a better way then I'm open to ideas. <br><br></td></tr></table><br>
<a name="559625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have the memory address of the entity already from the variable that holds it's handle so you just need to work out the offset to where the texture name is stored.  It'll probably be different for every different mesh (depending upon the b3d internal format) but a quick for..next loop should be able to find it.<br><br>I would have thought that would be more efficient, at least, on a technical level.  As you say though, but as you say it depends upon how much optimisation your program needs as to whether it's worth the extra hassle... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
