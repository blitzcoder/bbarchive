<!DOCTYPE html><html lang="en" ><head ><title >fullscreen FX</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >fullscreen FX</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >fullscreen FX</a><br><br>
<a name="630344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Great site! Lots of info!<br>I would like to make a fullscreen FX for Blitz3D, but I don't know what method to choose.<br><br>The thing I would like to try is to write a fullscreen FX.<br>I would like to apply a blur to pixels above a certain treshold, so the lighter a pixels is, the more blur I want to apply to it. It is an effect used in some videoclips and some commercials.<br><br>Ofcourse I am concidering using LockBuffer() and Readpixelfast, but I am also familiair with Delphi and I was wondering if writing a DLL for this might be more fast ? And if so, how could I pass a Buffer or an Image to the .DLL ? <br><br></td></tr></table><br>
<a name="630369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe this is useful:<br><a href="http://blitzbasic.com/codearcs/codearcs.php?code=921" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=921</a> <br><br></td></tr></table><br>
<a name="630430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is certainly a nice .lib! However, I would like to write something myself. I try to write the FX as a form of practice. The thing I want to learn is how to sort or less directly access the B3D buffers/images in a fast way @ the current graphics resolution.<br><br>I saw an example today of a C++ DLL that accesses a Buffer. So with a littlebit of work I can translate that to Delphi. But would it be fast enough ?<br><br>Today, I also tried the following code:<br><pre class=code>
f$ = "test.bmp"

ff = ReadFile(f$)

bank = CreateBank(FileSize(f$) + 1)

For i = 0 To FileSize(ff)
PokeByte bank, i, ReadByte (ff)
Next

CloseFile ff

DrawImage bank, 0, 0

Print "ok"

WaitKey()

End
</pre><br>So I tried to draw a bank instead of an image, but that couldn't fool Blitz. However I would like to write somethink like this.<br><br>Is it possible to declare to variables at the same memory location of to directly acces the bitmap information ?<br>On my configuration using ReadPixelFast goes actually a bit slow, so I'm not too fond of it.<br><br>Or maybe ASM ? Is there some form of inline assembler in Blitz ? <br><br></td></tr></table><br>
<a name="630448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> first use ReadByteS to read a bulk of bytes from a file to a bank.<br><br>Then there's a hack that allows to use an image as a bank, see code archives/ userlibs/ image as bank or something.<br><br>Now that the bank handle points to the an image, it's also possible to write data to this "bank" for a DLL, using a userlib DELCS file.<br><br>Blitz will then call a function that is declared in the decls file, using the bank name as a parameter, where this must be declared as "value*" in the decls file, see some example decls files. The dll will then be capable of writing data to that bank. If this fails for some reason, or if you need to hand over a pointer to a pointer for some reason or something, you can always determine the physical aress of a banks data segment by checking the 32 sigint that is located at adress bankhandle+4. You need to use RTLMoveMemory to read that int (see also the image as bank example).<br><br>Please note: C++ compiler seem to be only about 1.5 times faster than Blitz compiled code. Well, that's an average benchmark for things like FOR loops etc.<br>ReadPixelFast and WritePixelFast are kind of limited in speed due to the fact that access of VRam or Ram located image objects requires some special steps, compared to say simply moving 24 bits to a given adress.<br><br>No inline Asm in Blitz3D.<br><br>BTW, your filter question:<br><br>bram32 if you're taling about those trashy shiny blending white areas stuff seen in teethpaste and elections republicans ads, it may be a glow filter. You're lucky, glow filters can be implented using the power of your 3D chips:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1351" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1351</a><br>Beaker made an other one, but I cannot find it right now. <br><br></td></tr></table><br>
<a name="630458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much! I found the code you mentioned:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1518" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1518</a> <br><br></td></tr></table><br>
<a name="721717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look here. Updated<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=34301" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=34301</a><br><br>JP <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
