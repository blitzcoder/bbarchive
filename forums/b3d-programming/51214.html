<!DOCTYPE html><html lang="en" ><head ><title >AVI as a texture</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >AVI as a texture</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >AVI as a texture</a><br><br>
<a name="571226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..Is it possible to use AVI or any other format like that as a texture within Blitz3D, and if it is, how? <br><br></td></tr></table><br>
<a name="571246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes it's possible... there was an example someone posted a long time ago in these forums... don't remember who or what was it called though...<br><br>You propably just need to render the avi normally then copyrect to texture. <br><br></td></tr></table><br>
<a name="571281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh dear. Yes it is.<br><br>But be warned, there is a bug in OpenMovie() which causes a reduction of available video memory each time you loop the video. <br><br>Unfortunately CloseMovie() does not free the movie memory, so when you re-open (to effect a loop), a new version is loaded into memory. (Still hoping for a reply from Blitz Support on this one.)<br><br>If you don't need to loop there's no problem. <br><br></td></tr></table><br>
<a name="571312"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As bouncer says, just simply drawmovie to advance to the next frame, copyrect into a texture. <br><br></td></tr></table><br>
<a name="571350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> well..I have to keep AVI in loop, and I realized too that memory is not released after CloseMovie...hmm...this suckss.. <br><br></td></tr></table><br>
<a name="571377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need to loop the AVI. Just copy all the frames to a texture and your sorted. <br><br></td></tr></table><br>
<a name="571419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paolo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That problem is not so true,<br>I'm using some AVI as textures in my game<br>and I did some tests a while ago, although<br>your video memory decrease each time you open<br>the movie, I found that if your memory goes to less than<br>cero, then all the memory is restored correctly...<br><br>I'm testing with a 32mb video card, and for example <br>when I have a level that consumes 15mb, when you start<br>to open movies you see the memory left decreasing each<br>time, but if it goes under than cero it jumps again to<br>15mb as free memory ....<br>... try doing the same to see if it also works this way for you ... <br><br></td></tr></table><br>
<a name="571502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would be really good if what you say is true, but two thoughts:<br>a) Why would that happen? Blitz? Windows? It sounds bizarre.<br>b) What would the 'action' of a complex game be like with ever decreasing memory?<br><br>We really need a reply from Blitz Research on this on. <br><br></td></tr></table><br>
<a name="571507"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I made a test some time ago and it seemed the memory is restored virtually, officially, although it failed to use the newly created textures (created after the movie memory hole consumed about 100% of all resources) and the framerate dropped to 1 fps or something. I think that was virtual Vram, taken from the system ram.<br><br>I also hope Blitz's Move capabilities will be improved. Because using 3D hardware to process some Video FX etc. is very nice. This requires a few more Movie Commands and the Bugfix that was mentioned. Well maybe it's a directshow thing.<br><br>BTW Alien - you should use the built in animated Textures instead. <br><br></td></tr></table><br>
<a name="571539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> JFK, Thats good suggestion, but Animated textures is not good option since I have to run about 1 minute long AVI( request from customer, aand AVI will be applied on to TV screen surface..interactive walktrough project,I'll post it here when I finish), so it means about 1500 frames (if movie FPS is 25)..my concern is size of bitmap prepared for animation sequence... <br><br></td></tr></table><br>
<a name="571623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> JFK, it feels to me as if the memory restoration is a Windows function. That's the sort of thing MS do if an app looks as if it's threatening the system.<br>Don't like the idea of a drop down to 1 fps though.<br><br>Naughty Alien's situation of a projected video as a TV screen for a client is exactly the sort I had in mind - it would be a shame to say 'No, that can't be done' regarding video, when in fact I've never had to say that before about Blitz generated apps. <br><br></td></tr></table><br>
<a name="571897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some time ago there was a BBPEG source in the archive, now it's gone. It was capable of playing mpeg1 movies without to use blitzs Movie Commands.<br><br>Personaly I use MCI Sendstring to do all kinds of movie stuff (see Dr. Green), but it's such a bugous thing. Most important: you will only be able to capture the MCI-players frames in fullscreen mode, not in windowed! If you can live with that limitation, you may give it a try.<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1329" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1329</a><br><br>Well I'm not sure if you can play it to the backbuffer without to mess up the main render work (telling MCI to play the movie will make it draw frames whenever IT likes to do so, eg. in the middle of your other drawing or rendering processes. But it may be possible when you use Pause etc.) <br><br></td></tr></table><br>
<a name="571914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..thanks JFK....walktrough should be only fullscreen mode, so it will be ok...I'll give it a try to see how its works...I hope it will be no problem with assigning AVI played on this way on to TV screen surface... <br><br></td></tr></table><br>
<a name="572016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Alien - let us know.<br>I think what jfk is saying is that MCI will render wherever it wants, usually the main window. The few experiments I've done with MCI give the impression that MCI only acknowledges the main window, and has no concept of a 'buffer' - it is after all a 15 year old system, good in its day, but written for Windows 3.11.<br><br>If anyone can find BBPEG please let me know.<br>I've searched this site and google - no luck, and no info about FoX the author. <br><br></td></tr></table><br>
<a name="572022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..yup..BBPEG would be great to have..I'll look forward to it too.. <br><br></td></tr></table><br>
<a name="572095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mongia2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> link for code archives<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?cat=11" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?cat=11</a><br><br>mongia2 <br><br></td></tr></table><br>
<a name="572205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @mongia2 - Sorry, what's your point?<br>This is the way that we're all doing it already.<br>Our point is that there's a memory leak when the video opens/loops. <br><br></td></tr></table><br>
<a name="572306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> well there have also been a few DLLs written for Blitz, eg. BlitzMovie. THe orignial Download is broken, so I host it:<br>www.melog.ch/dl/blitzmovie1.3-beta.zip<br><br>BTW John you're right, I just tried to make MCI draw to the backbuffer, without success. I draws to the frontbuffer no matter what and even ingores Flip. <br><br></td></tr></table><br>
<a name="572379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mongia2</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> blitzmovie is not stable!!<br><br>mongia2 <br><br></td></tr></table><br>
<a name="572384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sob, sob.<br>I feel we're really in a fix here.<br>I really wanted to use TV screen and billboard effects.<br>And all for the sake of a FreeMovie() memory-clear type call! <br><br></td></tr></table><br>
<a name="572399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, a bugfix is needed. Tho I am still using Version 1.89 and I hope versions higher than 1.90 won't mess up my source codes. I'd risk it, especially when Mark would add a SeekFrame/Pause Function.<br><br>Or: someone has got to write a new player, probably by using some existing code, eg. from sourceforge. Something that will draw frames to a bank. Using the dirty bank adress hack would allow this. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
