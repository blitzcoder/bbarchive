<!DOCTYPE html><html lang="en" ><head ><title >Strange Slowdown</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Strange Slowdown</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Strange Slowdown</a><br><br>
<a name="238664"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> All I have is a few entities on screen. They're running at refresh rate normally, but if I zoom the camera in ( zoom is on the right mouse button ) then things get real slow real fast ( if you see what I mean. )<br><br>I mean.. seriously slow, and the mouse cursor is moving waaaaay behind where I'm moving it. If I zoom back out again, it will come back to normal speed again. There's no alpha transparency, so I wouldn't have thought fillrate would have been such a problem.<br><br>The thing is, if I ClearTextureFilters() for a cleaner look, it's even worse. And even if I zoom out, it never gets up to full speed again. The problem doesn't exist in fullscreen mode at all. I mean, it will slow down, but just a normal drop of speed. The mouse doesn't start lagging everything speeds back up again as soon as I zoom back a bit.<br><br>So...<br><br>Is the problem :<br><br>1) ClearTextureFilters()?<br><br>2) Zooming?<br><br>3) Fill Rate?<br><br>4) Windowed Mode?<br><br>5) Something else?<br><br><br>Anyone hazard a guess? <br><br></td></tr></table><br>
<a name="238676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Anyone hazard a guess? <br></div><br>Without an example of your code, is hard to guess.<br><br>- Do you have some Load... command in the main loop (ex loadfont, loadmesh, loadsound...) ?<br><br>- How many triangles are made the models with ?<br><br>- How the main loop looks like ?<br><br>- what else happen when you zoom in ? Are there other function calls invoked ?<br><br>- seems to me that your gfx card does not really like windowed mode<br><br>- if you set the zooming in at the very beginning of the prog, I mean, without using the mouse, does it slow down in the same way ?<br><br>- do you use a waittimer command ? If not, try with it, to force the frame rate at a certain fps<br><br>- your pc specs ?<br><br>Sergio. <br><br></td></tr></table><br>
<a name="238678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd take a wild guess and say Fillrate<br><br>post some shots of what your zooming in to? <br><br></td></tr></table><br>
<a name="238688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I should have been more explicit in the first post. It's definitely something weird, not the usual suspects. <br><br><div class="quote"> - Do you have some Load... command in the main loop (ex loadfont, loadmesh, loadsound...) ? <br></div><br><br>No. Nothing like that.<br><br><br><div class="quote"> How many triangles are made the models with ? <br></div><br><br>Total number of polys on screen must be around 250. And no more than 20 surfaces. Definitely not a problem.<br><br><div class="quote"> How the main loop looks like ?  <br></div><br><br>Erm.. practically nothing in there yet.<br><br><pre class=code>
Repeat
   docameracontrol()
   UpdateWorld
   RenderWorld
   Rect MouseX()-2,MouseY()-2,4,4
   dofps()
   Flip
Until KeyHit(1)&gt;0
</pre><br><br>camera control is just a zoom on the rmb, and do fps just counts the fps and displays them.<br><br><div class="quote"> what else happen when you zoom in ? Are there other function calls invoked ? <br></div><br><br>No. Nothing but zooming.<br><br><div class="quote"> seems to me that your gfx card does not really like windowed mode <br></div><br><br>Well Blitz seems to prefer fullscreen ( probably a DirectX thing ) but I can run other games in Windowed mode with no problems.<br><br><div class="quote"> if you set the zooming in at the very beginning of the prog, I mean, without using the mouse, does it slow down in the same way ? <br></div><br><br>Good Question. I'll try that, and post back.<br><br><br><div class="quote"> do you use a waittimer command ? If not, try with it, to force the frame rate at a certain fps <br></div><br><br>No, but I never do, and I have another game I'm working on with many more polies and much more going on that doesn't have this problem. I'll take a look at waittimer, but I'm 99% sure this isn't the issue.<br><br><div class="quote"> - your pc specs ? <br></div><br><br>1200 Athlon, 256Mb Ram, Gf2Mx, XP.. no problems running other games I've written in Blitz. <br><br></td></tr></table><br>
<a name="238689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, John, Fillrate is all that springs to mind to me too. Maybe I'll just stick a limit on the zoom. I'm not sure if the screenshots would help. It's literally just cubes on a plane at the moment. All textured, but small textures (64x64 on each cube and 512x512 on the plane. It doesn't happen until I'm zoomed in so far that the plane fills the screen, but I'm still surprised fillrate is an issue already. <br><br></td></tr></table><br>
<a name="238703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just had this problem.<br>My guess is it's your/blitz's mousehandling.<br><br><br>Try putting these lines after Flip:<br><br>For n=1 to 10 ; or 20<br>   Delay 1 ;or 2<br>Next<br><br>Delay It?<br>Well, just to test if it is indeed mouseevents queing up.<br>That loop lets Blitz get rid of a few of the queed mouse events.<br><br>In my latest app, I fixed it by waiting for mouse/keyboard events in a loop after Flip statement. Not a good soulution for a game, but in this case it worked ok.<br><br>I'm still looking for a better workaround, maybe a dll with a mouse hook will work... <br><br></td></tr></table><br>
<a name="238711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe FlushMouse every x number of ticks? <br><br></td></tr></table><br>
<a name="238723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my harmony blocks game (like your game its cubes on a terrain (mesh in my case) with anim texturing applied to them, I get slowdown like you described when I am zoomed right in, but only on some 3d cards thats why I suspect its fillrate.<br><br>stick a limit on the zoom :) I did <br><br></td></tr></table><br>
<a name="238725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent, Peter. That's fixed it. My game isn't too frame rate dependent, so it't not going to matter than I'm losing a few milliseconds. It is important to have smooth mouse movement, though, and now I've got that.<br><br>Thanks again. <br><br></td></tr></table><br>
<a name="238853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) ENAY</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep. It's fill rate alright. Just make sure nothing gets really close to the camera. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
