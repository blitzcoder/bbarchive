<!DOCTYPE html><html lang="en" ><head ><title >Terrain Texture Layer question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Terrain Texture Layer question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Terrain Texture Layer question</a><br><br>
<a name="1089694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've looked all through the archives and forums and still can't get my head around multiple layers on terrains, e.g. to create paths.<br><br>I'm assuming:<br>height-map (doesn't count as a layer)<br>color texture (e.g. main grass texture)<br>path texture (cobbles stones or something)<br>alpha texture (to combine the two above)<br><br>Could someone please explain <br>(1) which layer each of those should go on, and <br>(2) what the appropriate texture filters or texture blends are for each. <br>Thanks. <br><br></td></tr></table><br>
<a name="1089697"></a>

<a name="1089698"></a>

<a name="1089699"></a>

<a name="1089700"></a>

<a name="1089701"></a>

<a name="1089702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's easier to understand splatting if you look at it by the 'tiling' aspect.<br><br>There is a difference in applying a stretching texture to a terrain (stretching it to map the entire terrain at once, looking blurry when viewed up close) and tiling it (several small copies of it are mapped continuously side by side in all directions, joining at the seams, looking like a single big high-detailed texture).<br><br>Terrain splatting (the technique for drawing your paths and different textures in the same surface) consists of applying pairs of textures. <br>These pairs are formed by a <b>tiling</b> texture (grass, dirt, sand), and a <b>stretching</b> texture that <i>masks</i> where the tiled texture will appear. <br>So they always come in two - one for coloring, the other for masking, with their respective tiling and stretching mappings.<br><br>The only problem with splatting is that you need to access the Direct3D texture combiner, a part of the D3D API. You can't do this with Blitz3D natively - if you search for 'texture splatting' posts under my name I think I've posted some links with resources (fastlibs for instance).<br>That part of the API does the following: "modulate the color of the tiling texture not with its own alpha, but with the alpha channel from the stretching texture right below it". <br><br>In more technical terms - understand 'stage' as in layer (quoted from the <a href="http://www.gamedev.net/page/resources/_//183/403/texture-splatting-in-direct3d-r2238" target="_blank">GameDev article</a>):<br><div class="quote"> <br>Stage 0 passes its alpha value up to stage 1. <br>Stage 1 uses that alpha value as its own and pairs it with its own color value.<br> <br></div><br>Since the stretching texture is stretched on the terrain covering it entirely at once, so is this alpha-channel. So while the color is coming from small, tiled textures, the alpha used to show or hide them is coming not from each tiled texture but from the big stretched texture, so you have one big alpha-channel to control where you want tiled textures to appear or not (with smooth variations if you wish so).<br><br>I hope this helps to understand it more. If you were looking for something more visual and not just textual, I can manage a few explanatory images (although plenty of external resources have them already).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Kryzon.  Nearly got it,  but not quite.<br>The 'path' texture would be tiled, to get the necessary 'cobblestone' detail. No problem.<br><br>Are you saying:<br>Stage 2 color texture (e.g. main grass texture)<br>Stage 1 path texture (cobbles stones or something)<br>Stage 0 alpha texture (to combine the two above)<br>???<br><br>(I'm aware that FastLibs can do this, but their examples always use an alpha'd PNG; and what I want to do is to build this into my own engine so that I can 'draw' onto the alpha texture, then save as a BMP; I don't know how to save as an alpha'd PNG.) <br><br></td></tr></table><br>
<a name="1089707"></a>

<a name="1089708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually when I say color I mean it's a full texture loaded with LoadTexture(), but just uses the color (flag '1'). It doesn't have alpha.<br>The alpha textures, on the other hand, only have alpha and don't need any color (no need to have color in something that won't use it).<br><br>This makes it:<br><br>Stage 0 - Grass texture [tiled]<br> <br>Stage 1 - Alpha texture [stretched]<br>Stage 2 - Cobble texture [tiled]<br><br>Stage 3 - Alpha texture [stretched]<br>Stage 4 - Sand texture [tiled]<br><br>[...]<br><br>Note the Grass texture layer zero doesn't need an alpha texture before it because it's the base texture I want to have for my terrain. If nothing is on top of the terrain, I want it to display a grass tiled texture.<br>All layers I want splatted - everything that covers small patches of terrain, like paths and hilltops - need an alpha-only texture before them so they are properly faded.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, and if you want to save transparent PNG's I'd advise using MarkCW's <a href="/codearcs.php?code=1732" target="_blank">FreeImage wrapper</a> for B3D.<br>Then using the GetPixelColor and SetPixelColor functions with the high-color bitmap used for painting, clone the color values but add the alpha channel and then save that as a PNG. <br><br></td></tr></table><br>
<a name="1089712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woo - got it Kryzon!<br><br>You've given me a great formula there.<br>I'll try it out tomorrow.<br><br>Thanks!<br><br>("clone the color values but add the alpha channel"<br>Err... I'll try to manage with BMP's. This is only for my own use.) <br><br></td></tr></table><br>
<a name="1089713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah (one minute later), another quick question:<br>Isn't the TextureBlend setting crucial and different for each one? <br><br></td></tr></table><br>
<a name="1089716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I've tried it with all possible TextureBlend settings, and it doesn't work.<br><br>Does this mean that we're back to your comment of "You can't do this with Blitz3D natively" and I have to use FastLibs? (which I've bought)<br>Which means I have to learn to save/load/manipulate alpha'd PNG's from within Blitz code &lt;sigh&gt;. <br><br></td></tr></table><br>
<a name="1089718"></a>

<a name="1089720"></a>

<a name="1089722"></a>

<a name="1089723"></a>

<a name="1089724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It hasn't been made explicit in the posts above but I think the assumption is that you use more than one terrain object. (<b>EDIT:</b> No, looks like I was way off. Whoops.)<br><br>Each terrain uses the same heightmap, and has one alpha texture and one material texture. By placing them all in the same place (possibly over a completely solid base layer), each one is only visible in the areas where that material should be. I presume this is why Kryzon broke up the list of textures into groups of two.<br><br>The biggest problem with this method is probably going to be Z-fighting (that's when the Z-buffer loses precision over a long distance and can't decide which polygon should be in front, so they flicker). The only reliable way I know of to get rid of Z-fighting is to either heavily limit draw distance or to use custom mesh terrains (the rules of Blitz meshes seem to be that polygons hand-placed in the same spot on the same mesh are drawn "in order", so in that case you can put the top layer in place last and it won't fight).<br><br>The other thing is that this is also not very efficient, involving a lot of overdraw (the part that "can't be done" is I think the classical method with only one mesh). It can definitely be done though, as there are plenty of screenshots of it floating around the forum, so don't give up!<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089721"></a>

<a name="1089725"></a>

<a name="1089727"></a>

<a name="1089728"></a>

<a name="1089729"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Does this mean that we're back to your comment of "You can't do this with Blitz3D natively" and I have to use FastLibs? (which I've bought)<br>Which means I have to learn to save/load/manipulate alpha'd PNG's from within Blitz code &lt;sigh&gt;. <br></div><br>FastEXT adds new blending modes to TextureBlend(). These blending modes are the ones that were left out from the original B3D set, and are the ones that are necessary to carry out this kind of blending.<br>You can see them in use in the "FastExt_Example_TextureBlends.bb" example.<br><br><div class="quote"> ("clone the color values but add the alpha channel"<br>Err... I'll try to manage with BMP's. This is only for my own use.) <br></div><br>If I'm not mistaken, you're trying to do a sort of an interactive way to paint the mask texture, right? I mean, paint directly in your terrain where you want a path to go, for instance - then save this as an image so it can be loaded back.<br>I think making this functionality from scratch doesn't compensate the hard work you'll have - especially when there are already-made alternatives like <a href="http://bit.ly/9X70CV" target="_blank">Blender 3D</a> (sorry for the Bit.LY link; these forums don't like broken down wiki links like the one it leads to - I hate hidden bit.ly urls).<br><br>A small workflow: paint your heightmap in your painting program, build it as a mesh in Blender (just temporarily for size), paint the mask textures in real-time using the Texture Paint feature and then export the painted textures as your mask textures. Sort them out and re-apply in Blitz3D.<br>Scribbla has done something like this in Modo - <a href="/posts.php?topic=89425#1015903" target="_blank">thread</a> (plenty of info there).<br><br>@Yasha: Yeah, I originally meant a single terrain, multitextured - the separating of layers in pairs was just to make it more clear that we need to think of each "flavor" of splatting texture (sand, dirt, rock) as a pair of tiling and masking textures. I hope I didn't confuse anyone else!<br>Extra meshes do have their use, however, especially if you want to use more layers than what the user's graphic card allows (like 2, 4 or 8).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the link.<br>I met Scribbla some time ago - really nice guy.<br><br>Very, very interesting thread - much to think about.<br>As you say, yes I really want to paint my paths in realtime, then save.<br>It might even be that two terrains (top one alpha'd) might be the way to go.<br><br>But finally we seem to have defined that Blitz _cannot_ do this in native mode, and the FastLibs author is a genius. <br><br></td></tr></table><br>
<a name="1089766"></a>

<a name="1089769"></a>

<a name="1089770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Terrain in blitz has a lot of issues, none the less the alpha blending will run into a lot of depth sorting issues with any real use, then theres issues with lighting (some layers won't light correctly).<br><br>I'm contemplating a system atm whereby drawing a high res terrain near the player (say 4x 1024x1024 textures) and splatting decals directly to them in 2D from an array in realtime, and another 1024x1024 texture for a low res distance terrain. Not sure if fastimage has the ability to blend alpha'd images into another image properly but would need that functionality - or failing that have to render the textures in 3D (fullbright) with quads for each decal, capture to a texture and render to the terrain.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> A quick summary:-<br><br>Native Blitz3D cannot do this.<br>'Insaner' is a fudge that uses a grass/rock combination layer (arithmetic difference, produced with PSP) which nevertheless still has bright yellow pixels punching through. Ok 10 years ago, but not now.<br><br>T.ed was my next hope (-even though I wanted to do this in my own engine), but seems unable to import my heightmap without stretching it 100 high. Available height settings seem to have no effect on the y-axis unless T.ed makes it.<br><br>L3DT was my next stop, and looked hopeful.<br>But when I import my 1024x1024 heightmap it always reduces the detail to an unacceptable level. My guess is that it _will_ import 1024x1024 but has an internal working resolution of 512x512.<br><br>Back to Fastlibs.<br>The TextureBlend example does exactly what it says on the tin.<br>Even though the demo shows multi-textured cubes, the point is proven, and I've managed 4 layers: 1 grass, then stone, cobbles and sand.<br>As long as the inbetween PNG is sound it really will do the job.<br><br>This is the sort of thing I did:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
grass=LoadTexture ("grass.jpg") : TextureBlend grass, FE_ALPHACURRENT
rockalpha=LoadTexture ("alphafx.png",1+2) : TextureBlend rockalpha, FE_ALPHAMODULATE
rock=LoadTexture ("rock.jpg") : TextureBlend rock, FE_ALPHACURRENT
clayalpha=LoadTexture ("alphayo.png",1+2) : TextureBlend clayalpha, FE_ALPHAMODULATE
clay=LoadTexture ("clay.jpg") : TextureBlend clay, FE_ALPHACURRENT
cobbalpha=LoadTexture ("alphafx.png",1+2) : TextureBlend cobbalpha, FE_ALPHAMODULATE
cobb=LoadTexture ("cobbles.jpg") : TextureBlend cobb, FE_ALPHACURRENT

cub6=CreateCube()
EntityTexture cub6,grass,0,0
EntityTexture cub6,rockalpha,0,1
EntityTexture cub6,rock,0,2
EntityTexture cub6,clayalpha,0,3
EntityTexture cub6,clay,0,4
EntityTexture cub6,cobbalpha,0,5
EntityTexture cub6,cobb,0,6
ScaleTexture cobbalpha,.4,.4
</textarea><br><br>Now all I have to do is search the forums to find a way to convert my (2D or 3D) path drawing into a PNG alpha layer. (-All!) <br><br></td></tr></table><br>
<a name="1089798"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Speaking of which:<br>"Then using the GetPixelColor and SetPixelColor functions with the high-color bitmap used for painting, clone the color values but add the alpha channel and then save that as a PNG."<br><br>Duh....<br>Kryzon - do you have an example? <br><br></td></tr></table><br>
<a name="1089802"></a>

<a name="1089803"></a>

<a name="1089804"></a>

<a name="1089805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not to put you off and theres probably more ways to go about it than I've thought of but having been down this road already - your going to run into a lot of issues, using alpha for paths is ok but quite limiting if your terrain is any decent size.<br><br>At the kind of resolution showin in my screenshot your either gonna run out of precision after more than about 0.25x0.25mile terrain or end up using a ton of memory.<br><br><a href="http://aten-hosted.com/images/road1.jpg" target="_blank">test1</a><br><br><a href="http://aten-hosted.com/images/roadtest2.jpg" target="_blank">test2</a><br><br>and even once you solve that and the alpha sorting images you will get random sorting issues if you use alpha blending for vegetation and then unless you use baked lightmaps you have all sorts of lighting issues where one or other layer won't be lit correctly.<br><br>There are work arounds but they are all ugly limiting hacks imo.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089808"></a>

<a name="1089809"></a>

<a name="1089812"></a>

<a name="1089813"></a>

<a name="1089817"></a>

<a name="1089818"></a>

<a name="1089892"></a>

<a name="1089899"></a>

<a name="1089903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good thing you posted the summary and code :)<br><br><div class="quote"> Speaking of which:<br>"Then using the GetPixelColor and SetPixelColor functions with the high-color bitmap used for painting, clone the color values but add the alpha channel and then save that as a PNG." <br></div><br>Yeah, about that. I don't have experience with FreeImage, but in a theoretical level I would know what to do.<br>You need to have your painted path as a Blitz3D texture or image, because you'll need to ReadPixelFast() from it. Do whatever you need to do to have it (perhaps you are already drawing to a texture or image, so you're halfway there).<br>I imagine this painted mask texture of yours is a <b>grayscale</b> image.<br><br>The FreeImage wrapper by markcw comes with some utilitary functions, such as a function to convert a Blitz3D image to a FreeImage one. <br>Here is a slightly modified version [by me] to convert your grayscale, painted path texture to a FreeImage image - it will take the grayscale information and write this as alpha in the FreeImage image. So your painted data becomes alpha (the color for this image is black, but it doesn't matter since you'll only use the alpha of this image later on when doing splatting).<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function FiSaveAlpha(texture, filename$)
 ;Reads a Blitz3D texture, converts to a FreeImage bitmap and saves it as a file.
 ;Returns True or False regarding the saving.

 Local pixel, width, height, dib, buffer, ix, iy

 If texture = 0 Then Return False ;No image
 pixel = CreateBank(4) ;Temp bank
 width = TextureWidth(texture)
 height = TextureHeight(texture)
 dib = FreeImage_Allocate(width, height, 32, $00ff0000, $0000ff00, $000000ff) ;32 bit image, for ARGB values. 24 bit only has RGB. The MASK parameters might need some testing.
 buffer = GraphicsBuffer()
 tempBuffer = TextureBuffer(texture)
 tempPixel% = 0

 LockBuffer(tempBuffer)
 For iy = 0 To height - 1
  For ix = 0 To width - 1
      tempPixel = ReadPixelFast(ix, iy, tempBuffer)             ;Read an Int value.
      PokeInt pixel, 0, ((tempPixel And $FF) Or $000000)        ;Poke Int value into bank.
      FreeImage_SetPixelColor(dib, ix, height - 1 - iy, pixel)  ;Send bank to wrapper 
   ;The above writes the Blue channel (could be Red or Green too, since it's grayscale) as an Alpha value. The new color will be A,0,0,0 (black color with a varying alpha value).
  Next
 Next
 UnlockBuffer(tempBuffer)

 SetBuffer buffer
 FreeBank pixel
 bool = FiSave(dib, filename$) ;Save FreeImage file. Make sure to use PNG format.
 FreeImage_Unload(dib)
 Return bool

End Function
</textarea><br>I haven't tested it. You need to have that <a href="/codearcs.php?code=1732" target="_blank">FreeImage wrapper</a> for it to work properly.<br><br>After using this function you can load 'filename$' as a texture with alpha channel and it should come with alpha information for you to use as a mask.<br><br>EDIT: Changed the code a bit.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> FreeImage_SetPixelColor(dib, ix, height - 1 - iy, (pixel And $FF) Or ($000000) <br>;The above writes the Blue channel (could be Red or Green too, since it's grayscale) as an Alpha value. The new color will be A,0,0,0 (black color with a varying alpha value).<br><br>/\ That appears to be what I need. Thanks, Kryzon.<br><br>I can see I still have a lot of work to do:<br>-Point at the terrain, get position.<br>-Equivalent memory drawing to texture.<br>-Save texture with correct values through FreeImage.<br>-Load it back in.<br>(Hah! I just remembered a problem: If I load back in the same named file, DX will ignore it ('already got that one') so the saved/loaded texture will have to have an incremented filename for each save/load.<br><br>Thanks guys, for all the help! <br><br></td></tr></table><br>
<a name="1089858"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kryzon,<br><br>Wrapper and dll in place. Code compiles and runs.<br>I'm feeding a Blitx texture handle to your code, then<br><br>Memory Access Error on:<br>FreeImage_SetPixelColor(dib, ix, height - 1 - iy, (pixel And $FF) Or ($000000)) <br><br>(The rest of the code appears to have good variables.)<br>Any ideas? <br><br></td></tr></table><br>
<a name="1089866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another little test:<br><br>I load a texture (don't edit it), then send it straight out through FiSaveAlpha(texture, filename$), and Paint Shop Pro tells me 'The specified file cannot be identified as a supported type.'<br><br>Duh? <br><br></td></tr></table><br>
<a name="1089890"></a>

<a name="1089891"></a>

<a name="1089893"></a>

<a name="1089894"></a>

<a name="1089895"></a>

<a name="1089896"></a>

<a name="1089897"></a>

<a name="1089898"></a>

<a name="1089900"></a>

<a name="1089901"></a>

<a name="1089902"></a>

<a name="1089904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you running in debug mode? is that all it says?<br><br>Oops. Noticed the error. I was considering 'pixel' as an <b>integer</b> value, when it's actually a bank - can you see the same error?<br><br>So replace the inner pixel-writing part with this:<br><pre class=code>
Local tempPixel%

LockBuffer [...]
For [...]
   For [...]
      tempPixel = ReadPixelFast(ix, iy, tempBuffer)             ;Read an Int value.
      PokeInt pixel, 0, ((tempPixel And $FF) Or $000000)        ;Poke Int value into bank.
      FreeImage_SetPixelColor(dib, ix, height - 1 - iy, pixel)  ;Send bank to wrapper.
   Next
Next
UnlockBuffer [...]
</pre><br><br>An additional thing. Did you notice I edited the code in my post above and changed the color masks? take a look:<br><pre class=code>
dib = FreeImage_Allocate(width, height, 32, $00ff0000, $0000ff00, $000000ff) ;The way I think it should be, a full 32 bit value for each.
</pre>Make sure you replaced the original line with this too. <br><br>In any case, I'll edit the original FiSaveAlpha function with these.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kryzon,<br><br>FreeImage_SetPixelColor(dib, ix, height - 1 - iy, pixel)<br>Gives runtime error "User lib function not found"<br><br>And yet<br>FreeImage_SetPixelColor%(dib,x,y,value*):"_FreeImage_SetPixelColor@16"<br>is in the decls.<br><br>Again - any ideas?? <br><br></td></tr></table><br>
<a name="1089916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried a much later version of the dll, 2007.<br>Still the same error. <br><br></td></tr></table><br>
<a name="1089917"></a>

<a name="1089918"></a>

<a name="1089921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the keyword being highlighted? I don't see any other errors; I guess it's not on my end. <br>I've dependency-walked the most up to date DLL and didn't seem to find different function names, so it should work.<br><br>Are you sure you have everything userlibbed correctly? placing the .decls and DLL both in the userlibs folder, and the Freeimage.bb Include in your code?<br>If you're running the executable build of your code make sure you have the DLL in the same folder as the .EXE, or at least in your System32 directory (it's worth placing the DLL in this folder even if you're running directly from the IDE).<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's already executed FreeImage_Allocate before it hits the problem.<br>Is your dll later that 3, 9, 3, 0 (2007)? <br><br></td></tr></table><br>
<a name="1089933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW, if I comment out the FreeImage_SetPixelColor line then<br>bool = FiSave(dib, filename$) also executes just fine.<br>And PSP loads the resulting blank PNG too.<br><br>I wonder if I could just use<br>WritePixel x,y,argb,[buffer] command<br>and copy the blue to the alpha byte.<br>- Maybe work on that tomorrow.<br>(If I can remember/work out how to shift the values!) <br><br></td></tr></table><br>
<a name="1089934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it's the latest build (3.15). I don't know what the problem is. <br><br></td></tr></table><br>
<a name="1089940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does this look:<br><br>rgb=ReadPixelFast(x,y) And $FFFFFF<br>b = rgb And $FF<br>a = b shl 24<br>argb = a + rgb<br>WritePixelFast(x,y,argb)<br><br>...but is a dib the same as a texture buffer? (-for the bool = FiSave(dib, filename$) line)<br><br>Must go to bed now... brain won't stop! <br><br></td></tr></table><br>
<a name="1089942"></a>

<a name="1089943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you should try another way. The original FiSaveImage() function by markcw uses the same SetPixelColor (and that is presumably tested a lot by himself and others), so it should be finding the function in the first place.<br><br>I know. Test the original FiSaveImage() function present in FreeImage.bb (try it out with any random image you have). <br>If that doesn't work as well, it's the communication between DECLS -&gt; DLL rather than anything in our code.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1089967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't worry, as I said above<br><br>bool = FiSave(dib, filename$) also executes just fine.<br>And PSP loads the resulting blank PNG too.<br><br>But I've noticed that<br><br>FiSaveImage(image, filename$)<br><br>converts an image to a dib then saves as normal, so that's the next test. <br><br></td></tr></table><br>
<a name="1089970"></a>

<a name="1089971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got it:<br>The original freeimage.decls from <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1732" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1732</a> had multiple .lib "..." lines that had not been commented out, so Blitz was getting confused as to where the dll lived - but only for certain calls!<br><br>I have now correctly saved a PNG with alterations that loads into PSP. - Yeehah.  Now to refine it.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1090031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, did you try this?<br><br><a href="/codearcs.php?code=2620" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2620</a> <br><br></td></tr></table><br>
<a name="1090049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> (Krischan, I did have a look but it seems to use multiple meshes. What I wanted was a process that I could add to my existing terrain code.)<br><br>Having spent the last 24 hours (re)learning bitwise operations, and having copied the blue bytes to alphas, I still got no good results.<br><br>So I cut my code right down, so it simply (a) loaded a PNG (which was previously tested as working well with FastLibs multitexturing) and (b) immediately saved it using FastImage.<br><br>Low and behold, the resulting PNG (1) could NOT be used with FastLibs (no filtering or 'splatting' produced, and (2) when loaded into PSP displayed as having no transparent layer.<br>I could of course use PSP's save &gt; Optimise Wizard to set the transparent layer.... but that's the point - one was NOT set within the PNG that FastImage had produced.<br>Even when I 'forced' the top fourth alpha byte layer - just in case Blitz had got rid of it in LoadImage - the result was the same<br><br>Conclusion: FastImage does not produce FastLibs-compatible PNG's. A fourth alpha-layer, yes, but without the alpha 'marker' (that PSP adds) is unusable with FastLibs.<br><br>I would love someone to prove me wrong, I really would.<br>I don't mind if someone says, "You prat, you missed....."<br><br>Well, I seem to have two of the leaders in this field, Krischan and Kryzon, reading this thread, and guys I really appreaciate your feedback. <br><br></td></tr></table><br>
<a name="1090059"></a>

<a name="1090060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a white texture with either alpha or masking enabled (flag 2 or 4) on the first texture layer, and you have a non-transparent texture on the second layer, you can use "EntityFX terrain, 2" to apply alpha from tex1 onto tex2.<br>This code uses 2 terrains:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 640,480,0,2
SetBuffer BackBuffer()
Flip
Text 320, 240, "Generating textures..", 1, 1
Flip

CreateLight()

CreateHeightmap()
CreatePathImage()
CreateGrassImage()
CreateStoneImage()

camera=CreateCamera()
PositionEntity camera,0,35,-15
CameraClsColor camera, 110, 127, 160

;Load terrains
terrain1=LoadTerrain( "hmap.bmp")
terrain2=LoadTerrain( "hmap.bmp")

;Texture terrain 1
grass=LoadTexture( "grass.bmp" )
ScaleTexture grass, 64, 64
EntityTexture terrain1, grass

;Texture terrain 2
path=LoadTexture( "path.bmp", 4 )
stone=LoadTexture( "stone.bmp" )
ScaleTexture path, 512, 512
ScaleTexture stone, 10, 10
EntityTexture terrain2, path
EntityTexture terrain2, stone, 0, 1

;Enable alpha blending
EntityFX terrain2, 2

;Scale terrain
ScaleEntity terrain1,1,30,1
ScaleEntity terrain2,1,30,1

While Not KeyDown( 1 )

	If KeyDown( 205 )=True Then TurnEntity camera,0,-1,0
	If KeyDown( 203 )=True Then TurnEntity camera,0,1,0
	If KeyDown( 208 )=True Then MoveEntity camera,0,0,-1
	If KeyDown( 200 )=True Then MoveEntity camera,0,0,1

	RenderWorld
	Flip

Wend

End


Function CreateHeightmap()

	im=CreateImage(512,512)
	buffer=ImageBuffer(im)
	LockBuffer buffer
	For x=0 To 511
	For y=0 To 511
		h = (Cos(x+y/90.0)*Sin(x/90.0+y)*126+127)
		WritePixelFast x,y,h+h Shl 8+h Shl 16,buffer
	Next
	Next
	UnlockBuffer buffer
	SaveImage im, "hmap.bmp"
	
End Function

Function CreatePathImage()

	Color 0,0,0 
	Rect 0, 0, 512, 512
	
	Color 255,255,255
	For i = 0 To 1400
		x = Cos(i) * i * 256 / 1400 + 128
		y = Sin(i) * i * 256 / 1400 + 128
		Oval x-5,y-5,11,11
	Next
	
	im = CreateImage(256, 256)
	GrabImage im, 0, 0
	SaveImage im, "path.bmp"	
		
End Function

Function CreateGrassImage()

	im=CreateImage(512,512)
	buffer=ImageBuffer(im)
	LockBuffer buffer
	For x=0 To 511
	For y=0 To 511		
		h=Rand(64,128)
		WritePixelFast x,y,h Shl 8,buffer
	Next
	Next
	UnlockBuffer buffer
	SaveImage im, "grass.bmp"

End Function

Function CreateStoneImage()
	
	Color 70,70,70
	Rect 0, 0, 256, 256
	For i = 0 To 500
		c=Rand(80, 160)
		Color c,c,c
		Oval Rand(256)-5,Rand(256)-5,11,11
	Next
		
	im = CreateImage(256,256)
	GrabImage im, 0, 0
	SaveImage im, "stone.bmp"
	Color 255,255,255
	
End Function
</textarea><br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1090066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this: <a href="http://blitzbasic.com/codearcs/codearcs.php?code=1" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1</a><br><br>But change this:<br><pre class=code>
WriteInt f,ReadPixel(x,y,tbuffer)
</pre>To this:<br><pre class=code>
col = ReadPixel(x,y,tbuffer)
WriteInt f,((col And $FF) Or $000000) ;Outputs BLUE as alpha and hardcodes RGB as BLACK.
</pre>TGA's use alpha as well. Many triple-A games use it. Blitz3D can load them. <br><br></td></tr></table><br>
<a name="1090068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kryzon thank, but Fastlibs only accepts PNGs as masks for texture layering.<br><br>Warner, thank you.<br><br>Despite the fact that I said that I only wanted to use 1 terrain, yours has to be one of the simplest and most interesting solutions to this problem that I've come across.<br><br>It really does the job, and does away with the need for FastLibs or FastImage.<br><br>Can you explain why terrain 1 allows terrain 2 to be visible?<br>Is there some interaction that I'm not understanding? <br><br></td></tr></table><br>
<a name="1090082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, my <a href="http://www.christianhart.de/bb/texturesplatting/texturesplatting2.zip" target="_blank">second Version</a> only uses a single mesh. This was the best try I could get out of B3D (beside the third version with a normal map to increase detail / vertex lighting). <br><br></td></tr></table><br>
<a name="1090123"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is there some interaction that I'm not understanding? <br></div><br>I don't think there is any more interaction that this: terrain1 is rendered first, without alpha, so it writes to the z-buffer. Terrain2 is rendered on top of it, with alpha, without writing to the z-buffer.<br>What the example mainly shows is, that if you use EntityFX 2(use vertex colors) somehow the alpha information of the first texture layer is combined with the color information of the second texture layer. <br>I don't know why it does that, it might be an undocumented side effect. <br><br></td></tr></table><br>
<a name="1090247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> My thoughts on Warner's demo:<br>From what I can see, both terrains are writing to the Z-Buffer. The only way this would be otherwise is if you would change the EntityOrder (as it disables Z-Buffer writing for the mesh).<br>The EntityFX 2 implies no difference (such that you can comment that line and still have the same effect).<br>The decaling effect I believe it's due to the masked texture being <b>in the first layer</b> (zero). If you move all textures of Terrain2 by one index (meaning, the path texture in layer 1 and the rock texture in layer 2), the effect doesn't work anymore.<br>I guess this works in layer zero because the masking is not only hiding the texture but also the underlying mesh, which leaves completely transparent areas. So if you used a texture with an alpha channel and loaded with flag "2" and placed it in layer zero, it should give smooth transitions which is nice to have available.<br><br>My thoughts on Krischan's demo:<br>I don't agree that it uses a single mesh: from what I can see it's using multiple surfaces (to be a single mesh it would need to be rendered 'in a single draw-call', and each surface requires a different one, even if they belong to the same Mesh entity). It works, however, and shows no flickering at all.<br>I guess the biggest problem is that by manually building terrain meshes you lose Blitz3D's native terrain LOD feature (fly through a blitz3D terrain and turn on wireframe to see it in action: it always keeps the foreground with more polygons\detail than the background). <br>You would have to split it in a chunk hierarchy so it behaves similarly to quadtree culling to make it efficient for production uses.<br><br>Both demos do not suffer from z-fighting\flimmering\flickering, so they're also both viable paths to go.<br>If I were dealing with a shader-capable engine I'd go with texture splatting, because you could store different alpha maps in each color of a single "path" texture, and treat each one differently with the pixel shader.<br><br>@John: how do you know fastEXT only accepts PNG's for that FE_MODULATE blending? <br><br></td></tr></table><br>
<a name="1090305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right. I was confused. On a sidenote: if you use an alpha texture instead of the masked one, the blending doesn't seem to work. It messes up z-ordering. <br><br></td></tr></table><br>
<a name="1090332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is probably not at all related, but I ohope it can be useful, sorry if it's way too 'noobish' for the topic - I'm slowly getting to grips with a lot of this stuff, as I want to do some nice mutltexturing to terrain meshes too.<br><br>There seems to be differences to the ordering of RGBa or aRGB depending on file formats and whether working with DX or other libs. Some use Alpha as the high byte, others as the low.<br>Typically, with heightmaps and BliitzTerrains, Blitz apparently uses the red channel as the height, though I am not sure whether this takes into account whether Red is the Low byte (RGBa).<br>Just something that may be of interest??? <br><br></td></tr></table><br>
<a name="1090386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> if you use an alpha texture instead of the masked one, the blending doesn't seem to work. It messes up z-ordering. <br></div><br>Hmm, now I'm confused... strange that masking is the only flag that gives that decaling effect. Must be because of Alpha Test, I wouldn't know. <br><br></td></tr></table><br>
<a name="1090719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice: I'm pretty sure Blitz uses the red channel for a heightmap, so in that sense it doesn't matter if it's grey or coloured; it's just that it's easier to design with when it's shades of grey.<br><br>Kryzon: "how do you know fastEXT only accepts PNG's for that FE_MODULATE blending?"<br>I have done many tests with different formats and file types (-hoping to manually save my path-drawing efforts out of my engine via FreeImage).<br>Only PNGs with an alpha channel work (though TGA's might too).<br>PNG's saved by FreeImage do NOT work. <br>PNGs saved by Paint Shop Pro (and probably others) do work, if they have an alpha channel set, not just an 'alpha-colour'.<br>So it just means I have to design my paths as a PSP 'layer' that can be saved separately. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
