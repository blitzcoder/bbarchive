<!DOCTYPE html><html lang="en" ><head ><title >The fastest ShadowSystem - underwater simulation?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >The fastest ShadowSystem - underwater simulation?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >The fastest ShadowSystem - underwater simulation?</a><br><br>
<a name="707676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Which *fast* shadow system should I use for an underwater simulation?<br>Need blurred shadows, so I cannot use stencil.(?)<br>thx <br><br></td></tr></table><br>
<a name="707681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you've really only got SSwift's left then, haven't you? All the others are stencils, I think. I like SSwift's system anyway, it's what I used in Bowling Babes, and I think the shadows in that look great. I'd like to see a stencil shadow system cope with casting shadows from a 4,000 poly character. <br><br></td></tr></table><br>
<a name="707707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Andreymans stencil shadow system casting from 10K mesh..thats limit per object.. <br><br></td></tr></table><br>
<a name="707721"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> For the caster or receiver?<br>10000 poly is nearly the max you can cast at all within a scene. So 2 of that max and you are at bottom speed for your app.<br><br>Its not the amount but the speed and output result that counts and if stencil isn't a possibility there (thought DDS might come up with some smoother shadows if you look at thread 2 of it) then sswifts or one of the "blobby drop shadows" from code archive might be the right way. (depends on your object if a simplified fake shadow casting a la command &amp; conquer etc is enough) <br><br></td></tr></table><br>
<a name="707783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Andreymans stencil shadow system casting from 10K mesh..thats limit per object.. <br></div><br>And he already said he didn't want stencils because they're hard edged. <br><br></td></tr></table><br>
<a name="707802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> for an underwater simulation, you don't need a shadow system! you mean the wave reflevtion on the ground, right? there was someting in the code archives a certain time ago... you do it as follows: you make a copy of the terrain offseted by .1 on the y axis, and texture it with the wave-reflection-texture.<br>btw: swfits shadow system wouldn't do that....<br><br><div class="quote"> I'd like to see a stencil shadow system cope with casting shadows from a 4,000 poly character <br></div><br>my shadow system casts 10.000 polygons by 60 fps. quite fast :) <br><br></td></tr></table><br>
<a name="707810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> my shadow system casts 10.000 polygons by 60 fps. quite fast :)  <br></div><br>That's kind of meaningless without knowing whether you're casting from a static object or an animated mesh, what else is going on in the scene and what hardware you're talking about.<br><br>If that's a 10,000 poly mesh with skeletal animation, and there's a whole complex scene and physics going on in the background, and it's running on something like Geforce FX or Radeon 9x00 series, it's not bad. Still slower than SSwift's system, I suspect, but not bad at all.<br><br>Is it? <br><br></td></tr></table><br>
<a name="707815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> oooh..harsh words gab :p ;)<br> -i have no doubt that swifts system is quite<br>fast...but i wouldnt assume his system is faster than anyone<br>elses..and as for the "my shadow system casts 10.000 polygons by 60 fps. quite fast :)"<br><br>lol...i bet your brain cluster that it doesnt run at 60fps on my<br>system ;) <br><br></td></tr></table><br>
<a name="707825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 10k poly is no information. I can have 600k polygons casting nice smooth shadow with no FPS drop at all. You know, as no information is given, I simply assume static data and let Gile[s] do the job :P<br>(sswift shadow system allows static shadows as well btw which gives it a very nice speed boost. Great thing for shadows that are casted by a very slowly moving sun or the like :) ) <br><br></td></tr></table><br>
<a name="707842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but i wouldnt assume his system is faster than anyone<br>elses <br></div><br>Indeed, and I'm not. I'm not even assuming it's faster than any stencil system, but I do have my doubts, because stencil shadows get disproportionately slower when you used animated meshes and high polycounts, whereas texturemap shadows don't. It's just a texture, it doesn't care. Yes, it has to render the object, but it doesn't have all those moving vertices to extrude and calculate.<br><br>And also because Devil's Child very carefully took a quote where I was referring to animated meshes and made no mention of animated meshes in his reply, which made my suspicious little brain think he was trying to hint that it included animated meshes but it probably didn't.<br><br>EDIT: In fact I've since noticed that his shadow system doesn't support animated entities at all, so he was giving a completely false impression when he quoted my remark about animated entities. <br><br></td></tr></table><br>
<a name="707866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> fair point..but your still ugly ;) <br><br></td></tr></table><br>
<a name="707872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> :)) LOL <br><br></td></tr></table><br>
<a name="707887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need shadows for the creatures, divers and maybe plants. They are b3d animated. The light is fixed.<br>However I need much compatibility, and stencil buffer is not supported by all 3d cards :\<br>So the best system is the one of Sswift? <br><br></td></tr></table><br>
<a name="707924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> fair point..but your still ugly ;) <br></div><br>Quite possibly, but it didn't seem to bother your sister ;)<br><br>POINT OF NOTICE: No one should take either Def or me seriously ;) ( nor take any notice of my shocking grammar which I have since corrected :P )<br><br><div class="quote"> So the best system is the one of Sswift?  <br></div><br>I don't think there are any robust and compatible shadow systems that don't use stencils apart from SSwift's, so his would almost win by default. But as I said, his IS good, and not only does it already have an option to blur the shadows ( quite fast too, I used to be able to shadow four 1250 poly animated characters with blurred soft shadows on a 9700 Pro at  well over 60 fps! And that's a proper game with AI, physics, a complex scene, lots of other stuff going on, not just a tech demo! ) it also has a lot of little settings you can change to tweak everything to your satisfaction. But don't take my word for it. Try his demos. <br><br></td></tr></table><br>
<a name="707963"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just be aware that you have to split up your levels if you want to get the best performance out of my system.  Otherwise the system has to consider thousands of polygons a frame and can't discard large batches of them quickly.<br><br>Ie, if you have an underwater scene, with light casting down, then you'd want to break your ocean floor into a grid of entities.  Of course you'd want to do that anyway for speed, but you really need to do it if you're casting shadows unless your ocean floor in its entirety is like 10K polys. <br><br></td></tr></table><br>
<a name="707970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using mushclustering+ routine found in the code archive for the whole ground that is a b3d (11k tris) non animated mesh file.<br>I have the second uv mapping channel coordinates used by caustics texture, therefore I don't have any available uv mapping coords channel.(0 and 1 used)<br>Is it a problem for sswift system? <br><br></td></tr></table><br>
<a name="707975"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> tried the demo and had a problem with 512 sized textures. What's wrong?<br>Ati9800Pro Winxpsp2 dx9c<br><img src="http://www.dokroton.com/public/sswift512.jpg"> <br><br></td></tr></table><br>
<a name="707983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OJay</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> your shadow resolution must always be smaller than or equal to your screen resolution!<br><br>your screenshot above looks like a screen res of 640x480 =&gt; 480 &lt; 512 = bad.<br><br>the reason is the copyrect-command since it can only grab an image from the visible buffer...of course it would be easy to replace copyrect by e.g. toms render2texture() function, but that would require the use of an extra dll! <br><br></td></tr></table><br>
<a name="707994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I'm using mushclustering+ routine found in the code archive for the whole ground that is a b3d (11k tris) non animated mesh file."<br><br><br>You'll have to give me a link to this routine.  What does it do?<br><br>11k tris probably isn't too bad.  Probably depends on how many shadows you want to cast.  Other than that I couldn't say, I don't have any way to predict how well the system will perform for any particular situation, because there's too many variables to consider, like how the polygons are laid out in the mesh, how fast your cpu and video card are, what you consider an acceptable framerate, whether you use blurred shadows, how many shadows you need, how high of res you need them to be, whether the objects casting the shadows are animated or not, and how you tweak the settings in the system to optimize things.<br><br>There's simply too many variables to say for sure.<br><br><br>"I have the second uv mapping channel coordinates used by caustics texture, therefore I don't have any available uv mapping coords channel.(0 and 1 used)  Is it a problem for sswift system?"<br><br>My system creates new polygons, it does not modify your pre-exisitng models.  So the number of texture channels you use or how you use them doesn't matter. <br><br></td></tr></table><br>
<a name="708005"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> The screenshot is taken at 1024x768 (it's photoshop resized).Yes the Blitz window is at 640x480 :)<br>The clustering routine is <a href="http://www.blitzbasic.co.nz/codearcs/codearcs.php?code=1343" target="_blank">THIS</a><br>p.s. How many tris in the scene from the sswift system demo zip file?<br>The ground, the objs etc... <br><br></td></tr></table><br>
<a name="708014"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, well that function sounds convenient.  If it works on levels then using that would help you get more speed out of my system.<br><br>I don't remember how many polygons are in the demo level, but it doesn't really matter because the speed depends not just on how many polygons there are, but how they're distributed.  That sphere in the middle I think has a ton of polygons, while the ones on the pedastals have a moderate number but I may not have set those to receive shadows at all, I forget.  The Beethoven model has like 20-50K polys, I forget... but it's not receiving shadows so that doesn't make much difference.  And the ground and the pedastals don't have a ton of polygons. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
