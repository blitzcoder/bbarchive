<!DOCTYPE html><html lang="en" ><head ><title >Entity cursor following</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Entity cursor following</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Entity cursor following</a><br><br>
<a name="244969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've got this idea - which I'm sure wont work anyway, but here's the pitch.<br><br>I'm working on an ISO game, that doesnt have a fixed camera - instead you can zoom round and in &amp; out. (bit like the insidey bits of commando 2)<br><br>Thats all sorted, but I want to control my main character by pointing the way with the mouse on screen.<br><br>I cant use some of these fancy 2d projection functions that already exist, cos the camera and axis wont be fixed.<br><br>My idea is to find the 2d coords of the object, compare them with the mouse coords. With that info, hopefully find the amount of rotation required around the Y axis of my character to point it in the right direction. Doesnt matter where the Z or X of entity are, just as long as I can rotate to the same direction as to where the mouse is pointing.<br><br>I've got the 2d coords of my entity, and the mouse coords. But I think I need some 'TRIG' to work out the angle of one to the other to give me a rotation value. (dont want to use pivots, rather keep it maths based as the camera moves about too much)<br><br>Any advice/help please Guys !<br>Thanks. <br><br></td></tr></table><br>
<a name="245022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have a look at the ATan2 function in the online docs. I think this maybe what you're after. <br><br></td></tr></table><br>
<a name="245030"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The easiest way, would be to use a pivot, use camerapick to click on the ground, and then just have the guy pointentity to the pivot. <br><br></td></tr></table><br>
<a name="245317"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would also know how to do this i tried the pivot method and the camera just spins around the block realy fast :)<br>so any ideas???<br><br>Thanks<br>GIMPY :) <br><br></td></tr></table><br>
<a name="246285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this PaulJG<br><br>u will need a bitmap for the ground<br><br>Graphics3D 800,600,16,1<br>SetBuffer BackBuffer()<br><br>light=CreateLight()<br><br>Collisions 3,2,2,2<br><br>Global pointer = CreateSphere()<br>ScaleEntity pointer,.5,.5,.5<br>EntityColor pointer,0,256,0<br>EntityType pointer,2<br><br>Global cube=CreateCube()<br>EntityRadius cube,2,2<br>EntityType cube,3<br><br>Global cam=CreateCamera(pointer)<br>CameraRange cam,.1,1000<br>TurnEntity cam,0,0,0<br>RotateEntity cam,45,0,0<br>EntityType cam,2<br>PositionEntity cam,0,80,-80<br><br>pl=CreatePlane()<br>tex=LoadTexture("grass3.bmp")<br>ScaleTexture tex,64,64<br>EntityTexture pl,tex<br>EntityOrder pl,1<br>EntityFX pl,1<br>EntityType pl,1<br>EntityPickMode pl,2<br>ScaleEntity pl,1,1,1<br><br>While Not KeyDown(1)<br>	<br>	<br>	<br>	If MouseDown(1)=True <br>		<br>		picked=CameraPick(cam,MouseX(),MouseY())<br>	<br>		PositionEntity pointer,PickedX(),0,PickedZ()	<br>		<br>		MoveEntity cube,0,0,pz+1<br>		<br>		<br>	EndIf<br>	<br>	movebloke()<br>	<br>	UpdateWorld<br>	RenderWorld<br><br>	<br>	Flip<br><br>Wend<br><br>End<br><br>Function movebloke()<br>	<br>	mx#=MouseXSpeed()*0.2<br>	my#=-MouseYSpeed()*0.2<br>	<br>	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>	MoveEntity pointer,mx,0,my<br>	<br>	PointEntity cube,pointer<br>	<br>End Function<br><br><br>Thanks<br><br>GIMPY ;) <br><br></td></tr></table><br>
<a name="246469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Gimpy, I sorta got there in the end - but my solution is somewhat different to yours.. (based on the guys recommendations above) :)<br><br>When you use the pointentity command it points all directions to the curor position, (which is no good when my man was jumping, he would face the ground) - so I got around it, by calculating the angle between the object and the cursor using ATAN2 and then physically rotating the object around the Y. That way I can keep the X and Z the same. :) <br><br></td></tr></table><br>
<a name="246470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice 1 PaulJG glad u got it sorted :)<br><br>i think ill have a play about with the ATAN2 function cos i noticed wot u just said about the entity pointing down when it jumps up <br><br>Thanks<br>GIMPY :) <br><br></td></tr></table><br>
<a name="246472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> an on a mo.. I'll post up some of my code <br><br></td></tr></table><br>
<a name="246474"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PaulJG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> CameraPick(camera,MouseX(),MouseY())<br>PositionEntity cameramarkerpivot,PickedX#(),PickedY#(),PickedZ#()<br><br>x1#=PickedX#()-EntityX(manpivot)<br>y1#=PickedZ#()-EntityZ(manpivot)<br><br>ang=(180+(ATan2(y1#,x1#)))<br><br>PositionEntity cursormarker,PickedX#(),PickedY#(),PickedZ#()<br>RotateEntity manpivot,0,ang,0<br><br>Maybe that'll help. ;) <br><br></td></tr></table><br>
<a name="246481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks m8 ill give it a try:)<br><br><br>Thanks<br>GIMPY :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
