<!DOCTYPE html><html lang="en" ><head ><title >Occlude Big Mesh Parts</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Occlude Big Mesh Parts</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Occlude Big Mesh Parts</a><br><br>
<a name="534240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, i have been testing the auto hide system that B3D has. All of us know that if you load several objects, those behind the camera are not rendered.<br><br>Then i tried to make two separate spheres in only one mesh in 3dsmax. Then export it to .b3d with b3d pipeline. I thought that if i rotate the mesh so only one sphere is in front the camera, only that should be rendered, but don't. If one is rendered, then the whole mesh is rendered.<br><br>This, for creating big maps is very undesirable. The only solution should be to export "one by one" every separate mesh. ( i am not that crazy).<br><br>What is the solution then?<br><br>EDITED: LoadAnimMesh seems to do the job... <br><br></td></tr></table><br>
<a name="534245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> break up the levels in to smaller peaces... basically i had the same problem, I got around it by just using an array (uses lots of ram though)<br><br>imagine a cube, and your in the middle of that cube, the sector your in has 1 room, you show that where as you wont need to show the others around you as you move around the cube space the world hides and shows the objects closest to you in that cube<br><br>dim worldcube(255,255,255) holds the point to each mesh<br>this takes time to do though, but the result is a very fast level (only use alpha 0 and alpha 1 for hiding a showing cos this is faster AND objects on the other "cubes" will still need to check their positions and posible collisions<br><br><br>PHEW! i hope this helps? <br><br></td></tr></table><br>
<a name="534246"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, when loading using animmesh i get a surface occlusion system, which is very good. But i have 2 questions:<br><br>- How can i apply a lightmap when loading with animmesh? (i think i can't, perhaps with prerrendered textures...)<br><br>- Any other slowdown or problem relative to loadanimmesh? <br><br></td></tr></table><br>
<a name="534251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have to do linepicks to all children etc. You need to use recursive access for all kinds of mesh commands (see my code snippet in the archive about how to use EntityAlpha etc. with animated Meshes). I'd suggest to put all children, no matter what generation, into a simple 2 dimensional array container, so you don't have to call recursive stuff to check linepicks on the map geometry, instead simply go trough an array (or type list).<br><br>I still have a plan to write a VIS compiler, using the clusterize Code I wrote some time ago (archives too). But I still need to make it work with all kinds of mesh attributes, like alpha textured parts etc. If somebody would help me to make it capable of clusterizing ANY mesh correctly, I would implement a new version of my ICU VIS Compiler for just this Map Clusterizer. It would be much more efficient since it would hide all clusters that cannot be seen from the players current cluster, not only the ones behind the camera. Huge Levels would be possible. <br><br></td></tr></table><br>
<a name="534252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> The mesh has 15.000 polys, and when loaded with loadanimmesh only 2000 are drawn at a time! This is a gain of 5ms of execution when calling renderworld, what it amazing!<br><br>I don't need too much access to those sub-meshes. They are for the map. Although i was using linepick for the lens flare effect.<br><br>Then the most important question, what about lightmapping the level?. Can i use gile[s] (i have bought a license)?. <br><br></td></tr></table><br>
<a name="534254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> AFAIK Giles Meshes handle both, LoadMEsh and LoadAnimMesh correctly. If you assign a lightmap manually, you may have to assign it to all children, recursively, as I explained before. Make sure to assign them only to Mesh Children, not to EG. Pivot Children. What you basicly have is Camera Range Culling and Fustrum Culling.<br><br>But how about to load a Level with 400'000 Tris and have full 60 FPS? It's possible with true Occlusion. (Tho there's a 16 Bit max of tris and vertices for each surface / child) <br><br></td></tr></table><br>
<a name="534259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks jfk.<br><br>I know that i am doing culling. But how to do true occlusion? I have seen your code, but i think is not working 100%?.<br><br>Anyway my main problem is i have 200 256x256 textures, so not drawing 10.000 polys gives me a very big speed increase!.<br><br>This are really good news because my Full racing game with ode, lens flare, multiplayer, and full map of my country is running at 100 FPS! (too much optimizations, hehe) <br><br></td></tr></table><br>
<a name="534302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hold on, before you guys get to discussing culling (which always gives me a headache), can I just understand - are you saying that a large mesh, such as a mesh terrain is automatically culled by Blitz if it is loaded with LoadAnimMesh()? <br><br></td></tr></table><br>
<a name="534307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well not exactly, John. I have a large map, created from lot of cubes, spheres, etc... <br><br>Then If you export it without creating one only big mesh (joining all the meshes), then blitz makes the culling when loaded with loadanimmesh, which is great!. <br><br></td></tr></table><br>
<a name="534314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are using linepick, use a lower poly mesh, rendering with alpha = 0 for the linepicks and collsions. It will be faster :o) <br><br></td></tr></table><br>
<a name="534315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, i thought to create some kind of bounding box for the map. Thanks for the tip! <br><br></td></tr></table><br>
<a name="534328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> anyone tried the occluder obscurer part of the b3d pipeline extensions? havent gotten round to using them yet myself, and was just curious as to how well it worked? <br><br></td></tr></table><br>
<a name="534698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "If you export it without creating one only big mesh (joining all the meshes), then blitz makes the culling when loaded with loadanimmesh,"<br><br>Don't understand this.<br>How can you export without first using Addmesh on all the individual meshes? - Then loading back one mesh with LoadAnimMesh.<br><br>Can you explain how you are doing this, please. <br><br></td></tr></table><br>
<a name="537027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry i didn't answer before John.<br><br>You export without adding all the meshes into one single mesh. This is no difficult, because you just don't do it :D<br><br>Suppose you use 3dsmax. You create 5 cubes, like buildings. You export then the file with b3d pipeline. Then in b3d you do:<br><br>map = loadanimmesh("buildings.b3d")<br><br>And B3D will load all the meshes as parented entities to the "map entity", so you will have automatic occlusion for your map.<br><br>P.D: I have tested gile[s] with this method, and works perfectly!. I have reduced the 11ms of RenderWorld of my map to 3 (the middle value of course)!!!<br><br>Cheers, KuRi! <br><br></td></tr></table><br>
<a name="537046"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I don't use 3DSMax, but I do intend using very big mesh terrains.<br><br>I'd always thought that I would have to create and load each mesh separately (to achieve Blitz's occlusion) but from what you are saying it seems that if they are each a child of a parent node then occlusion will happen anyway.<br><br>This opens up possibilities...... Thanks. <br><br></td></tr></table><br>
<a name="537143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Without wanting to sound too pedantic: Isn't culling what you are talking about, not occlusion - I thought culling is where triangles not facing the camera or in the camera frustrum are hidden, while occlusion is where say a monster behind a door that you are looking at is not rendered (which you have to get it to do with code because blitz doesn't automatically do that). <br><br></td></tr></table><br>
<a name="537361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of Course Matty is right. I tend to use the word occlusion for every triangle hide method, but the correct definition is what Matty Says!<br><br>Anyway, if the frustum is making that hard work for us, God saves the Frustum!<br><br>Occlusion can be done with linepicks... <br><br></td></tr></table><br>
<a name="537374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Frustum, damn it, <b>FRUSTUM</b>! :)<br><br>Why does everybody spell that wrong?! :P <br><br></td></tr></table><br>
<a name="537382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Go on Matty, go for it -<br>Tell us the meaning of both words (seriously). <br><br></td></tr></table><br>
<a name="537403"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right Again. Post edited :D <br><br></td></tr></table><br>
<a name="537465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Culling<br><br>This is where vertices, primitives, or surfaces are removed from the rendering process on the basis that they are not visible from the camera's point of view. Culling can be performed by the graphics adapter (after vertex processing and before rasterisation) or it can be done by the software creating the graphics. <br><br><br><br>Occlusion (Graphics)<br><br>This is where a visible object blocks (occludes) one or more other objects from the view of the camera; the occluded objects should not be rendered (unless the front one blocking the others is slightly transparent) as they are not visible. To avoid wasting valuable resources rendering occluded primitives, some form of occlusion culling needs to be employed. Most 3D games do this before sending anything to the graphics adapter, which then handles the rest.<br><br><br><br><a href="http://www.futuremark.com/community/hardwarevocabulary/" target="_blank">http://www.futuremark.com/community/hardwarevocabulary/</a><br><br>'Nuff said! :) <br><br></td></tr></table><br>
<a name="537582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, pipeline lets you place occluder obscurer primitives in max which occlude everything who's bounding box is hiden by the obscurer.<br><br>At one time I was thinking of using the Xrefs pipeline extension for streaming scenes and objects off of the HD. Blitz3D is too slow, but might be possible with blitzmax if a bmax port of the extensions is ever made. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
