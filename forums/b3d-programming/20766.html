<!DOCTYPE html><html lang="en" ><head ><title >Splines and meshes...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Splines and meshes...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Splines and meshes...</a><br><br>
<a name="212575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hiya,<br>im working on a city editor where you can place roads/buildings etc, and at the moment im using square blocks for everything... but what i would really like to do is to create the roads using splines.<br>the actual handling of the splines isnt a problem... what is a problem, is turning the spline into a mesh... also, junstions may pose a problem with this...<br>the roads would need to have a pavement (sidewalk) on each side, and be textured... and be about 10 blitz units wide...<br><br>soooo... any help? <br><br></td></tr></table><br>
<a name="213969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> *whistles* <br><br></td></tr></table><br>
<a name="213995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> So in what sense is the handling of splines not a problem? (Cough)<br><br>Given that, for example, Adobe Illustrator didn't do this kind of stuff until maybe v5.5 and it was a serious pain to do it manually, I'm guessing the math is slightly non-trivial. <br><br></td></tr></table><br>
<a name="213998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SSS</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> why dont you just use the spline as the center of the road, and then just use segments whenever it turns, kind of like the demo w/ the bike and the dynamic mesh <br><br></td></tr></table><br>
<a name="214329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i can do the spline maths, figuring out the location after t amount of time, but its just converting this to a mesh. basically, i know how wide i want my road to be, and i know that i want x amount of segments, and i know the center location and yaw of each of these segments... but creating the mesh and giving UV co-ords is beyond me. <br><br></td></tr></table><br>
<a name="214330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> bwuahaha just figured a way... i think.<br><br>load a boned b3d model of a straight road made of 10-20 sections. asign a bone to each section, then find it in blitz and modify it! lets hope it works... <br><br></td></tr></table><br>
<a name="214356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> wait... this is patches or something, isnt it?<br><br>anyway, i tried the boned b3d idea and it didnt go too well.<br><br>please help? <br><br></td></tr></table><br>
<a name="214387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >podperson</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I started out trying to explain why the math is so hairy and this post got very long.<br><br>In essence, in the simplest case you need to solve a VERY complicated simultaneous equation to determine the intersection of two splines (even quadratic splines which are the simplest case you'd care about).<br><br>Then it occurred to me that there's a very simple solution: allow spline shaped segments of road, but force them to snap to right-angled intersections. Sure it's a restriction, but most traffic engineers avoid strange intersections like the plague (for good reasons). <br><br></td></tr></table><br>
<a name="214397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know what you were getting at with the whole boned mesh thing but you are going to need to create the mesh, vertex by vertex, in code.  Where to create vertices will be determined by the spline. <br><br></td></tr></table><br>
<a name="214611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MattG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi DarkEagle , <br><br>maybe we can talk sometime , as i am writing a racing track creator ( <a href="http://www.16vmini.co.uk/rtc" target="_blank">http://www.16vmini.co.uk/rtc</a> )<br><br>would be happy to swap ideas/help .. as some of the things you are talking about i have done/ want to do.<br><br>Matt <br><br></td></tr></table><br>
<a name="214732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> MattG<br><br>Wow! i like the look of that program! that is VERY nice! could you explain to me the actual code you use to create the road? i notice you can change the number of segments - i presume a vertex is created to the left and right of each segment point, then joined up somehow? id love to see some code to do this :) <br><br></td></tr></table><br>
<a name="214736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MattG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> well he is a basic function i use ( it can/will be improved<br><br>Function createroadface(mesh,p1.VEC3,p2.VEC3,p3.VEC3,p4.VEC3)<br>	  	brush = LoadBrush(CurrentDir$() + "Data\profiles\road.bmp",49)<br>		surface = CreateSurface(mesh,brush)<br>		<br>	    AddVertex surface,p1\x,p1\y,p1\z,1,1<br>	    AddVertex surface,p2\x,p2\y,p2\z,0,1<br>	    AddVertex surface,p3\x,p3\y,p3\z,0,0<br>	    AddVertex surface,p4\x,p4\y,p4\z,1,0<br>	    AddTriangle surface,2,1,0<br>	    AddTriangle surface,3,2,0<br>	    FreeBrush brush<br>End Function<br><br>i pass it 4 vectors , and then add to triangle to make a road section , create lots ..gives you a road.<br><br>Matt <br><br></td></tr></table><br>
<a name="214738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MattG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> just looked at the code , that function is what i used to use , it will work ..but i have found better ways of doing it .. that will get you started though.<br><br>Matt <br><br></td></tr></table><br>
<a name="214759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> what data do these vectors contain, and where to they get thier info from? i think i need to see more before it "clicks" :) <br><br></td></tr></table><br>
<a name="214872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MattG</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> i have what is called a track profile , take a cut line through a road , for a simple road you would have two points , left kerb, right kerb.<br><br>I then move these allong a path determined by other points , which you can move about , so making a track whaterver shape you want.<br><br>once i have all my kerb vectors , then then loop through them all one by one , so :<br><br>the first peice of road will be made up of the first two vectors (left/right kerb)  and also the next section vectors.<br><br>not sure if that is any clearer<br><br>Matt <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
