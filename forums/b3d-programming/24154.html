<!DOCTYPE html><html lang="en" ><head ><title >BSP and levels</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >BSP and levels</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >BSP and levels</a><br><br>
<a name="250203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >myspys</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hiya<br><br>i'm starting to play with 3d-stuff, and my first "project" will be to duplicate quake 3 (yeah yeah)<br><br>loading bsps sounded perfect, 'cause then i can just rip the levels out and start from there<br><br>the level renders fine (VERY advanced ;) and everything works, but how do i detect if the player-entity has collided with for example a portal/teleporter or a "jump-thing"?<br><br>do i have to create invisible entities where those things are, and then do collision testing against those, or can i actually say "this item/part of the map is a jump-thing and has collision id 15" etc?<br><br>thanks in advance<br><br>/ d <br><br></td></tr></table><br>
<a name="250206"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> From your "yeah yeah" I assume you already know the first thing I am going to point out, that you shouldn't do something big like Quake for your first project.<br><br>As for teleporters and jump pads, there are a number of approaches, most of which are specific to one or the other (ie. they are different devices and must be handled differently.)  For detecting when the player has entered a teleporter simply using EntityDistance will probably do.  Just check EntityDistance between the player and every teleporter every frame.  Or if that slows things down stagger the checks so that you aren't checking every teleporter in the level every frame.  But EntityDistance is a fast command so unless you have a LOT of teleporters checking them all every frame is no big deal.<br><br>For jump pads you specifically want to check when the player is on top of and touching a jump pad.  Depending on how you are coding player control there are two ways of detecting what is beneath the player: just using the built-in collision detection and commands like CollisionEntity, or doing a linepick straight down to detect what is below the player. <br><br></td></tr></table><br>
<a name="250209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >myspys</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> something like quake is probably too big, but i've been coding before, and it feels like a good first thing to do 'cause there are a lot of things to learn along the way. oh well, we'll see how it turns out :)<br><br><br>collisionentity would work very well, so would linepick, BUT if i'm going to use them i need to either make the jump pad pickable or give it a "collision id" (via entitytype)<br><br>can do that for the whole map, but don't think it will work very well if the whole map acted like one big jump pad ;o)<br><br><br>why should the different things be handled differently btw?<br>both should be "if player has collided with this unit, do action connected to this unit", or am i missing something?<br>the action has to be different, for obvious reasons, but the actual detecting of the player has collided..<br><br>thanks again<br><br>/ d <br><br></td></tr></table><br>
<a name="250212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It depends on how exactly you want teleporters to behave.  Normally (eg. in Quake) teleporters are a volume of space whereas jump pads have to actually be stepped on.  If you want your teleporters to be floor triggers just like jump pads than sure you can just use the same technique for both.<br><br>Of course you will need to ID devices like jump pads to distiguish them from the rest of the level.  Were you asking how to setup those ID's?  Because that depends on how you are creating the level.  I don't think LoadBSP carries over entity information but I could be wrong; I've never used BSP maps in Blitz.<br><br>Hm, there may be a way to detect the texture of the surface collided with/picked.  If you know this or that texture is always a jump pad that would work as an identifier. <br><br></td></tr></table><br>
<a name="250313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >myspys</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> that's what i was hoping to be able to do<br><br>anyone know if it's possible to tell which texture the player has collided with?<br><br>or if it's possible to say "all entries of this piece have collision number 10"? (via entitytype)<br>(from information in a BSP) <br><br></td></tr></table><br>
<a name="250716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> you know im working on a quake thinggy, tho its more Doom with puzzles. Big project, been ongoing since early 2002,<br><br>i found that having too many Collision ID's (entitytype) slowed the whole game down because, something to do with checking the whole games polys 10 or 40 times per frame, got a bit slow.. So i had to re-think.. I came up with naming the entities' Sounds like it would slow things down.. It does. But its a MASSIVE speed increase compared to doing Collision detects!<br><br>example. you have a few doors. each has a name something like "door_1" "door_2" and so on. but they keep the same collision type. in my case.. coll_world = 2 ;)<br><br>simply use the thing = Entitycollided(...) the thing var will contain the objects number and you can simply do t$ = entityname$(thing) and it will be the same.. as if you did collision types for each item.<br><br>Hope this helps <br><br></td></tr></table><br>
<a name="250730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You =can= parse the BSP file manually without too much trouble.  Long time ago I released a public demo that parsed out lights and area volumes and reintroduced them into the map as sprites and alpha'd cubes but I can't find it at the mo.  I'l do some more digging if you're interested in this approach.<br><br>[EDIT] found it <a href="http://www.echthros.com/misc/bspentity.zip" target="_blank">here</a>.  [/EDIT] <br><br></td></tr></table><br>
<a name="250756"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >myspys</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> morduun, woooh. exactly what i was looking for<br><br>many many thanks to you :o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
