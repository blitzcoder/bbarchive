<!DOCTYPE html><html lang="en" ><head ><title >2D collisions for adventure games</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >2D collisions for adventure games</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >2D collisions for adventure games</a><br><br>
<a name="678693"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone know a good way to set up a collision system for 2D stillscenes Monkey Island style? I have no idea where to even start with this, how did they do it in the old days? 3D commands are no good, I have a collision system with invisible 3D objects already and it works fine but for several reasons I can't really use it.<br><br>EDIT: Oops, wrong forum. Any moderators up for moving this to beginners area? <br><br></td></tr></table><br>
<a name="678834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know the answer directly, but I definitely enjoyed playing The Secret of Monkey Island.  One thing I recall, is that there was z-ordering, meaning that some scenery was behind Guybrush Threepwood (cool name, huh?), and some was in front of him.  Therefore, even though the graphics appeared to be all one piece, they were in fact different graphic images that were layered onto the screen.  As far as considering where he could walk, hmm, I could speculate, but I think I'll see if anyone else can speak more accurately and knowedgably to the question.  <br><br>Ahh, what the heck, I'll speculate anyway!<br><br>One hint I see, is that Gurbrush's movements were at least in part pre-programmed.  By this, I mean, that you picked a destination, and then he was animated to walk over to that spot, following whatever path the programmers has deemed would be appropriate to the game and scene of that moment.  So, maybe there are lists of coordinates/animations that were run through to get you from point A to Point B.  Remember when you used the rubber chicken with a pulley on the rope, and rode across the way hanging on for dear life?.  You weren't given the choice of stopping halfway through, so it was a pre-programmed sequence/animation.<br><br>Anyone else care to comment or explain?  Thanks. <br><br></td></tr></table><br>
<a name="678848"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MCP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I seem to remember using an editor designed to create these type of games back in the early 90's.  I can't remember what it was called though!<br>Anyway the system it employed there was simply the user drag dropped a series of rectangles over the 2d picture representing the location.  Each rectangle was a collision zone which you could specify what type of action the player or object could do ie: if player character is in zone 1 then move only left/right, if in zone 2 move only up/down.  Zones could be linked together allowing the player character to walk around a table for instance.  Therefore the problem can be solved by simple 2d collision boxes, even though the environment was psuedo 3d - depth sorted.  Hope that helps :) <br><br></td></tr></table><br>
<a name="679054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>The use of z-ordering and placement of objects is important.  You should have the background image and then have objects on top of that z-ordered so you can move in front of/behind them.<br><br>Ideally predefined paths on each screen should be used.  Admittedly, this restricts free movement by the player but clever screen design should overcome that.  Along that path have waypoints/collision zones that will move the players z-order so that at certain points they will move behind scenery/objects.<br><br>The system is quite easy to set up and if I was at home right now I'd throw something together for you, but alas not.  So you'll have to do it yourself.<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="679120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> SoggyP:  Well, when you DO get home, go for it!  :) <br><br></td></tr></table><br>
<a name="679136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The system is quite easy to set up and if I was at home right now I'd throw something together for you, but alas not. So you'll have to do it yourself. <br></div><br>Oooh, how about a bit of pseudo-code to get me started :) Problem for me is setting up collision zones/borders using no 3D, just intricate mathematic formulas. Ahh who am I kidding, it's all way over my head :) But that's probably the one part I could never figure out by myself.<br><br>Thanks everyone for helping! I needed some fresh takes on this, yesterday my mind was completely blank. <br><br></td></tr></table><br>
<a name="679139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Problem for me is setting up collision zones/borders using no 3D, just intricate mathematic formulas<br> <br></div><br><br>Why do you need maths? RectsOverlap, ImageRectOverlap, ImageRectCollide, ImagesOverlap and ImagesCollide should suffice. <br><br></td></tr></table><br>
<a name="679140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jaime</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't really need to be so complicated... In golden age adventures there was only plane where the character was... So really you only have to worry by z-order (and not so often because usually the char stops just beside the item) and using the correct animation.<br><br>The paths began to be noticeable in Monkey Island 3 days, where the scenery was more complicated... mmm.. If I remember well, old days 2D collision was triggered by colors, so, if the path sides have a color 234,23,16 you make your char to not cross over that one, just go a couple of pixels away and continue walking.<br><br>btw, there's still a Adventure editor, it's named "Adventure Game Studio"; it isn't a language, it's a point'n'click object editor, but many ppl use it... There are lots of ready games there. <br><br></td></tr></table><br>
<a name="679207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Why do you need maths? RectsOverlap, ImageRectOverlap, ImageRectCollide, ImagesOverlap and ImagesCollide should suffice.  <br></div><br>Well.. that's an excellent point you know. I can't use those commands since I'm using SpriteCandy but that lib has similar commands which I for some reason managed to completely overlook. Think I need a vitamine injection or something cause my brain's obviously not working right these days. Thanks for the heads up, I should be able to figure out something good now. <br><br></td></tr></table><br>
<a name="679341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Sorry, I spent time with a large breasted beauty last night so didn't have time to do this, so here's a rough outline thrown together at lunchtime.  Any comments welcome:<br><pre class=code>
' Set up Waypoints
- For each screen, carrying out the following process will give us the ability to move on predefined paths and search for the quickest (step-wise as opposed to distance-wise) path from one waypoint to another.  I’d suggest that a screen designer might be useful here :o)
- Define Waypoints, ie, junctions on paths
- Define Waypoint links (ie, which waypoints link to which others).  This will provide vectors/step size between the points, eg:
    A-&gt;B = (0.5, -0.25)
    B-&gt;C = (0.1, -5)
    Automatically generate reverse links as well here, eg, B-&gt;A = (-0.5, 0.25).
- Define Available paths through points, eg, 
    A-&gt;B-&gt;E-&gt;F
    A-&gt;M
    B-&gt;N-&gt;O-&gt;K
-Automatically generate reverse paths as well here.
    The paths can be stored as strings so you’d have ABEF and AM and BNOK, and in reverse FEBA, AM and KONB.
' Set up Collision Points
- For each screen you’ll want to have objects to move in front of / behind.  The waypoint system allows you to move around the screen, the collision points will be where the player interacts with objects.
- Each collision object will have a front and back position, and a y-pos switch position.  As the player moves along the path, if they collide with this point, the player y-pos and the switch position are compared and the players z-position determined through this.

'Main Loop
Repeat
cls
DoPlayer()

'Draw Stuff on screen
DrawBackgroundImage()

For each object
	If object.z &gt; player.z then 
DrawObject()
	Else
		If Player is not drawn
			DrawPlayer()
		Else
			DrawObject()
		End if
	End if
Next

DrawHUD()
DrawCursor()

Flip
Forever

Function DoPlayer()
If mouseclicked()
    Get closest waypoint to cursor position
    Search through waypoint pathlist for quickest path from current position to selected position
    Set Moving flag to true
End if

If Moving = true
    follow path, via linked waypoints, until destination waypoint reached or cursor position reached
    For each CollisionPoint
      If playercollides
         If player.oldy &gt; player.newy then
           player.z = collisionpoint.frontposition
         else
           player.z = collisionpoint.backposition
         end if
         break;
      end if
next
If destination reached set moving = false
End if
End function
</pre><br>Or something like that anyway :o)<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="680198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ErikT</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha! Thanks a lot for taking the time away from the women and whatnot :] Looks like I can figure it out from here. <br><br></td></tr></table><br>
<a name="680261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Cool, let me know how it goes.<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="684448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Joestick</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey island is made with a Sierre Enginie(i don´t remenber the name) but it´s versy simple.<br>3 images compound the cenary:<br>1st - Collision image whith a mask color where the player can  <br>walk.<br>2st - The cenery(1) image(draw above the player)<br>3st - The cenary(2) image(draw up the player) <br><br></td></tr></table><br>
<a name="684453"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snader</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Monkey Island is based on the SCUMM engine. Nothing to do with Sierra!! Take a look at <a href="http://www.scummvm.org," target="_blank">http://www.scummvm.org,</a> it's all there.<br><br>Play around with <a href="http://www.adventuregamestudio.co.uk/" target="_blank">http://www.adventuregamestudio.co.uk/</a> for a while before starting your own blitz adventure game. It can give you some pretty good ideas. You probably also want to check out <a href="http://www.mixnmojo.com/" target="_blank">http://www.mixnmojo.com/</a> forums. You can ask there about how adventure games like MI where contructed, the people there are probably very willing to help you. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
