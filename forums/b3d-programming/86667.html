<!DOCTYPE html><html lang="en" ><head ><title >Blitz3D garbage collection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz3D garbage collection</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blitz3D garbage collection</a><br><br>
<a name="982515"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does Blitz3D handle unused textures?  I can load a level with many textures, free the entity, load another level that has a same named texture(but not the same data) and Blitz3D references the old texture, so it would seem it never released it.<br><br>Is there a way to force blitz to release a texture reference from memory when the entity holding it is freed ?<br><br>The reason this is important to me, is that I will have user created maps, and it is likely that while each map will have its own filepath, the creators may create same named textures.  I just dont see any way to force textures to be released.  I cannot even use freetexture , ive tried that and it still references the old texture when reloading.<br><br>If the garbage collection is only say.. once every x minutes thats ok, but an InitGarbageCollection() call would be nice to have in that case. <br><br></td></tr></table><br>
<a name="982519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've always found it odd the way it works. Like yourself, I found blitz always seems to keep the textures in memory, till either they are flushes out by other textures needing the VRAM space, or the clearworld command is called(i'm not doubly sure about clearworld actually doing this though). <br><br></td></tr></table><br>
<a name="982522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, its weird.  Clearworld isnt an option for me as I have other textures that are resident at all times that I cannot remove.<br><br>can anyone with the sdk comment on the gc ? <br><br></td></tr></table><br>
<a name="982532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bobysait</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most of the textures are assigned to shared brush. And the brushes aren't released until a clearworld<br><br>It prevent overloading, but force ram to keep the same as you free entities, brushes or textures, but the memory space is "re"allocated.<br>So you don't "eat" more ram.<br><br>Entities aren't really cleared too +&gt; peek bytes of memory after a Free, you 'll see that most objects are still there. they just aren't linked anymore, and the memory space is declared "available" until it is reused.<br><br>b3d sdk do the same as far as I know. It's one of the first thing I've seen, when I free entities, the memory just doesn't change of a bit. <br><br></td></tr></table><br>
<a name="982533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bobysait,<br><br>  thanks.  this *seems* to work without any adverse side effects, on each map "unload" i simply call<br>Clearworld(0,1,0) ; &lt;--0,1,0 only clears brushes<br><br>on the next map, the same named texture can be loaded from a differnt path and the updated texture data is shown as expected.   <br><br>I do not know if there are internal issues using this method. I am using sprite candy as well , and none of its drawing operations seem to be effected. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
