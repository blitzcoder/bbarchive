<!DOCTYPE html><html lang="en" ><head ><title >VertexBone()</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >VertexBone()</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >VertexBone()</a><br><br>
<a name="374638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is absolutely necessary, since VertexX,Y,Z() don't consider animation when returning values, and for other reasons. <br><br></td></tr></table><br>
<a name="374643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you mean a command to determine what bones a given vertex is weighted to? <br><br></td></tr></table><br>
<a name="374646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Er actually it would now be CountVertexBones(surf,v), VertexWeight(surf,v,index), and VertexBone(surf,v,index).<br><br>I am programming projectors like the Unreal engine has, but can't get the true position of the vertex without knowing what bone it is attached to. <br><br></td></tr></table><br>
<a name="374673"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JaviCervera</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> TFormPoint x#, y#, z#, entity, 0<br><br>This should return the REAL current coordinates of the vertex. <br><br></td></tr></table><br>
<a name="374678"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure?  I haven't ever tested it, but I seem to recall hearing at some point that what you posted specifically does not work, that there is no way using Blitz commands to get the true position of vertices in a skeletal animated mesh. <br><br></td></tr></table><br>
<a name="374754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> All the verts to a boned mesh are within the first 'mesh', while the bones are seperate pivot points. So there's no way to get updated positions even if you know where the bones are.<br><br>Though saying that, the .b3d format does(obviously) contain a list of verts for each bone, so it's not impossible without mark's help. <br><br></td></tr></table><br>
<a name="374761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why would you want to know where a verticy is? There are far too many to do anything useful with in realtime. <br><br></td></tr></table><br>
<a name="374771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a very useful request Skid. I've lost count the amount of times I've hit the wall in frustration over this.<br><br>The most obvious example is linepicking..it's impossible with an animated b3d, and that's just absurd. (In zombie apocalypse 3 for example, I had to actually skin the mesh with cubes and mirror the limbs positions every frame)..<br>which was fine for that situration, but hardly ideal. It took me hours to manually scale and position the cubes(Not being an artist)<br><br>But imagine a lightmapper...with animated geo..something most modern games need. Currently no way of doing it, back to the line picking problem.<br><br>Going even further, in vivid3D, it's currently impossible to convert animated b3ds in memory, because there's no way of retaining this info. sure it can got from file,<br>but it's still another example of it being needed.<br><br>And as for too slow for real-time, what's to stop someone from writing a user lib that works on the data too?<br><br>It's vital. <br><br></td></tr></table><br>
<a name="374785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would assume most modern games do their lighting with the GPU, expecting the CPU to do anything clever with 100K+ of animated verts/tris is just wrong.<br><br>As for collisions, parenting a bunch of collision pivots along each bone would be a cheap and I would imagine cheerful solution to animated body collisions in Blitz. <br><br></td></tr></table><br>
<a name="374789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never said anything about in game lighting. Lightmapping is done pre-run-time.<br><br>The biggest issue still remains linepicks. That wouldn't any slower either, it's not like you have to transform each vert, you can just instead transform the linepick's origin and vector into the local space of the limb, and then do the regular check. <br>Which is basically adding around 5-15 funcs per linepick, none of which are even remotely slow. And for this you finally have a blitz3D that's useful with animated characters..at present, it's not for anything but the most simple collision set-ups.(linepicks are a god-sent when they work.)<br><br>It's not like it's a hard thing to add either, it's only gotta return an index! :) <br><br></td></tr></table><br>
<a name="374817"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Why would you want to know where a verticy is? There are far too many to do anything useful with in realtime."<br><br>Well for one, my shadow system has to approximate the bounding sphere of an entity.  With bone animations this isn't very accurate if the person who made the animation makes the character move quite a ways, as happened in Anime Bowling Babes.  If one could read the positions of the vertcies then one could play the animation once in a coarse way and find a much more realistic set of extents for them.<br><br>For another, there is not neccessarily so many that you can't do anyhting with them.  Take for example, normal mapping.  You take a low polygon model and apply a normal map, but you have to change the colors of the vertcies according to their position in space at any point of the animation.  Since the model is low poly, you could do this in realtime, and the normal map would do the work of making the model look detailed.<br><br>Of course in addition to Halo's suggested commands, I really think Blitz should just tell us where the vertex is when we ask and provide a special parameter on the vertexx,y,z call.<br><br>And it would be really nice if we could add bones and weights manually.  It would be useful for modeling apps, and it would be useful for other things as well.  Making folks write the data out to a B3D and then reimport it is crazy, and really limits what you can do with bones. <br><br></td></tr></table><br>
<a name="374860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course you can find out the real positions of vertices.  I do it all the time in Character Shop.  You take the relative position and transform it from the bone to the target entity.<br><br>Simon, you have 100,000+ poly characters?  Wow, that is pretty impressive. <br><br></td></tr></table><br>
<a name="374902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Umm...if you can do it why do you need it? You just parsing the .b3d file or did you 'hack' into the entity structure again? <br><br></td></tr></table><br>
<a name="374907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I manually position vertices in Character Shop, since the whole thing is dynamic.  It's a lot slower than bones.<br><br>It would be nice to use the real bones routine, instead of throwing out a Blitz feature and replacing it with a workaround. <br><br></td></tr></table><br>
<a name="374931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This would be very handy for normal mapping, as sswift mentions :) <br><br></td></tr></table><br>
<a name="374954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ricky Smith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Of course you can find out the real positions of vertices. I do it all the time in Character Shop. You take the relative position and transform it from the bone to the target entity. <br> <br></div><br>That's fine with rigid vertex assignment - with vertex weighting it gets much more complicated. Each vertex can be influenced by up to 4 bones so working out its final position is difficult without knowing the exact formula used. <br><br></td></tr></table><br>
<a name="374983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ummmmm, (weightA#*positionA)+(weightB#*positionB). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
