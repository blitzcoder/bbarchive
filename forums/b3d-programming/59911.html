<!DOCTYPE html><html lang="en" ><head ><title >Checking if a UDP packet has arrived?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Checking if a UDP packet has arrived?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Checking if a UDP packet has arrived?</a><br><br>
<a name="668240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yours</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi I am making an online game with UDP, and I seem to have hit a wall.  I know that packets can be dropped with UDP, and during the game this is okay for movement because I can implement dead-reckoning.  However, what can I do to ensure that packets containing chat messages or game start and end messsages are received?<br><br>Like when I am launching the game from the lobby, the host could send a message to the clients signaling the game to begin.  Then the host would need to wait until the clients all sent a confirmation message saying that the game start message was received.  But if this message is lost, there would need to be a confirmation for the confirmation, starting a vicious cycle.  Any ideas on how to solve this?<br><br>Thanks <br><br></td></tr></table><br>
<a name="668264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am working on a UDP system as well. <br><br>There are two categories of packets, some that need an acknowledge and some that don't need an acknowledge. Acknowledges and Re-order Messages are the ones that don't need an acknowledge (cause otherwise they would generate an endless loop) Let's call them packet type A (ack) and Type B  (no ack) for now.<br><br>Every A packet has a serial number. This way the receiver will detect when a packet is missing: when it received packet 3 and then packet 5, it may send a re-order message of type B and ask for packet 4 that is missing.<br><br>For every successfully received packet the receiver will immeditalely send back an acknowledge packet of type B. So the server knows the receiver has got it.<br><br>Additionally the server may resend the packet if there was no acknowledge in a reasonable time, plus declare the receiver as logged out when it didn't respond for a certain time (eg. 2 Minutes).<br><br>Now to go a little further, missing packet are not the only problem, you also have to make sure the packets are not altered. For this purpose you may add a checksum to the header of every packet of type A. The receiver will only send the acknowledge if the integrity check has passed successfully.<br><br>For Anti-sabotage and Anti-cheating reasons you may kind of encrypt the checksum and keep the checksum method a secret, so people will fail to manually create cheat-packets.<br><br>So whenever a receiver is missing a packet in the serial sequence, or when it received a packet with a bad checksum, it may send a reorder request for the packet in question.<br><br>Hope this helps <br><br></td></tr></table><br>
<a name="668398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >yours</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks alot!  This really helps. <br><br></td></tr></table><br>
<a name="668458"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Scherererer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> or, you could open up a stream on a seperate port that is used for detecting level changes and such which is running on TCP. That way you wouldn't have to do all the checks that TCP does automatically for you. Plus, those messages wouldn't be as "urgent" that they would need to get to you immediately. <br><br></td></tr></table><br>
<a name="669210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Farflame</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or just use Raknet, which does it all for you :) <br><br></td></tr></table><br>
<a name="669392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> raknet may be an overkill sometimes. Also, you may want to edit things internally.<br><br>&gt;&gt; which does it all  &lt;&lt;<br><br>not exactly. I was missing several things. <br><br></td></tr></table><br>
<a name="669516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> or use rottnet. works fine too. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
