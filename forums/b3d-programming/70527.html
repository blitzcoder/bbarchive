<!DOCTYPE html><html lang="en" ><head ><title >256 tex flag crash</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >256 tex flag crash</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >256 tex flag crash</a><br><br>
<a name="788441"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Need some advice.<br><br>I have a number of beta testers going through my 3d tank game at the moment.<br>However One of the testers has a Nvidia 5200fx Ultra and is reporting a nasty crash. <br>I have a radar routine that copies the backbuffer (after a render) to a texture created with the 256 flag enabled (load texture into vidmem) and it seems this is causing the crash. <br><br>JFK has a code archive entry that tests 256flag functionality, but it needs to be updated (readpixel behaviour has changed I seem to recall).<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=618" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=618</a><br><br>But I'm thinking that if I use JFK's code to test for 256 flag functionality, may that not cause a crash in itself?  <br><br>Has anyone else come up against the issue and how have you resolved it? <br><br>Is it something a DLL such as Tom's dx7test could test for? <br><br></td></tr></table><br>
<a name="788454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> readpixel behavious chanched?? That's new to me. Although, the mentioned test routine, AFAIK, is really a dirty hack. It can't prevent a crash. It will only detect if a texture is working correctly and if it's faster (to copy to it) than a texture without the 256 flag.<br><br>Basicly, if a loaded or created texture has a valid handle then it should work. If the 5200 can't handle it then it may be a driver issue (did the guy update the drivers?) Is the crash really reproducable? Do other 5200s act the same way?<br><br>If copyrect crashes, then try to emulate it using readpixelfast and writepixelfast. Probably it's only the copyrect function that doesn't work. <br><br></td></tr></table><br>
<a name="788459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk<br><br>'readpixel behavious chanched?? That's new to me'<br>I think I was recalling the B3d changelog; 'To get the old behaviour of ReadPixel/ReadPixelFast, use the following:rgb=ReadPixel( x,y ) And $FFFFFF.' <br>But looking at your code, I see you've already done that ;-)<br><br>'If the 5200 can't handle it then it may be a driver issue (did the guy update the drivers?) Is the crash really reproducable? Do other 5200s act the same way?'<br><br>Don't know if he's updated his drivers. Looking around on the net, I see that the card's about 4 years old and was only a moderately medium spec card back then. The crash is certainly reproduceable on his machine - don't know if other 5200's act this way. Sent him an updated exe with all loadtexture 256 flags turned off and it at least stopped this particular crash.<br><br>Still, I'd like to be able to do a check and set a global flag not to load textures with the 256 flag - and be fairly confident that the check itself won't cause a crash.<br><br>'If copyrect crashes, then try to emulate it using readpixelfast and writepixelfast. Probably it's only the copyrect function that doesn't work'<br>Could be - but it's for the radar and so needs to be as speedy as possible. Suspect readpixelfast/writepixelfast are going to be too slow. <br><br></td></tr></table><br>
<a name="788465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is much faster with flag 256. Although presumably still slower than copyrect. <br><br></td></tr></table><br>
<a name="788595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wonder if Tom's dx7test.dll could check for this;<br><br>From his decls;<br>GetDeviceGUID$():"_GetDeviceGUID@0"<br>SupportsAllStencilOPs%():"_SupportsAllStencilOPs@0"<br>SupportsRangeFog%():"_SupportsRangeFog@0"<br>SupportsMipMapLODBias%():"_SupportsMipMapLODBias@0"<br>SupportsAllZCmpCaps%():"_SupportsAllZCmpCaps@0"<br>SupportsCullCCW%():"_SupportsCullCCW@0"<br>SupportsAntiAliasing%():"_SupportsAntiAliasing@0"<br>SupportsDXT1%():"_SupportsDXT1@0"<br>SupportsDXT3%():"_SupportsDXT3@0"<br>SupportsDXT5%():"_SupportsDXT5@0"<br>SupportsRenderTexture%():"_SupportsRenderTexture@0"<br><br>I have no idea here, but perhaps if the card doesn't support  render to texture, perhaps it could be assumed the 256 flag would cause a prob as well? Or is there a specific cap that could be checked for this (flag256 compatibility). <br><br></td></tr></table><br>
<a name="790165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> So any ideas anyone? <br><br>I actually thought this issue would be of more interest to the community in that I suspect a lot of games produced with blitz use the 256 flag. And so a compatibility check would be very useful... <br><br></td></tr></table><br>
<a name="790171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's the first time I heared of a crash due to flag 256. Is it only his machine, or does it happen on all machines with the same card? At some point (eg. &lt; 3%) you have to live with a small number of incompatible machines, it's the way it is. <br><br></td></tr></table><br>
<a name="790178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 'you have to live with a small number of incompatible machines, it's the way it is. <br></div><br><br>Maybe - I still reckon some DX guru could whip up a DLL to test this. In the meantime, perhaps the simplest solution is to provide a 'safe mode' - as many commercial games do ('XX did not exit properly last time, press OK to run in safe mode'). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
