<!DOCTYPE html><html lang="en" ><head ><title >u,v Coord Question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >u,v Coord Question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >u,v Coord Question</a><br><br>
<a name="410599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> According to the manual, the U,V coords of a texture are 0,0 at the top left, and 1,1 at the bottom right.<br><br>This isn't working out for me. If I have a 256x256 texture, 0,0 is the top right (255,0), with (1/256),0 being the top left (0,0). i.e. it has managed to shift itself slightly to the left and wrap round on itself.<br><br>Can this be fixed by something, or is it a quirk I'll have to get used to? It makes less sense this way, and if stuff makes sense to me I find it much easier to code and debug. <br><br></td></tr></table><br>
<a name="410602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look in your DX properties (start =&gt; run =&gt; enter "DXdiag.exe" or search for it)...I think it's in there that you can adjust the U,V texture cords so they default to the center of the pixel instead of the upper left edge. <br><br></td></tr></table><br>
<a name="410603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do. Out of curiosity though, will this affect anything I make? If I have to switch that, won't some others have to do it to so that everything works as planned? <br><br></td></tr></table><br>
<a name="410606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see no way to change the defaults from there. Help file gives me no indication either. <br><br></td></tr></table><br>
<a name="410613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like you are doing something wrong, maybe post some code? <br><br>You are using Addvertex with 6 coordinates the last two being u#,v# right (emphasis on floating point nature of coordinates and no don't set w#).<br><br>If you use CreateCube and texture it using LoadBrush and then PaintEntity do you get the same effect?<br><br>Also, not sure which manual you are reading but under AddVertex it states:<br><br><div class="quote"> the bottom left of an image has the uv coordinates 0,0. The bottom right has coordinates 0,1, top left 0,1 and top right 1,1. <br></div><br><br>Which I'm not sure I agree with so await your reply with interest...<br><br>Also I assume you are not using TextureScale etc. which could easily give the disfigured results you are experiencing and are not talking about Terrains from what I recall have a  mapping system all to themselves. <br><br></td></tr></table><br>
<a name="410620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting.<br><br>I am using Addvertex, and the last two are the u#, v#, indeed floating point.<br><br>Here's the code for drawing a rectangle:<br><br><pre class=code>
Function rectangle(x#, y#, width#, height#, red, green, blue, alpha#)
	v1 = AddVertex(mainSurface, x, y, 0, 0.0, 0.0)
	v2 = AddVertex(mainSurface, x+width-1, y, 0, 1/255.0, 0.0)
	v3 = AddVertex(mainSurface, x+width-1, y-height+1, 0, 1/255.0, 1/255.0)
	v4 = AddVertex(mainSurface, x, y-height+1, 0, 0.0, 1/255.0)
	
	t1 = AddTriangle(mainSurface, v1, v2, v3)
	t2 = AddTriangle(mainSurface, v1, v3, v4)
	
	VertexColor mainSurface, v1, red, green, blue, alpha
	VertexColor mainSurface, v2, red, green, blue, alpha
	VertexColor mainSurface, v3, red, green, blue, alpha
	VertexColor mainSurface, v4, red, green, blue, alpha
End Function
</pre><br><br>This adds a rectangle at x,y, of width*height size, with the rgba values as stated. The texture coordinates are taken from a 256*256 texture where in the top left there is a 2*2 white square (used for drawing this rectangle).<br><br>Also interestingly, this is an excerpt from the Blitz Command Reference, both online and the most recent docs downloaded.<br><br>The top left of an image has the uv coordinates 0,0. <br>The top right has coordinates 1,0 <br>The bottom right is 1,1. <br>The bottom left 0,1<br><br>I'll get back to you on the CreateCube. <br><br></td></tr></table><br>
<a name="410624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want the top left 2x2 pixels of a 256x256 texture page on a quad I would have thought the UV coordinates would be<br><br>0,0, 2.0/256,0, 2.0/256,2.0/256, 0,2.0/256<br><br>And the manual should state 0,0 is the top left corner of the top left texel and 1,1 is the bottom right corner of the bottom right texel. <br><br></td></tr></table><br>
<a name="410625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. The top left 2x2 pixels would be the following<br><br>0,0<br>1,0<br>0,1<br>1,1<br><br>which would translate to coords as<br><br>0,0<br>1/255.0, 0<br>0, 1/255.0<br>1/255.0, 1/255.0<br><br>It would be 1/255.0 instead of 256.0 because the bottom right would be pixel 255,255, uv coord 1,1. Which means 255/255, 255/255. <br><br></td></tr></table><br>
<a name="410628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, 1,1 means 256/256,256/256<br><br>You have to think of texel coordinates as defining an area. Draw a 4x4 box on some grid paper, reread my last post again, and then label the texel boundaries (5 on each edge) and you will hopefully understand. <br><br></td></tr></table><br>
<a name="410633"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see what you're saying. On a horizontal scale, 0 is the exact left edge, 1 is the exact right. Ok, let me see how that goes with things. <br><br></td></tr></table><br>
<a name="410634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. I've gone with the following code:<br><br><pre class=code>
Function rectangle(x#, y#, width#, height#, red, green, blue, alpha#)
	v1 = AddVertex(mainSurface, x, y, 0, 0.0, 0.0)
	v2 = AddVertex(mainSurface, x+width-1, y, 0, 2/256.0, 0.0)
	v3 = AddVertex(mainSurface, x+width-1, y-height+1, 0, 2/256.0, 1/256.0)
	v4 = AddVertex(mainSurface, x, y-height+1, 0, 0.0, 2/256.0)
	
	t1 = AddTriangle(mainSurface, v1, v2, v3)
	t2 = AddTriangle(mainSurface, v1, v3, v4)
	
	VertexColor mainSurface, v1, red, green, blue, alpha
	VertexColor mainSurface, v2, red, green, blue, alpha
	VertexColor mainSurface, v3, red, green, blue, alpha
	VertexColor mainSurface, v4, red, green, blue, alpha
End Function
</pre><br><br>This should give me the 2x2 square... but it doesn't. It gives me a slightly larger area. I think what MSW is saying is significant, except it seems to be defaulting to the centre of the pixel. I used texture flags 16 and 32 to disable uv wrapping, which stopped it from accessing the top right of the texture. It still, however leaks into the pixel 3,0 and so forth. I need the large texture for a single surface system so I can't use one small texture for this.<br><br>Of course using a 3x3 pixel area solves this little problem for now. I wouldn't mind a more general solution but I can live with this as it is. <br><br></td></tr></table><br>
<a name="410636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Fry Crayola</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Even better - I've used a single pixel. Provided I have U V clamping on, it's fine... <br><br></td></tr></table><br>
<a name="410643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, so your original problem was due to the filtering effect on non clamped textures, your description makes a lot more sense with hindsight. <br><br>For single color I would try setting all the coordinates to .5,.5.<br><br><div class="quote"> This should give me the 2x2 square... but it doesn't. It gives me a slightly larger area. <br></div><br><br>Try positioning the quad half a pixel along and half down, the following illustrates a method of positioning sprites to acheive perfect 1:1 ratio of pixels to texels for zero filtering with 2D work :<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=773" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=773</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
