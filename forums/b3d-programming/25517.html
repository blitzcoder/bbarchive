<!DOCTYPE html><html lang="en" ><head ><title >Blood in the face how?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blood in the face how?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blood in the face how?</a><br><br>
<a name="265426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on a vs. shoot em up and want the characters to get bloody as the battle progresses.  Any suggestions on how to accomplish this.  I've been looking through the forum and have found some info to use vertexcoloring and multitexturing, the only prob is that I don't understand either at all.  Can someone walk me through these please. <br><br></td></tr></table><br>
<a name="265442"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I plan to have vehicles and characters sustain visible damage in my games as well, overlaying "splotches" of damage textures (appropriate to the type of damage inflicted: cut, burn, etc.) on the base textures, and thus no need to use multitexturing per se.  I've tried a simple test:<br><pre class=code>SetBuffer TextureBuffer(Item\Texture)
Color 255,0,0
Rect Rand(TextureWidth(Item\Texture)-30), Rand(TextureHeight(Item\Texture)-30), 30, 30, True
SetBuffer BackBuffer()</pre>where Item\Texture is the handle of a model's texture returned by LoadTexture().  This puts red rectagles on the model at random:<br><img src="http://frontieruniverse.com/damage_texture.jpg"><br>By using masked (or maybe alpha-ed) textures and applying them to the appropriate location of the base texture, I expect that pretty realistic results can be achieved.  For example, if a character's right arm sustains a burn in the game, a burn texture is applied to the right arm area (the coordinate range of which has been determined beforehand) of the main texture. <br><br></td></tr></table><br>
<a name="265511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neo Genesis10</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The downside with Wendel's approach is that it means tampering with the actual texture of the object. This is bad because the texture is referenced by ALL objects with the same texture. So, by adding blood marks to one they ALL recieve blood marks.<br><br>You can work around this by giving them individual textures (by copying the existing texture) or (and probably better still) using mutitexturing. Doing this means you would apply a second texture over the existing one, this would contain the blood marks and other damage.<br><br><pre class=code>

; This code assumes the head is a seperate entity

Global bloodsplat = LoadImage("sprite/blood.bmp")
EntityTexture player1\face, player1\face_mask, 1
AddBlood player1\face_mask

Function AddBlood(texture)
	SetBuffer TextureBuffer( texture )
	max_x = TextureWidth( texture )
	max_y = TextureHeight( texture )
	DrawImage bloodsplat, Rand(0, max_x), Rand(0, max_y)
End Function
</pre><br>Reasonably simple coding. The only tricky part is getting it in the right places. If, for example, you wanted a bruise / blood patch to appear on the cheek when hit you would have to determine the location using CollisionX, Y and Z. <br><br></td></tr></table><br>
<a name="265611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies.<br>WendellM - This is probably a very stupid question(which would show how dense I am on the subject of textures and such)but how do you get a texture handle off a model that put together in a program such as Milkshape, 3ds...I'm sure its a simple command but well...I can't seem to figure it out. <br>thanks again <br><br></td></tr></table><br>
<a name="265620"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Currently, I don't think there's a built-in way of doing that, only <a href="/bbs/posts.php?topic=24346" target="_blank">workarounds</a>.  Because I use the same mesh with different textures, I don't assign texture in the modelling program but rather load them in Blitz with LoadTexture().  However, a couple of weeks ago, Mark Sibly wrote <a href="/bbs/posts.php?topic=24997" target="_blank">here</a> that "GetSurfaceTexture or whatever it was..." will be included in the next Blitz3D update, so it should be easy to do once that's out.<br><br>Neo Genesis10 is right about changing one texture affecting all models with it and that multitexturing is the way around that.  If your models each have a unique texture (as mine do) then drawing on their textures directly is more memory-efficient.  However, if several copies of a model use the same texture, then applying another texture on top for damage is the way to go.<br><br>Along those lines, you'll need to have a full texture for the model (or at least those areas to be damaged).  That is, models sometimes "cheat" by having several parts (such as both arms, both legs, etc.) UV-mapped to use the same portion of a texture.  The model in the test above does this, which is why the arm and leg damage is always applied to both limbs (in the real version, though, such "cheating" won't be used). <br><br></td></tr></table><br>
<a name="266994"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >abacadabad</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about colouring the nearest vertex to the polygon hit by the bullet dark red or something? <br><br></td></tr></table><br>
<a name="267513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can do this for you, but you won't like it. <br><br></td></tr></table><br>
<a name="267575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WendellM</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I can do this for you, but you won't like it.  <br></div>Isn't that what Mephisto said to Faust? ;) <br><br></td></tr></table><br>
<a name="267576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Litobyte</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Better use the 2nd layer of texture of the model for this.<br>You coul have them precalculated on certain places, and then assign them up ;)<br><br>EG: you got your texture.bmp which is your color map for your model assigned to the texture layer "0" of the model.<br><br>Then as if it was a lightmap (but with different blend setting of course) you will have: bloodmap.png bloodmap1.png bloodmap2.png and so on, which will be a set of texture that will be assigned to the texture layer "1" so colouring of blood your models in different comboz.<br><br>Is simple to achieve, and all those bloodmaps would be reapplicable to all of your models.<br><br>(you could use different filename as well, eg: bloodface.png bloodtorso.png bloodfaceandtorso.png and so on)<br><br>Just an idea ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
