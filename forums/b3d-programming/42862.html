<!DOCTYPE html><html lang="en" ><head ><title >HTML POST Method - How To ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >HTML POST Method - How To ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >HTML POST Method - How To ?</a><br><br>
<a name="479575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br>I'm aware of how to perform an Html GET from within an opened TCP stream - thanks to the examples in the Code Archive.<br><br>What puzzles me, is how I can effectively use the POST method, using the same technique, to send a bynary file. What I need, is how the MIME message should be formatted, in order to send it to a remote php script.<br><br>I can successfully build an html form to send a file using a POST method; but I don't want to use a form, instead I want to send a file using the same POST method against an opened TCP stream.<br><br>Has anybody done already something like that ?<br><br>Thanks in advance,<br>Sergio. <br><br></td></tr></table><br>
<a name="479716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The HTTP 1.1 RFC 2616 may help you, tho it's pretty abstract stuff. Just scroll to point 9.5, POST.<br><a href="http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&amp;letsgo=2616&amp;type=http&amp;file_format=txt" target="_blank">http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&amp;letsgo=2616&amp;type=http&amp;file_format=txt</a><br><br>I think I remember I once had a code snippet that is using POST with Blitz, but I can't find it anymore, tried hard without success.<br><br>Well, this page may be more useful, scroll to POST and watch the Request Header example:<br><a href="http://jmarshall.com/easy/http/" target="_blank">http://jmarshall.com/easy/http/</a><br><br>Oh yes, and this:<br><a href="http://www.utoronto.ca/ian/books/html4ed/appb/mimetype.html" target="_blank">http://www.utoronto.ca/ian/books/html4ed/appb/mimetype.html</a><br><a href="http://ppewww.ph.gla.ac.uk/~flavell/www/content-type.html" target="_blank">http://ppewww.ph.gla.ac.uk/~flavell/www/content-type.html</a><br><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" target="_blank">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a> <br><br></td></tr></table><br>
<a name="479724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW Semar, I just had this Idea: the easiest way to do this is: write a little HTTP server in Blitz. Then use a form that would upload a file trough a browser. this way you can study a real Post-Header directly. (I confess, I am still kind of confused, how is the form-elements Name transmitted for example?) <br><br></td></tr></table><br>
<a name="479887"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrahamK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Feel free to use my blitz code over at www.squeakyduck.co.uk<br><br>It's lurking in the archive section.<br>Allows HTTP get / post and can be used with proxy servers. <br><br></td></tr></table><br>
<a name="479896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks jfk for the info links - very useful.<br><br>@Blitztastic,<br>that's a nice offer from you; I've downoladed the HTTP get/post bb source from your web site.<br><br>I find it interesting; anyway, it's not quite what I need - no offense at all !<br><br>I'm trying to build up a simple POST method request, to be sent to an apache web server, from within a blitz application.<br><br>So far, I can send a file using a submission form from within IE, but I can't see what really IE sends to the web server. Perhaps I need to build up a self-made http server, and re-direct the IE submission form to it, so I can inspect the header sent.<br><br>Anyway.<br><br>I've found some interesting documentation about the POST header which is sent from a php script, using a socket; so, using a TCP socket from within Blitz, it should be quite the same:<br><pre class=code>
fwrite($sock, "POST /form_action.php HTTP/1.0\r\n");
fwrite($sock, "Host: secure.example.com\r\n");
fwrite($sock, "Content-type: application/x-www-form-urlencoded\r\n");
fwrite($sock, "Content-length: " . strlen($data) . "\r\n");
fwrite($sock, "Accept: */*\r\n");
fwrite($sock, "\r\n");
fwrite($sock, "$data\r\n");
fwrite($sock, "\r\n");
</pre><br><br>The key is, now, to translate the above code in the related Blitz syntax.<br><br>Write on the socket is trivial, using the Blitz stream commands. But I'm a bit concerned about the 'urlencoded' bit, and how to send the data.<br><br>I guess reading the file to transfer, and writing it on the stream. But...<br><br>Could anyone enlight me on this purpose ? I just want to upload - via POST method - a small audio file from within a Blitz program to an apache web server.<br><br>Thanks for your attention anyway.<br><br>Sergio. <br><br></td></tr></table><br>
<a name="479907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to urlencode something :<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=894" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=894</a><br><br>But the code you gave above doesn't actually use PHP's urlencode function, it just tells that the content type is urlencoded. I don't think you'll need to urlencode anything if you're only sending a file. If you're sending other data, it may be necessary. <br><br></td></tr></table><br>
<a name="479912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes fall_x, you're right, I don't need to urlencode anything; that was only an example of the POST header which I've found while surfing the net.<br><br>I just need to know how to build up a simple header to send a file with the POST method from within Blitz; so far, I'm pulling my hair out !!!!<br><br>:-/<br><br>Sergio. <br><br></td></tr></table><br>
<a name="480065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrahamK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> @Blitztastic, <br>that's a nice offer from you; I've downoladed the HTTP get/post bb source from your web site. <br><br>I find it interesting; anyway, it's not quite what I need - no offense at all !  <br></div><br><br>Not a problem, but I would have thought it would only take a small tweak to the final example to get something working.<br>I did have a link for the format for file upload, (long time ago when I wrote that library), and it pretty much consisted of adding a few lines to the header.<br>something along the lines of:<br>-------------------------&lt;randomnumbers&gt;<br>some header stuff<br><br>file data<br>-------------------------&lt;randomnumbers&gt; <br><br></td></tr></table><br>
<a name="480208"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Again, thank you Blitztastic for your inputs.<br><br>The best solution - so far - was to follow the jfk EO-11110 suggestion; so I've build up a simple HTTP server in Blitz, and I've successfully dumped what is sent to a web server, when a POST method is submitted from a form.<br><br>And guess what ? In few minutes I've implemented a POST method from within Blitz, and it works like a charm !<br><br>Thanks to all for the help,<br>Sergio. <br><br></td></tr></table><br>
<a name="480305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please add it to the code archives :) So we all can save our hair and time ;) <br><br></td></tr></table><br>
<a name="480962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> just a reminder - semar, pleeease share da code with us. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
