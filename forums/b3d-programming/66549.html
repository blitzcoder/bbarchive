<!DOCTYPE html><html lang="en" ><head ><title >TrueType Font Widths</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TrueType Font Widths</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >TrueType Font Widths</a><br><br>
<a name="743501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EPS</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, is there any way to get the following BMax example to work in B3D?<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=47573" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=47573</a><br><br>my code is not working:<br><br>Graphics 640,480,0,2<br><br>bank = CreateBank( 256 * 3 * 4 )<br><br>hwnd = api_GetActiveWindow()<br>hdc  = api_GetDC( hwnd )<br><br>font = LoadFont("Tahoma.ttf",20)<br>SetFont font<br><br>api_GetCharABCWidths( hdc, 0, 255, bank )<br><br>For i=0 To 255*3<br>	Text x,y, PeekInt( bank, i)<br>	<br>	x = x + 20: If x &gt; 620 Then x = 0: y = y + 20<br>Next<br><br>WaitKey()<br>End<br><br><br><br>....my english is very bad, sorry for that....hope anybody can help - thanks. <br><br></td></tr></table><br>
<a name="743510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it could have to do with the .decls<br>I believe that for passing banks, a "%" is required.<br>But why not use StringWidth() ? <br><br></td></tr></table><br>
<a name="743527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EPS</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because i need all the character spacings, A, B and C not only the width "created" by Blitz. <br><br></td></tr></table><br>
<a name="743529"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if you understood b32's hint.<br><br>Something like<br><br>for i=0 to 255<br> print stringwidth(chr$(i))<br>next<br><br>Should return the width of each character. <br><br></td></tr></table><br>
<a name="743532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EPS</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes i know that stringwidth() gives me the width of a string but i need also...<br><br>...i repeat the MSDN:<br><br>"the negative A or C widths for a character, that character includes underhangs or overhangs."<br><br>take a look here:<br><br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/gdi/fontext_8icz.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/gdi/fontext_8icz.asp</a> <br><br></td></tr></table><br>
<a name="743641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz does not use underhangs or overhangs - it simply doesn't draw them.  Can be frustrating at times.  You'll mostly only notice the clipping when using italics or really fancy fonts.  You will need to bypass Blitz "Text"/"Print" commands to have a use for underhangs or overhangs.<br><br>I assume you are getting a "User lib function not found" error on this line:<br>api_GetCharABCWidths( hdc, 0, 255, bank ) <br><br></td></tr></table><br>
<a name="743748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EPS</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, i get NO ERROR. But i get no results in the bank.<br><br>It is not so importend for what kind of thing i need this information but i need it ;)<br><br>The point is that it will not work and i don't no why. <br><br></td></tr></table><br>
<a name="743836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok.  Got it to run now.  But like you said, no data.  Interesting... <br><br></td></tr></table><br>
<a name="743840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um... Tahoma doesn't have overhangs/underhangs but that <i>shouldn't</i> make the function return 0's.  Hmmm...<br><br>[Update] It's not even writing to the bank.  Strange...<br><br>[Update] I guess (I'm not quite sure how to test) that Blitz doesn't use the fonts the same way that Windows does, so when you call that command (a Windows function) it doesn't think you have a font and therefore returns nothing.<br><br>[Update] Confirmed.  GetCharABCWidths returns a failure.  You'll need to use Windows functions to load a font if you want to use GetCharABCWidths. :( <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
