<!DOCTYPE html><html lang="en" ><head ><title >3D textsystem - VERY FEW problems</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3D textsystem - VERY FEW problems</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >3D textsystem - VERY FEW problems</a><br><br>
<a name="1092559"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, I have decided to release my text code to the public. I would give credit to the creator, but the creator said he didn't want any credit due to how screwy the code looks. it works like a charm though. but i'm gonna give him / her credit anyway. Credit: The Creator / Rez.<br><br>I credit myself as well as I added a few new features to this textsystem including only activating the textbox when you're both A) Near a character, and B) Looking close to straight at him.<br><br>ANYWAYS, without further adieu, the screenshot: <br><br><img src="http://img717.imageshack.us/img717/2061/3dtextsystem.png"><br><br>and the zip file: <br><br><a href="http://www.mediafire.com/?ijf4lp797ew3hu1" target="_blank">http://www.mediafire.com/?ijf4lp797ew3hu1</a><br><br>Enjoy, and hopefully you guys can help me fix this with the below fixes, once and for all! :) <br><br></td></tr></table><br>
<a name="1092560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> im still having a bit of an issue. u see, i want it when i talk to a character the second time, to revert to a 2nd message and stay on that second message.<br><br>i also need for it to check and see if the end of the paragraph has been reached, if it has, set the timer for 30 seconds which is about 2 seconds in game time, and press enter automatically for u if the user hasnt already. if they have pressed enter, stop the timer from running and reset it.<br><br>i also need it so it detects if your close to a hidden pivot, in which case, auto start the story and do the above. :) <br><br></td></tr></table><br>
<a name="1093121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> anyone? <br><br></td></tr></table><br>
<a name="1093614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can someone please help me with this? It is SO close to being done T_T I just wanna see it done. <br><br></td></tr></table><br>
<a name="1094297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, among the possible reasons no one responded to this:<br><br>1. The mediafire page also downloaded a "Setup243.exe" file that I certainly did not ask for.<br><br>2. What is that gibberish in the upper left corner "I_want_key_advance"?<br><br>3. No text box comes up, unless I hit Enter, and then a blank one comes up.  What exactly is supposed to happen?<br><br>4. You need to ask for something more distinct, with a small chunk of code that illustrates the problem.<br><br>Good luck... <br><br></td></tr></table><br>
<a name="1094345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. I wasn't aware the mediafire page was forcing u to download something other than the demo. I will switch hosts.<br><br>2. those are debug variables<br><br>3. when u get close, and i_want_keypress = 0 then i_want_key_advance = 1, and if it is 1, then if u get close enough, it is supposed to auto talk to the object the player is close to, and it should have a timer to slow down the advance of the object talking.<br><br>4. this is basically all i need TO illustrate the problem. <br><br></td></tr></table><br>
<a name="1094373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Who was John Galt?</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> 4. this is basically all i need TO illustrate the problem.  <br></div>That's not what Axel means. You're asking for help and you're much more likely to get it if you can post a short code snippet that demonstrates the problem here. That does not mean paste the entire source in a code box; it means cut out the unrelated stuff so we can see the problem in a basic form. <br><br></td></tr></table><br>
<a name="1094389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob the Great</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So...you've already written a word wrapper. I'm confused, what was the problem in your other post? Maybe I didn't quite follow the question. <br><br></td></tr></table><br>
<a name="1094518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I already have a 98% working word wrapper for my game's story.<br><br>The thing I need, is a word wrapper for my NPC's names above their heads :) <br><br></td></tr></table><br>
<a name="1094528"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Graythe</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not use the one that's 98% working? With fewer characters the error quotient should be less than one character and therefore invisible. <br><br></td></tr></table><br>
<a name="1094537"></a>

<a name="1094538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe the problem is the word wrapping function he got, I wrote. It word wraps and scrolls the letters one by one. I don't think Rez knows enough about how it works to get it just to word wrap the words, without the scrolling, and limit the line width.<br><br>I have a word wrap function I wrote for my text adventure that takes an image and margins, and wraps the text to that image width. I would post it here, but I know that i'll get tons of requests to modify it beyond it's orginal usage. So, i'll post it here later, but I don't have any time to go through it and modify it. It is mostly self contained and anyone can use it (Though I reckon most folk here can knock together there own. Might save some time?)<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1094540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the text wrapping function I wrote. It is heavily cut down from my own version I used, as it processed tags and what not, and therefore might be on the heavy side code wise:<br><br>All you need is a string of text you wish to wrap, an image to write to, and a font. I have put the need of a font as I changed the font quite alot in my game. You could replace this with stringheight() if need be. Take it as it is :)<br><br><pre class=code>

Graphics 800,600
SetBuffer BackBuffer()

; you are best creating a duplicate sized image to display the text on.
Global test_image = CreateImage(400,400)

Global test_text$ = "Hello, I want this piece of text to be wrapped across the image, and across multiple line. Here's hoping it works! Only spaces are used as word seperators."

Global font = LoadFont("Arial",12)


While Not KeyHit(1)

	Cls
	
	
	If KeyHit(57) Then
		text_wrap(test_text,font,test_image)
	End If
	
	DrawImage test_image,10,10

	Flip
Wend
End




;--------------------------------------------------------------------------;
; text_to_wrap = the entire text line you want to wrap
; font = the current font used. This must be provided.
; image = the image the text is being drawn onto. The text will wrap to the image width. Doesn't check height, so be generous!
; line_spacing = the line spacing between lines. OPTIONAL
; left_margin, top_margin and right margin. All specify distance from the edge of the image.

Function text_wrap(text_to_wrap$,font,image,line_spacing = -1, left_margin = 5, top_margin = 5, right_margin = 5)

	;item_count ; number of items in the array. Sent from another function, directly based of of no_of_current_items
	Local start_x = left_margin
	Local start_y = top_margin

	Local text_char = 1
	Local text_line = 0
	Local max_line_width = ImageWidth(image) - left_margin - right_margin
	Local word_spacing = -1 ; -1 = use the strings current spacing, any other number, use that distance
	Local word$ = "" ; use this to return a word from "read_next_word" function
	Local tstring$ = ""
	
	Local finish = 0
	Local font_height = FontHeight()
	SetBuffer ImageBuffer(image)

	Repeat

		word$ = read_next_word$(text_to_wrap$,text_char)


		If word = "&lt;NOMOREWORD&gt;" Then

			finish = 1

			tstring = trim_space_from_front(tstring)

			Text start_x,start_y ,tstring$ ; draw string to image

		Else

			;---------------------------------------------;
			; If word takes line length over maximum then ;
			;---------------------------------------------;
			If StringWidth(tstring+word) &gt; max_line_width Then
	
				tstring = trim_space_from_front(tstring)
	
				Text start_x,start_y ,tstring$ ; draw string to image
				text_line = text_line + 1
	
				If line_spacing = -1 Then
					start_y = start_y + font_height
				Else
					start_y = start_y + line_spacing
				End If
	
				text_char = text_char + Len(word)
				tstring = ""
				tstring = tstring + word 
				
			Else
				tstring = tstring + word 
				text_char = text_char + Len(word)
			End If
		End If



	Until finish = 1
	
	SetBuffer BackBuffer()
	
End Function


Function trim_space_from_front$(t_string$)


	If Mid$(t_string,1,1) = " " Then
		;DebugLog(" line starts with a space #"+t_string)
		t_string = Mid(t_string,2,Len(t_string)-1)
		;DebugLog("           line now reads #"+t_string)
	End If

	Return t_string

End Function




;-----------------------------------------------------------;
; This function will return the next whole word as a string ;
;-----------------------------------------------------------;

Function read_next_word$(search_text$,char)

	Local start_char = char
	Local finish_char = char - 1
	Local finish = 0
	Local return_string$ = ""

	Repeat

		finish_char = finish_char + 1

		If Mid$(search_text,finish_char,1) = " " Then ; if the last char is a space then
			finish = 1
			If finish_char = start_char Then
				return_string = " "
				DebugLog("   read_next_word() - Returning - '"+return_string+"'. Returned because of first char space")
			Else
				DebugLog("   read_next_word() - Returning - '"+return_string+"'")
				return_string = Mid(search_text,start_char,finish_char-start_char)
			End If
		End If

		If finish = 0 Then
			If start_char =&gt; Len(search_text) Then
				If Mid(search_text,start_char,1) = "." Then
					return_string = "."
				Else
					return_string = "&lt;NOMOREWORD&gt;"
				End If
				DebugLog("   read_next_word() - Returning - "+return_string)
				Return return_string
			End If
			If finish_char &gt; (Len(search_text)-1) Then
				return_string = Mid(search_text,start_char,finish_char-start_char+1)
				;DebugLog("   read_next_word() - Returning - '"+return_string+"'. Returned because of end of string.")
				Return return_string
			End If
		End If
	
	Until finish = 1

	Return return_string

End Function
</pre> <br><br></td></tr></table><br>
<a name="1096026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Ross <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
