<!DOCTYPE html><html lang="en" ><head ><title >Extracting children?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Extracting children?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Extracting children?</a><br><br>
<a name="250283"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, now I'm on to something even better!  If we export an animated entity from 3DS Max (which works to solve my other problem of getting local coords, which should speed up the shadows system), does anyone know if it's possible to extract the children to be seperate entities.  Basically, it would be really cool if my artist could build the levels in 3DS Max and then Blitz just break down the one animesh into all the smaller parts and each of them have their own properties.  I'm working on it right now, but any help would be appreciated. <br><br></td></tr></table><br>
<a name="250287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can copy children entities, but I only get a new mesh if I copy the whole entity not just the children.  I can also use copy mesh on the whole entity, but not the children.  Perhaps if it was saved from max in a different way I could copy mesh on the children or get a mesh when I use copy entity on the children.<br><br>Right now we are just exporting the object as animation with the pivot at the center of the entity, not the world.  This is allowing me to get the correct local coords and indeed world coords.  Apparently, in Unwrap which we use to export to .b3d there is a bone at the origin.  Does anyone know if it would be better to actually place a parent mesh or another bone instead of whatever max does upon export as animesh?<br><br>By the way I tried EntityParent(GetChild(parent,i),0) and it doesn't take the mesh/child away from the parent entity. <br><br></td></tr></table><br>
<a name="250382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I didn't realize you were converting via Ultimate Unwrap.  One thing Ultimate Unwrap doesn't support (and which I've asked Brad about before) is pivot points.  Objects saved from Ultimate Unwrap have their pivots (ie. local coordinates) set to 0,0,0.  When I talked with Brad it didn't sound like he was going to implement support for pivot points but if a couple of us petition him he may change his mind.<br><br>Meanwhile, that the code snippet you posted doesn't work is probably because of incorrect syntax.  EntityParent doesn't take parentheses for its parameters; you should be writing<br><pre class=code>
EntityParent GetChild(parent,i),0
</pre> <br><br></td></tr></table><br>
<a name="250388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Parenthesis are optional and inclusion will have no effect where the function does not return a value. <br><br></td></tr></table><br>
<a name="250395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> In that case the problem must be the variables used because that code should make child numbered "i" of entity "parent" a child of the scene. <br><br></td></tr></table><br>
<a name="250447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityParent is not the problem.  The problem I think now is that you cannot export multiple meshes in a boned hierarchy from Unwrap.  I'm not even sure if .b3d format supports it.  I think the old .X format supports it but I'm not sure it supports other things we use.  I'll be checking into it.<br><br>What I want is to have a central bone/pivot with all the level objects being seperate children of the main bone.  Each of them can be bones with a mesh attached.  If there's a way to retain each mesh as an individual then we could load a .b3d file and turn all of it's children into seperate objects allowing the whole level to be built in 3DS Max and exported as one object but turned into many objects in Blitz for shadow/culling purposes.<br><br>I have a good work around idea but it's much more work for my artist.  I would like to streamline his art path. <br><br></td></tr></table><br>
<a name="250451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tested to try and extract just the mesh attached to a bone and to extract the whole bone as a child.<br><br>main bone -&gt; bone(Mesh)<br><br>The problem seems to be that the mesh isn't ever a child of the second bone.  The mesh always goes with the main entity.  So with .b3d you cannont extract a mesh attached to a child bone which is what I want to do.  Some test on the .X format may prove useful, but then you lose many features of .b3d.<br><br>Does anyone know if it would be possible for the .b3d to support the mesh deformation and also a frame hierachy where you can have many meshes in the 3D model each of which could be extracted as individuals with their own coordinates(which happens currently if you export from max as animated a bone is added at the origin and you can retrieve the correct coords). <br><br></td></tr></table><br>
<a name="250472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I refer you to my statement, "When I talked with Brad it didn't sound like he was going to implement support for pivot points but if a couple of us petition him he may change his mind."  Tell your artist to mention pivot point support to Brad and I will too; maybe he'll decide to do it when he sees that multiple people are asking for it.<br><br>I think the b3d file format already supports everything you are talking about, the limitation is in the tools for creating b3d files. <br><br></td></tr></table><br>
<a name="250477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, cool.  If the only thing missing is pivot points then it sounds good.  When you export from Unwrap it asks if you want to export as multimesh or single mesh.  However, you can't do multimesh with bones.  I assume this would be fixed with the pivot points?  We'll ask him about it though.  He's been really cool so far. <br><br></td></tr></table><br>
<a name="250488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually pivot point support has nothing to do with multiple meshes and bones.  From your earlier thread I imagine you would no longer need bones for your level if pivot points are supported.  Without support for pivot points the local coordinates of objects are set to global 0,0,0 when the scene is exported which, as I understand it, is why you are using bones.  With support for pivot points the local coordinates of objects would be preserved as set in 3D Studio Max.<br><br>The reason pivot points aren't supported right now is because of the fundamental "mindset" Ultimate Unwrap takes with scenes.  Instead of lots of separate objects (and logically each object would have it's own pivot point/local coordinates) scenes are understood as a polygon soup with various polygons grouped together.  What Brad needs to/should do is support pivot points for Groups, with the pivot of new groups defaulting to the global 0,0,0. <br><br></td></tr></table><br>
<a name="250496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That would work great.  Then we could export a multimesh scene with no bones, just each object having it's own pivot point.  Thus, I could run through that model and shadow certain children or make certain chilren pickable and indeed the children could be culled away when not in front of the camera even if another part of the scene was?<br><br>Originally, all I wanted was for the shadows to run fast.  Although, I have a solution before all scenery from max was postioned at 0,0,0 making it impossible to cull away vast numbers of polygons with range checks for shadows (probably collisions and picks too).  I need a quick method though that allows quick culling and quick export from Max.  Anyway like I said I've got a better system now, but the pivots would rock especially if each part of the model could be treated like a seperate mesh. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
