<!DOCTYPE html><html lang="en" ><head ><title >Minimize pauses the application, CPU still at 99%</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Minimize pauses the application, CPU still at 99%</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Minimize pauses the application, CPU still at 99%</a><br><br>
<a name="1055685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> The main problem is that I would like the application to keep processing stuff when minimized, and after searching around the boards on here I found that blitz3D will pause the application when the user minimizes to the taskbar no matter what. This I know well by now.<br><br>I'm still not understanding what's up with the CPU usage after it, why is that? I know the graphics flags 6 and 7 sort of solve this however, but if under normal windowed mode you still get 99% of CPU usage while "paused" then what gives? <br><br></td></tr></table><br>
<a name="1055703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> blitz3D will pause the application when the user minimizes to the taskbar no matter what <br></div><br><br>Uh... no it doesn't? Blitz3D only pauses when minimised if you use flags 6 or 7 - that's the entire difference between them and 2/3. <br><br></td></tr></table><br>
<a name="1055742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I keep getting the program "pausing" under mode 2. The delay is mostly noticeable on the frametimers taking their time to "catch up" on the time that was lost, and without any frame limiting code I get no updates the game code after a time while minimized.<br><br>Could be missing something but so far like I said I read on many threads that it's impossible to keep the game running while minimized, you being the only exception with what you just tell me. <br><br></td></tr></table><br>
<a name="1055746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, changed my mind.<br><br>Firstly, note that it's a parameter to Graphics, not to your program as a whole. I just tested this and am of the opinion that 6 and 7 pause graphical updates but not logical updates, i.e. RenderWorld or Flip do nothing but otherwise the program continues running as normal, because when defocused the image stayed frozen but immediately reverted to where it "should" be once it was refocused; minimising didn't seem to slow it down at all. By comparison of course in mode 2 things kept updating normally despite the loss of focus, and again showed no signs of slowing down when minimised. The FPS only seemed affected by the Windows transition animation and not the amount of time the window was minimised.<br><br>So... yeah. The application doesn't pause when minimised. If it does on your machine then this must be machine-specific, because it certainly doesn't on mine. Frankly I would take the continued processor use to mean it's not fully paused on your machine, and it's confusing the graphical updates only somehow. <br><br></td></tr></table><br>
<a name="1055936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried adding a "delay 1" right after Flip?<br>That should help the 99% cpu usage.<br>I believe there is a way to create a windowless b3d program.<br>Maybe you can find it, and work from there to a program tat runs when minimized? <br><br></td></tr></table><br>
<a name="1056276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think there's a Shell32.dll function that enables a check for whether or not an app is minimised etc. <br><br></td></tr></table><br>
<a name="1056377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Adding a 'Delay 20' in a loop that runs while the game is paused should solve the problem. As far as I'm aware, 20 milliseconds is the standard threading timeslice (at least for Windows XP). <br><br></td></tr></table><br>
<a name="1056493"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks once again, Bill. I often wondered if there was an 'ideal' value to use, typically I've used a range from about 1 to 25 but it's good to know there's a 'standard'. <br><br></td></tr></table><br>
<a name="1056781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> that is interesting to know, thx <br><br></td></tr></table><br>
<a name="1057734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> BTW there is one thing that I remember: When you minimize a Fullscreen app, then it will be minimized and indeed paused, I mean really paused, until it gets focus again. <br><br></td></tr></table><br>
<a name="1058001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Adding a 'Delay 20' in a loop that runs while the game is paused should solve the problem. <br></div><br><br>Sorry, but I just can't hold it...<br><br>BAD BAD BAD BAD BAD BAD BAD BAD BAD IDEA. XD<br><br>Actually it's not ALL bad. But 20 milliseconds is a terrible period choice. If a game's running at 60FPS, each frame will be 1000/60 milliseconds, which amounts to 16 and two-thirds. Rounded down, this means that essentially, a single frame shouldn't last longer than 16 milliseconds. Using <b>Delay 20</b> is going to slow it down below the 60FPS mark; 20 milliseconds is just too long.<br><br>The best way that I've yet found is to use some variable "CPU breathing code." That'd go something like this:<br><br><pre class=code>Global FrameTime = 1000 / 60
Global LoopStart


;Here's the main loop for the game...
While Not KeyHit(1)


LoopStart = MilliSecs()


;All your code for doing neat stuffz


;Take a breather
Delay FrameLength - (MilliSecs() - LoopStart)


Wend</pre><br><br><br>That code you just saw will use the <b>Delay()</b> function for any <i>remaining</i> time in your main loop, <i>but only up to the 16 millisecond mark.</i> <br><br></td></tr></table><br>
<a name="1058008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not too sure what difference framerate makes if the game is minimised and, as originally mentioned, effectively 'paused'? <br><br></td></tr></table><br>
<a name="1058079"></a>

<a name="1058080"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'm not too sure what difference framerate makes if the game is minimised and, as originally mentioned, effectively 'paused'? <br></div><br>Well, if the game is "hard paused," that is, paused by the actual minimizing of the window, then none of the code will execute, whether you have a <b>Delay()</b> call in there or not. So yeah, neither my code nor anything else will be any good if the window's minimized.<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1059282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then again, using Delay for the remaing time seems to be good practice. Although, waiting for a Vsync would do the same, I guess. But there are some Displays without Vsync. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
