<!DOCTYPE html><html lang="en" ><head ><title >Entityclass</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Entityclass</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Entityclass</a><br><br>
<a name="399304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone else agree entityclass should return "None" or something if you entityclass a nonexistent entity?<br><br>soo many times have i freed something leaving a variable with a non zero value, which causes havoc with my generic functions.<br>if entityclass(player)="NONE" then player=createplayer. etc etc etc...<br><br><br>argh<br><br>Or is there already a way to do this? <br><br></td></tr></table><br>
<a name="399314"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Entityclass??? <br><br></td></tr></table><br>
<a name="399315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whilst I do not know what "entityclass" is - can't you just set the value of the variable to zero immediately after freeing the entity. <br><br></td></tr></table><br>
<a name="399333"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Funny, Blitz3D IDE recognizes the command EntityClass() (it's blue and the first letters automatically capitalized), but I cannot find any info on the command in the help files.  I wonder if there are other Blitz3D commands I don't know about :-)<br><br>ETA: found this on the Blitz forum <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=EntityClass&amp;ref=3d_cat#comments" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=EntityClass&amp;ref=3d_cat#comments</a><br><br>ETA:  can't remember how to put in a link :/ Well, just cut and paste :)<br><br>ETA once more:  Oh, I just type in the link without any tags. <br><br></td></tr></table><br>
<a name="401156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Usually yes, but in a large project with loads of freeentities and loads of children meshes, its a problem<br><br>Alot of children meshes get deleted (or at least, seem to) when i freeentity the parent. For future projects its possible to write a routine to do it, but if Entityclass returns "none", it once again saves many people alot of time...<br><br><br>EntityClass(entity): Returns the class of an entity, (if its a light, mesh, sound, etc etc etc) <br><br></td></tr></table><br>
<a name="401157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Odds On</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could just use:<br><br>If player = 0<br>EndIf <br><br></td></tr></table><br>
<a name="401160"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, which is what im currently doing, but thats the point, player=0 does not always reflect an entity not existing, because when blitz frees an entity, it doesnt set the variable to 0 after. Entityclass()="None" would save much checking time in the future.<br><br>I do suppose however, that the "MAV" error is only caused with bad entities at the moment because it tries to access memory that does not belong to Blitz (to read the entities info). if this is the case then i think itd also be very hard to implement!!!<br><br><br>i still think itd be a brilliant addition.<br><br>Maybe this is just a personal thing then? heh...<br><br><br>At current, ive found a couple of my problems being down to storing Entities in Floats (which causes random errors in blitz. Interesting....) <br><br></td></tr></table><br>
<a name="401161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Alot of children meshes get deleted (or at least, seem to) when i freeentity the parent.<br> <br></div><br><br>Hmm dunno if this is a good thing or a bad thing.<br><br>What does EntityClass() return for null entities currently? '0' or "" or an error?<br><br>--------------------<br><br>I'd recommend what Falcon suggested, but changed slightly, maybe<br><br>If player&gt;0<br>EndIf <br><br></td></tr></table><br>
<a name="401163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> An error, which is the only reason i have a problem<br><br>The children being deleted is in my current project is a bad thing because i havent kept track of all the children... (entirely my fault)<br><br><br>Usually, children being deleted are a good thing, otherwise there would prolly be memory and entity leaks when deleting AnimMeshes. <br><br>Argh.. my head ¬.¬ <br><br>Well, this is down to my fault, but you have to admit, itd be useful <br><br></td></tr></table><br>
<a name="401165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah I understand ya fully now...<br><br>I guess you just have to add some more lines in to track your entities better, and probably add a bit ensuring the handle is reset on freeing them too. I cant think around it any other way right now. <br><br></td></tr></table><br>
<a name="401166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> How did you find EntityClass()??? <br><br></td></tr></table><br>
<a name="401171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm, Indeed, i have started writing...<br><br>Rook, i dont know actually... i saw it in use somewhere and wrote a demo of it to see what it did. i think i saw it in a particle system...!<br><br>And i also have changed my blitz documents to link to the help files here (as an option), so i would have found this in the end:<br><br>(same as link from above: <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=EntityClass&amp;ref=3d_cat" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=EntityClass&amp;ref=3d_cat</a> )<br><br>Does nobody recognise it then???? <br><br></td></tr></table><br>
<a name="401239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rook - versions.txt in your blitz directory tells about new commands not added to the help yet.<br><br>Also, there are quite a few undocumented commands, most not very useful - <a href="http://translate.google.com/translate?u=http%3A%2F%2Fwww.blitzbase.de&amp;langpair=de%7Cen&amp;hl=en&amp;ie=UTF-8&amp;ie=UTF-8&amp;oe=UTF-8&amp;prev=%2Flanguage_tools" target="_blank">http://translate.google.com/translate?u=http%3A%2F%2Fwww.blitzbase.de&amp;langpair=de%7Cen&amp;hl=en&amp;ie=UTF-8&amp;ie=UTF-8&amp;oe=UTF-8&amp;prev=%2Flanguage_tools</a><br><br>I think things with blue stars are undocumented.  Notable are Object and HAndle.  Handle gives you an integer referring to the type, and object allows you to retrieve the type.<br><br>Entity class returning none or "" when there is no entity would mostly be useful for writing libraries.  Sure, if you're writing a game it shouldn't be to hard to keep track of your entities, but it'd be nice to allow the users of your library to screw up and instead of crashing inform them in the debuglog. <br><br></td></tr></table><br>
<a name="401242"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityClass returning integer enumerators would be a lot nicer, in my opinion.  String comparisons are sometimes a bit off for me for some reason (I wrote a string comparison function that compares the ASCII-to-byte characters in a string because of it).  Anyhow, I agree that EntityClass should return something other than a MAV when encountering a nonexistant entity.  All Blitz has to do is cycle through all of its entities and check to see if any of them have the memory address of the one you're looking for- if not, return "None", "Nil", "Null", "", etc.. <br><br></td></tr></table><br>
<a name="401256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> you have to take into account that children entities are freed automatically when the parent is freed, so you have to delete their types when the parent is freed. <br><br></td></tr></table><br>
<a name="401258"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bot Builder I have been waiting for the ability to do those things... my game could have been written with types and would have been SOOOOOOOOO much easier to program the check routines!!! Oh well... it works OK!<br>:)<br>-RZ <br><br></td></tr></table><br>
<a name="401514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem with checking if an entity no longer exists is that the data area for the entity which the handle value points to no longer exists. And if you keep the data area for a deleted entity so that its existance state can be checked then you end up with a huge memory leak. <br><br></td></tr></table><br>
<a name="401531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Michael Reitzenstein</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  String comparisons are sometimes a bit off for me for some reason <br></div><br>A bit off!?<br><br><div class="quote"> All Blitz has to do is cycle through all of its entities and check to see if any of them have the memory address of the one you're looking for- if not, return "None", "Nil", "Null", "", etc.. <br></div><br>If it were that easy, it would have been done already. Mark explained why that wouldn't work in all cases in the last EntityExists( ) thread. <br><br></td></tr></table><br>
<a name="401819"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Axeman : I thought that be the case.. oh well!.. <br><br></td></tr></table><br>
<a name="401873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ronbravo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus, Why don't you just make your own delete entity function that would set the handle to zero<br><br>example:<br><br><br><br><br>Function DeleteEntity( EntityHandle )<br><br>     If EntityHandle &lt;&gt; 0<br>         FreeEntity EntityHandle<br>         EntityHandle = 0<br>     Endif<br><br>EndFunction<br><br><br><br><br><br>Now go into your code and replace all the blitz "FreeEntity" commands with your own "DeleteEntity" Function. Hope that helps. <br><br></td></tr></table><br>
<a name="401946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> mojokool - might work, if blitz supported passing parameters byref ;)  right now that function would not affect the variable being passed in.  which means you'd have to do something like<br><br>e=DeleteEntity(e)<br><br>and have "DeleteEntity" return a 0.  which is ugly. <br><br></td></tr></table><br>
<a name="401965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> That idea i have tried and DrakeX is correct.. this isnt a case of something i cant do without, its a case of something thatd speed things up in the future. Right now, my problem is almost solved in fact! <br><br></td></tr></table><br>
<a name="401976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If it were that easy, it would have been done already. Mark explained why that wouldn't work in all cases in the last EntityExists( ) thread. <br></div><br><br>Uh huh.  What kind of EntityExists are you referring to here?  I'm talking about the kind that tells you whether or not an entity occupies the memory address you provide it, not the kind that magically knows what entity that should be there.<br><br>Edit: And just to note, the kind I'm talking about I currently have implemented in my own engine, and it does what I want it to: tells me that an entity is occupying a particular space. <br><br></td></tr></table><br>
<a name="401995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> "just make your own delete entity function that would set the handle to zero"<br><br>That doesn't help in a lot of cases because there is no way to get at all the handles to a given entity.  For example, imagine an RTS game and you want when you select a unit and have it target another unit, the handle of the targetted unit is stored as a type field with the selected unit.  Now if the targetted unit is destroyed (not by the selected unit) how do you work backwards to know all the units that had it targetted?  You can't, so you can't have a delete function which sets all handles to that entity to 0.  Doh!<br><br><br>"The problem with checking if an entity no longer exists is that the data area for the entity which the handle value points to no longer exists. And if you keep the data area for a deleted entity so that its existance state can be checked then you end up with a huge memory leak."<br><br>Why does it matter if a data area for the entity exists?  That is necessary to tell you if the entity EVER existed, but not necessary if you don't care about the past and only about the present (ie. does the entity currently exist?)  Just look at the data in the memory address passed to the function; if it is not a valid entity return Null or 0.<br><br><br>ADDITION: Oh, and I am doing this right now with a bit of roundabout code involving types.  While attempting to access an entity that no longer exists gives you a MAV, attempting to access a type instance that no longer exists just returns Null.  Thus, create a type with the handle of an entity as a field.  Whenever you create a new entity, first create a new type instance and then set the handle of the new entity to the field of the type instance.  Now use Handle() to get the handle of the type instance and use that handle with Object() to access the type instance directly (instead of the entity directly.)  Now when you free the entity delete the type instance; any time you refer to that deleted type instance, you'll get Null.<br><br>For example of what I mean, you wouldn't pass the handle of an entity to a function, you pass the handle of a type instance.  Then in the function check if the type instance exists and if so get the entity handle stored in the type instance.  Now do whatever you need to do with the entity. <br><br></td></tr></table><br>
<a name="402111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> What mark should do is have a list of handles for existing entities and then on an entityclass call go through the list and see if there is an entry. simple enough.  Might be a bit slow once you got a really large amount of entities but ohwell.  This would also allow you to loop through all the entities in existance. <br><br></td></tr></table><br>
<a name="402193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh can't test this while Im at work, bnut I just thought...<br><br>COuld you have your own EntityClass function?<br><br>based on EntityName$ perhaps and set this to something relevant at the creation/loading every mesh? <br><br></td></tr></table><br>
<a name="402220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe thats an idea but im not too sure i understand what you mean.. Also, im using EntityNames to seperate surfaces of a mesh into "explodable" parts of meshes... (so the ships explode into many parts)<br><br>I could create new load/create routines, but as of last night, I managed to iron out my problem. <br><br>I intend on writing a "lib" type routine where you "addentity" to a list, and and to remove it, use the seperate "removeentity" or "deleteentity" commands, which checks for the entity and if it still exists. if not, i can do what i require from there. The basis for this is in a script engine im currently working on.<br><br>there are quite a few interesting ideas to go through actually. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
