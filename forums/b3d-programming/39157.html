<!DOCTYPE html><html lang="en" ><head ><title >Change Texture on mesh does not work</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Change Texture on mesh does not work</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Change Texture on mesh does not work</a><br><br>
<a name="436287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nikko</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all<br><br>When I try to assign a different texture to a previously textured mesh, I can't remove the old texture to replace ti with the new one.<br><br>Let's say .<br><br>t1=Loadtexture("tex1.jpg")<br>entitytexture cube,t1<br>freetexture t1<br>t2=Loadtexture("tex2.jpg")<br>entitytexture cube,t2<br><br>This does display the old t1 texture and not teh new one. <br>Am I doing a mistake somewhere. <br><br></td></tr></table><br>
<a name="436288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you can do that. Texture over a prevoiusly textured mesh. I'm not sure tho... <br><br></td></tr></table><br>
<a name="436300"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nikko</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> so if I do a mesh editing sofware for example, each time I assign a texture to a mesh (to test if the texture is ok or not) I need to clear the mesh and re load or recreate it???<br><br>Amazing! <br><br></td></tr></table><br>
<a name="436307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not true at all<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 640,480,32,2
cam = CreateCamera()
lit = CreateLight()
cube = CreateCube()
PositionEntity lit,0,0,-10
PositionEntity cam,0,0,-10
t1=LoadTexture("shingle.png") 
EntityTexture cube,t1

While Not KeyDown(1)

 If KeyDown(16) Then
   FreeTexture t1 
   t2=LoadTexture("max.png") 
   EntityTexture cube,t2 
 EndIf

 RenderWorld
 Flip
Wend
End
</textarea><br><br>Works perfectly here! Perhaps posting a more complete code sample which demonstrates the problem. It's easy to miss something obvious! <br><br></td></tr></table><br>
<a name="436316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nikko</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is the source code (the application is very big with a complex user interface, so the code will not work as this).<br><br>; this idea is to apply a filter (like seamless, blur, HSV, Bump, contrast etc...) to a texture and display the result in real time on a 3d model.<br><br>; clean the previously loaded textures and imags<br>If originaltexture&lt;&gt;0 Then FreeTexture originaltexture <br>If originalimage&lt;&gt;0 Then FreeImage originalimage<br>If processedtexture&lt;&gt;0 Then FreeTexture processedtexture <br>If processedimage&lt;&gt;0 Then FreeImage processedimage EndIf<br><br>; I load the the texture and the image (both 2d and 3d results are shown<br>processedtexture=LoadTexture(tmpcurrent$)<br>processedimage=LoadImage(tmpcurrent$)			<br><br>;get the address of the texture and image buffers<br>processedtexturebuffer = TextureBuffer(processedtexture)<br>processedimagebuffer = ImageBuffer(processedimage)<br>; here I call the filters that will process the image internaly<br>ProcessBuffer(processedtexturebuffer)	<br>ProcessBuffer(processedimagebuffer)	<br><br>; now if I display the processed result like this <br>EntityTexture Cube,processedtexture<br>EntityTexture Sphere,processedtexture<br><br><br>Each time I change the filters I create a new texture and I want to remove the old one and replace with the new one. So I call the code above to <br>1-clear the old textures and image (because I display the 2d and 3d results<br>2-load the original texture and image<br>3-apply the filters to both of them<br>4-use entitytexture to change the 3D sample.<br><br>The 2D image is refreshed correctly, but the 3d model keep always the first processed texture.<br><br>1- I display the original : it works.<br>2- I display the processed result : it work<br>3- * nothing else will work then even to display back the original.<br><br>It seems like if the texture can be changed if the variable name changes (processedtexture &lt;&gt; originaltexture)<br>But if I freetexture the processedtexture and load another one, it is like if the freetexture was working only for memory but not for VRAM and that the model is still with the freeed texture...<br><br>I hope it is clear... it is not easy to explain. <br><br></td></tr></table><br>
<a name="436318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's because when you add a texture, blitz adds it to the first empty texture slot, and then incs the index by 1.<br><br>So when you retexture over it, you're in fact setting the second texture.(That's my theory anyway.)<br><br>Anyway, just do this, I have done hundreds of time and it defnitely works.<br><br>EntityTexture MYEntity,MyTexture,0,0 ;Last par=texture index. first 0 =frame number. Always leave that at zero unless you're using a animated texture.<br><br>Then, just call the same thing to replace it,<br><br>EntityTexture myEntity,newTexture,0,0 <br><br></td></tr></table><br>
<a name="436335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for the inaccurate help :o( <br><br></td></tr></table><br>
<a name="436360"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nikko</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well I must say that you are right, the bug must come from somewhere else in my program. I've made 2 programs to stress test the textures and it works perfectly...<br><br><br>Here are they with the media included.<br><a href="http://www.nikkopay.com/blitz/testtextures.zip" target="_blank">http://www.nikkopay.com/blitz/testtextures.zip</a> <br><br></td></tr></table><br>
<a name="436379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> SpacedMan is wrong.  Blitz doesn't increment the texture index. <br><br></td></tr></table><br>
<a name="436382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm never wong. <br><br></td></tr></table><br>
<a name="436437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> My experiments to re-texture entities (or terrains) found  only possible if each new texture had a different name. <br><br></td></tr></table><br>
<a name="437037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, if you are oading a texture twice (and even if you edited the file meanwhile) blitz will make use of optimized vram usage and use the first texture instead - at least IF both textures use the same flags.<br><br>What you describe sounds very much like a bug in your code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
