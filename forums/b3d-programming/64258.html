<!DOCTYPE html><html lang="en" ><head ><title >md2 size</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >md2 size</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >md2 size</a><br><br>
<a name="717111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a way of obtaining the W,D,H of a md2 <br><br></td></tr></table><br>
<a name="717147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Blitz3D, AFAIK there is no way. However, maybe you could try and use a 3d modeller to find out the width/height/depth of the model. <br><br></td></tr></table><br>
<a name="717152"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I would do either this and then save it into a file and do a "MD2Type" or something where you save this information.<br><br>Or you do what others did with BSP for example: hack the information out of the file (because somewhere it must be otherwise the cull wouldn't work) <br><br></td></tr></table><br>
<a name="717174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just specify it in the first place....with scaleentity.<br>Scale it with variables then track those variables.<br>Maybe that's oversimplifying things. What do I know? <br><br></td></tr></table><br>
<a name="717192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That makes no sense unless the original model has a size of 1,1,1 when loading <br><br></td></tr></table><br>
<a name="717252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you not just loop through all the vertices in the loaded model and get the max value for each axis from the model origin? <br><br></td></tr></table><br>
<a name="717362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No. It makes perfect sense if you know what effect the scaling has on your model. Simple trial and error. But I don't know what the OP is trying to accomplish so I'll leave it at that. <br><br></td></tr></table><br>
<a name="717702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rrof : you cannot access the vertices of an md2. Doggie is right, you need to multiply the scaleentity size * the original size.<br><br>Since MD2 supports collision, (if I recall right), there is a third, quick'n'dirty way to determine it's absolute size in space:<br><br>use a simple cube that moves towards the md2 and checks for collision. do this from all 6 directions, this will tell you the true size. Practically you'd pack this into a handy function that will create and remove the cube mesh etc.<br><br>For extra high accuracy you may use a binary search of the points of collision. This will take you only 32 steps to get the point with about 0.0005 units accuracy. <br><br></td></tr></table><br>
<a name="718369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BIG BUG</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is a coding for loading MD2.<br>I used it to test my exporter for C4D, so it's quick and dirty.<br><br><pre class=code>

Const c_model$ = "gargoyle.md2"
Const C_DIV# = 1.0


Dim mesh(255)
Dim surface(255)
Dim texU#(4047)
Dim texV#(4047)

Dim CheckTriangle(1023)


Graphics3D 640,480,32,2
SetBuffer BackBuffer()
camera=CreateCamera()
CameraClsColor camera, 128,128,128

light=CreateLight()
PositionEntity camera,0,30,-80



brush=CreateBrush(255,255,255)


CameraRange camera, 1, 1000




datei = ReadFile(c_model$)
If Not datei RuntimeError "Datei nicht gefunden" 


       Print int2text$(ReadInt(datei))  ;identifier
       Print ReadInt(datei)             ;version
skinwidth  = ReadInt(datei)            ;SkinWidth
skinheight = ReadInt(datei)            ;SkinHeight
 FrameSize = ReadInt(datei)            ;FrameSize
 numSkins  = ReadInt(datei)            ;numSkins 
 numVertex = ReadInt(datei)            ;numVertices
 numTexCoords = ReadInt(datei)            ;numTexCoords
 numTriangle = ReadInt(datei)            ;numTriangles
 numGl       = ReadInt(datei)            ;numGlCommands
 numFrames = ReadInt(datei)            ;numFrames 
 offSkins  = ReadInt(datei)            ;offsetSkins
 offTexCoords = ReadInt(datei)            ;offsetTexCoords
 offTriangle = ReadInt(datei)            ;offsetTriangles
 offFrames = ReadInt(datei)            ;offsetFrames
 offGl     = ReadInt(datei)            ;offsetGlCommands
       Print ReadInt(datei)            ;offsetEnd    

 Print offFrames

 Print numTexCoords
 Print numVertex


;  read frames 

   SeekFile(datei, offFrames)

   For Frame = 1 To numFrames

      mesh(Frame)=CreateMesh()
      surface(Frame)=CreateSurface(mesh(Frame),brush)

      scalez# = ReadFloat#(datei)            ;scalez 
      scalex# = ReadFloat#(datei)            ;scalex    
      scaley# = ReadFloat#(datei)            ;scaley  
 
      posz# = ReadFloat#(datei)            ;posz 
      posx# = ReadFloat#(datei)            ;posx  
      posy# = ReadFloat#(datei)            ;poxy 


      Print int2text$(ReadInt(datei))   ;tex1
      Print int2text$(ReadInt(datei))   ;tex2
      Print int2text$(ReadInt(datei))   ;tex3
      Print int2text$(ReadInt(datei))   ;tex4

;     read vertices
      For Vertex = 1 To numVertex
         z# = (ReadByte(datei) * scalez# + posz#) / C_DIV#  ;z
         x# = (ReadByte(datei) * scalex# + posx#) / C_DIV#  ;x
         y# = (ReadByte(datei) * scaley# + posy#) / C_DIV#  ;y

         light = ReadByte(datei)
         v0 = AddVertex(surface(Frame),x#,y#,z#)

      Next


   Next


;  read UV
   SeekFile(datei, offTexCoords)

   For uv_coord = 0 To numTexCoords-1
       
       texU#(uv_coord) = ReadShort(datei) / Float(skinwidth)    ;U     
       texV#(uv_coord) = ReadShort(datei) / Float(skinheight)   ;V

   Next 
   
;  read triangles and build surface
   SeekFile(datei, offTriangle)

   For tri = 1 To numTriangle

       v0 = ReadShort(datei) ;vertex-index 1
       v1 = ReadShort(datei) ;vertex-index 2
       v2 = ReadShort(datei) ;vertex-index 3

       t0 = ReadShort(datei) ;UV-Index 1
       t1 = ReadShort(datei) ;UV-Index 2
       t2 = ReadShort(datei) ;UV-Index 3

       For Frame = 1 To numFrames

           AddTriangle(surface(Frame),v1,v0,v2)

           VertexTexCoords surface(Frame), v0, texU#(t0), texV#(t0)
           VertexTexCoords surface(Frame), v1, texU#(t1), texV#(t1)
           VertexTexCoords surface(Frame), v2, texU#(t2), texV#(t2)

       Next


   Next


;  GL lesen
   SeekFile(datei, offGl)

   For gl_group = 1 To numGl

       num_UV = Abs(ReadInt(Datei))


       For gl_uv = 1 To num_UV

          coord_U#  = ReadFloat(Datei)
          coord_V#  = ReadFloat(Datei)
          index_tri = ReadInt(Datei)

          For Frame = 1 To numFrames
 
;              VertexTexCoords surface(Frame), index_tri, coord_U#, coord_V# 
   
          Next    
 
       Next

   Next 

;  Skins lesen
   SeekFile datei, offSkins
   Print "------"
   For skin = 1 To numSkins

       For i = 1 To 16
          Print int2text$(ReadInt(datei))   ;tex1
       Next
       Print "------"
   Next

   Print SkinWidth

   CloseFile(datei)

Print "FrameSize:" + FrameSize
Print "NumFrames:" + numFrames

   For Frame = 1 To numFrames
        UpdateNormals mesh(Frame)
   Next

;  load model with b3d-loader for easy comparison
   mesh(0) = LoadMD2(c_model)
   If tex &lt;&gt; 0 Then EntityTexture mesh(0), tex

Print "Hit Enter to continue"

WaitKey()

WireFrame 0

auswahl = 1

AnimateMD2 mesh(0),2,2;,1,0,10


While Not KeyHit(1)


   For Frame = 0 To numFrames
       HideEntity mesh(Frame)
   Next

   ShowEntity mesh(auswahl)
   RotateEntity mesh(auswahl),hpitch#,hyaw#,hroll#

   TurnEntity mesh(auswahl),KeyDown(203)-KeyDown(205),KeyDown(200)-KeyDown(208),KeyDown(44)-KeyDown(45)

   hpitch# = EntityPitch(mesh(auswahl)) 
   hyaw#   = EntityYaw(mesh(auswahl))
   hroll#  = EntityRoll(mesh(auswahl)) 

   If KeyHit(201) Then auswahl = auswahl - 1
   If KeyHit(209) Then auswahl = auswahl + 1

   If auswahl &lt; 0         Then auswahl = numFrames
   If auswahl &gt; numFrames Then auswahl = 0

   MoveEntity camera, 0,0,KeyDown(78)-KeyDown(74)


UpdateWorld
RenderWorld

Text 5, 5, "Use Page Up/Down to switch between animation frames"
Text 5, 20, auswahl
Flip 1
Wend
End



Function int2text$(I)

   Local txt$
   Local l

   For l = 0 To 3

      txt$ = txt$ + Chr$((i Shr l*8) And $FF) 

   Next
   Return txt$
 
End Function
</pre> <br><br></td></tr></table><br>
<a name="719328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm,<br><br>Ill find a way, thanks for the code ill take a look at that later. And for everones help &amp; ideas.<br><br>Unfortunately the package idea is not an option as its a package im writing. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
