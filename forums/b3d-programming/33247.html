<!DOCTYPE html><html lang="en" ><head ><title >wraparound terrains</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >wraparound terrains</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >wraparound terrains</a><br><br>
<a name="358048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am trying to create a wrap-around terrain. I have my main terrain which has been scaled by 256x256 in the x/z dimensions.<br><br>then I CopyEntity 8 times to place copies around the main terrain in a 3x3 grid.<br><br>Is there a default scale for the initial terrain, because I need to know where to place the other terrains to align with the original.<br><br>If the original is at 0,0, the X=0, Z=0 corner is at 0,0 so the other terrains should be placed at...<br><br>-256+XX,-(256+XX)<br>0,-(256+XX)<br>256+XX,-(256+XX)<br><br>-256+XX,0<br>256+XX,0<br><br>-256+XX,256+XX<br>0,256+XX<br>256+XX,256+XX<br><br>The value I am after is XX<br><br>(hope you can understand this!)<br><br><br>The other terrains dont show up :((( <br><br></td></tr></table><br>
<a name="358204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz terrains?  You can not copy a blitz terrain. You need to create them separately. From memory the default size is the grid size which is then multiplied by the scale. I'm not sure the idea of using multiple blitz terrains like that is a good one performance wise though I suppose it may be OK on a fast PC. <br><br></td></tr></table><br>
<a name="358220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeppe Nielsen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Perhaps TerrainSize(terrain) , is what you're looking for? <br><br></td></tr></table><br>
<a name="358265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The idea is to have a 3x3 grid of identical terrains so that even though the view appears to be wrap-around, the camera will actually shift to the opposite end each time it reaches the boundaries of the central (original) terrain. So the player can traverse what appears to be a planet's surface infinitely in any direction.<br><br>I couldn't think of better ways to approach this...<br><br><div class="quote"> <br>From memory the default size is the grid size<br> <br></div><br>What is the grid size? Is this relative at all to the pixel size of the heightmap? <br><br></td></tr></table><br>
<a name="358322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it's the same, if you load a 64x64 heightmap the terrainsize will be 64x64.  This is in the docs. <br><br></td></tr></table><br>
<a name="358346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahh, so in fact my terrain is 256x256 X 256x256<br><br>I think it would be okay to have so many, because I am using lots of fogging - I hope so any way)<br><br>Otherwise...does anyone know of an alternative to this method? <br><br></td></tr></table><br>
<a name="358352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice,<br><br>Why don't you create a 512 x 512 heightmap but keep the original 256 x 256 in the middle and copy sections of it to pad out the bigger one.  Then you only need one terrain.  Basically then you can use something like this (haven't tested as at work) ...<br><br><pre class=code>
If player_x &lt; 128 player_x = 384 + ( player_x - 128 )
if player_x &gt; 384 player_x = 128 + ( player_x - 384 ) 
</pre><br><br>Not sure if this makes sense but I have an code example of this if you want and it works quite well.<br><br>Stevie <br><br></td></tr></table><br>
<a name="358354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah that's what I was going to do, but didnt't think of re-sizing the heightmap! Thanks Stevie -  was wondering actually because you would have needed to do something similar for your Zarch remake! <br><br></td></tr></table><br>
<a name="358357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did try it this way initially but it didn't work too well for me as it looked too realistic when textured?!  I just used my own custom terrain so that I could use individual vertex colors to get the retro shading.<br><br>Anyhoo, I wrote a function that enlarges a 256x256 heightmap is you have any trouble with it.<br><br>Stevie <br><br></td></tr></table><br>
<a name="358363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! Thanks loads, could you provide that function for me? It's just the theory seems straightforward enough, but we all know what that means when it comes to practice :) <br><br></td></tr></table><br>
<a name="358367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> At work and out on the piss later but will send you this tomorrow at some stage if you can wait? <br><br></td></tr></table><br>
<a name="358371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure - I got similar plans for today and this evening! have a good'n! <br><br></td></tr></table><br>
<a name="358769"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This should do what you want ..<br><br><pre class=code>
Function wrap_image(image$,wrap$)

	i = LoadImage(image$)
	n = CreateImage(512,512)

	CopyRect 0,0,256,256,128,128,ImageBuffer(i),ImageBuffer(n)
	CopyRect 0,128,256,128,128,0,ImageBuffer(i),ImageBuffer(n)
	CopyRect 0,0,256,128,128,384,ImageBuffer(i),ImageBuffer(n)
	CopyRect 128,0,128,512,384,0,ImageBuffer(n),ImageBuffer(n)
	CopyRect 256,0,128,512,0,0,ImageBuffer(n),ImageBuffer(n)
	
	FreeImage i
	SaveImage (n,wrap$) 
	
	Return n

End Function

</pre> <br><br></td></tr></table><br>
<a name="469976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ion-Storm</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> BEWARE: Infinate terrains will make numbers VERY VERY big very quickly. ! <br><br></td></tr></table><br>
<a name="470068"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Lane</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been trying to figure out how to do this efficiently as well. I read in other posts that when using multiple terrains or Mesh's there are serious issues with the edges of the terrains and mesh's not lining up properly and a large crack showing. <br>It would seem as though Blitz already uses the height map information to set the height of the vertex's on the terrain rather then as they come into visible range. If that is correct than one should(in theory) be able to access the heigh map memory and rewrite the values so that the height map memory space is treated as a window of the height map information. You would then shift the existing data and add new data at the approaching edge. This is the basic speed versus amount of memory used trade off. I have not found a way to access the heigh map memory so I havn't tested weather this would be faster than having multiple terrains or mesh's and loading the new mesh data as the player approaches the edge of the old mesh.<br><br>Has anyone done a complete testing of the code possibilitys for Infinate or Very Large terraigns? <br><br></td></tr></table><br>
<a name="470778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ion-Storm</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> do a search for "infinate terrain" in code archives <br><br></td></tr></table><br>
<a name="470872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I read in other posts that when using multiple terrains or Mesh's there are serious issues with the edges of the terrains and mesh's not lining up properly and a large crack showing"<br><br>ModifyTerrain might help : <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=ModifyTerrain&amp;ref=goto" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=ModifyTerrain&amp;ref=goto</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
