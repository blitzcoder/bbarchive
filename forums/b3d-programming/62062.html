<!DOCTYPE html><html lang="en" ><head ><title >Hardware bump mapping demo</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Hardware bump mapping demo</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Hardware bump mapping demo</a><br><br>
<a name="693645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>Been *exploring* bump mapping via the DLL, it's not DOT3, it's the other type, I think environmental bump mapping?<br><br><div class="quote"> Bump mapping in Direct3D can be accurately described as "per-pixel texture coordinate perturbation of specular or diffuse environment maps," because you provide information about the contour of the bump map in terms of delta-values, which the system applies to the u and v texture coordinates of an environment map in the next texture stage. The delta values are encoded in the pixel format of the bump map surface. <br></div><br><br>Strangely, I didn't have to create a specific bump map, instead I just converted a grayscale map using NVidias PS DDS tools to a U8V8 map and saved it as a bitmap.<br><br>Uses 2 commands you must call before and after a RenderWorld() that forces the 2nd texture layer to use bump mapping during the call.<br><br>www.tomspeed.com/embm.rar<br><br>Move in close to the surface and look towards the edge, this could make for some kick ass water huh?<br><br>Frame rate is a wopping 900+ here! So so long as your card supports it via hardware (should be widely supported) it's a nice free effect :)<br><br>More info to follow<br>Tom <br><br></td></tr></table><br>
<a name="693646"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This wasn't here a minute ago. <br><br></td></tr></table><br>
<a name="693647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mmmm... cool.<br><br><br>300 FPS here, on Radeon 9600 Pro.<br>No idea what version of that gd Catalyst driver thing I'm running on, and I'm afraid to use the Control Center thing to check. <br><br></td></tr></table><br>
<a name="693649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats what I was trying to do when I was asking about the Render states of you dll ;)<br><br>Embm isnt really a good name for it,,,while it can do enviromental bumpmaps. it can do many other bump effects.<br>"Preturbed surface" should be what its called.<br><br>yeah you only need a heightmap, but a geyscale verion of the same texture will create a bumpy effect...but a heightmap is better :)<br><br>it will be easier to generate cubemap lights with color than with dot3...this is good stuff.<br><br>*edit<br>It should run on geforce3+(geforce2 left it out)  and any radeon class (even 7000) , matrox and kyro2.<br><br>Sam <br><br></td></tr></table><br>
<a name="693653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd be brutally honest here - I'd rather you came up with a useable solution for DOT 3.  You can still work on this too - just come up with a better implementation of DOT 3 too.<br><br>Right, everyone is happy.  Next week is fine by me. <br><br></td></tr></table><br>
<a name="693654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> something isnt right, i only get 500-700fps. <br><br></td></tr></table><br>
<a name="693656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> We should summon Mark and force him to do something to make the DX7Test DLL completely trustable for full projects.<br><br>...Either that or put its functionality straight into B3d.<br><br>It's a shame that this sort of stuff, in its current incarnation, can't safely go far beyond a tech demo. <br><br></td></tr></table><br>
<a name="693657"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I'd rather you came up with a useable solution for DOT 3. You can still work on this too - just come up with a better implementation of DOT 3 too. <br></div><br><br>What did your last slave die of? :O) <br><br></td></tr></table><br>
<a name="693659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> we are all his slaves.... <br><br></td></tr></table><br>
<a name="693666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skyfire1</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could someone post some screenshots? I'm using linux right now. <br><br></td></tr></table><br>
<a name="693667"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Tom" will attend to this request. <br><br></td></tr></table><br>
<a name="693668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I messed around changing the Textures and..<br>I think your texture stages may be in the wrong order Tom, <br>it seems to be getting the  surface data from the cube map not the bump texture?<br><br>In other programs I would do it like this:<br>(for example in Quest3d)<br><br>Stage1 diffuse texture<br>stage2 bump texture<br>stage3 enviroment or lightmap.<br><br>that runs fine on a radeon7000 or a kyro2<br>but its dx8...so it might be a little different.<br><br>Sam <br><br></td></tr></table><br>
<a name="693671"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mistakes will not be tolerated. <br><br></td></tr></table><br>
<a name="693674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Zmatrix: That demo isn't really showing it off well, I'll up a match for the DX7 sample in a while. Looks similar, except for the spherical enviroment map which looks odd. <br><br></td></tr></table><br>
<a name="693683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> gonna release some b3d code&gt;? ;)<br><br>I was gonna ask about the shpereical map, are you sure embm supports cubemaps correctly?<br><br><br>Sam <br><br></td></tr></table><br>
<a name="693686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom, it looks great with a proper cubemap, the one in your demo is messed up. If you need one let me know :) <br><br></td></tr></table><br>
<a name="693703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice one Tom! <br><br></td></tr></table><br>
<a name="693730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..cool..I'm looking forward to see this also included in to final composition in one DLL.. <br><br></td></tr></table><br>
<a name="693746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was just watching Galaxy Quest the other day...and when I heard the guy say "Raving Egomaniac" I couldn't help but think of puki... <br><br></td></tr></table><br>
<a name="693761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Puki will use 'force choke' like Darth Vader <br><br></td></tr></table><br>
<a name="693768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom, ignore earlier posts...It looks right on my Radeon..on the geforce6800  the Cubemap is stretched out and banded.<br>how does it look for you Ross C (seeing you have a geforce also)<br><br>Sam <br><br></td></tr></table><br>
<a name="693772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Coooooool...! On my laptop it looked bit "stretched out and banded", have to check how it looks on my work machine when I get there. But this would be a good addition as DOT is hard to use and mostly useless anyway because there's no tangent space support.<br><br>[edit]<br><br>OK, at work... it looks on my GF7800FTX very different, more right I guess. If Fred is right then the weirdness that's left comes from the cubemap. I'm really looking forward to get the "proper" demo!<br><br>EMBM:<br><br><div class="quote"> <br>Bump Mapping<br><br>This is a method where the flat image of a texture map is altered to give the impression of being non-smooth but without changing the physical shape of the surface. Bump mapping is becoming more popular in 3D games because it can be used to add small scale detail (such as wrinkles, creases, scuff marks, etc) without the need to add extra polygons.<br> <br>It does this by using another texture map (sometimes called a bump map) to change the brightness of the pixel in the main texture on the surface. There are various methods of bump mapping - 3 such popular ones are: <br><br>Emboss: <br>the bump map is called a height map - it is a simple greyscale version of the texture to be bumped, whereby the texel values are used to alter the colour of the original pixel. The height map is rendered twice, with the second one moved slightly. The two maps are then combined together, in such a way that the resulting new bump map is the difference between the two. This is then multiplied with the required base texture. <br><br>DOT Product 3: <br>the bump map is called a normal map - this texture contains values that alter the surface normals of the original pixels. A surface normal is like an arrow that points in the direction that the surface is facing in; as it angles away from a light source, the colour of the pixel gets darker (and vice versa). This method generally gives better results than embossing but at a greater cost to performance. <br>Direct3D offers a "set" dot 3 bump mapping routine but a more general method exists too; normal mapping basically uses the same process but it is done via a programmable pixel shader. <br><br>Environmental: <br>this method uses a mixture of techniques, embossing, and environment mapping. A height map is created (as described above) and then blended with the original base texture; this is then followed by blending this result with an environment map (which can be anything from a simple lightmap to a complex cubic map) to give the final bumped surface. <br>It should be noted that bump mapping never alters the position or amount of vertices in the surface. Edge-on views and shadows can spoil the illusion but more complex bump mapping procedures can help to reduce this problem. <br> <br></div> <br><br></td></tr></table><br>
<a name="693924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Phalastos</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Tom,<br><br>i can´t see any objects on the screen. <br>I see a blue background and 2 lines with text.<br><br>EDIT : ( thanks Zmatrix )<br><br>ATI Radeon 9100 64MB VRAM / WIN98se <br><br></td></tr></table><br>
<a name="693931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> What Graphics card do you have Phalastos?<br><br>@Mustang, <br><br>Embm has been around since DX6 if im not mistaken? on the Kyro series of cards they called it preturbed UV?.<br><br>if used with a enviroment map ( such as here) its looks like a refracting wet or shiney bumpy surface.<br>with a lightmap it looks alot like Dot3 (more like dot3 with specular component)<br><br>it was over looked/under used becuase of card limitations when it was implimented.<br>3 texture stages was heavy on older cards,(some had to do it in 2 passes)<br>the Env maps had to be low res because of memory limits.<br>And its biggest downfall...the most popular dx7 cards the geforce1/2 didnt support it.<br><br>Its used on some gamecube games(mainly for water), and I think a few Dreamcast games used it also. <br><br>there may be more limitations on it, Im not sure (I didnt think it could be Mipped, but Toms demo apears to do just that) <br><br>But at worst..we can have some pretty water in B3d..heh ;)<br><br>Tom,<br>I have the "Dx7 d3d bumpmap compare" demo/source From powerVR<br>its a embm/emboss/dot3 comparision.<br>pretty clean , even I can follow it...lol <br>I can seem to find it on the Web anymore...but i could email it to you if you would like.<br><br>Sam <br><br></td></tr></table><br>
<a name="693933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey, i'm looking forward to see the source code?<br>could you give it to us, please? <br><br></td></tr></table><br>
<a name="693948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, i haven't updated my specs. I'm running a radeon 9800 pro now. Works fine on it :o) <br><br></td></tr></table><br>
<a name="694468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> source &amp; new demo here:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=62128" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=62128</a> <br><br></td></tr></table><br>
<a name="694470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Woof, woof <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
