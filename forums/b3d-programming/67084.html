<!DOCTYPE html><html lang="en" ><head ><title >"Cartoon shading" with cubemaps - how?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >"Cartoon shading" with cubemaps - how?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >"Cartoon shading" with cubemaps - how?</a><br><br>
<a name="749153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been looking at the old spherical mapping technique used to approximate cel shading (the lighting effect rather than outlining the model) in blitz3d.<br><br>It's a pretty neat effect but unusably flawed when you add in a dynamically moving camera, because - obviously - due to the nature of spherical mapping, the lighting is relative to the camera, and it changes whenever the camera is repositioned.<br><br>So I was wondering if there was any way to somehow "clamp" the light texture when the camera is moved?<br><br>EDIT:<br>after searching the forums I have found that using a cubemap is a way to solve the problem. Has anyone used cubemaps to create improved cel shading?<br><br>FURTHER EDIT:<br>on another thread regarding cel shading, sswift wrote (in reference to solving the above problem that I mentioned):<br><br><div class="quote"> To avoid that, you could apply the shading map to a sphere, point the top of the sphere towards the desired light source, flip the sphere so it is inside out, and then render a cubemap from inside the sphere with the sphere set to fullbright. Then you could use the cubemap instead of the spherical environment map, and the light would stay in the right direction no matter how you moved the camera around the obejct in question. <br></div><br>My first reacton to this was "Yay!" but, inevitably, my second was "Er, what?", so does someone have a working example that I could learn from (steal)? <br><br></td></tr></table><br>
<a name="749450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> C'mon guys - surely someone can give me some pointers about this? <br><br></td></tr></table><br>
<a name="749502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about this?:<br>1) Use LightMesh() (check latest online docs for this) to light your sphere.<br>2) Place a camera at 0,0 inside sphere.<br>3) Invert (FlipMesh) sphere.<br>4) Render your cubemap texture (see UpdateCubeMap() function here -&gt; <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1167" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1167</a> )<br>5) Save cubemap texture to your harddisk.<br>6) Load and apply cubemap texture to your mesh. <br><br></td></tr></table><br>
<a name="749547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paolo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This method sometimes works and sometimes it doesn't ...<br><br>load this texture using the next code and then apply it to any<br>mesh in the second layer (layer 1):<br><br><img src="http://img167.imageshack.us/img167/7771/cellshadecubemapif4.png"><br><br><pre class=code>

cube_texture=LoadTexture("cellshadecubemapif4.png",1+128)
	TextureBlend cube_texture,5
	SetCubeMode cube_texture,4

</pre><br>Hope it helps :)<br>Paolo.<br><br>[edit]<br>Oops, I have just seen you said "cartoon shading", I was thinking about "cellshading",<br>to make the cube map remains in a fixed position independent<br>from the camera position and rotation use  <i><b>SetCubeMode texture,2</b></i>  with the loaded texture ... <br><br></td></tr></table><br>
<a name="749759"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JustLuke</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's just what I was looking for - thanks! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
