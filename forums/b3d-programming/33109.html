<!DOCTYPE html><html lang="en" ><head ><title >TrisRendered()</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TrisRendered()</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >TrisRendered()</a><br><br>
<a name="356199"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello, I'm using TrisRendered() to keep an eye on how many tris I'm using but initially I got 2 times what I should; drawing things twice I thought; but I wasn't and now I get less than what I should!<br><br>Is it reliable? or am I doing something wrong?<br>(All I was doing was drawing cones)<br><br>Thanks<br>Marg <br><br></td></tr></table><br>
<a name="356202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you be more specific than just "now I get less."  For starters, what exactly did you change?  And these cones, are they external meshes being loaded or are you creating them in code? <br><br></td></tr></table><br>
<a name="356239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Trisrendered is a reliable tool.  Blitz culls at the entity level based on the bounding volume.  I believe the bounding volume ultimately tested against the view frustum is a bounding box.  So you might well not have a cone on screen but it would still be passed for rendering because its bounding box is.  This is exagerated by the perspectival projection.<br><br>This is an interesting one though because it led me to do some quick tests using orthographic projection mode that seem to indicate that the only culling that occurs in that mode is at near/far which is not something I had noticed before and seems just plain wrong.  So Trisrendered is definately doing the trick as an aid to debugging! <br><br></td></tr></table><br>
<a name="356400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know, TrisRendered doesn't factor in the culling of tris by the near and far camera ranges, though, so it's not 100% accurate in this regard. <br><br></td></tr></table><br>
<a name="356450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JBR</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a landscape as a mesh of which you cannot see all of it but it gives the correct tris count. Fine. I have now set up 16k cones (created in code each with 30 tris) which I'm using to test 'things' moving with the landscape. Instead of plotting 16k cones I HideEntity the ones not on screen (play area) and ShowEntity the ones which are.<br><br>If 25 are visible then I get 540 tris = 18 cones<br>If 20 are visible then I get 450 tris = 15 cones<br>if 16 are visible then I get 330 tris = 11 cones<br><br>(I think I was mistaken about getting twice as many earlier)<br><br>Marg <br><br></td></tr></table><br>
<a name="357660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure you have back face culling off?  As I recall creating for example a cube it uses 24 tris not 12 as there are inside and outside faces... <br><br></td></tr></table><br>
<a name="357692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz does some culling of things that are definitely off-screen.<br><br>Whatever remains is sent to the graphics card for rendering. But some of this may still be off-screen. <br><br>So TrisRendered() can be larger than the actual number of triangles drawn.<br><br>If there is a single mesh then it either gets culled or not.<br>As a result TrisRendered() will report nothing or everything.<br><pre class=code>
Graphics3D 640, 480, 0, 1
WireFrame True

sph = CreateSphere(10)

cam = CreateCamera() : PositionEntity cam, 0, 0, -20: CameraZoom cam, 15

While Not KeyDown(1)
	RenderWorld 
	Text 10,20, "Total triangles: " + CountTriangles( GetSurface(sph,1) )
	Text 10,40, "  Tris Rendered: " + TrisRendered()
	Flip
	TurnEntity cam, 0, 0.01, 0
Wend
End
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
