<!DOCTYPE html><html lang="en" ><head ><title >Vertex alpha in .x files - question (Fred?)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vertex alpha in .x files - question (Fred?)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Vertex alpha in .x files - question (Fred?)</a><br><br>
<a name="384761"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skitchy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've written a fully working .x exporter, except for *1* stupid little thing that doesn't seem to make any sense at all :/<br><br>I'm using the MeshVertexColors{RGBA} chunk to define the color and *alpha* of each vertex in the mesh. The color shows up just fine (so I **KNOW** the data is getting into the engine), but the alpha just refuses to show itself.<br><br>This isn't the good old EntityFX(mesh,34) problem, and I've tried it in several different non-Blitz engines with the same result - color is there but alpha ignored.<br><br>On my quest for an answer I came upon this page :<br><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_m/directx/direct3d/gettingstarted/direct3drendering/alphablending/vertexalpha.asp" target="_blank">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/directx9_m/directx/direct3d/gettingstarted/direct3drendering/alphablending/vertexalpha.asp</a><br>that states:<br><div class="quote"> To enable vertex alpha, set the device's render state RenderStates.DiffuseMaterialSource to ColorSource.Color1 so that the Microsoft® Direct3D® runtime takes the diffuse value from the diffuse color rather than the material.  <br></div><br>Obviously, this is not something you can do in Blitz past EntityFX, but as I mentioned I'm trying to get it working in certain other engines as well.<br><br>What I'm really asking is :<br>a) Is there a way I can force DX (generally) into activating this render state for the given mesh by putting something in my .x file?<br>b) If not, what is the workaround? I'm pretty sure FredBorg has done it in Gile[s], so perhaps he might comment :) :) :)<br>c) If somebody could post (or send me) an ASCII .x mesh exported from Gile[s] that I can study that would be great - a single triangle would be ideal, provided it has vertex alpha on at least one vert.<br><br>I tried Ultimate Unwrap. It DOES export the alpha values, just like my exporter. And just like my exporter they don't show up :( This single glitch has cost me days. <br><br></td></tr></table><br>
<a name="384774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1) Nope renderstates are engine specific<br><br>2)workaround: you have to load the X yourself and assign the vertex alpha on loading. Fredborg is doing this as far as i know from change list since I own it ( 1.0X ) because the standard x loader was quite destructive<br><br>c) ??? did you perhaps mix up with B3D export which supports this?<br><br><br>it seems as most engines don't support vertex alpha from X<br>Are you sure that the color is ARGB for vertex and not RGB? can't remember 4 color values there in dx sdk <br><br></td></tr></table><br>
<a name="384778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skitchy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, its definitely RGBA. Check that link above.<br>I thought Gile[s] could export .x but I may be wrong.<br><br>Some guy said he'd exported a .B3D from ALE, loaded into Gile[s], exported to .x, and loaded into another engine - so I assumed it worked. ;)<br><br>Thanks for the reply :) <br><br></td></tr></table><br>
<a name="384787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes Gile[s] can export x<br><br>If I find some sample where I use vertex alpha I'll put it online.<br><br>btw: do you have some sample X lines for the MeshVertexColor section where you set the RGBA? <br><br></td></tr></table><br>
<a name="384816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Skitchy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure. This is a 2 poly plane exported from Ultimate Unwrap. I've used this as a 'template' for my own exporter (to make sure all the segments and ';' are in the right place with the right numbers. I can't post one from my own exporter because they're about 50,000 lines long! ;) <br>Specifically, look at the MeshVertexColors{} section. The values are :<br><br>{<br>Total_verts;<br>Vert_ID; Red; Green; Blue; Alpha;,<br>Vert_ID; Red; Green; Blue; Alpha;,<br>etc.<br>}<br><br>All values are 0.0 -&gt; 1.0<br><br><pre class=code>
Frame Body {
   FrameTransformMatrix {
    1.000000, 0.000000, 0.000000, 0.000000,
    0.000000, 1.000000, 0.000000, 0.000000,
    0.000000, 0.000000, 1.000000, 0.000000,
    0.000000, 0.000000, 0.000000, 1.000000;;
   }

   Mesh staticMesh {
    4;
    -2.000000; -0.000000; -2.000000;,
    -2.000000; 0.000000; 2.000000;,
    2.000000; -0.000000; -2.000000;,
    2.000000; 0.000000; 2.000000;;
    2;
    3;0, 1, 2;,
    3;1, 3, 2;;

   MeshNormals {
    4;
    0.000000; 1.000000; -0.000000;,
    0.000000; 1.000000; -0.000000;,
    0.000000; 1.000000; -0.000000;,
    0.000000; 1.000000; -0.000000;;
    2;
    3;0, 1, 2;,
    3;1, 3, 2;;
   }

   MeshTextureCoords {
    4;
    0.000000; 0.000000;,
    0.000000; 1.000000;,
    1.000000; 0.000000;,
    1.000000; 1.000000;;
   }

   MeshVertexColors {
    4;
    0; 1.000000; 1.000000; 1.000000; 1.000000;,
    1; 1.000000; 1.000000; 1.000000; 1.000000;,
    2; 1.000000; 1.000000; 1.000000; 1.000000;,
    3; 1.000000; 1.000000; 1.000000; 1.000000;;
   }

   MeshMaterialList {
    1;
    2;
    0,
    0;

    Material {
     1.000000; 1.000000; 1.000000; 1.000000;;
     128.000000;
     0.000000; 0.000000; 0.000000;;
     0.000000; 0.000000; 0.000000;;
    }

   }
  }
}
</pre><br><br>Like I said, I know without a doubt that the data is getting into the engine(s) because the vert colors are set correctly.<br>Just that pesky alpha ;) <br><br></td></tr></table><br>
<a name="384863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> it might be that they only support material or alpha <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
