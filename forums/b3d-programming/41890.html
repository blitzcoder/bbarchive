<!DOCTYPE html><html lang="en" ><head ><title >Half-viewed sprite</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Half-viewed sprite</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Half-viewed sprite</a><br><br>
<a name="470081"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to make a bullethole sprite appear on the level mesh, and it does, but half of it is inside the mesh, so you can't see it. I've tried "EntityOrder," but this just makes it so it appears on top of everything, which I don't want to happen. I only want it to appear on top of the level. Any ideas? <br><br></td></tr></table><br>
<a name="470088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> move it a little away from the wall. Since you used AlignToVector (I assume) to position it on the wall, all you need to do now is to <br><br>MoveEntity hole,0,0,0.05<br><br>or maybe it's -0.05, or 0.01 - check it out. <br><br></td></tr></table><br>
<a name="470189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't use align to vector.<br><br>It's a sprite positioned with "CameraPick."<br><br>But I'll try the MoveEntity anyway. <br><br></td></tr></table><br>
<a name="470193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Didn't work.<br><br>Any other suggestions?<br><br>Or how could I switch everything to AlignToVector? <br><br></td></tr></table><br>
<a name="470233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, do you mean the Sprite isnt rotated correctly to align to the wall, or is it just too close to the wall that it is clipped?<br><br>I would suggest using AlignToVector so that the Sprite's rotation matches the wall exactly, remembering to select the correct SpriteViewMode. <br><br></td></tr></table><br>
<a name="470309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using your camerapick, AlignToVector using the collision NX NY and NZ. Can't remember the order they are used, so you might have to fiddle about with it. <br><br></td></tr></table><br>
<a name="470310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know I'm using the correct "SpriteViewMode," but I'll see about this "AlignToVector" stuff - that command has never worked in the past. <br><br></td></tr></table><br>
<a name="470450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I do<br><br><pre class=code>
AlignToVector(bullet_h, PickedX(), PickedY(), PickedZ()-0.05, 3, 1)
</pre><br><br>That would align the bullet to the wall, but 0.05 ahead, I think. <br><br></td></tr></table><br>
<a name="470452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> nope - didn't work. <br><br></td></tr></table><br>
<a name="470456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> No.  Use PickedNX, PickedNY and PickedNZ.  You need a normal vector for AlignToVector to work.  PickedX/Y/Z simply return world coordinates. <br><br></td></tr></table><br>
<a name="470549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to be picky, Gfk, but I need to know this too.<br>Could you give a slightly more 'fleshed out' example, just say half a dozen lines? <br><br></td></tr></table><br>
<a name="470552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quick and dirty example.  This aligns the bottom of the cone to the nearest polygon of the sphere.  (The sphere is rotated to emphasise the fact that the AlignToVector stuff is actually doing something).<br><br><pre class=code>Graphics3D 800,600
camera = CreateCamera()
light = CreateLight(2)
MoveEntity light,-10,10,-10
sphere = CreateSphere()
EntityPickMode sphere,2
cone = CreateCone()
MoveEntity cone,5,0,0
MoveEntity camera,0,0,-10
While Not KeyDown(1)
	TurnEntity sphere,0,1,0
	LinePick EntityX(cone),EntityY(cone),EntityZ(cone),-10,0,0
	NX# = PickedNX()
	NY# = PickedNY()
	NZ# = PickedNZ()
	AlignToVector cone,nx,ny,nz,2,0.1
	UpdateWorld()
	RenderWorld()
	Flip
Wend</pre> <br><br></td></tr></table><br>
<a name="471079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I could use this:<br><pre class=code>
If MouseHit(1)
    ammo = ammo - 1
    picked = CameraPick(camera, 400, 300)
    nx# = PickedNX()
    ny# = PickedNY()
    nz# = PickedNZ()
    AlignToVector bullet_sprite, nx, ny, nz, 2, 0.1
EndIf
</pre><br><br>Or should I substitute CameraPick for LinePick? <br><br></td></tr></table><br>
<a name="471191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use that.  Personally I'd use LinePick as it isn't reliant on the camera being in any specific position etc. <br><br></td></tr></table><br>
<a name="471264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah - I'll try that. <br><br></td></tr></table><br>
<a name="471511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is what I ended up doing - although the sprite isn't even visible when I do this:<br><pre class=code>
	;Shoot
	;-----
	If gun=1
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		picked=LinePick(400, 300, EntityZ(camera), 1, 1, 100)
		p.hole = New hole
		p\entityhandle = CopyEntity(bullethole)
		p\alpha = 0.9
		p\typething = "pistol"
		MoveEntity p\entityhandle, 0, 0, -1
		AlignToVector p\entityhandle, PickedNX(), PickedNY(), PickedNZ()-1, 3
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
	EndIf
	EndIf
	EndIf
</pre> <br><br></td></tr></table><br>
<a name="471525"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
AlignToVector p\entityhandle, PickedNX(), PickedNY(), PickedNZ()-1, 3
</pre><br><br>Your subtracting one from the vector. why? :o) Don't do that, and it should be fine. <br><br></td></tr></table><br>
<a name="471535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok - I took away that:<br><pre class=code>
	;Shoot
	;-----
	If gun=1
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		picked=LinePick(400, 300, EntityZ(camera), 0, 0, 100)
		p.hole = New hole
		p\entityhandle = CopyEntity(bullethole)
		p\alpha = 0.9
		p\typething = "pistol"
		nx# = PickedNX()
    	        ny# = PickedNY()
    	        nz# = PickedNZ()
		PositionEntity p\entityhandle, PickedX(), PickedY(), PickedZ()
		AlignToVector p\entityhandle, nx#, ny#, nz#, 2, 1
		MoveEntity p\entityhandle, 0, 0, -0.05
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
	EndIf
	EndIf
	EndIf
</pre><br><br>and tried that - to no effect :( <br><br></td></tr></table><br>
<a name="471560"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> try:<br><br><pre class=code>
	;Shoot
	;-----
	If gun=1
	If ammo &gt;= 1
	If MouseHit(1)
		PlaySound shoot
		ammo = ammo - 1
		picked = CameraPick(camera, 400, 300)
		p.hole = New hole
		p\entityhandle = CopyEntity(bullethole)
		p\alpha = 0.9
		p\typething = "pistol"
		nx# = PickedNX()
    	        ny# = PickedNY()
    	        nz# = PickedNZ()
		PositionEntity p\entityhandle, PickedX(), PickedY(), PickedZ()
		AlignToVector p\entityhandle, -nx#, -ny#, -nz#, 3, 1
		MoveEntity p\entityhandle, 0, 0, 0.05
		CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
	EndIf
	EndIf
	EndIf

</pre> <br><br></td></tr></table><br>
<a name="471563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, is it a Blitz Sprite you're using?  If so, try disabling backface culling using EntityFx Sprite,16.  Its probably just facing the wrong way.  You could also rotate it 180 degrees on the X or Y axis after AlignToVector as an alternative to disabling backface culling. <br><br></td></tr></table><br>
<a name="471599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remember and make sure the spriteviewmode is set correctly. <br><br></td></tr></table><br>
<a name="471601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is another example. Big10p and the others have probably fixed you up, but hey, I was bored.<br><br>Edit.  Posted it to the the online docs.<br><a href="http://www.blitzbasic.co.nz/b3ddocs/command.php?name=AlignToVector&amp;ref=3d_cat#comments" target="_blank">http://www.blitzbasic.co.nz/b3ddocs/command.php?name=AlignToVector&amp;ref=3d_cat#comments</a> <br><br></td></tr></table><br>
<a name="471611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks everyone!<br><br>This is what I ended up using - and it works! Thanks to all of you that helped! I'm really glad to have finally made this work.<br><pre class=code>
	;Shoot
	;-----
	If gun=1 
	If ammo &gt;= 1 
	If MouseHit(1) 
		PlaySound shoot 
		ammo = ammo - 1 
	 	picked = CameraPick(camera, 400, 300)
	 	p.hole = New hole
	 	p\entityhandle = CopyEntity(bullethole)
	 	p\alpha = 0.9
	 	p\typething = "pistol"
	 	nx# = PickedNX()
     	        ny# = PickedNY()
     	        nz# = PickedNZ()
	 	PositionEntity p\entityhandle, PickedX(), PickedY(), PickedZ()
	 	AlignToVector p\entityhandle, -nx#, -ny#, -nz#, 3, 1
	 	MoveEntity p\entityhandle, 0, 0, -0.05
	 	CreateSomeParticles(PickedX(), PickedY(), PickedZ(), 100, 100, 100, 6)
	EndIf
	EndIf
	EndIf
</pre> <br><br></td></tr></table><br>
<a name="471772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, I almost got it right. In my drunken state I forgot to MoveEntity the sprite in the right direction. :P <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
