<!DOCTYPE html><html lang="en" ><head ><title >eugh, camerapick is slooooowwww</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >eugh, camerapick is slooooowwww</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >eugh, camerapick is slooooowwww</a><br><br>
<a name="954699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just tested my landscape program (using the excellent Fastlib!) and it's getting 1400fps with 2 shadow systems active but not updating each frame (still gets 650fps when constantly updating these 2 systems - I love fastlib!!!).<br><br>However, performing one CameraPick into the scene drops the framerate from 1400fps to 140fps, so that's 90% lost just to one camerapick...<br><br>Ho hum - anyone know a fast way to perform the equivalent of the camerapick onto an arbitrary mesh? <br><br></td></tr></table><br>
<a name="954763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use raypick, it's one of the functions of a physics engine (i'm sure Naughty will be along soon enough)<br><br>You can, put a plane and make it pickable, to reduce the length of picks that miss. CameraPick is very slow over large distances, so if you were to scale down the world for a camera pick, it would be faster. <br><br></td></tr></table><br>
<a name="954846"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> VD<br><br>Yeah - I ended up using Rubux's PhysX wrapper to avoid Blitz3d's linepick slowness... <br><br></td></tr></table><br>
<a name="955002"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd rather use a native Blitz way of doing it than have to include a physics library just for that one function.<br><br>It seems to be related to the number of polys in the target mesh - my landscape mesh has 20000 polys, if I swap to a standard Blitz cube then the camerapick only drops the framerate from 1400 to about 900fps. Still not too good but better than the 90% speed loss. Trouble is I need to accurately pick a point on a hilly landscape mesh and not just on a flat plane...<br><br>I might try using Blitz's collision system to see if I can get something workable using that. <br><br></td></tr></table><br>
<a name="955336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can up split up your landscape more? That way the pick would speed up, as the overall size of the individual meshes would be smaller. <br><br></td></tr></table><br>
<a name="955391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hardly seems worthwhile to split up the mesh - even an 8 poly cube still drops the framerate from 1400 to 900. <br><br></td></tr></table><br>
<a name="955395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're using a completely unreliable metric to judge your performance. When you have frame rates in the thousands, the time periods are so small that you simply can't rely on the accuracy of the numbers you're getting back to judge performance. Even if you could, it's entirely false logic to say that one camerapick is 90% of your performance. Your performance isn't going to stay at 1400FPS. Almost everything you add at this point is going to appear to take huge chunks out of your framerate, in part because it's so inccurately measured at the moment. Assuming that your target framerate is 60, that pick isn't using up anything like 90% of that, and probably much less when you start getting the framerate down to values where your measurements are reliable.<br><br>If you obsess over everything that takes a big chunk out of your framerate now, you'll never get the game to point where the framerate matters. Optimize when you know that you have a speed problem, and when you know what it is. <br><br></td></tr></table><br>
<a name="955416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Optimize when you know that you have a speed problem, and when you know what it is."<br><br>Trouble is, by the time you have a speed problem that drops you below 60 or 30fps you've got so much stuff going on that trying to pinpoint any bottlenecks becomes much much more difficult. I prefer have it fast to start with which allows me to work upwards, rather than chuck everything in with no thought to the performance hit of each component, then have to cut it all out or spend ages trying to figure out what bit is slow.<br><br>Fact is, camerapick is slow, apparently very slow. I need to use it in some form, so I want to find a faster way to accomplish the same thing.<br><br>I had the same problem in SRX - each wheel on the car had a shadow that used a linepick, and at that time I had no idea it was so slow. Once I had the game in a workable state and moved up to 8 cars, 32 linepicks onto a high-poly track brought the thing to its knees, but it took me a long time to pinpoint the linepick as the problem as I suspected it was the physics, and the program was so complex that just removing one aspect had become very tricky. If I'd properly profiled such things as I added them then I would have seen the problem a long time before it impacted on the framerate, saving myself a lot of work. <br><br></td></tr></table><br>
<a name="955418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your giving yourself little options :o) Eithe use the raypick from the physics lib, which is mighty fast, or use camerapick. I think the only other solution would be firing a small pivot from the cameras position, to the mesh, using a stop collision method and get the co-ords of the collision.<br><br>But you'd have to have some way of translating the x and y co-ords of the mouse to 3d co-ords to give the pivot a start point.<br><br>I also agree with Gab here:<br><br>Going from 1400 fps to 900 fps is nothing. It's probably not even the equivilant of going from 60 fps to 59.<br><br>60 fps = a frame every 0.016 seconds<br>1400 fps = a frame every 0.0007 seconds<br><br>You lost 1260 frame, to take you to 140 fps<br><br>1260 frames at 0.0007 seconds, means your pick took 0.88 seconds. Which isn't much for one pick. I assume it is only one pick per click of the mouse? <br><br></td></tr></table><br>
<a name="955447"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> VM<br><br>I sympathise about wanting to stay within Blitz, but I had the same situation when looking at orienting multiple tanks to a landscape mesh. <br><br>I tried blitz's native linepicks then went to collision pivots - even cut those down to 3 per tank - still ate framerate at an unacceptable rate. Had to go to an external lib in the end. <br><br></td></tr></table><br>
<a name="955490"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is the PhysX wrapper still around? - none of the old thread links or sites seem to work anymore. <br><br></td></tr></table><br>
<a name="955523"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nrasool</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Vorderman, here is the PhysX wrapper: <a href="http://rubux.net/index.php?option=com_content&amp;view=article&amp;id=47&amp;Itemid=60" target="_blank">http://rubux.net/index.php?option=com_content&amp;view=article&amp;id=47&amp;Itemid=60</a> <br><br></td></tr></table><br>
<a name="955547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the link.<br><br>£25 just to use a raycasting function is a bit much for me :( <br><br></td></tr></table><br>
<a name="955588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> If you obsess over everything that takes a big chunk out of your framerate now, you'll never get the game to point where the framerate matters. <br></div><br>That's a very pretty sentence, Gabriel.<br><br>@Vod: You can always try Abrexxes Engine pack, which comes with a couple of physics engines...<br><a href="http://blitzbasic.com/Community/posts.php?topic=83629" target="_blank">http://blitzbasic.com/Community/posts.php?topic=83629</a><br><br>it's the (Engines&amp;Libs) file, in case that's not really obvious. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
