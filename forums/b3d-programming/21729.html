<!DOCTYPE html><html lang="en" ><head ><title >vertices count in a mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >vertices count in a mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >vertices count in a mesh</a><br><br>
<a name="222397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, i'm new here and i am trying to get the coordinates of each and every vertex in imported .3ds or .x meshes, but i have no idea how i should be proceeding... my point is to interact with an imported mesh and deform it. thx in advance ! <br><br></td></tr></table><br>
<a name="222399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi orion one, this is orion one ... what if those meshes have only one surface ? CountVertices can't work then, so ?<br><br>bye, orion one <br><br></td></tr></table><br>
<a name="222542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> [EDITED]<br><pre class=code>
surfaces = countsurfaces(mesh)
for S = 1 to surfaces
vertices = countvertices(surfaces)
for V = 0 to vertices - 1
print vertexX(S,V)
next
next
</pre><br><br>Hope this helps, orion one.<br>Sergio. <br><br></td></tr></table><br>
<a name="222595"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi semar,<br><br>thx for your routine, i have tested it on the meshes from the built-in 3D tutorials. i get a number of surfaces from 1 to 5 i.e. but a systematic memory access violation when it comes to count the vertices... why o why ? thx to all of you<br><br><br>mesh=LoadMesh("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\teapot\teapot.x")<br>surfaces=CountSurfaces(mesh)<br>For s=1 To surfaces<br>vertices=CountVertices(surfaces)<br>For v=0 To vertices<br>Print VertexX(s,v)<br>Next<br>Next<br><br>Acorn BBC model B 32k <br><br></td></tr></table><br>
<a name="222599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> sorry.<br><br>Change<br>For v=0 To vertices <br>to<br>For v=0 To vertices -1<br><br>Since vertices counting in a surface go from 0 to num of vertices - 1. <br><br></td></tr></table><br>
<a name="222623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ciao sergio,<br><br>now it's like that :<br><br>Graphics3D 640, 480<br>mesh=LoadMesh("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\driver\car.x")<br>surfaces=CountSurfaces(mesh)<br>Print surfaces<br>For s=1 To surfaces<br>vertices=CountVertices(s)<br>For v=0 To vertices-1<br>Print VertexX(s,v)<br>Next<br>Next<br><br>i've changed vertices=countvertices(surfaces) to countvertices(s)<br><br>u've changed vertices to vertices-1<br><br>but still the same error... sorry to bother you with that<br><br>orion one <br><br></td></tr></table><br>
<a name="222628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> this works, Sergio !<br><br>Graphics3D 640, 480<br>mesh=LoadMesh("C:\Program Files\Blitz3D\Samples\Blitz 3D Samples\mak\driver\car.x")<br>surfaces=CountSurfaces(mesh)<br>For s=1 To surfaces<br>ss=GetSurface(mesh,s)<br>vertices=CountVertices(ss)<br>For v=0 To vertices-1<br>Print VertexX(ss,v)<br>Next<br>Next<br><br>the idea seems to use getsurface ... ti ringrazio molto, ciao <br><br></td></tr></table><br>
<a name="222648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes, getsurface was missing, hem... !!!<br><br>=)<br><br>You know, I have not blitz where I write from..!<br><br>(prego, non c'e' di che ! Ah ma sei italiano anche tu ?!?)<br><br>Bye,<br>Sergio. <br><br></td></tr></table><br>
<a name="222692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 50% italiano Sergio, forse ci conviene continuare via email/messenger senó incazziamo tutti hehe <br><br></td></tr></table><br>
<a name="222701"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> now another question : how do you DELETE a vertex in a mesh, or a vertex just added via AddVertex ?<br><br>Orion One<br><br>P.S. Dai Sergio dammi 'cora 'na mano ti prego <br><br></td></tr></table><br>
<a name="222828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> ClearSurface surface,[clear_verts][,clear_triangles]<br>Parameters:<br>surface - surface handle <br>clear_verts (optional) - true to remove all vertices from the specified surface, false not to. Defaults to true. <br>clear_triangles (optional) - true to remove all triangles from the specified surface, false not to. Defaults to true.<br>Description:<br>Removes all vertices and/or triangles from a surface. <br><br>This is useful for clearing sections of mesh. The results will be instantly visible. <br><br>After clearing a surface, you may wish to add vertices and triangles to it again but with a slightly different polygon count for dynamic level of detail (LOD). <br><br></td></tr></table><br>
<a name="222830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks semar<br><br>but my point is to delete one or a few vertices from a surface, not all of them. <br><br>and by the way, how can i control the number of surfaces of a mesh created from scratch ? and in imported meshes (with 3D canvas per esempio)<br><br>thx a lot <br><br></td></tr></table><br>
<a name="222891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hum, I don't know if you can just delete a vertex, since a surface is made up by triangles, and each triangle needs three vertices.<br><br>So if you (theoretically) delete only one vertex, how can the related triangle exist ?<br><br>I *think* that you should delete the triangle, so to delete the one vertex you need to be deleted, and then re-create the triangle with the remaining two vertices, plus one that should come from another adiacent triangle.<br><br>I'm just guessing... <br><br></td></tr></table><br>
<a name="222893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> good guesses :<br><br>i want to be able to delete vertices, and therefore the related triangles won't exist anymore (i want to create holes in meshes)<br><br>is there any mean to delete single triangles instead of vertices ? <br><br></td></tr></table><br>
<a name="222914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Triangles can share vertices.  So I guess what you could try is deleting all the triangles and then rebuild the surface without the triangle you want to remove.  Rebuilding the triangle list should be faster than rebuilding the vert list because a triangle needs a lot less information.  So you need to build a triangle list as shown below.  This of course can be optimised, you do not really need to build a new trilist each time you do this.  Of course you can get rid of the pesky verts you do not really need as well, but thats a bit more complicated.<br><br><pre class=code>
Dim Trilist(3000,2)

Function removetri(surf,tri)
	numtris=CountTriangles(surf)
	For t=0 To numtris-1
		trilist(t,0)=TriangleVertex(surf,t,0)
		trilist(t,1)=TriangleVertex(surf,t,1)
		trilist(t,2)=TriangleVertex(surf,t,2)
	Next
	ClearSurface surf,False,True
	For t=0 To numtris-1
		If t&lt;&gt;tri Then 	AddTriangle(surf,trilist(t,0),trilist(t,1),trilist(t,2))
	Next
End Function	 


Graphics3D 640,480,0,2
sphere=CreateSphere(12)
EntityColor sphere,200,100,50
EntityPickMode sphere,2
EntityFX sphere,16

camera=CreateCamera()
PositionEntity camera,0,0,-3
light=CreateLight()
RotateEntity light,45,0,0


Repeat 

	mx=MouseX()
	my=MouseY()
	
	TurnEntity sphere,KeyDown(200)-KeyDown(208),KeyDown(205)-KeyDown(203),0
	
	If MouseDown(1) Then pick=CameraPick(camera,mx,my)
	
	If pick=sphere Then removetri(PickedSurface(),PickedTriangle())
	
	RenderWorld
	
	Text 0,0,TrisRendered()
	
	Flip
	
Until KeyDown(1)

End
</pre> <br><br></td></tr></table><br>
<a name="223120"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx for the code David.<br><br>i will post a new and better question a bit later when i come up with some fresh code and ideas.<br><br>thanks to all <br><br></td></tr></table><br>
<a name="223191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, I have no trouble clearing a surface and building up a whole new triangle + vertice list of about 3000 vertices and 1500 triangles within the space of 1 millisecond. My game does this every frame. So I think complete reconstruction could be an option. <br><br></td></tr></table><br>
<a name="223930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx Anthony, i have successfully solved my problem : i build a complex mesh with one triangle per surface, i can so delete a very small amount of the mesh at a time.<br><br>and with code optimization, this should do it<br><br>Orion One <br><br></td></tr></table><br>
<a name="223968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wayne</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Orion,<br>How large a mesh do you have planned ? <br><br></td></tr></table><br>
<a name="225569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >orion one</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, i plan to write a simulation of surgery, so i have several meshes representing each and every layer of human tissue, and moreover the deeper the structure the higher the number of meshes per tissue.<br><br>skin=at least 3 layers<br><br>let's say minimum 2000 triangles per layer, and that seems to me not to be enough <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
