<!DOCTYPE html><html lang="en" ><head ><title >const pre-processed? Bug?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >const pre-processed? Bug?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >const pre-processed? Bug?</a><br><br>
<a name="1093023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi there. I have just been sitting scratching my head for about 20 mins. I have stupidly been referencing const variable before they have been called. I haven't noticed any errors though.<br><br>When you set a variable as a Const, it seems to set all Const variables before the first line of code is even executed. Is this the correct way it should work? Not that i'm complaining! <br><br></td></tr></table><br>
<a name="1093024"></a>

<a name="1093026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Huh, never noticed that.<br><br>It's counterintuitive, since Consts look like variables and variables are declared in order... but on the other hand, the other constant declarations (i.e. functions) work this way, so eh-why-not? (That the compiler performs constant folding optimisations shouldn't affect this since the compiler still has to recognise the name at compile-time, meaning it can treat it like any other variable or expression while parsing.)<br><br>I wouldn't call it a bug, since there's no way it can affect anything. It still gives you the "Consts cannot be assigned" message if you use the name incorrectly, so there's not much risk of confusion.<br><br>I suppose it lets you hide your private constants at the bottom of a library file where they wouldn't be confused for the public interface... even then, I'm not sure why you would want to do that (since they're constant, that's about as safe a public interface as you can get). Tidiness, maybe.<br><br><font class="tiny">Last edited 2011</font> <br><br></td></tr></table><br>
<a name="1093033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Is this the correct way it should work? <br></div>Correct me if this is wrong or sounds wrong, BUT doesn't the compiler replace all const with the value the const is?<br><br>That is, on one of the passes it replaces the name with a value? If it didn't do this then a Constant would just be a variable (whose value you didn't change), and no speed benefit would be gained. <br><br></td></tr></table><br>
<a name="1093034"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> on one of the passes it replaces the name with a value? <br></div><br><br>Yes, <i>but</i> this shouldn't affect anything as far as parsing goes. Replacing the constant names with their values has to happen after the expressions are parsed, otherwise the compiler wouldn't be able to give coherent error messages if you tried to assign a new value to a constant (instead it would think you were assigning to a value, or possibly comparing since it uses the same symbol).<br><br>The observation really just means that constant names are apparently read in a separate pass, before variable declarations and expression statements.<br><br>Upon thinking about it, there is a good reason for this after all: since types and functions also get their own advance pass (i.e. you can use functions above their declaration too), constants need to be read before function definitions, so that you can use the constant name as a default value in parameter lists. With the consequence described above. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
