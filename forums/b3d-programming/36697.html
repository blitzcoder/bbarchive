<!DOCTYPE html><html lang="en" ><head ><title >Stateless particle systems?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Stateless particle systems?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Stateless particle systems?</a><br><br>
<a name="402091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cancerian</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>  Just reading the new article on Gamasutra.com called "Building a Million Particle System".  As a non-programmer most of it went over my head but I am intrigued by the mention of something called a "stateless particle system" wherin there are no stats tracked for the particles (velocity, x_position, y_position, etc.) and thus freeing up processor overhead.  I'm assuming everything is precalculated but I can't wrap my brain around it.<br><br>  Does anyone have a simple code example for a stateless particle system or where I might be able to find more info.  I searched the web but came up with mostly vague references and nothing detailed enough to help.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="402096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you have the link to the article :)<br><br>Can't think of a way to do that beside predefined splines etc which won't be that "physical correct" in the end <br><br></td></tr></table><br>
<a name="402099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cancerian</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's on www.gamasutra.com main page.  You have to be registered to read the actual article. <br><br></td></tr></table><br>
<a name="402103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know!  you render a particle on 3ds max or maya, then you play it like a video!  But I'll go check the article. <br><br></td></tr></table><br>
<a name="402106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, that wouldn't decrease processor overhead at all.  That would increase it, because now you're eating up processor time to play a movie.<br><br>As for physical correctness in particle systems, it's not like standard real-time particle systems are physically correct. <br><br></td></tr></table><br>
<a name="402113"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> "To simulate particles on a GPU you can use stateless or state-preserving PS. Stateless PS require a particle's data to be computed from its birth to its death by a closed form function which is defined by a set of start values and the current time."<br><br><br>In other words, the article is saying that you can render particles using a pixel shader, with, presumably, one particle per pixel, and using equations like the following:<br><br>Current_X# = Start_X# + Normal_X#*Current_Time#<br>Current_Y# = Start_Y# + Normal_Y#*Current_Time#<br><br>Note that Start_X# and Start_Y# need not be stored if all particles start at the same location, or you have a randomize function where you can seed it so the output is the same every time.  Same goes for Normal_X# and Normal_Y#.  The only variable is time, and the current location is not stored to be used in the equation again later, it is only used that frame to draw the particle.<br><br>This is the equation for a line.  To be useful you'd need more complicated equations which define curves, and allow for acceleration and deceleration.<br><br>With this method it is not possible for particles to collide with anything and change direction, but it is possible to have complex looking motion and lots and lots of particles.<br><br><br>[edit]<br>My bad, I should have read the article all the way through...<br><br>While what I described would work, the article goes on to describe a method which uses textures to store data.<br><br>My first guess as to what it was doing... I was going to say it's like a water simulation somehow.<br><br>There is a well known algorithm for simulating water where all you do is update a bitmap each frame using it's last set of values and waves move through it automatically when changes are made to it.<br><br>This works because the height of a water pixel also encodes it's energy.  Ie, a tall wave has a lot of energy and will collapase when when it does will send out other waves in all directions.<br><br>Skimming through this algorithm appears to use a texture to store velocities and positions, but upon closer inspection, it does not appear ro be doing anything like the water algorithm.  In fact, it appears to be anyhting BUT "stateless".  It appears to just use the textures to store the locations and velocities of each particle, and then it calculates it's motion from that in a pixel shader.  Then it draws the particles using a vertex shader.<br><br>I guess the advantage here is the GPU is doing all the work, rather than the CPU.<br><br>This sort of thing won't help anyone write a faster particle system in Blitz because it doesn't have pixel or vertex shaders.<br>[/edit] <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
