<!DOCTYPE html><html lang="en" ><head ><title >Random Slowdown in GUI</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Random Slowdown in GUI</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Random Slowdown in GUI</a><br><br>
<a name="999036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In my current game, I've found that, randomly and infrequently, my gui updates seem to take 2 x, 3 x  or 4 x longer than normal.<br><br>The gui is my own, not a 3rd party library.  I have pinpointed the issue to an update button function where I do the following:<br><br>* Clear the existing surface for the main mesh<br>* Loop through all required characters<br>* Find and copy a child mesh for each character ( all child meshes are attached to a root pivot and accessed by name)<br>* Copymesh the child mesh<br>* Addmesh the Copy to the main mesh<br>* Freeentity the copy<br><br>This function updates the text every 4 frames for animation purposes and generally runs smooth as a baby's arse.<br><br>I also never have any slowdown in game - only when the menu's are being displayed which suggests no issues with the gfx card.<br><br>I have set timers in every part of the menu update and there is no slowdown during renderworld(), only in this function.<br><br>I have no applications running in the background (ran it alongside Task Manager during the slowdowns) and even then  I have a small delay before renderworld which results in BB only using 30% CPU.  There are also no memory leaks.<br><br>I originally thought this may be a mesh cacheing issue but I would expect to see intermittant slowdowns.  Once the slowdown happens, it does not speed up until I come out of the menu's, enter the game and return back to the menu's.  <br><br>I've spent the last week or so trying to figure out what's going with debug information everywhere and I'm at a loss.  I cannot seem to re-create the circumstances which make it happen - they are completely random.<br><br>Does anyone have any idea's?<br><br>Cheers<br>Stevie <br><br></td></tr></table><br>
<a name="999039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are any of these animated meshes? Just wondering if it may be related to the 1.03 update???<br><br>I guess there could be a bottleneck as it finds the 'valid' children via name, does it make any difference how many of these there are?<br><br>Same, perhaps with the CopyMesh, are th meshes complex at all, with lots of tri's? Still, it shouldn't be THAT hard for any computer made after 1960 &gt;.&gt;<br><br>maybe there's a nasty little loop or something within the update section that you've missed?<br><br>That's about it for now, if I have any sudden flashes of inspiration, I'll let you know... <br><br></td></tr></table><br>
<a name="999041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No animated meshes - polygons in each mesh are &lt; 200.  Nothing dodgy in the function - it simple does what it says on the tin and 99% works just fine.<br><br>All ideas, however daft, are most welcome! <br><br></td></tr></table><br>
<a name="999048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jiffy</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Meshes too close to the camera, or too big can cause slowdown on some gfx cards. Without more details, I'd say 'Update your drivers' and pretend that will help.<br><br>But you're actually likely to have a memory leak- I avoid freeing things I can keep or ignore till program end. <br><br></td></tr></table><br>
<a name="999245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Jiffy, drivers aren't the issue I'm sure as, like I said, the rendering in game is very fast.  This is an intermittant problem, if it related to the meshes being too close to the camera, which they aren't, then I'd always see the slowdown.   I also have no memory leak.<br><br>Anyone? <br><br></td></tr></table><br>
<a name="999247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Random and infrequent suggests an outside influence into the actual routine, or bad data that is only introduced under certain conditions..for example the letter Q has bad geometry , or some sort of memory leak<br><br>every 4 frames?..whats your locked logic fps ?<br><br> Do you have anything else running that is perhaps accessing the 3D card.<br><br>  You are creating and destroying alot of mesh data over time.<br>  Are you using clearworld between levels or maps ect ? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
