<!DOCTYPE html><html lang="en" ><head ><title >Changing color of an image...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Changing color of an image...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Changing color of an image...</a><br><br>
<a name="327282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was using the text command for my game crosshair (a + sigh worked well when I was too lazy to use an image). Now I have an image that I put on the screen with the DrawImage() command and it works just as expected, however I want to know if there is a way to change the color of the image through code. I like the way you can alter the color of text with the Color() command, and entities with the EntityColor() command. However, I don't see any similar commands for use with images. Am I missing something? <br><br></td></tr></table><br>
<a name="327285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am assuming you are writing perhaps a first-person shooter type game.<br><br>If you use a Sprite, parented to the camera (or a pivot-parented to the camera etc - so that it stays in view and moves with the camera) - if the sprite is a white crosshair on a black (so it's transparent) background - EntityColor will affect the colour of the sprite.<br><br>Otherwise, I don't know if WritePixelFast is any good? ( I haven't used that command really!) <br><br></td></tr></table><br>
<a name="327287"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, since an image can be many differentpixel colours, there isn't really a command that can be used. You can use writepixelfast tho, to write new color info to the image.<br><br>BUT, if it's a cross hair, you could make that out of two rect's and it would use the current drawing color for that.<br><br>OR, You could load in an animated image, with mulitple frames. Each frame is the color of cross hair you want.<br><br>Hope some of that helps :) <br><br></td></tr></table><br>
<a name="327293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sprite parented to the camera with EntityOrder -1 and coloured using EntityColor works fine for me. <br><br></td></tr></table><br>
<a name="327316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, this is for an FPS. I do use entitycolor a lot with sprites, for my particle effects and such, but I do not use sprites for HUD data. Currently I use the various 2D commands to create my overlay.<br><br>If it was absolutely required to have the different colors, I suppose I would use the sprite method. But, for now, I'll try WritePixel. If that isn't good enough, I'll just make a few fixed color crosshairs and live with it. Would be nice to give a UT style custom color though...<br><br>I wonder why there isn't a color command for images...you'd think it would be the same process that occurs to textures when you use entitycolor()...<br><br>Oh well, thanks for the suggestions. Perhaps once I figure out the writepixel function I can make a quasi-imagecolor function... <br><br></td></tr></table><br>
<a name="327351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>But, for now, I'll try WritePixel. If that isn't good enough, I'll just make a few fixed color crosshairs and live with it.<br> <br></div><br>Good luck! I would recommend Ross C's advice then, and use a single bitmap with multiple frames<br><br><div class="quote"> <br>I wonder why there isn't a color command for images...you'd think it would be the same process that occurs to textures when you use entitycolor()... <br> <br></div><br>I think it's due to the way 3D objects are rendered. Similar to how they become mipmapped/aliased and have light effects altering their apparent colour. An image is just an image and maybe is more required NOT to change color at all! <br><br></td></tr></table><br>
<a name="327361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't mix 2D with 3D if i were you. Alot of computer have a hard time with it, something to do with different drawing instuctions, so i'd go for sprites instead of images. That way you change change the colours of things with entitycolor :) <br><br></td></tr></table><br>
<a name="327381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Genexi2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, here's a function I made awhile ago that kinda does that , problem is, it USED to work when I last tried it...but now it doesnt....maybe you can take a look at it and fix it :<br><br><pre class=code>
See fixed version of the code in my next post.
</pre> <br><br></td></tr></table><br>
<a name="327384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
			If red &lt;&gt; MR And green &lt;&gt; MG And blue &lt;&gt; MB Then 
				WritePixelFast j,i, zz, ImageBuffer(image)
</pre><br><br>Where's red,green and blue defined? shoiuld they be R,G,B or something?<br><br><br>and do the Rect commands need a '1' at the end to fill them?<br>in fact...MR MG MB aren't returned....<br><br><br>Im at work at the mo and no access to B3D :( <br><br></td></tr></table><br>
<a name="327427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Genexi2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bah, that code was really messed up in the var's, so I did a partial rewrite, along with addin' a function to just change the color of the image.<br>(my function there actually made a new image and returned it, this one changes the image it was given to handle)<br><br><pre class=code>
Graphics 640,480,0,2

Global img = CreateImage(128,128)

SetBuffer ImageBuffer(img)
Color 255,0,0
Rect 0,0,128,128,1
Color 0,255,255
Rect 32,32,64,64,1


; Make IMG2 by copyin' img and changin' its color
Global img2 = ImageColor(img,150,150,150,0,255,255)

; Now lets just change IMG2's color itself
ChangeColor(img2,255,255,0,255,0,0)


SetBuffer BackBuffer()
While Not KeyHit(1)
Cls

DrawImage img,0,0
DrawImage img2,128,0

Flip
Wend
End



; Function - basically uses a multiply effect to change the colors
; image = handle of the source image
; r\g\b = the rgb you want to multiply the image with
; mr\mg\mg = the rgb of the color you want to keep out of the effect


;--------------------------------------------------;
; Creates new image, changes color, and returns it ;
;--------------------------------------------------;
Function ImageColor(image,R,G,B,MR,MG,MB)

	ii = CopyImage(image)
	
	x = ImageWidth(ii)
	y = ImageHeight(ii)

	SetBuffer ImageBuffer(ii)
	
	For i = 0 To y
		For j = 0 To x

			GetColor j,i
			
			rr = ColorRed()
			gg = ColorGreen()
			bb = ColorBlue()  

			sR# = rr / 255.0
			sG# = gg / 255.0
			sB# = bb / 255.0
			
			fR# = R * sR
			fG# = G * sG
			fB# = B * sB

			If rr &lt;&gt; MR And gg&lt;&gt; MG And bb&lt;&gt; MB Then  
				Color fR, fG, fB
				Rect j,i,1,1
			EndIf
		Next
	Next
	 
	SetBuffer BackBuffer()
	Return ii
	
End Function



;---------------------------------------
; Changes the Color of the given image ;
;---------------------------------------
Function ChangeColor(image,R,G,B,MR,MG,MB)

	x = ImageWidth(image)
	y = ImageHeight(image)

	SetBuffer ImageBuffer(image)
	
	For i = 0 To y
		For j = 0 To x

			GetColor j,i
			
			rr = ColorRed()
			gg = ColorGreen()
			bb = ColorBlue()  

			sR# = rr / 255.0
			sG# = gg / 255.0
			sB# = bb / 255.0
			
			fR# = R * sR
			fG# = G * sG
			fB# = B * sB

			If rr &lt;&gt; MR And gg&lt;&gt; MG And bb&lt;&gt; MB Then  
				Color fR, fG, fB
				Rect j,i,1,1
			EndIf
		Next
	Next
	 
	SetBuffer BackBuffer()
End Function
</pre> <br><br></td></tr></table><br>
<a name="327500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is that true that you shouldn't overlay 2D on 3D? It works fine for me so far, and is soooo much easier than using sprites. If I need to switch to sprites for all my drawing functions, I'm going to be VERY messed up. Especially for dynamic HUD elements... <br><br></td></tr></table><br>
<a name="327666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is true. What are your computer specs?<br><br>Also, if you wish to change the screen resolution (again, think of less powerful computers :) ), The images will look alot smaller, and will be positioned wrongly on the screen, or may not even appear on the screen, if the screen resolution is put down.<br><br>On the other hand, sprites and all other 3d elements, keep their positions, regardless of the screen resolution.<br>I'm not saying that you should definetly change it, but if you wanna make this run on a wide variety of computers, which you should ;), then consider switching to sprites or quads for the HUD.<br><br>Also, sprites give you the ability to have transparency in your HUD and all sorts of cool effects :) <br><br></td></tr></table><br>
<a name="327684"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> to be honest, I have done exactly the same thing for the crosshair in my FPS game (overlayed an image instead of sprite). It works fine on both my computers (specs in sig) - The resolution is changeable through the use of ScaleImage and GraphicsWidth()/GraphicsHeight commands - It is a lot easier and quicker, but I appreciate sprites should be the way to go. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
