<!DOCTYPE html><html lang="en" ><head ><title >Lighting a Mesh...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lighting a Mesh...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Lighting a Mesh...</a><br><br>
<a name="271705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> or more specifically, lighting a mesh Exported from Quill3D.<br><br>OK, I'm hitting a brick wall with this one &gt;.&lt;<br><br>I've exported a mesh as .b3d file from Quill3D into blitz but for the life of me I can't get it to react to <br><br>1) Hardware lights<br>2) fake LightMesh command lighting <br><br>I've loaded other meshes and they are getting lit by the 1 hardware light I have parented to the camera.<br><br>I load the Quill mesh with...<br><br><pre class=code>
m.LevelMesh=New LevelMesh
m\mesh=LoadMesh("./Media/dungy.b3d")
UpdateNormals m\mesh
EntityFX m\mesh,2
LightMesh m\mesh,255,0,0,10000,0,10,0
</pre><br><br>The mesh has 2 texture stages which are a rock texture and a lightmap texture.<br><br>After having no joy with the hardware light I tried the LightMesh command and even that doesn't have any effect.<br><br>I've even tried loading the mesh and then using a CopyEntity or CopyMesh to see if it would make a difference but it doesn't.<br><br>Anyone with an idea of what's wrong? <br><br></td></tr></table><br>
<a name="271716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The entityfx 2 flag sets the entity to fullbright, meaning that it is NOT effected by lights :D <br><br></td></tr></table><br>
<a name="271725"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I put the EntityFX in to see if LightMesh would have any effect -.- <br><br>Previous to that of course these commands were not in use since I want to hardware light the mesh. <br><br></td></tr></table><br>
<a name="271733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exporting as an .x file from Quill, hardware lighting works..albeit the normals of some faces aren't correct.<br><br>Time to file another bug report -.- <br><br></td></tr></table><br>
<a name="271755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yeah, i posted a bug report over in the quill forums about the .x exporter. Haven't got anyback yet tho :) <br><br></td></tr></table><br>
<a name="271776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Quill forums have been very quiet for a while...has Birdie flown the nest? O.o<br><br>Can't understand why UpdateNormals doesn't work...this is really bugging me now -.- <br><br></td></tr></table><br>
<a name="271781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think there is something more serious wrong then the normals facing th wrong way. There's been times where i've exported an object as an .x file and opened it and it didn't save anything. Just a blank file. I use .b3d now :D <br><br></td></tr></table><br>
<a name="271881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I worked out what it is.<br><br>The .b3d files Quill3D is saving create a brush with BrushFX 1, which means they are never going to react to hardware lighting.<br><br>I've started writing a converter and the meshes I have converted are now getting lit correctly. =) <br><br></td></tr></table><br>
<a name="271886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, i never noticed that! So all .b3d files that are exported have the fullbright flag on them? seems odd. Have you upgraded quill3d since you bought it? <br><br></td></tr></table><br>
<a name="271890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's basically the problem yes, its version 1.20 I'm using.<br><br>Need a lie down in a dark room after that -.- <br><br></td></tr></table><br>
<a name="271906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> This convertor you coded, will it be freely available ^_^ ? <br><br></td></tr></table><br>
<a name="271921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I ever bother to finish it =)<br><br>I think to get the effect Im after I either have to write a function/converter that increases the tesselation of a mesh so that vertex lighting looks ok, or use dynamic lightmapping. <br><br></td></tr></table><br>
<a name="272145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a short but sweet way ( thanks to the rather timely BLitz3D update =) ) to remove the EntityFX 1<br><br><pre class=code>
For s=1 To CountSurfaces(mymesh)
br=GetSurfaceBrush(GetSurface(mymesh,s))
BrushFX br,0
PaintSurface GetSurface(mymesh,s),br
FreeBrush br
Next
</pre> <br><br></td></tr></table><br>
<a name="272153"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, thanks alot for that :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
