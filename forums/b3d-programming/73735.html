<!DOCTYPE html><html lang="en" ><head ><title >waypoint creation on the fly?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >waypoint creation on the fly?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >waypoint creation on the fly?</a><br><br>
<a name="823960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been pondering spaceship AI over the last few days.  My idea is for the AI ship to create it's own dogfighting waypoints on the fly.  If the AI ship is approaching the player in attack mode, judging from entitydistance to the player it could create a waypoint behind and above/below/whatever the player in order to prevent a collision... then reacquire the player's position as the next waypoint.<br><br>Has this techniqe been done?  Seem feasible? <br><br></td></tr></table><br>
<a name="825916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Common waypoint calculation algorythms take a lot of cpu time. In a dogfight with multiple flying objects even more.<br><br>I would start this way: Let'em fly around randomly in nice curves. Then make them check what's just in front of them, using linepick. If there is danger of collision, they may steer in order to prevent a collision more or less intelligent. The easiest way is to simple steer to one side.<br><br>There may still be a risk for them to crash in a more complex situation, but this probably is going to feel kind of realistic. <br><br></td></tr></table><br>
<a name="825932"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> No need to even use a linepick - can simply use tformnormal as follows:<br><br>(pseudocode)<br><br><pre class=code>

TFormNormal OtherCraftX-MyCraftX,OtherCraftY-MyCraftY,OtherCraftZ-MyCraftZ,0,MyCraft

;this transforms the vector which points from mycraft to othercraft from worldspace into mycraft's space

If TFormedZ()&gt;0.7 then
;play with the 0.7 value, the closer it is to 1.0 (but less than 1.0) the closer the direction to the other craft is to 'dead ahead'

endif 

</pre><br><br>oh..also do an entitydistance check before the tform command as it may not be necessary to do the tform check if the other ship is far enough away.  <br><br>if you are going to do a linepick then you can still use the above code, you would do so by placing the linepick within the if tformedz()&gt;.. section, this reduces the number of linepicks you will need as there is no need to, for example, perform a linepick against a craft which is behind you.<br><br>Hope that is of some help. <br><br></td></tr></table><br>
<a name="825933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I find tformpoint is good for this sort of thing.  You can find where an enemy plane is relative to the position and direction the player is pointing ..<br><br>For example ....<br><br><pre class=code>
tformpoint 0,0,0,e\Mesh, player\Mesh
if tformedz() &gt; 0 then { enemy is in front }
if tformedz() &lt; 0 then { enemy is behind }
if tformedx() &lt; 0 then { enemy is to the left }
etc.....
</pre><br><br>You can also use it for bounding box collision checks ...<br><br><pre class=code>
if abs( tformedz() ) &lt; BoxZ and abs( tformedx() ) &lt; BoxX and abs( tformedy() &lt; BoxY then { a collision has occured }
</pre><br><br>Where BoxX, Y &amp; Z are the ( Players bounding box width + Enemy bounding box width ) * .5<br><br><br>[EDIT] Matt posted while I was but both are relavant and very useful.<br><br>Stevie <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
