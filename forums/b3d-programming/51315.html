<!DOCTYPE html><html lang="en" ><head ><title >AntiAlias</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >AntiAlias</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >AntiAlias</a><br><br>
<a name="572521"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sting</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I know this question has been asked before because I searched it, but so far i havent realy goten much help found. All i want to do is lessen the jaged edges of a black border (cel-shaded) 3D object. Its realy anoying to look at. Now before anyone gets into it im not loooking for any reasons why i should NOT have Antialising due to memory or render time or whatever. ok. The closest thing i found was an algorythem created by someone (using an example of orange and grey pipes) that softened the edges of pixles that were to different. I never got to test this as some of the functions were missing (bufferwidth,height,red,blue,green...)<br>I also looked into bloom filters.. have one that works but it doesnt work on darker colors so its sorta useless of this. Any help is fine thanks. <br><br></td></tr></table><br>
<a name="572532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could copy the buffer to a texture and use the blur filter in the code archives... That might kill the frame rate though... <br><br></td></tr></table><br>
<a name="572535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Snidesmin</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I'm working on an experiment that will do a raster edge detection along selected edges for cel-shading. (Hopefully way way faster than applying an edge detection to the whole screen!)<br><br>It is almost certainly going to be really, really slow, but if, in the remarkable event, it isn't too slow then it would probably be ideal.<br><br>You're currently using inverted mesh for the black borders, right? <br><br></td></tr></table><br>
<a name="572629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Leiden</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im sure there was also a DLL somewhere lying around that was a sort of helper to properly enable AA for a B3D app, dunno where its got too though :( <br><br></td></tr></table><br>
<a name="572638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doesn't "AntiAlias True" work? <br><br></td></tr></table><br>
<a name="572640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You'll be hard pushed to get any AA working effectively without proper hardware support. The best solution perhaps would be to render the scene in double resolution, perhaps in chunks, it textures and have the hardware scale it onto a screen-sized textured quad.  Or if it's for black lines only you could potentially use the vertex data to draw 2D antialiased lines along the black edges. That might well work. At least for the outside edge of the black object. The inside edge would be harder.<br><br>Still if anyone finds a working solution I'd love to know as my program's using cartoon shading. Though remember you can set your card drivers to forced AA. On a Ti4200 anything above 2x drops the framerate though and it doesn't make a huge difference.<br><br>In fact 4x AA, 8xAA still looks jaggied. It's just unavoidable with black lines against bright colours unless you draw the lines with a 2D antialising algorithm. <br><br></td></tr></table><br>
<a name="572731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sting</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross: That sounds simple. i didnt know there wasa "Blur" filter. ill look there also.<br>Mr Snidesmin: Yah im using a black inverted mesh. And on the BG it REALY looks bad.<br><br>All in all im trying to find something that doesnt rely on hardware at all. Because the fact is is if you dont program or arent a serious gamer you usualy dont HAVE a graphics card. most times its onboard and i like to make things compatable for a wide range. But if no solution in algorithems is goodenough with a good FPS then ill dive into other relms. Thanks all <br><br></td></tr></table><br>
<a name="572733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think halo did an antialiasing system... <br><br></td></tr></table><br>
<a name="572974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> AFAIK there's no reliable antialias system for Blitz3D.<br>It makes me sad! :( <br><br></td></tr></table><br>
<a name="573295"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll post Halo's antialiasing code when I get home. Pretty results. A tad slow in realtime, but.<br><br>Oh yeah - I'm back! &gt;_&lt; 8 months in Thailand with no internet was a pain. But at least I got some coding done. News soon. :)<br><br>+BlackD <br><br></td></tr></table><br>
<a name="573296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fred, Blitz AA has been broken for ages... and there is NO sure way to set it in DX anyway; even our 3DMarkXXXX doesn't have AA as default setting although we would like that. <br><br>Reason for this is that there's no way to make sure (within code) that driver actually enabled AA - yes, it may may say that yes I can and will do that but then just promtly ignore the AA request. Also there's now so many ways to do AA that findng equal or comparable (speed/quality wise) setting for all is close to impossible. <br><br>But it WOULD be nice to have Blitz3D even try to enable whatever AA user driver has as a default setting... and it would be nice to have DXTC too, but that's dreamworld hallucination. :) <br><br></td></tr></table><br>
<a name="573315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlackD</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Halo's antialias. I think it's more for static-image antialiasing rather than in-game, maybe for a render preview in a 3d modeller like.. ooh say.. Cartography Shop?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function AntiAliasBuffer(buffer,passes=1,threshhold=20)
gfxbuffer=GraphicsBuffer()
SetBuffer buffer
LockBuffer buffer
w=BufferWidth(buffer)
h=BufferHeight(buffer)
For p=1 To passes
	For x=0 To w-1
		For y=0 To h-1
			hue=ReadPixelFast(x,y)
			r=Red(hue)
			g=Green(hue)
			b=Blue(hue)
			count=BottomLeftPixelsAntialiased(buffer,x,y,threshhold)
			For n=1 To count
				perc#=Float(n)/Float(count)
				hue=ReadPixelFast(x-n,y)
				lr=Red(hue)*perc+r*(1.0-perc)
				lg=Green(hue)*perc+g*(1.0-perc)
				lb=Blue(hue)*perc+b*(1.0-perc)
				WritePixelFast x-n,y,RGB(lr,lg,lb)
				Next
			count=BottomRightPixelsAntialiased(buffer,x,y,threshhold)
			For n=1 To count
				perc#=Float(n)/Float(count)
				hue=ReadPixelFast(x+n,y)
				lr=Red(hue)*perc+r*(1.0-perc)
				lg=Green(hue)*perc+g*(1.0-perc)
				lb=Blue(hue)*perc+b*(1.0-perc)
				WritePixelFast x+n,y,RGB(lr,lg,lb)
				Next
			count=VerticalBottomLeftPixelsAntialiased(buffer,x,y,threshhold)
			For n=1 To count
				perc#=Float(n)/Float(count)
				hue=ReadPixelFast(x,y-n)
				lr=Red(hue)*perc+r*(1.0-perc)
				lg=Green(hue)*perc+g*(1.0-perc)
				lb=Blue(hue)*perc+b*(1.0-perc)
				WritePixelFast x,y-n,RGB(lr,lg,lb)
				Next
			count=VerticalBottomRightPixelsAntialiased(buffer,x,y,threshhold)
			For n=1 To count
				perc#=Float(n)/Float(count)
				hue=ReadPixelFast(x,y+n)
				lr=Red(hue)*perc+r*(1.0-perc)
				lg=Green(hue)*perc+g*(1.0-perc)
				lb=Blue(hue)*perc+b*(1.0-perc)
				WritePixelFast x,y+n,RGB(lr,lg,lb)
				Next
			Next
		Next
	Next
UnlockBuffer buffer
SetBuffer gfxbuffer
End Function

Function BottomLeftPixelsAntialiased(buffer,x,y,threshhold)
If x=0 Return
hue=ReadPixelFast(x,y)
r=Red(hue)
g=Green(hue)
b=Blue(hue)
w=BufferWidth(buffer)
h=BufferHeight(buffer)
Repeat
	found=False
	hue=ReadPixelFast(x-1,y)
	lr=Red(hue)
	lg=Green(hue)
	lb=Blue(hue)
	If Abs(lr-r)&gt;threshhold Or Abs(lg-g)&gt;threshhold Or Abs(lb-b)&gt;threshhold
		If y&lt;h
			hue=ReadPixelFast(x-1,y+1)
			blr=Red(hue)
			blg=Green(hue)
			blb=Blue(hue)
			If Abs(blr-r)&lt;threshhold And Abs(blg-g)&lt;threshhold And Abs(blb-b)&lt;threshhold
				found=True
				EndIf				
			EndIf
		EndIf
	If found
		count=count+1
		Else
		Exit
		EndIf
	If x=0 Exit
	x=x-1
	Forever
Return count
End Function

Function BottomRightPixelsAntialiased(buffer,x,y,threshhold)
hue=ReadPixelFast(x,y)
r=Red(hue)
g=Green(hue)
b=Blue(hue)
w=BufferWidth(buffer)
h=BufferHeight(buffer)
If x=w Return
Repeat
	found=False
	hue=ReadPixelFast(x+1,y)
	lr=Red(hue)
	lg=Green(hue)
	lb=Blue(hue)	
	If Abs(lr-r)&gt;threshhold Or Abs(lg-g)&gt;threshhold Or Abs(lb-b)&gt;threshhold
		If y&lt;h
			hue=ReadPixelFast(x+1,y+1)
			blr=Red(hue)
			blg=Green(hue)
			blb=Blue(hue)
			If Abs(blr-r)&lt;threshhold And Abs(blg-g)&lt;threshhold And Abs(blb-b)&lt;threshhold
				found=True
				EndIf				
			EndIf
		EndIf
	If found
		count=count+1
		Else
		Exit
		EndIf
	If x=w-1 Exit
	x=x+1
	Forever
Return count
End Function

Function VerticalBottomLeftPixelsAntialiased(buffer,x,y,threshhold)
If y=0 Return
hue=ReadPixelFast(x,y)
r=Red(hue)
g=Green(hue)
b=Blue(hue)
w=BufferWidth(buffer)
h=BufferHeight(buffer)
Repeat
	found=False
	hue=ReadPixelFast(x,y-1)
	lr=Red(hue)
	lg=Green(hue)
	lb=Blue(hue)
	If Abs(lr-r)&gt;threshhold Or Abs(lg-g)&gt;threshhold Or Abs(lb-b)&gt;threshhold
		If x&gt;0
			hue=ReadPixelFast(x-1,y-1)
			blr=Red(hue)
			blg=Green(hue)
			blb=Blue(hue)
			If Abs(blr-r)&lt;threshhold And Abs(blg-g)&lt;threshhold And Abs(blb-b)&lt;threshhold
				found=True
				EndIf				
			EndIf
		EndIf
	If found
		count=count+1
		Else
		Exit
		EndIf
	If y=0 Exit
	y=y-1
	Forever
Return count
End Function

Function VerticalBottomRightPixelsAntialiased(buffer,x,y,threshhold)
If y=h Return
hue=ReadPixelFast(x,y)
r=Red(hue)
g=Green(hue)
b=Blue(hue)
w=BufferWidth(buffer)
h=BufferHeight(buffer)
Repeat
	found=False
	hue=ReadPixelFast(x,y+1)
	lr=Red(hue)
	lg=Green(hue)
	lb=Blue(hue)
	If Abs(lr-r)&gt;threshhold Or Abs(lg-g)&gt;threshhold Or Abs(lb-b)&gt;threshhold
		If x&gt;0
			hue=ReadPixelFast(x-1,y+1)
			blr=Red(hue)
			blg=Green(hue)
			blb=Blue(hue)
			If Abs(blr-r)&lt;threshhold And Abs(blg-g)&lt;threshhold And Abs(blb-b)&lt;threshhold
				found=True
				EndIf				
			EndIf
		EndIf
	If found
		count=count+1
		Else
		Exit
		EndIf
	If y=h Exit
	y=y+1
	Forever
Return count
End Function
</textarea><br><br>+BlackD <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
