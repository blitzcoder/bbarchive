<!DOCTYPE html><html lang="en" ><head ><title >3D Mouse Probs</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3D Mouse Probs</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >3D Mouse Probs</a><br><br>
<a name="250504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> K<br>i need some help on this code u will need a couple of media files (grass3.bmp/heightmap_256.bmp) or any files will do<br><br>U use the mouse to control a cube on a terrain <br>Left mouse selects a destination point for the cube to goto<br>Right mouse rotates around the cube <br>Middle mouse zooms in<br><br>wot im after is when i click the terrain to make the destination point i need the camera to lock on the cube like a 3rd person type of view so the camera follows the cube to the destination point <br><br>ive nearly got it  but wot is happening now with this code is this <br><br>when i click the camera seems to snap to the destination point and the cube can sometimes be off screen<br><br>can any one help me on this problem<br><br>Graphics3D 800,600<br><br>SetBuffer BackBuffer()<br><br>AppTitle "3D-Mouse", "Are you sure?"<br><br>Const n_trees=200<br><br>Type player<br>	Field x#,y#,z#<br>	Field ang#,speed#<br>End Type<br><br>Global me.player=New player<br>Global clickedx#,clickedz#<br><br>light=CreateLight()<br>LightColor light,156,156,156<br>TurnEntity light,60,60,0<br><br>;Collisions 3,2,1,1<br>Collisions 3,1,2,3<br>Collisions 2,1,1,3<br>Collisions 3,4,1,1<br><br>Global piv=CreatePivot()<br><br>Global pointer = CreateCube(piv)<br>ScaleEntity pointer,.5,.5,.5<br>EntityColor pointer,0,256,0<br>EntityType pointer,2<br><br>Global cubepiv=CreatePivot()<br><br>Global cube=CreateCube(cubepiv)<br>EntityRadius cube,2,2<br>EntityType cube,3<br>PositionEntity cube,20,1,20<br><br>Global campiv=CreatePivot()<br><br>Global cam=CreateCamera(campiv)<br>CameraRange cam,.1,1000<br>RotateEntity cam,45,0,0<br>EntityType cam,2<br>PositionEntity cam,0,80,-80<br>EntityType campiv,4<br>;CameraViewport cam,0,0,GraphicsWidth(),500<br><br>Global terrain = LoadTerrain ("heightmap_256.bmp")<br>ScaleEntity terrain, 5,100,5<br>TerrainShading terrain, True<br>TerrainDetail terrain, 2500,True<br>grass=LoadTexture( "grass3.bmp" )<br>ScaleTexture grass,30,30<br>EntityTexture terrain,grass<br>EntityType terrain,1<br>EntityPickMode terrain,2<br><br><br>MoveMouse GraphicsWidth()/2,GraphicsHeight()/2	<br><br>;set up fps counter<br>fps_milli=MilliSecs(): fps_counter=0: update_frequency=10<br><br>While Not KeyHit(1)<br><br>	mx#=-MouseXSpeed()*1<br>	<br>	<br>	CameraPick (cam,MouseX(),MouseY())<br>		<br>	PositionEntity pointer,PickedX#(),PickedY#(),PickedZ#()<br>	<br>	If MouseHit(1)<br>		<br>		MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>		PositionEntity campiv,PickedX#(),PickedY#(),PickedZ#()<br>		me\speed=.6<br>			<br>	EndIf<br>		<br>	If MouseDown(2)<br>	<br>		MoveMouse GraphicsWidth()/2,GraphicsHeight()/2<br>		PointEntity cam,cube<br>		TurnEntity campiv,0,mx#,0<br>		<br>	EndIf<br>	<br>	moveplayer()<br><br>	If MouseDown(3)=True <br>		zoom#=zoom#+1<br>	EndIf<br><br>	If MouseDown(3)=0 <br>		zoom#=zoom#-1<br>	EndIf<br><br>	If zoom#&lt;1 Then zoom#=1 <br>	If zoom#&gt;2 Then zoom#=2<br>	<br>MoveEntity cube,me\x,me\y,me\z+me\speed<br><br>CameraZoom cam,zoom#<br><br>UpdateWorld<br>RenderWorld<br><br>; fps counter<br>fps_counter=fps_counter+1<br>If fps_counter=update_frequency<br>fps=1000/Float(((MilliSecs()-fps_milli))/update_frequency)<br>fps_milli=MilliSecs()<br>fps_counter=0<br>EndIf<br><br>; print fps<br>Text 0,0,"FPS: "+fps<br>Text 80,0,"MouseX: "+MouseX()<br>Text 180,0,"MouseY: "+MouseY()<br><br>Text 0,20,"EntityX: "+EntityX(cube)<br>Text 0,40,"EntityY: "+EntityY(cube)<br>Text 0,60,"EntityZ: "+EntityZ(cube)<br>Text 680,0,"Time: "+CurrentTime()<br>Text 600,15,"Triangles Rendered: "+TrisRendered()<br><br>Flip<br><br>Wend<br><br>End<br><br><br>Function moveplayer()<br><br>		x#=EntityX(cube) <br>		y#=EntityY(cube) <br>		z#=EntityZ(cube) <br><br>		terry#=TerrainY(terrain,x#,y#,z#) <br>		PositionEntity cubepiv,me\x,terry#,me\z		<br><br>	PointEntity cube,campiv<br>	<br>	RotateEntity cube,0,EntityYaw#(cube),0<br>	<br>End Function<br><br><br>please feel free to use this code if it is any good lol<br><br><br>Thanks<br><br>GIMPY :) <br><br></td></tr></table><br>
<a name="250924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> K im still stuck with this can some body plz help me on this <br>ive been stuck on this for about a week lol <br><br>i just need the camera to follow the cube and not snap to the locataion i click ive tried pointentity cam,cube but it goes wrong  ive also tried other pointentity combo's but it still dont seem to work <br><br>as soon as this is fixed i will put it up in the code database for anybody to use<br><br>it could be used for a level editor or an RPG or wotever<br><br>plz some one help me <br><br><br>Thanks<br><br>GIMPY :) <br><br></td></tr></table><br>
<a name="250936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure what specific effect you are after but if you want the camera to follow the cube make the camera a child of the cube:<br><br>Global cam=CreateCamera(cube) <br><br></td></tr></table><br>
<a name="250939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Shambler that might just do it :)<br><br>ill give it a go <br><br><br>Thanks<br><br>GIMPY :) <br><br></td></tr></table><br>
<a name="250953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ethan3850</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try using 2 pivots...<br><br>Make 2 pivots children of ur cube:<br>One where you want the camera to sit on the cube,<br>   One just in front of the cube's "nose" so you can point the camera forward.<br><br>To move the camera from "birds eye" mode to 1sr person:<br>Use some variables to store where your birds eye camera is positioned at and which way it is facing.  Use EntityParent to parent the camera to your cube's camera pivots, then simply EntityPosition your camera on top of it.  Now use PointEntity to point the camera at your cube's nose pivot.  <br><br>To put the camera back to birds eye position, ParentEntity it to nothing then EntityPosition again using your stored variables and then point it back to the ground.<br><br>You might have to play around in order to get the best results (you may have to reset your camera zoom when on the cube etc).<br><br>Hope that makes some sense. <br><br></td></tr></table><br>
<a name="250984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIMPY73</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Sainfohi ill play about with ur method also<br><br><br>Thanks<br>GIMPY :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
