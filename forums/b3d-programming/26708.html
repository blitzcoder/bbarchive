<!DOCTYPE html><html lang="en" ><head ><title >Triangulate Them Polygons!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Triangulate Them Polygons!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Triangulate Them Polygons!</a><br><br>
<a name="279021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I just put up in the code archives my source to my triangulate polygon toy thing-a-ma-jigger. I really did find this interesting and hope mabie by sharing this that somebody may actaully one day figure out my coding style and learn from it in some way.<br><br>Props to Fredborg for supplying the link to the source of PolyTri! I had fun doing my version. This is pretty much all I'm going to do with this code. Hope ye likes! :)<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=816" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=816</a><br><br>edit: oh, It basically demostrates triangulating points of a polygon that you plot. The plane that the points are on can be at any orientation. Don't forget to plot your points in a clockwise orderly fashion. <br><br></td></tr></table><br>
<a name="279075"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Todd,<br><br>That's pretty nice :) I'll release the PolyTri one, in a few days, it's a bit more flexible than yours. (Or at least I think it is ;) <br><br></td></tr></table><br>
<a name="279226"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I realized that I wasn't coding it in a way to make it more "plug-n-playable". So, I just went ahead and made it into a little toy like thing just so I can see the results faster. I think I may have overdid my 3d maths a bit, but at least I have a better understanding of it now. <br><br>Definetly looking forward in seeing your version! :) <br><br></td></tr></table><br>
<a name="279404"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I dunno why, but I like stuff like this.  But, the question is: what are you guys using it for? <br><br></td></tr></table><br>
<a name="279418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally, It's going to help me in my CSG boolean operations when splitting polys. Also, it's perfect for me to "automagically" create standard proper convex/concave shaped portals for use with occlusion culling. <br><br></td></tr></table><br>
<a name="279496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been playing around with occlusion culling as well.<br>Currently I extract the edges that makes the outline of my occluding object and then I "create" planes using the vertices of each edge and the cameraposition. Then I simply check if entities are behind each plane(Just like frustum culling, but reversed).<br><br>The problem I have is to order the edge vertices by clockwise order. Currently I'm using Grahams method using the angle to each point to sort them, but it's not working well when two points are too near to each other.<br><br>The occluder is made by creating a very simple convex hull around the "carefully" selected entity.<br>It wouldn't be good to use every entity as an occluder as it would slow down the occlusion test to a point where it would defeat it's own purpose(to get better framerates).<br>A house or a hill are examples of good occluders while a bush or a small rock are bad occluders.<br>Also, the occluder must be a certain distance from the camera before it's used in the occluder test.<br>An occluder that is too far away wouldn't be worth testing(I think you know why).<br><br>By the way, the edge extracting is a simple way to outline an object with black edges by simply drawing black line between the edges vertices, however the line command slowed down my application ALOT and so far I only got it to work with convex objects(spheres, boxes and cylinders). <br><br></td></tr></table><br>
<a name="279699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats what I'm working out on paper at the moment too for my CSG operation's triagnle edge splitting part where I need to keep new vertices in clockwise order for each new poly. <br><br></td></tr></table><br>
<a name="279730"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweenie, if I was doing something like creating an outline of an object with extracted edge vertex points to create planes with, I would do something like this:<br><br>Since an edge point of triangle should connect to another edge point of the adjacent triangle I would take the first extracted edge and compare it's edge points with the second extracted edge points. Then store them in a clockwise order in a list. Then take the second triangle edge points and compare them to the third triangle edge points and store the new points in the last of the list to keep them in clockwise order. And so on... basically in a syncronise order. Ofcoarse, this idea is working on the idea where you pick the triangles that have the needed edges in a clockwise order in the first place.<br><br>If you can do above, then you can easily use a triangulation method against those new points like with what I did for my triangulation toy program. Hopefully, Fredborg will have a nice easy plugable triangulation code here soon if you need that or you can roll your own.<br><br>Hope that may spark an idea or two for ya... <br><br></td></tr></table><br>
<a name="279732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >starfox</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Todd have you looked at my CSG stuff yet?<br><br><a href="/codearcs.php?code=552" target="_blank">CSG Function</a><br>It has a triangle splitting function, along a plane. <br><br></td></tr></table><br>
<a name="279742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, I did look at it some time ago. You did a very nice job with it indeed. What I'm doing is trying to learn the process of coding CSG myself and I am doing it in C/C++ userlib functions.<br><br>If I remmeber correctly, your csg functions where sort of like WorldCraft csg where the object's polygon faces where facing outwards. I remmeber doing something with the code you provided to get the csg to act like maplet's csg and it basically worked. But, I remmeber where if you csg in the same spot, the csg would add polygons then on the next same csg operation it would delete polygons ( and so on... ) on the coplanar plane where one side of each object would share.<br><br>Basically, I just decided to start from scratch and roll my own. Now, I am finally doing it for my level editor I'm working on.<br><br>Edit: ok, I might do it in C/C++... depends if my csg ops are fast enough in blitz. <br><br></td></tr></table><br>
<a name="279802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> My triangulate toy code is a little bit cleaner now. Took out some left over unused variables. Plus, I had fixed a message that needed to be displayed when you step through the triangulation process with your space bar. <br><br></td></tr></table><br>
<a name="280000"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> My method might not be the best, but here is how I do it.<br>First I build a list of all unique edges in the mesh.<br>Every edge belong to two triangles so for every edge I store the index to these two triangles.<br><br>Then, in the mainloop I iterate through each edge and do a backfacecull of the two triangles. If one triangle is hidden and one is visible I got myself an outline edge.<br>To make sure that the edge is clockwise aligned, I simply perform a trianglearea calculation using the two vertices of the edge and the midpoint of the mesh.<br>Since the outline is a 2D-shape I do the triangleareacheck in 2D, that is, the vertexpositions and midpoint is projected to screencoordinates before doing the calculation.<br>If the trianglearea is negative I flip the vertices(or rather the variables that holds the vertexindices)<br>Finally, I create the planes using every edge and the cameraposition.<br>I just got it working last night, but was to tired to test if this really gives me a speedboost.(Can't wait to get home)...<br><br>By the way, the meshes I use for occluding must be convex, solid and have shared vertices.<br>It can have "unshared" vertices if I rewrite the code that build a list of edges.(Maybe later)<br><br>Tonight I will clean up the code(quiet a mess right now) and try to optimize the code(At least I will try) and then I will post the code. <br><br></td></tr></table><br>
<a name="280006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way Todd, do a googlesearch on "giftwrap" and "convex hull" and you should find some pages with good reading. <br><br></td></tr></table><br>
<a name="280174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yup, I know about convex hulls but they limit me because of it's convex nature. Try ploting points in a shape of an "S". You wont end up with a solid "S" shape because it's properties contains concave attributes. I haven't heard of "giftwrap" yet though. I did try to search for it on google but came up with bunch of personalized gifts type links. So I gave up quickly on that.<br><br>Good to hear that you got it working last night. Looking forward in seeing your code in action. :) <br><br></td></tr></table><br>
<a name="280196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Giftwrap is one of the many methods to get the convex hull and you get the points in clockwise order too, but you are absolutely right that this is worthless when you want concave shapes.<br><br>By the way, wouldn't it be easier if you draw lines between every new point you add. That way you get a kind of "preview/outline" version of what the triangulated object would look like. The user can also see directly where the points shouldn't be placed.<br>You could also prevent a new line(point) from intersecting another line(could be an optional feature) <br><br></td></tr></table><br>
<a name="280222"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pepsi</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I should of done that. I'll go ahead and put lines in there and put in my line intersection code to help not cross edges like that. It crossed my mind before, but I was just lazy. It'll be later on today or tommorrow before I add that. Right now I need to finish up my CSG stuff. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
