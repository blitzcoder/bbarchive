<!DOCTYPE html><html lang="en" ><head ><title >EntiyAlpha/Color on AnimMesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >EntiyAlpha/Color on AnimMesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >EntiyAlpha/Color on AnimMesh</a><br><br>
<a name="413873"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityAlpha and EntityColor don't seem to have any effect on a mesh loaded with LoadAnimMesh. When I just used LoadMesh, they work. The mesh is a b3d generated by lwconvert. Have others encountered this problem? Is there a workaround? <br><br></td></tr></table><br>
<a name="413874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try using FindChild() or GetChild() ( FindChild is easier ) to locate the pieces you want to use EntityAlpha and EntityColor with. When you use LoadAnimMesh, it uses a hierarchy with a pivot at the base, and I think you're EntityAlpha'ing and EntityColor'ing that pivot. <br><br></td></tr></table><br>
<a name="413883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course! Thank you! <br><br></td></tr></table><br>
<a name="413893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, now CountChildren is only returning "1", so I can only get at the first model in the heirarchy. Maybe this is an oddity of how LWConvert does it's thing? The B3D is available at the link below, if anyone can enlighten me.<br><br><a href="http://www.optibrain.co.uk/downloads/bot1_legs.B3D" target="_blank">http://www.optibrain.co.uk/downloads/bot1_legs.B3D</a> <br><br></td></tr></table><br>
<a name="413894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's why I suggested using FindChild, because then you don't have to recursively trundle through the hierarchy manually. If you really want/need to do it this way, JFK's entry in the code archives will show you the structure of your mesh :<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=615" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=615</a> <br><br></td></tr></table><br>
<a name="413899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> *blink*<br><br>Okay, I'm gonna study that snippet more closely. Oh, wait, I get it. Of course. "Child" only works for one "level", it needs to be called for each part and so on and so on. Okay, I can dig it. As you say, recursive trundling ahoy.<br><br>Bloody hell, all I want to do is make it transparent when it's not selected in the editor. <br><br></td></tr></table><br>
<a name="413913"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, you need to create your collection of recursively working Commands of things like EntityAlpha, EntityFX, EntityColor etc.<br><br>Example:<br><pre class=code>

Function EntityAnimColor(m,r,g,b)
 If EntityClass$(m)="Mesh"
  EntityColor m,r,g,b
 Endif
 For i=1 to CountChildren(m)
  ww=GetChild(m,i)
  EntityAnimColor(ww,r,g,b)
 Next
End Function

or

Function EntityAnimAlpha(m,a#)
 If EntityClass$(m)="Mesh"
  EntityAlpha m,a#
 Endif
 For i=1 to CountChildren(m)
  ww=GetChild(m,i)
  EntityAnimAlpha(ww,a#)
 Next
End Function

</pre><br>(The EntityClass check is done because you cannot set Alpha on bones, and children may be bones sometimes) <br><br></td></tr></table><br>
<a name="413917"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gburgess</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, crikey. Okay, thanks guys. Guess I'd better get my groove on and write a few of these bad boys. Better figure out texturing, I guess that's not gonna be as straightforward either. I guess UU3D copes with it okay, so it'd just be a case of applying the same texture to a bunch of different parts. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
