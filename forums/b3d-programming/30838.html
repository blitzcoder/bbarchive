<!DOCTYPE html><html lang="en" ><head ><title >prince of persia glow</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >prince of persia glow</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >prince of persia glow</a><br><br>
<a name="328719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> im trying to do glow effect like u can see in prince of persia (anyone had any idea?) <br><br></td></tr></table><br>
<a name="328744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> They probably did something with shaders for that.. but something similar should be possible.<br><br>Which glow effect are you talking about anyway? there's quite a few in Sands of Time.<br><br>Tracer <br><br></td></tr></table><br>
<a name="328748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> The effect is called 'bloom' <br><br></td></tr></table><br>
<a name="328780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Afrohorse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I believe what they are doing is taking the framebuffer (either from the previous frame, or the current) scaling it down to a lower resolution texture and applying a contrast filter to it - Then overlaying it back over the screen. They also increase the feedback and dampen down the contrast when the camera moves quicky it seems, to give a motion blur effect - it's all very nice :)<br><br>I've seen the effect on the PS2 version, so it can be done without a pixel shader however, although on the PS2 it is possible to apply a contrast filter when you copy back from the backbuffer (which you can't really do on PC). Also, the PS2 has alot of fill-rate, so the fullscreen overlays aren't a problem.<br><br>It's a really nice effect and can be emulated in blitz, but it means copying back from the frame buffer so its going to be slow. I did a mock up of the effect not so long back in blitz, it looked nice but it was just too slow (it really needs RenderToTexture to avoid the copy back) :( <br><br></td></tr></table><br>
<a name="328797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I've seen the effect on the PS2 version, so it can be done without a pixel shader however<br> <br></div><br><br>ps2 has pixel shader, well i thought they had some form of them. <br><br></td></tr></table><br>
<a name="328806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Afrohorse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you're thinking of vertex shaders...?<br><br>The PS2 can do vertex processing, anything that a vertex shader can do, it has two Vector units that you can use for that. It can't really do per-pixel shader calculations, like a PC can - shame really... <br><br></td></tr></table><br>
<a name="329601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Flexman</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ATI and Nvidia both have papers on these effects. You're talking about "seperable gaussian blur". Render ambient parts to a texture, blur it, *add* it back to the scene. Prince of Persia seems to have ambient everything so the whole scene has a glow.<br><br>You can do it with shaders, but it's not required. <br><br></td></tr></table><br>
<a name="329883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> resizing the backbuffer to a small texture might be a very fast method to blur it, no? One could have a 64*64 Texture with flag 256, then use cameraviewport to render a 64*64 Pixels scene, then  edit the contrast with readpixelfast and finally stretch it alphaed and with flag 2 across the screen. <br><br></td></tr></table><br>
<a name="329901"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jim Teeuwen</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> the read/writepixelfast part will be the big timeconsumer here I think. Might be better of letting some tight assembly code handle that from a dll.. although I think the blitz routines are allready pretty much optimized to death <br><br></td></tr></table><br>
<a name="329908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Afrohorse</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks like this effect has a lot of weird names; 'glow', 'bloom', 'High dynamic range', 'seperable gaussian blur' - but no matter what you call it, it involves rendering to a texture and a full-screen blended sprite, so a real no-no for low end cards. <br><br>jfk - I did try using a 64x64 texture for this, but the filtering on the full-screen overlay sprite just wasn't enough to smooth out the pixels on a texture and having a contrast filter just makes the edges more noticable. Maybe adding a blur filter might do it, damn costly tho! The blur filter would have to read texels, so the texture would have to be copied back the AGP bus the slow direction - then edited in system memory - then copied back up to the card :(<br><br>Hmmm, using flag 256 on the texture - would that be faster or slower if you edit the pixels every frame in system memory? I guess when you lock it, it would get copied from vram anyway, so it might not make much difference - just wondering... ;) <br><br></td></tr></table><br>
<a name="329914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look in the general forum for a thread on "HDR" images.  There's a function someone is working on that does this exact effect and it will be reelased soon, using a blurring function I wrote which uses hardware blending so it's very fast. <br><br></td></tr></table><br>
<a name="329951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or maybe you should use two sprites or quads, one with a half a texel offset. The texture would be the same, so no loss there. (Or maybe 4 or even 8 Quads) <br><br></td></tr></table><br>
<a name="330023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe people should stop worrying about people with low end machines, that way they have to catch up with the rest of us. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
