<!DOCTYPE html><html lang="en" ><head ><title >Collision calls returning no value?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision calls returning no value?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Collision calls returning no value?</a><br><br>
<a name="990690"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> A new engine, and I'm up to the point where I want to implement falling/gravity.<br>So of course I'll need to know when I hit the floor to reset the gravity variable.<br><br>The player has an EntityType.<br>The terrain has an EntityType.<br>All collisions for all types have been set.<br>The player is happily walking up and down slopes, using a constant  TranslateEntity piv,0,-World\wgrav#,0 type call.<br><br>But I am getting zero return value from both EntityCollided(piv,TYPE_TERRAIN), and CountCollisions(piv).<br><br>As usual, I'm hoping someone says, "But have you thought of...." and I slap my hand to my forehead. But it's been 10 hours now, and I'm climbing the walls. Thanks, people. <br><br></td></tr></table><br>
<a name="990748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Found it!<br><br>I needed an extra UpdateWorld() between TranslateEntity() and EntityCollided() or CountCollisions() so that those calls returned values.<br>Duh? <br><br></td></tr></table><br>
<a name="990787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just move the code so that...<br><br>Changes to entity positions happen<br>UpdateWorld<br>Tests for collisions happen<br>RenderWorld<br>flip<br><br>or<br>Tests for collisions happen<br>Changes to entity positions happen<br>UpdateWorld<br>RenderWorld<br>Flip <br><br></td></tr></table><br>
<a name="990794"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes - probably not a good idea to have multiple updateworlds floating around. Screws up animation timing for a start. <br><br></td></tr></table><br>
<a name="990978"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, guys.<br>It seems so obvious once you realise.<br>But it still took 10 hours!<br>Doh! <br><br></td></tr></table><br>
<a name="992251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Additional UpdateWorlds are costy, cpu-wise. But when you need one, use UpdateWorld(0), as far as  I know this will leave the animations untouched. <br><br></td></tr></table><br>
<a name="992261"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it ok to have 2 UpdateWorlds in the code? For me, I'm making a multiplayer game but I need one UpdateWorld in the UpdatePlayer function (which only updates your player) so I can animate the player based on his last movement and the other UpdateWorld in the main loop to update the other player's animation. Your player's UpdateWorld is inside two If..End statements. So it's not called if your player's <b>model is not loaded yet</b> and <b>you are dead</b>, that's why I have the second UpdateWorld in the main loop. <br><br></td></tr></table><br>
<a name="992263"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gia, <br><br>probably better to find another way to handle your system , so that you can use one updateworld() <br><br></td></tr></table><br>
<a name="992265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh ok, I'll do that then, I'm sure I can do it some other way. <br><br></td></tr></table><br>
<a name="992267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would also suggest to use only one UpdateWorld directly in your mainloop. But it might be ok to do an additional UpdateWorld in a special Situation. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
