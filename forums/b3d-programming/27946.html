<!DOCTYPE html><html lang="en" ><head ><title >more then 8 lights</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >more then 8 lights</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >more then 8 lights</a><br><br>
<a name="293297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks to Gile[s]!<br><br>I think I found a way to give the illusion of multiple lights in a level while useing only one hardware light...it's a trick basied on what id software did for the first Quake game...<br><br>You would need a level that uses lightmaps for "lighting" a level (second set of U,V cords for the lightmap, etc..)<br><br>I discovered this while playing around with Gile[s] trying to get surfaces to act as light sources (great program, BTW)...dunno if others have figured it out yet...but I'll post this anyway to give you all some ideas...<br><br>You need a game level with lightmaps, and one hardware light (just a directional one to shine light down onto your entities)...<br><br>basicly for each entity in the level you do a linepick strait down to the level mesh, get the triangle and calculate the pixel cords for the lightmap texture (use second set of U,V cords)...then find the color of the lightmap pixel at those cords...then entitycolor the entity with that color!<br><br>This will seemingly change the light color and intensity of the entity...a dark lightmap value will make the entity seem in shadow...a bright red lightmap value would make it look like it was in light with a red light...a full on white entitycolor value would make it look "normal"...this works because by default entities are full white and textures are rendered with the multiply flag by default (meaning that the texture acts sorta like a lightmap on the entity by default)...I don't own Blitz3D yet (come on X-Mas money!), but playing around with the demo and a "find texture cords" routine here, shows that it could work out nicely I think...not truely accurite, but should work for most things...<br><br>to speed things up when loading the game level, copy the lightmap to a bank or array, this way you can get the lightmap values without locking the texture and readpixel fast...which would be slower then a simple look up in an array or bank...<br><br>Hope this helps, and sorry if this was pointed out earlyer. <br><br></td></tr></table><br>
<a name="293302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, this is in fact a good idea.<br><br>In fact, see <a href="http://www.blitzcoder.com/cgi-bin/showcase/showcase_showentry.pl?id=kusonagi09182003234308&amp;comments=no" target="_blank">this implementation on Blitzcoder</a> for an example. <br><br></td></tr></table><br>
<a name="293511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i replied to this, i know i did. <br><br></td></tr></table><br>
<a name="293519"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's a good idea. However it is likely to make mistakes where there is a huge drop - the linepick will return the colours at the bottom of the level, while the character is at the top.<br><br>I had been investigating this only very recently and came up with an idea which will involve cubemapping at very low resolution to give my character a radiosity style lighting. It's fairly expensive though.<br><br>Another solution I have is virtual lights - you can simply re-use the lights based on a grid or tree to see what lights go where fast.<br><br>Any other solutions will be welcome too... <br><br></td></tr></table><br>
<a name="293520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyBeRGoth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey MSW do you have some code that can do this?<br><br>I tried with some success, but its not quite right <br><br></td></tr></table><br>
<a name="293666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MSW</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> CyBeRGoth - sorry don't own Blitz3D yet, so no code...just do a linepick strait down and get the level polygon, from there get that polygons cords and interpolate the linepick location within them, which will give you a approximation of the lightmap pixel to get...not hard at all.<br><br>Rob - Yeah it wouldn't be to accurite unless the characters were always on the "ground" (even then there could be mistakes...the ground is dark, but the right type of light exists that should illuminate the characters torso, etc..) plus useing the one directional hardware lightsource to provide shadows on all entities when some would be light from different angles in different locations of the level)...but for a fast sort of action game, or one that isn't trying to be "realistic" this should work fine...<br><br>Another idea I had that could work for those situations where the character is flying or falling (where the lighting exibits some mistakes from the great distance between the ground and player)...this wouldn't use cubemapping exactly, and should be even faster then the linepick with lightmap method...but this would use a lot of memory (and to do it properly would mean that you might have to create your own level modeler and/or file formats)....you create a pivot that defines the "World Origin"...and then when a character isn't in a posistion to use the linepick lighting...subtract this pivot location from the character location and divide by the "light sample size"...which should give you a set of values to retrieve a light value from an 3D array...sort of like a 2D tile map but 3D...course you would want a large "light sample size" (sort of like a tile size but a cube or rectangle in shape) so the array doesn't grow too large...and to help improve this you could interpolate the light values as the character moves around and such....could even use this array as a sort of global lighting...set the entity color to it when off the ground...then when on the ground calculate the light value (maybe 20% of the light array value for the location and 80% of the linepick lightmap value, etc...<br><br>to save space the level could be broken down into seperate light array sectors...each with their own "world origin pivot" and "box" describeing the 3D area the light array covers...then just checking the character location with these boxes tells you which light array to use...would save some empty array space for areas outside the level and such, pluss allow you to pack in higher "light array resolutions" in certain areas of the level for different effects...<br><br>I'm definetely picking up Blitz3D, just got to wait until I get some X-Mas money...this lighting thing was one of the reasons I held off for so long...but I think that this linepick and light array thing would work perfectly for the games I have in mind :D <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
