<!DOCTYPE html><html lang="en" ><head ><title >Lightmapping problem</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Lightmapping problem</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Lightmapping problem</a><br><br>
<a name="446882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know how to solve problem with lightmaps?? I'm build excellent level in 3DSMAX, after that light everything with Radiosity, and thing looking good. Now, problem is how to export light information? I'm try to do texture baking, but it was wrong way..all textures (especially on bigger surfaces) was not good at all after baking..so, i try to use lightmap baking, but still cant properly apply lightmap texture on to exported 3DS file. I'm found tutorial how to do that with B3D and pudding exporter for max..nice thing, but somehow, exported B3D is not possible to load in to Blitz, and i get error message like memory acess violation, while with 3DS I no have problem at all..so, is it possible to apply lightmap texture on to 3DS inside Blitz3D? Anyone can help?? <br><br></td></tr></table><br>
<a name="446907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> for 3DS you need 2 models as 3DS does not support multiple UV coords which you need for lightmapping.<br><br>-&gt; export 1 3DS file with the regular geometry and texturing<br>-&gt; export a second 3DS file with the geometry and the lightmap applied <br><br></td></tr></table><br>
<a name="446909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think you'll get very good or accurate results using Max baked maps - it's a bit of a bodge and not really useful for large or outdoor areas. I tried experimenting a while back and in the end I bought Giles which does a fantastic job and has a few other possibilities besides just lightmaps such as way point plotting etc... <br><br></td></tr></table><br>
<a name="446923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora...how to combine this two 3DS files?? <br><br></td></tr></table><br>
<a name="446930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> no problem at all with lightmaps in max here, just that my system is old and slow. If your using radiosity or light tracer you just have to get used to the fairly complex setup required. For outdoors your generaly better off with light tracer, and for radiosity you should always use photometric lights as the radiosity doesn't work well at all otherwise, wasn't designed to work with regular lights.<br><br>If you are used to doing pre rendered stuff Max isn't hard to use and produces far better results than giles, but requires a lot more work and knowledge. Giles is nice a its so simple and easy to set up with almost no knowlege of lighting and 3dsmax at all. <br><br></td></tr></table><br>
<a name="446936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> max is not problem...we are friends quite long time...I'm just trying to found way how to compose my lightmap in to blitz3D...in fact, i have already something done with B3D file and it working well, but level is not so huge, this time, scene is very complex, and lighting is finished, but when I export my B3D file, and try to load it in to Blitz3D, it doesnt work...instead of that, 3DS working well..except i dont know how to apply lightmap on it..Dreamora mention something about 2 different meshes, one with textures and normal ambient light and second one with lightmap applied on it...looking good, but I'm wondering how to combine that 2 meshes in Blitz3D..and does that mean i will get double heavy scene if we talking about polys... <br><br></td></tr></table><br>
<a name="446947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> load both meshes then read out the UV datas of the second mesh and add them to the first as UV 1. if you didn't alter the hierarchy it should just be a collection of 2 "for next" loops to combine it after loading <br><br></td></tr></table><br>
<a name="446950"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora...I will apprechiate if you can put down some piece of code what will do exactly what your explanations talking about..sorry for boring with this... <br><br></td></tr></table><br>
<a name="446954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
mesh = loadanimmesh( "level.3ds" )
lmesh = loadanimmesh( "lightmap.3ds" )

for i = 1 to countchildren(lmesh)
  for j = 1 to countsurfaces( lmesh )
    lsurf = getsurface( lmesh, j )
    surf = getsurface( mesh, j )
    for k = 1 to countvertices( lsurf )
      u# = VertexU( lsurf, k )
      v# = VertexV( lsurf, k )
      VertexTexCoords surf, k, u#, v#, 1, 1
    next
  next
next

</pre><br><br><br>As mentioned this needs that you have the similar geometry on both models, otherwise this is useless.<br>For texturing you will have to investigate the whole thing a little on your own :) <br><br></td></tr></table><br>
<a name="446969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> hey sub zero? since your using 3dsmax I'd suggest using B3d pipeline for your export and ignoring .3ds alltogether.<br><br><a href="http://www.onigirl.com/pipeline/" target="_blank">http://www.onigirl.com/pipeline/</a><br><br>its a great exporter with a custom material and map type that supports all ob bltiz 3d material features natively and really easy to set up the lightmaps with. Anyone with max should really be using that as an exporter even without using the extensions it's the best max to B3d exporter out there, and it's free :) <br><br></td></tr></table><br>
<a name="446974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Evak says, it's really quite easy ( if rather laborious and time consuming if you have lots of materials. ) You simply choose a Blitz3d brush instead of standard in Max's material editor and scroll down to the texture slots. Click on the first one and pick Blitz3d texture from the new list of material types. Pick the diffuse ( base ) texture from the texture dialog and drop back to the brush ( not texture ) again. Now click on the second texture slot and create another Blitz3d Texture. This time pick the lightmap texture and change the the uv channel from one to two. Again drop back to the Blitz3d Brush material and drag it onto your object. Export as b3d. Simple as that.<br><br>EDIT : Fixed my terminology so that it fits with the dialog boxes Evak has posted below. <br><br></td></tr></table><br>
<a name="446984"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> just to illustrate Sybixus text, here's some pics from the UI.<br><br>B3d Brush material type:<br><br><img src="http://www.onigirl.com/pipeline/Images/B3dBrush.gif"><br><br>Map panel:<br><img src="http://www.onigirl.com/pipeline/Images/B3dMap.gif"><br><br>If your doing lightmaps in max, you may also want to try Bakersfield scripts:<br><br><a href="http://www.chuggnut.com/scripts/bakersfield/bakersfield.htm" target="_blank">http://www.chuggnut.com/scripts/bakersfield/bakersfield.htm</a><br><br>These simplify the whole process a fair bit by putting all the lightmap settings under one UI Panel, and giving you a node list so its quick and easy to re render sections of your scene lightmaps with all its presets intact with the click of a couple of buttons. <br><br></td></tr></table><br>
<a name="446988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you upgrade to Blitz3D V1.87?<br><br>If you still have an older version, then it is logical that you receive a "memory access violation" when loading a b3d-file, because the b3d-fileformat didn't exist yet in older versions (tried that too when I had an older version).<br><br>If you intend to load the entire scene with the LoadAnimMesh command, be sure that you check the "add scene root"-option when exporting.<br>This way all objects in that scene are children of a pivot (Blitz cannot handle multiple objects on the top of the hierarchy when using LoadAnimMesh).<br><br>If you use LoadMesh, then you can uncheck this option, but then you don't have access to the separate objects in the scene, as they will be "merged" as one object (AFAIK, correct me if I'm wrong). <br><br></td></tr></table><br>
<a name="447134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Dreamora..I will try your code..by the way, my blitz3D is upgraded on to 1.87, and working well, except somehow exported B3D file from max was damaged, anyway, it working now, but I'm still interested in to 3DS if we talking about static meshes...I'll drop you few words when I complete this Dreamora.. <br><br></td></tr></table><br>
<a name="447393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well..I'm try code you suggest me, but thing still not working..maybe code i'm using for adding lightmap is not correct..anyway here is listing..<br><br>This is your code...<br><br>mesh = loadanimmesh( "level.3ds" )<br>lmesh = loadanimmesh( "lightmap.3ds" )<br><br>for i = 1 to countchildren(lmesh)<br>  for j = 1 to countsurfaces( lmesh )<br>    lsurf = getsurface( lmesh, j )<br>    surf = getsurface( mesh, j )<br>    for k = 1 to countvertices( lsurf )<br>      u# = VertexU( lsurf, k )<br>      v# = VertexV( lsurf, k )<br>      VertexTexCoords surf, k, u#, v#, 1, 1<br>    next<br>  next<br>next<br><br>..and this is piece of code what I'm trying to use to put lightmap on to mesh..<br><br>EntityFX mesh,2<br>Lightmap=LoadTexture("lmap.tga")<br>TextureCoords Lightmap,1<br>EntityTexture mesh,Lightmap,0,1<br><br>so..result is, mesh but only with lightmapped texture...<br><br>anyone can help... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
