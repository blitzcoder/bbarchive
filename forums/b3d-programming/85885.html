<!DOCTYPE html><html lang="en" ><head ><title >dramatic fps drain when displaying 2d over 3d</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >dramatic fps drain when displaying 2d over 3d</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >dramatic fps drain when displaying 2d over 3d</a><br><br>
<a name="972362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGF</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Displaying my inventory and character's sheet requires drawing -let`s say it more or less- 40 or 50 icons (32x32 px), and 20 variables - displayed by a  [Text X,Y,"Life: "+Life#] command, with no special font loaded - simultaneously.<br><br>All this is done by a function placed inmediately after renderworld command:<br><br>updateworld<br>renderworld(tween#)<br>updategui()<br><br>;Yes, I'm using tweening, but that's not the problem. I have already tried the game without tweening, and that made no difference<br><br>If the inventory is closed, the game runs at 40 fps smoothly, as required. If inventory window is opened, the game runs at 20 fps. <br><br>I think the problem is 2d graphics superposition over 3d screen.<br><br>So here are the questions:<br><br>Wasn't the Text command supposed to be real FAST? How come using it for displaying 15 variables reduces performance so drastically?<br><br>Anyone has a particular method to display 2d images over 3d screen without losing performance?<br><br>Thanks <br><br></td></tr></table><br>
<a name="972364"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The text command on alot of machines, is painfully slow actually. And some graphics cards have a real performance problem mixing 3d and 2d.<br><br>You could move to a 2d in 3d lib, like nSprite 2 or SpriteCandy. Failing that, try using images instead of drawing command. IE. draw your text to an image, then draw that to the screen, and see if it helps. <br><br></td></tr></table><br>
<a name="972367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mixing 2D and 3D is slow on many graphics cards/drivers -- there's nothing Blitz can do about that.<br><br>However, you can use 3D sprites which are scaled to be pixel-perfect. The free <a href="http://homepage.ntlworld.com/config/spritecontrol/spritecontrol.htm" target="_blank">SpriteControl</a> handles this for you, as well as providing lots of other features. <br><br></td></tr></table><br>
<a name="972368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGF</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank You Ross C, as usual clever and fast.<br><br>The TEXT command was guilty! <br><br></td></tr></table><br>
<a name="972369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGF</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you BlitzSupport! <br><br>Found the problem: excessive use of TEXT command! <br><br></td></tr></table><br>
<a name="972409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the link James. Nice :) Nps, Sagitario <br><br></td></tr></table><br>
<a name="972432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to hijack, but would it be okay to use that SpriteCOntrol code for part of this:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=2533" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=2533</a><br><br>It would be the perfect combination to make a complete replacement for the 2D font / text commands in 3D <br><br></td></tr></table><br>
<a name="972434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't see why not? It's free to use :) I'll convert my waypoint editor to use 3d actually. <br><br></td></tr></table><br>
<a name="972436"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice! :D <br><br></td></tr></table><br>
<a name="972479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Get Fastlibs and use FastImage and Fasttext, they're super fast, you get really good fast 2d as well as fast text with rotation etc..<br><br>Try the Fastlibs demo, you won't be disappointed.<br><br><a href="http://www.fastlibs.com/" target="_blank">http://www.fastlibs.com/</a> <br><br></td></tr></table><br>
<a name="972494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Best non complicated way to draw 2D over 3D is to render 2D to a screensized image buffer - redraw the buffer contents only say 30fps, but render the image buffer every frame to the screen...<br><br>Then your only calling the text command, etc. 30 times a second instead - infact you could prolly get away with only updating it at 20Hz. <br><br></td></tr></table><br>
<a name="972496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Malice...<br><br><div class="quote"> <br>would it be okay to use that SpriteCOntrol code for part of this<br> <br></div><br><br>Sprite Control is the work of Jim Brown, so you'd have to ask him (if you mean you want to put the code into your public domain code) -- drop him an email via the web site I linked to above. <br><br></td></tr></table><br>
<a name="972501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rroff</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you need an example/better explanation of what I said lemme know.<br><br>EDIT: Tho looks like you could be doing that already hmmm works for me - boosts performance from 35fps to 500fps when drawing just the menu. <br><br></td></tr></table><br>
<a name="972516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you, James... will do that now. <br><br></td></tr></table><br>
<a name="972573"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Krischan</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or write your own routines, pixel-perfect sprites are not too hard. Take a look at my example, the orange square size is exact 128x128 pixels:<br><br><a href="/posts.php?topic=85745#970608" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=85745#970608</a> <br><br></td></tr></table><br>
<a name="973879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGF</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> To James L Boyd:<br>SPRITECONTROL IS AWESOME!<br>THANK YOU VERY MUCH! <br><br></td></tr></table><br>
<a name="973914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikhailV</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sprites - very slow solution for 2D. <br><br></td></tr></table><br>
<a name="973928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Sagitario: thank Jim Brown -- he wrote it! <br><br></td></tr></table><br>
<a name="1029271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm just working one of the examples into some code I have to allow an FPS counter to be displayed on screen with minimal effect to the 3D rendering (i.e. - I do not wish to drag down my 3d by using the simple text command).<br><br>Is it mandatory to use the :-<br><br>SpriteGraphics3D sw,sh<br>CameraClsColor spritecamera,20,45,116<br><br>Instead of the native Graphics3D ? I only ask because I use Graphics3D in my current code. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
