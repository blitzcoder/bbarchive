<!DOCTYPE html><html lang="en" ><head ><title >Linepick and animated md2's</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Linepick and animated md2's</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Linepick and animated md2's</a><br><br>
<a name="616785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does the md2 format suffer from the same problem as boned meshes. Say i fire a linepick at an md2, and it's in an animated pose, will it correctly hit the model, on it's current animation frame? <br><br></td></tr></table><br>
<a name="616866"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think this is why I stopped using md2s a couple of years ago, because Linepick, EntityVisible() etc wouldn't work. Also very frustrating was the incorrect lighting from dx lights.<br>Perhaps by now someone has found a way around these things? <br><br></td></tr></table><br>
<a name="616878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or perhaps by now md2 is completely out-of-date. <br><br></td></tr></table><br>
<a name="616890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The workaround method I use for linepicking an md2 to get polygon perfect results is to use an additional camera, put it at your position where the linepick is from, point it at your md2, change the color of the md2 (to say bright pink), then read the pixel at the centre of the additional camera's viewport. If it is pink then you have hit the md2.  Otherwise parent the md2 to a pivot if you don't care about hitting a specific point on the md2. <br><br></td></tr></table><br>
<a name="616893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Huh, that's a clever trick. <br><br></td></tr></table><br>
<a name="616927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the reason i'm using md2, is it's miles faster than boned animations, and i'm planning on having a few md2's on screen. that trick might owkr, but i probably would need a render for each enemy on screen, which could defeat the purpose of using them for speed, unless i gave them all a unique colour... hmmmm...<br><br>Thanks for that one matty!<br><br>I take it md2's therefore, aren't considered meshes in blitz, and i'd need to use a pivot for collisions as well.<br><br>Cheers guys :o) <br><br></td></tr></table><br>
<a name="617029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, you're right - md2s aren't meshes as we know them.<br>I think when I did use them I parented a stretched cube to them (and alpha to 0) then the linepick etc worked on the cube.<br><br>But as Joe says, yuk, isn't there another format you can use? I've been (badly) modelling in Milkshape, but the B3D export is good and seems very efficient. <br><br></td></tr></table><br>
<a name="617031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Define "a few."  That is, how many are you planning to have onscreen simultaneously? <br><br></td></tr></table><br>
<a name="617079"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have tested the slow down of using boned meshes in blitz, over using md2 style animations. it's a hell of alot faster. I've got alot of things happening in this game, so speed increases such as this aren't to be frowned at.<br><br>But for the sake of arguement, what other options are available, that use skinned meshes, other than b3d and md2, that can be animated? <br><br></td></tr></table><br>
<a name="617096"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dustin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been wrestling with this same question.  There's a nasty catch 22 here.  I did a stress test with 200 characters.  Using B3d bones it was up &amp; over 60 millisecs a pass.  It's strange, just loading an object with bones with the loadAnimMesh command causes the slowdown.  Even if there is no animation going on the slowdown exists.<br><br>My second idea was to seperate the object into parts and manually rotate them to match the animation (this approach obvioulsy only works on segmented objects like robots :) ).  The upside was I only had one loaded B3d anim.  The downside was I now had a ton more objects loaded which killed the framerate.  <br><br>I dabbled with the idea of manually moving points but abandoned that approach as well.  It might be do-able but I just don't think the framerate will hold up.<br><br>As a result, MD2 became the defacto winner.  The linepick thing is less of an issue for me since my game is a platform type and I can calculate collisions pretty well with just location checks.  But the performace increase was major.  My 200 character stress test had a millisec time which was nearly half of what the B3D anim approach was.<br><br>So, unless someone can come up with a way to quickly manipulate lots of objects that were loaded with the loadMesh command... it looks like I'll be going with the MD2 choice. <br><br></td></tr></table><br>
<a name="617098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exact same situation here Dustin. I think i'll go with the md2's :o) <br><br></td></tr></table><br>
<a name="617368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's definitely food for thought here.<br>Maybe I'll look again at MD2s when I need characters.<br><br>Just another thought: I recently implemented one of the lens-flare libs, and I found that if it was a 'large level' then lens-flare could half the framerate.<br>At first I thought it was the sprites etc, but by trial and error I found that the culprit was the use of a linepick every frame which determined if the sun was hidden behind a building. Worth knowing. <br><br></td></tr></table><br>
<a name="617379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The longer the range of a linepick goes, the more time it takes. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
