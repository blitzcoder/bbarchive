<!DOCTYPE html><html lang="en" ><head ><title >Auto 'verlet' cages discussion</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Auto 'verlet' cages discussion</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Auto 'verlet' cages discussion</a><br><br>
<a name="267007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Automatic cages are nearly possible. I made a simple function that examined a single surface mesh and attempted to create "sensible" links from it's basic shape.<br><br>- iteriate through the verts<br>- for each vert, create a verlet<br>- for each verlet link 3 more by:<br><br>looping through<br>trying to snap to 90 degree (or 45 degree) angles and prioritising the closest.<br><br>By doing this, we can be fairly sure of some stability, but at the end of the day I believe the best approach is to create a series of simple pre-defined primitive stable cages.<br><br>A cube, tetra, etc... and perhaps a small utility to import your model and fit the cage to it.<br><br>On the other hand, perhaps it's possible to examine the model and create a rough approximation of the shape, and fit an already existing stable cage to it.<br><br>Any thoughts? <br><br></td></tr></table><br>
<a name="267009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another thought is exporting your model with a cage mesh called "cage". The triangle topology would already provide the stable links you need. This seems most promising (except you cannot specify wheels or weights). A problem arises trying to discover what the crosslink would be. <br><br>Then when imported, we parse, get the info and destroy the hidden cage mesh. <br><br></td></tr></table><br>
<a name="267023"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmc</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i started to work on this idea but came to the conclusion that in order to make it stable AND fast as possible i decided to just make them by hand.<br><br>now if a person were to write an editor where you could make/delete links and test them in the same environment then you would have a winner. <br><br></td></tr></table><br>
<a name="267024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The tetrahedron should be a stable shape.  And you can make a cube out of tetrahedrons in a few different ways.  I would search Google for code to take a 3D solid and convert it to a set of non overlapping tetrahedrons.  I'd be willing to bet that some methematician has already solved the problem. <br><br></td></tr></table><br>
<a name="267027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try searhcing here you might find a paper on making a model into tetrahedrons.  Or hell, search for verlets, you might find some papers on those that are of use.<br><br>http://citeseer.nj.nec.com/cs?cs=1&amp;q=tetrahedrons+AND+vertex&amp;submit=Documents&amp;co=Expected+Citations&amp;cm=50&amp;cf=Any&amp;ao=Expected+Citations&amp;am=20&amp;af=Any <br><br></td></tr></table><br>
<a name="267029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found one paper which referred to "tetrahedradias...tionsomething"<br><br>Anyhow, here's some papers with that word.  I think it means to make something into a collection of tetrahedrons.<br><br>http://citeseer.nj.nec.com/cs?cs=1&amp;q=tetrahedrization&amp;submit=Documents&amp;co=Expected+Citations&amp;cm=50&amp;cf=Any&amp;ao=Expected+Citations&amp;am=20&amp;af=Any <br><br></td></tr></table><br>
<a name="267069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have allready done that in my 2D engine... If somebody has any use for this I will reveal what I've learned...<br><br>Symmetrical objects are easy... they are very stable, but I had to find a way to do very assymetrical objects, so I just auto-link every point to every point. I also have an all-purpose editor for creating objects and manual spring insertion. I have researched this alot and I think there's no allpurpose solution for this. <br><br>Secondly, some objects need supporting invisible points, that keep the object from bending. For example one hard object to model is a long pilar for example. If you just all the pilar's points together, it will wobble. You need invisible extra points for both sides of triangles, that will keep the structure stiff.<br><br>And for stability issues, I discovered a great thing, that hasn't been mentioned anywhere in the articles about mass-spring systems:<br><br>Sort your springs in lenght order and update the constraints from shortest to longest. That will provide more stability and the structures don't even invert so easily.<br><br><br><img src="http://www.kotiposti.net/naama/editor2.jpg"><br>A screengrab from my editor. (btw. thanks yappy for Xlnt 2, I will register soon)<br><br><br>Here's a typical pilar structure... notice the yellow circles. They are supporting points. Also the weights of different particles affect the stability of the structure.<br><br>I believe that for realistic simulation of objects, you really have to link all particles to all particles. That ofcourse is out of question, if your going to make vertex-level sollution for collisions. But if you use spheres, then 10-point object for example would have 45 springs. And the springs are pretty fast to calculate, so that's not so big of a deal. <br><br></td></tr></table><br>
<a name="267201"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was gonna write a evolving thingamugummie that "evolves" constraints, eventually converging on an optimal configuration.  What would be the best way to export this data if I made a system to figure it out? <br><br></td></tr></table><br>
<a name="267223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any kind of text file I expect... I am doing an auto constraints thing with mixed success too, and will post results if anything useful comes out of it. <br><br></td></tr></table><br>
<a name="267255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SSS</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i could see a way to train a neral net/genetic algorythm to do it for you i.e. you try one set of constraints, adjust its fitness based on accuricy/number of nodes etc... after a while you could get a fairly accurite one to use, it would be slow so you couldnt do it dynamicly in your prog but instead of an editor <br><br></td></tr></table><br>
<a name="267433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> of course, it couldn't be dynamically done, as every new variation on the structure would need to be simulated.  Nueral nets could work, but in this situation, artificial evolution is probably optimal. You coud even add artificial spedups that check to see how many "succsessful" configurations have certain constraints, and then replicate those constraints alot. <br><br>On a side note, I'm doing revision 3 of my system. further "haloified" ie, split into Many Many files. Although I hope to make the system easily upgradable, as the user will add some fields in various types, add an include statement, and add a new file with the new part.  So basically, you will be able to have different constraints and different collision entities.  Oh yeah, and for any that don't know, my system uses very fast custom collisions that are mostly mathamatical. ie, equation for sphere, equation for quad. I still need to add friction to non quad objects though.<br><br>Also a side note, I've made my system quite easy to setup and use. Exspecially with my new convenience functions:<br><br><pre class=code>
Graphics3D 640,480,0,2

Include "cam code.bb"
Include "verletlib.bb"
Include "verlet entities/cube.bb"
Include "worlds/quad box.bb"

SeedRnd MilliSecs()

st3.structure=vcube.structure()
repetitions st3,10

PositionEntity cam,0,-50,-200

While Not KeyHit(1)
 update
 dophysics
 positionreps 
 docam
 RenderWorld
 Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="269036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmmm. experemented slightly with doing evolving constraints. I originally thought of simply running two entities at once with the same velocities-one with all constraints, and one with several missing. yet even with a single one missing, the structure behaved too differently overall. It looked fine, but accumelated errors to rapidly.  I think I have a solution. I could make it so that the system fed an algorithm the current old/new coordinates of each verlet. then it would do all the physics, and do all the constraints. After that, you store all the positions, and do the same thing, only with some of the consttraints missing. then add the sum of the differences to the cumalitive total for this arrangment of constraints. Each run could be like 1000 steps or somthing. at the end it would divide the total displacement by the number of constraints. The lower your score is, the better.  I believe this would pretty much work. If the object completly fell apart, the score would be horrible, as when it tries it with all constraints on, the verlets would move dramatically, adding a bunch to the score.  This is kinda difficult to implement, but it would be really, really, cool. If it works, I might even try to port it to other systems, as for them stable objects may be differently configured. <br><br></td></tr></table><br>
<a name="269376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I *think* I figured out how to do the above. Have two verlet entities, each with the same configuration. One of them is the constraint configuration being tested, while the other has all constraints. Then, simply run the first entity, take all the old/new values from the 1st one to the second one. run the second one, and findo uot the cummalitive error, which is added to the total error. after 1000 steps or somthing, the sim is stopped, the fitness recorded, and the next configuration tested. After all the configurations have been tested, it might tally up the score of each configuration using that constraint. This gives you a good idea of what constraints most add to the stability of the structure.  You could create a bunch of configurations, each with the top constraint as well as some random constraints. Some configs would be completly random, and some might be crossovers. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
