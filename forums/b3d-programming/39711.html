<!DOCTYPE html><html lang="en" ><head ><title >Tokamak is alive! &gt; Breakages demo</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Tokamak is alive! &gt; Breakages demo</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Tokamak is alive! &gt; Breakages demo</a><br><br>
<a name="443200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>After building my game project using Tokamak, then running into a known static mesh/terrain bug (destroying the toksim doesn't free up the terrain data which I didn't know about at the time :S), I didn't want to abandon Tokamak or change to the new ODE wrapper (still early days for ODE :)<br><br>Researching some more I found out Tokamak had a second way to use static meshes, using a callback function. Instead of just sending the whole static mesh to the collision engine, the callback function gets called for every rigidbody in the scene. Within it you can do some checks and build a small array of just the triangles that will likely collide with the rigidbody.<br><br>The routine I borrowed from Adam Dawes tutorial number 5 ( www.adamdawes.com ), and it seems to work just as quick.<br><br>Theres also an upside to using this method, you can modify the terrain data realtime! Although you'd have to be careful that you're not moving a vert or tri and subsequentialy causing an intersection with any rigid body (the collision will be missed!)<br><br>Sweenie is currently working on his own Physics engine (go Sweenie!!!) so I didn't want to bug him too much, that's why I thought I'd have a go at updating it.<br><br>I'm a C++ noob! And working on this was hard, but careful reading of Sweenies wrapper source really helped me out (cheers Sweenie!)<br><br>Breakages!<br>This was pretty much the last thing to be added to the wrapper to make it complete, and there's still a few things to be done, but the guts of it have been added, demo here:<br><br><a href="http://www.tomspeed.com/breakages.zip" target="_blank">http://www.tomspeed.com/breakages.zip</a><br><br>Extract to a temporary folder and run.<br><br>NOTE: These DLLs are NOT updates to wrapper v0.6, they're specific to this demo only, so don't go copying them anywhere else or you may screw up your Tokamak :)<br><br>Updated wrapper source will be released when the breakages are in and tests show no bugs/memory leaks. Tokamak's been 100% stable for me until the terrain bug, I'd like to keep it that way!<br><br>Credit goes to Sweenie for all his hard work on this and Adam Dawes for the terrain callback stuff.<br><br>Cheers!<br>Tom <br><br></td></tr></table><br>
<a name="443204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> looks nice, runs smoothly, legs break.<br>The fps is a tad haywire (either that or exceptionally impressive, i.e. it exceeds the max size of an integer variable). <br><br></td></tr></table><br>
<a name="443220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks neat :) <br><br></td></tr></table><br>
<a name="443443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could you possibly update the demo so that the force applied to the table isn't affected by the framerate?<br><br>The computer i'm using now is pretty slow so the table will barely lift from the ground and therefore the legs never hit the ground hard enough to cause breakage.<br><br>Anyway, Great work Tom!<br>I'm very curious about your project, when will you let us know what you are working on? <br><br></td></tr></table><br>
<a name="443466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sweenie:<br><br>Yeah Beaker had this problem too, I really need a slower PC to test my work on :) Try this exe along with the 2 DLLs in the old zip:<br><a href="http://www.tomspeed.com/breakages50fps_2.zip" target="_blank">http://www.tomspeed.com/breakages50fps_2.zip</a><br><br>Use LMB &amp; RMB for a stronger force<br><br>Here's some early prototype pics, it's a marble type game for kids, with lots of physics based interactive features like seesaws, magnets, lifts, hoovers, cannons, destructable items &amp; more:<br><br><img src="http://www.tomspeed.com/wip.jpg"> <br><br></td></tr></table><br>
<a name="443476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> For kids?, hmm.<br>That looks like something I would enjoy playing as well<br>(I'm 27)... ;) <br><br></td></tr></table><br>
<a name="443488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> err.... got one for 43fps?! :)<br><br>got a crappy gfx board as well, but can't seem to get anything to break. Defenitely NOT an ikea table! ;)<br><br>D. <br><br></td></tr></table><br>
<a name="443540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom does himself a disservice.  Its not just for kids. <br><br></td></tr></table><br>
<a name="443576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Must be something I'm doing wrong (still a beginner atthis stuff! :).<br><br>I have the demo game_fps locked at 30fps and use render tweening, I must be calling the tok advance at the wrong place or something.<br><br>oopsah! <br><br></td></tr></table><br>
<a name="443583"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for doing this! Good luck :)<br>Is that terrain updating routine built directly into the wrapper, or is it in the blitz code?<br>Yay, breakage!!!! <br><br></td></tr></table><br>
<a name="443609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Updating a terrain is as simple as rebuilding the static mesh bank, or Poking new vert position values into the old bank.<br><br>Like I said though, you'd need to make sure that altering a terrain doesn't cause it to intersect with any rigid bodies, else that collision will be missed.<br><br>i.e, you could lower a terrain that a sphere is resting on, but not raise it. <br><br></td></tr></table><br>
<a name="443661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >.rIKmAN.</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great going Tom - sadly I never got into Toka and got excited when ODE came along....unfortunately it has a few bugs.<br><br>Any timeframe on releasing a new DLL - I`m sure Sweenie wouldn`t mind hosting it on the PlayerFactory Toka Forum ;) <br><br></td></tr></table><br>
<a name="444038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rikman: Soon as I can get a few things ironed out.<br><br>Currently I'm having 2 snags with breakages, and unfortunately tech support @ the Tokamak forums is lacking.<br><br>Hosting won't be a problem :) <br><br></td></tr></table><br>
<a name="459674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >shamanenCoder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> can't run the demo ... www.tomspeed.com/breakages50fps_2.zip <br><br>userlib not found!!!<br><br>where i can get the libs?<br><br>thx @all! <br><br></td></tr></table><br>
<a name="459681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rhyolite</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tom, not sure if you still have the framerate dependant problems? I had similiar problem in my current project and maybe the couple of things I learnt might help? Oh, anyone correct me if I am wrong, Im pretty much a Toka n00b too ;)<br><br>1) The damping settings need to be adjusted based on your frames per second.<br><br>2) Impulse type commands also need to be adjusted based on your frames per second. Use SetForce type commands instead if possible.<br><br>Also consider seperating your frames per second from your physics updates. But then you have probably already done that.<br><br>Maybe that helps?? And oh yeah, that game looks great, I reckon my kids would love it (and maybe even me)!<br><br>Im gonna download as I am also interested in the terrain stuff you are talking about. <br><br></td></tr></table><br>
<a name="459698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erroneouss</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got it at 332 fps stuck there <br><br></td></tr></table><br>
<a name="459709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a new wrapper with these new funtions?<br>Regards,<br>Eric <br><br></td></tr></table><br>
<a name="459836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >slenkar</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> it ran at 90 fps here on a crappy PC but it wouldnt break <br><br></td></tr></table><br>
<a name="460078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carrot</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <i>Is there a new wrapper with these new funtions?</i><br><br>yeah, anyone managed to incorporate the terrain callback functionality into Sweenie's wrapper? The memory leak bug is starting to cause me problems now... <br><br></td></tr></table><br>
<a name="460698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Eric</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone know if the new functions have been wrapped? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
