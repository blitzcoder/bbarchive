<!DOCTYPE html><html lang="en" ><head ><title >for...next for bullets</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >for...next for bullets</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >for...next for bullets</a><br><br>
<a name="923960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fireshadow4126</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can't figure out how to make bullets with different weapons<br>see, usually i do<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">select whichweapon5
case 1
maxbullets%=(something)
case 2
maxbullets%=(something)
etc.
default
maxbullets%=16
</textarea><br><br>but then when I choose another weapon after I fire 16 bullets it says<br><div class="quote"> "Array index out of bounds" <br></div><br><br>what do i do? <br><br></td></tr></table><br>
<a name="923988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want 16 bullets and you're using a Dim variable...<br><br>Dim Bullet(15)<br>;or<br>Global Bullet[15]<br><br>the number starts at 0 and goes to 15 which means there's 16 all together. Does that help at all?<br><br>Edit:<br>Btw you forgot an End Select<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
select whichweapon5
case 1
maxbullets%=(something)
case 2
maxbullets%=(something)
etc.
default
maxbullets%=16
end select
</textarea> <br><br></td></tr></table><br>
<a name="924001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fireshadow4126</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> no GIA_Green_Fire_, what i mean is,<br><br>i have lets say, 3 weapons (a pistol, with 16 bullets; a shotgun, with 8 bullets; and a sub machine gun, with 30 bullets) with the pistol it works fine, but when i choose another weapon i can only fire 16 bullets and then it says:<br><br><div class="quote">  "Array index out of bounds"  <br></div><br><br><i>That's what i mean</i> <br><br></td></tr></table><br>
<a name="924039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >steve_ancell</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Array index out of bounds... Are you sure you are accessing them correctly.<br><br>When you create an array for instance "Dim Bullet(16)", you will actually have 16 (0 - 15) elements in the array.<br><br>The bounds of the array will be as follows...<br><br>Bullet(0)<br>Bullet(1)<br>Bullet(2)<br>Bullet(3)<br>Bullet(4)<br>Bullet(5)<br>Bullet(6)<br>Bullet(7)<br>Bullet(8)<br>Bullet(9)<br>Bullet(10)<br>Bullet(11)<br>Bullet(12)<br>Bullet(13)<br>Bullet(14)<br>Bullet(15)<br><br>If you tried to access "Bullet(16)", you wil get the message "Array index out of bounds"<br><br>I hope that helps. <br><br></td></tr></table><br>
<a name="924040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wrong - in blitz dim myarray(10) gives you access to 11 elements 0-10.  Types are much better suited to bullet/projectile than arrays (my own preference anyway). <br><br></td></tr></table><br>
<a name="924044"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >steve_ancell</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Matty... I stand corrected. ;)<br><br><br><br>Dim myarray(10)<br><br>For i = 0 To 10<br>	myarray(i) = i<br>Next<br><br>For i = 0 To 10<br>	Print myarray(i)<br>Next<br><br>WaitKey()<br>End <br><br></td></tr></table><br>
<a name="1027795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MoonShadow</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying to find a projectile example using Blitz3d. I found this one, but it seems too mush function involved. If anyone have a simple way to do it, please can anyone post it.<br><pre class=code>
; Add projectile Type
Type Projectile
   Field sprite, time_out
End Type

; Add Explosion Type
Type Explosion
   Field sprite, scale#
End Type

; Load Projectile Sprites 
explosion_sprite = LoadSprite( "explosion.bmp" )
HideEntity explosion_sprite

projectile_sprite = LoadSprite( "heart.bmp" )
EntityRadius projectile_sprite, 2
EntityType projectile_sprite, coll_projectile
HideEntity projectile_sprite

Global player, projectile_sprite, explosion_sprite, hit, shoot, boom

Function object_key_control( obj )
   ; Add spacebar = fire
   If KeyHit(57) Then CreateProjectile( player ) 
End Function

Function UpdateProjectiles()
   For P.Projectile = Each Projectile
      UpdateProjectile( P )
   Next
   For E.Explosion = Each Explosion
      UpdateExplosion( E )
   Next
End Function

Function CreateProjectile.Projectile( source )
   P.Projectile = New Projectile
   P\time_out = 150
   P\sprite = CopyEntity( projectile_sprite, source )
   ; Don't want projectiles coming out of player's feet :)
   MoveEntity P\sprite, 0, 2, 0 
   EntityParent P\sprite, 0
   shootChannel = PlaySound ( shoot )
   Return P
End Function

Function UpdateProjectile( P.Projectile )
   If CountCollisions( P\sprite )
      If EntityCollided( P\sprite, coll_characters )
         For k = 1 To CountCollisions( P\sprite )
            hit = CollisionEntity( P\sprite, k )
            If GetEntityType( hit ) = coll_characters
               Exit
            EndIf
         Next
         boomChannel = PlaySound (boom)
         CreateExplosion( P )
         FreeEntity P\sprite
         Delete P
         Return
      EndIf
   EndIf
   P\time_out = P\time_out - 1
   If P\time_out = 0
      FreeEntity P\sprite
      Delete P
      Return
   EndIf
   MoveEntity P\sprite, 0, 0, 1
End Function

Function CreateExplosion.Explosion( P.Projectile )
   E.Explosion = New Explosion
   E\scale = 1 
   E\sprite = CopyEntity( explosion_sprite, P\sprite )
   EntityParent E\sprite, 0
   Return E
End Function

Function UpdateExplosion( E.Explosion )
   If E\scale &lt; 5 
      E\scale = E\scale + .2 
      ScaleSprite E\sprite, E\scale, E\scale
   Else
      FreeEntity E\sprite
      Delete E
      For Character.Sprite = Each Sprite
         If Character\ID = hit Then Delete Character : FreeEntity hit
      Next
   EndIf
End Function
</pre><br><br>I'm trying to understand this one myself. I will get it eventually.<br>Source code from: <a href="http://jnoodle.com/Blitz3D/lesson8.html" target="_blank">http://jnoodle.com/Blitz3D/lesson8.html</a> <br><br></td></tr></table><br>
<a name="1027845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The code doesn't have to be difficult for projectiles:<br><br>Example code:<br><pre class=code>Const Width = 800, Height = 600

Graphics3D Width, Height, 32, 1

SetBuffer BackBuffer()

Type Bullet
    Field Entity
End Type

;Load stuff...
BulletTemplate = LoadMesh("Bullet.3ds")

;Set up stuff...
Camera = CreateCamera()
CameraViewport Camera, 0, 0, Width, Height
CameraRange Camera, 1, 45

;Main code and loop here...
;E.G:
While Not Keyhit(1)

    If KeyHit(57) Then
        Bullets.Bullet = New Bullet
        Bullets\Entity = CopyEntity(BulletTemplate)
        ShowEntity Bullets\Entity
    EndIf

    UpdateBullets()

    UpdateWorld
    RenderWorld

    Flip

Wend


;Function called once per loop to update bullets
Function UpdateBullets()

    For Bullets.Bullet = Each Bullet

        MoveEntity Bullets\Entity, 0, 0, 1

        If EntityZ(Bullets\Entity) &gt; 50 Then
            FreeEntity Bullets\Entity
            Delete Bullets
        EndIf

    Next

End Function</pre><br><br><br>The beauty of using types rather than an array is that you can have as many or as little bullets as you want.  Each loop the function UpdateBullets is called which goes through each bullet and moves it, deleting it if it goes out of view of the camera. <br><br></td></tr></table><br>
<a name="1032697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stanrol</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> indentation makes code unreadable. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
