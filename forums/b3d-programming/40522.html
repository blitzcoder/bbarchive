<!DOCTYPE html><html lang="en" ><head ><title >ChannelPlaying/Playmusic and Midi</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >ChannelPlaying/Playmusic and Midi</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >ChannelPlaying/Playmusic and Midi</a><br><br>
<a name="455214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoeRetro</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've notice some odd behavior playing midi files as compared to ogg and mp3 files.  The midi files continue to loop whereas the ogg/mp3 files finish playing and stop (no looping) when using PlayMusic.  Also, when I call ChannelPlaying on midi files I get a huge performance hit (each time I call) as opposed to ogg/mp3 files.<br><br>Has anyone else notice this behavior? <br><br></td></tr></table><br>
<a name="455223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope... but what's your point? <br><br></td></tr></table><br>
<a name="455227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i get that. i dont use midi files anymore. <br><br></td></tr></table><br>
<a name="455260"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoeRetro</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have now reproduced it on 3 different computer systems.  So it would appear there is a bug in the PlayMusic/ChannelPlaying functions when accessing midi files. <br><br></td></tr></table><br>
<a name="455266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Damien says... Don't use Midi files, they're dreadful things anyway. <br><br></td></tr></table><br>
<a name="455400"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >starfox</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> soooo....<br><br>its still a problem that needs to be solved..<br><br>it happens on other formats too <br><br></td></tr></table><br>
<a name="455428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aab</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep... but using Midi's wasnt something that helped quality anyway so im able to accept it myself <br><br></td></tr></table><br>
<a name="455437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoeRetro</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The point is that some shareware developers (as myself) would like to use midi for present and future projects regardless if one thinks that ogg/mp3's are the way to go which is debatable anyway.  It's all about your niche. <br><br></td></tr></table><br>
<a name="455535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I spent 3 years writing a midi sequencer, so if anyone should be wedded to midi it's me.<br><br>But for use with Blitz you can't beat wav/mp3/ogg because then you know exactly what the user is going to hear, not some poxy squeaks and buzzes from an onboard sound chip.<br><br>I still use a sequencer, but I take the output (usually from my XG card) back in to the PC, and record as audio, save as WAV, then convert to OGG. The quality is brilliant. <br><br></td></tr></table><br>
<a name="455538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, i realy, REALY would apreciate some help from you... do you know the midi format well?<br><br>Ive been struggling to write an "importer" for weeks!!!!!!!! <br><br></td></tr></table><br>
<a name="455543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No! No! Trust me, you do not wanna do this!<br>Kiss your life goodbye, and really be known as a geek!<br>(Writing the sequencer cost me a marriage.)<br>Give me a really good reason why I should help you commit intellectual suicide. <br><br></td></tr></table><br>
<a name="455547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyway, how are you going to detect midi input for recording? That's definitely a low-level Windows function (and to my knowledge not available from within Blitz). <br><br>If you are going to read in midifiles from disk, once you've decoded the midi, and you can 'play it back' within your code, what are you going to apply the notes to - there's no frequency-based sound generator that I'm aware of that Blitz can drive.<br><br>Trust me, if you must do this, Blitz is _not_ the language. <br><br></td></tr></table><br>
<a name="455557"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> John's right man!  <br><br>(...as usual) lol!<br><br>Anyways This is not an Amiga or an Atari we are talking about here.  It is a PC and the performance and quality would vary so much between users as to make it a rather unworkable to any acceptable level.<br><br>If you are having a performance hit with midi you should certainly look at other formats.  Wav and particularly ogg are acceptable, legal formats with little or no restraints upon them.  Look at reducing the voice down to 11,025 and musci down to 22,050 (mono 16 bit) for very aceptable quality and very reduced performance hits.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="455565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Im just looking to learn a few things. ive written a MIDI synth before but not a midi file.. hehe... Just want to import a Midi file, and have its data stored somewhere in memory, in a more easily usable way.<br>Once ive done it once, im likely not going to do it again. Would have been great if i was still doing ND Music Technology... :/<br><br><div class="quote"> <br>there's no frequency-based sound generator that I'm aware of that Blitz can drive.<br> <br></div><br><br>Oh no? what did i just write? *evil grin* <br><br>Its not spectacular, but its there....<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1201" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1201</a><br><br>I'm sorry it cost you a marriage though.. sad ending there :(.<br><br><br>IM not actually writing a synth, just a bit of a tracker, for learning purposes, and later il be writing a proper one.<br><br>its just the decoding of the .MID i need to do :/ got it almost sussed (my sound system plays Super Mario to me)<br><br>Can you help at all? its no worries if not (of course...) but this simple little function.. okay, so its not so simple... would teach me a thing or two!<br><br>I couldnt decipher the old Midi in Qbasic thing, though i did write a Softsynth in QB once. :/ <br><br></td></tr></table><br>
<a name="455783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're obviously well ahead enough that you can read Note On/ Note Off/ Program Controls information.<br><br>Really, if you must do this, then the .MID reader _must_ be your own - the techniques are very much up to you.<br>I do remember that my .MID read-in function was an absolute pain - I hated the format - I remember that at one point in the code I had to (file) SEEK backwards, to reread the data, then forwards again. Urgh.<br>It's a crap format, which is why all sequencer writers create their own load/save format.<br><br>Also my program (called 'Midistudio') was written for the Atari and was written in GFA Basic, which like Blitz was a piece of genius that gave assembler-like speed; so it would be a little hard to give you the code.<br><br>Good luck. <br>Email me directly if you want to bounce any more ideas off me. <br><br></td></tr></table><br>
<a name="455786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Luke.H</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why don't you delay with a counter after you call PlayMusic.<br><br>like this:<br><br>If MusicDelay=0 And ChannelPlaying(MusicChannel)=0 Then<br>MusicChannel=PlayMusic("Music.mp3")<br>MusicDelay=100<br>end if<br>if MusicDelay&gt;0 then MusicDelay=MusicDelay-1<br><br><br><br>I do not know but for me it seemed that while the music was reloading, ChannelPlaying equalled 0 <br><br></td></tr></table><br>
<a name="455787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> mines doing the seek thing too. hehehe.. it is indeed a right pain in the ass....<br><br><div class="quote"> <br> You're obviously well ahead enough that you can read Note On/ Note Off/ Program Controls information. <br> <br></div><br><br>Wrong- i seem to be getting note on/note off, but its 1) getting incorrect Delta time at some point (i cant figure it out). and 2) sometimes it seems to miss the "command" and then all goes horribly wrong.<br><br>If i cant sus it shortly, il email you- Prolly just asking about your technique.<br><br>Cheers :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
