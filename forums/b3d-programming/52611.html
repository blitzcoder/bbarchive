<!DOCTYPE html><html lang="en" ><head ><title >Model Movement and Character Weapons</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Model Movement and Character Weapons</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Model Movement and Character Weapons</a><br><br>
<a name="587622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trip42</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have two issues that I'm working through for a fighting game that I'm working on. Hopefully someone can provide me with some suggestions so that I don't end up do hitting a wall down the line.<br><br>First, in my game one character might throw another character. The attacking character would have a "throw" animation and the receiving character a "being thrown" animation.<br><br>What I'm debating is if program should somehow move the model while the "being thown" animation is playing, or if the animation should show the model moving and then update the model position after the animation is over. In that case any idea how to determine where the end position is? And tips on syncing the throwing animation with the being thrown animation woudl be helpful.<br><br>Secondly, the fighters in the game should have the ability to pick up a variety of weapons. I'm thinking that I should build all of the weapons into my model (attached to the hand) and use different textures for each weapon. I can then make the textures alpha 0 to hide the weapon when the character is not "carrying" it. Does this make sense? Or do I need a slap upside the head? <br><br></td></tr></table><br>
<a name="587845"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is one of the methods you mentioned, and probably more suitable for your game.<br><br>When animating, you really don't want to have to move the root bone of a meshh too far from the entitys 'pivot', not unless such an animation included the transition back to the 'idle' position e.t.c. Otherwise you'll get nasty looking warps.<br><br>If your character is thrown backwards, in -Z axis, I'd try animating the Z axis of the pivot of the mesh in my animating program, and use normal bone controlled animation for any X/Y axis movement.<br><br>Depending on how you're exporting to blitz, I'd cancel the pivotal animation (I don't normally ever export base/pivot info anyway).<br><br>In Blitz, if you animated it on the spot, you'd just see the character move up then down, and you'd apply Z movement manually to the entity itself. So when it's done being thrown, it transitions back to idle or whatever, and the position it's now at, is also the position of the pivot.<br><br>And advantage of using this method is you can control how far you want to throw a character. You could also do the Y axis movement in the same way, also offering runtime control of how high a character would be thrown.<br><br>Hope you understand some of that, it's hard to explain without some visual examples :)<br><br>As for weapons, build them seperately and just parent them to a hand or forearm bone. Won't take you a few minutes to figure out what rotation you'd need to apply to each weapon after parenting it to make it align nicely.<br><br>Catch me on Irc some time if you want to talk more abotu animating!<br><br>Cya<br>Tom<br><br>'Scouse' on irc.blitzed.org channel #blitzbasic<br><br>Or use CGI IRC<br><a href="http://www.playerfactory.co.uk/irc.html" target="_blank">http://www.playerfactory.co.uk/irc.html</a> <br><br></td></tr></table><br>
<a name="587861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trip42</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Tom,<br><br>I will take your advice on animating the characters, however it seems like it could be very tricky getting the timing down if the model isn't moving at a constant speed. <br><br>Say one character picks the other up over his head, holds him for 5 seconds and then throws him down. In this case the model would move -z for some period (lifting up and over) 0z for 5 seconds and then +z (throwing forward). Should this be broken into separate animations? one for lifting, one being held and one being thrown?<br><br>Any suggestion on a data structure for storing this information. eg. what animation to play and how to move the model.<br><br><br>Next, I've read suggestions about parenting weapons to bones before, but I am having some trouble. First, I'm building my models in Milkshape, exporting as Milkshape ASCII files, importing them into Character FX to do the animating, and then exporting to .B3D files to use in the game.<br><br>After doing this if I call countChildren (or whatever it's called) it returns 1. It doesn't appear that my models retain their bone structure.<br><br>Anyone have experience with this tool set?<br><br>Thanks,<br>-Brian <br><br></td></tr></table><br>
<a name="587870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> CountChildren() only returns the child count of the specified parent entity, you'll need to do a recursive CountChildren() to find all the bones and their names e.t.c<br><br>Here's some routines from the code archives: (Beakers example is simpler)<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=796" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=796</a><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=787" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=787</a> <br><br></td></tr></table><br>
<a name="588768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trip42</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys, I got the weapons system up and working. And for the most part the animations are working great. With one exception.<br><br>In my game world I have a box that the characters collide with. When the game detects a collision the character is supposed to climb onto the box. So I start the "Climb onto box" animation and move the character forward and up each cycle. <br><br>However blitz prevents the movement from occuring because moving the character to the new position on top of the box causes a collision which stops the model. <br><br>So... how is the best way to go about moving the model during the animation without blitz stopping the model because of the collision?<br><br>Thanks,<br>-Brian <br><br></td></tr></table><br>
<a name="588793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How about simply turning off collisions between the model and box in question while the climbing animation is playing? <br><br></td></tr></table><br>
<a name="1297832"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> About managing the turns/movements/animations of a character who is grabed/throwed, i would position/rotate the grabed/throwed character like the grabing/throwing character during the animation (so when you create the animation of your grabed/throwed character his origine must be at the same position with the same orientation than the origine of the grabing/throwing character), and once the grabed/throwed character has been thrown, use his origine to turn/move him again... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
