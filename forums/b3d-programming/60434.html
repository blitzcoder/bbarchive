<!DOCTYPE html><html lang="en" ><head ><title >couple of silly B3D questions...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >couple of silly B3D questions...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >couple of silly B3D questions...</a><br><br>
<a name="673859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondered if anyone had any thoughts on these 2 things that have been at the back of my mind for ages -<br><br>1. you can set a light to be brighter than 255,255,255, and it does indeed make the scene even brighter, but the docs say the numbers should be 0..255. Why does it work going even brighter? Is it just muliplied up with no side-effects?<br><br>2. surfaces - I know more surfaces = less speed, but if I have lots of objects all using the same texture, do they get rendered as a single surface, or will they class as seperate surfaces because they are seperate objects? <br><br></td></tr></table><br>
<a name="673876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> its not silly questions... its pretty hard to answer <br><br></td></tr></table><br>
<a name="673879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> interesting questions: i have a theory for question 1, as for q2, i have no idea<br><br>say you have a bitmap with all 255 shades of grey, then you "gamma" you'll notice that the white area's stay white and the adjacent shades will become white when they are hitting the maximum colour rasters.<br><br>I say this is ONLY a theory so id be interested to know the fact about this. <br><br></td></tr></table><br>
<a name="673882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Akat</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually u can go for negative value as well like -255... it will give nice night effect... <br><br></td></tr></table><br>
<a name="673925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>surfaces - I know more surfaces = less speed, but if I have lots of objects all using the same texture, do they get rendered as a single surface, or will they class as seperate surfaces because they are seperate objects?<br> <br></div><br><br>Create them from a template mesh using CopyEntity() and they will share; Simply applying the same texture to individual objects does not force sharing where it previously did not exist; It seems possible to apply different textures to entities created <i>from a template</i> without breaking sharing.<br><br>There was a thread covering this (with some code test I seem to remember) recently... we got a bit arsey with each other (because that's what we do here - heh) but it should still prove useful if you can dig it up. <br><br></td></tr></table><br>
<a name="673958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The last time I checked ( years ago ) a texture applied to several entities would be a single surface, provided they used compatible texture flags.<br><br>I remember testing this with the castle demo. I added some code to load one of the textures used in the castle. Then I wrote some new data to the texture buffer of my loaded texture. This also changed the appearance of the castle, so it was using the same texture, not a separate copy. <br><br></td></tr></table><br>
<a name="673971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> My understanding is that every new object creates a new surface, regardless of whether they share the same texture and flags. In order to do a single surface, they need to be attatched into one object.<br><br><br>This code doesn't quite work, since it only uses the texture of cube 1 after using addmesh, but perhaps someone can fill in the blanks for us.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Graphics3D 640,480,0,2

; create a texture (blue checker)
tex = CreateTexture(128,128)
SetBuffer  TextureBuffer(tex)
Color 255,255,255
Rect 0,0,128,128,1
Color 0,0,255
Rect 0,0,64,64,1
Rect 64,64,128,128,1

; create a second texture (red checker)
tex2 = CreateTexture(128,128)
SetBuffer  TextureBuffer(tex2)
Color 255,255,255
Rect 0,0,128,128,1
Color 255,0,0
Rect 0,0,64,64,1
Rect 64,64,128,128,1

SetBuffer BackBuffer()

cube = CreateCube()
EntityTexture cube,Tex ;assign blue checker

cube2 = CreateCube()
PositionMesh cube2,3,0,0
EntityTexture cube2,Tex2 ;assign red checker

; combine to a single mesh. comment out these two lines to see what it should look like
AddMesh cube2,cube
FreeEntity cube2

surfcount  = CountSurfaces (cube)

cam = CreateCamera()
PositionEntity cam,0,0,-5

While Not KeyHit(1)
	RenderWorld()
	Text 10,10,"surface count of cube1: " + surfcount
	Flip
Wend 
</textarea><br><br>This code shows up as a single surface, BUT,...<br>1. you cannot count surfaces across multiple objects. (does this mean multiple objects=multiple surfaces? I think so)<br>2. when I merge the two objects into one it shows 1 surface, but the second texture is lost in that example, so it is not a valid test. Can someone make that work? <br><br></td></tr></table><br>
<a name="673976"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The last time I checked ( years ago ) a texture applied to several entities would be a single surface, provided they used compatible texture flags.<br><br>I remember testing this with the castle demo. I added some code to load one of the textures used in the castle. Then I wrote some new data to the texture buffer of my loaded texture. This also changed the appearance of the castle, so it was using the same texture, not a separate copy.<br> <br></div><br><br>I'm not sure that result tells us very much about surface usage... you could create two separate cubes and give them the same texture and this texture would alter on both objects when you wrote to it, but both objects would still have their own surface.<br><br>Before it got bogged down in miscommunication, I posted some exampler code in <a href="/posts.php?topic=57626#641103" target="_blank">this thread</a> that might prove illustrative of how things seem to work. <br><br></td></tr></table><br>
<a name="673981"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as i am aware every seperate entity ie a child mesh on a .3ds file or a copyentity is a seperate surface, wether they share the same texture or not.<br>Even if the children on the anim mesh share the same texture they are seperate surfaces. <br><br></td></tr></table><br>
<a name="673988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> All this speculation has already been answered. Check the code I linked to - a copied entity's surface is equal to that of its template. You get a rendering speed increase just from from taking advantage of this, regardless of textures. <br><br></td></tr></table><br>
<a name="674007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's still not single surface though. One set of mesh data yes, but creating copied entities still creates multiple surfaces that are rendered seperately.<br><br>For example, copying a sprite thousands of times will not create a single surface sprite.<br><br>For meshes you can use AddMesh which will automatically combine surfaces that have matching properties. <br><br></td></tr></table><br>
<a name="674009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pongo</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> so,... are the following statements all true?<br><br>1. Every individual texture creates a new surface.<br>2. Every entity is made of at least one surface<br>3. Surfaces are not shared among entitys, even when the same texture is used.<br><br>also, is there a way to do a scene surface count instead of by individual entities? <br><br></td></tr></table><br>
<a name="674069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> C1=Createcube():C2=Createcube() <br><br>Will create two surfaces.<br><br>You can texture both of these with the same or different textures.<br><br>As for if any optimisations go on, I think there must be;<br><br>Way back on a p3 600mhz, I made a racer game by using texture cubes laid out along the shape of the track (My first B3D program i think!) They were all textured the same, and it ran at a full 60-70fps no problem, with 600 peices of track.<br><br>If I was to load 600 seperate surfaces I did however get around 10fps instead. <br><br></td></tr></table><br>
<a name="674093"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Judging by the results in the thread Sledge posted it looks like using COPYENTITY is a much better idea than loading individual copies of the same mesh, or using COPYMESH.<br><br>I'll have to check how SRX loads stuff like car wheels (of which there can be up to 32 loaded at once) - I'm currently loading a single reference mesh which is then copied for all instances, but I need to check if I'm using COPYENTITY or COPYMESH, if the speed increases can be as much as 50%. <br><br></td></tr></table><br>
<a name="674106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will be interested to know one of the major speed increases on lower systems with the racer was when I replaced the wheel load code with optimised code that detects if a wheel of the same type was already loaded. If it has, it just "copyentity"s the older wheel.<br><br>Got an FPS increase of about 25-30fps with this one no a system that used to average out on 40-50fps in the racer. <br><br></td></tr></table><br>
<a name="674115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use base entities so when a new netity is loaded it checks the bases first and does a copy of that if it exists instead of loading the new mesh. It does give me a big speed increase with a lot of entities. <br><br></td></tr></table><br>
<a name="674122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, I'll have to bear this in mind and update SRX accordingly. <br><br></td></tr></table><br>
<a name="674303"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is causing me a lot of confustion too...seems my Particle system is causing a lot of slowdown in my engine if it goes over 200 particles, despite the fact that I copyentity all the particles from the same base sprite that is loaded at startup. I only do some minor changes, like color and scale, before letting them loose into the game world.<br><br>So basically every particle is creating it's own surface? Is there a way to make seperate particles share a single surface? Or do they already and my problem is something else?<br><br>My head hurts... <br><br></td></tr></table><br>
<a name="674313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> So basically every particle is creating it's own surface? <br></div>Yep. A lot of sprites in B3D will slow things down quite fast, even if you've used CopyEntity.<br><br><div class="quote"> Is there a way to make seperate particles share a single surface? <br></div>Yes, you can create your own sprite system that creates lots of quads in one big mesh. Of course this isn't an easy thing to do (you also have to point all the quads at the camera yourself), but a few people have already created single surface sprite systems which you can use. <br><br></td></tr></table><br>
<a name="674316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh man...ouch :-(<br><br>And my system worked so well and had all the features I wanted...<br><br>On the other hand, might it become slower to do all the mesh manipulation?<br><br>I'll try to dig up some single surface sprite systems from the code archives, maybe I'll find something useful. <br><br></td></tr></table><br>
<a name="674375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Orcslayer- 200 particles only? What system spec?<br><br>It might be the logic code behind them. I could get 700 particles in Supernova before i noticed any lag on my old 1ghz system<br><br>I assume you're using a custom system and *not* blitz3D CreateSprite() stuff?<br><br>Personally, I make my sprites using one *triangle* thats larger than the texture i'm putting on it and then center the texture so it fits on the triangle so you can't tell it's just a triangle. This halved the polycount of my system. :) <br><br></td></tr></table><br>
<a name="674433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus: Doesn't using triangles create overdraw? i.e, the card still has to process alpha'd areas? <br><br></td></tr></table><br>
<a name="674457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> All quads use two triangles... i'm just halfing that. if you use triangles it has to process half as many triangles than if you were to use Cubes. <br><br></td></tr></table><br>
<a name="674459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think quads are generally considered more suitable than tris for particles. I haven't tested it so I can't be sure, but like Tom says quads should render quicker than tris. <br><br></td></tr></table><br>
<a name="674475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> How on earth does that work? :P its half as many potential pixel plots! :P<br><br>either way, my system was quick. Are you saying it would have been quicker to use two tris per sprite rather than just use a UV trick to texture one tri?<br><br>Just want to know how a quad happens to be quicker :D <br><br></td></tr></table><br>
<a name="674489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's because you have to increase the size of the tri, to compensate for it's shape. <br><br></td></tr></table><br>
<a name="674491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, that was something obvious.... that I completely overlooked!<br><br>However, my textures were pretty simple and just spheres so the triangles didnt have to be any bigger than the ones used in the quads. That also means I was being wasteful with quads.<br><br>Oh well. Cheers for the enlightenment. <br><br></td></tr></table><br>
<a name="674500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> On a side note, I've been messing with blitz internals again recently, I was curious if texture thrashing could be reduced by reordering the entity list based on texture usage, but it works out the same speed wether they're textured randomly or sequentialy. Change the 'ordered' variable to try the other method.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 800,600,32,2

Dim tex(4)
Dim ent(200)


cam=CreateCamera()
MoveEntity cam,0,0,-5
light=CreateLight()

;4 textures with random crap drawn on them
For i = 0 To 3
	tex(i)=CreateTexture(256,256,1+8)
	SetBuffer TextureBuffer(tex(i))

	For j = 0 To 100
		Color Rand(100,255),Rand(100,255),Rand(100,255)
		Rect Rand(8,248),Rand(8,248),16,16,True
	Next
Next
SetBuffer BackBuffer()

	
ordered=False


If ordered=True ;texture the entitys in order
	For i = 0 To 49
		EntityTexture CreateCube(),tex(0)
	Next

	For i = 50 To 99
		EntityTexture CreateCube(),tex(1)
	Next

	For i = 100 To 149
		EntityTexture CreateCube(),tex(2)
	Next

	For i = 150 To 199
		EntityTexture CreateCube(),tex(3)
	Next
	
Else ;randomly texture the entities
	t=0
	For i = 1 To 200
		EntityTexture CreateCube(),tex(t)
		t=t+1
		If t=4 Then t=0
	Next
End If


fps=0
counter=0
time=MilliSecs()
While Not KeyHit(1)
	RenderWorld

	counter=counter+1
	If MilliSecs()-time&gt;1000
		time=MilliSecs()
		fps=counter
		counter=0
	End If

	Text 0,0,fps
	Flip 0
Wend
</textarea> <br><br></td></tr></table><br>
<a name="674520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>&lt;&lt;So basically every particle is creating it's own surface?&gt;&gt;<br><br>Yep. A lot of sprites in B3D will slow things down quite fast, even if you've used CopyEntity.<br> <br></div><br><br><div class="quote"> <br>That's still not single surface though. One set of mesh data yes, but creating copied entities still creates multiple surfaces that are rendered seperately.<br> <br></div><br><br>How come eveyone who says this completely ignores the fact that the copied entities all have the same surface handle as their template? <br><br></td></tr></table><br>
<a name="674531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would agree they are single surface via CopyEntity. However, because you can attribute each entity with different properties, i imagine they is some more behind the scenes things happening. Maybe they get broken down to different surfaces when sent to the graphics card. There definetly is a speed difference. <br><br></td></tr></table><br>
<a name="674745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just had an idea about loading a lot of different objects into a level -<br><br>If I have a single object, called BASE - it's loaded as a ANIMMESH and contains 20 child objects, each of which is centred on zero and is one of the objects I want to populate my level with. So, for example, BASE may contain 10 different trees, 2 benches, 4 cars etc...<br><br>Now, I store this BASE object and every time I want to create a single world object, I use COPYENTITY to duplicate the whole thing, then manually FREE every piece I don't want, leaving just a single child object behind.<br><br>Imagine that I do this for 100 trees (using the 10 different types within BASE) across a level at startup.<br><br>Would all the trees now be sharing one surface, despite being seperate entities with different shape meshes?<br><br>I've written a test program and this does work, but I have no way to quantify whether it's faster or slower than normal, or whether they are all being rendered as the same surface.<br><br>What we need is a global SURFACES_BEING_RENDERED command, unless anyone can come up with a way of finding out the total number of surfaces in use? <br><br></td></tr></table><br>
<a name="674746"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit : just tried it, with 10000 objects, loading them seperately gives a framerate of 2.5fps, loading them using the method above gives a framerate of 1.4fps.<br><br>So loading and placing the objects seperately seems to be better than messing around with COPYENTITY. Very odd.<br><br>Unless animmeshes do something odd with surfaces? <br><br></td></tr></table><br>
<a name="674771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How come eveyone who says this completely ignores the fact that the copied entities all have the same surface handle as their template? <br></div><br>They may have the same surface, but they are not drawn together - they all share the same surface just to save on the memory needed to store tri and vert data.<br><br>In B3D, everything is rendered on a per-entity basis, so one entity is drawn then another then another, so you have to group surfaces within a single entity. <br><br></td></tr></table><br>
<a name="674772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadAnimMesh loads all seperate enities as a new surface. There's your problem :) those 20 child objects may very well be 20 different surfaces! <br><br></td></tr></table><br>
<a name="674776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vorderman</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah well, another good idea to file in the bin :) <br><br></td></tr></table><br>
<a name="674911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>They may have the same surface, but they are not drawn together - they all share the same surface just to save on the memory needed to store tri and vert data.<br><br>In B3D, everything is rendered on a per-entity basis, so one entity is drawn then another then another, so you have to group surfaces within a single entity.<br> <br></div><br>Thank you. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
