<!DOCTYPE html><html lang="en" ><head ><title >I need more U/V coords - I think!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >I need more U/V coords - I think!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >I need more U/V coords - I think!</a><br><br>
<a name="332881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been tinkering with a simple tile based environment.  Each tile is a separate object and has a base texture and two effects textures for highlighting and suchlike.  Each texture is an animtexture so I can select the tile image &amp; two layers of effects for each tile with:<br><br>  <pre class=code>
EntityTexture this\t_mesh,tile_texture,this\t_texture,0
EntityTexture this\t_mesh,tile_mask_texture,this\t_mask,1
EntityTexture this\t_mesh,tile_decal_texture,this\t_decal,2
		</pre><br><br>This means that each polygon has 3 sets of U/V coords even though they are all nominally set to the same values by me.  Under the hood each partial texture requires unique u/v's.<br><br>Now this all works but having hundreds of separate objects is slow and I'd like to be able to have multiple tiles in a single mesh.   This means dropping animtexture and managing the u/v's myself.  Not a problem but as far as I know,  I can only have 2 sets of u/v coords per vertex - but I need 3.<br><br>Is there any way around this? <br><br></td></tr></table><br>
<a name="332890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe PositionTexture, RotateTexture and ScaleTexture are enough?<br><br>You can do this indvidually for each texture, but as I have no clue about what you are trying to achieve, it might not be what you are after... <br><br></td></tr></table><br>
<a name="332904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may be able to overlay another mesh (and mess with the render order) to simulate more that 2 UV sets.  But, as Fredborg says, without knowing more its hard to fathom. <br><br></td></tr></table><br>
<a name="332908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many polys will share the same 3 textures,  but each poly will need to display specific portions of those textures (tiles within a tileset).<br><br>Currently, each tile is a separate object (mesh) and therefore separate surface.  By merging multiple tiles in the same mesh (sharing surfaces) I can get a potentially massive increase in rendering speed. <br><br></td></tr></table><br>
<a name="332919"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you are trying to do what I think you are, you can get away with a single uv set, and Position+ScaleTexture.<br><br>If you are using quads of some kind, set the vertex uv's to the full range (0.0,0.0 for the upper left hand corner, 1.0,1.0 for the lower right hand corner). Then you should be able to scale and position the textures to display the individual tiles.<br><br>You may need to load each texture indivdually for each tile, but it won't take up much extra memory, as they will all share the same bitmap data...<br><br>It may get messy, but it just might work :) <br><br></td></tr></table><br>
<a name="332935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think that will help.  I won't be able to pack each 'tile' onto the same surface will I? <br><br></td></tr></table><br>
<a name="332939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >napole0n</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe I'm rambling, but can't you generate a bigger mesh and use a larger tile-based texture on it instead? Then you do the tiling in your texture instead of using meshes. <br><br></td></tr></table><br>
<a name="332988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AbbaRue</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been pondering using the idea of a large mesh and tiling the main texture with smaller texture brushes too. <br>But I am wondering if it is possible to change sections of a texture when it is already applied to the mesh.  <br>Sort of painting the mesh with a new texture, in small areas using the uv coords. <br>Does anyone know if this is possible. And if it is, does anyone have a small example of how it's done? <br><br></td></tr></table><br>
<a name="332998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't want to use a big texture,  I have a system up and running but I want to optimise it.<br><br>It looks like the limit of 2 sets of u\v's is going to prevent me from doing what I want.   <br><br>Any idea why Blitz has this limit? <br><br></td></tr></table><br>
<a name="333019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >simonh</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because Mark was worried about how much memory &gt;2 user-defined uv sets would use up. Mind you, that was a few years back now, and I doubt whether the extra memory useage would be so problematic now. <br><br></td></tr></table><br>
<a name="333021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> REALLY? thats a terrifically trivial reason now! Mark, there can be *no escape for youuuuuu* <br><br></td></tr></table><br>
<a name="333041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I reckon we should go to 8 sets.   One for each texture layer. <br><br></td></tr></table><br>
<a name="333043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> A third set off u\v's would come in really handy when doing projective shadows on a lightmapped level.<br>So yes, please! <br><br></td></tr></table><br>
<a name="333072"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Madjack<br><br>I fourth that - for Peter's reason. <br><br></td></tr></table><br>
<a name="333077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, it would be nice... perhaps if there are little problems with latest update, this could be added in as a little bonus along with the fixes? :-D <br><br></td></tr></table><br>
<a name="333078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, can you explain what your mask and decal layers are. If the decals use alpha blending what is the mask for? <br><br></td></tr></table><br>
<a name="333083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >marksibly</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Yeah, its a memory thing. Each set of tex coords takes up 2 floats=8 bytes, so increasing UVs from 2 to 8 would increase the size of each vertex by 48 bytes, which would eat up a considerable amount of vidmem for scenes with complex meshes.<br><br>Whats really needed is a way for different meshes to have differing numbers of tex coord sets, but this is non-trivial. <br><br></td></tr></table><br>
<a name="333151"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> If we had DXTC (texture compression) the extra memory overhead would be much less of a worry.<br><br>Just my 0.0002 drogna. <br><br></td></tr></table><br>
<a name="333230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> From Evak:<br><br>Without Extra UV’s in order to do bad looking multitexture blending you need to add extra geometry and cut it into the existing mesh and UV map the polys separately with multiple transition textures so I’m not sure the saving vid mem really works out in the end. <br><br> <br><br> <br><br>If you want say a brick to grass texture you will need a minimum of:<br><br> <br><br>A brick texture<br><br>A grass texture<br><br>A corner  transition<br><br>A side transition texture<br><br> <br><br>More textures to make it look more natural and less tiled, they all need to be 24bit and similar pixel scale to they align fairly well. That’s a minimum of 4 textures 4/surfaces just for that transition from grass to brick.<br><br> <br><br>With other engines that support multiple UV’s you only need:<br><br> <br><br>1 brick texture<br><br>1 grass texture<br><br> Both 24bit<br><br> <br><br>And 1 8 bit greyscale mask texture. You can blend multiple textures independently of one another allowing you the most freedom and the mask can be shared with multiple texture combinations, so you may only need one for an entire terrain.<br><br> <br><br>So currently that’s 4 surfaces and 4 24 bit textures vs 1 surface 2 24bit textures and 1 8bit texture to get a much cleaner result, and no extra polygons to get the transition to conform to the shape of the area the transition goes to. <br><br></td></tr></table><br>
<a name="333239"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> skidracer,<br><br>mask &amp; decal is just my own jargon.<br><br>The mask layer is set to multiply the decal layer is set to add.   I can create all kinds of highlight effects with this setup.  Not just straight decals.   I'm using animated sequences of colours an patterns to highlight areas for example.<br><br>But that said, I didn't realise I could use an alpha blended decal.  Is that what blend mode 1 is for?<br><br><br>Mark,<br><br>Any chance of going to 3 or 4 sets?   Is this just a matter of changing one number and recompiling?   <br><br>Could this be something we choose ourselves when we start up the 3D mode?<br><br>It seems odd to allow 8 textures but not allow full control over how they are mapped. <br><br></td></tr></table><br>
<a name="334393"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this a non-starter then? <br><br></td></tr></table><br>
<a name="334456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> "With other engines that support multiple UV’s you only need:<br>1 brick texture<br>1 grass texture<br>1 greyscale mask texture"<br><br>You don't need more than 2 UV's to do that, and you can do it in Blitz.  It requires two surfaces, but from what I know of how texture blending works, it would require two surfaces in any language/engine.<br><br>Each surface has two UV coordinates.  So you use one for the texture, and the other for the mask.<br><br>Put down first surface with no mask.  Put down second surface turning on vertex alpha, but not changing vertex alphas, and set alpha texture to first texture layer of second surface.  Set blend of texture to alpha I think.  Then set second texture unit to multiply the second texture with the alpha texture.<br><br>If that doesn't work, then you can use an inverse alpha on first layer in second textuee channel and set it to multiply, and then set second texture layer in second surface to the alpha texture and set that to multiply, and then se the second layer to add blend mode, and that will blend them. <br><br></td></tr></table><br>
<a name="334459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think a couple of more uv coordinate sets would be great! Even if you can always find a workaround, it still would be nice to just have it :) <br><br></td></tr></table><br>
<a name="334468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know.  This sounds to me like people being lazy.  I mean, I think it is so cool that Blitz even supports two UV sets; most other engines I've used only allow one UV set.  More UV sets would be useful certainly, but so would a lot of things.  Just look at the feature set of any major 3D art package for plenty of examples of stuff Blitz could be doing.  The important question is, do the benefits outweigh the costs?  From mark's post it sounds like the costs are significant. <br><br></td></tr></table><br>
<a name="334576"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eh?  What has laziness got to do with it?   I just want to control the textures I'm using.<br><br>sswift, perhaps I'm being ignorant but what's this '2 surfaces' business?   How do you overlay geometry without getting Z-fighting? <br><br></td></tr></table><br>
<a name="334645"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> "How do you overlay geometry without getting Z-fighting?"<br><br>Enable the vertex alpha flag on the surface.  Flag 32.  <br><br>Even if you don't have any vertices which have alpha, Blitz will draw the entity last with all the other entities that have transparency.  And on the surfaces with transparency compare each pixel against the zbuffer, but not write zbuffer values.  <br><br>When comparing against the zbuffer if the distances are equal, which they will be if two polygons overlap and have their vertices in the exact same locations, the new overwrites the old.  <br><br>As far as I know, Z-Fighting is an issue only when you have seperate entities that can draw in different orders depending on how they get sorted.  <br><br>When you have two surfaces in ane entity, the surfaces are always drawn in the same order, even if one of them has transparency.  The first surface added is drawn first.<br><br>So to do an alpha blended terrain, you'd make an entity that has two surfaces.  <br><br>The first surface would have two textures.  The first texture would be your ground texture.  The second would be the inverse-alpha texture, where black is where you want the second layer to show through.<br><br>The second surface which has the exact same polygons as the first, has FX flag 32 enabled.  That's the vertex alpha.  Texture 1 would be the second ground texture, and texture 2 would be the regular alpha texture.  And finally, the second surface would use add blending mode.<br><br>So it's:<br><br>Surface 1:<br>Texture 1 multiply<br>1-Alpha multiply<br><br>Surface 2:  Flag 32, Add <br>Texture 1 multiply<br>Alpha multiply<br><br><br>You can also do away with the alpha maps, not use add blend on the second surface, and use vertex alpha changes instead.<br><br>And as I said, there MIGHT be a way to use a single alpha map only on the second surface, with no alpha map on the first surface.  Unfortunately, from what I hear alpha maps aren't supported the same way on all cards.  I think if you use them only in the first texture channel then you'll be okay, but I don't know what happens when one multiplies a texture in a second channel with an alpha map in the first channel.  Is the alpha map applied to the final alpha of the image?  I don't know.  But I do know that you couldn't enable the alpha flag on that texture channel cause you need it to multiply with the lower layer if you want any lighting to work.<br><br>Oh, and I'm not sure if fogging will work with the first method I described with the multiplied alpha maps.  The adding of the second layer to the first might mess that up.... Then again... If you set ONLY the first layer to have fogging enabled...  It just might work...  If the fog is lighter than the texture color...  If the fog is black....  Then... The second layer wouldn't get fogged.  I think.  <br><br>Vertex alpha I know supports lighting and fogging and all that good stuff.  It's just alpha maps I'm not so sure about. <br><br></td></tr></table><br>
<a name="334665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting.  Cheers sswift.<br><br>I'm still hoping for more U\V's though.  ;-) <br><br></td></tr></table><br>
<a name="334666"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh yes.  Mark, if you are reading this,  in my original post I point out that the vertices must have 3 sets of U\V's internally.   Am I wrong? <br><br></td></tr></table><br>
<a name="334670"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you apply three textures to a mesh, all you are doing is using three texture units.  That as far as I know, has nothing to do with which set of UV's each texture references. <br><br></td></tr></table><br>
<a name="334672"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes but in my example,  each of those 3 textures has unique U\V coords as each is a small tile from a large tileset (an Animtexture in Blitz).   So INTERNALLY those vertices have 3 sets of U\V coords. <br><br></td></tr></table><br>
<a name="334735"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm a little confused.  When you say the vertices "must" have 3 sets of UVs, do you mean that they do currently and Mark simply isn't giving us access to the 3rd set, or that you need a 3rd UV set to accomplish the effect you are after?  I would assume the former except your stressing of "internally" indicates you mean the latter. <br><br></td></tr></table><br>
<a name="334740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> My polygons currently have 3 textures.  Each is actually a small section of a larger texture.   As I can select all 3 sections freely then 3 sets of u\v's *must* be in use.<br><br>Because I'm using animtexture I personally set the u\v's in the 0-1 range to show the whole texture and blitz works out the real u\v's internally.<br><br>This system only works with each of my tiles being a separate object.   But I want to have multiple tiles in the same mesh, sharing the same surface.  For this I have to do manually what Blitz does for me,  and thus I need access to more than 2 sets of u\v coords. <br><br></td></tr></table><br>
<a name="334750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> John, i really think you can do this with scale texture and position texture. Each texture mayb have it's own UV co-ords, but they are layed out the same essentially. <br><br></td></tr></table><br>
<a name="334751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually, I think Blitz splits an animtexture into separate texture images when loading it.  Assuming that is correct then no, there aren't separate UV sets for each section of an animtexture.  Hopefully Mark will confirm or refute. <br><br></td></tr></table><br>
<a name="334770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C,  I don't think I can.  I need multiple polys in the same surface to show different parts of the same texture.   <br><br>jhocking,  If it DOES split the texture up then I'm only using 1 set of U\V's.  Doesn't solve my problem though. <br><br></td></tr></table><br>
<a name="334772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course it doesn't.  I was addressing your question, "Am I wrong?"  In particular, it sounds like you're convinced adding support for additional UV sets would be trivial, but mark's post indicates otherwise. <br><br></td></tr></table><br>
<a name="334774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark said it would be non-trivial for different meshes to have different numbers of u\v's.    <br><br>It would be trivial to increase the global number. <br><br></td></tr></table><br>
<a name="334777"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll try and fix up something tonight, see if it's the same :) <br><br></td></tr></table><br>
<a name="334778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> True, but he also explained why it would be a bad idea to increase the number of UV sets globally, because of the increased memory usage.  While some might argue that the memory cost isn't crippling (and that's debateable,) I would respond that any wasted memory (since, except for the once-in-a-blue-moon situation that you are using all 3 UV sets, the additional memory used is wasted) is bad, especially considering how much of a premium video memory is at already. <br><br></td></tr></table><br>
<a name="334779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> And HEY I'm of a different opinion. <br><br></td></tr></table><br>
<a name="334781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um, so what's your point?  That yours is the only opinion which matters?  I'm afraid I'm not following you here.<br><br>ADDITION:  Let's cruch the numbers.  Let's say you have a level with, oh I don't now, 150,000 polygons.  At 8 bytes per polygon, that's an extra 1.2MB from adding just 1 more UV set.  And unless you're using the 3rd UV set, that's wasted memory.  1.2MB gone for no reason is a lot, and 150,000 polygons isn't even a huge amount.<br><br>2ND ADDITION: Oops, I wasn't even thinking about the fact that the number of vertices is always greater than the number of polygons.  It's 8 bytes per vertex, not per polygon.  In most cases the number of vertices is twice the number of polygons, so double the wasted memory I calculated.<br><br>***<br><br>I definitely agree that having additional UV sets would be useful.  But unless we can have different numbers of UV sets for different meshes, I just don't feel the minor benefits outweigh the costs. <br><br></td></tr></table><br>
<a name="334782"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> My point is I'd like this feature implemented.   I don't see how repeating what 'Mark said' adds to the thread.<br><br>On a more general point I'm interested in learning how all this stuff works.   I THOUGHT that the vertices had 3 sets of U\V's -  it transpires that perhaps they don't. <br><br></td></tr></table><br>
<a name="334834"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> By that reasoning jhocking lets go back down to ONE u\v set.   Or not make it controllable at all.<br><br>Limiting it to 2 sets is an arbitrary (but understandable) decision. It's also a decision made a while ago; specs have increased significantly since then.  More to the point, I think having 8 textures and not being able to fully control them is very limiting.   I understand that making it variable per mesh is non trivial but it may be possible to set a global variable when you start the graphics mode.  Or at compile time.<br><br>I'm prepared to bet that most people aren't even using two sets,  but once you start to make use of multi-texturing then you quickly need 2,3 or even more.   <br><br>Sswift has offered a very practical solution, which is probably the one I will use;  but it still seems a shame to add more geometry to do something that the hardware can do in a single pass.<br><br>I don't think 1.2 meg extra for an 150k polygon scene is very much at all.  A couple of large textures could use that much. <br><br></td></tr></table><br>
<a name="334853"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> "By that reasoning jhocking lets go back down to ONE u\v set. &lt;snip&gt;<br>Limiting it to 2 sets is an arbitrary &lt;snip&gt;"<br><br>Not at all.  In the case of 2 UV sets there are pretty significant benefits going from 1 to 2 UV sets, benefits which outweigh the cost.  And as for how many people are using 2 UV sets, bear in mind that the most common lightmapping approach requires separate UVs for the main textures and lightmaps.  Thus anyone using lightmapped levels is using 2 UV sets.<br><br>I didn't quite understand what you meant by "global" however.  I took that to mean all meshes will have 3 (or more) UV sets all the time.  Your suggestion that one could establish the number of UV sets used when starting the graphics mode or at compile time makes a lot of sense.  Make the number of UV sets controllable, just not per mesh.  Thus people who don't need additional UV sets aren't saddled with the increased memory consumption, while people who do need additional UV sets have that option.<br><br>***<br><br>"A couple of large textures could use that much."<br>Exactly.  That's a couple fewer textures that you can use.  Also, I realized I made a mistake and the additional memory usage for a 150,000 polygon mesh would be 2.4MB, not 1.2MB <br><br></td></tr></table><br>
<a name="335021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeraBit</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ability to globally specify extra sets of UVs at runtime would be useful. Since .B3D already supports it :) <br><br></td></tr></table><br>
<a name="335070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> "A couple of large textures could use that much." <br>Exactly. That's a couple fewer textures that you can use. Also, I realized I made a mistake and the additional memory usage for a 150,000 polygon mesh would be 2.4MB, not 1.2MB <br></div><br><br>Very bad reasoning. Larger textures kill performance. <br><br></td></tr></table><br>
<a name="335073"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mark would do well to change the b3d file format and make it so that each mesh can independently hold differing numbers of texture coordinates.<br><br>This means no waste, and jhocking's argument is completely invalid.<br><br>Plus using large textures is pretty much a no-no without texture compression. My card chokes on anything bigger than 512x512 and it can handle 2048x2048.<br><br>So either introduce tex compression or sort out the uv thing, because Blitz projects are slowly moving out of the amateur into the professional as more tools and techniques come to light. <br><br></td></tr></table><br>
<a name="335085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, texture compression would be a god send :) <br><br></td></tr></table><br>
<a name="335134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Mark would do well to change the b3d file format and make it so that each mesh can independently hold differing numbers of texture coordinates.  <br></div><br><br>It already does, we 'just' need Blitz to support it.<br><br>I don't think that setting the number of texture coords as a global option is a good idea, exactly because a B3D file can have anything between 0-8 sets. <br><br></td></tr></table><br>
<a name="335139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> I still think going straight to 8 sets makes the most sense. <br><br></td></tr></table><br>
<a name="335176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess Mark can just make it support unlimited UV sets, just as it supports unlimited entities. 2 UV sets doesn't neccessarrily means that they have to be used at same time, so endless sets shouldn't be that big problem. <br><br></td></tr></table><br>
<a name="335267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rob, "large textures" is of course subjective.  I think 512x512 textures are large.  One 512x512 image is around 800KB, and that's without an alpha channel.  As for changing the b3d file format, what Peter said.  The b3d file format already does that, that isn't the issue.  The issue isn't storing additional UV sets, it's using additional UV sets in real-time.<br><br>And in case you didn't notice, I eventually figured out and agreed with John.  When I thought he meant forcing everyone to be saddled with additional UV sets all the time (and thus the additional memory consumption,) I was against that.  But when I realized he meant making the number of UV sets Blitz uses selectable when initializing the graphics mode, well there's no reason to disagree with that.  As you said, in that case there's no waste.  Indeed, the change wouldn't break any existing code because setting the number of UV sets could be optional.  If you don't explicitly define that it'll default to 2 UV sets, what Blitz currently uses. <br><br></td></tr></table><br>
<a name="335268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> I very much doubt anyone will use 8 sets of UV co-ords, but if it's selectable, then go for it. <br><br></td></tr></table><br>
<a name="335270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just the UV coord sets doesn't use much memory. Actually those coords is just a few arrays, and nothing more.<br><br>It's the texture you assign to the entity, that uses the UV coords to know where on the model the specific parts of a texture is, that uses memory. <br><br></td></tr></table><br>
<a name="335280"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> ChrML, have you read mark's and my posts?  He pointed out exactly how much memory each UV set consumes per vertex, and I calculated that's around 2.4MB for each UV set on a 150,000 polygon model (fairly average for a level.)  If you're not using the UV set, that's a lot of memory wasted.<br><br>Anyway, it turns out to be a relatively moot point.  I misunderstood what John was talking about. <br><br></td></tr></table><br>
<a name="335285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, 2.4MB memory isn't really much when ordinary PC's today have 512MB memory (atleast very few have less than 256MB). But that's not a good enough reason to limit it to 2 sets. I think that should be up to the Blitz programmer :). That's my opinion. <br><br></td></tr></table><br>
<a name="335288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...and in case we talk about the vidmem (idunno), then 2.4 isn't really much there either (2.4 of 64/128mb). <br><br></td></tr></table><br>
<a name="335291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> *tears hair out in frustration*  Yes, I agree, it should be up to the programmer.  What I was disagreeing with was my erroneous take on John's suggestion, that it NOT be up to the programmer, that we all be forced to use a higher number of UV sets.<br><br>And if you don't think wasting (remember!  if you aren't using the UV set then it's completely wasted memory) 2.4MB out of 64MB on the videocard is a big deal, I'm just at a loss for words.<br><br>Cripes, nevermind.  I don't know why I'm still posting, I realized I don't disagree after all because the suggestion was to make it selectable. <br><br></td></tr></table><br>
<a name="335293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> I agree, but I still think it's up to the programmer :). <br><br></td></tr></table><br>
<a name="335372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> LoadMesh() should by it self choose the correct number of UV sets, or it will be a mess. <br><br></td></tr></table><br>
<a name="335503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> Again,<br><br>-support for more uv channels<br>-support for texture compression<br>-a case of beer for mark <br><br></td></tr></table><br>
<a name="335543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, texture compression is a good idea. The textures loaded into the memory should be compressed (if possible in the vidram), and decompressed realtime. <br><br></td></tr></table><br>
<a name="338477"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering if there's any progress on this front. I.e planned for a future update, or is this officially not going to happen? (At least for b3d) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
