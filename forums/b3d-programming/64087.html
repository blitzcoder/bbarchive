<!DOCTYPE html><html lang="en" ><head ><title >Picking areas of a texture on a mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Picking areas of a texture on a mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Picking areas of a texture on a mesh</a><br><br>
<a name="715265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Say I had a model of earth that could be rotated like a virtual globe, but when the user moves the mouse pointer over a specific state or country the border of it becomes highlighted.<br>Is there a way to figure out what pixel of the texture map the mouse pointer is over?  <br>If that could be determined then I suppose you would need a formula to determine if it fell within the borders of a specific country, then drawing the outline of that country on top of the texture would be another challenge.<br>Anyone ever try something like this?<br><br>EDIT: <br>I just thought of an easier way, I suppose I could just record the x and y location of the mouse and what the rotation of the globe is and then just keep a table of what countries fall at what x,y coords for that rotation.<br>I would just have to limit the amount of different rotations the globe can be set at or it could get really time consuming. <br><br></td></tr></table><br>
<a name="715266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or you could split the model up by country borders in your modeling app, then load them all at once and treat them as separate entities.<br><br>Edit: never mind... would be too time consuming and high poly.  forgot you're using a texture for the globe ;). <br><br></td></tr></table><br>
<a name="715285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >kevin8084</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> you could use pickedX(),pickedY(), and pickedZ() and translate to 2d screen coordinates, I believe. <br><br></td></tr></table><br>
<a name="715293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would do it like so ...<br><br>Create a new color map texture which has all countries displayed as a separate colour.  Do not texture the planet with this.<br><br>Use the PickedU &amp; V code in the archives which will give you the uv coords on your visible texture.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=515" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=515</a><br><br>Get the x, y position of the pixel on the colormap texture by multiplying the u coord by the texturewidth() and the v coord by the textureheight().<br><br>Read the color at this position and determine which country is picked.<br><br>Stevie <br><br></td></tr></table><br>
<a name="715307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, nice reply Stevie.  I never would have thought to use different colors but that makes perfect sense.  I'm going to give that a try.  <br>Any suggestions on how to "highlight" the current country?  Either by making the border light up or making it change to a brighter color on the texture map? <br><br></td></tr></table><br>
<a name="715316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> To highlight a country ... use another overlay texture, clear it to black and apply this over the existing planet texture using additive blend.  This will be used to brighten an area of the texture.<br><br>When a country is detected ... read all the pixels from the colour texture of this country's colour and plot a pixel of colour 128,128,128 ( or suchlike ) onto the overlay texture.  Remember and clear it when another country is selected.<br><br>It should be fast enough.<br><br>For highlighting .. do a similar exercise but only plot pixels which border this countries colour.<br><br>Make sense?<br><br>Stevie <br><br></td></tr></table><br>
<a name="715320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok I got it working pretty good now, that picked uvw code works great.  I have it picking the colors of the current texture map and I've tried a few different ones.  For some reason its doing something weird on one of them.  In the areas where its blue, in the ocean, its saying the rgb is 0,0,0 which is wrong.  I think it has something to do with the image being indexed color instead of RGB.  I took it into photoshop and converted it but its still not working correctly.<br>I tried a different texture though and it works great.<br><br>The highlighting technique by grabbing the colors sounds great, another thing I wouldn't have thought of, thanks again. <br><br></td></tr></table><br>
<a name="715330"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found a really nice earth texture.  In the area of the United States I added part of a map to test it out.  It seems to work ok but check out what happens when you hover over Texas.  It's detecting yellow as white.  <br><br><a href="http://www.doresoftware.com/misc/globe.zip" target="_blank">http://www.doresoftware.com/misc/globe.zip</a><br><br>Extract to a folder, run globe.bb<br><br>Use WASD or arrow keys to turn the globe. <br><br></td></tr></table><br>
<a name="715331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You got your blue pixel argb values wrong ...<br><br>This is what it should look like ..<br><br>argb = ReadPixel(x,y)<br>		dotred# = (argb Shr 16 And %11111111)<br>		dotgrn# = (argb Shr 8 And %11111111)<br>		dotblu# = (argb And %11111111)<br><br><br>Works fine now ;)<br><br>Stevie <br><br></td></tr></table><br>
<a name="715336"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hrm I never noticed that before.  I copied that function from the example so its wrong in there as well.  <br><br>Now I need to find a nice image that seperates the boundries of all the states and countries so I can start color coding.  <br><br>Thanks once again. <br><br></td></tr></table><br>
<a name="715338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> No worries.  Let us see what you come up with. <br><br></td></tr></table><br>
<a name="715355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaduke</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will do.  Basically I'm working on simple geography learning tool but I have all sorts of ideas to make it different and fun. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
