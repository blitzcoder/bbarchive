<!DOCTYPE html><html lang="en" ><head ><title >Return Array String from Function?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Return Array String from Function?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Return Array String from Function?</a><br><br>
<a name="1234953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. How can I make this code I made return an array string?<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; Set these 2 variables for the Split Function

Global Max_Array_Count = 2
Global Max_Word = 0

Dim My_Str$(Max_My_Strs)
Dim Word$(Max_Array_Count)

Str1$ = "This|Sucks"
Str1$ = Split_Me$(Str1$)
DebugLog Str1$

WaitKey

End

; Our Split Function....
Function Split(String2Parse$,Delimiter$)
	Count=Len(String2Parse$)+1
	Dim word$(Count)
	Max_Word=0 : Start=1
		For t=1To Count
			If Mid(String2Parse$,t,1)=Delimiter$ Or Mid(String2Parse$,t,1)=""
				Max_Word=Max_Word+1
				Word$(Max_Word)=Mid(String2Parse$,Start,t-Start)
				Start=t+1
			EndIf
		Next
	Max_Word=0 : Start=0
End Function

Function Split_Me$(Str1$, separator$="|")

	Split(Str1$, separator$)
	
		For x = 1 To Max_Array_Count

			My_Str$(0) = Word$(x)

		Next
	
	Return Q$(My_Str$(0))

End Function

Function Q$(str1$)
	Return Chr$(34)+str1$+Chr$(34)
End Function</textarea><br><br>It SHOULD return: <br><br>"This"<br>"Sucks"<br><br>But instead, it returns: <br><br>"Sucks"<br><br>Which DOES suck! :P<br><br>Thank You so kindly! :)<br><br>Sincerely, <br><br>~GF <br><br></td></tr></table><br>
<a name="1234954"></a>

<a name="1234955"></a>

<a name="1234956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> That <i>you</i> made?<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=188" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=188</a><br><br>Step 1 to getting actual help: if you don't understand someone else's code, <i>do not claim you wrote it</i> after making like two trivial modifications. That isn't going to help you get the answers you need, in this case because:<br><br>1) it's not possible to return an array from a function in Blitz3D<br><br>2) the person who originally wrote that code <i>knew that</i> and is already using the standard workaround for "returning" arrays from functions, which makes your question make no sense<br><br>(The workaround, incidentally, is to have an externally-designated Dim array for the function to use, in this case Word$(). The values will appear in that array. Blitz3D doesn't recognise "an array" as a single value you can do things to - at least, not the Dim-style arrays - so trying to DebugLog it makes no sense.)<br><br>What do you actually want to achieve here? (What is Split_Me supposed to do?) Splitting a string only to treat the resulting array as a single string seems somewhat redundant. <br><br></td></tr></table><br>
<a name="1234957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes. PART of it is MY code.<br><br>Split_Me$() is MY code.<br><br>Q$() is MY code.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function Split_Me$(Str1$, separator$="|")

	Split(Str1$, separator$)
	
		For x = 1 To Max_Array_Count

			My_Str$(0) = Word$(x)

		Next
	
	Return Q$(My_Str$(0))

End Function

Function Q$(str1$)
	Return Chr$(34)+str1$+Chr$(34)
End Function</textarea><br><br>Now... If you're not going to be of any help, please leave this thread and don't come back.<br><br>And no it is NOT redundant. I want it to Split the string and return automatically. Not having to use a bunch of "Word$()" arrays. <br><br></td></tr></table><br>
<a name="1234960"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you even read past the first line of post #2?<br><br>Returning an array from a function is not possible. You must use a workaround. You have a few options here, and the one Chroma used originally is pretty much the best. What's wrong with doing that?<br><br>What are you even trying to do here? Your usage example in the OP doesn't make any sense. Your Q function does nothing relevant to the question, and your Split_Me function is <i>so</i> broken it's not clear what it's trying to do (all it does is return Q(Word(2))). And again, splitting a string into... one string... is a no-op. That's obviously not the goal.<br><br>Please, restate what it is you want from this code, having acknowledged that your original problem statement cannot be expressed in Blitz3D and needs to be reconsidered. <br><br></td></tr></table><br>
<a name="1234961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want this code to return every word with a separator as a list. I will then grab each word from the list and return it somehow. I need this for a texture name return function. Using return &amp; not print or debuglog. <br><br></td></tr></table><br>
<a name="1234962"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I will then grab each word from the list and return it somehow <br></div><br><br>This is the bit that's tripping me up, because its meaning is not obvious. (I actually <i>think</i> I know what you mean, but let's be clear.)<br><br>"grab" = ?<br>"return" = ?<br>"it" = what structure of data?<br><br>Draw a data flow diagram (just type it in a code box) that describes the sequence of mutations you want to apply to the input string?<br><br>e.g.<br><br><pre class=code>"paris in the spring" --(split on space)--&gt; {"paris", "in", "the", "spring"}

{"paris", "in", "the", "spring"} --(concatenate elements with newline)--&gt; "paris\nin\nthe\nspring"</pre> <br><br></td></tr></table><br>
<a name="1234963"></a>

<a name="1234964"></a>

<a name="1234965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">"axe.jpg", "dwarf1.jpg", "dwarf2.jpg"
--(split on separator)--&gt; {"axe.jpg", "dwarf1.jpg", "dwarf2.jpg"} 
--(concatenate elements with newline) --&gt; "axe.jpg\ndwarf1.jpg\ndwarf2.jpg\n"

above becomes: 

axe.jpg
dwarf1.jpg
dwarf2.jpg</textarea><br><br>Each texture is a separate texture.<br><br>Like that? <br><br></td></tr></table><br>
<a name="1234966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> So your original string is a list of names, and you want to split on <b>', '</b> to produce an array of names, and then you want to fold the array back into a single string but with newlines instead of commaspaces?<br><br>You're sure you want the result to be a single string? (I haven't been following your other threads, if this is something textures can actually use then sure, w/e)<br><br>In that case, why not just use Replace to switch the original separator for a newline?<br><br>See if your dataflow goes 'string -&gt; (intermediate forms) -&gt; string', that's entirely distinct from 'string -&gt; array of strings'. Split is certainly one way to implement the first part of Replace (and B3D probably has an efficient implementation of Split internally), but making your question about it is rather like wanting to know about quaternion rotations and asking about multiplying two floats: it's not the actual problem you want to solve. And the terminology in the original question - referring to the final result type as an array - is incorrect and confusing. <br><br></td></tr></table><br>
<a name="1234967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, in order to write each texture to a file of mine in code, the said "Split()" code must work WITHOUT repeats or loops as it gets stuck in an infinite loop if I do: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Repeat
otex$ = read_texture_names_here
writeline(fi, otex$)
until otex$ = ""</textarea><br><br>I'm trying to grab EACH texture name from a 3D model no matter what model that is in X Format, write it to a text file so it can be opened &amp; read line by line, later.<br><br>Does that explain it a LITTLE better? <br><br></td></tr></table><br>
<a name="1234968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What does read_texture_names_here represent? Since if the above forms an infinite loop it's fairly obvious that that's where the issue is.<br><br>OK, I get now what structure you want for the output. Now to address the input:<br><br>-- the above post implies that you have explored two options for reading texture names from an X file<br>-- you can grab them individually, which isn't working for some reason<br>-- you can grab them all in one go, but then have to break them apart separately<br><br>How are you doing that? Which is the initial format of the data being returned from your read operation?<br><br>Am I right? (NB I don't know anything about X files, except that it's a spec that seems to change every five minutes) <br><br></td></tr></table><br>
<a name="1234980"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let's ignore the previous answers and repeat the same question :<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=101442" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=101442</a> <br><br></td></tr></table><br>
<a name="1235000"></a>

<a name="1235013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, my mistake Remi. Thank you for finding that topic for me. I couldn't for the life of me remember where it was.<br><br>Problem solved guys! :)<br><br>Tyvm!<br><br>Sincerely, <br><br>~GF <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
