<!DOCTYPE html><html lang="en" ><head ><title >Blitz to non-blitz app comms</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Blitz to non-blitz app comms</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Blitz to non-blitz app comms</a><br><br>
<a name="353181"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone tried to control Blitz via another application?<br><br>I'm thinking the best way to do this is with TCP comms.<br><br>I've created a C++ application that connects as a client to a Blitz TCP server. The client then sends commands that it wants Blitz to perform.<br><br>Has anyone tried this before or know where I can get examples of this working? I'm having problems with synchronisation.<br><br>The reason I'm doing this is because I know C++ and would like to use it as the main controlling code and call Blitz graphics functions when necessary.<br><br>Any comments? <br><br></td></tr></table><br>
<a name="353243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds clumsy, if you want to do this, then you better find a way making the apps share a block of memory. But if I were you, I would just learn basic. <br><br></td></tr></table><br>
<a name="353257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kanati</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> just learn blitz...  you don't currently have access to the rendering pipeline directly so you aren't going to get any benefits and you WILL get a lot of headaches. <br><br></td></tr></table><br>
<a name="353936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JPL</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi !<br><br>I've tried several ways to do this (code in C++ and just use Blitz for rendering), here are the solutions :<br><br>- Using TCP : too slow for real time rendering<br>- Using Shared Memory Block : faster than TCP, but too slow (ask Koriolis for infos about that, he wrote a DLL called BlitzBridge that allows c++ apps and Blitz apps to share the same memory block)<br><br>I think there's no fast enough way to do this...<br>Sorry !<br><br>JP<br><br>PS : If you find a way to do that, I'd like to know about it. <br><br></td></tr></table><br>
<a name="355099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys.<br>I might have to learn Basic - I just wanted to make sure there wasn't a good way of controlling Blitz externally before I did. I'll try and give BlitzBridge a go - do you know of a link to it?<br><br>Kind regards <br><br></td></tr></table><br>
<a name="355108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did a similar thing using named pipes (or was it mailslots?)<br>Anyway, It was just for fun and I didn't actually test how fast it was.<br>I'll have a look in my pile of code and see if I can dig it up for you... <br><br></td></tr></table><br>
<a name="355110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> why don't you just use a 3rd party 3D library with c++?<br>I would think that would give you more control..?!? <br><br></td></tr></table><br>
<a name="355550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> LarsG<br><br>I have tried to find a C++ library that is as simple to use as blitz, but have yet to find one (that is as good).<br><br>There are plenty of share-ware ones, but they suck.<br><br>If anyone knows of a C++ 3D library that costs about the same as Blitz and is as good then I'd be happy as larry! <br><br></td></tr></table><br>
<a name="355580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >eBusiness</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most people think Basic is easier to learn than C++. If you already know C well I think you'll pick up Basic in no time. And by the way, even if you do that double app thing, it will probably be easiest if you use some Basic as well. <br><br></td></tr></table><br>
<a name="355626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi JPL :D<br><br>For BlitzBridge, actually I think I should as well have stuck to named pipes and not spent time emulating more or less the same functionality with shared memory.  Though shared memory is probably slightly faster.<br>The advantadge being that named pipes are standard, and doesn't require any additional DLL. <br><br></td></tr></table><br>
<a name="356069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis <br><br>Is there somewhere where I can download BlitzBridge or somewhere that explains how i works? <br><br></td></tr></table><br>
<a name="356087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still interested? It does nothing more than send/receive a string in some kind of pipe, nothing magical in that. It's then up to you to have the sender send the right messages and the receiver understand it and do the requested operation.<br>Just a quick and dirty DLL (the max number of pipes and max size in messages is even hard coded). I'll send it to you by mail. <br><br></td></tr></table><br>
<a name="356446"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >verfum</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok - for some reason I thought you'd done it using shared memory. I'd still be interested if you can send it to me.<br><br>Thanks <br><br></td></tr></table><br>
<a name="356571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did, but I needed it to handle simple commands (it was for an editor and the editor sent editing commands to the blitz app). So a pipe behaviour was ideal. What I did is implement some kind of pipes using shared memory. <br>As I said I should probably have stuck to good old windows pipes. <br><br></td></tr></table><br>
<a name="358457"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Koriolis:<br><br>How did you create your shared memory block?<br><br>Searching on google for Shared Memory, all I found was Filemapping using INVALID_HANDLE.<br>But this seems like a slow way to share memory as it uses the pagefile for this.<br><br>However one method I found seems fast enough.<br>Creating shared variables in a DLL using #pragma data_seg.<br>Then both applications loads the DLL and reads/writes to these shared variables.<br>Possibly using SetEvent/ResetEvent to prevent accessing the variable at the same time.(not mutexes as these has rumors of being "slow")<br><br>One CodeProject.com, one guy created his own mutex(using the method above) which was VERY fast compared to the standard mutex.<br>I think that his "mutex-version" locked and unlocked the mutex 100000 times in 250 milliseconds while the standard mutex took about 6800 milliseconds. <br><br></td></tr></table><br>
<a name="358790"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, I used CreateFileMapping. I had absolutely no problem with the speed, which was expected when you just need to send a few editing commands here and there. As for the fact that it's backed up by the pagefile, *all* the memory is, I don't think there's such a big difference here compared to writing to any memory block. I may be wrong.<br>In any case if you need speed don't assume anything. If you wanna know, make some tests and compare the results :)<br><br>The method of using #pragma data_seg could be faster, that's not a bad idea.<br><br>EDIT: And anyway don't take my DLL as a good example of how to do it. As I said it was really a quick and dirty one. <br><br></td></tr></table><br>
<a name="359327"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I haven't tested filemapping yet, but instead went straight for the DLL method.<br>It's a very fast and easy method for sharing data between two or several applications, as long as one follow the rules.<br>Don't share pointers and use some sort of syncronization(mutex for example) to keep the applications from accessing the shared mem at the "same time".<br>Of course Microsoft recommends the filemapping method and I will try that.<br>But if the filemapping proves to be "slow" then the DLL method will be my choice.<br>Speed is of high importance in my current little project. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
