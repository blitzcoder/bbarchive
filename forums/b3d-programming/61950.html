<!DOCTYPE html><html lang="en" ><head ><title >Wraparound scroller only goes one way</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Wraparound scroller only goes one way</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Wraparound scroller only goes one way</a><br><br>
<a name="692354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bungee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have recently been trying to create a wraparound scroll system like Defender's and have downloaded some sample code that I have tried to convert. I have had a bit of success as it now wraps endlessly to the right. However, when I scroll to the right, turn round and go back to the left, the map stops at its origin, I assume because the render routine is only designed to go one way. Can anyone help or give me some advice on this? Here is the current render routine:<br><br>Function RenderMap (map%, x_offset%, y_offset%)<br>ty% = y_offset / TileHeight (map)<br>sy% = -(y_offset Mod TileHeight (map))<br>While sy &lt; SCREEN_HEIGHT<br>   ty% = ty Mod MapHeight (map)<br>   tx% = x_offset / TileWidth (map)	; tile x ?<br>   sx% = -(x_offset Mod TileWidth (map))	; screen x ?<br>   While sx &lt; SCREEN_WIDTH <br>      tile% = GetTile (map, tx Mod MapWidth (map), ty Mod MapHeight (map))<br>      DrawTile map, sx, sy, tile ; <br>      tx = tx + 1<br>      sx = sx + TileWidth (map)		<br>   Wend<br>ty = ty + 1<br>sy = sy + TileHeight (map)<br>Wend<br>End Function<br><br>If you need more of the code I can post that too.<br>Many thanx<br>Bungee <br><br></td></tr></table><br>
<a name="692788"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pretty hard to see what's going on. Perosnally I'd rewrite it from scatch. Shouldn't be that hard.<br><br>In this code I cannot determine what is the variable for the players position. I also have no idea what this GetTile(... should do.<br><br>Basicly I see a lot of MOD commands. they usually wrap things in one direction only. If you want it in both directions, you need to do it manually, eg:<br><br>x=(x+7) mod 100 ; x will always be between 0 and 100<br><br>the same without to use MOD: <br><br>x=x+7 : if x&gt;100 then x=x-100<br><br>to make this work in both directions (when you don't know if something was added to x, or of it was subtracted from it) you should do this:<br><br>if x&gt;100 then x=x-100<br>if x&lt;0 then x=x+100<br><br>So it is now "wrapped" in both x directions. But I really don't know if a MOD command in your code is really the problem, and if so wich one.<br><br>Btw: welcome on this forum! <br><br></td></tr></table><br>
<a name="692899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bungee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your reply jfk, however, someone else has already helped me on another forum. His solution was similar to yours.<br><br>I wish I knew more about this Mod command though. As far as I can make out it simply returns the remainder after a number has been divided by another the max amount of times. <br><br>e.g. 100/33=3.03 so Mod gives .03<br><br>How is this used in scrolling?<br><br>Thanks,<br>Bungee <br><br></td></tr></table><br>
<a name="692904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> 100 mod 33 = 1<br>Remember the 3rd grade way of doing division?<br><pre class=code>
     3
   ---
33/100
    99
    --
     1 &lt;- Remainder
</pre><br>So 100/33 is 99 with a remainder of 1<br>Now that's handy in scrolling because as the numberator increases in value, the remainder increases from 0 to denominator - 1 then wraps again to 0.<br>So 0 mod 3 = 0<br>1 mod 3 = 1<br>2 mod 3 = 2<br>3 mod 3 = 0<br>4 mod 3 = 1<br>5 mod 3 = 2<br>6 mod 3 = 0<br><br>You see a pattern here?  Now when scrolling a screen, suppose the playfield is 100 cells wide and the screen it's displayed on is 25 cells wide.  If the left side of the screen is on cell 10, then the right side would be on cell 24.  But if the left cell is on 90, then the right cell would be on 114, 15 cells further than what you have.  But with Mod, that represents no problem.  114 Mod 100 = 14.  The rightmost cell displays cell 14.  You just wrapped around. <br><br></td></tr></table><br>
<a name="692956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bungee</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks TomToad that's a little bit clearer.  :)<br>I'll get it eventually.<br><br>Bungee. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
