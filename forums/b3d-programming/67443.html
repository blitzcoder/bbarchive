<!DOCTYPE html><html lang="en" ><head ><title >Bending a pipe by 'x' degrees?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bending a pipe by 'x' degrees?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Bending a pipe by 'x' degrees?</a><br><br>
<a name="753220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does anyone have any ideas on how to take a cylinder (in fact a modified version of the MyCylinder function from the archives) and bend it at a location along its length by 'x' degrees - im building a small application to assist in the construction of a tubular space frame for an off road buggy and the app needs to bend the tube meshes, I have modified the 'MyClinder' function to allow for tube length wall thickness diameter etc and added the option to display inner wall of tube and endcapping from inner wall to outer wall. <br><br>I now want to take this mesh and bend it by moving the verts along its length correctly to form the bend but im at a loss as to how to achieve this - any help would be greatly appreciated (A bit of code to point me on the correct path would be a blessing!!!!!)<br><br>Chaos <br><br></td></tr></table><br>
<a name="753230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use a 4 pt Bezier curve where you specify the start position and then end position and set the 2 middle points to influence the curves start and end directions.  This will give you the center of the bend. <br><br>Then get the direction of the curve at a specific timestep by positioning a pivot at the currect timestep and point it to the next timestep.  Then extrude the vertices on the x and y axis relative to this pivot.<br><br>Not sure if that made sense? At least I know what I mean ;)<br><br>Stevie <br><br></td></tr></table><br>
<a name="753347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a function in the code arcs to create a torus - may help point you in the right direction? <br><br></td></tr></table><br>
<a name="753564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie G - Thanks for that I think I get what your talking about, im trying something similar at the moment myself using a pivot and taking the ring of verts created from the pipe function and rotating it the required amount then capturing the vert locations - might work, and gives me flexability on the angle of the curve<br><br>big10p - Wow I thought i'd checked all through the archives but I missed that one thanks for the heads up, a very neat little function - thanks again<br><br>Cheers guys<br><br>Chaos <br><br></td></tr></table><br>
<a name="753570"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is a job for a good 3d modeller i guess <br><br></td></tr></table><br>
<a name="753582"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> DC: he needs his app to bend the bars in realtime. ;)<br><br>TBH, I'd approach this problem in 2D, then extrapolate the calcs to create a 3D bar. I *might* have a crack at this during the week. I'm pretty rusty, coding-wise, though. :) <br><br></td></tr></table><br>
<a name="753644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> DC: as big10p said i need to be able to bend and re-bend the tubes in realtime - the idea is to feed in the size of the tube then bend it on screen to fit the chassis, I thought of doing it 2D first myself but I realised I would need to be able to 'tweak' tubes to fit on screen in 3d anyway - so I thought id try and do it in 3d first as that would probably be the tough bit!!<br><br>big10p: thanks man if you do get chance to have a play any assistance or just pointers would be very much appreciated, I will be plugging away at it during the evenings after work myself during the week and will post the progress I make if your interested....<br><br>Cheers<br><br>Chaos <br><br></td></tr></table><br>
<a name="753857"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybee you have to make a 'bend animation' in a 3d modeller and save it as an animated mesh. then load it in blitz3d and play it! <br><br></td></tr></table><br>
<a name="753929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> DC: Yeah could do but I need to be able to allow the user to select the correct size of tooling for the bend and to how many degrees, so unless I scale it which might mess up I would need to animate all size bending die's <br><br></td></tr></table><br>
<a name="753930"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> But thanks DC if all else fails thats the way it will have to be done I suppose<br><br>Cheers<br><br>Chaos <br><br></td></tr></table><br>
<a name="754449"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you get this sorted?  If not I could code an example which may help. <br><br></td></tr></table><br>
<a name="754454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was gonna have a go, but haven't got around to it yet. Probably better if you do it, Stevie. ;) <br><br></td></tr></table><br>
<a name="754470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the easiest way to do what you want.<br><br>Assuming your cylinder is vertical:<br><br>Place a pivot in the center of the first segment of the cylinder.  Ie, the middle of the circle of vertices that forms the bottom.<br><br>Place a pivot in the center of the next segment.  Make it a child of the first pivot.<br><br>Place a pivot in the center of the next segment.  Make it a child of the second pivot.<br><br>Repeat until all segments have a pivot that is parented to the previous pivot.<br><br>Now, create one pivot for each vertex in the second segment.  (The vertices in the first segment will not move so we do not need to do that one.) Make each of these a child of the second segments pivot.  Repeat this for the rest of the vertices, attaching them to their segment's pivot. <br><br>You're almost done!<br><br>Divide desired curvature by number of segments in the cylinder-1.  Ie, if there are six segments in your cylinder, counting the top and bottom, and you want a 90 degree curve, divide 90 by 5.  This gives us 18.  So ROTATION = 18.<br><br>So, assuming a 9 degree bend, starting at the second segment, rotate each segment's pivot by 18 degrees on either the Z axis if you want a bend to the right, or the X axis if you want a bend from front to back.<br><br>Once you have done this, simply copy the new global position of each vertex's pivot to the vertex.  You now have a curved cylinder.  <br><br>This works because each child will rotate around the parent, and you've created a chain of children starting from the bottom of the cylinder, and the vertex pivots are parented to each section of this chain, so they rotate with it as expected as well.<br><br>It's possible to do this without one pivot per vertex, or even using just a single pivot, but it's just way easier for you to do it this way and should be plenty fast enough for your needs. <br><br></td></tr></table><br>
<a name="754607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chaos</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow thanks everyone! - i managed to produce a test example similar in principle to sswift's idea in the end, <br><br>First create a ring of verts at the correct diameter <br><br>parent that ring to a pivot a set distance away (the distance is important as it the bending tool diameter)<br><br>rotate the whole ring of verts via the pivot using the same maths as sswift to get the degree of movement per segment<br><br>at each movement/rotation capture the global locations of each vert and create a new vert at that global position connected to a bend mesh object<br><br>finally skin the new mesh object and I have a bent tube mesh!!!!<br><br>Got it working last night - then fiddled with it and broke it!!! - but should have it working tonight again<br><br>Thanks very much for the help everyone :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
