<!DOCTYPE html><html lang="en" ><head ><title >EntityColor does not work on animated .3ds meshes</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >EntityColor does not work on animated .3ds meshes</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >EntityColor does not work on animated .3ds meshes</a><br><br>
<a name="297054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rad Gravity</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey everyone, I just imported a fairly comlex animated mesh from 3ds max 5 into blitz and although EntityColor works with the static model it does nothing on the animated one.  This was a really useful function in my project as the lighting was spot on before and now the main character looks way too bright.<br><br>Any ideas?<br><br>Also, ScaleMesh doesn't work with animated meshes, not that I need it because I use ScaleEntity which does work, but I noticed it anyway.<br><br>Another also (sorry about the length of this post), I use EntityTexture with the frame parameter to texture the different parts of my model and it only textures the sub-objects that aren't part of the object hierarchy in 3ds.. <br><br></td></tr></table><br>
<a name="297069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Binary_Moon</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It does work. You just need to understand how the loadanimmesh commands works.<br><br>Basically when you load an animated mesh you load the mesh and keep the hierachy intact. So the handle that gets returned byt hte loadanimmesh command is the parent, with all the meshes being children. Using the entitycolor command you only colour the parent (which could well be a pivot) and so nothing changes colour. What you need to do is write an entitycolor function that is recursive (gores through children as well)<br><br><pre class=code>
;----------------------
;recursive entity color
;----------------------
Function entity_color(entity,r,g,b)

	EntityColor entity,r,g,b
	
	For i=1 To CountChildren(entity)
		child=GetChild(entity,i)
		entity_color(child,r,g,b)
	Next

End Function
</pre><br><br>NOTE : I haven't tested this but it should work fine <br><br></td></tr></table><br>
<a name="297098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rad Gravity</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey Mr Moon, thanks for that.  Guess I should have worked that out by myself! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
