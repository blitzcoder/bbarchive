<!DOCTYPE html><html lang="en" ><head ><title >Single Mesh?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Single Mesh?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Single Mesh?</a><br><br>
<a name="409094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before I test it myself... I'm creating a single surface particle/fx system and as I understand it, you still need a separate surface for every texture.  I was wondering if anybody knows if it's better to create 1 mesh with many surfaces(1 for each texture) or have 1 mesh for each surface?  Also, can you think of any reason why, outside of speed that one way would be better than the other?<br><br>thanks <br><br></td></tr></table><br>
<a name="409099"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You don't need a new surface for each textures, there's no reason why you don't dump all the different particles onto on textures (surface) and use the UV co-ords to pick the right one.<br><br>However, there is a trade off eventually when you've got so many triangles on one surface it starts getting slow.<br><br>This is why you need to start splitting into different surfaces.<br><br>Personally I'd go with 1 surface per emitter, it seems to make sense to me as the auto culling blitz does should work well as you're not going to have 1 entity spread over a massive area. <br><br></td></tr></table><br>
<a name="409100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just thought of something that I haven't seen in many other particle systems.  If I'm able to keep all my textures the same size then I should be able to use LoadAnimTexture.  With that would only have 1 surface and while doing my UpdatePartcles() I wouldn't have any texture switch on the video card which I understand can also be costly... Does this sound right? <br><br></td></tr></table><br>
<a name="409102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Rob.  Do you have an idea as to why many triangles on a surface start to slow it down as apposed to have the same number of tris on multiple surfaces? <br><br></td></tr></table><br>
<a name="409103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rob, would you have multiples meshes in the case you describe? <br><br></td></tr></table><br>
<a name="409108"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using your method vs the LoadAnimTexture would also be better because then I could have different sized textures as well... just a little more programming.  Thanks Rob.<br><br>So then on that note, anybody know of a program that can display the proper UV coords for texture postitioning or routine where you put in the x/y pixel offsets and the height/width? <br><br></td></tr></table><br>
<a name="409116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdrianT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> don't know if it would be any faster but you coudl probably map your textures onto a single tri rather than use quads, if you made your particles yourself and halve the polycount. Unless blitz draws quads faster than tris. <br><br></td></tr></table><br>
<a name="409121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, the system i'm making does use tris.  It also uses quads in the shape of square or dimonds.  Also the vertexes can be deformed for certain effects.<br><br>I found (on my card at least) that tris, even with the larger fill, are a little faster than quads. <br><br></td></tr></table><br>
<a name="409276"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thanks Rob. Do you have an idea as to why many triangles on a surface start to slow it down as apposed to have the same number of tris on multiple surfaces?  <br></div>No, I know you have only have 65k verts per surface, but it's a matter of balance, I'm sure someone like sswift will give you all the reasons why though, I think it's something to do with the cost of rebuilding a mesh every update or something.<br><br><div class="quote"> Rob, would you have multiples meshes in the case you describe? <br></div>Yes, a new mesh for each emitter. This is a good idea in my opinion as if an emitter is behind the camera the particle mesh won't be rendererd, however, if all your particles are in the same mesh all the particles will be rendered regardless of if they are in view or not.<br><br><div class="quote"> So then on that note, anybody know of a program that can display the proper UV coords for texture postitioning or routine where you put in the x/y pixel offsets and the height/width? <br></div>That's pretty straight forward, a UV co-ord goes from 0-1 so if your texture is 512x512 512=1 and 0=0 so .5=256, .25=128 etc etc, very simple.<br><br><div class="quote"> don't know if it would be any faster but you coudl probably map your textures onto a single tri rather than use quads <br></div>Again it's a balancing act (varying from card to card), personally I'd stick to quads as it make UV mapping a hell of a lot easier. Unless you're talking about 100,000s of particles I don't think on modern cards your really going to make that much difference. Triangle count isn't really the problem here. <br><br></td></tr></table><br>
<a name="409282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if it was already mentioned, but if your mesh is not loaded with LoadAnimMEsh (and I assume it isn't, it's rather created at runtime, right?) and if it has mutliple Surfaces, it will be rendered completely, even if only one surface is in the FOV of the camera. But if you have a mesh per surface, fustrum culling will skip rendering of any mesh that isnt in the FOV of the camera. <br><br></td></tr></table><br>
<a name="409284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> In Lotus R2 I can manage 8,000 particles (that'd be about 16,000 triangles), so there's a rough estimate of what you can aim for. <br><br></td></tr></table><br>
<a name="409348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Yes, a new mesh for each emitter. This is a good idea in my opinion as if an emitter is behind the camera the particle mesh won't be rendererd, however, if all your particles are in the same mesh all the particles will be rendered regardless of if they are in view or not.  <br></div><br>With all cases?  Someone posted that if you make 2 vertices of a tri the same, that tri won't be rendered at all.  I use this now in my current quad system and it does seem to be the case.<br><br><div class="quote"> That's pretty straight forward, a UV co-ord goes from 0-1 so if your texture is 512x512 512=1 and 0=0 so .5=256, .25=128 etc etc, very simple.  <br></div><br>Yeah thanks, I wasn't thinking.  <br><br><div class="quote"> Again it's a balancing act (varying from card to card), personally I'd stick to quads as it make UV mapping a hell of a lot easier. Unless you're talking about 100,000s of particles I don't think on modern cards your really going to make that much difference. Triangle count isn't really the problem here.  <br></div><br>I'm using both quads and tris.  I already have the UVs all setup on the tris, they do allow the fps to stay a little higher... <br><br></td></tr></table><br>
<a name="409349"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not sure if it was already mentioned, but if your mesh is not loaded with LoadAnimMEsh (and I assume it isn't, it's rather created at runtime, right?) and if it has mutliple Surfaces, it will be rendered completely, even if only one surface is in the FOV of the camera. But if you have a mesh per surface, fustrum culling will skip rendering of any mesh that isnt in the FOV of the camera. <br></div>yeah with this information and Rob suggestions I'm going to go with 1 mesh per surface.  Not per emitter in my case for 2 reasons; most of my emitters will be on screen at the same time and I want to keep the surface count low cause that does seem to be the biggest hit.<br><br>Thanks everybody. <br><br></td></tr></table><br>
<a name="409363"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dmaz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Noel, you have a great engine.  I'm not using it here only for a few reasons.  no docs yet (It supports a lot of stuff) and it doesn't tween (yours should do this).  Also there are a few other fx that I wanted to do.<br><br>Now about your numbers... what do you mean by "manage"?  How many would you have on screen at that time? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
