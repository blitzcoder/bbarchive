<!DOCTYPE html><html lang="en" ><head ><title >Stucture of Blitz3d mesh</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Stucture of Blitz3d mesh</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Stucture of Blitz3d mesh</a><br><br>
<a name="720649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Snidesmin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just following on from this post:<br><br><a href="http://www.blitzbasic.co.nz/Community/posts.php?topic=64500" target="_blank">http://www.blitzbasic.co.nz/Community/posts.php?topic=64500</a><br><br>Does anyone know the data structure of the Mesh object used by Blitz3d?   <br><br>Specifically I'm trying to find the pointer to the Direct3d mesh so I can pass it to a userlib dll for manipulation of vertices etc. <br><br></td></tr></table><br>
<a name="720660"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> .B3D file format specks are here, if they are any help (probably not):<br><br><a href="http://www.blitzbasic.com/sdkspecs/sdkspecs.php" target="_blank">http://www.blitzbasic.com/sdkspecs/sdkspecs.php</a> <br><br></td></tr></table><br>
<a name="720665"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Snidesmin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that will only work if the runtime mesh structure is the same as the B3D file equivalent.  <br><br>I suspect that's unlikely as I'm sure additional information will be compiled and stored at runtime.  Also this obviously won't include the pointer to the direct x mesh (which will only be created at runtime) <br><br></td></tr></table><br>
<a name="720669"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Snidesmin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thinking about it, the handle of the mesh will be a pointer to a blitz3d 'entity' object.  <br><br>A field of that could then be the pointer to the blitz mesh object and then a field of that could be the pointer to the directx mesh.   <br><br>Surely someone knows what this internal data structure is? :O) <br><br></td></tr></table><br>
<a name="721094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd suggest to use a RAM monitor tool. It will tell you the Adress of a loaded test mesh. In blitz you would then read the adress the entity handle is pointing to and scan a RAM range there, searching for the previously determined adress value. This should give you a static Offset that can be used to read the physical mesh adress.<br><br>I'm still not sure if a mesh is stored in RAM or in VRAM. Anyone? <br><br></td></tr></table><br>
<a name="721356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr Snidesmin</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting. . .     though I'm not sure I fully understand the process you are describing - could you elaborate a little, perhaps with an example?<br><br>RAM or VRAM - yes I'm not sure either. My initial guess was that it will be in RAM and then blitz3d and/or direct3d would move it to VRAM for the render.  Then I realized that this guess has no reasoning behind it (because I don't have any knowledge of how direct3d rendering works) so it could be entirely in VRAM for all I know.   <br><br>Would this be important to know? If so why? <br><br></td></tr></table><br>
<a name="721464"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not an expert eighter. I'm pretty sure you cannot access VRAM as you can do it with RAM. Probably you need to lock some things, to prevent DirectX to manage things to death, or whatever. Additionally, in windows XP the OS may stop you from reading just any RAM adress, due to foreign process protection etc.<br><br>I can't give you an example because I never did this. It's really hacking into Marks structures - the hard way.<br>I can only tell you what I would try, and I'm not a smart hacker.<br><br>Get a "Debugger" for assembler coders that allows to display RAM content in realtime. Should be easy to find one. This is the Ram Monitor tool. See if it can monitor VRAM.<br><br>Then create a single mesh without textures. Scan the Vram. There should be something (the more I think about it, the more I believe the Mesh is located in the VRam only)<br><br>Hint. Use a mesh with "magic" tags, eg. vertex XYZ positions like: 3.14159 or so. You will then be able to recognize the mesh in the Vram, using the Debugger. Try to guess where the mesh starts in the Vram. If you're lucky then it will start after a lot of zero-bytes, or at the bottom of the Vram Adress space.<br><br>You will however have to scan the entity description area many times, until you find the potential pointer you determined from the debugger.<br><br>See the "How to hack certain properties" (or similar) thread in the tutorial section on how to scan the entity description area.<br><br>Unfortunately I cannot give you any guaranty if this will work or not.<br><br>PS: I said use magic numbers, but Debuggers usualy don't display RAM as Floats, so maybe you have to do it the other way round: create a string made of 4 characters, move it to a bank and read out a float, then use this float in the mesh, eg. as a vertex X position. <br><br></td></tr></table><br>
<a name="721708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The mesh is stored in RAM always it seems. When in the camera view, it will be transfered to VRAM and presumably stay there till it's forced out by lack of use. These are just from my own observations :o) <br><br></td></tr></table><br>
<a name="721728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This could be true. In fact for this reason I do a Render-All after loading everything, to cache the level entirely. <br><br></td></tr></table><br>
<a name="721900"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, that's a good idea... never thought of that :o) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
