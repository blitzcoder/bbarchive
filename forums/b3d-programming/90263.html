<!DOCTYPE html><html lang="en" ><head ><title >create rows and columns in an animstrip</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >create rows and columns in an animstrip</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >create rows and columns in an animstrip</a><br><br>
<a name="1025810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1288" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1288</a><br><br>Contains the code I am currently using but I want to make more than one<br>column and row. Say 8 pic then go down to a new row. I've not gotten anything to work correctly. My sprite maker bogs down with pics containing more than 35 cells so I'm wondering if it's because they're all in one long row. Thanks. I'm sure it's easy. <br><br></td></tr></table><br>
<a name="1025812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics 800, 600, 0, 2
SetBuffer BackBuffer()

index = 0

For index = 0 To 99


	x = index Mod 8
	y = index / 8
	
	Rect x * 32, y * 32, 28, 28, 0
		
	Flip
	
Next

WaitKey

End
</textarea> <br><br></td></tr></table><br>
<a name="1025835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's the idea, I'm having trouble figuring out how to implement it in the aforementioned code. Thanks. <br><br></td></tr></table><br>
<a name="1026463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nobody knows how to implement this?<br>Any help would be greatly appreciated. <br><br></td></tr></table><br>
<a name="1026484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> to create a AnimImage, which has more than one row will serve nothing, because you cannot use this image as a animImage!<br><br>If you want this, you will not get happy with this solution:<br><br><br>But if you want to have an image with a lot of small tiles, you can make it this way:<br><br><pre class=code>
Graphics 800,600,0,2
AppTitle "Tile Image Creator"

; insert here the values of your choice:
NumOfColumns = 3 
NumOfRows=10
FrameWidth = 100
FrameHeight = 100
ImageName$ = "image"

NewImage = CreateImage( FrameWidth*NumOfColumns, FrameHeight*NumOfRows)
SetBuffer ImageBuffer( NewImage )

For Index = 0 To (NumOfColumns *NumOfRows)-1

    X = Index Mod NumOfColumns
    y = Index / NumOfColumns
    ImageFrame = LoadImage( Imagename + Index+".bmp")
    DrawImage ImageFrame, FrameWidth*X, FrameHeight*Y
	
Next

SaveImage (NewImage, ImageName+"_All.bmp")
End</pre> <br><br></td></tr></table><br>
<a name="1026504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually midimaster you can use animimages with the frames laid out in more than 1 row. <br><br></td></tr></table><br>
<a name="1026536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was under the impression  you could and that Blitz actually reads them better that way. Thanks for the code sample. I'll see if i can get it sorted out in my program. <br><br></td></tr></table><br>
<a name="1026540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>to create a AnimImage, which has more than one row will serve nothing, because you cannot use this image as a animImage!<br> <br></div><br><br>AnimImage DOES read multiple lines. When it reaches the end of a row, it will check for and continue on the next rows. <br>I have no idea what might happen if the overall size of the imagestrip (table?) doesn't match a multiple of the frame height though, that may cause a bug or just leave cls-coloured space in the frame buffer. <br><br></td></tr></table><br>
<a name="1026571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok...thanks, I did'nt know that.<br><br>So he could use my code for building multi line AnimImages....<br><br>The overallsize of the target picture would be a multiple of the frame dimensions <br><br></td></tr></table><br>
<a name="1026652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, it's gonna take some rethinking because your code doesn't just plugin to mine. Here's the save routine as it now stands. I tried adding the NumofColumns and replacing my repeat until with your for/next but no luck.<br><pre class=code>
 Case btn008
numofframes = TotalFrames 
framelength = 224 
framewidth = 224 
imagenum = 1
imagenum1 = 0
newimage = CreateImage(framewidth*numofframes,framelength,numofframes)
SetBuffer ImageBuffer(newimage)
Repeat 
imageframe = LoadImage(imagename$+imagenum+".bmp")
;ResizeImage imageframe,224,224
DrawImage imageframe,framewidth*imagenum1,0
imagenum = imagenum + 1
imagenum1 = imagenum1 + 1
Until imagenum = numofframes + 1
SetBuffer BackBuffer()
Text 555,45,imagename$+".bmp, "+"your new AnimImage looks like this:"
SaveImage (newimage,imagename$+".bmp")
testanim=LoadAnimImage(imagename$+".bmp",224,224,0,TotalFrames)
MaskImage testanim,255,255,255

While Not KeyHit(28)
Cls
UpdateGUI(  )
Text 710,40,"Hit Enter to Stop"
If MilliSecs() &gt; tmrSparks + 100 Then
tmrSparks=MilliSecs() 

frmSparks=( frmSparks + 1 ) Mod TotalFrames 
SendMessage( lbl002, "LM_SETTEXT", "Frame #:  " + (frmSparks+1))
End If 
DrawImage testanim,642,102,frmSparks 


Flip
Wend
</pre> <br><br></td></tr></table><br>
<a name="1026658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think your problem mostly stems from how high the image needs to be.<br>Do you know How many frames you want? Do you know what the sizes of the individual frames should be?<br><br>There are limitiations on the size of any Buffer in blitz, I think it's something like 2048 pixels but don't quote me on that :)<br><br>This means, that it may be necessary to adjust the output into less columns and more rows.<br><br><pre class=code>
Global MaximumWidthAllowed=((GraphicsWidth()*(GraphicsWidth()&gt;2048)) + ((GraphicsWidth()&lt;=2048) Shl 11) )

;  Not sure which of these is known???
Global TotalFrames=32
Global FrameEidth=224
Global FrameHeight=224

TotalWidth=Totalframes*Framewidth
Rows=1
If (totalwidth&gt;MaximumWidthAllowed)
	Over=(TotalWidth-MaximumWidthAllowed)
	TotalWidth=TotalWidth-Over
	Rows=Rows+1
End If
Columns=TotalFrames/Rows
TotalHeight=Rows*FrameHeight
</pre><br><br>You now have tghe number of rows, number of columsn, and overal totalwidth and totalheight for the AnimImage.<br><br>Which is a case of:<br><pre class=code>Img=CreateImage(TotalWidth,TotalHeight)
SetBuffer ImageBuffer(Img)
For X=0 To Colums-1
For Y=0 To Rows-1
DrawImage AnimImage,X*FrameWidth,Y*FrameHeight,Y*Columns+X
Next
Next
SetBuffer BackBuffer()
SaveImage(Img,"MyImageYAY"+".bmp")

</pre><br><br>Lastly, You don't need to do things such as <br><br> numofframes = TotalFrames <br><br>Just use the  actual variables you have, substituting, say totalframes for numofframes etc. to match your original code.<br><br>Hope this helps :) <br><br></td></tr></table><br>
<a name="1026704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Midimaster</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are some errors in your code. Perhaps I did not understand right, ehat you plan to di, but if you want to paint a picture with more than one row...you HAVE to paint some tile in the second row<br><br><br>Why did you replace the 'FrameHeight*Rows' with 'FrameLength'?<br><pre class=code>newimage = CreateImage(framewidth*numofframes,framelength ??? ,numofframes)</pre>This will make the target image too small!<br><br><br>Why did you replace it in painting too with the "0"?<br><pre class=code>DrawImage imageframe,framewidth*imagenum1,0 ??? </pre>This will paint all pictures in the first row, because Y-Value is always zero!<br><br><br>How many tiles do you plan to add to the target image? <br><br>What means "no luck"? What was the error you could see? Did you already try to open the target image  with PAINT? Or did you have problem in opening it in an BB-Program? <br><br></td></tr></table><br>
<a name="1026736"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> The current code I'm using is straight out of the archives. I referenced it in the original post. It works fine making animstrip that is just one long row. Not having written it though I can't totally explain how it works. <br>I'm not a programmer, I just know enough to kind of string things together.<br><br>Thanks so much for the time you're taking to help me out. It's not a big deal since my program works as it is but I don't know why animstrips bigger than 35 or so frames(224x224) tend to lock up the computer.<br><br>Malice, the only knowns are the image size of 224x224. The totalframes are determined by how many frames the user draws or how many frames are in a loaded image. So the code needs to be dynamic more or less.<br>numofframes and totalframes ???? maybe I could just use one variable but when I load an animimage I divide it's length by 224 to determine totalframes. I think originally I wanted two different variables to keep different code fragments more seperate. <br><br></td></tr></table><br>
<a name="1026742"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
;example 

Graphics 500,500,0,2
CreateAnimStrip("Skully_SpaceShipA","Skully_AnimStrip",512,512,12,"png")
End



Function CreateAnimStrip(imagename$,savefile$,framewidth,frameheight,numberofframes,extension$="bmp")
;From parameters passed attempts to make an imagestrip, preferably square or near square
;the imagename$ must not contain the extension, the savefile must not contain the extension either,
;framewidth and frameheight are the width &amp; height of individual frames
;numberofframes is the total number of images to be loaded and placed as frames
;extension refers to the input image, you can load .png etc if need be, don't pass the "." symbol
;
Local numberofcolumns,numberofrows,widthindex,heightindex,index,image,newimage


numberofcolumns=Floor(Sqr(numberofframes)) 
numberofrows=Ceil(Float(numberofframes)/Float(numberofcolumns)) 

newimage=CreateImage(framewidth*numberofcolumns,frameheight*numberofrows) 
For index=1 To numberofframes
	image=LoadImage(imagename+index+"."+extension$)
	If image&lt;&gt;0 Then 
		CopyRect 0,0,framewidth,frameheight,widthindex*framewidth,heightindex*frameheight,ImageBuffer(image),ImageBuffer(newimage)
		FreeImage image
	EndIf 
	widthindex=widthindex+1
	If widthindex = numberofcolumns Then 
		widthindex=0
		heightindex=heightindex+1
	EndIf 
Next

SaveImage newimage,savefile+".bmp"
FreeImage newimage

Return 

End Function 
</pre><br><br>media here:<br><br><a href="http://home.swiftdsl.com.au/%7Etmalcolm/contentpack/spaceship/" target="_blank">http://home.swiftdsl.com.au/%7Etmalcolm/contentpack/spaceship/</a><br><br>You should be able to figure it out hopefully... <br><br></td></tr></table><br>
<a name="1026783"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Doggie</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Matty. I'll have to rework a lot of other code to accomodate the different function especially load animstrip but I should be able to get that going ok. Gives me something to work on today. Much appreciated.<br><br>DOG <br><br></td></tr></table><br>
<a name="1026809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Malice, the only knowns are the image size of 224x224. The totalframes are determined by how many frames the user draws or how many frames are in a loaded image. So the code needs to be dynamic more or less.<br>numofframes and totalframes ???? maybe I could just use one variable but when I load an animimage I divide it's length by 224 to determine totalframes. I think originally I wanted two different variables to keep different code fragments more seperate. <br> <br></div><br>That's fine, since the code I posted will work still. It simply fills as much space as it can without 'breaking'. Just remove the declarations of the globals that aren't relevant. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
