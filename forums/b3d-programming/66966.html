<!DOCTYPE html><html lang="en" ><head ><title >Vehicle Steering</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Vehicle Steering</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Vehicle Steering</a><br><br>
<a name="747773"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Guys...<br><br>I'm trying to do an AI for a Racing game, but, I'm using the ODE Physics for the vehicles... So, I need to do the vehicle steer to the next Waypoint (The steer# value are between -1 and 1 (-1 = Full left and 1 = Full Right)), How I do this? <br><br></td></tr></table><br>
<a name="747781"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> EmerGki,<br><br>This has been answered before and I am pretty certain there will be code in the archives to help you. Try a search for waypoints, there is also a demo in the 3d samples which came with B3D I think.<br><br>Anyway depending on what you are looking for, one way to achieve this would be to set up a bank and poke position data into it on a regular basis  as you do a test drive around the track.  Then read this data back and get your ai vehicle to search for the data from the bank and position the vehicle accordingly.<br><br>You could do several versions of this for inside track/outside track/ middle track. Then move between them as needed.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="747785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would certainly use more than one version for where the car is in relation to the waypoint, else it [the AI] could try cutting corners etc.<br><br>With the J-ODE demo there is a car driving demonstration. I'm assuming your car will attempt to drive around the track in one continuous direction, therefore, maybe it might work better to have a simulated 'best-driving-line' which the car tries to follow instead of just between waypoints?<br><br>This way, the steering will be modified exponentially according to how far off the best-line it is? <br><br></td></tr></table><br>
<a name="747789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm only just to know how many the AI need to Steer to point the car to the next waypoint... For the following waypoints (without steer) I have working a long time, but, now I need to do the vehicle wheels steer for each waypoint, I've no idea to do a 'best line' code... So, this is the motive what I'm using waypoints...<br><br>I need to steer only the wheels...<br><br>Thanks!!! ;) <br><br></td></tr></table><br>
<a name="747801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> EmerGki,<br><br>Aha !  I think I see what you mean, the vehicles already move towards the waypoints, and now you need the steering to rotate the wheels to face the direction they are going to steer in so it is more realistic?<br><br>You need Pythagoras I think.  You need the angle to turn the wheels the correct amount.<br><br>You know the position of the wheel you know the waypoint position, you know how far it is to the right angle (it is the same as the distance to the waypoint on that axis) - you need to calculate the angle on the hypotenuse (I think) and rotate your wheel to that angle. <br><br>Think of it in 2d for now:<br><br>You know the x and z position of the wheel<br>You know the x and z position of the waypoint<br>You know one angle is 90 degrees<br><br>x =   wheel x subtracted from the waypoint x<br>y =  wheel z subtracted from the waypoint z<br><br>radians=atan2(y,x)<br><br>rotation = radians * 180/Pi <br><br>(btw Pi = 3.14589)<br><br>Thats it in pseudo Flash code - I hope it is enough to get you onto the right track (sorry about the pun!).<br><br>IPete2. <br><br></td></tr></table><br>
<a name="747806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you IPete2, I'll Try this!!! =D . <br><br></td></tr></table><br>
<a name="747825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this should work.  What you want to do is only turn the wheels if the angle to the next waypoint is greater than some threshold ( 5 degree in this case ) .. otherwise you may be jittering when the angle is low.<br><br>Assuming you have a Chassis Mesh or front axle pivot and a Waypoint pivot you can use deltayaw to find the angle difference without using the above.  You should obviously limit the SteerDirection.<br><br>It'll take a lot of fiddling to get right though as I'm sure you'll find out.<br><br><pre class=code>
AngleToTurn# = Deltayaw( Chassis , WaypointPivot )
SteerDirection# = 0
If ABS( AngleToTurn ) &gt; 5 
     If ABS( AngleToTurn ) &gt; 1
         SteerDirection = SGN( AngleToTurn )
    else
         SteerDirection = AngleToTurn
    endif
endif
</pre><br><br>Stevie <br><br></td></tr></table><br>
<a name="747875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Stevie!!! Is Exactly this!!!! Thanks a lot!!! <br><br></td></tr></table><br>
<a name="747882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie,<br><br>Nice one dude - don't you just love this community sometimes...<br><br>IPete2. <br><br></td></tr></table><br>
<a name="747883"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, let's see if anyone will cough-up the code for a GTA 3 clone.<br><br>I beg the community - in the name of love - hand it over.<br><br>Media too - cars and stuff - buildings - people. <br><br></td></tr></table><br>
<a name="748491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, I misread your request!<br><br>Glad you got it sorted though!!!<br><br>And "puki" Sure thing. I'l start now and finish by 2103! Actually that's a lie, my blitz stuff is never finished.<br><br>Uunless you want a GTA clone text adventure? It says "Hello World" and if you press a key, it repeats itself!!!! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
