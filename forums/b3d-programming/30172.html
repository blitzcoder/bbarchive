<!DOCTYPE html><html lang="en" ><head ><title >b3d surface indexing...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >b3d surface indexing...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >b3d surface indexing...</a><br><br>
<a name="321178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PetBom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>I have a problem with the surface indexing of .b3d objects.<br><br>The problem is this:<br>Imagine a .b3d cube consisting of 6 surfaces. On each of this sides i want to paint a specific bitmap texture. (using PaintSurface)  I create a brush and paint the specific surfaces using an index (1-6) and that works fine. But now I also create another object in the scene (any object  light, camera, primitive, pivot, it dosent't matter). The result of creating this new object is that the surface indexes of the .b3d cube is all screwed up, i.e the surface that used to have index 4 now has index 6, index 1 is now index 5 and so on...<br><br>Has anyone else encountered this? And is there a way around it? (I guess "don't use .b3d files" is one answer but not the one I'm looking for.)<br><br>If anyone is interested I can send sample code highlighting the problem (I won't paste it here since you need the bitmaps to see the effect)<br><br>Anyone?<br><br>Oh yes! I running Blitz3D ver. 1.85<br><br>//PetBom <br><br></td></tr></table><br>
<a name="321202"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you load a cube .B3D with 6 surfaces? Couldn't you assign the textures in the modeler app? And if you need to chanche the textures at runtime, you can use the new functions to determine the texture path of a surface. Read this thread about this issue:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=29716" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=29716</a><br><br>btw. as far as I know blitz will not modify the order of the surfaces if the mesh is once loaded, it's only the case that it will be a diffrent order each time you load it, which was a problem until we had the new commands I mentioned (gettexturename etc., see link) <br><br></td></tr></table><br>
<a name="321214"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PetBom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do assign textures in the modelling app (I actually used Maplet to devise my little test) but I need to tweak them in runtime so I need to be able to access the surfaces. But thank's for the answer. Part of asking the question was to make sure that I'm not going insane :). And using your comment and the referered issue, I feel quite certain that I am, in fact, rather sane... You will get different indexes on each load of the object! (Actually you will get the same indexes from the same object on each load, unless you add any other objects. When poking about with the little test i wrote i also noticed that when you compile an .exe you get totally different indexes from the same object)<br><br>What I guess I'll do is (as you suggested) assign tempate textures in the modellling app that I will only use to these to identify the surfaces in runtaime and reasign them in code. Should do the trick.<br><br>Thanks!<br><br>Or mabye someone got another workaround? <br><br></td></tr></table><br>
<a name="321318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you would load the cube with LoadAnimMesh, all 6 sides would be children and they all could have their own entity name. But it's a bad idea to use AnimMesh only for the sake of this. Unfortunatly Surfaces do not have names (correct me if I'm wrong with this!!!), so when you load them with LoadMesh it isn't that simple. Maybe you could use a non-texture Material in the Modeler and identify the sides by their brush color, however, it's a bit tricky. <br><br></td></tr></table><br>
<a name="321600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PetBom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually solved it by using placehoder materials (32x32 bitmaps named surf01.bmp, surf02.bmb...) in the modeller. I load the .b3d file using LoadMesh(). I then loop through all surfaces using GetSurfaceBrush() and then TexttureName(GetBrushTexture()). The returned string (the path to the template texture) is then stripped of all but the numbers, which I can use as and 'index'. Tada! Problem solved. <br><br>The actual looping process takes a copuple of milliseconds. But since I only need to do this once, to create TextureBuffers()that I can tweak in realtime, it is not a problem<br><br>//PetBom <br><br></td></tr></table><br>
<a name="321860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> surface index assignment is random! <br><br></td></tr></table><br>
<a name="321936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> indeed, sinu, that's actually what we have been talking about.<br><br>BT PetBom - you need to free the Brushes CREATED with GetBrush() and the Textures CREATED with GetTexture() because these commands create a recourse-eating copy of the original. <br><br></td></tr></table><br>
<a name="322010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PetBom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk - Yep! I know. I free them right after use. I actually copy the texture created to an array of texturebuffers before freeing it. That way I can access each surface texture anytime I like. Note that I do not this looping and looking for textures more than once. I then use my array to tweak the textures<br><br>sinu - I sort of figured that out... :) (Se above)<br><br>//PetBom <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
