<!DOCTYPE html><html lang="en" ><head ><title >Camera control. I'm going bald...</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Camera control. I'm going bald...</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Camera control. I'm going bald...</a><br><br>
<a name="943361"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... With all the hair-pulling this conundrum's induced in me. =P<br><br>Okay, so, I'm trying to figure out 3rd person camera control. The player moves freely through the levels, and the camera rotates smoothly around the player. The current control system uses the 200/3/5/8 arrow keys.<br><br>Now, here's the deal: I've found a lot of movement &amp; camera tracking examples, but all of them use the same system: Up to move forward, while Left &amp; Right TURN the player entity left &amp; right. I need a standard, console-style, free-range control system, like you might get in Spyro, Dr. Muto, Mario64, all that. I found a Mario64 demo in the codearcs, but it still used that same L/R turn method.<br><br>Basically, I need the following system:<br><br>-Up makes the player move away from the camera<br><br>-Down makes the player turn 180 &amp; move towards the camera<br><br>-Left &amp; Right make the player turn 90/-90 &amp; move to the left or right screen edge, with the camera following<br><br>-WASD control the camera itself, allowing it to move around the player<br><br>Of course, no matter what way the player's facing, the camera is always moving to get behind the player. This means that, for instance, if you hold down Left, the player will travel to the left, but also in a curve, eventually ending up where they started from.<br><br>I've looked everywhere; the codearcs, forums, tutorial section, I've even done advanced searches. Nothing. Any ideas? I REALLY need some help, since I've now tried everything I can think of. Thanks! <br><br></td></tr></table><br>
<a name="943368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> did u try:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
while not keyhit(1)

if keydown(203)

if entityyaw(cam) &gt;= 45 and entityyaw(cam) &lt;= 90 then y# = y# + 1

else

if keydown(205)

if entityyaw(cam) &gt; 90 and entityyaw(cam) &lt;= 360 then y# = y# - 1

endif

endif

rotateentity cam, x#, y#, z#

updateworld
renderworld

flip

wend

end
</textarea><br><br>?<br><br>it doesnt work. but u get the idea :)<br><br>good luck on ur project! :)<br><br>~DS~ <br><br></td></tr></table><br>
<a name="943369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks DSW; yeah, I've tried that, I've tried pivot methods, I've tried <b>AlignToVector()</b>... I'm out of ideas by now. T_T<br><br>Thanks anyway! <br><br></td></tr></table><br>
<a name="943371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >stayne</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try creating a pivot and making the player chase the pivot with a bit of slack, same philosphy as a chasecam.  You'll have two chases going on...the player chasing the pivot and the camera chasing the player. <br><br></td></tr></table><br>
<a name="943376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tried that. My last method used two pivots, one for the camera, and one for its target position. The camera's target was a child of the player's mesh entity, and positioned at 0,5,-13 relative to it. The camera was always pointing at the player, while the camera's pivot was always pointing at, and moving towards, the camera's target position.<br><br>That method worked fine for following the player, but when it came to actually <i>turning</i> the player, things got crazy. It always made the camera come too close to the player, thus causing the player to turn too tightly... I dunno. I'm totally lost by now. <br><br></td></tr></table><br>
<a name="943379"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's the closest I got to achieving my goal:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">CountGfxModes()
CountGfxModes3D()


Graphics3D 640,480,16,1


;[Block] Tweening stuff
	Const TargetFrameRate = 60
	Global TwElapsed,TwPeriod,TwTicks,TwTime,TwTween#,UpdateLoops
	TwPeriod = 1000 / TargetFrameRate
	TwTime = MilliSecs() - TwPeriod
;[End block]
Global Wire


Const LevelColl = 1,SonicSoulColl = 2,SonicWheelColl = 3
Collisions SonicSoulColl,LevelColl,2,3
Collisions SonicWheelColl,LevelColl,2,3


Global Gravity#


Global Ground = LoadTerrain("gfx\heightmap_256.bmp")
ScaleEntity Ground,1000/TerrainSize(Ground),70,1000/TerrainSize(Ground)
TerrainDetail Ground,1000,True
TerrainShading Ground,True
PositionEntity Ground,-500,-100,-500

Global MossTex = LoadTexture("tex\terrain-1.jpg")
ScaleTexture MossTex,32,32
EntityTexture Ground,MossTex
EntityType Ground,LevelColl


Global SonicSoul = CreateSphere()
Global SoulTex = CreateTexture(64,64)
SetBuffer TextureBuffer(SoulTex)
Color 0,0,255
Rect 0,0,64,64
Color 255,0,0
Line 0,0,0,63
Line 15,0,15,63
Line 31,0,31,63
Line 47,0,47,63
Line 0,31,63,31
EntityTexture SonicSoul,SoulTex
RotateEntity SonicSoul,0,0,0
;ScaleEntity SonicSoul,2,2,2
;PositionEntity SonicSoul,0,2,0
EntityType SonicSoul,SonicSoulColl
;EntityAlpha SonicSoul,.5
;EntityFX SonicSoul,16;Flags: No backface culling
;FlipMesh SonicSoul

Global PrevYaw# = EntityYaw(SonicSoul)
Global wheels[4]

Local Cnt=1,X#,Z#
For Z=1 To -1 Step -2
	For X=-1 To 1 Step 2
		wheels[Cnt]=CreateSphere(8,SonicSoul)
		EntityAlpha wheels[Cnt],.5
		ScaleEntity wheels[Cnt],.5,.5,.5
		EntityRadius wheels[Cnt],.5
		PositionEntity wheels[Cnt],X,0,Z
		EntityType wheels[Cnt],SonicWheelColl
		Cnt=Cnt+1
	Next
Next


Global MainCameraTarget = CreatePivot(SonicSoul)
PositionEntity MainCameraTarget,0,5,-13
;PositionEntity MainCameraHinge,0,4,0
Global MainCameraPivot = CreatePivot();MainCameraHinge)
Global MainCamera = CreateCamera(MainCameraPivot)
;PositionEntity MainCamera,0,4,0
CameraViewport MainCamera,0,0,GraphicsWidth(),GraphicsHeight()
CameraClsColor MainCamera,0,128,255


Global MainLight = CreateLight()




SetBuffer BackBuffer()
SeedRnd MilliSecs()


While Not KeyHit(1)


Cls


If KeyHit(17) Then Wire = Not Wire
WireFrame Wire


Repeat
	TwElapsed = MilliSecs() - TwTime
Until TwElapsed


TwTicks = TwElapsed / TwPeriod
TwTween = Float(TwElapsed Mod TwPeriod) / Float(TwPeriod)


For UpdateLoops = 1 To TwTicks
	TwTime = TwTime + TwPeriod
	If UpdateLoops = TwTicks Then CaptureWorld
	CORE()
Next


RenderWorld TwTween


Color 255,255,255
Rect 0,0,100,100
Color 0,0,0
Text 0,0,EntityYaw(MainCamera)
Text 0,15,EntityYaw(SonicSoul)


Flip


Wend


End


Function CORE()


UpdateCamera()
UpdateSonicsSoul()


UpdateWorld


End Function


Function UpdateCamera()


;TurnEntity MainCameraHinge,(EntityPitch(SonicSoul) - EntityPitch(MainCameraHinge)) / 50,(EntityYaw(SonicSoul) - EntityYaw(MainCameraHinge)) / 50,(EntityRoll(SonicSoul) - EntityRoll(MainCameraHinge)) / 50
;PositionEntity MainCameraHinge,EntityX(SonicSoul),EntityY(SonicSoul),EntityZ(SonicSoul),True
;MoveEntity MainCameraHinge,0,(EntityY(SonicSoul) - EntityY(MainCameraHinge)) / 10,0
PointEntity MainCameraPivot,MainCameraTarget
;Keep camera in range
If EntityDistance(MainCameraPivot,MainCameraTarget) &lt; 5
	MoveEntity MainCameraPivot,0,0,EntityDistance(MainCameraPivot,MainCameraTarget) / 50
Else
	MoveEntity MainCameraPivot,0,0,EntityDistance(MainCameraPivot,MainCameraTarget) - 5
EndIf
PointEntity MainCamera,SonicSoul


End Function


Function UpdateSonicsSoul()


PrevYaw = EntityYaw(SonicSoul)


;Align Sonic's "soul" to his "wheels"... Oh my GAWD, that sounds so weird!!! @_@
Local ZX# = (EntityX(wheels[2],True) + EntityX(wheels[4],True)) / 2
ZX=ZX - (EntityX(wheels[1],True) + EntityX(wheels[3],True)) / 2
Local ZY# = (EntityY(wheels[2],True) + EntityY(wheels[4],True)) / 2
ZY=ZY - (EntityY(wheels[1],True) + EntityY(wheels[3],True))/2
Local ZZ# = (EntityZ(wheels[2],True) + EntityZ(wheels[4],True)) / 2
ZZ=ZZ - (EntityZ(wheels[1],True) + EntityZ(wheels[3],True)) / 2
AlignToVector SonicSoul,ZX,ZY,ZZ,1

ZX = (EntityX(wheels[1],True) + EntityX(wheels[2],True)) / 2
ZX = ZX - (EntityX(wheels[3],True) + EntityX(wheels[4],True)) / 2
ZY# = (EntityY(wheels[1],True) + EntityY(wheels[2],True)) / 2
ZY = ZY - (EntityY(wheels[3],True) + EntityY(wheels[4],True)) / 2
ZZ# = (EntityZ(wheels[1],True) + EntityZ(wheels[2],True)) / 2
ZZ = ZZ - (EntityZ(wheels[3],True) + EntityZ(wheels[4],True)) / 2
AlignToVector SonicSoul,ZX,ZY,ZZ,3

RotateEntity SonicSoul,EntityPitch(SonicSoul),PrevYaw,EntityRoll(SonicSoul)

;resposition wheels
Local Cnt = 1,Z#,X#
For Z = 1 To -1 Step -2
	For X = -1 To 1 Step 2
	;	PositionEntity wheels[cnt],0,0,0
	;	ResetEntity wheels[cnt]
		PositionEntity wheels[Cnt],X,-1,Z
		Cnt=Cnt+1
	Next
Next


If KeyDown(200);Up
	If KeyDown(203);Left
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) + 45,EntityRoll(SonicSoul)
	ElseIf KeyDown(205);Right
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) - 45,EntityRoll(SonicSoul)
	Else
		RotateEntity SonicSoul,EntityPitch(SonicSoul),PrevYaw,EntityRoll(SonicSoul)
	EndIf
	MoveEntity SonicSoul,0,0,.3
ElseIf KeyDown(208);Down
	If KeyDown(203);Left
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) + 135,EntityRoll(SonicSoul)
	ElseIf KeyDown(205);Right
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) - 135,EntityRoll(SonicSoul)
	Else
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) + 180,EntityRoll(SonicSoul)
	EndIf
	MoveEntity SonicSoul,0,0,.3
Else
	If KeyDown(203);Left
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) + 90,EntityRoll(SonicSoul)
		MoveEntity SonicSoul,0,0,.3
	ElseIf KeyDown(205);Right
		RotateEntity SonicSoul,EntityPitch(SonicSoul),EntityYaw(MainCamera,True) - 90,EntityRoll(SonicSoul)
		MoveEntity SonicSoul,0,0,.3
	Else
	EndIf
EndIf


If EntityCollided(SonicSoul,LevelColl)
	Gravity = 0
Else
	If Gravity &gt; -1 Then Gravity = Gravity - .005
	TranslateEntity SonicSoul,0,Gravity,0
EndIf


End Function</textarea><br>You can see for yourself how it won't work. I used the wheel code from Mark Sibly's "driver.bb" demo, in the B3D samples. The terrain heightmap and texture are from the same demo.<br><br><br>This demo from Stevie G is pretty close to what I need:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 640,480,16,1

Global LIGHT = CreateLight()
Global PLANE = CreatePlane() 
EntityColor PLANE, 200,100,100
texture = CreateTexture( 32, 32 )
SetBuffer TextureBuffer( texture )
For y = 0 To 1
	For x = 0 To 1
		Color 100, 150+25*( ( x+y) Mod 2 ) , 100
		Rect x*16,y*16,16,16,1
	Next
Next
SetBuffer BackBuffer()
ScaleTexture texture, 50,50
EntityTexture PLANE, texture
FreeTexture texture

Global CUBE = CreateCube() : FitMesh CUBE, -2,0,-2,4,10,4 
Tmp = CreateCube() : FitMesh Tmp, -1,7,2,2,2,2 : AddMesh Tmp, CUBE : FreeEntity Tmp
Global TARGET = CreatePivot()

Global CAMERApivot = CreatePivot()
Global CAMERA = CreateCamera( CAMERApivot )
PositionEntity CAMERA, 0,50,-50
PointEntity CAMERA , CAMERApivot

While Not KeyDown(1)

	PositionEntity CAMERApivot , EntityX( CUBE ) , 0, EntityZ( CUBE )
	TurnEntity CAMERApivot, 0 , KeyDown(31) - KeyDown(30) , 0
	
	;move relative to camera
	Mx# = KeyDown(205) - KeyDown(203)
	Mz# = KeyDown(200) - KeyDown(208 )

	If Mx &lt;&gt; 0 Or Mz &lt;&gt; 0
		;move relative to camera
		TFormVector Mx, 0, Mz , CAMERApivot , 0
		TranslateEntity CUBE, TFormedX(), 0, TFormedZ()
		;turn relative to movement
		PositionEntity TARGET, EntityX( CUBE ) + TFormedX() , 0, EntityZ( CUBE ) + TFormedZ()
		TurnEntity CUBE, 0 , DeltaYaw( CUBE, TARGET ) * .25, 0
	EndIf
	
	RenderWorld()
	Flip

Wend</textarea><br><br>The only problem here is that the camera stays statically in whatever position it's placed by the user. In other words, if you turn in this demo, the camera doesn't move back behind you as I need it to. <br><br></td></tr></table><br>
<a name="943423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> U mean like a Shadow of the Colossus cam? <br><br></td></tr></table><br>
<a name="943439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm... Maybe? Heh, I've never played <i>Shadow of the Colossus</i>. Some games that I know of that use this common (I think) camera system are:<br><br><i>-Jak &amp; Daxter, Jak II &amp; III<br>-Spyro 1, 2 &amp; 3<br>-Sly Cooper<br>-Dr. Muto</i><br><br>That's all I can think of off the top of my head right now, but I know there are others; a lot of free-roaming console games use it. <br><br></td></tr></table><br>
<a name="943451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GIB3D</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I changed the SuperCam function I found on blitch just a tiny bit...<br><br>It follow and turns like you would want it to.<br>For the first three parameters you need a<br>Camera<br>Pivot for the camera (not parented)<br>Point is the thing you follow, the entity<br><br><pre class=code>
Function Camera_Follow(camera,camera_pivot,point,camera_speed#,distance#,height#,xrot#,tilt#)
	Local cx#,cy#,cz#
	Local TempYaw# = EntityYaw(camera)
	
	TFormPoint 0,height#,-distance#,point,0
	cx = (TFormedX() - EntityX(camera)) * camera_speed#
	cy = (TFormedY() - EntityY(camera)) * camera_speed#
	cz = (TFormedZ() - EntityZ(camera)) * camera_speed#
	TranslateEntity camera_pivot,cx,cy,cz
	PositionEntity camera,EntityX(camera_pivot,1),EntityY(camera_pivot,1),EntityZ(camera_pivot,1),1
	TurnEntity camera,0,DeltaYaw(camera,point)*.3,0
	RotateEntity camera,xrot#,EntityYaw(camera),tilt#
End Function
</pre><br><br>and to move your Point/entity in the right direction after you turn it you can use this<br><pre class=code>
TFormVector 0,0,.1,Point,0	
X# = X + TFormedX()
Z# = Z + TFormedZ()

TranslateEntity Point,X,0,Z,1
</pre><br><br>I kind of know what the TFormVector does, it's just harder to explain it than it is to use it. You input how far you want to go, into the x,y,z parameters. The numbers that you get in the TFormedX,Y,Z commands, depends on which way you are facing. It splits the numbers between each TFormed command to make you move in a certain direction when you use TranslateEntity. <br><br></td></tr></table><br>
<a name="943465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks GIA... I'm not sure exactly where to put this in my program, but I'll try to figure it out &amp; give it a try! <br><br></td></tr></table><br>
<a name="943472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> you put it under<br><br>wend<br>end<br><br>and u call it<br><br>in while not keyhit(1)<br><br>graphics3d 800,600,0,2<br><br>piv=createpivot()<br><br>cam=createcamera(piv)<br><br>OR<br><br>cam=createcamera()<br><br>piv=createpivot(cam)<br><br>point=0.1 ;?<br><br>speed# = .1<br><br>distance# = .1;?<br><br>height# = .4<br><br>xrot# = entitypitch(cam)<br>tilt# = .1<br><br>while not keyhit(1)<br><br>Camera_Follow(cam,piv,point,camera_speed#,distance#,height#,xrot#,tilt#)<br><br>updateworld()<br>renderworld()<br><br>flip<br><br>wend<br><br>end<br><br>Function Camera_Follow(camera,camera_pivot,point,camera_speed#,distance#,height#,xrot#,tilt#)<br>	Local cx#,cy#,cz#<br>	Local TempYaw# = EntityYaw(camera)<br>	<br>	TFormPoint 0,height#,-distance#,point,0<br>	cx = (TFormedX() - EntityX(camera)) * camera_speed#<br>	cy = (TFormedY() - EntityY(camera)) * camera_speed#<br>	cz = (TFormedZ() - EntityZ(camera)) * camera_speed#<br>	TranslateEntity camera_pivot,cx,cy,cz<br>	PositionEntity camera,EntityX(camera_pivot,1),EntityY(camera_pivot,1),EntityZ(camera_pivot,1),1<br>	TurnEntity camera,0,DeltaYaw(camera,point)*.3,0<br>	RotateEntity camera,xrot#,EntityYaw(camera),tilt#<br>End Function<br><br>hope this helps :)<br><br>~DS~ <br><br></td></tr></table><br>
<a name="943527"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if this is what you meant, but I wrote this yesterday based on your explaination:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 800, 600, 0, 2
SetBuffer BackBuffer()

plane = CreatePlane() ;create ground
MoveEntity plane, 0, -5, 0
tex = CreateTexture(16,16,9)
Line 8,0,8,16
Line 0,8,16,8
CopyRect 0, 0, 16, 16, 0, 0, BackBuffer(), TextureBuffer(tex)
EntityTexture plane, tex

org = CreateSphere() ;create scenery
HideEntity org
For i = 0 To 100
	nw = CopyEntity(org)
	c = Rand(80, 160)
	s# = Rnd(0.5, 1.5)
	EntityColor nw, c, c, c
	ScaleEntity nw, s, s, s
	PositionEntity nw, Rand(-100, 100), Rand(-100, 100), Rand(-100, 100)
Next
	
;create main pivot
main = CreatePivot()

;base pivots for camera rotation
cambase = CreatePivot(main) ;to maintain camera in same direction as cone
campiv = CreatePivot(cambase) ;to be able to turn camera
;setup camera
cam = CreateCamera(campiv)
MoveEntity cam, 0, 5, -10
PointEntity cam, main

;create red dot (should be pivot)
aim = CreateSphere(8, main)
ScaleEntity aim, 0.1, 0.1, 0.1
EntityColor aim, 255, 0, 0
;place it in front of main
PositionEntity aim, 0, 0, 1

;create cone, and attach to main
cone = CreateCone(8, 1, main)
RotateMesh cone, 90, 0, 0

;create chase point
chase = CreatePivot(cone)
MoveEntity chase, 0, 0, 5

Repeat

	;wasd = turn/move camera
	If KeyDown(17) Then MoveEntity cam, 0, 0.1, 0: PointEntity cam, main
	If KeyDown(31) Then MoveEntity cam, 0, -0.1, 0: PointEntity cam, main
	If KeyDown(30) Then TurnEntity campiv, 0, -1, 0 
	If KeyDown(32) Then TurnEntity campiv, 0, 1, 0

	;arrow keys = place 'aim'
	If KeyHit(203) Then rx = -1 rz = 0
	If KeyHit(205) Then rx = 1 rz = 0
	If KeyHit(200) Then rx = 0 rz = 1
	If KeyHit(208) Then rx = 0 rz = -1
	
	;arrow keys = move object
	If KeyDown(203) Or KeyDown(205) Or KeyDown(200) Or KeyDown(208) Then
		TranslateEntity main, rx*0.1, 0, rz*0.1
	End If
	
	;place aim and gradually pointentity cone to aim
	PositionEntity aim, rx, 0, rz
	dpt# = DeltaPitch(cone, aim) * 0.1
	dyw# = DeltaYaw(cone, aim) * 0.1
	TurnEntity cone, dpt, dyw, 0
	
	;keep camera in position relative to object
	TurnEntity cambase, 0, DeltaYaw(cambase, chase) * 0.05, 0

	RenderWorld
	Flip
	
Until KeyHit(1)

End</textarea> <br><br></td></tr></table><br>
<a name="943546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Geez, Warner, you actually wrote a whole program for me?! Thank you SO MUCH!<br><br>Anyway, that's <i>almost</i> it, except for one thing: the cone doesn't <i>keep</i> turning. In other words, when you hit, for instance, Left, the cone turns to the left. But if you keep holding Left, the cone doesn't keep turning; instead, it keeps moving in the same direction, until the camera is behind it, making it look like it's moving forward (which should only happen when Up is pressed.) <br><br></td></tr></table><br>
<a name="943602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know what you want. It's also throughout various N64 games. I guess it just needs a bit more of a technical description: you want the player to move left or right but <b>in relation to the camera's rotation</b>. Front or Back will always be towards\away from camera (not just positive Z, negative Z), and Left and Right will always be related to the camera's Local X axis, and not only will he turn in that direction but also walk in it.<br>So, for knowing the direction you'd have to go when the user presses Left, you'd use something like...<br><pre class=code>
Speed#=2.0
TFormVector -Speed,0,0,Camera,0 ;We are using "-Speed" because the user is pressing LEFT.

MoveEntity Player,TFormedX(),TFormedY(),TFormedZ()


RotateEntity Player,EntityPitch(Player,True),EntityYaw(Camera,True)-90,EntityRoll(Player,True) 

;The above should turn the player in the left direction in relation to the camera, albeit a little 
;snappy. You'd need to give it a smoothing factor for it to be smoothier. 
;(something like (EntityYaw(Camera,True)-EntityYaw(Player,True)*0.1-90)</pre><br>In this system, if the player keeps the Left key pressed down, for example, the character would constantly be walking in a complete circle counter-clockwise. The camera would be sitting in the middle of this circle [not that it is relevant, but the radius of this circle would be the distance of the player to the camera]. <br><br></td></tr></table><br>
<a name="943614"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmmm... *strokes chin where beard would be*<br><br>This might be just what I'm looking for, Kryzon; I'll try this ASAP! Thanks!!! <br><br></td></tr></table><br>
<a name="943636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great! I'm just not sure about the RotateEntity part, you'll have to work a bit there.<br>But for the rest, i'm positive it's the same effect as in console games: he's walking using the camera as reference, as "origin".<br><br>You'll also have to incorporate one of those camera schemes that are around the code archives (also in the Castle sample). <br><br>Also, you'll need different TFormVector checks for each of the KeyDowns (Up,Down,Left,Right - like, for down, for example, you'd use <b>TFormVector 0,0,-Speed,Camera,0</b>, going on the negative Z using the camera as reference), as I only showed how you'd do it using the Left key. <br><br>(I remember playing some N64 games, and when you were moving your character forward and then turned the camera around him using the C-Buttons, for example, he'd go forward but on another direction - you could even control his direction just by moving him forward constantly and then turning the camera to where you wanted him to go)<br><br>Good luck, and make sure to inform us of your success! <br><br></td></tr></table><br>
<a name="943638"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, believe me, when this game's done, everyone here'll be the first to know! It's not a <i>marketable</i> game, just a fan work, but still... ^_^ <br><br></td></tr></table><br>
<a name="943705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> can u release source? ^^ that would be awesome! :) <br><br></td></tr></table><br>
<a name="943743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd like an example of this camera code when its fixed. my camera is freakin out again. *sigh* <br><br></td></tr></table><br>
<a name="943748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I'll try &amp; cobble together a more usable version; right now it's customized specifically for me. <br><br></td></tr></table><br>
<a name="943754"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >grindalf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> heres what im useing<br><br><pre class=code>
	;--camera physics--
	PositionEntity cam_piv,EntityX(player),EntityY(player),EntityZ(player)
	PositionEntity cam,EntityX(cam_piv),EntityY(cam_piv),EntityZ(cam_piv)
	RotateEntity cam,0,EntityYaw(cam_piv),0
	MoveEntity cam,0,5,-20

	tmp_yaw=EntityYaw(cam_piv)
	tmp_yaw2=EntityYaw(player)
	If tmp_yaw&lt;0 Then tmp_yaw=tmp_yaw+360
	If tmp_yaw2&lt;0 Then tmp_yaw2=tmp_yaw2+360

	If cam_active=True Then
		If tmp_yaw2&lt;tmp_yaw-180 Then
			TurnEntity cam_piv,0,1,0
		ElseIf tmp_yaw2&gt;tmp_yaw+180 Then
			TurnEntity cam_piv,0,-1,0
		ElseIf tmp_yaw2&gt;tmp_yaw Then
			TurnEntity cam_piv,0,1,0
		ElseIf tmp_yaw2&lt;tmp_yaw Then
			TurnEntity cam_piv,0,-1,0
		End If
	End If
</pre><br><br><br>it needs a little work but it works how you want apart from the player does not turn smoothly <br><br></td></tr></table><br>
<a name="944868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did u get the code yet? <br><br></td></tr></table><br>
<a name="944902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm working on it, just hold tight... AAAGH, so much to DOOO... O_o <br><br></td></tr></table><br>
<a name="944904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Lol, dont worry. I know how u feel. I have loads to do too. and very little time<br><br>~DS~ <br><br></td></tr></table><br>
<a name="945130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here ya go buddy! I put in as many comments as I could to make it well-documented.<br><br>You said you learn best by hands-on experience with full code, so this is a working demo that you can run as soon as you download it. The important, reusable parts in this code are the part that creates the main camera &amp; its pivot, and the two functions, <b>UpdateCamera()</b> and <b>UpdatePlayer()</b>.<br><br>It's not perfect by any means... You'll notice this particularly when you press &amp; hold Down, as the player will move toward the camera, but at a slight angle, and vibrating. I'm still not sure why. Anyway, hope this helps!<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 800,600,0,1


SeedRnd MilliSecs()


Global Player = CreateSphere();Placeholder mesh for the player
Global Speed#


Global PlayerTex = CreateTexture(64,64);The player's texture
;Just some basic graphics so you can see which way the player's
;facing. The front is blue, the back is black, plus some red lines
;to show the axes.
SetBuffer TextureBuffer(PlayerTex)
Color 0,0,255
Rect 0,0,64,64
Color 0,0,0
Rect 16,0,32,64
Color 255,0,0
Line 0,0,0,63
Line 15,0,15,63
Line 31,0,31,63
Line 47,0,47,63
Line 0,31,63,31
EntityTexture Player,PlayerTex


;!IMPORTANT - The main camera &amp; its pivot MUST be created like this,
;!or it won't work.
;-------------------------------------------------------------------

;The main camera's pivot. This does all the movement &amp; turning, NOT
;the main camera; the camera itself stays in place, relative to this
;pivot.
;This must be a child of the Player's main entity. REMEMBER that
;this means that the pivot's position &amp; rotation is relative to the
;player, NOT to the 3D world.
Global MainCameraPivot = CreatePivot(Player)

;This isn't necessary, it's just to give a nice pan-rotate effect
;when the program starts.
RotateEntity MainCameraPivot,0,180,0

;-------------------------------------------------------------------

;The main camera itself, done for the primary rendering of the game.
;This must be a child of MainCameraPivot.
Global MainCamera = CreateCamera(MainCameraPivot)

CameraViewport MainCamera,0,0,GraphicsWidth(),GraphicsHeight()

;You can change these coordinates to change the angle &amp; distance of
;the main camera. REMEMBER, the coordinates are relative to
;MainCameraPivot, NOT to the 3D world!
PositionEntity MainCamera,0,5,-13

CameraClsColor MainCamera,0,0,255;Nicer than plain ol' black. ;)

;-------------------------------------------------------------------


Global Light = CreateLight()


Global Ground = CreatePlane();Self-explanatory
PositionEntity Ground,0,-1,0


Global GroundTex = CreateTexture(64,64)
;A grid so you can see the orientation of the ground
SetBuffer TextureBuffer(GroundTex)
Color 0,128,255
Rect 0,0,64,64,0
ScaleTexture GroundTex,2,2
EntityTexture Ground,GroundTex


;... And now for something completely different


;Some random scenery to give you an idea of your speed &amp; such
For i = 0 To 100
	Local CurrentBall = CreateSphere()
	PositionEntity CurrentBall,Rand(-100,100),Rand(3,10),Rand(-100,100)
Next


SetBuffer BackBuffer()


While Not KeyHit(1)


Cls


UpdateCamera
UpdatePlayer


UpdateWorld
RenderWorld


Flip


Wend


End


Function UpdateCamera()


;If A or D are pressed, then the player is moving the camera
;manually, so the main camera's pivot (NOT the camera itself) turns
;right or left, respectively. The camera, being a child of its
;pivot, follows automatically.
;If neither A or D are pressed, however, then the camera's pivot
;attempts to re-center itself behind the player by moving its Yaw
;back to 0.
If KeyDown(30);A
	TurnEntity MainCameraPivot,0,-2,0
ElseIf KeyDown(32);D
	TurnEntity MainCameraPivot,0,2,0
Else;Re-center the camera, but smoothly

	;Here's the deal with the "If Not KeyDown()" thing. When the player
	;presses Down, the player's entity must move straight towards the
	;camera. If, at this point, the camera's pivot still tried to re-
	;center itself, the player would turn while moving, which isn't
	;supposed to happen. The If statement is here so that, if Down is
	;the only key pressed, the camera's pivot doesn't try to re-center.
	If Not KeyDown(208)

		;If the pivot's Yaw is more than 5 degrees above or below 0, it
		;turns by 3 degrees. If it's closer to 0 than 5 degrees, though,
		;it turns by a tenth of the remaining degrees, giving a smooth
		;"deceleration" effect.
		If EntityYaw(MainCameraPivot) &gt; 5
			TurnEntity MainCameraPivot,0,-3,0
		ElseIf EntityYaw(MainCameraPivot) &lt; -5
			TurnEntity MainCameraPivot,0,3,0
		Else
			TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
		EndIf
	Else
		If KeyDown(203) Or KeyDown(205)
			If EntityYaw(MainCameraPivot) &gt; 5
				TurnEntity MainCameraPivot,0,-3,0
			ElseIf EntityYaw(MainCameraPivot) &lt; -5
				TurnEntity MainCameraPivot,0,3,0
			Else
				TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
			EndIf
		EndIf
	EndIf
EndIf


PointEntity MainCamera,Player;Self-explanatory


End Function


Function UpdatePlayer()


;Harder to explain. It was a pain to come up with in the first place,
;and I've forgotten most of the theory behind it by now, not that I
;could've really put it into words beforehand; it's all in my head.
;Suffice it to say, IT WORKS. :)
If KeyDown(200);Up
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(-45 - EntityYaw(MainCameraPivot)) / 10,0
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(45 - EntityYaw(MainCameraPivot)) / 10,0
	EndIf
	If Speed &lt; .5 Then Speed = Speed + .005
ElseIf KeyDown(208);Down
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	Else
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 175
			TurnEntity Player,0,10,0
			TurnEntity MainCameraPivot,0,-10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 175
			TurnEntity Player,0,-10,0
			TurnEntity MainCameraPivot,0,10,0
		Else
			RotateEntity Player,EntityPitch(Player),EntityYaw(MainCameraPivot,True) - 180,EntityRoll(Player)
			RotateEntity MainCameraPivot,0,180,0
		EndIf
		If Speed &lt; .5 Then Speed = Speed + .005
	EndIf
Else
	If KeyDown(203);Left
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205);Right
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	Else
		;Decelerate if no keys are pressed
		If Speed &gt; 0 Then Speed = Speed * 0.9
	EndIf
EndIf


MoveEntity Player,0,0,Speed



End Function</textarea> <br><br></td></tr></table><br>
<a name="945135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks mate! :)<br><br>In return, I added jump<br><br>and gravity + collision<br><br><pre class=code>Graphics3D 800,600,0,2

Collisions 1,2,2,3

Global Gravity#,Jump#

SeedRnd MilliSecs()


Global Player = CreateSphere();Placeholder mesh for the player
PositionEntity Player,0,1,0
EntityRadius Player,.1
EntityType Player,1
Global Speed#


Global PlayerTex = CreateTexture(64,64);The player's texture
;Just some basic graphics so you can see which way the player's
;facing. The front is blue, the back is black, plus some red lines
;to show the axes.
SetBuffer TextureBuffer(PlayerTex)
Color 0,0,255
Rect 0,0,64,64
Color 0,0,0
Rect 16,0,32,64
Color 255,0,0
Line 0,0,0,63
Line 15,0,15,63
Line 31,0,31,63
Line 47,0,47,63
Line 0,31,63,31
EntityTexture Player,PlayerTex


;!IMPORTANT - The main camera &amp; its pivot MUST be created like this,
;!or it won't work.
;-------------------------------------------------------------------

;The main camera's pivot. This does all the movement &amp; turning, NOT
;the main camera; the camera itself stays in place, relative to this
;pivot.
;This must be a child of the Player's main entity. REMEMBER that
;this means that the pivot's position &amp; rotation is relative to the
;player, NOT to the 3D world.
Global MainCameraPivot = CreatePivot(Player)

;This isn't necessary, it's just to give a nice pan-rotate effect
;when the program starts.
RotateEntity MainCameraPivot,0,180,0

;-------------------------------------------------------------------

;The main camera itself, done for the primary rendering of the game.
;This must be a child of MainCameraPivot.
Global MainCamera = CreateCamera(MainCameraPivot)

CameraViewport MainCamera,0,0,GraphicsWidth(),GraphicsHeight()

;You can change these coordinates to change the angle &amp; distance of
;the main camera. REMEMBER, the coordinates are relative to
;MainCameraPivot, NOT to the 3D world!
PositionEntity MainCamera,0,5,-13

CameraClsColor MainCamera,0,0,255;Nicer than plain ol' black. ;)

;-------------------------------------------------------------------


Global Light = CreateLight()


Global Ground = CreatePlane();Self-explanatory
EntityRadius Ground,.1

EntityType Ground,2

PositionEntity Ground,0,-1,0


Global GroundTex = CreateTexture(64,64)
;A grid so you can see the orientation of the ground
SetBuffer TextureBuffer(GroundTex)
Color 0,128,255
Rect 0,0,64,64,0
ScaleTexture GroundTex,2,2
EntityTexture Ground,GroundTex


;... And now for something completely different


;Some random scenery to give you an idea of your speed &amp; such
For i = 0 To 100
	Local CurrentBall = CreateSphere()
	PositionEntity CurrentBall,Rand(-100,100),Rand(3,10),Rand(-100,100)
Next


SetBuffer BackBuffer()


While Not KeyHit(1)

If EntityCollided( Player, 2 );Player is on the ground, so reset gravity.

    Gravity = 0

    ;Remember, it's no good letting the player jump in midair - they have to be able to jump
    ;only when they're on the ground.
    If KeyHit(57);Spacebar

        Jump = 2;Makes the player jump by moving upwards 2 units per update.

    EndIf

Else;Player is in the air, so start the fall.

    ;2 units is a nice top speed for gravity. Remember, you can change .04 as needed to change the
    ;speed of acceleration. Also remember, gravity moves you DOWN, so it has to be a negative
    ;number.
    If Gravity &gt; -2 Then Gravity = Gravity - .04

EndIf


;This decreases the power of the jump, allowing the player to fall back down.
;You can change .04 to other values to make the jumps longer or shorter.
If Jump &gt; 0 Then Jump = Jump - .04


;Finally, we move the player up and down according to the power of the jump and the power of gravity.
TranslateEntity Player, 0, Jump + Gravity, 0

Cls


UpdateCamera
UpdatePlayer


UpdateWorld
RenderWorld


Flip


Wend


End


Function UpdateCamera()


;If A or D are pressed, then the player is moving the camera
;manually, so the main camera's pivot (NOT the camera itself) turns
;right or left, respectively. The camera, being a child of its
;pivot, follows automatically.
;If neither A or D are pressed, however, then the camera's pivot
;attempts to re-center itself behind the player by moving its Yaw
;back to 0.
If KeyDown(30);A
	TurnEntity MainCameraPivot,0,-2,0
ElseIf KeyDown(32);D
	TurnEntity MainCameraPivot,0,2,0
Else;Re-center the camera, but smoothly

	;Here's the deal with the "If Not KeyDown()" thing. When the player
	;presses Down, the player's entity must move straight towards the
	;camera. If, at this point, the camera's pivot still tried to re-
	;center itself, the player would turn while moving, which isn't
	;supposed to happen. The If statement is here so that, if Down is
	;the only key pressed, the camera's pivot doesn't try to re-center.
	If Not KeyDown(208)

		;If the pivot's Yaw is more than 5 degrees above or below 0, it
		;turns by 3 degrees. If it's closer to 0 than 5 degrees, though,
		;it turns by a tenth of the remaining degrees, giving a smooth
		;"deceleration" effect.
		If EntityYaw(MainCameraPivot) &gt; 5
			TurnEntity MainCameraPivot,0,-3,0
		ElseIf EntityYaw(MainCameraPivot) &lt; -5
			TurnEntity MainCameraPivot,0,3,0
		Else
			TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
		EndIf
	Else
		If KeyDown(203) Or KeyDown(205)
			If EntityYaw(MainCameraPivot) &gt; 5
				TurnEntity MainCameraPivot,0,-3,0
			ElseIf EntityYaw(MainCameraPivot) &lt; -5
				TurnEntity MainCameraPivot,0,3,0
			Else
				TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
			EndIf
		EndIf
	EndIf
EndIf


PointEntity MainCamera,Player;Self-explanatory


End Function


Function UpdatePlayer()


;Harder to explain. It was a pain to come up with in the first place,
;and I've forgotten most of the theory behind it by now, not that I
;could've really put it into words beforehand; it's all in my head.
;Suffice it to say, IT WORKS. :)
If KeyDown(200);Up
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(-45 - EntityYaw(MainCameraPivot)) / 10,0
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(45 - EntityYaw(MainCameraPivot)) / 10,0
	EndIf
	If Speed &lt; .5 Then Speed = Speed + .005
ElseIf KeyDown(208);Down
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	Else
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 175
			TurnEntity Player,0,10,0
			TurnEntity MainCameraPivot,0,-10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 175
			TurnEntity Player,0,-10,0
			TurnEntity MainCameraPivot,0,10,0
		Else
			RotateEntity Player,EntityPitch(Player),EntityYaw(MainCameraPivot,True) - 180,EntityRoll(Player)
			RotateEntity MainCameraPivot,0,180,0
		EndIf
		If Speed &lt; .5 Then Speed = Speed + .005
	EndIf
Else
	If KeyDown(203);Left
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205);Right
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	Else
		;Decelerate if no keys are pressed
		If Speed &gt; 0 Then Speed = Speed * 0.9
	EndIf
EndIf


MoveEntity Player,0,0,Speed



End Function</pre><br><br>If anyone can help perfect the camera, as well as jump so when you press jump, you can ONLY press it one time, otherwise, the player wont jump, as well as the player sticking half way under ground when on ground screw up, please feel free! :)<br><br>Thanks!<br><br>~DS~ <br><br></td></tr></table><br>
<a name="945137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> ...as well as the player sticking half way under ground when on ground screw up, please feel free! :) <br></div><br><br>It's 'cuz your use of EntityRadius is far too small! The player's sphere has a radius of 1, but you gave it a collision radius of 0.1. Just remove the EntityRadius line &amp; it'll work fine.<br><br>Oh, one thing DSW, just as a favor to the forums... When you've got a big(ish) piece of code like this... Basically anything over about 2-4KB... Don't use the CODE tag, use CODEBOX instead; this really inflated the size of the thread.<br><br>Anyway, glad my code helps! <br><br></td></tr></table><br>
<a name="945138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> o woops. i didnt realize that! &gt;&lt;<br><br>Sorry guys! :P<br><br>As for perfecting camera,<br><br>if anyone has any ideas then PLEASE do contribute to the community! :)<br><br>ANY help is GREATLY appreciated!<br><br>Thanks!<br><br>~DS~ <br><br></td></tr></table><br>
<a name="945140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> also, u have to have entityradius=.9<br><br>cuz w/o it, ur player cant move forward at all.<br><br>Thanks!<br><br>~DS~ <br><br></td></tr></table><br>
<a name="945156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's odd... What version of B3D are you using, DSW? I tried it on V1.100, without the EntityRadius line, and it worked fine... <br><br></td></tr></table><br>
<a name="945162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try jumping.<br><br>PS. I use the highest version of blitz <br><br></td></tr></table><br>
<a name="945176"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warning, glitch in jump code.<br><br>If you press jump then in the middle jumping press jump again it will make it jump twice. its only supposed to jump once. <br><br></td></tr></table><br>
<a name="949538"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did anyone figure out how to fix the glitch? <br><br></td></tr></table><br>
<a name="949546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's a logic problem.<br><pre class=code>
If KeyHit(57) And Jump = False Then
   Jump = True
   [...]
Endif 
</pre> <br><br></td></tr></table><br>
<a name="954409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nrasool</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to add onto this thread, I adapted this code for using a character made by Psionic (drawf), plus I had added the pitch camera control, so you can look above and below around the character<br><br>May be useful to some people..... maybe ;-)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;Player Control Example

Graphics3D 640,480,0,2
SeedRnd MilliSecs()
;filename$="hero/hero.b3d"
Global Player=LoadAnimMesh("dwarf1.b3d") : If Not Player Then RuntimeError "Error Loading Hero Model" ; Load hero b3d file
ScaleEntity Player,0.25,0.25,0.25
DebugLog "Setting up Hero animation"
ExtractAnimSeq Player,2,14 	;1
ExtractAnimSeq Player,16,26	;2
ExtractAnimSeq Player,28,40	;3
ExtractAnimSeq Player,42,54	;4
ExtractAnimSeq Player,56,59	;5
ExtractAnimSeq Player,60,69	;6
ExtractAnimSeq Player,70,74	;7
ExtractAnimSeq Player,75,88	;8
ExtractAnimSeq Player,90,110	;9
ExtractAnimSeq Player,112,126	;10
ExtractAnimSeq Player,128,142	;11
ExtractAnimSeq Player,144,160	;12
ExtractAnimSeq Player,162,180	;13
ExtractAnimSeq Player,182,192	;14
ExtractAnimSeq Player,194,210	;15
ExtractAnimSeq Player,212,227	;16
ExtractAnimSeq Player,230,251	;17
ExtractAnimSeq Player,253,272	;18
ExtractAnimSeq Player,274,290	;19
ExtractAnimSeq Player,292,325	;19
ExtractAnimSeq Player,327,360	;19

;Global hero_neck=FindChild(Player, "neck")
Global Speed#
Global MainCameraPivot = CreatePivot(Player)
Global PS_player_action
Global PS_player_walking
Global PS_old_player_action=99999 ;
;This isn't necessary, it's just to give a nice pan-rotate effect
;when the program starts.
RotateEntity MainCameraPivot,0,180,0
;-------------------------------------------------------------------
;The main camera itself, done for the primary rendering of the game.
;This must be a child of MainCameraPivot.
Global MainCamera = CreateCamera(MainCameraPivot)
CameraViewport MainCamera,0,0,GraphicsWidth(),GraphicsHeight()

;You can change these coordinates to change the angle &amp; distance of
;the main camera. REMEMBER, the coordinates are relative to
;MainCameraPivot, NOT to the 3D world!
PositionEntity MainCamera,0,55,-75
CameraClsColor MainCamera,0,0,255;Nicer than plain ol' black. ;)
;-------------------------------------------------------------------

Global Light = CreateLight()

Global Ground = CreatePlane();Self-explanatory
PositionEntity Ground,0,-1,0
Global GroundTex = CreateTexture(64,64)
;A grid so you can see the orientation of the ground
SetBuffer TextureBuffer(GroundTex)
Color 0,128,255
Rect 0,0,164,64,0
ScaleTexture GroundTex,2,2
EntityTexture Ground,GroundTex

SetBuffer BackBuffer()
Color 255,255,255


While Not KeyHit(1)
	Cls
	
	;PS_player_action = 0
	UpdateCamera
	UpdatePlayer
	
	UpdateWorld
	RenderWorld
	
	
	Text 1,10,"Player Action: " + PS_player_action
	Text 1,21,"Player Walking: " + PS_player_walking

	
	Flip
	Wend
End


Function UpdateCamera()
	;If A or D are pressed, then the player is moving the camera
	;manually, so the main camera's pivot (NOT the camera itself) turns
	;right or left, respectively. The camera, being a child of its
	;pivot, follows automatically.
	;If neither A or D are pressed, however, then the camera's pivot
	;attempts to re-center itself behind the player by moving its Yaw
	;back to 0.
	If KeyDown(17);W
		TurnEntity MainCameraPivot,2,0,0
	ElseIf KeyDown(31);S
		TurnEntity MainCameraPivot,-2,0,0
	ElseIf KeyDown(30);A
		TurnEntity MainCameraPivot,0,-2,0
	ElseIf KeyDown(32);D
		TurnEntity MainCameraPivot,0,2,0
	Else ;Re-center the camera, but smoothly

		;Here's the deal with the "If Not KeyDown()" thing. When the player
		;presses Down, the player's entity must move straight towards the
		;camera. If, at this point, the camera's pivot still tried to re-
		;center itself, the player would turn while moving, which isn't
		;supposed to happen. The If statement is here so that, if Down is
		;the only key pressed, the camera's pivot doesn't try to re-center.
		If Not KeyDown(208)

			;If the pivot's Yaw is more than 5 degrees above or below 0, it
			;turns by 3 degrees. If it's closer to 0 than 5 degrees, though,
			;it turns by a tenth of the remaining degrees, giving a smooth
			;"deceleration" effect.
			If EntityYaw(MainCameraPivot) &gt; 5
				TurnEntity MainCameraPivot,0,-3,0
			ElseIf EntityYaw(MainCameraPivot) &lt; -5
				TurnEntity MainCameraPivot,0,3,0
			Else
				TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
			EndIf
		
			;If the pivot's Pitch is more than 5 degrees above or below 0, it
			;turns by 3 degrees. If it's closer to 0 than 5 degrees, though,
			;it turns by a tenth of the remaining degrees, giving a smooth
			;"deceleration" effect.
			; Added by Nadeem Rasool for complete control of Camera :-)
			If EntityPitch(MainCameraPivot) &gt; 5
				TurnEntity MainCameraPivot,-3,0,0
			ElseIf EntityPitch(MainCameraPivot) &lt; -5
				TurnEntity MainCameraPivot,3,0,0
			Else
				TurnEntity MainCameraPivot,-EntityPitch(MainCameraPivot) / 10,0,0
			EndIf
		Else
			If KeyDown(203) Or KeyDown(205)
				If EntityYaw(MainCameraPivot) &gt; 5
					TurnEntity MainCameraPivot,0,-3,0
				ElseIf EntityYaw(MainCameraPivot) &lt; -5
					TurnEntity MainCameraPivot,0,3,0
				Else
					TurnEntity MainCameraPivot,0,-EntityYaw(MainCameraPivot) / 10,0
				EndIf
			EndIf
		EndIf
	EndIf

	PointEntity MainCamera,Player;Self-explanatory
End Function


Function UpdatePlayer()
;Harder to explain. It was a pain to come up with in the first place,
;and I've forgotten most of the theory behind it by now, not that I
;could've really put it into words beforehand; it's all in my head.
;Suffice it to say, IT WORKS. :)

PS_player_action=0

If KeyDown(200);Up
	PS_player_action=1
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(-45 - EntityYaw(MainCameraPivot)) / 10,0
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,5,0
		If EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 45 Then TurnEntity Player,0,-5,0
		TurnEntity MainCameraPivot,0,(45 - EntityYaw(MainCameraPivot)) / 10,0
	EndIf
	If Speed &lt; .5 Then Speed = Speed + .005
	
ElseIf KeyDown(208);Down
	If KeyDown(203)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205)
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 130
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 140
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 135) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(135 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	Else
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 175
			TurnEntity Player,0,10,0
			TurnEntity MainCameraPivot,0,-10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 175
			TurnEntity Player,0,-10,0
			TurnEntity MainCameraPivot,0,10,0
		Else
			RotateEntity Player,EntityPitch(Player),EntityYaw(MainCameraPivot,True) - 180,EntityRoll(Player)
			RotateEntity MainCameraPivot,0,180,0
		EndIf
		If Speed &lt; .5 Then Speed = Speed + .005
	EndIf
Else
	If KeyDown(203);Left
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) + 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) + 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) + 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(-90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
	ElseIf KeyDown(205);Right
		If EntityYaw(Player) &lt; EntityYaw(MainCameraPivot,True) - 85
			TurnEntity Player,0,10,0
		ElseIf EntityYaw(Player) &gt; EntityYaw(MainCameraPivot,True) - 95
			TurnEntity Player,0,-10,0
		Else
			TurnEntity Player,0,(EntityYaw(MainCameraPivot,True) - 90) - EntityYaw(Player),0
		EndIf
		TurnEntity MainCameraPivot,0,(90 - EntityYaw(MainCameraPivot)) / 4,0
		If Speed &lt; .5 Then Speed = Speed + .005
			Else
			;Decelerate if no keys are pressed
			If Speed &gt; 0 Then Speed = Speed * 0.9 
		EndIf		
EndIf


MoveEntity Player,0,0,Speed
updateanims()
End Function

Function updateanims()

	;player_action stores 'what the player is doing' whether it's
	;running,walking,falling over, dying etc. - you only need to call
	;looped animations once, so we just check for changes in the
	;player_action variable (with the old_player_action variable) then
	;update when a change occurs. Keeps everything neat with all anims
	;called from this single function rather than confusion with ifs

	If PS_old_player_action&lt;&gt;PS_player_action Then

		Select PS_player_action
	
			Case 0 ;standing still
				Animate Player,0,.3,16
			Case 1 ;walking
				Animate Player,1,.3,1
		End Select

	EndIf

PS_old_player_action=PS_player_action

End Function
</textarea> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
