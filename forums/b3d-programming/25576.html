<!DOCTYPE html><html lang="en" ><head ><title >odd ReadLine quirk</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >odd ReadLine quirk</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >odd ReadLine quirk</a><br><br>
<a name="266087"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought I should mention this here, in case it helps anyone else, and also because I'm not sure it warrants going in the Bug Reports (it may be just my bad programming habits)<br>---------------------<br><br>Here is an example of what I had:<br><br><br><br><pre class=code>
DataFile=OpenFile("Filename.txt")
Initial_Value=10
New_Value=(Initial_Value+(ReadLine(DataFile))
CloseFile(DataFile)
</pre><br><br>Which gave really large numbers, completely inaccurate results. I thought it may be adding the memory reference of the 'DataFile' handle, but it didn't even seem to tally with that.<br><br>I solved it, very simply by adding another line with a temporary value:<br><br><pre class=code>
DataFile=OpenFile("Filename.txt")
Initial_Value=10
Temporary=ReadLine(DataFile)
CloseFile(DataFile)
New_Value=Initial_Value+Temporary
</pre> <br><br></td></tr></table><br>
<a name="266097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed, this is not a bug :)<br><br>ReadLine returns a string, not an integer, so doing <br><pre class=code>Initial_Value+(ReadLine(DataFile)</pre>will convert Initial_Value to a string, then concat it to the line read in the file (an integer, in the form of a string), and then convert this string into an integer just before assigning it to  New_Value.<br>Thus, if your line (in the file) contains "123", what it does is this:<br>Int(10+"123") = Int("10"+"123") = Int("10123") = 10123<br>Which is clearly not what you want.<br>Normally if you do<br><pre class=code>New_Value=(Initial_Value+Int(ReadLine(DataFile))</pre>that should work without any problem.<br>Your second version also works because the temporary variable is also an integer, thus it forces the string to int conversion. <br><br></td></tr></table><br>
<a name="266103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Int(10+"123") = Int("10"+"123") = Int("10123") = 10123 <br> <br></div><br>Ah of course!<br><br>I actually had a similar problem a while back, so I should have known!<br><br>Thanks for the explanation, Koriolis! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
