<!DOCTYPE html><html lang="en" ><head ><title >Type object selection using camera pick</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Type object selection using camera pick</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Type object selection using camera pick</a><br><br>
<a name="888920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Its been a while since I used Types but have recently got back into the swing of things.<br><br>I am presently working on a little project where ships circle an island. When I point the camera to a ship from the island, I would like to select the ship, however I am using camera pick to pick out the ship (sprite) but it always reports the last ship in the type list to be created and not the actual ship looked at  (Ships ID for that type entry)<br><br>I have the ships circling using the function below<br><br>Function updateships()<br>  For s.ship = Each ship<br>  <br>   Local shipx#, shipz#<br>   Local shstart =200<br><br>   ;Update position around radius using the sin/cos functions<br>   shipx# = S\SCX# - ( Cos#(S\SA#) * S\SDS# )<br>   shipz# = S\SCZ# + ( Sin#(S\SA#) * S\SDS# )<br><br>   ;draw the ship<br>   PositionEntity S\SIMAGE,shipx#,S\SY#,shipz#<br>   RotateEntity S\SIMAGE,0,(90-S\SA#),0<br><br>   ;update shipangle# and maintain speed at different distances<br>   S\SA#=S\SA#+(S\SP#/S\SDS#)<br> <br>    SA=S\SA#; <br>    SNAME1=S\SNAME<br>    SX1#=shipx#<br>    SZ1#=shipz#<br>    SSP1#=S\SP#<br>    SDS=S\SDS#<br>    SDE=S\SDE#<br>    SIMAGE=S\SIMAGE<br>    SID=S\SID%<br><br>  Next<br><br>End Function<br><br>Function selectship()<br><br>And a camera pick function <br><br> picked = CameraPick(camera,378,278)<br><br> If Picked &gt; 0 <br> sh$ = "Ship ID picked"<br>   sh$ = sh$ + SID%<br> Else<br>  sh$ = "Nothing"<br> EndIf<br><br>End Function<br><br>Is there a way of reporting back the actual sprite being looked at. I have 3 ship type's defind but cant remember how to report back on individual S\SID% when the camera picks it. <br><br>Appreciated,<br><br>Thanks, <br><br></td></tr></table><br>
<a name="888969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lo-tekk</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might name your sprites with the corresponding name or id:<br>NameEntity sprite,shipName$<br>Later on you can retrieve the name of the picked entity like so:<br>ShipName$=EntityName(PickedEntity())<br><br>After this, search in your ship type list for the proper name. <br><br></td></tr></table><br>
<a name="888989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, using the Object() and Handle() commands, you can obtain an integer pointer to the Type, which can be used as the name of the entity. This way, you don't need to search through the list, but you can directly get the Type object that the entity belongs to.<br>Out of my head, that would be along the lines of this:<br><pre class=code>
sh.ship = New ship
sh\sprite = CreateSprite()
NameEntity sh\sprite, Handle(sh)

..

ShipID=EntityName(PickedEntity())
If ShipID &lt;&gt; 0 then
   sh.ship = Object.Ship(ShipID)
   ..use sh..
End If
</pre> <br><br></td></tr></table><br>
<a name="889016"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warner's way is the quickest. As soon as you pick the entity, you can get the type object, just from the entity name. <br><br></td></tr></table><br>
<a name="889264"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >spriteman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the response. Warner, your method does the trick. Did not see any details on handle and object in the docs relating to types....<br><br>I will be using this select process for detecting ships when pointing a long gun at them from an Island via camerapick to sprite....Nice code thanks... <br><br></td></tr></table><br>
<a name="889347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> They are undocumented commands, as they are not offically supported i believe. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
