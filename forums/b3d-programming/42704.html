<!DOCTYPE html><html lang="en" ><head ><title >GetSurface ????</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >GetSurface ????</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >GetSurface ????</a><br><br>
<a name="478183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been using the Demo for some type doing some work and just purchased the "Real" version and of course now I find that what I thought was working is not.Here is the deal.<br><br>I have a mesh with 4 surfaces.It was made and textured in milkshape.What I need to do is that when an object hits on a surface then find what surface that is and apply different factors to the object.<br><br>Okay,so I get the handle with "GetSurface" and if I know  what that handle represents I am OK.Problem being the handle changes (I don't know when but it does) and now what was surface#1 may be surface#3,or not.<br><br>I've programmed in VisualBasic for 15 or so years but must admit using handles is really something new to me.I must be missing something very basic here.<br><br>Sure would appreciate so insight on this and how to do the thing right.How the heck do I know what surface the "handle"represents?<br><br>Thanks <br><br></td></tr></table><br>
<a name="478197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I must be missing something very basic here. <br> <br></div><br><br>It's a little idiosyncracy. I don't think you can rely on surfaces loading in the same order each time. (Don't ask me why, there must be some good reason for it, but I can't think what).  Further, surfaces that are textured the same and have other identical brush properties will be combined.  But from what you say I assume your surfaces have different properties.  So build brushes with those properties and then use findsurface().  Not something I have tried myself mind, but presumably it will work (fingers crossed). <br><br></td></tr></table><br>
<a name="478207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> David - thanks for the quick response.<br><br>Basically your description is as I understand handles and the surfaces do  have different textures.<br><br>Problem is they are applied in Milkshape so I really have not created brushes for applying them.<br><br>If I am not mistaken the manual mentions that you must use GetSurface before you can use other commands on a particular surface so I guess the handles must be of some value in figuring out exactly what surface is contacted.<br><br>Surely there is a way of doing this?????????? <br><br></td></tr></table><br>
<a name="478217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The handles as such are just pointers to memory addresses that store the surface structures. <br><br>If the surfaces do have different textures then you can go through them using Getsurfacebrush(), Getbrushtexture() and texturename() functions to establish which surface is which. <br><br></td></tr></table><br>
<a name="478230"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well - that willl work but wow - what a bunch of steps.<br><br>But it works.Thats what counts.And the code below doesn't include stripping the path info.Doing it just once when the program is run .will be no problem.<br><br>Yea,I know;loops &amp; paths &amp; arrays will simplify it but I'm just making sure I get an answer now.<br><br>By the way , I did think of another way that sorta fudges it.Counting the verts in each surface ,if you know about how each surface relates to each other will let you get an answer.<br><br>I guess I didn't realize there was still a "brush" involved even though I textured the surfaces in milkshape. IShould have.<br><br>Dave - Thanks a lot. I appreciate your help a bunch.<br><br>sur1=GetSurface (f,1)<br>sur2=GetSurface (f,2)<br>sur3=GetSurface (f,3)<br><br>testem1=GetSurfaceBrush(sur1) <br>testem2=GetSurfaceBrush(sur2)<br>testem3=GetSurfaceBrush(sur3)<br><br>test1tex=GetBrushTexture(testem1,0) <br>test2tex=GetBrushTexture(testem2,0)<br>test3tex=GetBrushTexture(testem3,0) <br><br></td></tr></table><br>
<a name="478255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> (FindSurface ?!? I even didn't know this exists, does it?)<br><br>Anyway, the way using GetsurfaceBrush, GetBrushTexture and TexureName is th eway to go, but there is one thing you should consider: these function will create copies of the things you are checking, so you need to free the resources after usage. (texture and brush)<br><br>You could write a function that takes a texturename as a string and returns the number of the surface that is using the texture, or eg. -1 when the texture is not used. <br><br></td></tr></table><br>
<a name="478267"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DJWoodgate</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>(FindSurface ?!? I even didn't know this exists, does it?) <br> <br></div><br>Oh yes.<br><a href="http://www.blitzbasic.co.nz/b3ddocs/command.php?name=FindSurface&amp;ref=3d_a-z" target="_blank">http://www.blitzbasic.co.nz/b3ddocs/command.php?name=FindSurface&amp;ref=3d_a-z</a><br><br>Probably not used very much though.  All well and good if you have built something in Blitz because you will already have the brush, but I can see it is going to be a pain to construct a brush that has the same properties as say a material applied in milkshape. Though I guess you could get the brush for the first surface and then modify this accordingly for surface retrieval if, for instance, only the surface color was a distinct feature. <br><br>So I have not used it.  Perhaps I should just to make sure it does work :)<br><br>Its another option, and as Jack says if you know the vert counts for each surface and these are unique then by all means use that instead.  Darn sight quicker I should think.  At the end of the day it is finding some unique feature that distinguishes each surface.  Be nice and easy if surfaces were always loaded in the same order of course. <br><br></td></tr></table><br>
<a name="478369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is an alternate method (probably a lot faster) way to solve the problem as long as you can get and apply the right vert quantity in code while constructing the program.<br><br>It was my understanding that the "handle" would not change once program started but it could be different with each exectution.Thus the original problem.<br><br>However - I would swear ,not sure though, that I saw it change once during executuin.Anyone know about this for sure.<br><br>Anyway - I plan on using both solutions at the same time just as a fail safe.<br><br>;;Due before Main Loop<br>sur1=GetSurface (f,1)<br>sur2=GetSurface (f,2)<br>sur3=GetSurface (f,3)<br>turf(1,1)=CountVertices(sur1)<br>turf(2,1)=CountVertices(sur2)<br>turf(3,1)=CountVertices(sur3)<br><br>;;Do in main loop when surface hit is needed<br>whatsurface=PickedSurface():surfacehit=0<br>vertnumb=CountVertices(whatsurface)<br>If vertnumb =1159 Then surfacehit=1<br>If vertnumb =4203 Then surfacehit=2<br>If vertnumb =8878 Then surfacehit=3 <br><br></td></tr></table><br>
<a name="478395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course, when you know the surface count, it may be a more direct way. But usually I only see the texture files and don't want to check the vertices count.<br><br>Additionally, the texture name way allows to check eg. if a substring may be part of a filename, eg. darkgrass4.jpg would contain the substring "grass" and could trigger special footstep sounds.<br><br>and findsurface requires to know the brush-handle - pretty useless in this situation imho. Anyway, there are many ways to rome, as some people say :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
