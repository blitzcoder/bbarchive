<!DOCTYPE html><html lang="en" ><head ><title >infinitive far clipplane?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >infinitive far clipplane?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >infinitive far clipplane?</a><br><br>
<a name="707889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello!<br><br>for our shadow system, i need to know how to make an infinitive far clipplane. i don't mean 1.000.000 or so, really infinitive...<br><br>thanks for help anyway :) <br><br></td></tr></table><br>
<a name="707896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just skip the mathematical clip test on the plane you want to be infinite.<br><br>but:<br>Its normally not desired to have something like this due to calculation and depth buffer errors in masses if you don't clip at a usefull distance. already 100'000 would be by far too large (especially for the depth buffer)<br>But I'm not sure if you should add something like "infinite" as the shadow drops most likely will be bugged long before that and cost massive FPS. Thats one of the reasons, 3d games with high end 3d engines don't have light sources that cast shadows on a flat angle. (HL2 shows that quite good, all sources nearly overhead and even then the shadow drop max range is extremely restricted. it does not even cast from 2nd floor to first floor and the like) <br><br></td></tr></table><br>
<a name="707904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This works (tested with my own shadow system), but I don't know if it's wise to use it as I don't think any geometry will get clipped by the far clip plane at all.<br><br>You might want to also have a GetTransform() to record the Projection Matrix so you can reset it later.<br><br>Function GetProjectionMatrix(m.mat)<br> GetTransform 3,m<br>End Function<br><br>Have a mess about with it, see what happens :)<br><br><pre class=code>
;D3DMATRIX
Type mat
 Field m1#,m2#,m3#,m4#
 Field m5#,m6#,m7#,m8#
 Field m9#,m10#,m11#,m12#
 Field m13#,m14#,m15#,m16#
End Type

Function InfiniteFarClipPlane()
 Local m.mat = New mat
 GetTransform(3,m)

 ;infinite far clip plane
 e#=0.00000001
 m\m11 = 1.0 - e
 m\m15 = .1*(e - 1.0) ;.1 = camera near
 SetTransform 3,m
End Function
</pre><br><br>p.s I dunno if I left Get/Set Transform in the DX7 DLL you have now, if not lemme know and I'll put up a new .decls<br><br>Tom <br><br></td></tr></table><br>
<a name="707968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thx tom, this works perfect :) <br><br></td></tr></table><br>
<a name="714744"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would like to give it a go ... but on the dx7tes.decls and dll I have there is no set/get ransform functions. Where can I find the appropriate decls and dll?<br><br>Thanks <br><br></td></tr></table><br>
<a name="714843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> you can download the latest dll with my shadow system.<br>the pic in my signature. <br><br></td></tr></table><br>
<a name="716297"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Devils child,<br><br>I tried it (tom's code above)but I see no change in the far clipping plane, apart from setsystemproperties, is there any other neccessary initialistaion/tricks?<br><br>EDIT<br><br>Sorry found it, the function needs to be called each loop. <br><br></td></tr></table><br>
<a name="716356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> you have to initialize this dx7 dll.<br>i dont know whether you have the latest dx7 dll.<br>the latest one is included to my shadow system.<br>download it on www.devil-engines.net<br>and see how it works. <br><br></td></tr></table><br>
<a name="751039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>I have been using this technique to manipulate the projection matrix ... setTransfrom(3,m) ... the number 3 targeting the projection matrix in fact.<br><br>Now whenever I use Blits' camerazoom, cameraprojmode or change cameraviewport, it seems I cannot have setTransform doing anything. Anybody has a workaround? Or does anybody knows which matrix the Blitz' commands are accessing? (seems it's not the DX projection matrix). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
