<!DOCTYPE html><html lang="en" ><head ><title >Find Target</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Find Target</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Find Target</a><br><br>
<a name="1126432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hope I can explain clearly.<br><br>Let me strart buy saying that for various reasons I do not want to use the command "Point Entity" after each move.<br><br>There is a hill on which both the entity and target are located.<br>The entity needs to move horizontally across the hill to the target.<br>Since the hill is sloped (yep really) the entity,which is on the gound,<br>will tend to move toward the bottom of the hill.<br>My collision detection is working fine.<br><br>Since I want the entity to finish exactly on the target I need to compute how far up the hill to aim using "PointEntity" at a "temporary target".Of course I know the height of the hill at each move point and need not consider gravity,friction,force,etc.,for this particular calculation.<br><br>Sure hope this make sense and any help would be great. <br><br></td></tr></table><br>
<a name="1126433"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure i understand but DeltaPitch() and DeltaYaw() might be what you need to determine the angle from one entity to another. <br><br></td></tr></table><br>
<a name="1126437"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to move your entity without regard for gravity, is there a reason why you can't just have gravity or sliding collisions not apply to it while making this movement?<br><br>If possible it's better not to involve the collision system at all, rather than try to undo its work. <br><br></td></tr></table><br>
<a name="1126438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gfk<br>I have tried using DeltaPitch() and getting that "number" at each point the object moves. <br><br>However,that alone gives no way to find an aim point.  I have tried making a cumulative total,by adding each DeltaPitch() number together but this gave no reasonable number.<br><br>Advanced math skills have long vanished for me but it seems there should be a way to use some formula to do this.<br><br>Thanks for the reply Gfk. <br><br></td></tr></table><br>
<a name="1126439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yasha...<br><br>Right about not involving the collision system. That is what I have been doing in my code. I meant to indicate that when I mentioned the collision<br>factor.<br><br>I guess I should have worded it in another way since it would be the gravity that makes the object head toward the bottom of the hill. That is what makes me need to find the aim point higher on the hill.<br><br>I have the DeltaPitch form one spot to another but I need to be able to aim higher on the hill based at each point on the hill.<br><br>This too may be a lousy explaination which is why I try to stay away from texting rather than talking.Of course there is no choice on a forum.<br><br>Thanks for the input Yasha. <br><br></td></tr></table><br>
<a name="1126442"></a>

<a name="1134236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> .<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126443"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think this is what you need:<br><br><a href="http://warpycode.wordpress.com/2009/10/10/aiming-a-projectile-uphill/" target="_blank">http://warpycode.wordpress.com/2009/10/10/aiming-a-projectile-uphill/</a> <br><br></td></tr></table><br>
<a name="1126445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie G<br><br>Thanks for the reply.<br><br>That math is way over my head but it unless I am missing something that is not what I need. My object must follow the path of the ground and stay on the ground. Like a rolling ball.<br><br>Maybe that code could be used someway but like I said my math is not good enough to understand how to make it apply. <br><br></td></tr></table><br>
<a name="1126536"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This should not be too hard for a very simple case, such as the ground being a tilted plane. Other simple shapes would be more difficult but still not too bad.<br><br>If the ground is an arbitrary terrain then the problem sounds intractable. <br><br></td></tr></table><br>
<a name="1126540"></a>

<a name="1126541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you make a diagram of how you want things to behave? I don't understand what the problem is exactly.<br><br>EDIT: Take a look at <a href="/b3ddocs/command.php?name=LinePick&amp;ref=3d_cat" target="_blank">LinePicking</a> with <a href="/b3ddocs/command.php?name=PickedX&amp;ref=goto" target="_blank">PickedX</a>, Y and Z.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126606"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd &amp; Kryzon....thans for the reply.<br><br>"from Floyd " - "If the ground is an arbitrary terrain then the problem sounds intractable"<br><br>Yep -- thats what it is and I'm beginning to think you are right.<br><br>Kryzon.... I have no problem getting the values. Its putting them to use that is the problem. <br><br></td></tr></table><br>
<a name="1126625"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> So you're not shooting a projectile?<br><br>If you just want an entity to move to a target when either point is on the terrain I don't understand why this is an issue?  It is essentially a 2d problem.<br><br>Something along the lines of...<br><br><pre class=code>
if  entitycollided( Entity, TYPE_TERRAIN )
  if entitydistance( Entity, Target ) &gt; 5 ; change 5 as required
    Dy# = deltayaw( Entity, Target ) * .25 ;use .25 to get smoother turn
    Turnentity Entity, 0, Dy, 0
    Moveentity Entity, 0, 0, 1 ;change 1 as required
  Endif
Else
  Translateentity Entity,0, -.05, 0    ;simulate gravity
Endif
</pre><br><br>If you have sliding collisions on then it may be that the slope is too large for the speed of movement to overcome. Try using collision response 3, instead of 2.<br><br>If the entity is being aligned to the terrain, you could parent the entity to a pivot and only apply the yaw changes to the pivot.<br><br>If I've misunderstood the problem again please give alot more detail.<br><br>Stevie <br><br></td></tr></table><br>
<a name="1126647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the problem is essentially "make a putt on an undulating green". You may have to aim some place nowhere near the target. <br><br></td></tr></table><br>
<a name="1126668"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd --  Thats about it. Good description and thanks.<br><br>Stevie G ---  I used something like you mentioned but that sometimes makes for funny movement. Probably a little more tinkering might make<br>that work but it would seem to be an artificial way of reaching an answer.<br>Thanks for your input. I appreciate it. <br><br></td></tr></table><br>
<a name="1126711"></a>

<a name="1126714"></a>

<a name="1126715"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Jack,<br><br>If you'd described that in the first place you may have got a decent answer ;)<br><br>As you say, there are too many variables to consider to simply find a single solution mathematically.  <br><br>What you could do (without rendering) is an iterative approach which will theoretically converge on the result.  Start with an angle which is directly to the hole and pick a good guess at the speed based on the distance to the hole and terrain.  Give the result a score for angle, based on whether the ball ends up to the left or right of the hole*.  For speed, score it based on how close to the hole it got**.  Rince and repeat, adjusting the angle and speed by small steps each iteration until the ball goes into the hole.  There may be situations where it's impossible to converge on a solution so you should limit the maxmium iterations.  If you hit a solution and then need to dumb it down just add a random factor to the angle and to the speed.<br><br>* At the start of the process place a pivot at the hole position and use pointentity to point it to the balls starting position.  Once the ball has stopped you can then use <b>tformpoint 0,0,0,Pivot,Ball</b>.  <b>Tformedx()</b> will tell you how far left or right the ball ended up in relation to the hole.<br><br>** Similarly, <b>tformedz()</b> will tell you how far infront or behind the holw the ball ended up.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1126717"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie G <br><br>from Stevie G.----"If you'd described that in the first place you may have got a decent answer ;)"<br><br><br>Whoa.<br><br>I appreciate your help but I thing that was unnecessary. <br><br></td></tr></table><br>
<a name="1126718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stevie G<br><br>Just to add. Since your comment was irritating.<br><br>An eaiser way is to just turn the object a small amout and give it a test run till the object hits the target. Not very time consumng<br>when no rendering is done.<br><br>I did this before ever asking the question.But for various reasons I thought possibly  there might be a math answer. <br><br></td></tr></table><br>
<a name="1126748"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You were irritated that I suggested that you hadn't described your problem in enough detail? Did you notice that almost everyone who posted included a 'not sure I understand' or 'I think the problem is'?  Ho-hum. <br><br></td></tr></table><br>
<a name="1126797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea. <br><br></td></tr></table><br>
<a name="1126849"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Jack, don't worry about it. Stevie G is a great guy and I'm sure he didn't mean to irritate you.<br><br>(I'd attribute the misunderstanding to that blinking smiley. I think they do more harm than good, so I don't even use them.) <br><br></td></tr></table><br>
<a name="1126856"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Kryzon. Appreciate it.<br><br>It is a good bunch here at Blitz. Real good. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
