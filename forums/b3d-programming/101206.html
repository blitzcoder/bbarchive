<!DOCTYPE html><html lang="en" ><head ><title >Climbing Walls</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Climbing Walls</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Climbing Walls</a><br><br>
<a name="1200490"></a>

<a name="1200491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hello<br><br>i have been struggling with this for a long time.<br><br>How do i get my character to cling/climb on any surface using the following [before editing] code. PS: it has jumping (no shooting yet. I am doing that last since I have figured that out within another file)<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Global mup=200,MDN=208,mlt=203,mrt=205,mjp=57,mst=28
;input user keys here before the program starts
Color 255,255,255
For x=0 To 6
	Cls
	Text 10, 0,"   Up:"
	Text 10,12," Down:"
	Text 10,24," Left:"
	Text 10,36,"Right:"
	Text 10,48," Jump:"
	Text 10,60,"Shoot:"
	If X&lt;6 Text 10,84,"[ESC] Use Defaults"
	
	If x&lt;6 Rect 58,x*12,8,12
	If x&gt;0 Text 58,0,mup
	If x&gt;1 Text 58,12,mdn
	If x&gt;2 Text 58,24,mlt
	If x&gt;3 Text 58,36,mrt
	If x&gt;4 Text 58,48,mjp
	If x&gt;5 Text 58,60,mst
	If x=6 Text 10,84,"Press any key to continue..."
.redo
	confirm=False
	FlushKeys
	Repeat
		For keyz=0 To 255
			If KeyHit(keyz)
				If x=0 mup=keyz
				If x=1 mdn=keyz
				If x=2 mlt=keyz
				If x=3 mrt=keyz
				If x=4 mjp=keyz
				If x=5 mst=keyz
				confirm=True
			End If
		Next
	Until confirm=True
	If X&lt;6
		If MUP=1 Or MDN=1 Or MLT=1 Or MRT=1 Or MJP=1 Or MST=1
			mup=200
			MDN=208
			mlt=203
			mrt=205
			mjp=57
			mst=28
			x=5
		End If
	End If	
	If x=0
		If mup=15 Goto redo
	ElseIf x=1
		If mdn= 15 Goto redo
		If mdn=mup Goto redo
	ElseIf x=2
		If mlt= 15 Goto redo
		If mlt=mup Goto redo
		If mlt=mdn Goto redo
	ElseIf x=3
		If mRt= 15 Goto redo
		If mRT=mup Goto redo
		If mRT=mdn Goto redo
		If mRT=mLT Goto redo
	ElseIf x=4
		If mJP= 15 Goto redo
		If mJP=mup Goto redo
		If mJP=mdn Goto redo
		If mJP=mLT Goto redo
		If mJP=mRT Goto redo
	ElseIf x=5
		If mST= 15 Goto redo
		If mST=mup Goto redo
		If mST=mdn Goto redo
		If mST=mLT Goto redo
		If mST=mRT Goto redo
		If mST=mJP Goto redo
	End If
Next
;ADDED DATA---------------------------------------
RESTOREBMP ;CREATE CHARACTGER AND BULLET AND BEAM
;-------------------------------------------------

Const PERIOD=32 ;(1024/PERIOD) = FPS (FRAMES PER SECOND)

;SET GRAPHICS MODE AND LOAD STUFF HERE.
Graphics3D 640,480,16,2

Global TIME=MilliSecs()-PERIOD,ELAPSED,FRAMETICKS,TWEEN#
;TIME = CALCULATE TIME PERIOD
;ELLAPSE = TIME ELLAPSED (TIME PASSED) This changes throughout the program
;FRAMETICKS = How many frames have ellapsed (passe)
;TWEEN# = used to get inbetween frames


;ADDED DATA--------------------------------------------------------------------
Const CLSN_PLYR=1,CLSN_OBJS=2,CLSN_GRND=3
Collisions CLSN_PLYR,CLSN_OBJS,2,2
Collisions CLSN_PLYR,CLSN_GRND,2,2

AmbientLight 84,168,252

PLANE1TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE1TEX)
Color 84,84,252
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,210-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 0,0,168
Line 0,0,31,31
Line 0,31,31,0

PLANE2TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE2TEX)
Color 252,84,84
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 210-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 168,0,0
Line 0,0,31,31
Line 0,31,31,0
;------------------------------------------------------------------------------

SetBuffer BackBuffer() ;Double buffering


;ADDED DATA--------------------------------------------------------------------

;cubes
cube=CreateCube()
EntityColor cube,1,1,255
ScaleEntity cube,.5,.5,.5
PositionEntity cube,-5,1.5,0
EntityType cube,clsn_objs

cube=CreateCube()
EntityColor cube,255,1,1
ScaleEntity cube,.25*2,.25*2,.25*2
PositionEntity cube,0,.25*2,0
EntityType cube,clsn_objs

cube=CreateCube()
EntityColor cube,1,255,1
ScaleEntity cube,.25*6,.25*12,.25*6
PositionEntity cube,5,.25*12,0
EntityType cube,clsn_objs

;light
btllight=CreateLight(2)
PositionEntity btllight,0,10,0

;charsize x,y
sizex=16*1
sizey=16*1
plyrdir=0 ;player direction
WALKSPEED=2 ;PLAYER'S WALKING SPEED

player1=CreateSprite()
plyr1tex=LoadAnimTexture("char1.bmp",7,32,32,0,2)
EntityTexture player1,plyr1tex,0
SpriteViewMode player1,2
PositionEntity player1,0,5,0
ScaleSprite player1,0.03125*sizex,0.03125*sizey
EntityRadius player1,0.0078125*sizex,0.015625*sizey
EntityType player1,clsn_plyr
;delete when done----------
sphere=CreateSphere(32,player1)
EntityAlpha sphere,.5
ScaleEntity sphere,0.0078125*sizex,0.015625*sizey,0.0078125*sizex
PositionEntity sphere,0,0,0
;--------------------------

;player camera
camera=CreateCamera(player1)
CameraViewport camera,0,0,GraphicsWidth(),GraphicsHeight()
CameraProjMode camera,2
PositionEntity camera,0,10,-10
RotateEntity camera,45,0,0
CameraZoom camera,.5
;fixed camera
smlcam=CreateCamera()
CameraViewport smlcam,GraphicsWidth()*7/8,GraphicsHeight()*7/8,GraphicsWidth()/8,GraphicsHeight()/8
CameraProjMode smlcam,2
PositionEntity smlcam,3,10,-10
RotateEntity smlcam,45,0,0
CameraZoom smlcam,.5

;battlefield
btlcube=CreateCube()
ScaleEntity btlcube,12,Float(1)/256,4
ScaleTexture plane1tex,Float(1)/24,Float(1)/8
EntityTexture btlcube,plane1tex
PositionEntity btlcube,0,0,0
EntityType btlcube,clsn_grnd

;exitfield
exitcube=CreateCube()
ScaleEntity exitcube,12+8,Float(1)/256,4+8
ScaleTexture plane2tex,Float(1)/40,Float(1)/24
EntityTexture exitcube,plane2tex
PositionEntity EXITcube,0,-Float(1)/256,0
EntityType EXITcube,clsn_grnd

FLUSH ; FLUSH INPUTS
;------------------------------------------------------------------------------


;BEGINNING OF PROGRAM
jroutine=0
Repeat
	;WAIT FOR ELLAPSED TIME
	Repeat
		ELAPSED=MilliSecs()-TIME
	Until ELAPSED
	
	FRAMETICKS=ELAPSED/PERIOD ;how many 'frames' have elapsed
	
	Tween#=Float(elapsed Mod period)/Float(period) ;fractional remainder
	
	;check each frame
	For checkticks=1 To frameticks
		time=time+period ;goto next time period
		If checkticks=frameticks Then CaptureWorld ; capture each frame in 3d world within time period
		;place images/entties and inputs here--------------------------------------------
	
		
		;ADDED DATA----------------------------------
			velud=veluD-1
			For checkallCollisions=1 To CountCollisions(player1)
				If CollisionNY(player1,checkallcollisions)&gt;0;0.03125*sizey
					velud=-1
					Exit
				ElseIf CollisionNY(player1,checkallcollisions)&lt;0;-0.03125*sizey
					velud=-1
					Exit
				End If
			Next

			If KeyHit(mjp)
				For checkallCollisions=1 To CountCollisions(player1)
					If CollisionNY(player1,checkallcollisions)&gt;0;0.03125*sizey
						velud=8
						Exit
					End If
				Next
			End If
			If KeyDown(mjp)=True
				tmpvud=tmpvud+1*(jroutine=1)
				If tmpvud&gt;14 tmpvud=14
			ElseIf KeyDown(mjp)=False
				For checkallCollisions=1 To CountCollisions(player1)
					If CollisionNY(player1,checkallcollisions)&gt;0;0.03125*sizey
						velud=tmpvud
						Exit
					End If
				Next
				tmpvud=-1
			End If

		If KeyHit(15) jroutine=Not jroutine ;tab ;toggles jumping routines
		
		;move up
		If KeyDown(mup)=True
			If CountCollisions(PLAYER1)=0
				If VELNS=0 VELN=1
			ElseIf CountCollisions(PLAYER1)&gt;0
				veln=veln+walkspeed
				If veln&gt;5*walkspeed veln=5*walkspeed
			End If
		ElseIf KeyDown(mup)=False
			If CountCollisions(PLAYER1)&gt;0
				veln=veln-walkspeed
				If veln&lt;0 veln=0
			End If
		End If
		;move down
		If KeyDown(mdn)=True
			If CountCollisions(PLAYER1)=0
				If VELNS=0 VELS=1
			ElseIf CountCollisions(PLAYER1)&gt;0
				vels=vels+walkspeed
				If vels&gt;5*walkspeed vels=5*walkspeed
			End If
		ElseIf KeyDown(mdn)=False
			If CountCollisions(PLAYER1)&gt;0
				vels=vels-walkspeed
				If vels&lt;0 vels=0
			End If
		End If
		velns=veln-vels ;balances north(up) and south(down) movement
		;move left
		If KeyDown(mlt)=True
			If CountCollisions(PLAYER1)=0
				If VELWE=0 VELW=1
			ElseIf CountCollisions(PLAYER1)&gt;0
				velw=velw+walkspeed
				If velw&gt;5*walkspeed velw=5*walkspeed
			End If
		ElseIf KeyDown(mlt)=False
			If CountCollisions(PLAYER1)&gt;0
				velw=velw-walkspeed
				If velw&lt;0 velw=0
			End If
		End If
		;move RIGHT
		If KeyDown(mrt)=True
			If CountCollisions(PLAYER1)=0
				If VELWE=0 VELE=1
			ElseIf CountCollisions(PLAYER1)&gt;0
				velE=velE+walkspeed
				If velE&gt;5*walkspeed velE=5*walkspeed
			End If
		ElseIf KeyDown(mRT)=False
			If CountCollisions(PLAYER1)&gt;0
				velE=velE-walkspeed
				If velE&lt;0 velE=0
			End If
		End If
		velWE=velE-velW ;balances west(left) and east(right) movement
		If velwe&lt;&gt;0 tmpdir=-(Sgn(velwe)-1)/2 ;calculate char dir using valwe
		If tmpdir&lt;&gt;plyrdir
			plyrdir=tmpdir
			direction(player1,plyr1tex,tmpdir)
		End If
		;CHARACTER MOVEMENT
		MoveEntity player1,Float(velwe)/160,Float(velud)/32,Float(velns)/160
		;--------------------------------------------
		;--------------------------------------------------------------------------------
		UpdateWorld ;UPDATE YOUR 3D WORLD
	Next
	RenderWorld TWEEN# ; RENDERS CURRENT SCREEN FROM BACKGROUND BUFFER (INCLUDING TWEENING)
	
	;ADDED TEXT---------------------------------------------------------
	Color 255,255,255
	Text 0, 0,EntityX(PLAYER1)+","+EntityY(PLAYER1)+","+EntityZ(PLAYER1)
	Text 0,10,VELNS+", "+VELWE+", "+VELUD
	Text 0,20,"[TAB] Toggle jumping: "+jroutine
	Text 20,30,"press [JUMP] to Jump. "
	If jroutine=1 Text 20,40,"hold &amp; release [JUMP] to ChargeJump"
	;-------------------------------------------------------------------
	Flip ; show new screen update
Until KeyHit(1) Or (EntityCollided(Player1,CLSN_GRND)=exitcube) Or (EntityY(player1)&lt;-2 Or EntityY(player1)&gt;11);END MAIN LOOP

;CLEAN UP STUFF
time=0
elapsed=0
frameticks=0
tween#=0
checkticks=0

ClearWorld ;remove entities, brushes, textures from memory (anything missed)
ClearCollisions ;clear all collisions from memory
EndGraphics
flush


Function DIRECTION(SPR,TEX,FRM);CHANGE IMAGE ON SPRITE
	EntityTexture SPR,TEX,FRM
End Function

Function flush() ;flush all inputs from memory
	FlushKeys ;clear keyboard presses
	FlushMouse ;clear mouse clicks
	FlushJoy ;clear joystick presses
End Function

Function restorebmp()
	;set gfxmode
	Graphics 320,240,16,3
	;Create Image
	tmp=CreateImage(64,32)
	;set buffer to image
	SetBuffer ImageBuffer(tmp)
	;if char1.bmp doesn't exist... make it
	If FileType("char1.bmp")=2 DeleteDir "char1.bmp"
	If FileType("char1.bmp")=0
		Cls
		Restore char
		For v=0 To 31
			For h=0 To 31
				Read c
				If c&gt;0
					Color (c-1)*84+7*(c=1),(c-1)*84+7*(c=1),(c-1)*84+7*(c=1)
					Plot h,v
					Plot 63-h,v
				End If
			Next
		Next
		SaveImage tmp,"char1.bmp"
	End If
	;if laser1.bmp doesn't exist... make it
	If FileType("laser1.bmp")=2 DeleteDir "laser1.bmp"
	If FileType("laser1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Rect 8,c+12,16,7-2*c
			Rect c+12+32,8,7-2*c,16
		Next
		SaveImage tmp,"laser1.bmp"
	End If
	;if bullet1.bmp doesn't exist... make it
	If FileType("bullet1.bmp")=2 DeleteDir "bullet1.bmp"
	If FileType("bullet1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Oval c*3/2+8,c*3/2+8,16-2*(c*3/2),16-2*(c*3/2)
			Oval c+2+32+8,c+2+8,16-2*(c+2),16-2*(c+2)
		Next
		SaveImage tmp,"bullet1.bmp"
	End If
End Function


.char
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,4,4,1,4,4,4,1,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,3,3,1,1,4,1,4,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,4,1,1,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,1,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
</textarea><br><br>feel free to take a crack at it.  I am stumped. <br><br></td></tr></table><br>
<a name="1200533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What do you mean by climbing? Is it something like this?<br><br><img src="http://i40.tinypic.com/34j3otu.gif"><br><br>If so, you need to <b>detect</b> when you are in a condition to climb a surface. You need to detect what are the edges you can climb on to, and where you want the character to be in relation to each edge for him to be able to grab it.<br><br>This will be easier if you clean your code. <br>You have a lot of functionality spread out in the open that should be encapsulated in functions. <br>You also need to use Types so you can classify variables and objects in a more organized manner. Type Player, Type Cube etc.<br>If you organize your main loop into nothing but function calls, it's a great step.<br>Since there are no explanatory comments, if you let go of your code for a few weeks and get back to it, you'll be lost. It's better to add a good comment before each block of code, explaining what it's doing.<br><br>This isn't to appease to my eyes. This is to improve the way you deal with your code - if it's modular, it's easier to add functionality to it. <br><br></td></tr></table><br>
<a name="1200580"></a>

<a name="1200581"></a>

<a name="1200582"></a>

<a name="1200585"></a>

<a name="1200589"></a>

<a name="1200596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I tried to clean up the code using some blitz examples. here is the new code<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;global all player variables here for now. this will become a type later
;charsize x-size,y-size,direction,walking speed,tempdirection,playertexture
Global sizex=16*1,sizey=16*1,plyrdir=0,WALKSPEED=2,tmpdir,plyr1tex ;PLAYER'S WALKING SPEED
Global camera;plyr camera
Global player1;entity


;input user keys here before the program starts
Global mup=200,MDN=208,mlt=203,mrt=205,mjp=57,mst=28
UserInput
;ADDED DATA---------------------------------------
RESTOREBMP ;CREATE CHARACTGER AND BULLET AND BEAM
;-------------------------------------------------

Const PERIOD=32 ;(1024/PERIOD) = FPS (FRAMES PER SECOND)

;SET GRAPHICS MODE AND LOAD STUFF HERE.
Graphics3D 640/2,480/2,16,2

;TIME = CALCULATE TIME PERIOD
;ELLAPSE = TIME ELLAPSED (TIME PASSED) This changes throughout the program
;FRAMETICKS = How many frames have ellapsed (passe)
;TWEEN# = used to get inbetween frames
Global TIME=MilliSecs()-PERIOD,ELAPSED,FRAMETICKS,TWEEN#


;player1 velocities.
;velud is always subtracted by 1 (gravity)
;tmpvud is used for charged jumping
;velns=north south velocity combined
;veln=north velocity up
;vels=south velocity down
;when up and down are pressed the velocity slows down to a stop
;velwe=west east velocity combined
;velw=west velocity
;vele=east velocity
;when left and right are pressed the velocity slows down to a stop
Global velud,tmpvud,velns,veln,vels,velwe,velw,vele


;ground stuff
Global Plane1Tex,PLANE2TEX,btlcube,exitcube



;ADDED DATA--------------------------------------------------------------------
Const CLSN_PLYR=1,CLSN_OBJS=2,CLSN_GRND=3;colisions with ground
Collisions CLSN_PLYR,CLSN_OBJS,2,2
Collisions CLSN_PLYR,CLSN_GRND,2,2
;------------------------------------------------------------------------------


CreateGround;self explanitory

SetBuffer BackBuffer() ;Double buffering


;ADDED DATA--------------------------------------------------------------------
AmbientLight 84,168,252

;used to create the blocks/walls
Type Blocks
	Field entity,Red,Grn,Blu,SizX#,SizY#,SizZ#
End Type 

;create cubes
For y=0 To 2
	wall.blocks=New blocks
	wall\entity=CreateCube()
	If y=0
		red=1
		grn=1
		blu=255
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=-5
		posy#=1.5
		posz#=0
	ElseIf y=1
		red=255
		grn=1
		blu=1
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=0
		posy#=.5
		posz#=0
	ElseIf y=2
		red=1
		grn=255
		blu=1
		sizx#=1.5
		sizy#=3
		sizz#=1.5
		posx#=5
		posy#=3
		posz#=0
	End If
	EntityColor wall\entity,red,grn,blu
	ScaleEntity wall\entity,sizx#,sizy#,sizz#
	PositionEntity wall\entity,posx#,posy#,posz#
	EntityType wall\entity,clsn_objs
Next

;light
btllight=CreateLight(2)
PositionEntity btllight,0,10,0
;create player
createplayer



FLUSH ; FLUSH INPUTS
;------------------------------------------------------------------------------


;BEGINNING OF PROGRAM
jroutine=0
Repeat
	;WAIT FOR ELLAPSED TIME
	Repeat
		ELAPSED=MilliSecs()-TIME
	Until ELAPSED
	
	FRAMETICKS=ELAPSED/PERIOD ;how many 'frames' have elapsed
	
	Tween#=Float(elapsed Mod period)/Float(period) ;fractional remainder
	
	;check each frame
	For checkticks=1 To frameticks
		time=time+period ;goto next time period
		If checkticks=frameticks Then CaptureWorld ; capture each frame in 3d world within time period
		;place images/entties and inputs here--------------------------------------------
	
		;ADDED DATA----------------------------------
		UpdatePlayer
		;--------------------------------------------------------------------------------
		UpdateWorld ;UPDATE YOUR 3D WORLD
	Next
	RenderWorld TWEEN# ; RENDERS CURRENT SCREEN FROM BACKGROUND BUFFER (INCLUDING TWEENING)
	
	;ADDED TEXT---------------------------------------------------------
	Color 255,255,255
	Text 0, 0,EntityX(PLAYER1)+","+EntityY(PLAYER1)+","+EntityZ(PLAYER1)
	Text 0,10,VELNS+", "+VELWE+", "+VELUD
	Text 0,20,"[TAB] Toggle jumping: "+jroutine
	Text 20,30,"press [JUMP] to Jump. "
	If jroutine=1 Text 20,40,"hold &amp; release [JUMP] to ChargeJump"
	;-------------------------------------------------------------------
	Flip ; show new screen update
Until KeyHit(1) Or (EntityCollided(Player1,CLSN_GRND)=exitcube) Or (EntityY(player1)&lt;-2 Or EntityY(player1)&gt;11);END MAIN LOOP

;CLEAN UP STUFF
time=0
elapsed=0
frameticks=0
tween#=0
checkticks=0

For wall.blocks = Each blocks
FreeEntity wall\entity
Delete wall
Next


ClearWorld ;remove entities, brushes, textures from memory (anything missed)
ClearCollisions ;clear all collisions from memory
EndGraphics
flush

Function UpdatePlayer()

		;gravity (constant pull down
		velud=veluD-1
		For checkallCollisions=1 To CountCollisions(player1);check for any collision
			If CollisionNY(player1,checkallcollisions)&gt;0;feet check
				velud=-1;reset vertical velocity
				Exit
			ElseIf CollisionNY(player1,checkallcollisions)&lt;0;head check
				velud=-1;reset vertical velocity
				Exit
			End If
		Next

		;jump hit
		If KeyHit(mjp);standard jumping
			For checkallCollisions=1 To CountCollisions(player1);(all collisions)
				If CollisionNY(player1,checkallcollisions)&gt;0;feet check
					velud=8;standard jump velocity
					Exit
				End If
			Next
		End If
		;charge jump (press)
		If KeyDown(mjp)=True;charged jumping when key is held
			tmpvud=tmpvud+1*(jroutine=1)
			If tmpvud&gt;14 tmpvud=14;max jump veloctiy
		ElseIf KeyDown(mjp)=False;when key is released, execute jump
			For checkallCollisions=1 To CountCollisions(player1)
				If CollisionNY(player1,checkallcollisions)&gt;0;feet check
					velud=tmpvud;transfer tempvelocity to jump velocity
					Exit
				End If
			Next
			tmpvud=-1
		End If
		If KeyHit(15) jroutine=Not jroutine ;tab ;toggles jumping routines
	
		;move up/north
		If KeyDown(mup)=True;up key is held;(speed up to max walk speed)
			If CountCollisions(PLAYER1)=0;if in the air, only increase velocity to 1
				If VELNS=0 VELN=1
			ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground
				veln=veln+walkspeed
				If veln&gt;5*walkspeed veln=5*walkspeed;increase velocity to max walking speed
			End If
		ElseIf KeyDown(mup)=False;up key is released (slow down to a stop)
			If CountCollisions(PLAYER1)&gt;0;when on ground
				veln=veln-walkspeed;decrease walking speed to a stop
				If veln&lt;0 veln=0
			End If
		End If


		;move down/south
		If KeyDown(mdn)=True;down key is held
			If CountCollisions(PLAYER1)=0;when in air
				If VELNS=0 VELS=1
			ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground
				vels=vels+walkspeed
				If vels&gt;5*walkspeed vels=5*walkspeed;increase to max walking speed
			End If
		ElseIf KeyDown(mdn)=False;down key is released slow down to a stop
			If CountCollisions(PLAYER1)&gt;0;when on ground
				vels=vels-walkspeed
				If vels&lt;0 vels=0;decrease walking speed to a stop
			End If
		End If

		;north south velocity. keeps everything in balabce.
		velns=veln-vels

		;commenting on left and right is practically the same as up and down.
		;move left /west
		If KeyDown(mlt)=True
			If CountCollisions(PLAYER1)=0;when in air
				If VELWE=0 VELW=1
			ElseIf CountCollisions(PLAYER1)&gt;0;when on ground 
				velw=velw+walkspeed
				If velw&gt;5*walkspeed velw=5*walkspeed
			End If
		ElseIf KeyDown(mlt)=False
			If CountCollisions(PLAYER1)&gt;0
				velw=velw-walkspeed
				If velw&lt;0 velw=0
			End If
		End If

		;move RIGHT/east
		If KeyDown(mrt)=True
			If CountCollisions(PLAYER1)=0
				If VELWE=0 VELE=1
			ElseIf CountCollisions(PLAYER1)&gt;0
				velE=velE+walkspeed
				If velE&gt;5*walkspeed velE=5*walkspeed
			End If
		ElseIf KeyDown(mRT)=False
			If CountCollisions(PLAYER1)&gt;0
				velE=velE-walkspeed
				If velE&lt;0 velE=0
			End If
		End If

		;same as north and south except this is now east and west
		velWE=velE-velW
		If velwe&lt;&gt;0 tmpdir=-(Sgn(velwe)-1)/2 ;calculate char dir using valwe(moving left or right)
		If tmpdir&lt;&gt;plyrdir
			plyrdir=tmpdir
			;change direction texture of sprite.
			direction(player1,plyr1tex,tmpdir)
		End If

		;CHARACTER MOVEMENT
		MoveEntity player1,Float(velwe)/160,Float(velud)/32,Float(velns)/160
End Function


Function DIRECTION(SPR,TEX,FRM);CHANGE IMAGE ON SPRITE
	EntityTexture SPR,TEX,FRM
End Function

Function flush() ;flush all inputs from memory
	FlushKeys ;clear keyboard presses
	FlushMouse ;clear mouse clicks
	FlushJoy ;clear joystick presses
End Function

Function restorebmp()
	;set gfxmode
	Graphics 320,240,16,3
	;Create Image
	tmp=CreateImage(64,32)
	;set buffer to image
	SetBuffer ImageBuffer(tmp)
	;if char1.bmp doesn't exist... make it
	If FileType("char1.bmp")=2 DeleteDir "char1.bmp"
	If FileType("char1.bmp")=0
		Cls
		Restore char
		For v=0 To 31
			For h=0 To 31
				Read c
				If c&gt;0
					Color (c-1)*84+7*(c=1),(c-1)*84+7*(c=1),(c-1)*84+7*(c=1)
					Plot h,v
					Plot 63-h,v
				End If
			Next
		Next
		SaveImage tmp,"char1.bmp"
	End If
	;if laser1.bmp doesn't exist... make it
	If FileType("laser1.bmp")=2 DeleteDir "laser1.bmp"
	If FileType("laser1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Rect 8,c+12,16,7-2*c
			Rect c+12+32,8,7-2*c,16
		Next
		SaveImage tmp,"laser1.bmp"
	End If
	;if bullet1.bmp doesn't exist... make it
	If FileType("bullet1.bmp")=2 DeleteDir "bullet1.bmp"
	If FileType("bullet1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Oval c*3/2+8,c*3/2+8,16-2*(c*3/2),16-2*(c*3/2)
			Oval c+2+32+8,c+2+8,16-2*(c+2),16-2*(c+2)
		Next
		SaveImage tmp,"bullet1.bmp"
	End If
End Function

Function UserInput()
Color 255,255,255
For x=0 To 6
	Cls
	Text 10, 0,"   Up:"
	Text 10,12," Down:"
	Text 10,24," Left:"
	Text 10,36,"Right:"
	Text 10,48," Jump:"
	Text 10,60,"Shoot:"
	If X&lt;6 Text 10,84,"[ESC] Use Defaults"
	
	If x&lt;6 Rect 58,x*12,8,12
	If x&gt;0 Text 58,0,mup
	If x&gt;1 Text 58,12,mdn
	If x&gt;2 Text 58,24,mlt
	If x&gt;3 Text 58,36,mrt
	If x&gt;4 Text 58,48,mjp
	If x&gt;5 Text 58,60,mst
	If x=6 Text 10,84,"Press any key to continue..."
.redo
	confirm=False
	FlushKeys
	Repeat
		For keyz=0 To 255
			If KeyHit(keyz)
				If x=0 mup=keyz
				If x=1 mdn=keyz
				If x=2 mlt=keyz
				If x=3 mrt=keyz
				If x=4 mjp=keyz
				If x=5 mst=keyz
				confirm=True
			End If
		Next
	Until confirm=True
	If X&lt;6
		If MUP=1 Or MDN=1 Or MLT=1 Or MRT=1 Or MJP=1 Or MST=1
			mup=200
			MDN=208
			mlt=203
			mrt=205
			mjp=57
			mst=28
			x=5
		End If
	End If	
	If x=0
		If mup=15 Goto redo
	ElseIf x=1
		If mdn= 15 Goto redo
		If mdn=mup Goto redo
	ElseIf x=2
		If mlt= 15 Goto redo
		If mlt=mup Goto redo
		If mlt=mdn Goto redo
	ElseIf x=3
		If mRt= 15 Goto redo
		If mRT=mup Goto redo
		If mRT=mdn Goto redo
		If mRT=mLT Goto redo
	ElseIf x=4
		If mJP= 15 Goto redo
		If mJP=mup Goto redo
		If mJP=mdn Goto redo
		If mJP=mLT Goto redo
		If mJP=mRT Goto redo
	ElseIf x=5
		If mST= 15 Goto redo
		If mST=mup Goto redo
		If mST=mdn Goto redo
		If mST=mLT Goto redo
		If mST=mRT Goto redo
		If mST=mJP Goto redo
	End If
Next
End Function
Function CreateGround()
PLANE1TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE1TEX)
Color 84,84,252
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,210-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 0,0,168
Line 0,0,31,31
Line 0,31,31,0

PLANE2TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE2TEX)
Color 252,84,84
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 210-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 168,0,0
Line 0,0,31,31
Line 0,31,31,0
SetBuffer BackBuffer()

;battlefield
btlcube=CreateCube()
ScaleEntity btlcube,12,Float(1)/256,4
ScaleTexture plane1tex,Float(1)/24,Float(1)/8
EntityTexture btlcube,plane1tex
PositionEntity btlcube,0,0,0
EntityType btlcube,clsn_grnd
;exitfield
exitcube=CreateCube()
ScaleEntity exitcube,12+8,Float(1)/256,4+8
ScaleTexture plane2tex,Float(1)/40,Float(1)/24
EntityTexture exitcube,plane2tex
PositionEntity EXITcube,0,-Float(1)/256,0
EntityType EXITcube,clsn_grnd

End Function

Function createplayer()
	player1=CreateSprite()
	plyr1tex=LoadAnimTexture("char1.bmp",7,32,32,0,2)
	EntityTexture player1,plyr1tex,0
	SpriteViewMode player1,2
	PositionEntity player1,0,5,0
	ScaleSprite player1,0.03125*sizex,0.03125*sizey
	EntityRadius player1,0.0078125*sizex,0.015625*sizey
	EntityType player1,clsn_plyr
	;delete when done------------------
	;it shows a sphere around the character. basically where the character takes damage
	sphere=CreateSphere(32,player1)
	EntityAlpha sphere,.5
	ScaleEntity sphere,0.0078125*sizex,0.015625*sizey,0.0078125*sizex
	PositionEntity sphere,0,0,0
	;--------------------------
	;player camera
	camera=CreateCamera(player1)
	CameraViewport camera,0,0,GraphicsWidth(),GraphicsHeight()
	CameraProjMode camera,2
	PositionEntity camera,0,10,-10
	RotateEntity camera,45,0,0
	CameraZoom camera,.625
End Function


.char
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,4,4,1,4,4,4,1,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,3,3,1,1,4,1,4,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,4,1,1,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,1,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
</textarea><br><br><br>As for climbing, i want the character to be able to climb on all sides. Even bottom. (this is only for some characters but i need to figure it out first). I figured out jumping from the castle demo as you can see.  I thought my code was somewhat organized but guess not now that i really look at it.<br><br>as for types, this is my first time using types so plz bare with me. I only used it for the cubes for now. One step at a time.<br><br>what do i mean by climbing?<br>like spider-man.  Some characters in my game have that wall crawl ability.<br><br>By accident, i figured out how to wall jump. But that needs 2 walls close to eachother.  That ability is cool too. But i got that one (in another code doc). i need actual wall-crawler climbing.<br><br>and what you said before<br>"If so, you need to detect when you are in a condition to climb a surface. You need to detect what are the edges you can climb on to, and where you want the character to be in relation to each edge for him to be able to grab it."<br><br>i never thought of that yet either. Good pointing out.<br><br>I am sorry that you could not understand my code tho. I thought it was straight forward. Yes with the loading stuff all out in the open it looked terrifying. The loop seemed ok.  Move Jump/Up/Down/Left/Right. I tried looking at the castle demo for the organization. Since I do not fully understand the types, everything was put in the open. <br><br></td></tr></table><br>
<a name="1200600"></a>

<a name="1200601"></a>

<a name="1200602"></a>

<a name="1200603"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi. <br>The code looks better, and I can understand what some of the variables are used for based on the comments. You should always aim for that and beyond (for instance, using the TAB key to align anything and everything).<br><br>The reason I suggest you use Types is because you can organize collections of variables with them. <br>I see a few other variables that also belong to the player but are declared in other parts, like 'plyrdir' and 'WALKSPEED'. All these could be stored in a type.<br><br><pre class=code>Type Character
	
	;Sprite handle for the character.
	
	Field entity
	
	;Movement information.
	
	Field walkSpeed
	Field dir#
	Field velUD
	Field tmpVUD
	Field velNS
	Field velN
	Field velS
	Field velWE
	Field velW
	Field velE

	;Skill information.
	
	Field doubleJumpSpeed#	;Speed with which the character does the ...
	Field doubleJump	;Flag that indicates if the character is ...
 
	Field grabbedWall	;Points to the handle of the mesh grabbed, or points to ZERO in case there's none grabbed. 
	Field grabbedNX#	;Components of the normal of the grabbed triangle.
	Field grabbedNY#	;"
	Field grabbedNZ#	;"
	Field helperPivot		;Handle to a Pivot used to help with the oriented movement.
	
End Type</pre><br>Since you'll most likely have several characters in your game, you can do...<br><pre class=code>Global Player.Character = New Character

Global Enemy1.Character = New Character
Global Enemy2.Character = New Character

;Or even better, make functions for handling the creation of characters. 
;For example, a function that creates a Character instance, sets it up as an enemy 
;and returns the handle of this instance.
;This way you can use it like so:

Global Enemy1.Character = CreateCharacter( x, y, z, skill1, "Orc" )</pre><br>Another way to consider Types is by breaking down functionality. Say the Player is a sort of character, and the enemies are also another sort of character, but the player and enemies have different settings.<br>Instead of having just one "Character" class for everything, you can break classes up into "building blocks" like this:<br><pre class=code>Type CharacterInfo

	;Information that each character should have.

	Field entity
	Field name$
	Field health
	Field armor

End Type

Type CharacterMovement
	
	;Movement information.
	
	Field walkSpeed
	Field dir#
	Field velUD
	Field tmpVUD
	Field velNS
	Field velN
	Field velS
	Field velWE
	Field velW
	Field velE

End Type

Type CharacterSkill
	
	;Skills information. Only used on the player and bosses.
	
	Field doubleJumpSpeed#	;Speed with which the character does the ...
	Field doubleJump	;Flag that indicates if the character is ...
 
	Field grabbedWall	;Points to the handle of the mesh grabbed, or points to ZERO in case there's none grabbed. 
	Field grabbedNX#	;Components of the normal of the grabbed triangle.
	Field grabbedNY#	;"
	Field grabbedNZ#	;"
	Field helperPivot		;Handle to a Pivot used to help with the oriented movement.

End Type</pre><br>The enemies might only have movement information, but the player might have both movement and skill information:<br><pre class=code>Type Enemy
		
	Field info.CharacterInfo
	Field move.CharacterMovement

End Type

Type Player

	Field info.CharacterInfo
	Field move.CharacterMovement
	
	Field skills.CharacterSkills

End Type
</pre><br>Just remember to create instances of each "sub" Type along with the main instance:<br><pre class=code>
Global myPlayer.Player = New Player
myPlayer.info = New CharacterInfo
myPlayer.move = New CharacterMove
myPlayer.skills = New CharacterSkills

;Or alternatively, have a single function that does all the work above of creating instances 
;and filling them with values, so creating a player becomes:

Global myPlayer.Player = CreateNewPlayer( playerSprite, "John", 100, 75 )
PositionEntity( myPlayer\info\entity, 10, 0, 30 )</pre> <br><br></td></tr></table><br>
<a name="1200604"></a>

<a name="1200605"></a>

<a name="1200606"></a>

<a name="1200607"></a>

<a name="1200608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Regarding the wall climbing, try something along these lines.<br>You can identify the class instance of an obstacle the player has collided with if you encode the Handle to that obstacle's instance in its entity's name.<br>Something like <b>NameEntity(</b> Wall\info\entity, Str( Handle( Wall ) ) <b>)</b><br><br><pre class=code>;Somewhere in an update section...

col = EntityCollided( Player\info\entity, ObstacleType )

;If the player collided with an obstacle.

If col Then

	;Identify the obstacle's instance.

	Local tempName$ = EntityName( col )
	Local tempWall.Obstacle = Object.Obstacle( Int(tempName) )
	
	If tempWall\obstacle\isGrabbable Then
		
		Player\skills\grabbedWall = tempWall\info\entity 	

		;Identify the obstacle's collision contact information.
	
		For index = 1 to CountCollisions( Player\info\entity )
		
			If col = CollisionEntity( Player\info\entity, index ) Then
				Player\skills\grabbedNX = CollisionNX( Player\info\entity, index ) 	
				Player\skills\grabbedNY = CollisionNY( Player\info\entity, index )
				Player\skills\grabbedNZ = CollisionNZ( Player\info\entity, index )

				Exit
			EndIf
		
		Next
	EndIf
EndIf



;A Pivot is necessary for this. Create one, don't parent it to anything, just leave it still.

;First, divide the speeds like the original code.

Player\move\velWE = Player\move\velWE / 160.0
Player\move\velUD = Player\move\velUD / 32.0
Player\move\velNS = Player\move\velNS / 160.0

;If the player is grabbing a wall, make him climb it.

If Player\skills\grabbedWall Then

	;Align the pivot to the normal of the wall being crawled.

	AlignToVector( Player\skills\helperPivot, Player\skills\grabbedNX, Player\skills\grabbedNY, Player\skills\grabbedNZ, 2 )
	
	;Transform the player's movement speeds by this pivot.

	TFormPoint( Player\move\velWE, Player\move\velUD, Player\move\velNS, 0, Player\skills\helperPivot ) ;You may need to change the order of the speeds in this TForm command.
	Player\move\velWE = TFormedX()
	Player\move\velUD = TFormedY()
	Player\move\velNS = TFormedZ()

EndIf

;Proceed to move the player as usual.

MoveEntity( Player\info\entity, Player\move\velWE, Player\move\velUD, Player\move\velNS )</pre>About Types in Blitz3D: <a href="http://home.cmit.net/rwolbeck/programmingtutorial/reference/types.htm" target="_blank">http://home.cmit.net/rwolbeck/programmingtutorial/reference/types.htm</a><br><br>About the Object and Handle commands: <a href="http://blitzbasic.com/Community/post.php?topic=52936#591655" target="_blank">http://blitzbasic.com/Community/post.php?topic=52936#591655</a> <br><br></td></tr></table><br>
<a name="1200762"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> im going to have to play around with this for a few days. All i can say is that i find arrays way simpler eheh. But ya i will give it a shot. Gimme a few days and lets see what happens <br><br></td></tr></table><br>
<a name="1200763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> There are other ways to make the climbing, it depends on what you want. <br>That one above is more complex (but the code is incomplete nonetheless) - it's for when you have walls that may be tilted.<br><br>If the walls in your game are always straight, you can simplify the climbing by making the character only move up (any value in its Y axis). <br><br></td></tr></table><br>
<a name="1201031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok.  Yes the walls are always vertical. But i was reading the code there is something i dont understand about it<br><br><br>EntityCollided( Player\info\entity, ObstacleType )<br><br>you never mentioned about a variable stating an obstacle type.  do i put a countcollisions there or what? <br><br></td></tr></table><br>
<a name="1201034"></a>

<a name="1201035"></a>

<a name="1201036"></a>

<a name="1201037"></a>

<a name="1201038"></a>

<a name="1201039"></a>

<a name="1201040"></a>

<a name="1201041"></a>

<a name="1201095"></a>

<a name="1201097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ObstacleType = CLSN_OBJS.<br><br>But now that you mention it, the following is a better way to check for a climbing condition. It's the opposite way of what you're using to check for ground collisions, so it's something you're familiar with:<br><pre class=code>;This should be declared at the top.
Global climbingSomething% = 0

;The following should go inside UpdatePlayer, inserted between the "jump hit" and "move up/north" blocks.

If Not climbingSomething Then
	
	Local heCanClimb = False
	For checkAllCollisions = 1 To CountCollisions( player1 )
	
		;Identify the type of object collided by using the collision normal.
		;If the normal points horizontally, the player can only have collided
		;against a wall.
	
		If Abs( CollisionNY( player1, checkAllColisions ) ) &lt; 0.001 Then
			
			;If the player is colliding against a wall, he can climb it if he wants to.
			heCanClimb = True	

		EndIf

	Next
	
	;If the player is colliding with at least one wall and the climbing button is pressed, begin climbing the wall.
	If heCanClimb Then climbingSomething = KeyDown( climbSkillKey )

Else
	;Update the state in case the player wants to let go of the wall.
	climbingSomething = KeyDown( climbSkillKey ) 
EndIf

;CHARACTER MOVEMENT.
;Move the character normally if he's not climbing anything, or if he is, move him up
;with the maximum walking speed.

If climbingSomething then
	If velWE Or velNS Then MoveEntity( player1, 0, (5*walkspeed)/160.0, 0 ) 
Else
	MoveEntity( player1, velwe/160.0, velud/32.0, velns/160.0 )	
EndIf</pre>EDIT: Updated the code. <br><br></td></tr></table><br>
<a name="1201091"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i am definitely going to give this one a try. I never thought of holding a key down for climbing.  I think that is brilliant. This way the player can choose to climb a wall or not. Thanx Kryzon. <br><br></td></tr></table><br>
<a name="1201453"></a>

<a name="1201600"></a>

<a name="1201601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did try your code Kryzon, and the character went up and up and up. maybe i added it in wrong or in the wrong places.<br><br>well this is what i came up with. It is still a work in progress. I even got the character to jump off walls.<br><br>here is the climbing code so far.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Type Blocks
	Field entity,Red,Grn,Blu,SizX#,SizY#,SizZ#
End Type 

Global sizex=16*1,sizey=16*1,plyrdir=0,WALKSPEED=2,tmpdir,plyr1tex ;PLAYER'S WALKING SPEED
Global camera;plyr camera
Global player1;entity

Global rota
Global climbsomething

Global jroutine,croutine

;player1 velocities.
;velud is always subtracted by 1 (gravity)
;jumpcharge is used for charged jumping
;velns=north south velocity combined
;veln=north velocity up
;vels=south velocity down
;when up and down are pressed the velocity slows down to a stop
;velwe=west east velocity combined
;velw=west velocity
;vele=east velocity
;when left and right are pressed the velocity slows down to a stop
Global velud,velu,veld,jumpcharge,velns,veln,vels,velwe,velw,vele


Global mup=200,MDN=208,mlt=203,mrt=205,mjp=57,mst=28
;input user keys here before the program starts
UserInput

;ADDED DATA---------------------------------------
RESTOREBMP ;CREATE CHARACTGER AND BULLET AND BEAM
;-------------------------------------------------

Const PERIOD=32 ;(1024/PERIOD) = FPS (FRAMES PER SECOND)

;SET GRAPHICS MODE AND LOAD STUFF HERE.
Graphics3D 640/2,480/2,16,3

Global TIME=MilliSecs()-PERIOD,ELAPSED,FRAMETICKS,TWEEN#
;TIME = CALCULATE TIME PERIOD
;ELLAPSE = TIME ELLAPSED (TIME PASSED) This changes throughout the program
;FRAMETICKS = How many frames have ellapsed (passe)
;TWEEN# = used to get inbetween frames


;ADDED DATA--------------------------------------------------------------------
Const CLSN_PLYR=1,CLSN_OBJS=2,CLSN_GRND=3
Collisions CLSN_PLYR,CLSN_OBJS,2,2
Collisions CLSN_PLYR,CLSN_GRND,2,2

AmbientLight 84,168,252

PLANE1TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE1TEX)
Color 84,84,252
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,210-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 0,0,168
Line 0,0,31,31
Line 0,31,31,0

PLANE2TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE2TEX)
Color 252,84,84
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 210-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 168,0,0
Line 0,0,31,31
Line 0,31,31,0

sprite=LoadAnimImage("char1.bmp",32,32,0,2)
TFormFilter 0
ScaleImage sprite,2,2
;------------------------------------------------------------------------------

SetBuffer BackBuffer() ;Double buffering


;ADDED DATA--------------------------------------------------------------------
;
;;cubes
;cube=CreateCube()
;EntityColor cube,1,1,255
;ScaleEntity cube,.5,.5,.5
;PositionEntity cube,-5,1.5,0
;EntityType cube,clsn_objs
;
;cube=CreateCube()
;EntityColor cube,255,1,1
;ScaleEntity cube,.25*2,.25*2,.25*2
;PositionEntity cube,0,.25*2,0
;EntityType cube,clsn_objs
;
;cube=CreateCube()
;EntityColor cube,1,255,1
;ScaleEntity cube,.25*6,.25*12,.25*6
;PositionEntity cube,5,.25*12,0
;EntityType cube,clsn_objs
;
;create cubes


For y=0 To 6-4
	wall.blocks=New blocks
	wall\entity=CreateCube()
	If y=0
		red=1
		grn=1
		blu=255
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=-5
		posy#=1.5
		posz#=.5
	ElseIf y=1
		red=255
		grn=1
		blu=1
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=0
		posy#=.5
		posz#=1
	ElseIf y=2
		red=1
		grn=255
		blu=1
		sizx#=1.5
		sizy#=3
		sizz#=1.5
		posx#=5
		posy#=3
		posz#=0
	ElseIf y=3
		red=1
		grn=255
		blu=255
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=-1
		posy#=.5
		posz#=0
	ElseIf y=4
		red=255
		grn=255
		blu=1
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=1
		posy#=.5
		posz#=0
	ElseIf y=5
		red=255
		grn=1
		blu=255
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=0
		posy#=.5
		posz#=-1
	ElseIf y=6
		red=1
		grn=1
		blu=1
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=0
		posy#=1.5+0
		posz#=0
	End If
	EntityColor wall\entity,red,grn,blu
	EntityAlpha WALL\entity,Float(1)/(((Y=6)+1)*2)
	ScaleEntity wall\entity,sizx#,sizy#,sizz#
	PositionEntity wall\entity,posx#,posy#,posz#
	EntityType wall\entity,clsn_objs
Next


;  __4__
; iFloori
; i  16 i
; 8 Roof2
; i  32 i
; i__1__i
;_=Nothing=0
;S=SouthWall=1
;E=EastWall=2
;N=NorthWall=4
;W=WestWall=8
;U=Floor=16
;D=Roof=32
;

;=32+16+8+4+2+1
;
;
;
;
;




;light
btllight=CreateLight(2)
PositionEntity btllight,0,10,0

Function CREATEPLAYER()
player1=CreateSprite()
plyr1tex=LoadAnimTexture("char1.bmp",7,32,32,0,2)
EntityTexture player1,plyr1tex,0
SpriteViewMode player1,2
PositionEntity player1,0,.5,0
ScaleSprite player1,0.03125*sizex,0.03125*sizey

EntityRadius player1,0.0078125*sizex,0.015625*sizey
EntityType player1,clsn_plyr
;delete when done----------
sphere=CreateSphere(32,player1)
EntityAlpha sphere,.5
ScaleEntity sphere,0.0078125*sizex,0.015625*sizey,0.0078125*sizex
PositionEntity sphere,0,0,0
;--------------------------
;player camera
camera=CreateCamera(player1)
CameraViewport camera,0,0,GraphicsWidth(),GraphicsHeight()
CameraProjMode camera,2
PositionEntity camera,0,10,-10
RotateEntity camera,45,0,0
CameraZoom camera,.5;Float(2+3)/12
End Function
CREATEPLAYER



;battlefield
btlcube=CreateCube()
ScaleEntity btlcube,12,Float(1)/256,4
ScaleTexture plane1tex,Float(1)/24,Float(1)/8
EntityTexture btlcube,plane1tex
PositionEntity btlcube,0,0,0
EntityType btlcube,clsn_grnd

;exitfield
exitcube=CreateCube()
ScaleEntity exitcube,12+8,Float(1)/256,4+8
ScaleTexture plane2tex,Float(1)/40,Float(1)/24
EntityTexture exitcube,plane2tex
PositionEntity EXITcube,0,-Float(1)/256,0
EntityType EXITcube,clsn_grnd

FLUSH ; FLUSH INPUTS
;------------------------------------------------------------------------------

;BEGINNING OF PROGRAM
jroutine=0
Repeat
	;WAIT FOR ELLAPSED TIME
	Repeat
		ELAPSED=MilliSecs()-TIME
	Until ELAPSED
	
	FRAMETICKS=ELAPSED/PERIOD ;how many 'frames' have elapsed
	
	Tween#=Float(elapsed Mod period)/Float(period) ;fractional remainder
	
	;check each frame
	For checkticks=1 To frameticks
		time=time+period ;goto next time period
		If checkticks=frameticks Then CaptureWorld ; capture each frame in 3d world within time period
		;place images/entties and inputs here--------------------------------------------

		
		;ADDED DATA----------------------------------
		updateplayer()
		;--------------------------------------------
		;--------------------------------------------------------------------------------
		UpdateWorld ;UPDATE YOUR 3D WORLD
	Next

	RenderWorld TWEEN# ; RENDERS CURRENT SCREEN FROM BACKGROUND BUFFER (INCLUDING TWEENING)
	
	;ADDED TEXT---------------------------------------------------------
	Color 255,255,255
	Text 0, 0,EntityX(PLAYER1)+","+EntityY(PLAYER1)+","+EntityZ(PLAYER1)
	Text 200, 0,Int(EntityX(PLAYER1)*16)+","+Int(EntityY(PLAYER1)*16)+","+Int(EntityZ(PLAYER1)*16)
	Text 0,10,VELNS+", "+VELWE+", "+VELUD+", "+tmpdir
	Text 0,20,"[TAB] jumping: "+jroutine
	Text 160,20,"[CAPS] climbing: "+croutine
	Text 20,30,"press [JUMP] to Jump. "+rota
	If jroutine=1 Text 20,40,"hold &amp; release [JUMP] to ChargeJump"

	Text 0,50,velu+","+veld+","+veln+","+vels+","+vele+","+velw+","+tmpdir+","+jumpcharge
	myint=0
	For index=1 To CountCollisions(player1)
	myint=myint+(2^(CollisionTriangle(PLAYER1,index)/2))
	Next
	Text 0,60,myint+","+climbsomething+","+KeyDown(58)


	;-------------------------------------------------------------------
	Flip ; show new screen update




Until KeyHit(1) Or (EntityCollided(Player1,CLSN_GRND)=exitcube) Or (EntityY(player1)&lt;-2 Or EntityY(player1)&gt;11);END MAIN LOOP

;CLEAN UP STUFF
time=0
elapsed=0
frameticks=0
tween#=0
checkticks=0


For wall.blocks = Each blocks
FreeEntity wall\entity
Delete wall
Next


ClearWorld ;remove entities, brushes, textures from memory (anything missed)
ClearCollisions ;clear all collisions from memory
EndGraphics
flush


Function DIRECTION(SPR,TEX,FRM);CHANGE IMAGE ON SPRITE
	EntityTexture SPR,TEX,FRM
End Function

Function flush() ;flush all inputs from memory
	FlushKeys ;clear keyboard presses
	FlushMouse ;clear mouse clicks
	FlushJoy ;clear joystick presses
End Function

Function restorebmp()
	;set gfxmode
	Graphics 320,240,16,3
	;Create Image
	tmp=CreateImage(64,32)
	;set buffer to image
	SetBuffer ImageBuffer(tmp)
	;if char1.bmp doesn't exist... make it
	If FileType("char1.bmp")=2 DeleteDir "char1.bmp"
	If FileType("char1.bmp")=0
		Cls
		Restore char
		For v=0 To 31
			For h=0 To 31
				Read c
				If c&gt;0
					Color (c-1)*84+7*(c=1),(c-1)*84+7*(c=1),(c-1)*84+7*(c=1)
					Plot h,v
					Plot 63-h,v
				End If
			Next
		Next
		SaveImage tmp,"char1.bmp"
	End If
	;if laser1.bmp doesn't exist... make it
	If FileType("laser1.bmp")=2 DeleteDir "laser1.bmp"
	If FileType("laser1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Rect 8,c+12,16,7-2*c
			Rect c+12+32,8,7-2*c,16
		Next
		SaveImage tmp,"laser1.bmp"
	End If
	;if bullet1.bmp doesn't exist... make it
	If FileType("bullet1.bmp")=2 DeleteDir "bullet1.bmp"
	If FileType("bullet1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Oval c*3/2+8,c*3/2+8,16-2*(c*3/2),16-2*(c*3/2)
			Oval c+2+32+8,c+2+8,16-2*(c+2),16-2*(c+2)
		Next
		SaveImage tmp,"bullet1.bmp"
	End If
End Function

Function userinput()
Color 255,255,255
For x=0 To 6
	Cls
	Text 10, 0,"   Up:"
	Text 10,12," Down:"
	Text 10,24," Left:"
	Text 10,36,"Right:"
	Text 10,48," Jump:"
	Text 10,60,"Shoot:"
	If X&lt;6 Text 10,84,"[ESC] Use Defaults"
	
	If x&lt;6 Rect 58,x*12,8,12
	If x&gt;0 Text 58,0,mup
	If x&gt;1 Text 58,12,mdn
	If x&gt;2 Text 58,24,mlt
	If x&gt;3 Text 58,36,mrt
	If x&gt;4 Text 58,48,mjp
	If x&gt;5 Text 58,60,mst
	If x=6 Text 10,84,"Press any key to continue..."
.redo
	confirm=False
	FlushKeys
	Repeat
		For keyz=0 To 255
			If KeyHit(keyz)
				If x=0 mup=keyz
				If x=1 mdn=keyz
				If x=2 mlt=keyz
				If x=3 mrt=keyz
				If x=4 mjp=keyz
				If x=5 mst=keyz
				confirm=True
			End If
		Next
	Until confirm=True
	If X&lt;6
		If MUP=1 Or MDN=1 Or MLT=1 Or MRT=1 Or MJP=1 Or MST=1
			mup=200
			MDN=208
			mlt=203
			mrt=205
			mjp=57
			mst=28
			x=5
		End If
	End If	
	If x=0
		If mup=15 Goto redo
	ElseIf x=1
		If mdn= 15 Goto redo
		If mdn=mup Goto redo
	ElseIf x=2
		If mlt= 15 Goto redo
		If mlt=mup Goto redo
		If mlt=mdn Goto redo
	ElseIf x=3
		If mRt= 15 Goto redo
		If mRT=mup Goto redo
		If mRT=mdn Goto redo
		If mRT=mLT Goto redo
	ElseIf x=4
		If mJP= 15 Goto redo
		If mJP=mup Goto redo
		If mJP=mdn Goto redo
		If mJP=mLT Goto redo
		If mJP=mRT Goto redo
	ElseIf x=5
		If mST= 15 Goto redo
		If mST=mup Goto redo
		If mST=mdn Goto redo
		If mST=mLT Goto redo
		If mST=mRT Goto redo
		If mST=mJP Goto redo
	End If
Next
End Function

.char
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,4,4,1,4,4,4,1,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,3,3,1,1,4,1,4,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,4,1,1,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,1,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0


Function UpdatePlayer()
		If KeyHit(15) jroutine=Not jroutine ;tab ;toggles jumping routines
		If KeyHit(58) croutine=Not jroutine ;(croutine+1)Mod 3
;ceiling 32
;floor 16
;left  8
;BACK  4
;right 2
;FRONT 1


	WallCollide=0;CHECK FOR A WALL COLLISION
	For checkallCollisions=1 To CountCollisions(player1)
		WallCollide=WallCollide+(2^(CollisionTriangle(PLAYER1,checkallCollisions)/2))
	Next

	;CLIMBING ACTIVATED
	climbsomething=KeyDown(mst)*(croutine=1)

	;if no collision or floor collision then keep rotation=0 (default)
	If wallcollide=0 Or (wallcollide/16)Mod 2=1 rota=0
	If croutine=0 rota=0
	If climbsomething
			If wallcollide Mod 2=1 ROTA=1;FRONT WALL
			If(wallcollide/4)Mod 2=1 ROTA=3;BACK WALL
			If(wallcollide/2)Mod 2=1 ROTA=2;RIGHT WALL
			If(wallcollide/8)Mod 2=1 ROTA=4;LEFT WALL
			If(wallcollide/32)Mod 2=1 ROTA=5;CEILING/ROOF
	End If




				If rota=0 velud=veluD-5;FLOOR GRAVITY (DEFAULT)
				If rota=1 velns=velns+5;FRONT WALL GRAVITY (climbing front wall)
				If rota=2 velWE=velWE-5;RIGHT WALL GRAVITY (climbing right wall)
				If rota=3 velns=velns-5;BACK WALL GRAVITY (climbing back wall)
				If rota=4 velWE=velWE+5;LEFT WALL GRAVITY (climbing left wall)
				If rota=5 velud=veluD+5;CEILING GRAVITY (climbing ceiling wall)

				For checkallCollisions=1 To CountCollisions(player1);check for any collision

					If ROTA=0;FLOOR GRAVITY
						If CollisionNY(player1,checkallcollisions)&gt;0;feet check
							velud=-5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&lt;0;head check
							velud=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=1;FRONT WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
							velns=5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&gt;0;head check
							velns=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=2;RIGHT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&gt;0;feet check
							velWE=-5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&lt;0;head check
							velWE=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=3;BACK WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
							velns=-5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&lt;0;head check
							velns=-5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=4;LEFT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&lt;0;feet check
							velWE=5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&gt;0;head check
							velWE=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=5;ceiling GRAVITY
						If CollisionNY(player1,checkallcollisions)&lt;0;feet check
							velud=5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&gt;0;head check
							velud=5;reset vertical velocity
							Exit
						End If
					End If
				Next


				;jump hit
				If KeyHit(mjp);standard jumping
					For checkallCollisions=1 To CountCollisions(player1);(all collisions)
						If rota=0;Floor
							If CollisionNY(player1,checkallcollisions)&gt;0;feet check
								velud=8*5;standard jump velocity
								Exit
							End If
						ElseIf rota=1;front
							If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
								vels=5*walkspeed;use standard walking speed for momentum
								veln=0
								velud=8*5
								Exit
							End If
						ElseIf rota=2;right
							If CollisionNX(player1,checkallcollisions)&gt;0;feet check
								vele=5*walkspeed;use standard walking speed for momentum
								velw=0
								velud=8*5
								Exit
							End If
						ElseIf rota=3;back
							If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
								veln=5*walkspeed;use standard walking speed for momentum
								vels=0
								velud=8*5
								Exit
							End If

						ElseIf rota=4;left
							If CollisionNX(player1,checkallcollisions)&lt;0;feet check
								velw=5*walkspeed;use standard walking speed for momentum
								vele=0
								velud=8*5
								Exit
							End If
						ElseIf rota=5;Ceiling
							If CollisionNY(player1,checkallcollisions)&lt;0;feet check
								velud=-8*5;standard jump velocity
								Exit
							End If
						End If
					Next
					rota=0
				End If
				;charge jump (press) (NO CHARGE JUMPING OFF OF WALLS)
				If KeyDown(mjp)=True;charged jumping when key is held
					jumpcharge=jumpcharge+5*(jroutine=1)
					If jumpcharge&lt;8*5 jumpcharge=8*5
					If jumpcharge&gt;14*5 jumpcharge=14*5;max jump veloctiy ;8
				ElseIf KeyDown(mjp)=False;when key is released, execute jump
					For checkallCollisions=1 To CountCollisions(player1)
						If jroutine=1
							If rota=0;standard jump charge
								If CollisionNY(player1,checkallcollisions)&gt;0;feet check
									velud=jumpcharge;transfer tempvelocity to jump velocity
									Exit
								End If
							End If
						End If
					Next
					jumpcharge=-1*5
				End If



				;move up/north
				If KeyDown(mup)=True;up key is held;(speed up to max walk speed)
					If CountCollisions(PLAYER1)=0;if in the air, only increase velocity to 1
						If rota=0
							If VELNS=0 VELN=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE

						veln=veln+WalkSpeed*(veln&lt;5*walkspeed)-(veln&gt;5*walkspeed)

					End If
				ElseIf KeyDown(mup)=False;up key is released (slow down to a stop)
					If CountCollisions(PLAYER1)&gt;0;when on ground
						veln=veln-walkspeed*(veln&gt;0)+(veln&lt;0);decrease walking speed to a stop
						If veln&lt;0 veln=0
					End If
				End If

				;move down/south
				If KeyDown(mdn)=True;down key is held
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELNS=0 VELS=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE
						vels=vels+walkspeed*(vels&lt;5*walkspeed)-(vels&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mdn)=False;down key is released slow down to a stop
					If CountCollisions(PLAYER1)&gt;0;when on ground
						vels=vels-walkspeed*(vels&gt;0)+(vels&lt;0)
						If vels&lt;0 vels=0
					End If
				End If

				;north south velocity. keeps everything in balance.
				If ROTA=0 Or ROTA=2 Or ROTA=4 Or rota=5 velns=veln-vels
				If rota=1 velud=veln-vels
				If rota=3 velud=velS-velN
				;commenting on left and right is practically the same as up and down.
				;move left /west
				If KeyDown(mlt)=True
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELWE=0 VELW=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on ground/SURFACE 
						velw=velw+walkspeed*(velw&lt;5*walkspeed)-(velw&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mlt)=False
					If CountCollisions(PLAYER1)&gt;0
						velw=velw-walkspeed*(velw&gt;0)+(velw&lt;0)
						If velw&lt;0 velw=0
					End If
				End If

				;move RIGHT/east
				If KeyDown(mrt)=True
					If CountCollisions(PLAYER1)=0;WHEN IN THE AIR
						If rota=0
							If VELWE=0 VELE=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;WHEN ON A GROUND/SURFACE
						velE=velE+walkspeed*(vele&lt;5*walkspeed)-(velE&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mRT)=False
					If CountCollisions(PLAYER1)&gt;0
						velE=velE-walkspeed*(vele&gt;0)+(velE&lt;0)
						If vele&lt;0 vele=0
					End If
				End If

				;FLOOR,FRONT WALL,BACK WALL,CEILING
				If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 velWE=velE-velW
				;WHEN ON THE RIGHT WALL, LEFT GOES UP RIGHT GOES DOWN
				If rota=2;RIGHT WALL
					velUD=velW-velE
					DIRECTION(PLAYER1,PLYR1TEX,1);FIX ANIMATION TO FACE THE LEFT
				ElseIf rota=4;LEFT WALL
					velUD=velE-velW
					DIRECTION(PLAYER1,PLYR1TEX,0);FIX ANIMATION TO FACE THE RIGHT
				End If


				;KEEP TRACK OF LEFT AND RIGHT DIRECTION
				If velwe&lt;&gt;0 tmpdir=-(Sgn(velwe)-1)/2 ;calculate char dir using valwe(moving left or right)
				If tmpdir&lt;&gt;plyrdir
					plyrdir=tmpdir
					;change direction texture of sprite. IF YOU ARE ON THE FLOOR, FRONT WALL, BACK WALL OR CEILING
					If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 DIRECTION(PLAYER1,PLYR1TEX,PLYRDIR)
				End If



	;character movement
	MoveEntity player1,Float(velwe)/160,Float(velud)/160,Float(velns)/160
End Function
</textarea><br><br>I hope i am on the right track. BTW Thanks Kryzon for all your help and ideas for this so far.<br><br>Anyone reading this post... I recommend to ask Kryzon for some helpful advice. He is definitly one of the best. <br><br></td></tr></table><br>
<a name="1201607"></a>

<a name="1201608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I did try your code Kryzon, and the character went up and up and up. maybe i added it in wrong or in the wrong places.<br><br><br>well this is what i came up with. It is still a work in progress. I even got the character to jump off walls.<br><br>but here is the climbing code so far.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Type Blocks
	Field entity,Red,Grn,Blu,SizX#,SizY#,SizZ#
End Type 

Global sizex=16*1,sizey=16*1,plyrdir=0,WALKSPEED=2,tmpdir,plyr1tex ;PLAYER'S WALKING SPEED
Global camera;plyr camera
Global player1;entity

Global rota
Global climbsomething

Global jroutine,croutine

;player1 velocities.
;velud is always subtracted by 1 (gravity)
;jumpcharge is used for charged jumping
;velns=north south velocity combined
;veln=north velocity up
;vels=south velocity down
;when up and down are pressed the velocity slows down to a stop
;velwe=west east velocity combined
;velw=west velocity
;vele=east velocity
;when left and right are pressed the velocity slows down to a stop
Global velud,velu,veld,jumpcharge,velns,veln,vels,velwe,velw,vele


Global mup=200,MDN=208,mlt=203,mrt=205,mjp=57,mst=28
;input user keys here before the program starts
UserInput

;ADDED DATA---------------------------------------
RESTOREBMP ;CREATE CHARACTGER AND BULLET AND BEAM
;-------------------------------------------------

Const PERIOD=32 ;(1024/PERIOD) = FPS (FRAMES PER SECOND)

;SET GRAPHICS MODE AND LOAD STUFF HERE.
Graphics3D 640/2,480/2,16,3

Global TIME=MilliSecs()-PERIOD,ELAPSED,FRAMETICKS,TWEEN#
;TIME = CALCULATE TIME PERIOD
;ELLAPSE = TIME ELLAPSED (TIME PASSED) This changes throughout the program
;FRAMETICKS = How many frames have ellapsed (passe)
;TWEEN# = used to get inbetween frames


;ADDED DATA--------------------------------------------------------------------
Const CLSN_PLYR=1,CLSN_OBJS=2,CLSN_GRND=3
Collisions CLSN_PLYR,CLSN_OBJS,2,2
Collisions CLSN_PLYR,CLSN_GRND,2,2

AmbientLight 84,168,252

PLANE1TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE1TEX)
Color 84,84,252
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,210-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 0,0,168
Line 0,0,31,31
Line 0,31,31,0

PLANE2TEX=CreateTexture(32,32)
SetBuffer TextureBuffer(PLANE2TEX)
Color 252,84,84
Rect 0,0,32,32
For ALLLINES=0 To 2
	Color 210-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42,42-(ALLLINES Mod 2)*42
	Line ALLLINES,1,ALLLINES+29,30
	Line ALLLINES,30,ALLLINES+29,1
Next
Color 0,0,0
For ALLSQUARES=0 To 3
	Rect ALLSQUARES/2*16,16*(ALLSQUARES Mod 2),16,16,0
Next
Color 168,0,0
Line 0,0,31,31
Line 0,31,31,0

sprite=LoadAnimImage("char1.bmp",32,32,0,2)
TFormFilter 0
ScaleImage sprite,2,2
;------------------------------------------------------------------------------

SetBuffer BackBuffer() ;Double buffering


;ADDED DATA--------------------------------------------------------------------
;
;;cubes
;cube=CreateCube()
;EntityColor cube,1,1,255
;ScaleEntity cube,.5,.5,.5
;PositionEntity cube,-5,1.5,0
;EntityType cube,clsn_objs
;
;cube=CreateCube()
;EntityColor cube,255,1,1
;ScaleEntity cube,.25*2,.25*2,.25*2
;PositionEntity cube,0,.25*2,0
;EntityType cube,clsn_objs
;
;cube=CreateCube()
;EntityColor cube,1,255,1
;ScaleEntity cube,.25*6,.25*12,.25*6
;PositionEntity cube,5,.25*12,0
;EntityType cube,clsn_objs
;
;create cubes


For y=0 To 6-4
	wall.blocks=New blocks
	wall\entity=CreateCube()
	If y=0
		red=1
		grn=1
		blu=255
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=-5
		posy#=1.5
		posz#=.5
	ElseIf y=1
		red=255
		grn=1
		blu=1
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=0
		posy#=.5
		posz#=1
	ElseIf y=2
		red=1
		grn=255
		blu=1
		sizx#=1.5
		sizy#=3
		sizz#=1.5
		posx#=5
		posy#=3
		posz#=0
	ElseIf y=3
		red=1
		grn=255
		blu=255
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=-1
		posy#=.5
		posz#=0
	ElseIf y=4
		red=255
		grn=255
		blu=1
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=1
		posy#=.5
		posz#=0
	ElseIf y=5
		red=255
		grn=1
		blu=255
		sizx#=.5
		sizy#=.5*1
		sizz#=.5
		posx#=0
		posy#=.5
		posz#=-1
	ElseIf y=6
		red=1
		grn=1
		blu=1
		sizx#=.5
		sizy#=.5
		sizz#=.5
		posx#=0
		posy#=1.5+0
		posz#=0
	End If
	EntityColor wall\entity,red,grn,blu
	EntityAlpha WALL\entity,Float(1)/(((Y=6)+1)*2)
	ScaleEntity wall\entity,sizx#,sizy#,sizz#
	PositionEntity wall\entity,posx#,posy#,posz#
	EntityType wall\entity,clsn_objs
Next


;  __4__
; iFloori
; i  16 i
; 8 Roof2
; i  32 i
; i__1__i
;_=Nothing=0
;S=SouthWall=1
;E=EastWall=2
;N=NorthWall=4
;W=WestWall=8
;U=Floor=16
;D=Roof=32
;

;=32+16+8+4+2+1
;
;
;
;
;




;light
btllight=CreateLight(2)
PositionEntity btllight,0,10,0

Function CREATEPLAYER()
player1=CreateSprite()
plyr1tex=LoadAnimTexture("char1.bmp",7,32,32,0,2)
EntityTexture player1,plyr1tex,0
SpriteViewMode player1,2
PositionEntity player1,0,.5,0
ScaleSprite player1,0.03125*sizex,0.03125*sizey

EntityRadius player1,0.0078125*sizex,0.015625*sizey
EntityType player1,clsn_plyr
;delete when done----------
sphere=CreateSphere(32,player1)
EntityAlpha sphere,.5
ScaleEntity sphere,0.0078125*sizex,0.015625*sizey,0.0078125*sizex
PositionEntity sphere,0,0,0
;--------------------------
;player camera
camera=CreateCamera(player1)
CameraViewport camera,0,0,GraphicsWidth(),GraphicsHeight()
CameraProjMode camera,2
PositionEntity camera,0,10,-10
RotateEntity camera,45,0,0
CameraZoom camera,.5;Float(2+3)/12
End Function
CREATEPLAYER



;battlefield
btlcube=CreateCube()
ScaleEntity btlcube,12,Float(1)/256,4
ScaleTexture plane1tex,Float(1)/24,Float(1)/8
EntityTexture btlcube,plane1tex
PositionEntity btlcube,0,0,0
EntityType btlcube,clsn_grnd

;exitfield
exitcube=CreateCube()
ScaleEntity exitcube,12+8,Float(1)/256,4+8
ScaleTexture plane2tex,Float(1)/40,Float(1)/24
EntityTexture exitcube,plane2tex
PositionEntity EXITcube,0,-Float(1)/256,0
EntityType EXITcube,clsn_grnd

FLUSH ; FLUSH INPUTS
;------------------------------------------------------------------------------

;BEGINNING OF PROGRAM
jroutine=0
Repeat
	;WAIT FOR ELLAPSED TIME
	Repeat
		ELAPSED=MilliSecs()-TIME
	Until ELAPSED
	
	FRAMETICKS=ELAPSED/PERIOD ;how many 'frames' have elapsed
	
	Tween#=Float(elapsed Mod period)/Float(period) ;fractional remainder
	
	;check each frame
	For checkticks=1 To frameticks
		time=time+period ;goto next time period
		If checkticks=frameticks Then CaptureWorld ; capture each frame in 3d world within time period
		;place images/entties and inputs here--------------------------------------------

		
		;ADDED DATA----------------------------------
		updateplayer()
		;--------------------------------------------
		;--------------------------------------------------------------------------------
		UpdateWorld ;UPDATE YOUR 3D WORLD
	Next

	RenderWorld TWEEN# ; RENDERS CURRENT SCREEN FROM BACKGROUND BUFFER (INCLUDING TWEENING)
	
	;ADDED TEXT---------------------------------------------------------
	Color 255,255,255
	Text 0, 0,EntityX(PLAYER1)+","+EntityY(PLAYER1)+","+EntityZ(PLAYER1)
	Text 200, 0,Int(EntityX(PLAYER1)*16)+","+Int(EntityY(PLAYER1)*16)+","+Int(EntityZ(PLAYER1)*16)
	Text 0,10,VELNS+", "+VELWE+", "+VELUD+", "+tmpdir
	Text 0,20,"[TAB] jumping: "+jroutine
	Text 160,20,"[CAPS] climbing: "+croutine
	Text 20,30,"[JUMP] Jump. [Action] Climb";+rota
	If jroutine=1 Text 20,40,"hold &amp; release [JUMP] to ChargeJump"

	Text 0,50,velu+","+veld+","+veln+","+vels+","+vele+","+velw+","+tmpdir+","+jumpcharge
	myint=0
	For index=1 To CountCollisions(player1)
	myint=myint+(2^(CollisionTriangle(PLAYER1,index)/2))
	Next
	Text 0,60,myint+","+climbsomething+","+KeyDown(58)


	;-------------------------------------------------------------------
	Flip ; show new screen update




Until KeyHit(1) Or (EntityCollided(Player1,CLSN_GRND)=exitcube) Or (EntityY(player1)&lt;-2 Or EntityY(player1)&gt;11);END MAIN LOOP

;CLEAN UP STUFF
time=0
elapsed=0
frameticks=0
tween#=0
checkticks=0


For wall.blocks = Each blocks
FreeEntity wall\entity
Delete wall
Next


ClearWorld ;remove entities, brushes, textures from memory (anything missed)
ClearCollisions ;clear all collisions from memory
EndGraphics
flush


Function DIRECTION(SPR,TEX,FRM);CHANGE IMAGE ON SPRITE
	EntityTexture SPR,TEX,FRM
End Function

Function flush() ;flush all inputs from memory
	FlushKeys ;clear keyboard presses
	FlushMouse ;clear mouse clicks
	FlushJoy ;clear joystick presses
End Function

Function restorebmp()
	;set gfxmode
	Graphics 320,240,16,3
	;Create Image
	tmp=CreateImage(64,32)
	;set buffer to image
	SetBuffer ImageBuffer(tmp)
	;if char1.bmp doesn't exist... make it
	If FileType("char1.bmp")=2 DeleteDir "char1.bmp"
	If FileType("char1.bmp")=0
		Cls
		Restore char
		For v=0 To 31
			For h=0 To 31
				Read c
				If c&gt;0
					Color (c-1)*84+7*(c=1),(c-1)*84+7*(c=1),(c-1)*84+7*(c=1)
					Plot h,v
					Plot 63-h,v
				End If
			Next
		Next
		SaveImage tmp,"char1.bmp"
	End If
	;if laser1.bmp doesn't exist... make it
	If FileType("laser1.bmp")=2 DeleteDir "laser1.bmp"
	If FileType("laser1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Rect 8,c+12,16,7-2*c
			Rect c+12+32,8,7-2*c,16
		Next
		SaveImage tmp,"laser1.bmp"
	End If
	;if bullet1.bmp doesn't exist... make it
	If FileType("bullet1.bmp")=2 DeleteDir "bullet1.bmp"
	If FileType("bullet1.bmp")=0
		Cls
		For c=0 To 3
			Color c*63+63,c*63+63,c*63+63
			Oval c*3/2+8,c*3/2+8,16-2*(c*3/2),16-2*(c*3/2)
			Oval c+2+32+8,c+2+8,16-2*(c+2),16-2*(c+2)
		Next
		SaveImage tmp,"bullet1.bmp"
	End If
End Function

Function userinput()
Color 255,255,255
For x=0 To 6
	Cls
	Text 10, 0,"   Up:"
	Text 10,12," Down:"
	Text 10,24," Left:"
	Text 10,36,"Right:"
	Text 10,48," Jump:"
	Text 10,60,"Action:"
	If X&lt;6 Text 10,84,"[ESC] Use Defaults"
	
	If x&lt;6 Rect 58,x*12,8,12
	If x&gt;0 Text 58,0,mup
	If x&gt;1 Text 58,12,mdn
	If x&gt;2 Text 58,24,mlt
	If x&gt;3 Text 58,36,mrt
	If x&gt;4 Text 58,48,mjp
	If x&gt;5 Text 58,60,mst
	If x=6 Text 10,84,"Press any key to continue..."
.redo
	confirm=False
	FlushKeys
	Repeat
		For keyz=0 To 255
			If KeyHit(keyz)
				If x=0 mup=keyz
				If x=1 mdn=keyz
				If x=2 mlt=keyz
				If x=3 mrt=keyz
				If x=4 mjp=keyz
				If x=5 mst=keyz
				confirm=True
			End If
		Next
	Until confirm=True
	If X&lt;6
		If MUP=1 Or MDN=1 Or MLT=1 Or MRT=1 Or MJP=1 Or MST=1
			mup=200
			MDN=208
			mlt=203
			mrt=205
			mjp=57
			mst=28
			x=5
		End If
	End If	
	If x=0
		If mup=15 Goto redo
	ElseIf x=1
		If mdn= 15 Goto redo
		If mdn=mup Goto redo
	ElseIf x=2
		If mlt= 15 Goto redo
		If mlt=mup Goto redo
		If mlt=mdn Goto redo
	ElseIf x=3
		If mRt= 15 Goto redo
		If mRT=mup Goto redo
		If mRT=mdn Goto redo
		If mRT=mLT Goto redo
	ElseIf x=4
		If mJP= 15 Goto redo
		If mJP=mup Goto redo
		If mJP=mdn Goto redo
		If mJP=mLT Goto redo
		If mJP=mRT Goto redo
	ElseIf x=5
		If mST= 15 Goto redo
		If mST=mup Goto redo
		If mST=mdn Goto redo
		If mST=mLT Goto redo
		If mST=mRT Goto redo
		If mST=mJP Goto redo
	End If
Next
End Function

.char
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,4,4,1,4,4,4,1,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,3,3,1,1,4,1,4,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,4,1,1,3,2,2,1,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,1,2,2,2,1,2,2,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,1,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,1,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0


Function UpdatePlayer()
		If KeyHit(15) jroutine=Not jroutine ;tab ;toggles jumping routines
		If KeyHit(58) croutine=Not croutine ;(croutine+1)Mod 3
;ceiling 32
;floor 16
;left  8
;BACK  4
;right 2
;FRONT 1


	WallCollide=0;CHECK FOR A WALL COLLISION
	For checkallCollisions=1 To CountCollisions(player1)
		WallCollide=WallCollide+(2^(CollisionTriangle(PLAYER1,checkallCollisions)/2))
	Next

	;CLIMBING ACTIVATED
	climbsomething=KeyDown(mst)*(croutine=1)

	;if no collision or floor collision then keep rotation=0 (default)
	If wallcollide=0 Or (wallcollide/16)Mod 2=1 rota=0
	If croutine=0 rota=0
	If climbsomething
			If wallcollide Mod 2=1 ROTA=1;FRONT WALL
			If(wallcollide/4)Mod 2=1 ROTA=3;BACK WALL
			If(wallcollide/2)Mod 2=1 ROTA=2;RIGHT WALL
			If(wallcollide/8)Mod 2=1 ROTA=4;LEFT WALL
			If(wallcollide/32)Mod 2=1 ROTA=5;CEILING/ROOF
	End If




				If rota=0 velud=veluD-5;FLOOR GRAVITY (DEFAULT)
				If rota=1 velns=velns+5;FRONT WALL GRAVITY (climbing front wall)
				If rota=2 velWE=velWE-5;RIGHT WALL GRAVITY (climbing right wall)
				If rota=3 velns=velns-5;BACK WALL GRAVITY (climbing back wall)
				If rota=4 velWE=velWE+5;LEFT WALL GRAVITY (climbing left wall)
				If rota=5 velud=veluD+5;CEILING GRAVITY (climbing ceiling wall)

				For checkallCollisions=1 To CountCollisions(player1);check for any collision

					If ROTA=0;FLOOR GRAVITY
						If CollisionNY(player1,checkallcollisions)&gt;0;feet check
							velud=-5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&lt;0;head check
							velud=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=1;FRONT WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
							velns=5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&gt;0;head check
							velns=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=2;RIGHT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&gt;0;feet check
							velWE=-5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&lt;0;head check
							velWE=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=3;BACK WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
							velns=-5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&lt;0;head check
							velns=-5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=4;LEFT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&lt;0;feet check
							velWE=5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&gt;0;head check
							velWE=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=5;ceiling GRAVITY
						If CollisionNY(player1,checkallcollisions)&lt;0;feet check
							velud=5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&gt;0;head check
							velud=5;reset vertical velocity
							Exit
						End If
					End If
				Next


				;jump hit
				If KeyHit(mjp);standard jumping
					For checkallCollisions=1 To CountCollisions(player1);(all collisions)
						If rota=0;Floor
							If CollisionNY(player1,checkallcollisions)&gt;0;feet check
								velud=8*5;standard jump velocity
								Exit
							End If
						ElseIf rota=1;front
							If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
								vels=5*walkspeed;use standard walking speed for momentum
								veln=0
								velud=8*5
								Exit
							End If
						ElseIf rota=2;right
							If CollisionNX(player1,checkallcollisions)&gt;0;feet check
								vele=5*walkspeed;use standard walking speed for momentum
								velw=0
								velud=8*5
								Exit
							End If
						ElseIf rota=3;back
							If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
								veln=5*walkspeed;use standard walking speed for momentum
								vels=0
								velud=8*5
								Exit
							End If

						ElseIf rota=4;left
							If CollisionNX(player1,checkallcollisions)&lt;0;feet check
								velw=5*walkspeed;use standard walking speed for momentum
								vele=0
								velud=8*5
								Exit
							End If
						ElseIf rota=5;Ceiling
							If CollisionNY(player1,checkallcollisions)&lt;0;feet check
								velud=-8*5;standard jump velocity
								Exit
							End If
						End If
					Next
					rota=0
				End If
				;charge jump (press) (NO CHARGE JUMPING OFF OF WALLS)
				If KeyDown(mjp)=True;charged jumping when key is held
					jumpcharge=jumpcharge+5*(jroutine=1)
					If jumpcharge&lt;8*5 jumpcharge=8*5
					If jumpcharge&gt;14*5 jumpcharge=14*5;max jump veloctiy ;8
				ElseIf KeyDown(mjp)=False;when key is released, execute jump
					For checkallCollisions=1 To CountCollisions(player1)
						If jroutine=1
							If rota=0;standard jump charge
								If CollisionNY(player1,checkallcollisions)&gt;0;feet check
									velud=jumpcharge;transfer tempvelocity to jump velocity
									Exit
								End If
							End If
						End If
					Next
					jumpcharge=-1*5
				End If



				;move up/north
				If KeyDown(mup)=True;up key is held;(speed up to max walk speed)
					If CountCollisions(PLAYER1)=0;if in the air, only increase velocity to 1
						If rota=0
							If VELNS=0 VELN=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE

						veln=veln+WalkSpeed*(veln&lt;5*walkspeed)-(veln&gt;5*walkspeed)

					End If
				ElseIf KeyDown(mup)=False;up key is released (slow down to a stop)
					If CountCollisions(PLAYER1)&gt;0;when on ground
						veln=veln-walkspeed*(veln&gt;0)+(veln&lt;0);decrease walking speed to a stop
						If veln&lt;0 veln=0
					End If
				End If

				;move down/south
				If KeyDown(mdn)=True;down key is held
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELNS=0 VELS=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE
						vels=vels+walkspeed*(vels&lt;5*walkspeed)-(vels&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mdn)=False;down key is released slow down to a stop
					If CountCollisions(PLAYER1)&gt;0;when on ground
						vels=vels-walkspeed*(vels&gt;0)+(vels&lt;0)
						If vels&lt;0 vels=0
					End If
				End If

				;north south velocity. keeps everything in balance.
				If ROTA=0 Or ROTA=2 Or ROTA=4 Or rota=5 velns=veln-vels
				If rota=1 velud=veln-vels
				If rota=3 velud=velS-velN
				;commenting on left and right is practically the same as up and down.
				;move left /west
				If KeyDown(mlt)=True
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELWE=0 VELW=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on ground/SURFACE 
						velw=velw+walkspeed*(velw&lt;5*walkspeed)-(velw&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mlt)=False
					If CountCollisions(PLAYER1)&gt;0
						velw=velw-walkspeed*(velw&gt;0)+(velw&lt;0)
						If velw&lt;0 velw=0
					End If
				End If

				;move RIGHT/east
				If KeyDown(mrt)=True
					If CountCollisions(PLAYER1)=0;WHEN IN THE AIR
						If rota=0
							If VELWE=0 VELE=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;WHEN ON A GROUND/SURFACE
						velE=velE+walkspeed*(vele&lt;5*walkspeed)-(velE&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mRT)=False
					If CountCollisions(PLAYER1)&gt;0
						velE=velE-walkspeed*(vele&gt;0)+(velE&lt;0)
						If vele&lt;0 vele=0
					End If
				End If

				;FLOOR,FRONT WALL,BACK WALL,CEILING
				If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 velWE=velE-velW
				;WHEN ON THE RIGHT WALL, LEFT GOES UP RIGHT GOES DOWN
				If rota=2;RIGHT WALL
					velUD=velW-velE
					DIRECTION(PLAYER1,PLYR1TEX,1);FIX ANIMATION TO FACE THE LEFT
				ElseIf rota=4;LEFT WALL
					velUD=velE-velW
					DIRECTION(PLAYER1,PLYR1TEX,0);FIX ANIMATION TO FACE THE RIGHT
				End If


				;KEEP TRACK OF LEFT AND RIGHT DIRECTION
				If velwe&lt;&gt;0 tmpdir=-(Sgn(velwe)-1)/2 ;calculate char dir using valwe(moving left or right)
				If tmpdir&lt;&gt;plyrdir
					plyrdir=tmpdir
					;change direction texture of sprite. IF YOU ARE ON THE FLOOR, FRONT WALL, BACK WALL OR CEILING
					If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 DIRECTION(PLAYER1,PLYR1TEX,PLYRDIR)
				End If



	;character movement
	MoveEntity player1,Float(velwe)/160,Float(velud)/160,Float(velns)/160
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1201700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well i think i finished my climbing code.<br>change the old UpdatePlayer() with this one:<br><br>i commented the reversed velocity stuff because i do not think i will need it yet. At least to cancel it all i had to comment was the stuff at the top of the function with "Revel" the rest can remain since it wont work without the stuff from the top. I also left it there because i may do a confusion attacck which messes around with the other players movements heh. But that is later on.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;in the global section add
global Revel;Reversed Velocity

Function UpdatePlayer()
	If KeyHit(15) jroutine=Not jroutine ;tab ;toggles jumping routines
	If KeyHit(58) croutine=Not croutine ;(croutine+1)Mod 3

	WallCollide=0;CHECK FOR A WALL COLLISION
	For checkallCollisions=1 To CountCollisions(player1)
		WallCollide=WallCollide+(2^(CollisionTriangle(PLAYER1,checkallCollisions)/2))
	Next

	;CLIMBING ACTIVATED
	climbsomething=KeyDown(mst)*(croutine=1)



	If ROTA&gt;0 CLIMBSOMETHING=0

	;if no collision or floor collision then keep rotation=0 (default)
	If wallcollide=0 Or (wallcollide/16)Mod 2=1 rota=0
	;if no climbing is available then keep rotation at 0
	If croutine=0 rota=0
	;if climbing is active, make sure you are at rotation 0 this way when you are on a wall or ceiling you do not have to keep holding it.
	If climbsomething
		If ROTA=0
			If wallcollide Mod 2=1 ROTA=1;FRONT WALL
			If(wallcollide/4)Mod 2=1 ROTA=3;BACK WALL
			If(wallcollide/2)Mod 2=1 ROTA=2;RIGHT WALL
			If(wallcollide/8)Mod 2=1 ROTA=4;LEFT WALL
			If(wallcollide/32)Mod 2=1 ROTA=5;CEILING/ROOF
		End If
	End If



	;GOING FROM 1 INNER ALL TO ANOTHER ALONG THE INNER CORNERS. YOU CAN NOT DO THAT WITH THE OUTER CORNERS.
	If(ROTA=1 Or ROTA=3);FRONT AND BACK WALLS
		If(WALLCOLLIDE/2)Mod 2=1;RIGHT WALL
			If VELWE&lt;0 ROTA=2
		ElseIf(WALLCOLLIDE/8)Mod 2=1;LEFT WALL
			If VELWE&gt;0 ROTA=4
	;	ElseIf(WALLCOLLIDE/32)Mod 2=1;CEILING and reverse velocities
	;		If velud&gt;0 ROTA=5:REVEL=1-REVEL
		End If
	ElseIf ROTA=2 Or ROTA=4;RIGHT AND LEFT WALLS
		If WALLCOLLIDE Mod 2=1;FRONT WALL
			If VELNS&gt;0 ROTA=1
		ElseIf(WALLCOLLIDE/4)Mod 2=1;BACKWALL WALL
			If VELNS&lt;0 ROTA=3
	;	ElseIf(WALLCOLLIDE/32)Mod 2=1;CEILING and reverse velocities
	;		If velud&gt;0 ROTA=5:REVEL=1-REVEL
		End If
	ElseIf ROTA=5;CEILING
		If wallcollide Mod 2=1;FRONT WALL and reverse velocities(incase of velocities are already reversed)
			If velNS&gt;0 ROTA=1;:REVEL=1-REVEL
		ElseIf(wallcollide/2)Mod 2=1;RIGHT WALL and reverse velocities(incase of velocities are already reversed)
			If velWE&lt;0 ROTA=2;:REVEL=1-REVEL
		ElseIf(wallcollide/4)Mod 2=1;BACK WALL and reverse velocities(incase of velocities are already reversed)
			If velNS&lt;0 ROTA=3;:REVEL=1-REVEL
		ElseIf(wallcollide/8)Mod 2=1;LEFT WALL and reverse velocities(incase of velocities are already reversed)
			If velWE&gt;0 ROTA=4;:REVEL=1-REVEL
		End If
	End If





;  FLOOR      FRONT      RIGHT       BAK        LFT      CEILING
;   U=N        U=U        U=N        U=D        U=N        U=N
;L=W 0 R=E  L=W 1 R=E  L=U 2 R=D  L=W 3 R=E  L=D 4 R=U  L=W 5 R=E
;   D=S        D=D        D=S        D=U        D=S        D=S


;             FRONT
;       RIGHTCEILING_LEFT
;              BAK
;              U=S
;           L=E 6 R=W
;              D=N


				If rota=0 velud=veluD-5;FLOOR GRAVITY (DEFAULT)
				If rota=1 velns=velns+5;FRONT WALL GRAVITY (climbing front wall)
				If rota=2 velWE=velWE-5;RIGHT WALL GRAVITY (climbing right wall)
				If rota=3 velns=velns-5;BACK WALL GRAVITY (climbing back wall)
				If rota=4 velWE=velWE+5;LEFT WALL GRAVITY (climbing left wall)
				If rota=5 velud=veluD+5;CEILING GRAVITY (climbing ceiling wall)

				For checkallCollisions=1 To CountCollisions(player1);check for any collision

					If ROTA=0;FLOOR GRAVITY
						If CollisionNY(player1,checkallcollisions)&gt;0;feet check
							velud=-5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&lt;0;head check
							velud=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=1;FRONT WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
							velns=5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&gt;0;head check
							velns=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=2;RIGHT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&gt;0;feet check
							velWE=-5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&lt;0;head check
							velWE=-5;reset vertical velocity
							Exit
						End If
					ElseIf rota=3;BACK WALL GRAVITY
						If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
							velns=-5;reset vertical velocity
							Exit
						ElseIf CollisionNZ(player1,checkallcollisions)&lt;0;head check
							velns=-5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=4;LEFT WALL GRAVITY
						If CollisionNX(player1,checkallcollisions)&lt;0;feet check
							velWE=5;reset vertical velocity
							Exit
						ElseIf CollisionNX(player1,checkallcollisions)&gt;0;head check
							velWE=5;reset vertical velocity
							Exit
						End If
					ElseIf ROTA=5;ceiling GRAVITY
						If CollisionNY(player1,checkallcollisions)&lt;0;feet check
							velud=5;reset vertical velocity
							Exit
						ElseIf CollisionNY(player1,checkallcollisions)&gt;0;head check
							velud=5;reset vertical velocity
							Exit
						End If
					End If
				Next
				


				;jump hit
				If KeyHit(mjp);standard jumping
					For checkallCollisions=1 To CountCollisions(player1);(all collisions)
						If rota=0;Floor
							If CollisionNY(player1,checkallcollisions)&gt;0;feet check
								velud=8*5;standard jump velocity
								Exit
							End If
						ElseIf rota=1;front
							If CollisionNZ(player1,checkallcollisions)&lt;0;feet check
								vels=5*walkspeed*(Not REVEL);use standard walking speed for momentum
								veln=5*WALKSPEED*REVEL
								If REVEL
									VELS=VELN
									VELN=0
									REVEL=0
								End If
								velud=8*5
								Exit
							End If
						ElseIf rota=2;right
							If CollisionNX(player1,checkallcollisions)&gt;0;feet check
								vele=5*walkspeed*(Not REVEL);use standard walking speed for momentum
								velw=5*WALKSPEED*REVEL
								If REVEL
									VELE=VELW
									VELW=0
									REVEL=0
								End If
								velud=8*5
								Exit
							End If
						ElseIf rota=3;back
							If CollisionNZ(player1,checkallcollisions)&gt;0;feet check
								veln=5*walkspeed*(Not REVEL);use standard walking speed for momentum
								vels=5*WALKSPEED*REVEL
								If REVEL
									VELN=VELS
									VELS=0
									REVEL=0
								End If
								velud=8*5
								Exit
							End If

						ElseIf rota=4;left
							If CollisionNX(player1,checkallcollisions)&lt;0;feet check
								velw=5*walkspeed*(Not REVEL);use standard walking speed for momentum
								vele=5*WALKSPEED*REVEL
								If REVEL
									VELW=VELE
									VELE=0
									REVEL=0
								End If
								velud=8*5
								Exit
							End If
						ElseIf rota=5;Ceiling
							If CollisionNY(player1,checkallcollisions)&lt;0;feet check
								velud=-8*5;standard jump velocity
								Exit
							End If
						End If
					Next
					rota=0
				End If
				;charge jump (press) (NO CHARGE JUMPING OFF OF WALLS)
				If KeyDown(mjp)=True;charged jumping when key is held
					jumpcharge=jumpcharge+5*(jroutine=1)
					If jumpcharge&lt;8*5 jumpcharge=8*5
					If jumpcharge&gt;14*5 jumpcharge=14*5;max jump veloctiy ;8
				ElseIf KeyDown(mjp)=False;when key is released, execute jump
					For checkallCollisions=1 To CountCollisions(player1)
						If jroutine=1
							If rota=0;standard jump charge
								If CollisionNY(player1,checkallcollisions)&gt;0;feet check
									velud=jumpcharge;transfer tempvelocity to jump velocity
									Exit
								End If
							End If
						End If
					Next
					jumpcharge=-1*5
				End If



				;move up/north
				If KeyDown(mup)=True;up key is held;(speed up to max walk speed)
					If CountCollisions(PLAYER1)=0;if in the air, only increase velocity to 1
						If rota=0
							If VELNS=0 VELN=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE

						veln=veln+WalkSpeed*(veln&lt;5*walkspeed)-(veln&gt;5*walkspeed)

					End If
				ElseIf KeyDown(mup)=False;up key is released (slow down to a stop)
					If CountCollisions(PLAYER1)&gt;0;when on ground
						veln=veln-walkspeed*(veln&gt;0)+(veln&lt;0);decrease walking speed to a stop
						If veln&lt;0 veln=0
					End If
				End If

				;move down/south
				If KeyDown(mdn)=True;down key is held
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELNS=0 VELS=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on the ground/SURFACE
						vels=vels+walkspeed*(vels&lt;5*walkspeed)-(vels&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mdn)=False;down key is released slow down to a stop
					If CountCollisions(PLAYER1)&gt;0;when on ground
						vels=vels-walkspeed*(vels&gt;0)+(vels&lt;0)
						If vels&lt;0 vels=0
					End If
				End If

				
				;commenting on left and right is practically the same as up and down.
				;move left /west
				If KeyDown(mlt)=True
					If CountCollisions(PLAYER1)=0;when in air
						If rota=0
							If VELWE=0 VELW=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;when on ground/SURFACE 
						velw=velw+walkspeed*(velw&lt;5*walkspeed)-(velw&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mlt)=False
					If CountCollisions(PLAYER1)&gt;0
						velw=velw-walkspeed*(velw&gt;0)+(velw&lt;0)
						If velw&lt;0 velw=0
					End If
				End If

				;move RIGHT/east
				If KeyDown(mrt)=True
					If CountCollisions(PLAYER1)=0;WHEN IN THE AIR
						If rota=0
							If VELWE=0 VELE=1
						End If
					ElseIf CountCollisions(PLAYER1)&gt;0;WHEN ON A GROUND/SURFACE
						velE=velE+walkspeed*(vele&lt;5*walkspeed)-(velE&gt;5*walkspeed)
					End If
				ElseIf KeyDown(mRT)=False
					If CountCollisions(PLAYER1)&gt;0
						velE=velE-walkspeed*(vele&gt;0)+(velE&lt;0)
						If vele&lt;0 vele=0
					End If
				End If


				If REVEL=0;normal velocities
					;north south velocity. keeps everything in balance.
					If ROTA=0 Or ROTA=2 Or ROTA=4 Or rota=5 velns=veln-vels
					;FLOOR,FRONT WALL,BACK WALL,CEILING
					If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 velWE=velE-velW
					If rota=1 velud=veln-vels
					If rota=3 velud=velS-velN
					;WHEN ON THE RIGHT WALL, LEFT GOES UP RIGHT GOES DOWN
					If rota=2;RIGHT WALL
						velUD=velW-velE
						DIRECTION(PLAYER1,PLYR1TEX,1);FIX ANIMATION TO FACE THE LEFT
					ElseIf rota=4;LEFT WALL
						velUD=velE-velW
						DIRECTION(PLAYER1,PLYR1TEX,0);FIX ANIMATION TO FACE THE RIGHT
					End If
				ElseIf REVEL=1;reversed velocities
					If ROTA=0 Or ROTA=2 Or ROTA=4 Or rota=5 VELNS=VELS-VELN
					If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 VELWE=VELW-VELE

					If rota=3 velud=veln-vels
					If rota=1 velud=velS-velN
					;WHEN ON THE RIGHT WALL, LEFT GOES UP RIGHT GOES DOWN
					If rota=2;LEFT WALL
						velUD=velE-velW
						DIRECTION(PLAYER1,PLYR1TEX,1);FIX ANIMATION TO FACE THE RIGHT
					ElseIf rota=4;RIGHT WALL
						velUD=velW-velE
						DIRECTION(PLAYER1,PLYR1TEX,0);FIX ANIMATION TO FACE THE LEFT
					End If

					;if there is no movement cancel the reversed velocities
					If ROTA=0 Or ROTA=5;floor and ceiling
						If (Abs(VELNS)+Abs(VELWE))=0 REVEL=0
					ElseIf ROTA=1 Or ROTA=3;front and back walls
						If (Abs(VELUD)+Abs(VELWE))=0 REVEL=0
					ElseIf ROTA=2 Or ROTA=4;right and left walls
						If (Abs(VELNS)+Abs(VELUD))=0 REVEL=0
					End If
				End If


				;KEEP TRACK OF LEFT AND RIGHT DIRECTION
				If velwe&lt;&gt;0 tmpdir=-(Sgn(velwe)-1)/2 ;calculate char dir using valwe(moving left or right)
				If tmpdir&lt;&gt;plyrdir
					plyrdir=tmpdir
					;change direction texture of sprite. IF YOU ARE ON THE FLOOR, FRONT WALL, BACK WALL OR CEILING
					If rota=0 Or rota=1 Or ROTA=3 Or ROTA=5 DIRECTION(PLAYER1,PLYR1TEX,PLYRDIR)
				End If



	;character movement
	MoveEntity player1,Float(velwe)/160,Float(velud)/160,Float(velns)/160
End Function
</textarea><br><br>so i guess i am done with this section. Thanx again Kryzon <br><br></td></tr></table><br>
<a name="1201704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> One thing that I did when creating the first alphas of hunted was have climbable textures, when they player collided with something I checked what was hit and then the texture at that position. If its climbable inset climbing flag to true and they player could climb, if they moved away from it then the flash was set to false and they player fell to the floor. <br><br></td></tr></table><br>
<a name="1201729"></a>

<a name="1201730"></a>

<a name="1201731"></a>

<a name="1201732"></a>

<a name="1201733"></a>

<a name="1201734"></a>

<a name="1201735"></a>

<a name="1201736"></a>

<a name="1201737"></a>

<a name="1201738"></a>

<a name="1201739"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fox95871</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bear in mind I am an evil, evil man. But when I've run into problems similar to this, my best solution has often been to eliminate them entirely. Like for example, I was getting a little tired of having to do about 50 frames for walking and running, so I just did some real world testing, that is, never running, and found out that works just fine for me! Even today I found out a place where I usually climb up can easily just be gone around, though I had to do a little searching. I know it's weird to answer like that, it's just I have so many stacks of modules like yours I ended up not even needing at all. Always consider how fun simple games usually are, and how disappointing complicated games tend to be. Keep your creations enjoyable for yourself, too. <br><br></td></tr></table><br>
<a name="1202412"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nexinarus</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I do agree some complicated games are disappointing.  Heck i find that some games now-a-days with great graphics tend to be way too easy. The game play is the most important thing.<br><br>And yes, if i do not enjoy my own game that i have created, i know no one else will.  This is why i am testing things over and over.  If i find i do not need something, i wont use it.  But sometimes just figuring something out, even if i do need help a bit, or a lot does give me a sense of accomplishment. And who knows, if i don't need a specific thing for the current project, i may need it for the next.  If not, i give the code to the community.  If it helps someone great, if not... no big loss.<br><br>for example, for a long time, i tried to figure out jumping for 3D. With lots of questions, asking for help, and reading some blitz example code (castle demo)  I figured out the jumping i wanted.  Even charged jumping, which in my opinion is a bit better than double jump. When i had that completed, It actually felt good that i got to figure out something that I had trouble with, and the best way i thought to give back to the community (blitz), was to add it to the code archieves.  This way if someone needs to figure out jumping in the future, there is something that might help others.<br><br>And no Fox95871, you were not being evil or mean. You were just stating your opinion.  And I am only coding what i do need.  And thank you for your advice. I will keep that in mind. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
