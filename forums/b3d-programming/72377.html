<!DOCTYPE html><html lang="en" ><head ><title >Best Compression for a Blitz3D Network Messages?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Best Compression for a Blitz3D Network Messages?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Best Compression for a Blitz3D Network Messages?</a><br><br>
<a name="808882"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guys, I'm seeking opinions on the best compression/decompression technique for Network messaging in my Blitz3D game. The game will support upto 255 players. I've been eyeballing LZW real hard. All ideas welcomed. <br><br></td></tr></table><br>
<a name="808888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not get it complete and fully functonal first and add compression later? Then you actually have something to benchmark against so you can see at what point compression becomes faster than no compression. It's not as though compression has any fundamental affect on your design, it should be ridiculously easy to add in when it's done, no more difficult than doing it from the start. <br><br></td></tr></table><br>
<a name="808897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gabriel: The network is functional and I'm at point were I need to add it. What techniques are you using? <br><br></td></tr></table><br>
<a name="808903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, well you had this thread saying what the network "will" support rather than "does" support, and you had another thread in GD talking about all the features you planned to add to your networking engine, so I got the impression you weren't quite finished yet.<br><br>I'm not using any compression. I don't need it for the maximum number of players that a game can have. I didn't use any compression in Kick Shot Pool either. <br><br></td></tr></table><br>
<a name="808918"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gabriel:  Sorry for "will" and "does" confusion. What is the number of maximum players fo Kick Shot Pool? Is the gameplay real time or turn-based over the network? My FPSRPG is realtime and the updates include more than just the players orientation. Updates inlcude include messages for all other game objects (ie; doors, triggers, weapons, etc.) <br><br>I know I need compression and I'm looking for answers from other Blitz3D users who have used it. Thanks for your input. <br><br></td></tr></table><br>
<a name="808921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> have you looked at raknet for a complete solution? its pretty good (theres a thread on it in the blitz3d userlib forum) <br><br></td></tr></table><br>
<a name="808926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @boomboom: I have working network code. I'm just looking for more details on compression techniques others have used. I also want to know why they have used them. I'm open to innovation here. <br><br></td></tr></table><br>
<a name="808929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Gabriel: Kick Shot Pool is really nice. <br><br></td></tr></table><br>
<a name="808944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> my bad :) <br><br></td></tr></table><br>
<a name="808949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What is the number of maximum players fo Kick Shot Pool? Is the gameplay real time or turn-based over the network? <br></div><br>Two, and it's realtime. ( You obviously can't *play* realtime, but the networking is realtime. ) I went as far as four when testing ( I was thinking about doubles matches ) but even that's nothing like the numbers a FPS is going to want.<br><br><div class="quote"> @Gabriel: Kick Shot Pool is really nice.<br> <br></div><br>Thanks.<br><br>I'm fairly sure I remember this discussion coming up before and the conclusion being that zip compression was the most practical for networking because of the speed. I'm not 100% sure that LZW was being considered that the time, so I'm not 100% it is slower than zip, but I do recall ( and I could be wrong, but I thought it was Antony Wells ) the person doing it concluded that zip compression was compressed enough to speed up the networking without the compression speed causing a greater slowdown than it was saving.<br><br>Sorry, I can't be of any more help. As I say, none of my games have had anything like that number of players. The only network coding I did with a lot of players was a TCP chat server/client and as you can imagine, speed was not a problem even with 30 or 40 people. <br><br></td></tr></table><br>
<a name="808970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you had access to the Torque engine you could perhaps have a look at how they manage to compress their network messages?  <br><br>Torque's multiplayer was okay from memory. <br><br></td></tr></table><br>
<a name="808979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Matty: Torque Network Model has been a inspiration for my own Network implementation.  I'm using State-change Scoping, Tagged Data, Movement Interpolation, and my own concept of AI Interchange. <br><br>My goal is to pack as much Nfo as i can into 1500 byte packet. Ive been pondering over just using a large Look Up Table. <br><br></td></tr></table><br>
<a name="809338"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally for LAN multiplayer I just use UDP, it seems fast enough for me, I found that the main bottleneck was happening when the "server" computer was slow (on network transactions or on anything else I didn't noticed!), so I just made a very minimal version of my software just updating what it needs and acting as server, that gave me up to 129 "players" (It's not a game but timing and synchronisation is crucial).<br><br>I send all data/updates as a bank, I tried with zip compression but it didn't give me any speed/capabilities boost. I would be curious to know if you have better result with LZW. (or with another packet "design"). <br><br></td></tr></table><br>
<a name="809438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @LAB[au]I'm using UDP as well. Text compression/fast decompression is extremely important on my list. I opted to go with a adhoc form of compression that converts Int/Floats to 1-4 byte Strings, and compresses Text using a <i>Static</i> 4096 English Word LUT (aka Dictionary Compression) available on both Server/Client. The LUT generates a 2 byte index String  for the <i>most commonly used English words</i> (to include chat abbreviations). Integer/Float Strings and Compressed Text Index Strings are then concenated into a single line of text and sent via WriteString().<br><br>Although the network game play for the game im developing with engine is capped at 16 players, I'm designing support for at least 255 players. <br><br></td></tr></table><br>
<a name="809501"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some folks are not using compression. I'm curious as to what type of information they're putting in their network messages and how large their messages are. I would assume a Chat message to be very large without compression :s <br><br></td></tr></table><br>
<a name="809565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I would assume a Chat message to be very large without compression :s  <br></div><br>They're also infrequent and often in non-English languages ;) <br><br></td></tr></table><br>
<a name="809569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I send always the same packet size (for my usage, sometimes it can be pretty large at 1280 bytes per packet, 25 packets/s) . I am padding the packet with information on states of different objects, even if they didn't change, trying to minimize the possible effects of a lost packet. I don't have a chat so I cannot comment on that. <br><br></td></tr></table><br>
<a name="809659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BIG BUG</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does your game work? For maximum efficiency you have to design your net code especially for your game. Use restrictions in your gameplay to save net traffic.<br><br>I don't think compressing your packets will help here. <br>Why would one compress a chat message? It takes around 1000 times more time writing it(as a player) than transfering it. <br><br>Compressing your data makes only sence with a huge amount of it like bitmaps or sounds.<br><br>Send only data that's needed for an accurate gameplay. As a player I don't bother what happens on the other side of the map or if an enemy looks in the right direction if its just one pixel big...<br><br>Elaborate on how your game works, maybe we can give better hints then. <br><br></td></tr></table><br>
<a name="809683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> @BIG BUG: My FPSRPG is a Cooperative Multiplayer RPG. It plays like a Single Player RPG allowing upto 8 friends to join in your Quests realtime.<br><br>NPC AI and Dialog are controlled by the Server. Thus, I transmit NPC &amp; Player movement, Animation, Dialog, and other info to all players participating in Quests. <br><br>For 8 players this is not a big challenge, however,  the server will manage 32 simultaneous Quests for a total of 256 players. <br><br>Another Multiplayer feature is Quest Building in which upto 16+ Players can participate in creating new Quest &amp; Tournament (Deathmatch &amp; CTF) Maps , popuated with Buildings, NPCs, Beast, Items, Keys and Triggers. <br><br>This Quest Building System is at the heart of the Engine/Game System and how I'm creating the initial RPG Quests and Tournament Maps with help of some online buddies. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
