<!DOCTYPE html><html lang="en" ><head ><title >Um... Too much? Or too old?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Um... Too much? Or too old?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Um... Too much? Or too old?</a><br><br>
<a name="950254"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, so I just did this thing which creates a 2D tile-based world in 3D. The grid array is 200x200, so 40,000 elements total. Regular "floor" tiles are sprites rendered in Alpha Blend mode, while "empty" spaces are invisible cubes to generate collisions. Thing is, when I fired it up, I got 3 frames per second.<br><br>My laptop, which is what I was using, is undoubtedly old; 750MHz PIII, and 8MB Gfx memory. However, the camera in this program is so close to the "ground" that there are only about 100 or so tiles/blocks visible onscreen at any given time, and I didn't think offscreen rendering slowed things down much. They're not moving or animated, either, just static.<br><br>SO, have I exceeded the practical limits of gaming by creating 40,000 B3D entities? Have I probably messed something up in my programming? Or is my laptop simply too slow to be useful in this case? <br><br></td></tr></table><br>
<a name="950255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> SO, have I exceeded the practical limits of gaming by creating 40,000 B3D entities? <br></div>Yes, pretty much.<br><br>You said invisible spaces are cubes - why?  A cube is 12 tris.  If you used quads, that'd be 2 tris - a saving of 10 tris per empty space.<br><br>Anyway ,depending on how you've done it, you potentially have 40,000 surfaces, and that's why its going so slow. <br><br></td></tr></table><br>
<a name="950256"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats alot of entities, and thats an old laptop :)  You'll need to create a clever system that doesnt have so many enities loaded at one time.    Blitz isnt happy when you try to make it muscle its way through things.  Instead experiment with alternative methods.  <br><br>For example, do your tiles have to be modified in real time? each one?  If not you can use a grid system to check what tile the player is on istead of checking the entity itself.  If you do this you can take every 10x10 or more and addmesh() them together to get your entity count down.   Assuming you are reusing a texture set on tiles the surface count should stay tolerable with this method.<br><br>As mentioned you can still do grid checks with a simple bank or Dim.. such as DIM MapIndex(200,200) where the value is just an integer referring to the tile type, and knowing the tile size can do simple math on the character xy coordinates to get  what grid location its on. <br><br></td></tr></table><br>
<a name="950265"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd go with add mesh for the empty space for a start, to combine the cubes, and ditch sprites and go for a single surface method, with all the tile textures on the one texture.<br><br>That way, the collision cubes, become one whole mesh and are processed as such. <br><br></td></tr></table><br>
<a name="950266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hm, okay... So if I cut down the number of <i>surfaces</i> using <b>AddMesh()</b>, I can save some speed? In that case, I should be able to modify my old FloodFill routine to combine the cubes... Come to think of it, they only need to be going around the edges of the map... Mumble mumble...<br><br>Oh, yeah, I'm still typing. Heh, whoops. =^_^= Thanks for the info guys, I'll see what I can do &amp; post back if I need more help. Ta! <br><br></td></tr></table><br>
<a name="950328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you use AddMesh(), one of both meshes still exist, you will have to free it after you have done the adding, or you'll have 2 meshes on the same place.<br><br>Yes, when yoy should have 10.000 empty spaces, you would have 10.000 seperate cubes, which translates into 10.000 seperate surfaces.<br>If you would join all those into one mesh, you only have one mesh with one surface, which gives a great speedboost.<br><br>I've done a 3D maze where you can walk through, the size of the maze can be 62x62 tiles.<br>But each tile is added to one big mesh.<br>A maze of 62x62 almost reaches the maximum triangle limit for DX7, which is 65.535 triangles.<br>That maz can be rendered at 100fps minimum, as the graphics card only needs to render 1 object with 1 texture. <br><br></td></tr></table><br>
<a name="950354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Right, I'll try it. Does <b>AddMesh()</b> work with sprites? 'Cuz if not, I'm gonna have to do some thinking..... <br><br></td></tr></table><br>
<a name="950394"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think AddMesh works on sprites.<br><br>Anyway, use quads instead of sprites.  It'll run far faster that way as you'll be able to reduce the number of surfaces to just a handful, instead of thousands of them. <br><br></td></tr></table><br>
<a name="950425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, use single surfaces method :) As mentioned before ;) <br><br></td></tr></table><br>
<a name="950439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm gonna do that today. I feel like SUCH a moron now, when I actually think about it.<br><br>The trouble (in my head) is that I'm porting this game from its lower-quality-but-well-established 2D version. The thing with 2D programming is that when it comes to the graphics, it's only what's on the <i>screen</i> that matters. I sometimes forget that 3D concepts differ in that anything that <i>exists in the game</i> must be updated with each call of <b>UpdateWorld()</b>. When I think about it, an individual cube in every empty space is LUDICROUS!!! I mean, come on; in the game levels, there will be PLENTY of open spaces several tiles across and down, and in places like those, you don't need cubes in the <i>middle</i> of <i>nowhere</i>, because the player'll never get past the ones on the <i>outside</i>!!! And since many of the levels <i>won't</i> be the full 200x200, that means even MORE wasted power with cubes that don't need to be there!<br><br>Anyway, thanks for the help guys (and gals? I never really thought about it, but there are probably a few female programmers here...) I'll update my code today, and hopefully bring the framerate up to a decent 30. Which is the most my laptop'll EVER get in a B3D game rendered in 1024x768x16. Believe me, I've tried. XD <br><br></td></tr></table><br>
<a name="950513"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I got it working. Had a little trouble with the textures, as usual, but I found a workaround that works fine in <i>this</i> scenario, so I'm not worried.<br><br>First off, I cut down the size of the game world. After going over the entire level in blank sample form, I realized that I really did NOT need a 200x200 map for any of the levels in this game. I cut it down to 100x100, so that means one quarter of the original tiles, and one quarter of the original power needed.<br><br>I made my own quad in Wings3D; two sides, four polygons &amp; vertexes. I didn't technically need the second side, but Wings3D doesn't do one-sided models, and the other side won't get rendered by Blitz anyway as it's a backface, so I'm good. Each quad is 4x4 units, and gets textured with sixteen tiles. I spent ages grappling with <b>CreateTexture()</b>, because every time I used <b>CreateTexture()</b> with the Alpha flag it went totally black, but I ended up using the normal Color flag for the texture and setting the quads to blend mode Add. Due to the background in this particular game, this produces equally good, if not better, results.<br><br>Result: I actually got the game running at 60FPS, at a 1024x768x16 resolution, ON MY OLD LAPTOP. 8D I haven't coded in the walls yet, but that shouldn't be too hard. SO, a big thank you for all your help, and I'm getting back to work on <i>Midnight Hacker</i>, this time for REAL!!! I'll start a worklog in due time. Later! <br><br></td></tr></table><br>
<a name="952939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberyoyo</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's not how you display a 2D tile-based world.<br>You have to create as many entities to cover only the area of the screen +1 tile in every direction, then do the math to display only the chunk of the grid that interests you, and have them scroll correctly and jump back when scroll passes to the next tile.<br>It is actually less complex than it sounds and then you have no limit on your number of tiles you can go to 2000x2000 if you want. <br><br></td></tr></table><br>
<a name="953012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Adam Novagen</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know, cyberyoyo, that's... Pretty much what I was doing already, in the 2D version. I would direct your attention to my earlier statement:<br><br><div class="quote"> The thing with 2D programming is that when it comes to the graphics, it's only what's on the screen that matters. <br></div><br>But that's immaterial now anyway, because I'm in the 3D realm, and there IS no onscreen-offscreen as far as <b>UpdateWorld()</b> is concerned. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
