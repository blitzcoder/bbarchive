<!DOCTYPE html><html lang="en" ><head ><title >Swift's shadow sys headache</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Swift's shadow sys headache</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Swift's shadow sys headache</a><br><br>
<a name="697830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://www.alldevs.com/media/system002.gif"><br>Why the heck does the shadow display on the cube, but not on the level?  Yes, I'm setting the level as a shadow receiver. <br><br></td></tr></table><br>
<a name="697836"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mustang</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is your level normal geotmetry? I'm not sure if it works with BSPs for example. <br><br></td></tr></table><br>
<a name="697841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think I might have to end up making a simple four face wall into more sections so they might work properly.  I noticed that if I scale up the cube it will still only receive shadows as if it was a 1x1x1 scale. <br><br></td></tr></table><br>
<a name="697854"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the mesh is a anim mesh, don't you need to setup each child to recieve shadows? <br><br></td></tr></table><br>
<a name="697898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you scale the level using ScaleEntity?  Try ScaleMesh.<br><br>Also, what's the scale of your world?  Ie, how big is that cube?  If your objects are really big, or really small (ie, that cube's size is way more or less than 1 unit) then that could cause issues.  In that case you may need to adjust the  scale or try tweaking a few of the constants in the system, like these ones:<br><br><pre class=code>
; Set this to a value greater than 0 if you wish to nudge the shadow meshes in the direction of the normal
; of the underlying surface.
;
; Nudging the shadow takes care of z fighting issues, but does take a little more processing time.  If you are
; rendering your shadows in a lighting pass before you render your world geometry, then you can probably set 
; this to 0.
;
; The amount you should nudge the shadows depends on the scale of your world.  If 1 unit = 1 meter in your game
; world, then you should set shadow_nudge to be really small!
Global Shadow_Nudge# = 0.01


; This is the amount the add-caster functions multiply the true radius of the mesh by. 
; We fudge the numbers a bit so that when we render the texture the model doesn't touch the edge.  If it did, then
; the UV clamping would create streaks across the whole shadow mesh where there is no shadow.
Global Caster_Radius_Fudge_Factor# = 1.25


; This value pushes the caster clipping plane from it's center, towards the light by some fraction of it's radius.
; If this value is 3, them it pushes the plane towards the light by a third of it's radius.
; If you get no shadows, try setting this value to 1, and then increase it if you see shadows being clipped improperly
; near the base of the shadow casting object.
;
; The caster plane defines where the shadow volume begins.  If it were in the middle of the object, then a crate sitting on the floor
; would have the shadow beneath it clipped along it's diagonal.  So I push it back towards the light a bit to fix that problem.
Global Caster_Plane_Fudge_Factor# = 2.75
</pre><br><br><br>Another thing to consider is that if you want the system to run at a good speed, you'll need to split your level up.  Ceilings for example do not need to recieve shadows, and if the system can cull all the polygons in every room other than the one you're in with a few sphere tests because they're all seperate entities, then that will be much faster than testing each individual polyogn in the level for every shadow every frame.<br><br><br>Btw, the pivot point of your character might matter as well.  Is it at his feet?   That's a no-no.<br><br><br>Sorry it's so finicky, but because I couldn't demand people build things to a certain scale, and because you can't get vertex positions for animated meshes, and just for speed reasons, it had to be done this way. <br><br></td></tr></table><br>
<a name="697972"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The cube is at normal 1x1x1 units.<br>The animated character is shadow casting recursively.<br>The level mesh is being scaled down a lot, since 3D World Studio exports huge levels(I used scaleentity)<br>There is a pivot at the animated mesh's feet, and then the mesh is being parented to the pivot. <br><br></td></tr></table><br>
<a name="697988"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had to really rescale ss Great Britain and then tweak a few paramters but when it all began to fall into place it was wonderful, so keep tweaking.<br><br>BTW which version of the shadow system are you using?<br><br>XML Spy have you tried using another object such as a cube to cast the shadow instead of the animated character?  Sometimes by trying simpler things you can uncover a simple reason for the problems you are experiencing.  This brings it under your control and then you can shape it the way you need it.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="697990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Did you scale the level using ScaleEntity? Try ScaleMesh. <br></div><br><br>Reason is that the result of scaleentity is not the same as scalemesh (mesh scales the real vertex information, entity only changes the transformation matrix - ie in real vertex data, your ground floor just isn't there where it is shown due to transformation ...) <br><br></td></tr></table><br>
<a name="697997"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> "The level mesh is being scaled down a lot, since 3D World Studio exports huge levels(I used scaleentity)"<br><br>Try scalemesh.  I think I evetually made it so both work, but I forget.  I may not have.  <br><br><br>"There is a pivot at the animated mesh's feet, and then the mesh is being parented to the pivot."<br><br>Did you tell the system to cast the shadow from the pivot, or from the character?  If it was the pivot, use the character instead.<br><br><br>You know what else it could be...  It could be that you have no normals for the level mesh.  I'm pretty sure there was no way for me to calculate the vertex normals at runtime, so you have to make sure those are calculated.  There's a command to do that in Blitz...  CalculateNormals() or something I think.  I also put one in the code archives a while back that works better.  It needs the normals so that it knows which direction to move each shadow vertex away from the surface so that the shadow gets drawin in front of the surface.  If they're 0, it's possible that the calculation is just going NAN, cause I may have tried to normalize them because some 3D programs export them the wrong length. <br><br></td></tr></table><br>
<a name="698006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fixed it!<br>to scale the level ScaleMesh must be used<br>Then apply the UpdateNormal function to the level and presto!  it works!.<br><br>Now I gotta fix it so that shadows are not going through walls.  And that I don't cast shadows when I have a wall between the mesh and the light source.<br><br><img src="http://www.alldevs.com/media/system003.gif"> <br><br></td></tr></table><br>
<a name="698026"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Now I gotta fix it so that shadows are not going through walls."<br><br><br>That's not really possible.  At best you can lessen the problem by making sure light sources aren't so low that the character's shadow is cast high on a wall like that.  And even then, shadows will still go through the floor.<br><br>The only way to fix that would be to rewrite the whole shadow casting function, sort all polygons the shadow falls on by distance from the player, then crop the shadow projection plane by projecting each polygon onto it, and then project that new projection polygon that will probably be multiple polygons and convex and stuff onto the other polygons in the level so you can draw a partial shadow on them... It would be a big mess, and probably much slower, and I certainly wouldn't want to have to try to do it!<br><br>I wonder how they fix that issue in stencil shadow systems...  They don't crop all those stencil shadow volumes do they? <br><br></td></tr></table><br>
<a name="698071"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>I wonder how they fix that issue in stencil shadow systems... They don't crop all those stencil shadow volumes do they? <br> <br></div><br><br>I thought they checked the z buffer of the scene('s pixels) against a z buffer projected from the light's view to determine if the pixel in question should be stenciled in or out. But, anyway, in the picture above that shadow beyond the wall should be obscured by the level's lightmap - couldn't it be blended differently and/or the lightmap re-rendered to be properly dark? <br><br></td></tr></table><br>
<a name="698156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, in theory it should be possible to do that, I've thought of it myself before, but I don't know for sure that it can be done in Blitz.<br><br>You would have to render the lightmaps first, then render the shadows on top of that, then render the textures on top of that.<br><br>In order to do that, you need two copies of the level.  And you need to set the texture copy of the level to multiply or multiply x2 blend, while leaving the lightmap copy solid.  <br><br>What should then happen is the lightmap version is drawn, which fills in the zbuffer and then the shadow and texture pass have transparency and so are compared with the zbuffer, but do not write to it.  You must renderworld each pass seperately, or at least, the texture pass and the shadow pass seperately.<br><br>Anyway, there's one small problem even if the above works, and that is that his lightmaps aren't 100% dark in the shadows.  So the shadows would still darken them anyway.  The trick to the above is that after doing the level shadows and the texture shadows, which are all pure black, you render a quad over the scene set to add blend with the ambient light color.  That brings them up from pure black, and you now have shadows which blend together nicely but aren't pure black in the final scene.  <br><br>This isn't really a method everyone would want to use though to do their levels as it forces you to have an ambient light level everywhere or have pitch black shadows almost everywhere, and neither is realistic.<br><br>Hm...<br><br>If it were possible to take the lightmap and apply an inverse copy of it to the polygons of the shadow that match the polygons those shadow polygons overlay, then you could maybe blend the shadows better.  The idea would be black lightmaps would produce white shadow maps, and that would in turn produce no shadows in those areas, but white shadopw maps would produce black shadows, and that would make dark shadows in those are which are well lit.<br><br>But that would require major changes to the system if it could be done, and is not something general that would work in just any old game.<br><br>Buuut... What would be easer to do, is if you could grab the lightmap brightness at each shadow vertex as it is created then you could do that inverse adjustment on the shaodw brightness.  But that would be grabbing lots of pixels...  Though I guess the shadow doesn't have many vertices, so it wouldn;t be too bad.  But again, that's something specialized, not something I'd do, or even have time to do. <br><br></td></tr></table><br>
<a name="698159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>So the shadows would still darken them anyway. The trick to the above is that after doing the level shadows and the texture shadows, which are all pure black, you render a quad over the scene set to add blend with the ambient light color. That brings them up from pure black, and you now have shadows which blend together nicely but aren't pure black in the final scene.<br> <br></div><br>This would be the method I'd naturally opt for if I couldn't get a nice blend from a straightforward render. Trouble is I use an overlayed quad for reflections - if you start to stack too many effects this way then you just end up render(shadows)...render(reflections)...render(bloom)...render(final scene) and you can only show a (really nice looking) cube before the framerate nose-dives :D <br><br></td></tr></table><br>
<a name="698309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xmlspy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so every example I know of shadow systems(sswift's, and Devil's) cannot stop after the first wall?  What the freak.  How do the gaming companies make them stop? <br><br></td></tr></table><br>
<a name="698410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Xml:<br>Name one game (not one with stencil shadows) which uses shadows that can cast onto walls where they stop when they hit a wall.  I can't think of any.<br><br><img src="http://homepage.ntlworld.com/paul.kilgour1/Half-Life2-Screenshot4.jpeg"><br><br>I think one or two guys there have shadows that are cast straight down.  The rest don't.<br><br><img src="http://feeds1.wazap.de/products/images/115/643/half_life_2,1.jpg"><br><br>All shadows cast straight down.  They probably have a short range so they don't hit the floor below the catwalks.  I'm pretty sure you can set the shadow fade distance in my system to mimic this.<br><br><br>Sledge:<br>I just remembered how I think they make stencil shadows stop at walls.  With a stencil shadow system, every object in the level is lit by the same light sources.  So if a player is blocking a light it is no different from the level geometry blocking the light in the same render pass.  The stencil buffer at the end of the render just says "in shadow" or "not in shadow" for each pixel.<br><br><br>Unfortunately, this isn't much help for rendering such shadows with my shadow system.  The lightmaps are rendered too differently from the shadows.  And even if it did work, you would have to have one set of lightmaps for each individual light source.<br><br><br>Hm... come to think of it my idea for adjusting the shadow using the lightmap would also require one set of lightmaps for each light source.<br><br><br>And even if I did chop up the projection as it hit each polygon, the result would just look weird, cause now you'd have half a shadow of a guy darkening the area past the corner of a wall instead of the whole shadow, and it would look even less realistic. <br><br></td></tr></table><br>
<a name="698766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look at the Devil Shadow System for shadows with higher detail in less time.  Only drawback I see with the dss is that transparent polys cast the same shadows everything else does.  dds does not darken for each shadow object - shadows are shadows. <br><br></td></tr></table><br>
<a name="698941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sub:<br>The Devil Shadow System is a stencil shadow system, and that means that it produces hard shadows, requires low poly geometry, and most important of all, it will not work with boned b3d meshes, like his character above.<br><br>Every method has its drawbacks! <br><br></td></tr></table><br>
<a name="699510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's true.  I'm not trying to say your method is bad.  I like the colored shadows your method produces.  I think I haven't looked at your newest version, I better look before I make more semi-negative comments about an excellent piece of work.<br><br>Your shadows look a lot like the ones in Age of Empires III - except they don't multicast their shadows.  Can yours use the transparency of the texture to cast holes in your shadows like AoE3?<br><br>[EDIT] Wow!  I just tested your new version and it is lots faster than dds (though blocky and multicasting).  Great job! <br><br></td></tr></table><br>
<a name="699556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Can yours use the transparency of the texture to cast holes in your shadows like AoE3?"<br><br>Yes.  Otherwise objects like trees would cast crummy shadows.<br><br>Let's see a stencil shadow system do that. :-) <br><br></td></tr></table><br>
<a name="699956"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is actually possible to do with stencils, but it would be very, very processor intensive - far more so than it already is - making it useless for games.<br><br>You might consider making a demo of your method that has that demonstrated, I think it would attract quite a few people. <br><br></td></tr></table><br>
<a name="700032"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> I sell like one copy every two months now, so I don't think I'll be making any more demos for it. :-)<br><br>I think everyone's waiting for Max 3D, which I suspect will have its own shadow system.  I just hope Mark chose to go for one of those zbuffer shadow methods rather than using stencil shadows, or else the shadows will be worthless for outdoor games. <br><br></td></tr></table><br>
<a name="700430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >angel martinez</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sswift,I have a couple of questions:  Is it necessary, in your shadow system, to register every entity-mesh in a game with the system despite of that entity is not going to cast a shadow ? I ask this because it is the case with Devil's system.<br>And, is it possible to cast static rendered shadows from a big building without much performance cost?<br>Thanks <br><br></td></tr></table><br>
<a name="700496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the object does not need to cast or receive a shadow, then you don't need to tell the shadow system about it.<br><br>As for casting static shadows from a building, a static shadow is just another entity, with the polygons that the shadow hit, and a new texture.  So assuming the shadow didn't end up with thousands of polygons because whatever it hit had throughsands of polygons (not what cast the shadow, that doesn't matter) then it should run just as fast as any other object in your scene. <br><br></td></tr></table><br>
<a name="701131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Defoc8</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> To be fair..theres nothing stopping you baking shadows<br>for things like trees - into the terrain - as torque does &amp;<br>using stencil shadows for moving objects..<br>Infact there are countless ways to go about implementing<br>shadows..if you use shaders, the doors open even further...<br>then again we're talking about b3d..and i dont know anything <br>.er..yeh..goodluck with that..now i dont<br>remember why i came in here :/ <br><br></td></tr></table><br>
<a name="701143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> it will not work with boned b3d meshes <br></div><br><br>Not as fast as I'd hoped, and still some issues to resolve, but it can be done provided the poly count is low enough.<br><img src="http://www.tomspeed.com/ss3.jpg"><br><br>Each method has its pros &amp; cons.<br><br>I used F.E.A.R combat as an example of LOD use earlier and I'll use it again now as it uses a mix of lightmapping, projected texture maps and stencil shadows, and looks very nice.<br><br>Sswift, you should take a look at some of my texgen code sometime. It can create projected UVs automaticaly using DX7 hardware, and it's easy enough to project a texture from any entity. How about render textures too (hardware permitting, but widely supported), they kill the need to do a copyrect.<br><br>And never forget the golden rule, 'even a blob shadow is better than NO shadows at all' :) <br><br></td></tr></table><br>
<a name="701318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Defoc8:<br>If you use baked shadows for trees then you've just lost half the reason for using stencil shadows which is to generate realistic shadows that combine properly.  Stencil shadows will not combine properly with lightmaps.  Where they overlap, you'll get a dark spot.  Also you've now got to code twice as much lighting code and have to wait for those slow lightmap builds. <br><br></td></tr></table><br>
<a name="701372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stencil shadows can blend with lightmaps, and I wouldn't use them for trees, I'd use lightmaps for trees. <br><br></td></tr></table><br>
<a name="701387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not wishing to throw a cat amongst the pidgeons but what is projecotr shadows then?  These are what Josh has settled for at this point with his engine, and they look fab.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="701419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think he means shadow mapped spotlights. <br><br></td></tr></table><br>
<a name="701568"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Projected shadows are what my system uses.  It renders a lightmap from the point of view of a light for each object that casts a shadow.  Then it "projects" that shadow onto the geometry by creating new polygons in the shape of the gometry and setting the texture coordinates to put the projected shadow onto those polygons the right way. <br><br></td></tr></table><br>
<a name="701600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> What sswift said :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
