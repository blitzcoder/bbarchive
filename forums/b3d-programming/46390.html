<!DOCTYPE html><html lang="en" ><head ><title >correct cubic environment mapping, how?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >correct cubic environment mapping, how?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >correct cubic environment mapping, how?</a><br><br>
<a name="516007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raitsun</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> How can i manage to get a CORRECT cubic environment mapping? well just placing the camera at the coordinates of the mesh that i want to be cubemapped and rotating it for all faces of the cubemap is no real solution... it only works for small meshes... have no clue how to make this work properly<br>Can anyone help me?<br><br>raitsun <br><br></td></tr></table><br>
<a name="516067"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> As far as I know you need to use the game cameras x and z coordinate, pick the floor Y under the camera and subtract that distance from the floor Y to get the Y of the cubemap camera. Or maybe you need to use<br><br>cubecam_Y= entityY(chrome_mesh) - (entityY(gamecam)-entityY(chrome_mesh))<br>(But then I ask myself how to use it for multiple meshes...so better try to use "Floor minus" or "Zero minus")<br><br>Well, something like that. Although some people would not agree with my method, but it's tested :)<br><br>The pro of this method is, you only need to render the cubemaps one time for the whole world. It's not mesh oriented, it's viewer oriented.<br><br>In the end you'll see it isn't an exact science and you'll probably never mirror all things totally correct.<br><br>Nevertheless you should be able to get a chrome effect or something.<br><br>EDIT:<br>Some people say all you have to do is position the cube cam at the game cam position, but as far as I remeber the was a problem with this method. <br><br></td></tr></table><br>
<a name="516074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Raitsun</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks jfk... works fine for my marble floor and my water... maybe it is not, but it at least looks very correct<br><br>and now i will forget about this marble-sphere-water-thing ^^ <br><br></td></tr></table><br>
<a name="516106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarkbait</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk, please put a small code example of the floor method, not sure I am following you. thx :) <br><br></td></tr></table><br>
<a name="516271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have the source right here (new machine).<br><br>-Get X and Z from the main camera.<br>-Do a linepick from the main cameras position against the ground.<br>-Calculate main camera Y minus pickedY.<br>-Calculate pickedY minus the prev. calculations result, to get the Cube cam Y.<br>Now position the cube cam at this X,cubeY,Z and perform a 6 sided render for cubemapping as seen eg. in the cubed-Markio Demo.<br><pre class=code>
             .game cam
          ______________________ground
  _______/
_/           °cube cam
-------------------- Zero

</pre><br><br>You see the distance from game cam to the ground is the same as from cube cam to the ground, only the cube cam is on the other side. Sorry if I explained it complicated :)<br><br>EDIT: btw. I'd also reccomend to use an optimzed cube-rendering function as seen in the code archives, that will use multiple cameras with side by side organized viewports to render all 6 sides with a single renderworld. <br><br></td></tr></table><br>
<a name="516354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Snarkbait</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thx... my main question was I wasn't sure if by 'floor' you meant the <i>function</i> Floor or you meant floor i.e. ground. Now I get it. ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
