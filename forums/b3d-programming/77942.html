<!DOCTYPE html><html lang="en" ><head ><title >Large (2D) levels</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Large (2D) levels</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Large (2D) levels</a><br><br>
<a name="873277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Headdy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I've gotten a basic tile-based map working, with the help of FastImage. I wanted to put this question to you guys:<br><br>How would you create a huge level map? (á la Sonic, or Kid Chameleon)<br><br>I've thought of two possible methods (I'm leaning more towards the second):<br><br><b>Create a large map</b><br><i>Pro(s)</i> - easiest method to implement.<br><i>Cons</i> - increasingly difficult to edit very large maps; potentially lots of wasted space (and memory) from blank tiles.<br><br><b>Piece several same-sized maps using an array</b><br><i>Pro(s)</i> - relatively easy to implement; good for "room-based" scrolling (á la Zelda); easy to "lock" screen to a single map.<br><i>Cons</i> - trickier to edit maps; potentially same size maps only. <br><br></td></tr></table><br>
<a name="873278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> First. <br><br></td></tr></table><br>
<a name="873285"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KillerX</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would suggest the second.  It will make it much easier to add more rooms.  It depends on the size of the game, though.  For a very small game, use the first.  For a larger game, use the second option. <br><br></td></tr></table><br>
<a name="873368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Cp</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> second. <br><br></td></tr></table><br>
<a name="873414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >smilertoo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If its a scrolling map then first.<br>if its flick screen with 100's of rooms then either is fine. <br><br></td></tr></table><br>
<a name="873456"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first for simplicities sake. All this data will be stored in the main RAM anyway, so size shouldn't be much of an issue.<br><br>10,000 x 10,000 = 358 MB odd and that's HUGE!<br><br>If your RPG has rooms, you can easily use up the blank spaces by packing the rooms in correctly.<br><br>If you like a good challenge, you could split each 32 bit int used for storing the image index of the tile image used for each array square, into 2 16 bit ints in code.<br><br>This would half your memory requirements, and still give you 65535 different images to use for your tiles. <br><br></td></tr></table><br>
<a name="873469"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, this is from an abandoned project. Please take the code "as is"<br>There are a lot of interesting things there:<br><br>1. Map editor<br>2. Code to build huge maps with a minimum amount of memory needed<br>3. A* path finding algorithm<br><br>The link is here:<br><a href="http://www.moraldigames.com/Temp/Map.zip" target="_blank">http://www.moraldigames.com/Temp/Map.zip</a><br>and it will be available for a few days<br>Enjoy! <br><br></td></tr></table><br>
<a name="873644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Headdy,<br><br>Plan, plan, plan, then develop.<br><br>Develop an editor which allows you to manage and edit smaller chunks of the overall bigger map. So you can add to the larger map at any time and edit any small section. In effect a clever version of two.<br><br>Don't limit yourself to creating a basic map editor, think about what your game needs and work out a way to include these options in your editor, and how you will manage all that data.  It will take a while but I bet you can develop a really brilliant fully funcitonal editor as long as you plan out ahead what you may like in your game.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="873706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> DIM MAP[5000,5000]<br><br>DIM ICON[255]<br><br><br>this is what i whold use :D <br><br></td></tr></table><br>
<a name="873707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dim ??????????<br><br>Create a bank and use that.  I know it's basic, but a BANK will be much more interesting for a SAVE / LOAD, BACKUP, COPY / MOVE. <br><br></td></tr></table><br>
<a name="873710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> A bank would be alot more memory efficient, but slightly harder to handle. Don't see it being much different for saving/loading... etc <br><br></td></tr></table><br>
<a name="873713"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, say your tiles are based on a 256 char tileset (much like a font), when you write ints, you write 4 tiles at a time on to / from files.<br><br>WriteInt( fileout, value% ) <br><br>But there might be another way to dump a bank or memory zone  to a file which is faster than this.<br><br>EDIT: WriteBytes bnkTest,fileBank,0,50 <br><br></td></tr></table><br>
<a name="873772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >*</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> TBH I would simply have the entire thing in a bank<br><br>For example say your map is 12000 by 12000 thats 144,000,000 bytes of ram but it would be easier to access that than to have an array. For example 20,5 would be accessable via ( 5 * 12000 )+20 the 5*12000 as y is 5 and the map is 12000 wide, finally we add the X part that is 20 would give the location in the bank that we need to look at. <br><br></td></tr></table><br>
<a name="873801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>but it would be easier to access that than to have an array<br> <br></div><br><br>How is that easier than accessing an array?<br><br><br><div class="quote"> <br>would be accessable via ( 5 * 12000 )+20 the 5*12000 as y is 5 and the map is 12000 wide<br> <br></div><br><br>Or, if your using an array:<br><br>map(20,5) <br><br></td></tr></table><br>
<a name="873803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RifRaf</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to use banks like arrays , do somthing like this.<br><br><br>Example<br><pre class=code>
mybankarray=MakeBank(100,100)
thisvalue=125
Putbank(10,5,100,thisvalue)
newvalue=getbank(10,5,100)
runtimeerror newvalue


Function MakeBank(Xlen,Ylen)
;makes an integer/float bank with the 2 dimensions you specify
Mybank=CreateBank((xlen*4)*(ylen*4))
Return Mybank
End Function

Function GetBank(Bank,Xindex,Yindex,AXlen)
;will return the value in the bank. Lets you use it 
;like a 2 dimensional array though. AXLEN is the first 
;arrays max length.. so in b=CREATEBANK(10,20)
;you would call Getbank(b,x,y,10)
Return PeekInt(bank,((Yindex-1)*(AXlen*4)+((Xindex-1)*4)-1))
End Function

Function PutBank(Bank,Xindex,Yindex,AXlen,VALUE)
;same as getbank but you insert a value
PokeInt(bank,((Yindex-1)*(AXlen*4)+((Xindex-1)*4)-1),value)
End Function 

</pre><br><br>Reminds me of back in the day of screen mode 13h(320x200 &amp; 320x240), when you poked screen coords with (Yposition*ScreenWidth)+Xposition<br><br>You could make this a type system and store the X length on creation, then you would not have to pass it each time, but I didnt bother. <br><br></td></tr></table><br>
<a name="873812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_33</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> How is that easier than accessing an array? <br></div><br><br>Sorry Ross C, I'm more used playing with banks.  If you prefer using a dimension table for managing a 2D playfield, it's your choice really. <br><br></td></tr></table><br>
<a name="874135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, but it's not easier for a beginner :o) Plus array are probably not much slower than banks either. I use them for the ability to use bytes, instead of 32 bit ints. <br><br></td></tr></table><br>
<a name="874532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Headdy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the advice, everybody.<br><br>* begins thinking about making a map editor... * <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
