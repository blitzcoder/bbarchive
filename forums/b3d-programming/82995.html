<!DOCTYPE html><html lang="en" ><head ><title >Convert pitch/yaw/roll to Vector</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Convert pitch/yaw/roll to Vector</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Convert pitch/yaw/roll to Vector</a><br><br>
<a name="936468"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi!<br>i need to convert a rotation defined by pitch, yaw and roll to a vector defined by XYZ.<br>eg: (freelook) i'm looking to the right and push forward, so i move right instead of forward.<br><br>thanks :) <br><br></td></tr></table><br>
<a name="936928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> nobody knows?<br>i suppose it's something simple with sin/cos..? <br><br></td></tr></table><br>
<a name="936931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Svenart</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> maybe you mean something like this?<br><br><a href="http://de.wikipedia.org/wiki/Eulersche_Winkel" target="_blank">http://de.wikipedia.org/wiki/Eulersche_Winkel</a> <br><br></td></tr></table><br>
<a name="936945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try this. It's not exactly a maths way, but...<br><br>Create a pivot at 0,0,0<br><br>Create another pivot at 0,0,0 and parent it to the one before.<br><br>Position the pivot at 0,0,1 (which i assume is the correct vector for pitch and yaw, if not, adjust accordingly).<br><br>Then... rotate the pivot at 0,0,0 to the pitch and yaw values. Then read the global position of the second pivot. The X,Y and Z values will be your vectors.<br><br>No doubt someone will come along with a maths way, but that will work for you until then. <br><br></td></tr></table><br>
<a name="936947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make that the "up key" (or whatever you are using to move forward) moves the object in its local Z axis. It will always move forward no matter where it's facing.<br><br>If that's not what your asking, then please reformulate your question because it's a bit vague. <br><br></td></tr></table><br>
<a name="936954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Svenart: that's an overkill for my brain. i simply need the formula.<br><br>----&gt; Euler Rotation (pitch,yaw,roll)      To     Vector (x,y,z)      &lt;----<br><br>Kryzon: thats exactly what i mean.<br><br>btw: no pivot and TForm opperations please. only maths. <br><br></td></tr></table><br>
<a name="936958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Tform is maths essentially, and it's dam quick. <br><br></td></tr></table><br>
<a name="936959"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there nothing in Mark's .b3d source code that could help? <br><br></td></tr></table><br>
<a name="936961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i've had a right good look through the code archives for vector stuff. This would seem to be suited to your problem:<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1091" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1091</a><br><br>EDIT: Oh i see you've already commented on that code...<br><br>The tform commands would give the answer here btw, and there are pretty quick. Especially if it's for something like calculating the direction to move the camera etc etc. (Any reason why you can't use moveentity?) <br><br></td></tr></table><br>
<a name="937001"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I second Ross C's last question, and also...you can't transform orientation elements into a vector. They only tell where the vector is facing, not how "long" it is.<br>But still, if you want to know the global directions of a vector based on your character's facing:<br><pre class=code>
TFormVector 0,0,SizeOfVector, Character, 0
</pre><br>Then you could use something like...<br><pre class=code>
MoveEntity Character,TFormedX(),TFormedY(),TFormedZ()
</pre><br>But then again, you can just cut all that sh*t out and just use MoveEntity straight away. <br><br></td></tr></table><br>
<a name="937059"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> i simply can't use TForm opperations because i'm programming with managed direct3D in C#. but i think that it's no problem when i post here anyway, because i think i will get the answer here more likely than in any other forum.<br><br>Ross C: i can't seem to find anything useful in this vector lib. <br><br></td></tr></table><br>
<a name="937085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br>I don't understood what are you trying to get.<br><br>You could calculate a vector with the orientation to where the object is facing based on it's pitch an roll with some sin cos math but you loose the roll component. <br><br>One thing you posibly do is to calculate the x,y,z component of the vector with pitch and yaw, normalize the vector (so it has a Length of 1) and then scale the vector by the roll component. This is the only way I imaginge that you could store all the information in a vector.<br><br>But, my friend, if you do that, you probably end working wiht a 3d lib like the one posted avobe!, sorry.<br><br>Juan <br><br></td></tr></table><br>
<a name="937086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but you loose the roll component.  <br></div><br>if you think about it, the roll factor doesn't matter because it does not change the direction or lenght of the vector.<br><br>please tell me how to use those sin/cos things to get this thing working. <br><br></td></tr></table><br>
<a name="937089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> exactly for that is that I don't understood what you needed<br><br>the post should be: convert pitch/yaw to vector!<br><br>I try to find some doc's / code I think have.<br><br>see you<br><br>Juan <br><br></td></tr></table><br>
<a name="937110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi<br><br>Test that function:<br><br><pre class=code>
Function PitchYawToVector(pitch#,yaw#,dest.Vector)

	dest\x = Cos(pitch) * Sin(yaw)
	dest\y = Sin(pitch)
	dest\z = Cos(pitch) * Cos(yaw)
	NormalizarVector(dest)
	
End Function
</pre><br><br>with this<br><br><br><pre class=code>

Type Vector
	Field x#, y#, z#
End Type

v.Vector = New vector

Graphics3D 800,600,0,2

SetBuffer = BackBuffer()

cam   = CreateCamera()
PositionEntity cam,0,0,-5
light = CreateLight()
cube1 = CreateCube()
ScaleEntity cube1,.1,.1,1
EntityColor cube1,255,0,0

Cube1Pitch# = 0
Cube1Yaw# = 0

Repeat

	If KeyDown(200) Then Cube1Pitch = Cube1Pitch + 1
	If KeyDown(208) Then Cube1Pitch = Cube1Pitch - 1

	If KeyDown(203) Then Cube1Yaw = Cube1Yaw + 1
	If KeyDown(205) Then Cube1Yaw = Cube1Yaw - 1

	RotateEntity cube1, Cube1Pitch, Cube1Yaw, 0, True
	
	PitchYawToVector(Cube1Pitch, Cube1Yaw, v)

	RenderWorld

	Text 10,10,Cube1Pitch
	Text 10,30,Cube1Yaw
	
	Text 100,10,v\x
	Text 100,30,v\y
	Text 100,50,v\z
	Text 100,70,Magnitud(v)
	
	TFormVector 0,0,1, Cube1, 0
	
	Text 200,10,TFormedX()
	Text 200,30,TFormedY()
	Text 200,50,TFormedZ()
	v\x = TFormedX()
	v\y = TFormedY()
	v\z = TFormedZ()
	Text 200,70,Magnitud(v)
	Flip

Until KeyHit(1)
End





Function PitchYawToVector(pitch#,yaw#,dest.Vector)

	dest\x = Cos(pitch) * Sin(yaw)
	dest\y = Sin(pitch)
	dest\z = Cos(pitch) * Cos(yaw)
	NormalizarVector(dest)
	
End Function


Function CuadradoVector#(v.Vector)
	Return v\X*v\X + v\y*v\y + v\Z*v\Z
End Function

Function Magnitud#(V.Vector)
	Return Float(Sqr(CuadradoVector(V)))
End Function

Function NormalizarVector(v.Vector)	; v = v(normalizado)
	Local Temp#
	Local mag#
	mag = Magnitud(v)
	If mag&gt;0 Then
		Temp# = Float(1/mag)
		v\X = v\X * Temp
		v\y = v\y * Temp
		v\Z = v\Z * Temp
	Else
		v\x = 0
		v\y = 0
		v\z = 0
	End If
End Function
</pre><br><br>hope that is what you need<br><br>(btw nice gui!, thank's)<br><br>Edit:<br>there are a sign error in x and y, please modify the function to:<br><br><pre class=code>
Function PitchYawToVector(pitch#,yaw#,dest.Vector)
	dest\x = -Cos(pitch) * Sin(yaw)
	dest\y = -Sin(pitch)
	dest\z = Cos(pitch) * Cos(yaw)
	NormalizarVector(dest)
End Function
</pre><br><br><br><br>Juan <br><br></td></tr></table><br>
<a name="937132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks so far. that works. when i use this code, the camera moves to the direction where it looks. but since in my 3d code, you can move an entity by all three axis, so i need this for all three axis.<br><br>when i call something like &gt;&gt; Entity.Move(1, 2, 3)<br>i got an idea:<br>maybe what i really need is to rotate the vector (1|2|3) around the pitch/yaw and the result is the final vector.<br>you know what i mean? <br><br></td></tr></table><br>
<a name="937143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> to be honest, no idea!<br><br>I saw that you are programming in C, so you didn't have the nice 3d functions blitz has. The 3d libs normally work with matrix, point, vector <br>quaternions and the like. Translate, rotate and all this stuff is made by<br>matrix multiplication etc. If you look inside, the elements of the matrix<br>are calculated based on sin, cos math like the function above.<br><br>Are you programing 3D in C, with out a 3D lib?<br><br>Is it posible for you to write the equivalent in blitz of your intention. Probably I could translate to simple sin/cos math, (but not guaranteed).<br><br>best regards<br><br>Juan <br><br></td></tr></table><br>
<a name="937149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Charrua says, TFormVector, Point and Normal are just Blitz3D names for multiplying a vector by a series of matrices. In this case, since scale and position are not an issue, you can just use one matrix.<br><br>Make a rotation matrix from your Euler Angles And Multiply your starting vector by that rotation matrix to get your end vector. <br><br></td></tr></table><br>
<a name="937163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, when i do it in C#, i have a Matrix and a Vector class with lots of methods. but i can't multiply vectors by matrices...<br><br>EDIT: your idea was good, gabriel<pre class=code>			Vector3 vec = new Vector3(x, y, z);
			vec.TransformNormal(MatrixRotation);
			MatrixPosition *= Matrix.Translation(vec.X, vec.Y, vec.Z);
</pre><br>thanks to all in this thread. i learned more usefull stuff regarding vector stuff. :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
