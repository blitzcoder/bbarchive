<!DOCTYPE html><html lang="en" ><head ><title >Is nPoly any good?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Is nPoly any good?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Is nPoly any good?</a><br><br>
<a name="492811"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just wondering if anyone knows if GoSsE Korupted's nPoly routines (http://www.blitzbasic.com/Community/posts.php?topic=36003) are sound.<br><br>I've started using them for collision detection in my 2D (in 3D) shooter and most of the time it's okay, but occasionally shots will pass right through enemies.<br><br>The first thing I thought was that the shots were passing over the enemies (moving so far in a frame that they never actually touched the enemy) but debugging has proved this not to be the case (when it happens shots are moving no more than 16 pixels in a frame and the enemy is 45 pixels wide, plus shots can pass within 10 pixels on the sprite's handle and nPoly doesn't trigger a collision).<br><br>I can't get my head around the maths in the nPoly routines (I'm not a maths person at all) so I'm wondering if anyone else has used them or understands them and could let me know if they're sound or not. <br><br></td></tr></table><br>
<a name="492821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know if it's the cause to your problems, but I spotted a little typo in the poly2poly test...<br><br>This line...<br>ty4 = Y2 + nPoly2\iMaxX<br><br>should be<br>ty4 = Y2 + nPoly2\iMaxY (Note the Y at the end) <br><br></td></tr></table><br>
<a name="492823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Actually I've tried poly to poly (nP_PolyOverlap) and poly 2 circle (nP_PolyOverlapsCircle) as well as having bCheckBounding (which is where that line is) on and off. All exhibit the same thing, so I think it's probably something quite fundamental.<br><br>Edit: but I'll try that fix at lunchtime anyway  :-) <br><br></td></tr></table><br>
<a name="492831"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> A bit more testing (using circular shots and nP_PolyOverlapsCircle) shows that the bounding check reckons that the circle and bounds are overlapping.<br><br>At that point the two are 14.1 pixels apart, well within the enemy (which is basically a rotating 45x45 square with some extrusions, and yes I'm rotating the polygon and it lines up quite nicely with the quad sprite if I draw the polygon using nP_DrawPoly).<br><br>But the next check (the actually poly check and the bit I don't understand) doesn't trigger. <br><br></td></tr></table><br>
<a name="492839"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Damn, just had a thought when playing with the nPoly demo. It checks if the circle is touching the polygon outline. My shot must be going from outside the polygon, to fully inside, to fully outside in three frames. Dang!<br><br>Anyone know how I could implement a "is this circle touching or inside this poly" function using the nPoly Types? Or is that just too much work and I should stick to just checking radius' of sprites? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
