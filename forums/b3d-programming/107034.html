<!DOCTYPE html><html lang="en" ><head ><title >How can I Peek data from MP3 using the LoadSound?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How can I Peek data from MP3 using the LoadSound?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >How can I Peek data from MP3 using the LoadSound?</a><br><br>
<a name="1322636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'm trying to use the PEEK Command to get data from a Mp3 file in memory<br><br>after LoadSound is used.<br><br>Can I use the LoadSound command returned value as the address to PEEK the data ? <br><br></td></tr></table><br>
<a name="1322656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think so, since PEEK / POKE need a dedicated litzBank handle referring to a reserved block of memory.<br><br>To access the RAM at (ironically) random with Blitz using PEEK , you will need to copy or move the relevant data into a Bank.<br><br>I believe the Kernel32.dll RtlMoveMemory() or similar method can facilitate this, but you will also need to ascertain the pointer for the stored address.<br><br>___<br><br>It is all rather complicated, so I would instead either read the file as is, or, load the data of the file into a bank with ReadBytes and then process it from there.<br><br>If you can wait until toorrow I have some old stuff which I was working on to retriieve the TAG data from mp3 files with the potential then to analyse the actual sound itself. It's late now and I am not sure I know where those old files are but I will try and dig them out for you tomorrow. <br><br></td></tr></table><br>
<a name="1322674"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes i would be very appreciated for the files.<br>I was using a DLL file called FastPointers for Blitz3D basic.<br>Heres the web site  <a href="http://www.fastlibs.com/" target="_blank">http://www.fastlibs.com/</a><br>  <br>Thanks for the response. <br><br></td></tr></table><br>
<a name="1322683"></a>

<a name="1322684"></a>

<a name="1322685"></a>

<a name="1322686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> This isn't an expected use case for Blitz3D, so you'll be swimming against the stream.<br>You should use BlitzMax for this. You can load a MP3 sound file and do what you want with the decoded data (the raw samples). And it supports pointers natively. I can write you a BMax example if it would help. <br><br></td></tr></table><br>
<a name="1322687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> YES I appreciate it.<br><br>Thank You <br><br></td></tr></table><br>
<a name="1322696"></a>

<a name="1322697"></a>

<a name="1322698"></a>

<a name="1322700"></a>

<a name="1322701"></a>

<a name="1322793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, with small steps. BlitzMax comes with a WAV (for lossless audio) and OGG (for lossy audio) format support.<br>It supports OGG instead of MP3 because OGG has a permissive license. MP3 has some licensing requirements: <a href="http://www.mp3licensing.com/help/index.html#5" target="_blank">http://www.mp3licensing.com/help/index.html#5</a> (If your program is non-profit or for personal use then you should be fine.)<br><br>There is a way to read and play MP3 files with BlitzMax, you can use a module (a library) for the BASS framework. There is a BlitzMax example here: <a href="https://github.com/maxmods/bah.mod/blob/master/bass.mod/examples/example04.bmx" target="_blank">https://github.com/maxmods/bah.mod/blob/master/bass.mod/examples/example04.bmx</a><br>With this module you can use functions TBassSample.GetInfo() and TBassSample.GetData() to access the raw decoded data of an audio file in memory.<br><br>And with the built-in OGG module in BlitzMax you can do something like this:<br>EDIT: corrected some comments.<br><pre class=code>SuperStrict 

Import brl.ramstream
Import brl.oggloader

Local address:Byte Ptr	= ... 'Pointer to the OGG data in memory.
Local size:Int			= ... 'Size of the OGG data in memory.
Local readable:Int		= True
Local writeable:Int		= False 
Local OGGStream:TStream	= CreateRamStream( address, size, readable, writeable )

Local audioSample:TAudioSample = LoadAudioSample( OGGStream ) 'Create a TAudioSample object from the ram stream of OGG data.

If audioSample &lt;&gt; Null Then 'If everything loaded fine.

	Print audioSample.format
	Print BytesPerSample[ audioSample.format ] 'BytesPerSample is a helper array from 'mod\brl.mod\audiosample.mod\sample.bmx'.
	
	'audioSample.samples 'Pointer to the sample data.

EndIf

End</pre> <br><br></td></tr></table><br>
<a name="1322709"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank You Very much for your assistance , I will play with this. I was trying to create a dj music software.<br><br>but because the MP3 license, I will use the wav and ogg format.<br><br>I will show you the demo when I create it. <br><br></td></tr></table><br>
<a name="1322753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...<br><br>Just to let you know, Ive not forgotten this... I am still looking for the old files... <br><br></td></tr></table><br>
<a name="1322771"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks <br>I was trying to use the Bass sdk libraries I paid for. <br><br></td></tr></table><br>
<a name="1322890"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey, is there a free sdk I can use to decode MP3 files? <br><br></td></tr></table><br>
<a name="1322892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dman</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just remembered, I can use the BlitzMax's dll if it has one.<br><br>is that possible  ? <br><br></td></tr></table><br>
<a name="1322901"></a>

<a name="1322902"></a>

<a name="1322903"></a>

<a name="1322904"></a>

<a name="1322905"></a>

<a name="1322907"></a>

<a name="1322908"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> MP3 support is not BlitzMax's, it's from a third-party module for BlitzMax. BlitzMax's built-in modules support WAV and OGG.<br><br>That BASS module that adds the MP3 support happens to be made by a user called Brucey, and there's a forum area for discussing modules made by him:<br><a href="http://www.blitzbasic.com/Community/topics.php?forum=124" target="_blank">http://www.blitzbasic.com/Community/topics.php?forum=124</a><br><br>That BASS module can be found in Brucey's repositories in GitHub, and in the documentation for that module it explains where you can find the runtime library:<br><a href="https://github.com/maxmods/bah.mod/blob/master/bass.mod/doc/intro.bbdoc" target="_blank">https://github.com/maxmods/bah.mod/blob/master/bass.mod/doc/intro.bbdoc</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
