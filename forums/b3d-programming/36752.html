<!DOCTYPE html><html lang="en" ><head ><title >Particles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Particles</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Particles</a><br><br>
<a name="402723"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I'd first like to thanks all whom helped me with my last post "fps". i am know working on particles which my system slows my game up, i need a simple example on either how to reuse the particles with a limit on how many can be created for a way to make it run faster in general (i would use one of the other particle systems but they are hard to understand) hope someone can help me. <br><br></td></tr></table><br>
<a name="402732"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> plese can anyone help me, i'm working on a big level and need the particles not to take up so much memory, the particle i am using is snow and it takes up loads of fps off my game. <br><br></td></tr></table><br>
<a name="402738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Memory != fps<br><br>Search the code archives for a "single surface" particle system.  Single surface particle systems limit what you can do with the particles, but they'll render most effects much faster than a particle system where each particle is an individual entity. <br><br></td></tr></table><br>
<a name="402745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok thanks for trying to help, the problem is there is far to much coding in that system which makes it out of my reach to understand. <br><br></td></tr></table><br>
<a name="402768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you saying you don't understand how to use it in your code, or that you don't know how to make one yourself? <br><br></td></tr></table><br>
<a name="402772"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Click the second link in my signature.  Its code should provide you with a fairly good example on how to write a single-surface particle system. <br><br></td></tr></table><br>
<a name="402808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rottbott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or try RottParticles:<br><br><a href="http://marksweb.pwp.blueyonder.co.uk/rottbottstudios/rottparticles.html" target="_blank">http://marksweb.pwp.blueyonder.co.uk/rottbottstudios/rottparticles.html</a><br><br>The documentation isn't quite done, but it's pretty easy to use, and very, very fast. <br><br></td></tr></table><br>
<a name="402830"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >scribbla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> goober im in the position at the moment all the demos look great but from a newb point of view they leave me way behind<br><br>...at the moment im looking at particle candy <a href="http://www.x-pressive.com/ParticleCandy/" target="_blank">http://www.x-pressive.com/ParticleCandy/</a><br><br>looks very very cool but needs some time to learn how to use it, the source code included is NOT documented very well, might just be me still being a newb and not ready for such grown up things... <br><br></td></tr></table><br>
<a name="403086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> :(, i'd like to say sorry for sounding ungrateful i did not mean it to, i just suck at english, so i hope you can forgive me for that <br><br></td></tr></table><br>
<a name="403147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, i had a thought but i dont really know how to do it, using sprites, i was thinking instead of creating them and them destroying them, if i used to for next command to create say 50 sprites and then when they reach the target time for entity it would be repositioned to where it starts, any idea how to do so. <br><br></td></tr></table><br>
<a name="403148"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wouldn't say theirs less you can do with them. You can do most of what you can do with sprite particles. It's just a little harder :) <br><br></td></tr></table><br>
<a name="403149"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, what you would do, is create a type:<br><br><pre class=code>
Type particle
   Field entity
   Field x#,y#,z#
   Field time
   Field timer
   Field alive
   Field speed
End Type
</pre><br><br>Now, at the beginning you create the number of particles you need. Now, when a particle is born, you give it an x,y and z position a speed and set the time you want it to stay onscreen. Also, set the timer field to the millisecs() value so you can check if it's dead.<br><br><br>EDIT added in the entity field. You'll need this to store what you want to use as your particle :)<br>Now, whens it's dead, you simply hide it and set the alive field to 0, until a new one needs respawned, or do what you saoid, and move it back to where it comes from and randomise the x,y,z and speed and time fields. When you need to check which ones are currently aviable for respawning, you check the alive field. If it's at zero, then set it to 1 and unhide it :) <br><br></td></tr></table><br>
<a name="403150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ross C i was wanding while i'm coding if i can put my code up to ask if it is correct or not please. <br><br></td></tr></table><br>
<a name="403164"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok man, sure. I'll post this though for you:<br><br>Small example. Left and right arrow keys to move the emittor:<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

cam=CreateCamera()
MoveEntity cam,0,0,-30


Type particle
	Field entity
	Field time
	Field timer
	Field alive
	Field speed#
End Type


Global emittor = CreateSphere()
Global emittor_time
Global emittor_timer

Global number_of_particles = 40

For loop = 1 To number_of_particles
	p.particle = New particle
		p\entity = CreateSprite()
		p\alive=0
Next

While Not KeyHit(1)



	If KeyDown(205) Then MoveEntity emittor,0.1,0,0
	If KeyDown(203) Then MoveEntity emittor,-0.1,0,0
	
	update_emittor()
	update_particles()
	
	UpdateWorld
	RenderWorld
	Flip
Wend
End

Function update_particles()
	For p.particle = Each particle
		MoveEntity p\entity,0,p\speed,0
		
		If MilliSecs() &gt; p\time + p\timer Then
			p\alive = 0
		End If
	Next
End Function

Function update_emittor()
	If MilliSecs() &gt; emittor_time + emittor_timer Then ; check to see if the time has elapsed
		emittor_timer = MilliSecs() ; reset the spawn timer
		emittor_time = Rand(10,70) ; randomize the time the next one is generated
		respawn_particle() ; call the respawn particle function
	End If
End Function

Function respawn_particle()
	For p.particle = Each particle
		If p\alive = 0 Then ; check to see if a particle is dead. If so, then randomize it's fields and reset it
			PositionEntity p\entity,EntityX(emittor)+Rnd(-1,1),EntityY(emittor),EntityZ(emittor)+Rnd(-1,1)
			; the line above /\ position the particle next to the emittor but randomize it a little
			p\time = Rand(500,900)
			p\timer = MilliSecs()
			p\alive = 1 ; particle is now ALIVE
			p\speed = Rnd(0.05,0.1)
		End If
	Next
End Function
</pre> <br><br></td></tr></table><br>
<a name="403415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok, thanks for the code works well, i only got to see it just know, yesterday i had a go at making my own code but it did not go well here is the code:<br><br>Type particle<br>   Field entity<br>   Field x#,y#,z#<br>   Field time<br>   Field timer<br>   Field alive<br>   Field speed#<br>End Type<br><br>Global spr<br><br>Graphics3D 1280,1024,32,1<br>SetBuffer BackBuffer()<br><br>cam=CreateCamera()<br>PositionEntity cam,0,0,-10<br><br>For t=1 To 10<br>spr=CreateSprite()<br>Next<br><br>While Not KeyHit(1)<br>createpart( Rand(1,2), 0, Rand(1,2), 1, .1)<br>Update<br>RenderWorld<br>Flip<br>Wend<br>End<br><br>Function createpart( X#, Y#, Z#, Alive, Speed#)<br>p.particle = New particle<br>p\entity = spr<br>p\x# = x#<br>p\y# = y#<br>p\z# = z#<br>PositionEntity p\entity, p\x#, p\y#, p\z#<br>p\alive = alive<br>p\speed# = speed#<br>p\time=1000<br>p\timer = MilliSecs()<br>End Function<br><br>Function update()<br>For p.particle = Each particle<br>MoveEntity p\entity, 0, 0+p\speed, 0<br>If MilliSecs()&gt;p\time+p\timer Then<br>p\alive=0<br>PositionEntity p\entity,p\x#,p\y-p\y-p\y,p\z<br>EndIf<br>Next<br>End Function<br><br>i dunno what i have done wring in it apart from almost all of it. <br><br></td></tr></table><br>
<a name="403425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> All your p\entities are pointing to the same SPR (i.e. the 10th one you create with ...<br><br>for t = 1 to 10:spr = createsprite():next etc....<br><br>You should just use p\entity = createsprite() and remove the above.  <br><br>Sorry but I haven't looked at the rest of the code or tried running it.<br><br>Stevie <br><br></td></tr></table><br>
<a name="403426"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sweenie</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> For starters you create a new particle every loop which will bring your application to a crawl after a few seconds.<br>try moving the createpart( Rand(1,2), 0, Rand(1,2), 1, .1) line to the line directly under the spr=CreateSprite() line... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
