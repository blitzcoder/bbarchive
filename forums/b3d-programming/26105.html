<!DOCTYPE html><html lang="en" ><head ><title >Collision Bug?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision Bug?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Collision Bug?</a><br><br>
<a name="271569"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have encountered the bug from hell...... or at least, the bug that's driving me nuts today.  I'm getting a "Memory Access Violation" with my debug turned on :/ (<a href="http://www.forestmarkstudios.com/images/Error.jpg" target="_blank">screenie</a>)...  It seems to occur on a collision check between a player and a powerUp.  The thing is, it seems to be consistently random (if that makes any sense).  Meaning that sometimes it occurs within the first 30 seconds of the game and other times it occurs after playing for 15 minutes..  Regardless, I'm not quite sure what's causing it.  The game is deathmatch style, so the players and the powerups respawn.  Could a player respawning ontop of a powerup cause this?  I would have assumed the program would just run the code asif the player picked up the powerup.  Anyway, I'm a little stumped, and wondered if anyone else has experienced anything similar (possibly with a solution?). <br><br></td></tr></table><br>
<a name="271608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If PowerUp_Col is a constant (and in the range 0..999) then it is most likely Player\Ostrich\ObjectHandle is an illegal handle and causing the exception.<br><br>I don't know what you mean by respawning but if it involves deleting and creating entities then you need to maybe explain what stages you go through in this logic. If you are deleting the entity then i advise setting Player\Ostrich\ObjectHandle to zero at this point and then just before you call EntityCollided do something like<br><pre class=code>
If Player\Ostrich\ObjectHandle=0 RuntimeError("lost player ostrich error")
</pre><br>or some such which might help you to pinpoint problem further. <br><br></td></tr></table><br>
<a name="272293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> By Respawning, I'm Hiding the player(when they die) from the battle and/or Hiding the PowerUP when it is collided with.  Then, after a given amount of time, the player is "respawned", ie placed in a random position on the game board, and Unhidden.  In a like manner, the PowerUp is shown again after a given amount of time (though it stays in one position). I'm not deleting them and recreating them, just hiding and reshowing (though doing some repositioning)...<br><br>I just had a thought though.  Should I be resetting the collisions everysingle time one occurs?  If so, I don't think I'm doing that.  Maybe there's a "value out of range" type of problem going on (with respect to collision counts)?  I don't know.   Just kinda thinking out loud now. <br><br></td></tr></table><br>
<a name="272307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, i didnt know there were still people who used the Blitz IDE... <br><br></td></tr></table><br>
<a name="272324"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> huh? who doesn't use the blitz IDE? I know there's others, but Blitz has an integrated help system and it's stable, unlike some other editers. Perhaps I just missed a good editer everyones using? <br><br></td></tr></table><br>
<a name="272372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Litobyte</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> UltraEdit 10.x <br><br></td></tr></table><br>
<a name="272530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm..  I am truly stumped..  I've made sure to reset all collisions once they occur, Made sure that there is no NULL Player\Object that it's checking collisions against, and I've made sure that none of the objects are respawning on top of one another.  But still I get the Memory Access Violation Error.  It's just so inconsistent (from a timing stand point) because you can play for a while and pick up the powerup with no problem, and My player is never the one triggering the error.  It's always one of the bots.  I'm not quite sure what to do. <br><br></td></tr></table><br>
<a name="272545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, this is odd.. I took the PowerUps completely out of the game, and then after playing for about 15 minutes got the error again. ?!?!  This doesn't make sense.  There was nothing to collide to, and I've insured that Player\Ostrich\ObjectHandle does in fact exist, yet I got the Memory Access Violation on the Collision Check between the player and the PowerUps (which weren't even in the game).  Could this be a bug internal to Blitz maybe? <br><br></td></tr></table><br>
<a name="272596"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> NTense, I got this one, and as you say, removed everything that I could to track it down.<br>In the end it turned out that I was using MoveEntity instead of TranslateEntity in order to implement gravity for my characters (didn't know there was a difference particularly) but Blitz just seemed to crash out after maybe 1 minute. I couldn't believe it when I tracked it down to that particular line of code, then changed it, and now no problem.<br>This may not be your problem, but worth checking that all repetitive collisions, like gravity, use TranslateEntity. <br><br></td></tr></table><br>
<a name="272806"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm.. I am using MoveEntity on almost all of the moving objects in the game..  I'll play with it and see what comes of it. <br><br></td></tr></table><br>
<a name="272905"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope, that is not it.  In fact, I got the collision error within the first ten seconds of running the test. :-(<br><br>Man, this sucks.. I had my hopes up a bit John ;-)  .   <br><br>This is a  real stumper..   (is that a word??) <br><br></td></tr></table><br>
<a name="272943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to be clear about this, my problem was continuous collisions of my characters with the terrain using MoveEntity, which seemed to produce a cumulative build up of collisions which were not cleared until it crashed. When I changed all continuous collisions with the terrain to be handled by TranslateEntity (as per Mark's Castle Demo) then everything was fine. Otherwise, for forward movement I use MoveEntity or PositionEntity as usual. <br><br></td></tr></table><br>
<a name="273006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NTense</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I've abandoned all hope on getting Blitz's collision to quit crashing, and wrote my own collision function which seems to work well.  Back to work'n on the game dev!  Thanks for your help guys. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
