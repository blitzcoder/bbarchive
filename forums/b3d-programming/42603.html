<!DOCTYPE html><html lang="en" ><head ><title >Programming style, avoiding globals.</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Programming style, avoiding globals.</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Programming style, avoiding globals.</a><br><br>
<a name="477048"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey guys, I've been talking to some of the pro coding guys at work here, and they tell me that global variables are generally a no-no.  I don't really understand why.  How are global veriables avoided?  Is this more a C/C++ thing? <br><br></td></tr></table><br>
<a name="477053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, it's a game/app thing.<br><br>In apps, you generally try to avoid globals because of memory issues.<br><br>In games, you generally use lots of globals because of speed issues.<br><br><br>But you still don't want to overdue it.  Only create as many as necessary. <br><br></td></tr></table><br>
<a name="477070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you have a lot of global variables, it's not very clear wich variables are used where. So when possible, they use local variables and parameters, and possibly types.<br>It's just better, especially when you're not the only one who's going to work with the code. <br><br></td></tr></table><br>
<a name="477082"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Strider Centaur</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Globals should be avoided in games just as much as in apps.  However, Blitz dosn't really give us any way to avoid them.  We can not pass pointers, so globals are what we use.  Really on of the best ways to avoid globals is to use a OOP language.<br><br>I Guess in a way you can cut down on globals with Types and Arrays, but arrays are basicly globals and Types are over kill for something like State variables and what not.<br><br>I think if you are concerend with most of that fall_x pointed out, you could adopt a nameing convention that helped make it clearer that a variable is a global.  Also you can keep this in a common.bb file for easy referance while coding.  Comments are you friend so use them.  :)<br><br>I have seen some people use:  g_variableName<br><br>Thats a fairly clear way to mark something as global.  :) <br><br></td></tr></table><br>
<a name="477289"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SurreaL</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hrm.. I thought that globals were allocated in RAM, whereas locals were allocated on the stack.. wouldn't this make locals considerably faster to use? I'm not sure why you would ever want to use lots of globals, really. (Although I could be wrong)<br><br>As far as avoiding globals.. well.. not really sure how that can be done without having somewhere else to store the information. (As Strider suggests.. types aren't necessarily required for every little piece of data you need to store.) I *have* heard of people placing literally everything in a type though, so I guess ultimately it's up to what you prefer. <br><br></td></tr></table><br>
<a name="477307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't the stack located in the RAM as well? Or is there some special Stack Cache in the CPU or something? I guess not. <br><br></td></tr></table><br>
<a name="477347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm guilty of literally placing everything in a type. Types provides a small amount of encapsulation. I also avoid globals by passing the values from function to function directly. However, it makes for really huge Function Argument List. <br><br></td></tr></table><br>
<a name="477395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Strider Centaur</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surreal, thats true in many Languages, but I don't beleive in B3D its the case, I think in B3D its all ram.<br><br>JFK, I think he means in the part of ram handled by the stack pointer of the CPU. <br><br></td></tr></table><br>
<a name="477416"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I'm not mistaken, all variables passed to functions, and local variables to that function are pushed onto the stack, and later popped off of the stack, requiring a small amount of overhead.<br>If the function was called a significant amount of times, and had lots of passed parameters or created locals, it might make a performance loss.<br>Although with computers being as fast as they are today, except in extreme circumstances, it will most always be negligible. <br><br></td></tr></table><br>
<a name="477542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm getting more and more into using types for global needs.<br><br>@Frank Taylor:<br>Not that I know what your code looks like, but if you're using types effectively, you ought to be able to *save* the number of parameters you're passing.  By passing a reference to the type entry (rather than a specific field) all of the individual fields can be referenced by the function, using that one parameter.  When passing a user-defined type like this, you're only passing a pointer to the data container, so the overhead is minimal.<br><br>I personally prefer to avoid lots of globals for organisational reasons.  Types give me a sophisticated method of organising the information so that it's accessible in an intuitive way---which I need if I'm going to pass my code to somebody else, or as is more often the case, come back to code I wrote ages ago (which is practically the same thing!)<br><br>Also, if you want to make use of other people's code, you may find that you've got global variable names in common.  Types tend to give your code a lot more portability than globals--although name clashes can still happen, of course.<br><br>And one more advantage of Types over globals:  If you're using Protean, or another editor that offers code completion, you get a handy-dandy popup list of the fields as you type.  FAR FAR handier than lengthy globals with multi-part naming conventions! <br><br></td></tr></table><br>
<a name="477591"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Best use types than globals, in my experiance. They're more fun to access too, especially when you can get something like app\menu[5]\r=255 :D <br><br></td></tr></table><br>
<a name="477607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  that I know what your code looks like, but if you're using types effectively, you ought to be able to *save* the number of parameters you're passing. By passing a reference to the type entry (rather than a specific field) all of the individual fields can be referenced by the function, using that one parameter. When passing a user-defined type like this, you're only passing a pointer to the data container, so the overhead is minimal.  <br></div><br><br>Agreed. The technique is only employed with variables shared by many types that are not fields of a specific type. <br><br>I have found that adopting a Verbose Label Convention can prevent code conflicts and improves portability. Even with using Globals! The convention can be as simple as using a label prefix for all types, variables, arrays, functions, etc within your library. <pre class=code>MyLib_{Label}</pre>Here's a example of a Label Convention that I've adopted<pre class=code>
Syntax: 
[Object][Purpose] (ie: ClockSet) 
[Object][Property][Purpose] (ie: ActionIntSet(myaction,index,255)) 
[Object][SubObject][Purpose] (ie: DatabaseRowNext(db)) 
[Object][SubObject][Property][Purpose](ie: CameraRumbleXSet(camera,2.0)) </pre>Just adding a prefix can allow the code to port anywhere. If you don't adopt a Labeling technique of some sort, it gets very difficult to code large programs because you start running out of labels. <br><br></td></tr></table><br>
<a name="477934"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Barliesque</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that's an excellent coding practice.  I try not to get too verbose, but the great thing is only your type definition names are what have to be verbose.  The fields inside can be as simple as you like--though clarity is always a good thing.<br><br>You know, now I'm inspired to just drop the use of globals completely.  ...Yes, of course.  <i>Down with globals!</i> <br><br></td></tr></table><br>
<a name="477958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qube</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Those so-called 'pro-coders' need their heads looking at regarding global variables!<br><br>Globals are very important in most programmes.<br><br>Take a simple example for games - a players position, weapons available, health, etc would be global<br><br>Take a simple application - notepad. alot of that would be requiring access to global variables. Position in the text file, save state, is something copied into memory etc etc.<br><br>In the end does it really matter how a program is constructed?. So long as its stable and speedy enough for the purpose it was intented, who's got the right to dictate on your programming style? <br><br></td></tr></table><br>
<a name="477979"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >WolRon</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not about programming style, it's about speed and memory.<br><br>Globals require less speed but take up more memory.<br><br>It's not as big an issue as it once was, but in some circumstances, it might still be. <br><br></td></tr></table><br>
<a name="478010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some OOP related languages use registers for locals which makes them VERY fast compared to globals. The other suggestion is each unit should be self contained so having 'global globals' makes them less portable. <br>(Think :  I might have been reading too much OOP stuff for Bmx) <br><br></td></tr></table><br>
<a name="478015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> the number of registers is pretty limited. And keep in mind that registers are used by the commands anyway. Using globals isn't bad at all, it's just one of those "Mr. God is now telling you how the REAL coders work" thing, and I think it sucks extremly.<br>If you are working in a team you may have to take care to use a clever prefix convention for the names of your globals, so there won't be conflicts with common variabe names like x,y,z or "player" etc.<br><br>You can also use this method for a modular library, using a describing and unique prefix eg: "netlib_x#". <br><br></td></tr></table><br>
<a name="478029"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've being doing OOP stuff for years and I think the only time I've used a global variable in the last decade is in Blitz.<br><br>But it doesn't offend me at all. I use Types wherever it makes sense to collect global together, I use Protean so I can group my globals in a region at the top of each file and I use a naming scheme a bit like Frank Taylor's for stuff that isn't in Types - so it all feels reasonably OO anyway.<br><br>The only thing that really does offend me about Blitz is using . for types and \ for fields - aaargh! It's so damn confusing when I go back to VB.Net and start putting \'s in everywhere  :-( <br><br></td></tr></table><br>
<a name="478042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> For BlitzMax...<br>Locals get pushed onto the CPU registers, if available, while globals are always stored in system ram. <br><br></td></tr></table><br>
<a name="478259"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's surely very fast, and of course, whereever locals can be used, they should be used, especially when they are initialized in a function anyway. But when you need the value of it over multiple function calls or in multiple functions, it may be pretty slow to store and restore them, just to be able to use locals. But of course, the can be globals, arrays, types, or even bank entries.<br><br>Wouldn't that be a challenge for you, make a program with banks only (well, byside the neccessary handles, like bank handles). that would feel kind of like ASM coding. <br><br></td></tr></table><br>
<a name="478278"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Qube</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's not about programming style, it's about speed and memory. <br></div><br>Not what the topic title says :P <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
