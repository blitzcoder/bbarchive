<!DOCTYPE html><html lang="en" ><head ><title >Facial Morphing?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Facial Morphing?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Facial Morphing?</a><br><br>
<a name="335639"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avrigus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Greetings,<br><br>I'm using Lightwave and I have a character with multiple facial morph maps. I'm animating a short and simple lip sync sequence that I want to replicate within Blitz3D. Now I know this is possible to do (well at least I think it is!) I was just wondering what the best way to go about exporting the animation from Lightwave to Blitz3D would be?<br><br>I'm guessing since I already have the head as a separate object I will have to export each facial morph as a separate head object (there will be about 10 morphs in total). Then I will have to export the motions of each morph into a text file and parse it within Blitz.<br><br>Lightwave's .LWO file format stores each morph within the base model itself, the main advantage of this is that the information stored for each morph is minimised to the morphed vertices only. In other words if I have an "eyes blink" morph where i've only moved around 20 vertices, the .LWO file stores only the information for those 20 vertices.<br><br>If I export a separate head model for each morph then the morph information must by default encompass every vertice in the entire head. Since I have about 10 morphs this would be a very inefficient way to achieve facial animation. Maybe the .B3D file format can be update to include morph maps that work in a similar way to Lightwave's .LWO format? Just a thought   :-)<br><br>Has anyone created facial morph animation within Blitz3D? If so how did you achieve this?<br><br>Cheers! <br><br></td></tr></table><br>
<a name="335779"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now that Blitz supports blended vertex weights, the best way to do facial animation is with bones; I'm working on a demo of that.<br><br>In the meantime however the best approach would be to use md2 file format.  Md2 allows morphing animation.  Export the head as an md2 object (I'm not sure how this is done with Lightwave but I'm sure it can be done; if necessary export the frames to separate objects to stitch together in some other tool like Q2 Modeler) with each morph target a separate frame.  Now use the transition parameter of AnimateMD2 to smoothly morph between targets/frames.<br><br>Another approach is direct manipulation of vertices in code.  In other words what you already pointed out: export the vertex positions into a text file and parse that yourself in Blitz. <br><br></td></tr></table><br>
<a name="335989"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Now that Blitz supports blended vertex weights, the best way to do facial animation is with bones; I'm working on a demo of that.  <br></div>Excellent, I wanted to experiment this, but better wait and see what a proper animator can do :) <br><br></td></tr></table><br>
<a name="336121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avrigus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your ideas Joe. I'd prefer to steer clear of boned facial animation at the moment as it's quite tricky to setup and animate but I wouldn't rule it out for future characters. What i'm trying to do has already been seen in this Half Life 2 example movie showing facial animation, it's well worth checking out and may give some Blitzer's inspiration: <a href="http://www.ausgamers.com/files/details/html/8064" target="_blank">http://www.ausgamers.com/files/details/html/8064</a><br><br>I had considered using an MD2 head with my morph targets on every consecutive frame, my only gripe with that method is I wanted to use sswift's shadow system on my characters and I believe that you can't cast shadows from MD2's. <br><br>So I guess direct manipulation of the vertices would be the way to go, i'll have to ask some questions on the Lightwave forums to see if I can spit out a text file from a morphmap of an object. This may lead to some cool new tools for Lightwave/Blitz3D users   :-)<br><br>Only problem I may have is that i've read in these forums it may not be possible to manipulate the verticies via morphs on a character that is already being deformed by bones. Can anyone confirm this? <br><br></td></tr></table><br>
<a name="336134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Md2 doesn't entirely rule out sswift's shadow system.  You could cast the shadow from a static dummy head instead of the animating visible head; the dummy won't have facial animation obviously but movement that subtle shouldn't matter for shadows.<br><br>Md2 does have a number of other issues too (eg. poor DX lighting) but is the easiest way to get morph animation into Blitz. <br><br></td></tr></table><br>
<a name="336145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avrigus</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Excellent idea Joe! I might give that a go when I come around to doing shadows. In the meantime I might try implementing a facial morph system similar to the one in the Half Life 2 example movie I posted above.<br><br>Anyone want to give me a hand getting this working? Here's a link to my WIP of the character I intend to use:<br><a href="http://www.cgtalk.com/showthread.php?s=&amp;threadid=119118" target="_blank">http://www.cgtalk.com/showthread.php?s=&amp;threadid=119118</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
