<!DOCTYPE html><html lang="en" ><head ><title >MeshCullBox issue</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >MeshCullBox issue</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >MeshCullBox issue</a><br><br>
<a name="971335"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am having problems using MeshCullBox. Is there something special I don't know about the command? What I am currently doing is this:<br><br>I am determining the real world width, height and depth of an animated model, based on recursive vertex checks. With these values I then FitMesh a cube that I parent to the animated mesh, for visual debugging purposes (alpha 0.3 etc.). This works fine and the Boxes fit as they should (around some NPCs in the game).<br><br>Now I take exactly the same values and use them with MeshCullBox. Surprisingly this works with some NPC meshes, and doesn't with some others. Some are culled when I get closer than a given distance, some even are culled when I only look up or down, or when theit top pivot is offscreen.<br>I have no idea what's going on. Am I right that the parameters for FitMesh should also work with MeshCullBox?? <br><br></td></tr></table><br>
<a name="971410"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have difficulty imagining the problem, but...<br>Could it be that the origin point is actually away from the model?<br><br>I've seen a lot of models produced in 3DS or AutoCad where the origin point is way outside of the model. Could this explain the problem you have? <br><br></td></tr></table><br>
<a name="971417"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd assume you have to use offsets for correct use.<br><br>Fitmesh works on the basis of the geometry of the mesh - all factors are related to the mesh itself.<br><br>MeshCullBox works on the basis of the bounding box of the mesh, not the actual mesh.  In addition, it relates to corners.<br><br>I'd assume you have to calculate the two to work together due to MeshCullBox working on the principle of corners.<br><br><br>EDIT:<br>ps, I just made that up (based on the commands) - I have no actual idea of whether it is true or not. <br><br></td></tr></table><br>
<a name="971589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlagDKT</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you use b3d exporter under 3dsmax? <br><br></td></tr></table><br>
<a name="972643"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the replies. Using Offsets may be hard. What is surprising is the fact that it works with some B3Ds and not with some others. Theirs pivots are all the same, so this isn't the problem.<br><br>The default "guessimated" Boxes usually work fine, but there's this sitation when en NPC lies on the ground, that's when he starts "blinking".<br><br>I also tried to set it to all children as well, with no success. There is a pivot ontop of the NPC AniMesh, but that shouldn't be the cause, or?<br><br>The Synthax is clear: x,y,z,w,h,d... there isn't much space for interpretation and I think Mark implemented it according to the blitz3d standarts.<br><br>It's a .B3D that was imported as .X and then exported by Fragmotion. But for some reason I also had similar artefacts with a B3D that was exported by CharacterFX.<br><br>Still top ranking on the todo list... <br><br></td></tr></table><br>
<a name="972683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I suspect the x,y,z,w,h,d parameters work in the same way as they do with EntityBox, which can be a little confusing.<br><br>Basically, you define the box by specifying x,y,z as relative coords from the mesh origin to one (any) corner of the box, then specify w,h,d as relative coords from that corner, to the opposite corner of the box.<br><br>For example, to set a cull box to fit a standard blitz cube, you would set x,y,z,w,h,d to -1,-1,-1,2,2,2. Or, you could set them to 1,1,1,-2,-2,-2. <br><br></td></tr></table><br>
<a name="972879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's what I did. The parameters for -1,-1,-1,2,2,2 were calculated from the min and max vertex coords. I also tried negative values. I even tried to set a simple box like -5,-5,-5,10,10,10 and it didn't make a diffrence, still only the feet of the NPC decided if it was displayed or not, or in other words: as soon as the feet are offscreen, the entire NPC is hidden.<br><br>That's what's so surprising, that it didn't make a diffrence. (well with the negative Values there was a diffrence, but it somehow didn't work as well).<br><br>I start thinking there must be a problem with the bones hierarchy, with the way nodes are nested in the file. Next I'll try to set the MushCullBox to the NOCs parent pivot. Then again, that's not a mesh but a Pivot...hmmm. maybe I should use CreateMesh instead of CreatePivot there, this could be a solution...we'll see.<br><br>Edit: didn't help. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
