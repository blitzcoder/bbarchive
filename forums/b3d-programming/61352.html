<!DOCTYPE html><html lang="en" ><head ><title >Texture part tiling</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Texture part tiling</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Texture part tiling</a><br><br>
<a name="685321"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve0</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hy,<br>I got the following problem:<br>I created a quad not a Sprite but it looks not different. Now i assigned a part of a texture to this quad. And now i want to scale the quad but i want the texture to keep it압 size (no texture scaling) and it should repeat itself.<br>I even got a pic:<br><a href="http://www.blitzforum.de/upload/file.php?id=249" target="_blank">http://www.blitzforum.de/upload/file.php?id=249</a><br>Sorry because it압 in german. But i think the pic says everything.<br>I hope you understand my question.<br>And thanks. <br><br></td></tr></table><br>
<a name="685344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand your question. I'll get back to you shortly, once i work it out ;o) <br><br></td></tr></table><br>
<a name="685345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I assume your scaling the quad from the centre outwards, and NOT from a corner? <br><br></td></tr></table><br>
<a name="685353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve0</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for your effort.<br>I앐 Scaling the quad with the ScaleEntity mesh,xscale,yscale,1.<br>I think it압 scaled from the center because it압 midhandled. <br><br></td></tr></table><br>
<a name="685354"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, right, so your using scale mesh. Ah, ok. Well, it all depends where the quad was built. If it was built around the 0,0,0 axis by your code, then it will scale from the middle. I'm writing a function to scale the quad and keep the texture correct. But it scales from the quads centre, regardless of where it's built. I'm almost done :o) <br><br></td></tr></table><br>
<a name="685355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think this is possible using a single texture which has 3 other shapes on it.  Are you clamping uv .. e.g. flag 16+48? Even if you unclamp the whole texture will repeat .. not just the circle in the top corner.<br><br>The only way I can think of is recreating a segmented quad depending on how much you scale it, or premake several versions and swap between them depending on the scale.<br><br>Maybe Ross C will prove me wrong ;)<br><br>Stevie <br><br></td></tr></table><br>
<a name="685358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve0</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Ross C:<br>Now i know what you mean. I built my quad around the 0,0,0 point, means 1.vertex:-1,1  2.vertex:1,1  3.vertex:-1,-1  4.vertex:1,-1. And of course thanks.<br>@Stevie G:<br>Exactly this is my problem. The only solution i know is to create a whole bunch of quads or to make a new texture.<br>The first thing isn앖 good because i would need much of them and the performance schould be as high as possible.<br>The second solution is not good, too because i want the texture, wich is not square, seamless.<br><br>[edit]I think you mean flags 16+32!<br>And yes i앐 using the flags because i want a pixelperfect texture (with scaling and so on) and without this two flags it would have grey edges. <br><br></td></tr></table><br>
<a name="685366"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think this is possible outside of -maybe- writing a custom pixel shader or something.  You can't tile just part of an image. <br><br></td></tr></table><br>
<a name="685373"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this what you mean? I'm not entirely sure. I've still to implement the texture remaining still though.<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Dim vertex_scale#(3,2) ; 4 vertices (0,1,2,3) and 3 axis (0 = x, 1 = y, 2 = z)

Global camera = CreateCamera()
PositionEntity camera,0,0,-10

Global light = CreateLight()

Global mesh = CreateMesh()
Global surf = CreateSurface(mesh)

v0 = AddVertex ( surf,-1,-1,0,0,0)
v1 = AddVertex ( surf, 1,-1,0,1,0)
v2 = AddVertex ( surf,-1, 1,0,0,1)
v3 = AddVertex ( surf, 1, 1,0,1,1)

AddTriangle surf,v0,v2,v1
AddTriangle surf,v1,v2,v3


Global texture = CreateTexture(64,64)
SetBuffer TextureBuffer(texture)
Color 255,255,255
Oval 0,0,63,63
Rect 0,0,63,63,0

SetBuffer BackBuffer()

EntityTexture mesh,texture


Global scale# = 1

While Not KeyHit(1)

	If KeyDown(200) Then
		scale = 1.01
		scale_quad(scale)
	ElseIf KeyDown(208) Then
		scale = 0.99
		scale_quad(scale)
	End If


	UpdateWorld
	RenderWorld
	Flip
Wend
End


Function scale_quad(scale#,index=0)

	vertex_scale(0,0) = VertexX(surf,index)
	vertex_scale(0,1) = VertexY(surf,index)
	vertex_scale(0,2) = VertexZ(surf,index)
	
	vertex_scale(1,0) = VertexX(surf,index+1)
	vertex_scale(1,1) = VertexY(surf,index+1)
	vertex_scale(1,2) = VertexZ(surf,index+1)

	vertex_scale(2,0) = VertexX(surf,index+2)
	vertex_scale(2,1) = VertexY(surf,index+2)
	vertex_scale(2,2) = VertexZ(surf,index+2)

	vertex_scale(3,0) = VertexX(surf,index+3)
	vertex_scale(3,1) = VertexY(surf,index+3)
	vertex_scale(3,2) = VertexZ(surf,index+3)


	centre_x# = (vertex_scale(0,0) + vertex_scale(1,0) + vertex_scale(2,0) + vertex_scale(3,0))/4
	centre_y# = (vertex_scale(0,1) + vertex_scale(1,1) + vertex_scale(2,1) + vertex_scale(3,1))/4
	centre_z# = (vertex_scale(0,2) + vertex_scale(1,2) + vertex_scale(2,2) + vertex_scale(3,2))/4



	For loop = 0 To 3 ; loop through the 4 points
	
		;get the distance from the vertex to it's centre point
		temp_x_dist# = vertex_scale(index+loop,0) - centre_x
		temp_y_dist# = vertex_scale(index+loop,1) - centre_y
		temp_z_dist# = vertex_scale(index+loop,2) - centre_z

		;Scale the vertex
		temp_x_dist = temp_x_dist * scale
		temp_y_dist = temp_y_dist * scale
		temp_z_dist = temp_z_dist * scale

		tx# = centre_x + temp_x_dist
		ty# = centre_y + temp_y_dist
		tz# = centre_z + temp_z_dist

		VertexCoords surf,index+loop,tx,ty,tz
		
		;fix UV's
		u_temp# = VertexU(surf,index+loop) * scale
		v_temp# = VertexV(surf,index+loop) * scale		
;		Stop
		VertexTexCoords surf,index+loop,u_temp,v_temp

	Next
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="685376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, sorry. I didn't look at your picture :o) Well, you could do as suggested. Simply created a segmented quad, so you can fake wrap the texture around. Limme try that... <br><br></td></tr></table><br>
<a name="685377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why not copy the part of the texture you want to another texture? Then use this. It would work fine, unless you are doing this specifically for lots of quads, each using this techniqiue. <br><br></td></tr></table><br>
<a name="685381"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can do it like this:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 640,480,0,2
SetBuffer BackBuffer()

dummytex = CreateDummyTex()

camera = CreateCamera()

quad = CreateMesh()
UpdateQuad(quad,1,1,0,0)
EntityTexture quad,dummytex
PositionEntity quad,0,0,10
EntityFX quad,1

s# = 0.0

tu = 0
tv = 0

While Not KeyHit(1)

	If KeyHit(57)
		tu = tu+1
		If tu&gt;1
			tv = tv+1
			tu = 0
			If tv&gt;1 Then tv = 0
		EndIf
	EndIf

	s = s + 1
	UpdateQuad(quad,2.0+Sin(s)*1.5,2.0+Cos(s)*1.5,tu,tv)
	RenderWorld
	
	Color 255,255,255
	Text 0,0,"Space to change texture tile"
	
	Text 0,300,"The texture looks like this:"
	CopyRect 0,0,128,128,0,320,TextureBuffer(dummytex),BackBuffer()
	
	Flip

Wend

End

Function UpdateQuad(mesh,w#,h#,tilex,tiley)

	s = CountSurfaces(mesh)
	If s&lt;1
		surf = CreateSurface(mesh)
	Else
		surf = GetSurface(mesh,1)
	EndIf
	ClearSurface surf

	tx = Floor(w)
	ty = Floor(h)
	tu# = tilex*0.5
	tv# = tiley*0.5

	For x = 0 To tx
		For y = 0 To ty
			x2# = x + 1.0
			y2# = y + 1.0
			tu2# = tu + 0.5
			tv2# = tv + 0.5
			
			If x = tx
				x2 = w
				tu2 = tu + (0.5 * (w-tx))
			EndIf
			
			If y = ty
				y2 = h
				tv2 = tv + (0.5 * (h-ty))
			EndIf
			
			v0 = AddVertex(surf,x ,y ,0,tu ,tv )
			v1 = AddVertex(surf,x2,y ,0,tu2,tv )
			v2 = AddVertex(surf,x2,y2,0,tu2,tv2)
			v3 = AddVertex(surf,x ,y2,0,tu ,tv2)
			AddTriangle surf,v0,v1,v2
			AddTriangle surf,v0,v2,v3
		Next
	Next

	UpdateNormals mesh
	FlipMesh mesh

End Function

Function CreateDummyTex()

	Color 255,0,0
	Oval 4,4,56,56
	
	Color 255,255,0
	Rect 68,4,56,56
	
	Color 0,255,0
	Line  4,68,60,124
	Line 60,68, 4,124
	
	Color 0,255,255
	Rect 68,68,56,56,False
	
	tex = CreateTexture(128,128)
	CopyRect 0,0,128,128,0,0,BackBuffer(),TextureBuffer(tex)

	Return tex

End Function</textarea><br>Made very quickly but it shows how to do it... <br><br></td></tr></table><br>
<a name="685384"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> "And then you go, and spoil it all, by posting something much better, than miiiiiiiine"<br><br>Good stuff fredborg :o) <br><br></td></tr></table><br>
<a name="685387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry, didn't mean to steal your thunder :) <br><br></td></tr></table><br>
<a name="685389"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve0</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok thanks to you all. I didnt check your codes. But whats if i want the texture seamless. The problem is that the texture is non square sized. <br><br></td></tr></table><br>
<a name="685390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Joking man ;o) Your code is far more helpful :o) <br><br></td></tr></table><br>
<a name="685391"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Joking man <br></div>Ditto :)<br><div class="quote"> But whats if i want the texture seamless. The problem is that the texture is non square sized. <br></div>It shouldn't be a problem, if you pad each tile with a single pixel border and offset the uv's slightly you can get it tiling without problems. Square or not makes no difference. <br><br></td></tr></table><br>
<a name="685411"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Steve0</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> WOW. IT WORKS. Thanks to you all.<br>The code needs to get a little customized to solve my problem exactly but thats a good starting. THANKS. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
