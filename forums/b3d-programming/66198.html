<!DOCTYPE html><html lang="en" ><head ><title >Devil Shadow System</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Devil Shadow System</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Devil Shadow System</a><br><br>
<a name="739726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why can't I hide entities when I'm using the Devil Shadow System? <br><br></td></tr></table><br>
<a name="739787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DareDevil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> the entity comes automatically qualified from the motor of the shadows, would have to insert a flag in the object in order to hide in way permanete the object and to create one small function of for this ;)<br><br>you ask support DevilChild <br><br></td></tr></table><br>
<a name="739827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi<br>sorry, thats one of my tiny dis-compatible bugs.<br>i guess you have to use entityalpha ..., 0 yet *sorry*<br>and deleteshadowcaster() <br><br></td></tr></table><br>
<a name="739840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Does my gfx card have to support bump mapping for this engine? <br><br></td></tr></table><br>
<a name="739842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes.<br>but cards which are supporting stencil buffers are supporting bump mapping. <br><br></td></tr></table><br>
<a name="739944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not true ... my card supports both yet continues to fail due to your use of bumpmapping.<br><br>Stevie. <br><br></td></tr></table><br>
<a name="739958"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mikele</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> On my notebook Ati x700 bump mapping (DSS 1.2) works fine but on my gf6600 not. <br><br></td></tr></table><br>
<a name="740097"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dont know if it is your graphics card or the dx7 wrapper of tom. i think some problems could be caused by toms dx7 wrapper (i dont know)<br><br>if you have these problems, just comment everything out which contains words like 'enbm' or 'bump'.<br>there are only a few lines... <br><br></td></tr></table><br>
<a name="740681"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> But then when I want to show the entity again it doesn't have shadows. :(<br><br>What I want to do is if the entity is far enough off screen it is ignored by the shadow system (so it doesn't bother even building the shadow volumes).  When I have 1000+ entities with 400+ polys each (50 entities is about the max I expect to be on screen at once), I don't want a shadow mesh to be updated for every single one of them. <br><br></td></tr></table><br>
<a name="740694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Subirenihil</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have successfully allowed a shadow to be turned on and off without erasing the shadow data (does NOT turn the entity on and off - use "EntityAlpha".  By not automatically using "EntityAlpha" it allows you to do some LOD stuff a.k.a. not having entities more than a certain distance from the camera casting shadows but still have the entity visible).  The way I did it bypasses the shadowvolume creation, thus saving processing time and not drawing the shadow.<br><br>I added these two commands to "DevilShadowSystem.bb"<br><pre class=code>
Function HideShadowMesh(ent)
	For etem.ETE_Mesh=Each ETE_Mesh
		If etem\ent=ent Then etem\hidden=True
	Next
End Function

Function ShowShadowMesh(ent)
	For etem.ETE_Mesh=Each ETE_Mesh
		If etem\ent=ent Then etem\hidden=False
	Next
End Function
</pre><br>Added the field "hidden" to the ETE_Mesh type in "ShadowVolumes.bb"<br><pre class=code>
Type ETE_Mesh
	Field ent,hidden
	Field cnt_tris, tri.ETE_Triangle[ETE_MaxTriang]
End Type
</pre><br>And added a IF/Then to the "UpdateVolumes" function in "ShadowVolumes.bb"<br><pre class=code>
Function UpdateVolumes(light, parallel = False, top_caps = True)
light_x# = EntityX(light, True) * (1 + parallel * 1000000)
light_y# = EntityY(light, True) * (1 + parallel * 1000000)
light_z# = EntityZ(light, True) * (1 + parallel * 1000000)
For etem.ETE_Mesh = Each ETE_Mesh
	If etem\hidden=False;					&lt;---Added "If" here
		cnt_tris = etem\cnt_tris
		For v = 0 To cnt_tris
			etet.ETE_Triangle = etem\tri[v]
			
			...
			
		Next
	EndIf;							&lt;---And "EndIf" here
Next
End Function</pre><br><br>Please verify that my modifications don't cause problems (I don't seem to have any). <br><br></td></tr></table><br>
<a name="740731"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> verified :)<br>in my eula is a special permission for mods ;)<br>cya <br><br></td></tr></table><br>
<a name="771629"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carrot</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br>I've been trying to incorporate the shadow system into our  WIP game (Gizmo) and I've been getting strange problems.<br>The demos work fine, but when I try the same simple tests in Gizmo, the results look like they've been 'turned-inside-out'!<br>It's a z-buffering problem by the looks of it, with faces further away appearing in front of those closer to the camera. Any idea what could be going wrong?<br>Thanks. <br><br></td></tr></table><br>
<a name="771878"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> i know those problems form the dss 0.6 version. the 1.35 update should not do this. please send me a screenshot with the error :) <br><br></td></tr></table><br>
<a name="784547"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Out of interest, is it yet possible to have a shadow caster without self shadowing? <br><br></td></tr></table><br>
<a name="784552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> no. except if you make it bright using the 1 flag <br><br></td></tr></table><br>
<a name="784556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the reply. <br>Sorry for all the questions. <br><br>Is it possible to have a low-poly model for shadow casting  only, and not be visible? For example, a low poly human would cast a shadow on the environment, whilst a normally lit human would walk around in the same position. <br><br></td></tr></table><br>
<a name="784571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> i dont think so. i would implement a lot more features if there wouldnt be that many limitations by blitz... <br><br></td></tr></table><br>
<a name="784622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just to mention GF6600 and GF6800 have a hardware restriction: non square non power of 2 textures will fail<br><br>Perhaps thats a reason its going wrong on that end ... <br><br></td></tr></table><br>
<a name="806288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nikko</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> your 2 demos are doing an amazing "memory error"...just let you know about it <br><br></td></tr></table><br>
<a name="806343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bytecode77</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> well, there is no bugfix without a bug! you may turn your debugger on and see what line tells you an error. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
