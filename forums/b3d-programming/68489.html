<!DOCTYPE html><html lang="en" ><head ><title >B3D Animation ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >B3D Animation ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >B3D Animation ?</a><br><br>
<a name="765220"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hiya,<br><br>I'm having some characters done in 3DS Max (version8.0), and we are using the fab exporter "B3D Pipeline".  <br><br>We are using 3DS Max <br><br>Mesh<br>Bones<br>Skin modifier<br>Animate<br>B3D Export<br><br>We can see the animation in the B3D viewer just fine.  In B3D using loadanimmesh the animation does not work straight off, ie. loadanimmesh, animate mesh,1,1,1,1 does not work.  BUT if I then load the animated exported mesh into UUnwrap 3D and then Milkshape and export it, it works fine!!!  <br><br>I don't want to have to pass everything through UUnwrap 3D and Milkshape if I can avoid it... am I setting the export properties incorrectly on Pipeline?<br><br>In essence, in code, why do I have to do all this:<br><pre class=code>
Global playc=LoadAnimMesh("anim.b3d")

If CountChildren(playc) &gt; 0 Then 
	For childcount = 1 To CountChildren(playc) 
		player = GetChild(playc,childcount)
	Next 
EndIf

ExtractAnimSeq(playc ,0,69) ;anim sequence 1 

Animate playc,1,1,1,1

</pre><br><br>When wat I really want to do is this...<br><br><pre class=code>
Global playc=LoadAnimMesh("anim.b3d")
Animate playc,1,1,1,1
</pre><br><br>The strange thing is I dont have to look for other bones in other models such as psionics dwarf, zombie etc, why do I need to do that in this case?<br><br>Thanks,<br><br>IPete2.<br><br>(edit - thanks for moving this here!) <br><br></td></tr></table><br>
<a name="765247"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds like you just haven't found the correct child object to animate. Try finding the child with the exact entityname() (as it is named in the 3dsmax) and animate that...probably a null node or extra bone like a sword or something throwing it out of squiff. <br><br></td></tr></table><br>
<a name="765248"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hujiklo,<br><br>Thanks I shall try looking for that and report back.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="765252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh - I just noticed you're not even animating the child you extracted in the code above. I think you want to animate ' Player' not 'playc'...and you may even have to extract the animsequence from the 'child' not the 'rootnode' I can't quite remember. <br><br></td></tr></table><br>
<a name="765272"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mattizzle</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't even understand what that whole code block was meant to do anyways. After it, you'll just end up having 'player' = the last child of 'playc'. And if that's what you want then why not do:<br>[code]<br>player = GetChild(playc,CountChildren(playc))<br>[/codebox]<br><br>Please correct me if I'm wrong. Though, about your main question here I have no idea, but it sounds like Hujiklo is right. <br><br></td></tr></table><br>
<a name="765284"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mattizzle,<br><br>I am not explaining myself too well here -  normally I use a loadanimmesh("mesh.b3d")  and then simply use  the animate entity command to get the entity animating.<br><br>but...<br><br>I am starting to work with a (brilliant) animator (using 3DS Max and B3D Pipeline) and the method stated above does not animate the mesh when loaded into B3D.  So I read up on why it might not work, and it seems that finding the root bone and animating that instead may be the solution, but I can't figure out how to do it.<br><br>Now...if I take what my animator exports as a b£D mesh with animations galore and pass it thorugh UU3D and then import and export from Milkshape, it works with the code above - normally!!???  What I want is to be able to loadanimmesh and animate the character straight away, which is evidently possible as it works exported from Milkshape.   Either way I want to (a)understand how to find the root bone and animate the mesh in (preferrably simple) code  OR (b) set the export settings for B3D Pipeline differently if we currently have them wrong so the exported animated mesh works straight off!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="765326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Give the rootbone some usefull name and use findchild, should make it quite easy to get it working.<br><br>But your brilliant animator might need to make sure he / she does not use more than 4 vertex weights. <br><br></td></tr></table><br>
<a name="765329"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >REJLA</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had a similar problem in the game i'm creating.<br>I found the answer in the forums<br><br><br>load the b3d file<br>find the child with the same name as the name of the mesh you had in Max and animate that child<br><br>The code bellow is an example of how it works<br><br><pre class=code>
player=LoadAnimMesh("player.b3d")
playeranim=FindChild(player,"Box01")
Animate playeranim
</pre><br><br>the Box01 child is the name that the mesh had in Max <br><br></td></tr></table><br>
<a name="765362"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Reja,<br><br>You have obviously suffered exactly the same issue, as you said.  That works beautifully thanks for that!<br><br>@Dreamora,<br><br>Yeah I had given it an easy name, or so I thought, I was trying to move the wrong thing, Reja sorted me out with that handy snippet.<br><br>Looking at the file inside UU3D I can see there are 6 weights, do I need him to use less?  Any information at this early stage would be greatfully received as we are just about to get into proper animation sequences tomorrow.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="765418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Each vertex is only allowed 4 bones max attached to it. <br><br></td></tr></table><br>
<a name="765535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> As Dreamora said don't use more than 4 weights. Tho from what I know I'd say don't use more than 2 whenever possible cause they will slow down the game a lot.<br><br>I'd also suggest to make sure to export the animation in a way that doesn't require to search for certain children to animate it. This will simplify loading of dynamic content.<br>To me it sounds like a bug in the exporter, as if it's adding a dummy top node. Animated meshes already have this dummy node, created by blitz when loading (note: EntityClass$ of the top parent is not "Mesh"). <br><br></td></tr></table><br>
<a name="765589"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pudding</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The best way to export a single character, is to hide everything but a single skinned mesh, and uncheck Scene Root when you export. Then you won't have to use FindChild, and loading animation sequences etc. will work as expected.<br><br>Sometimes the exporter has to add a Scene Root node to ensure that the exported file has a single root node. This lets you export a scene with multiple skinned meshes etc. in a single file - but you then have to animate the children manually, and loading animation sequences will be harder...<br><br>It's a feature, not a bug ;)<br><br>-Pudding <br><br></td></tr></table><br>
<a name="765727"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mattizzle</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool! Pudding, I think your pipeline program is becoming very  popular! I think I'll try it out too! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
