<!DOCTYPE html><html lang="en" ><head ><title >Enemy A.I. Code???</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Enemy A.I. Code???</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Enemy A.I. Code???</a><br><br>
<a name="368897"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kozmi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi All...<br><br>Just wanted to ask some of you if you know where there might be a fairly decent code sample I might be able to start with in order to create my enemy A.I. code as a base?<br><br>This would help me get a little bit of a head start on the game you know! But if not! That's cool too! :)<br>If someone might have a A.I. sample lying around... Please let me know! Thank's Guys! ;) <br><br></td></tr></table><br>
<a name="368902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> For what kind of game?<br><br>AI is going to be totally different for different games.<br>Simple AI is IF [Certain conditions] then [do stuff]<br><br>Of course take this a stage further and you get something like<br>IF [certain conditions] and [in a certain state] then [go into this state]<br>If [in a certain state] then [do stuff]<br><br>Makeing it more flexible still<br>if [certain conditions] then [change state on a sliding scale]<br>Then you have actions based on sliding scales rather than specific states.<br><br>In my lander game, for the bad guy fighter AI, they have fixed states of Retreat, Roam, defend, evade and attack.<br><br>So you end up with stuff like<br><br>If roaming and can see a goodguy then attack said goodguy<br>If attacking and health low then retreat<br>if attacking and a goodguy is in my sights then shoot the bugger<br>If I can see someone attacking another badguy then defend said badguy<br>If retreating and getting shot then evade<br>if retreating and can't see any goodguy then roam<br>if roaming and can't see anyone then find a newpoint to roam to<br><br>on top of this you had the non state ai that was:<br>If too close to the ground then pull up<br>If too high then push down<br>if too far off course then turn back on course<br>if there is a mountain in front of me pull up<br><br>and so on.<br><br>The scouts had a different set of states and ai conditions, likewise the defence cannons.<br><br><br>I hope that helps some!? <br><br></td></tr></table><br>
<a name="368904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kozmi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dam! Im' sorry Rob!! I should of been more specific!!<br><br>Im' needing an A.I. code sample for my Egyptian game for a FPS type!!! Basically! I need the enemies to chase the player when the player gets within a certain range of the enemy! Then ofcourse... Once the enemy gets so close to the player... start attacking him! I have an idea on how to write this code and im' working on a short sample now of my own... But I just started this too! Any suggestion's or possibly a code sample to start with???<br><br>This would help me out alot!!!<br>:) <br><br></td></tr></table><br>
<a name="368909"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> entitydistance, I too am looking to write something like this, At the moment my guys follow a path, and some path have a "TREE" node that can split off in to any amount of paths, the AI chooses by randomly picking out the path. <br><br></td></tr></table><br>
<a name="368911"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kozmi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmmmm....<br><br>Sounds interesting!!! Would love to take a look at it! :) <br><br></td></tr></table><br>
<a name="368914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's basic state AI<br><br>You code would look something like:<pre class=code>If entitydistance(badguy,player)&lt;chasedistance and badguystate = roam
	If the badguy can see the player (linepick)
		badguy go into chase mode, chasing player
	endif
endif

if entitydistance(badguy,player)&lt;attackdistance and badguystate=chase
	attack player
endif

if entitydistance(badguy,player)&gt;chasedistance then badguystate=roam

if badguystate=roam then bumble around
if badguystate=attack then smack,smash,destroy
if badguystate=chase
	where's the good guy.
	Point at him
	Move towards him
endif</pre> <br><br></td></tr></table><br>
<a name="368915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CyberHeater</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah,  but surely you need to factor in:<br><br>1.  Can the enemy hear him<br>2.  Is the enemy injured.  If so, would he attack or hide.<br>3.  Teaming - if multiple enemy's.  1 might attack face on but the others might try to go around the player and attack from the back.<br>4.  Types of attack.<br>         - Some weapons might be better in some circumstances then others.<br>         - When to use shields.<br>5.  Protect team mates.<br>         - If another enemy is attacking you close range, does it really make sense for the other enemy to throw in a grenade.<br>6. Different styles of enemy.<br>         - Frontal attack (maniac)<br>         - Steath sniper etc...<br><br>You get the idea.<br><br>I think the ideal is to create some kind of enemy automaton with personality/strengths/weakness with good path finding skills and a mini mission of it's own (ie - patrol and protect this area) and then let it loose in your level.<br>Should provide a more realistic playing experience. <br><br></td></tr></table><br>
<a name="368925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just put together a very basic snippet to demonstrate state based AI, use the arrow keys to move around, you're the P!<br><br>The enemy has roam, chase and attack states, and will show it's state with it's colour and a R,C, or A.<br><br><pre class=code>Graphics 640,480,32,2

; simplistic ai
; Rob Farley 2004

px#=320
py#=240
pspd#=1


Const roam=1
Const chase=2
Const attack=3


ex#=Rand(0,640)
ey#=Rand(0,480)
espd#=.5
estate=roam
echasedis = 100
eattackdis = 20

roamx=Rand(0,640)
roamy=Rand(0,480)


kup = 200
kdown = 208
kleft = 203
kright = 205

SetBuffer BackBuffer()

Repeat
Cls

; player control
If KeyDown(kup) Then py=py-pspd
If KeyDown(kdown) Then py=py+pspd
If KeyDown(kleft) Then px=px-pspd
If KeyDown(kright) Then px=px+pspd

; find the distance from the player to the enemy
dis# = Sqr(((px-ex)*(px-ex)) + ((py-ey)*(py-ey)))

; enemy AI
If estate=roam And dis&lt;echasedis Then estate=chase
If estate=chase And dis&gt;echasedis Then estate=roam
If estate=chase And dis&lt;eattackdis Then estate=attack
If estate=attack And dis&gt;eattackdis Then estate=chase

If estate=roam ; go to a random place on the screen
	If ex&lt;roamx Then ex=ex+espd
	If ex&gt;roamx Then ex=ex-espd
	If ey&gt;roamy Then ey=ey-espd
	If ey&lt;roamy Then ey=ey+espd
	dis# = Sqr(((roamx-ex)*(roamx-ex)) + ((roamy-ey)*(roamy-ey)))
	If dis&lt;50 Then 
		roamx=Rand(0,640)
		roamy=Rand(0,480)
		EndIf
	EndIf


If estate=chase	; chase the player
	If ex&lt;px Then ex=ex+espd
	If ex&gt;px Then ex=ex-espd
	If ey&gt;py Then ey=ey-espd
	If ey&lt;py Then ey=ey+espd
	EndIf
	
If estate=attack ; erm... chase the player hacking 'n' slashing
	If ex&lt;px Then ex=ex+espd
	If ex&gt;px Then ex=ex-espd
	If ey&gt;py Then ey=ey-espd
	If ey&lt;py Then ey=ey+espd
	EndIf



; draw advanced graphics

Color 0,255,0
Oval px-10,py-10,21,21,False
Text px,py,"P",True,True

If estate=roam Then Color 255,255,0
If estate=chase Then Color 255,160,0
If estate=attack Then Color 255,0,0
Oval ex-10,ey-10,21,21,False
If estate=roam Then Text ex,ey,"R",True,True
If estate=chase Then Text ex,ey,"C",True,True
If estate=attack Then Text ex,ey,"A",True,True


Flip
Until KeyHit(1)</pre> <br><br></td></tr></table><br>
<a name="368949"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kozmi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank's Rob!!!! This will be an excellent base to work from!! I was working with the <b>collide</b> demo sample in the <b>mak</b> directory of Blitz3D! But this looks like a good start!!! Thank you very much!!! ;)<br><br>I'll make sure your name get's proper credit in the <b>credits section</b> of the game!! ;) <br><br></td></tr></table><br>
<a name="368967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pleased I could help and there's really no need to credit me for about 3 minutes work! But I apprecaite the sentiment. <br><br></td></tr></table><br>
<a name="369050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alberto</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> The book "A.I. Game programming"<br>by Alex J. Champandard<br>see  also the site "artificial intelligence depot"<br>should be focused on "enemy A.I " even though your question is actually a little bit generic <br><br></td></tr></table><br>
<a name="369098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is a clip from the one i wrote, its messy, but they dudes wont interact with the rest of the world if i have it different<br><br>have a look, it may help you come up with something better<br><br><pre class=code>

For e.tEnemies = Each tEnemies
	
		
		
		tx# = EntityX#(e\mass)
		ty# = EntityY#(e\mass)
		tz# = EntityZ#(e\mass)

		PositionEntity e\body, tx#, ty#, tz#
		PositionEntity e\pivot, tx#, ty#, tz#
		
		
		
		ryaw# = EntityYaw#(e\pivot, 0)
		cyaw# = EntityYaw#(e\body, 0)
		
		cr# = CurveValue#(cyaw#, ryaw#, 15)
		
		RotateEntity e\body, 0, cr#, 0
		
		
		If Not Animating(e\model) Then 
			Animate(e\model,1,.23,enemy_mode_walk)
		Else
			If e\mode = 1
				e\woddle = (e\woddle + .12) Mod AnimLength(e\model)
				at# = AnimTime(e\model)
				PositionEntity e\model, 0, -3 + (Cos(at * 110)/ 2), 0
				;TurnEntity e\model, (Cos(at * 110)/ 2),0,0
				RotateEntity e\model, (Cos(at * 110)*2),EntityYaw(e\model),-(Cos(e\woddle * 110)*3)
			EndIf
		End If
		
		If e\currentnode=0 Then  e\mode = 3
		;If e\timer&gt;0 Then e\timer = e\timer - 1
		If e\mode = 3
		
			
			If e\direction = 0 Then	; going from 1 ... 2... 3...
				oldnode = e\currentnode
				nextnode = e\currentnode + 1
			Else; going to 3... 2... 1...
				nextnode = e\currentnode - 1
			EndIf
			
			vring = 0
			
			e\newnode = e\newnode + 1
			veld% = 1
			For n.tNodes = Each tNodes
				If e\nodegroup$ = n\nodegroup$
					vring = vring + 1
					If n\nodeid = oldnode Then
						If (n\choose$ &lt;&gt; "") And (e\newnode&gt;2) ; Bot can choose
							e\newnode = 0
							If Int(Rnd(1))=1 Then
								veld% = 0	; Not to set the next node!
								
								npath$ = n\choose$
								npathid$ = n\choosepath$
								For jn.tNodes = Each tNodes
									If jn\nodegroup$ = npath$
										If jn\nodeid = Int(npathid$)
											e\targetnode = jn\pivot
											e\currentnode = jn\nodeid
											e\nodegroup$ = npath$
										End If
									End If
								Next
							End If
							
						End If
					EndIf
					If veld% = 1 Then
						If n\nodeid = nextnode Then
							e\targetnode = n\pivot
							e\currentnode = n\nodeid
						End If
					EndIf
				EndIf
			
			Next
			If veld% = 1 Then
				If (nextnode &gt; vring)
					e\direction = 1
				ElseIf (nextnode &lt; 1) 
					e\direction = 0
				EndIf
			EndIf
			e\mode = 1
		End If
		
		If e\mode = 1 Then
			
			If e\targetnode&lt;&gt;0 Then
				PointEntity e\pivot, e\targetnode
				
				
				MoveEntity e\mass,0,0,.24
				
				ryaw# = EntityYaw(e\pivot)
				RotateEntity e\mass, 0, ryaw#, 0
				d# = EntityDistance(e\targetnode,e\mass)
				If d#&lt;4 Then ; hes reached his target
					e\mode = 3
					e\timer = 60
					
				End If
			EndIf
			
		EndIf
		
		
		
		e\y_vel#=(ty-e\PlayerY)
		e\PlayerY=ty
		e\y_vel=e\y_vel-.07
		TranslateEntity e\mass,0,e\y_vel,0
		

		
	Next

</pre> <br><br></td></tr></table><br>
<a name="369184"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also from what i read above, that you want the enemies to chase, i believe your going to need A* path finding - which is worth reading into. <br><br></td></tr></table><br>
<a name="369223"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >3D</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> there is my 3d a* path finding lib in the code archives with a basic demo or there are 2d path finding libs some where. <br><br></td></tr></table><br>
<a name="369768"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >aCiD2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> yea, there is a 3d lib on blitzcoder iirc :P <br><br></td></tr></table><br>
<a name="369859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >morduun</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's a finite state machine tutorial <a href="http://www.blitzcoder.com/cgi-bin/articles/show_article.pl?f=morduun07112003153313.html" target="_blank">here</a> as well. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
