<!DOCTYPE html><html lang="en" ><head ><title >type stuff</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >type stuff</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >type stuff</a><br><br>
<a name="335121"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> problem with types is I have set my player type to global so i can reference it anywhere. <br>so now I can call it 'p\model' in my update player function<br>rather than 'player1\model'<br><br>the problem is that if I try to refer to it as p\model in my 'update enemy' function its returns as 'entity must be a type'.<br><br>conversely if i try and refer to my enemy as 'e\model',  in the 'update player' function the same thing happens<br>ie  'entity must be a type'.<br>syntax wise 'p\model' and 'e\model' work fine inside their own update functions, but not when referencing each other for some reason<br><br>Bsically I am trying to copy the enemy1\model to make a generic level enemy and have them all with the same behavior/triggers. <br><br></td></tr></table><br>
<a name="335126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TartanTangerine (was Indiepath)</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you declaring p or e as Global Variables??<br><br>ie.<br><br>Global p.MyType = New MyType <br><br></td></tr></table><br>
<a name="335138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I  am declaring the new type as a global<br>ie <br>global Player1.Player=CreatePlayer( -20,0,0 )<br>global Player2.Player=CreatePlayer( -20,0,0 )<br>etc<br>global enemy1.enemy=CreateEnemy( -20,0,0 )<br>global enemy2.enemy=CreateEnemy( -20,0,0 )<br>etc<br>this is the create player function <br><br>Function CreatePlayer.Player( x#,y#,z# )<br>	p.Player=New Player<br>	p\entity=CreatePivot()<br>	p\model=CopyEntity( player_model,p\entity )<br>	p\player_y=y<br>	PositionEntity p\entity,x,y,z<br>	EntityType p\entity,TYPE_PLAYER<br>	EntityRadius p\entity,1.7<br>	ResetEntity p\entity<br>	Return p<br>End Function <br><br></td></tr></table><br>
<a name="335150"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks like it should work, but there is no way to be sure.<br><br>We need to see some code we can actually run and observe the error. <br><br></td></tr></table><br>
<a name="335161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your globals are named Player1, Player2, enemy1, enemy2 not p and e. Isn't that the problem? <br><br></td></tr></table><br>
<a name="335165"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ahh, my code is pretty big and messy.I wil have another look, see if I missed anything simple <br><br>perhaps <br>p.Player=New Player <br>should be global but its inside a function ? <br><br></td></tr></table><br>
<a name="335171"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ruz,<br><br>If I can offer a word of caution with using globals. Please be sure that you don't rely on them within your functions. I ran into several hard to find bugs in which functions were overwritting data of globals.<br><br>I would recommend using a Array of types for your situation.<br><pre class=code>Dim player.player(24)
Dim enemy.enemy(24)</pre> <br><br></td></tr></table><br>
<a name="335172"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure the e and a identifiers are not already used? As a variable perhaps... <br><br></td></tr></table><br>
<a name="335179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> 'Your globals are named Player1, Player2, enemy1, enemy2 not p and e. Isn't that the problem? '<br><br>How do I  make p and e  global if they are  inside a function though?<br><br><br><br>I wil check  ChrML <br><br> Frank,what else can i do in this case?<br>I need to refer to 'e/model' not just  'enemy1\model' so each enemy does the same stuff, not just enemy1 <br><br></td></tr></table><br>
<a name="335185"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ruz,<br><br>If all your enemies use the same functions etc then you only need access them with one variable. I use a For..Each loop to update. If the states are different, then you should throw a select case in the update to select different actions. My approach would be:<pre class=code>Function playerUpdate()
	For this.player=Each player
		Select this\state%
			Case 1 playerAttack(this)
			Case 2 playerRun(this)
		End Select
	Next
End Function</pre>My approach is based of the typical Particle system framework, in which you create, update, and destroy a particles. This approach could be applied to all game objects IMHO. Hence, create, update, and destroy a enemies, bullets, etc. <br><br></td></tr></table><br>
<a name="335188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ChrML</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Or if you want to "seperate" them somehow, then assign them ID's:<br><br><pre class=code>
tmp.Player = new Player
tmp.Player\id% = 1

tmp.Player = new Player
tmp.Player\id% = 2


For tmp.Player = Each Player
  if tmp.Player\id = 1 then
    ;action for player 1
  elseif tmp.Player\id = 2 then
    ;action for player 2
  endif
Next
</pre> <br><br></td></tr></table><br>
<a name="335189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> hmm... I hope by destroy you mean recycle(Store for later use in a sorted list), and use at a later time.  Actually destroying much of anything is a big waste.  When it will undoubtedly be used again in most situations. <br><br></td></tr></table><br>
<a name="335196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ShatteredReality,<br><br>I mean destroy as in remove it from update.<br><br>If your using different kinds of enemies but they use a common set of properties then you can add a property like<pre class=code>enemy\kind% or enemy\typeid%</pre> to differentiate between them. I would keep the <pre class=code>enemy\id%</pre> independent as you may need to track a certain number of a specific kind enemy.<br><br><pre class=code>
Function enemyUpdate()
	For this.enemy=Each enemy
		Select this\typeid%
			Case 1 ;enemyBoss
				;do stuff
			Case 2 ;enemyMidBoss
				;do stuff
			Case 3 ;enemyHinchman
				;do stuff
		End Select
	Next
End Function</pre> <br><br></td></tr></table><br>
<a name="335205"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> he I was just going to come and ask if I could use<br>'For this.enemy=Each enemy' type of thing, then you all answered for me<br>hmm select case confuses me a little . i get the principle , but then it confuses me whe applying it to my code.<br><br>I just have one attack right now which is a punch and one enemy grunt type, all grunts will have all the same properties( for now)<br><br>is it best to make a one generic type for enemy or if you have say a buttefly/badger/human etc would I make a seperate type for each one or just lump them all as 'enemy'<br>but have lots of properties/fields in that one type<br><br>I will go and try and make it work now.<br>thanks for the help so far guys<br>the id stuff seems very helpful. <br><br></td></tr></table><br>
<a name="335234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> well i ended up doing it this way. i didn't really see the need to do it more complex way here. i realised that i want to have access to each new enemy so i can adjust properties like health/damage etc<br>I just got confused on how to turn this in  to select case <br>or one the other methods mentioned.<br><br>For e.enemy=Each enemy<br>UpdateEnemy(e)<br>and <br>For p.Player=Each Player<br>UpdateEnemy(p)<br><br>are called in the main loop BTW<br><br>This is the attack from the update player function<br>BTW I used animtime to make the player punch at the correct time, ie after he has swung his fist, not before<br><br>;player attack #####################################################################<br><br><br>If KeyDown(157) <br>If AnimSeq(p\model)&lt;&gt;1<br><br>If AnimSeq(p\model)&lt;&gt;8<br><br>Animate p\model,3,.24,8,3;bigslap<br><br>EndIf<br>idleflag=0<br><br>;enemy 1************************************<br>If EntityDistance(enemy1\model,p\model)&lt;6 <br><br>If  AnimTime (p\model)&gt;=4<br>If  AnimTime (p\model)&lt;=4.2<br><br>MoveEntity enemy1\model,0,.3,-3;punch knocks enemy back<br><br>PlaySound(hit)<br><br>enemy1\health =+enemy1\health-10<br><br>EndIf<br>EndIf<br>EndIf<br>EndIf<br><br>;enemy2**********************************<br><br>If EntityDistance(enemy2\model,p\model)&lt;5<br><br>If  AnimTime (p\model)&gt;=4<br>If  AnimTime (p\model)&lt;=4.2<br><br>MoveEntity enemy2\model,0,.3,-2<br><br>PlaySound(ouch)<br><br>enemy2\health =+enemy2\health-10<br><br>EndIf<br>EndIf<br>EndIf<br>EndIf<br><br>If I have 30 enemies though, thats a lot of tying/ repeating the same stuff <br><br></td></tr></table><br>
<a name="335296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm with Frank and ChrML on this one. Use a type field of "enemy_type" - much cleaner and easier to understand in the long run if you have loads of enemies.  <br><br><br>Function update_player(p.player)<br><br>for c.enemy = each enemy<br><br> select c\enemy_type<br><br>  case 1 ;enemy 1<br><br>   If EntityDistance(c\model,p\model)&lt;6 and AnimTime (p\model)&gt;=4 and AnimTime (p\model)&lt;=4.2 <br>    MoveEntity c\model,0,.3,-3;punch knocks enemy back <br>    PlaySound(hit) <br>    c\health = c\health-10 <br>   EndIf <br><br> case 2 ; enemy 2<br><br>  If EntityDistance(c\model,p\model)&lt;5 and AnimTime (p\model)&gt;=4 and AnimTime (p\model)&lt;=4.2 <br>   MoveEntity c\model,0,.3,-2 <br>   PlaySound(ouch) <br>   c\health = c\health-10 <br>  endif<br><br> case 3 ; enemy 3 etc....<br><br> end select<br><br>next<br><br>end function <br><br></td></tr></table><br>
<a name="335355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ruz</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks stevieG and everyone . i agree that using stuff like frank and ChrML were using is better/more organised, its just I confused myself with the syntax and stuff when applying it to my code. never used case select before, dohh <br><br>But it works great now, I have three enemies in the level which is  so much more fun than one. <br>I am going do some health packs now <br>woot !! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
