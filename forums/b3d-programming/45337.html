<!DOCTYPE html><html lang="en" ><head ><title >What Should i Clean?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >What Should i Clean?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >What Should i Clean?</a><br><br>
<a name="504131"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello. i am running into a big problem with my game. It is almost finished, but at random times it gives me a memory access violation in random points of the code.<br><br>I think the problem is that i use ode, blitzplay, single surface libs, and of course my own entities, brushes, textures, etc...<br><br>The problem comes when i clean all and i want to start the game again.<br><br>I close ODE world, i call BP_ENdSession, i call ClearWorld, i delete all the types, i change the Resolution of the screen to force the clean of video memory...<br><br>What more should i free, clean, destroy? <br><br></td></tr></table><br>
<a name="504179"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LAB[au]</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try putting some delay in between the different calls for closing dll's. Also try to use Freeentity, Freetexture that would be in types before deleting the type instance and before clearworld. <br><br></td></tr></table><br>
<a name="504180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nothing you're doing is freeing sounds.  Probably not the problem, but still something you need to address.<br><br>I'd drop the resolution change.  It looks untidy. <br><br></td></tr></table><br>
<a name="504192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oooooooooooh, i was freeing all perfectly. The Problem? THE FAMOUS FMOD Problem, haha.<br><br>Once the music looped one time, if freeing the music, the reloading causes a random crash some time after.<br><br>Anyway thanks all.<br><br>P.D: Just after making the topic, the first thing i tried was freeing the sounds too.<br><br>Anyway, does i need to free the sounds?<br><br>Thanks all again. <br><br></td></tr></table><br>
<a name="504257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you get desparate you could always start a new copy Execfile('myprog.exe'), then End the first? <br><br></td></tr></table><br>
<a name="504459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey John, that sounds interesting... Keeping a configuration data file perhaps...<br><br>Anyway, as said before, the problem was playing a .xm file.<br><br>Thanks! <br><br></td></tr></table><br>
<a name="504927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Viperfish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had major problems with .xm and .it files crashing my game. Converted them all to .ogg and haven't had a single glitch. <br><br></td></tr></table><br>
<a name="504983"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "Hey John, that sounds interesting... Keeping a configuration data file perhaps..."<br><br>- No, you don't even have to do that.<br>Just know the name of your own exe (say-'myprog.exe'), make sure the current dir is your exe folder, then:<br>Execfile("myprog.exe") : End<br><br>Blitz will pass the Execfile command to Windows, and shut down your currently running program. <br><br>I actually need to do this when I offer users the chance to change resolutions (of course I warn them that they are about to completely restart the program; nothing so clever as Wolfenstein which does that but comes back to the original screen/position, though I guess that could be done with a little planning). <br><br></td></tr></table><br>
<a name="505291"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, but i mean that i have stored in memory some user data, like stats... so i would need i configuration file... <br><br></td></tr></table><br>
<a name="505294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Problem with ExecFile myapp.exe is (bysides it needs to be windowed): The app will flash out and in again, you'l see the desktop for a second, and this looks pretty unpro.<br><br>I am real happy that I managed my game engine to unload everything and then restart the game. well, I don't know about some unsignificant segmentation of resources - maybe when you play a level 200 times there may be some problems, but basicly it works. <br><br></td></tr></table><br>
<a name="505337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeaj jfk, you're right of course. That is the more professional way.<br>But I was just trying to give him a simple solution if he doesn't want to get into a hole raft of rewriting. <br><br></td></tr></table><br>
<a name="506141"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KuRiX</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, i have managed to load and unload all with two simple functions, so i can restart the game hundred of times if needed.<br><br>As jfk said, it is possible to forget something, like some small type delete, or sound unloaded, but the best idea is to have a function to load everything, then make a function that takes everything loaded unloaded. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
