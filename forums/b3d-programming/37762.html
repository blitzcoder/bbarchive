<!DOCTYPE html><html lang="en" ><head ><title >More rendering info</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >More rendering info</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >More rendering info</a><br><br>
<a name="416309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is getting interesting.<br><br>If you render things in multiple passes, it is crucial that you keep the fewest number of top-level entities possible.  Each time you render, Blitz goes through and performs DX transformation operations until a hidden entity in the hierarchy is found.  If you have just a few top-level entities, you can hide them and cruise through with no problem.  If all your entities are top-level, you will have severe additive slowdown with each rendering pass.<br><br>Merging all meshes into one is faster than even instanced meshes.  However, the fastest of all methods if to divide your map up into a grid of about 16 meshes, and merge meshes according to their position in this grid.  You can also do a render box test to check visibility of each if these portal zones.  When doing box tests, it is important to keep the rules from the prior paragraph in mind, since this can involve up to 16 extra renders.  You can use the visibility info to cull offscreen or out-of-range terrain pieces and static meshes.<br><br><img src="http://www.leadwerks.com/post/screenshot0037.png"> <br><br></td></tr></table><br>
<a name="416322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've been thinking about some ideas with mutipass rendering as well.  One thing I'd like to do is break up my renders into close, medium, and far renders and copy these renders to textures.  Then check for camera movement, if it moved then render the scene normal.  <br><br>If the camera has not moved then check each of my render layers for movement.  If nothing has moved then of course you can just render a sprite attached with the textures (which don't change until somethings been updated) on it like another buffer.  The cool thing is that you could then just render each range only if something in that range has moved.  This way much of the time you'd only be rendering short distances etc or a sprite...  Well maybe.  It's just an idea I had. <br><br></td></tr></table><br>
<a name="416341"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think you should assume the camera will move every frame.  Otherwise, you will just get jerky movement when camera moves, with smooth movement when it stops.<br><br>Polygon count for staticmeshes doesn't really matter.  You could do low-poly LOD versions, but in the shot above, it takes less than 1 msec to render a forest.<br><br>Then I add 20 bots in, at 600 polys each, and my framerate drops to 18.  I've got to find a way to render actors more efficiently. <br><br></td></tr></table><br>
<a name="416347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Have you tried converting your actors to MD2 format so they do not have any bones in them? <br><br></td></tr></table><br>
<a name="416348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> For extreme speed you could sample all your animation cycles to independent (static) meshes and parent them all to a pivot which hides / shows the current frame. Pretty expensive on vertex memory with 250 keyframes of a 500 vert model taking I would guess something like 4 megabytes per model but would be very fast if you are prepared to drop tweening.<br><br>Also, the idea of timing rendering is possibly not as simplistic as you assume. Unless you are locking the back buffer in some way before sampling the time, the time after a call to RenderWorld is meaningless in relation to how far the GPU is along it's buffered draw list. <br><br></td></tr></table><br>
<a name="416350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> skidracer, wouldn't that kill the surface count? <br><br></td></tr></table><br>
<a name="416351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would imagine a LoadKeyFramedMesh system would have a comparable rendering speed to that you get if you load your models with LoadMesh instead of LoadAnimMesh. Surface count is up to the artist.<br><br>MD2 is more versatile and I would assume as fast as you can get for runtime vertex manipulation in Blitz3D especially the normal calculations.<br><br>A utility that created normal mapped skins for MD2 models would be kindof cool. <br><br></td></tr></table><br>
<a name="416356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Skidracer, that's probably the most efficient method.  It's funny how the tools have all these high-level concepts like bones and staticmeshes, but in the end, you collapse them into  simple vertex arrays.  Here are two possible methods I am considering:<br><br>Bones<br>Using a custom animation system that is only updated before the scene is rendered, I animate the skeletons.  Each vertex in the mesh has to be transformed from bone space to world space and updated.<br><br>Advantages:<br>-Dynamic<br>-Easy to add hit boxes<br><br>Disadvantages:<br>-Potentially thousands of TFormPoint() operations per frame<br>-Animation hierarchy overhead<br><br><br>Vertex animation<br>Like Skidracer said, pre-compile a set of frames.  Interpolation between two points ((Ax#+Bx#)/2.0) would be much faster than a transformation operation.  Interpolation could be disabled fo faraway entities.<br><br>Advantages<br>-Fast<br><br>Disadvantages<br>-Hard to use with dynamic animations, like ragdoll physics or combination animations<br>-Lots of memory usage <br><br></td></tr></table><br>
<a name="416375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want vertex animation interpolation you are talking medium speed (medium bus usage) but very low memory usage be it MD2 or your own routines. <br><br>Static Mesh Animation <br>- large video memory usage<br>- no interpolation<br>- no agp bus usage (high speed) <br><br></td></tr></table><br>
<a name="416380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would you care to comment on how serious sam manages 100 deforming meshes rushing at you at once with seriously high framerates?<br><br>They obviously solved the surface issue. But in terms of bones, I believe they use bone lod as well. Small bones are lodded out with the triangles. Very efficient stuff... <br><br></td></tr></table><br>
<a name="416385"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> They probably perform one bone update for the animation and apply it to all enemies that are running, etc.  My guess is all the "running" enemies are playing on the same frame, etc. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
