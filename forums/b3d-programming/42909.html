<!DOCTYPE html><html lang="en" ><head ><title >Problems with ParticleCandy 1.5.2</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problems with ParticleCandy 1.5.2</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Problems with ParticleCandy 1.5.2</a><br><br>
<a name="480085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone else use this?  I'm getting occasional "entity does not exist" errors in the FreeParticleSystem() function - seems to be on the line 'FreeEntity PTDummy'.<br><br>The readme for this version says this problem is fixed so presumably it existed in a previous version as well.<br><br>Anybody else?<br><br>Do x-pressive have a forum somewhere I can go to?  All I found on their site was 4 german chatrooms, all empty.<br><br>My game is due to be finished in 11 days time.  Bloody middleware.  I'm well chuffed. :/ <br><br></td></tr></table><br>
<a name="480094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found another bug a while back - if you free an emitter that still has some particles flying around (even if you stop it, it can have left-over particles), it crashes.<br>I tried solvig that myself by first deleting the particles in the function that frees the emitter, but occasionally I got an error, also with PTDummy I believe.<br>I mailed the author, and he said he would look into it. Maybe you should mail him about this too. <br><br></td></tr></table><br>
<a name="480104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Maybe you should mail him about this too. <br></div>Already did, but like I said.... 11 days to go... :/ <br><br></td></tr></table><br>
<a name="480107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Do you need to use freeparticlesystem? maybe you should try stopping all emitters, then use clearparticles(), and then free all emitters? <br><br></td></tr></table><br>
<a name="480110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >danjo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i use it, and havent struck those problems.  at the moment im working on modelling, but when i get back to the engine code, im hoping all goes smoothly. <br><br></td></tr></table><br>
<a name="480115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> GFK<br><br>I had the same prob (free_emitter crashing if the emitter still had active particles).<br><br>However, I tracked it down to only those emitters that had a circular rotation parameter. <br><br>I did email Ben with some sample code demonstrating this, but he couldn't get the same error to occur on his system. <br><br></td></tr></table><br>
<a name="480122"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're right, I modified the fountain demo with this in the main loop :<br><br><pre class=code>
if keyhit(14) then
	freeemitter(em)
	flushkeys()
end if
</pre>but it didn't crash when I pressed backspace, then I modified all particle types to have circular motion, and it did crash. I sent this file to the author, hopefully he'll be able to trace the problem now. <br><br></td></tr></table><br>
<a name="480124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> [edit] see below. <br><br></td></tr></table><br>
<a name="480127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> GFK/fall_x<br><br>What OS are you running?<br><br>I'm on W2000. <br><br></td></tr></table><br>
<a name="480128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> XP here.<br><br>GFK : did you try my suggestion above, or is it not an option? (clearing all particles and then deleting the emitters manually). <br><br></td></tr></table><br>
<a name="480133"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MadJack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> fall_x<br><br>But you may not want to clear all emitters.<br><br>An explosion for example - expanding sphere to give the impression of a shockwave + PCandy emitter. When the sphere is a certain size, the attached emitter is deleted, and then the sphere entity is freed - explosion over. <br><br></td></tr></table><br>
<a name="480134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes, but in his case, he has the error when doing FreeParticleSystem(), so I assume he does want to clear all emiters. <br><br></td></tr></table><br>
<a name="480136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Rolling back your version seems to work... to 1.4.x <br><br></td></tr></table><br>
<a name="480137"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm... seems you were right after all about the circular motion thing.<br><br>I used CandyFactory to import emitter/particle date from an Include.  It seems that I *was* using a circularmotion setting of "1" after all.  Changed that to 0, problem solved.<br><br>This still needs fixing though.  Thx for the help. <br><br></td></tr></table><br>
<a name="480275"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the fix I made for it :<br><br><pre class=code>
; replace freeemitter by this :
Function FreeEmitter (Piv%)
    Emitter_Stop Piv
 
    For Particle.TParticle = Each TParticle
        If Particle\Piv = Piv Then
            If GetParent(PTDummyPiv) = Particle\Piv Then
                EntityParent PTDummyPiv,0,0
            End If
            Delete Particle
        End If
    Next
 
    Emitter.TEmitter = Object.TEmitter(EntityName(Piv))
    FreeEntity Emitter\Piv
    If Emitter\Snd &gt; 0 FreeSound Emitter\Snd
    Delete Emitter
End Function
</pre><br><br><br>I'm not sure it works 100% though, but according to the author, it should. It fixes stopping emitters with circular motion - which is also called by freeparticlesystem, so it might solve the problem there as well. <br><br></td></tr></table><br>
<a name="480310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The code I posted above only fixed problems with FreeEmitter, but it didn't solve the FreeParticleSystem problems (I just implemented switching levels in my game today, and it crashed sometimes even with that code).<br>The good news is, I just received a private update from Mike for testing, and it seems to be fixed in this. So an update will probably be coming very soon! <br><br></td></tr></table><br>
<a name="480315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The good news is, I just received a private update from Mike for testing, and it seems to be fixed in this. So an update will probably be coming very soon! <br></div>Yup, I got that too.  Seems fine now. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
