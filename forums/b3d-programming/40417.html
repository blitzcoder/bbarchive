<!DOCTYPE html><html lang="en" ><head ><title >putting a 2D box around an object?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >putting a 2D box around an object?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >putting a 2D box around an object?</a><br><br>
<a name="453604"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm making a flight-sim-esque game, and i'd like to be able to draw a 2D box around an enemy when it crosses near the aiming reticle, as part of the HUD.  i've seen this done in first-person-perspective games, and it does a lot to help with visibility, especially aginst busy backgrounds.<br><br>problem is, i've no idea how i'd go about this.  i was thinking maybe it would be possible to use the (extended command) EntityRadius() to approximate how big the object is, then factor in the object's distance from the camera, and draw a box that way.  but i'm not real sure how well that'd work.<br><br>has anyone done anything similar who could offer some advice? <br><br></td></tr></table><br>
<a name="453607"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> I used this feature in a space game.<br><br>I made sprites that were simply scaled according the distance from the camera.<br><br>Worked a charm. If you like I can dig up the code and give you a demo. <br><br></td></tr></table><br>
<a name="453609"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> would be nice :) <br><br></td></tr></table><br>
<a name="453611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Perturbatio</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> or you can get this code here: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=712" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=712</a> <br><br></td></tr></table><br>
<a name="453613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> EntityRadius does not return a radius, it's used to set the Collision Radius if spherical Collision is used.<br><br>This is really not so easy since ProjectCamera will return the Meshes center onscreen, but a the mesh usually don't knows how big it is since ScaleEntity and ScaleMEsh is involved, and EntityWidht / Height / Depth depends on the View Angle<br><br>What I would do is: After loading the mesh I would parse all Vertices of the mesh and store Min xyz and max xyz, These can be used to create 8 Pivots that are representing a Box that completely and exactly covers the mesh. Then I'd parent the pivots to the mesh, so any further scaling will affect the pivot loactions too.<br><br>Now to draw the rectangle simply use ProjectCamera with all 8 Pivots and find the onscreen Min xy and max xy pivots. Now you've got the 4 2D Points to draw the rectangle.<br><br>Probably there is an easier solution, I don't know right now.<br>EDIT - I must agree, the sprite solution is clever, although the angle of view may produce inaccuracies. <br><br></td></tr></table><br>
<a name="453617"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://blitzbasic.com/codearcs/codearcs.php?code=1089" target="_blank">http://blitzbasic.com/codearcs/codearcs.php?code=1089</a> <br><br></td></tr></table><br>
<a name="453618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> perturbatio: oh, how cool :D  and it's decently fast, too.  works fine even with a 32-segment sphere, which is something like 4000 polys.<br><br>jfk: that's a very slick idea.  calculating from 8 points rather than all vertices in the mesh.. that sounds like the winner.<br><br>noel: cool as well, pretty similar to the code perturbatio posted.  :D <br><br></td></tr></table><br>
<a name="453626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BODYPRINT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, here is my game.<br>If you have trouble finding the appropriate code let me know and I will try decipher my own program :-)<br><br>a=accelerate<br>z=decelerate<br>h=hyperspace<br>left mouse to fire.<br><br>c to send chat messages.<br><br>Net code is all working I think. It uses my own GNET server with 4 hour refresh.<br><br><a href="http://members.iinet.net.au/~pmerwarth/SOS.zip" target="_blank">http://members.iinet.net.au/~pmerwarth/SOS.zip</a><br><br>[edit]<br>OK here is the section that updates the sprite size.<br><br>	For galax.planet=Each planet<br>			distance#=EntityDistance (galax\marker,this)<br>			crosssize#=distance/20<br>			ScaleSprite galax\marker,crosssize,crosssize<br>			If crosssize&lt;galax\scale-1 Then crosssize=galax\scale-1<br>			EntityRadius galax\marker,crosssize<br>	Next<br><br>[/edit] <br><br></td></tr></table><br>
<a name="453635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for that phil :)  though i think i'll be using jfk's method, as my objects are of funny size.<br><br>your net code might come in handy eventually, however ;) <br><br></td></tr></table><br>
<a name="453644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DrakeX</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> i got jfk's code working beautifully :)  thanks all! <br><br></td></tr></table><br>
<a name="453688"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Difference</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> What I would do is: After loading the mesh I would parse all Vertices of the mesh and store Min xyz and max xyz, These can be used to create 8 Pivots that are representing a Box that completely and exactly covers the mesh. Then I'd parent the pivots to the mesh, so any further scaling will affect the pivot loactions too.<br> <br></div>That's what I do too, or rather I make a transparent cube parented to the entity, and make only the cube pickable. That way I control exactly how the entitybox looks. I also make the cubes slightly larger than the objects, but that's another story. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
