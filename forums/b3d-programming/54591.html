<!DOCTYPE html><html lang="en" ><head ><title >3d math question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >3d math question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >3d math question</a><br><br>
<a name="608894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig H. Nisbet</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I need to make a single surface partical system.  How do I costruct the points into quads and force them to face the camera?   I'm going to check the archives now.  Anyone have some code for this? <br><br></td></tr></table><br>
<a name="608925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Craig, I've written my own code for handling quads, based on an idea that Dark Half had a while ago.  I use it in my gauntlet remake and is in the file QuadFunctions.bb which is included in the small zip below:<br><br><a href="http://home.swiftdsl.com.au/~gezeder/lloyd/Code.zip" target="_blank">http://home.swiftdsl.com.au/~gezeder/lloyd/Code.zip</a><br><br>Basically when you create your quads, parent the mesh they are a part of to the camera.  You will also need to use the tform commands to assign the position of each vertex in your quad such that they are aligned 'facing' relative to the camera.  <br><br>Anyway have a look in the quadfunctions.bb file, it should not be too hard to follow. <br><br></td></tr></table><br>
<a name="608928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice to see I made a contribution in some respects.<br><br>Let me guess though:<br><br>Create a camera,<br>Create a mesh, parent it to the camera,<br><br>For each quad, you create a pivot in global space and refference them to each other in some fashion.<br><br>In each update, you check the global position of the pivot, then tform that point to the camera mesh, and move the quad (translate) to that location (locally)?<br><br>Sound about right?<br><br>Super fast with no need for any messy rotation code! <br><br></td></tr></table><br>
<a name="608944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dark Half - pretty similar, except I don't use a pivot I simply use the tformpoint commands to convert the particle/quad's x,y,z location (stored in a type) to the location in the camera's space.  I actually use those functions, quadfunctions.bb, in pretty much every project I do now in which I need to use quads/billboards or sprites.  It's only when I get really lazy that I revert to sprites, or when the performance hit is not going to be noticeable. <br><br></td></tr></table><br>
<a name="608948"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the only reason I used pivots, is so that the end user could reposition something as a normal blitz entity and have that single command affect the particle/billboard/tree branch/etc in real time.  Rather than making a function call to my lib that gives the new position.  Any entity-to-entity functions would work with blitz nativly (one could assign a collision radius to the pivot and do collisions with a folliage system, thus when the player walks past a tree, or grass, the collision system would move the branch or grass, and the particle/foliage would merely pick up from the pivots).<br><br>Granted though, your solution is by far better performance-wise.  Simplicity is always a plus! <br><br></td></tr></table><br>
<a name="609024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >(tu) sinu</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Both ways are good depending on what you need them for.<br>Having pivots does hit performance but gives more power, i can get about 3000 snow particles in a 3d world running at over 300fps without pivots but get about 60fps with pivots. The upside is the pivots can collide with stuff and react. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
