<!DOCTYPE html><html lang="en" ><head ><title >Direct Client2Client behind NAT w/o router config!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Direct Client2Client behind NAT w/o router config!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Direct Client2Client behind NAT w/o router config!</a><br><br>
<a name="553511"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy UK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone is interested in UDP blitz networking client to client with NAT autodetect and 99% NAT traversal without any configuration of the NAT/Router or client, i can list a full description of whats involved, but only if people want it as its alot to type and i hate typing! <br><br></td></tr></table><br>
<a name="553517"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..type it..I'm interested.. <br><br></td></tr></table><br>
<a name="553542"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, this would be handy to know as it seems to be quite an obstacle otherwise... <br><br></td></tr></table><br>
<a name="553550"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy UK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> i actually discovered this by accident while programing my live audio network. picture the scinario where 2 clients, each behind it's own NAT/Router want to send/recieve data between eachother. imagine both clients are listening for data on udp port 8000. assuming both clients know eachothers ip addresses and the ports they are listening on, simply opening port 8000 on each router is enough to let them both communicate. supprisingly enough most people dont know how to open ports on routers and this will almost deffinatly limmit the prospective user audience, not good if your hoping to make money from your new network application. when a client behind a nat sends data outside of its local network, the port number its sent on is decided by the nat and not the application that is sending for example, client 1 sends data to client 2 on port 8000, if client 2 is not behind a nat it should get the data no problem. now heres the interesting bit, client 2 recieves the data but for some reason it recieved the data from client 1's internet ip on port 62000. why? here's why <a href="http://www.brynosaurus.com/pub/net/p2pnat/" target="_blank">http://www.brynosaurus.com/pub/net/p2pnat/</a> as long as client 2 knows what ip and port client 1 sent from, replying to this ip/port will work because thats what NAT's are supposed to do. If the nat on client 1's network recieves a message from the ip it sent to on port 62000, it accepts the packet. the next important bit is to make sure all the clients who want to communicat directly with eachother know eachothers external ip/NAT port. this is as simple as hosting a server that records clients ip/ports and passes them on to other clients on the network. obviously the server must not be behind a nat, but if it is, you can open the port its listening on, on the router. sorry im at work and trying to dodge the boss while i type this, the link will actually make sense as just reading this back to myself, im baffled. so to recap, if u send a packet to a client on port 8000, the recieving client cannot send back to your ip on the same port because your nat sent the message from a different port, as long as u know this port u can reply. <br><br></td></tr></table><br>
<a name="553556"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy UK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i think i might make an interactive demo/tutorial for my first code archive entry :) <br><br></td></tr></table><br>
<a name="724602"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Carolinaaa</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello Andy, i'm very interested to know how to traverse nat routers without needing to configure them; could you post a pice of code of how to do it? thank you. <br><br></td></tr></table><br>
<a name="736302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Wings</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting indeed. But How dose client 1 know to check port 62000 cause client 1 is listening on port 8000 ?<br><br>this i must test out indeed tonoght.. <br><br></td></tr></table><br>
<a name="736305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >t3K|Mac</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is a german text (for those germans here, like me) about the same thing: <a href="http://www.heise.de/security/artikel/82054" target="_blank">http://www.heise.de/security/artikel/82054</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
