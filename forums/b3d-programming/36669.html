<!DOCTYPE html><html lang="en" ><head ><title >Timing Animated Models</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Timing Animated Models</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Timing Animated Models</a><br><br>
<a name="401613"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I’m trying to figure out a method of keeping a model animated at a constant speed despite varying frame rates. The ‘Animate’ command seems to move the animation onto the very next frame regardless of the time since the last frame. This means that the animation will play through slower if the frame rate drops.<br><br>What I really want to be able to do is have the model animate according to delta time and I’ve come up with the idea of using ‘SetAnimTime’ to do this, however this has a huge drawback. I also need to be able to smoothly transition between two animations as is possible with the ‘Animate’ command but know no other way of achieving this without using ‘Animate’<br><br>Has anybody else encountered this and come up with a solution? <br><br></td></tr></table><br>
<a name="401734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TomToad</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> i haven't dealt with animations in 3D yet, but I've done it with 2D.  Basically, I decide how many milliseconds per frame there are in the animation.  So 30 frames/sec would equal 33.3333 millisec/frame, round off to 33.  Then I set a time for animation start before the main loop.<br><br><pre class=code>anim_start_time = millisecs()</pre><br>Then in the main loop I can calculate which frame the animation should be on.<br><br><pre class=code>anim_time = millisecs() - anim_start_time
frame = (anim_time/33) mod num_frames
</pre><br><br>You could use the same method for 3D, but looking through the Blitz3D help, I can't find any reference on how to have Blitz display a particular frame of an animation.  Only for stopping and starting automatic animation. <br><br></td></tr></table><br>
<a name="401813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use the optional anim_speed parameter of UpdateWorld.  This parameter controls how much to change the animation since the last time UpdateWorld was called. <br><br></td></tr></table><br>
<a name="402022"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Like jhocking said, use UpdateWorld(t#)<br><br>t# is a value that is calculated from the current framerate:<br><br>ms#=millisecs()<br>fps#=1000.0/(ms-ms2)<br>ms2=ms<br>t#=60.0/fps<br>updateworld(t#)<br><br>now you can set the speed with the animate command, and it will be adjusted for any framerate. <br><br></td></tr></table><br>
<a name="402268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Makepool</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks people, I was completely unaware that you could pass a parameter into UpdateWorld to affect model's framerate. Now that I know that I should be able to do something with it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
