<!DOCTYPE html><html lang="en" ><head ><title >Collision Detection</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Collision Detection</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Collision Detection</a><br><br>
<a name="219288"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a way to detect the angle of a collision? Eg: Is it a vertical or horizontal collision.<br><br>Thanks <br><br></td></tr></table><br>
<a name="219301"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Odds On</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use CollisionNX() etc to work out the collision normal, and if CollisionNY() is bigger than the other two it's vertical otherwise its horizontal. <br><br></td></tr></table><br>
<a name="219304"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm having a problem in that even when two object pass next to each other they are having a collision effect.  I want them to be able to pass side by side without causing them to "collide".<br><br>Any way to do this? <br><br></td></tr></table><br>
<a name="219553"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay I am getting somewhere with this, however there are a few nuances.  This is my first experiment with Blitz in quite a long time so excuse the basic nature of it.<br><br>Here's my code:<br><br>[CODE]<br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>; Main starts here ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br>Graphics3D 800,600<br><br>SetBuffer BackBuffer()<br><br>Camera = CreateCamera()<br><br>CameraViewport Camera,0,0,GraphicsWidth(),GraphicsHeight()<br><br>Block = InitGame()<br><br>Timer = CreateTimer(10)<br><br>While Not KeyHit(1)<br><br>	x = 0<br>	y = -2<br>	<br>	If KeyHit(203)<br>	<br>		If Not EntityCollided(Block,1)<br>	<br>			x = - 2<br>		<br>		End If<br>	<br>	End If<br>	<br>	If KeyHit(205)<br>	<br>		If Not EntityCollided(Block,1)<br>		<br>			x = 2<br>		<br>		End If<br>	<br>	End If<br><br>	If EntityCollided(Block,1)<br>	<br>		If CollisionNY(Block,1) =&gt; CollisionNX(Block,1)<br>		<br>			Block = NewBlock()<br>			<br>		Else<br>		<br>			EntityType Block,3<br>		<br>			TranslateEntity Block,x,y,0<br>			<br>			EntityType Block,1<br>		<br>		End If<br>		<br>			<br>	Else<br>	<br>		TranslateEntity Block,x,y,0<br>	<br>	End If<br><br>	UpdateWorld<br>	<br>	RenderWorld<br>	<br>	Flip<br>	<br>	WaitTimer(Timer)<br><br>Wend<br><br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>;  Main ends here  ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br><br>Function InitGame()<br><br>	For a = 0 To 20 Step 2<br>	<br>		x = -10 + a<br>	<br>		BottomWall = CreateSprite()<br>		PositionEntity BottomWall,x,-20,30<br>		EntityType BottomWall,1<br>	<br>	Next<br>	<br>	For a = 0 To 40 Step 2<br>	<br>		y = 20 - a<br>	<br>		LeftWall = CreateSprite()<br>		PositionEntity LeftWall,-12,y,30<br>		EntityType LeftWall,1<br>		<br>		RightWall = CreateSprite()<br>		PositionEntity RightWall,12,y,30<br>		EntityType RightWall,1<br>	<br>	Next<br>	<br>	<br>	Block = NewBlock()<br>	<br>	Collisions 1,1,1,1<br>	<br>	Return Block<br>	<br>End Function<br><br>Function NewBlock()<br><br>	Block = CreateSprite()<br>	PositionEntity Block,0,22,30<br>	EntityType Block,1<br>	EntityColor Block,Rand(255),Rand(255),Rand(255)<br>	<br>	Return Block<br><br>End Function<br>[/CODE]<br><br>Cursors move the blocks left and right.  <br><br>The problems are that if you go against the right wall the block stops, but against the left wall it keeps going (I over-ride the collision if it isn't a top-bottom collision, or at least that's the intention).  <br><br>Also if you put the blocks in a certain way one on top of the other, and then one to the right, dropping another block on the right bottom one will cause the new block to go over it rather than on top.<br><br>If you could shed any light on this, and also perhaps suggest better ways to do what I am doing I would appreciate that.<br><br>Thanks <br><br></td></tr></table><br>
<a name="219571"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay new code - solved alot of the problems by using cubes and setting the collision radius.<br><br>However still having problems with it hitting the right wall and stopping, and also if you keep moving it into lines of blocks on the left or right it will stop too.<br><br>[CODE]<br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>; Main starts here ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br>Graphics3D 800,600<br><br>SetBuffer BackBuffer()<br><br>Camera = CreateCamera()<br><br>CameraViewport Camera,0,0,GraphicsWidth(),GraphicsHeight()<br><br>Block = InitGame()<br><br>Timer = CreateTimer(10)<br><br>While Not KeyHit(1)<br><br>	x = 0<br>	y = -2<br>	<br>	If KeyHit(203)<br>	<br>		If Not EntityCollided(Block,1)<br>	<br>			x = - 2<br>		<br>		End If<br>	<br>	End If<br>	<br>	If KeyHit(205)<br>	<br>		If Not EntityCollided(Block,1)<br>		<br>			x = 2<br>		<br>		End If<br>	<br>	End If<br><br>	If EntityCollided(Block,1)<br>	<br>		If CollisionNY(Block,1) &gt;= CollisionNX(Block,1)<br>		<br>			Block = NewBlock()<br>			<br>		Else<br>		<br>			EntityType Block,3<br>		<br>			TranslateEntity Block,x,y,0<br>			<br>			EntityType Block,1<br>		<br>		End If<br>		<br>			<br>	Else<br>	<br>		TranslateEntity Block,x,y,0<br>	<br>	End If<br><br>	UpdateWorld<br>	<br>	RenderWorld<br>	<br>	Flip<br>	<br>	WaitTimer(Timer)<br><br>Wend<br><br>;;;;;;;;;;;;;;;;;;;;<br>;                  ;<br>;  Main ends here  ;<br>;                  ;<br>;;;;;;;;;;;;;;;;;;;;<br><br><br>Function InitGame()<br><br>	For a = 0 To 20 Step 2<br>	<br>		x = -10 + a<br>	<br>		BottomWall = CreateCube()<br>		PositionEntity BottomWall,x,-20,30<br>		EntityType BottomWall,1<br>	<br>	Next<br>	<br>	For a = 0 To 40 Step 2<br>	<br>		y = 20 - a<br>	<br>		LeftWall = CreateCube()<br>		PositionEntity LeftWall,-12,y,30<br>		EntityType LeftWall,1<br>		<br>		RightWall = CreateCube()<br>		PositionEntity RightWall,12,y,30<br>		EntityType RightWall,1<br>	<br>	Next<br>	<br>	<br>	Block = NewBlock()<br>	<br>	Collisions 1,1,1,1<br>	<br>	Return Block<br>	<br>End Function<br><br>Function NewBlock()<br><br>	Block = CreateCube()<br>	EntityRadius Block,0.5<br>	PositionEntity Block,0,22,30<br>	EntityType Block,1<br>	EntityColor Block,Rand(255),Rand(255),Rand(255)<br>	<br>	Return Block<br><br>End Function<br>[/CODE] <br><br></td></tr></table><br>
<a name="219587"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rainking</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Worked it out - I just needed to detect whether the Y collision was 1. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
