<!DOCTYPE html><html lang="en" ><head ><title >Graphics 2D and Flip</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Graphics 2D and Flip</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Graphics 2D and Flip</a><br><br>
<a name="657881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> In creating a windowed settings program with graphics 2D, I found using Flip every update muddled up my drawing and didn't work as I thought it would , like 3D. Loading the program I text "Loading" and then when that's finished I draw (DrawImage) the interface as a bitmap. If I have a Flip, sometimes the backdrop appears, sometimes it stays on the "Loading" text, sometimes it's just black. If I don't have a Flip and just draw to the screen, it updates okay.<br><br>Can someone explain a bit more about windowed 2D drawing? Does it not have doublebuffering? Should I add some delay into the main loop to free up resources for OS? Anything else I need to know? <br><br></td></tr></table><br>
<a name="657893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The backbuffer is the current drawing buffer after a Graphics3D call but with Graphics the default buffer is set to the front buffer and if you are going to use double buffering (flip) then you need to SetBuffer BackBuffer() before you start drawing. <br><br></td></tr></table><br>
<a name="657902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay. Cheers <br><br></td></tr></table><br>
<a name="657965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something I don't understand. I use Setbuffer Backbuffer() and draw an image. When I flip each frame, I expect the image to flicker between the drawn image and the black screen if the front buffer, but it doesn't. If I then text to the backbuffer the text still appears when flipped. With only one draw operation to the backbuffer it seems to write to the frontbuffer too ?? <br><br></td></tr></table><br>
<a name="657982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> When you flip, the backbuffer becomes the frontbuffer and vice versa. Or in other words they're switched. <br><br></td></tr></table><br>
<a name="658009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes I appreciate that. But if I have on show a black screen with the text "Loading" in the middle, and draw to the backbuffer a mostly blue image I would expect a Flip to show the blue image and the black screen become backbuffer, and then the next flip to show the black screen and blue screen becomes backbuffer. What I actually have is draw the blue screen on the backbuffer and then every frame I flip, it's still there. I don't draw it again on the new backbuffer after a flip. I thought I would have to, but I don't, which confuses me. <br><br></td></tr></table><br>
<a name="658063"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >VIP3R</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I see what you mean, it looks like the contents of the backbuffer are 'added' to the current contents in the frontbuffer when you flip, as opposed to being replaced by them. <br><br></td></tr></table><br>
<a name="658251"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is up to the driver how it implements the flip and so the state of the backbuffer after a flip is undefined and drawing MUST begin with a Cls (or equivalent outcome from renderworld due to CameraCls). <br><br>Undefined - as in after a Flip the backbuffer may retain same contents as the flip if driver is implemented using a copy semantic, it may have the previous frame as in a double buffered environment or it may be n frames old if the driver is using a triple+ buffering technique. It may even be bright pink... <br><br></td></tr></table><br>
<a name="658347"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, are you using the CLS command to clear the backbuffer before you draw to it again?  Maybe I'm not understanding your problem, but if you don't clear the contents of the backbuffer, it wil still be there when it becomes the frontbuffer with a Flip, and then becomes the backbuffer again on the next Flip. <br><br></td></tr></table><br>
<a name="658500"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> At the moment I don't have a problem as it's working, and as long as other GPUs handle it the same way there's nothing to worry about. But if other GPU's draw how I'd expect, my interface is going to have ghastly flickering! Stupid me thought there'd be standard behaviours so all PCs worked the same way...<br><br>@ Skidracer : You're saying that I need to work with proper Back and Front buffer management else it might do funny things on different PCs? And if I clear the buffer that'll 'initialise' it? I'll give that a whirl. <br><br></td></tr></table><br>
<a name="658752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sir Gak</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Clearing the buffer does "initialize" it, but remember, after your 'clear', you have to redraw everything that's going to appear (after all, it's been cleared off the screen). <br><br></td></tr></table><br>
<a name="658820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, the chap managed my setup program okay without me managing flips, which was a relief. I've changed it to use proper buffer management, drawing the whole UI each frame, just in case. Fingers crossed that's the end of it ;) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
