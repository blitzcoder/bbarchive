<!DOCTYPE html><html lang="en" ><head ><title >another angle quest</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >another angle quest</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >another angle quest</a><br><br>
<a name="558581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> is there a command to return the angle of slope on a triangle? <br><br></td></tr></table><br>
<a name="558601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't that the tan() ?  I never have been sure of a use for/of the tan() function, i'm cos()+sin() slap-happy but tan() always reveals a bikini line... <br><br></td></tr></table><br>
<a name="558605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, im not sure, i think tan(a)=a/o (or something like that)  but in 3d its hard to find the adacent? (if thats the bottom one) i need something that takes all 3 verts and decides the vertical slop angle <br><br></td></tr></table><br>
<a name="558624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think what your saying is your after a command that reads a triangle in and measures the vertical range and atan2()'s it to the horitzontal range.<br><br>Is that right?  atan2() can give a bearing by comparing two measurements - so if you give the highestVertexY()-lowestVertexY() as one parameter and the range <br><br>dx=highestVertexX-lowestVertexX<br>dz=highestVertexZ-lowestVertexZ<br>sqr((dx*dx)+(dz*dz))<br><br>as the other parameter and that should work, although you'll need to figure out which parameter is which and whether to subtract high from or the other way around to get the number to return based off the right direction (crossing the numbers over rotates 90 degrees).<br><br><br><br>It's tan() that confuses me, I cant work out how it gives a bearing from one number (don't explain - I wont find a use for it anyway).<br><br>Anyway I hope that's right, it's gone midnight so any mistakes I just made wont get fixed tonight because i'm too tired to spot them... <br><br></td></tr></table><br>
<a name="558628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> It's tan() that confuses me... <br></div><br><br>Tan() is simply the opposite of Atan().  It gives you the slope (rise/run) of a line at the angle provided.  Atan2(x,y) = Atan(float(x)/y)<br><br><div class="quote"> is there a command to return the angle of slope on a triangle? <br></div><br><br>I believe what you want to do is find the pitch of the triangle's normal.  Disclaimer: I have no idea what I'm talking about.<br><br>I swiped the Triangle Normal calculation from <a href="/codearcs.php?code=514" target="_blank">Yet Another LightMapper (update 1.5 ) by Marcelo</a> and perverted it to only return the Y component of the vector.<br><br><pre class=code>ang# = ACos(GetTriangleNormalY(x1,y1,z1,x2,y2,z2,x3,y3,z3))

Function GetTriangleNormalY#(x1#, y1#, z1#, x2#, y2#, z2#, x3#, y3#, z3#)
	ux# = x2# - x1#
	uy# = y2# - y1#
	uz# = z2# - z1#
	vx# = x3# - x1#

	vy# = y3# - y1#
	vz# = z3# - z1#

	nx# = (uy# * vz#) - (vy# * uz#)
	ny# = (uz# * vx#) - (vz# * ux#)
	nz# = (ux# * vy#) - (vx# * uy#)

	; Normalize it
	NormLen# = Sqr((nx*nx) + (ny*ny) + (nz*nz))
	If NormLen &gt; 0
		nx = nx/NormLen : ny = ny/NormLen: nz = nz/NormLen
	Else
		nx = 0 : ny = 0 : nz = 1
	EndIf
	; just the jumbles!  the jumbles!
	Return ny
End Function</pre><br><br>I tested this on some real life triangles that I just made up.  It seems to work. <br><br></td></tr></table><br>
<a name="558647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> D-Grafix, am I missing something here? You can simply use ATan2() to give you the angle of the hypotenuse of a right-angle triangle. Will your three verts always represent a right-angled triangle, though? <br><br></td></tr></table><br>
<a name="558753"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> No the verts are not always at right angle.<br><br>Its quite a difficult one, take a triangle of paper and spin it all ways in the air and you will see what i mean.<br><br>im trying to implement a feature in my software that textures a slope if at a certain angle.<br>I think i need to do this:<br><br>1: calculate highest point, medium and lowest<br><br>2: average the two lower heights<br><br>3: create a virtual rightangle tri between the heighest point and the point of average on the other two.<br><br>3a:calculate the opposite(vertical) by the height of the heighest and the height of the averaging point<br><br>3b:calculate the adjacent as the distance of this point to the base of the vertical <br><br>4: do a standard trig sum on this to return desired check angle<br><br>its bit 3b i have trouble with. I dont know if this method works or not because i cannot work out the adjacent. <br><br></td></tr></table><br>
<a name="558757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surely the triangle normal is sufficient to find the triangles slope like octothorpe says?<br><br>I sometimes use the Y component to check if a triangle is too steep for the player to stand on and if so make them fall off. <br><br></td></tr></table><br>
<a name="558785"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> is this always accurate though even if the normals change? i dont know much about normals.<br>But if the vertex positions are changed dynamically does this effect the normals' values?<br>or can i updatenormals() and will this recalculate the values so the returned slope is accurate<br><br>or am i simply blowing wind? as i say im not really up on normals <br><br></td></tr></table><br>
<a name="558802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Banshee</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> The normal wont update until you call updatenormals and that can be a slow command on a large mesh.  If the retexturing is being done on the fly it might be a bit slow.<br><br>I think the suggestion I made works though doesn't it?  The two range calculations work out the length of the two funnily named edges of the triangle and atan2 returns the angle based on those edge-lengths. <br><br></td></tr></table><br>
<a name="558812"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> its a batch process not realtime so speed isnt an issue<br><br>so what does vertexnx() actually do in laymans terms, as ive mever used it and the help is a bit sketchy.<br><br>also the vertex routine above, how do i work out the angle from it or is that slope <br><br></td></tr></table><br>
<a name="558869"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Normals tell you what direction the triangle is facing. It's basically the angle :o) I wouldn't know how to actually return the angle of the triangle though. <br><br></td></tr></table><br>
<a name="558937"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >octothorpe</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The normal wont update until you call updatenormals <br></div><br><br>You're talking about vertex normals, which are completely different from triangle normals.  A triangle normal is a mathematically derived vector describing the angle the triangle is facing.  It is calculated from the positions of the triangle's vertices and nothing more.<br><br>A vertex normal is a programmatically derived vector describing the angle the vertex is supposed to look like it's facing.  Vertex normals are set by hand and can be tweaked.  They are simply a property of a vertex and do not even need to be normalized.  They're used for lighting, to make a triangle look rounded instead of flatshaded.<br><br>Look at the code I posted above and you'll see it isn't using VertexN*() functions, or for that matter, any functions other than Sqr().<br><br>Incidently, UpdateNormals() sets all the vertex normals in a mesh to be the average of all the triangle normals the vertex belongs to - or, more accurately, is positioned on the corner of.<br><br><div class="quote"> also the vertex routine above, how do i work out the angle from it or is that slope <br></div><br><br>The use of ACos() above turns the vector component into an angle. <br><br></td></tr></table><br>
<a name="558951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> so the angle returned is from the vertical do the dir the tri is facing <br><br></td></tr></table><br>
<a name="558955"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D4NM4N</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks octothorpe, works fine! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
