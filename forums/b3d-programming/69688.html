<!DOCTYPE html><html lang="en" ><head ><title >object occlusion</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >object occlusion</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >object occlusion</a><br><br>
<a name="779916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, what is the best method of occlusion in a large 3d scene, for indoor and outdoor environments, i'm hoping to try and get the same sort of effect that you get in the GTA games, but not sure what the best method is and how would i go about making it. What would peoples advice be on this? thanks. <br><br></td></tr></table><br>
<a name="779920"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> well it totally depends on what you're trying to do.<br><br>GTA is pretty straight forward because the buildings generally hide everything not on the road you're on so that makes life pretty simple.<br><br>The most basic way is to set up 'zones' over your map. e.g. If you're in Zone 1 then you can see Zone 2 and Zone 7 say, when you're in Zone 2 you can see Zone 1 and Zone 3 etc etc. Based on this you hide or show stuff. <br><br></td></tr></table><br>
<a name="779923"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure anyone has come up with an efficient occlusion system for B3D. You know blitz automatically occludes entities outside the view frustum, right?<br><br>I think the usual method of making things efficient is to break up your environment into smaller sections, and just let blitz do it's thing. Plus, modern GPUs are able to process a huge number of polies quickly, so adding some kind of occlusion system may not buy you much.<br><br>Not sure, TBH. Someone more knowledgeable in these matters will probably be along shortly, to clear things up. :) <br><br></td></tr></table><br>
<a name="779925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, will use zones for the level, didn't actually know that blitz did that automatically, but for the mesh in display just wandering if there is any code about for hiding unseen triangles in a large mesh (zone) to free up graphic memory? trying to get it to run as efficiently as possible. thanks <br><br></td></tr></table><br>
<a name="779926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> GTA is pretty straight forward because the buildings generally hide everything not on the road you're on so that makes life pretty simple. <br></div>Apart from the bits where you fly planes etc.<br><br>The view depth in San Andreas was unbelievable. <br><br></td></tr></table><br>
<a name="779928"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there is any code about for hiding unseen triangles in a large mesh <br></div>Nah, blitz hasn't got the legs to piss with meshes at that level, break you level up into seperate chunks (entities) then just hide/show them<br><br><div class="quote"> The view depth in San Andreas was unbelievable <br></div>Never played it, but I'll take your word for it... That sounds sarcastic doesn't it... It's not supposed to! Damn... Now it sounds really sarcastic... Should have just left it as it is... I'll get my coat. <br><br></td></tr></table><br>
<a name="779939"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks for the help, will use sections for sure, will need to think on the chunks(entities) though, might need to make my own level format or sumething to manage the objects in the map (say get blitz only to load in so many objects depending on the distance of those objects from the player :S). how good is blitz with quick calculations like searching through and array of objects in a file, processing thier distance from the player and camera and then deciding if the object is to be displayed or not?  thanks. <br><br></td></tr></table><br>
<a name="779942"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The deal is this, if it is in front of the camera, inside the frustrum, however far away it is, it will be drawn.<br><br>So A good idea is to check the zones as suggested above or for numerous moving objects or smaller levels check entity distance.<br><br>In our motorway simulation we had almost 800 cars, buses, vans, trucks, coaches in a draw loop.  Anything which was too far away was hidden, and everything else was shown.  Worked very well for us.<br><br>IPete2.<br><br><br><br>IPete2. <br><br></td></tr></table><br>
<a name="779943"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >David819</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks will try that. thanks everyone for the help :-). <br><br></td></tr></table><br>
<a name="779982"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Motorway simulation?<br><br>Hand it over - code and media. <br><br></td></tr></table><br>
<a name="780027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could actually implement a basic portal system in Blitz3D if you wanted to spend the time. Basically you could divide each room of your level into a separate mesh, then add simple rectangular connectors (portals) that mark the connections between these rooms. Then you could do a quick portal occlusion check like this:<br><br>0. First, hide all rooms.<br>1. If player is in room X, show this room.<br>2. Check all of room X's portals for visibility (if they appear on the screen).<br>2. For each visible portal, show the room it leads to.<br>3. For each of these rooms, check if any of <i>their</i> portals are visible, and repeat (of course at this point you don't check if their portals are on the screen, but rather if they are within their "parent" portal).<br><br>This way, with only a few simple 2D polygonal collision checks, you can have near-optimal occlusion in Blitz3D. Of course, you won't be able to do clipping plane optimizations like you would if you were doing this in DirectX/OpenGL, but it should be more than adequate for most tasks (certainly better than the plain octree/frustum culling discussed above - that has nothing to do with occlusion, which is fairly critical in large indoor environments). <br><br></td></tr></table><br>
<a name="780031"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Trader3564</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> what is a portal in this matter? i always wondered that. thanks! <br><br></td></tr></table><br>
<a name="780054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John J.</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> what is a portal in this matter? <br></div><br>If I was to summarize portals, I'd put it like this:<br><br>A portal is simply a marker which tells a portal occlusion manager how rooms are connected. Unlike "general purpose" occlusion, which calculate what is occluded, portal occlusion does the opposite: it calculates what is <i>not</i> occluded. Portals are markers indicating areas (doorways, windows, etc.) that should not occlude other rooms. This way, unless you're looking through a doorway, the only thing that's being rendered is the room you're currently in - even if your level has 100,000 rooms, literally (although if this was the case you'd have to implement a dynamic loading system ;) ). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
