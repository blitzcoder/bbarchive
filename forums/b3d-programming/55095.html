<!DOCTYPE html><html lang="en" ><head ><title >EasyTOK version 1.1</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >EasyTOK version 1.1</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >EasyTOK version 1.1</a><br><br>
<a name="613368"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Previous topic:<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=53535" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=53535</a><br><br>Hi :)<br><br>Alleluia :) Tokamak physic with blitz terrain is ready :)<br><br>You will find a procedure to make it easy (as alway) and<br>with one line of code you setup a blitz terrain with physic !<br><br>RELEASE COMING SOON ! BUT FOR THE MOMENT I'M IN DEBUG MODE<br><br>I will release a demo very soon !<br><br>Version 1.1 :<br>-------------<br>New example   : 'Beginning - Ship 01.bb' To see how create a space ship with flight and breakable part !<br>New example   : 'Beginning - Ragdoll 3DS 01.bbb' To see how create a ragdoll directly under max !<br><br>Documentation : Error removed under '3D integration".<br>Documentation : Doc in CHM format.<br><br>New function  : Joints can have a life parameter !!<br><br>New function  : Proc_CreatePhysicFromBlitzTerrain(Heightmap$,Colormap$,DetailMap$,ShadowMap$,ScaleXZ,ScaleY)<br>Look the example : Confirmed - Terrain Physic 01.bb<br><br>You can now define physic with blitz terrain<br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_09.jpg"><br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_04.jpg"><br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_07.jpg"><br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_01.jpg"> <br><br></td></tr></table><br>
<a name="613450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> WOO HOO!!!  I only purchased EasyTOK 1.0 yesterday, this is a great addition.<br><br>Many thanks Filax! <br><br></td></tr></table><br>
<a name="613502"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Download demo : With blitz terrain physic<br><a href="http://www.blitz3dfr.com/phpfrench/request.php?31" target="_blank">http://www.blitz3dfr.com/phpfrench/request.php?31</a> <br><br></td></tr></table><br>
<a name="613652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EmerGki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I want to know how I must to do my character with bones in EasyTOK, is possible? <br><br></td></tr></table><br>
<a name="613696"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi filax <br><br>in the demo i see only the mountain texture, the grass texture from the bottom is white  is this ok ?<br><br>second :how to load the collide sound ?<br><br>no example in the sources or iam blind ?<br><br>mfg <br><br></td></tr></table><br>
<a name="613718"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> EmerGki,<br><br>There is an example in using 3D Studio Max to design the bone structure. by looking at that you could work out how get started, but I do think you'll need to try a variety of settings for hinges etc.<br><br>IPete2. <br><br></td></tr></table><br>
<a name="613724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Panno : It's possible if your graphic card don't support the blend 5<br><br>For the sound : Because i have not made :) but it's possible.<br>look inside the doc please. But the sound with tokamak is not <br>terrible :/ (cracking) The good method, assign an entity type <br>and check collisions with blitz. <br><br></td></tr></table><br>
<a name="614173"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Angelet</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great news for all EasyTOKers!!! <br><br></td></tr></table><br>
<a name="614406"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Neat.<br><br><br>What is Blend mode 5!??? Forgive me, i'm no artist... The blitz manuals say 0-3. so whats 4 and 5? I think 4 was dotmap or somthing? <br><br></td></tr></table><br>
<a name="614461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ZJP</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Very good job!!!<br>The "physic terrain" example is incredible !!<br><br>JP <br><br></td></tr></table><br>
<a name="614479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cygnus : Blend 5 is modulate 2X<br><br>ZJP : Cool :) <br><br></td></tr></table><br>
<a name="618462"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Avon</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any news on the 1.1 release, filax? <br><br></td></tr></table><br>
<a name="618552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes ! it's ready i think release it monday 23/1/2006 !<br><br>I'm a little bit later :) sorry :)<br><br>But TerraED Pro take all my time :) (fuc... bugs ...) <br><br></td></tr></table><br>
<a name="619944"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Check your mail box latest release 1.1 was send :) <br><br></td></tr></table><br>
<a name="620111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Murphy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> TerraED Pro?<br>will it be a free update? ;)<br>wanna have some news on that!!! <br><br></td></tr></table><br>
<a name="620134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I were to deform the terrain, would it still collide correctly work? <br><br></td></tr></table><br>
<a name="620147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Murphy : No TerraEd is a completly new version :) more<br>user friendly, better editing tool etc ... Many many<br>features. Due to hard work to make it, the older terraed<br>customer's, can buy this version with very low price.<br><br>Dock : Not in real time. <br><br></td></tr></table><br>
<a name="629916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi dear users :)<br><br>What do you want for the next version ? <br><br></td></tr></table><br>
<a name="629929"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Alienforce</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax: Off topic. Did you get my last mail ?? <br><br></td></tr></table><br>
<a name="630128"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> ? sorry ? <br><br></td></tr></table><br>
<a name="630971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ghost</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi filax,<br>sorry if it has already been asked but do we need to have 3dsmax in order to use your library ?<br>What if my main modeler is AC3D ? <br><br></td></tr></table><br>
<a name="631135"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course not ! but it's more simple because demo .MAX scene can be openend only with max but the mothod with other's <br>softwares. <br><br></td></tr></table><br>
<a name="643078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Bean</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Where can I purchase EasyTOK?????????????????? <br><br></td></tr></table><br>
<a name="643085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi :)<br><br>Here :)<br><br><a href="http://www.blitzbasic.com/toolbox/toolbox.php?tool=143" target="_blank">http://www.blitzbasic.com/toolbox/toolbox.php?tool=143</a> <br><br></td></tr></table><br>
<a name="643174"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>please could I have a look at the EasyTok documentation prior to purchase and some example code <br><br></td></tr></table><br>
<a name="643178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sended to info@... <br><br></td></tr></table><br>
<a name="643211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> filaxOutlook blocked the chm - please could you zip it and try again - sorry for the hassle.<br><br>I really apprecaite. <br><br></td></tr></table><br>
<a name="643212"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I hate your mail box :) <br><br></td></tr></table><br>
<a name="643504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe - secure, perhaps a bit too secure.<br><br>Anyway - got it, many thanks!<br><br>I have a many questions re EasyTok, want me to post them here? <br><br></td></tr></table><br>
<a name="643522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want ;) i have no secret about my products :) <br><br></td></tr></table><br>
<a name="643636"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >CodeGit</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use EasyTok and it's great. You will also find that the support that Filax offers is first class. <br><br></td></tr></table><br>
<a name="643658"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been using Filax's BCF for years now (quite literally) and know he is a top coder and all round good guy...<br><br>What I want to understand is what EasyTok does for me?  Why not just use the TokaMak wrapper?  Looking through the EasyTok docs it doesn't seem to cover all the TokaMak functions so I'll have to go to TokaMak for the 'missing' stuff so why not use TokaMak without EasyTok?<br><br>I am seriously NOT trying to put down EasyTok I just want to be convinced that EasyTok is a really needed to develop an app with TokaMak...<br><br>I'll tell you what I want to do : a basic scene, 2 small platforms at angles and drop bouncy balls on them so the balls bounce across the angles platforms and eventually fall down the hole. <br><br>Whats the best, easiest way to achieve this?  Using EasyTok?<br><br>One of the problems appears to be the lack of tutorials for the beginner for EasyTok.<br><br>(Filax could you please email the bb for that demo with the balls rolling down the chutes please) - erm best to zip it. <br><br></td></tr></table><br>
<a name="643712"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi <br><br>Long story for 12 euros :) ! Ok i'm trying to explain what <br>easytok do :<br><br>EasyTok is a library to help you to place easily your<br>physic under your game or app, direct in code or with 3DS max<br><br>But boiled, don't forget, that you have the code ! you can <br>modifiy all that you want to adapt Tokamak and EasyTOk for<br>your specific app :)<br><br>If you want use all tokamak functions and if your are a<br>Tokamak pro coder you don't need EasyTok :) !!!!<br><br>In EasyTok i have try to add only the functions more used !<br><br>Ok the example of the ball rolling ? hum ok :)<br><br>Cheers :)<br><br>PS : You say <br><br>"I'll tell you what I want to do : a basic scene, 2 small platforms at angles and drop bouncy balls on them so the balls bounce across the angles platforms and eventually fall down the hole.<br><br>Whats the best, easiest way to achieve this? Using EasyTok?"<br><br>Hum ! i think less than 5/10 lines (EasyTok) of code ? Happy ? :) You made you scene under 3DS Max :) And for the rest...<br><br><br><br> <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;=======================================================================================
; Code : EasyTok librarie example
; Project Title : EasyTok librarie example
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 1024, 768,32
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; ---------------------------------------
; Setup camera and Easytok
; ---------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,0,20,-40
EntityRadius Cam,3
EntityType Cam,1

Proc_CreateVisor()

TOK_InitWorld(0,-41,0,1000,100)

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,200,100,50
LightRange Light1,90

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,200,50
LightRange Light2,90

AmbientLight 50,50,50

; ----------------------------------------------------
; Load the tokamak world from a B3D
; ----------------------------------------------------
TOK_CreatePhysicFromMesh(LoadAnimMesh("./ETOK_Medias/Simple_Scene01.b3d"))
Collisions 1,2,2,3

; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Global MyShootRate=200
Global MyShootTimer=TOK_CreateTimer( MyShootRate)

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch balls&gt; / &lt;Cam position : "+EntityX(Cam)+" / "+EntityY(Cam)+" / "+EntityZ(Cam)+"&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
	Proc_Freelook(Cam,1.05,0.05)

	If MouseHit(1) Then
		Tmp$="Bullet"+Rnd(1000)
		TOK_CreateRBSphere(Tmp$,False,-73,84,32,0,0,0,3,60,"",Rnd(255),Rnd(255),Rnd(255),1,5)
		TOK_ApplyMaterial(Tmp$,TOK_TypeRigidBody%,"Ice")
	EndIf

	; -----------------------------------------------------------
	; Define if the camera collide a toka object
	; -----------------------------------------------------------
	Local Power=100
	
	If CountCollisions(Cam)&gt;0 Then
		For k=1 To CountCollisions(cam)
			Entity_Collided=CollisionEntity(Cam,k)

			If TOK_IsRigidBody(Entity_Collided)=True Then
				TOK_ApplyImpulse2(TOK_GetRBName$(Entity_Collided),-Power*CollisionNX(Cam,k),-Power*CollisionNY(Cam,k),-Power*CollisionNZ(Cam,k),CollisionX(Cam,k),CollisionY(Cam,k),CollisionZ(Cam,k))
			EndIf
		Next
	EndIf

	; ---------------------	
	; Update physic
	; ---------------------
	TOK_RefreshPhysic(1.7/AppFPS,5)
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function
</textarea> <br><br></td></tr></table><br>
<a name="643740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I have to create my scene in Max?<br><br>I don't have it.<br><br>Can I not just create cubes and scale them and use those as the platforms?<br><br>Sorry these questions are so stupid... <br><br></td></tr></table><br>
<a name="643745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes of course :) But you can use lightwave or other modelers if you want :) <br><br></td></tr></table><br>
<a name="643751"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sod it.<br><br>Let's do it!<br><br>Done!<br><br>Now I'm really gonna start bugging you! <br><br></td></tr></table><br>
<a name="643800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> You say : "OK you win :-)"<br><br>Lol :) Like alway :)<br><br>But please let me juste some time to finish terraed :) <br><br></td></tr></table><br>
<a name="643828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>no worries - I am head down in qoob at the moment and have tons to do so I won't be bothering you for at least 2 weeks.  I'll have a play with the basics and if I really get stuck I'll post here and hopefully someone will help me out (maybe even you).<br><br>I've taken a brief look at EasyTok.bb and can see that this lib has saved me a LOT of grief already! <br><br></td></tr></table><br>
<a name="644235"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can I load in a 3ds model and get EasyTok to make it a Animated Body? <br><br></td></tr></table><br>
<a name="644257"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes read the doc about 3D integration. <br><br></td></tr></table><br>
<a name="644262"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. BUT do I have to create an entire scene?<br><br>2. What if I want to just load a single object?  What I want to do for example is load a mesh of a tennis racket for example and use that as an animated bofy.  Can this be done?<br><br>3. also how do I change a balls bounciness?<br><br>4. The EasyTOk doc don't seem to include all the functions in the library.  <br><br>5. And will EasyTok be expanded to include all the TokaMak functions?<br><br>6.  The sound attached to a sphere seems to play eratically. <br><br></td></tr></table><br>
<a name="644293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you preview the physics in 3dsMax in anyway?  The same as you can using b3dpipeline?  If not, it is a shame we don't have the b3dpipeline preview source code to adapt to this purpose. <br><br></td></tr></table><br>
<a name="644702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> *BUMP*  Filax?  COuld you please answer my 6 questions... <br><br></td></tr></table><br>
<a name="644763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> 1. BUT do I have to create an entire scene?<br><br>Yes, specified in the doc ....<br><br><br>2. What if I want to just load a single object? What I want to do for example is load a mesh of a tennis racket for example and use that as an animated bofy. Can this be done?<br><br>Yes, look the function :<br>TOK_CreateABCube(Name$,Px#=0,Py#=0,Pz#=0,Pitch#=0,Yaw#=0,Roll#=0,Width#=1,Height#=1,Depth#=1,Sound$="",Red=255,Green=255,Blue=255,View%=1)<br><br>You can make a copy of this function to use a mesh instead<br>the createCube !!<br><br><br>3. also how do I change a balls bounciness?<br><br>Yes, specified in the doc ....<br><br><br>"4. The EasyTOk doc don't seem to include all the functions in the library."<br><br>No it's true but i have try to include the most used functions.<br><br><br>"5. And will EasyTok be expanded to include all the TokaMak functions?"<br><br>Of course :) But warning you can use only the functions permit by tokamak wrapper !!<br><br><br>6. The sound attached to a sphere seems to play eratically. <br><br>No the sound is correctly played, it's the Tokamak collision<br>detection the problem, to solve it use standard blitz <br>entitytype setting (better result)<br><br><br>You must consider EasyTok like a Base to be extended for<br>your hown using ! <br><br></td></tr></table><br>
<a name="644766"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> You must consider EasyTok like a Base to be extended for your hown using !  <br></div><br><br>AHA!  Well I won't be amending the library cos you'll be bringing out an update soon :-)<br><br>I'm just trying to get my head round EasyTok / Tokamak wrapper is implemented in terms of what access I have to various things from Blitz.<br><br>Regards using my own mesh - doesn't TokaMak only recognise cylinders, cubes and sphere? <br><br></td></tr></table><br>
<a name="644797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes physic with polygon don't work  :) only bounding form. <br><br></td></tr></table><br>
<a name="644891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Filax,<br><br>if you have a spare moment could you please knock up a tiny bit of code that shows how to make a springboard (like a diving board).  So a solid cube attached to a hinged cube that will be affected by a ball dropping on it for example.<br><br>Many thanks <br><br></td></tr></table><br>
<a name="644927"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> You have it ! :) look the example :<br><br>Beginning - From 3D scene 02.bb<br><br>Or<br><br>Beginning - From 3D scene 01.bb<br><br>you must see that :<br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_07.jpg"><br><br>Look around the large hole you can see a diving board. <br><br></td></tr></table><br>
<a name="644947"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> But thats from a scene - I cannot create scenes.  Can it be easily be done in code? <br><br></td></tr></table><br>
<a name="645050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course ! But you have all necessary files do you look all <br>examples ?<br><br>Look <br><br>Beginning - Chain Joint 03.bb<br><br>You can see how attach Joint+RigidBody <br><br></td></tr></table><br>
<a name="645052"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#51">[#51]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll take a look - sorry for all the stupid basic questions...<br><br>I have modified the TOK_CreateABCube function so it takes a mesh.  Are you interested in any new functions / modifications for inclusion in later releases?<br><br>One last stupid question.<br><br>So does a RB always have to repsond to gravity unlike a AB? <br><br></td></tr></table><br>
<a name="645060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#52">[#52]</a></td></tr></table></td></tr><tr ><td class="posttext"> So does a RB always have to repsond to gravity unlike a AB? <br><br>Euh ?? sorry i don't understand can you clarify ? for <br>information Animated body (see doc) are static entity<br>(yes i know it's really strange) Only Rigib body can be<br>translated by gravity. <br><br></td></tr></table><br>
<a name="645062"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#53">[#53]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed, That sounds backwards :) <br><br></td></tr></table><br>
<a name="645065"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#54">[#54]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let me try and explain and you correct me...<br><br>I want to have a hinged platform like a spring board (diving board).<br><br>My understanding is I need.<br><br>1.  An AB that is the unmovable / fixed end<br>2.  A RB that is the actual diving board that moves when other RBs land on it<br>3.  A hinged joint between the 2 object above.<br><br>Is that correct? <br><br></td></tr></table><br>
<a name="645070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#55">[#55]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes its correct ! You must understand one thing :<br><br>The joints can be attached to nothing ! correction ...<br>The joints can be attached to only one entity like Rigid body or animated body OR together (Rigib b+Animated b)<br>etc<br><br>Look the example :<br><br>Confirmed - Ragdoll 03.bb<br><br>You can see that the joint is attached only to one rigid body<br><br>Don't panic :) EasyTOK is not difficult, when you understand<br>the object name system and the joint limit you can make<br>all that you want :) Start with little examples. <br><br></td></tr></table><br>
<a name="645074"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#56">[#56]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think there is a problem - this is from the EasyTok docs...<br><br><pre class=code>
TOK_CreateABCube("Toto1",Rnd(-10,10),40,Rnd(-10,10),0,0,0,2,2,2,"",255,255,1,1) 

TOK_CreateMaterial("MyMaterialICE",5.3,8) 

TOK_ApplyMaterial("Toto1",TOK_TypeAnimBody%,"MyMaterialICE") 
</pre><br><br>If fails, please try it <br><br></td></tr></table><br>
<a name="645077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#57">[#57]</a></td></tr></table></td></tr><tr ><td class="posttext"> Opps a little bug :)<br><br>Goto line number : 1663 and change :<br><br>TOKGEOM_SetMaterialIndex R\Geom,TOK_GetMaterialIndex(Material$)<br><br>with <br><br>TOKGEOM_SetMaterialIndex A\Geom,TOK_GetMaterialIndex(Material$) <br><br></td></tr></table><br>
<a name="645083"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#58">[#58]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehe - found one :-)<br><br>Changing an objects mass seems to make no difference.<br><br>Setting materials as 0,0 and things still bounce... <br><br></td></tr></table><br>
<a name="645085"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#59">[#59]</a></td></tr></table></td></tr><tr ><td class="posttext"> :) It's cool :) I am never upset when the users find bugs in my products:)<br><br>Error is human :) <br><br></td></tr></table><br>
<a name="645086"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#60">[#60]</a></td></tr></table></td></tr><tr ><td class="posttext"> Changing an objects mass seems to make no difference.<br><br>Setting materials as 0,0 and things still bounce... <br><br></td></tr></table><br>
<a name="645094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#61">[#61]</a></td></tr></table></td></tr><tr ><td class="posttext"> You must modify the linear damping to see mass effect try this :<br><br>Because mass define only the object mass value ! but the <br>visual effect is a mix between : Worl gravity / Damping / RB Material / Mass<br><br>And of course ! the floor material is important too !<br><br>There is not magic value ! you must make test.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;=======================================================================================
; Code :
; Project Title :
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 1024, 768,32,0
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; -------------------------------------
; Setup camera and Easytok
; -------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,10,40,-40

Proc_CreateVisor()

TOK_InitWorld(0,-40,0,1000,100)

TOK_CreateGround("Floor",150,255,150,10)
TOK_ApplyMaterial("Floor",TOK_TypeAnimBody%,"Rubber")

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,250,150,50
LightRange Light1,100

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,150,250
LightRange Light2,100

AmbientLight 80,90,100

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
; Object mass effect is a mix between Object mass =&gt; Object material =&gt; Object damping and of course the floor material !
; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
TOK_CreateRBSphere("Toto1",False,-20,60,10,0,0,0,2,3,"",255,Rnd(255),255,1,50)
TOK_SetRBLinearDamping("Toto1",0.00001)
TOK_ApplyMaterial("Toto1",TOK_TypeRigidBody%,"Metal")

TOK_CreateRBSphere("Toto2",False,-10,60,10,0,0,0,2,0.001,"",255,Rnd(255),255,1,50)
TOK_SetRBLinearDamping("Toto2",0.00001)
TOK_ApplyMaterial("Toto2",TOK_TypeRigidBody%,"Rubber")

TOK_CreateRBSphere("Toto3",False,0,60,10,0,0,0,2,0.2,"",255,Rnd(255),255,1,50)
TOK_SetRBLinearDamping("Toto3",0.00001)
TOK_ApplyMaterial("Toto3",TOK_TypeRigidBody%,"Wood")

TOK_CreateRBSphere("Toto4",False,10,60,10,0,0,0,2,2,"",255,Rnd(255),255,1,50)
TOK_SetRBLinearDamping("Toto4",0.00001)
TOK_ApplyMaterial("Toto4",TOK_TypeRigidBody%,"Plastic")

TOK_CreateRBSphere("Toto5",False,20,60,10,0,0,0,2,6,"",255,Rnd(255),255,1,50)
TOK_SetRBLinearDamping("Toto5",0.00001)
TOK_ApplyMaterial("Toto5",TOK_TypeRigidBody%,"Ice")

Global Start=False

; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch objecst&gt; / &lt;Mouse right to apply impulse Y&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
	Proc_Freelook(Cam,1.05,0.05)

	If MouseHit(1) Then
		Start=True
	EndIf
	
	If MouseHit(2) Then
		TOK_ApplyImpulse("",0,3,0)
	EndIf
	
	If Start=True Then
		TOK_RefreshPhysic(1.7/AppFPS,10)
	EndIf
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function
</textarea> <br><br></td></tr></table><br>
<a name="645098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#62">[#62]</a></td></tr></table></td></tr><tr ><td class="posttext"> Interesting but I wish all this was explained somewhere.  I must say the TokaMaks doc are a little bare... <br><br></td></tr></table><br>
<a name="645100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#63">[#63]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sure ! i have many difficulty to understand this :/ <br><br></td></tr></table><br>
<a name="645102"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#64">[#64]</a></td></tr></table></td></tr><tr ><td class="posttext"> Weird!  Where are the textures actually created? <br><br></td></tr></table><br>
<a name="645107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#65">[#65]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please ... Find CreateTexture function under EasyTOK.bb<br><br>Function TOK_CreateCheckerTexture()<br><br>Line 1900<br><br>I'm working on the TerraEd doc i'm busy for the rest of this <br>day :) <br><br></td></tr></table><br>
<a name="645207"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#66">[#66]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have found another problem...<br><br><pre class=code>

cube = CreateCube()

TOK_CreateRBCube("Bar01",cube,Px#,Py#,Pz#-3,0,0,0,10,1,1,Mass,"",255,255,255,1,0)
TOK_CreateJoint("Axis01",1,"Bar01","Bar01",Px#,Py#,Pz#,0,90,0,1,JointType1,100,0,0)
</pre><br><br>All I'm doing is creating a cube mesh and passing that into the function.  Now the problem is RB spheres now pass into the Bar01...<br><br>Why? <br><br></td></tr></table><br>
<a name="646100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#67">[#67]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax, pls see the above too...<br><br>Can I use the ball / chain models please? <br><br></td></tr></table><br>
<a name="646213"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#68">[#68]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you preview the physics in 3dsMax in anyway? The same as you can using b3dpipeline? <br><br></td></tr></table><br>
<a name="646310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#69">[#69]</a></td></tr></table></td></tr><tr ><td class="posttext"> Beaker : No !<br><br><br>Boiled Sweets : Clarify with usable code please ! For the chain model yes keep it if you want :) <br><br></td></tr></table><br>
<a name="646503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#70">[#70]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax, <br><br>pls try this<br><br><a href="http://www.boiledsweets.com/tmp/mesh-err.zip" target="_blank">http://www.boiledsweets.com/tmp/mesh-err.zip</a> <br><br></td></tr></table><br>
<a name="646698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#71">[#71]</a></td></tr></table></td></tr><tr ><td class="posttext"> In the EasyTOK.bb line number : 618<br><br>Replace<br>ScaleEntity<br><br>With<br><br>ScaleMesh<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;=======================================================================================
; Code :
; Project Title :
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 1024, 768,32,0
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; -------------------------------------
; Setup camera and Easytok
; -------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,0,90,-120

Proc_CreateVisor()

TOK_InitWorld(0,-40,0,1000,100)

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,250,150,50
LightRange Light1,100

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,150,250
LightRange Light2,100

AmbientLight 80,90,100

TOK_CreateABCube("Wall01",15 ,150,0,0,0,20,15,2,15,"",255,255,255,1)
TOK_CreateABCube("Wall02",-15 ,120,0,0,0,-20,15,2,15,"",255,255,255,1)
TOK_CreateABCube("Wall03",15 ,90,0,0,0,20,15,2,15,"",255,255,255,1)
TOK_CreateABCube("Wall04",-15,60,0,0,0,-20,15,2,15,"",255,255,255,1)
TOK_CreateABCube("Wall05",15 ,30,0, 0,0,20,15,2,15,"",255,255,255,1)

; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Global g_clock = MilliSecs()

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch objecst&gt; / &lt;Mouse right to apply impulse Y&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
	Proc_Freelook(Cam,1.05,0.05)
	
	If MilliSecs() &gt; g_clock + 1000
		g_clock = MilliSecs()
		
		Width#=3
		sphere = CreateSphere()
		TOK_CreateRBSphere("Toto1",sphere,10,180,0,0,0,0,Width#,5,"",255,Rnd(255),255,1,5)
	EndIf
	
	If MouseHit(2) Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(55,165),Rnd(-5,5))
	EndIf

	TOK_RefreshPhysic(1.7/AppFPS,70)
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function
</textarea> <br><br></td></tr></table><br>
<a name="646914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#72">[#72]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Filax,<br><br>I'll keep looking for bugs - you keep fixing em ;-)<br><br>So is there going to be a new version of EasyTok with those 2 bugs fixed?  And possibly more TokaMak functions exposed?  :-) <br><br></td></tr></table><br>
<a name="646940"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#73">[#73]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes i have updated via mail box :)<br>Three little bug removed<br><br>For other's functions wait a little time :) <br><br></td></tr></table><br>
<a name="646941"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#74">[#74]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks.<br><br>My first app is very nearly finished.  It's shows off EasyTok/TokaMak to great effect I think... <br><br></td></tr></table><br>
<a name="646969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#75">[#75]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>sorry no mail from you yet... <br><br></td></tr></table><br>
<a name="646971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#76">[#76]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi filax,<br><br>Does EasyTok 1.1 support Convex hull?<br><br>Thanks in advance.<br>Sammy<br>:) <br><br></td></tr></table><br>
<a name="646985"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#77">[#77]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not in this version <br><br></td></tr></table><br>
<a name="647060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gnu</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#78">[#78]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax<br>I just wanted to say your incredibly patient and helpful. keep up the great work<br><br>Regards <br>Gnu <br><br></td></tr></table><br>
<a name="647167"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#79">[#79]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gnu,<br><br>I second that!  Filax sorry but I still haven't received the corrected EasyTok... <br><br></td></tr></table><br>
<a name="647293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#80">[#80]</a></td></tr></table></td></tr><tr ><td class="posttext"> no updatemail from you filax <br><br></td></tr></table><br>
<a name="647328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#81">[#81]</a></td></tr></table></td></tr><tr ><td class="posttext"> send me an email i'll replay the lib for you. <br><br></td></tr></table><br>
<a name="647479"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#82">[#82]</a></td></tr></table></td></tr><tr ><td class="posttext"> This week i will work on bones+EasyTok to see if it's<br>possible to control objects bones with anim+physic<br><br>Say me : Good luck :) <br><br></td></tr></table><br>
<a name="647539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#83">[#83]</a></td></tr></table></td></tr><tr ><td class="posttext"> GOOD LUCK!<br><br>And please examples without having to use 3d max... <br><br></td></tr></table><br>
<a name="647549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#84">[#84]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry but i have not other 3D modeler :/ But i will<br>try to make a step by step tutorial under doc for bones. <br><br></td></tr></table><br>
<a name="647561"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#85">[#85]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>you rock!  Keep up the good work. <br><br></td></tr></table><br>
<a name="647577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#86">[#86]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>bad news, that new 1.2 version has broken your "Beginning -Chain Mesh 01.bb" example.<br><br>Please try it - the chain links are no longer visible! <br><br></td></tr></table><br>
<a name="647623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#87">[#87]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's just a scale value problem :<br><br>In the example line : 238<br><br>Replace the line by this one :<br>			MyCube=TOK_CreateRBCube(Name$+I,Tmp_Chain,Px#,Py#-SizeHeight#,Pz#,0,Yaw#,0,0.97,0.97,0.97,Mass#,"",255,255,255,1,0) <br><br></td></tr></table><br>
<a name="649119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#88">[#88]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>more problems I'm afriad, just try hitting the left mouse button.  RB Spheres still pass thru the AB cubes<br><br><pre class=code>
;=======================================================================================
; Code : EasyTok librarie example
; Project Title : EasyTok librarie example
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 1024, 768,32,0
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; -------------------------------------
; Setup camera and Easytok
; -------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,0,25,-40

Proc_CreateVisor()

TOK_InitWorld(0,-40,0,1000,100)
TOK_CreateGround("Floor",150,255,150,10)

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,250,150,50
LightRange Light1,100

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,150,250
LightRange Light2,100

AmbientLight 80,90,100

; -----------------------------
; Create the plateform
; -----------------------------
Global MyCube03=TOK_CreateABCube("Toto0",0,21,0,0,0,0,15,0.25,15,"",255,55,55,1)
TOK_EntityColor("Toto0",110,150,0)

Global Angle#

; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch objects&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
	Proc_Freelook(Cam,1.05,0.05)

	; -----------------------------------------
	; Launch a cube and a sphere
	; -----------------------------------------
	If MouseHit(1) Then
;		TOK_CreateRBCube("Toto1",False,Rnd(-10,10),40,Rnd(-10,10),0,0,0,2,2,2,6,"",255,255,1,1,20)
		TOK_CreateRBSphere("Toto2",False,10,40,Rnd(-10,10),0,0,0,2,10,"",255,255,255,1,20)
	EndIf
	
	Angle#=Angle#+2
	TOK_RotateABEntity("Toto0",0,0,Angle)

	; ------------------------------------------
	; Apply impulse to ALL objects
	; ------------------------------------------
	If MouseHit(2) Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(55,65),Rnd(-5,5))
	EndIf
	
	TOK_RefreshPhysic(1.7/AppFPS,10)
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function
</pre> <br><br></td></tr></table><br>
<a name="649499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#89">[#89]</a></td></tr></table></td></tr><tr ><td class="posttext"> *bump* <br><br></td></tr></table><br>
<a name="649966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#90">[#90]</a></td></tr></table></td></tr><tr ><td class="posttext"> This problem is 'normal' with tokamak, when you made<br>too slim objects, the collisions become crazy.<br><br>But there is some solutions :<br><br>Diminish world gravity : TOK_InitWorld(0,-30,0,1000,100)<br><br>Increase box height : TOK_CreateABCube("Toto0",0,21,0,0,0,0,15,1,15,"",255,55,55,1)<br><br>Increase physic precision : TOK_RefreshPhysic(1.7/AppFPS,50) <br><br></td></tr></table><br>
<a name="650010"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mike0101</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#91">[#91]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good luck Filax:)<br>I can't waiting the animation + physic <br><br></td></tr></table><br>
<a name="650116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#92">[#92]</a></td></tr></table></td></tr><tr ><td class="posttext"> My first tests of bones + RB make me desapointed :/ <br><br></td></tr></table><br>
<a name="650838"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Happy Sammy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#93">[#93]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi filax,<br><br>Rigid body is related to box modelling.<br>Could EasyTok work with box modelling?<br><br>Thanks in advance.<br>Sammy<br>:) <br><br></td></tr></table><br>
<a name="651835"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#94">[#94]</a></td></tr></table></td></tr><tr ><td class="posttext"> Why doesn't this detect a collisiion...<br><br>TOK_EntityType("Floor",1)<br>TOK_EntityType("Toto2",2)<br>Collisions 1,2,2,3<br>count = CountCollisions (TOK_GetRBMesh ("Toto2"))<br><br>count is 0. <br><br></td></tr></table><br>
<a name="651889"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#95">[#95]</a></td></tr></table></td></tr><tr ><td class="posttext"> Please send me exploitable example :) <br><br></td></tr></table><br>
<a name="652076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#96">[#96]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>
;=======================================================================================
; Code : EasyTok librarie example
; Project Title : EasyTok librarie example
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 800,600,32,0
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; -------------------------------------
; Setup camera and Easytok
; -------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,0,20,-40

Proc_CreateVisor()

TOK_InitWorld(0,-40,0,1000,100)
TOK_CreateGround("Floor",150,255,150,10)
	TOK_ApplyMaterial("Floor",TOK_TypeAnimBody%,"Plastic")

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,250,150,50
LightRange Light1,100

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,150,250
LightRange Light2,100

AmbientLight 80,90,100

Global Angle#

		TOK_CreateRBSphere("Toto2",False,10,40,Rnd(-10,10),0,0,0,2,10,"",255,255,255,1,20)


TOK_EntityType("Floor",1)
TOK_EntityType("Toto2",2)
Collisions 1,2,2,3

; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch objects&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
;	Proc_Freelook(Cam,1.05,0.05)

	; -----------------------------------------
	; Launch a cube and a sphere
	; -----------------------------------------
;	If MouseHit(1) Then
;		TOK_CreateRBCube("Toto1",False,Rnd(-10,10),40,Rnd(-10,10),0,0,0,2,2,2,6,"",255,255,1,1,20)
;	EndIf
	

	; ------------------------------------------
	; Apply impulse to ALL objects
	; ------------------------------------------
	If MouseHit(2) Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(55,65),Rnd(-5,5))
	EndIf


		;If MouseDown(1) Then
		Proc_CameraPick(Cam)
	;EndIf

	count = CountCollisions (TOK_GetABMesh ("Floor"))
	DebugLog mesh + " " + count

	
	TOK_RefreshPhysic(1.7/AppFPS,10)
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function

Function Proc_CameraPick(Camera)
	Local PEntity = 0 : CameraPick(Camera,GraphicsWidth()/2,GraphicsHeight()/2)
	PickedEntityID = PickedEntity()
	
	If PickedEntityID&lt;&gt;0

	DebugLog "pickeed"
		If TOK_IsRigidBody(PickedEntityID)=True Then
			Tmp_Name$=TOK_GetRBName$(PickedEntityID)
			
			TOK_EntityAlpha(Tmp_Name$,0.5)
			TOK_ApplyImpulse(Tmp_Name$,0,PickedNY#()*30,0)
			TOK_ApplyTwist(Tmp_Name$,0,60,0)
		EndIf 
	EndIf
End Function</pre> <br><br></td></tr></table><br>
<a name="652204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#97">[#97]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look the example : <br><br>Beginning - Push Object 01.bb<br><br>You can see CountCollision process <br><br></td></tr></table><br>
<a name="652234"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#98">[#98]</a></td></tr></table></td></tr><tr ><td class="posttext"> But Filax,<br><br>thats doing a Blitz entity to EasyTok collision.  Mine are both EasyTok.  Please try my example.  It doesn't work.  I think there is a problem with EasyTok. <br><br></td></tr></table><br>
<a name="652253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#99">[#99]</a></td></tr></table></td></tr><tr ><td class="posttext"> Boiled :) It's a little bit normal that your example<br>don't work :/ you have forget to define entityradius for the <br>sphere .... And your collision order is bad ! You say :<br><br>Collisions 1,2,2,3<br><br>The solution is :<br><br>TOK_EntityType("Floor",1)<br>TOK_EntityType("Toto2",2)<br>EntityRadius TOK_GetRBMesh ("Toto2"),5<br>Collisions 2,1,2,3<br><br>When i say, look the example it's to understand this, i have<br>some reasons :)<br><br>The problem is not EasyTok for this time.<br><br>Cheers <br><br></td></tr></table><br>
<a name="652271"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#100">[#100]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>ta.  What I really want to be able to do is work out what ab a rb has collided with.  If I use the Blitz collisions and the object jumps eratically all over the place.<br><br>Basically I have a left and right ab walls and a ab floor.  I have a rb sphere and want to know when the sphere has hit the ground.  I have tried the TOKSIM_GetCollisionCount() but it returns greater than 0 if ANY collision occurs, i.e. sphere ahs hit a wall.  I just want to knwo when the ball has hit the floor.<br><br>Is there a way to do this? <br><br></td></tr></table><br>
<a name="652277"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#101">[#101]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe using a switch value ?<br><br>If collision XXX And MySwitch=0<br>Switch=1<br>endif<br><br>etc like that you can test only one time if the wall is <br>collided. <br><br></td></tr></table><br>
<a name="652282"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#102">[#102]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eh?<br><br>I don't understand.  If I use the Blitz collisions are you described the ball jumps eratically.<br><br>I don't understand your suggestion.  Is there a way to use...<br><br><br>TOKRB_GetCollisionID????? <br><br></td></tr></table><br>
<a name="652322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#103">[#103]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm sorry but what exactly your problem ????<br><br>I have post the method to know if your RBODY Collide with<br>ABODY ! What do you want more ?<br><br>In you previous example put :<br><br>TOK_EntityType("Floor",1)<br>TOK_EntityType("Toto2",2)<br>EntityRadius TOK_GetRBMesh ("Toto2"),5<br>Collisions 2,1,2,3<br><br>Instead :<br><br>TOK_EntityType("Floor",1)<br>TOK_EntityType("Toto2",2)<br>Collisions 1,2,2,3<br><br>And in debug mode you will know when Ball hit floor !<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;=======================================================================================
; Code : EasyTok librarie example
; Project Title : EasyTok librarie example
; Author : Philippe Agnisola
; Email :                    
; Version : 1.0.0
; Date :              
; Notes : 
;                   
;                   
;=======================================================================================

Include "Inc_TimeMachine.bb"
Include "Inc_EasyTOK.bb"

; ------------------------
; Freelook cam var
; ------------------------
Global Mouse_X_Speed#
Global Mouse_Y_Speed#
Global Camera_VelX#
Global Camera_VelZ#
Global Camera_Pitch
Global Camera_Yaw

; -------------------------------
; Refresh frame number
; -------------------------------
Global AppFPS =60

; ------------------
; Open screen
; ------------------
Graphics3D 800,600,32,0
SetBuffer BackBuffer ()

; ----------------------
; Change font text
; ----------------------
AppFont=LoadFont("Arial",15,1,0,0) 
SetFont AppFont

; -------------------------------------
; Setup camera and Easytok
; -------------------------------------
Global Cam=CreateCamera()
PositionEntity Cam,0,20,-40

Proc_CreateVisor()

TOK_InitWorld(0,-40,0,1000,100)
TOK_CreateGround("Floor",150,255,150,10)
	TOK_ApplyMaterial("Floor",TOK_TypeAnimBody%,"Plastic")

; -----------------------------
; Creating demo world
; -----------------------------
Global Light1=CreateLight(2)
PositionEntity Light1,-50,50,-50
LightColor Light1,250,150,50
LightRange Light1,100

Global Light2=CreateLight(2)
PositionEntity Light2,50,50,50
LightColor Light2,50,150,250
LightRange Light2,100

AmbientLight 80,90,100

Global Angle#

TOK_CreateRBSphere("Toto2",False,10,40,Rnd(-10,10),0,0,0,2,10,"",255,255,255,1,20)


TOK_EntityType("Floor",1)
TOK_EntityType("Toto2",2)
EntityRadius TOK_GetRBMesh ("Toto2"),5

Collisions 2,1,2,3



; -------------
; Main loop
; -------------
FramePeriod = 1000 / AppFPS
FrameTime = MilliSecs () - FramePeriod
MoveMouse GraphicsWidth()/2, GraphicsHeight()/2

Repeat
	; --------------------------
	; Frame rate limiting
	; --------------------------
	Repeat
		FrameElapsed = MilliSecs () - FrameTime
	Until FrameElapsed

	FrameTicks = FrameElapsed / FramePeriod
	FrameTween# = Float (FrameElapsed Mod FramePeriod) / Float (FramePeriod)

	; -----------------------
	; Update tweening
	; -----------------------
	For FrameLimit = 1 To FrameTicks
		If FrameLimit = FrameTicks Then
			CaptureWorld
		EndIf

		FrameTime = FrameTime + FramePeriod
		
		UpdateGame ()
		UpdateWorld
	Next

	; -------------------
	; Redraw world
	; -------------------
	TOK_RefreshEasyTOK()
	RenderWorld FrameTween
	
	; -----------------------
	; FPS Displaying
	; -----------------------
	Proc_CinemaStrip()
	Color 255,255,255
	Information$="&lt;"+Get_FPS()+" FPS&gt; / "+"&lt;Arrow key to move&gt; / &lt;Mouse left to launch objects&gt;"
	Text GraphicsWidth()/2,GraphicsHeight()-30,Information$,True,True
	Flip
Until KeyHit (1)

; -----------
; End App
; -----------
TOK_FreePhysic()
FreeFont  AppFont
End

; -----------------------------------
; Tweening update function
; -----------------------------------
Function UpdateGame ()
	Proc_Freelook(Cam,1.05,0.05)

	; -----------------------------------------
	; Launch a cube and a sphere
	; -----------------------------------------
;	If MouseHit(1) Then
;		TOK_CreateRBCube("Toto1",False,Rnd(-10,10),40,Rnd(-10,10),0,0,0,2,2,2,6,"",255,255,1,1,20)
;	EndIf
	

	; ------------------------------------------
	; Apply impulse to ALL objects
	; ------------------------------------------
	If MouseHit(2) Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(255,265),Rnd(-5,5))
	EndIf


;	If MouseDown(1) Then
;		Proc_CameraPick(Cam)
;	EndIf

	count = CountCollisions (TOK_GetABMesh ("Floor"))

	If count&gt;0 Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(55,65),Rnd(-5,5))
	EndIf 

	
	TOK_RefreshPhysic(1.7/AppFPS,10)
End Function

; -----------------------
; Create the visor
; -----------------------
Function Proc_CreateVisor()
	Visor=LoadSprite("./ETOK_Medias/Target.png")
	PositionEntity Visor,EntityX(Cam),EntityY(Cam),EntityZ(Cam)+2
	ScaleSprite Visor,0.1,0.1
	EntityParent Visor,Cam
	EntityOrder Visor,-1
End Function

; ----------------------------------
; Create the cinema strip
; ----------------------------------
Function Proc_CinemaStrip(Size=60)
	Color 1,1,1
	Rect 0,0,GraphicsWidth(),Size
	Rect 0,GraphicsHeight()-Size,GraphicsWidth(),Size
End Function

; ----------------------
; Camera freelook
; ----------------------
Function Proc_Freelook(CamEntity,Velocity#,Speed#)
	Mouse_X_Speed#=MouseXSpeed()*0.5
	Mouse_Y_Speed#=MouseYSpeed()*0.5

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Camera_Pitch=Camera_Pitch+Mouse_Y_Speed#
	Camera_Yaw=Camera_Yaw+Mouse_X_Speed#

	RotateEntity CamEntity,Camera_Pitch,-Camera_Yaw,0

	If KeyDown(203) Then
		Camera_VelX=Camera_VelX-Speed#
	ElseIf  KeyDown(205)
		Camera_VelX=Camera_VelX+Speed#
	EndIf
	
	If KeyDown(208) Then
		Camera_VelZ=Camera_VelZ-Speed#
	ElseIf  KeyDown(200)
		Camera_VelZ=Camera_VelZ+Speed#
	EndIf
 
	Camera_VelX=Camera_VelX/velocity#
	Camera_VelZ=Camera_VelZ/velocity#
	MoveEntity CamEntity,Camera_VelX,0,Camera_VelZ

	If KeyDown(200) Then
		MoveEntity CamEntity,0,0,Speed#
	EndIf

	If KeyDown(208) Then
		MoveEntity CamEntity,0,0,-Speed#
	EndIf

	If KeyDown(205) Then
		MoveEntity CamEntity,Speed#,0,0
	EndIf

	If KeyDown(203) Then
		MoveEntity CamEntity,-Speed#,0,0
	EndIf
End Function

Function Proc_CameraPick(Camera)
	Local PEntity = 0 : CameraPick(Camera,GraphicsWidth()/2,GraphicsHeight()/2)
	PickedEntityID = PickedEntity()
	
	If PickedEntityID&lt;&gt;0

	DebugLog "pickeed"
		If TOK_IsRigidBody(PickedEntityID)=True Then
			Tmp_Name$=TOK_GetRBName$(PickedEntityID)
			
			TOK_EntityAlpha(Tmp_Name$,0.5)
			TOK_ApplyImpulse(Tmp_Name$,0,PickedNY#()*30,0)
			TOK_ApplyTwist(Tmp_Name$,0,60,0)
		EndIf 
	EndIf
End Function
</textarea> <br><br></td></tr></table><br>
<a name="652374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#104">[#104]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax,<br><br>there IS a problem, use your example but comment out this<br><br><pre class=code>
	If count&gt;0 Then
		TOK_ApplyImpulse("",Rnd(-5,5),Rnd(55,65),Rnd(-5,5))
	EndIf 
</pre><br><br>Watch the ball!!!1 <br><br></td></tr></table><br>
<a name="652392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Blitzplotter</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#105">[#105]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax, I am impressed with the level of support you are giving your product within this forum.  It looks like a well structured app, keep up the good work..... <br><br></td></tr></table><br>
<a name="652398"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#106">[#106]</a></td></tr></table></td></tr><tr ><td class="posttext"> Filax is the best! <br><br></td></tr></table><br>
<a name="652478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#107">[#107]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitzplotter : Thanks :) Make my possible :)<br><br>Boiled Sweets : I have commment this line but ?? what can i see ?<br><br>The ball touch the floor,bounce a little bit and ? nothing ?<br><br>What is the problem ? <br><br></td></tr></table><br>
<a name="652554"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#108">[#108]</a></td></tr></table></td></tr><tr ><td class="posttext"> The ball lands as expected then you can see it jumps between the ground and about 1 unit about the ground in a horrible type flicker. <br><br></td></tr></table><br>
<a name="652567"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#109">[#109]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok so its not the code as it doesn't happen to you so it must something else.<br><br>my tokamakwrapper.dll is dated 6/10/2005<br>and tokamak.dll is 01/08/2005<br><br>I wonder why this is happending? <br><br></td></tr></table><br>
<a name="652588"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#110">[#110]</a></td></tr></table></td></tr><tr ><td class="posttext"> You think that my wrapper + dll version is bad ? <br><br></td></tr></table><br>
<a name="652600"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#111">[#111]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well no - yours works it would appear.  What dates are yours?<br><br>Don't you think it odd that the same code works on your pc but doesn't on mine?<br><br>Its a worry as its holding up my development... <br><br></td></tr></table><br>
<a name="652907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#112">[#112]</a></td></tr></table></td></tr><tr ><td class="posttext"> When i do PROPERTIES on the two DLL i can see DLL version :<br><br>I can only give you size :<br><br>296 KB (303 104 bytes) Tokamakdll.dll<br>88,0 KB (90 112 bytes) Tokamakwrapper.dll<br><br>From the first release of EasyTOK, i have not updated<br>tokamak dll or wrapper. Your ball bounce problem is<br>really strange because i don't see it ?? <br><br></td></tr></table><br>
<a name="652922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#113">[#113]</a></td></tr></table></td></tr><tr ><td class="posttext"> Any other ideas?  Im runing Blitz 1.96 <br><br></td></tr></table><br>
<a name="653369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#114">[#114]</a></td></tr></table></td></tr><tr ><td class="posttext"> Absolutly not ??? I will try on other computers. <br><br></td></tr></table><br>
<a name="653424"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Boiled Sweets</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#115">[#115]</a></td></tr></table></td></tr><tr ><td class="posttext"> Will there be an easytok for BlitzMax. <br><br></td></tr></table><br>
<a name="684694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#116">[#116]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course ! :)<br><br>EasyTOK updated :)<br><br>I have made a new example :) with bombs :) it's funny<br>try it :)<br><br>PS : Some user's email adress have changed ! <br><br><a href="http://www.blitz3dfr.com/phpfrench/request.php?31" target="_blank">http://www.blitz3dfr.com/phpfrench/request.php?31</a><br><br>Beginning - Explode 01.exe<br><br><img src="http://www.blitz3dfr.com/easytok_projet/EasyTOK_03.jpg"> <br><br></td></tr></table><br>
<a name="685968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sini</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#117">[#117]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Filax,<br><br>I have the same problem since 7 months and that continue with the last update (1.3)... I have send you a mail for that in january.<br><br>thx <br><br></td></tr></table><br>
<a name="685986"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#118">[#118]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just incase people are wondering...<br><br>I have just installed the latest versions of this and it works fantabulously well!  <br><br>IPete2. <br><br></td></tr></table><br>
<a name="686124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Filax</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#119">[#119]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many any user's change their email without say me !<br><br>Sini  : send me an email with your full name , i'll send to you.<br><br>IPete2 : The next upgrade will have grenade ;)<br><br>The bomb will be integrated directly under TerraEd with some<br>new stuff like your hown mesh etc ...<br><br>If i have the time (Filax need holidays...) i'll try to make<br>a little level with physic objects + grenade and bomb :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
