<!DOCTYPE html><html lang="en" ><head ><title >Building a TCP library, advice appreciated</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Building a TCP library, advice appreciated</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Building a TCP library, advice appreciated</a><br><br>
<a name="604724"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all, I've been looking over the TCP command set and it looks pretty straight forward.  I was just curious about handling the data coming over an active stream.   Seeing as the docs show reading the stream until Eof(StreamHandle) returns true, what's the best method for identifying what data type to poll off it.   I was thinking sending a short to flag each segment in the stream would work, but I'm not very knowledgable of networking so here I am.<br><br>Any other stuff I should be aware of before diving in? <br><br></td></tr></table><br>
<a name="604931"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> A few things to keep in mind when dealing with the TCP streams in Blitz.<br><br>A.  Data keeps coming in!  As long as the client keeps sending data, the stream will keep filling.  Sending just an int or a Short a few at a time will not arrive as such, it will pile up on the other side.  If latency is high, only a bit (if that) will get there in decent time.<br><br>Best way to manage this is before sending data over TCP is to send a short indicating how many bytes you will be sending.  That way, on the recieving end, you can just monitor the stream for a readavail of &gt;=2.  When its &gt;=2 then read in the short.  This short tells how many bytes should be coming in.  Just keep doing a readavail until it gets to the size your expecting, then read it all out in one chunk into a bank and send the bank for processing.<br><br>Another way is to do a 'Cell', where each bit of info you send over the TCP is of a certain size.  If you dont have enough data to meet the size, then just fill the remainder with 0's.  The advantage to Cell is you can anticipate a certain size of datagram.  This way you can just keep streaming data.<br><br>The advantage to short (size) first is that you can vary (optimize) the type and amount of data sent to the host (or client).<br><br>How is that for ideas? <br><br></td></tr></table><br>
<a name="604933"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey DarkHalf, been a while :).   What's your MSN we can chat again. <br><br></td></tr></table><br>
<a name="604964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DH</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> master_prompt&lt;at symbol&gt;hotmail.com <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
