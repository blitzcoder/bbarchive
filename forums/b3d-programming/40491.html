<!DOCTYPE html><html lang="en" ><head ><title >Question about single surface particles</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Question about single surface particles</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Question about single surface particles</a><br><br>
<a name="454810"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I have coded a simple particle system for something I'm working on. I want to create some fire using emitters and to make it look more realistic I need to add some smoke. I was wondering how I should do this.<br><br>I tried creating separate meshes, one for fire and one for smoke. The fire was set to "add" mode and the smoke used the normal blend mode. The problem is that it doesn't work properly and the colour of the entire surface used for the fire is affected. Would using two separate surfaces from the same mesh solve this? I have seen screenshots from the leading particles systems for Blitz and they seem to manage to blend smoke and fire together properly. <br><br></td></tr></table><br>
<a name="454825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Some approaches have each emittor being a different mesh altogether, so each can have their own fx properties. <br><br></td></tr></table><br>
<a name="454861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> As I said in the first post, I already tried using separate meshes.<br><br>Something I didn't mention before is that I'm using vertex alpha on both the smoke and the fire. <br><br></td></tr></table><br>
<a name="455183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> *BUMP* <br><br></td></tr></table><br>
<a name="455191"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your question doesn't make any sense.<br><br>1. You created seperate meshes for fire and smoke.<br>2. The fire was set to add.<br>3. The smoke was left in the normal blending mode.<br>4. You use vertex alpha to adjust transparency of the particles.<br>5. The color of the entire fire surface is affected?<br><br>Affected by what?  Affected how?  That doesn't make any sense. <br><br></td></tr></table><br>
<a name="455192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I mean that when I added the smoke emitter, it made every single quad of the fire mesh darker, even those that were unobscured by quads from the smoke mesh. Removing the smoke emitter immediately made all of the fire particles bright again. <br><br></td></tr></table><br>
<a name="455193"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait I think I know what you are asking...<br><br>I think you are saying that the smoke and fire particles are intermixed...  That is, they occupy the same space.  Some smoke particles are behind some fire particles, and some fire particles are in front of some smoke particles.<br><br>But you are seeing only smoke in front of fire, or fire in front of smoke regardless of where the particles are in space...  The particles aren't drawing in the order you expeect them to be.<br><br>Making these two sets of particles different surfaces in the same mesh won't solve your problem.  In fact it will make it worse because then even if the fire is really far behind the smoke it will still draw in front of it.   At least with the fire being in a seperate entity, you get... eh I'll invent a new term... "macro-sorting" right.<br><br>"micro-sorting" the particles amongst themselves (another new term I just invented) is unfortunately, not possible in a single surface particle system.  You can sort smoke particles with other smoke particles so long as they are part of the same mesh, but you can't intermix smoke and fire particles.<br><br>The particle system I used to sell avoided this issue entirely by just making each particle a seperate entity.  The screenshots you have seen that mix particles, if they are from stuff made in Blitz, probably used a similar method.  Unfortunately, one entity per particle means one surface per particle, and that comes at a much bigger speed penalty per particle than a single surface particle system.  Of course it does allow you to use 3D particles which can look better than 2D particles in some cases. <br><br></td></tr></table><br>
<a name="455195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I mean that when I added the smoke emitter, it made every single quad of the fire mesh darker, even those that were unobscured by quads from the smoke mesh."<br><br>Um... well that doesn't sound at all like what I just described.<br><br>Reboot your PC.  Then look for bugs in your code.  Ceating a second mesh and then changing it's properties should not affect the appearance of the fire mesh at all other than when it's being drawn on the screen on top of it.<br><br>If you post some simple code that demonstrates the problem, then maybe we can find the problem.  Otherwise I don't think  we can help you.<br><br>Um.... are you sure your smoke particle quads aren't overlapping the fire mesh at all?  Have you tried toggling wireframe mode while this is going on? <br><br></td></tr></table><br>
<a name="455198"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess I could post the code, but there is quite a lot of it and most of it is completely unoptimised.<br><br>Or perhaps a screenshot might illustrate the problem better? <br><br></td></tr></table><br>
<a name="455203"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you can try a screenshot, but I think the code would be better. <br><br></td></tr></table><br>
<a name="455351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JKP</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, sorry I was a bit vague with my descriptions. Anyway, I've experimented a bit and it seems that if I create two emitters in the same position but at different times, the particles from the second emitter appear in front of the other emitter's particles.<br><br>Screenshot:<br><br><img src="http://www.geocities.com/jkp2505/fire.JPG"><br><br><img src="http://www.geocities.com/jkp2505/smoke.JPG"> <br><br>Shows the effect of creating the emitters in a different order. In the second screenshot the fire is almost completely obscured. <br><br></td></tr></table><br>
<a name="455415"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well then that's the effect I said would occur with a single surface particle system.<br><br>You're pretty much stuck with that unless you go with a particle system where each particle is an individual entity.<br><br>Of course, there is nothing preventing you from making a hybrid system so you can use regular particles in these special cases and a single surface system for the rest of your effects. <br><br></td></tr></table><br>
<a name="455486"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> You might find the fire particles texture, changes into a smoke texture after it reaches a certain distance from the emittor, giving the impression of two emittors. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
