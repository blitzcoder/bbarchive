<!DOCTYPE html><html lang="en" ><head ><title >Place meshes on terrain</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Place meshes on terrain</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Place meshes on terrain</a><br><br>
<a name="501413"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paulo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>Can anyone help with this please?  I want to place trees on my terrain map (generated via an image map) and I wondered if I could place them via an image map as well.  I had it in mind to make a map that had a specific coloured pixel representing a tree and read that image back in and use the coordinates to place the trees. <br><br>But I have no idea how to tackle converting the pixel data from an image in to PositionEntity tree,x,y,z and it seemed that even if I can get the X,Z, the Y might be more difficult.  Any tips would be greatly appreicated.<br><br>Cheers,<br>Paulo <br><br></td></tr></table><br>
<a name="501419"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Damien Sturdy</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Y=terrainy() ;)<br><br>Sorry mate i wont be around later to help, Just remember that your moving fireball problem is just a visual effect, its not actually happening.<br><br>now,You know how large the map you used to create the terrain is:<br><br>make your tree map the same size.<br>You also know how much you scaled the terrain.<br><br>So, load in the tree image, read through it, and when you find a tree<br><br><pre class=code>
treex=pixelX*terrainScaleX
treez=pixely*terrainScaleZ

Treey=Terrainy(treex,treez); (well, i dont remember this command but this is close...)
</pre><br><br><br>Cheers <br><br></td></tr></table><br>
<a name="501427"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paulo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> nice one buddy, I get the TerrainY bit :) I'll see what I can do, but I can't get me head round...<br><br>load in the tree image, (thats easy enough) - read through it... this bit I dont get, how to read through and get the correct pixel data. :| <br><br><br>Thats cool about the fireball!!   damn weird effect tho.<br><br>cya soon <br><br></td></tr></table><br>
<a name="501435"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'd recommend having the heightmap / object data on the same image ... the red rgb is used for terrain heightmap so you could use the blue rgb value for the objects.<br><br>Say you had 10 objects.  <br><br>Object1 , blue = 0<br>Object2 , blue = 25<br>etc....<br><br>Then you would colour that pixel based on it's height ( red ) and object ( blue )<br><br>So if the pixel was Color 255, 50,0 it would be object type 3 at the highest possible landheight.<br><br>To retreive the object data it's a simple case of checking the blue value in each pixel ...<br><br>e.g. Like this ...<br><br>Objectindex = Floor( ColorBlue() / 25 )<br><br>Select ObjectIndex<br>case 0 DoTree()<br>case 1 DoBuilding()<br>end select<br><br>etc.... <br><br></td></tr></table><br>
<a name="501445"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paulo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> aye thanks Steve, agreed I would also prefer it on one map, I think I understand you, hopefully I can sort this out :)<br>Thanks again. <br><br></td></tr></table><br>
<a name="501581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Paulo, you need something like:<br><pre class=code>
For x = 0 to &lt;bitmap width&gt;-1
 For y = 0 to &lt;bitmap height&gt;-1
  LockBuffer TextureBuffer(bitmap handle)
  rgb = ReadPixelFast(x,y,TextureBuffer(bitmap handle))
  UnlockBuffer TextureBuffer(bitmap handle)
  nClrR = rgb Shr 16 And %11111111
  nClrG = rgb Shr 8 And %11111111
  nClrB = rgb And %11111111
  If nClrG=255
   MakeTreeAt(x,y)
  Endif
 Next
Next
</pre><br>I'd make the bitmap separate from the others (not an alpha channel), so it's easier to change.<br>Make it black and spray it green (rgb=0,255,0) where you want trees.<br>Whenever a green pixel is found the coords will be sent to the MakeTreeAt() routine. <br><br></td></tr></table><br>
<a name="501881"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paulo</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow thanks John, thats really good of you!! :) I was still struggling with this!.  Thanks again. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
