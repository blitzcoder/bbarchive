<!DOCTYPE html><html lang="en" ><head ><title >Problems with Angles.  Math/Pro/Maya guru's needed</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Problems with Angles.  Math/Pro/Maya guru's needed</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Problems with Angles.  Math/Pro/Maya guru's needed</a><br><br>
<a name="820418"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Ive been running into problems with getting usable angle data from maya.  I am exporting models from maya in .obj format, and importing them into blitz.  See the screen shot below for reference.  First off all axis work individually.  For example rotating in only X,  or only Y, or only Z within blitz matches the angles in maya perfectly.  I do however, have to always negate the X value so X is always -X.  As you can see in the picture the entire left side is individually manipulated axis rotations(the black background part is from blitz).  These are all in orthographic front view for easy of accurate viewing.<br><br>If I rotate in both X and Y these values seem consistent.  However combing either X and Z, Y and Z, or X Y and Z proves to be difficult.  The angles get all out of whack and honestly make no sense.  I cant even really get a relationship value between them.<br><br>Does anyone have any ideas on how I can get these values to match within a couple of degrees between both applications?<br><br><img src="http://205.234.98.59/~vertigo/temp/angles.jpg"><br><br>Thanks! <br><br></td></tr></table><br>
<a name="820434"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks to me that the order of the angles is different in Blitz.<br><br>Rotateentity can introduce singularities such as gimbal lock.  You could try playing with turnentity ( uses quarternions internally ) by turning the axis' separately  in different orders <br><br>e.g. <br><br>Turnentity Pitch, 0,0<br>Turnentity 0, Yaw, 0<br>Turnentity 0,0,Roll<br><br>or <br><br>Turnentity 0, Yaw, 0<br>Turnentity 0,0,Roll<br>Turnentity Pitch, 0,0<br><br>Etc....<br><br><br>Instead of ...<br><br>Rotateentity Pitch, Yaw, Roll <br><br></td></tr></table><br>
<a name="820488"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I will try and give that a shot, thats stevie.  But Id really like to be able to fix this with math inside of a MEL script for maya before it even hits blitz.  Any ideas? <br><br></td></tr></table><br>
<a name="820494"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not really sure what's going on here TBH, but it looks like the Z axis direction is reversed, or something. You may be able to fix this using the LoaderMatrix command - not sure... <br><br></td></tr></table><br>
<a name="820503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there something similar to LoaderMatrix for meshes that were created manually?  Again im importing .obj files here and building them manually.  Also it would be nice to fix this on the maya end.  I can swap x,y,z order, and negate through script.  Its just proving to be near impossible to find the relationship between the two axis. <br><br></td></tr></table><br>
<a name="820530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> If the LoaderMatrix command does fix the problem, you should then be able to use the loaded meshes 'manually' as normal. <br><br></td></tr></table><br>
<a name="820579"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> The LoaderMatrix command is used against all objects loaded using the loadmesh() command correct?  How would this be used to change the matrix coord system for an object made using createmesh()?<br><br>Basically I think it comes down to the simple fact that blitz uses a direct x Left handed coordinate system, while maya uses a more standard right handed coordinate system.<br><br>Does anyone have any ideas on how I can find the relationship between the two? And a formula to solve them equally?<br><br>Stevie's idea about using turn entity instead of rotate entity did seem to solve the loose ends.. ie instead of 0 = 0, 0 would = -3.229384534E03 values on axis that were not being manipulated.  But regardless, it still has the same effect,  All axis work individually if X is negated, but combining values in more than one axis at a time(besides X + Y for some reason) it will produce off results.<br><br>Still banging head on keyboard over here... Google doesnt seem to be that much of a helper either.<br><br>Thanks. <br><br></td></tr></table><br>
<a name="820653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warning, my entire knowledge of Maya comes from staring at angles.jpg!<br><br>Maya coordinate axes seem to be:<br><br>X+ is to the right.<br>Y+ is up.<br>Z+ is out of the screen, toward the viewer.<br><br>Blitz3D reverses the Z axis, so Z+ is away from the viewer.<br><br>Maya rotations appear always to be around the GLOBAL coordinate system.<br><br>In Maya, if a turn around X is followed by a turn around Y then the second turn is around the vertical axis.<br><br>Blitz3D, by default, uses the local coordinate system. RotateEntity and TurnEntity have a global flag which defaults to False. After a turn around X the entity Y-axis is no longer vertical. The second turn is around the new ( moved ) Y-axis. <br><br>The Blitz3D rotation order is yaw then pitch then roll. If you need some other order then do a sequence of three simple turns. <br><br></td></tr></table><br>
<a name="820675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Danny</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't expect this to be helpfull, and not even 100% sure this is correct (reading from very old crappy code);<br>But I've been converting Blitz Camera Angles to Maya instead. By doing this:<br><br>Pitch = the same<br>Yaw = Yaw * -1<br>Roll = the same<br><br>And export them to Maya (via MEL) in the same order of Pitch-Yaw-Roll -BUT- MOST importantly I HAD to change the 'rotation order' IN MAYA for it to transform correctly (matching Blitz), using this on a transformation node:<br><pre class=code>setAttr ".ro" 2;</pre><br>I can't remember (or check right now) what rotation order '2' was in Maya (I'm guessinng it sets YXZ in stead of the default XYZ)) - but it will be the 2nd in the list if you check the rotation-order pull down menu in the transformation node in maya.<br><br>Perhaps you can apply this 'in reverse' to solve your problem?! I'm no maya expert, figured this out by trial &amp; error (lots of it)..<br><br>Sub note: In order to convert a Blitz Camera Zoom factor to a Maya, multiply that Blitz Zoom Factor by 22.6730499 and poke that in the Maya camera's FocalLenght..<br><br>Hope that helps,<br>D. <br><br></td></tr></table><br>
<a name="820747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just parent your mesh to a standard blitz pivot and manipulate the pivot instead. <br><br></td></tr></table><br>
<a name="820789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hujiklo, I tried that a while ago with the same effect.  Also I really need to have this fixed on the maya end using mel script.  Just need to know the relationship between the two.  I need to try what floyd and danny stated though. <br><br></td></tr></table><br>
<a name="820816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay - try 3 pivots (each parented to the previous - except for the first of course) and your mesh parented to the last pivot, and only turn each pivot on one axis at a time.<br><br>I'll be honest - I'm up to my eyeballs in little awkward work-arounds and have found pivots to be a prime source of bacon-saving. <br><br></td></tr></table><br>
<a name="820860"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hujiklo you crazy son of a b***h... that worked!!!!!!!!!!!!!!!!!!<br><br><pre class=code>

pivx = CreatePivot()
pivy = CreatePivot()
pivz = CreatePivot()

EntityParent pivy,pivx
EntityParent pivz,pivy
EntityParent box, pivz

TurnEntity pivy, -X#,0,0,True
TurnEntity pivx, 0,Y#,0,True
TurnEntity pivz, 0,0,Z#,True

</pre><br><br>How on earth.. I mean.. wow... thats nutz...   very good to know if anyone is interested in getting external values from specific modelling applications!<br><br>Now all I need to do is make my mel script export from maya open a temp file, and send that temp file to a blitz exe converter to export out those rotational values in blitz... all the while changing nothing in either the blitz code or maya.<br><br>AWESOME!!!!!!!!!!!!!!!!!!!!!!!!!!!<br><br>haha, thanks guys! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
