<!DOCTYPE html><html lang="en" ><head ><title >Can someone refresh me on indexing surfaces please</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Can someone refresh me on indexing surfaces please</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Can someone refresh me on indexing surfaces please</a><br><br>
<a name="937608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Before people post - please take into account:<br><br>Blitz3D has had long-standing issues with the order that surfaces are located in memory.  So unless you know about the 'order issues' then you probably cannot help.<br><br>I can already quite happily resolve this issue by loading a multi-object mesh via LoadAnimMesh.  I can re-texture this on-the-fly by securing the surfaces via ChildMesh.  I have no 'surface order issues' with this method.<br><br><br>What I want to do is to use a multi-object mesh that has been collapsed into a single mesh hierarchy - material names are in the mesh, so no problems there with regard to identifying surfaces.   Once loaded into Blitz3D, I then want to be able to change the textures as and when I like to create multiple textured versions of the mesh.<br><br>NOTE:  Anyone can paint the surfaces - the goal is to be able to do this, taking into account the 'surface order issues' when you re-run the program again (such as on another computer) in which case the order that the surfaces are stored in memory may have changed.<br><br>NOTE: I don't want a solution that involves re-saving the mesh out of Blitz3D.<br><br><br>I hope I made that clear enough.<br><br>I must be close to resolving it, but just missing or not remembering something.  It's possible I achieved this before using a lib - maybe a "halo"/"jfk" one - not sure - possibly my multi-mesh resolution made me forget the single-mesh solution. <br><br></td></tr></table><br>
<a name="937618"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>Don't bother, just acquire someone else's ;o)<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="937621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you not use GetBrushTexture()/TextureName() and allocate useful texture names (possibly with flags)? <br><br></td></tr></table><br>
<a name="937624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I can access the texture names; however, I am unclear as how to write them back to the surfaces whenever I like.  Baring in mind that I need to be able to do this on different computers - ie the 'surface order issue'.<br><br>I understand that TextureName$ will return a 'static' texture name and that it will also (technically) relate to a surface; however, how do I access that particular surface and know it is the same surface again and again? <br><br></td></tr></table><br>
<a name="937626"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, bare in mind I will be using different textures to the ones that the surfaces expect to be using.  I will be using my own pool of textures. <br><br></td></tr></table><br>
<a name="937628"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Doing this with a multi-object mesh, that is loaded via LoadAnimMesh, is as easy as:<br><br>child=FindChild(mesh,"whatever")<br>surface=GetSurface(child,1)<br><br>Blitz3D has no problems in handing the surface over via this method.  This is transferrable and does not suffer the 'surface order issue'.<br><br>I just seem to be stumbling with a single object mesh, which is a collapsed hierarchy mesh, loaded via LoadMesh. <br><br></td></tr></table><br>
<a name="937632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having said all that.  Of course, Blitz3D automatically creates its own brushes and brush textures from a mesh.  I assume that I should be going down the route of intercepting the autobrushes and the corresponding auto brush textures.<br><br>I shall dig deeper. <br><br></td></tr></table><br>
<a name="937637"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just keep a link between the surface, brush and texture name.<br>Type SurfTex<br>Field surf<br>Field texname$<br>;Field brush<br>End Type<br><br>Remember to free them when you are finished (GetBrushTexture, GetSurfaceBrush, GetEntityBrush create new copies). <br><br></td></tr></table><br>
<a name="937640"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> My brain is starting to remember this now - I think.<br><br>Your type example has led my brain back to creating arrays for the surfaces, brushes and textures - then, when you have the texture you want to replace, you just make sure that it's index is the same as the surface at that point in time.<br><br>I think I should be able to get this to work. <br><br></td></tr></table><br>
<a name="937813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> You only have to identify the surfaces. Once you got them, you can use paintsurface with individually created brushes.<br><br>To gather all settings of a surface (to be able to reuse settings like Brushalpha, Blendmode or FX aso. and not to force some sort of default settings whenever the texture is replaced) the blitz3d command set alone is not enough, you gotta hack some values. You probably best take the B3D exporter code that I used to release (the latest one), it uses several tricks to find out as much as possible about the surfaces of a mesh, including texture flags etc. Instead of simply saving a mesh you may of course alter the settings, textures etc. before you save it. Note dds ist't really supported since you cannot access the texturebuffer of dds. <br><br></td></tr></table><br>
<a name="937820"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I sorted it all out - I was trying to remember the link to the surfaces.  Having sorted it all out, I decided I didn't need it for what I was doing.<br><br>Still, it is handy to know. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
