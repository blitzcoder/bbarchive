<!DOCTYPE html><html lang="en" ><head ><title >help needed with animating texture</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >help needed with animating texture</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >help needed with animating texture</a><br><br>
<a name="213478"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knotz</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>I got a problem with a entity with an animating texture.<br><br>I've made a strip of 156 images(128x236 px) to be used as an animated texture. Added the texture to a mesh and started animating it. To my horror I saw the available vidram racing to zero.<br><br>Since I only want loop the animation once I was wondering if there is some more vidram friendly way to animate a texture to a (simple) mesh?<br><br>Thanks in advance<br><br>Steven Manschot <br><br></td></tr></table><br>
<a name="213540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >DarkEagle</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> thats odd. how big is the texture you are loading? also, can we see the code? i have a funny feeling you may be loading the texture each loop? <br><br></td></tr></table><br>
<a name="213580"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok.. time to show off my bad maths.. 128x236 will get rounded up to 128x256 by the video card. And each one of those frames will take up 96k. So that's about 15Mb of textures. If you've only got a 16 meg video card, I guess that would do it. <br><br></td></tr></table><br>
<a name="213652"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knotz</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for my ignorance but,<br>instead of replacing the current texture buffer with a new frame, every call to EntityTexture( ent, tex, frame ) creates a new texture or does<br>LoadAnimTexture load in the whole strip in vidram?<br><br>A better solution, at least for me, could be if i just create a texture with the right size and then copyrect each frame to the  textures' buffer.<br><br><br>Steven <br><br></td></tr></table><br>
<a name="213656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Anthony Flack</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It should load it all into vidRAM, however some gfxcards will store it in system RAM if it's currently not on-screen (I think!)<br><br>Maybe, this effect is being caused by the frames being copied one-by-one into vidRAM as you display them? (just a wild guess...) <br><br></td></tr></table><br>
<a name="213659"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knotz</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm trying using CopyRect to fill the textures buffer, but all i get is a block square....|-[<br><br>[update] got the parameters wrong, now i i see nothing!<br><br>[update] got it working! <br>1) use two textures, one to show and another to store the animated texture (i use textures with alpha channels)<br>2) on each new frame lock both texture buffers and readpixelfast/writepixelfast the current frame to the shown texture. voila. <br><br></td></tr></table><br>
<a name="213816"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think that Blitz may copy the texture into VidRAM only when it's used, and then would use the same video memory spot again and again. That would explain why your memory "raced" to zero, rather than already being AT zero when the program started..<br><br>Stevenm, perhaps holding the "not shown" textures in ImageBuffers might work even better. Not sure for certain, but try it out. ReadPixelFast/WritePixelFast at runtime for animations sounds a bit slow though if you ask me... <br><br></td></tr></table><br>
<a name="213876"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Knotz</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> cyberseth:I changed from readpixelfast/writepixelfast to copypixelfast, and as the names says it's pretty fast. At least fast enough. I'm not using imagebuffers because i did get problems with the alpha transparency not working. <br><br>Anyway it's implemented now and it works. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
