<!DOCTYPE html><html lang="en" ><head ><title >Unreliable Linepick</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unreliable Linepick</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Unreliable Linepick</a><br><br>
<a name="422302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Below is the code I'm using for my gun linepick. Linepick is proving everybit as unreliable as Blitz3d moving collisions in that it works on a whim...well it works about 90% of the time but what's the point if it's not 100% of the time?<br>Can somebody please tell me what I'm doing wrong here?<br>I thought line picking was pretty straight forward and reliable.<br>My zombies are type copies and are set to be poly picked (sphere doesn't work at all, box is about 10% accurate)  - even the poly picking is crap in that I can very often just shoot near the enemies and hit them, and then if they crouch or crawl the hit rate drops to about 50/50. What on Earth is going on here? It's certainly ignoring their poly's that's for sure. Can anybody please shed light on this problem.<br>I've tried setting the pick radius from default right through to 1 metre...<br>Anybody any ideas please?<br><br>If MouseHit (1) Then <br>	TFormVector 0,0,100000,dummy_player,0 <br>	If weapontype=1<br>	gunhit=LinePick (EntityX(dummy_player,True),EntityY(dummy_player,True),EntityZ(dummy_player,True),TFormedX(),TFormedY(),TFormedZ(),0.05)<br>	recoilgun#=0.01<br>	lx#=PickedX# ly#=PickedY# lz#=PickedZ#<br><br>    hitsprite(lx#,ly#,lz#)<br>	EndIf <br>EndIf <br><br></td></tr></table><br>
<a name="422306"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What's wrong with entitypick? <br><br></td></tr></table><br>
<a name="422309"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh by the way - the lx#,ly#,lz# globals always return 0....except at startup or some reason<br><br>????? :( <br><br></td></tr></table><br>
<a name="422310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You need to put the brackets on the end:<br>lx#=PickedX()<br>ly#=PickedY()<br>lz#=PickedZ()<br><br>Commands (and functions) only return values if they have brackets on the end.  You don't need to use them otherwise. <br><br></td></tr></table><br>
<a name="422316"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, seriously, what's wrong with entitypick? Why go to the trouble of transforming vectors for a linepick... there must be some advantage and I'm interested. <br><br></td></tr></table><br>
<a name="422318"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for that tip Beaker - it wasn't my main worry though.<br>I think I've found out why it's all to pot - the problem only occurs if the zombies are crawling or crouching, yet if i shoot over their heads it registers a hit and they recoil!! It seems as if Blitz entitypickmode(poly setting) only uses the first frame from an anim mesh - it is picking the invisible first frame accurately yet ignoring the actual crouching or crawling zombie....sigh can anybody help me find an actual solution to this? Has anybody else come across this with anim meshes before? <br><br></td></tr></table><br>
<a name="422319"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh sorry sledge - I meant to answer. As far as I can see with line pick I can alter the radius of the pick which could prove handy...I just tried entity pick and it does work but only with the same results - i.e. it ignores the crouch poses etc. and will only pick the original stand frame polys...sigh.... <br><br></td></tr></table><br>
<a name="422320"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maintain primitive collision entities for each zombie and a look-up for where they should be for each frame? <br><br></td></tr></table><br>
<a name="422325"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You may be right there Sledge - but it would be nice if blitz just did what it says on the box...I've been up all night again chasing my tail - this is beginning to get so frustrating - I can't realistically expect to make a decent fps if I cannot get the basics to function correctly in the first place....another worn out sigh... <br><br></td></tr></table><br>
<a name="422342"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zenith</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What kind of model is it? md2?<br><br>If so, MD2 does not have polygonal picking, it uses the collision sphere <br><br></td></tr></table><br>
<a name="422345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah regular .b3d models work properly as far as I know. <br><br></td></tr></table><br>
<a name="422382"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried linepick and camerapick on animated 3ds models and in poly mode, it simply did not work. Always returned 0. Switched to elliptical pick mode and it works but in a weird way. Set the entity radius too low, and you get nothing, just zeros. Increase it a bit, and you register a hit even when you missed so long as your aim is somewhere close.<br><br>Is there any help for this? Is accurate shooting of animated enemies possible in blitz3d, perhaps with b3d models only, or is it just not possible? <br><br>If I need to convert the animated 3ds models to animated b3d format, what tools can I use to do that?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="422423"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> what about using the bounding Box? it worked for me, but i did use .b3d, dont know about md2, I have had many bad days with md2's! <br><br></td></tr></table><br>
<a name="422522"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> My models are all B3D...it's reassuring in away to know it's not just me getting unreliable results - I've reimported my models at least 20-30 times tweaking setting...the results are always erratic depending on the model pose.<br>Martonic - B3D pipeline is great for getting mdels from Max to Blitz....however once in Max I bet only your first frame of animation will be picked and all other poses ignored unless they are in roughly the same shape as the original pose. <br><br></td></tr></table><br>
<a name="422837"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >martonic</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> LinePick works okay with my animated 3ds models in elliptical or in bounding box pick mode, but it does not work at all in polygon pick mode. I am testing the entity and all of its children for a match to the value returned from LinePick. <br><br></td></tr></table><br>
<a name="422868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I actually went and bought Nuclear Glory but the poly collision is hyper-galactically slow. I'm just using it to stop my player running through the zombies with it's solid and reliable ellipse collisions - so far no speed penalty...but polygons??Phew..they should just cut that crap right out of the dll! From 60fps to 8!!<br><br>I don't think I can get my head around coldet from what I remember. <br><br></td></tr></table><br>
<a name="423114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> what about making boxes and have them attachs to bones?<br><br>myAnimmodel = loadanimmesh("mybug.b3d")<br><br>myHead = findchild(myAnimmodel,"head")<br>myBody = findchild(myAnimmodel,"body")<br><br>myHeadBox = createcube(myHead)<br>myBodyBox = createcube(myBody)<br><br>this could be a crude way of doing that? <br><br></td></tr></table><br>
<a name="423117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jeremy Alessi</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> You should export your models with their pivot at the center of mass, not at their feet (that's annoying to me).  Then you should have collision specific meshes for each style of animation (one standing one crawing etc...) <br><br></td></tr></table><br>
<a name="423118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could actually use sphere pick to see if you are near the mesh with shooting and then use a single triangle and mesh intersect to see if you actually hit <br><br></td></tr></table><br>
<a name="423130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hujiklo</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the suggestions here. They're all going into the swirling well of my poor, poor head. I'm going to have to do some sort of workaround that's for sure.<br>Jeremi - I also repositioned the pivot to where it should be but I still get oddly placed ellipsoids.<br>I did a test that made bullets stop as soon as they hit the ellipsoid of an enemy mesh - Wow! After I'd finished firing about 500 bullets, i had a shape around the enemy mesh that looked like something out of the film 'The Entity'!!! One big, ugly mess of a shape. Still trying to figure out what Bltiz is doing here. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
