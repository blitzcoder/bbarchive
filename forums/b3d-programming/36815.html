<!DOCTYPE html><html lang="en" ><head ><title >move 3d object w mouse</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >move 3d object w mouse</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >move 3d object w mouse</a><br><br>
<a name="403355"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ryan scott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> i can't seem to figure out how to start this.<br><br>i have a level editor that lets me pick a game object, a wall segment, or gate or something.  that works.<br><br>i'd like to be able to move the mouse and have the object follow it.  my camera could be facing any direction, so how can i move the object to the users left if the mouse moves left?<br><br>i'd even be happy if i could have the user press left arrow to have something move left, no matter which way he's facing the object.  right now if you turn around and press left it'll just do something like x=x-1, which is different looking depending on which side of the object the camera is on.<br><br>objects and cameras can be turned any which way.<br><br>anyone know how i'd go about doing this? <br><br></td></tr></table><br>
<a name="403370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> If you want to move an object along the ground, create a plane, and make it pickable, then use camerapick to pick the point under the mouse,  The resulting pick location is the point where the ray from the mouse intersects the plane in the world, and that is where you should place yout object if the mouse has clicked on the object and the mouse is being held down.<br><br>If however you don't want to just move objects around on the "floor" but instead want to move them around other planes you'll have to build a quad mesh for that.<br><br>Alternatively, do this:<br><br>Dx#, Dy#, Dz# is the distance you desire to move the object on each axis of the camera.  ie, Dy# = 1 means move the object one unit "up" realtive to the camera's face direction.<br><br>TFormVector Dx#, Dy#, Dz#, Camera, 0<br>Dx# = TFromedX()<br>Dy# = TFromedY()<br>Dz# = TFromedZ()<br><br>Dx#, Dy#, and Dz# are are now in global space, and if you move your object like so, it will move in the desired direction the desired amount.<br><br>TranslateEntity Entity, Dx#, Dy#, Dz#, 0 <br><br></td></tr></table><br>
<a name="403539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote this code based on a function from the code archives:<br><br>; -----------------------------------------------------------------------------<br>; Positions an entity in 3D from given 2D coordinates<br>Function PositionEntityFrom2D(usecam,entity,x2d#,y2d#,height#=0,camZoom#=1)<br>	gw=GraphicsWidth()<br>	gh=GraphicsHeight()<br>	x#=-((gw/2)-x2d)<br>	y#=(gh/2)-y2d<br>	parent=GetParent(entity)<br>	EntityParent entity,usecam<br>	z#=Abs(EntityZ(entity))<br>	div#=(gw/(2/camzoom))/z<br>	x=x/div<br>	y=y/div<br>	<br>;z distance determined by a straight line from camera, through xyz coordinates, to height<br>	TFormPoint x,y,z,usecam,0<br>	y3d#=height<br>	x3d#=TFormedX()<br>	z3d#=TFormedZ()<br>	EntityParent entity,parent<br>	PositionEntity entity,x3d,y3d,z3d<br>End Function<br>;-----------------------------------------------------------------------------<br><br><br>The code from the archives moved 3D objects on a plane parallel to the camera but I wanted to move the objects around on the ground plane.  The parameters are pretty simple: usecam is the camera, entity is the object being moved, x2d is the mouse's x position, y2d is the mouse's y position, and the optional parameters are height to define the plane to move on and camZoom is the camera's zoom setting. <br><br></td></tr></table><br>
<a name="403698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ryan scott</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks, this is great info! <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
