<!DOCTYPE html><html lang="en" ><head ><title >Verlet Rope</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Verlet Rope</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Verlet Rope</a><br><br>
<a name="924616"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Buggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey all. For maybe the 5th time I sat down and vowed to get a verlet demonstration working... and I'm pleased to say that this time I got farther than ever before. My problem (well, one of them) is that my verlet ropes/chains seem to have a lot of excess energy in them and they take a good minute or so of thrashing around before they settle down. I'm not sure if this is the problem, but I have one link in the chain that's "pinned" to the background and shouldn't move. Looking at examples, it seems that the way to do this is to set the chain's acceleration at zero. But of course when I do this, the tugging of other chain links moves it around slightly. How to I keep it firmly pinned?<br><br>Thanks in advance. <br><br></td></tr></table><br>
<a name="924649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Introduce an inverse mass property to each particle.  The anchor point should have invmass = 0 and constraint relaxation should be weighted based on each particles invmass meaning that the anchor stays in place.<br><br>You will also have to ensure that particles with invmass = 0 are ignored during the update verlet phase.<br><br>Also, do you introduce drag into the system?  If not then you should to ensure that the energy in the system disipates quicker.<br><br>If that doesn't make sense, post your code.<br><br>Stevie <br><br></td></tr></table><br>
<a name="924686"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Buggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks a lot for the reply.<br><br>Oops! I see in my above post that I said "set the chain's acceleration at zero," when I meant the <i>chain link's</i> acceleration.<br><br>That being said, all of the examples I've seen with an invmass just use it to make the pinned link's mass "infinity" (zero acceleration) and the other links have normal acceleration, which I think is what I'm doing, but without a mass value.<br><br>When you say that the pinned link should be ignored, is this for the phase where neighboring links "tug" at it? I think I tried to ignore this, but I got weird things, like the chain mysteriously growing to an infinite length.<br><br>Yes, I use drag.<br><br>I'll keep fiddling, and if I can't do it, I'll post some code. <br><br></td></tr></table><br>
<a name="928708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Buggy</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> So I got it to work... finally!<br><br>I had been using the 2D constraint code that's on Wikipedia, but it had for some reason been giving me a lot of excess energy in the system that would make things thrash and float around weirdly. I changed my code to something like the verlet chain constraint code that someone posted, and it works like a charm (99% of the time).<br><br>My new question is more of a brainstorming one... say I have a chain, and I want a projectile to break the chain and have the chain react (not just breaking, but also being pushed in the direction of the projectile). What are some ways to accomplish this?<br><br>My ideas are to (a) test for collisions between the chain links and the projectile. If there is a collision, set the colliding link's velocity (lastX and lastY values) to match the projectile's, update the chain (so that nearby chain links are also affected), and then break the chain off at that link. The problem with this method is that nothing will happen if the projectile slips <i>between</i> the chain links.<br><br>Alternatively, I could (b) test for collisions between the projectile and the line <i>between</i> the links. If there's a collision, change both nearby links' velocities, and then break the chain there.<br><br>I could also (c) test for collisions between the projectile and the line between the links, but if there's a collision, add two identical <i>new</i> links at the point of collision, set their velocities, and break them apart.<br><br>I'm pretty sure C would be most realistic, but also the most difficult to code and the most likely to cause errors. Right now I'm leaning towards B, but I'd like to know what you guys think. I've never really done this stuff before, so there's most likely a much better way to do it all, and I'd be interested to hear what others have done in the past.<br><br>Also, in rereading this post, I see that I've done a horrific job trying to explain things, and I apologize. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
