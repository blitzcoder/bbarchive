<!DOCTYPE html><html lang="en" ><head ><title >TrisRendered and FPS</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TrisRendered and FPS</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >TrisRendered and FPS</a><br><br>
<a name="325514"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br>i'm currently working some sort of portal engine. Now i'm a litle bit currious about one fact.<br><br>If i render the scene from a point where a large amount of Tris must be renderd i got about 90 FPS (15000 TrisRendered), if i switch my portal engine on the trisRendered drops to about 8000 Polys and the FPS increases to 100 FPS.<br>At that point i would aspect some more increase in FPS's !<br>If i move to a point where about 12000 Polys are rendered i got about 140 FPS ... switching the protale engine on at that point does non optimation due to the architecture. and FPS stays at 140 FPS.<br><br>Now, i wonder ... why does more Polys (12000) is way faster then (8000) on the other position ? <br>I'm currently switching off the non used geometry with HideEntity.<br><br>It seems to me that the hidden Object's are stil calculated in some way.<br><br>Anyone can explain this to me ?<br><br>Thanks in advance <br><br></td></tr></table><br>
<a name="325520"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zmatrix</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> What kinda hardware you running?..Since with 140 fps im guessing its pretty decent Gpu.<br><br>Mustang can probably explain better. :)<br><br>either 1: (unlikely) 8000 polys isnt enough to keep you Gpus vertex caches heated(loaded) and end up loosing a bit of performance becuase your not getting optimum throughput and they still have to be refreshed all the same.<br><br>2: (more likey) the hidden surface removal code itself is taking more Cpu cycles than just throwing all the polys at the gpu. <br>remember Gpu's on modern video cards are im most ways faster then the Cpu of your system and they perform better with large chunks of polygons.<br><br>I bet if you try it on a higher poly level it would work out better say maybe 150-300k polys<br> <br><br><br>Zmatrix <br><br></td></tr></table><br>
<a name="325526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm currently running on a ATI Radeon 9700Pro with 128MB<br><br>the hiddem surface removal only occurse when moving from on visibility zone to an other .. that does not occure when i stand still in a corner. <br>I've measured the time consumption of the other code i run in the main loop, but that only cost about 10 FPS and is always at the same level. <br><br></td></tr></table><br>
<a name="325532"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Poly count decrease doesn't really yeild much of a FPS increase in my experience. More to do with textures and such. I can get up to 500,000 polys on screen, untextured, at around 67 fps. <br><br></td></tr></table><br>
<a name="325540"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i've runned another test with all textures stored in VRAM (flag 256) ... then there is no FPS increase at all with hidden surface removal on ! <br>Well, that points to a texture issue .. but i can't figure out what exactly this can be.<br>Did anyone know more about that internal render stuff ? <br><br></td></tr></table><br>
<a name="325543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you using entityalpha, or hideentity? To take away entities from view? <br><br></td></tr></table><br>
<a name="325549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> i'm using HideEntity.<br><br>I've runned another test:<br>I've removed the shadowmaps (assigned to the entity) it does about 10 FPS increasment<br>then i removed the main textures (assigned to the surfaces) this does about 40-50 FPS increasment <br><br></td></tr></table><br>
<a name="325552"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Surfaces &amp; textures are the main source of slowdown, i believe in blitz3d programs. How big are your textures, dimention wise? Are they square and in power of 2 sizes?<br><br>Bed time for me :) <br><br></td></tr></table><br>
<a name="325563"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> yes, they are square and not bigger than 256 x 256<br><br>I've now tested it with the way bigger orginal textures ( 1024x1024) ... then there is nearly no increase in FPS with removal on. But there is no major slowdown due to the bigger textures!<br><br>well, i'm just a litle concerned about the low FPS on my relativly fast machine ... i developed this removal thing because i've currently have non decoration in the map and this would increase polycount a lot! <br><br></td></tr></table><br>
<a name="325581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bouncer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> What resolution are you using? I think the fluctuations are fillrate related. Polycounts such as 10,000 - 15,000 are too low to properly measure the effeciency of your portal engine on a card like Radeon9700. <br><br></td></tr></table><br>
<a name="325593"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> It seems to me that fillrate, texture usage, etc. should have nothing to do with it.  If I'm interpreting this correctly, turning on the portal system should simply stop certain objects from drawing.<br><br>Are you taking your FPS measurements from the same camera position?  Can you post an example? <br><br></td></tr></table><br>
<a name="325656"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm running it currently on a resolution of 1024 x 768.<br><br>The measurement where allways taken from the same position. <br>The source is much to big to post and the portalsystem works entirly correct and does the poly reduction.<br><br>The only things that i can imagine is that if a lot of surfaces with different textures comes in view the framrate drops ... but in Blitz there is no way to check this out.<br>Would be nice to have some commands to analyse the render process some more.<br>There is a big difference in speed when textures aplied to surfaces instead of entitys ... could the mesh setup be optimized ? Does anyone tested if converting all surfaces to entitys increases performance ? <br><br></td></tr></table><br>
<a name="325699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LT</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> After re-reading the previous posts, I realize that I misunderstood the problem.  I thought you were saying that from certain positions, your framerate was actually dropping when you turned the portal system on !!  My apologies.<br><br>Polycount is just one factor that affects your framerate.  So, there ARE situations that dropping more polys will result in less of a frame rate increase.  If those polys happen to be part of only one or two surfaces, you're not saving that much.<br><br>Converting individual surfaces to entities won't help, btw. <br><br></td></tr></table><br>
<a name="325704"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Another factor that may be skewing the results of your tests is that the 'TrisRendered' command doesn't accurately report the number of tris that are rendered. Tris that are culled by the minimum and maximum camera range can be reported as being rendered, when they are actually not being rendered, for example.<br><br>A lot depends on how standardized your testing procedure is. <br><br></td></tr></table><br>
<a name="325726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Klaas</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> thanks a lot for all the replys .. btw<br>It seems that i can't do a lot to get higher framrates.<br>I think that the framerate depends on the amount of textures that are used (not there size).<br>I will check that this evening !<br><br>@axeman ... i'm currently using a CameaRange that is much greater then the map itself to get the most effect out of the surface removal system.<br><br>But i'm still a litle bit confused about the results ... i can't truly understand what causes those effects !<br><br>Well, i will work on with my system ... i think with more detailed geometry in my map the surface removal will do a good job ... the other thing is a good architecture that allows the system to show it'S strength<br><br>btw ... sorry for my bad english ... i try as hard as i can ;-) <br><br></td></tr></table><br>
<a name="325993"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >poopla</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> You're english is fine, keep working hard :). <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
