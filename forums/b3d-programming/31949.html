<!DOCTYPE html><html lang="en" ><head ><title >Dynamic spherical mapping</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Dynamic spherical mapping</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Dynamic spherical mapping</a><br><br>
<a name="341450"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mathieu A</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! <br>I'd like to know if it's possible to do dynamic spherical mapping with blitz?<br>if yes, How does it work? <br><br></td></tr></table><br>
<a name="341455"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >N</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dynamic?  Well, I'm not sure if the texture filter is a dynamic form or if it's even true sphere mapping, but...<br><br><pre class=code>
Texture = CreateTexture(Width%,Height%,1+2+8+16+32+64) ;64 = Spherical environment mapping
EntityTexture YourEntity,Texture,0,Layer%
</pre><br><br>It works for me, but without a doubt you could write your own sphere-mapping function. <br><br></td></tr></table><br>
<a name="341466"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think he means like reflections. In that case, go with cube-maps. <br><br></td></tr></table><br>
<a name="341473"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Although, if you check out my spinning cube demo on my site (link below) that uses dynamic sphere mapping. <br><br></td></tr></table><br>
<a name="341475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> or even the demo in my sig <br><br></td></tr></table><br>
<a name="341601"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mathieu A</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think that we talk about the same effect what I want to do is to create a effect like this<br><br>www.planethalflife.com/screenshot.asp?src=/half-life2/screenshots/16.jpg<br><br>you see the soldier upstairs, when he shoots there a dynamic light which is projected to the wall. I'd like to do this effect. Swift told me that it's a dynamic spherical lightmap. <br><br>I'd like to know more about this effect! <br><br></td></tr></table><br>
<a name="341689"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Now I know how Rob found out what I was doing. :-) <br><br></td></tr></table><br>
<a name="341698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I remember there was dynamic lighting that looked like that in the last singularity demo. <br><br></td></tr></table><br>
<a name="1173454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to dig another old post the same day. <br><br>Does anyone has the dynamic sphere mapping demo by Rob ?<br><br>If yes, can you please share a fresh link or send it to my email address (see my profile)<br><br>Thanks again ! :) <br><br></td></tr></table><br>
<a name="1173496"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Kryzon</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't have it, but the technique itself is very simple: the texture that has the Spherical Environment flag gets overwritten every frame by a CopyRect call of the updated scene, like a CubeMap (except you're only doing one render, the back one).<br><br>1) Render a small viewport with the content you want to apply to the spherical texture (preferably looking back so it feels like a mirror);<br>2) CopyRect the backbuffer to the spherical texture;<br>3) Render the game view.<br><br>The above per frame. <br><br></td></tr></table><br>
<a name="1173503"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kryzon&gt;&gt;Ok thanks for the explanations. So it is like a mirror effect, i have already done that with Renderworld() + Copyrect()<br><br>What i don't understand :<br><br>1)How a square texture made with Copyrect() can look good when a sphere map has a round shape (it seems the pixels at the corners are distorted to the middle of each side, see the spheremap which is with the teapot demo for example)<br><br>2)How the reflection can be correct, that is when you look at the mesh, the tris in front of the Camera reflect the Player and the environment correctly, knowing the UV coords of the vertices are put in different ways depending on how the UVMapping was done ?<br><br>Thanks, <br><br></td></tr></table><br>
<a name="1173509"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yasha</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> The reflection won't be correct. I assume that in practice it relies on being used on complicated meshes which won't reflect a flat scene, and therefore the user won't be able to tell the difference because they can't actually see a whole reflected image, only that the reflections update in some fashion that matches the way the world moves.<br><br>Spheremaps don't work on flat surfaces anyway, so you're rarely using them in a situation where the user is going to be able to tell. For flat surfaces you need a cubemap.<br><br>The spheremap technique will probably be a lot more convincing if the reflection camera has a very wide FOV, near to 180 degrees, so that it can take in the side details that should be appearing at the edges of the map. You might be able to do some tricks with zooming that also distort the middle, bringing it closer to the real spheremap result. <br><br></td></tr></table><br>
<a name="1173526"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>The spheremap technique will probably be a lot more convincing if the reflection camera has a very wide FOV, near to 180 degrees, so that it can take in the side details that should be appearing at the edges of the map. You might be able to do some tricks with zooming that also distort the middle, bringing it closer to the real spheremap result. <br> <br></div><br><br>Yasha&gt;&gt;Ok. I will try, thanks.<br><br>But i think i will use precalculated cubemaps. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
