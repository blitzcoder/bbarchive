<!DOCTYPE html><html lang="en" ><head ><title >TForm Functions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TForm Functions</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >TForm Functions</a><br><br>
<a name="747578"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zach3D</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> What exactly do the TForm Functions do? (TFormPoint,TFormVector,TFormNormal ect.)<br><br>The blitz manual says "transforms between coordinate systems" But That doesn't explain it to me, what does it do and what is the use? <br><br></td></tr></table><br>
<a name="747675"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >b32</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> When a mesh is loaded in b3d, it consists of vertices. These vertices have a (x,y,z) coordinate.<br>To save memory, one mesh can be used for several entities. An entity takes the original mesh data and transforms it using a transformation matrix.<br>This matrix is scaled, rotated and moved using the entity commands, such as PositionEntity, ScaleEntity and RotateEntity.<br>This means the actual data is not altered, but projected differently when RenderWorld() is called.<br>So with one mesh, you can make multiple entities.<br><br>The TForm commands allow you to do the same with a point. You can rotate, scale and move the point along with an entity.<br>Say we have a cube:<br>cube = CreateCube()<br><br>If you now use TFormPoint to convert the point (0, 0, 1) from the cube to the world (=zero), it will stay the same:<br>TFormPoint 0, 0, 1, cube, 0<br>print TFormedX()<br>print TFormedY()<br>print TFormedZ()<br>--&gt; result = (0,0,1) .. nothing happened<br><br>However, if you rotate the cube:<br>RotateEntity cube, 0, 90, 0<br>and call TFormPoint again<br>print TFormedX()<br>print TFormedY()<br>print TFormedZ()<br>--&gt; result = (-1,0,0) .. rotated 90 degrees<br>The point will be rotated 90 degrees over the y-axis, just as the cube is.<br><br>The main use for this, is when you read the vertex coordinates with VerteX() VertexY() and VertexZ()<br>They will return the original mesh data, so no matter if you Rotate/Scale and Move the entity, they will keep returning the same values.<br>With TFormPoint you can calculate where the vertices are in 'world-space coordinates'.<br>But it can also help determining where a certain 3d point on an object is, in relation to another object, such as a camera.<br><br>The syntax of TFormPoint is<br>TFormPoint x, y, z, from, to<br>Where 'from' and 'to' can be entities, but they can also be zero. When a zero is entered, that means global or world-space coordinates.<br><br>I think the TFormPoint commands are very handy. Especially because my maths are not too good. I wouldn't like to rotate points myself. <br><br></td></tr></table><br>
<a name="747786"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, that really clears a lot up.<br><br>This has inspired some thoughts on more detailed colision testing.<br><br>Would this be fast enough to use in such a way? Of course, dependant on how many points of how many entities/meshes <br><br></td></tr></table><br>
<a name="747797"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SoggyP</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello.<br><br>That's a good explanation that I can understand - are you sure it's correct?  <br><br>:o)<br><br>Goodbye. <br><br></td></tr></table><br>
<a name="747823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>They will return the original mesh data, so no matter if you Rotate/Scale and Move the entity, they will keep returning the same values<br> <br></div><br><br>Not strictly true.  If you use Scaleentity the transformations will be scaled accordingly.<br><br>The tform commands are probably the most useful in the whole blitz command set imo so you should take the time to get used to them.<br><br>There are far more and better uses for these commands though.  One thing I use them for is in simulating friction relative to a tire which is attached to a vehicle for example, the direction the tire is pointing and it's velocity vector are generally going to differ/<br><br>What the following does is convert a global velocity vector into the tire entities local coordinate space.  From there you can simulate a different friction on each axis, relative to the direction/rotation of the tire.  As you can see I reduce the speed by half in the direction perpendicular to the tire direction but not so much for the velocity component facing forward relative to the tire rotation.  The next step is to convert the resulting velocity vector back into world/global coords. <br><br><pre class=code>
TFormVector p\Velocity\x, p\Velocity\y , p\Velocity\z , 0 , TIRE
p\Velocity\x = TFormedX() * .5
p\Velocity\y = TFormedY() 
p\Velocity\z = TFormedZ() * .99
TFormVector p\Velocity\x , p\Velocity\y , p\Velocity\z , TIRE , 0	
</pre> <br><br></td></tr></table><br>
<a name="748328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using the tform commands for a couple of things. I use them with linepick, to make sure the line is picked downwards from the bottom of the entity, but, in the direction of the entities Y axis.<br><br>I'm also using it so my entities in my editor, move in the direction of the mouse. Super useful, as Stevie says, well worth getting to know them :o) <br><br></td></tr></table><br>
<a name="748377"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take it from someone who just spent best part of a week figuring out how to write his own TFormVector TFormPoint and TFormNormal using quaternion math and no helper functions, these three functions are an absolute lifesaver.<br><br>When you see people saying "I don't care if X has shaders and all that cool stuff, I'm sticking with B3D." it's because of functions like this which make your life so much easier.<br><br>I like Ross's example, because I've always used TFormVector for that too. When you want your objects to be moved with the mouse but have a completely free camera, being able to convert a vector from camera space into world space so that you can transform the entity by it is just great. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
