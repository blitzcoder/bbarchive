<!DOCTYPE html><html lang="en" ><head ><title >See through walls</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >See through walls</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >See through walls</a><br><br>
<a name="352692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am writing a FPS and have got the mouse code and first level model complete.  Trouble is if I walk into a wall it stops as expected, however when I use the mouse to look up and down it seems to "ignore" the fact that the wall is solid and allows me to see into the room behind by cutting through it.<br><br>Anyone know a way to fix this ...<br><br>BTW.I have used floorplan 3d to create the basic room layouts which works realy well as you can drop in doors, windows etc then export as a DXF.  Import this into Milkshape then texture as needed.  It is quick and easy and the results are pretty good. <br><br></td></tr></table><br>
<a name="352695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Decrease the Near range of CameraRange.<br><br>Ie, CameraRange camera,0.25,200<br><br>Remember, the bigger the difference between near and far, the lower the resolution of the z buffer. In english this means it's good practise to ensure that the near range is high and the far range is low...<br><br>Near range affects how close you can get without "clipping" an object. Clipping is the term for what you are experiencing. <br><br></td></tr></table><br>
<a name="352697"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's the best approach, but you might also alter your EntityRadius.  With a larger collision radius so that you don't get as close to the wall will prevent clipping from the near clipping plane. <br><br></td></tr></table><br>
<a name="352699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> What you could do, to increase your Z-Buffer range, is do two renders. It shouldn't slow things down really, as your only really rendering the same amount of stuff :) <br><br></td></tr></table><br>
<a name="352700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's odd advice.  Unneccessary for what he's asking, and anyway how would rendering twice help with z-buffering? <br><br></td></tr></table><br>
<a name="352703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> It would help because, you set the camera range to the far settings:<br><br><pre class=code>
CameraRange camera,100,10000
</pre><br><br>render the scene. Make sure the cameraclsmode is set NOT to clear the scene. Then set the camera to render the near stuff<br><br><pre class=code>
CameraRange camera,0.1,100
</pre><br><br><br>then render again. Then you get more rendering accuracy. Was just a passing point :) <br><br></td></tr></table><br>
<a name="352705"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very interesting.  Does that work? (ie. have you tried it?)  If so, that's a good trick to know. <br><br></td></tr></table><br>
<a name="352706"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, it works. It's helpful if you have two things very close that further away, they seem to cut through each other. <br><br></td></tr></table><br>
<a name="352752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats pretty cool. would help minimize/prevent Z buffer fighting. <br><br></td></tr></table><br>
<a name="352805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> It works, i use THREE render passes for this stuff in my game actually.<br><br>Tracer <br><br></td></tr></table><br>
<a name="353472"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for all the input.  I have tries 2 render passes but am still experiencing the problem and getting a lot of flickering.<br><br>Any chance of a full example how this should be done properly. <br><br></td></tr></table><br>
<a name="353565"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> decrease your camerarange near value. The two rendering pass was just a passing point about increasing overall z accuracy.<br><br>try:<br><br><pre class=code>
CameraRange cam 0.1,1000
</pre><br><br>Or, increase your cameras/player collision raduis, so it doesn't get too close to the wall. <br><br></td></tr></table><br>
<a name="353787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guys<br><br>Thanks for the help so far,but I have been testing a lot and heres what is happening.<br><br>I have tha camera parented to a model of a man holding a rifle.  The man is clear and the gun is textured,  The camera is set only to see the gun and parented to the man.  This looks fine and moves around as expected.  I think the proplem is with the fact that when the gun hits the wall it stops as predicted, but if i move the gun up and down it no longer is blocked by the wall and "cuts" through it ignoring any radius settings etc I have set.  Making the radius too big stops the model going through doorways.<br><br>Any ideas ?<br><br>BTW the camera settings offered to date have definately cleaned up the view detail. <br><br></td></tr></table><br>
<a name="353892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this the gun that cutting through? <br><br></td></tr></table><br>
<a name="353998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Genexi2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, you "could" have the gun kinda fall back into the player the closer you shove yer face against the wall, like it would in real life if you ran into a wall and the weapon hit it. :-/ <br><br></td></tr></table><br>
<a name="354057"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes the gun cuts through the wall. I have tried surrounding it with a transparent box but still no joy.<br><br>I think its to do with the centrepoint of the player being too low.<br><br>I may be wring but I think it is pivoting from the feet.<br>I will try and reposition in the modeller and retest. <br><br></td></tr></table><br>
<a name="354069"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, are you sure about the radii? I would test the collisions with a wall and the gun at different angles. Also, are you sure the whole gun mesh is covered by the hitbox/ellipsoid? Or is it just the player (camera) that has the collision detection, so the gun would pass through objects regardless... <br><br></td></tr></table><br>
<a name="354095"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok man, then this is what to do. Set your gun to entityorder -9 or something.<br><br><pre class=code>
EntityOrder gun,-9
</pre><br><br>this should force the gun to be drawn in front of everything else :) <br><br></td></tr></table><br>
<a name="354107"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> a great camera trick which i've used in sota/fmc/&lt;next big thing 2&gt; is to do this everyframe,<br><br>1.Get position of camera.<br>2.Get position of where the camera needs to move to.<br>3.Cast a linepick from player position to new position.<br>4.If hit, change the position of where the camera has to<br>move to to pickedX(),y and z. (Only for that frame.)<br>5.Move the camera smoothly, to the destination, be it <br>original or pick induced.<br><br>The result of this very simple to code routine is a camera that never goes through walls and is never obstructed by geo.(3rd person, first person will just never go through walls obviously) and never jumps, due to the curved movement.<br><br>I have a function that does just this you can use if it helps. <br><br></td></tr></table><br>
<a name="354619"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not perfect but I have managed a much beter result using the info from you guys.<br><br>A combination of entityorder and camerarange has almost removed the issue 100%.<br><br>Now all I need to sort out is what to do to stop the jitter when the camera rotates to is max and min assigned values.<br><br>ie if camerarotate &gt; 300 then camerarotate = 300<br><br>causes an annoying jitter when 300 is reached.  I cant use <br><br>if camerarotate = 300 then camerarotate = 300<br><br>as it does not always work. <br><br></td></tr></table><br>
<a name="354621"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> Whazt is the increment size the camera may change by? this will reflect the severity of the 'jitter'<br><br>If it's 5, then try something like<br><br>If CameraRotate&gt;=296 Then CameraRotate=300<br><br>OR<br><br>In your code where you stipulate the camera being moved (by mouse/whatever) include IF/THEN/ENDIF statementsd around it to ensure CameraRotate will not be increased if equal to the maximum etc. <br><br></td></tr></table><br>
<a name="354623"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shambler</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> It sounds like you are rotating the camera then testing If CameraRotate&gt;300.<br><br>You should do the test before you do the rotation. <br><br></td></tr></table><br>
<a name="354874"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, take the current rotation, before anything is added to it. Store it in a variable. If the current movement, take the camera rotation, too far, then set the rotation back to the old, stored values.<br><br>Also, make sure that the entitypitch (x rotation), doesn't go above 179, or below -179, cause it flips round, and cause a jutter. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
